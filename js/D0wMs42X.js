const _0x29b5c7=(function(){let _0x320943=!![];return function(_0x5ec84a,_0x361ee6){const _0x1dc2da=_0x320943?function(){if(_0x361ee6){const _0x36eb2a=_0x361ee6['apply'](_0x5ec84a,arguments);return _0x361ee6=null,_0x36eb2a;}}:function(){};return _0x320943=![],_0x1dc2da;};}()),_0x1898dd=_0x29b5c7(this,function(){return _0x1898dd['toString']()['search']('(((.+)+)+)'+'+$')['toString']()['constructo'+'r'](_0x1898dd)['search']('(((.+)+)+)'+'+$');});_0x1898dd();const _0x5dbd0c=(function(){let _0x10d5cb=!![];return function(_0x1eec9f,_0x5bfad0){const _0x2dd3cb=_0x10d5cb?function(){if(_0x5bfad0){const _0x979f1f=_0x5bfad0['apply'](_0x1eec9f,arguments);return _0x5bfad0=null,_0x979f1f;}}:function(){};return _0x10d5cb=![],_0x2dd3cb;};}());(function(){_0x5dbd0c(this,function(){const _0x19c169=new RegExp('function\x20*'+'\x5c(\x20*\x5c)'),_0x17c7e7=new RegExp('\x5c+\x5c+\x20*(?:['+'a-zA-Z_$]['+'0-9a-zA-Z_'+'$]*)','i'),_0x39c7d5=_0x8c2aca('init');!_0x19c169['test'](_0x39c7d5+'chain')||!_0x17c7e7['test'](_0x39c7d5+'input')?_0x39c7d5('0'):_0x8c2aca();})();}());const _0x16366f=(function(){let _0x34b72d=!![];return function(_0x4850a6,_0x38b933){const _0x4eac03=_0x34b72d?function(){if(_0x38b933){const _0x2923bf=_0x38b933['apply'](_0x4850a6,arguments);return _0x38b933=null,_0x2923bf;}}:function(){};return _0x34b72d=![],_0x4eac03;};}()),_0x523c86=_0x16366f(this,function(){const _0x1e003d=function(){let _0xbecf50;try{_0xbecf50=Function('return\x20(fu'+'nction()\x20'+('{}.constru'+'ctor(\x22retu'+'rn\x20this\x22)('+'\x20)')+');')();}catch(_0xd5b501){_0xbecf50=window;}return _0xbecf50;},_0x230616=_0x1e003d(),_0x3a4c8a=_0x230616['console']=_0x230616['console']||{},_0x4785a3=['log','warn','info','error','exception','table','trace'];for(let _0x3f5989=-0x163f+-0x160b+-0x2*-0x1625;_0x3f5989<_0x4785a3['length'];_0x3f5989++){const _0x5c4f9c=_0x16366f['constructo'+'r']['prototype']['bind'](_0x16366f),_0xc2d6fb=_0x4785a3[_0x3f5989],_0x568baf=_0x3a4c8a[_0xc2d6fb]||_0x5c4f9c;_0x5c4f9c['__proto__']=_0x16366f['bind'](_0x16366f),_0x5c4f9c['toString']=_0x568baf['toString']['bind'](_0x568baf),_0x3a4c8a[_0xc2d6fb]=_0x5c4f9c;}});_0x523c86();var k0=Object['defineProp'+'erty'],U0=(_0xdb3b47,_0x29470a,_0x119354)=>_0x29470a in _0xdb3b47?k0(_0xdb3b47,_0x29470a,{'enumerable':!(0xd96+-0x1*-0x1b2d+-0x28c3),'configurable':!(-0x8*-0x15c+0x11b8+-0xf*0x1e8),'writable':!(0x20be+-0x91b+-0x17a3),'value':_0x119354}):_0xdb3b47[_0x29470a]=_0x119354,h=(_0x7ab1a4,_0x172dbc,_0x2e793f)=>U0(_0x7ab1a4,typeof _0x172dbc!='symbol'?_0x172dbc+'':_0x172dbc,_0x2e793f),B0=(_0xf36ece=>(_0xf36ece['HIGH']='high',_0xf36ece['MEDIUM']='medium',_0xf36ece['LOW']='low',_0xf36ece['LOW_VR']='lowVR',_0xf36ece))(B0||{});const z0=()=>!HS()&&!WS()&&!GS()&&!V0(),GS=()=>{const _0x2b36fc=navigator['userAgent']['includes']('Macintosh'),_0x26aeb7=navigator['maxTouchPo'+'ints']===-0x246f+0x1d59+0x1*0x71b,_0x8670cb=/^((?!chrome|android).)*safari/i['test'](navigator['userAgent']);return _0x2b36fc&&_0x26aeb7&&_0x8670cb;},HS=()=>navigator['userAgent']['includes']('Quest'),V0=()=>{const _0x5518f1=navigator['userAgent']['toLowerCas'+'e']();return _0x5518f1['includes']('pico')||_0x5518f1['includes']('picolrowse'+'r');},WS=()=>['iOS','Android']['includes'](G0()),FU=()=>new URL(location['href'])['searchPara'+'ms']['has']('nowheel'),NU=()=>new URL(location['href'])['searchPara'+'ms']['has']('nowheel'),G0=()=>{const _0x14d87c=window['navigator']['userAgent']['toLowerCas'+'e'](),_0x22514f=window['navigator']['platform']['toLowerCas'+'e']();return/iphone|ipad|ipod/['test'](_0x14d87c)?'iOS':/android/['test'](_0x14d87c)?'Android':/mac/['test'](_0x22514f)?'macOS':/win/['test'](_0x22514f)?'Windows':/linux/['test'](_0x22514f)?'Linux':'Unknown';};class kU{constructor(){this['HIGH_FPS_T'+'HRESHOLD']=-0x2*-0xab5+0x28b*-0x8+0x1*-0xe5,this['MEDIUM_FPS'+'_THRESHOLD']=-0x50f+-0x919+0xe46,this['HIGH_MEMOR'+'Y_THRESHOL'+'D']=(-0x207c+0x2*0x2e4+0x98*0x2d)*(-0x5ef+-0x1ad1+0x24c0)*(-0x7*0x2ae+-0x1*0x225b+0x391d)*(-0x1*0x25c3+-0x17c3+-0x1*-0x4186),this['MEDIUM_MEM'+'ORY_THRESH'+'OLD']=(-0x263c*0x1+-0x3*0x3a9+-0x3139*-0x1)*(-0x10c0+0xbe6*-0x3+0x3872)*(-0x1a4+0x2123+0x1b7f*-0x1)*(-0x1753+0x1517+0x4*0x18f),this['SCORE_THRE'+'SHOLDS']={'HIGH':0x46,'MEDIUM':0x32,'LOW':0x1e},this['VENDOR_WEI'+'GHTS']={'nvidia':0x1,'amd':0.9,'apple':0.8,'intel':0.6,'qualcomm':0.5,'arm':0.4},this['HIGH_END_P'+'ATTERNS']={'nvidia':[/geforce\s+(?:rtx\s*[3-4]|titan\s*(?:rtx|xp|v))|quadro\s+(?:rtx|a[0-9]+)/i,/a[1-9][0-9]+/i],'amd':[/radeon\s+(?:rx\s*[6-9]|rx\s*7[0-9]+|pro\s*w[5-9])|instinct\s+mi[2-9]/i],'apple':[/m[1-3]\s+(?:pro|max|ultra)?/i]},this['MEDIUM_END'+'_PATTERNS']={'nvidia':[/geforce\s+(?:rtx\s*2|gtx\s*1[6-9])|quadro\s+(?:p[2-9]|t[1-9])/i],'amd':[/radeon\s+(?:rx\s*[4-5]|vega\s*[5-9])|pro\s*w[2-4]/i],'apple':[/a[1-9][0-9]+\s+(?:x|z)?/i]},this['LOW_END_PA'+'TTERNS']={'intel':[/(?:hd|uhd|iris|xe)\s*graphics\s*(?:[6-9][0-9]+|[1-9][0-9]+g)/i],'qualcomm':[/adreno\s*[6-9][0-9]+/i],'arm':[/mali\s*-?(?:g[7-9][0-9]|t[8-9][0-9])/i]};}['getVendorS'+'core'](_0x5a8054){const _0x46f211=_0x5a8054['toLowerCas'+'e']();for(const [_0x53bd49,_0x5e3197]of Object['entries'](this['VENDOR_WEI'+'GHTS']))if(_0x46f211['includes'](_0x53bd49))return _0x5e3197*(-0x1b*-0x154+-0x39*-0x65+-0x25*0x191);return 0x1f87+-0x6d8+-0x187d;}['getModelSc'+'ore'](_0x42e29a,_0x316d89){const _0x27f9a0=_0x42e29a['toLowerCas'+'e'](),_0xf3a9cb=_0x316d89['toLowerCas'+'e']();for(const [_0x3c54d3,_0x3c7a20]of Object['entries'](this['HIGH_END_P'+'ATTERNS']))if(_0x27f9a0['includes'](_0x3c54d3)&&_0x3c7a20['some'](_0x3f9ec8=>_0x3f9ec8['test'](_0xf3a9cb)))return-0x17c5+-0x17*-0x57+0x104e;for(const [_0x44258a,_0x27f76c]of Object['entries'](this['MEDIUM_END'+'_PATTERNS']))if(_0x27f9a0['includes'](_0x44258a)&&_0x27f76c['some'](_0x4ff662=>_0x4ff662['test'](_0xf3a9cb)))return-0xe0c+0x20e8+-0x1296;for(const [_0x1fae2f,_0x579f6b]of Object['entries'](this['LOW_END_PA'+'TTERNS']))if(_0x27f9a0['includes'](_0x1fae2f)&&_0x579f6b['some'](_0x190c85=>_0x190c85['test'](_0xf3a9cb)))return 0xb60+0x745*-0x3+-0x38b*-0x3;return 0x3e3+-0x3fa*0x3+-0xa3*-0xd;}['getMemoryS'+'core'](_0x4518fb){return _0x4518fb?_0x4518fb>=0x1106*0x1+0x4b2d+-0x29*0x11b?-0x25a0+-0x1*0x1daf+0x43b3:_0x4518fb>=0x37cc+-0x3c59+0x23cd?0x1ffb+0xf+-0x1fb0:_0x4518fb>=-0x2d7*-0x1+0x1*0xed5+0x5c4?0x18d*0x13+-0xf26+-0xe01:_0x4518fb>=-0x3*-0xd+-0x1ae+0x1127?-0x1a5f*0x1+-0x2*-0x916+0x1*0x879:_0x4518fb>=-0xb9*0xb+-0x18eb*-0x1+-0x928?-0x98c+-0x159*0xf+0x1dff:0x45e+-0x61*0x50+0x1a24:0x1dc3+-0xed*0x1e+-0x3*0x99;}['getDriverS'+'core'](_0x5c21ad){if(!_0x5c21ad)return 0x6c+0x1*-0x10e9+-0x1*-0x10af;const _0x354989=_0x5c21ad['match'](/20[2-9][0-9]/);if(_0x354989){const _0x4213de=parseInt(_0x354989[0x115b+0x200c+0x1*-0x3167]);if(_0x4213de>=-0xb9c+0x1d3d*-0x1+0x30c0)return 0x2400+0x36c+-0x4e1*0x8;if(_0x4213de>=0x26fd+-0x2*0x31c+-0x18df)return 0x5*-0x19+0xf19*-0x1+0xfe6;if(_0x4213de>=-0x49*-0x1+-0x16d5+0x1*0x1e71)return 0xf08+-0x1a71+0xba5;}return-0x12ef+-0x1d*0xfb+0x2f90;}['evaluateGP'+'U'](_0x54068e){const _0x4565f3=this['getVendorS'+'core'](_0x54068e['vendor']),_0x20db1d=this['getModelSc'+'ore'](_0x54068e['vendor'],_0x54068e['renderer']),_0x26871b=this['getMemoryS'+'core'](_0x54068e['memory']),_0x198495=this['getDriverS'+'core'](_0x54068e['driverVers'+'ion']);return console['log']('GPU:',_0x54068e['vendor']),console['log']('GPU:',_0x54068e['renderer']),console['log']('GPU:',_0x54068e['driverVers'+'ion']),console['table'](_0x54068e),_0x4565f3*(-0x7fd*0x3+0x237f+-0xb88+0.3)+_0x20db1d*(0x93b*0x1+-0x120c+0x3d*0x25+0.4)+_0x26871b*(-0xea6+0x13*-0x1c9+0x3091+0.2)+_0x198495*(0x149*-0x14+-0x166e+-0x1811*-0x2+0.1);}['evaluateCP'+'U'](){const _0x3b693d=navigator['hardwareCo'+'ncurrency'];return _0x3b693d>=-0x15e1+0xbfc+0x9ed?0x71c+-0x1ab9+0x13a0:_0x3b693d>=-0x5f3*-0x3+-0x378+-0x1*0xe5d?0x1*-0x1d13+0x1*-0x25f6+-0x3*-0x1659:0xba*0xa+0xef9*-0x2+0x16af;}['evaluateMe'+'mory'](_0x5ae958){return typeof _0x5ae958=='string'?0x4*0x4c6+-0xc9*-0x22+0x16e5*-0x2:_0x5ae958['totalJSHea'+'pSize'];}['evaluatePe'+'rformance'](_0x34d239){const _0x5a91e=WS(),_0x580ebc=GS(),_0x16a1d7=HS();if(_0x580ebc)return'medium';if(_0x16a1d7)return'lowVR';if(_0x5a91e)return'low';const _0x4292a6=_0x34d239['fps']>=this['HIGH_FPS_T'+'HRESHOLD']?0x15f*-0xf+0x1d97+-0x903:_0x34d239['fps']>=this['MEDIUM_FPS'+'_THRESHOLD']?0x24ed+0xa39*-0x2+0x1079*-0x1:0x301+0x1b2c+-0x1e2c;let _0x3868a8=0x1bc6+-0x1*-0xfc7+0xe84*-0x3;typeof _0x34d239['gpuInfo']!='string'&&(_0x3868a8=this['evaluateGP'+'U'](_0x34d239['gpuInfo']));const _0x543122=this['evaluateCP'+'U'](),_0x333507=this['evaluateMe'+'mory'](_0x34d239['memoryInfo'])>=this['HIGH_MEMOR'+'Y_THRESHOL'+'D']?-0x39b+0x1*-0x15a6+0x1944:this['evaluateMe'+'mory'](_0x34d239['memoryInfo'])>=this['MEDIUM_MEM'+'ORY_THRESH'+'OLD']?-0x1*-0x9d3+-0x9b*0x17+0x41c:0x1f65+-0x1456+0x587*-0x2,_0x3b102e=_0x4292a6+_0x3868a8+_0x543122+_0x333507;return console['log']('GPU:',_0x4292a6,_0x3868a8,_0x543122,_0x333507),_0x3b102e>=this['SCORE_THRE'+'SHOLDS']['HIGH']?'high':_0x3b102e>=this['SCORE_THRE'+'SHOLDS']['MEDIUM']?'medium':'low';}['getModelQu'+'alitySetti'+'ngs'](_0x39fc18){return{'high':{'textureQuality':'high'},'medium':{'textureQuality':'medium'},'low':{'textureQuality':'low'},'lowVR':{'textureQuality':'lowVR'}}[_0x39fc18];}}const H0=()=>{globalThis['requestIdl'+'eCallback']=globalThis['requestIdl'+'eCallback']||function(_0x2994ed){var _0x28d88f=Date['now']();return setTimeout(function(){_0x2994ed({'didTimeout':!(-0x2*-0x717+0x1*0x127d+-0x20aa),'timeRemaining':function(){return Math['max'](0xb5c*0x2+-0x2b*-0xb2+0x3*-0x118a,-0x1e3c+-0x2*0x2a1+-0x23b*-0x10-(Date['now']()-_0x28d88f));}});},-0x1a1*0x13+-0x2*-0x10e1+-0x2ce);},globalThis['cancelIdle'+'Callback']=globalThis['cancelIdle'+'Callback']||function(_0x42bdaa){clearTimeout(_0x42bdaa);};},W0='RenderFram'+'e',Ld='RenderFram'+'eTime',Pm='RenderPass',cn='RenderPass'+'Detail',Vl='RenderActi'+'on',Mm='RenderTarg'+'etAlloc',Dm='TextureAll'+'oc',Im='ShaderAllo'+'c',$0='ShaderComp'+'ile',X0='VRAM.Textu'+'re',q0='VRAM.Vb',j0='VRAM.Ib',Y0='BindGroupA'+'lloc',K0='BindGroupF'+'ormatAlloc',Vs='Element',Z0='Textures',Gl='GpuTimings',hn='$_CURRENT_'+'SDK_VERSIO'+'N',$S='$_CURRENT_'+'SDK_REVISI'+'ON';function ah(_0x2fbd47,_0x590197){for(const _0x5857d3 in _0x590197){const _0x1ee956=_0x590197[_0x5857d3];Array['isArray'](_0x1ee956)?_0x2fbd47[_0x5857d3]=ah([],_0x1ee956):_0x1ee956&&typeof _0x1ee956=='object'?_0x2fbd47[_0x5857d3]=ah({},_0x1ee956):_0x2fbd47[_0x5857d3]=_0x1ee956;}return _0x2fbd47;}const Q0={'create'(){return('xxxxxxxx-x'+'xxx-4xxx-y'+'xxx-xxxxxx'+'xxxxxx')['replace'](/[xy]/g,_0x1abade=>{const _0x2599dc=Math['random']()*(0x1*0x2113+-0x1*0x2099+-0x6a)|-0x21b3+-0x591+0xe*0x2ce;return(_0x1abade==='x'?_0x2599dc:_0x2599dc&0x1cce+0xa*-0xba+-0x1587|-0x23c5+-0x1ea1+-0x305*-0x16)['toString'](-0x1b7*-0x6+-0x56*-0x2+-0x2d*0x3e);});}},xe={'delimiter':'/','join'(..._0x1a1e72){let _0x60e49d=_0x1a1e72[-0x1*-0x814+0x6*-0x50b+0x2*0xb17];for(let _0x51a262=-0xcf0+0x1*-0x1613+0x1*0x2303;_0x51a262<_0x1a1e72['length']-(-0x3a4*-0x4+-0x2135*-0x1+-0x2fc4);_0x51a262++){const _0x5f573e=_0x1a1e72[_0x51a262],_0x4f7d4e=_0x1a1e72[_0x51a262+(-0xed5+0x2334+-0x145e)];if(_0x4f7d4e[-0x2*-0x70b+0x5*-0x4+-0xe02]===xe['delimiter']){_0x60e49d=_0x4f7d4e;continue;}_0x5f573e&&_0x4f7d4e&&_0x5f573e[_0x5f573e['length']-(-0x23*0x110+-0x598+0x2ac9)]!==xe['delimiter']&&_0x4f7d4e[-0x92*-0x5+-0x1*-0x206c+-0x2346]!==xe['delimiter']?_0x60e49d+=xe['delimiter']+_0x4f7d4e:_0x60e49d+=_0x4f7d4e;}return _0x60e49d;},'normalize'(_0x26c89c){const _0x5cd6b9=_0x26c89c['startsWith'](xe['delimiter']),_0xa66389=_0x26c89c['endsWith'](xe['delimiter']),_0x366a96=_0x26c89c['split']('/');let _0x9fd6e0='',_0x44055f=[];for(let _0x4eae84=0x1241+0xb*-0xc4+-0x9d5*0x1;_0x4eae84<_0x366a96['length'];_0x4eae84++)if(_0x366a96[_0x4eae84]!==''&&_0x366a96[_0x4eae84]!=='.'){if(_0x366a96[_0x4eae84]==='..'&&_0x44055f['length']>-0x203d*0x1+-0x2*-0x301+0x1a3b){_0x44055f=_0x44055f['slice'](0x8e2+0x211a+-0x1*0x29fc,_0x44055f['length']-(0x7bb*-0x1+0x13e6+-0xc29*0x1));continue;}_0x4eae84>0x106b+-0x2017+0xfac&&_0x44055f['push'](xe['delimiter']),_0x44055f['push'](_0x366a96[_0x4eae84]);}return _0x9fd6e0=_0x44055f['join'](''),!_0x5cd6b9&&_0x9fd6e0[0xd4d*0x1+0x1531+-0x227e*0x1]===xe['delimiter']&&(_0x9fd6e0=_0x9fd6e0['slice'](-0x219c+0x227*-0x3+0x2812)),_0xa66389&&_0x9fd6e0[_0x9fd6e0['length']-(-0x18*-0x82+0x56*-0x1+-0xbd9*0x1)]!==xe['delimiter']&&(_0x9fd6e0+=xe['delimiter']),_0x9fd6e0;},'split'(_0x5661fc){const _0x273b06=_0x5661fc['lastIndexO'+'f'](xe['delimiter']);return _0x273b06!==-(-0x1cdf*-0x1+0x1776+0x2*-0x1a2a)?[_0x5661fc['substring'](0x563+-0x1*-0x5d1+-0xb34,_0x273b06),_0x5661fc['substring'](_0x273b06+(0x132c+0xb98+-0x1ec3))]:['',_0x5661fc];},'getBasename'(_0x49caa2){return xe['split'](_0x49caa2)[0x1*-0x229+-0x406+0x630];},'getDirectory'(_0x1af213){return xe['split'](_0x1af213)[0x2351+0x25*0x81+0x1afb*-0x2];},'getExtension'(_0x3d295d){const _0x10de3b=_0x3d295d['split']('?')[-0x225d+-0x1*0x1073+-0x10*-0x32d]['split']('.')['pop']();return _0x10de3b!==_0x3d295d?'.'+_0x10de3b:'';},'isRelativePath'(_0xd6b60d){return _0xd6b60d['charAt'](-0x4e5*-0x3+0x791*0x1+-0x1640)!=='/'&&_0xd6b60d['match'](/:\/\//)===null;},'extractPath'(_0xb25955){let _0x281676='';const _0x3ed04f=_0xb25955['split']('/');let _0x3bfc2b=0x4*-0x425+-0x8*-0x90+-0x2*-0x60a;if(_0x3ed04f['length']>0x6ad*-0x3+0x18f4+-0x4ec){if(xe['isRelative'+'Path'](_0xb25955)){if(_0x3ed04f[-0x4*-0x3cb+0x2256+0x3182*-0x1]==='.'){for(_0x3bfc2b=0x1438+-0xed*0x2+0x2*-0x92f;_0x3bfc2b<_0x3ed04f['length']-(0x4d0*-0x8+-0x14ac+0x3b2d);++_0x3bfc2b)_0x281676+=_0x3bfc2b===-0x833*0x2+-0x1759+0x27bf?_0x3ed04f[_0x3bfc2b]:'/'+_0x3ed04f[_0x3bfc2b];}else{if(_0x3ed04f[0x6*0x17a+0xa3*0x7+-0xd51]==='..'){for(_0x3bfc2b=-0x536+-0x835+0x1*0xd6b;_0x3bfc2b<_0x3ed04f['length']-(-0xd*0x3+-0x9a5+0x9cd);++_0x3bfc2b)_0x281676+=_0x3bfc2b===0x14e8+-0x97*-0x2a+-0x2dae*0x1?_0x3ed04f[_0x3bfc2b]:'/'+_0x3ed04f[_0x3bfc2b];}else{for(_0x281676='.',_0x3bfc2b=-0x5f5*0x5+0x52f*0x1+0x5e*0x43;_0x3bfc2b<_0x3ed04f['length']-(0x12a*0xf+-0x3*-0xc9d+0xdd3*-0x4);++_0x3bfc2b)_0x281676+='/'+_0x3ed04f[_0x3bfc2b];}}}else{for(_0x3bfc2b=-0x22e+-0x1855+0x1a83;_0x3bfc2b<_0x3ed04f['length']-(-0x513*0x1+-0x17a6+-0xe5d*-0x2);++_0x3bfc2b)_0x281676+=_0x3bfc2b===-0x1a86+0x1b*0x48+0x12ee?_0x3ed04f[_0x3bfc2b]:'/'+_0x3ed04f[_0x3bfc2b];}}return _0x281676;}},J0=()=>{let _0x395b50=!(0x8a7*0x3+-0x13b+-0x1*0x18b9);try{const _0x24e4e2=Object['defineProp'+'erty']({},'passive',{'get':function(){return _0x395b50=!(0x89*-0x7+-0x2236+-0x3*-0xca7),!(-0x15bc+-0x1*0xcf1+0x22ae);}});window['addEventLi'+'stener']('testpassiv'+'e',null,_0x24e4e2),window['removeEven'+'tListener']('testpassiv'+'e',null,_0x24e4e2);}catch{}return _0x395b50;},Bi=typeof navigator<'u'?navigator['userAgent']:'',nh=typeof window<'u'?'browser':typeof global<'u'?'node':'worker',Lm=/android/i['test'](Bi)?'android':/ip(?:[ao]d|hone)/i['test'](Bi)?'ios':/windows/i['test'](Bi)?'windows':/mac os/i['test'](Bi)?'osx':/linux/i['test'](Bi)?'linux':/cros/i['test'](Bi)?'cros':null,ex=nh!=='browser'?null:/Chrome\/|Chromium\/|Edg.*\//['test'](Bi)?'chrome':/Safari\//['test'](Bi)?'safari':/Firefox\//['test'](Bi)?'firefox':'other',tx=nh==='browser'&&('ontouchsta'+'rt'in window||'maxTouchPo'+'ints'in navigator&&navigator['maxTouchPo'+'ints']>-0xa7a+0x2b1*-0x8+-0xf1*-0x22),sx=J0(),Ae={'name':Lm,'browser':nh==='browser','worker':nh==='worker','android':Lm==='android','touch':tx,'passiveEvents':sx,'browserName':ex},XS='abcdefghij'+'klmnopqrst'+'uvwxyz',qS='ABCDEFGHIJ'+'KLMNOPQRST'+'UVWXYZ',ix=XS+qS,Bf=0x4e57+0xb565+0x24*-0x137,jS=0x13*-0xa2b+-0x3a67*0x1+0x1d797,Rm=0x2c15+0x13803+-0x8818,rx=-0x2*0xf07+0x187f2+-0x89e5,ax=-0x253a+-0xd*0x2cf+-0x16*-0x4cf,Om=-0x3e*-0xeb8+-0x18b8f+-0x131b,Fm=0x123*-0x345+-0x27836+-0x1a054*-0x5,nx=-0x282e0+0x1*-0x136df+0x13ea*0x49,ox=-0x18339+0x25dc6+0x11972,lx=0x2116+-0x3100+0x30ba,cx=-0x1416*-0x1+-0x2323+0x1*0x300c,zf=0x16a25+0x37*-0x42d+0x262*0x33,Vf=0x1511+-0x7f6a+0x16868;function Gf(_0x345697,_0x454e1d=0x6e6*-0x5+0x198+-0x2*-0x1073){const _0x1ee347=_0x345697['length'];if(_0x454e1d<-0xa8*0x17+-0x96d*-0x1+0x5ab*0x1||_0x454e1d>=_0x1ee347)return null;const _0x54ee67=_0x345697['charCodeAt'](_0x454e1d);if(_0x1ee347>-0x1f0*0x1+0x724+-0x1*0x533&&_0x54ee67>=Bf&&_0x54ee67<=jS){const _0x1fab23=_0x345697['charCodeAt'](_0x454e1d+(-0xf79+0x2*0x13a+0xd06));if(_0x1fab23>=Rm&&_0x1fab23<=rx)return{'code':(_0x54ee67-Bf)*(-0x1839*0x1+-0x1229+0x2e62)+_0x1fab23-Rm+(0x1e65f+-0xb*-0xf76+-0x857b*0x3),'long':!(0x1125+-0x1*-0x1549+0x266e*-0x1)};}return{'code':_0x54ee67,'long':!(-0xc37+0x206*-0x7+0x1a62)};}function fr(_0x351e24,_0x2970dc,_0xe09841){if(!_0x351e24)return!(0x1f*0xef+0x1*-0x15b4+-0x2*0x39e);const _0x1d1ddd=Gf(_0x351e24);if(_0x1d1ddd){const _0x1d1f80=_0x1d1ddd['code'];return _0x1d1f80>=_0x2970dc&&_0x1d1f80<=_0xe09841;}return!(0x21d7*0x1+-0x95b+-0x187b);}function hx(_0x44fd62,_0x4ec444){if(_0x4ec444===_0x44fd62['length']-(-0x1ff9+0x1*-0x1252+0x4a*0xae))return 0xa*0x2f3+0x19bf*-0x1+0x1*-0x3be;if(fr(_0x44fd62[_0x4ec444],Bf,jS)){const _0x46fca4=_0x44fd62['substring'](_0x4ec444,_0x4ec444+(-0xbdf+0x4b2+0x72f)),_0x4e0f44=_0x44fd62['substring'](_0x4ec444+(-0x1b91*-0x1+-0x9f*0x15+0x4*-0x3a1),_0x4ec444+(0x190c+-0x454*-0x4+0x28*-0x10f));return fr(_0x4e0f44,nx,ox)||fr(_0x46fca4,Om,Fm)&&fr(_0x4e0f44,Om,Fm)?0x1572*0x1+-0x1*-0x1a6+-0x1714:fr(_0x4e0f44,zf,Vf)?-0x1e1f+0x1d60+-0xc2*-0x1:-0xa3*-0x15+0x221+-0xf7e;}return fr(_0x44fd62[_0x4ec444+(0x176f+0x21a7*0x1+-0x3915*0x1)],zf,Vf)?0x530*0x1+0x21dd*-0x1+-0x419*-0x7:0x268d*-0x1+0x2589+0x1d*0x9;}const Hc={'ASCII_LOWERCASE':XS,'ASCII_UPPERCASE':qS,'ASCII_LETTERS':ix,'format'(_0x52d2ef,..._0x2ea4b6){for(let _0x1d80e3=0x2451+0xb37+-0x9*0x548;_0x1d80e3<_0x2ea4b6['length'];_0x1d80e3++)_0x52d2ef=_0x52d2ef['replace']('{'+_0x1d80e3+'}',_0x2ea4b6[_0x1d80e3]);return _0x52d2ef;},'getCodePoint'(_0x1d7ba9,_0x55cdbf){const _0x2e216b=Gf(_0x1d7ba9,_0x55cdbf);return _0x2e216b&&_0x2e216b['code'];},'getCodePoints'(_0x2d7037){if(typeof _0x2d7037!='string')throw new TypeError('Not\x20a\x20stri'+'ng');let _0x24e47d=-0x283*-0xe+-0x615*-0x5+-0x4193;const _0x14b032=[];let _0x599920;for(;_0x599920=Gf(_0x2d7037,_0x24e47d);)_0x14b032['push'](_0x599920['code']),_0x24e47d+=_0x599920['long']?-0x2519+0x145c+-0x3*-0x595:0x358+0x9f*-0x35+0x9dc*0x3;return _0x14b032;},'getSymbols'(_0x13c1c0){if(typeof _0x13c1c0!='string')throw new TypeError('Not\x20a\x20stri'+'ng');let _0x246321=0x1*0x1dd9+-0x1*0x14bf+-0x91a;const _0x475a15=_0x13c1c0['length'],_0x59424a=[];let _0x5d1736=-0x1*-0xef9+0x1327*-0x1+-0xa*-0x6b,_0x561e0f;for(;_0x246321<_0x475a15;){if(_0x5d1736+=hx(_0x13c1c0,_0x246321+_0x5d1736),_0x561e0f=_0x13c1c0[_0x246321+_0x5d1736],fr(_0x561e0f,lx,cx)&&(_0x561e0f=_0x13c1c0[_0x246321+_0x5d1736++]),fr(_0x561e0f,zf,Vf)&&(_0x561e0f=_0x13c1c0[_0x246321+_0x5d1736++]),_0x561e0f&&_0x561e0f['charCodeAt'](0x2*0x1e+-0x1690+0x1654)===ax){_0x561e0f=_0x13c1c0[_0x246321+_0x5d1736++];continue;}const _0x330f30=_0x13c1c0['substring'](_0x246321,_0x246321+_0x5d1736);_0x59424a['push'](_0x330f30),_0x246321+=_0x5d1736,_0x5d1736=0x11ca+-0x1305+0x13b;}return _0x59424a;},'fromCodePoint'(..._0xfb16a){return _0xfb16a['map'](_0x17723d=>_0x17723d>0x788e*-0x2+0xa282+0x14e99?(_0x17723d-=0xa269*0x3+-0x11d86+0x29*0x153,String['fromCharCo'+'de']((_0x17723d>>0xc2+0x2498+-0x2550)+(0x7f3+0x3df5+0x9218),_0x17723d%(-0x2c8+-0x61e+0x7f*0x1a)+(0x8f*0x119+0x1537d+-0x11474))):String['fromCharCo'+'de'](_0x17723d))['join']('');}},Zr=class Zr{static['set'](_0x468c9d,_0x10a3bc=!(-0x1f7*-0x2+-0x153*0x2+-0x2*0xa4)){_0x10a3bc?Zr['_traceChan'+'nels']['add'](_0x468c9d):Zr['_traceChan'+'nels']['delete'](_0x468c9d);}static['get'](_0x4fbe6e){return Zr['_traceChan'+'nels']['has'](_0x4fbe6e);}};h(Zr,'_traceChan'+'nels',new Set()),h(Zr,'stack',!(0x37+-0x1*-0x2258+-0x2*0x1147));let mi=Zr;const Vt=class Vt{static['deprecated'](_0x2257f9){Vt['_loggedMes'+'sages']['has'](_0x2257f9)||(Vt['_loggedMes'+'sages']['add'](_0x2257f9),console['warn']('DEPRECATED'+':\x20'+_0x2257f9));}static['removed'](_0x1ce859){Vt['_loggedMes'+'sages']['has'](_0x1ce859)||(Vt['_loggedMes'+'sages']['add'](_0x1ce859),console['error']('REMOVED:\x20'+_0x1ce859));}static['assertDepr'+'ecated'](_0x399728,_0x56da92){_0x399728||Vt['deprecated'](_0x56da92);}static['assert'](_0x5e9d3e,..._0x51a641){_0x5e9d3e||console['error']('ASSERT\x20FAI'+'LED:\x20',..._0x51a641);}static['assertDest'+'royed'](_0x46e511){var _0x46eec1;if(_0x46e511!=null&&_0x46e511['__alreadyD'+'estroyed']){const _0x41739e='['+((_0x46eec1=_0x46e511['constructo'+'r'])==null?void(-0x1*-0xebb+0x1b2d+-0x29e8):_0x46eec1['name'])+(']\x20with\x20nam'+'e\x20[')+_0x46e511['name']+(']\x20has\x20alre'+'ady\x20been\x20d'+'estroyed,\x20'+'and\x20cannot'+'\x20be\x20used.');Vt['_loggedMes'+'sages']['has'](_0x41739e)||(Vt['_loggedMes'+'sages']['add'](_0x41739e),console['error']('ASSERT\x20FAI'+'LED:\x20',_0x41739e,_0x46e511));}}static['call'](_0x1a984d){_0x1a984d();}static['log'](..._0x6bb18f){console['log'](..._0x6bb18f);}static['logOnce'](_0x4049c1,..._0x2bf0a0){Vt['_loggedMes'+'sages']['has'](_0x4049c1)||(Vt['_loggedMes'+'sages']['add'](_0x4049c1),console['log'](_0x4049c1,..._0x2bf0a0));}static['warn'](..._0x15b28e){console['warn'](..._0x15b28e);}static['warnOnce'](_0x2f6331,..._0x3615a9){Vt['_loggedMes'+'sages']['has'](_0x2f6331)||(Vt['_loggedMes'+'sages']['add'](_0x2f6331),console['warn'](_0x2f6331,..._0x3615a9));}static['error'](..._0x1269b1){console['error'](..._0x1269b1);}static['errorOnce'](_0x39b233,..._0x1e7f63){Vt['_loggedMes'+'sages']['has'](_0x39b233)||(Vt['_loggedMes'+'sages']['add'](_0x39b233),console['error'](_0x39b233,..._0x1e7f63));}static['trace'](_0x12f5c0,..._0x2e32f2){mi['get'](_0x12f5c0)&&(console['groupColla'+'psed'](_0x12f5c0['padEnd'](-0x10c8*0x2+0x38e+0x1e16,'\x20')+'|',..._0x2e32f2),console['groupEnd']());}};h(Vt,'_loggedMes'+'sages',new Set());let w=Vt;class Ea{static['setName'](_0x581881,_0x451947){_0x581881&&(_0x581881['name']=_0x451947);}static['setLabel'](_0x35ab51,_0x411f3f){_0x35ab51&&(_0x35ab51['label']=_0x411f3f);}static['setDestroy'+'ed'](_0x2cef4f){_0x2cef4f&&(_0x2cef4f['__alreadyD'+'estroyed']=!(0x1d86+0x2442+-0x5*0xd28));}}class dx{constructor(_0x5ce598,_0xe3c679,_0x255167,_0x2c3465,_0x47036e=!(0x4*0x26+-0x1c8c+0x1*0x1bf5)){h(this,'handler'),h(this,'name'),h(this,'callback'),h(this,'scope'),h(this,'_once'),h(this,'_removed',!(0x1109+0xbe7*-0x1+-0x521)),(this['handler']=_0x5ce598,this['name']=_0xe3c679,this['callback']=_0x255167,this['scope']=_0x2c3465,this['_once']=_0x47036e);}['off'](){this['_removed']||this['handler']['offByHandl'+'e'](this);}['on'](_0x53e7ce,_0x1c3cc4,_0x310f7e=this){return w['deprecated']('Using\x20chai'+'ning\x20with\x20'+'EventHandl'+'er.on\x20is\x20d'+'eprecated,'+'\x20subscribe'+'\x20to\x20an\x20eve'+'nt\x20from\x20Ev'+'entHandler'+'\x20directly\x20'+'instead.'),this['handler']['_addCallba'+'ck'](_0x53e7ce,_0x1c3cc4,_0x310f7e,!(0x100f+-0x17dd+0x7cf));}['once'](_0x4d5f18,_0x550658,_0x3ae5fd=this){return w['deprecated']('Using\x20chai'+'ning\x20with\x20'+'EventHandl'+'er.once\x20is'+'\x20deprecate'+'d,\x20subscri'+'be\x20to\x20an\x20e'+'vent\x20from\x20'+'EventHandl'+'er\x20directl'+'y\x20instead.'),this['handler']['_addCallba'+'ck'](_0x4d5f18,_0x550658,_0x3ae5fd,!(-0x1b7*0x1+0x94d+0x3cb*-0x2));}set['removed'](_0xc24dc2){_0xc24dc2&&(this['_removed']=!(0x1aee+0x2286+-0x3d74));}get['removed'](){return this['_removed'];}['toJSON'](_0x2ea2bb){}}class me{constructor(){h(this,'_callbacks',new Map()),h(this,'_callbackA'+'ctive',new Map());}['initEventH'+'andler'](){this['_callbacks']=new Map(),this['_callbackA'+'ctive']=new Map();}['_addCallba'+'ck'](_0x18f7d2,_0x2af253,_0x2a0fe3,_0x1a8d0e){if((!_0x18f7d2||typeof _0x18f7d2!='string'||!_0x2af253)&&console['warn']('EventHandl'+'er:\x20subscr'+'ibing\x20to\x20a'+'n\x20event\x20('+_0x18f7d2+(')\x20with\x20mis'+'sing\x20argum'+'ents'),_0x2af253),this['_callbacks']['has'](_0x18f7d2)||this['_callbacks']['set'](_0x18f7d2,[]),this['_callbackA'+'ctive']['has'](_0x18f7d2)){const _0x504da4=this['_callbackA'+'ctive']['get'](_0x18f7d2);_0x504da4&&_0x504da4===this['_callbacks']['get'](_0x18f7d2)&&this['_callbackA'+'ctive']['set'](_0x18f7d2,_0x504da4['slice']());}const _0x40a8c9=new dx(this,_0x18f7d2,_0x2af253,_0x2a0fe3,_0x1a8d0e);return this['_callbacks']['get'](_0x18f7d2)['push'](_0x40a8c9),_0x40a8c9;}['on'](_0x306104,_0x57fe3b,_0x1b6fa4=this){return this['_addCallba'+'ck'](_0x306104,_0x57fe3b,_0x1b6fa4,!(-0x1722+0x7*-0x255+0x2776));}['once'](_0x36aa61,_0x4cad9f,_0x4b61ec=this){return this['_addCallba'+'ck'](_0x36aa61,_0x4cad9f,_0x4b61ec,!(-0xb9c+-0x1*-0x57d+0x61f*0x1));}['off'](_0x52af08,_0x550ebb,_0xd3371d){if(_0x52af08)this['_callbackA'+'ctive']['has'](_0x52af08)&&this['_callbackA'+'ctive']['get'](_0x52af08)===this['_callbacks']['get'](_0x52af08)&&this['_callbackA'+'ctive']['set'](_0x52af08,this['_callbackA'+'ctive']['get'](_0x52af08)['slice']());else{for(const [_0x20edbf,_0x1a2cc]of this['_callbackA'+'ctive'])this['_callbacks']['has'](_0x20edbf)&&this['_callbacks']['get'](_0x20edbf)===_0x1a2cc&&this['_callbackA'+'ctive']['set'](_0x20edbf,_0x1a2cc['slice']());}if(_0x52af08){if(_0x550ebb){const _0x4fc26a=this['_callbacks']['get'](_0x52af08);if(!_0x4fc26a)return this;for(let _0x1624b8=-0x4ad*0x4+-0x335*0xb+-0xd*-0x427;_0x1624b8<_0x4fc26a['length'];_0x1624b8++)_0x4fc26a[_0x1624b8]['callback']===_0x550ebb&&(_0xd3371d&&_0x4fc26a[_0x1624b8]['scope']!==_0xd3371d||(_0x4fc26a[_0x1624b8]['removed']=!(0x32*-0xc5+0x19b6*-0x1+0x4030),_0x4fc26a['splice'](_0x1624b8,-0x2a1*0xb+-0x7*0x8e+0xdd*0x26),_0x1624b8--));_0x4fc26a['length']===0x9*-0x15f+0x3*-0x159+0x1062&&this['_callbacks']['delete'](_0x52af08);}else{const _0x316cd8=this['_callbacks']['get'](_0x52af08);if(_0x316cd8){for(let _0x34a239=0x1*-0x11d2+0x155a+0x1*-0x388;_0x34a239<_0x316cd8['length'];_0x34a239++)_0x316cd8[_0x34a239]['removed']=!(-0x16da+0xd03+0x9d7);this['_callbacks']['delete'](_0x52af08);}}}else{for(const _0x4fbd2e of this['_callbacks']['values']())for(let _0x3d2d7e=-0xac7+0x38*-0x8e+0x29d7*0x1;_0x3d2d7e<_0x4fbd2e['length'];_0x3d2d7e++)_0x4fbd2e[_0x3d2d7e]['removed']=!(-0x74f+0xf00+0x1*-0x7b1);this['_callbacks']['clear']();}return this;}['offByHandl'+'e'](_0x3827e5){const _0x396a3a=_0x3827e5['name'];_0x3827e5['removed']=!(-0x24c1+0x2635+-0x174*0x1),this['_callbackA'+'ctive']['has'](_0x396a3a)&&this['_callbackA'+'ctive']['get'](_0x396a3a)===this['_callbacks']['get'](_0x396a3a)&&this['_callbackA'+'ctive']['set'](_0x396a3a,this['_callbackA'+'ctive']['get'](_0x396a3a)['slice']());const _0x503aa3=this['_callbacks']['get'](_0x396a3a);if(!_0x503aa3)return this;const _0xb01961=_0x503aa3['indexOf'](_0x3827e5);return _0xb01961!==-(0x2fb+-0x16*0x167+0x1be0)&&(_0x503aa3['splice'](_0xb01961,0x175+-0x1*-0x1711+-0x1885),_0x503aa3['length']===0x12a5+-0x2248+0xfa3*0x1&&this['_callbacks']['delete'](_0x396a3a)),this;}['fire'](_0x2ae52f,_0x1f8356,_0x3130fe,_0x2d27b9,_0x59a993,_0x38a6f4,_0x50d9b7,_0x1971f4,_0x12dadd){if(!_0x2ae52f)return this;const _0xfaec11=this['_callbacks']['get'](_0x2ae52f);if(!_0xfaec11)return this;let _0x2d957c;this['_callbackA'+'ctive']['has'](_0x2ae52f)?this['_callbackA'+'ctive']['get'](_0x2ae52f)!==_0xfaec11&&(_0x2d957c=_0xfaec11['slice']()):this['_callbackA'+'ctive']['set'](_0x2ae52f,_0xfaec11);for(let _0x299344=-0xb8c+0xef*0x2+-0x33a*-0x3;(_0x2d957c||this['_callbackA'+'ctive']['get'](_0x2ae52f))&&_0x299344<(_0x2d957c||this['_callbackA'+'ctive']['get'](_0x2ae52f))['length'];_0x299344++){const _0x3e68ba=(_0x2d957c||this['_callbackA'+'ctive']['get'](_0x2ae52f))[_0x299344];if(_0x3e68ba['callback']&&(_0x3e68ba['callback']['call'](_0x3e68ba['scope'],_0x1f8356,_0x3130fe,_0x2d27b9,_0x59a993,_0x38a6f4,_0x50d9b7,_0x1971f4,_0x12dadd),_0x3e68ba['_once'])){const _0x26e04e=this['_callbacks']['get'](_0x2ae52f),_0x3195cd=_0x26e04e?_0x26e04e['indexOf'](_0x3e68ba):-(-0x1167+-0xb17*0x1+0x5*0x5b3);if(_0x3195cd!==-(0x3*-0xb65+0x2268+0x1*-0x38)){this['_callbackA'+'ctive']['get'](_0x2ae52f)===_0x26e04e&&this['_callbackA'+'ctive']['set'](_0x2ae52f,this['_callbackA'+'ctive']['get'](_0x2ae52f)['slice']());const _0xc60ebc=this['_callbacks']['get'](_0x2ae52f);if(!_0xc60ebc)continue;_0xc60ebc[_0x3195cd]['removed']=!(-0x1f99+0x16a1+0x11f*0x8),_0xc60ebc['splice'](_0x3195cd,0x59*0x6c+-0x21be+0x1*-0x3cd),_0xc60ebc['length']===-0x1*-0x19d6+-0x1ab0+0xda*0x1&&this['_callbacks']['delete'](_0x2ae52f);}}}return _0x2d957c||this['_callbackA'+'ctive']['delete'](_0x2ae52f),this;}['hasEvent'](_0x4c46b3){var _0x2995ec;return!!((_0x2995ec=this['_callbacks']['get'](_0x4c46b3))!=null&&_0x2995ec['length']);}}class fx{constructor(){h(this,'_list',[]),h(this,'_index',{});}['push'](_0x4471dc,_0x42f3b0){if(this['_index'][_0x4471dc])throw Error('Key\x20alread'+'y\x20in\x20index'+'\x20'+_0x4471dc);const _0x43035e=this['_list']['push'](_0x42f3b0)-(-0x22f*0x1+0xe*0xd9+-0xb1*0xe);this['_index'][_0x4471dc]=_0x43035e;}['has'](_0x2b400c){return this['_index'][_0x2b400c]!==void(0xbb0*-0x2+-0x26b+0x19cb);}['get'](_0x41ff7f){const _0x5cf060=this['_index'][_0x41ff7f];return _0x5cf060!==void(-0x2*0x6d9+0x2*0xa13+0x3b*-0x1c)?this['_list'][_0x5cf060]:null;}['remove'](_0x509359){const _0x5333d8=this['_index'][_0x509359];if(_0x5333d8!==void(-0x1fb8+-0x18d*-0x8+-0x338*-0x6)){this['_list']['splice'](_0x5333d8,0x4*0x7f+0xe5*-0x12+0xf1*0xf),delete this['_index'][_0x509359];for(_0x509359 in this['_index']){const _0x288203=this['_index'][_0x509359];_0x288203>_0x5333d8&&(this['_index'][_0x509359]=_0x288203-(0x137*0x1+-0x8ad+0x1*0x777));}return!(-0x181c+-0x1665+0x2e81);}return!(-0x4*-0x203+-0x1446+0xc3b*0x1);}['list'](){return this['_list'];}['clear'](){this['_list']['length']=-0x1ce7+-0x1bf4+0xb5f*0x5;for(const _0x405b3d in this['_index'])delete this['_index'][_0x405b3d];}}const ux=_0x39868b=>{const _0x10cf1c={};let _0x4a65d5=_0x10cf1c;return()=>(_0x4a65d5===_0x10cf1c&&(_0x4a65d5=_0x39868b()),_0x4a65d5);},ii=class ii{static['loadScript'](_0x4c6e38,_0x101bdf){const _0x631bd2=document['createElem'+'ent']('script');_0x631bd2['setAttribu'+'te']('src',_0x4c6e38),_0x631bd2['onload']=()=>{_0x101bdf(null);},_0x631bd2['onerror']=()=>{_0x101bdf('Failed\x20to\x20'+'load\x20scrip'+'t=\x27'+_0x4c6e38+'\x27');},document['body']['appendChil'+'d'](_0x631bd2);}static['loadWasm'](_0x2036e2,_0xd355e2,_0x438717){const _0x3b82fe=ii['wasmSuppor'+'ted']()&&_0xd355e2['glueUrl']&&_0xd355e2['wasmUrl']?_0xd355e2['glueUrl']:_0xd355e2['fallbackUr'+'l'];_0x3b82fe?ii['loadScript'](_0x3b82fe,_0x1f6a9c=>{if(_0x1f6a9c)_0x438717(_0x1f6a9c,null);else{const _0x3837ea=window[_0x2036e2];window[_0x2036e2]=void(0x3*0xb3c+-0x700*-0x1+0x14*-0x209),_0x3837ea({'locateFile':()=>_0xd355e2['wasmUrl'],'onAbort':()=>{_0x438717('wasm\x20modul'+'e\x20aborted.');}})['then'](_0x3d9ea2=>{_0x438717(null,_0x3d9ea2);});}}):_0x438717('No\x20support'+'ed\x20wasm\x20mo'+'dules\x20foun'+'d.',null);}static['getModule'](_0x9957dc){return ii['modules']['hasOwnProp'+'erty'](_0x9957dc)||(ii['modules'][_0x9957dc]={'config':null,'initializing':!(0x1642+-0x7*0x57f+0x1038),'instance':null,'callbacks':[]}),ii['modules'][_0x9957dc];}static['initialize'](_0x31a8da,_0x5257e1){if(_0x5257e1['initializi'+'ng'])return;const _0x57ab57=_0x5257e1['config'];(_0x57ab57['glueUrl']||_0x57ab57['wasmUrl']||_0x57ab57['fallbackUr'+'l'])&&(_0x5257e1['initializi'+'ng']=!(0x8*0x409+-0x6bf+0x3*-0x883),ii['loadWasm'](_0x31a8da,_0x57ab57,(_0x593edf,_0x281c5a)=>{_0x593edf?_0x57ab57['errorHandl'+'er']?_0x57ab57['errorHandl'+'er'](_0x593edf):console['error']('failed\x20to\x20'+'initialize'+'\x20module='+_0x31a8da+'\x20error='+_0x593edf):(_0x5257e1['instance']=_0x281c5a,_0x5257e1['callbacks']['forEach'](_0x41909b=>{_0x41909b(_0x281c5a);}));}));}};h(ii,'modules',{}),h(ii,'wasmSuppor'+'ted',ux(()=>{try{if(typeof WebAssembly=='object'&&typeof WebAssembly['instantiat'+'e']=='function'){const _0x2df464=new WebAssembly['Module'](Uint8Array['of'](0xea4+0x7a*-0x20+0x6*0x1a,0x2*-0xe66+0x709+0x4*0x589,-0x7eb*-0x1+0x1*-0x1acf+0x1*0x1357,0x17b*0x5+-0x1add+-0x13e3*-0x1,-0xc39+0x8b*0x3+0xa99,-0x2166+-0x14c5+0x362b,0x9*0x135+-0x4fa+-0x1*0x5e3,-0x14cf+0xecf+0x600));if(_0x2df464 instanceof WebAssembly['Module'])return new WebAssembly['Instance'](_0x2df464)instanceof WebAssembly['Instance'];}}catch{}return!(0x11*0x1d8+0x14c9+-0x20*0x1a1);}));let Yr=ii;class YS{static['setConfig'](_0xf620e5,_0xbae171){const _0x444bd7=Yr['getModule'](_0xf620e5);_0x444bd7['config']=_0xbae171,_0x444bd7['callbacks']['length']>0x31c+0xeec+-0x1208&&Yr['initialize'](_0xf620e5,_0x444bd7);}static['getConfig'](_0x2ca928){var _0x2039b1,_0x8a07cc;return(_0x8a07cc=(_0x2039b1=Yr['modules'])==null?void(-0x19*-0x45+0x892+-0xf4f):_0x2039b1[_0x2ca928])==null?void(-0x195f+0x321+0x163e):_0x8a07cc['config'];}static['getInstanc'+'e'](_0xdfe7d7,_0x12fcb4){const _0x14fdeb=Yr['getModule'](_0xdfe7d7);_0x14fdeb['instance']?_0x12fcb4(_0x14fdeb['instance']):(_0x14fdeb['callbacks']['push'](_0x12fcb4),_0x14fdeb['config']&&Yr['initialize'](_0xdfe7d7,_0x14fdeb));}}class KS{constructor(_0x5f10e6){h(this,'arraybuffe'+'r'),h(this,'dataView'),h(this,'offset',0xe10+-0x13da+0x1a*0x39),(this['arraybuffe'+'r']=_0x5f10e6,this['dataView']=new DataView(_0x5f10e6));}get['remainingB'+'ytes'](){return this['dataView']['byteLength']-this['offset'];}['reset'](_0x2b0642=0x2595+0x31d*-0x1+-0x2278){this['offset']=_0x2b0642;}['skip'](_0x5d09ea){this['offset']+=_0x5d09ea;}['align'](_0x27e301){this['offset']=this['offset']+_0x27e301-(0x2*0x413+-0x2*0xd8d+0x12f5)&~(_0x27e301-(-0x4*-0x35f+-0xbc3+-0x4*0x6e));}['_inc'](_0x1c3508){return this['offset']+=_0x1c3508,this['offset']-_0x1c3508;}['readChar'](){return String['fromCharCo'+'de'](this['dataView']['getUint8'](this['offset']++));}['readChars'](_0x1ecd8b){let _0x30a169='';for(let _0x256ad5=-0x173a+0x544+-0x1*-0x11f6;_0x256ad5<_0x1ecd8b;++_0x256ad5)_0x30a169+=this['readChar']();return _0x30a169;}['readU8'](){return this['dataView']['getUint8'](this['offset']++);}['readU16'](){return this['dataView']['getUint16'](this['_inc'](-0x13ae+0x12fd+0xb3),!(0x32e*-0x5+0xa*0x3d5+0x5*-0x47c));}['readU32'](){return this['dataView']['getUint32'](this['_inc'](0x11d4+0xe73+-0x3*0xac1),!(-0x3e*-0x1c+-0x189*0x2+-0x3b6));}['readU64'](){return this['readU32']()+(0x4c3+-0x15ce+0x110d)**(0x3*-0xbde+-0xb*0x27b+0x3f03)*this['readU32']();}['readU32be'](){return this['dataView']['getUint32'](this['_inc'](-0x1*0xa6+-0x5f*0x5f+0xf*0x265),!(0x2399+-0x412+-0x10d*0x1e));}['readArray'](_0x4cdc3d){for(let _0x7408f=-0x649*-0x5+0x1*0x16ae+-0x361b;_0x7408f<_0x4cdc3d['length'];++_0x7408f)_0x4cdc3d[_0x7408f]=this['readU8']();}['readLine'](){const _0x47bfce=this['dataView'];let _0x14d424='';for(;!(this['offset']>=_0x47bfce['byteLength']);){const _0x211cd0=String['fromCharCo'+'de'](this['readU8']());if(_0x211cd0==='\x0a')break;_0x14d424+=_0x211cd0;}return _0x14d424;}}class oh{constructor(_0x492299){h(this,'items',[]),h(this,'length',-0x1896+0x9fd*0x3+-0x561),h(this,'loopIndex',-(-0x1*0x97b+-0xea*-0x19+0x1*-0xd5e)),h(this,'_sortBy'),h(this,'_sortHandl'+'er'),(this['_sortBy']=_0x492299['sortBy'],this['_sortHandl'+'er']=this['_doSort']['bind'](this));}['_binarySea'+'rch'](_0xc3b5c7){let _0x1646b5=0x15eb+0x1cb+-0x17b6,_0x13ab33=this['items']['length']-(0x1137+0x1db4+-0x5*0x962);const _0x592245=_0xc3b5c7[this['_sortBy']];let _0x4b7a18,_0x6ebb0d;for(;_0x1646b5<=_0x13ab33;)_0x4b7a18=Math['floor']((_0x1646b5+_0x13ab33)/(0x2602+-0x242e+-0x1d2)),_0x6ebb0d=this['items'][_0x4b7a18][this['_sortBy']],_0x6ebb0d<=_0x592245?_0x1646b5=_0x4b7a18+(-0x2e0+0x130c+-0x102b):_0x6ebb0d>_0x592245&&(_0x13ab33=_0x4b7a18-(-0x1ac4*-0x1+-0x455*0x1+0x6*-0x3bd));return _0x1646b5;}['_doSort'](_0x1c6aa9,_0x3f4bdb){const _0x2d4c1a=this['_sortBy'];return _0x1c6aa9[_0x2d4c1a]-_0x3f4bdb[_0x2d4c1a];}['insert'](_0x588e01){const _0x32816d=this['_binarySea'+'rch'](_0x588e01);this['items']['splice'](_0x32816d,0x2625+0x2*-0x1323+-0x3*-0xb,_0x588e01),this['length']++,this['loopIndex']>=_0x32816d&&this['loopIndex']++;}['append'](_0x511d86){this['items']['push'](_0x511d86),this['length']++;}['remove'](_0x302275){const _0x2dac78=this['items']['indexOf'](_0x302275);_0x2dac78<0x1*-0x1ab1+0x1315*-0x2+0x40db||(this['items']['splice'](_0x2dac78,-0x26c6+0x99b+0x74b*0x4),this['length']--,this['loopIndex']>=_0x2dac78&&this['loopIndex']--);}['sort'](){const _0x3e3a25=this['loopIndex']>=0x24a1*-0x1+0x1cb1+-0x7f0*-0x1?this['items'][this['loopIndex']]:null;this['items']['sort'](this['_sortHandl'+'er']),_0x3e3a25!==null&&(this['loopIndex']=this['items']['indexOf'](_0x3e3a25));}}class Oo extends me{constructor(_0x3aeba6){super(),h(this,'_index',{}),h(this,'_list',[]),this['_parent']=_0x3aeba6;}['add'](..._0x2c4008){let _0x515646=!(0xd1b*0x2+-0x2da*-0x5+-0x2877);const _0x5b63b7=this['_processAr'+'guments'](_0x2c4008,!(-0x1fac+-0x3*-0x9a1+0x2c9));if(!_0x5b63b7['length'])return _0x515646;for(let _0x4126e7=-0x129c+-0xa33+0x1ccf;_0x4126e7<_0x5b63b7['length'];_0x4126e7++)this['_index'][_0x5b63b7[_0x4126e7]]||(_0x515646=!(0x1*-0x1387+-0x2a5*0xe+0x1*0x388d),this['_index'][_0x5b63b7[_0x4126e7]]=!(0x14db+-0xb2*-0x1+-0x158d),this['_list']['push'](_0x5b63b7[_0x4126e7]),this['fire']('add',_0x5b63b7[_0x4126e7],this['_parent']));return _0x515646&&this['fire']('change',this['_parent']),_0x515646;}['remove'](..._0x5c62bc){let _0x3df0bc=!(0xc40+-0x1*0x10e1+0x4a2);if(!this['_list']['length'])return _0x3df0bc;const _0x2fd6d9=this['_processAr'+'guments'](_0x5c62bc,!(-0x1f63+0x1810+0x753));if(!_0x2fd6d9['length'])return _0x3df0bc;for(let _0x2fe893=0x20b6+0x91*-0x2+-0x1f94;_0x2fe893<_0x2fd6d9['length'];_0x2fe893++)this['_index'][_0x2fd6d9[_0x2fe893]]&&(_0x3df0bc=!(-0x132*0x1a+-0x1*0xae8+0x29fc),delete this['_index'][_0x2fd6d9[_0x2fe893]],this['_list']['splice'](this['_list']['indexOf'](_0x2fd6d9[_0x2fe893]),-0x23fd+-0x4*0x19c+0x2*0x1537),this['fire']('remove',_0x2fd6d9[_0x2fe893],this['_parent']));return _0x3df0bc&&this['fire']('change',this['_parent']),_0x3df0bc;}['clear'](){if(!this['_list']['length'])return;const _0x57c1dd=this['_list']['slice'](0x10*0x14d+0x21b9*0x1+-0x3689);this['_list']=[],this['_index']={};for(let _0x3d8f2a=-0x15d*-0xe+0x130a+-0x2620;_0x3d8f2a<_0x57c1dd['length'];_0x3d8f2a++)this['fire']('remove',_0x57c1dd[_0x3d8f2a],this['_parent']);this['fire']('change',this['_parent']);}['has'](..._0xdd52f4){return this['_list']['length']?this['_has'](this['_processAr'+'guments'](_0xdd52f4)):!(0x2*-0x281+0x25da+-0x20d7);}['_has'](_0x1eb8cd){if(!this['_list']['length']||!_0x1eb8cd['length'])return!(0x5*0x60d+0x815+-0x3*0xcc7);for(let _0x5324c5=0x1*-0x10f4+0x7d*0x1f+0x9b*0x3;_0x5324c5<_0x1eb8cd['length'];_0x5324c5++)if(_0x1eb8cd[_0x5324c5]['length']===-0x27*-0x53+0x3b*-0x96+-0x191*-0xe){if(this['_index'][_0x1eb8cd[_0x5324c5][-0x8ba+-0x1f14+0x27ce]])return!(0x1*0xa3d+0x45f+-0xe9c);}else{let _0x41c75b=!(0xce7+0x9c8+-0x1*0x16af);for(let _0x19ba9b=0x1fff+-0x1267+0x2b8*-0x5;_0x19ba9b<_0x1eb8cd[_0x5324c5]['length'];_0x19ba9b++)if(!this['_index'][_0x1eb8cd[_0x5324c5][_0x19ba9b]]){_0x41c75b=!(-0x1b8+0xbb+-0x1*-0xfe);break;}if(_0x41c75b)return!(-0x1336+0x29*-0x99+0x2bb7);}return!(-0x1*-0x9ed+0x185*-0x11+0xfe9);}['list'](){return this['_list']['slice'](0x187+0x78d+-0x914*0x1);}['_processAr'+'guments'](_0x46ad32,_0x1e9377){const _0x3efd8a=[];let _0x11729d=[];if(!_0x46ad32||!_0x46ad32['length'])return _0x3efd8a;for(let _0x26797d=-0x97f*-0x2+0x7f2+-0x1af0;_0x26797d<_0x46ad32['length'];_0x26797d++)if(_0x46ad32[_0x26797d]instanceof Array){_0x1e9377||(_0x11729d=[]);for(let _0x4cb393=-0xd13*-0x1+0x1*0x1ea5+-0x577*0x8;_0x4cb393<_0x46ad32[_0x26797d]['length'];_0x4cb393++)typeof _0x46ad32[_0x26797d][_0x4cb393]=='string'&&(_0x1e9377?_0x3efd8a['push'](_0x46ad32[_0x26797d][_0x4cb393]):_0x11729d['push'](_0x46ad32[_0x26797d][_0x4cb393]));!_0x1e9377&&_0x11729d['length']&&_0x3efd8a['push'](_0x11729d);}else typeof _0x46ad32[_0x26797d]=='string'&&(_0x1e9377?_0x3efd8a['push'](_0x46ad32[_0x26797d]):_0x3efd8a['push']([_0x46ad32[_0x26797d]]));return _0x3efd8a;}get['size'](){return this['_list']['length'];}}h(Oo,'EVENT_ADD','add'),h(Oo,'EVENT_REMO'+'VE','remove'),h(Oo,'EVENT_CHAN'+'GE','change');const de=typeof window<'u'&&window['performanc'+'e']&&window['performanc'+'e']['now']?performance['now']['bind'](performance):Date['now'],px=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class Rd{constructor(_0xdcdc4a){h(this,'scheme'),h(this,'authority'),h(this,'path'),h(this,'query'),h(this,'fragment');const _0x2827cc=_0xdcdc4a['match'](px);this['scheme']=_0x2827cc[0x1*0x7e2+0x1c91+-0x1*0x2471],this['authority']=_0x2827cc[0x1976+-0x5da*0x1+-0x1398],this['path']=_0x2827cc[0x2369+-0x1f86+0x1*-0x3de],this['query']=_0x2827cc[-0x74*0x26+-0x2*0xc5+0x12c9],this['fragment']=_0x2827cc[0x84+-0x1*-0x232c+-0x23a7];}['toString'](){let _0x99dc8b='';return this['scheme']&&(_0x99dc8b+=this['scheme']+':'),this['authority']&&(_0x99dc8b+='//'+this['authority']),_0x99dc8b+=this['path'],this['query']&&(_0x99dc8b+='?'+this['query']),this['fragment']&&(_0x99dc8b+='#'+this['fragment']),_0x99dc8b;}['getQuery'](){const _0x3b53ff={};if(this['query']){const _0x126f4d=decodeURIComponent(this['query'])['split']('&');for(const _0x3aed67 of _0x126f4d){const _0x17d2e4=_0x3aed67['split']('=');_0x3b53ff[_0x17d2e4[0x4*0x167+0x1bd*0x8+-0x4e1*0x4]]=_0x17d2e4[-0x257d+0x6f*0x22+0x16c0];}}return _0x3b53ff;}['setQuery'](_0x3d5582){let _0x147785='';for(const _0x58c2cd in _0x3d5582)_0x3d5582['hasOwnProp'+'erty'](_0x58c2cd)&&(_0x147785!==''&&(_0x147785+='&'),_0x147785+=encodeURIComponent(_0x58c2cd)+'='+encodeURIComponent(_0x3d5582[_0x58c2cd]));this['query']=_0x147785;}}const mx=0x3eb+-0x2163+0x1d78,tp=0x1*-0x20b5+0x12ba+0xdfc,Nm=0x41f*0x3+0x1d0e+0x1*-0x2967,_x=-0x228+-0x32*0x59+0x138f,Y={'DEG_TO_RAD':Math['PI']/(-0x1df9+0x7*0x3bc+0x81*0x9),'RAD_TO_DEG':(0x86d+0x1fbf+-0x2778)/Math['PI'],'clamp'(_0x56c9e1,_0x1e1c6c,_0x46460a){return _0x56c9e1>=_0x46460a?_0x46460a:_0x56c9e1<=_0x1e1c6c?_0x1e1c6c:_0x56c9e1;},'intToBytes24'(_0x48a4be){const _0x5b8d36=_0x48a4be>>0x2*0x7c3+-0x1*0x20a5+-0x35*-0x53&0xb89*0x1+-0xc5*-0x10+-0x96*0x27,_0x440e75=_0x48a4be>>0x1*0x13eb+0x7e*-0x3e+0xaa1&0x1167+0x7*-0x44d+0xdb3,_0x299d08=_0x48a4be&-0x1*0x1aab+-0xde7+0x3*0xddb;return[_0x5b8d36,_0x440e75,_0x299d08];},'intToBytes32'(_0x2d1b7d){const _0x81f535=_0x2d1b7d>>-0xdea*0x1+0x2330+-0x152e&0x24c+-0x23ba+-0x1*-0x226d,_0x26fd04=_0x2d1b7d>>0x21a1*-0x1+-0x5e4+-0x2795*-0x1&-0x2657+0xd*0xdc+0x1c2a,_0x6560b3=_0x2d1b7d>>0xaa+0x223c+-0x22de&0x507+-0xe16+-0xd*-0xc6,_0x59196d=_0x2d1b7d&-0x1f*-0x93+-0x288+-0xe46;return[_0x81f535,_0x26fd04,_0x6560b3,_0x59196d];},'bytesToInt24'(_0x280fc2,_0x54589a,_0x332cb5){return _0x280fc2['length']&&(_0x332cb5=_0x280fc2[0x1*-0x1f61+0x22*0x95+0x1*0xb99],_0x54589a=_0x280fc2[-0x231b*0x1+0x25b6+-0x29a],_0x280fc2=_0x280fc2[-0x149*0x4+-0xde8+0x130c]),_0x280fc2<<-0x54b+-0x1be2+0x213d|_0x54589a<<0x117a+0xa*-0x83+-0xc54|_0x332cb5;},'bytesToInt32'(_0x6394bd,_0x53d37d,_0x1e655a,_0xe2a152){return _0x6394bd['length']&&(_0xe2a152=_0x6394bd[-0x7*-0x4a3+0x1875+0x1*-0x38e7],_0x1e655a=_0x6394bd[-0x1037+0xaf2+0x547],_0x53d37d=_0x6394bd[0x1581+0x382+-0x1902],_0x6394bd=_0x6394bd[0x371+-0x2450+0x20df]),(_0x6394bd<<-0x13d*0x14+0x5a0+0x1*0x133c|_0x53d37d<<0x18ed+0x18c8+0x47*-0xb3|_0x1e655a<<-0x1eb5*-0x1+-0x412+-0x1a9b|_0xe2a152)>>>0x10d4*-0x2+0xc8e*0x1+-0x151a*-0x1;},'lerp'(_0xdade1c,_0x28b19e,_0x2bb7c5){return _0xdade1c+(_0x28b19e-_0xdade1c)*Y['clamp'](_0x2bb7c5,0x174c+-0x1*0xf0d+0x83f*-0x1,0x17eb+0x2357+0x877*-0x7);},'lerpAngle'(_0x265920,_0x3625a3,_0x12a930){return _0x3625a3-_0x265920>0x1805+0xf0d*0x1+-0x265e&&(_0x3625a3-=-0xc80+0x1da0+-0xfb8),_0x3625a3-_0x265920<-(0x398*-0x3+-0x6*0x2ee+0xf0*0x1f)&&(_0x3625a3+=-0x54f*-0x4+0x3*0xb1e+-0x6*0x8dd),Y['lerp'](_0x265920,_0x3625a3,Y['clamp'](_0x12a930,0xde0+-0x5*0x409+0x64d,0x107e+-0x4f*0x59+0xafa));},'powerOfTwo'(_0x2d0df8){return _0x2d0df8!==0x1f3a+-0x1*0x14a3+-0x1*0xa97&&!(_0x2d0df8&_0x2d0df8-(0x1*0x557+-0x8*0x4ae+-0x7*-0x496));},'nextPowerOfTwo'(_0x8839f7){return _0x8839f7--,_0x8839f7|=_0x8839f7>>-0x1f*0x49+0x17b1+-0xed9,_0x8839f7|=_0x8839f7>>-0x4d3+0xbaa+-0x6d5,_0x8839f7|=_0x8839f7>>-0x3f8*0x6+0x2469+-0xc95,_0x8839f7|=_0x8839f7>>0x1896+0x1*0xa93+0x187*-0x17,_0x8839f7|=_0x8839f7>>-0x1*-0xa43+0x19a9+-0x5a*0x66,_0x8839f7++,_0x8839f7;},'nearestPowerOfTwo'(_0x4edcad){return Math['pow'](0xe7f*-0x1+0x25c5+-0x1744*0x1,Math['round'](Math['log2'](_0x4edcad)));},'random'(_0x69aa3a,_0x597085){const _0x19670b=_0x597085-_0x69aa3a;return Math['random']()*_0x19670b+_0x69aa3a;},'smoothstep'(_0x3a6818,_0x35d7bf,_0xf9c63a){return _0xf9c63a<=_0x3a6818?0x1*0xfbf+0x27a*-0x9+0x68b:_0xf9c63a>=_0x35d7bf?-0x1*0x1d1f+0x1036+0x3*0x44e:(_0xf9c63a=(_0xf9c63a-_0x3a6818)/(_0x35d7bf-_0x3a6818),_0xf9c63a*_0xf9c63a*(-0x162d+0x139f*0x1+0x291-(-0x2635*-0x1+0x606+-0x2c39)*_0xf9c63a));},'smootherstep'(_0x5d0d02,_0x3ec878,_0x38c39a){return _0x38c39a<=_0x5d0d02?-0xe34+-0x3e6+0x121a:_0x38c39a>=_0x3ec878?0x1f*0x29+0x8e+-0x584:(_0x38c39a=(_0x38c39a-_0x5d0d02)/(_0x3ec878-_0x5d0d02),_0x38c39a*_0x38c39a*_0x38c39a*(_0x38c39a*(_0x38c39a*(0x391*-0x3+-0xc0a*0x2+-0x97*-0x3b)-(-0x29*-0xc1+0x1*0xbe4+-0x2abe))+(-0x116*-0x1+-0x1*0xca1+0x251*0x5)));},'roundUp'(_0x425727,_0x2e62d6){return _0x2e62d6===0x1094+-0x2b*0x87+-0xdf*-0x7?_0x425727:Math['ceil'](_0x425727/_0x2e62d6)*_0x2e62d6;},'between'(_0x5a434b,_0x332db6,_0x415385,_0xcc3158){const _0x533e0c=Math['min'](_0x332db6,_0x415385),_0x5b9a19=Math['max'](_0x332db6,_0x415385);return _0xcc3158?_0x5a434b>=_0x533e0c&&_0x5a434b<=_0x5b9a19:_0x5a434b>_0x533e0c&&_0x5a434b<_0x5b9a19;}},Tt=class Tt{constructor(_0x6cbe2f=-0x630+-0x723+0x471*0x3,_0x302696=0x257a+-0x1*0xda3+-0x17d7,_0x3a3608=0x1a1f+-0x10ff*0x1+-0x920,_0x4e2be2=-0x60a+-0x1991+0x1f9c){h(this,'r'),h(this,'g'),h(this,'b'),h(this,'a');const _0x576059=_0x6cbe2f['length'];_0x576059===-0x43*-0x36+0xa*-0xcd+-0x61d||_0x576059===-0xaa2+0x1*0xfa3+-0x4fd?(this['r']=_0x6cbe2f[0x5*-0x13d+-0xbf*0x31+0x2ac0],this['g']=_0x6cbe2f[0x1*-0xdde+0x13d*0x3+0xa28],this['b']=_0x6cbe2f[0x1d05+-0x1f53+0x250],this['a']=_0x6cbe2f[-0x43*-0x46+-0x114b+-0x104*0x1]??-0x1*0xd6+0xc5d+0x1*-0xb86):(this['r']=_0x6cbe2f,this['g']=_0x302696,this['b']=_0x3a3608,this['a']=_0x4e2be2);}['clone'](){const _0x1b3c21=this['constructo'+'r'];return new _0x1b3c21(this['r'],this['g'],this['b'],this['a']);}['copy'](_0xfb4ad3){return this['r']=_0xfb4ad3['r'],this['g']=_0xfb4ad3['g'],this['b']=_0xfb4ad3['b'],this['a']=_0xfb4ad3['a'],this;}['equals'](_0x4af55c){return this['r']===_0x4af55c['r']&&this['g']===_0x4af55c['g']&&this['b']===_0x4af55c['b']&&this['a']===_0x4af55c['a'];}['set'](_0x343edf,_0x1b8081,_0x254ee8,_0x36c354=0x24+-0x22e2+0x22bf){return this['r']=_0x343edf,this['g']=_0x1b8081,this['b']=_0x254ee8,this['a']=_0x36c354,this;}['lerp'](_0x551cb2,_0x3f20a5,_0x17a959){return this['r']=_0x551cb2['r']+_0x17a959*(_0x3f20a5['r']-_0x551cb2['r']),this['g']=_0x551cb2['g']+_0x17a959*(_0x3f20a5['g']-_0x551cb2['g']),this['b']=_0x551cb2['b']+_0x17a959*(_0x3f20a5['b']-_0x551cb2['b']),this['a']=_0x551cb2['a']+_0x17a959*(_0x3f20a5['a']-_0x551cb2['a']),this;}['linear'](_0x4d6258=this){return this['r']=Math['pow'](_0x4d6258['r'],0x151f*0x1+-0x24ab+0xf8e+0.20000000000000018),this['g']=Math['pow'](_0x4d6258['g'],0x12af+-0x1806+-0x25*-0x25+0.20000000000000018),this['b']=Math['pow'](_0x4d6258['b'],0xbb9*-0x2+0x56*-0x52+-0x880*-0x6+0.20000000000000018),this['a']=_0x4d6258['a'],this;}['gamma'](_0x4ef159=this){return this['r']=Math['pow'](_0x4ef159['r'],(-0x2108+-0x203b+0x4144)/(-0xad*-0x37+0x9eb*-0x2+-0x1153+0.20000000000000018)),this['g']=Math['pow'](_0x4ef159['g'],(-0x666+0xd6e+-0x707)/(0x503*0x3+0x1bb*-0xd+0x4*0x1de+0.20000000000000018)),this['b']=Math['pow'](_0x4ef159['b'],(-0x1*-0x85d+0x9ec+0x9*-0x208)/(0x192d+0x613*-0x2+-0xd05+0.20000000000000018)),this['a']=_0x4ef159['a'],this;}['mulScalar'](_0x37ac0c){return this['r']*=_0x37ac0c,this['g']*=_0x37ac0c,this['b']*=_0x37ac0c,this;}['fromString'](_0x54e6c6){const _0x4888d1=parseInt(_0x54e6c6['replace']('#','0x'),0x1bc8+-0xc65+0xf53*-0x1);let _0x2d630f;return _0x54e6c6['length']>0xb74*0x2+0x807+-0x1ee8?_0x2d630f=Y['intToBytes'+'32'](_0x4888d1):(_0x2d630f=Y['intToBytes'+'24'](_0x4888d1),_0x2d630f[-0x92f+0x17a+0x7b8]=0x190f*0x1+-0xa3*0x27+0xc5),this['set'](_0x2d630f[-0x1c4e*0x1+-0x1*-0x256b+0x91d*-0x1]/(-0x1f7e+0x11d*0x1c+0x1*0x151),_0x2d630f[-0x4*0xb2+0x3*-0x865+-0x4*-0x6fe]/(-0x7f5+0x9f*0x39+-0x3*0x8d1),_0x2d630f[0x1*0x253+0xa6*-0xe+0x6c3]/(0x1302+0x5ed*-0x2+0x53*-0x13),_0x2d630f[0x169*0x1+-0x2385+-0x221f*-0x1]/(0xb32+0x1*-0xeed+-0xf2*-0x5)),this;}['fromArray'](_0x572598,_0x318ca7=0x1*0x243d+0x28a+-0x26c7){return this['r']=_0x572598[_0x318ca7]??this['r'],this['g']=_0x572598[_0x318ca7+(-0x2249+0x1a4*-0x11+0x3e2e)]??this['g'],this['b']=_0x572598[_0x318ca7+(0xcf2*0x1+0x1ae+0xe9e*-0x1)]??this['b'],this['a']=_0x572598[_0x318ca7+(-0xeb5+-0x347+0x11ff)]??this['a'],this;}['toString'](_0x57c774,_0x26943d){const {r:_0x10f28d,g:_0x4411f8,b:_0x4ed9ce,a:_0xc6a7c1}=this;if(_0x26943d||_0x10f28d>0x216+-0x6c*0x43+0x1a2f||_0x4411f8>0x923*-0x1+0x21dc+-0x18b8*0x1||_0x4ed9ce>0xb22+-0x22f4*-0x1+-0x2e15)return _0x10f28d['toFixed'](0x2f+0x1100+-0x112c)+',\x20'+_0x4411f8['toFixed'](0x1241+-0x1*0x21b6+0xf78)+',\x20'+_0x4ed9ce['toFixed'](-0x11*-0x1c3+-0x2199+-0x3a9*-0x1)+',\x20'+_0xc6a7c1['toFixed'](-0x43*0x1b+-0xc*-0x194+-0xbdc);let _0x2d9e05='#'+((0x21d2+0x258e+-0x67d*0xb<<0x2d2+-0x480+0x2*0xe3)+(Math['round'](_0x10f28d*(0x1139+0x16c2+-0x26fc))<<-0x1fec+-0x1df+0x21db)+(Math['round'](_0x4411f8*(0x1a17+0x518+-0x1e30))<<0x1*0x23c9+0x5e1+-0x1*0x29a2)+Math['round'](_0x4ed9ce*(-0xd8b+-0x1df3+0x1*0x2c7d)))['toString'](0x3fc+0x113d+-0x1529*0x1)['slice'](-0x7e1+-0x113b+-0x191d*-0x1);if(_0x57c774===!(0x1ff4+0x43e+-0x29*0xe2)){const _0x35544d=Math['round'](_0xc6a7c1*(-0x1c20+-0x3eb*0x1+0x210a))['toString'](-0xb*-0x33+0x35b*-0x2+0x495);this['a']<(-0x1e4c+0xbf5+0x1267*0x1)/(0x1e44*-0x1+-0x1b51+0x3a94)?_0x2d9e05+='0'+_0x35544d:_0x2d9e05+=_0x35544d;}return _0x2d9e05;}['toArray'](_0xdc4145=[],_0x26ca47=-0x3*0xae5+0x5ae*-0x5+0x3d15,_0x13a25a=!(0x407*-0x2+-0x1bef+0x1*0x23fd)){return _0xdc4145[_0x26ca47]=this['r'],_0xdc4145[_0x26ca47+(0x61b+-0x20a4+0x9e*0x2b)]=this['g'],_0xdc4145[_0x26ca47+(-0x2380+0x11c5*0x2+-0x8)]=this['b'],_0x13a25a&&(_0xdc4145[_0x26ca47+(-0x44*0x67+-0x269a+0x41f9)]=this['a']),_0xdc4145;}};h(Tt,'BLACK',Object['freeze'](new Tt(-0x30e+0xa84+-0x776,0xa*0x307+-0x114a+-0xcfc,-0x17a8+-0x1150+0x28f8,0x13*-0xfb+-0x1a*-0x149+-0x8*0x1d9))),h(Tt,'BLUE',Object['freeze'](new Tt(-0x2078+0x24c+0x1e2c,-0x7*-0x26e+0x1*0x361+-0x1463,0x2*-0x569+0x83b*-0x2+0x1b49,-0x55f+-0x23e7+-0x2947*-0x1))),h(Tt,'CYAN',Object['freeze'](new Tt(0xa*0x295+0x5*0x211+-0xc0d*0x3,0x5ae+0x12d7*0x2+-0x2b5b,-0x1*-0x19f+0x1c46+-0x1de4,-0x1518+-0x2399*-0x1+-0x74*0x20))),h(Tt,'GRAY',Object['freeze'](new Tt(-0x1ff4+0x29a+0x1d5a*0x1+0.5,0x1*-0x1689+-0x2488+0x3b11+0.5,-0x3*-0x610+0x119*-0x1b+-0xb73*-0x1+0.5,-0x733*-0x5+0x73d*-0x5+0x1*0x33))),h(Tt,'GREEN',Object['freeze'](new Tt(0x3d6*0x5+-0x2081+-0xd53*-0x1,-0xa9d*0x3+-0x20e+0x10f3*0x2,0x2248+0x2441+0x1*-0x4689,0xdbb+0x761*0x3+-0x23dd))),h(Tt,'MAGENTA',Object['freeze'](new Tt(-0x32*0x2c+0x1bbf*0x1+-0x3*0x662,-0x1398+0xd7*-0x25+0x32ab,-0x2434+-0x307+0x273c,-0x870*0x4+0x204f+0x172))),h(Tt,'RED',Object['freeze'](new Tt(-0x118*-0x1f+0x1ddf+0x3fc6*-0x1,0x1*0xf1c+0x21cd+0x293*-0x13,-0x15f4+0xccf+0x925,-0x27*0x51+-0x1a01+0x2659))),h(Tt,'WHITE',Object['freeze'](new Tt(-0xf16+-0xda3*-0x2+-0xc2f,-0x12b0+-0x665*-0x3+-0x7e,-0x7c*0x2e+-0x1d9a+0x33e3,0x15a*-0xf+0x4c1+-0x2*-0x7c3))),h(Tt,'YELLOW',Object['freeze'](new Tt(0xe3*0x5+-0x1*-0x18eb+-0x1d59,0xbe3+-0x154c+0x1*0x96a,0xc6f+0x75d+-0x13cc,0x2519*0x1+0x1*0xd8d+0x5*-0xa21)));let ie=Tt;class ZS{constructor(_0x2a70c6,_0x119f49=0x1*-0x815+-0x186c+0x2081){h(this,'_curve'),h(this,'_left',-(0x4*0x2ce+0x1f01*-0x1+0x13ca)/(0x21b7+-0x1905+-0x8b2)),h(this,'_right',(-0x2*0xef9+0x254d+-0x75a)/(0x860*0x1+-0x1339*0x1+0xad9)),h(this,'_recip',0x20b6*0x1+0xa5b*-0x1+-0x165b*0x1),h(this,'_p0',0x1e45+-0x238+-0x1c0d),h(this,'_p1',0xf6+-0x1a89+0x1993),h(this,'_m0',-0x1e54+0x31d*-0x7+0x341f),h(this,'_m1',0x2703+-0x49*0x6d+-0x122*0x7),(this['_curve']=_0x2a70c6,this['_reset'](_0x119f49));}['evaluate'](_0x2f4f89,_0x5b8108=!(0xcc2*-0x1+0x8ef+0x3d4)){(_0x5b8108||_0x2f4f89<this['_left']||_0x2f4f89>=this['_right'])&&this['_reset'](_0x2f4f89);let _0x334c98;const _0x5ba443=this['_curve']['type'];if(_0x5ba443===_x)_0x334c98=this['_p0'];else{const _0x457300=this['_recip']===-0x561+0x1*0xb+0x1*0x556?0x1fb0*-0x1+-0x5de+0x258e:(_0x2f4f89-this['_left'])*this['_recip'];_0x5ba443===mx?_0x334c98=Y['lerp'](this['_p0'],this['_p1'],_0x457300):_0x5ba443===tp?_0x334c98=Y['lerp'](this['_p0'],this['_p1'],_0x457300*_0x457300*(0x3*-0x26a+-0xf+0x750-(-0x139f+-0x143b+0x27dc)*_0x457300)):_0x334c98=this['_evaluateH'+'ermite'](this['_p0'],this['_p1'],this['_m0'],this['_m1'],_0x457300);}return _0x334c98;}['_reset'](_0x4b7806){const _0x5526fe=this['_curve']['keys'],_0x2ea7f3=_0x5526fe['length'];if(!_0x2ea7f3)this['_left']=-(-0x1b41*-0x1+-0x12cf+0x871*-0x1)/(0xe90+0xc42+-0x1ad2*0x1),this['_right']=(0x1ac+-0x183c+0x1691)/(0x1029+-0xc85*0x3+0x1566),this['_recip']=0x2*0x3a4+0x2449+0x13*-0x24b,this['_p0']=this['_p1']=this['_m0']=this['_m1']=0x19bb+0x1a19+-0x3e*0xd6;else{if(_0x4b7806<_0x5526fe[-0x1*-0x78f+0x14*-0xe9+0xaa5][-0xe*0x4f+0x1736+-0x12e4])this['_left']=-(-0x1*-0x1d39+-0x1e63*0x1+0xd*0x17)/(0xe3*-0x7+-0x1a*-0x10d+-0x151d),this['_right']=_0x5526fe[0x1c78+0x17a7*0x1+-0x1*0x341f][0x23bd+0xd*0x21f+-0x1*0x3f50],this['_recip']=-0x1c34+0x252+-0x2*-0xcf1,this['_p0']=this['_p1']=_0x5526fe[0x1328+0x219f+-0x34c7][-0x2b*0x67+0x2*0xc3e+-0x72e],this['_m0']=this['_m1']=-0x8b6*-0x3+0x2*-0xc14+-0x1fa;else{if(_0x4b7806>=_0x5526fe[_0x2ea7f3-(-0xc33+0x46f+0x7c5)][-0x7a6*-0x3+0x1d71+0x1*-0x3463])this['_left']=_0x5526fe[_0x2ea7f3-(0x12a9+-0x1922+0x67a)][0x2322+0x1a6a+-0x3d8c],this['_right']=(-0x226d+-0x35+0x22a3*0x1)/(0xf85*0x1+0x678+0x15fd*-0x1),this['_recip']=0x444+-0x1c9b*0x1+-0x43*-0x5d,this['_p0']=this['_p1']=_0x5526fe[_0x2ea7f3-(-0x738*-0x3+-0x123c+0x7*-0x7d)][0x1f6+-0x2ab+0xb6],this['_m0']=this['_m1']=-0x52d*-0x2+0xb7*-0x1e+0xb18;else{let _0x5a7f8c=0x128a+-0xa5*0x1f+0x1*0x171;for(;_0x4b7806>=_0x5526fe[_0x5a7f8c+(-0x337*-0x3+-0x4f3+-0x1*0x4b1)][-0x2*-0x117f+0x87d*-0x1+-0x1a81*0x1];)_0x5a7f8c++;this['_left']=_0x5526fe[_0x5a7f8c][0xff1+-0xd4*-0x1c+0x3f*-0x9f],this['_right']=_0x5526fe[_0x5a7f8c+(-0x7*0x1c6+0x101*-0x1+0x2*0x6b6)][0x1*-0x883+0x1f27+-0x16a4];const _0xb847d6=(-0x12*-0x195+-0x29*0xc8+-0x38f*-0x1)/(this['_right']-this['_left']);this['_recip']=isFinite(_0xb847d6)?_0xb847d6:-0x3*-0xdd+-0x1fc8+0x9bb*0x3,this['_p0']=_0x5526fe[_0x5a7f8c][0x20a9+-0x2b*0x25+-0x3c7*0x7],this['_p1']=_0x5526fe[_0x5a7f8c+(-0x1145+-0x71b+-0x1861*-0x1)][0x7fa*-0x2+-0x17*0x10b+0x27f2],this['_curve']['type']===Nm&&this['_calcTange'+'nts'](_0x5526fe,_0x5a7f8c);}}}}['_calcTange'+'nts'](_0x169c9d,_0x4c06b1){let _0x29e2dd;const _0x563c44=_0x169c9d[_0x4c06b1],_0x3975b3=_0x169c9d[_0x4c06b1+(-0xa64+0x22b7+-0x1852)];let _0x398218;if(_0x4c06b1===-0x7be*-0x4+0x1*-0x15a5+-0x1*0x953?_0x29e2dd=[_0x169c9d[-0x118b*0x2+0x953+0x19c3][-0xf10+-0xa37+-0x2cf*-0x9]+(_0x169c9d[0x145+0x2db+-0x420][0x12c5+-0x51+-0x1274]-_0x169c9d[0x1379+-0x8e9+0x9f*-0x11][-0x1*0xe97+-0x2645+0x4*0xd37]),_0x169c9d[0x12*0x14+-0x1*-0xd19+-0x4f*0x2f][0x201e*0x1+-0x5b*0x5b+0x5*0xc]+(_0x169c9d[0x25a4+-0x241*-0x3+0x4ef*-0x9][0x53*0x1d+-0x2269+0x1903*0x1]-_0x169c9d[0x3*-0x26e+0x1*-0x24c9+0x2c14][0x1*0x125f+0x3*-0x9bd+0xad9*0x1])]:_0x29e2dd=_0x169c9d[_0x4c06b1-(0x20a4+-0xd81*0x1+-0x1322)],_0x4c06b1===_0x169c9d['length']-(-0x1f*0xfe+0x52*0x6c+-0x3d4)?_0x398218=[_0x169c9d[_0x4c06b1+(-0x452*-0x1+-0x3*-0xaba+0x1*-0x247f)][-0xaa*-0x9+0x1*0x33a+-0x934]+(_0x169c9d[_0x4c06b1+(0x35*-0xb4+-0x184e+-0xb*-0x599)][-0xe9d+-0x1*0x2a1+0x113e]-_0x169c9d[_0x4c06b1][-0x165b+0xfba+-0x6a1*-0x1]),_0x169c9d[_0x4c06b1+(0x22*-0x67+-0x1*0x91+0xe40)][0x1ace+0x266a+-0x4137]+(_0x169c9d[_0x4c06b1+(0x16d2+-0x1abe+0x1*0x3ed)][0x7c7*0x2+0x1fb7+-0xbd1*0x4]-_0x169c9d[_0x4c06b1][-0x1*0x113f+-0x15f*-0x10+-0xc8*0x6])]:_0x398218=_0x169c9d[_0x4c06b1+(0xb1b*-0x2+0x11b0+0x488)],this['_curve']['type']===Nm){const _0x4d8fa8=(-0x647+-0x1c0e+0x3b*0x95)*(_0x3975b3[0x815*0x1+-0x71*0x4e+-0x47*-0x5f]-_0x563c44[0x1454*-0x1+0x1aa5+-0x651])/(_0x3975b3[0x245*0xc+-0xc7*0x23+0x1*-0x7]-_0x29e2dd[-0x1*0x1d18+-0x2563*0x1+-0x763*-0x9]),_0x80ad08=(0xbbf+-0x6f0+0x4cd*-0x1)*(_0x3975b3[-0x1a59+0x19e2+0x77]-_0x563c44[-0x7*0x44d+-0xec*0x4+0x29*0xd3])/(_0x398218[-0x1116+0x1688+-0x572]-_0x563c44[0x18dc+0xa34+-0x2310]);this['_m0']=this['_curve']['tension']*(isFinite(_0x4d8fa8)?_0x4d8fa8:0xc34+-0x3*-0x26b+0x1375*-0x1)*(_0x3975b3[-0x9*0x291+0x4d3*-0x7+0x38df]-_0x29e2dd[0x1a16+-0x16a6+-0x36f]),this['_m1']=this['_curve']['tension']*(isFinite(_0x80ad08)?_0x80ad08:-0x1ece+-0x4e6+0x23b4)*(_0x398218[-0x4*-0x31a+-0x3db+-0x88c]-_0x563c44[0x287*0x3+0x23ad+-0x2b41]);}else{const _0x2cd9f7=(_0x3975b3[-0x1a24*0x1+-0xc95+0x1af*0x17]-_0x563c44[0x1*0x1d5f+0x392*0x4+-0x2ba7])/(_0x563c44[-0x6e*-0xd+-0x140e+0x73c*0x2]-_0x29e2dd[-0x1127+-0x25ae+0x3*0x1247]),_0x1aef78=(_0x3975b3[-0x456+0x73b+0xd*-0x39]-_0x563c44[0x10a4+0x7*0x15+-0x1137])/(_0x398218[0x45c+-0xa7b*0x1+0x61f]-_0x3975b3[-0x45*-0x61+-0x70f+-0x1316]),_0xe91833=_0x563c44[0x152*0x3+-0xcf8+-0x3*-0x301]+(_0x29e2dd[0x45a+0xb1*0x29+-0x3e*0x87]-_0x563c44[0x9*0x1e8+-0x1243+0x11c])*(isFinite(_0x2cd9f7)?_0x2cd9f7:-0x1*-0x1fd+0x129b*-0x1+-0x84f*-0x2),_0x19fba0=_0x3975b3[0x1*0x136a+0xcd+0x18e*-0xd]+(_0x398218[0x772+0x6c8+-0xe39]-_0x3975b3[-0x229a+-0x2*-0x71d+-0x2f*-0x6f])*(isFinite(_0x1aef78)?_0x1aef78:0x13*0x161+0x1*0x111f+-0x1*0x2b52),_0x509780=this['_curve']['tension'];this['_m0']=_0x509780*(_0x3975b3[-0x1656+-0x269f*-0x1+-0x1048]-_0xe91833),this['_m1']=_0x509780*(_0x19fba0-_0x563c44[0x1d*0x3+0x19a6+-0x19fc]);}}['_evaluateH'+'ermite'](_0x5e4072,_0x214f20,_0x15c09d,_0x292cbd,_0x46e2c0){const _0x440380=_0x46e2c0*_0x46e2c0,_0x399e4a=_0x46e2c0+_0x46e2c0,_0x13c23b=0x2619*-0x1+0x2*-0xfbf+-0x4598*-0x1-_0x46e2c0,_0x5ee5e8=_0x13c23b*_0x13c23b;return _0x5e4072*((0x49*0x52+0x55+-0x17b6+_0x399e4a)*_0x5ee5e8)+_0x15c09d*(_0x46e2c0*_0x5ee5e8)+_0x214f20*(_0x440380*(0xe*-0xa+0xf3b+-0xeac-_0x399e4a))+_0x292cbd*(_0x440380*(_0x46e2c0-(-0x221e+-0x8f8*0x1+-0xe5d*-0x3)));}}class qs{constructor(_0x153de1){h(this,'keys',[]),h(this,'type',tp),h(this,'tension',0xd9d+-0xb72+0x6f*-0x5+0.5),h(this,'_eval',new ZS(this));if(_0x153de1){for(let _0x1eea35=-0xebb+0x3c5*0x7+-0x5d4*0x2;_0x1eea35<_0x153de1['length']-(-0x1*-0x1acf+0x1141*0x1+-0x1*0x2c0f);_0x1eea35+=0x258e+0x1*-0x1e4d+-0x73f)this['keys']['push']([_0x153de1[_0x1eea35],_0x153de1[_0x1eea35+(-0x8a*0x46+0x9*-0x43f+-0x12fd*-0x4)]]);}this['sort']();}get['length'](){return this['keys']['length'];}['add'](_0x5761e6,_0x5d24ed){const _0x3b1ff4=this['keys'],_0x28b2ee=_0x3b1ff4['length'];let _0x1f1485=-0x5e7*0x3+-0x12e*0xd+0x301*0xb;for(;_0x1f1485<_0x28b2ee&&!(_0x3b1ff4[_0x1f1485][0x26d4+0x1d3+0xd8d*-0x3]>_0x5761e6);_0x1f1485++);const _0x523a34=[_0x5761e6,_0x5d24ed];return this['keys']['splice'](_0x1f1485,0x1e6d*0x1+-0x1*0x1106+-0x1*0xd67,_0x523a34),_0x523a34;}['get'](_0x23b281){return this['keys'][_0x23b281];}['sort'](){this['keys']['sort']((_0x3b113f,_0x52f947)=>_0x3b113f[0x118f+-0x38a*-0x1+-0x1519]-_0x52f947[-0x1303*0x1+0x8d1+0xa32]);}['value'](_0x916e35){return this['_eval']['evaluate'](_0x916e35,!(0x799+0xac8+-0x1261));}['closest'](_0x34189b){const _0x4e1388=this['keys'],_0x3c25e6=_0x4e1388['length'];let _0x142ee1=0x124+0x1c3f+-0x1d61,_0x4eca2b=null;for(let _0xfca6c3=0x23d1+-0x1dd7+-0x99*0xa;_0xfca6c3<_0x3c25e6;_0xfca6c3++){const _0x39f8bb=Math['abs'](_0x34189b-_0x4e1388[_0xfca6c3][0x1edd+-0x25de+0x701]);if(_0x142ee1>=_0x39f8bb)_0x142ee1=_0x39f8bb,_0x4eca2b=_0x4e1388[_0xfca6c3];else break;}return _0x4eca2b;}['clone'](){const _0xe9e27=new this['constructo'+'r']();return _0xe9e27['keys']=this['keys']['map'](_0x410bc2=>[..._0x410bc2]),_0xe9e27['type']=this['type'],_0xe9e27['tension']=this['tension'],_0xe9e27;}['quantize'](_0x154db8){_0x154db8=Math['max'](_0x154db8,-0x10b*0x23+-0x1b73+0x3ff6);const _0x1c6888=new Float32Array(_0x154db8),_0x3c0746=(0xdef+-0x977*0x1+-0x477)/(_0x154db8-(-0x150a+0x1cbb+-0x7b0));_0x1c6888[-0x1272+-0x5b*-0x4a+-0x2*0x3ee]=this['_eval']['evaluate'](0x46*-0x89+-0x28e+-0x34*-0xc5,!(0x21d+0x1*-0x14fb+0x69*0x2e));for(let _0x594bc1=-0x1f*-0xf7+0x264d+0x1*-0x4435;_0x594bc1<_0x154db8;_0x594bc1++)_0x1c6888[_0x594bc1]=this['_eval']['evaluate'](_0x3c0746*_0x594bc1);return _0x1c6888;}['quantizeCl'+'amped'](_0x402226,_0x28661d,_0x41c1ed){const _0x5075f2=this['quantize'](_0x402226);for(let _0x2c140c=0x2*-0x801+0x20a9+-0x10a7;_0x2c140c<_0x5075f2['length'];++_0x2c140c)_0x5075f2[_0x2c140c]=Math['min'](_0x41c1ed,Math['max'](_0x28661d,_0x5075f2[_0x2c140c]));return _0x5075f2;}}class na{constructor(..._0xe536ba){h(this,'curves',[]),h(this,'_type',tp);if(_0xe536ba['length']>-0x35*-0x47+0x1*-0x168f+0x7dd*0x1){for(let _0x392e6e=-0x530+-0x1ece+0x23fe;_0x392e6e<_0xe536ba['length'];_0x392e6e++)this['curves']['push'](new qs(_0xe536ba[_0x392e6e]));}else{if(_0xe536ba['length']===0x8aa+-0x9a3+0xf9)this['curves']['push'](new qs());else{const _0x5e93a6=_0xe536ba[-0x11c2+-0x1cbf+0x94d*0x5];if(typeof _0x5e93a6=='number'){for(let _0x19364f=0x1*-0x20d1+0x988+0x1749;_0x19364f<_0x5e93a6;_0x19364f++)this['curves']['push'](new qs());}else{for(let _0x33a400=0xfcc+0x6a1*-0x3+0x15d*0x3;_0x33a400<_0x5e93a6['length'];_0x33a400++)this['curves']['push'](new qs(_0x5e93a6[_0x33a400]));}}}}get['length'](){return this['curves']['length'];}set['type'](_0xdf6728){this['_type']=_0xdf6728;for(let _0x272044=-0x2*0x75b+-0x1*0x18dd+0x2793;_0x272044<this['curves']['length'];_0x272044++)this['curves'][_0x272044]['type']=_0xdf6728;}get['type'](){return this['_type'];}['get'](_0x33fe85){return this['curves'][_0x33fe85];}['value'](_0x3b15cf,_0x5c6954=[]){const _0xf612ed=this['curves']['length'];_0x5c6954['length']=_0xf612ed;for(let _0xa7343a=-0xe2f*0x2+0x16f4+0x56a;_0xa7343a<_0xf612ed;_0xa7343a++)_0x5c6954[_0xa7343a]=this['curves'][_0xa7343a]['value'](_0x3b15cf);return _0x5c6954;}['clone'](){const _0xcff63d=new this['constructo'+'r']();_0xcff63d['curves']=[];for(let _0x23eae4=-0x4ff*-0x4+-0x2300+-0x3e*-0x3e;_0x23eae4<this['curves']['length'];_0x23eae4++)_0xcff63d['curves']['push'](this['curves'][_0x23eae4]['clone']());return _0xcff63d['_type']=this['_type'],_0xcff63d;}['quantize'](_0x1f49f6){_0x1f49f6=Math['max'](_0x1f49f6,0x1*-0x94f+0x1850+-0x1*0xeff);const _0x15b803=this['curves']['length'],_0x2b19bf=new Float32Array(_0x1f49f6*_0x15b803),_0x3649f9=(-0x4d*-0x1+-0x317+0x2cb)/(_0x1f49f6-(0x1*0x127+-0x1f88+-0x1e62*-0x1));for(let _0x4bb1a7=-0x9a4*-0x2+0x255e+0x3*-0x12e2;_0x4bb1a7<_0x15b803;_0x4bb1a7++){const _0x204522=new ZS(this['curves'][_0x4bb1a7]);for(let _0x198ee9=0x1075*0x2+-0x1c6c+-0x5*0xe6;_0x198ee9<_0x1f49f6;_0x198ee9++)_0x2b19bf[_0x198ee9*_0x15b803+_0x4bb1a7]=_0x204522['evaluate'](_0x3649f9*_0x198ee9);}return _0x2b19bf;}['quantizeCl'+'amped'](_0x1ed9c4,_0x506d16,_0xde7b7b){const _0x217168=this['quantize'](_0x1ed9c4);for(let _0x18deb1=-0x61*0x19+0x18ce*0x1+-0x1*0xf55;_0x18deb1<_0x217168['length'];++_0x18deb1)_0x217168[_0x18deb1]=Math['min'](_0xde7b7b,Math['max'](_0x506d16,_0x217168[_0x18deb1]));return _0x217168;}}const Hf=new Float32Array(0x22f1+0x8c7+-0x2bb7),km=new Int32Array(Hf['buffer']);class Mn{static['float2Half'](_0x47e454){Hf[0x47f*-0x1+0xd8c+-0x90d*0x1]=_0x47e454;const _0x3743c3=km[-0x1*-0x19cf+-0xe60+0xb6f*-0x1];let _0x206b27=_0x3743c3>>-0x139b+0x16*0x2+0x137f&-0xbb42+0x70e0+0x4376*0x3,_0x3bad20=_0x3743c3>>0xb5e+-0x1b7*-0x2+-0xec0&0x7*-0x37f+-0x8d*0xf+0x28bb;const _0x15d869=_0x3743c3>>-0x3b*-0x80+-0x15df+-0x78a&-0x788+-0x1150+0x19d7;return _0x15d869<-0x1*0x1183+0x3b*-0x79+0x2dcd?_0x206b27:_0x15d869>-0x124*0xe+0x1bfa+-0xb74?(_0x206b27|=0x7bf3+-0x1*0x4b7d+0x36f*0x16,_0x206b27|=(_0x15d869===0x4*0x8bb+-0x993+-0x185a?0x6b*-0x7+-0x1*-0x1319+-0x102c:0xb*-0x101+0x65a*-0x6+0x3128)&&_0x3743c3&-0xe68*-0x1132+0x198956+-0x9141a7,_0x206b27):_0x15d869<-0x165b+0xc5e+-0xb2*-0xf?(_0x3bad20|=0xc79*-0x1+-0x1a2a+0x2ea3,_0x206b27|=(_0x3bad20>>0xa86+-0x2c8*0x1+-0x74c-_0x15d869)+(_0x3bad20>>0x545*0x2+0x18a8+-0x22c1-_0x15d869&-0x1*-0x4cb+-0xd5a*-0x1+-0x1224),_0x206b27):(_0x206b27|=_0x15d869-(-0x1417+0x2107*-0x1+-0x5*-0xab6)<<0x207a+0xf25*-0x1+0x114b*-0x1|_0x3bad20>>-0x901*0x1+0x147b+-0xb79,_0x206b27+=_0x3bad20&-0x477+-0x1*0x7d9+0x3*0x41b,_0x206b27);}static['float2RGBA'+'8'](_0x58020c,_0x534724){Hf[0x1b*-0x7b+0x1*0xf0d+-0x13*0x1c]=_0x58020c;const _0x4cd88a=km[0x4bf+-0x15d3+0x1114];_0x534724['r']=(_0x4cd88a>>0x1eb1+0x115*-0x15+0x20*-0x3f&0x5b3*0x2+-0x542+-0x525)/(-0xbfd+-0x128e+-0x16f*-0x16),_0x534724['g']=(_0x4cd88a>>-0xf1*-0x1+0x1*-0x1943+0x1862*0x1&0x1628*0x1+0x1c1a+-0x3143)/(0x55f*-0x5+0x2464+-0x2*0x445),_0x534724['b']=(_0x4cd88a>>-0x1a7b+-0x1*0x1b7d+0x3600&0xa57+0x19cc+-0x2324)/(0x71*-0x37+0x22de*0x1+-0x4*0x266),_0x534724['a']=(_0x4cd88a&0x23e5+0x681+-0x3*0xdcd)/(0xf0*-0x16+-0x6a3+0x1c42);}}const wt=class wt{constructor(_0x1084df=0xc51+-0x531*-0x1+-0x1182,_0x7bc2d4=0x1183*0x1+0x8cd*0x1+0x694*-0x4,_0xcf2ea3=-0x1778*-0x1+-0x2*0x1fb+-0x1382){h(this,'x'),h(this,'y'),h(this,'z'),_0x1084df['length']===0x1eaf+-0x257*0x3+0x361*-0x7?(this['x']=_0x1084df[-0x136d*-0x1+-0x1dcc+0x127*0x9],this['y']=_0x1084df[0xf40*0x2+-0x2*-0x58d+-0x2999],this['z']=_0x1084df[-0x958+-0x1*0x448+0xda2]):(this['x']=_0x1084df,this['y']=_0x7bc2d4,this['z']=_0xcf2ea3);}['add'](_0x930454){return this['x']+=_0x930454['x'],this['y']+=_0x930454['y'],this['z']+=_0x930454['z'],this;}['add2'](_0x459b97,_0x55d099){return this['x']=_0x459b97['x']+_0x55d099['x'],this['y']=_0x459b97['y']+_0x55d099['y'],this['z']=_0x459b97['z']+_0x55d099['z'],this;}['addScalar'](_0x3d786b){return this['x']+=_0x3d786b,this['y']+=_0x3d786b,this['z']+=_0x3d786b,this;}['addScaled'](_0x9e36f6,_0x275def){return this['x']+=_0x9e36f6['x']*_0x275def,this['y']+=_0x9e36f6['y']*_0x275def,this['z']+=_0x9e36f6['z']*_0x275def,this;}['clone'](){const _0x2ce377=this['constructo'+'r'];return new _0x2ce377(this['x'],this['y'],this['z']);}['copy'](_0x3c91ee){return this['x']=_0x3c91ee['x'],this['y']=_0x3c91ee['y'],this['z']=_0x3c91ee['z'],this;}['cross'](_0x38edf8,_0x5ab632){const _0x18a54a=_0x38edf8['x'],_0x48ebfc=_0x38edf8['y'],_0x371800=_0x38edf8['z'],_0x583a65=_0x5ab632['x'],_0x59a56d=_0x5ab632['y'],_0x5c385f=_0x5ab632['z'];return this['x']=_0x48ebfc*_0x5c385f-_0x59a56d*_0x371800,this['y']=_0x371800*_0x583a65-_0x5c385f*_0x18a54a,this['z']=_0x18a54a*_0x59a56d-_0x583a65*_0x48ebfc,this;}['distance'](_0x3476a9){const _0x3390e7=this['x']-_0x3476a9['x'],_0x5a0318=this['y']-_0x3476a9['y'],_0x5718ca=this['z']-_0x3476a9['z'];return Math['sqrt'](_0x3390e7*_0x3390e7+_0x5a0318*_0x5a0318+_0x5718ca*_0x5718ca);}['div'](_0x457a5c){return this['x']/=_0x457a5c['x'],this['y']/=_0x457a5c['y'],this['z']/=_0x457a5c['z'],this;}['div2'](_0x421d12,_0x14d578){return this['x']=_0x421d12['x']/_0x14d578['x'],this['y']=_0x421d12['y']/_0x14d578['y'],this['z']=_0x421d12['z']/_0x14d578['z'],this;}['divScalar'](_0x23fd7c){return this['x']/=_0x23fd7c,this['y']/=_0x23fd7c,this['z']/=_0x23fd7c,this;}['dot'](_0x3137fb){return this['x']*_0x3137fb['x']+this['y']*_0x3137fb['y']+this['z']*_0x3137fb['z'];}['equals'](_0x5853a9){return this['x']===_0x5853a9['x']&&this['y']===_0x5853a9['y']&&this['z']===_0x5853a9['z'];}['equalsAppr'+'ox'](_0x13d67a,_0x59240b=-0x1*0x1b0e+-0x32*-0x1+0x1adc+0.000001){return Math['abs'](this['x']-_0x13d67a['x'])<_0x59240b&&Math['abs'](this['y']-_0x13d67a['y'])<_0x59240b&&Math['abs'](this['z']-_0x13d67a['z'])<_0x59240b;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']);}['lengthSq'](){return this['x']*this['x']+this['y']*this['y']+this['z']*this['z'];}['lerp'](_0x2ede3e,_0xbc250c,_0x2bed91){return this['x']=_0x2ede3e['x']+_0x2bed91*(_0xbc250c['x']-_0x2ede3e['x']),this['y']=_0x2ede3e['y']+_0x2bed91*(_0xbc250c['y']-_0x2ede3e['y']),this['z']=_0x2ede3e['z']+_0x2bed91*(_0xbc250c['z']-_0x2ede3e['z']),this;}['mul'](_0x281010){return this['x']*=_0x281010['x'],this['y']*=_0x281010['y'],this['z']*=_0x281010['z'],this;}['mul2'](_0x3584fe,_0x4829d8){return this['x']=_0x3584fe['x']*_0x4829d8['x'],this['y']=_0x3584fe['y']*_0x4829d8['y'],this['z']=_0x3584fe['z']*_0x4829d8['z'],this;}['mulScalar'](_0x2a408e){return this['x']*=_0x2a408e,this['y']*=_0x2a408e,this['z']*=_0x2a408e,this;}['normalize'](_0x43cffb=this){const _0xc15a63=_0x43cffb['x']*_0x43cffb['x']+_0x43cffb['y']*_0x43cffb['y']+_0x43cffb['z']*_0x43cffb['z'];if(_0xc15a63>-0x362+0x26e*-0x9+-0x1*-0x1940){const _0x31b113=(-0x1a6+-0x3*0x6e9+0x1662)/Math['sqrt'](_0xc15a63);this['x']=_0x43cffb['x']*_0x31b113,this['y']=_0x43cffb['y']*_0x31b113,this['z']=_0x43cffb['z']*_0x31b113;}return this;}['floor'](_0x2c3ea8=this){return this['x']=Math['floor'](_0x2c3ea8['x']),this['y']=Math['floor'](_0x2c3ea8['y']),this['z']=Math['floor'](_0x2c3ea8['z']),this;}['ceil'](_0x2588af=this){return this['x']=Math['ceil'](_0x2588af['x']),this['y']=Math['ceil'](_0x2588af['y']),this['z']=Math['ceil'](_0x2588af['z']),this;}['round'](_0xcba6de=this){return this['x']=Math['round'](_0xcba6de['x']),this['y']=Math['round'](_0xcba6de['y']),this['z']=Math['round'](_0xcba6de['z']),this;}['min'](_0x3df364){return _0x3df364['x']<this['x']&&(this['x']=_0x3df364['x']),_0x3df364['y']<this['y']&&(this['y']=_0x3df364['y']),_0x3df364['z']<this['z']&&(this['z']=_0x3df364['z']),this;}['max'](_0xc483b1){return _0xc483b1['x']>this['x']&&(this['x']=_0xc483b1['x']),_0xc483b1['y']>this['y']&&(this['y']=_0xc483b1['y']),_0xc483b1['z']>this['z']&&(this['z']=_0xc483b1['z']),this;}['project'](_0x22673d){const _0x57de5b=this['x']*_0x22673d['x']+this['y']*_0x22673d['y']+this['z']*_0x22673d['z'],_0x7aa819=_0x22673d['x']*_0x22673d['x']+_0x22673d['y']*_0x22673d['y']+_0x22673d['z']*_0x22673d['z'],_0x5582c7=_0x57de5b/_0x7aa819;return this['x']=_0x22673d['x']*_0x5582c7,this['y']=_0x22673d['y']*_0x5582c7,this['z']=_0x22673d['z']*_0x5582c7,this;}['set'](_0x49a164,_0x20e5f8,_0x2ee29b){return this['x']=_0x49a164,this['y']=_0x20e5f8,this['z']=_0x2ee29b,this;}['sub'](_0x305e04){return this['x']-=_0x305e04['x'],this['y']-=_0x305e04['y'],this['z']-=_0x305e04['z'],this;}['sub2'](_0x58a4f1,_0x38f81c){return this['x']=_0x58a4f1['x']-_0x38f81c['x'],this['y']=_0x58a4f1['y']-_0x38f81c['y'],this['z']=_0x58a4f1['z']-_0x38f81c['z'],this;}['subScalar'](_0x922dd4){return this['x']-=_0x922dd4,this['y']-=_0x922dd4,this['z']-=_0x922dd4,this;}['fromArray'](_0x3b312e,_0x52c5a7=-0x1*-0x26b4+-0x1b*0x8b+-0x180b*0x1){return this['x']=_0x3b312e[_0x52c5a7]??this['x'],this['y']=_0x3b312e[_0x52c5a7+(0x123c+0x1c*-0x15d+0x13f1)]??this['y'],this['z']=_0x3b312e[_0x52c5a7+(0x9d*0x2b+-0x1*-0xef+-0x1*0x1b4c)]??this['z'],this;}['toString'](){return'['+this['x']+',\x20'+this['y']+',\x20'+this['z']+']';}['toArray'](_0x10334d=[],_0x7120cd=-0x1481+0x19e5*0x1+-0x159*0x4){return _0x10334d[_0x7120cd]=this['x'],_0x10334d[_0x7120cd+(-0x1af0+-0x3*0x779+0x315c)]=this['y'],_0x10334d[_0x7120cd+(0x277+0xaeb+-0x1ac*0x8)]=this['z'],_0x10334d;}};h(wt,'ZERO',Object['freeze'](new wt(0x217b*-0x1+-0xde9+0x12*0x2a2,-0x1b*-0x35+0x1d75+-0x230c,0xa88*-0x3+0xd6f+0x1229))),h(wt,'HALF',Object['freeze'](new wt(0xe*-0x37+0x97e+-0xa6*0xa+0.5,-0x35*-0xa4+0xe7b+-0x306f+0.5,0x12da*-0x1+-0xdf*-0x26+-0xe40+0.5))),h(wt,'ONE',Object['freeze'](new wt(0x20cb+-0x1b03+-0x5c7,0x109f*-0x1+0x3*-0x2+0x10a6,-0x1cf0+-0x35*-0x1d+-0x8*-0x2de))),h(wt,'UP',Object['freeze'](new wt(0x24d9+-0xb73+0xcb3*-0x2,0x2f0+-0x8ca+0x5db,0x2*-0x89b+0xb79+0x5bd))),h(wt,'DOWN',Object['freeze'](new wt(0x109d+-0x1741+0x6a4,-(-0x139+0x884+-0x74a),0xdaa+0x2da*-0x7+0x3e*0x1a))),h(wt,'RIGHT',Object['freeze'](new wt(0x5bf+0x14d8+-0x1a96,-0x21a*0x5+0x7d*-0x25+-0x5b7*-0x5,-0xa35+0x33*0x26+0x2a3))),h(wt,'LEFT',Object['freeze'](new wt(-(-0x11d6+0x1ed0+-0xcf9),0x9ac*-0x1+0x26*0x74+0x2*-0x3c6,-0x1d*-0xd+0x1b*0xfb+0x1bf2*-0x1))),h(wt,'FORWARD',Object['freeze'](new wt(0x186a+-0xc60+0x2e*-0x43,0x135e+0x206+0xab2*-0x2,-(-0x949+0x75c+0xd*0x26)))),h(wt,'BACK',Object['freeze'](new wt(0x4*0x1d6+-0x32*-0x98+0x3*-0xc58,-0x231b+0x809+0xa*0x2b5,0x3*0xc65+-0xe5*-0x25+0x9*-0x7cf)));let D=wt;const gn=class gn{constructor(){h(this,'data',new Float32Array(-0x2*0xe49+0x482*0x5+0x611*0x1)),this['data'][0x18dd+-0x2d*-0x36+0x225b*-0x1]=this['data'][0x24d6+0x6*-0x143+0x18*-0x138]=this['data'][-0x8e8+0x4ea+-0xa*-0x67]=-0x1eb8+-0x66c+0x2525;}['clone'](){const _0x2a0426=this['constructo'+'r'];return new _0x2a0426()['copy'](this);}['copy'](_0x19916c){const _0x1abf8d=_0x19916c['data'],_0x26f6ee=this['data'];return _0x26f6ee[-0x17fd+0x6c*0xe+-0x1215*-0x1]=_0x1abf8d[-0x2353*0x1+0x204*0x7+0x1537],_0x26f6ee[0x1a4a+-0x1088+-0x9c1]=_0x1abf8d[0x4*0x2ef+0x149+-0x682*0x2],_0x26f6ee[-0x1478*0x1+0x1*-0x1c0d+0x3087]=_0x1abf8d[0xb*0x14c+-0x1*0x24c1+0x1*0x167f],_0x26f6ee[0x2198+0x2313+-0x44a8]=_0x1abf8d[0x1e51+-0x718+0x1736*-0x1],_0x26f6ee[-0xbbf*0x1+-0x24c2+-0x1*-0x3085]=_0x1abf8d[0x1800+-0x8be+-0xf3e],_0x26f6ee[-0x223*0xf+-0x739+0x1*0x274b]=_0x1abf8d[0x2*0xd4b+-0x154+-0x193d],_0x26f6ee[0x1fd*0xb+0xa75*-0x1+-0x144*0x9]=_0x1abf8d[0x5a7*-0x5+-0x17d8+0x1*0x3421],_0x26f6ee[0x20ec+-0x1*0x2285+0x1a0]=_0x1abf8d[0x490+0x1*-0xcf4+0x86b],_0x26f6ee[0x239+-0x1075*0x2+0xb*0x2cb]=_0x1abf8d[-0x8d*0x2f+0xbf*0x28+-0x5*0xc9],this;}['set'](_0x2ae871){const _0x1b73a2=this['data'];return _0x1b73a2[-0x5b5*-0x3+0x208b+-0x31aa]=_0x2ae871[-0x1*0x24d9+-0x1252+-0x1e7*-0x1d],_0x1b73a2[-0xca7+-0x262a+-0x5*-0xa2a]=_0x2ae871[0x1f58*0x1+-0x1*-0xbe4+-0x2b3b],_0x1b73a2[0x2194+0x1*-0x18e3+-0x13*0x75]=_0x2ae871[-0x86c+0xabc+-0x24e],_0x1b73a2[-0x1d19+0x1*-0x543+0x225f]=_0x2ae871[-0x12ec*0x1+-0x1*-0x78b+0x1e6*0x6],_0x1b73a2[-0x55*0x14+0xe9e+0x2*-0x3fb]=_0x2ae871[0x156a*-0x1+0xa9c+0x1*0xad2],_0x1b73a2[-0x1052*0x2+0x6*-0x4bd+-0x1*-0x3d17]=_0x2ae871[-0x2540+0x733*-0x1+0x2c78],_0x1b73a2[0x4*-0x99e+0x62*-0x2d+-0x37b8*-0x1]=_0x2ae871[0x1ba1+-0x1*0x1fde+0x443],_0x1b73a2[0x23d*-0x9+-0x5*-0x491+-0x2a9]=_0x2ae871[0x2123+-0x95*0x11+-0x1737],_0x1b73a2[-0x22c*-0x7+-0x2529+0x15fd]=_0x2ae871[0x1647+0x25*-0x2e+-0xf99],this;}['getX'](_0x12ad19=new D()){return _0x12ad19['set'](this['data'][-0x2441+0x1f3+-0x1*-0x224e],this['data'][-0xd1b+0xd3b+-0x1f],this['data'][0x7*-0x47e+-0x1*0x1eb6+0x3e2a]);}['getY'](_0x2a18fc=new D()){return _0x2a18fc['set'](this['data'][0x72e+-0x12+0x719*-0x1],this['data'][-0x6f6+0xec*0x15+0x631*-0x2],this['data'][0x814+0x1*0x98c+0x1*-0x119b]);}['getZ'](_0x34d9ab=new D()){return _0x34d9ab['set'](this['data'][-0x779*-0x3+0x1e7*0x7+-0x23b6],this['data'][0x25ed+0x7*-0xe+-0x2584],this['data'][0x8*0x12d+0x1023*-0x2+-0x1*-0x16e6]);}['equals'](_0x1007ab){const _0x1021ae=this['data'],_0x23e83c=_0x1007ab['data'];return _0x1021ae[-0x13*-0xe9+-0x1566+0x41b]===_0x23e83c[0x1842+-0x4b0+0x1392*-0x1]&&_0x1021ae[0x975+0x1bb7+-0x252b]===_0x23e83c[-0x1472+0x12cb+0x1a8]&&_0x1021ae[0x6d*0x1a+-0x5*0x5ce+0x1a2*0xb]===_0x23e83c[-0x2299+0x153f+-0x12*-0xbe]&&_0x1021ae[0x1329+-0x6e*0x1a+0x7fa*-0x1]===_0x23e83c[-0xe50+-0xb28+-0x197b*-0x1]&&_0x1021ae[0x4*-0x665+0xa1f+0xe9*0x11]===_0x23e83c[0x1e8*0xf+-0x494+-0x100*0x18]&&_0x1021ae[0x8a5+0x17bc+0x4*-0x817]===_0x23e83c[-0x1af3*0x1+-0x9*0x285+0x31a5]&&_0x1021ae[-0x9*0x2f6+-0x10e7*-0x1+-0x29*-0x3d]===_0x23e83c[-0x397+0x2*0xdcb+-0x17f9]&&_0x1021ae[0x1*0x27+-0x1*-0x1f6f+-0x1f8f]===_0x23e83c[0x145a*0x1+0x2*0xa97+-0x11*0x271]&&_0x1021ae[-0xf*-0x258+0x151b*0x1+-0xb3f*0x5]===_0x23e83c[0x1627+-0x885*-0x3+0x2*-0x17d7];}['isIdentity'](){const _0x1a9fe2=this['data'];return _0x1a9fe2[-0x1a6f+-0x243d+0x6*0xa72]===-0x3f3*-0x1+-0x4ac+0xba&&_0x1a9fe2[-0x8cb*0x1+-0x764+0x1030]===-0x13b9+-0x1*-0x1def+-0x2*0x51b&&_0x1a9fe2[0x7f*-0x4c+-0xeef+-0x1*-0x34a5]===-0x1827+0x65b*-0x6+0x5*0xc75&&_0x1a9fe2[-0x416+0x546+-0x12d]===0x148*-0x3+-0x1127+-0xd7*-0x19&&_0x1a9fe2[0x21d*-0xd+0x367+0x1816]===0x127d+-0x2196+-0x1*-0xf1a&&_0x1a9fe2[-0x1ea+-0x2*-0x84+0xb*0x15]===-0x1399+0x2*-0xd12+-0x3*-0xf3f&&_0x1a9fe2[-0x1f*-0x13c+-0x11e2+-0x2*0xa2e]===0x1*-0x1430+0x91*-0x7+0x1*0x1827&&_0x1a9fe2[0x15e5*0x1+-0x257c+0xf9e]===-0x7f6*-0x1+-0xb79+0x383*0x1&&_0x1a9fe2[-0xb7*0x28+0x405*-0x2+0x24aa]===0xd2d*-0x2+0x17*0xdd+-0x680*-0x1;}['setIdentit'+'y'](){const _0x3b243=this['data'];return _0x3b243[0x62c+-0x1f38+0x190c]=-0x21ee+-0x58c*0x1+-0x277b*-0x1,_0x3b243[-0x180d+-0x25a1+0x3daf]=-0x611*-0x1+-0xf*-0xb9+-0x10e8,_0x3b243[-0x9c2*0x3+-0x1ee*-0xb+0x80e]=-0x7db*-0x1+0x4f*-0x69+0x188c,_0x3b243[0x124d+0x19e1+-0x2c2b]=-0x4*-0x27f+-0x1da6+0x13aa,_0x3b243[0x20ee+0x56*-0x67+0x1b0]=-0x12a1*-0x1+0x1f0d+-0x31ad,_0x3b243[-0x1425+0x268b*-0x1+0x3ab5]=0x1*-0x8c3+0x659+0x26a,_0x3b243[-0x2*0xc2e+-0x1*0x56e+0x90*0x35]=0x1f40+-0x2*0xdc1+-0x3be,_0x3b243[0x250f+-0x1a00+-0xb08*0x1]=0xa49+-0x111+-0x938,_0x3b243[-0x2*0x18+0x7*0x117+-0x769*0x1]=-0x1*0xdb3+-0xa7*-0x1b+-0x3e9,this;}['toString'](){return'['+this['data']['join'](',\x20')+']';}['transpose'](_0x3d3900=this){const _0x2239b6=_0x3d3900['data'],_0x4452bf=this['data'];if(_0x2239b6===_0x4452bf){let _0x88c884;_0x88c884=_0x2239b6[0x578*0x1+-0x18da+-0x1*-0x1363],_0x4452bf[0x1*-0x12b5+0x9*-0x2a9+0x1*0x2aa7]=_0x2239b6[-0xb6f*0x3+-0x5e*0x20+-0xb84*-0x4],_0x4452bf[0x1*-0x10e+0x15*0x11+-0x54]=_0x88c884,_0x88c884=_0x2239b6[0xf9*0x4+-0x691*-0x1+-0xa73*0x1],_0x4452bf[0x1307+-0x1*-0x1adb+-0x2*0x16f0]=_0x2239b6[0x5fd+0x521+-0xb18],_0x4452bf[0x3*0x2cb+-0xa1*0xd+-0x17*0x2]=_0x88c884,_0x88c884=_0x2239b6[-0x1*0x1815+0xec9+0x951],_0x4452bf[-0x1173+0x12*0xd+0x108e*0x1]=_0x2239b6[0x1f3b+0x185*0x5+0x21*-0x12d],_0x4452bf[-0xfa+0x1c*0xf7+-0x1*0x1a03]=_0x88c884;}else _0x4452bf[0x130d*0x1+-0x17b*-0xd+0x72*-0x56]=_0x2239b6[0x2488+0x814+-0x2c9c],_0x4452bf[0x313*0x8+0x410+-0x1ca7]=_0x2239b6[0xd8b+0x172*0x3+-0x11de],_0x4452bf[-0xd*-0xcb+-0x1*-0xae+-0xafb]=_0x2239b6[-0x1998+-0x5*-0x7ac+-0xcbe],_0x4452bf[-0xba+0x35*-0x74+0x1*0x18c1]=_0x2239b6[-0xb96+-0x150a+0x20a1],_0x4452bf[0x17*0x15b+-0x2675+-0x2*-0x3a6]=_0x2239b6[-0x943*0x1+0x1313+0x84*-0x13],_0x4452bf[-0x2163+-0x13e7+0x11c5*0x3]=_0x2239b6[-0x1db6+0x25b9+-0x7fc],_0x4452bf[0x16fa+0x14ec+0x270*-0x12]=_0x2239b6[-0x9d1*-0x1+0x111*0xa+0x1479*-0x1],_0x4452bf[0x7*-0x259+0xa49+0x62d]=_0x2239b6[0x535+0x7cf+-0x455*0x3],_0x4452bf[-0x2c9*-0xc+0x2*0x281+-0x5*0x7ae]=_0x2239b6[-0x59*-0x2f+-0x1147*0x1+0xf8];return this;}['setFromMat'+'4'](_0x120af9){const _0x2da60a=_0x120af9['data'],_0x5e68e8=this['data'];return _0x5e68e8[0xc56+0xc1a+0x22*-0xb8]=_0x2da60a[0x6*-0x3d9+0x172+0x15a4],_0x5e68e8[-0x898*-0x1+0x13e0+-0x1c77]=_0x2da60a[0xb1*-0x5+0xb5*-0x1f+0x59*0x49],_0x5e68e8[-0xfa3+-0x2353+0x3a4*0xe]=_0x2da60a[0x1f5a+-0xdc5+-0x199*0xb],_0x5e68e8[0xb*0x53+-0x2a5+-0xe9]=_0x2da60a[-0x1d1+-0x7c+-0x251*-0x1],_0x5e68e8[-0xe4f+-0x1039+0x1e8c]=_0x2da60a[-0x14d1*-0x1+-0x8d*0x12+-0xae2],_0x5e68e8[0x21*-0xe3+0x373*0x1+-0x185*-0x11]=_0x2da60a[-0xe9*-0x13+0x21d8+0x1*-0x331d],_0x5e68e8[0x3fa*-0x8+0x23e3+0x40d*-0x1]=_0x2da60a[0x3*0x552+-0x43*0x53+0x5cb*0x1],_0x5e68e8[-0x4b1*0x1+0x4*0x506+0x6*-0x290]=_0x2da60a[0x50d+-0xb*0x371+-0x7*-0x4b1],_0x5e68e8[0x3c7+-0x1*-0x677+-0xa36]=_0x2da60a[-0x1*-0x1003+-0x1*-0x198f+-0x8*0x531],this;}['setFromQua'+'t'](_0x9ca9b3){const _0x2bddc4=_0x9ca9b3['x'],_0x3c75ce=_0x9ca9b3['y'],_0x43a858=_0x9ca9b3['z'],_0x4d85b6=_0x9ca9b3['w'],_0x3926a9=_0x2bddc4+_0x2bddc4,_0x940ca1=_0x3c75ce+_0x3c75ce,_0x2c2b7b=_0x43a858+_0x43a858,_0x4b0545=_0x2bddc4*_0x3926a9,_0x39a719=_0x2bddc4*_0x940ca1,_0x265b53=_0x2bddc4*_0x2c2b7b,_0x5b7b19=_0x3c75ce*_0x940ca1,_0x1929d2=_0x3c75ce*_0x2c2b7b,_0x4ce013=_0x43a858*_0x2c2b7b,_0x359b65=_0x4d85b6*_0x3926a9,_0x588c06=_0x4d85b6*_0x940ca1,_0x1f0e04=_0x4d85b6*_0x2c2b7b,_0x4b01ed=this['data'];return _0x4b01ed[0x1894+0xfcf+-0x1*0x2863]=0x1456+0x15b0+-0x2a05-(_0x5b7b19+_0x4ce013),_0x4b01ed[0x1*0x2001+0xa8+-0x20a8]=_0x39a719+_0x1f0e04,_0x4b01ed[0x2*-0x619+-0x17*0x59+0x1433]=_0x265b53-_0x588c06,_0x4b01ed[-0x1783+0xb1*-0x21+0x2e57*0x1]=_0x39a719-_0x1f0e04,_0x4b01ed[0x1*-0x33d+0x6*0x5a9+-0x1eb5]=-0x2128+0xf51+0x11d8-(_0x4b0545+_0x4ce013),_0x4b01ed[-0x183a+-0x1465+0x2ca4]=_0x1929d2+_0x359b65,_0x4b01ed[0x61*0x44+-0x158d+-0x431*0x1]=_0x265b53+_0x588c06,_0x4b01ed[0x49d*-0x3+-0x1859*0x1+-0x9*-0x43f]=_0x1929d2-_0x359b65,_0x4b01ed[-0x5b+0x150b+0x52a*-0x4]=-0xfa*0x1+-0x25ac*-0x1+-0xc3b*0x3-(_0x4b0545+_0x5b7b19),this;}['invertMat4'](_0x31f9f4){const _0x28ab7f=_0x31f9f4['data'],_0x201564=_0x28ab7f[-0xd35+-0x2295+-0x3*-0xfee],_0x141a34=_0x28ab7f[-0xb7d*0x1+0x539*-0x1+0x10b7],_0x4d561f=_0x28ab7f[0x161*0x11+0x344+-0x1ab3],_0x458a74=_0x28ab7f[0x50*-0x3d+-0x469*0x1+0x177d],_0x5841cc=_0x28ab7f[0x220f+0x1b1f+-0x399*0x11],_0x509179=_0x28ab7f[0x1*-0x18a9+-0x8ff*0x2+0x13*0x23f],_0x3925ea=_0x28ab7f[-0x881*0x1+-0x1*-0x258d+0x2*-0xe82],_0x50a15b=_0x28ab7f[0x1246+0xff4+-0x2231],_0xd366eb=_0x28ab7f[-0x1311*-0x2+-0x1e3d+-0x7db],_0x16f4e3=_0xd366eb*_0x5841cc-_0x509179*_0x50a15b,_0x2ba2df=-_0xd366eb*_0x141a34+_0x4d561f*_0x50a15b,_0x177742=_0x509179*_0x141a34-_0x4d561f*_0x5841cc,_0x32ace3=-_0xd366eb*_0x458a74+_0x509179*_0x3925ea,_0x32c531=_0xd366eb*_0x201564-_0x4d561f*_0x3925ea,_0x327ff1=-_0x509179*_0x201564+_0x4d561f*_0x458a74,_0x55a596=_0x50a15b*_0x458a74-_0x5841cc*_0x3925ea,_0x1dacda=-_0x50a15b*_0x201564+_0x141a34*_0x3925ea,_0x1abdef=_0x5841cc*_0x201564-_0x141a34*_0x458a74,_0x167c01=_0x201564*_0x16f4e3+_0x141a34*_0x32ace3+_0x4d561f*_0x55a596;if(_0x167c01===-0xe*0x12a+-0x815*-0x1+0x837)this['setIdentit'+'y']();else{const _0x5312d5=(-0x254c+0x490+-0x121*-0x1d)/_0x167c01,_0x6305ef=this['data'];_0x6305ef[0x2587+0x6*0x551+-0x9eb*0x7]=_0x16f4e3*_0x5312d5,_0x6305ef[0x1673+0x478+-0x212*0xd]=_0x2ba2df*_0x5312d5,_0x6305ef[0x1c06+-0x4b6+-0x174e]=_0x177742*_0x5312d5,_0x6305ef[0x67*0x35+-0x7*0x385+0x25*0x17]=_0x32ace3*_0x5312d5,_0x6305ef[0xc1c+0x1*-0x1435+-0x81d*-0x1]=_0x32c531*_0x5312d5,_0x6305ef[-0x1a84+-0x48+0x1ad1*0x1]=_0x327ff1*_0x5312d5,_0x6305ef[-0x1e62+0x2*0x11e7+-0x566]=_0x55a596*_0x5312d5,_0x6305ef[0x1dbc+-0xbd5*-0x1+-0x298a*0x1]=_0x1dacda*_0x5312d5,_0x6305ef[0x11c*0x9+0x1238+0x1c2c*-0x1]=_0x1abdef*_0x5312d5;}return this;}['transformV'+'ector'](_0xe0ec25,_0x5a12e4=new D()){const _0x22842f=this['data'],{x:_0x18f4e7,y:_0x384af9,z:_0x1f0055}=_0xe0ec25;return _0x5a12e4['x']=_0x18f4e7*_0x22842f[-0x15b*0x1+-0x12d8+0x1433*0x1]+_0x384af9*_0x22842f[0x1ecb+-0x3d*-0x5c+-0x34b4]+_0x1f0055*_0x22842f[-0x1c6b+-0x1c9f+-0x530*-0xb],_0x5a12e4['y']=_0x18f4e7*_0x22842f[-0x54*-0x70+-0x12f8+-0x11c7]+_0x384af9*_0x22842f[-0x1fa5+0x3b*0xa1+0x29*-0x22]+_0x1f0055*_0x22842f[-0x1b8b+0x36c*-0x4+0x2942],_0x5a12e4['z']=_0x18f4e7*_0x22842f[0x209+-0x100c+0xe05]+_0x384af9*_0x22842f[-0x60b+0x12d0+0x44*-0x30]+_0x1f0055*_0x22842f[0x39*0x1f+0x12a*-0xd+-0x843*-0x1],_0x5a12e4;}};h(gn,'IDENTITY',Object['freeze'](new gn())),h(gn,'ZERO',Object['freeze'](new gn()['set']([0x17a5*-0x1+-0x2*-0xe3+0x1*0x15df,0x9a+0x79*0x2+-0x18c,-0xa0e+-0x1218+-0x2*-0xe13,-0x1c93+-0x1f40+0x3bd3,-0x24e7+-0x13cf+0x38b6,0x20d2+0x1e0d+-0x25*0x1b3,0x2285+0x3f1*0x4+-0x3249*0x1,0x47*0x71+-0x31*-0x11+0xd8*-0x29,0x2482+-0x2589*0x1+0x107])));let _i=gn;const Gt=class Gt{constructor(_0x5d1efa=-0xfc1+0xa9+-0x2*-0x78c,_0x17734f=-0x2291+0x147a+0xe17*0x1){h(this,'x'),h(this,'y'),_0x5d1efa['length']===0x1f*0xb1+-0x2*-0x269+0x1*-0x1a3f?(this['x']=_0x5d1efa[0x1*0x1523+-0x146*-0x6+-0x1cc7*0x1],this['y']=_0x5d1efa[-0x43*0xc+0x1a1*0x3+-0x1be*0x1]):(this['x']=_0x5d1efa,this['y']=_0x17734f);}['add'](_0x5d7bbf){return this['x']+=_0x5d7bbf['x'],this['y']+=_0x5d7bbf['y'],this;}['add2'](_0x339ef6,_0x148f38){return this['x']=_0x339ef6['x']+_0x148f38['x'],this['y']=_0x339ef6['y']+_0x148f38['y'],this;}['addScalar'](_0x135b90){return this['x']+=_0x135b90,this['y']+=_0x135b90,this;}['addScaled'](_0x14eae4,_0x362cbe){return this['x']+=_0x14eae4['x']*_0x362cbe,this['y']+=_0x14eae4['y']*_0x362cbe,this;}['clone'](){const _0x3ec57d=this['constructo'+'r'];return new _0x3ec57d(this['x'],this['y']);}['copy'](_0x553d91){return this['x']=_0x553d91['x'],this['y']=_0x553d91['y'],this;}['cross'](_0x338d71){return this['x']*_0x338d71['y']-this['y']*_0x338d71['x'];}['distance'](_0x21518d){const _0x45c0ed=this['x']-_0x21518d['x'],_0x555f3c=this['y']-_0x21518d['y'];return Math['sqrt'](_0x45c0ed*_0x45c0ed+_0x555f3c*_0x555f3c);}['div'](_0x425c11){return this['x']/=_0x425c11['x'],this['y']/=_0x425c11['y'],this;}['div2'](_0x24df4f,_0x206978){return this['x']=_0x24df4f['x']/_0x206978['x'],this['y']=_0x24df4f['y']/_0x206978['y'],this;}['divScalar'](_0x4aebf4){return this['x']/=_0x4aebf4,this['y']/=_0x4aebf4,this;}['dot'](_0x1c4537){return this['x']*_0x1c4537['x']+this['y']*_0x1c4537['y'];}['equals'](_0xa4b077){return this['x']===_0xa4b077['x']&&this['y']===_0xa4b077['y'];}['equalsAppr'+'ox'](_0x4c1c9e,_0x21e685=-0x1ebe+0x2*0x16e+-0xa6*-0x2b+0.000001){return Math['abs'](this['x']-_0x4c1c9e['x'])<_0x21e685&&Math['abs'](this['y']-_0x4c1c9e['y'])<_0x21e685;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']);}['lengthSq'](){return this['x']*this['x']+this['y']*this['y'];}['lerp'](_0x3ec228,_0x501a28,_0x4c21ca){return this['x']=_0x3ec228['x']+_0x4c21ca*(_0x501a28['x']-_0x3ec228['x']),this['y']=_0x3ec228['y']+_0x4c21ca*(_0x501a28['y']-_0x3ec228['y']),this;}['mul'](_0x1c3b89){return this['x']*=_0x1c3b89['x'],this['y']*=_0x1c3b89['y'],this;}['mul2'](_0x1161af,_0xc94142){return this['x']=_0x1161af['x']*_0xc94142['x'],this['y']=_0x1161af['y']*_0xc94142['y'],this;}['mulScalar'](_0x4d009){return this['x']*=_0x4d009,this['y']*=_0x4d009,this;}['normalize'](_0x148913=this){const _0x34fe6d=_0x148913['x']*_0x148913['x']+_0x148913['y']*_0x148913['y'];if(_0x34fe6d>0x97*-0x5+-0x502*-0x7+0x201b*-0x1){const _0x1b9b10=(0x2*0x2b+0xf55+0xa*-0x191)/Math['sqrt'](_0x34fe6d);this['x']=_0x148913['x']*_0x1b9b10,this['y']=_0x148913['y']*_0x1b9b10;}return this;}['rotate'](_0x198fc0){const _0x45b854=Math['atan2'](this['x'],this['y'])+_0x198fc0*Y['DEG_TO_RAD'],_0x7976f4=Math['sqrt'](this['x']*this['x']+this['y']*this['y']);return this['x']=Math['sin'](_0x45b854)*_0x7976f4,this['y']=Math['cos'](_0x45b854)*_0x7976f4,this;}['angle'](){return Math['atan2'](this['x'],this['y'])*Y['RAD_TO_DEG'];}['angleTo'](_0x27c178){return Math['atan2'](this['x']*_0x27c178['y']+this['y']*_0x27c178['x'],this['x']*_0x27c178['x']+this['y']*_0x27c178['y'])*Y['RAD_TO_DEG'];}['floor'](_0x37d8cf=this){return this['x']=Math['floor'](_0x37d8cf['x']),this['y']=Math['floor'](_0x37d8cf['y']),this;}['ceil'](_0x9e0dc2=this){return this['x']=Math['ceil'](_0x9e0dc2['x']),this['y']=Math['ceil'](_0x9e0dc2['y']),this;}['round'](_0x3cc7bd=this){return this['x']=Math['round'](_0x3cc7bd['x']),this['y']=Math['round'](_0x3cc7bd['y']),this;}['min'](_0x2b884c){return _0x2b884c['x']<this['x']&&(this['x']=_0x2b884c['x']),_0x2b884c['y']<this['y']&&(this['y']=_0x2b884c['y']),this;}['max'](_0x12b6ed){return _0x12b6ed['x']>this['x']&&(this['x']=_0x12b6ed['x']),_0x12b6ed['y']>this['y']&&(this['y']=_0x12b6ed['y']),this;}['set'](_0x13335b,_0x481a38){return this['x']=_0x13335b,this['y']=_0x481a38,this;}['sub'](_0x2164c0){return this['x']-=_0x2164c0['x'],this['y']-=_0x2164c0['y'],this;}['sub2'](_0x1d2ca7,_0x1ebeca){return this['x']=_0x1d2ca7['x']-_0x1ebeca['x'],this['y']=_0x1d2ca7['y']-_0x1ebeca['y'],this;}['subScalar'](_0x22c047){return this['x']-=_0x22c047,this['y']-=_0x22c047,this;}['fromArray'](_0x4ffd17,_0x857327=0x1*0x24e9+-0x1*0x2669+-0xc*-0x20){return this['x']=_0x4ffd17[_0x857327]??this['x'],this['y']=_0x4ffd17[_0x857327+(-0xf62+-0x1467+0x1*0x23ca)]??this['y'],this;}['toString'](){return'['+this['x']+',\x20'+this['y']+']';}['toArray'](_0x3a36a3=[],_0x18775f=0x5+-0x1e63+0x1e5e){return _0x3a36a3[_0x18775f]=this['x'],_0x3a36a3[_0x18775f+(0x13d1+-0x3bc+-0x1014)]=this['y'],_0x3a36a3;}static['angleRad'](_0xeaa4c6,_0x2ab157){return Math['atan2'](_0xeaa4c6['x']*_0x2ab157['y']-_0xeaa4c6['y']*_0x2ab157['x'],_0xeaa4c6['x']*_0x2ab157['x']+_0xeaa4c6['y']*_0x2ab157['y']);}};h(Gt,'ZERO',Object['freeze'](new Gt(0x15a+0x1*-0x1459+0x12ff,-0x2343+-0x1fa8+0x42eb*0x1))),h(Gt,'HALF',Object['freeze'](new Gt(-0x5d*-0x4c+-0xac1*-0x2+0x2*-0x188f+0.5,0xc2d+-0x882+0x139*-0x3+0.5))),h(Gt,'ONE',Object['freeze'](new Gt(0xda2+0x2482+0x5*-0xa07,-0x1021*-0x1+-0x2*-0x9b3+-0x2386))),h(Gt,'UP',Object['freeze'](new Gt(0x1*-0x1c1+0x16e8+0x13*-0x11d,-0x10b+0x11b7*-0x1+0x12c3*0x1))),h(Gt,'DOWN',Object['freeze'](new Gt(0x1410+-0x1d0d+0x8fd,-(-0x14b9+0x2552+0xc*-0x162)))),h(Gt,'RIGHT',Object['freeze'](new Gt(0xa9*-0x20+0x17a5*-0x1+0x1663*0x2,-0x2489*-0x1+-0x51*0x18+-0x1cf1))),h(Gt,'LEFT',Object['freeze'](new Gt(-(-0x1b97*0x1+0x22b5+-0x71d),0x5*0x66f+0xb76+-0x1*0x2ba1)));let J=Gt;const pr=class pr{constructor(_0x4734ef=-0xf09+0x4*0x203+0x6fd,_0x3672b3=-0x213+0x389+-0x1*0x176,_0xf16253=-0x10*0x21d+-0x38d*-0x1+0x3d*0x7f,_0x1992d5=0x32b+-0x1*-0x683+-0x9ae){h(this,'x'),h(this,'y'),h(this,'z'),h(this,'w'),_0x4734ef['length']===0xf67*-0x2+-0x1ac4+-0x1ccb*-0x2?(this['x']=_0x4734ef[-0x10a9*0x1+-0x1f4b+0x2ff4],this['y']=_0x4734ef[0x4*-0x742+-0x313*0x3+0x2642*0x1],this['z']=_0x4734ef[-0xf95+0x224d+-0x2*0x95b],this['w']=_0x4734ef[0xb67+0x39c+-0x50*0x30]):(this['x']=_0x4734ef,this['y']=_0x3672b3,this['z']=_0xf16253,this['w']=_0x1992d5);}['add'](_0x6301d0){return this['x']+=_0x6301d0['x'],this['y']+=_0x6301d0['y'],this['z']+=_0x6301d0['z'],this['w']+=_0x6301d0['w'],this;}['add2'](_0x1f2204,_0x3239e2){return this['x']=_0x1f2204['x']+_0x3239e2['x'],this['y']=_0x1f2204['y']+_0x3239e2['y'],this['z']=_0x1f2204['z']+_0x3239e2['z'],this['w']=_0x1f2204['w']+_0x3239e2['w'],this;}['addScalar'](_0x299c60){return this['x']+=_0x299c60,this['y']+=_0x299c60,this['z']+=_0x299c60,this['w']+=_0x299c60,this;}['addScaled'](_0xc59f7f,_0x3b0cf5){return this['x']+=_0xc59f7f['x']*_0x3b0cf5,this['y']+=_0xc59f7f['y']*_0x3b0cf5,this['z']+=_0xc59f7f['z']*_0x3b0cf5,this['w']+=_0xc59f7f['w']*_0x3b0cf5,this;}['clone'](){const _0x4123e2=this['constructo'+'r'];return new _0x4123e2(this['x'],this['y'],this['z'],this['w']);}['copy'](_0x3c75e2){return this['x']=_0x3c75e2['x'],this['y']=_0x3c75e2['y'],this['z']=_0x3c75e2['z'],this['w']=_0x3c75e2['w'],this;}['div'](_0x3237c0){return this['x']/=_0x3237c0['x'],this['y']/=_0x3237c0['y'],this['z']/=_0x3237c0['z'],this['w']/=_0x3237c0['w'],this;}['div2'](_0x960391,_0x3879cb){return this['x']=_0x960391['x']/_0x3879cb['x'],this['y']=_0x960391['y']/_0x3879cb['y'],this['z']=_0x960391['z']/_0x3879cb['z'],this['w']=_0x960391['w']/_0x3879cb['w'],this;}['divScalar'](_0x1fa0e9){return this['x']/=_0x1fa0e9,this['y']/=_0x1fa0e9,this['z']/=_0x1fa0e9,this['w']/=_0x1fa0e9,this;}['dot'](_0x47b29d){return this['x']*_0x47b29d['x']+this['y']*_0x47b29d['y']+this['z']*_0x47b29d['z']+this['w']*_0x47b29d['w'];}['equals'](_0x573830){return this['x']===_0x573830['x']&&this['y']===_0x573830['y']&&this['z']===_0x573830['z']&&this['w']===_0x573830['w'];}['equalsAppr'+'ox'](_0x59ec5a,_0x28235b=0x355*0x8+-0x2654+0xbac+0.000001){return Math['abs'](this['x']-_0x59ec5a['x'])<_0x28235b&&Math['abs'](this['y']-_0x59ec5a['y'])<_0x28235b&&Math['abs'](this['z']-_0x59ec5a['z'])<_0x28235b&&Math['abs'](this['w']-_0x59ec5a['w'])<_0x28235b;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w']);}['lengthSq'](){return this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w'];}['lerp'](_0x65ddf4,_0x129dc6,_0x217589){return this['x']=_0x65ddf4['x']+_0x217589*(_0x129dc6['x']-_0x65ddf4['x']),this['y']=_0x65ddf4['y']+_0x217589*(_0x129dc6['y']-_0x65ddf4['y']),this['z']=_0x65ddf4['z']+_0x217589*(_0x129dc6['z']-_0x65ddf4['z']),this['w']=_0x65ddf4['w']+_0x217589*(_0x129dc6['w']-_0x65ddf4['w']),this;}['mul'](_0x1d50d3){return this['x']*=_0x1d50d3['x'],this['y']*=_0x1d50d3['y'],this['z']*=_0x1d50d3['z'],this['w']*=_0x1d50d3['w'],this;}['mul2'](_0xb8df1,_0x274f15){return this['x']=_0xb8df1['x']*_0x274f15['x'],this['y']=_0xb8df1['y']*_0x274f15['y'],this['z']=_0xb8df1['z']*_0x274f15['z'],this['w']=_0xb8df1['w']*_0x274f15['w'],this;}['mulScalar'](_0x4daa9d){return this['x']*=_0x4daa9d,this['y']*=_0x4daa9d,this['z']*=_0x4daa9d,this['w']*=_0x4daa9d,this;}['normalize'](_0x2e43bd=this){const _0x13129f=_0x2e43bd['x']*_0x2e43bd['x']+_0x2e43bd['y']*_0x2e43bd['y']+_0x2e43bd['z']*_0x2e43bd['z']+_0x2e43bd['w']*_0x2e43bd['w'];if(_0x13129f>0x2218+-0x1*0x1efd+0xf*-0x35){const _0x20083f=(-0xa07+0x45*-0x1e+0x121e)/Math['sqrt'](_0x13129f);this['x']=_0x2e43bd['x']*_0x20083f,this['y']=_0x2e43bd['y']*_0x20083f,this['z']=_0x2e43bd['z']*_0x20083f,this['w']=_0x2e43bd['w']*_0x20083f;}return this;}['floor'](_0x1e7bfe=this){return this['x']=Math['floor'](_0x1e7bfe['x']),this['y']=Math['floor'](_0x1e7bfe['y']),this['z']=Math['floor'](_0x1e7bfe['z']),this['w']=Math['floor'](_0x1e7bfe['w']),this;}['ceil'](_0x281eee=this){return this['x']=Math['ceil'](_0x281eee['x']),this['y']=Math['ceil'](_0x281eee['y']),this['z']=Math['ceil'](_0x281eee['z']),this['w']=Math['ceil'](_0x281eee['w']),this;}['round'](_0x4b4b53=this){return this['x']=Math['round'](_0x4b4b53['x']),this['y']=Math['round'](_0x4b4b53['y']),this['z']=Math['round'](_0x4b4b53['z']),this['w']=Math['round'](_0x4b4b53['w']),this;}['min'](_0x3e59ef){return _0x3e59ef['x']<this['x']&&(this['x']=_0x3e59ef['x']),_0x3e59ef['y']<this['y']&&(this['y']=_0x3e59ef['y']),_0x3e59ef['z']<this['z']&&(this['z']=_0x3e59ef['z']),_0x3e59ef['w']<this['w']&&(this['w']=_0x3e59ef['w']),this;}['max'](_0x32e268){return _0x32e268['x']>this['x']&&(this['x']=_0x32e268['x']),_0x32e268['y']>this['y']&&(this['y']=_0x32e268['y']),_0x32e268['z']>this['z']&&(this['z']=_0x32e268['z']),_0x32e268['w']>this['w']&&(this['w']=_0x32e268['w']),this;}['set'](_0x13fa24,_0x85915,_0x47c510,_0x22b5d7){return this['x']=_0x13fa24,this['y']=_0x85915,this['z']=_0x47c510,this['w']=_0x22b5d7,this;}['sub'](_0x299512){return this['x']-=_0x299512['x'],this['y']-=_0x299512['y'],this['z']-=_0x299512['z'],this['w']-=_0x299512['w'],this;}['sub2'](_0x1f85aa,_0x5b8e90){return this['x']=_0x1f85aa['x']-_0x5b8e90['x'],this['y']=_0x1f85aa['y']-_0x5b8e90['y'],this['z']=_0x1f85aa['z']-_0x5b8e90['z'],this['w']=_0x1f85aa['w']-_0x5b8e90['w'],this;}['subScalar'](_0x408840){return this['x']-=_0x408840,this['y']-=_0x408840,this['z']-=_0x408840,this['w']-=_0x408840,this;}['fromArray'](_0x1a1527,_0x33be87=-0x35*0x42+-0x830+0x15da){return this['x']=_0x1a1527[_0x33be87]??this['x'],this['y']=_0x1a1527[_0x33be87+(-0x214+0x641*-0x5+0x6*0x58f)]??this['y'],this['z']=_0x1a1527[_0x33be87+(0x5*-0x796+0x247f+0x171)]??this['z'],this['w']=_0x1a1527[_0x33be87+(-0x2*-0xf4f+-0x233a+0x49f*0x1)]??this['w'],this;}['toString'](){return'['+this['x']+',\x20'+this['y']+',\x20'+this['z']+',\x20'+this['w']+']';}['toArray'](_0x3a9d8d=[],_0x43ff0f=-0x4af+-0x42c+-0x1*-0x8db){return _0x3a9d8d[_0x43ff0f]=this['x'],_0x3a9d8d[_0x43ff0f+(0xe47+0xb51*-0x1+-0x1*0x2f5)]=this['y'],_0x3a9d8d[_0x43ff0f+(-0x14d4+0x8*0x36c+0x2*-0x345)]=this['z'],_0x3a9d8d[_0x43ff0f+(0x777+-0x100a+-0x9d*-0xe)]=this['w'],_0x3a9d8d;}};h(pr,'ZERO',Object['freeze'](new pr(-0x930*-0x2+-0x347*-0x3+-0x1c35,-0x1764+0x193c+-0x1d8,0xa38+0xd5*-0x1+-0x963,0x11*-0x147+-0x1*-0x1be7+-0x630))),h(pr,'HALF',Object['freeze'](new pr(0x95d+-0x1*-0x1fb7+-0x2914+0.5,-0xbcb+0x4ed*0x3+-0x2fc+0.5,-0x1*-0xcf4+0x1764+-0x2458+0.5,-0xad*0x11+0x98e*0x1+0x1ef+0.5))),h(pr,'ONE',Object['freeze'](new pr(0x5*-0x179+0xb12+0x3b4*-0x1,0xbfc+-0x235+0x9c6*-0x1,0x1939+0x1b09*0x1+0x31*-0x111,0x1*0x1402+0xeda+-0x22db)));let re=pr;const to=new J(),Os=new D(),Js=new D(),ei=new D(),Hl=new D(),Qr=class Qr{constructor(){h(this,'data',new Float32Array(-0x1997+0x22eb*0x1+-0x251*0x4)),this['data'][-0x1357+0x16e3+-0x38c]=this['data'][-0x20aa+-0x900+0x29af]=this['data'][-0x5*-0xb5+-0x2*-0xd0d+0x1*-0x1d99]=this['data'][0x1*0x148d+0x1937+-0x2db5]=0x5f*0x59+-0x31*-0xa3+-0x4039;}static['_getPerspe'+'ctiveHalfS'+'ize'](_0x109b37,_0x5ce0ff,_0x214aad,_0x561ef6,_0x1bbd8d){_0x1bbd8d?(_0x109b37['x']=_0x561ef6*Math['tan'](_0x5ce0ff*Math['PI']/(-0x2*-0x2ce+0x1bfd+-0x2031)),_0x109b37['y']=_0x109b37['x']/_0x214aad):(_0x109b37['y']=_0x561ef6*Math['tan'](_0x5ce0ff*Math['PI']/(-0x1*0xe32+0x1*-0x3ec+0x1386)),_0x109b37['x']=_0x109b37['y']*_0x214aad);}['add2'](_0x4f1d9b,_0x5bf2ba){const _0x5cf4e8=_0x4f1d9b['data'],_0x27fb70=_0x5bf2ba['data'],_0x21460a=this['data'];return _0x21460a[-0xd*-0xa4+0x960+-0x11b4]=_0x5cf4e8[0x3db*-0x3+0x5*-0x7cf+0x329c]+_0x27fb70[0x1c2e+0x2207+-0x7*0x8e3],_0x21460a[-0x2*-0x737+-0x2025+0x11b8]=_0x5cf4e8[-0x629*0x2+-0x2*-0x135d+-0x1a67]+_0x27fb70[-0x1*0x1196+0x6*-0x335+0x24d5],_0x21460a[0xb*0x8c+0x1037*-0x2+0x1a6c]=_0x5cf4e8[-0x64d+0x52a*-0x5+0x2021]+_0x27fb70[-0x1*-0x1d83+0x10e+-0x1e8f],_0x21460a[0x1627+0x1998+-0x2fbc]=_0x5cf4e8[0x1836+-0x3*0x97+-0x166e]+_0x27fb70[0x5*0x779+0x19be+-0x3f18],_0x21460a[-0x6*-0x48c+0x1dc6+-0x390a]=_0x5cf4e8[-0x23*-0x37+0xd*-0x1f5+0x11f0]+_0x27fb70[0x1333+-0x9eb+-0x944],_0x21460a[-0x63e*0x1+-0x1*0x1a35+-0x40f*-0x8]=_0x5cf4e8[-0x885+-0x569*0x2+0x15*0xec]+_0x27fb70[-0x1a07+0x1f89+-0x57d],_0x21460a[-0x40e*0x3+0x157*-0x1c+0x31b4]=_0x5cf4e8[0xddb+-0x1d88+0xfb3]+_0x27fb70[0xfc8+0x1207+-0x21c9],_0x21460a[0x2b*-0xe+-0xcc7+0xf28]=_0x5cf4e8[0x1d*0x5+0x221b+-0x1*0x22a5]+_0x27fb70[0x1*-0x2403+0xa96*-0x1+0x2ea0],_0x21460a[-0xf2*-0x11+0x371*-0x7+0x80d*0x1]=_0x5cf4e8[-0xba3+-0x8f2+0x149d*0x1]+_0x27fb70[0x6db+0xbc3+0x319*-0x6],_0x21460a[-0x21fb+0x1*0xaf1+-0x21*-0xb3]=_0x5cf4e8[0x22c4+-0x1c14+0xd*-0x83]+_0x27fb70[0x17f5*0x1+0x63f+-0x1*0x1e2b],_0x21460a[-0x2519+-0x2432+0x4955]=_0x5cf4e8[-0x18fa+0x20b4+0xa4*-0xc]+_0x27fb70[-0xc6*0x4+-0x1735+0x1a57*0x1],_0x21460a[0x24dd+0x445*0x6+-0x1*0x3e70]=_0x5cf4e8[-0x1309+-0x131e+0x2632]+_0x27fb70[-0x1f36+0xb6*0x18+-0x1*-0xe31],_0x21460a[0xe96+-0x21aa+-0x198*-0xc]=_0x5cf4e8[0x27*-0x65+0x2507+0x1598*-0x1]+_0x27fb70[-0x3d*-0x6d+-0x1*0x7ed+-0x48*0x40],_0x21460a[-0x4*0x346+0x12b1+-0x58c]=_0x5cf4e8[-0x1293+0xc6d*-0x3+0x37e7]+_0x27fb70[-0x19*0x2f+-0xe99+0x1*0x133d],_0x21460a[-0x71*0x42+-0x4aa*-0x7+-0x376]=_0x5cf4e8[0x11d8+0xdb8+0x1*-0x1f82]+_0x27fb70[-0x1543*-0x1+-0x1*0x70e+-0xe27],_0x21460a[-0x53*-0x1f+0x1cf4*0x1+-0x26f2]=_0x5cf4e8[-0x23b+0x1fd6+-0x1d8c]+_0x27fb70[-0x1*-0x1079+0x1f63+-0x2fcd],this;}['add'](_0x1f5374){return this['add2'](this,_0x1f5374);}['clone'](){const _0x35c514=this['constructo'+'r'];return new _0x35c514()['copy'](this);}['copy'](_0x295767){const _0x1b2c81=_0x295767['data'],_0x536e41=this['data'];return _0x536e41[0x24bf+-0x1b1a*-0x1+-0x1d3*0x23]=_0x1b2c81[0x2708+-0x2*0xa6f+0x2*-0x915],_0x536e41[0x39d*0x1+0x6*0x27b+-0x127e]=_0x1b2c81[-0x7a3+-0x1097+0x183b],_0x536e41[0x85b+0x25c2+0x1d*-0x197]=_0x1b2c81[-0x1*0xae4+0x5*-0x60a+0x2918],_0x536e41[-0x34*0x61+-0x38b*-0x1+0x102c]=_0x1b2c81[0x2030+-0x5*-0x185+-0x27c6],_0x536e41[-0x1ee2+-0x2657+0x453d]=_0x1b2c81[0x28*-0xb5+0x9e8+0x1264],_0x536e41[0x741*0x2+0x18*0x6e+-0x18cd]=_0x1b2c81[-0x81*-0x32+0x1*0x2027+-0x3954],_0x536e41[0xe2*-0x1f+-0xb*0x7+0x1bb1]=_0x1b2c81[0x1702+0xf0d+-0x7*0x56f],_0x536e41[-0x14b*-0xb+-0xbd*0x2+0x197*-0x8]=_0x1b2c81[0x5cc+-0x869*-0x2+0x1*-0x1697],_0x536e41[-0xd1b*-0x1+0x1cc*0xd+-0x246f]=_0x1b2c81[0xf85+-0x21e0+0x1263],_0x536e41[0x455*-0x4+0x385*-0x2+-0x1*-0x1867]=_0x1b2c81[0xe0c+0x97*0x2b+-0x2760],_0x536e41[-0x958+0x1dab+-0x1449]=_0x1b2c81[0x819+-0x1*0x1fcb+0xe*0x1b2],_0x536e41[-0x1*-0x1775+-0x1bb*-0xe+-0x2fa4]=_0x1b2c81[0x4*0xfa+0x1b62+-0x1f3f],_0x536e41[-0xa3*-0x3d+-0x1*0x2509+-0x1c2]=_0x1b2c81[0x2386*0x1+-0xde*-0x6+-0x7f*0x52],_0x536e41[-0x53*0x78+-0x1721*0x1+0x3e16]=_0x1b2c81[0xa4b+0x1ecb+-0x2909],_0x536e41[-0x1975+-0x14e3+0x2e66]=_0x1b2c81[-0xc98+-0xa50+0x16f6],_0x536e41[-0x6b5*-0x5+-0x1b4f+-0x62b]=_0x1b2c81[0xb73+-0x91a*0x2+0x6d0],this;}['equals'](_0x26d836){const _0x293411=this['data'],_0xf4c7d8=_0x26d836['data'];return _0x293411[0x6ad*-0x4+-0x148*-0x5+0x144c]===_0xf4c7d8[-0x37b+-0x1*-0xea0+-0xb25]&&_0x293411[0x1a15+0x1554+-0x2f68*0x1]===_0xf4c7d8[0x172b+-0x18f5+-0x9*-0x33]&&_0x293411[0x2652+-0x3b*-0x9d+-0x4a7f]===_0xf4c7d8[-0x229b+-0x281*-0x1+0x201c]&&_0x293411[-0x1b22+0x5+0x1b20]===_0xf4c7d8[-0x16b9*-0x1+-0xb18+-0xb9e]&&_0x293411[0x22d+0x2609+-0x2832]===_0xf4c7d8[-0xa33+-0x1*-0x269+0x7ce]&&_0x293411[0x24cf+-0x2268+0x131*-0x2]===_0xf4c7d8[-0x1fcc+-0x2180+0x4151]&&_0x293411[0x120d+0xbc+-0x3*0x641]===_0xf4c7d8[0x20b9+-0x1bc2+-0xb*0x73]&&_0x293411[0x481+0x11ef+0x1669*-0x1]===_0xf4c7d8[-0x1b5d+0x1a87+-0xdd*-0x1]&&_0x293411[-0x8*-0x251+0x1861+-0x2ae1]===_0xf4c7d8[0x1b2c+-0x26a0*0x1+0xb7c]&&_0x293411[-0x19e*-0xd+0x1788+-0x2c85]===_0xf4c7d8[0x7ec+-0xa40+0x25d]&&_0x293411[-0x1*0x845+0x9c3*0x3+-0x5*0x432]===_0xf4c7d8[-0x1237+0x26*-0x79+0x2437*0x1]&&_0x293411[-0xffd+0xac3+0x545]===_0xf4c7d8[0x1a0a+0x250f+-0xe*0x481]&&_0x293411[0x39e+0x1*0x424+0x8d*-0xe]===_0xf4c7d8[-0x1*-0x737+0xb1*0x4+-0x9ef]&&_0x293411[-0x1*0x13b1+-0x157f*-0x1+0x1c1*-0x1]===_0xf4c7d8[-0x498+-0x202a*0x1+0x24cf]&&_0x293411[0xf*0x155+-0x2*0x1297+0x1141*0x1]===_0xf4c7d8[0x375+0xdb5*0x1+0x88e*-0x2]&&_0x293411[-0x2a7*-0x1+0x1*-0x12bf+0x1027]===_0xf4c7d8[0xbc*0x7+0xcf7*-0x3+-0x10e8*-0x2];}['isIdentity'](){const _0x577817=this['data'];return _0x577817[0x17f*-0xf+0x139e+0x2d3]===0xf53+-0xbb+-0xe97&&_0x577817[0x1*0x16fb+-0x56*-0x49+0x17c*-0x20]===0x2*-0xbbd+-0xf84+0x2c9*0xe&&_0x577817[-0xb05+0x16d9+0x11*-0xb2]===0x1*0xd5+-0x52d+0x458&&_0x577817[0x1*-0x1f9f+0x1b28+0x47a]===0x1*0x19d6+-0x1*-0x1f3+-0x1*0x1bc9&&_0x577817[0x22b2+0x101d+0x32cb*-0x1]===-0x1*0x12fd+0x973*0x1+0x197*0x6&&_0x577817[-0x209a+0xf00+-0xd*-0x15b]===-0x23b9+0xf9*0xd+0x1715&&_0x577817[0x1*-0x4f9+0x4*0x2f2+-0x6c9]===0x1*0x2484+-0x32e+-0x2156&&_0x577817[-0x30e+0x1*0x211f+-0x1e0a]===-0x1ce*0x1+-0x488+0x656&&_0x577817[0x2560+0x1686+-0x3bde*0x1]===-0x1534+0x1e9c+-0x1c*0x56&&_0x577817[-0xc91*-0x1+0x1968+-0x2*0x12f8]===0x2302+0xb*0x205+-0x1*0x3939&&_0x577817[0x201e+0x23*-0x59+-0x13e9]===0x1039*-0x1+0x5da*-0x4+0x2*0x13d1&&_0x577817[-0x1*-0x1cb+-0x793*0x3+0x14f9]===-0x733*0x1+0x1f75+-0x1842&&_0x577817[0xb8b+-0x5de+-0x5a1]===-0x18aa+-0x4*0x385+0x26be&&_0x577817[0x5*-0x7c3+0x4*-0x94d+0x4c10]===-0x3*-0x21+0x95*0x14+-0x1*0xc07&&_0x577817[-0x2*0x1273+0x2352+0x1a2]===-0x5a4+-0x7f7*-0x3+-0x1*0x1241&&_0x577817[-0x8*-0x19d+0x1ac2+-0x279b]===0x34*0x8+-0x5d*-0x16+-0x99d;}['mul2'](_0x4787eb,_0x326fd3){const _0x28dafe=_0x4787eb['data'],_0x29bf3d=_0x326fd3['data'],_0x4874da=this['data'],_0x14fdef=_0x28dafe[-0x89+-0x11c+0x1a5],_0x43b347=_0x28dafe[0x10bd+0x5df*0x1+0x789*-0x3],_0x1f988a=_0x28dafe[-0x1f4f*0x1+0x3d*-0x52+0x32db],_0x26830d=_0x28dafe[0x2206+0x85*0x3+0x13a*-0x1d],_0x2274cb=_0x28dafe[0x2*-0x93b+-0x3*-0xbfb+-0x1177],_0x3b0a8d=_0x28dafe[-0x1383+-0x4a4+0x182c],_0x74dfd=_0x28dafe[0x1096*-0x1+0x1*-0x1c50+0x2cec],_0x2ccf47=_0x28dafe[-0x2*-0xd64+-0x19b*-0x12+0x62f*-0x9],_0x197a84=_0x28dafe[0x168f+-0x256f*-0x1+-0x3bf6],_0x45b95b=_0x28dafe[0xa9a+-0x1616+0xb85],_0x498c7b=_0x28dafe[-0x261*-0x1+-0x7ce+-0x577*-0x1],_0x4aa44e=_0x28dafe[0x23bf+0x1*0x9af+-0x50b*0x9],_0x46d293=_0x28dafe[-0x10fd+0x891+0x878],_0x240351=_0x28dafe[0x1bfa+-0x132e+-0x8bf],_0x4cda11=_0x28dafe[-0x7f3*0x2+0x1*-0x2499+-0x348d*-0x1],_0x132f86=_0x28dafe[0x2*-0x26c+-0x1c86+0x216d];let _0x4fefc2,_0xce1aad,_0x4070e2,_0x4cbd65;return _0x4fefc2=_0x29bf3d[0x210d+-0xd41+-0x13cc],_0xce1aad=_0x29bf3d[-0x1c55+-0x2636+0x428c],_0x4070e2=_0x29bf3d[-0x217a+-0x2ec+0x2468],_0x4cbd65=_0x29bf3d[0x20d0+-0xf43+-0x118a*0x1],_0x4874da[-0x1*-0xedd+0x187b+0x8*-0x4eb]=_0x14fdef*_0x4fefc2+_0x2274cb*_0xce1aad+_0x197a84*_0x4070e2+_0x46d293*_0x4cbd65,_0x4874da[0x19ba+-0x1*-0x21c7+-0x10*0x3b8]=_0x43b347*_0x4fefc2+_0x3b0a8d*_0xce1aad+_0x45b95b*_0x4070e2+_0x240351*_0x4cbd65,_0x4874da[-0x9dd*0x2+0x1*0xf45+0x17d*0x3]=_0x1f988a*_0x4fefc2+_0x74dfd*_0xce1aad+_0x498c7b*_0x4070e2+_0x4cda11*_0x4cbd65,_0x4874da[0x1*0x1d3f+0x124+-0x1e60]=_0x26830d*_0x4fefc2+_0x2ccf47*_0xce1aad+_0x4aa44e*_0x4070e2+_0x132f86*_0x4cbd65,_0x4fefc2=_0x29bf3d[-0x1*-0x1fc4+-0xbb6*0x1+-0x140a],_0xce1aad=_0x29bf3d[0xb*0x273+-0xdab*-0x1+-0x2897],_0x4070e2=_0x29bf3d[-0x329+-0x26f4*-0x1+-0x23c5*0x1],_0x4cbd65=_0x29bf3d[-0x3ad*0x4+-0xb0*-0x33+-0x1455*0x1],_0x4874da[-0xade+0x640*0x2+-0x1*0x19e]=_0x14fdef*_0x4fefc2+_0x2274cb*_0xce1aad+_0x197a84*_0x4070e2+_0x46d293*_0x4cbd65,_0x4874da[0xb91+0xf44+0x84*-0x34]=_0x43b347*_0x4fefc2+_0x3b0a8d*_0xce1aad+_0x45b95b*_0x4070e2+_0x240351*_0x4cbd65,_0x4874da[-0x153d+0x51+0x14f2]=_0x1f988a*_0x4fefc2+_0x74dfd*_0xce1aad+_0x498c7b*_0x4070e2+_0x4cda11*_0x4cbd65,_0x4874da[0x1205+-0x482*-0x3+-0x1f84]=_0x26830d*_0x4fefc2+_0x2ccf47*_0xce1aad+_0x4aa44e*_0x4070e2+_0x132f86*_0x4cbd65,_0x4fefc2=_0x29bf3d[-0x1e6*-0xe+-0xf6a*-0x2+-0x3960],_0xce1aad=_0x29bf3d[-0x53*-0x1+-0x19*-0x172+-0x246c],_0x4070e2=_0x29bf3d[-0x2218+0x6a*-0x5a+0x4766],_0x4cbd65=_0x29bf3d[-0xfb*0x11+-0x70*-0x2b+-0x21a],_0x4874da[-0x7*-0x4d5+0x1121+-0x32ec*0x1]=_0x14fdef*_0x4fefc2+_0x2274cb*_0xce1aad+_0x197a84*_0x4070e2+_0x46d293*_0x4cbd65,_0x4874da[0x1e2a+-0x593+-0x188e]=_0x43b347*_0x4fefc2+_0x3b0a8d*_0xce1aad+_0x45b95b*_0x4070e2+_0x240351*_0x4cbd65,_0x4874da[0x23b5+-0xfd1+-0x13da]=_0x1f988a*_0x4fefc2+_0x74dfd*_0xce1aad+_0x498c7b*_0x4070e2+_0x4cda11*_0x4cbd65,_0x4874da[0x1576+0x1d4b*-0x1+0x7e0]=_0x26830d*_0x4fefc2+_0x2ccf47*_0xce1aad+_0x4aa44e*_0x4070e2+_0x132f86*_0x4cbd65,_0x4fefc2=_0x29bf3d[-0xa0c*0x1+-0x11*-0xf4+-0x61c],_0xce1aad=_0x29bf3d[-0xd21+-0x1*-0x9cb+0x363],_0x4070e2=_0x29bf3d[-0x5e*0x53+-0x2016+0x1f4f*0x2],_0x4cbd65=_0x29bf3d[0x1145+0x1*0x14af+-0x59*0x6d],_0x4874da[-0x362+-0x254b+0x28b9]=_0x14fdef*_0x4fefc2+_0x2274cb*_0xce1aad+_0x197a84*_0x4070e2+_0x46d293*_0x4cbd65,_0x4874da[-0x250c+0x48f*-0x5+-0x2*-0x1df2]=_0x43b347*_0x4fefc2+_0x3b0a8d*_0xce1aad+_0x45b95b*_0x4070e2+_0x240351*_0x4cbd65,_0x4874da[-0xe5*0x1d+-0x1f27+-0x181*-0x26]=_0x1f988a*_0x4fefc2+_0x74dfd*_0xce1aad+_0x498c7b*_0x4070e2+_0x4cda11*_0x4cbd65,_0x4874da[-0x22*0xe+-0x3ca+0x5b5]=_0x26830d*_0x4fefc2+_0x2ccf47*_0xce1aad+_0x4aa44e*_0x4070e2+_0x132f86*_0x4cbd65,this;}['mulAffine2'](_0x351579,_0x5634a6){const _0xb7ead0=_0x351579['data'],_0x452c1e=_0x5634a6['data'],_0x7f6636=this['data'],_0x4c7207=_0xb7ead0[0x1b1c+0xac9*0x3+-0x3b77],_0x59b60e=_0xb7ead0[0x15e6+-0x7*0x469+-0x47d*-0x2],_0x505e13=_0xb7ead0[0x1d2f+0x1656+-0x3383],_0x1db45e=_0xb7ead0[-0x12e0+0xcb5+0x62f*0x1],_0x5bd08a=_0xb7ead0[0x8b*0x36+-0x210d+0x3c0],_0x467dd7=_0xb7ead0[0x1*-0x113d+0xd2c+0x417],_0x11ee88=_0xb7ead0[-0x1111+-0x1834+0x294d],_0x3a4d9e=_0xb7ead0[-0x4a*-0x2b+0x18d6+-0x253b],_0x4510a5=_0xb7ead0[-0x3*-0xa77+-0x1b95+0x17*-0x2a],_0x24ca2c=_0xb7ead0[0x10ff+-0x2424+0x1331],_0x5a3566=_0xb7ead0[0xa57*-0x1+0x6*-0x297+0x19ee*0x1],_0x477e9f=_0xb7ead0[0x1*-0xbab+-0x4df*0x8+-0x2ab*-0x13];let _0x43aec5,_0x314955,_0x12ef19;return _0x43aec5=_0x452c1e[0x8e*0x22+0x1c05*0x1+0x1*-0x2ee1],_0x314955=_0x452c1e[-0x2*0x11fc+-0x2405*-0x1+0x2*-0x6],_0x12ef19=_0x452c1e[0x5*0x7c9+-0x1d9b+-0x950],_0x7f6636[-0x1af*0x5+-0xf8a+0x17f5*0x1]=_0x4c7207*_0x43aec5+_0x1db45e*_0x314955+_0x11ee88*_0x12ef19,_0x7f6636[-0x1*-0x24f2+-0x1b06+0x1*-0x9eb]=_0x59b60e*_0x43aec5+_0x5bd08a*_0x314955+_0x3a4d9e*_0x12ef19,_0x7f6636[-0x9de+0x5c*-0x67+0x2ee4]=_0x505e13*_0x43aec5+_0x467dd7*_0x314955+_0x4510a5*_0x12ef19,_0x7f6636[-0x167a+-0x15f6+0xed1*0x3]=-0x19c7+0x1ca+-0x7ff*-0x3,_0x43aec5=_0x452c1e[0x324*-0x6+0x3*-0xc31+0x376f],_0x314955=_0x452c1e[0x181+0x2280+-0x23fc],_0x12ef19=_0x452c1e[-0x1*0x13cd+0x2662+-0x128f],_0x7f6636[0xb2e+0x65b+-0xd*0x159]=_0x4c7207*_0x43aec5+_0x1db45e*_0x314955+_0x11ee88*_0x12ef19,_0x7f6636[-0x1203+-0x220b+0x3413]=_0x59b60e*_0x43aec5+_0x5bd08a*_0x314955+_0x3a4d9e*_0x12ef19,_0x7f6636[0x570+-0x1*-0xb6b+-0x1*0x10d5]=_0x505e13*_0x43aec5+_0x467dd7*_0x314955+_0x4510a5*_0x12ef19,_0x7f6636[0xe5f*0x1+-0x16d9+0x881]=-0x2186+0x3*-0x4dc+0x180d*0x2,_0x43aec5=_0x452c1e[-0x1716+0x1cd*0xf+-0x3e5],_0x314955=_0x452c1e[0x12da+0x97*-0x4+0xb*-0x17f],_0x12ef19=_0x452c1e[-0x12f8+-0x2691+0x3993],_0x7f6636[0x1*0x99e+0x1*0xd76+-0x170c]=_0x4c7207*_0x43aec5+_0x1db45e*_0x314955+_0x11ee88*_0x12ef19,_0x7f6636[0xa*0xd0+-0x51d*0x7+0x1bb4]=_0x59b60e*_0x43aec5+_0x5bd08a*_0x314955+_0x3a4d9e*_0x12ef19,_0x7f6636[0x7*0x445+-0x4*0x4a3+-0xb4d]=_0x505e13*_0x43aec5+_0x467dd7*_0x314955+_0x4510a5*_0x12ef19,_0x7f6636[0x1f93+0x3b*0x73+-0x3a09]=0x2239+-0x236+-0x1*0x2003,_0x43aec5=_0x452c1e[-0x79b+-0xf52+0x16f9*0x1],_0x314955=_0x452c1e[-0x2*0xb6f+-0xaae+-0x2f*-0xb7],_0x12ef19=_0x452c1e[0xbd6+-0x1df*-0x13+-0x2f55],_0x7f6636[0x35c*-0xa+0x1f88*-0x1+0x104b*0x4]=_0x4c7207*_0x43aec5+_0x1db45e*_0x314955+_0x11ee88*_0x12ef19+_0x24ca2c,_0x7f6636[-0x1*0x1b43+-0x1*0x1e25+0x3975]=_0x59b60e*_0x43aec5+_0x5bd08a*_0x314955+_0x3a4d9e*_0x12ef19+_0x5a3566,_0x7f6636[-0x93d+0x5ba*0x4+0x1*-0xd9d]=_0x505e13*_0x43aec5+_0x467dd7*_0x314955+_0x4510a5*_0x12ef19+_0x477e9f,_0x7f6636[0x26d1+-0x1*-0x1cab+-0x436d]=0x1d*0x72+0x0+-0x5*0x295,this;}['mul'](_0x1bb92){return this['mul2'](this,_0x1bb92);}['transformP'+'oint'](_0x1a40a2,_0x59d578=new D()){const _0x50cc94=this['data'],{x:_0x167a46,y:_0x17d47d,z:_0x24f218}=_0x1a40a2;return _0x59d578['x']=_0x167a46*_0x50cc94[0x4c1*-0x5+0x3*0xb11+-0x96e]+_0x17d47d*_0x50cc94[-0x16a*-0x2+0x16f6+0x1*-0x19c6]+_0x24f218*_0x50cc94[0xb7*0xd+-0x1b50+0x1*0x120d]+_0x50cc94[0x3*0x99b+-0x13d*0x1+0x8*-0x371],_0x59d578['y']=_0x167a46*_0x50cc94[-0x746+0x1db6+-0x166f]+_0x17d47d*_0x50cc94[0x11d1*-0x1+0xc0*-0x6+-0x2*-0xb2b]+_0x24f218*_0x50cc94[0x1693*-0x1+-0x29a+0x1936]+_0x50cc94[0xdf+-0x13*0x169+0x19f9],_0x59d578['z']=_0x167a46*_0x50cc94[-0xf7d+0x140d+-0x48e]+_0x17d47d*_0x50cc94[0x1941+-0x3*-0x2fa+0x247*-0xf]+_0x24f218*_0x50cc94[0x171f+0x37e+-0x1a93]+_0x50cc94[-0x1cac*0x1+-0x19cf+0x3689],_0x59d578;}['transformV'+'ector'](_0x4011d4,_0xd954a1=new D()){const _0x87801c=this['data'],{x:_0x49acec,y:_0x2d6032,z:_0x9986a5}=_0x4011d4;return _0xd954a1['x']=_0x49acec*_0x87801c[0xdce+-0xb8c+-0x242]+_0x2d6032*_0x87801c[-0x3*0x939+-0x3*-0x287+-0xa0d*-0x2]+_0x9986a5*_0x87801c[0x5d1*-0x2+-0x1063+0x1c0d],_0xd954a1['y']=_0x49acec*_0x87801c[0x962+-0x95f*-0x1+-0x12c0]+_0x2d6032*_0x87801c[-0x1*-0x24bb+0x23bf+-0x2af*0x1b]+_0x9986a5*_0x87801c[0xb7*0x1f+0x1a31+-0xd9*0x39],_0xd954a1['z']=_0x49acec*_0x87801c[-0xb9c+0x337*0x6+-0x7ac]+_0x2d6032*_0x87801c[-0x13fa+0x1df3+-0x11b*0x9]+_0x9986a5*_0x87801c[-0x1*0x1951+0x363*0x3+-0x2*-0x799],_0xd954a1;}['transformV'+'ec4'](_0x4c9b2a,_0xe67021=new re()){const _0x4451ab=this['data'],{x:_0x3cddba,y:_0x12167e,z:_0x49dee9,w:_0x497cdd}=_0x4c9b2a;return _0xe67021['x']=_0x3cddba*_0x4451ab[0x13cd*-0x1+0x39*-0x41+-0xd6*-0x29]+_0x12167e*_0x4451ab[-0x13e4+-0x2334+0x371c]+_0x49dee9*_0x4451ab[0x2626+-0x137b+-0x16f*0xd]+_0x497cdd*_0x4451ab[-0x1cc9*0x1+-0xb1d+0x27f2],_0xe67021['y']=_0x3cddba*_0x4451ab[-0x1215*-0x2+-0x7c*0x47+-0x1*0x1c5]+_0x12167e*_0x4451ab[0x1dc+0x54*0x59+-0x373*0x9]+_0x49dee9*_0x4451ab[0x2611+0x237f+0x1*-0x4987]+_0x497cdd*_0x4451ab[-0x1a0+-0x170f+0x18bc],_0xe67021['z']=_0x3cddba*_0x4451ab[-0x83f*-0x2+-0x3*0x937+0xb29]+_0x12167e*_0x4451ab[0x2020*0x1+0x2469+0x4483*-0x1]+_0x49dee9*_0x4451ab[-0xce2+0xc79+0x73]+_0x497cdd*_0x4451ab[-0x19*0x62+0x1b7f+-0x11df*0x1],_0xe67021['w']=_0x3cddba*_0x4451ab[0x43+0x1b1d*0x1+-0x5*0x579]+_0x12167e*_0x4451ab[0x1c06+-0x1*-0x1bd5+-0x6*0x94e]+_0x49dee9*_0x4451ab[0x29*0xc2+0x85*-0xd+-0x1846]+_0x497cdd*_0x4451ab[0xbf*0x21+-0x25d8+-0x4*-0x352],_0xe67021;}['setLookAt'](_0xe37998,_0x2d05d7,_0x28241a){ei['sub2'](_0xe37998,_0x2d05d7)['normalize'](),Js['copy'](_0x28241a)['normalize'](),Os['cross'](Js,ei)['normalize'](),Js['cross'](ei,Os);const _0xd07c2c=this['data'];return _0xd07c2c[-0x2377+0x31*-0x21+-0x1c*-0x17e]=Os['x'],_0xd07c2c[0x382+-0xb91*0x3+-0xf2*-0x21]=Os['y'],_0xd07c2c[-0x1*0x1d52+-0xf4f+-0x27*-0x125]=Os['z'],_0xd07c2c[-0x2d3+-0x1e*0x97+0x8*0x291]=-0x2*-0x313+0x6b*0x1+0x29*-0x29,_0xd07c2c[-0x4*0x636+-0x17a1+0x307d*0x1]=Js['x'],_0xd07c2c[-0x862*0x1+-0x22e0+0x2b47]=Js['y'],_0xd07c2c[-0x919*-0x3+0x219e+-0x1*0x3ce3]=Js['z'],_0xd07c2c[0x16*-0x152+0x1d0d*-0x1+-0x1360*-0x3]=-0x94e+0x130b+-0x9bd,_0xd07c2c[-0x23ff+-0x9c+-0x24a3*-0x1]=ei['x'],_0xd07c2c[0x2461+0x15*0x31+0x1*-0x285d]=ei['y'],_0xd07c2c[0x5f1+-0x15af*0x1+0xfc8]=ei['z'],_0xd07c2c[0x24*0x24+-0x5*-0x4d0+-0x1d15]=-0x5*-0x187+-0x1f3f+-0x5e7*-0x4,_0xd07c2c[-0x16*-0x1b1+-0x133c*-0x1+-0x3866]=_0xe37998['x'],_0xd07c2c[0x7cb+0x594+-0xd52]=_0xe37998['y'],_0xd07c2c[0x2633*-0x1+-0x1*-0xfbf+0x1682]=_0xe37998['z'],_0xd07c2c[0xeab+0x2480+-0x331c]=-0x9c*-0xd+-0x945+0x15a,this;}['setFrustum'](_0x4310a4,_0x20ca74,_0xb9336f,_0x40a940,_0x4e63ba,_0x5e8071){const _0x1f80e6=(0x1*0x14e1+-0xe7b+0x199*-0x4)*_0x4e63ba,_0x5c8571=_0x20ca74-_0x4310a4,_0x58bc32=_0x40a940-_0xb9336f,_0x540e9b=_0x5e8071-_0x4e63ba,_0x304412=this['data'];return _0x304412[-0x17cd+0xe17+0x9b6*0x1]=_0x1f80e6/_0x5c8571,_0x304412[0xb*-0x17b+-0x6be*-0x5+0x37c*-0x5]=-0x2097+0x4b2+0x1be5,_0x304412[0x1*0x1d36+0x151f+-0x3253*0x1]=0x8f8+0x1731+-0x1*0x2029,_0x304412[0xb36*0x1+-0x3ef*-0x8+-0x2aab]=-0x36*-0xa3+0x201f+-0x4281,_0x304412[0x1*0x1cd7+0x22e+-0x1f01]=0x2*-0xc41+-0x7d*-0x13+0xf3b,_0x304412[-0x1*-0x18e1+-0xa3*-0x19+-0x28c7]=_0x1f80e6/_0x58bc32,_0x304412[0x2d5+-0xfe8*-0x2+-0x229f]=0x1*0xc53+-0xf2c+0x2d9,_0x304412[0x1c5*0x15+0xe89+0x3*-0x1139]=-0x2*0xae7+0x5c1+-0x7*-0x24b,_0x304412[-0x2*-0xb79+0xb9*-0x1d+0xa7*-0x3]=(_0x20ca74+_0x4310a4)/_0x5c8571,_0x304412[0x100d*-0x2+-0x1c86*0x1+0x3ca9]=(_0x40a940+_0xb9336f)/_0x58bc32,_0x304412[0x118*-0x15+0xb2*-0x4+0x19ca]=(-_0x5e8071-_0x4e63ba)/_0x540e9b,_0x304412[0x6*-0x52c+-0x709+0x261c]=-(0x54f*-0x5+-0x25e1+0x406d),_0x304412[0x5*0x2d7+-0x1032+-0x20b*-0x1]=-0x13*0x13+-0x19*-0x1b+-0x13a,_0x304412[0xe81+0xd0a*-0x2+0xba0]=0x501+-0x12ac+0xdab,_0x304412[-0x9a4+-0x329*0xa+0x294c]=-_0x1f80e6*_0x5e8071/_0x540e9b,_0x304412[-0x1dfc+-0x5e6*0x2+0x29d7]=0x3d1*0x1+-0x7e8*0x4+0x7*0x3f9,this;}['setPerspec'+'tive'](_0x5d6399,_0x4023bf,_0x32673b,_0x42d006,_0x9821e8){return Qr['_getPerspe'+'ctiveHalfS'+'ize'](to,_0x5d6399,_0x4023bf,_0x32673b,_0x9821e8),this['setFrustum'](-to['x'],to['x'],-to['y'],to['y'],_0x32673b,_0x42d006);}['setOrtho'](_0x3f33f5,_0x10f99f,_0x14ee3f,_0x545a1d,_0x542b13,_0xe6db9c){const _0x360be6=this['data'];return _0x360be6[0x24c4+0x571*0x2+0x7f1*-0x6]=(0xc58+-0x1fc7+0x1371)/(_0x10f99f-_0x3f33f5),_0x360be6[0x451+0x236a+-0x6*0x69f]=-0x3*-0x499+0xd1*0x13+0x1d4e*-0x1,_0x360be6[0x1741*0x1+-0x7*-0x51b+0x32*-0x12e]=0x8ef*-0x2+0x1e2c+-0xc4e,_0x360be6[-0x3c0+0x15c5*0x1+-0x1202]=-0x1977+-0x1d10+-0xb*-0x4f5,_0x360be6[-0x5e8+-0x21a4+-0x10*-0x279]=-0x9d3+-0x156a*0x1+0x1f3d,_0x360be6[-0x1*-0x1066+-0x3*-0xe2+-0x1*0x1307]=(0x9a4*-0x3+0x2662+0x974*-0x1)/(_0x545a1d-_0x14ee3f),_0x360be6[-0x1*-0x1e4f+0x755*0x1+-0x259e]=-0x163*0x11+0xcf*0x5+0x1388,_0x360be6[0x2d5+-0x4*0x78b+0x1b5e]=-0x3*-0x6c3+0x1a45+-0x3b*0xca,_0x360be6[-0x1*0x235+0x1262+-0x1*0x1025]=0x2204+0x2625+-0x4829,_0x360be6[0x165b+-0x1d9a+-0xe9*-0x8]=0x1*-0x1471+0x1c6c*0x1+-0x7fb,_0x360be6[0x23b*0x5+-0x235*-0x5+-0x1626]=-(-0x1294+0x8*-0x77+0x164e*0x1)/(_0xe6db9c-_0x542b13),_0x360be6[0x183d+0x169e+-0x2ed0]=0x2597+-0x6fd*-0x5+0xd3*-0x58,_0x360be6[0x1573*0x1+0x1*0x1581+-0x2*0x1574]=-(_0x10f99f+_0x3f33f5)/(_0x10f99f-_0x3f33f5),_0x360be6[0x659+0x2*-0xf67+0x1882]=-(_0x545a1d+_0x14ee3f)/(_0x545a1d-_0x14ee3f),_0x360be6[-0x23b2+-0xa*-0x189+0x1466]=-(_0xe6db9c+_0x542b13)/(_0xe6db9c-_0x542b13),_0x360be6[-0x3a4+-0x84*-0x8+-0x6d]=0x1*0x967+-0xc64+-0x1*-0x2fe,this;}['setFromAxi'+'sAngle'](_0x1f9c7f,_0x3be6f2){_0x3be6f2*=Y['DEG_TO_RAD'];const {x:_0x2e1dff,y:_0x21c5e7,z:_0x51ea69}=_0x1f9c7f,_0x44575a=Math['cos'](_0x3be6f2),_0x358c1a=Math['sin'](_0x3be6f2),_0x17732e=-0x14a+0x1f2c+0x1*-0x1de1-_0x44575a,_0x1b5c79=_0x17732e*_0x2e1dff,_0x1dcdb7=_0x17732e*_0x21c5e7,_0x4106ec=this['data'];return _0x4106ec[0x1c8*0xf+-0x1bcb*0x1+0x113]=_0x1b5c79*_0x2e1dff+_0x44575a,_0x4106ec[-0x248c*-0x1+0xd*0x2cf+0x2*-0x2487]=_0x1b5c79*_0x21c5e7+_0x358c1a*_0x51ea69,_0x4106ec[0x19ca+-0x1*-0x99a+-0x2362]=_0x1b5c79*_0x51ea69-_0x358c1a*_0x21c5e7,_0x4106ec[0x13c6*-0x1+0xb*-0x21a+0x2ae7]=-0x135f+0x1194+-0x3*-0x99,_0x4106ec[0x13fb+0x2*0x656+-0x687*0x5]=_0x1b5c79*_0x21c5e7-_0x358c1a*_0x51ea69,_0x4106ec[-0x5e*-0x2e+-0x1*0x16df+0x300*0x2]=_0x1dcdb7*_0x21c5e7+_0x44575a,_0x4106ec[-0x3d*-0x77+-0x23f1+0x1e7*0x4]=_0x1dcdb7*_0x51ea69+_0x358c1a*_0x2e1dff,_0x4106ec[-0x15*0x1bb+-0x1410+0x386e]=-0x293*-0x1+-0x114d+0xeba,_0x4106ec[-0xbcb*-0x1+0xb67+-0xa*0x251]=_0x1b5c79*_0x51ea69+_0x358c1a*_0x21c5e7,_0x4106ec[0x15*0x175+-0x2168+0x1*0x2d8]=_0x1dcdb7*_0x51ea69-_0x2e1dff*_0x358c1a,_0x4106ec[0x1*0x1ece+0x22f8+-0x41bc]=_0x17732e*_0x51ea69*_0x51ea69+_0x44575a,_0x4106ec[0x89*-0x39+-0x3d*0x49+-0xffb*-0x3]=0x12cf*0x1+0x1eac+-0x317b,_0x4106ec[-0xb46*0x1+-0x506+-0x20b*-0x8]=-0x12af*-0x1+0x73*0x1+-0x1322,_0x4106ec[0x2*0xaf0+-0x15f+0x7*-0x2ec]=-0x512+0xb0a+-0x5f8,_0x4106ec[0x12a+-0xf42+0xe26*0x1]=0x265+-0xd44+0x79*0x17,_0x4106ec[0xe2f+-0x223e+0x141e]=-0x14f3*0x1+0x23a4+-0x1*0xeb0,this;}['setTransla'+'te'](_0x3c4711,_0x308d38,_0x2cbe60){const _0x15d18a=this['data'];return _0x15d18a[0xc6f*0x1+0xe*0x16d+-0x1*0x2065]=0xb*-0x91+0x1230*-0x1+0x186c,_0x15d18a[0x296+0x24d3+0x4*-0x9da]=-0x1ce6+-0x2273+0x3f59,_0x15d18a[0x19c0+-0x355*0xa+0x5*0x184]=-0x9a2+-0x9dc+0x2*0x9bf,_0x15d18a[0x426*0x5+-0xb59+-0x962]=0x9e5+0x1ac3*0x1+-0x24a8,_0x15d18a[-0x1b*0xe0+-0xe*0x25f+0x38d6]=0x2*0x136d+0x1c61+-0x3*0x1669,_0x15d18a[-0x8*-0x477+0xf05+-0x2*0x195c]=0xb2+-0xb*-0x36e+-0x7*0x57d,_0x15d18a[-0x17b0+-0x72b+0x1ee1]=-0x3ee*-0x7+-0x2*0x64d+-0x9f*0x18,_0x15d18a[-0x7*0x1de+0x17bf+-0xaa6]=0x10c9+-0x1764+0x69b*0x1,_0x15d18a[0xb1*0x1f+-0x1*-0x14b+-0x23*0xa6]=-0x2358+-0x13b6+0xae*0x51,_0x15d18a[0x1f18+-0x879+-0x1696]=0x285+-0x6*-0x57+0x1*-0x48f,_0x15d18a[-0x26df+0x23d8+0x9d*0x5]=0x7*0x32d+-0x39*-0x94+0x2*-0x1b97,_0x15d18a[0x21e9+-0x106b*-0x2+-0x42b4]=-0xf8a+-0x2*0x1017+0x7f4*0x6,_0x15d18a[-0xe*0x173+0x1*0x1786+0x66*-0x8]=_0x3c4711,_0x15d18a[0x1698+0x51a+-0x1ba5]=_0x308d38,_0x15d18a[-0xb3b+0x2*-0xaac+-0x20a1*-0x1]=_0x2cbe60,_0x15d18a[-0xb83+0x223b+0x16a9*-0x1]=0x25a5+0x2f*-0xc7+0x11b*-0x1,this;}['setScale'](_0x4021ad,_0x941449,_0x2d5163){const _0x4b5a29=this['data'];return _0x4b5a29[0x21*0x89+0x1774+-0x291d*0x1]=_0x4021ad,_0x4b5a29[-0x53*0x1a+0xde*-0x25+-0x1*-0x2885]=0x3*0x5c5+0x262c+-0x377b,_0x4b5a29[0x1cda+0x106b*0x2+0x5*-0xc56]=-0x130a*0x1+0x1999+0x1*-0x68f,_0x4b5a29[-0x29*0x18+0xf98+-0xbbd]=0x2*0xe59+0x155c+-0x320e,_0x4b5a29[-0x1*-0xe90+-0x16d9*-0x1+0x2565*-0x1]=-0x1e93+0x8*0x39a+-0x1c3*-0x1,_0x4b5a29[-0x61b*0x3+0x4*-0x24+0x3b*0x52]=_0x941449,_0x4b5a29[0x1653*-0x1+0x3*0x547+0x116*0x6]=-0x106b+0x7*0x472+0x1*-0xeb3,_0x4b5a29[-0x3c4*-0x7+0x3*0x452+0x3*-0xd19]=-0x1*0x2037+0xe4f+0x11e8,_0x4b5a29[-0x1*0x2671+-0x1992+0x400b]=-0x1e65+0x2*-0x129c+-0x1*-0x439d,_0x4b5a29[0xfae+0x1*0xe1d+-0xd*0x24a]=0x869+0x4*0x2fc+0x1459*-0x1,_0x4b5a29[0x5*0x3bf+-0x19*0x12e+0xacd]=_0x2d5163,_0x4b5a29[0x3d*-0x7f+-0x1d7a+-0x2*-0x1de4]=0x1be8+0x1f6e+-0x3b56,_0x4b5a29[-0x11ae+0x16c8+-0x50e]=0x12e9+0x1507+-0x27f0,_0x4b5a29[-0x9*-0x12b+-0x1677+0x1b7*0x7]=-0x205f+0x29*0x95+-0x21*-0x42,_0x4b5a29[-0x6e2*0x2+0xb23+0x2af]=0x71*0x38+0xb*0x388+-0x48*0xe2,_0x4b5a29[0xfe6+-0x102c+-0x11*-0x5]=0x156f*0x1+0x981+-0x1*0x1eef,this;}['setViewpor'+'t'](_0x3cd315,_0x4daa8b,_0x47f646,_0x2d4c1e){const _0x3a03d8=this['data'];return _0x3a03d8[-0x7*0x269+-0x29b*0x1+0x137a]=_0x47f646*(-0x1caf+0x137*0xe+0x7*0x1ab+0.5),_0x3a03d8[-0xd44+0x1926+0x1*-0xbe1]=-0x839*-0x1+-0x20cb+0x1892,_0x3a03d8[-0x106*-0x9+0xf1*0x2+-0xb16]=0x89*0x25+-0x1776+0x3a9,_0x3a03d8[0x9*-0x228+-0x1630+0x299b]=-0x46d*-0x2+-0x7*-0x3da+-0x10*0x23d,_0x3a03d8[0x1*-0x129e+0x621+0xb*0x123]=-0x16ae+0x22be+-0x10*0xc1,_0x3a03d8[0x7*-0x315+-0x32*0x9+0xbad*0x2]=_0x2d4c1e*(0x2da+-0x197d*0x1+0x16a3+0.5),_0x3a03d8[-0x6ab*0x3+-0x2a7*0x7+0x2698]=-0x2488+-0x1d*0x40+0x2bc8,_0x3a03d8[0x19c2+0x12cb*-0x1+-0x6f0]=0x4*-0x68f+0x19c5*0x1+0x7*0x11,_0x3a03d8[0x101f*0x1+-0x50*0x2+-0x25*0x6b]=-0x1f*0x6b+-0x5f6*-0x2+0x109*0x1,_0x3a03d8[-0x267+-0xdb7+0x1027]=0x6f*0x3d+-0x4b4+-0x15bf,_0x3a03d8[-0x1*0x2531+0x1475+-0x863*-0x2]=-0xb9f*-0x1+-0x36b+-0x2bc*0x3+0.5,_0x3a03d8[0x20bf*0x1+-0xb*-0x2c5+0x1*-0x3f2b]=0x1683+-0x7ce+-0xeb5,_0x3a03d8[-0x20ef+0x1f*-0x133+0x14*0x382]=_0x3cd315+_0x47f646*(0x951+0x148a+0x1*-0x1ddb+0.5),_0x3a03d8[-0x1*0xf40+-0xc*0x241+0x2a59]=_0x4daa8b+_0x2d4c1e*(0xbc7+-0x397*-0x3+-0x4a*0x4e+0.5),_0x3a03d8[-0x533*0x7+0x1737+0x1c*0x79]=0x1*-0x2273+-0x2f7*-0x7+0xdb2+0.5,_0x3a03d8[-0x107f+-0x10*0x52+0x19*0xde]=-0x30a*0x9+-0xb05+0x2*0x1330,this;}['setReflect'+'ion'](_0x536ea4,_0x256050){const _0x5ce917=_0x536ea4['x'],_0x3f93d5=_0x536ea4['y'],_0x1ee5a8=_0x536ea4['z'],_0x1c915c=this['data'];return _0x1c915c[0x2*0x5c1+0x674*-0x2+0x166*0x1]=0x1*0x4cf+0xe95*-0x1+-0x1*-0x9c7-(0x1084+-0xbaa*-0x1+-0x1c2c)*_0x5ce917*_0x5ce917,_0x1c915c[-0x3f*-0x6f+-0x1ce4+0x194]=-(0x8b*-0x3e+0x8e9*-0x3+-0x8a1*-0x7)*_0x5ce917*_0x3f93d5,_0x1c915c[-0x395*0x2+0x1*0x25+0x7*0x101]=-(0x1012+-0x25*-0x45+-0x1a09)*_0x5ce917*_0x1ee5a8,_0x1c915c[-0xfd3+-0x454*0x1+-0x2*-0xa15]=0x10d1+0x1*-0x12f+0x2e*-0x57,_0x1c915c[0x9*-0x371+-0x11*0x128+0x1*0x32a5]=-(0x682+0x6a*-0x10+0x1*0x20)*_0x5ce917*_0x3f93d5,_0x1c915c[-0x107*-0xa+0xb*-0x377+0x1bdc]=-0x1*0x12e9+-0x11b1+0x1*0x249b-(0x3de+0x16c2+0x1*-0x1a9e)*_0x3f93d5*_0x3f93d5,_0x1c915c[-0xb*0x1e2+0xec3+-0x1*-0x5f9]=-(0x1f5+-0x2397+0x21a4)*_0x3f93d5*_0x1ee5a8,_0x1c915c[0x242c+-0x1497+0xb5*-0x16]=0x1e00+-0x2*-0x9cb+-0x241*0x16,_0x1c915c[-0x25d*0x1+-0x13*-0x143+-0x565*0x4]=-(-0x1d20+-0xd9+0x1dfb)*_0x5ce917*_0x1ee5a8,_0x1c915c[-0x1c4+0x128f*0x1+-0x10c2]=-(-0x21*0x85+-0x1e4a+-0x97d*-0x5)*_0x3f93d5*_0x1ee5a8,_0x1c915c[-0x1*-0x1b0f+0x785+0x228a*-0x1]=-0xd*-0xe2+0x3*0x1af+-0x1086-(-0xda5+-0x2cc+0x1073*0x1)*_0x1ee5a8*_0x1ee5a8,_0x1c915c[-0x96b*-0x2+-0x1b9*0x9+-0x34a]=-0x3a9*0x7+-0x2054+0x39f3,_0x1c915c[0x2515+0x23c8+-0x48d1]=-(0x1a7*-0x10+0x73f+0x5*0x3d7)*_0x5ce917*_0x256050,_0x1c915c[-0x4e+0x1609+-0x15ae]=-(0x1*-0x23d+0x277*0x7+-0xf02)*_0x3f93d5*_0x256050,_0x1c915c[-0x4a8*0x3+-0x1a78+0x287e]=-(0x1*-0x1d1e+0x37c+-0x669*-0x4)*_0x1ee5a8*_0x256050,_0x1c915c[-0xdca*-0x1+0x1*0x39d+-0x6*0x2e4]=-0xf26+-0xee+0x1015,this;}['invert'](_0x55f8e3=this){const _0x4d8504=_0x55f8e3['data'],_0x324e68=_0x4d8504[0x101*-0x13+0x3*-0xaf4+0x33ef],_0xbbfbf2=_0x4d8504[0x2*0xa6f+-0x1676+-0x1*-0x199],_0x5b833c=_0x4d8504[-0xd4a+-0x3ed+0x1139*0x1],_0x371d8c=_0x4d8504[-0x1ec7+-0x883*-0x1+0x1647],_0x2ffa94=_0x4d8504[0x4fe*-0x4+0x7f*0x29+-0x5b],_0x1d1d8f=_0x4d8504[-0xc7c+0x29*0x36+0x3db],_0x32a97c=_0x4d8504[-0x1a3e+0x4*-0x383+0x2b*0xf0],_0x53276e=_0x4d8504[0x134*-0x1d+0x2*-0x538+-0x2d5b*-0x1],_0x1022e1=_0x4d8504[-0xe8d+0x2*0x679+0x1a3],_0x5d6cc3=_0x4d8504[-0x21f1*0x1+0x1f9*0xb+0x1*0xc47],_0x154617=_0x4d8504[0x1*0x2417+0x1*0x139+0x2546*-0x1],_0x5ee490=_0x4d8504[-0x280+0x2*-0x43a+0xaff],_0x142852=_0x4d8504[-0x1232+-0x24a9+0x36e7],_0x52ba54=_0x4d8504[-0x209*-0x7+0x1*-0x398+-0xa9a],_0x5b61f5=_0x4d8504[-0x48b*0x8+0x9*0x175+0x1749],_0xb39b13=_0x4d8504[0x89b+0x25e2+-0x2e6e*0x1],_0x4a1a5d=_0x324e68*_0x1d1d8f-_0xbbfbf2*_0x2ffa94,_0x51256c=_0x324e68*_0x32a97c-_0x5b833c*_0x2ffa94,_0x42cef7=_0x324e68*_0x53276e-_0x371d8c*_0x2ffa94,_0x3b2540=_0xbbfbf2*_0x32a97c-_0x5b833c*_0x1d1d8f,_0x5476c4=_0xbbfbf2*_0x53276e-_0x371d8c*_0x1d1d8f,_0x3fa89e=_0x5b833c*_0x53276e-_0x371d8c*_0x32a97c,_0x2c64d5=_0x1022e1*_0x52ba54-_0x5d6cc3*_0x142852,_0x1adbd8=_0x1022e1*_0x5b61f5-_0x154617*_0x142852,_0x1a5a19=_0x1022e1*_0xb39b13-_0x5ee490*_0x142852,_0x239176=_0x5d6cc3*_0x5b61f5-_0x154617*_0x52ba54,_0x135bb8=_0x5d6cc3*_0xb39b13-_0x5ee490*_0x52ba54,_0x55c323=_0x154617*_0xb39b13-_0x5ee490*_0x5b61f5,_0x98eae2=_0x4a1a5d*_0x55c323-_0x51256c*_0x135bb8+_0x42cef7*_0x239176+_0x3b2540*_0x1a5a19-_0x5476c4*_0x1adbd8+_0x3fa89e*_0x2c64d5;if(_0x98eae2===0x333+0x17aa+-0x211*0xd)this['setIdentit'+'y']();else{const _0x1db008=(0x150d+0xd27+-0x203*0x11)/_0x98eae2,_0x504634=this['data'];_0x504634[0x1e1d+-0xc2*0x1a+-0xa69]=(_0x1d1d8f*_0x55c323-_0x32a97c*_0x135bb8+_0x53276e*_0x239176)*_0x1db008,_0x504634[0x399*0x9+0x2466*-0x1+-0x1*-0x406]=(-_0xbbfbf2*_0x55c323+_0x5b833c*_0x135bb8-_0x371d8c*_0x239176)*_0x1db008,_0x504634[-0x1620+-0x45+0x1667]=(_0x52ba54*_0x3fa89e-_0x5b61f5*_0x5476c4+_0xb39b13*_0x3b2540)*_0x1db008,_0x504634[-0x35*-0x5b+0x7*0x116+-0x1a6e]=(-_0x5d6cc3*_0x3fa89e+_0x154617*_0x5476c4-_0x5ee490*_0x3b2540)*_0x1db008,_0x504634[-0x1e4e+0x3ba*0x7+0x43c]=(-_0x2ffa94*_0x55c323+_0x32a97c*_0x1a5a19-_0x53276e*_0x1adbd8)*_0x1db008,_0x504634[-0x959+-0x11ed*0x1+0x1b4b]=(_0x324e68*_0x55c323-_0x5b833c*_0x1a5a19+_0x371d8c*_0x1adbd8)*_0x1db008,_0x504634[0x2*-0x7e3+0x1da5*0x1+-0x5*0x2c5]=(-_0x142852*_0x3fa89e+_0x5b61f5*_0x42cef7-_0xb39b13*_0x51256c)*_0x1db008,_0x504634[0x18a4+-0x527+-0x1376]=(_0x1022e1*_0x3fa89e-_0x154617*_0x42cef7+_0x5ee490*_0x51256c)*_0x1db008,_0x504634[0x2488+-0xc58+0x305*-0x8]=(_0x2ffa94*_0x135bb8-_0x1d1d8f*_0x1a5a19+_0x53276e*_0x2c64d5)*_0x1db008,_0x504634[0x227d+-0x12b5*0x1+-0xfbf]=(-_0x324e68*_0x135bb8+_0xbbfbf2*_0x1a5a19-_0x371d8c*_0x2c64d5)*_0x1db008,_0x504634[0x1281+-0x21a8+0x1*0xf31]=(_0x142852*_0x5476c4-_0x52ba54*_0x42cef7+_0xb39b13*_0x4a1a5d)*_0x1db008,_0x504634[-0x13ee+-0x1*0xf5c+0x3ed*0x9]=(-_0x1022e1*_0x5476c4+_0x5d6cc3*_0x42cef7-_0x5ee490*_0x4a1a5d)*_0x1db008,_0x504634[0xcf2*0x2+-0x12af*-0x2+0x12*-0x383]=(-_0x2ffa94*_0x239176+_0x1d1d8f*_0x1adbd8-_0x32a97c*_0x2c64d5)*_0x1db008,_0x504634[-0x17ff*0x1+-0xd64+-0x12b8*-0x2]=(_0x324e68*_0x239176-_0xbbfbf2*_0x1adbd8+_0x5b833c*_0x2c64d5)*_0x1db008,_0x504634[-0x2679*0x1+-0x2ad+0x2934]=(-_0x142852*_0x3b2540+_0x52ba54*_0x51256c-_0x5b61f5*_0x4a1a5d)*_0x1db008,_0x504634[-0x645+-0x3d6+-0xa2a*-0x1]=(_0x1022e1*_0x3b2540-_0x5d6cc3*_0x51256c+_0x154617*_0x4a1a5d)*_0x1db008;}return this;}['set'](_0x4c2b9b){const _0x5a0557=this['data'];return _0x5a0557[-0x2*0xe65+0x1690+0x31d*0x2]=_0x4c2b9b[0x12b4+0x2*-0x553+-0x80e],_0x5a0557[0x471*0x7+0x1*-0x1c73+0x2d*-0xf]=_0x4c2b9b[-0xd67+0x18c9+-0xb61],_0x5a0557[-0x4ad+-0xb*0x105+-0x6e*-0x25]=_0x4c2b9b[-0x2314+-0x2693+-0x1*-0x49a9],_0x5a0557[0x109d*0x1+-0x1957+-0x8bd*-0x1]=_0x4c2b9b[-0x114a*0x1+0x5e8+0xb65],_0x5a0557[0x17da+-0x1*0xd3+-0x1703]=_0x4c2b9b[-0x2f*-0x41+-0xc2*-0x7+-0x1139],_0x5a0557[-0x143e+0xefd+0x10e*0x5]=_0x4c2b9b[0x3*-0x471+-0x1b89+0x28e1],_0x5a0557[0x3*0xc27+0xe97+0x26e*-0x15]=_0x4c2b9b[-0x1658+-0x2*-0xa42+0x1da],_0x5a0557[-0x1*0x957+-0x13d*0x3+0xd15]=_0x4c2b9b[-0x1*-0x18f8+-0x9c4+0xf2d*-0x1],_0x5a0557[0x282*-0x7+-0x1c33+0x2dc9*0x1]=_0x4c2b9b[0x6*-0x11b+0x42d*-0x5+0x1b8b],_0x5a0557[0x2038+0x52f*0x3+-0x2fbc]=_0x4c2b9b[0x46*0x3d+-0x199c+-0x1*-0x8f7],_0x5a0557[-0x718*-0x3+-0x11ac*-0x1+-0x1375*0x2]=_0x4c2b9b[-0x2106+0x3*0x157+0x1d0b],_0x5a0557[-0xac5*-0x2+0x37d+0x29*-0x9c]=_0x4c2b9b[-0xbe7+0x1c91+-0x5*0x353],_0x5a0557[0x1990+-0xa78+-0x3c3*0x4]=_0x4c2b9b[-0xf37+0x1*-0x1387+0x22ca],_0x5a0557[-0x26d*-0x1+-0x5*-0x4cd+-0x3*0x8cb]=_0x4c2b9b[-0x1d79+-0x10*0x1a5+-0x3fd*-0xe],_0x5a0557[0x14aa+-0x16*0x47+-0xe82*0x1]=_0x4c2b9b[-0x28*0xf9+-0x1*0x36d+0x2a63],_0x5a0557[0x7c3+-0x22c2+-0xd87*-0x2]=_0x4c2b9b[0x1*-0x661+0x1f35*0x1+-0x18c5],this;}['setIdentit'+'y'](){const _0x4e0e66=this['data'];return _0x4e0e66[0xa13+-0x19c3+0xfb0*0x1]=-0x1019*0x1+0x199+0xe81,_0x4e0e66[-0x1*-0x847+0x1*-0x5d+0x19*-0x51]=0x3d*-0x5d+0x4d5*0x2+0xc7f,_0x4e0e66[-0x11b7*0x1+-0x45*0x10+0x1*0x1609]=0x149*-0x4+-0x1d*0x141+-0x1*-0x2981,_0x4e0e66[0xbcf*0x3+0x124b+-0x35b5*0x1]=0x44e+0xc9c+-0x10ea,_0x4e0e66[-0x3ab*0x3+-0xdb3*0x1+-0x7*-0x388]=-0x17b*-0x1a+0xbf7+0x3275*-0x1,_0x4e0e66[0x1d7a*-0x1+0x676+0x1709]=0x149*0x17+0xa*-0x16+-0x1cb2,_0x4e0e66[-0x26a2*0x1+0x1edc*0x1+0x7cc]=-0x81f+-0x1b7+0x9d6,_0x4e0e66[0x17cf+-0x2652+0xe8a]=-0x1*-0x19d1+-0x141*-0x19+-0x6*0x987,_0x4e0e66[0x163b+0x198d*-0x1+0x1*0x35a]=0x1b35+0x959*-0x1+-0x11dc,_0x4e0e66[-0x80*-0x2f+-0xe08+-0x96f]=0x1*-0x1645+-0x21d1+0x959*0x6,_0x4e0e66[-0x1504+-0x1610+0x2b1e]=-0x1*-0x7bb+-0xab4+0x2fa,_0x4e0e66[-0x11a0+-0x16aa*0x1+0x2855]=0x1277+0x1*0x2209+-0x8c*0x60,_0x4e0e66[0x946*-0x1+0x5*0x5ab+-0x1305]=0x11*0x161+0x12d3+-0x2*0x1522,_0x4e0e66[0x1*0x20f9+0x94*0x40+-0x45ec]=-0x1336+0x1*-0xb99+0x1ecf,_0x4e0e66[0x1ddd+-0x1935+-0x1*0x49a]=-0x6ab*0x1+-0x35b*0x2+0xd61,_0x4e0e66[0x170*0x7+0x13*0x6f+-0x123e]=0x1*-0x603+0x797+-0x1*0x193,this;}['setTRS'](_0x3242a8,_0x493b6b,_0x1a9c79){const _0x26f17a=_0x493b6b['x'],_0x57771e=_0x493b6b['y'],_0x1501a0=_0x493b6b['z'],_0xf7d64b=_0x493b6b['w'],_0x26eb45=_0x1a9c79['x'],_0x532722=_0x1a9c79['y'],_0x2aac60=_0x1a9c79['z'],_0x2f8e45=_0x26f17a+_0x26f17a,_0x1ea06f=_0x57771e+_0x57771e,_0x1ea537=_0x1501a0+_0x1501a0,_0x53a319=_0x26f17a*_0x2f8e45,_0x5252fe=_0x26f17a*_0x1ea06f,_0x33c8fd=_0x26f17a*_0x1ea537,_0x4ff8ec=_0x57771e*_0x1ea06f,_0x5a9a21=_0x57771e*_0x1ea537,_0x458a68=_0x1501a0*_0x1ea537,_0x35e349=_0xf7d64b*_0x2f8e45,_0x546212=_0xf7d64b*_0x1ea06f,_0x233276=_0xf7d64b*_0x1ea537,_0x455bd0=this['data'];return _0x455bd0[-0xb3*0x31+-0x23e0*0x1+0x3*0x1761]=(-0x551+0x2102+-0x1bb0-(_0x4ff8ec+_0x458a68))*_0x26eb45,_0x455bd0[-0x4a2*-0x4+-0x2123+-0xdc*-0x11]=(_0x5252fe+_0x233276)*_0x26eb45,_0x455bd0[-0x24ad+-0x12a5+-0x3754*-0x1]=(_0x33c8fd-_0x546212)*_0x26eb45,_0x455bd0[0x194+0x2cc+-0x45d*0x1]=0x1af4+-0x12*-0x211+-0x4026,_0x455bd0[0xb*0x26b+-0x96c+0x1129*-0x1]=(_0x5252fe-_0x233276)*_0x532722,_0x455bd0[0x24ec+0x17e2+-0x1443*0x3]=(-0x137b+-0x6*-0x17b+0xa9a-(_0x53a319+_0x458a68))*_0x532722,_0x455bd0[-0x14*-0x1b8+0x1007+-0x3261]=(_0x5a9a21+_0x35e349)*_0x532722,_0x455bd0[-0x586*-0x7+0x219*-0xa+0x11a9*-0x1]=0x383*0x1+-0x10aa+0xd*0x103,_0x455bd0[0xe1d+-0x31*0x58+0x7*0x65]=(_0x33c8fd+_0x546212)*_0x2aac60,_0x455bd0[0x1145+-0x31*-0xb3+-0x337f]=(_0x5a9a21-_0x35e349)*_0x2aac60,_0x455bd0[0x2*-0x47d+-0x95f*-0x2+0x2*-0x4dd]=(0x1177+-0x1*0x103b+-0x13b-(_0x53a319+_0x4ff8ec))*_0x2aac60,_0x455bd0[-0x1be1+0x17*0x101+0x4d5]=-0x17+0x1*0x1f99+-0x1f82,_0x455bd0[-0xf90+0x7*-0xbf+-0x1*-0x14d5]=_0x3242a8['x'],_0x455bd0[0x1cbb+0xd5c+-0x2a0a]=_0x3242a8['y'],_0x455bd0[0x36*-0x6e+0x1b2a+-0x19*0x28]=_0x3242a8['z'],_0x455bd0[-0x1*0xe7f+0xcdb+-0x1b3*-0x1]=0x1326+0x1147+0x246c*-0x1,this;}['transpose'](_0xe91796=this){const _0x5009c7=_0xe91796['data'],_0x4568dc=this['data'];if(_0x5009c7===_0x4568dc){let _0x224c40;_0x224c40=_0x5009c7[-0x1225*0x1+0x556+0xcd0],_0x4568dc[-0x545+-0x14ae+0x19f4]=_0x5009c7[-0x26ae+0x681+-0x43*-0x7b],_0x4568dc[0x565*-0x5+-0x1de3+0x38e0]=_0x224c40,_0x224c40=_0x5009c7[-0x1*0x649+0x1904+-0x12b9*0x1],_0x4568dc[-0x2081*0x1+-0x25f9+-0x4*-0x119f]=_0x5009c7[0xe11*0x1+-0x1c2+-0x7*0x1c1],_0x4568dc[0x1833+-0x1965+0x13a]=_0x224c40,_0x224c40=_0x5009c7[0x16a4+-0x2586*0x1+-0x3*-0x4f7],_0x4568dc[-0x4db*0x7+0xb2a+0x16d6]=_0x5009c7[-0x33f*0x4+0x10a5+-0xb9*0x5],_0x4568dc[-0xe0c+-0x2601+0x3419*0x1]=_0x224c40,_0x224c40=_0x5009c7[-0x1ec4+-0x1*-0x1976+0x554],_0x4568dc[0x1bd0+0x1*-0x24d+-0x197d]=_0x5009c7[-0x47*0x86+-0xd5*0x17+-0x1c2b*-0x2],_0x4568dc[0xaf*0x13+0x134a+-0x203e]=_0x224c40,_0x224c40=_0x5009c7[0x1d46+-0x141e+0x39*-0x29],_0x4568dc[-0x97a+0x468+-0x5*-0x105]=_0x5009c7[-0x1*0x2561+-0x152+-0x40*-0x9b],_0x4568dc[0x140f+0x1*-0x7be+-0xc44]=_0x224c40,_0x224c40=_0x5009c7[0x1*-0x11f3+-0xc37*0x1+0x1e35],_0x4568dc[-0x2386+-0x173c+-0x3acd*-0x1]=_0x5009c7[0xd8d*0x1+-0x1ba7+-0xc*-0x12e],_0x4568dc[-0xc7*-0xb+-0x1c4a+-0x13cb*-0x1]=_0x224c40;}else _0x4568dc[0x226e+-0x1*-0x25cf+-0x483d]=_0x5009c7[-0xe*-0x2ba+0x1b79+0x41a5*-0x1],_0x4568dc[-0x11c5+-0x419*-0x2+-0x4*-0x265]=_0x5009c7[0x24d*0xa+0x15*0x19f+-0x3909],_0x4568dc[0x20c1+0xc50+-0x2d0f]=_0x5009c7[-0x1322+-0x4f*-0x3+0x29b*0x7],_0x4568dc[-0x1*0xd94+0x2*-0x3cc+0x152f]=_0x5009c7[-0x1b30+0x9a6*-0x4+0x41d4],_0x4568dc[-0xef4+-0x21c*0x1+0x1114]=_0x5009c7[0x144*0x1b+-0xd*0x30+-0x1*0x1fbb],_0x4568dc[-0x17a6+0x773+-0x3*-0x568]=_0x5009c7[0x2409+-0x19e5*0x1+-0xa1f],_0x4568dc[0x8*0x231+0x482+-0x1604]=_0x5009c7[-0x251*0x1+-0x1b51+-0x23*-0xd9],_0x4568dc[0xffb+0xc2d+-0x1c21]=_0x5009c7[-0x135*0x1+0x77*0x13+0x793*-0x1],_0x4568dc[0x21ec+0x2519+0x42d*-0x11]=_0x5009c7[0x29c+-0xcd*0x27+0x1ca1],_0x4568dc[-0x1*-0x1319+-0x26cf+0x13bf]=_0x5009c7[0xd*0x96+0x1*0xd9a+-0x1532],_0x4568dc[-0xe09+0xdfb*-0x2+0x2a09]=_0x5009c7[-0x1a51*-0x1+-0xa*-0x29d+-0x1*0x3469],_0x4568dc[0x94e+-0xc1e+0x2db]=_0x5009c7[-0x1a07+-0x6cd+0x20e2],_0x4568dc[0x26f5+-0x5b*0x33+-0x14c8]=_0x5009c7[-0x7bc+-0x16d*0x1b+0x2e3e],_0x4568dc[0x17*0xc3+0x3a5*-0x1+-0xdd3*0x1]=_0x5009c7[0x1694+0x2*-0xf29+-0x75*-0x11],_0x4568dc[-0x1fb6+-0x2475+0x4439]=_0x5009c7[0xe0c+0x1*0x21b9+-0x2fba],_0x4568dc[-0xcff*-0x3+-0x23cb+-0x323]=_0x5009c7[-0x2*0x130a+0x12*0x1fb+0x27d];return this;}['getTransla'+'tion'](_0x3b5386=new D()){return _0x3b5386['set'](this['data'][-0x1f2e+0x4df*-0x2+0x28f8],this['data'][0xf4d+0x230b+0xa0f*-0x5],this['data'][-0x21a9+0x456+0x1d61]);}['getX'](_0x3f6527=new D()){return _0x3f6527['set'](this['data'][0x2*0xa58+0x54d+-0x19fd],this['data'][0xec6+0x1100+-0x1fc5],this['data'][-0xc4a+-0x150b+0x2157]);}['getY'](_0x4c7497=new D()){return _0x4c7497['set'](this['data'][-0x1dd7+-0x6*-0x55b+-0x247*0x1],this['data'][-0xd17+0x6f1*-0x1+0x57*0x3b],this['data'][-0x1*-0x1507+-0x20db*0x1+0x29*0x4a]);}['getZ'](_0x7921d7=new D()){return _0x7921d7['set'](this['data'][0x1*0x1435+-0x1908+0x4db],this['data'][-0x15*0x4f+-0xa*-0x3b6+-0x1e98],this['data'][-0x13be+-0xfd3+0x239b]);}['getScale'](_0x7de4e8=new D()){return this['getX'](Os),this['getY'](Js),this['getZ'](ei),_0x7de4e8['set'](Os['length'](),Js['length'](),ei['length']()),_0x7de4e8;}get['scaleSign'](){return this['getX'](Os),this['getY'](Js),this['getZ'](ei),Os['cross'](Os,Js),Os['dot'](ei)<0x1d33+0x395*0xa+-0x4105?-(0x24f8+0x1*-0x1a65+-0x1c3*0x6):0x19fa+0x21de*-0x1+0x1*0x7e5;}['setFromEul'+'erAngles'](_0x119e49,_0x1c5eb6,_0x202d5b){_0x119e49*=Y['DEG_TO_RAD'],_0x1c5eb6*=Y['DEG_TO_RAD'],_0x202d5b*=Y['DEG_TO_RAD'];const _0x313312=Math['sin'](-_0x119e49),_0x3153a5=Math['cos'](-_0x119e49),_0x4477be=Math['sin'](-_0x1c5eb6),_0x36def9=Math['cos'](-_0x1c5eb6),_0x4598ce=Math['sin'](-_0x202d5b),_0x4687d7=Math['cos'](-_0x202d5b),_0x2bc5d1=this['data'];return _0x2bc5d1[-0xa0a+-0xd9*0x7+0xff9]=_0x36def9*_0x4687d7,_0x2bc5d1[0x13*-0x6d+0x8*-0x89+0xc60]=-_0x36def9*_0x4598ce,_0x2bc5d1[0x1949+-0x799+-0x11ae]=_0x4477be,_0x2bc5d1[0x202c+0x4*0x3eb+-0x2fd5]=0x3*0x1ed+-0x1e62+0x189b,_0x2bc5d1[0x88*0x1a+-0x1597*-0x1+-0x2363]=_0x3153a5*_0x4598ce+_0x4687d7*_0x313312*_0x4477be,_0x2bc5d1[0x9*0x44d+0x2133+0xef*-0x4d]=_0x3153a5*_0x4687d7-_0x313312*_0x4477be*_0x4598ce,_0x2bc5d1[0xd2a+0xaae+0xbe9*-0x2]=-_0x36def9*_0x313312,_0x2bc5d1[0x12e8+-0x15cd*-0x1+0x7f*-0x52]=0x1e77+-0x2*-0x1093+-0x3f9d,_0x2bc5d1[0xa6a*-0x2+-0x5e8*-0x1+0x77a*0x2]=_0x313312*_0x4598ce-_0x3153a5*_0x4687d7*_0x4477be,_0x2bc5d1[-0xff+0x159e+-0x2*0xa4b]=_0x4687d7*_0x313312+_0x3153a5*_0x4477be*_0x4598ce,_0x2bc5d1[-0x1d9e+0x7*0x559+0x7c7*-0x1]=_0x3153a5*_0x36def9,_0x2bc5d1[0x2494+-0x29+-0x2460]=0x3*-0x883+0x1816+-0x1*-0x173,_0x2bc5d1[0x15b*-0x13+-0x2*0xa67+0x2e9b]=0x4*-0x423+0x19a4+-0x918,_0x2bc5d1[-0x1a56+0x19*0xaa+0x9c9]=-0x71*-0x2+0x168c+-0x176e,_0x2bc5d1[-0x2244+0x1c6+0x208c]=0x1b09+-0x1f17*-0x1+-0x3a20,_0x2bc5d1[0xa8c+0xede+-0x195b*0x1]=0x180+-0x192f*0x1+0x17b0,this;}['getEulerAn'+'gles'](_0x495f18=new D()){this['getScale'](Hl);const _0x3dbc1a=Hl['x'],_0x569d8b=Hl['y'],_0x3e43c2=Hl['z'];if(_0x3dbc1a===0x6a1*-0x1+-0x7b7*-0x3+-0x1c*0x97||_0x569d8b===-0xec*-0x3+-0x163*0x16+0x1bbe||_0x3e43c2===0x1*0x21e9+-0x2*0x5ab+0x1693*-0x1)return _0x495f18['set'](0x256c+0x585+-0x1*0x2af1,0xe0a*0x1+-0xa7*-0x2b+-0x2a17,-0x29*0x35+-0x1bd5+-0x1*-0x2452);const _0x2a72f0=this['data'],_0x1e9168=Math['asin'](-_0x2a72f0[0xb66+0x404+-0xf68]/_0x3dbc1a),_0x5a94f3=Math['PI']*(0x1e1c+0x19a4*-0x1+-0x2c*0x1a+0.5);let _0x11421b,_0x182562;return _0x1e9168<_0x5a94f3?_0x1e9168>-_0x5a94f3?(_0x11421b=Math['atan2'](_0x2a72f0[0x10*-0xe9+0x1636+-0x7a0]/_0x569d8b,_0x2a72f0[0xb1e+0xe18+-0x192c]/_0x3e43c2),_0x182562=Math['atan2'](_0x2a72f0[0x589*0x7+0xf0*0xd+0x1977*-0x2]/_0x3dbc1a,_0x2a72f0[0x2d3*0x3+0x15ae+-0x1e27]/_0x3dbc1a)):(_0x182562=0x1847+0x3ba+-0x1c01,_0x11421b=-Math['atan2'](_0x2a72f0[-0x1*0x10d+0xbff+-0xaee]/_0x569d8b,_0x2a72f0[-0x235a+0x3*0x47f+-0x1*-0x15e2]/_0x569d8b)):(_0x182562=0x93*-0x4+-0x1*-0x4a6+-0x7*0x56,_0x11421b=Math['atan2'](_0x2a72f0[-0x1*-0xed5+0x1aa*-0x11+0xd79]/_0x569d8b,_0x2a72f0[-0xf32+0x162e+-0x6f7]/_0x569d8b)),_0x495f18['set'](_0x11421b,_0x1e9168,_0x182562)['mulScalar'](Y['RAD_TO_DEG']);}['toString'](){return'['+this['data']['join'](',\x20')+']';}};h(Qr,'IDENTITY',Object['freeze'](new Qr())),h(Qr,'ZERO',Object['freeze'](new Qr()['set']([-0x6d9*-0x1+-0x4af+-0x1*0x22a,-0x10b*-0x16+0x48f*0x5+0x9*-0x515,0x15b8+0x48a+-0x1a42,0xed6+-0x181b+0x945,-0x17c3*-0x1+-0x6d*-0x1+-0x1830,-0xa2*0x25+-0x1271+-0x29db*-0x1,0x223a+0x139c+0x11f2*-0x3,0x21cb+0x1a9c+0x7*-0x8a1,0x1118+-0x2298+0x1180,-0x5*-0x6d3+0x47e+-0x269d*0x1,0x1*-0x2598+-0x950+0x2ee8,0x1d3d+-0xcb9+0x1084*-0x1,0x116*-0xd+0x2*0x12df+-0x12*0x150,-0x2*-0xb96+-0x1*0x72f+-0xffd,0x21ff+-0x7bb+-0x1a44,0x1d*0x69+-0x153d*-0x1+-0x2122])));let te=Qr;const Sn=class Sn{constructor(_0x1ac0a8=-0x2268+0x326*-0x1+-0x1*-0x258e,_0x11334d=0xb*-0x17b+-0x3*-0x38f+0x59c,_0x4f35fc=-0x94f+-0x3b2*-0x1+0x59d,_0x3e2096=-0xc95*0x1+0x1e82+-0x25*0x7c){h(this,'x'),h(this,'y'),h(this,'z'),h(this,'w'),_0x1ac0a8['length']===-0x4d0+-0x1*-0xa60+-0x11c*0x5?(this['x']=_0x1ac0a8[0x239+-0x2431+0x21f8],this['y']=_0x1ac0a8[0x16ce+0x1*-0x1775+0xa8],this['z']=_0x1ac0a8[-0x209a+-0x113*-0x9+0x16f1],this['w']=_0x1ac0a8[-0x2*-0xb8d+0x17*-0x13e+0x17*0x3d]):(this['x']=_0x1ac0a8,this['y']=_0x11334d,this['z']=_0x4f35fc,this['w']=_0x3e2096);}['clone'](){const _0x24274e=this['constructo'+'r'];return new _0x24274e(this['x'],this['y'],this['z'],this['w']);}['conjugate'](_0x5376da=this){return this['x']=_0x5376da['x']*-(-0x1*0x1f7b+0x529+0x1a53),this['y']=_0x5376da['y']*-(-0x1*0x1fe2+0xd89+0x125a),this['z']=_0x5376da['z']*-(0x2*-0x20f+0x5*0x402+0x32f*-0x5),this['w']=_0x5376da['w'],this;}['copy'](_0x33b840){return this['x']=_0x33b840['x'],this['y']=_0x33b840['y'],this['z']=_0x33b840['z'],this['w']=_0x33b840['w'],this;}['dot'](_0x184910){return this['x']*_0x184910['x']+this['y']*_0x184910['y']+this['z']*_0x184910['z']+this['w']*_0x184910['w'];}['equals'](_0xcb67fe){return this['x']===_0xcb67fe['x']&&this['y']===_0xcb67fe['y']&&this['z']===_0xcb67fe['z']&&this['w']===_0xcb67fe['w'];}['equalsAppr'+'ox'](_0x4dd4ff,_0x2ec012=-0x1*-0x95c+-0x1368+0xa0c+0.000001){return Math['abs'](this['x']-_0x4dd4ff['x'])<_0x2ec012&&Math['abs'](this['y']-_0x4dd4ff['y'])<_0x2ec012&&Math['abs'](this['z']-_0x4dd4ff['z'])<_0x2ec012&&Math['abs'](this['w']-_0x4dd4ff['w'])<_0x2ec012;}['getAxisAng'+'le'](_0x3423fb){let _0x33329c=Math['acos'](this['w'])*(0x132f+-0x9*-0x2f9+-0x16f7*0x2);const _0x20a081=Math['sin'](_0x33329c/(-0x29b+-0x35*-0x35+-0x4*0x217));return _0x20a081!==0x37*-0x5+-0xf67+0x57e*0x3?(_0x3423fb['x']=this['x']/_0x20a081,_0x3423fb['y']=this['y']/_0x20a081,_0x3423fb['z']=this['z']/_0x20a081,(_0x3423fb['x']<-0x246e*0x1+-0xfb1*-0x2+-0x1*-0x50c||_0x3423fb['y']<-0x1e7+0x2*0xbe3+0xb*-0x1fd||_0x3423fb['z']<-0x2*0x3a9+0xb8c+-0x43a)&&(_0x3423fb['x']*=-(0x1768+0x7a2+0x23*-0xe3),_0x3423fb['y']*=-(-0x33*0x12+-0x308+-0x69f*-0x1),_0x3423fb['z']*=-(-0xdce+0x3*0xa54+-0x112d),_0x33329c*=-(0xf66+0x2b9*-0x7+0x1d5*0x2))):(_0x3423fb['x']=0x1791+0x25b5+0x1*-0x3d45,_0x3423fb['y']=-0x565*-0x4+-0x1*0x1dda+-0x6*-0x161,_0x3423fb['z']=-0x6d4+0x1a5c+0xfa*-0x14),_0x33329c*Y['RAD_TO_DEG'];}['getEulerAn'+'gles'](_0x3d66fc=new D()){let _0x4c874e,_0x21406d,_0x1562a4;const _0x501393=this['x'],_0x45fe99=this['y'],_0x4414d7=this['z'],_0x580ab8=this['w'],_0x373973=(-0xdfc+-0x1*-0x16f7+-0x8f9)*(_0x580ab8*_0x45fe99-_0x501393*_0x4414d7);return _0x373973<=-(-0x164e+-0x2344+0x3992+0.99999)?(_0x4c874e=(-0x1*0x1c18+-0x146*-0x17+0x98*-0x2)*Math['atan2'](_0x501393,_0x580ab8),_0x21406d=-Math['PI']/(-0x189*-0xe+0x1ed0+0x1a26*-0x2),_0x1562a4=0x1*-0xf09+0x261a+-0x1711):_0x373973>=-0x59c*0x4+-0x785+0x1df5+0.99999?(_0x4c874e=(-0x24ba+0xfd*0x24+0x2*0x94)*Math['atan2'](_0x501393,_0x580ab8),_0x21406d=Math['PI']/(0x15c5+0x1dc6+-0xa7*0x4f),_0x1562a4=-0x1*-0x202f+0x2*-0x1246+0x45d):(_0x4c874e=Math['atan2']((-0x20d7*0x1+0x169*-0xa+-0x77*-0x65)*(_0x580ab8*_0x501393+_0x45fe99*_0x4414d7),0x2440+-0x5d5*-0x4+-0x1*0x3b93-(-0x1*-0x1055+0xdef+-0x1e42)*(_0x501393*_0x501393+_0x45fe99*_0x45fe99)),_0x21406d=Math['asin'](_0x373973),_0x1562a4=Math['atan2']((0x10b3+0x23d2*0x1+-0x3483)*(_0x580ab8*_0x4414d7+_0x501393*_0x45fe99),0x1cb2+0x24fd+-0x41ae-(-0x113*0x1b+0x2*-0xc2d+-0x355d*-0x1)*(_0x45fe99*_0x45fe99+_0x4414d7*_0x4414d7))),_0x3d66fc['set'](_0x4c874e,_0x21406d,_0x1562a4)['mulScalar'](Y['RAD_TO_DEG']);}['invert'](_0x27fca1=this){return this['conjugate'](_0x27fca1)['normalize']();}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w']);}['lengthSq'](){return this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w'];}['lerp'](_0x882735,_0x315e4d,_0x380c25){const _0x3de5f0=(0x461*0x3+0x11d*0x1a+-0x2a14-_0x380c25)*(_0x882735['dot'](_0x315e4d)<-0xaa*0x1b+-0x1e2a+0x3018?-(-0xb1+0x1*0x13e7+0x667*-0x3):0x2f*0x7d+-0x24ec+0xdfa*0x1);return this['x']=_0x882735['x']*_0x3de5f0+_0x315e4d['x']*_0x380c25,this['y']=_0x882735['y']*_0x3de5f0+_0x315e4d['y']*_0x380c25,this['z']=_0x882735['z']*_0x3de5f0+_0x315e4d['z']*_0x380c25,this['w']=_0x882735['w']*_0x3de5f0+_0x315e4d['w']*_0x380c25,this['normalize']();}['mul'](_0x13f3a7){const _0x5844f3=this['x'],_0x2defbd=this['y'],_0x51e076=this['z'],_0x36783b=this['w'],_0x39180a=_0x13f3a7['x'],_0x2250b6=_0x13f3a7['y'],_0xf11e4f=_0x13f3a7['z'],_0x232640=_0x13f3a7['w'];return this['x']=_0x36783b*_0x39180a+_0x5844f3*_0x232640+_0x2defbd*_0xf11e4f-_0x51e076*_0x2250b6,this['y']=_0x36783b*_0x2250b6+_0x2defbd*_0x232640+_0x51e076*_0x39180a-_0x5844f3*_0xf11e4f,this['z']=_0x36783b*_0xf11e4f+_0x51e076*_0x232640+_0x5844f3*_0x2250b6-_0x2defbd*_0x39180a,this['w']=_0x36783b*_0x232640-_0x5844f3*_0x39180a-_0x2defbd*_0x2250b6-_0x51e076*_0xf11e4f,this;}['mulScalar'](_0x5ef4bb,_0x12863=this){return this['x']=_0x12863['x']*_0x5ef4bb,this['y']=_0x12863['y']*_0x5ef4bb,this['z']=_0x12863['z']*_0x5ef4bb,this['w']=_0x12863['w']*_0x5ef4bb,this;}['mul2'](_0xab0c5e,_0x342f9c){const _0x5d6b15=_0xab0c5e['x'],_0x341b07=_0xab0c5e['y'],_0x55f4c4=_0xab0c5e['z'],_0x149d29=_0xab0c5e['w'],_0x4e1dc7=_0x342f9c['x'],_0x3669e2=_0x342f9c['y'],_0x4917f7=_0x342f9c['z'],_0x3cd6ed=_0x342f9c['w'];return this['x']=_0x149d29*_0x4e1dc7+_0x5d6b15*_0x3cd6ed+_0x341b07*_0x4917f7-_0x55f4c4*_0x3669e2,this['y']=_0x149d29*_0x3669e2+_0x341b07*_0x3cd6ed+_0x55f4c4*_0x4e1dc7-_0x5d6b15*_0x4917f7,this['z']=_0x149d29*_0x4917f7+_0x55f4c4*_0x3cd6ed+_0x5d6b15*_0x3669e2-_0x341b07*_0x4e1dc7,this['w']=_0x149d29*_0x3cd6ed-_0x5d6b15*_0x4e1dc7-_0x341b07*_0x3669e2-_0x55f4c4*_0x4917f7,this;}['normalize'](_0x138396=this){let _0x4932c8=_0x138396['length']();return _0x4932c8===-0x1be6+-0x1*-0xe6d+0xd79?(this['x']=this['y']=this['z']=-0x134b+-0x5*0x5fc+0x3137,this['w']=-0x8*0x4a8+0x1436+0x110b):(_0x4932c8=(0x2226+0x1210+-0x3435)/_0x4932c8,this['x']=_0x138396['x']*_0x4932c8,this['y']=_0x138396['y']*_0x4932c8,this['z']=_0x138396['z']*_0x4932c8,this['w']=_0x138396['w']*_0x4932c8),this;}['set'](_0x9da39b,_0x5c8146,_0x2b0d85,_0x270112){return this['x']=_0x9da39b,this['y']=_0x5c8146,this['z']=_0x2b0d85,this['w']=_0x270112,this;}['setFromAxi'+'sAngle'](_0x59b3da,_0x9719e0){_0x9719e0*=(-0x253c+-0x2253+-0xa39*-0x7+0.5)*Y['DEG_TO_RAD'];const _0x537572=Math['sin'](_0x9719e0),_0x35bba9=Math['cos'](_0x9719e0);return this['x']=_0x537572*_0x59b3da['x'],this['y']=_0x537572*_0x59b3da['y'],this['z']=_0x537572*_0x59b3da['z'],this['w']=_0x35bba9,this;}['setFromEul'+'erAngles'](_0x566b80,_0xc8f38b,_0x3efa01){if(_0x566b80 instanceof D){const _0x394e5b=_0x566b80;_0x566b80=_0x394e5b['x'],_0xc8f38b=_0x394e5b['y'],_0x3efa01=_0x394e5b['z'];}const _0x2a6463=(-0x46d+-0x1934+-0x29*-0xb9+0.5)*Y['DEG_TO_RAD'];_0x566b80*=_0x2a6463,_0xc8f38b*=_0x2a6463,_0x3efa01*=_0x2a6463;const _0x4ee426=Math['sin'](_0x566b80),_0x47f879=Math['cos'](_0x566b80),_0x5153f1=Math['sin'](_0xc8f38b),_0x51f08d=Math['cos'](_0xc8f38b),_0x37a414=Math['sin'](_0x3efa01),_0x3643a1=Math['cos'](_0x3efa01);return this['x']=_0x4ee426*_0x51f08d*_0x3643a1-_0x47f879*_0x5153f1*_0x37a414,this['y']=_0x47f879*_0x5153f1*_0x3643a1+_0x4ee426*_0x51f08d*_0x37a414,this['z']=_0x47f879*_0x51f08d*_0x37a414-_0x4ee426*_0x5153f1*_0x3643a1,this['w']=_0x47f879*_0x51f08d*_0x3643a1+_0x4ee426*_0x5153f1*_0x37a414,this;}['setFromMat'+'4'](_0x232ad7){const _0xa0abf6=_0x232ad7['data'];let _0x28abcb=_0xa0abf6[0x16e3+-0x1cb6+0x5d3],_0x36270c=_0xa0abf6[-0x2b3*-0xd+-0x236d+0x57],_0x88feef=_0xa0abf6[-0x1*0x754+-0x192d+0x2083],_0x51cde5=_0xa0abf6[0x1dc3+0x83f*-0x2+-0xd41],_0x563b8b=_0xa0abf6[-0x1*-0x73b+0x1*-0x10ed+0x9b7],_0x4d3da2=_0xa0abf6[0x207+-0xb94+0x993],_0x2728c1=_0xa0abf6[0x5*0x599+0x6a*0x1b+-0x2723],_0xa66615=_0xa0abf6[-0x17c9+-0x742+-0x66*-0x4e],_0x1e00b3=_0xa0abf6[-0x1145+0xf0e+0x1*0x241],_0x27403a;return _0x27403a=_0x28abcb*_0x28abcb+_0x36270c*_0x36270c+_0x88feef*_0x88feef,_0x27403a===-0x2448*0x1+-0xdeb+-0x3233*-0x1?this['set'](0x28c+-0xea*0x1d+0x2*0xbfb,0x23b0+0x21e0+-0x6a*0xa8,0x176e+-0xe*0x2c8+0xf82,0x6d*-0x4a+0x23db*-0x1+0x2*0x21af):(_0x27403a=(-0x1f80+0x2*0xb29+0x92f)/Math['sqrt'](_0x27403a),_0x28abcb*=_0x27403a,_0x36270c*=_0x27403a,_0x88feef*=_0x27403a,_0x27403a=_0x51cde5*_0x51cde5+_0x563b8b*_0x563b8b+_0x4d3da2*_0x4d3da2,_0x27403a===0x8*0x11d+-0x1*0x1921+0x1039?this['set'](0x1a03+0x1*0x1b6e+-0x3571,-0x2540+0x1*0x9d+0x71*0x53,-0x781+0x31c+-0xf*-0x4b,-0xb81*-0x2+-0x6*0x29+-0x160b):(_0x27403a=(-0x2*-0x16a+0x1b90+-0x1e63)/Math['sqrt'](_0x27403a),_0x51cde5*=_0x27403a,_0x563b8b*=_0x27403a,_0x4d3da2*=_0x27403a,_0x27403a=_0x2728c1*_0x2728c1+_0xa66615*_0xa66615+_0x1e00b3*_0x1e00b3,_0x27403a===-0x795+-0x20c3*0x1+-0x50b*-0x8?this['set'](-0x16be+0x1709+-0x19*0x3,0x2*-0x126a+0x186e+-0x6*-0x211,-0x5*-0x6f+0x265e+-0x2889,0xa1e+-0xf*0x1bb+-0xfd8*-0x1):(_0x27403a=(-0x1a21+0x6*-0x466+0x3*0x1182)/Math['sqrt'](_0x27403a),_0x2728c1*=_0x27403a,_0xa66615*=_0x27403a,_0x1e00b3*=_0x27403a,_0x1e00b3<0xeef+-0x1925*-0x1+-0x2814?_0x28abcb>_0x563b8b?this['set'](-0xdb2*-0x2+0x8e*-0xd+0x142d*-0x1+_0x28abcb-_0x563b8b-_0x1e00b3,_0x36270c+_0x51cde5,_0x2728c1+_0x88feef,_0x4d3da2-_0xa66615):this['set'](_0x36270c+_0x51cde5,0x6ae+0x194a+-0x7*0x491-_0x28abcb+_0x563b8b-_0x1e00b3,_0x4d3da2+_0xa66615,_0x2728c1-_0x88feef):_0x28abcb<-_0x563b8b?this['set'](_0x2728c1+_0x88feef,_0x4d3da2+_0xa66615,-0x41*-0x31+0x55e+0x35*-0x56-_0x28abcb-_0x563b8b+_0x1e00b3,_0x36270c-_0x51cde5):this['set'](_0x4d3da2-_0xa66615,_0x2728c1-_0x88feef,_0x36270c-_0x51cde5,0x2480+-0xc53*-0x1+-0x2*0x1869+_0x28abcb+_0x563b8b+_0x1e00b3),this['mulScalar']((0x89+0x1d17+-0x1d9f)/this['length']()))));}['setFromDir'+'ections'](_0x3cdb42,_0x5d9024){const _0x35f522=-0x427*-0x2+-0x1*0x1f87+0x173a+_0x3cdb42['dot'](_0x5d9024);return _0x35f522<Number['EPSILON']?Math['abs'](_0x3cdb42['x'])>Math['abs'](_0x3cdb42['y'])?(this['x']=-_0x3cdb42['z'],this['y']=0xf4f*0x1+0x1cf*0x8+-0x1dc7,this['z']=_0x3cdb42['x'],this['w']=0x1*-0x1ce7+0x936+-0x13b1*-0x1):(this['x']=0x20cc*0x1+0x444+0x944*-0x4,this['y']=-_0x3cdb42['z'],this['z']=_0x3cdb42['y'],this['w']=-0xc32+0x76f*-0x3+0x227f*0x1):(this['x']=_0x3cdb42['y']*_0x5d9024['z']-_0x3cdb42['z']*_0x5d9024['y'],this['y']=_0x3cdb42['z']*_0x5d9024['x']-_0x3cdb42['x']*_0x5d9024['z'],this['z']=_0x3cdb42['x']*_0x5d9024['y']-_0x3cdb42['y']*_0x5d9024['x'],this['w']=_0x35f522),this['normalize']();}['slerp'](_0x2cafa9,_0x3efc9c,_0x4e777b){const _0x1ed1a2=_0x2cafa9['x'],_0x51177b=_0x2cafa9['y'],_0x26d502=_0x2cafa9['z'],_0x4f5e5c=_0x2cafa9['w'];let _0x2bd33e=_0x3efc9c['x'],_0x55c99c=_0x3efc9c['y'],_0x28d59e=_0x3efc9c['z'],_0x14e9fa=_0x3efc9c['w'],_0x219159=_0x4f5e5c*_0x14e9fa+_0x1ed1a2*_0x2bd33e+_0x51177b*_0x55c99c+_0x26d502*_0x28d59e;if(_0x219159<-0x2670+0x2d*-0x1b+0x2b2f&&(_0x14e9fa=-_0x14e9fa,_0x2bd33e=-_0x2bd33e,_0x55c99c=-_0x55c99c,_0x28d59e=-_0x28d59e,_0x219159=-_0x219159),Math['abs'](_0x219159)>=-0x1e36+-0x12cc+0x3103)return this['w']=_0x4f5e5c,this['x']=_0x1ed1a2,this['y']=_0x51177b,this['z']=_0x26d502,this;const _0x5a3646=Math['acos'](_0x219159),_0x384484=Math['sqrt'](0x1fae+0x29*0x33+0x96*-0x44-_0x219159*_0x219159);if(Math['abs'](_0x384484)<0x27d*0x5+0xf64+-0x13*0x177+0.001)return this['w']=_0x4f5e5c*(-0x1689+0x72*-0x56+0x3cd5+0.5)+_0x14e9fa*(0x45*0x1f+-0xa7*-0x19+-0x18aa+0.5),this['x']=_0x1ed1a2*(-0x2*0x134a+0x47a+0x221a+0.5)+_0x2bd33e*(-0x2445*0x1+-0x12cd*-0x2+-0x155*0x1+0.5),this['y']=_0x51177b*(0x69d*-0x5+-0x248b*-0x1+-0x37a+0.5)+_0x55c99c*(0xcfd+-0x2c3*-0x5+0x62*-0x46+0.5),this['z']=_0x26d502*(0x1*0x12d6+-0x115c+-0x17a+0.5)+_0x28d59e*(0x10a8+0x127*0x11+0x3*-0xc15+0.5),this;const _0x32f2b3=Math['sin']((-0x8f0+-0xeab+0x179c-_0x4e777b)*_0x5a3646)/_0x384484,_0x2665ff=Math['sin'](_0x4e777b*_0x5a3646)/_0x384484;return this['w']=_0x4f5e5c*_0x32f2b3+_0x14e9fa*_0x2665ff,this['x']=_0x1ed1a2*_0x32f2b3+_0x2bd33e*_0x2665ff,this['y']=_0x51177b*_0x32f2b3+_0x55c99c*_0x2665ff,this['z']=_0x26d502*_0x32f2b3+_0x28d59e*_0x2665ff,this;}['transformV'+'ector'](_0x149d87,_0x46473d=new D()){const _0x25018e=_0x149d87['x'],_0x18b2ef=_0x149d87['y'],_0x1ab05e=_0x149d87['z'],_0x5e14ed=this['x'],_0x390395=this['y'],_0x225ad7=this['z'],_0x19f505=this['w'],_0x3cc0dd=_0x19f505*_0x25018e+_0x390395*_0x1ab05e-_0x225ad7*_0x18b2ef,_0x1995f5=_0x19f505*_0x18b2ef+_0x225ad7*_0x25018e-_0x5e14ed*_0x1ab05e,_0xe21047=_0x19f505*_0x1ab05e+_0x5e14ed*_0x18b2ef-_0x390395*_0x25018e,_0x478e36=-_0x5e14ed*_0x25018e-_0x390395*_0x18b2ef-_0x225ad7*_0x1ab05e;return _0x46473d['x']=_0x3cc0dd*_0x19f505+_0x478e36*-_0x5e14ed+_0x1995f5*-_0x225ad7-_0xe21047*-_0x390395,_0x46473d['y']=_0x1995f5*_0x19f505+_0x478e36*-_0x390395+_0xe21047*-_0x5e14ed-_0x3cc0dd*-_0x225ad7,_0x46473d['z']=_0xe21047*_0x19f505+_0x478e36*-_0x225ad7+_0x3cc0dd*-_0x390395-_0x1995f5*-_0x5e14ed,_0x46473d;}['fromArray'](_0x1cb8aa,_0x4f8926=0x20bd+-0x100b+-0x1*0x10b2){return this['x']=_0x1cb8aa[_0x4f8926]??this['x'],this['y']=_0x1cb8aa[_0x4f8926+(0x1b22+-0x57f+-0x15a2*0x1)]??this['y'],this['z']=_0x1cb8aa[_0x4f8926+(0x2*0x30c+-0x11ad+0xb97)]??this['z'],this['w']=_0x1cb8aa[_0x4f8926+(-0xf32*-0x2+-0x939*0x3+-0x2b6)]??this['w'],this;}['toString'](){return'['+this['x']+',\x20'+this['y']+',\x20'+this['z']+',\x20'+this['w']+']';}['toArray'](_0x282a46=[],_0x5c1d44=-0x1*-0xe63+-0x1d*-0x25+0x29*-0x74){return _0x282a46[_0x5c1d44]=this['x'],_0x282a46[_0x5c1d44+(0x14e8+-0x1*-0x24c3+-0x39aa)]=this['y'],_0x282a46[_0x5c1d44+(-0xac3*-0x2+0x39f*0x2+0x6*-0x4cb)]=this['z'],_0x282a46[_0x5c1d44+(0x4a*-0x77+-0x499*-0x2+0x1937)]=this['w'],_0x282a46;}};h(Sn,'IDENTITY',Object['freeze'](new Sn(0x28*0xc9+-0x3ab+-0x1bbd,0x1773+0x2164+0x1*-0x38d7,-0xb7c*-0x2+0xc3c+-0x3*0xbbc,-0x1b*0x57+0x2*0xe8f+0x4fc*-0x4))),h(Sn,'ZERO',Object['freeze'](new Sn(0x1a*-0x51+0x25ec+-0x1db2,0x1c50+-0xaf*-0x14+-0x29fc,0x7*-0x3bb+-0x71d+0x213a,-0x430+0x49b+-0x6b)));let le=Sn;const Pa=new D(),Ma=new D(),Um=new D(),Bm=new D(),gx=new D();class De{constructor(_0x314c34,_0xe7919){h(this,'center',new D()),h(this,'halfExtent'+'s',new D(0x1*0xb99+-0x25*0x105+0x98*0x2c+0.5,0x16c2+0x175*0x5+0x1*-0x1e0b+0.5,-0x1ac1+0x1*-0x1915+-0x52f*-0xa+0.5)),h(this,'_min',new D()),h(this,'_max',new D()),(_0x314c34&&this['center']['copy'](_0x314c34),_0xe7919&&this['halfExtent'+'s']['copy'](_0xe7919));}['add'](_0x21f16e){const _0x2d4d3d=this['center'],_0x21e097=_0x2d4d3d['x'],_0xfbf094=_0x2d4d3d['y'],_0x3e355c=_0x2d4d3d['z'],_0x551636=this['halfExtent'+'s'],_0x119605=_0x551636['x'],_0x2ae8d8=_0x551636['y'],_0x3352af=_0x551636['z'];let _0x100e07=_0x21e097-_0x119605,_0x1850b2=_0x21e097+_0x119605,_0x116c7e=_0xfbf094-_0x2ae8d8,_0x2e4d99=_0xfbf094+_0x2ae8d8,_0x473437=_0x3e355c-_0x3352af,_0x24c673=_0x3e355c+_0x3352af;const _0x1d4c0e=_0x21f16e['center'],_0x2f27da=_0x1d4c0e['x'],_0x3f7800=_0x1d4c0e['y'],_0x2c52c6=_0x1d4c0e['z'],_0x267231=_0x21f16e['halfExtent'+'s'],_0x4ade73=_0x267231['x'],_0x19a5c1=_0x267231['y'],_0x1fd3f8=_0x267231['z'],_0x2f80a4=_0x2f27da-_0x4ade73,_0x27125f=_0x2f27da+_0x4ade73,_0x5532a7=_0x3f7800-_0x19a5c1,_0x4ba92b=_0x3f7800+_0x19a5c1,_0x2287ab=_0x2c52c6-_0x1fd3f8,_0x5a05de=_0x2c52c6+_0x1fd3f8;_0x2f80a4<_0x100e07&&(_0x100e07=_0x2f80a4),_0x27125f>_0x1850b2&&(_0x1850b2=_0x27125f),_0x5532a7<_0x116c7e&&(_0x116c7e=_0x5532a7),_0x4ba92b>_0x2e4d99&&(_0x2e4d99=_0x4ba92b),_0x2287ab<_0x473437&&(_0x473437=_0x2287ab),_0x5a05de>_0x24c673&&(_0x24c673=_0x5a05de),_0x2d4d3d['x']=(_0x100e07+_0x1850b2)*(0x2548+-0x1*0x15b6+-0xf92+0.5),_0x2d4d3d['y']=(_0x116c7e+_0x2e4d99)*(-0x1*-0x2327+-0x4ce*0x1+-0x1e59+0.5),_0x2d4d3d['z']=(_0x473437+_0x24c673)*(0x41*-0x24+0xf15+-0x5f1+0.5),_0x551636['x']=(_0x1850b2-_0x100e07)*(-0x1*0xd46+0x144a+-0x704+0.5),_0x551636['y']=(_0x2e4d99-_0x116c7e)*(0x1e8*-0x6+0x7*0x1ff+-0x289*0x1+0.5),_0x551636['z']=(_0x24c673-_0x473437)*(0xf8e+0x1a7e+0x4ac*-0x9+0.5);}['copy'](_0x430251){this['center']['copy'](_0x430251['center']),this['halfExtent'+'s']['copy'](_0x430251['halfExtent'+'s']);}['clone'](){return new De(this['center'],this['halfExtent'+'s']);}['intersects'](_0x4d8f1b){const _0x225483=this['getMax'](),_0x36c016=this['getMin'](),_0x488210=_0x4d8f1b['getMax'](),_0x214f73=_0x4d8f1b['getMin']();return _0x36c016['x']<=_0x488210['x']&&_0x225483['x']>=_0x214f73['x']&&_0x36c016['y']<=_0x488210['y']&&_0x225483['y']>=_0x214f73['y']&&_0x36c016['z']<=_0x488210['z']&&_0x225483['z']>=_0x214f73['z'];}['_intersect'+'sRay'](_0x405c41,_0x50b455){const _0x4f840a=Pa['copy'](this['getMin']())['sub'](_0x405c41['origin']),_0x46540e=Ma['copy'](this['getMax']())['sub'](_0x405c41['origin']),_0x82cd2c=_0x405c41['direction'];_0x82cd2c['x']===0x1d13+-0x1999*-0x1+0x4*-0xdab?(_0x4f840a['x']=_0x4f840a['x']<-0x28c*0xe+0x540+0x1e68?-Number['MAX_VALUE']:Number['MAX_VALUE'],_0x46540e['x']=_0x46540e['x']<-0x1fa4+-0xc4f*0x1+0x2bf3*0x1?-Number['MAX_VALUE']:Number['MAX_VALUE']):(_0x4f840a['x']/=_0x82cd2c['x'],_0x46540e['x']/=_0x82cd2c['x']),_0x82cd2c['y']===-0x3b2+-0x19d7+0x1d89?(_0x4f840a['y']=_0x4f840a['y']<-0x2dd*0x2+0x26f2+-0x4*0x84e?-Number['MAX_VALUE']:Number['MAX_VALUE'],_0x46540e['y']=_0x46540e['y']<0x1664+0x53e+-0x36*0x83?-Number['MAX_VALUE']:Number['MAX_VALUE']):(_0x4f840a['y']/=_0x82cd2c['y'],_0x46540e['y']/=_0x82cd2c['y']),_0x82cd2c['z']===-0xb3*0x5+0x1f87+-0x1c08?(_0x4f840a['z']=_0x4f840a['z']<-0x282+-0x1a7*-0x11+-0x1995?-Number['MAX_VALUE']:Number['MAX_VALUE'],_0x46540e['z']=_0x46540e['z']<-0x60d+-0x19f8+-0x493*-0x7?-Number['MAX_VALUE']:Number['MAX_VALUE']):(_0x4f840a['z']/=_0x82cd2c['z'],_0x46540e['z']/=_0x82cd2c['z']);const _0x6d3327=Um['set'](Math['min'](_0x4f840a['x'],_0x46540e['x']),Math['min'](_0x4f840a['y'],_0x46540e['y']),Math['min'](_0x4f840a['z'],_0x46540e['z'])),_0x86a423=Bm['set'](Math['max'](_0x4f840a['x'],_0x46540e['x']),Math['max'](_0x4f840a['y'],_0x46540e['y']),Math['max'](_0x4f840a['z'],_0x46540e['z'])),_0xfe94f6=Math['min'](Math['min'](_0x86a423['x'],_0x86a423['y']),_0x86a423['z']),_0x123679=Math['max'](Math['max'](_0x6d3327['x'],_0x6d3327['y']),_0x6d3327['z']),_0x4794f1=_0xfe94f6>=_0x123679&&_0x123679>=-0xf*0x116+-0x2279+-0x17*-0x235;return _0x4794f1&&_0x50b455['copy'](_0x405c41['direction'])['mulScalar'](_0x123679)['add'](_0x405c41['origin']),_0x4794f1;}['_fastInter'+'sectsRay'](_0x235b25){const _0x35a8a8=Pa,_0x30374f=Ma,_0x2dca83=Um,_0x24b167=Bm,_0xdcadfa=gx,_0x1ed7f0=_0x235b25['direction'];return _0x35a8a8['sub2'](_0x235b25['origin'],this['center']),_0x24b167['set'](Math['abs'](_0x35a8a8['x']),Math['abs'](_0x35a8a8['y']),Math['abs'](_0x35a8a8['z'])),_0x2dca83['mul2'](_0x35a8a8,_0x1ed7f0),!(_0x24b167['x']>this['halfExtent'+'s']['x']&&_0x2dca83['x']>=0x1c75+-0x164c+-0x629||_0x24b167['y']>this['halfExtent'+'s']['y']&&_0x2dca83['y']>=-0x9*0x8a+-0x2f9*-0x3+-0x411||_0x24b167['z']>this['halfExtent'+'s']['z']&&_0x2dca83['z']>=-0x198b+0x22*-0xd5+-0x35d5*-0x1||(_0xdcadfa['set'](Math['abs'](_0x1ed7f0['x']),Math['abs'](_0x1ed7f0['y']),Math['abs'](_0x1ed7f0['z'])),_0x30374f['cross'](_0x1ed7f0,_0x35a8a8),_0x30374f['set'](Math['abs'](_0x30374f['x']),Math['abs'](_0x30374f['y']),Math['abs'](_0x30374f['z'])),_0x30374f['x']>this['halfExtent'+'s']['y']*_0xdcadfa['z']+this['halfExtent'+'s']['z']*_0xdcadfa['y'])||_0x30374f['y']>this['halfExtent'+'s']['x']*_0xdcadfa['z']+this['halfExtent'+'s']['z']*_0xdcadfa['x']||_0x30374f['z']>this['halfExtent'+'s']['x']*_0xdcadfa['y']+this['halfExtent'+'s']['y']*_0xdcadfa['x']);}['intersects'+'Ray'](_0x81fd02,_0xf052a1){return _0xf052a1?this['_intersect'+'sRay'](_0x81fd02,_0xf052a1):this['_fastInter'+'sectsRay'](_0x81fd02);}['setMinMax'](_0x2851d8,_0x51598c){this['center']['add2'](_0x51598c,_0x2851d8)['mulScalar'](-0x26cf+-0x1*0x12cb+-0x399a*-0x1+0.5),this['halfExtent'+'s']['sub2'](_0x51598c,_0x2851d8)['mulScalar'](-0x18c0+0x2*0x934+0x658+0.5);}['getMin'](){return this['_min']['copy'](this['center'])['sub'](this['halfExtent'+'s']);}['getMax'](){return this['_max']['copy'](this['center'])['add'](this['halfExtent'+'s']);}['containsPo'+'int'](_0x5ae112){const _0x126f3d=this['getMin'](),_0x52a2a4=this['getMax']();return!(_0x5ae112['x']<_0x126f3d['x']||_0x5ae112['x']>_0x52a2a4['x']||_0x5ae112['y']<_0x126f3d['y']||_0x5ae112['y']>_0x52a2a4['y']||_0x5ae112['z']<_0x126f3d['z']||_0x5ae112['z']>_0x52a2a4['z']);}['setFromTra'+'nsformedAa'+'bb'](_0x386338,_0x5b76c1,_0x246cb8=!(0x65d+0xee*-0x16+0xe18*0x1)){const _0x3599e2=_0x386338['center'],_0x59940a=_0x386338['halfExtent'+'s'],_0x4e865d=_0x5b76c1['data'];let _0x5660a1=_0x4e865d[-0x146*0x9+0x6*0x206+-0x2*0x57],_0x216b27=_0x4e865d[0x7d*0x42+-0x16bc+-0x1*0x97a],_0x468e8d=_0x4e865d[-0x13b+-0x20*0xa4+0x15c3],_0x38c27=_0x4e865d[0xd*0x18b+0x1a54+-0xf76*0x3],_0x325ccd=_0x4e865d[0x1e41*0x1+0x576*-0x4+-0x864],_0x17dfc4=_0x4e865d[0x272*-0x1+-0x210d+-0x2388*-0x1],_0x460122=_0x4e865d[-0x25eb+-0xc4e+-0x491*-0xb],_0x13acec=_0x4e865d[-0x21e2+0x2b9+0x1f2f],_0xc8358=_0x4e865d[0x269e+-0x1fc+-0x2498];if(_0x246cb8){let _0xed5e76=_0x5660a1*_0x5660a1+_0x216b27*_0x216b27+_0x468e8d*_0x468e8d;if(_0xed5e76>0x52a*0x2+0x2354+-0x2da8){const _0x2b4cc0=(0x3*0x293+0x153d+0x9a7*-0x3)/Math['sqrt'](_0xed5e76);_0x5660a1*=_0x2b4cc0,_0x216b27*=_0x2b4cc0,_0x468e8d*=_0x2b4cc0;}if(_0xed5e76=_0x38c27*_0x38c27+_0x325ccd*_0x325ccd+_0x17dfc4*_0x17dfc4,_0xed5e76>0xe*0x3d+-0x25d3*0x1+0x9*0x3d5){const _0x439ae0=(0x22ec+0x26b1+-0x499c)/Math['sqrt'](_0xed5e76);_0x38c27*=_0x439ae0,_0x325ccd*=_0x439ae0,_0x17dfc4*=_0x439ae0;}if(_0xed5e76=_0x460122*_0x460122+_0x13acec*_0x13acec+_0xc8358*_0xc8358,_0xed5e76>-0x1c8e*0x1+0x47b+0x1813){const _0x5323b8=(-0x154f*-0x1+-0x885+-0x443*0x3)/Math['sqrt'](_0xed5e76);_0x460122*=_0x5323b8,_0x13acec*=_0x5323b8,_0xc8358*=_0x5323b8;}}this['center']['set'](_0x4e865d[0x1*-0x6d+-0xc3a+0xcb3]+_0x5660a1*_0x3599e2['x']+_0x216b27*_0x3599e2['y']+_0x468e8d*_0x3599e2['z'],_0x4e865d[0x11*-0x1e3+-0x95e*0x2+-0x15*-0x26c]+_0x38c27*_0x3599e2['x']+_0x325ccd*_0x3599e2['y']+_0x17dfc4*_0x3599e2['z'],_0x4e865d[0x7*0x149+-0x21d8+0x18e7]+_0x460122*_0x3599e2['x']+_0x13acec*_0x3599e2['y']+_0xc8358*_0x3599e2['z']),this['halfExtent'+'s']['set'](Math['abs'](_0x5660a1)*_0x59940a['x']+Math['abs'](_0x216b27)*_0x59940a['y']+Math['abs'](_0x468e8d)*_0x59940a['z'],Math['abs'](_0x38c27)*_0x59940a['x']+Math['abs'](_0x325ccd)*_0x59940a['y']+Math['abs'](_0x17dfc4)*_0x59940a['z'],Math['abs'](_0x460122)*_0x59940a['x']+Math['abs'](_0x13acec)*_0x59940a['y']+Math['abs'](_0xc8358)*_0x59940a['z']);}static['computeMin'+'Max'](_0x53cc2e,_0x41bef3,_0x4b0e57,_0x4f0eb8=_0x53cc2e['length']/(0x1e7a+-0x427*-0x4+0xfb1*-0x3)){if(_0x4f0eb8>0x13c1*0x1+0xe84+-0x2245){let _0x449b8a=_0x53cc2e[0x1d23*0x1+-0x1220+0xb03*-0x1],_0x158101=_0x53cc2e[0x452*0x8+-0x5c5+-0x5c2*0x5],_0x4278d6=_0x53cc2e[0x25c2+0x11*0x1a+-0x3e*0xa3],_0x35416a=_0x449b8a,_0x2f3765=_0x158101,_0x4dbba2=_0x4278d6;const _0xef7baf=_0x4f0eb8*(-0x3da*-0x1+0x13*0x50+-0x9c7);for(let _0x461f4c=0x10a7+0x210a+-0x1*0x31ae;_0x461f4c<_0xef7baf;_0x461f4c+=0xd7f*-0x1+-0xd16+0x1a98){const _0x33c1a9=_0x53cc2e[_0x461f4c],_0x25336d=_0x53cc2e[_0x461f4c+(0x4*0x7c3+-0x1a6b+-0x128*0x4)],_0xec2433=_0x53cc2e[_0x461f4c+(0x5d*-0x33+-0x261+-0xa75*-0x2)];_0x33c1a9<_0x449b8a&&(_0x449b8a=_0x33c1a9),_0x25336d<_0x158101&&(_0x158101=_0x25336d),_0xec2433<_0x4278d6&&(_0x4278d6=_0xec2433),_0x33c1a9>_0x35416a&&(_0x35416a=_0x33c1a9),_0x25336d>_0x2f3765&&(_0x2f3765=_0x25336d),_0xec2433>_0x4dbba2&&(_0x4dbba2=_0xec2433);}_0x41bef3['set'](_0x449b8a,_0x158101,_0x4278d6),_0x4b0e57['set'](_0x35416a,_0x2f3765,_0x4dbba2);}}['compute'](_0x2e61a8,_0x2583ce){De['computeMin'+'Max'](_0x2e61a8,Pa,Ma,_0x2583ce),this['setMinMax'](Pa,Ma);}['intersects'+'BoundingSp'+'here'](_0x1f10f2){return this['_distanceT'+'oBoundingS'+'phereSq'](_0x1f10f2)<=_0x1f10f2['radius']*_0x1f10f2['radius'];}['_distanceT'+'oBoundingS'+'phereSq'](_0x4cc857){const _0x1a5903=this['getMin'](),_0x25d122=this['getMax']();let _0x37fd0f=0xa*-0xe2+-0x218a+0x2a5e;const _0x6b9eab=['x','y','z'];for(let _0x5a1c1b=0xe*0x19d+-0x1*-0x8dd+0x1*-0x1f73;_0x5a1c1b<-0x41*0x5+0x2cc+-0xc2*0x2;++_0x5a1c1b){let _0x2874ac=-0x133f+0x1ffa*0x1+-0xcbb;const _0x50c2e1=_0x4cc857['center'][_0x6b9eab[_0x5a1c1b]],_0x5ab71b=_0x1a5903[_0x6b9eab[_0x5a1c1b]],_0x24781d=_0x25d122[_0x6b9eab[_0x5a1c1b]];let _0x59b758=0x31*0x1+0x1762+0x163*-0x11;_0x50c2e1<_0x5ab71b&&(_0x59b758=_0x5ab71b-_0x50c2e1,_0x2874ac+=_0x59b758*_0x59b758),_0x50c2e1>_0x24781d&&(_0x59b758=_0x50c2e1-_0x24781d,_0x2874ac+=_0x59b758*_0x59b758),_0x37fd0f+=_0x2874ac;}return _0x37fd0f;}['_expand'](_0x2a122e,_0x19bf15){Pa['add2'](this['getMin'](),_0x2a122e),Ma['add2'](this['getMax'](),_0x19bf15),this['setMinMax'](Pa,Ma);}}const Wl=new D(),Sx=new D();class sp{constructor(_0x280f9a=new D(),_0xf0e3a2=-0x2174+0x1162+0x1012+0.5){h(this,'center'),h(this,'radius'),(w['assert'](!Object['isFrozen'](_0x280f9a),'The\x20constr'+'uctor\x20of\x20\x27'+'BoundingSp'+'here\x27\x20does'+'\x20not\x20accep'+'t\x20a\x20consta'+'nt\x20(frozen'+')\x20object\x20a'+'s\x20a\x20\x27cente'+'r\x27\x20paramet'+'er'),this['center']=_0x280f9a,this['radius']=_0xf0e3a2);}['containsPo'+'int'](_0x29f2b2){const _0x240c1a=Wl['sub2'](_0x29f2b2,this['center'])['lengthSq'](),_0x195665=this['radius'];return _0x240c1a<_0x195665*_0x195665;}['intersects'+'Ray'](_0x187203,_0x11a8ef){const _0x3a8bda=Wl['copy'](_0x187203['origin'])['sub'](this['center']),_0x2ac8a1=_0x3a8bda['dot'](Sx['copy'](_0x187203['direction'])['normalize']()),_0x582d0b=_0x3a8bda['dot'](_0x3a8bda)-this['radius']*this['radius'];if(_0x582d0b>0x12*0x97+0x1a59+-0x24f7&&_0x2ac8a1>-0x94c+-0xed4*-0x1+-0x588)return!(-0x1b57+0x138b+0x1*0x7cd);const _0x18779f=_0x2ac8a1*_0x2ac8a1-_0x582d0b;if(_0x18779f<-0x13f8+0x43*-0x90+-0x12*-0x334)return!(-0x615+0x45b*-0x3+0x1327);const _0x3a4a53=Math['abs'](-_0x2ac8a1-Math['sqrt'](_0x18779f));return _0x11a8ef&&_0x11a8ef['copy'](_0x187203['direction'])['mulScalar'](_0x3a4a53)['add'](_0x187203['origin']),!(-0x1f4c+0x1fce+-0x82);}['intersects'+'BoundingSp'+'here'](_0x55fbdd){Wl['sub2'](_0x55fbdd['center'],this['center']);const _0x57aa19=_0x55fbdd['radius']+this['radius'];return Wl['lengthSq']()<=_0x57aa19*_0x57aa19;}}class QS{constructor(_0x1e2392=D['UP'],_0x3eda65=-0x6ea+0x26b1+-0x1fc7){h(this,'normal',new D()),h(this,'distance'),(this['normal']['copy'](_0x1e2392),this['distance']=_0x3eda65);}['clone'](){const _0x252f1a=this['constructo'+'r'];return new _0x252f1a()['copy'](this);}['copy'](_0x24f364){return this['normal']['copy'](_0x24f364['normal']),this['distance']=_0x24f364['distance'],this;}['intersects'+'Line'](_0x3f9f36,_0x1c4ceb,_0xa034c2){const _0x5c79f2=this['distance'],_0x2d42ca=this['normal']['dot'](_0x3f9f36)+_0x5c79f2,_0x5460c1=this['normal']['dot'](_0x1c4ceb)+_0x5c79f2,_0x278e19=_0x2d42ca/(_0x2d42ca-_0x5460c1),_0x1a4ae3=_0x278e19>=-0x10d*-0x1e+0x1cdf+-0x3c65&&_0x278e19<=-0x122*0x20+0x2267+0x1da;return _0x1a4ae3&&_0xa034c2&&_0xa034c2['lerp'](_0x3f9f36,_0x1c4ceb,_0x278e19),_0x1a4ae3;}['intersects'+'Ray'](_0x32130c,_0x149517){const _0x3af564=this['normal']['dot'](_0x32130c['direction']);if(_0x3af564===-0x270c*0x1+-0x18*-0x18d+0x1d4)return!(0x2b6*-0x9+-0x20ea+0x3951);const _0x3ccfcd=-(this['normal']['dot'](_0x32130c['origin'])+this['distance'])/_0x3af564;return _0x3ccfcd>=-0x593*-0x7+0x4d2+-0x2bd7&&_0x149517&&_0x149517['copy'](_0x32130c['direction'])['mulScalar'](_0x3ccfcd)['add'](_0x32130c['origin']),_0x3ccfcd>=-0x851+-0x219e+0x29ef;}['normalize'](){const _0x5cb2fa=(-0x4*0x10f+0x1*-0x148a+0x18c7)/this['normal']['length']();return this['normal']['mulScalar'](_0x5cb2fa),this['distance']*=_0x5cb2fa,this;}['set'](_0x160578,_0x3c016c,_0x1a1b06,_0x15e8d2){return this['normal']['set'](_0x160578,_0x3c016c,_0x1a1b06),this['distance']=_0x15e8d2,this;}['setFromPoi'+'ntNormal'](_0x2f775e,_0x26060c){return this['normal']['copy'](_0x26060c),this['distance']=-this['normal']['dot'](_0x2f775e),this;}}class yx{constructor(){h(this,'planes',[]);for(let _0x413528=-0xb5*-0x17+-0x1d47*-0x1+0x3a*-0xc9;_0x413528<-0x6a*0x14+0x9*0x233+-0xb7d;_0x413528++)this['planes'][_0x413528]=new QS();}['clone'](){const _0x25ad86=this['constructo'+'r'];return new _0x25ad86()['copy'](this);}['copy'](_0x1d8b97){for(let _0x3c207c=0x53*0x6f+-0x33*-0x99+-0x4278;_0x3c207c<0x146*-0x10+0x1383+-0x1*-0xe3;_0x3c207c++)this['planes'][_0x3c207c]['copy'](_0x1d8b97['planes'][_0x3c207c]);return this;}['setFromMat'+'4'](_0x53c62b){const [_0x56c35b,_0xcde500,_0x1b021e,_0x5a6712,_0x591f0c,_0x5e6631,_0x493cd5,_0x1b61df,_0x23ab1a,_0x56b101,_0x3dcb44,_0x5b0468,_0x3b9782,_0x366cef,_0x3227a2,_0x44b87e]=_0x53c62b['data'],_0x2632bf=this['planes'];_0x2632bf[-0x7b0+-0x1*-0x10fe+-0x94e]['set'](_0x5a6712-_0x56c35b,_0x1b61df-_0x591f0c,_0x5b0468-_0x23ab1a,_0x44b87e-_0x3b9782)['normalize'](),_0x2632bf[-0x2*-0x1304+-0x4*-0x9c2+-0x4d0f]['set'](_0x5a6712+_0x56c35b,_0x1b61df+_0x591f0c,_0x5b0468+_0x23ab1a,_0x44b87e+_0x3b9782)['normalize'](),_0x2632bf[0x15a9+-0xb6f*-0x1+-0x2116]['set'](_0x5a6712+_0xcde500,_0x1b61df+_0x5e6631,_0x5b0468+_0x56b101,_0x44b87e+_0x366cef)['normalize'](),_0x2632bf[-0x7c3+-0x317*-0xb+-0x8bd*0x3]['set'](_0x5a6712-_0xcde500,_0x1b61df-_0x5e6631,_0x5b0468-_0x56b101,_0x44b87e-_0x366cef)['normalize'](),_0x2632bf[0xa3f+-0x267b*0x1+0x8*0x388]['set'](_0x5a6712-_0x1b021e,_0x1b61df-_0x493cd5,_0x5b0468-_0x3dcb44,_0x44b87e-_0x3227a2)['normalize'](),_0x2632bf[0x1865+0xfae+-0x1*0x280e]['set'](_0x5a6712+_0x1b021e,_0x1b61df+_0x493cd5,_0x5b0468+_0x3dcb44,_0x44b87e+_0x3227a2)['normalize']();}['containsPo'+'int'](_0x355e3e){for(let _0x3cf46f=0x9d3+-0x7c1+-0x212;_0x3cf46f<-0x9da+-0x2528+0x2f08;_0x3cf46f++){const {normal:_0x398aac,distance:_0x43c7d4}=this['planes'][_0x3cf46f];if(_0x398aac['dot'](_0x355e3e)+_0x43c7d4<=-0x558+0xaed*-0x1+0x1045)return!(0x77*-0x39+0x2435+-0x9b5);}return!(-0x1*0x2243+0x1093+0x11b0);}['containsSp'+'here'](_0x5f5db6){const {center:_0x4e20ad,radius:_0x435026}=_0x5f5db6;let _0x246a59=0x25e*0x5+0xa*-0x91+-0x1*0x62c;for(let _0x3dd9ee=0xfda+-0x1091+-0x3d*-0x3;_0x3dd9ee<0x24c2+-0x30*0x93+-0x2*0x496;_0x3dd9ee++){const {normal:_0x1306f1,distance:_0x96f4ef}=this['planes'][_0x3dd9ee],_0x11a009=_0x1306f1['dot'](_0x4e20ad)+_0x96f4ef;if(_0x11a009<=-_0x435026)return-0x221e+0x21af+0x6f;_0x11a009>_0x435026&&_0x246a59++;}return _0x246a59===-0xdc2+0x1*0x6fb+-0x6cd*-0x1?-0x1a5d+0x638+0x1427:-0x116+0x1c5e+-0x1b47;}}class Dn{constructor(_0x15d5ec,_0x893f9a){h(this,'origin',new D()),h(this,'direction',D['FORWARD']['clone']()),(_0x15d5ec&&this['origin']['copy'](_0x15d5ec),_0x893f9a&&this['direction']['copy'](_0x893f9a));}['set'](_0x188746,_0x4a9feb){return this['origin']['copy'](_0x188746),this['direction']['copy'](_0x4a9feb),this;}['copy'](_0x7dce57){return this['set'](_0x7dce57['origin'],_0x7dce57['direction']);}['clone'](){return new this['constructo'+'r'](this['origin'],this['direction']);}}const yt=-0xf1*-0x25+0x1af5+0x2cf*-0x16,ue=-0x51*0x13+-0xdb+0x6df,ip=-0x1304+0xec3+0x443,rp=-0x23a7+0x1*-0x1597+0x1*0x393e,Ft=-0x20c+-0xcb6*-0x1+0xaa9*-0x1,vx=0x1217+-0x17a*-0x7+-0x3*0x979,JS=0x1*-0x592+-0x89*-0xa+0xa*0x6,xx=-0x1*0x3d1+-0xe54+0x122a,jh=0xbfb+-0xe15+0x220,Yh=-0xbe8+0x9cc+0x224,fs=-0x213+0x629+-0x416*0x1,Tx=-0x109f+-0xe44+0x1ee5,wx=-0x1*-0x1bb5+0x2*0x823+-0x2bf8,Ex=-0x2104+0x2193+-0x1*0x8b,ms=-0x268+0x159*-0x17+-0x1*-0x2167,lh=0xbfc+-0xf*-0xce+-0x180d,ey=0xd74+0xc*0x15d+0xe*-0x221,bx=0x718*0x1+-0x32a*-0xb+-0x1*0x29e3,jo=0x4*0x7be+-0x19b2+0x545*-0x1,Yo=-0x11f2+-0x202f+0x3223,ch=-0x22*0x1+0x2*0x54f+-0xa78,bt=-0x22d3*-0x1+-0x97f+-0x1954,pa=-0xb*-0x371+-0x1f7*0x1+0x1*-0x23e3,Fo=-0x17d*0x7+0x19ef+-0xf82,Ax=-0x9b6+0x6f*0x1b+-0x1*0x1fc,Te=0x36*0x76+-0x119*-0xe+-0x1*0x2842,vt=0x122+-0x25b+-0x13a*-0x1,Kh=-0x1*0xcdf+0x3a7+0x93a*0x1,Zh=0x1655+-0x934+-0xd1e,Qh=-0x164b+-0xa2c+0x207b*0x1,ma=0x1*0x31c+0x97c*0x1+0x1*-0xc93,Cx=-0x1b8a+-0xd50+0x28da,hh=0x245*0xe+0xcd8+0xedf*-0x3,dh=-0x3*0x3be+-0x4a5*0x5+0x2275,Wf=0x1*0xaa6+-0x2*-0xf7+-0xc91*0x1,Px=-0x1*-0x337+0x5b*-0x1a+0x60b,Mx=-0xf78+0x1*0x25eb+0x12*-0x13f,Dx=-0x268d+-0x3c4*0x8+0x44b3,Wi=-0x1*0x925+-0x117b+0x1aa7,$f=-0x25fa+0x4*-0x95f+-0x1a*-0x2e7,Yi=-0x1674*0x1+-0xc8*-0x1+0x15ad,wr=-0xdc5+-0x169a+0x2461,ty=-0x2369+-0x2*-0xf67+0x49b,sy=-0x1*-0x10a5+-0x1*-0x529+-0x15cd,ap=0x1cb2+0x263d*-0x1+0x98d,Jh=0x3ab+0x974+-0xd1c,np=-0x14a2+-0x19af+-0x1*-0x2e55,ed=-0x19d6+-0x161b+0x2ff6,Cr=0x81f+0x1*0x12b7+0x42*-0x68,Ne=-0x1dba+-0x43c+-0x21fd*-0x1,td=0x12c1+0x11*0x1f7+-0x3420,op=-0x1*0x19a1+0xa49*0x3+0x531*-0x1,vl=0x1d3b+0x119d+-0x2ece,ui=-0x1*-0x2c5+0x2*-0x6fe+0xb42*0x1,nt=0x347*0xb+0x975+-0x1*0x2d76,Ye=0x519*-0x2+0x1*0x1cf+0x870,Xt=-0x16d4+0x10b+0x15d7,Ji=-0x501*0x3+-0x5*0x3f+-0x27*-0x6b,$i=0x236*-0x11+-0x3e1+-0x1*-0x2987,sd=-0x776*-0x5+-0x802+-0x7*0x42d,In=-0x5*0xeb+-0x8cc+-0x41*-0x35,lp=0x1c3f*-0x1+-0x22b5*-0x1+-0x663,_s=0x75*-0x4b+0x1cd*-0x13+-0x106*-0x43,id=0x1a7a+-0xf54*0x2+0x443*0x1,cp=-0x2176+-0x35*-0x59+-0xf1f*-0x1,hp=0x10b0+-0x1b51+0xab8,xl=-0xa*0x136+0x19*0xfd+0x42b*-0x3,Tl=0x20d6+0x18ff+-0x39bc,rd=-0x9a6*-0x1+-0x22a6+0x1cb*0xe,ad=0x25b2+-0x2*0x779+-0x1*0x16a5,iy=0xe3a*-0x1+-0x1903+0x59f*0x7,ry=-0x5d+-0x2c2*0xe+0x2716,ay=-0x1ad*0xb+-0x1e01+0x308e,ny=0x1*-0x14c5+-0xd4*0x6+0x1*0x19dc,dp=0xab7+0x2*0xbc0+-0x2217,oy=0xa9b+-0x29b+0x9b*-0xd,fp=-0x5d*-0x65+0xf3e+0x59*-0x95,up=0x1e4c+-0x10a1+-0xd88,pp=0x56*0xc+0x568+-0x94c,Ki=-0x245c+0x26d2+-0x251,mp=-0x1*0xb+-0x8da+0x1*0x90b,ly=0x2531*0x1+0x13a0+0x1*-0x38aa,_p=0x17e7+-0x21a1+0x9e2,gp=0xc*-0x277+0xd*0x15d+0xc04,Sp=0x1bdd+-0x1bef+-0x1*-0x3c,yp=0x1ea4+-0x8ca+-0x15af,vp=-0x927+-0x9f1+0x19b*0xc,cy=0xd*0xf1+-0xed*-0xa+-0x1552,xp=0x3*-0x1f3+0xc1*-0x11+0x10c*0x12,nd=-0x1dc1+0xb89*-0x3+-0x29*-0x193,Tp=0x574+-0x3ef*0x6+0x1256,Ue=-0xfe7*0x1+-0xbb*-0xd+0x699,od=-0xb15+-0x2029+0x2b70,wp=-0x126+-0x1*0x19d5+0x1b2e,Ep=-0x1*0x1e2f+0x92*-0x3b+0x4009,bp=0x1771+-0x236d+0x1*0xc31,Xf=0xfa9+0x1fd2+-0x1*0x2f45,qf=-0x41c+0x244*0x11+0x2231*-0x1,jf=-0x27d+-0x782*0x1+0xa37,Yf=-0x1688+-0x23ad+0x1d39*0x2,Kf=0x2*-0xee6+-0x143c+0x3246,Zf=-0xa55+0xb87+0x9*-0x1b,hy=-0x189a+-0x11f1*-0x1+0x6e9,dy=0xb*0x1c3+-0x1f46+-0xa*-0x137,fy=-0x1c08+-0x246b+0x40b5,uy=0x26ef+0x1b62+-0x2*0x2107,Qf=-0x26e6+0x324+-0x601*-0x6,vn=0x1533+0xfaa+-0x493*0x8,Nt=new Map([[ty,{'name':'A8','size':0x1,'ldr':!(-0x56e+0x17f9+-0x128b)}],[Ep,{'name':'R8','size':0x1,'ldr':!(0x25e9+-0xb*-0xa1+-0x2cd4)}],[sy,{'name':'L8','size':0x1,'ldr':!(-0x15b8+0x4d2*0x1+0x5a2*0x3)}],[ap,{'name':'LA8','size':0x2,'ldr':!(0x19*0x14b+0x1*-0x1097+-0xfbc)}],[bp,{'name':'RG8','size':0x2,'ldr':!(-0x26cb*0x1+-0x1*0x5cf+-0x40e*-0xb)}],[Jh,{'name':'RGB565','size':0x2,'ldr':!(0x2051*-0x1+-0x1*0x171d+0x376e)}],[np,{'name':'RGBA5551','size':0x2,'ldr':!(-0x5c*-0x44+-0x1*-0x1544+0x9c*-0x4b)}],[ed,{'name':'RGBA4','size':0x2,'ldr':!(0x3a4+0xd6*-0x21+0x17f2*0x1)}],[Cr,{'name':'RGB8','size':0x4,'ldr':!(0x231f+0x263f+0x495e*-0x1)}],[Ne,{'name':'RGBA8','size':0x4,'ldr':!(-0xa33+0x9eb*0x1+0x18*0x3),'srgbFormat':_s}],[od,{'name':'R16F','size':0x2}],[wp,{'name':'RG16F','size':0x4}],[ui,{'name':'RGB16F','size':0x8}],[nt,{'name':'RGBA16F','size':0x8}],[Ye,{'name':'RGB32F','size':0x10}],[Xt,{'name':'RGBA32F','size':0x10}],[Ji,{'name':'R32F','size':0x4}],[$i,{'name':'DEPTH','size':0x4}],[vn,{'name':'DEPTH16','size':0x2}],[sd,{'name':'DEPTHSTENC'+'IL','size':0x4}],[In,{'name':'111110F','size':0x4}],[lp,{'name':'SRGB8','size':0x4,'ldr':!(0x188e+-0x1a4+-0x346*0x7),'srgb':!(0x10a6*0x2+0x5e3+-0x272f)}],[_s,{'name':'SRGBA8','size':0x4,'ldr':!(-0xb84*-0x1+-0x1579+0x1*0x9f5),'srgb':!(-0x2316+-0x697+-0x2f*-0xe3)}],[ny,{'name':'BGRA8','size':0x4,'ldr':!(-0x31*0x5+-0xa9*0x3a+0x273f)}],[hy,{'name':'SBGRA8','size':0x4,'ldr':!(0xcbf+-0xf30+0x271),'srgb':!(0x14a2+-0x35f*-0x4+-0x221e)}],[td,{'name':'DXT1','blockSize':0x8,'ldr':!(0x1*0x26cc+0x247e+0x1*-0x4b4a),'srgbFormat':Xf}],[op,{'name':'DXT3','blockSize':0x10,'ldr':!(0xc04*-0x2+0x1*0xbce+0xc3a),'srgbFormat':qf}],[vl,{'name':'DXT5','blockSize':0x10,'ldr':!(0x268d+-0x227*-0x9+-0x39ec),'srgbFormat':jf}],[id,{'name':'ETC1','blockSize':0x8,'ldr':!(-0x7*0x9d+-0x12ee+0x1739)}],[cp,{'name':'ETC2_RGB','blockSize':0x8,'ldr':!(-0xa9+-0x6f9+0x2*0x3d1),'srgbFormat':Yf}],[hp,{'name':'ETC2_RGBA','blockSize':0x10,'ldr':!(-0x2*0x611+-0x1aa7+-0x26c9*-0x1),'srgbFormat':Kf}],[xl,{'name':'PVRTC_2BPP'+'_RGB_1','ldr':!(-0x1146+-0x618+0x3*0x7ca),'blockSize':0x8}],[Tl,{'name':'PVRTC_2BPP'+'_RGBA_1','ldr':!(0x18fc*-0x1+0x815+0x10e7),'blockSize':0x8}],[rd,{'name':'PVRTC_4BPP'+'_RGB_1','ldr':!(-0x7aa+-0x6*0x5d8+0x1*0x2aba),'blockSize':0x8}],[ad,{'name':'PVRTC_4BPP'+'_RGBA_1','ldr':!(0xd73*0x1+-0xba2+0x5d*-0x5),'blockSize':0x8}],[iy,{'name':'ASTC_4x4','blockSize':0x10,'ldr':!(0xd*0x174+-0x2e*-0xc1+-0x3592),'srgbFormat':Zf}],[ry,{'name':'ATC_RGB','blockSize':0x8,'ldr':!(0x9*-0x202+0x26ba+-0x4*0x52a)}],[ay,{'name':'ATC_RGBA','blockSize':0x10,'ldr':!(-0x81e*-0x4+0x3a*0x80+-0x38*0x119)}],[dy,{'name':'BC6H_RGBF','blockSize':0x10}],[fy,{'name':'BC6H_RGBUF','blockSize':0x10}],[uy,{'name':'BC7_RGBA','blockSize':0x10,'ldr':!(-0x3*0x10d+0x36c+0x45*-0x1),'srgbFormat':Qf}],[Xf,{'name':'DXT1_SRGB','blockSize':0x8,'ldr':!(0x1afd+-0x8d*0x9+-0x8d*0x28),'srgb':!(-0x1*0x1181+0x851+0x930)}],[qf,{'name':'DXT3_SRGBA','blockSize':0x10,'ldr':!(0x2408+0x2*0xc40+-0x3c88),'srgb':!(0x4f*0x9+0x121f+-0x14e6)}],[jf,{'name':'DXT5_SRGBA','blockSize':0x10,'ldr':!(0xd*-0x239+0x221d+-0x538),'srgb':!(-0x22cd+-0xd45+0x1809*0x2)}],[Yf,{'name':'ETC2_SRGB','blockSize':0x8,'ldr':!(-0x1*0x1bf0+0xc*-0x267+0x38c4),'srgb':!(-0x2610+0x1*-0x40f+0x2a1f)}],[Kf,{'name':'ETC2_SRGBA','blockSize':0x10,'ldr':!(0xedc*-0x1+0x3d*0x65+-0x935),'srgb':!(-0x1*0x116f+0x2d7*0x6+-0x65*-0x1)}],[Zf,{'name':'ASTC_4x4_S'+'RGB','blockSize':0x10,'ldr':!(-0x83*0x47+-0x1*0x1aa1+0x2*0x1f7b),'srgb':!(-0x1*0x1cb7+0x67a+0x163d)}],[Qf,{'name':'BC7_SRGBA','blockSize':0x10,'ldr':!(-0x2*0x113d+-0x25fc+0x46*0x109),'srgb':!(0x1*-0x9+-0x125c+0x1265)}],[dp,{'name':'R8I','size':0x1,'isInt':!(-0xe34+-0x1a64+-0x2*-0x144c)}],[oy,{'name':'R8U','size':0x1,'isInt':!(0x2f8+-0xf*-0x172+-0x18a6)}],[fp,{'name':'R16I','size':0x2,'isInt':!(-0x170*0x12+-0x2*0x593+0x2506)}],[up,{'name':'R16U','size':0x2,'isInt':!(0x1295+-0x13f3+0x15e)}],[pp,{'name':'R32I','size':0x4,'isInt':!(0x198e+-0x1371+-0x139*0x5)}],[Ki,{'name':'R32U','size':0x4,'isInt':!(0xbbb*0x1+-0x1*-0x1312+-0x1ecd)}],[mp,{'name':'RG8I','size':0x2,'isInt':!(0x7c*-0x33+-0x1bd3+0x3487)}],[ly,{'name':'RG8U','size':0x2,'isInt':!(0x446+0x1066*-0x1+0xc20)}],[_p,{'name':'RG16I','size':0x4,'isInt':!(-0x2622*0x1+0x19d3+-0x89*-0x17)}],[gp,{'name':'RG16U','size':0x4,'isInt':!(0x8a4+0xe0+-0x984)}],[Sp,{'name':'RG32I','size':0x8,'isInt':!(0x210+0x5ad*0x6+0x2*-0x120f)}],[yp,{'name':'RG32U','size':0x8,'isInt':!(-0x627+-0x24ec+0x2b13)}],[vp,{'name':'RGBA8I','size':0x4,'isInt':!(-0x1*-0x67a+-0xd*-0x15f+-0x184d)}],[cy,{'name':'RGBA8U','size':0x4,'isInt':!(-0x1b38+0x6f9+0x143f)}],[xp,{'name':'RGBA16I','size':0x8,'isInt':!(-0x1e83+0x14fa+0x989)}],[nd,{'name':'RGBA16U','size':0x8,'isInt':!(0x14e+0x45e+0x1*-0x5ac)}],[Tp,{'name':'RGBA32I','size':0x10,'isInt':!(0x38b+0x9d2+-0xd5d)}],[Ue,{'name':'RGBA32U','size':0x10,'isInt':!(0x1202+0x180c+-0x2a0e)}]]),Ix=_0x76513f=>{var _0x46fd15;return((_0x46fd15=Nt['get'](_0x76513f))==null?void(0x10*0x86+-0x64*-0x59+-0x2b24):_0x46fd15['blockSize'])!==void(-0x6*-0xec+0x1*-0x1f4d+0x19c5);},fh=_0x44e523=>{var _0x25a0ba;return((_0x25a0ba=Nt['get'](_0x44e523))==null?void(-0x1eda+0x238c+-0x4b2):_0x25a0ba['srgb'])===!(-0x16c4+0xaa4+-0x10*-0xc2);},dn=_0x44ae7c=>{var _0x352fd9;return((_0x352fd9=Nt['get'](_0x44ae7c))==null?void(-0x13*0xac+0x134f*-0x2+0x3362*0x1):_0x352fd9['isInt'])===!(-0x131d+0x1fc0+0x1*-0xca3);},ld=_0x1fda65=>{var _0x5a7880;return((_0x5a7880=Nt['get'](_0x1fda65))==null?void(0x15e+0x294+-0x3f2):_0x5a7880['srgbFormat'])||_0x1fda65;},Lx=_0x11e92e=>{for(const [_0x330b7d,_0x11b609]of Nt)if(_0x11b609['srgbFormat']===_0x11e92e)return _0x330b7d;return _0x11e92e;},py=_0x1ea792=>{const _0x477207=Nt['get'](_0x1ea792);return!!(_0x477207!=null&&_0x477207['ldr']&&!(_0x477207!=null&&_0x477207['srgb']));},my=_0x178de3=>{switch(_0x178de3){case Ji:case Ye:case Xt:return Float32Array;case pp:case Sp:case Tp:return Int32Array;case Ki:case yp:case Ue:return Uint32Array;case fp:case _p:case xp:return Int16Array;case bp:case up:case gp:case nd:case Jh:case np:case ed:case od:case wp:case ui:case nt:return Uint16Array;case dp:case mp:case vp:return Int8Array;default:return Uint8Array;}},cd=-0xdb0+0x4*-0x459+-0x4*-0x7c5,hd=-0x1b78*-0x1+0x1*0x1685+-0x392*0xe,_y=-0xe2f+0x12*-0xad+0x1a5b,gy=-0x515+0x1309+0x1*-0xdf1,js=0xdb9+-0x2592*0x1+0x1*0x17dd,Er=-0x18f1+0x2e8*0xd+-0xcd2,oa=-0x2*-0x796+-0x585+-0x9a1,Me='POSITION',gs='NORMAL',yi='TANGENT',gi='BLENDWEIGH'+'T',us='BLENDINDIC'+'ES',Wt='COLOR',zm='TEXCOORD',is='TEXCOORD0',ba='TEXCOORD1',wl='TEXCOORD2',El='TEXCOORD3',bl='TEXCOORD4',Al='TEXCOORD5',Cl='TEXCOORD6',Pl='TEXCOORD7',Jf='ATTR0',uh='ATTR1',Ap='ATTR2',Cp='ATTR3',Pp='ATTR4',Rx='ATTR5',Ox='ATTR6',Fx='ATTR7',Ko='ATTR8',Zo='ATTR9',Nx='ATTR10',Mp='ATTR11',Dp='ATTR12',ph='ATTR13',Ip='ATTR14',Ln='ATTR15',Sy=-0x301*0xb+0x228f+0x2b*-0x9,xn=0x1*-0x793+0x1*-0x231a+0x2aad,kx=-0x4*-0x469+-0x2686+0x14e4,Ux=0x1f8e+-0x3*0xcb6+0x697,Bx=-0x1db5+0x84c*0x4+-0x376,$l=-0x3c1*0x4+0x1*-0x1b0f+0x2a13,yy=0xef8+-0x29*0x4a+-0x31d,Od=0x3*0x77f+0x573+-0xd*0x226,Ds='default',Zi='rgbm',mh='rgbe',Qo='rgbp',Jo='swizzleGGG'+'R',eu=-0x1b6b+0x205b+-0x4ef,Pr=-0x1f6f*0x1+0x1ad7*-0x1+0x3a48,vy=-0x1971+-0x362*0x4+0x26fc,xy='2d',zx=0xc45+-0x17e9+0xba4,Vx='none',tu='cube',Vm='equirect',Gx='octahedral',Fe='glsl',it='wgsl',dd=0x16dc+-0x2607+0xf2b,la=-0x22e8+0x18b8+0xa31*0x1,fd=0x203e+-0x1a82+-0x2dd*0x2,Ml=0xf24+0x20df+-0x3000,Ty=-0x236+-0x14e4+0x171e,el=-0x1bc7*0x1+-0x2*-0x121d+-0x2*0x437,Ve=0x1005*0x1+0x1992+-0x2991*0x1,Tn=-0x1*0x25c9+-0x1563+-0x874*-0x7,_a=0x1*0x6f7+0x16*0xe9+-0x1afc,Xs=-0x15*0x53+-0x413*-0x4+-0x97b,ga=-0x1d71*0x1+0x2333+-0x5bf,ds=-0x1eb2+-0x14e*-0x1a+-0x19b*0x2,Rn=0x2ff*-0x5+-0x16*-0x26+0xbbc,ca=-0x2*0xd97+0x1*-0x10bb+0x2bef,ha=0x17e*0x8+0x1aa8*0x1+-0x9*0x449,da=-0x112a+-0x1*0x14a1+-0x1a5*-0x17,tl=0x623+-0x14b2+0xe98,sl=-0x10*-0x61+0x1c60+-0x2266,il=-0x1db5+0x2645+-0x1*0x885,_h=-0x548*-0x2+0x2*0x2e8+-0x1054,On=-0xaa8+0x649*-0x5+-0x1*-0x2a22,li=-0x13ab+-0x4ac*-0x6+-0x2c5*0x3,Hx=0x21c6+-0x4ca+-0x1ced,Wx=-0x1d*-0x2c+-0x2*-0x86d+-0x15c6,ud=0x26be+0x1*0x17b1+0x3*-0x14ca,$x=-0x1*0x20a1+0xdf8*0x2+0x4c3,Xx=-0x551*-0x1+0x1*0x26ef+-0x2c2d,qx=0x1782+-0x8a4+-0xeca*0x1,pd=-0x1312+0x802+0xb25,md=-0x4c0+0x2*0x6e2+-0x477*0x2,Lp=0x10*-0xc5+-0x3fb*-0x4+-0x1*0x385,wy=0x3*0x732+0x2f2*-0x5+-0x6c4,jx=-0x3*0x77+0xc6a+0xc*-0xe9,Fn=0x1d2a+0x663+-0x2373,Nn=0x37c+0xcaa+-0x100b,kn=0x1ba1+0x2384+-0x5bb*0xb,Un=-0x1ee*0x2+0x1ba1+-0x17a8,Bn=0x25f7+0x24d7+0x2*-0x2558,_d=0x559+0x584+-0xabe,gd=0x531+0x772+0xc83*-0x1,zn=0x8cb+0x185*0x7+0x1*-0x134d,Sd=0xc4a+-0xe3c+0x214*0x1,yd=-0x5ed+0x2*0x1311+-0x2012,Vn=-0x1c2e+0x22ce+0x2*-0x33e,vd=0x215b+-0x1a4b+-0x6eb,xd=0x20d3+0x162a+-0x36d7,gh=0xd5d+-0xa7f+-0x2b7,Rp=0x1fa3+0x3*0xbb1+-0x428e,Op=-0x2*-0x3c+-0x124e*0x2+0x1*0x244d,Yx=0x1d6*-0x9+-0x1f8*-0xd+0xc*-0xbe,Kx=-0xafb+0x1*0x245a+0x1*-0x1934,Zx=0x52*-0x5f+0xb7*-0x5+0x222d,Qx=0xd*0xa+-0x1660+0x160b,Jx=0xd*-0x16d+0x173*0xc+0x153,eT=-0x21b+0x1f64+-0x1d1a,tT=-0x2*0x615+0x1*0x23a7+-0x174d,sT=-0x7ff*-0x4+-0x12f4+-0xcd7*0x1,Ey=['bool','int','float','vec2','vec3','vec4','ivec2','ivec3','ivec4','bvec2','bvec3','bvec4','mat2','mat3','mat4','sampler2D','samplerCub'+'e','','sampler2DS'+'hadow','samplerCub'+'eShadow','sampler3D','','','','','sampler2DA'+'rray','uint','uvec2','uvec3','uvec4','','','','','','','','','','','','','isampler2D','usampler2D','isamplerCu'+'be','usamplerCu'+'be','isampler3D','usampler3D','isampler2D'+'Array','usampler2D'+'Array'],iT=[['bool'],['i32'],['f32'],['vec2f','vec2<f32>'],['vec3f','vec3<f32>'],['vec4f','vec4<f32>'],['vec2i','vec2<i32>'],['vec3i','vec3<i32>'],['vec4i','vec4<i32>'],['vec2<bool>'],['vec3<bool>'],['vec4<bool>'],['mat2x2f','mat2x2<f32'+'>'],['mat3x3f','mat3x3<f32'+'>'],['mat4x4f','mat4x4<f32'+'>'],['texture_2d'+'<f32>'],['texture_cu'+'be<f32>'],['array<f32>'],['texture_de'+'pth_2d'],['texture_de'+'pth_cube'],['texture_3d'+'<f32>'],['array<vec2'+'<f32>>'],['array<vec3'+'<f32>>'],['array<vec4'+'<f32>>'],['array<mat4'+'x4<f32>>'],['texture_2d'+'_array<f32'+'>'],['u32'],['vec2u','vec2<u32>'],['vec3u','vec3<u32>'],['vec4u','vec4<u32>'],['array<i32>'],['array<u32>'],['array<bool'+'>'],['array<vec2'+'i>','array<vec2'+'<i32>>'],['array<vec2'+'u>','array<vec2'+'<u32>>'],['array<vec2'+'b>','array<vec2'+'<bool>>'],['array<vec3'+'i>','array<vec3'+'<i32>>'],['array<vec3'+'u>','array<vec3'+'<u32>>'],['array<vec3'+'b>','array<vec3'+'<bool>>'],['array<vec4'+'i>','array<vec4'+'<i32>>'],['array<vec4'+'u>','array<vec4'+'<u32>>'],['array<vec4'+'b>','array<vec4'+'<bool>>'],['texture_2d'+'<i32>'],['texture_2d'+'<u32>'],['texture_cu'+'be<i32>'],['texture_cu'+'be<u32>'],['texture_3d'+'<i32>'],['texture_3d'+'<u32>'],['texture_2d'+'_array<i32'+'>'],['texture_2d'+'_array<u32'+'>']],rT=new Map();iT['forEach']((_0x426bc8,_0x4f774f)=>{_0x426bc8['forEach'](_0x47213c=>rT['set'](_0x47213c,_0x4f774f));});const aT='webgl2',Fp=0x5*-0x7b5+0xa97+0x1bf3,by=0x1459+-0xbc1+-0x896,nT=0x2013+-0x1*-0x2d7+-0x22e6,oT='ldr',Ay=0x4*0x143+0xe*-0x90+0x91*0x5,Cy=-0x1*0xa2b+0x114c+-0x71f,Py=0xa4c+-0x13e3+-0x99b*-0x1,My=0x19d1+-0x1883+-0x146*0x1,Dy=-0x13*0x194+0x6*0x5e7+-0x55e,Iy=0x1*0x1499+0x12*0x1bb+-0x1*0x339f,Ly=0x2706+-0x154d+-0x3*0x5d3,Ry=0x48*-0x67+0x365+-0x5*-0x537,lT=-0x6c7*-0x3+0x23e4+0x373a*-0x1,rl=-0x1e29*0x1+0x303*-0xb+0x3f4a,Oy=-0x1c1*-0x5+0x4*-0x1ed+-0x110,su=0x531+-0x989*0x2+0x4f*0x2d,Np='default',wn=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Uint16Array],No=[0x883*-0x1+0x2225*-0x1+-0xa3*-0x43,-0xd8d+-0x3ae*0xa+0x325a,-0x1*-0x2255+0xe8a+0x7*-0x6fb,-0x1d01+-0x23ab+0x40ae,0xa*0x178+-0x1228+-0x2*-0x1be,0x810+-0x1*0xd8a+0x4a*0x13,-0x1bf2+-0x19fb*0x1+-0x1*-0x35f1,0x21a4*-0x1+-0x123c+-0x19f1*-0x2],cT=['INT8','UINT8','INT16','UINT16','INT32','UINT32','FLOAT32','FLOAT16'],Sh=[Uint8Array,Uint16Array,Uint32Array],hT=[0x12cd*0x2+-0xa3e+-0x1b5b,-0xb7c+0x17e0+0x1*-0xc62,-0x5ef*-0x6+-0x7d6+-0x1bc0],Fy=new Map([['float','f32'],['vec2','vec2f'],['vec3','vec3f'],['vec4','vec4f'],['int','i32'],['ivec2','vec2i'],['ivec3','vec3i'],['ivec4','vec4i'],['uint','u32'],['uvec2','vec2u'],['uvec3','vec3u'],['uvec4','vec4u']]),Le={};Le[Me]=-0x24a4+0x65*-0x2b+0x359b,Le[gs]=-0x796*0x3+0x1ae0+-0x41d,Le[gi]=0x22dc+0x19a2+-0x3c7c,Le[us]=-0x1fdb+0x1a*0x89+0x11f4,Le[Wt]=0x6b9+-0x8ef+0x23a,Le[is]=0x1ed1+0x3a4+0x227*-0x10,Le[ba]=0x20b1+-0x98f+-0x171c,Le[wl]=-0x2e*-0x33+0x7fc+-0x111f,Le[El]=0x76e*0x1+-0x594+-0x2*0xe9,Le[bl]=-0x1*0x178b+-0xee1+0x37f*0xb,Le[Al]=-0x14c4+0x2643+-0x29*0x6d,Le[Cl]=-0x24c1+-0x18*-0x37+0x51*0x64,Le[Pl]=0x2030+0x1e1*-0x1+-0x7f*0x3d,Le[yi]=0x1456+0x1802+-0x1ed*0x17,Le[Jf]=0x127*0x13+-0xe5*0xb+-0xc0e,Le[uh]=-0x1*-0x1c9b+-0x1*0x4ff+0x179b*-0x1,Le[Ap]=-0x5a9+-0x1060+-0x160b*-0x1,Le[Cp]=0x431*-0x1+0x4b3*-0x6+0x2066*0x1,Le[Pp]=-0x651+0x1609+-0x3ed*0x4,Le[Rx]=0x9cd+-0xcdf+0x317,Le[Ox]=0x5b3*0x4+-0x347*0x3+0x1*-0xcf1,Le[Fx]=-0xc1+0x1*0xf64+-0x74e*0x2,Le[Ko]=-0x970+-0x2164+0x2adc,Le[Zo]=-0x4*0x63d+0x20dd+-0x7e0,Le[Nx]=0x18cc+0x1af*0x2+-0x1c20,Le[Mp]=0xef6+0x13b4+-0x229f,Le[Dp]=-0x12*0x1b4+0xa60+-0xa2a*-0x2,Le[ph]=-0x2000+0x12cc+-0x3*-0x46b,Le[Ip]=-0x3*-0xc29+-0x1*0xa1d+-0x1a50,Le[Ln]=0x3b7*0x5+0x3*-0x5cb+-0x123;const mr=class mr{static['clearGpuMa'+'rkers'](){mr['markers']['length']=-0x1bb5+0x1b39*-0x1+-0x1*-0x36ee;}static['pushGpuMar'+'ker'](_0x1612e6,_0xe6587a){mr['markers']['push'](_0xe6587a),_0x1612e6['pushMarker'](_0xe6587a);}static['popGpuMark'+'er'](_0x399a21){mr['markers']['length']&&mr['markers']['pop'](),_0x399a21['popMarker']();}static['toString'](){return mr['markers']['join']('\x20|\x20');}};h(mr,'markers',[]);let Q=mr,dT=-0x1602+0x1*0xe7d+0x785;class Td{constructor(_0x35a434,_0x1becbd){h(this,'slot',-(0x1ce2+0x113a+-0x2e1b)),h(this,'scopeId',null),(this['name']=_0x35a434,this['visibility']=_0x1becbd);}}class kp extends Td{}class fT extends Td{constructor(_0x4db73a,_0x112144,_0x370fdd=!(0x1503+0x16*-0x175+0xb0c)){super(_0x4db73a,_0x112144),h(this,'format',''),(this['readOnly']=_0x370fdd,w['assert'](_0x370fdd||!(_0x112144&Fp),'Storage\x20bu'+'ffer\x20can\x20o'+'nly\x20be\x20use'+'d\x20in\x20read-'+'only\x20mode\x20'+'in\x20SHADERS'+'TAGE_VERTE'+'X.'));}}class Gm extends Td{constructor(_0x1d30a2,_0x4c22d7,_0x43d8f2=xy,_0x4c224c=zx,_0x484442=!(-0x25a0+0x75*0x3+0x2441*0x1),_0x44e2f4=null){super(_0x1d30a2,_0x4c22d7),this['textureDim'+'ension']=_0x43d8f2,this['sampleType']=_0x4c224c,this['hasSampler']=_0x484442,this['samplerNam'+'e']=_0x44e2f4??_0x1d30a2+'_sampler';}}class uT extends Td{constructor(_0x14987f,_0x49439f=Ne,_0x2faf4e=xy,_0x4e58be=!(0x1557+-0x2629*0x1+0x10d2),_0x4223db=!(0x65a+0x26c8*-0x1+0x206f)){super(_0x14987f,nT),this['format']=_0x49439f,this['textureDim'+'ension']=_0x2faf4e,this['write']=_0x4e58be,this['read']=_0x4223db;}}class Ny{constructor(_0x5eb393,_0x1c6c73){h(this,'uniformBuf'+'ferFormats',[]),h(this,'textureFor'+'mats',[]),h(this,'storageTex'+'tureFormat'+'s',[]),h(this,'storageBuf'+'ferFormats',[]),(this['id']=dT++,Ea['setName'](this,'BindGroupF'+'ormat_'+this['id']),w['assert'](_0x1c6c73));let _0x625066=-0x1f*-0x1+-0xd*-0x1b1+0x11b*-0x14;_0x1c6c73['forEach'](_0x1f3475=>{_0x1f3475['slot']=_0x625066++,_0x1f3475 instanceof Gm&&_0x1f3475['hasSampler']&&_0x625066++,_0x1f3475 instanceof kp?this['uniformBuf'+'ferFormats']['push'](_0x1f3475):_0x1f3475 instanceof Gm?this['textureFor'+'mats']['push'](_0x1f3475):_0x1f3475 instanceof uT?this['storageTex'+'tureFormat'+'s']['push'](_0x1f3475):_0x1f3475 instanceof fT?this['storageBuf'+'ferFormats']['push'](_0x1f3475):w['assert']('Invalid\x20bi'+'nd\x20format',_0x1f3475);}),this['device']=_0x5eb393;const _0x4e5354=_0x5eb393['scope'];this['bufferForm'+'atsMap']=new Map(),this['uniformBuf'+'ferFormats']['forEach']((_0xdad105,_0x562f1f)=>this['bufferForm'+'atsMap']['set'](_0xdad105['name'],_0x562f1f)),this['textureFor'+'matsMap']=new Map(),this['textureFor'+'mats']['forEach']((_0x3cd71b,_0x1f9c2)=>{this['textureFor'+'matsMap']['set'](_0x3cd71b['name'],_0x1f9c2),_0x3cd71b['scopeId']=_0x4e5354['resolve'](_0x3cd71b['name']);}),this['storageTex'+'tureFormat'+'sMap']=new Map(),this['storageTex'+'tureFormat'+'s']['forEach']((_0x4c1b61,_0x3cc976)=>{this['storageTex'+'tureFormat'+'sMap']['set'](_0x4c1b61['name'],_0x3cc976),_0x4c1b61['scopeId']=_0x4e5354['resolve'](_0x4c1b61['name']);}),this['storageBuf'+'ferFormats'+'Map']=new Map(),this['storageBuf'+'ferFormats']['forEach']((_0x4d7465,_0x493f6f)=>{this['storageBuf'+'ferFormats'+'Map']['set'](_0x4d7465['name'],_0x493f6f),_0x4d7465['scopeId']=_0x4e5354['resolve'](_0x4d7465['name']);}),this['impl']=_0x5eb393['createBind'+'GroupForma'+'tImpl'](this),w['trace'](K0,'Alloc:\x20Id\x20'+this['id']+(',\x20while\x20re'+'ndering\x20[')+Q['toString']()+']',this);}['destroy'](){this['impl']['destroy']();}['getTexture'](_0x121e1b){const _0x4dc47a=this['textureFor'+'matsMap']['get'](_0x121e1b);return _0x4dc47a!==void(-0x18cd*-0x1+-0x1e89+0x2de*0x2)?this['textureFor'+'mats'][_0x4dc47a]:null;}['getStorage'+'Texture'](_0x2d5931){const _0x2f44f1=this['storageTex'+'tureFormat'+'sMap']['get'](_0x2d5931);return _0x2f44f1!==void(0x323*0x1+-0x1*-0x1953+-0x1c76)?this['storageTex'+'tureFormat'+'s'][_0x2f44f1]:null;}['loseContex'+'t'](){}}class Kt{constructor(){h(this,'_cache',new Map());}['get'](_0x2e7114,_0x26b288){return this['_cache']['has'](_0x2e7114)||(this['_cache']['set'](_0x2e7114,_0x26b288()),_0x2e7114['on']('destroy',()=>{this['remove'](_0x2e7114);}),_0x2e7114['on']('devicelost',()=>{var _0x4d0501,_0x218d49;(_0x218d49=(_0x4d0501=this['_cache']['get'](_0x2e7114))==null?void(-0x2ad*-0xb+0x342+-0x20b1):_0x4d0501['loseContex'+'t'])==null||_0x218d49['call'](_0x4d0501,_0x2e7114);})),this['_cache']['get'](_0x2e7114);}['remove'](_0x5f3909){var _0x2f3dab,_0x33aad8;(_0x33aad8=(_0x2f3dab=this['_cache']['get'](_0x5f3909))==null?void(0x4a1*0x3+-0x43*0x8c+0x16c1):_0x2f3dab['destroy'])==null||_0x33aad8['call'](_0x2f3dab,_0x5f3909),this['_cache']['delete'](_0x5f3909);}}class Xi{static['calcLevelD'+'imension'](_0x30aed4,_0x58b8aa){return Math['max'](_0x30aed4>>_0x58b8aa,-0xbea*-0x3+0x28d*0xd+-0x2*0x2273);}static['calcMipLev'+'elsCount'](_0x5c1bfc,_0x4b7de3,_0x1cd4de=0x1ab6+0x1b37+-0x35ec){return 0x5b3+-0x5cf+0x1d+Math['floor'](Math['log2'](Math['max'](_0x5c1bfc,_0x4b7de3,_0x1cd4de)));}static['calcLevelG'+'puSize'](_0x354899,_0x17733b,_0x2a732,_0x405794){var _0xdca126;const _0x58b687=Nt['get'](_0x405794);w['assert'](_0x58b687!==void(-0xff1*0x1+-0x197b+-0x296c*-0x1),'Invalid\x20pi'+'xel\x20format'+'\x20'+_0x405794);const _0x4681fb=((_0xdca126=Nt['get'](_0x405794))==null?void(0xc19*-0x1+-0x1606*0x1+0x6d3*0x5):_0xdca126['size'])??0xae7*0x2+0x14ee+-0x2abc*0x1;if(_0x4681fb>-0x153b+-0x1c*0x18+0x17db)return _0x354899*_0x17733b*_0x2a732*_0x4681fb;const _0x436d04=_0x58b687['blockSize']??0x1*0x2c5+-0x1*-0x2458+0x13*-0x20f;let _0x3717f1=Math['floor']((_0x354899+(0x1ecb*-0x1+0x1*0x134f+0xb7f*0x1))/(-0xc9e+-0xd13+0x19b5));const _0x1f63a8=Math['floor']((_0x17733b+(0x789+-0xdeb+0x665))/(0x10b1*0x1+0xa04+-0x1ab1)),_0x1a8f66=Math['floor']((_0x2a732+(0x16f*0x7+-0x108f+-0x7*-0xef))/(-0x305*-0x6+-0x1*0x140f+-0x1*-0x1f5));return(_0x405794===xl||_0x405794===Tl)&&(_0x3717f1=Math['max'](Math['floor'](_0x3717f1/(0xd4*-0x29+0x171d+0xad9)),0x1ab3+0x9f5+-0x24a7)),_0x3717f1*_0x1f63a8*_0x1a8f66*_0x436d04;}static['calcGpuSiz'+'e'](_0x163128,_0x48f8f2,_0x4338a6,_0x48980d,_0x290659,_0x362434){let _0xd94e19=0x2*0xff3+-0xfc*0x2+-0x1dee;for(;_0xd94e19+=Xi['calcLevelG'+'puSize'](_0x163128,_0x48f8f2,_0x4338a6,_0x48980d),!(!_0x290659||_0x163128===-0xf0c+-0x1933+0x284*0x10&&_0x48f8f2===-0x57*-0x3e+-0x591+-0x1f*0x80&&_0x4338a6===-0x7c4+0x2*0x38a+0xb1);)_0x163128=Math['max'](_0x163128>>-0x12c4+-0x1170+0x2c9*0xd,0x67*0x57+-0x48a+-0x1e76),_0x48f8f2=Math['max'](_0x48f8f2>>0x6*0x3c1+-0x10eb+0x2cd*-0x2,0x9f3*0x2+-0x83*0xf+0x2*-0x61c),_0x4338a6=Math['max'](_0x4338a6>>0x1*0x137c+-0x1d7d+0xa02,0x1*-0x1061+0x8*0x1ff+0x6a);return _0xd94e19*(_0x362434?0x1359+-0x1*-0x25a9+-0x38fc:0x93*-0x9+0x17*-0x11b+-0x175*-0x15);}}let pT=0x14b4+-0x2*-0x1217+0x97b*-0x6;class _e{constructor(_0x563357,_0x52e842={}){h(this,'name'),h(this,'_gpuSize',0x12d8+-0x2065*-0x1+0xd*-0x3f1),h(this,'id',pT++),h(this,'_invalid',!(0x24d*0xa+-0x366+-0x139b)),h(this,'_lockedLev'+'el',-(-0xd35+-0x1bd3+0x2909)),h(this,'_lockedMod'+'e',$l),h(this,'renderVers'+'ionDirty',-0x229f*0x1+0x3*0xa27+0x52*0xd),h(this,'_storage',!(-0x8e*-0x17+0x133f+-0x2000)),h(this,'_numLevels',-0x1*-0xe89+0x113e*-0x1+0x2b5),h(this,'_numLevels'+'Requested');var _0x132be1;this['device']=_0x563357,w['assert'](this['device'],'Texture\x20co'+'nstructor\x20'+'requires\x20a'+'\x20graphicsD'+'evice\x20to\x20b'+'e\x20valid'),w['assert'](!_0x52e842['width']||Number['isInteger'](_0x52e842['width']),'Texture\x20wi'+'dth\x20must\x20b'+'e\x20an\x20integ'+'er\x20number,'+'\x20got',_0x52e842),w['assert'](!_0x52e842['height']||Number['isInteger'](_0x52e842['height']),'Texture\x20he'+'ight\x20must\x20'+'be\x20an\x20inte'+'ger\x20number'+',\x20got',_0x52e842),w['assert'](!_0x52e842['depth']||Number['isInteger'](_0x52e842['depth']),'Texture\x20de'+'pth\x20must\x20b'+'e\x20an\x20integ'+'er\x20number,'+'\x20got',_0x52e842),this['name']=_0x52e842['name']??'',this['_width']=Math['floor'](_0x52e842['width']??-0xc25*0x1+-0x6*-0x570+-0x1477),this['_height']=Math['floor'](_0x52e842['height']??-0x1*0x246b+0x3d1+0x209e),this['_format']=_0x52e842['format']??Ne,this['_compresse'+'d']=Ix(this['_format']),this['_integerFo'+'rmat']=dn(this['_format']),this['_integerFo'+'rmat']&&(_0x52e842['minFilter']=Te,_0x52e842['magFilter']=Te),this['_volume']=_0x52e842['volume']??!(0x1323+0x34*-0x2f+0x199*-0x6),this['_depth']=Math['floor'](_0x52e842['depth']??-0x1a26+0xb74+0x1*0xeb3),this['_arrayLeng'+'th']=Math['floor'](_0x52e842['arrayLengt'+'h']??-0x1*0x448+-0x260e+0x2a56),this['_storage']=_0x52e842['storage']??!(0x2b*-0x3f+-0x1dd6+0x286c),this['_cubemap']=_0x52e842['cubemap']??!(-0x17*-0xd4+-0x1*-0x1ade+-0x2de9),this['_flipY']=_0x52e842['flipY']??!(0x246a+0x8b3*0x1+-0x2d1c),this['_premultip'+'lyAlpha']=_0x52e842['premultipl'+'yAlpha']??!(-0x11e5*0x1+-0x50*0x25+0x1d76),this['_mipmaps']=_0x52e842['mipmaps']??!(-0x1*0x241+0xb4f+-0x2*0x487),this['_numLevels'+'Requested']=_0x52e842['numLevels'],_0x52e842['numLevels']!==void(-0x8f6*0x1+-0x1668+-0x6e*-0x49)&&(this['_numLevels']=_0x52e842['numLevels']),this['_updateNum'+'Level'](),this['_minFilter']=_0x52e842['minFilter']??ma,this['_magFilter']=_0x52e842['magFilter']??vt,this['_anisotrop'+'y']=_0x52e842['anisotropy']??-0x1e1*-0x4+-0xd8+-0x6ab,this['_addressU']=_0x52e842['addressU']??yt,this['_addressV']=_0x52e842['addressV']??yt,this['_addressW']=_0x52e842['addressW']??yt,this['_compareOn'+'Read']=_0x52e842['compareOnR'+'ead']??!(0x1b95+-0x1eb+-0x19a9*0x1),this['_compareFu'+'nc']=_0x52e842['compareFun'+'c']??hh,this['_type']=_0x52e842['type']??Ds,w['assert'](!_0x52e842['hasOwnProp'+'erty']('rgbm'),'Use\x20option'+'s.type.'),w['assert'](!_0x52e842['hasOwnProp'+'erty']('swizzleGGG'+'R'),'Use\x20option'+'s.type.'),this['projection']=Vx,this['_cubemap']?this['projection']=tu:_0x52e842['projection']&&_0x52e842['projection']!==tu&&(this['projection']=_0x52e842['projection']),this['profilerHi'+'nt']=_0x52e842['profilerHi'+'nt']??0x1d6+-0x1c51+0x1a7b,this['_levels']=_0x52e842['levels'];const _0x5a2c83=!!_0x52e842['levels'];this['_levels']||this['_clearLeve'+'ls'](),this['recreateIm'+'pl'](_0x5a2c83),_0x563357['textures']['push'](this),w['trace'](Dm,'Alloc:\x20Id\x20'+this['id']+'\x20'+this['name']+':\x20'+this['width']+'x'+this['height']+'\x20['+((_0x132be1=Nt['get'](this['format']))==null?void(-0x24a4+-0x25*-0x9f+0xda9):_0x132be1['name'])+']'+(this['cubemap']?'[Cubemap]':'')+(this['volume']?'[Volume]':'')+(this['array']?'[Array]':'')+('[MipLevels'+':')+this['numLevels']+']',this);}['destroy'](){w['trace'](Dm,'DeAlloc:\x20I'+'d\x20'+this['id']+'\x20'+this['name']);const _0xc3f8ce=this['device'];if(_0xc3f8ce){const _0xc7c90a=_0xc3f8ce['textures']['indexOf'](this);_0xc7c90a!==-(-0x2545+0x56*0x2e+0xe*0x18f)&&_0xc3f8ce['textures']['splice'](_0xc7c90a,-0x1d*0x50+-0x371*0x2+-0x3*-0x551),_0xc3f8ce['scope']['removeValu'+'e'](this),this['impl']['destroy'](_0xc3f8ce),this['adjustVram'+'SizeTracki'+'ng'](_0xc3f8ce['_vram'],-this['_gpuSize']),this['_levels']=null,this['device']=null;}}['recreateIm'+'pl'](_0x2462c3=!(0x24a1+-0x1*-0x1f66+-0x4407)){var _0x4902bc;const {device:_0x32297b}=this;(_0x4902bc=this['impl'])==null||_0x4902bc['destroy'](_0x32297b),this['impl']=null,this['impl']=_0x32297b['createText'+'ureImpl'](this),this['dirtyAll'](),_0x2462c3&&this['upload']();}['_clearLeve'+'ls'](){this['_levels']=this['_cubemap']?[[null,null,null,null,null,null]]:[null];}['resize'](_0x1edaa1,_0x3ea025,_0x5d7740=-0x15f4+-0x990+0x1f85){const _0x59afe9=this['device'];this['adjustVram'+'SizeTracki'+'ng'](_0x59afe9['_vram'],-this['_gpuSize']),this['impl']['destroy'](_0x59afe9),this['_clearLeve'+'ls'](),this['_width']=Math['floor'](_0x1edaa1),this['_height']=Math['floor'](_0x3ea025),this['_depth']=Math['floor'](_0x5d7740),this['_updateNum'+'Level'](),this['impl']=_0x59afe9['createText'+'ureImpl'](this),this['dirtyAll']();}['loseContex'+'t'](){this['impl']['loseContex'+'t'](),this['dirtyAll']();}['adjustVram'+'SizeTracki'+'ng'](_0x581ecc,_0x401287){w['trace'](X0,this['id']+'\x20'+this['name']+'\x20size:\x20'+_0x401287+('\x20vram.text'+'ure:\x20')+_0x581ecc['tex']+'\x20=>\x20'+(_0x581ecc['tex']+_0x401287)),_0x581ecc['tex']+=_0x401287,this['profilerHi'+'nt']===eu?_0x581ecc['texShadow']+=_0x401287:this['profilerHi'+'nt']===Pr?_0x581ecc['texAsset']+=_0x401287:this['profilerHi'+'nt']===vy&&(_0x581ecc['texLightma'+'p']+=_0x401287);}['propertyCh'+'anged'](_0x1c9de6){this['impl']['propertyCh'+'anged'](_0x1c9de6),this['renderVers'+'ionDirty']=this['device']['renderVers'+'ion'];}['_updateNum'+'Level'](){const _0x5aa947=this['mipmaps']?Xi['calcMipLev'+'elsCount'](this['width'],this['height']):-0x781*0x1+-0x97*-0x34+-0x172a,_0x53b2d2=this['_numLevels'+'Requested'];_0x53b2d2!==void(-0x1fbe+-0x8f8+0x1b*0x182)&&_0x53b2d2>_0x5aa947&&w['warn']('Texture#nu'+'mLevels:\x20r'+'equested\x20m'+'ip\x20level\x20c'+'ount\x20is\x20gr'+'eater\x20than'+'\x20the\x20maxim'+'um\x20possibl'+'e,\x20will\x20be'+'\x20clamped\x20t'+'o',_0x5aa947,this),this['_numLevels']=Math['min'](_0x53b2d2??_0x5aa947,_0x5aa947),this['_mipmaps']=this['_numLevels']>0x2007+0x1*0x11d1+0x1*-0x31d7;}get['lockedMode'](){return this['_lockedMod'+'e'];}set['minFilter'](_0x4d67ce){this['_minFilter']!==_0x4d67ce&&(dn(this['_format'])?w['warn']('Texture#mi'+'nFilter:\x20m'+'inFilter\x20p'+'roperty\x20ca'+'nnot\x20be\x20ch'+'anged\x20on\x20a'+'n\x20integer\x20'+'texture,\x20w'+'ill\x20remain'+'\x20FILTER_NE'+'AREST',this):(this['_minFilter']=_0x4d67ce,this['propertyCh'+'anged'](Ay)));}get['minFilter'](){return this['_minFilter'];}set['magFilter'](_0x3a228a){this['_magFilter']!==_0x3a228a&&(dn(this['_format'])?w['warn']('Texture#ma'+'gFilter:\x20m'+'agFilter\x20p'+'roperty\x20ca'+'nnot\x20be\x20ch'+'anged\x20on\x20a'+'n\x20integer\x20'+'texture,\x20w'+'ill\x20remain'+'\x20FILTER_NE'+'AREST',this):(this['_magFilter']=_0x3a228a,this['propertyCh'+'anged'](Cy)));}get['magFilter'](){return this['_magFilter'];}set['addressU'](_0x533339){this['_addressU']!==_0x533339&&(this['_addressU']=_0x533339,this['propertyCh'+'anged'](Py));}get['addressU'](){return this['_addressU'];}set['addressV'](_0x351394){this['_addressV']!==_0x351394&&(this['_addressV']=_0x351394,this['propertyCh'+'anged'](My));}get['addressV'](){return this['_addressV'];}set['addressW'](_0x329d65){if(!this['_volume']){w['warn']('pc.Texture'+'#addressW:'+'\x20Can\x27t\x20set'+'\x20W\x20address'+'ing\x20mode\x20f'+'or\x20a\x20non-3'+'D\x20texture.');return;}_0x329d65!==this['_addressW']&&(this['_addressW']=_0x329d65,this['propertyCh'+'anged'](Dy));}get['addressW'](){return this['_addressW'];}set['compareOnR'+'ead'](_0x37d5ca){this['_compareOn'+'Read']!==_0x37d5ca&&(this['_compareOn'+'Read']=_0x37d5ca,this['propertyCh'+'anged'](Iy));}get['compareOnR'+'ead'](){return this['_compareOn'+'Read'];}set['compareFun'+'c'](_0x4d9bad){this['_compareFu'+'nc']!==_0x4d9bad&&(this['_compareFu'+'nc']=_0x4d9bad,this['propertyCh'+'anged'](Ly));}get['compareFun'+'c'](){return this['_compareFu'+'nc'];}set['anisotropy'](_0x836b49){this['_anisotrop'+'y']!==_0x836b49&&(this['_anisotrop'+'y']=_0x836b49,this['propertyCh'+'anged'](Ry));}get['anisotropy'](){return this['_anisotrop'+'y'];}set['mipmaps'](_0x3a9ff0){this['_mipmaps']!==_0x3a9ff0&&(this['device']['isWebGPU']?w['warn']('Texture#mi'+'pmaps:\x20mip'+'map\x20proper'+'ty\x20is\x20curr'+'ently\x20not\x20'+'allowed\x20to'+'\x20be\x20change'+'d\x20on\x20WebGP'+'U,\x20create\x20'+'the\x20textur'+'e\x20appropri'+'ately.',this):dn(this['_format'])?w['warn']('Texture#mi'+'pmaps:\x20mip'+'map\x20proper'+'ty\x20cannot\x20'+'be\x20changed'+'\x20on\x20an\x20int'+'eger\x20textu'+'re,\x20will\x20r'+'emain\x20fals'+'e',this):this['_mipmaps']=_0x3a9ff0,_0x3a9ff0&&(this['_needsMipm'+'apsUpload']=!(-0xe71+0x2*-0x27a+0x1365)));}get['mipmaps'](){return this['_mipmaps'];}get['numLevels'](){return this['_numLevels'];}get['storage'](){return this['_storage'];}get['width'](){return this['_width'];}get['height'](){return this['_height'];}get['depth'](){return this['_depth'];}get['format'](){return this['_format'];}get['cubemap'](){return this['_cubemap'];}get['gpuSize'](){const _0x4deb64=this['pot']&&this['_mipmaps']&&!(this['_compresse'+'d']&&this['_levels']['length']===-0x1c83+0x2a3+0x19*0x109);return Xi['calcGpuSiz'+'e'](this['_width'],this['_height'],this['_depth'],this['_format'],_0x4deb64,this['_cubemap']);}get['array'](){return this['_arrayLeng'+'th']>-0x1*0x1b2d+-0x3d3+0x1f00;}get['arrayLengt'+'h'](){return this['_arrayLeng'+'th'];}get['volume'](){return this['_volume'];}set['type'](_0x48ffbb){this['_type']!==_0x48ffbb&&(this['_type']=_0x48ffbb,this['device']['_shadersDi'+'rty']=!(-0x1*-0x20f1+-0x7f0+-0x1*0x1901));}get['type'](){return this['_type'];}set['srgb'](_0x4ed5b0){var _0x300d81,_0x30ec98,_0x1fff74,_0x2da556;const _0x44d146=fh(this['format']);if(_0x4ed5b0!==_0x44d146){if(_0x4ed5b0){const _0x40fb37=ld(this['format']);this['_format']!==_0x40fb37&&(w['warn']('Switching\x20'+'format\x20of\x20'+'texture\x20\x27'+this['name']+('\x27\x20to\x20sRGB\x20'+'equivalent'+':\x20')+((_0x300d81=Nt['get'](this['format']))==null?void(-0x3da+0x37e+0x2e*0x2):_0x300d81['name'])+'\x20->\x20'+((_0x30ec98=Nt['get'](_0x40fb37))==null?void(-0x1b29+-0xb81+0xca*0x31):_0x30ec98['name'])+('.\x20This\x20is\x20'+'an\x20expensi'+'ve\x20operati'+'on,\x20and\x20th'+'e\x20texture\x20'+'should\x20be\x20'+'created\x20us'+'ing\x20the\x20ri'+'ght\x20format'+'\x20to\x20avoid\x20'+'this.'),this),this['_format']=_0x40fb37,this['recreateIm'+'pl'](),this['device']['_shadersDi'+'rty']=!(0x2*-0x9b9+-0x5*0xf8+-0xc25*-0x2));}else{const _0x199d36=Lx(this['format']);this['_format']!==_0x199d36&&(w['warn']('Switching\x20'+'format\x20of\x20'+'texture\x20\x27'+this['name']+('\x27\x20to\x20linea'+'r\x20equivale'+'nt:\x20')+((_0x1fff74=Nt['get'](this['format']))==null?void(0x3e*0x7b+-0x3*-0x7b9+-0x34f5):_0x1fff74['name'])+'\x20->\x20'+((_0x2da556=Nt['get'](_0x199d36))==null?void(-0x170e+-0x1*0xbd7+0x22e5):_0x2da556['name'])+('.\x20This\x20is\x20'+'an\x20expensi'+'ve\x20operati'+'on,\x20and\x20th'+'e\x20texture\x20'+'should\x20be\x20'+'created\x20us'+'ing\x20the\x20ri'+'ght\x20format'+'\x20to\x20avoid\x20'+'this.'),this),this['_format']=_0x199d36,this['recreateIm'+'pl'](),this['device']['_shadersDi'+'rty']=!(-0xdb7+-0x2*-0xb2+0x1*0xc53));}}}get['srgb'](){return fh(this['format']);}set['flipY'](_0x5cd8f1){this['_flipY']!==_0x5cd8f1&&(this['_flipY']=_0x5cd8f1,this['_needsUplo'+'ad']=!(-0xe46+0x1b*0xd8+0x6*-0x16b));}get['flipY'](){return this['_flipY'];}set['premultipl'+'yAlpha'](_0x4eb2cb){this['_premultip'+'lyAlpha']!==_0x4eb2cb&&(this['_premultip'+'lyAlpha']=_0x4eb2cb,this['_needsUplo'+'ad']=!(0xeb*0x1b+0x979+-0x2242));}get['premultipl'+'yAlpha'](){return this['_premultip'+'lyAlpha'];}get['pot'](){return Y['powerOfTwo'](this['_width'])&&Y['powerOfTwo'](this['_height']);}get['encoding'](){switch(this['type']){case Zi:return'rgbm';case mh:return'rgbe';case Qo:return'rgbp';}return py(this['format'])?'srgb':'linear';}['dirtyAll'](){this['_levelsUpd'+'ated']=this['_cubemap']?[[!(-0x462*0x4+-0x1ecb*-0x1+-0x23*0x61),!(-0xc1*-0x1+-0x1*0x1ec1+0x1e00),!(0x3*0x293+-0x2*0x24a+0xa1*-0x5),!(-0x974*0x1+-0x139*-0x5+0x357),!(0x13*0xed+-0xbfc+0x11f*-0x5),!(-0x2*0x3+-0x1668+0x166e)]]:[!(0x1*-0x4fd+0x99a+0x1*-0x49d)],this['_needsUplo'+'ad']=!(-0x1be3+0xda4+-0x209*-0x7),this['_needsMipm'+'apsUpload']=this['_mipmaps'],this['_mipmapsUp'+'loaded']=!(0x47d+0x24d7*0x1+-0x2953),this['propertyCh'+'anged'](lT);}['lock'](_0x882f21={}){_0x882f21['level']??(_0x882f21['level']=-0x207d+0x4*0x8dd+0x2f7*-0x1),_0x882f21['face']??(_0x882f21['face']=-0x91*0x2e+0x15ca+-0x9c*-0x7),_0x882f21['mode']??(_0x882f21['mode']=Od),w['assert'](this['_lockedMod'+'e']===$l,'The\x20textur'+'e\x20is\x20alrea'+'dy\x20locked.'+'\x20Call\x20`tex'+'ture.unloc'+'k()`\x20befor'+'e\x20attempti'+'ng\x20to\x20lock'+'\x20again.',this),w['assert'](_0x882f21['mode']===yy||_0x882f21['mode']===Od,'Cannot\x20loc'+'k\x20a\x20textur'+'e\x20with\x20TEX'+'TURELOCK_N'+'ONE.\x20To\x20un'+'lock\x20a\x20tex'+'ture,\x20call'+'\x20`texture.'+'unlock()`.',this),this['_lockedMod'+'e']=_0x882f21['mode'],this['_lockedLev'+'el']=_0x882f21['level'];const _0x297974=this['cubemap']?this['_levels'][_0x882f21['face']]:this['_levels'];if((_0x297974==null?void(-0x113+-0xdc7+0xeda):_0x297974[_0x882f21['level']])===null){const _0x3c959f=Math['max'](-0x121f+0x652+0x2*0x5e7,this['_width']>>_0x882f21['level']),_0xc649da=Math['max'](-0x215b+-0x3f+0x219b*0x1,this['_height']>>_0x882f21['level']),_0x1b7992=Math['max'](0xc6+0x3*-0x7c7+-0x2d2*-0x8,this['_depth']>>_0x882f21['level']),_0x2a4b29=new ArrayBuffer(Xi['calcLevelG'+'puSize'](_0x3c959f,_0xc649da,_0x1b7992,this['_format']));_0x297974[_0x882f21['level']]=new(my(this['_format']))(_0x2a4b29);}return _0x297974==null?void(-0x22f7*0x1+0x20c4+0x1*0x233):_0x297974[_0x882f21['level']];}['setSource'](_0x11417d,_0x599837=-0x15d*-0x17+-0x9b2+-0x15a9){let _0x107d8b=!(-0x2fe*0xc+0x1*0x1492+0xf57),_0x2c3d5f,_0x1894da;if(this['_cubemap']){if(_0x11417d[0x1*0xf17+-0x1293+0x2*0x1be]){_0x2c3d5f=_0x11417d[0x21c7+0x1017+-0x31de]['width']||-0x2*0x11a6+-0xc5e+0x1*0x2faa,_0x1894da=_0x11417d[-0x141a+-0x1eb3+0x32cd]['height']||0x14a5+0x1dbc+-0x3261;for(let _0x441ef6=-0x1f1+0x1bfd+-0x1a0c;_0x441ef6<-0x176a+0xc55+0xb1b;_0x441ef6++){const _0x1df063=_0x11417d[_0x441ef6];if(!_0x1df063||_0x1df063['width']!==_0x2c3d5f||_0x1df063['height']!==_0x1894da||!this['device']['_isBrowser'+'Interface'](_0x1df063)){_0x107d8b=!(-0x11*0x209+0xe5a+0x47*0x49);break;}}}else _0x107d8b=!(0x1993+-0x1*-0x1017+-0x29aa*0x1);if(!_0x107d8b){for(let _0x9b44ec=-0x340*0x5+0x1fea+0xa*-0x191;_0x9b44ec<-0xbb*-0x2a+0x229*0xb+-0x366b;_0x9b44ec++)this['_levels'][_0x599837][_0x9b44ec]!==_0x11417d[_0x9b44ec]&&(this['_levelsUpd'+'ated'][_0x599837][_0x9b44ec]=!(-0x1*0x2209+0x2*-0x376+0x28f5));}}else this['device']['_isBrowser'+'Interface'](_0x11417d)||(_0x107d8b=!(0xcd0*-0x1+0x12e9*-0x2+0x32a2)),_0x107d8b||(_0x11417d!==this['_levels'][_0x599837]&&(this['_levelsUpd'+'ated'][_0x599837]=!(0x28f+-0x13*-0xd3+-0x1238)),_0x11417d instanceof HTMLVideoElement?(_0x2c3d5f=_0x11417d['videoWidth'],_0x1894da=_0x11417d['videoHeigh'+'t']):(_0x2c3d5f=_0x11417d['width'],_0x1894da=_0x11417d['height']));if(_0x107d8b){if(this['_width']=-0xcf2+-0xa*-0x3bc+-0xc31*0x2,this['_height']=0x4d3+-0xb3*-0x11+0x859*-0x2,this['_cubemap']){for(let _0xff3b88=-0x9*0x5e+0x1*-0x1e95+0x5*0x6c7;_0xff3b88<-0xb4e+0x1cae+-0x115a;_0xff3b88++)this['_levels'][_0x599837][_0xff3b88]=null,this['_levelsUpd'+'ated'][_0x599837][_0xff3b88]=!(-0x623*-0x1+-0x1*-0x1a93+-0x20b6);}else this['_levels'][_0x599837]=null,this['_levelsUpd'+'ated'][_0x599837]=!(0x10*0x15d+0x1bf4+-0x31c4);}else _0x599837===0x55a*-0x5+-0x25*0xdf+-0x3afd*-0x1&&(this['_width']=_0x2c3d5f,this['_height']=_0x1894da),this['_levels'][_0x599837]=_0x11417d;(this['_invalid']!==_0x107d8b||!_0x107d8b)&&(this['_invalid']=_0x107d8b,this['upload']());}['getSource'](_0x606bb9=-0xd*-0x1f6+-0x1*0x369+0x1615*-0x1){return this['_levels'][_0x606bb9];}['unlock'](){this['_lockedMod'+'e']===$l&&w['warn']('pc.Texture'+'#unlock:\x20A'+'ttempting\x20'+'to\x20unlock\x20'+'a\x20texture\x20'+'that\x20is\x20no'+'t\x20locked.',this),this['_lockedMod'+'e']===Od&&this['upload'](),this['_lockedLev'+'el']=-(-0x92*-0x37+0x56+-0x1fb3),this['_lockedMod'+'e']=$l;}['upload'](){var _0x5b13b9,_0x4ce329;this['_needsUplo'+'ad']=!(-0x208d+-0xe25*-0x1+-0x8*-0x24d),this['_needsMipm'+'apsUpload']=this['_mipmaps'],(_0x4ce329=(_0x5b13b9=this['impl'])['uploadImme'+'diate'])==null||_0x4ce329['call'](_0x5b13b9,this['device'],this);}['read'](_0x30bed2,_0x45aa24,_0x1116d5,_0x47cc7f,_0x19035d={}){var _0x4d18b3,_0x14c2d0;return(_0x14c2d0=(_0x4d18b3=this['impl'])['read'])==null?void(-0x99*-0x6+-0x2f5*0x8+0x1412):_0x14c2d0['call'](_0x4d18b3,_0x30bed2,_0x45aa24,_0x1116d5,_0x47cc7f,_0x19035d);}['write'](_0x19afa6,_0x3cda31,_0x1bd03d,_0x1ab1c9,_0x406c91){var _0x5b0d0c,_0x8017a6;return(_0x8017a6=(_0x5b0d0c=this['impl'])['write'])==null?void(0x1a8*-0x1+-0x4*0x267+0xb44):_0x8017a6['call'](_0x5b0d0c,_0x19afa6,_0x3cda31,_0x1bd03d,_0x1ab1c9,_0x406c91);}}const mT={'white':[0x2271*0x1+0xd*0x63+0x43*-0x93,-0x85a+0x5a2+-0x1*-0x3b7,0x9b7*0x2+0x1127+-0x2396,0x1109+0x20b8*-0x1+0x10ae],'gray':[-0x70f+-0x26b2+-0x3*-0xf6b,0x599+-0x2677+0x2*0x10af,-0x124a+0x15be+-0x6*0x7e,0x9*-0x44f+0x1*-0x77e+0x6e*0x6e],'black':[-0x5*-0x255+-0x12*-0x139+-0x21ab,-0x2*0x338+0x1*-0x1ba7+0x2217,-0x19e4+-0x313*0x5+0x2943*0x1,-0x1*0x2087+0x1964+-0x822*-0x1],'normal':[0xbe2+0x1757+-0xb93*0x3,0x3d7+0xae*-0x21+0x1317,-0x2f*0x43+-0x634*-0x4+-0x1*0xb84,0x40*-0x53+0x12f5+0x2ca],'pink':[0x18c3+-0x20e7+0x1*0x923,0x962+-0x349*-0x4+-0x1606,-0x26*0x59+0x2115+0x25c*-0x8,-0x178+0x1*0x1f1+0x86]};class _T{constructor(){h(this,'map',new Map());}['destroy'](){this['map']['forEach'](_0x12f814=>{_0x12f814['destroy']();});}}const gT=new Kt(),fa=(_0x53ba67,_0x4b53a9)=>{const _0xf20373=gT['get'](_0x53ba67,()=>new _T());if(!_0xf20373['map']['has'](_0x4b53a9)){const _0x4a3c77=new _e(_0x53ba67,{'name':'built-in-t'+'exture-'+_0x4b53a9,'width':0x1,'height':0x1,'format':Ne}),_0x371ea0=_0x4a3c77['lock'](),_0xe4b02f=mT[_0x4b53a9];w['assert'](_0xe4b02f,'Data\x20for\x20b'+'uilt-in\x20te'+'xture\x20\x27'+_0x4b53a9+('\x27\x20not\x20foun'+'d')),_0x371ea0['set'](_0xe4b02f),_0x4a3c77['unlock'](),_0xf20373['map']['set'](_0x4b53a9,_0x4a3c77);}return _0xf20373['map']['get'](_0x4b53a9);};let ST=-0x5*-0x50e+0x1*-0x2f9+-0x164d;class ky{constructor(){h(this,'bindGroup'),h(this,'offsets',[]);}}class Up{constructor(_0xaea0b9,_0x4693b3,_0x376f44){h(this,'renderVers'+'ionUpdated',-(-0x1cc6+0x2*0x128b+0x3*-0x2c5)),h(this,'uniformBuf'+'fers'),h(this,'uniformBuf'+'ferOffsets',[]),(this['id']=ST++,this['device']=_0xaea0b9,this['format']=_0x4693b3,this['dirty']=!(-0x2498*0x1+-0x1*0x25dc+0x4a74),this['impl']=_0xaea0b9['createBind'+'GroupImpl'](this),this['textures']=[],this['storageTex'+'tures']=[],this['storageBuf'+'fers']=[],this['uniformBuf'+'fers']=[],this['defaultUni'+'formBuffer']=_0x376f44,_0x376f44&&this['setUniform'+'Buffer'](Np,_0x376f44),w['trace'](Y0,'Alloc:\x20Id\x20'+this['id'],this,_0x4693b3));}['destroy'](){this['impl']['destroy'](),this['impl']=null,this['format']=null,this['defaultUni'+'formBuffer']=null;}['setUniform'+'Buffer'](_0x21bb18,_0xc014f3){const _0x2952f8=this['format']['bufferForm'+'atsMap']['get'](_0x21bb18);w['assert'](_0x2952f8!==void(-0xf7*-0x4+-0x421*-0x3+-0x103f*0x1),'Setting\x20a\x20'+'uniform\x20['+_0x21bb18+(']\x20on\x20a\x20bin'+'d\x20group\x20wi'+'th\x20id\x20')+this['id']+('\x20which\x20doe'+'s\x20not\x20cont'+'ain\x20it,\x20wh'+'ile\x20render'+'ing\x20[')+Q['toString']()+']',this),this['uniformBuf'+'fers'][_0x2952f8]!==_0xc014f3&&(this['uniformBuf'+'fers'][_0x2952f8]=_0xc014f3,this['dirty']=!(-0x1558+0x1ae6+-0x1da*0x3));}['setStorage'+'Buffer'](_0x1758c3,_0x488ca3){const _0x33fa15=this['format']['storageBuf'+'ferFormats'+'Map']['get'](_0x1758c3);w['assert'](_0x33fa15!==void(0xed0+0x3e+0x5e*-0x29),'Setting\x20a\x20'+'storage\x20bu'+'ffer\x20['+_0x1758c3+(']\x20on\x20a\x20bin'+'d\x20group\x20wi'+'th\x20id:\x20')+this['id']+('\x20which\x20doe'+'s\x20not\x20cont'+'ain\x20it,\x20wh'+'ile\x20render'+'ing\x20[')+Q['toString']()+']',this),this['storageBuf'+'fers'][_0x33fa15]!==_0x488ca3&&(this['storageBuf'+'fers'][_0x33fa15]=_0x488ca3,this['dirty']=!(-0x10f*0x19+0x132e*-0x2+0x40d3));}['setTexture'](_0x5520c1,_0x1b9595){const _0x3b1fab=this['format']['textureFor'+'matsMap']['get'](_0x5520c1);w['assert'](_0x3b1fab!==void(0x154*0x4+0x16ed+-0x1*0x1c3d),'Setting\x20a\x20'+'texture\x20['+_0x5520c1+(']\x20on\x20a\x20bin'+'d\x20group\x20wi'+'th\x20id:\x20')+this['id']+('\x20which\x20doe'+'s\x20not\x20cont'+'ain\x20it,\x20wh'+'ile\x20render'+'ing\x20[')+Q['toString']()+']',this),this['textures'][_0x3b1fab]!==_0x1b9595?(this['textures'][_0x3b1fab]=_0x1b9595,this['dirty']=!(-0x4*-0x2e4+-0x70*0xa+0x2*-0x398)):this['renderVers'+'ionUpdated']<_0x1b9595['renderVers'+'ionDirty']&&(this['dirty']=!(-0xa4e+0x1*0x23d3+-0x1985));}['setStorage'+'Texture'](_0x49499a,_0x9cee10){const _0x555f80=this['format']['storageTex'+'tureFormat'+'sMap']['get'](_0x49499a);w['assert'](_0x555f80!==void(-0x20dc+-0x96d+0x2a49),'Setting\x20a\x20'+'storage\x20te'+'xture\x20['+_0x49499a+(']\x20on\x20a\x20bin'+'d\x20group\x20wi'+'th\x20id:\x20')+this['id']+('\x20which\x20doe'+'s\x20not\x20cont'+'ain\x20it,\x20wh'+'ile\x20render'+'ing\x20[')+Q['toString']()+']',this),this['storageTex'+'tures'][_0x555f80]!==_0x9cee10?(this['storageTex'+'tures'][_0x555f80]=_0x9cee10,this['dirty']=!(0x260*-0x8+0x1d7e+-0xa7e*0x1)):this['renderVers'+'ionUpdated']<_0x9cee10['renderVers'+'ionDirty']&&(this['dirty']=!(0x454*0x2+0xecb+-0x57*0x45));}['updateUnif'+'ormBuffers'](){for(let _0x48b49f=0x1e96+-0x1a32+-0x464;_0x48b49f<this['uniformBuf'+'fers']['length'];_0x48b49f++)this['uniformBuf'+'fers'][_0x48b49f]['update']();}['update'](){const {textureFormats:_0x34551a,storageTextureFormats:_0x1b859c,storageBufferFormats:_0x4633e5}=this['format'];for(let _0x45a249=-0x11f3+-0x1ebe*-0x1+-0xccb;_0x45a249<_0x34551a['length'];_0x45a249++){const _0x37227c=_0x34551a[_0x45a249];let _0x435d1b=_0x37227c['scopeId']['value'];_0x435d1b||(_0x37227c['name']==='uSceneDept'+'hMap'&&(w['errorOnce']('A\x20uSceneDe'+'pthMap\x20tex'+'ture\x20is\x20us'+'ed\x20by\x20the\x20'+'shader\x20but'+'\x20a\x20scene\x20d'+'epth\x20textu'+'re\x20is\x20not\x20'+'available.'+'\x20Use\x20Camer'+'aComponent'+'.requestSc'+'eneDepthMa'+'p\x20/\x20enable'+'\x20Depth\x20Gra'+'bpass\x20on\x20t'+'he\x20Camera\x20'+'Component\x20'+'to\x20enable\x20'+'it.\x20Render'+'ing\x20['+Q['toString']()+']'),_0x435d1b=fa(this['device'],'white')),_0x37227c['name']==='uSceneColo'+'rMap'&&(w['errorOnce']('A\x20uSceneCo'+'lorMap\x20tex'+'ture\x20is\x20us'+'ed\x20by\x20the\x20'+'shader\x20but'+'\x20a\x20scene\x20c'+'olor\x20textu'+'re\x20is\x20not\x20'+'available.'+'\x20Use\x20Camer'+'aComponent'+'.requestSc'+'eneColorMa'+'p\x20/\x20enable'+'\x20Color\x20Gra'+'bpass\x20on\x20t'+'he\x20Camera\x20'+'Component\x20'+'to\x20enable\x20'+'it.\x20Render'+'ing\x20['+Q['toString']()+']'),_0x435d1b=fa(this['device'],'pink')),_0x435d1b||(w['errorOnce']('Texture\x20'+_0x37227c['name']+('\x20is\x20requir'+'ed\x20for\x20ren'+'dering\x20but'+'\x20was\x20not\x20s'+'et.\x20Render'+'ing\x20[')+Q['toString']()+']'),_0x435d1b=fa(this['device'],'pink'))),this['setTexture'](_0x37227c['name'],_0x435d1b);}for(let _0x33a499=0x25e0+0x2*0xe27+-0x422e;_0x33a499<_0x1b859c['length'];_0x33a499++){const _0x190ac4=_0x1b859c[_0x33a499],_0x6a40c0=_0x190ac4['scopeId']['value'];w['assert'](_0x6a40c0,'Value\x20was\x20'+'not\x20set\x20wh'+'en\x20assigni'+'ng\x20storage'+'\x20texture\x20s'+'lot\x20['+_0x190ac4['name']+(']\x20to\x20a\x20bin'+'d\x20group,\x20w'+'hile\x20rende'+'ring\x20[')+Q['toString']()+']',this),this['setStorage'+'Texture'](_0x190ac4['name'],_0x6a40c0);}for(let _0x226507=-0xd27+0x29f+-0x8*-0x151;_0x226507<_0x4633e5['length'];_0x226507++){const _0x2bfbbb=_0x4633e5[_0x226507],_0x2fd51c=_0x2bfbbb['scopeId']['value'];w['assert'](_0x2fd51c,'Value\x20was\x20'+'not\x20set\x20wh'+'en\x20assigni'+'ng\x20storage'+'\x20buffer\x20sl'+'ot\x20['+_0x2bfbbb['name']+(']\x20to\x20a\x20bin'+'d\x20group,\x20w'+'hile\x20rende'+'ring\x20[')+Q['toString']()+']',this),this['setStorage'+'Buffer'](_0x2bfbbb['name'],_0x2fd51c);}this['uniformBuf'+'ferOffsets']['length']=this['uniformBuf'+'fers']['length'];for(let _0x5af67f=-0x4bb*0x7+0x2*-0x1a6+0x2469;_0x5af67f<this['uniformBuf'+'fers']['length'];_0x5af67f++){const _0x25554b=this['uniformBuf'+'fers'][_0x5af67f];this['uniformBuf'+'ferOffsets'][_0x5af67f]=_0x25554b['offset'],this['renderVers'+'ionUpdated']<_0x25554b['renderVers'+'ionDirty']&&(this['dirty']=!(-0x1*-0x1425+-0x2*-0xd60+-0x5*0x961));}this['dirty']&&(this['dirty']=!(0x1a5*0xd+-0x103*-0xb+-0x2081),this['renderVers'+'ionUpdated']=this['device']['renderVers'+'ion'],this['impl']['update'](this));}}const qe={'set'(_0x4c6188,_0x1e3d57,_0x33ee64,_0x1c68a9=-0x316+0x3d*-0x3d+-0x2*-0x8d0){return _0x4c6188&~(_0x1c68a9<<_0x33ee64)|_0x1e3d57<<_0x33ee64;},'get'(_0x2a4e15,_0x395178,_0x2ca39f=-0x1867*0x1+0x2706+-0xe9e){return _0x2a4e15>>_0x395178&_0x2ca39f;},'all'(_0x27697f,_0x4aad77,_0x4913ea=-0x244c+-0x1*-0x741+0xd*0x23c){const _0x3c58e2=_0x4913ea<<_0x4aad77;return(_0x27697f&_0x3c58e2)===_0x3c58e2;},'any'(_0x275546,_0x2a377d,_0x2272c9=-0x1dc5+0x1*-0x17eb+0xabd*0x5){return(_0x275546&_0x2272c9<<_0x2a377d)!==0x832*0x2+0x63b+-0x169f;}},Xl=-0xd1*-0x20+-0x1*0x1001+-0xa18,ir=0x23*-0xf4+-0x1*0x1a2d+0x3b98,Hm=-0x2025*-0x1+0x33d+-0x287*0xe,Wm=0x11ca+0x2*-0x56f+-0x6e9,$m=-0xb*-0xd5+0x20fa+0x11*-0x27a,Xm=-0x161b+0x75*-0x21+0x161*0x1b,qm=0x1f9*0xe+0x251+-0x1de1,jm=0x2395+-0x3*-0xab+-0x2584,iu=-0x249f+-0x14aa*0x1+-0x395f*-0x1,Ym=-0x112d+0x925*0x4+-0x1350,Km=0x1f66+-0x16a2+-0x6f*0x14,Zm=0x1c32+0x6fb*-0x5+0xd*0x86,Qm=0x2*0x86e+-0x1d6d+0x45*0x2f,yT=-0x19*0x8e+0xae9+0x4*0xc1,vT=iu,ri=class ri{constructor(_0x27760e=!(0x212*0x11+0xcaa+0x1*-0x2fdb),_0x2968a8=fs,_0x3122f6=Ft,_0x58a63a=rp,_0x3a4a59,_0x56fbc0,_0x29f2e0,_0x3c374b=!(0xc29+-0x252b+0x1902),_0x38f76a=!(-0xedb*0x2+-0x188b+-0x143*-0x2b),_0x62cbbe=!(-0x9f3+0x14b7*0x1+-0xac4),_0x1098b7=!(0x2441*0x1+0x4c6+-0x185*0x1b)){h(this,'target0',-0x2169+0x1c2d+0x53c),(this['setColorBl'+'end'](_0x2968a8,_0x3122f6,_0x58a63a),this['setAlphaBl'+'end'](_0x3a4a59??_0x2968a8,_0x56fbc0??_0x3122f6,_0x29f2e0??_0x58a63a),this['setColorWr'+'ite'](_0x3c374b,_0x38f76a,_0x62cbbe,_0x1098b7),this['blend']=_0x27760e);}set['blend'](_0x2225e8){this['target0']=qe['set'](this['target0'],_0x2225e8?-0x1a6f*0x1+-0x1464+-0x2*-0x176a:-0x2*0xbb1+-0x617*-0x5+-0x711,Qm);}get['blend'](){return qe['all'](this['target0'],Qm);}['setColorBl'+'end'](_0x37a2d7,_0x31bf6d,_0x2a6a07){this['target0']=qe['set'](this['target0'],_0x37a2d7,Hm,Xl),this['target0']=qe['set'](this['target0'],_0x31bf6d,Wm,ir),this['target0']=qe['set'](this['target0'],_0x2a6a07,$m,ir);}['setAlphaBl'+'end'](_0x2b70cf,_0x916e25,_0x1ae3d5){this['target0']=qe['set'](this['target0'],_0x2b70cf,Xm,Xl),this['target0']=qe['set'](this['target0'],_0x916e25,qm,ir),this['target0']=qe['set'](this['target0'],_0x1ae3d5,jm,ir);}['setColorWr'+'ite'](_0x2c92a6,_0x539377,_0x47f036,_0x217978){this['redWrite']=_0x2c92a6,this['greenWrite']=_0x539377,this['blueWrite']=_0x47f036,this['alphaWrite']=_0x217978;}get['colorOp'](){return qe['get'](this['target0'],Hm,Xl);}get['colorSrcFa'+'ctor'](){return qe['get'](this['target0'],Wm,ir);}get['colorDstFa'+'ctor'](){return qe['get'](this['target0'],$m,ir);}get['alphaOp'](){return qe['get'](this['target0'],Xm,Xl);}get['alphaSrcFa'+'ctor'](){return qe['get'](this['target0'],qm,ir);}get['alphaDstFa'+'ctor'](){return qe['get'](this['target0'],jm,ir);}set['redWrite'](_0x4b4b7b){this['target0']=qe['set'](this['target0'],_0x4b4b7b?0x338+-0x84a+0x513:0x1*0x19e7+0x5f*0x26+-0x3a3*0xb,iu);}get['redWrite'](){return qe['all'](this['target0'],iu);}set['greenWrite'](_0x87bfbb){this['target0']=qe['set'](this['target0'],_0x87bfbb?-0x2353+0x1*-0xaed+-0x2e41*-0x1:-0xe38+-0x8f6+0xb97*0x2,Ym);}get['greenWrite'](){return qe['all'](this['target0'],Ym);}set['blueWrite'](_0x33d1e1){this['target0']=qe['set'](this['target0'],_0x33d1e1?0x257e+-0x33*-0x11+-0x28e0:0x724+-0xef0+0x7cc,Km);}get['blueWrite'](){return qe['all'](this['target0'],Km);}set['alphaWrite'](_0x6b0bd4){this['target0']=qe['set'](this['target0'],_0x6b0bd4?-0x2*0xfda+0x494+0x90b*0x3:0x5d7+0x11*0x104+-0x171b,Zm);}get['alphaWrite'](){return qe['all'](this['target0'],Zm);}get['allWrite'](){return qe['get'](this['target0'],vT,yT);}['copy'](_0x123e36){return this['target0']=_0x123e36['target0'],this;}['clone'](){return new this['constructo'+'r']()['copy'](this);}get['key'](){return this['target0'];}['equals'](_0x4167c4){return this['target0']===_0x4167c4['target0'];}};h(ri,'NOBLEND',Object['freeze'](new ri())),h(ri,'NOWRITE',Object['freeze'](new ri(void(-0xd3*0x3+0x1a*-0xf5+0x1b5b),void(0x1*0x1fa1+0x9e5+-0x2986),void(0x89b*0x4+-0x17*-0x55+0x123*-0x25),void(-0x2266+-0x1fd3*0x1+0x4239),void(-0xf*0x215+0x1f61+0x1*-0x26),void(0x128d*0x1+0xa81*0x1+-0x1d0e),void(0x195a+-0x2ab*-0xe+-0x3eb4),!(0x1*0x92f+0x456+0xa*-0x15a),!(0x5ee+-0x1801+-0x34*-0x59),!(0x1a7e+-0xc41+-0xe3c),!(-0x236*0x3+-0x1bcc+0x226f)))),h(ri,'ALPHABLEND',Object['freeze'](new ri(!(0x8b5+-0x4c7*-0x1+0x35f*-0x4),fs,jh,Yh))),h(ri,'ADDBLEND',Object['freeze'](new ri(!(-0x4*0x6c5+0x2*0x1088+0x4*-0x17f),fs,Ft,Ft)));let pt=ri;class Bp{constructor(){h(this,'map',new Map()),h(this,'id',-0x1b3*-0x1+0x1c49+-0x1dfc);}['get'](_0x560e8d){let _0x5830d8=this['map']['get'](_0x560e8d);return _0x5830d8===void(-0x832+-0xec4+0x16f6)&&(_0x5830d8=this['id']++,this['map']['set'](_0x560e8d,_0x5830d8)),_0x5830d8;}}const xT=new Bp(),Jm=0xdb0*0x2+0x16c8+-0x3221,e_=-0x1e3c+-0x8f3+0x272f*0x1,t_=-0xe*-0x1db+0x1461+-0x2e58,_r=class _r{constructor(_0x31bbd3=Wf,_0x1a7dd6=!(0x71b*-0x4+-0x216b*0x1+0x3dd7)){h(this,'data',-0x1*-0x22af+0x1*-0x683+-0x6*0x4b2),h(this,'_depthBias',0x1*-0x249b+0x1*-0xa8b+0x2f26),h(this,'_depthBias'+'Slope',0x2e+0x8c*-0x2a+0x16ca),h(this,'key',-0x7eb+0xbe1*-0x1+0x13cc*0x1),(this['func']=_0x31bbd3,this['write']=_0x1a7dd6);}set['test'](_0x53a658){this['func']=_0x53a658?Wf:Wi,this['updateKey']();}get['test'](){return this['func']!==Wi;}set['write'](_0x2f8fab){this['data']=qe['set'](this['data'],_0x2f8fab?0x1270+0x13a*-0x1d+0x1123:-0x3*0xbbf+-0x13e3+-0x31*-0x120,t_),this['updateKey']();}get['write'](){return qe['all'](this['data'],t_);}set['func'](_0x52d052){this['data']=qe['set'](this['data'],_0x52d052,e_,Jm),this['updateKey']();}get['func'](){return qe['get'](this['data'],e_,Jm);}set['depthBias'](_0x312aa2){this['_depthBias']=_0x312aa2,this['updateKey']();}get['depthBias'](){return this['_depthBias'];}set['depthBiasS'+'lope'](_0x256bc6){this['_depthBias'+'Slope']=_0x256bc6,this['updateKey']();}get['depthBiasS'+'lope'](){return this['_depthBias'+'Slope'];}['copy'](_0x32bdaa){return this['data']=_0x32bdaa['data'],this['_depthBias']=_0x32bdaa['_depthBias'],this['_depthBias'+'Slope']=_0x32bdaa['_depthBias'+'Slope'],this['key']=_0x32bdaa['key'],this;}['clone'](){return new this['constructo'+'r']()['copy'](this);}['updateKey'](){const {data:_0x4e767e,_depthBias:_0x3fdbdb,_depthBiasSlope:_0x14c3c2}=this,_0x452c15=_0x4e767e+'-'+_0x3fdbdb+'-'+_0x14c3c2;this['key']=xT['get'](_0x452c15);}['equals'](_0x166162){return this['key']===_0x166162['key'];}};h(_r,'DEFAULT',Object['freeze'](new _r())),h(_r,'NODEPTH',Object['freeze'](new _r(Wi,!(0x1*-0x5f7+0xc07+-0x60f)))),h(_r,'WRITEDEPTH',Object['freeze'](new _r(Wi,!(0x377*-0x2+-0x1*-0x12ba+0x14*-0x97))));let Yt=_r;class Uy{constructor(){h(this,'globalId',-0x1c18+-0x1*-0x17be+-0x22d*-0x2),h(this,'revision',-0x3*0xbea+0x16fd+0xcc1);}['equals'](_0x324452){return this['globalId']===_0x324452['globalId']&&this['revision']===_0x324452['revision'];}['copy'](_0x4587df){this['globalId']=_0x4587df['globalId'],this['revision']=_0x4587df['revision'];}['reset'](){this['globalId']=0x1*-0xb8d+-0x227f*0x1+0x2e0c,this['revision']=0x1f7d+0x1*0x1a9+-0x2126;}}let s_=0x1*0x26af+-0x112+-0x1*0x259d;class TT{constructor(){s_++,this['version']=new Uy(),this['version']['globalId']=s_;}['increment'](){this['version']['revision']++;}}class wT{constructor(_0x3745f0){this['name']=_0x3745f0,this['value']=null,this['versionObj'+'ect']=new TT();}['toJSON'](_0x24144b){}['setValue'](_0x293103){this['value']=_0x293103,this['versionObj'+'ect']['increment']();}['getValue'](){return this['value'];}}class ET{constructor(_0x5d0844){this['name']=_0x5d0844,this['variables']=new Map();}['resolve'](_0x26dd0f){return this['variables']['has'](_0x26dd0f)||this['variables']['set'](_0x26dd0f,new wT(_0x26dd0f)),this['variables']['get'](_0x26dd0f);}['removeValu'+'e'](_0x9031d2){for(const _0x4d9c45 in this['variables']){const _0x4b4fb8=this['variables'][_0x4d9c45];_0x4b4fb8['value']===_0x9031d2&&(_0x4b4fb8['value']=null);}}}let bT=-0xc02+-0x25f4+0x2*0x18fb;class Is{constructor(_0x294db9,_0x1aa295,_0x482bfc,_0x31103c){h(this,'usage',ms),(w['assert'](arguments['length']<=-0x9ad*0x1+-0x1bde+-0x5*-0x783&&(!_0x31103c||typeof _0x31103c=='object'),'incorrect\x20'+'arguments'),this['usage']=(_0x31103c==null?void(-0x1*0x1d17+-0x1fd4+0x3ceb):_0x31103c['usage'])??ms,this['device']=_0x294db9,this['format']=_0x1aa295,this['numVertice'+'s']=_0x482bfc,this['id']=bT++,this['impl']=_0x294db9['createVert'+'exBufferIm'+'pl'](this,_0x1aa295,_0x31103c),this['numBytes']=_0x1aa295['verticesBy'+'teSize']?_0x1aa295['verticesBy'+'teSize']:_0x1aa295['size']*_0x482bfc,this['adjustVram'+'SizeTracki'+'ng'](_0x294db9['_vram'],this['numBytes']));const _0x47a222=_0x31103c==null?void(-0x1b18+0x1d5*-0x8+0x29c0):_0x31103c['data'];_0x47a222?this['setData'](_0x47a222):this['storage']=new ArrayBuffer(this['numBytes']),this['device']['buffers']['push'](this);}['destroy'](){const _0x1f2649=this['device'],_0x42a30e=_0x1f2649['buffers']['indexOf'](this);_0x42a30e!==-(0x1*-0xb0b+0x18d*-0x2+0x1*0xe26)&&_0x1f2649['buffers']['splice'](_0x42a30e,-0x224b+-0x21a8+-0x10fd*-0x4),this['impl']['initialize'+'d']&&(this['impl']['destroy'](_0x1f2649),this['adjustVram'+'SizeTracki'+'ng'](_0x1f2649['_vram'],-this['storage']['byteLength'])),this['storage']=null;}['adjustVram'+'SizeTracki'+'ng'](_0x2b91ea,_0x2b9bc2){w['trace'](q0,this['id']+'\x20size:\x20'+_0x2b9bc2+'\x20vram.vb:\x20'+_0x2b91ea['vb']+'\x20=>\x20'+(_0x2b91ea['vb']+_0x2b9bc2)),_0x2b91ea['vb']+=_0x2b9bc2;}['loseContex'+'t'](){this['impl']['loseContex'+'t']();}['getFormat'](){return this['format'];}['getUsage'](){return this['usage'];}['getNumVert'+'ices'](){return this['numVertice'+'s'];}['lock'](){return this['storage'];}['unlock'](){this['impl']['unlock'](this);}['setData'](_0x2f4ed2){return _0x2f4ed2['byteLength']!==this['numBytes']?(w['error']('VertexBuff'+'er:\x20wrong\x20'+'initial\x20da'+'ta\x20size:\x20e'+'xpected\x20'+this['numBytes']+',\x20got\x20'+_0x2f4ed2['byteLength']),!(0x10af+0x3*-0x1e1+-0xb0b)):(this['storage']=_0x2f4ed2,this['unlock'](),!(0x1816*0x1+-0xfd1+-0x845));}}function hi(_0x12c4dd){if(_0x12c4dd==null)return 0x18d5+0x8*0x3e0+0x1*-0x37d5;let _0x1e1295=0x32f+0x11be+-0x14ed;for(let _0x2a7e22=0x243*-0xe+0x140d+-0x1*-0xb9d,_0x5a68c7=_0x12c4dd['length'];_0x2a7e22<_0x5a68c7;_0x2a7e22++)_0x1e1295=(_0x1e1295<<0x44c+0x9*-0x1d2+0xc1b)-_0x1e1295+_0x12c4dd['charCodeAt'](_0x2a7e22),_0x1e1295|=-0xd87+-0x1*0xacf+0x1856;return _0x1e1295;}function By(_0x3aff6f){let _0x1891d4=0x48a637a5+-0x698bcdf7*0x2+0x10b8e020e;for(let _0x3e668b=0x1*0x110b+-0x1612+0x507;_0x3e668b<_0x3aff6f['length'];_0x3e668b++)_0x1891d4^=_0x3aff6f[_0x3e668b],_0x1891d4*=-0x1b45224+0xabc280+0x2089137;return _0x1891d4>>>0x4*-0x819+0x272+0x1df2*0x1;}const AT=new Bp(),CT=[-0x2*-0x11a2+-0x1*0x1cc3+0x1*-0x67f,-0x24d9+-0x629+0x2b06,0x1*-0xda5+-0x566*0x6+-0x1*-0x2e11,-0x302*-0xc+-0x836*-0x1+0x46d*-0xa,0x1880+-0x343+0x27*-0x8b],PT=new Kt();class kt{constructor(_0x42cbfb,_0xccd8ea,_0x36fc86){this['device']=_0x42cbfb,this['_elements']=[],this['hasUv0']=!(0x1*-0x2009+0x56*0x4a+0x72e),this['hasUv1']=!(-0x3b9+0x1e39+-0x1a7f),this['hasColor']=!(0x1*-0xb34+0x20c3+-0x158e),this['hasTangent'+'s']=!(0x3d*0x1+-0x1ca0+0x719*0x4),this['verticesBy'+'teSize']=-0x1*-0x886+-0x1732+0xeac,this['vertexCoun'+'t']=_0x36fc86,this['interleave'+'d']=_0x36fc86===void(-0x143d+0x1cc0+-0x1*0x883),this['instancing']=!(-0x61b+0x1682+-0x1066),this['size']=_0xccd8ea['reduce']((_0x4fb0b8,_0x55a8fc)=>_0x4fb0b8+Math['ceil'](_0x55a8fc['components']*No[_0x55a8fc['type']]/(0x9f7*-0x2+-0x1*-0x1dda+-0x1*0x9e8))*(-0x19cd*0x1+-0x2*-0x2bb+-0x1b*-0xc1),-0x218e+-0x1bfd+0x1*0x3d8b);let _0x646832=0x2081+-0x1*0x1af2+-0x58f,_0x507761;for(let _0x33bf8b=0x2618+0x157d+-0x1*0x3b95,_0x5a0977=_0xccd8ea['length'];_0x33bf8b<_0x5a0977;_0x33bf8b++){const _0x6c383b=_0xccd8ea[_0x33bf8b];_0x507761=_0x6c383b['components']*No[_0x6c383b['type']],w['assert'](kt['isElementV'+'alid'](_0x42cbfb,_0x6c383b),'WebGPU\x20doe'+'s\x20not\x20supp'+'ort\x20the\x20fo'+'rmat\x20of\x20ve'+'rtex\x20eleme'+'nt\x20'+_0x6c383b['semantic']+'\x20:\x20'+cT[_0x6c383b['type']]+'\x20x\x20'+_0x6c383b['components']),_0x36fc86&&(_0x646832=Y['roundUp'](_0x646832,_0x507761),w['assert'](_0x507761%(-0xdab+0x7*-0x1be+0x19e1)===-0x18a3+0x3*-0xc31+0x3d36,'Non-interl'+'eaved\x20vert'+'ex\x20format\x20'+'with\x20eleme'+'nt\x20size\x20no'+'t\x20multiple'+'\x20of\x204\x20can\x20'+'have\x20perfo'+'rmance\x20imp'+'act\x20on\x20som'+'e\x20platform'+'s.\x20Element'+'\x20size:\x20'+_0x507761));const _0x4ad8a9=_0x6c383b['asInt']??!(-0x77c*-0x3+0xe52+-0x24c5),_0x241468=_0x4ad8a9?!(0x1f86+-0x1209+-0xd7c):_0x6c383b['normalize']??!(-0x796*0x5+0x1*-0x887+0x2e76),_0x3cb770={'name':_0x6c383b['semantic'],'offset':_0x36fc86?_0x646832:_0x6c383b['hasOwnProp'+'erty']('offset')?_0x6c383b['offset']:_0x646832,'stride':_0x36fc86?_0x507761:_0x6c383b['hasOwnProp'+'erty']('stride')?_0x6c383b['stride']:this['size'],'dataType':_0x6c383b['type'],'numComponents':_0x6c383b['components'],'normalize':_0x241468,'size':_0x507761,'asInt':_0x4ad8a9};this['_elements']['push'](_0x3cb770),_0x36fc86?_0x646832+=_0x507761*_0x36fc86:_0x646832+=Math['ceil'](_0x507761/(0x17bb+-0x376*-0x3+-0x2219*0x1))*(-0x24+0x13fc+-0x13d4),_0x6c383b['semantic']===is?this['hasUv0']=!(-0x1*0x51a+0x11ee+-0xcd4):_0x6c383b['semantic']===ba?this['hasUv1']=!(-0x7f1+0x17a+0x5*0x14b):_0x6c383b['semantic']===Wt?this['hasColor']=!(-0x700+0x1*0x14c3+-0xdc3):_0x6c383b['semantic']===yi&&(this['hasTangent'+'s']=!(-0x1af*0x6+0x1*-0x1561+0x1f7b));}_0x36fc86&&(this['verticesBy'+'teSize']=_0x646832),this['_evaluateH'+'ash']();}get['elements'](){return this['_elements'];}static['getDefault'+'Instancing'+'Format'](_0x519ab9){return PT['get'](_0x519ab9,()=>new kt(_0x519ab9,[{'semantic':Mp,'components':0x4,'type':Ve},{'semantic':Dp,'components':0x4,'type':Ve},{'semantic':Ip,'components':0x4,'type':Ve},{'semantic':Ln,'components':0x4,'type':Ve}]));}static['isElementV'+'alid'](_0xafa574,_0x531751){const _0x442c18=_0x531751['components']*No[_0x531751['type']];return!(_0xafa574['isWebGPU']&&!CT['includes'](_0x442c18));}['update'](){w['assert'](!this['device']['isWebGPU'],'VertexForm'+'at#update\x20'+'is\x20not\x20sup'+'ported\x20on\x20'+'WebGPU\x20and'+'\x20VertexFor'+'mat\x20cannot'+'\x20be\x20modifi'+'ed.'),this['_evaluateH'+'ash']();}['_evaluateH'+'ash'](){const _0x1d7e0a=[],_0x43d7e7=[],_0x373c2a=this['_elements']['length'];for(let _0x276b08=0x21*0xd+-0x4f4*-0x4+-0x157d;_0x276b08<_0x373c2a;_0x276b08++){const {name:_0x590b91,dataType:_0x582e7e,numComponents:_0x5b2796,normalize:_0x490adf,offset:_0x42e043,stride:_0x18d9e1,size:_0x51cfb4,asInt:_0x563623}=this['_elements'][_0x276b08],_0x57f6a8=_0x590b91+_0x582e7e+_0x5b2796+_0x490adf+_0x563623;_0x1d7e0a['push'](_0x57f6a8);const _0x2dc23b=_0x57f6a8+_0x42e043+_0x18d9e1+_0x51cfb4;_0x43d7e7['push'](_0x2dc23b);}_0x1d7e0a['sort']();const _0x30b2ea=_0x1d7e0a['join']();this['batchingHa'+'sh']=hi(_0x30b2ea),this['shaderProc'+'essingHash'+'String']=_0x30b2ea,this['renderingH'+'ashString']=_0x43d7e7['join']('_'),this['renderingH'+'ash']=AT['get'](this['renderingH'+'ashString']);}}const MT=new Bp(),zh=class zh{constructor(_0x47554e={}){h(this,'_func'),h(this,'_ref'),h(this,'_fail'),h(this,'_zfail'),h(this,'_zpass'),h(this,'_readMask'),h(this,'_writeMask'),h(this,'_dirty',!(-0xaf*-0x2f+0x1750+-0x3771)),h(this,'_key'),(this['_func']=_0x47554e['func']??Wi,this['_ref']=_0x47554e['ref']??-0x1298+-0x1d*0xb0+0x2688,this['_readMask']=_0x47554e['readMask']??-0x1*-0x1e82+0x2b6*-0x2+0x7*-0x371,this['_writeMask']=_0x47554e['writeMask']??-0x832+0x247*0x1+0x6*0x127,this['_fail']=_0x47554e['fail']??xn,this['_zfail']=_0x47554e['zfail']??xn,this['_zpass']=_0x47554e['zpass']??xn,this['_evalKey']());}set['func'](_0x513194){this['_func']=_0x513194,this['_dirty']=!(-0x1*-0x683+-0x2603+-0x30*-0xa8);}get['func'](){return this['_func'];}set['ref'](_0x39bf8a){this['_ref']=_0x39bf8a,this['_dirty']=!(-0x20df+0x35*0xa6+-0x17f);}get['ref'](){return this['_ref'];}set['fail'](_0x27bf3e){this['_fail']=_0x27bf3e,this['_dirty']=!(-0x160a+-0x1*-0x11c5+0x445);}get['fail'](){return this['_fail'];}set['zfail'](_0x232373){this['_zfail']=_0x232373,this['_dirty']=!(-0x2032+0xfb*0x20+0xd2);}get['zfail'](){return this['_zfail'];}set['zpass'](_0x938af0){this['_zpass']=_0x938af0,this['_dirty']=!(-0x1f1*0x2+-0x650+0x57*0x1e);}get['zpass'](){return this['_zpass'];}set['readMask'](_0x1ed5e0){this['_readMask']=_0x1ed5e0,this['_dirty']=!(0xc*0xf1+0x1d*0x25+0x319*-0x5);}get['readMask'](){return this['_readMask'];}set['writeMask'](_0x34f0bd){this['_writeMask']=_0x34f0bd,this['_dirty']=!(0x373+-0x4*0x1ab+0x339);}get['writeMask'](){return this['_writeMask'];}['_evalKey'](){const {_func:_0x25fac3,_ref:_0x389dd0,_fail:_0x3926d9,_zfail:_0x50ba2e,_zpass:_0x44ca17,_readMask:_0x396eb3,_writeMask:_0x2f11e0}=this,_0x33210d=_0x25fac3+','+_0x389dd0+','+_0x3926d9+','+_0x50ba2e+','+_0x44ca17+','+_0x396eb3+','+_0x2f11e0;this['_key']=MT['get'](_0x33210d),this['_dirty']=!(-0x21e5+-0x17b4+-0xca*-0x49);}get['key'](){return this['_dirty']&&this['_evalKey'](),this['_key'];}['copy'](_0x399346){return this['_func']=_0x399346['_func'],this['_ref']=_0x399346['_ref'],this['_readMask']=_0x399346['_readMask'],this['_writeMask']=_0x399346['_writeMask'],this['_fail']=_0x399346['_fail'],this['_zfail']=_0x399346['_zfail'],this['_zpass']=_0x399346['_zpass'],this['_dirty']=_0x399346['_dirty'],this['_key']=_0x399346['_key'],this;}['clone'](){return new this['constructo'+'r']()['copy'](this);}};h(zh,'DEFAULT',Object['freeze'](new zh()));let pi=zh;const ql=new Set(),Vh=class Vh extends me{constructor(_0x1217c4,_0x3a9d8b){var _0x3f3ca2,_0xc02b61,_0x219e57,_0x47ce56,_0x35a7e1,_0x5cac0f;super(),h(this,'canvas'),h(this,'backBuffer',null),h(this,'backBuffer'+'Size',new J()),h(this,'backBuffer'+'Format'),h(this,'backBuffer'+'Antialias',!(0xc27+0x1f26+-0x2b4c)),h(this,'isWebGPU',!(-0x7*-0x3e6+0x250e+-0x4057)),h(this,'isWebGL2',!(0xb9+0x1072+-0x112a)),h(this,'isHdr',!(0x1adf+-0x1*-0x1322+-0x2e00)),h(this,'scope'),h(this,'maxIndirec'+'tDrawCount',-0x1b30+-0x178f*-0x1+0x7a1),h(this,'maxAnisotr'+'opy'),h(this,'maxCubeMap'+'Size'),h(this,'maxTexture'+'Size'),h(this,'maxVolumeS'+'ize'),h(this,'maxColorAt'+'tachments',0x31*0x88+0x838*0x2+0x7*-0x611),h(this,'precision'),h(this,'samples'),h(this,'maxSamples',-0x2*-0x413+0x1*0xe74+-0x1699),h(this,'supportsSt'+'encil'),h(this,'supportsCo'+'mpute',!(0x2495*-0x1+0x1fae+0x274*0x2)),h(this,'supportsSt'+'orageTextu'+'reRead',!(-0xfd7+-0xd*0x12b+0x1f07)),h(this,'renderTarg'+'et',null),h(this,'shaders',[]),h(this,'textures',[]),h(this,'targets',new Set()),h(this,'renderVers'+'ion',-0x1396+0x267f+-0x2f*0x67),h(this,'renderPass'+'Index'),h(this,'insideRend'+'erPass',!(-0x2e*0xa3+-0x3ec+0xb*0x305)),h(this,'supportsUn'+'iformBuffe'+'rs',!(0x1eb0+-0x88f*0x1+-0x1620)),h(this,'supportsCl'+'ipDistance'+'s',!(0x1b6e+0x110+-0x33*0x8f)),h(this,'textureFlo'+'atRenderab'+'le'),h(this,'textureHal'+'fFloatRend'+'erable'),h(this,'textureRG1'+'1B10Render'+'able',!(-0x1598+0x36d*0x5+0x23c*0x2)),h(this,'textureFlo'+'atFilterab'+'le',!(-0xab2*0x2+-0x1733*-0x1+-0x1ce)),h(this,'quadVertex'+'Buffer'),h(this,'blendState',new pt()),h(this,'depthState',new Yt()),h(this,'stencilEna'+'bled',!(-0x14d1*0x1+0x4ab+0x1*0x1027)),h(this,'stencilFro'+'nt',new pi()),h(this,'stencilBac'+'k',new pi()),h(this,'dynamicBuf'+'fers'),h(this,'gpuProfile'+'r'),h(this,'defaultCle'+'arOptions',{'color':[0x16f7+0x1928+-0x1*0x301f,-0x2499+-0xe80+0x7f*0x67,0x64*0x1+-0x3*0x95+-0x15b*-0x1,0x1285+-0x191*-0x16+-0x34fa],'depth':0x1,'stencil':0x0,'flags':jo|Yo}),h(this,'clientRect',{'width':0x0,'height':0x0}),h(this,'_shadersDi'+'rty',!(-0x2133+-0x1893+0x39c7*0x1)),h(this,'capsDefine'+'s',new Map()),h(this,'mapsToClea'+'r',new Set()),(this['canvas']=_0x1217c4,'setAttribu'+'te'in _0x1217c4&&_0x1217c4['setAttribu'+'te']('data-engin'+'e','PlayCanvas'+'\x20'+hn),this['initOption'+'s']={..._0x3a9d8b},(_0x3f3ca2=this['initOption'+'s'])['alpha']??(_0x3f3ca2['alpha']=!(0x399*0x1+-0x1105+0xd6c)),(_0xc02b61=this['initOption'+'s'])['depth']??(_0xc02b61['depth']=!(-0x1b5b+0x10cf+0x2*0x546)),(_0x219e57=this['initOption'+'s'])['stencil']??(_0x219e57['stencil']=!(-0x25*-0xf4+-0x26c3+0x1*0x37f)),(_0x47ce56=this['initOption'+'s'])['antialias']??(_0x47ce56['antialias']=!(-0x1*0x264f+0x10*-0xbb+0x31ff)),(_0x35a7e1=this['initOption'+'s'])['powerPrefe'+'rence']??(_0x35a7e1['powerPrefe'+'rence']='high-perfo'+'rmance'),(_0x5cac0f=this['initOption'+'s'])['displayFor'+'mat']??(_0x5cac0f['displayFor'+'mat']=oT),this['_maxPixelR'+'atio']=Ae['browser']?Math['min'](0x10ed+-0x28d*0x9+0x203*0x3,window['devicePixe'+'lRatio']):0x2508+-0x2121+-0x3e6,this['buffers']=[],this['_vram']={'texShadow':0x0,'texAsset':0x0,'texLightmap':0x0,'tex':0x0,'vb':0x0,'ib':0x0,'ub':0x0,'sb':0x0},this['_shaderSta'+'ts']={'vsCompiled':0x0,'fsCompiled':0x0,'linked':0x0,'materialShaders':0x0,'compileTime':0x0},this['initialize'+'ContextCac'+'hes'](),this['_drawCalls'+'PerFrame']=-0xd89*-0x1+-0x11*0x89+-0x470,this['_shaderSwi'+'tchesPerFr'+'ame']=0x2a*0x11+0x1*-0x1b0+-0x11a,this['_primsPerF'+'rame']=[]);for(let _0xb082f9=cd;_0xb082f9<=oa;_0xb082f9++)this['_primsPerF'+'rame'][_0xb082f9]=0x1932+0xcd*0x6+-0x1e00;this['_renderTar'+'getCreatio'+'nTime']=-0x1517*0x1+0x20f4+0xbdd*-0x1,this['scope']=new ET('Device'),this['textureBia'+'s']=this['scope']['resolve']('textureBia'+'s'),this['textureBia'+'s']['setValue'](0x49*0x7e+-0x7b9*0x2+-0x2e*0x72);}['postInit'](){const _0x2bc8ed=new kt(this,[{'semantic':Me,'components':0x2,'type':Ve}]),_0xcda4e7=new Float32Array([-(0xa7*0x9+0xf56+-0x3b*0x5c),-(0x8eb*0x4+0x72e+-0x2ad9),-0x1*0x454+0x3fb+0x5a,-(-0x221b*-0x1+0x9*-0x266+-0xc84),-(0x1996+-0x4fe+0x1*-0x1497),0x5d1*-0x2+0x1*-0x17b8+0x235b,0x50b+-0x264e+0x2144*0x1,0x3*-0x35+-0x10e3+0x1183]);this['quadVertex'+'Buffer']=new Is(this,_0x2bc8ed,0x44*-0x87+0x11e+0x3*0xb96,{'data':_0xcda4e7});}['initCapsDe'+'fines'](){const {capsDefines:_0x157543}=this;_0x157543['clear'](),this['textureFlo'+'atFilterab'+'le']&&_0x157543['set']('CAPS_TEXTU'+'RE_FLOAT_F'+'ILTERABLE',''),this['textureFlo'+'atRenderab'+'le']&&_0x157543['set']('CAPS_TEXTU'+'RE_FLOAT_R'+'ENDERABLE','');}['destroy'](){var _0x51d6e7,_0x4410bb,_0xc22ac2;this['fire']('destroy'),(_0x51d6e7=this['quadVertex'+'Buffer'])==null||_0x51d6e7['destroy'](),this['quadVertex'+'Buffer']=null,(_0x4410bb=this['dynamicBuf'+'fers'])==null||_0x4410bb['destroy'](),this['dynamicBuf'+'fers']=null,(_0xc22ac2=this['gpuProfile'+'r'])==null||_0xc22ac2['destroy'](),this['gpuProfile'+'r']=null;}['onDestroyS'+'hader'](_0x709b2f){this['fire']('destroy:sh'+'ader',_0x709b2f);const _0x15bb96=this['shaders']['indexOf'](_0x709b2f);_0x15bb96!==-(0xbaa*-0x1+-0x15ab+0x22*0xfb)&&this['shaders']['splice'](_0x15bb96,-0x1e83+0x17eb+0x233*0x3);}['postDestro'+'y'](){this['scope']=null,this['canvas']=null;}['loseContex'+'t'](){var _0x1b452b;this['contextLos'+'t']=!(-0x1f27+-0x1*-0x609+-0x2*-0xc8f),this['backBuffer'+'Size']['set'](-(-0xb*-0x33d+0x18c0+-0x3c5e),-(0xce2+0x964*-0x3+0x2d*0x57));for(const _0x260dbc of this['textures'])_0x260dbc['loseContex'+'t']();for(const _0x8bc56a of this['buffers'])_0x8bc56a['loseContex'+'t']();for(const _0x4bf155 of this['targets'])_0x4bf155['loseContex'+'t']();(_0x1b452b=this['gpuProfile'+'r'])==null||_0x1b452b['loseContex'+'t']();}['restoreCon'+'text'](){var _0x3cf26c,_0x2a9210;this['contextLos'+'t']=!(-0x23eb+0x15bd+0xe2f),this['initialize'+'RenderStat'+'e'](),this['initialize'+'ContextCac'+'hes']();for(const _0x13301b of this['buffers'])_0x13301b['unlock']();(_0x2a9210=(_0x3cf26c=this['gpuProfile'+'r'])==null?void(0x17a+-0x45*-0x27+0x155*-0x9):_0x3cf26c['restoreCon'+'text'])==null||_0x2a9210['call'](_0x3cf26c);}['toJSON'](_0x11bba2){}['initialize'+'ContextCac'+'hes'](){this['vertexBuff'+'ers']=[],this['shader']=null,this['shaderVali'+'d']=void(0x1*0xe53+0x691*0x2+-0x63*0x47),this['shaderAsyn'+'cCompile']=!(0x1c44+0x1*-0x121f+-0xa24),this['renderTarg'+'et']=null;}['initialize'+'RenderStat'+'e'](){this['blendState']=new pt(),this['depthState']=new Yt(),this['cullMode']=pa,this['vx']=this['vy']=this['vw']=this['vh']=-0xc67+0x19*-0xcd+-0xa*-0x33e,this['sx']=this['sy']=this['sw']=this['sh']=-0x1e07+-0x1027+0x1*0x2e2e,this['blendColor']=new ie(0x193f*-0x1+0x1583+0x1de*0x2,0x59*-0x2f+0xcd8+0x37f,-0xba3+-0x7b*0x42+0x89*0x51,-0x523*-0x7+0x5e5*-0x6+-0x97);}['setStencil'+'State'](_0x2c6d87,_0x16b10b){w['assert'](!(-0x3d1*0x8+0xa80+0x1409));}['setBlendSt'+'ate'](_0x1a68f6){w['assert'](!(-0xc1*0x1c+0xa*-0x6a+-0x1*-0x1941));}['setBlendCo'+'lor'](_0x4781ed,_0x117451,_0x3fea5e,_0x2b18fe){w['assert'](!(0x61b+0x22a*0x2+0x2*-0x537));}['setDepthSt'+'ate'](_0x23694b){w['assert'](!(0x5c1+-0xe39+0x879));}['setCullMod'+'e'](_0x45dfc7){w['assert'](!(-0x19ed+-0x2161+0x3b4f));}['setRenderT'+'arget'](_0x484322){this['renderTarg'+'et']=_0x484322;}['setVertexB'+'uffer'](_0x59f75f){_0x59f75f&&this['vertexBuff'+'ers']['push'](_0x59f75f);}['clearVerte'+'xBuffer'](){this['vertexBuff'+'ers']['length']=-0xb2d+0x1fc+0x931;}['getIndirec'+'tDrawSlot'](){return 0x131c+-0x5f2+-0xd2a;}get['indirectDr'+'awBuffer'](){return null;}['getRenderT'+'arget'](){return this['renderTarg'+'et'];}['initRender'+'Target'](_0x5cbc14){if(_0x5cbc14['initialize'+'d'])return;const _0xf546ff=de();this['fire']('fbo:create',{'timestamp':_0xf546ff,'target':this}),_0x5cbc14['init'](),this['targets']['add'](_0x5cbc14),this['_renderTar'+'getCreatio'+'nTime']+=de()-_0xf546ff;}['draw'](_0x4c9afd,_0x44c44a,_0x465321,_0x8dfa76,_0x1b49ac=!(0x1c7*-0x7+0x1e6b+-0x2ff*0x6),_0x146292=!(0x1352+-0x1*0x142f+0xdd)){w['assert'](!(0x1c*-0xda+-0x1*0x1808+-0x2d1*-0x11));}['_isBrowser'+'Interface'](_0x57b826){return this['_isImageBr'+'owserInter'+'face'](_0x57b826)||this['_isImageCa'+'nvasInterf'+'ace'](_0x57b826)||this['_isImageVi'+'deoInterfa'+'ce'](_0x57b826);}['_isImageBr'+'owserInter'+'face'](_0x3c169e){return typeof ImageBitmap<'u'&&_0x3c169e instanceof ImageBitmap||typeof HTMLImageElement<'u'&&_0x3c169e instanceof HTMLImageElement;}['_isImageCa'+'nvasInterf'+'ace'](_0x52e5d2){return typeof HTMLCanvasElement<'u'&&_0x52e5d2 instanceof HTMLCanvasElement;}['_isImageVi'+'deoInterfa'+'ce'](_0x1183b6){return typeof HTMLVideoElement<'u'&&_0x1183b6 instanceof HTMLVideoElement;}['resizeCanv'+'as'](_0x3e0d47,_0x3b4a1d){const _0x2f2403=Math['min'](this['_maxPixelR'+'atio'],Ae['browser']?window['devicePixe'+'lRatio']:-0x16f*0x1+-0x68f*-0x3+-0x123d),_0x15a5cb=Math['floor'](_0x3e0d47*_0x2f2403),_0x30e3cd=Math['floor'](_0x3b4a1d*_0x2f2403);(_0x15a5cb!==this['canvas']['width']||_0x30e3cd!==this['canvas']['height'])&&this['setResolut'+'ion'](_0x15a5cb,_0x30e3cd);}['setResolut'+'ion'](_0x76745f,_0x51129a){this['canvas']['width']=_0x76745f,this['canvas']['height']=_0x51129a,this['fire'](Vh['EVENT_RESI'+'ZE'],_0x76745f,_0x51129a);}['update'](){this['updateClie'+'ntRect']();}['updateClie'+'ntRect'](){if(Ae['worker'])this['clientRect']['width']=this['canvas']['width'],this['clientRect']['height']=this['canvas']['height'];else{const _0xb8f5ca=this['canvas']['getBoundin'+'gClientRec'+'t']();this['clientRect']['width']=_0xb8f5ca['width'],this['clientRect']['height']=_0xb8f5ca['height'];}}get['width'](){return this['canvas']['width'];}get['height'](){return this['canvas']['height'];}set['fullscreen'](_0x944282){w['error']('GraphicsDe'+'vice.fulls'+'creen\x20is\x20n'+'ot\x20impleme'+'nted\x20on\x20cu'+'rrent\x20devi'+'ce.');}get['fullscreen'](){return w['error']('GraphicsDe'+'vice.fulls'+'creen\x20is\x20n'+'ot\x20impleme'+'nted\x20on\x20cu'+'rrent\x20devi'+'ce.'),!(-0xac+-0x1*0x685+0x732);}set['maxPixelRa'+'tio'](_0x2df3f9){this['_maxPixelR'+'atio']=_0x2df3f9;}get['maxPixelRa'+'tio'](){return this['_maxPixelR'+'atio'];}get['deviceType'](){return this['_deviceTyp'+'e'];}['startRende'+'rPass'](_0x12d0d3){}['endRenderP'+'ass'](_0x4fa61d){}['startCompu'+'tePass'](_0x21d97f){}['endCompute'+'Pass'](){}['frameStart'](){this['renderPass'+'Index']=0x94f*0x3+0x1d*0x20+0x29*-0xc5,this['renderVers'+'ion']++,w['call'](()=>{if(mi['get'](Z0)){const _0x271cf9=this['textures']['slice']();_0x271cf9['sort']((_0xe614eb,_0x3cf0ec)=>_0x3cf0ec['gpuSize']-_0xe614eb['gpuSize']),w['log']('Textures:\x20'+_0x271cf9['length']);let _0x3ed0fc=-0x12f*-0xf+0x148f*0x1+-0x2650;_0x271cf9['forEach']((_0x43d425,_0x3db6f4)=>{const _0x31bbd0=_0x43d425['gpuSize'];_0x3ed0fc+=_0x31bbd0,w['log'](_0x3db6f4+'.\x20'+_0x43d425['name']+'\x20'+_0x43d425['width']+'x'+_0x43d425['height']+'\x20VRAM:\x20'+(_0x31bbd0/(0x6ab+0x5*0x4f2+-0x1b65)/(-0xa6+0x14e+0x358))['toFixed'](0x53*-0x4c+0x160f+-0xd*-0x33)+'\x20MB');}),w['log']('Total:\x20'+(_0x3ed0fc/(0xba7+0x1e71+-0x2618)/(0x6a0+-0x9b5*-0x2+-0x160a*0x1))['toFixed'](0xac8+-0x1fb5+0x14ef)+'MB');}});}['frameEnd'](){this['mapsToClea'+'r']['forEach'](_0x3ea514=>_0x3ea514['clear']()),this['mapsToClea'+'r']['clear']();}['computeDis'+'patch'](_0x280b55,_0x576055='Unnamed'){}['getRendera'+'bleHdrForm'+'at'](_0x2253a9=[In,nt,Xt],_0x1568a1=!(0x4c1+0x1*0x1f6f+0x2430*-0x1),_0xd2937b=0x66*-0xc+-0x5d*-0x3b+-0x1*0x10a6){for(let _0x2af046=0x16ac+0x18cd+-0x2f79*0x1;_0x2af046<_0x2253a9['length'];_0x2af046++){const _0x9755c8=_0x2253a9[_0x2af046];switch(_0x9755c8){case In:{if(this['textureRG1'+'1B10Render'+'able'])return _0x9755c8;break;}case nt:if(this['textureHal'+'fFloatRend'+'erable'])return _0x9755c8;break;case Xt:if(this['isWebGPU']&&_0xd2937b>0x83*0x2b+0xda*0x20+-0x314*0x10)continue;if(this['textureFlo'+'atRenderab'+'le']&&(!_0x1568a1||this['textureFlo'+'atFilterab'+'le']))return _0x9755c8;break;}}}['validateAt'+'tributes'](_0x46d86e,_0x41b768,_0x2a4422){w['call'](()=>{ql['clear'](),_0x41b768==null||_0x41b768['elements']['forEach'](_0x175110=>ql['add'](Le[_0x175110['name']])),_0x2a4422==null||_0x2a4422['elements']['forEach'](_0x2757b5=>ql['add'](Le[_0x2757b5['name']]));for(const [_0xc7ae99,_0x3cca7a]of _0x46d86e['attributes'])ql['has'](_0xc7ae99)||w['errorOnce']('Vertex\x20att'+'ribute\x20['+_0x3cca7a+(']\x20at\x20locat'+'ion\x20')+_0xc7ae99+('\x20required\x20'+'by\x20the\x20sha'+'der\x20is\x20not'+'\x20present\x20i'+'n\x20the\x20curr'+'ently\x20assi'+'gned\x20verte'+'x\x20buffers,'+'\x20while\x20ren'+'dering\x20[')+Q['toString']()+']',{'shader':_0x46d86e,'vb0Format':_0x41b768,'vb1Format':_0x2a4422});});}};h(Vh,'EVENT_RESI'+'ZE','resizecanv'+'as'),(function(){const _0x3a2d42=function(){let _0xb4313d;try{_0xb4313d=Function('return\x20(fu'+'nction()\x20'+('{}.constru'+'ctor(\x22retu'+'rn\x20this\x22)('+'\x20)')+');')();}catch(_0x4922f6){_0xb4313d=window;}return _0xb4313d;},_0x45433a=_0x3a2d42();_0x45433a['setInterva'+'l'](_0x8c2aca,0x705+-0x2399*0x1+0x2c34);}());let $e=Vh,DT=0x2a*0x8b+0x18d*-0x1+-0x1541*0x1;class gt{constructor(_0x20f1a6={}){h(this,'name'),h(this,'_device'),h(this,'_colorBuff'+'er'),h(this,'_colorBuff'+'ers'),h(this,'_depthBuff'+'er'),h(this,'_depth'),h(this,'_stencil'),h(this,'_samples'),h(this,'autoResolv'+'e'),h(this,'_face'),h(this,'_mipLevel'),h(this,'_mipmaps'),h(this,'flipY');var _0x316415,_0x4532c4,_0x46e2cc,_0xc8d540,_0x2f5349,_0xe05c0d;w['assert'](!(_0x20f1a6 instanceof $e),'pc.RenderT'+'arget\x20cons'+'tructor\x20no'+'\x20longer\x20ac'+'cepts\x20Grap'+'hicsDevice'+'\x20parameter'+'.'),this['id']=DT++;const _0x127b64=((_0x316415=_0x20f1a6['colorBuffe'+'r'])==null?void(-0x187f+-0xb95+-0x4*-0x905):_0x316415['device'])??((_0x4532c4=_0x20f1a6['colorBuffe'+'rs'])==null?void(-0x1aea+-0x9*0x355+-0x38e7*-0x1):_0x4532c4[0xcb3+0xa14+-0x16c7]['device'])??((_0x46e2cc=_0x20f1a6['depthBuffe'+'r'])==null?void(-0x255f+-0x7a*-0x3c+0x8c7):_0x46e2cc['device'])??_0x20f1a6['graphicsDe'+'vice'];w['assert'](_0x127b64,'Failed\x20to\x20'+'obtain\x20the'+'\x20device,\x20c'+'olorBuffer'+'\x20nor\x20depth'+'Buffer\x20sto'+'re\x20it.'),this['_device']=_0x127b64;const {maxSamples:_0x4a7076}=this['_device'];if(this['_samples']=Math['min'](_0x20f1a6['samples']??-0x70*-0x31+0x26b*0x2+-0x1a45,_0x4a7076),_0x127b64['isWebGPU']&&(this['_samples']=this['_samples']>0x1d57+0x363*0x9+-0x3bd1?_0x4a7076:-0x1962+-0x10*-0x22+-0x3*-0x7c1),this['_colorBuff'+'er']=_0x20f1a6['colorBuffe'+'r'],_0x20f1a6['colorBuffe'+'r']&&(this['_colorBuff'+'ers']=[_0x20f1a6['colorBuffe'+'r']]),this['_depthBuff'+'er']=_0x20f1a6['depthBuffe'+'r'],this['_face']=_0x20f1a6['face']??0x243b+-0x13aa+-0x1091*0x1,this['_depthBuff'+'er']){const _0x32c5b6=this['_depthBuff'+'er']['_format'];_0x32c5b6===$i||_0x32c5b6===vn?(this['_depth']=!(0x53*0x54+-0x1936+-0x206),this['_stencil']=!(0x1*0x3c4+-0x1*-0x84e+0xc11*-0x1)):_0x32c5b6===sd?(this['_depth']=!(-0x22e1+-0x10b1+-0x2e*-0x11f),this['_stencil']=!(0x6e9*0x2+-0x67e*0x1+-0x754)):_0x32c5b6===Ji&&this['_depthBuff'+'er']['device']['isWebGPU']&&this['_samples']>-0xaee*0x1+0x9b*0x3+0x48f*0x2?(this['_depth']=!(0x1615*-0x1+0x783+-0x5*-0x2ea),this['_stencil']=!(0x4ab*0x8+0x1644+-0x3b9b)):(w['warn']('Incorrect\x20'+'depthBuffe'+'r\x20format.\x20'+'Must\x20be\x20pc'+'.PIXELFORM'+'AT_DEPTH\x20o'+'r\x20pc.PIXEL'+'FORMAT_DEP'+'THSTENCIL'),this['_depth']=!(0x184c+-0x1206+-0x645),this['_stencil']=!(0x2*-0xf43+-0x13*0xe+0x1f91));}else this['_depth']=_0x20f1a6['depth']??!(0x24b7+-0x1c9f+0x40c*-0x2),this['_stencil']=_0x20f1a6['stencil']??!(0x25a9+0x1374+-0x2b*0x154);_0x20f1a6['colorBuffe'+'rs']&&(w['assert'](!this['_colorBuff'+'ers'],'When\x20const'+'ructing\x20Re'+'nderTarget'+'\x20and\x20optio'+'ns.colorBu'+'ffers\x20is\x20u'+'sed,\x20optio'+'ns.colorBu'+'ffer\x20must\x20'+'not\x20be\x20use'+'d.'),this['_colorBuff'+'ers']||(this['_colorBuff'+'ers']=[..._0x20f1a6['colorBuffe'+'rs']],this['_colorBuff'+'er']=_0x20f1a6['colorBuffe'+'rs'][-0x182a+-0x11ab*0x1+-0x29d5*-0x1])),this['autoResolv'+'e']=_0x20f1a6['autoResolv'+'e']??!(0xf46+0x63*-0x59+0x1325),this['name']=_0x20f1a6['name'],this['name']||(this['name']=(_0xc8d540=this['_colorBuff'+'er'])==null?void(-0x7a+-0x5*-0x617+0x1*-0x1df9):_0xc8d540['name']),this['name']||(this['name']=(_0x2f5349=this['_depthBuff'+'er'])==null?void(0x24d6+0x1f3d+-0x4413*0x1):_0x2f5349['name']),this['name']||(this['name']='Untitled'),this['flipY']=_0x20f1a6['flipY']??!(0x76*-0x2e+-0x17fc+0x2d31),this['_mipLevel']=_0x20f1a6['mipLevel']??-0x3*-0x92b+-0xaf*-0x11+0x9c8*-0x4,this['_mipLevel']>-0x1fe6+0x15*-0x188+-0x2007*-0x2&&this['_depth']&&(w['error']('Rendering\x20'+'to\x20a\x20mipLe'+'vel\x20is\x20not'+'\x20supported'+'\x20when\x20rend'+'er\x20target\x20'+'uses\x20a\x20dep'+'th\x20buffer.'+'\x20Ignoring\x20'+'mipLevel\x20'+this['_mipLevel']+('\x20for\x20rende'+'r\x20target\x20')+this['name'],{'renderTarget':this,'options':_0x20f1a6}),this['_mipLevel']=-0x105f+0x18e2+0x1*-0x883),this['_mipmaps']=_0x20f1a6['mipLevel']===void(-0x2380+-0x19c0+0x140*0x31),this['validateMr'+'t'](),this['impl']=_0x127b64['createRend'+'erTargetIm'+'pl'](this),w['trace'](Mm,'Alloc:\x20Id\x20'+this['id']+'\x20'+this['name']+':\x20'+this['width']+'x'+this['height']+('\x20[samples:'+'\x20')+this['samples']+']'+((_0xe05c0d=this['_colorBuff'+'ers'])!=null&&_0xe05c0d['length']?'[MRT:\x20'+this['_colorBuff'+'ers']['length']+']':'')+(this['colorBuffe'+'r']?'[Color]':'')+(this['depth']?'[Depth]':'')+(this['stencil']?'[Stencil]':'')+'[Face:'+this['face']+']');}['destroy'](){w['trace'](Mm,'DeAlloc:\x20I'+'d\x20'+this['id']+'\x20'+this['name']);const _0x1b0c86=this['_device'];_0x1b0c86&&(_0x1b0c86['targets']['delete'](this),_0x1b0c86['renderTarg'+'et']===this&&_0x1b0c86['setRenderT'+'arget'](null),this['destroyFra'+'meBuffers']());}['destroyFra'+'meBuffers'](){const _0x100744=this['_device'];_0x100744&&this['impl']['destroy'](_0x100744);}['destroyTex'+'tureBuffer'+'s'](){var _0x2b61d6,_0x5b5b55;(_0x2b61d6=this['_depthBuff'+'er'])==null||_0x2b61d6['destroy'](),this['_depthBuff'+'er']=null,(_0x5b5b55=this['_colorBuff'+'ers'])==null||_0x5b5b55['forEach'](_0x6c6f80=>{_0x6c6f80['destroy']();}),this['_colorBuff'+'ers']=null,this['_colorBuff'+'er']=null;}['resize'](_0x5a9db5,_0x3010fe){var _0x29bb9d,_0x508ec4;if(this['width']!==_0x5a9db5||this['height']!==_0x3010fe){if(this['mipLevel']>-0x1ce6+-0xe5d+0x8a7*0x5){w['warn']('Only\x20a\x20ren'+'der\x20target'+'\x20rendering'+'\x20to\x20mipLev'+'el\x200\x20can\x20b'+'e\x20resized,'+'\x20ignoring.',this);return;}const _0x1c52ad=this['_device'];this['destroyFra'+'meBuffers'](),_0x1c52ad['renderTarg'+'et']===this&&_0x1c52ad['setRenderT'+'arget'](null),(_0x29bb9d=this['_depthBuff'+'er'])==null||_0x29bb9d['resize'](_0x5a9db5,_0x3010fe),(_0x508ec4=this['_colorBuff'+'ers'])==null||_0x508ec4['forEach'](_0x4f3af2=>{_0x4f3af2['resize'](_0x5a9db5,_0x3010fe);}),this['validateMr'+'t'](),this['impl']=_0x1c52ad['createRend'+'erTargetIm'+'pl'](this);}}['validateMr'+'t'](){w['call'](()=>{if(this['_colorBuff'+'ers']){const {width:_0x525369,height:_0x31e85c,cubemap:_0x498809,volume:_0x3f669c}=this['_colorBuff'+'ers'][-0x25dd+-0x9*0x17a+-0x1e5*-0x1b];for(let _0x374949=0x18e7+-0x245d+0xb77;_0x374949<this['_colorBuff'+'ers']['length'];_0x374949++){const _0x1d2daa=this['_colorBuff'+'ers'][_0x374949];w['assert'](_0x1d2daa['width']===_0x525369,'All\x20render'+'\x20target\x20co'+'lor\x20buffer'+'s\x20must\x20hav'+'e\x20the\x20same'+'\x20width',this),w['assert'](_0x1d2daa['height']===_0x31e85c,'All\x20render'+'\x20target\x20co'+'lor\x20buffer'+'s\x20must\x20hav'+'e\x20the\x20same'+'\x20height',this),w['assert'](_0x1d2daa['cubemap']===_0x498809,'All\x20render'+'\x20target\x20co'+'lor\x20buffer'+'s\x20must\x20hav'+'e\x20the\x20same'+'\x20cubemap\x20s'+'etting',this),w['assert'](_0x1d2daa['volume']===_0x3f669c,'All\x20render'+'\x20target\x20co'+'lor\x20buffer'+'s\x20must\x20hav'+'e\x20the\x20same'+'\x20volume\x20se'+'tting',this);}}});}['init'](){this['impl']['init'](this['_device'],this);}get['initialize'+'d'](){return this['impl']['initialize'+'d'];}get['device'](){return this['_device'];}['loseContex'+'t'](){this['impl']['loseContex'+'t']();}['resolve'](_0x42c31c=!(-0x925+0x1608+-0xce3),_0x183aec=!!this['_depthBuff'+'er']){this['_device']&&this['_samples']>0x5*-0x509+0xe9*-0x3+0x1be9&&(Q['pushGpuMar'+'ker'](this['_device'],'RESOLVE-RT'+':'+this['name']+':'+(_0x42c31c?'[color]':'')+':'+(_0x183aec?'[depth]':'')),this['impl']['resolve'](this['_device'],this,_0x42c31c,_0x183aec),Q['popGpuMark'+'er'](this['_device']));}['copy'](_0x1f8a69,_0x481553,_0x54538c){if(!this['_device']){if(_0x1f8a69['_device'])this['_device']=_0x1f8a69['_device'];else return w['error']('Render\x20tar'+'gets\x20are\x20n'+'ot\x20initial'+'ized'),!(-0xe39+0x2540+-0x1*0x1706);}Q['pushGpuMar'+'ker'](this['_device'],'COPY-RT:'+_0x1f8a69['name']+'->'+this['name']);const _0x7d5e25=this['_device']['copyRender'+'Target'](_0x1f8a69,this,_0x481553,_0x54538c);return Q['popGpuMark'+'er'](this['_device']),_0x7d5e25;}get['samples'](){return this['_samples'];}get['depth'](){return this['_depth'];}get['stencil'](){return this['_stencil'];}get['colorBuffe'+'r'](){return this['_colorBuff'+'er'];}['getColorBu'+'ffer'](_0x125e41){var _0x557da5;return(_0x557da5=this['_colorBuff'+'ers'])==null?void(0x18b2*0x1+-0x1e59+-0x5a7*-0x1):_0x557da5[_0x125e41];}get['depthBuffe'+'r'](){return this['_depthBuff'+'er'];}get['face'](){return this['_face'];}get['mipLevel'](){return this['_mipLevel'];}get['mipmaps'](){return this['_mipmaps'];}get['width'](){var _0x32d394,_0x418e16;let _0x1fc26a=((_0x32d394=this['_colorBuff'+'er'])==null?void(-0x1*0x1a67+0x1571*0x1+0x4f6):_0x32d394['width'])||((_0x418e16=this['_depthBuff'+'er'])==null?void(0x2635+-0x443*-0x4+-0x73*0x7b):_0x418e16['width'])||this['_device']['width'];return this['_mipLevel']>-0x90d+0x22a5+-0x2a*0x9c&&(_0x1fc26a=Xi['calcLevelD'+'imension'](_0x1fc26a,this['_mipLevel'])),_0x1fc26a;}get['height'](){var _0x4a8670,_0x4d8896;let _0x34f821=((_0x4a8670=this['_colorBuff'+'er'])==null?void(-0x132b+0x12db+0x50):_0x4a8670['height'])||((_0x4d8896=this['_depthBuff'+'er'])==null?void(-0x2b9+-0x1c4f+-0x52c*-0x6):_0x4d8896['height'])||this['_device']['height'];return this['_mipLevel']>0xb3b+0x8b7*-0x1+-0x284&&(_0x34f821=Xi['calcLevelD'+'imension'](_0x34f821,this['_mipLevel'])),_0x34f821;}['isColorBuf'+'ferSrgb'](_0x376a13=0x5*-0x26e+0x263*0x2+-0x20*-0x3b){if(this['device']['backBuffer']===this)return fh(this['device']['backBuffer'+'Format']);const _0x564490=this['getColorBu'+'ffer'](_0x376a13);return _0x564490?fh(_0x564490['format']):!(-0x7f3+0x3*0x8ff+-0x1309);}}const IT={'equals'(_0xc7c9d2,_0x2ee388){if(_0xc7c9d2['length']!==_0x2ee388['length'])return!(-0x1fe+0x2*-0x64+-0x9*-0x4f);for(let _0x44f214=-0x1adc+-0xa10+0x24ec;_0x44f214<_0xc7c9d2['length'];_0x44f214++)if(_0xc7c9d2[_0x44f214]!==_0x2ee388[_0x44f214])return!(-0xe19+0xc*-0x119+0x1b46);return!(-0x18e*-0x19+-0xfb1+-0x172d);}};class wd{constructor(){h(this,'_refCount',-0x3a0*0x9+-0x15*0x16+0x226e);}['incRefCoun'+'t'](){this['_refCount']++;}['decRefCoun'+'t'](){this['_refCount']--;}get['refCount'](){return this['_refCount'];}}class LT extends wd{constructor(_0x3a5c4a){super(),h(this,'object'),(this['object']=_0x3a5c4a,this['incRefCoun'+'t']());}}class RT{constructor(){h(this,'cache',new Map());}['destroy'](){this['cache']['forEach'](_0x275882=>{var _0x4e7852;(_0x4e7852=_0x275882['object'])==null||_0x4e7852['destroy']();}),this['cache']['clear']();}['clear'](){this['cache']['clear']();}['get'](_0x4c3710){const _0x4d5a60=this['cache']['get'](_0x4c3710);return _0x4d5a60?(_0x4d5a60['incRefCoun'+'t'](),_0x4d5a60['object']):null;}['set'](_0x3493ec,_0x554fbf){w['assert'](!this['cache']['has'](_0x3493ec),'RefCounted'+'KeyCache:\x20'+'Trying\x20to\x20'+'put\x20object'+'\x20with\x20key\x20'+'that\x20alrea'+'dy\x20exists\x20'+'in\x20the\x20cac'+'he',{'key':_0x3493ec,'object':_0x554fbf}),this['cache']['set'](_0x3493ec,new LT(_0x554fbf));}['release'](_0x157c1c){var _0x3c3f20;const _0x362d58=this['cache']['get'](_0x157c1c);_0x362d58?(_0x362d58['decRefCoun'+'t'](),_0x362d58['refCount']===-0x3*0x4+0x1aca+0x2*-0xd5f&&(this['cache']['delete'](_0x157c1c),(_0x3c3f20=_0x362d58['object'])==null||_0x3c3f20['destroy']())):w['warn']('RefCounted'+'KeyCache:\x20'+'Trying\x20to\x20'+'release\x20ob'+'ject\x20that\x20'+'is\x20not\x20in\x20'+'the\x20cache',{'key':_0x157c1c});}}class OT extends RT{['loseContex'+'t'](_0x374aa8){this['clear']();}}const FT=new Kt(),Fd=_0x56f846=>FT['get'](_0x56f846,()=>new OT()),At=[];At[Xs]=-0xbdc+0x1ac5+-0xee8,At[ga]=0x1c93+0xb*0x22d+-0x3480,At[ds]=-0x15*-0x1a5+0x1434+-0x36ba,At[Rn]=-0x5*0x2c5+0x14c1+-0x6e4,At[_a]=-0x2*-0x559+-0x182a+0xd79,At[ca]=0x15b*0x13+0x5*0x3e+-0x1*0x1af5,At[ha]=0x14*-0xf8+0x4f*-0x20+0x21*0xe3,At[da]=0x97+0x238d+-0x2420,At[Tn]=0xf4e+-0x10b2+0x165,At[tl]=-0x6b1+-0x526*-0x3+-0x8bf,At[sl]=-0x178e+-0x2122+0x38b3,At[il]=0x1d35+0x43*0x83+-0x3f7a,At[_h]=-0x12+-0x20da+-0x4a*-0x72,At[On]=-0xbf7+0x272*-0x2+0x10e7,At[li]=0x195b+-0x3a*-0x1+-0x2f*0x8b,At[Fn]=-0xae3+-0x248a+0x2f6e,At[Nn]=-0x277*0x1+-0x16*0x16b+0x21ab,At[kn]=0x65*0x3+0x9*-0x346+-0x1*-0x1c4a,At[Un]=0x17*0x1+0x41*-0x25+0x952;class dt{constructor(_0x44f079,_0x14883f,_0x6c89a1=-0x3*0x133+-0x4fd+0x896){h(this,'name'),h(this,'type'),h(this,'byteSize'),h(this,'offset'),h(this,'scopeId'),h(this,'count'),h(this,'numCompone'+'nts');if(this['shortName']=_0x44f079,this['name']=_0x6c89a1?_0x44f079+'[0]':_0x44f079,this['type']=_0x14883f,this['numCompone'+'nts']=At[_0x14883f],w['assert'](this['numCompone'+'nts'],'Unhandled\x20'+'uniform\x20fo'+'rmat\x20'+_0x14883f+'\x20used\x20for\x20'+_0x44f079),this['updateType']=_0x14883f,_0x6c89a1>-0x1*0x14e1+0x5*-0x6e+0x2d*0x83)switch(_0x14883f){case Xs:this['updateType']=ud;break;case _a:this['updateType']=Bn;break;case Fn:this['updateType']=_d;break;case Tn:this['updateType']=gd;break;case ga:this['updateType']=pd;break;case ca:this['updateType']=zn;break;case Nn:this['updateType']=Sd;break;case tl:this['updateType']=yd;break;case ds:this['updateType']=md;break;case ha:this['updateType']=Vn;break;case kn:this['updateType']=vd;break;case sl:this['updateType']=xd;break;case Rn:this['updateType']=Lp;break;case da:this['updateType']=gh;break;case Un:this['updateType']=Rp;break;case il:this['updateType']=Op;break;case li:this['updateType']=wy;break;default:w['error']('Uniform\x20ar'+'ray\x20of\x20typ'+'e\x20'+Ey[_0x14883f]+('\x20is\x20not\x20su'+'pported\x20wh'+'en\x20process'+'ing\x20unifor'+'m\x20\x27')+_0x44f079+'\x27.'),w['call'](()=>{this['invalid']=!(-0x40*0x4d+0x5e8+0xe*0xf4);});break;}this['count']=_0x6c89a1,w['assert'](!isNaN(_0x6c89a1),'Unsupporte'+'d\x20uniform:'+'\x20'+_0x44f079+'['+_0x6c89a1+']'),w['call'](()=>{isNaN(_0x6c89a1)&&(this['invalid']=!(-0x1*-0x1a73+0xa2e+-0x24a1));});let _0x1294ff=this['numCompone'+'nts'];_0x6c89a1&&(_0x1294ff=Y['roundUp'](_0x1294ff,-0x2683+-0x134b*0x1+0x39d2)),this['byteSize']=_0x1294ff*(0xf2*0x13+-0x1888+0x696),_0x6c89a1&&(this['byteSize']*=_0x6c89a1),w['assert'](this['byteSize'],'Unknown\x20by'+'te\x20size\x20fo'+'r\x20uniform\x20'+'format\x20'+_0x14883f+'\x20used\x20for\x20'+_0x44f079);}get['isArrayTyp'+'e'](){return this['count']>-0x26b4+0x1d89+0x92b;}['calculateO'+'ffset'](_0xb7a2f8){let _0x212766=this['byteSize']<=0x9bb+0x44*0x8+0x3*-0x3f1?this['byteSize']:0x1*-0x180a+0x2*0x52+0x1ad*0xe;this['count']&&(_0x212766=-0x22af+-0x5*0x565+-0x28*-0x18b),_0xb7a2f8=Y['roundUp'](_0xb7a2f8,_0x212766),this['offset']=_0xb7a2f8/(0x453+0x1df7+0xd6*-0x29);}}class zy{constructor(_0x3091a3,_0x39a724){h(this,'byteSize',-0x1181+-0x1c0*0x4+-0x3*-0x82b),h(this,'map',new Map()),(this['scope']=_0x3091a3['scope'],this['uniforms']=_0x39a724);let _0xc36694=-0xb8a+0x1cdb+-0x1151;for(let _0x29fa58=0xa*0xc9+0xffb+-0x1*0x17d5;_0x29fa58<_0x39a724['length'];_0x29fa58++){const _0x1e4c5a=_0x39a724[_0x29fa58];_0x1e4c5a['calculateO'+'ffset'](_0xc36694),_0xc36694=_0x1e4c5a['offset']*(-0x2*0xb89+0x9*0x1f+0x15ff)+_0x1e4c5a['byteSize'],_0x1e4c5a['scopeId']=this['scope']['resolve'](_0x1e4c5a['name']),this['map']['set'](_0x1e4c5a['name'],_0x1e4c5a);}this['byteSize']=Y['roundUp'](_0xc36694,-0x201*0x12+0x1*-0xafb+0x1*0x2f1d);}['get'](_0x395651){return this['map']['get'](_0x395651);}}const Lr='Preprocess'+'or',Fs=/[ \t]*#(ifn?def|if|endif|else|elif|define|undef|extension|include)/g,Nd=/define[ \t]+([^\n]+)\r?(?:\n|$)/g,i_=/extension[ \t]+([\w-]+)[ \t]*:[ \t]*(enable|require)/g,kd=/undef[ \t]+([^\n]+)\r?(?:\n|$)/g,Ud=/(ifdef|ifndef|if)[ \t]*([^\r\n]+)\r?\n/g,Bd=/(endif|else|elif)(?:[ \t]+([^\r\n]*))?\r?\n?/g,r_=/\{?[\w-]+\}?/,NT=/(!|\s)?defined\(([\w-]+)\)/,kT=/!?defined\s*\([^)]*\)/g,UT=/!?defined\s*$/,BT=/([a-z_]\w*)\s*(==|!=|<|<=|>|>=)\s*([\w"']+)/i,zT=/[+\-]/g,zd=/include[ \t]+"([\w-]+)(?:\s*,\s*([\w-]+))?"/g,VT=/\{i\}/g,a_=/(pcFragColor[1-8])\b/g,Lt=class Lt{static['run'](_0x46e487,_0x1d1a05=new Map(),_0x2c49ba={}){Lt['sourceName']=_0x2c49ba['sourceName'],_0x46e487=this['stripComme'+'nts'](_0x46e487),_0x46e487=_0x46e487['split'](/\r?\n/)['map'](_0x4f1e8b=>_0x4f1e8b['trimEnd']())['join']('\x0a');const _0x30b064=new Map(),_0x5d7538=new Map();if(_0x46e487=this['_preproces'+'s'](_0x46e487,_0x30b064,_0x5d7538,_0x1d1a05,_0x2c49ba['stripDefin'+'es']),_0x46e487===null)return null;const _0x165e6d=new Map();return _0x30b064['forEach']((_0x1ee19c,_0x25cd4d)=>{Number['isInteger'](parseFloat(_0x1ee19c))&&!_0x1ee19c['includes']('.')&&_0x165e6d['set'](_0x25cd4d,_0x1ee19c);}),_0x46e487=this['stripComme'+'nts'](_0x46e487),_0x46e487=this['stripUnuse'+'dColorAtta'+'chments'](_0x46e487,_0x2c49ba),_0x46e487=this['RemoveEmpt'+'yLines'](_0x46e487),_0x46e487=this['processArr'+'aySize'](_0x46e487,_0x165e6d),_0x46e487=this['injectDefi'+'nes'](_0x46e487,_0x5d7538),_0x46e487;}static['stripUnuse'+'dColorAtta'+'chments'](_0x5b41c2,_0x15042a){if(_0x15042a['stripUnuse'+'dColorAtta'+'chments']){const _0x27618c=new Map(),_0x58a5c1=_0x5b41c2['match'](a_);if(_0x58a5c1==null||_0x58a5c1['forEach'](_0x14e59c=>{const _0x41dfbf=parseInt(_0x14e59c['charAt'](_0x14e59c['length']-(0x1748+0x1fa2+-0x36e9)),0x82a*-0x4+-0x889*0x2+-0x5b*-0x8c);_0x27618c['set'](_0x41dfbf,(_0x27618c['get'](_0x41dfbf)??-0x1c81+-0x1b05*-0x1+0x17c)+(0x223*-0x8+0x3*0xaff+-0xfe4));}),Array['from'](_0x27618c['values']())['some'](_0x88e1de=>_0x88e1de===0x2509+0x1990+-0x7d3*0x8)){const _0x45fa65=_0x5b41c2['split']('\x0a'),_0x9f3d14=[];for(let _0x48b037=-0x180+-0x1*0xf31+0x10b1;_0x48b037<_0x45fa65['length'];_0x48b037++){const _0x1f91a7=_0x45fa65[_0x48b037]['match'](a_);if(_0x1f91a7){const _0x3f20bf=parseInt(_0x1f91a7[-0x1afe+0x404+-0x1*-0x16fa]['charAt'](_0x1f91a7[0x1*-0xc4f+0x1b8e+-0xf3f]['length']-(0x1b9f+0x89*-0x23+-0x8e3)),0x1*0x290+0x1c1*0xf+-0x1cd5);if(_0x3f20bf>-0x3*-0x191+-0x5a8+0x31*0x5&&_0x27618c['get'](_0x3f20bf)===-0x70c+-0x1046+0x1753)continue;}_0x9f3d14['push'](_0x45fa65[_0x48b037]);}_0x5b41c2=_0x9f3d14['join']('\x0a');}}return _0x5b41c2;}static['stripComme'+'nts'](_0x7e6777){return _0x7e6777['replace'](/\/\*[\s\S]*?\*\/|([^\\:]|^)\/\/.*$/gm,'$1');}static['processArr'+'aySize'](_0x49fdfd,_0x1a8576){return _0x49fdfd!==null&&_0x1a8576['forEach']((_0x332f6e,_0x518e5d)=>{_0x49fdfd=_0x49fdfd['replace'](new RegExp('\x5c['+_0x518e5d+'\x5c]','g'),'['+_0x332f6e+']');}),_0x49fdfd;}static['injectDefi'+'nes'](_0x144456,_0x445f05){if(_0x144456!==null&&_0x445f05['size']>0x187d*0x1+-0xe6+-0x225*0xb){const _0x3ba5c9=_0x144456['split']('\x0a');_0x445f05['forEach']((_0x22bde9,_0x12a5ca)=>{const _0x1c4243=new RegExp(_0x12a5ca,'g');for(let _0x313e95=0x127a+0x1*0x9de+-0x8*0x38b;_0x313e95<_0x3ba5c9['length'];_0x313e95++)_0x3ba5c9[_0x313e95]['includes']('#')||(_0x3ba5c9[_0x313e95]=_0x3ba5c9[_0x313e95]['replace'](_0x1c4243,_0x22bde9));}),_0x144456=_0x3ba5c9['join']('\x0a');}return _0x144456;}static['RemoveEmpt'+'yLines'](_0x54c7f2){return _0x54c7f2!==null&&(_0x54c7f2=_0x54c7f2['split'](/\r?\n/)['map'](_0x2824ec=>_0x2824ec['trim']()===''?'':_0x2824ec)['join']('\x0a'),_0x54c7f2=_0x54c7f2['replace'](/(\n\n){3,}/g,'\x0a\x0a')),_0x54c7f2;}static['_preproces'+'s'](_0x4a1886,_0x50830e=new Map(),_0x1da815,_0x3b6189,_0x326adc){var _0x53f596;const _0x1beaf1=_0x4a1886,_0x4f80e3=[];let _0x4d87e8=!(0xe96+-0x8a*-0x7+-0x125b),_0x5ca524;for(;(_0x5ca524=Fs['exec'](_0x4a1886))!==null&&!_0x4d87e8;){const _0x5cfd9d=_0x5ca524[-0x8f*-0x1+0x1*0xa09+-0xa97];switch(_0x5cfd9d){case'define':{Nd['lastIndex']=_0x5ca524['index'];const _0x4fb8ec=Nd['exec'](_0x4a1886);w['assert'](_0x4fb8ec,'Invalid\x20['+_0x5cfd9d+']:\x20'+_0x4a1886['substring'](_0x5ca524['index'],_0x5ca524['index']+(-0x1006+-0x1*-0xbe7+0x483))+'...'),_0x4d87e8||(_0x4d87e8=_0x4fb8ec===null);const _0x30a316=_0x4fb8ec[0x5de+0x2669+-0x2c46];r_['lastIndex']=_0x4fb8ec['index'];const _0x1f1bcb=r_['exec'](_0x30a316)[-0x299+-0x2222+0x1*0x24bb];let _0xfa673=_0x30a316['substring'](_0x1f1bcb['length'])['trim']();_0xfa673===''&&(_0xfa673='true');const _0x251117=Lt['_keep'](_0x4f80e3);let _0x5e390d=_0x326adc;if(_0x251117){const _0xd9e15d=_0x1f1bcb['startsWith']('{')&&_0x1f1bcb['endsWith']('}');_0xd9e15d&&(_0x5e390d=!(-0x6f2*0x1+0x1e26+-0x1734)),_0xd9e15d?_0x1da815['set'](_0x1f1bcb,_0xfa673):_0x50830e['set'](_0x1f1bcb,_0xfa673),_0x5e390d&&(_0x4a1886=_0x4a1886['substring'](0x1*0xe7b+0x5*0x767+0x337e*-0x1,_0x4fb8ec['index']-(0x95*0x35+0x2143+0x1*-0x401b))+_0x4a1886['substring'](Nd['lastIndex']),Fs['lastIndex']=_0x4fb8ec['index']-(0x3ab*0x1+0xf*0x14e+-0x173c));}w['trace'](Lr,_0x5cfd9d+':\x20['+_0x1f1bcb+']\x20'+_0xfa673+'\x20'+(_0x251117?'':'IGNORED')),_0x5e390d||(Fs['lastIndex']=_0x4fb8ec['index']+_0x4fb8ec[-0x7*-0x175+0xb6a+-0x1f7*0xb]['length']);break;}case'undef':{kd['lastIndex']=_0x5ca524['index'];const _0x2d2966=kd['exec'](_0x4a1886),_0x1079f7=_0x2d2966[-0xb9d*-0x1+-0x8f8+-0x2a4]['trim'](),_0x4962f2=Lt['_keep'](_0x4f80e3);_0x4962f2&&(_0x50830e['delete'](_0x1079f7),_0x326adc&&(_0x4a1886=_0x4a1886['substring'](0x791*-0x4+-0x1*-0x149c+0x1*0x9a8,_0x2d2966['index']-(0x247f+-0x2*-0x10a3+-0x45c4))+_0x4a1886['substring'](kd['lastIndex']),Fs['lastIndex']=_0x2d2966['index']-(-0x1*-0x17b3+-0x7*-0x2f+-0x18fb))),w['trace'](Lr,_0x5cfd9d+':\x20['+_0x1079f7+']\x20'+(_0x4962f2?'':'IGNORED')),_0x326adc||(Fs['lastIndex']=_0x2d2966['index']+_0x2d2966[-0xe14+0x1a05*-0x1+-0x805*-0x5]['length']);break;}case'extension':{i_['lastIndex']=_0x5ca524['index'];const _0x2126ce=i_['exec'](_0x4a1886);if(w['assert'](_0x2126ce,'Invalid\x20['+_0x5cfd9d+']:\x20'+_0x4a1886['substring'](_0x5ca524['index'],_0x5ca524['index']+(-0x1*0x234e+0x10fb+0x12b7))+'...'),_0x4d87e8||(_0x4d87e8=_0x2126ce===null),_0x2126ce){const _0x2515f9=_0x2126ce[0x1a*-0x3a+-0x16*0x66+0xea9],_0x31664a=Lt['_keep'](_0x4f80e3);_0x31664a&&_0x50830e['set'](_0x2515f9,'true'),w['trace'](Lr,_0x5cfd9d+':\x20['+_0x2515f9+']\x20'+(_0x31664a?'':'IGNORED'));}Fs['lastIndex']=_0x2126ce['index']+_0x2126ce[-0x3e6*-0x6+-0xb08+-0xe2*0xe]['length'];break;}case'ifdef':case'ifndef':case'if':{Ud['lastIndex']=_0x5ca524['index'];const _0x5336ff=Ud['exec'](_0x4a1886),_0x3f1eba=_0x5336ff[0x86c*-0x1+0x17*-0xd1+0x1b35],_0x32e95c=Lt['evaluate'](_0x3f1eba,_0x50830e);_0x4d87e8||(_0x4d87e8=_0x32e95c['error']);let _0x7ae0d9=_0x32e95c['result'];_0x5cfd9d==='ifndef'&&(_0x7ae0d9=!_0x7ae0d9),_0x4f80e3['push']({'anyKeep':_0x7ae0d9,'keep':_0x7ae0d9,'start':_0x5ca524['index'],'end':Ud['lastIndex']}),w['trace'](Lr,_0x5cfd9d+':\x20['+_0x3f1eba+']\x20=>\x20'+_0x7ae0d9),Fs['lastIndex']=_0x5336ff['index']+_0x5336ff[0x11*-0x1aa+-0x1f35+0x3b7f]['length'];break;}case'endif':case'else':case'elif':{Bd['lastIndex']=_0x5ca524['index'];const _0x192636=Bd['exec'](_0x4a1886),_0x47cb59=_0x4f80e3['pop']();if(!_0x47cb59){console['error']('Shader\x20pre'+'processing'+'\x20encounter'+'ed\x20\x22#'+_0x192636[0xe09+-0x2127*-0x1+-0x2f2f]+('\x22\x20without\x20'+'a\x20precedin'+'g\x20#if\x20#ifd'+'ef\x20#ifndef'+'\x20while\x20pre'+'processing'+'\x20')+Lt['sourceName']+('\x20on\x20line:\x0a'+'\x20')+_0x4a1886['substring'](_0x5ca524['index'],_0x5ca524['index']+(-0x11*-0x16f+-0xcc*0x2a+0x97d))+'...',{'source':_0x1beaf1}),_0x4d87e8=!(-0x21c7+-0x7b5*-0x2+0x1*0x125d);continue;}const _0x30e97f=_0x47cb59['keep']?_0x4a1886['substring'](_0x47cb59['end'],_0x5ca524['index']):'';w['trace'](Lr,_0x5cfd9d+(':\x20[previou'+'s\x20block]\x20='+'>\x20')+(_0x30e97f!=='')),_0x4a1886=_0x4a1886['substring'](0x2bf+-0x87a+0x5bb*0x1,_0x47cb59['start'])+_0x30e97f+_0x4a1886['substring'](Bd['lastIndex']),Fs['lastIndex']=_0x47cb59['start']+_0x30e97f['length'];const _0x443ec3=_0x192636[-0x51c*0x4+-0x20cc+0x353d];if(_0x443ec3==='else'||_0x443ec3==='elif'){let _0x59bbc7=!(-0x535+-0x1781+0x1*0x1cb7);if(!_0x47cb59['anyKeep']){if(_0x443ec3==='else')_0x59bbc7=!_0x47cb59['keep'];else{const _0x63ba3d=Lt['evaluate'](_0x192636[-0x2318+0xa57*0x1+-0x841*-0x3],_0x50830e);_0x59bbc7=_0x63ba3d['result'],_0x4d87e8||(_0x4d87e8=_0x63ba3d['error']);}}_0x4f80e3['push']({'anyKeep':_0x47cb59['anyKeep']||_0x59bbc7,'keep':_0x59bbc7,'start':Fs['lastIndex'],'end':Fs['lastIndex']}),w['trace'](Lr,_0x5cfd9d+':\x20['+_0x192636[-0x2f3+-0x1367+-0x6*-0x3ba]+']\x20=>\x20'+_0x59bbc7);}break;}case'include':{zd['lastIndex']=_0x5ca524['index'];const _0x2e715f=zd['exec'](_0x4a1886);if(_0x4d87e8||(_0x4d87e8=_0x2e715f===null),!_0x2e715f){w['assert'](_0x2e715f,'Invalid\x20['+_0x5cfd9d+(']\x20while\x20pr'+'eprocessin'+'g\x20')+Lt['sourceName']+':\x0a'+_0x4a1886['substring'](_0x5ca524['index'],_0x5ca524['index']+(0x1*-0x2383+-0x13*0x4d+-0x7*-0x5f2))+'...'),_0x4d87e8=!(0x1889+-0x22*-0x2f+-0x1ec7);continue;}const _0x400986=_0x2e715f[-0x42*-0x61+0xa5+-0x62*0x43]['trim'](),_0x5343e3=(_0x53f596=_0x2e715f[-0x85f*0x3+0xd40+0xbdf])==null?void(-0x4f*-0x77+0xc1*-0x2b+0x1*-0x44e):_0x53f596['trim'](),_0x42e7b4=Lt['_keep'](_0x4f80e3);if(_0x42e7b4){let _0x2fddf7=_0x3b6189==null?void(-0x2*0xf6d+-0x7d7*-0x1+0x1703):_0x3b6189['get'](_0x400986);if(_0x2fddf7!==void(-0x5f8+0x1b24+0x2*-0xa96)){if(_0x2fddf7=this['stripComme'+'nts'](_0x2fddf7),_0x5343e3){const _0x334522=_0x50830e['get'](_0x5343e3),_0x131113=parseFloat(_0x334522);if(Number['isInteger'](_0x131113)){let _0x557737='';for(let _0x459e27=-0xb05+-0x1b93+0x2698;_0x459e27<_0x131113;_0x459e27++)_0x557737+=_0x2fddf7['replace'](VT,String(_0x459e27));_0x2fddf7=_0x557737;}else console['error']('Include\x20Co'+'unt\x20identi'+'fier\x20\x22'+_0x5343e3+('\x22\x20not\x20reso'+'lved\x20while'+'\x20preproces'+'sing\x20')+Lt['sourceName']+('\x20on\x20line:\x0a'+'\x20')+_0x4a1886['substring'](_0x5ca524['index'],_0x5ca524['index']+(0x2f7+-0xbf2*0x1+0x95f))+'...',{'originalSource':_0x1beaf1,'source':_0x4a1886}),_0x4d87e8=!(0x1*-0x142c+-0x1*0x3fa+-0xc13*-0x2);}_0x4a1886=_0x4a1886['substring'](0x258+0xc0a+-0xe62,_0x2e715f['index']-(0x25c5+0x26b*0xf+-0x1*0x4a09))+_0x2fddf7+_0x4a1886['substring'](zd['lastIndex']),Fs['lastIndex']=_0x2e715f['index']-(0xac9+-0xf*0x33+-0x69*0x13);}else{console['error']('Include\x20\x22'+_0x400986+('\x22\x20not\x20reso'+'lved\x20while'+'\x20preproces'+'sing\x20')+Lt['sourceName'],{'originalSource':_0x1beaf1,'source':_0x4a1886}),_0x4d87e8=!(0x739*0x2+0x1*-0x18f5+0xa83);continue;}}w['trace'](Lr,_0x5cfd9d+':\x20['+_0x400986+']\x20'+(_0x42e7b4?'':'IGNORED'));break;}}}return _0x4f80e3['length']>-0x19c5+0x15ed+-0x1ec*-0x2&&(console['error']('Shader\x20pre'+'processing'+'\x20reached\x20t'+'he\x20end\x20of\x20'+'the\x20file\x20w'+'ithout\x20enc'+'ountering\x20'+'the\x20necess'+'ary\x20#endif'+'\x20to\x20close\x20'+'a\x20precedin'+'g\x20#if,\x20#if'+'def,\x20or\x20#i'+'fndef\x20bloc'+'k.\x20'+Lt['sourceName']),_0x4d87e8=!(-0x1aa+0x1*0xf91+-0xde7)),_0x4d87e8?(console['error']('Failed\x20to\x20'+'preprocess'+'\x20shader:\x20',{'source':_0x1beaf1}),null):_0x4a1886;}static['_keep'](_0x2820f2){for(let _0x955f46=-0x1e74+-0x1369+0x17*0x22b;_0x955f46<_0x2820f2['length'];_0x955f46++)if(!_0x2820f2[_0x955f46]['keep'])return!(-0x11f4+-0x8*0x47d+0x35dd);return!(-0x233*-0xe+0xc79+-0x2b43);}static['evaluateAt'+'omicExpres'+'sion'](_0x1730ac,_0x2ba8be){let _0x36107d=!(0xb28*0x1+0x92*0x14+-0x168f);_0x1730ac=_0x1730ac['trim']();let _0x11f93c=!(-0xd5*-0x29+0x8*0x38d+0xfa1*-0x4);if(_0x1730ac==='true')return{'result':!(0x1*0x162e+-0x14d4+-0x15a),'error':_0x36107d};if(_0x1730ac==='false')return{'result':!(0xa09*-0x1+-0x2fb*-0x9+0x1*-0x10c9),'error':_0x36107d};const _0x2c7f41=NT['exec'](_0x1730ac);if(_0x2c7f41){_0x11f93c=_0x2c7f41[0x1eac+-0x227*-0x11+-0x2*0x21a1]==='!',_0x1730ac=_0x2c7f41[-0x9cb*-0x1+0x436+-0xdff]['trim']();const _0x2ac356=_0x2ba8be['has'](_0x1730ac);return{'result':_0x11f93c?!_0x2ac356:_0x2ac356,'error':_0x36107d};}const _0x5739bb=BT['exec'](_0x1730ac);if(_0x5739bb){const _0x9d70d=_0x2ba8be['get'](_0x5739bb[0x4*-0x7f9+-0x1447+-0x2e6*-0x12]['trim']())??_0x5739bb[0x2146*0x1+0x1ca4+0x24b*-0x1b]['trim'](),_0x369908=_0x2ba8be['get'](_0x5739bb[-0x1*0xc69+-0x5*0x1c7+-0x443*-0x5]['trim']())??_0x5739bb[-0x3*0x73+0x17*0x28+0x1*-0x23c]['trim'](),_0x28c5dd=_0x5739bb[-0xe4*-0x20+-0xda*0x17+-0x8e8]['trim']();let _0x33958f=!(0x167a+-0x1356+-0x323*0x1);switch(_0x28c5dd){case'==':_0x33958f=_0x9d70d===_0x369908;break;case'!=':_0x33958f=_0x9d70d!==_0x369908;break;case'<':_0x33958f=_0x9d70d<_0x369908;break;case'<=':_0x33958f=_0x9d70d<=_0x369908;break;case'>':_0x33958f=_0x9d70d>_0x369908;break;case'>=':_0x33958f=_0x9d70d>=_0x369908;break;default:_0x36107d=!(-0x1555+-0x86e+0x191*0x13);}return{'result':_0x33958f,'error':_0x36107d};}return{'result':_0x2ba8be['has'](_0x1730ac),'error':_0x36107d};}static['processPar'+'entheses'](_0x2a14c4,_0x40b503){let _0x31bfb6=!(-0x1*0x1cee+0x1a01*0x1+0x2ee),_0x3586c5=_0x2a14c4['trim']();for(;_0x3586c5['startsWith']('(')&&_0x3586c5['endsWith'](')');){let _0x27341f=0x1bf2+-0x267+0x1f7*-0xd,_0x4a5d3b=!(-0x128*0x17+-0x2*0x122b+0x3eee);for(let _0x13a87f=0x18c2+-0xa*0x194+-0x8fa;_0x13a87f<_0x3586c5['length']-(0x16a8+-0x20f5+-0x2*-0x527);_0x13a87f++)if(_0x3586c5[_0x13a87f]==='(')_0x27341f++;else{if(_0x3586c5[_0x13a87f]===')'&&(_0x27341f--,_0x27341f===0x5c9+-0xab1*0x2+0xf99*0x1)){_0x4a5d3b=!(-0x2547*0x1+-0x1056+-0x1acf*-0x2);break;}}if(_0x4a5d3b)_0x3586c5=_0x3586c5['slice'](-0x1fbe+-0x18df*0x1+0x389e,-(0x1954+0x1*0xb72+-0x24c5))['trim']();else break;}for(;;){let _0x177c68=!(-0x684+0x46+0x27*0x29),_0xa04c0b=-0x20aa+-0x1*0xc61+0x2d0b,_0x31d421=-0x52a+0x3*-0x387+0xfbf,_0x5acc19=-(0x760+0x52c*0x4+0x1*-0x1c0f),_0x56f901=-(-0x52*0x35+0x1af9*-0x1+0x2bf4),_0x315eb1=-0x1e7f+0x1955+0x2*0x295;for(let _0x159611=-0x35*0x91+-0x4f*-0x3+0x85*0x38;_0x159611<_0x3586c5['length'];_0x159611++)if(_0x3586c5[_0x159611]==='('){const _0xefdf86=_0x3586c5['substring'](0x109b+0x6*-0x645+0x1503,_0x159611);UT['test'](_0xefdf86)?_0x315eb1++:_0x315eb1===0x585+0x152b+-0x1ab0&&(_0xa04c0b++,_0xa04c0b>_0x31d421&&(_0x31d421=_0xa04c0b,_0x5acc19=_0x159611),_0x177c68=!(0x1ca*-0x2+0x2352+-0x1fbe));}else _0x3586c5[_0x159611]===')'&&(_0x315eb1>-0x1*-0xa3d+0x1f2e+-0x296b?_0x315eb1--:_0xa04c0b>-0x4c8+0x23b6+0x2*-0xf77&&(_0xa04c0b===_0x31d421&&_0x5acc19!==-(0x187+0x26a1+-0x2827)&&(_0x56f901=_0x159611),_0xa04c0b--));if(!_0x177c68||_0x5acc19===-(0xd*0x34+-0x11fe*-0x2+-0x269f*0x1)||_0x56f901===-(-0x1f20+0xc1b+-0x1306*-0x1))break;const _0x12b350=_0x3586c5['substring'](_0x5acc19+(0x26b3*0x1+-0xda5*-0x1+-0x3457),_0x56f901),{result:_0x5bf3f4,error:_0x1df558}=Lt['evaluate'](_0x12b350,_0x40b503);_0x31bfb6=_0x31bfb6||_0x1df558,_0x3586c5=_0x3586c5['substring'](0x15aa+0x19a+-0x1744,_0x5acc19)+(_0x5bf3f4?'true':'false')+_0x3586c5['substring'](_0x56f901+(-0x2*0x97e+0x10*-0x199+0x5*0x8e9));}return{'expression':_0x3586c5,'error':_0x31bfb6};}static['evaluate'](_0x4ca69a,_0xa548d4){const _0x214de5=zT['exec'](_0x4ca69a)===null;w['assert'](_0x214de5,'Resolving\x20'+'expression'+'\x20like\x20this'+'\x20is\x20not\x20su'+'pported:\x20'+_0x4ca69a);let _0x330e6f=_0x4ca69a,_0x35d92=!(-0x743*-0x4+-0x1fa0+0x295);if(_0x4ca69a['replace'](kT,'')['indexOf']('(')!==-(0x1*0x81d+-0x17a*-0x14+-0x25a4)){const _0x451b89=Lt['processPar'+'entheses'](_0x4ca69a,_0xa548d4);_0x330e6f=_0x451b89['expression'],_0x35d92=_0x451b89['error'];}if(_0x35d92)return w['log']('Parenthesi'+'s\x20parsing\x20'+'error\x20in\x20e'+'xpression:'+'\x20\x22'+_0x4ca69a+'\x22'),{'result':!(-0x14fb+0xa*0x2e1+-0x7ce),'error':!(0xa48+0x17*-0x5+-0x9d5)};const _0x307986=_0x330e6f['split']('||');for(const _0xf44ff5 of _0x307986){const _0x35a482=_0xf44ff5['split']('&&');let _0x1d5377=!(0x1*0x383+-0x5*0x401+-0x2*-0x841);for(const _0x3bf8ed of _0x35a482){const {result:_0xd8bd46,error:_0x120eb9}=Lt['evaluateAt'+'omicExpres'+'sion'](_0x3bf8ed['trim'](),_0xa548d4);if(!_0xd8bd46||_0x120eb9){_0x1d5377=!(0x63a*-0x1+-0x14de*0x1+-0x1b19*-0x1);break;}}if(_0x1d5377)return{'result':!(-0x3*-0x5e1+-0x92c+-0x877),'error':!_0x214de5};}return{'result':!(-0x1*0x1591+0x1968+0x1*-0x3d6),'error':!_0x214de5};}};h(Lt,'sourceName');let ko=Lt;const Vy='\x0a\x0a#ifndef\x20'+'outType_0\x0a'+'#define\x20ou'+'tType_0\x20ve'+'c4\x0a#endif\x0a'+'\x0alayout(lo'+'cation\x20=\x200'+')\x20out\x20high'+'p\x20outType_'+'0\x20pcFragCo'+'lor0;\x0a\x0a#if'+'\x20COLOR_ATT'+'ACHMENT_1\x0a'+'layout(loc'+'ation\x20=\x201)'+'\x20out\x20highp'+'\x20outType_1'+'\x20pcFragCol'+'or1;\x0a#endi'+'f\x0a\x0a#if\x20COL'+'OR_ATTACHM'+'ENT_2\x0alayo'+'ut(locatio'+'n\x20=\x202)\x20out'+'\x20highp\x20out'+'Type_2\x20pcF'+'ragColor2;'+'\x0a#endif\x0a\x0a#'+'if\x20COLOR_A'+'TTACHMENT_'+'3\x0alayout(l'+'ocation\x20=\x20'+'3)\x20out\x20hig'+'hp\x20outType'+'_3\x20pcFragC'+'olor3;\x0a#en'+'dif\x0a\x0a#if\x20C'+'OLOR_ATTAC'+'HMENT_4\x0ala'+'yout(locat'+'ion\x20=\x204)\x20o'+'ut\x20highp\x20o'+'utType_4\x20p'+'cFragColor'+'4;\x0a#endif\x0a'+'\x0a#if\x20COLOR'+'_ATTACHMEN'+'T_5\x0alayout'+'(location\x20'+'=\x205)\x20out\x20h'+'ighp\x20outTy'+'pe_5\x20pcFra'+'gColor5;\x0a#'+'endif\x0a\x0a#if'+'\x20COLOR_ATT'+'ACHMENT_6\x0a'+'layout(loc'+'ation\x20=\x206)'+'\x20out\x20highp'+'\x20outType_6'+'\x20pcFragCol'+'or6;\x0a#endi'+'f\x0a\x0a#if\x20COL'+'OR_ATTACHM'+'ENT_7\x0alayo'+'ut(locatio'+'n\x20=\x207)\x20out'+'\x20highp\x20out'+'Type_7\x20pcF'+'ragColor7;'+'\x0a#endif\x0a\x0a#'+'define\x20gl_'+'FragColor\x20'+'pcFragColo'+'r0\x0a\x0a#defin'+'e\x20varying\x20'+'in\x0a\x0a#defin'+'e\x20texture2'+'D\x20texture\x0a'+'#define\x20te'+'xture2DBia'+'s\x20texture\x0a'+'#define\x20te'+'xtureCube\x20'+'texture\x0a#d'+'efine\x20text'+'ure2DProj\x20'+'texturePro'+'j\x0a#define\x20'+'texture2DL'+'od\x20texture'+'Lod\x0a#defin'+'e\x20texture2'+'DProjLod\x20t'+'extureProj'+'Lod\x0a#defin'+'e\x20textureC'+'ubeLod\x20tex'+'tureLod\x0a#d'+'efine\x20text'+('ure2DGrad\x20'+'textureGra'+'d\x0a#define\x20'+'texture2DP'+'rojGrad\x20te'+'xtureProjG'+'rad\x0a#defin'+'e\x20textureC'+'ubeGrad\x20te'+'xtureGrad\x0a'+'#define\x20ut'+'exture2D\x20t'+'exture\x0a#de'+'fine\x20itext'+'ure2D\x20text'+'ure\x0a\x0a//\x20de'+'precated\x20d'+'efines\x0a#de'+'fine\x20textu'+'re2DLodEXT'+'\x20texture2D'+'LodEXT_is_'+'no_longer_'+'supported_'+'use_textur'+'e2DLod_ins'+'tead\x0a#defi'+'ne\x20texture'+'2DProjLodE'+'XT\x20texture'+'2DProjLodE'+'XT_is_no_l'+'onger_supp'+'orted_use_'+'texture2DP'+'rojLod\x0a#de'+'fine\x20textu'+'reCubeLodE'+'XT\x20texture'+'CubeLodEXT'+'_is_no_lon'+'ger_suppor'+'ted_use_te'+'xtureCubeL'+'od_instead'+'\x0a#define\x20t'+'exture2DGr'+'adEXT\x20text'+'ure2DGradE'+'XT_is_no_l'+'onger_supp'+'orted_use_'+'texture2DG'+'rad_instea'+'d\x0a#define\x20'+'texture2DP'+'rojGradEXT'+'\x20texture2D'+'ProjGradEX'+'T_is_no_lo'+'nger_suppo'+'rted_use_t'+'exture2DPr'+'ojGrad_ins'+'tead\x0a#defi'+'ne\x20texture'+'CubeGradEX'+'T\x20textureC'+'ubeGradEXT'+'_is_no_lon'+'ger_suppor'+'ted_use_te'+'xtureCubeG'+'rad_instea'+'d\x0a\x0a//\x20samp'+'le\x20shadows'+'\x20using\x20tex'+'tureGrad\x20t'+'o\x20remove\x20d'+'erivatives'+'\x20in\x20the\x20dy'+'namic\x20loop'+'s\x20(which\x20a'+'re\x20used\x20by'+'\x0a//\x20cluste'+'red\x20lighti'+'ng)\x20-\x20as\x20D'+'irectX\x20sha'+'der\x20compil'+'er\x20tries\x20t'+'o\x20unroll\x20t'+'he\x20loops\x20a'+'nd\x20takes\x20l'+'ong\x20time\x0a/'+'/\x20to\x20compi'+'le\x20the\x20sha'+'der.\x20Using'+'\x20textureLo'+'d\x20would\x20be'+'\x20even\x20bett')+('er,\x20but\x20We'+'bGl\x20does\x20n'+'ot\x20transla'+'te\x20it\x20to\x0a/'+'/\x20lod\x20inst'+'ruction\x20fo'+'r\x20DirectX\x20'+'correctly\x20'+'and\x20uses\x20S'+'ampleCmp\x20i'+'nstead\x20of\x20'+'SampleCmpL'+'evelZero\x20o'+'r\x20similar.'+'\x0a#define\x20t'+'extureShad'+'ow(res,\x20uv'+')\x20textureG'+'rad(res,\x20u'+'v,\x20vec2(1,'+'\x201),\x20vec2('+'1,\x201))\x0a\x0a//'+'\x20pass\x20/\x20ac'+'cept\x20shado'+'w\x20map\x20or\x20t'+'exture\x20as\x20'+'a\x20function'+'\x20parameter'+',\x20on\x20webgl'+'\x20this\x20is\x20s'+'imply\x20pass'+'ed\x20as\x20is\x0a/'+'/\x20but\x20this'+'\x20is\x20needed'+'\x20for\x20WebGP'+'U\x0a#define\x20'+'SHADOWMAP_'+'PASS(name)'+'\x20name\x0a#def'+'ine\x20SHADOW'+'MAP_ACCEPT'+'(name)\x20sam'+'pler2DShad'+'ow\x20name\x0a#d'+'efine\x20TEXT'+'URE_PASS(n'+'ame)\x20name\x0a'+'#define\x20TE'+'XTURE_ACCE'+'PT(name)\x20s'+'ampler2D\x20n'+'ame\x0a#defin'+'e\x20TEXTURE_'+'ACCEPT_HIG'+'HP(name)\x20h'+'ighp\x20sampl'+'er2D\x20name\x0a'+'\x0a#define\x20G'+'L2\x0a'),Gy='\x0a#define\x20a'+'ttribute\x20i'+'n\x0a#define\x20'+'varying\x20ou'+'t\x0a#define\x20'+'texture2D\x20'+'texture\x0a#d'+'efine\x20utex'+'ture2D\x20tex'+'ture\x0a#defi'+'ne\x20itextur'+'e2D\x20textur'+'e\x0a#define\x20'+'GL2\x0a#defin'+'e\x20VERTEXSH'+'ADER\x0a\x0a#def'+'ine\x20TEXTUR'+'E_PASS(nam'+'e)\x20name\x0a#d'+'efine\x20TEXT'+'URE_ACCEPT'+'(name)\x20sam'+'pler2D\x20nam'+'e\x0a#define\x20'+'TEXTURE_AC'+'CEPT_HIGHP'+'(name)\x20hig'+'hp\x20sampler'+'2D\x20name\x0a',Hy='\x0a\x0a//\x20texel'+'Fetch\x20supp'+'ort\x20and\x20ot'+'hers\x0a#exte'+'nsion\x20GL_E'+'XT_sampler'+'less_textu'+'re_functio'+'ns\x20:\x20requi'+'re\x0a\x0a#ifnde'+'f\x20outType_'+'0\x0a#define\x20'+'outType_0\x20'+'vec4\x0a#endi'+'f\x0a#ifndef\x20'+'outType_1\x0a'+'#define\x20ou'+'tType_1\x20ve'+'c4\x0a#endif\x0a'+'#ifndef\x20ou'+'tType_2\x0a#d'+'efine\x20outT'+'ype_2\x20vec4'+'\x0a#endif\x0a#i'+'fndef\x20outT'+'ype_3\x0a#def'+'ine\x20outTyp'+'e_3\x20vec4\x0a#'+'endif\x0a#ifn'+'def\x20outTyp'+'e_4\x0a#defin'+'e\x20outType_'+'4\x20vec4\x0a#en'+'dif\x0a#ifnde'+'f\x20outType_'+'5\x0a#define\x20'+'outType_5\x20'+'vec4\x0a#endi'+'f\x0a#ifndef\x20'+'outType_6\x0a'+'#define\x20ou'+'tType_6\x20ve'+'c4\x0a#endif\x0a'+'#ifndef\x20ou'+'tType_7\x0a#d'+'efine\x20outT'+'ype_7\x20vec4'+'\x0a#endif\x0a\x0al'+'ayout(loca'+'tion\x20=\x200)\x20'+'out\x20highp\x20'+'outType_0\x20'+'pcFragColo'+'r0;\x0alayout'+'(location\x20'+'=\x201)\x20out\x20h'+'ighp\x20outTy'+'pe_1\x20pcFra'+'gColor1;\x0al'+'ayout(loca'+'tion\x20=\x202)\x20'+'out\x20highp\x20'+'outType_2\x20'+'pcFragColo'+'r2;\x0alayout'+'(location\x20'+'=\x203)\x20out\x20h'+'ighp\x20outTy'+'pe_3\x20pcFra'+'gColor3;\x0al'+'ayout(loca'+'tion\x20=\x204)\x20'+'out\x20highp\x20'+'outType_4\x20'+'pcFragColo'+'r4;\x0alayout'+'(location\x20'+'=\x205)\x20out\x20h'+'ighp\x20outTy'+'pe_5\x20pcFra'+'gColor5;\x0al'+'ayout(loca'+'tion\x20=\x206)\x20'+'out\x20highp\x20'+'outType_6\x20'+'pcFragColo'+'r6;\x0alayout'+'(location\x20'+'=\x207)\x20out\x20h'+'ighp\x20outTy'+'pe_7\x20pcFra'+'gColor7;\x0a\x0a'+'#define\x20gl'+'_FragColor'+'\x20pcFragCol'+'or0\x0a\x0a#defi'+'ne\x20texture'+'2D(res,\x20uv'+')\x20texture('+'sampler2D('+('res,\x20res\x20#'+'#\x20_sampler'+'),\x20uv)\x0a#de'+'fine\x20textu'+'re2DBias(r'+'es,\x20uv,\x20bi'+'as)\x20textur'+'e(sampler2'+'D(res,\x20res'+'\x20##\x20_sampl'+'er),\x20uv,\x20b'+'ias)\x0a#defi'+'ne\x20texture'+'2DLod(res,'+'\x20uv,\x20lod)\x20'+'textureLod'+'(sampler2D'+'(res,\x20res\x20'+'##\x20_sample'+'r),\x20uv,\x20lo'+'d)\x0a#define'+'\x20textureCu'+'be(res,\x20uv'+')\x20texture('+'samplerCub'+'e(res,\x20res'+'\x20##\x20_sampl'+'er),\x20uv)\x0a#'+'define\x20tex'+'tureCubeLo'+'d(res,\x20uv,'+'\x20lod)\x20text'+'ureLod(sam'+'plerCube(r'+'es,\x20res\x20##'+'\x20_sampler)'+',\x20uv,\x20lod)'+'\x0a#define\x20t'+'extureShad'+'ow(res,\x20uv'+')\x20textureL'+'od(sampler'+'2DShadow(r'+'es,\x20res\x20##'+'\x20_sampler)'+',\x20uv,\x200.0)'+'\x0a#define\x20i'+'texture2D('+'res,\x20uv)\x20t'+'exture(isa'+'mpler2D(re'+'s,\x20res\x20##\x20'+'_sampler),'+'\x20uv)\x0a#defi'+'ne\x20utextur'+'e2D(res,\x20u'+'v)\x20texture'+'(usampler2'+'D(res,\x20res'+'\x20##\x20_sampl'+'er),\x20uv)\x0a\x0a'+'//\x20depreca'+'ted\x20define'+'s\x0a#define\x20'+'texture2DL'+'odEXT\x20text'+'ure2DLodEX'+'T_is_no_lo'+'nger_suppo'+'rted_use_t'+'exture2DLo'+'d_instead\x0a'+'#define\x20te'+'xture2DPro'+'jLodEXT\x20te'+'xture2DPro'+'jLodEXT_is'+'_no_longer'+'_supported'+'_use_textu'+'re2DProjLo'+'d\x0a#define\x20'+'textureCub'+'eLodEXT\x20te'+'xtureCubeL'+'odEXT_is_n'+'o_longer_s'+'upported_u'+'se_texture'+'CubeLod_in'+'stead\x0a#def'+'ine\x20textur'+'e2DGradEXT'+'\x20texture2D'+'GradEXT_is'+'_no_longer'+'_supported'+'_use_textu'+'re2DGrad_i'+'nstead\x0a#de')+('fine\x20textu'+'re2DProjGr'+'adEXT\x20text'+'ure2DProjG'+'radEXT_is_'+'no_longer_'+'supported_'+'use_textur'+'e2DProjGra'+'d_instead\x0a'+'#define\x20te'+'xtureCubeG'+'radEXT\x20tex'+'tureCubeGr'+'adEXT_is_n'+'o_longer_s'+'upported_u'+'se_texture'+'CubeGrad_i'+'nstead\x0a\x0a//'+'\x20TODO:\x20imp'+'lement\x20oth'+'er\x20texture'+'\x20sampling\x20'+'macros\x0a//\x20'+'#define\x20te'+'xture2DPro'+'j\x20textureP'+'roj\x0a//\x20#de'+'fine\x20textu'+'re2DProjLo'+'d\x20textureP'+'rojLod\x0a//\x20'+'#define\x20te'+'xture2DGra'+'d\x20textureG'+'rad\x0a//\x20#de'+'fine\x20textu'+'re2DProjGr'+'ad\x20texture'+'ProjGrad\x0a/'+'/\x20#define\x20'+'textureCub'+'eGrad\x20text'+'ureGrad\x0a\x0a/'+'/\x20pass\x20/\x20a'+'ccept\x20shad'+'ow\x20map\x20as\x20'+'a\x20function'+'\x20parameter'+',\x20passes\x20b'+'oth\x20the\x20te'+'xture\x20as\x20w'+'ell\x20as\x20sam'+'pler\x0a//\x20as'+'\x20the\x20combi'+'ned\x20sample'+'r\x20can\x20be\x20o'+'nly\x20create'+'d\x20at\x20a\x20poi'+'nt\x20of\x20use\x0a'+'#define\x20SH'+'ADOWMAP_PA'+'SS(name)\x20n'+'ame,\x20name\x20'+'##\x20_sample'+'r\x0a#define\x20'+'SHADOWMAP_'+'ACCEPT(nam'+'e)\x20texture'+'2D\x20name,\x20s'+'ampler\x20nam'+'e\x20##\x20_samp'+'ler\x0a#defin'+'e\x20TEXTURE_'+'PASS(name)'+'\x20name,\x20nam'+'e\x20##\x20_samp'+'ler\x0a#defin'+'e\x20TEXTURE_'+'ACCEPT(nam'+'e)\x20texture'+'2D\x20name,\x20s'+'ampler\x20nam'+'e\x20##\x20_samp'+'ler\x0a#defin'+'e\x20TEXTURE_'+'ACCEPT_HIG'+'HP\x20TEXTURE'+'_ACCEPT\x0a\x0a#'+'define\x20GL2'+'\x0a#define\x20W'+'EBGPU\x0a'),Wy='\x0a\x0a//\x20texel'+'Fetch\x20supp'+'ort\x20and\x20ot'+'hers\x0a#exte'+'nsion\x20GL_E'+'XT_sampler'+'less_textu'+'re_functio'+'ns\x20:\x20requi'+'re\x0a\x0a#defin'+'e\x20texture2'+'D(res,\x20uv)'+'\x20texture(s'+'ampler2D(r'+'es,\x20res\x20##'+'\x20_sampler)'+',\x20uv)\x0a#def'+'ine\x20itextu'+'re2D(res,\x20'+'uv)\x20textur'+'e(isampler'+'2D(res,\x20re'+'s\x20##\x20_samp'+'ler),\x20uv)\x0a'+'#define\x20ut'+'exture2D(r'+'es,\x20uv)\x20te'+'xture(usam'+'pler2D(res'+',\x20res\x20##\x20_'+'sampler),\x20'+'uv)\x0a\x0a#defi'+'ne\x20TEXTURE'+'_PASS(name'+')\x20name,\x20na'+'me\x20##\x20_sam'+'pler\x0a#defi'+'ne\x20TEXTURE'+'_ACCEPT(na'+'me)\x20textur'+'e2D\x20name,\x20'+'sampler\x20na'+'me\x20##\x20_sam'+'pler\x0a#defi'+'ne\x20TEXTURE'+'_ACCEPT_HI'+'GHP\x20TEXTUR'+'E_ACCEPT\x0a\x0a'+'#define\x20GL'+'2\x0a#define\x20'+'WEBGPU\x0a#de'+'fine\x20VERTE'+'XSHADER\x0a#d'+'efine\x20gl_V'+'ertexID\x20gl'+'_VertexInd'+'ex\x0a#define'+'\x20gl_Instan'+'ceID\x20gl_In'+'stanceInde'+'x\x0a',$y='\x0a',Xy='\x0a#define\x20V'+'ERTEXSHADE'+'R\x0a',n_='\x0a\x0a//\x20conve'+'rt\x20clip\x20sp'+'ace\x20positi'+'on\x20into\x20te'+'xture\x20coor'+'dinates\x20to'+'\x20sample\x20sc'+'ene\x20grab\x20t'+'extures\x0ave'+'c2\x20getGrab'+'ScreenPos('+'vec4\x20clipP'+'os)\x20{\x0a\x20\x20\x20\x20'+'vec2\x20uv\x20=\x20'+'(clipPos.x'+'y\x20/\x20clipPo'+'s.w)\x20*\x200.5'+'\x20+\x200.5;\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'WEBGPU\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20uv.y\x20'+'=\x201.0\x20-\x20uv'+'.y;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'return\x20uv;'+'\x0a}\x0a\x0a//\x20con'+'vert\x20uv\x20co'+'ordinates\x20'+'to\x20sample\x20'+'image\x20effe'+'ct\x20texture'+'\x20(render\x20t'+'arget\x20text'+'ure\x20render'+'ed\x20without'+'\x0a//\x20forwar'+'d\x20renderer'+'\x20which\x20doe'+'s\x20the\x20flip'+'\x20in\x20the\x20pr'+'ojection\x20m'+'atrix)\x0avec'+'2\x20getImage'+'EffectUV(v'+'ec2\x20uv)\x20{\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20WEBGPU\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20uv.y'+'\x20=\x201.0\x20-\x20u'+'v.y;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20return\x20uv'+';\x0a}\x0a',o_='\x0a\x0a//\x20conve'+'rt\x20clip\x20sp'+'ace\x20positi'+'on\x20into\x20te'+'xture\x20coor'+'dinates\x20fo'+'r\x20sampling'+'\x20scene\x20gra'+'b\x20textures'+'\x0afn\x20getGra'+'bScreenPos'+'(clipPos:\x20'+'vec4<f32>)'+'\x20->\x20vec2<f'+'32>\x20{\x0a\x20\x20\x20\x20'+'var\x20uv:\x20ve'+'c2<f32>\x20=\x20'+'(clipPos.x'+'y\x20/\x20clipPo'+'s.w)\x20*\x200.5'+'\x20+\x20vec2<f3'+'2>(0.5);\x0a\x20'+'\x20\x20\x20uv.y\x20=\x20'+'1.0\x20-\x20uv.y'+';\x0a\x20\x20\x20\x20retu'+'rn\x20uv;\x0a}\x0a\x0a'+'//\x20convert'+'\x20uv\x20coordi'+'nates\x20to\x20s'+'ample\x20imag'+'e\x20effect\x20t'+'exture\x20(re'+'nder\x20targe'+'t\x20texture\x20'+'rendered\x20w'+'ithout\x0a//\x20'+'forward\x20re'+'nderer\x20whi'+'ch\x20does\x20th'+'e\x20flip\x20in\x20'+'the\x20projec'+'tion\x20matri'+'x)\x0afn\x20getI'+'mageEffect'+'UV(uv:\x20vec'+'2<f32>)\x20->'+'\x20vec2<f32>'+'\x20{\x0a\x20\x20\x20\x20var'+'\x20modifiedU'+'V:\x20vec2<f3'+'2>\x20=\x20uv;\x0a\x20'+'\x20\x20\x20modifie'+'dUV.y\x20=\x201.'+'0\x20-\x20modifi'+'edUV.y;\x0a\x20\x20'+'\x20\x20return\x20m'+'odifiedUV;'+'\x0a}\x0a\x0a//\x20typ'+'es\x20wrapped'+'\x20in\x20size\x20a'+'ligned\x20str'+'uctures\x20to'+'\x20ensure\x20co'+'rrect\x20alig'+'nment\x20in\x20u'+'niform\x20buf'+'fer\x20arrays'+'\x0astruct\x20Wr'+'appedF32\x20{'+'\x20@size(16)'+'\x20element:\x20'+'f32\x20}\x0astru'+'ct\x20Wrapped'+'I32\x20{\x20@siz'+'e(16)\x20elem'+'ent:\x20i32\x20}'+'\x0astruct\x20Wr'+'appedU32\x20{'+'\x20@size(16)'+'\x20element:\x20'+'u32\x20}\x0astru'+'ct\x20Wrapped'+'Vec2F\x20{\x20@s'+'ize(16)\x20el'+'ement:\x20vec'+'2f\x20}\x0astruc'+'t\x20WrappedV'+'ec2I\x20{\x20@si'+'ze(16)\x20ele'+'ment:\x20vec2'+'i\x20}\x0astruct'+'\x20WrappedVe'+'c2U\x20{\x20@siz'+'e(16)\x20elem'+'ent:\x20vec2u'+'\x20}\x0a',GT={'vertex_position':Me,'vertex_normal':gs,'vertex_tangent':yi,'vertex_texCoord0':is,'vertex_texCoord1':ba,'vertex_texCoord2':wl,'vertex_texCoord3':El,'vertex_texCoord4':bl,'vertex_texCoord5':Al,'vertex_texCoord6':Cl,'vertex_texCoord7':Pl,'vertex_color':Wt,'vertex_boneIndices':us,'vertex_boneWeights':gi};class Jt{static['createDefi'+'nition'](_0x379859,_0x5b8b94){w['assert'](_0x5b8b94),w['assert'](!_0x5b8b94['vertexDefi'+'nes']||_0x5b8b94['vertexDefi'+'nes']instanceof Map),w['assert'](!_0x5b8b94['vertexIncl'+'udes']||_0x5b8b94['vertexIncl'+'udes']instanceof Map),w['assert'](!_0x5b8b94['fragmentDe'+'fines']||_0x5b8b94['fragmentDe'+'fines']instanceof Map),w['assert'](!_0x5b8b94['fragmentIn'+'cludes']||_0x5b8b94['fragmentIn'+'cludes']instanceof Map);const _0x3925b0=_0x12d79e=>{let _0x5c1e57=_0x12d79e['fragmentOu'+'tputTypes']??'vec4';return Array['isArray'](_0x5c1e57)||(_0x5c1e57=[_0x5c1e57]),_0x5c1e57;},_0x20455b=(_0x44dd82,_0x334f4,_0x4100e0,_0x3f8485)=>{const _0x2ca237=_0x379859['isWebGPU']?_0x44dd82:_0x334f4;let _0x2e37c6='';if(!_0x4100e0){const _0x73a89f=_0x3925b0(_0x3f8485);for(let _0x392d55=0x502+-0x12*0x1ac+0x1916;_0x392d55<_0x379859['maxColorAt'+'tachments'];_0x392d55++){_0x2e37c6+='#define\x20CO'+'LOR_ATTACH'+'MENT_'+_0x392d55+'\x0a';const _0x90c1dc=_0x73a89f[_0x392d55]??'vec4';_0x2e37c6+='#define\x20ou'+'tType_'+_0x392d55+'\x20'+_0x90c1dc+'\x0a';}}return _0x2e37c6+_0x2ca237;},_0x42c880=(_0x4f8cfd,_0x2c948f)=>{let _0x3f3e6f='';if(!_0x4f8cfd){const _0x2c05d8=_0x3925b0(_0x2c948f);for(let _0x2ed4be=0x31*0x17+0xfc5+-0x142c;_0x2ed4be<_0x379859['maxColorAt'+'tachments'];_0x2ed4be++){const _0x57c2d2=_0x2c05d8[_0x2ed4be]??'vec4',_0x5c401a=Fy['get'](_0x57c2d2);w['assert'](_0x5c401a,'Unknown\x20ou'+'tput\x20type\x20'+'translatio'+'n:\x20'+_0x57c2d2+'\x20->\x20'+_0x5c401a),_0x3f3e6f+='alias\x20pcOu'+'tType'+_0x2ed4be+'\x20=\x20'+_0x5c401a+';\x0a';}}return _0x3f3e6f;},_0x2f3be0=_0x5b8b94['name']??'Untitled';let _0x4a6e3b,_0x1febe5;const _0x224622=Jt['getDefines'+'Code'](_0x379859,_0x5b8b94['vertexDefi'+'nes']),_0x3ca279=Jt['getDefines'+'Code'](_0x379859,_0x5b8b94['fragmentDe'+'fines']);return _0x5b8b94['shaderLang'+'uage']===it?(_0x4a6e3b='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20'+_0x42c880(!(0x36b*-0x2+-0x21a6+0x143e*0x2),_0x5b8b94)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+Xy+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+o_+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0x224622+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0x5b8b94['vertexCode']+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20'),_0x1febe5='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20'+_0x42c880(!(-0x1*0xe27+0x1c7f+-0xe57),_0x5b8b94)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+$y+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+o_+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0x3ca279+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0x5b8b94['fragmentCo'+'de']+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20')):(w['assert'](_0x5b8b94['vertexCode']),_0x4a6e3b=Jt['versionCod'+'e'](_0x379859)+_0x20455b(Wy,Gy,!(-0x385*0x3+-0x2430+0x3*0xf95),_0x5b8b94)+_0x224622+Jt['precisionC'+'ode'](_0x379859)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+n_+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+Jt['getShaderN'+'ameCode'](_0x2f3be0)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0x5b8b94['vertexCode'],w['assert'](_0x5b8b94['fragmentCo'+'de']),_0x1febe5=(_0x5b8b94['fragmentPr'+'eamble']||'')+Jt['versionCod'+'e'](_0x379859)+_0x20455b(Hy,Vy,!(-0x6*-0x19f+-0x9*-0xc5+-0x10a6),_0x5b8b94)+_0x3ca279+Jt['precisionC'+'ode'](_0x379859)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+n_+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+Jt['getShaderN'+'ameCode'](_0x2f3be0)+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20')+_0x5b8b94['fragmentCo'+'de']),{'name':_0x2f3be0,'shaderLanguage':_0x5b8b94['shaderLang'+'uage']??Fe,'attributes':_0x5b8b94['attributes'],'vshader':_0x4a6e3b,'vincludes':_0x5b8b94['vertexIncl'+'udes'],'fincludes':_0x5b8b94['fragmentIn'+'cludes'],'fshader':_0x1febe5,'useTransformFeedback':_0x5b8b94['useTransfo'+'rmFeedback'],'meshUniformBufferFormat':_0x5b8b94['meshUnifor'+'mBufferFor'+'mat'],'meshBindGroupFormat':_0x5b8b94['meshBindGr'+'oupFormat']};}static['getDefines'+'Code'](_0x5397a3,_0xc5e71){let _0x2705b7='';return _0x5397a3['capsDefine'+'s']['forEach']((_0x4c9e43,_0x462c02)=>{_0x2705b7+='#define\x20'+_0x462c02+'\x20'+_0x4c9e43+'\x0a';}),_0x2705b7+='\x0a',_0xc5e71==null||_0xc5e71['forEach']((_0xc9eaa1,_0x5b1fd0)=>{_0x2705b7+='#define\x20'+_0x5b1fd0+'\x20'+_0xc9eaa1+'\x0a';}),_0x2705b7+='\x0a',_0x2705b7;}static['getShaderN'+'ameCode'](_0x319e84){return'#define\x20SH'+'ADER_NAME\x20'+_0x319e84+'\x0a';}static['versionCod'+'e'](_0x36fce6){return _0x36fce6['isWebGPU']?'#version\x204'+'50\x0a':'#version\x203'+'00\x20es\x0a';}static['precisionC'+'ode'](_0x4d1c0e,_0xb0b27e){_0xb0b27e&&_0xb0b27e!=='highp'&&_0xb0b27e!=='mediump'&&_0xb0b27e!=='lowp'&&(_0xb0b27e=null),_0xb0b27e&&(_0xb0b27e==='highp'&&_0x4d1c0e['maxPrecisi'+'on']!=='highp'&&(_0xb0b27e='mediump'),_0xb0b27e==='mediump'&&_0x4d1c0e['maxPrecisi'+'on']==='lowp'&&(_0xb0b27e='lowp'));const _0x5423c0=_0xb0b27e||_0x4d1c0e['precision'];return'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20precisi'+'on\x20'+_0x5423c0+('\x20float;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'precision\x20')+_0x5423c0+('\x20int;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20pr'+'ecision\x20')+_0x5423c0+('\x20usampler2'+'D;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20preci'+'sion\x20')+_0x5423c0+('\x20isampler2'+'D;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20preci'+'sion\x20')+_0x5423c0+('\x20sampler2D'+'Shadow;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'precision\x20')+_0x5423c0+('\x20samplerCu'+'beShadow;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20precisio'+'n\x20')+_0x5423c0+('\x20sampler2D'+'Array;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20');}static['collectAtt'+'ributes'](_0x50d6ca){const _0x3e23fb={};let _0x4a523a=0x1a8d+-0x2*-0x57+0x1*-0x1b3b,_0x4e7732=_0x50d6ca['indexOf']('attribute');for(;_0x4e7732>=0x1*-0x1411+0x7c4*-0x2+0x2399&&!(_0x4e7732>-0x2e+-0x6e1*0x4+0x1bb2&&_0x50d6ca[_0x4e7732-(0x329*-0x7+-0x1e3f+0x6d*0x7b)]==='/');){let _0x48936d=!(0xc78+0x23ec+0x1*-0x3063);if(_0x4e7732>0x3*0x3c5+0x1*0x1b55+-0x26a4){let _0x5ba91f=_0x50d6ca['lastIndexO'+'f']('\x0a',_0x4e7732);_0x5ba91f=_0x5ba91f!==-(-0x17*-0xff+0x2*-0x1336+0xf84)?_0x5ba91f+(-0x2*0xe9c+-0x1174+-0x15*-0x239):-0x2f1*-0x8+0x1416+-0x2b9e,_0x50d6ca['substring'](_0x5ba91f,_0x4e7732)['includes']('#')&&(_0x48936d=!(0x1*-0x1bb9+0x11cd*-0x1+0x2d86*0x1));}if(!_0x48936d){const _0x3a6251=_0x50d6ca['indexOf'](';',_0x4e7732),_0x87062b=_0x50d6ca['lastIndexO'+'f']('\x20',_0x3a6251),_0x35ec56=_0x50d6ca['substring'](_0x87062b+(0xaf0*0x1+0x3*0x11+-0xb22),_0x3a6251);if(_0x3e23fb[_0x35ec56])w['warn']('Attribute\x20'+'['+_0x35ec56+(']\x20already\x20'+'exists\x20whe'+'n\x20extracti'+'ng\x20the\x20att'+'ributes\x20fr'+'om\x20the\x20ver'+'tex\x20shader'+',\x20ignoring'+'.'),{'vsCode':_0x50d6ca});else{const _0x5cc07b=GT[_0x35ec56];_0x5cc07b!==void(-0x8*-0x197+0x1c62+-0x291a)?_0x3e23fb[_0x35ec56]=_0x5cc07b:(_0x3e23fb[_0x35ec56]='ATTR'+_0x4a523a,_0x4a523a++);}}_0x4e7732=_0x50d6ca['indexOf']('attribute',_0x4e7732+(0x7d7*-0x3+0xdb8+0x9ce));}return _0x3e23fb;}}let HT=0x346*-0x2+-0x2da+0x966;class qy{constructor(_0x3361b7,_0x48081c){h(this,'meshUnifor'+'mBufferFor'+'mat'),h(this,'meshBindGr'+'oupFormat'),h(this,'attributes',new Map());if(this['id']=HT++,this['device']=_0x3361b7,this['definition']=_0x48081c,this['name']=_0x48081c['name']||'Untitled',this['init'](),_0x48081c['cshader'])w['assert'](_0x3361b7['supportsCo'+'mpute'],'Compute\x20sh'+'aders\x20are\x20'+'not\x20suppor'+'ted\x20on\x20thi'+'s\x20device.'),w['assert'](!_0x48081c['vshader']&&!_0x48081c['fshader'],'Vertex\x20and'+'\x20fragment\x20'+'shaders\x20ar'+'e\x20not\x20supp'+'orted\x20when'+'\x20creating\x20'+'a\x20compute\x20'+'shader.'),_0x48081c['cshader']=ko['run'](_0x48081c['cshader'],_0x48081c['cincludes'],{'sourceName':'compute\x20sh'+'ader\x20for\x20'+this['label'],'stripDefines':!(-0x84*-0xb+0x1*0x2314+-0x20*0x146)});else{w['assert'](_0x48081c['vshader'],'No\x20vertex\x20'+'shader\x20has'+'\x20been\x20spec'+'ified\x20when'+'\x20creating\x20'+'a\x20shader.'),w['assert'](_0x48081c['fshader'],'No\x20fragmen'+'t\x20shader\x20h'+'as\x20been\x20sp'+'ecified\x20wh'+'en\x20creatin'+'g\x20a\x20shader'+'.'),w['call'](()=>{this['vUnmodifie'+'d']=_0x48081c['vshader'],this['fUnmodifie'+'d']=_0x48081c['fshader'];});const _0x5ebaa1=_0x48081c['shaderLang'+'uage']===it;_0x48081c['vshader']=ko['run'](_0x48081c['vshader'],_0x48081c['vincludes'],{'sourceName':'vertex\x20sha'+'der\x20for\x20'+this['label'],'stripDefines':_0x5ebaa1}),_0x48081c['shaderLang'+'uage']===Fe&&(_0x48081c['attributes']??(_0x48081c['attributes']=Jt['collectAtt'+'ributes'](_0x48081c['vshader'])));const _0x105644=_0x3361b7['isWebGL2']&&(Ae['name']==='osx'||Ae['name']==='ios');if(_0x48081c['fshader']=ko['run'](_0x48081c['fshader'],_0x48081c['fincludes'],{'stripUnusedColorAttachments':_0x105644,'stripDefines':_0x5ebaa1,'sourceName':'fragment\x20s'+'hader\x20for\x20'+this['label']}),!_0x48081c['vshader']||!_0x48081c['fshader']){w['error']('Shader:\x20Fa'+'iled\x20to\x20cr'+'eate\x20shade'+'r\x20'+this['label']+('.\x20Vertex\x20o'+'r\x20fragment'+'\x20shader\x20so'+'urce\x20is\x20em'+'pty.'),this),this['failed']=!(0x11e4+0x1*0x1687+-0xd79*0x3);return;}}this['impl']=_0x3361b7['createShad'+'erImpl'](this),w['trace'](Im,'Alloc:\x20'+this['label']+',\x20stack:\x20'+Q['toString'](),{'instance':this});}['init'](){this['ready']=!(0x585+0x2b4*0x4+-0x1054),this['failed']=!(0xf*-0x82+-0x3*-0x737+-0xe06);}get['label'](){return'Shader\x20Id\x20'+this['id']+'\x20('+(this['definition']['shaderLang'+'uage']===it?'WGSL':'GLSL')+')\x20'+this['name'];}['destroy'](){w['trace'](Im,'DeAlloc:\x20I'+'d\x20'+this['id']+'\x20'+this['name']),this['device']['onDestroyS'+'hader'](this),this['impl']['destroy'](this);}['loseContex'+'t'](){this['init'](),this['impl']['loseContex'+'t']();}['restoreCon'+'text'](){this['impl']['restoreCon'+'text'](this['device'],this);}}class WT{constructor(){h(this,'storage'),h(this,'gpuBuffer'),h(this,'offset');}}const Be=[];Be[Xs]=function(_0x8d397d,_0x2fbda9,_0x129388){const _0x46481c=_0x8d397d['storageFlo'+'at32'];_0x46481c[_0x129388]=_0x2fbda9;},Be[ga]=(_0x3734d7,_0x3133ad,_0x263450)=>{const _0x32c452=_0x3734d7['storageFlo'+'at32'];_0x32c452[_0x263450]=_0x3133ad[0x1c0d+-0x1246+-0x9c7],_0x32c452[_0x263450+(0x2254+0x19ca*0x1+-0x3c1d)]=_0x3133ad[0x4cc+-0x6b*0x44+-0x17*-0x107];},Be[ds]=(_0x236b21,_0xd754bb,_0xcff447)=>{const _0x46559f=_0x236b21['storageFlo'+'at32'];_0x46559f[_0xcff447]=_0xd754bb[-0x10c*0x15+-0x1f*-0xf1+0x13*-0x61],_0x46559f[_0xcff447+(0x2569*0x1+0x23c+-0x27a4)]=_0xd754bb[-0x7*-0x512+0x229b+-0x4618],_0x46559f[_0xcff447+(-0xe44+0x1054+-0x20e)]=_0xd754bb[-0x2215+0x7f4+-0x1*-0x1a23];},Be[Rn]=(_0x1b7e24,_0x150265,_0x15f341)=>{const _0x361663=_0x1b7e24['storageFlo'+'at32'];_0x361663[_0x15f341]=_0x150265[-0x1273+0x15*0x17+-0xa*-0x1a8],_0x361663[_0x15f341+(0x1e6c+0xb03+-0x296e)]=_0x150265[0xb*-0x20f+-0x1*-0xe44+0x4a*0x1d],_0x361663[_0x15f341+(0xa9f+-0x3*-0x5ef+0x1c6a*-0x1)]=_0x150265[-0x10*0x1d+0x1*0x1b7+-0x1*-0x1b],_0x361663[_0x15f341+(0x2dc+-0xcaf*-0x3+0x1e*-0x15d)]=_0x150265[-0x15bf+-0x1c0f*-0x1+0x1*-0x64d];},Be[_a]=function(_0x298582,_0x1881b5,_0x43e31a){const _0x16e261=_0x298582['storageInt'+'32'];_0x16e261[_0x43e31a]=_0x1881b5;},Be[ca]=function(_0x496982,_0x3b6c73,_0x15cde5){const _0x334e96=_0x496982['storageInt'+'32'];_0x334e96[_0x15cde5]=_0x3b6c73[0xc2f+-0x1dea+0x11bb],_0x334e96[_0x15cde5+(-0x79*-0x40+-0x2153*-0x1+-0x3f92*0x1)]=_0x3b6c73[0x4*-0x557+-0x1*0x2603+0x190*0x26];},Be[ha]=function(_0x84d4d9,_0x2f048e,_0x35b12d){const _0x251904=_0x84d4d9['storageInt'+'32'];_0x251904[_0x35b12d]=_0x2f048e[-0x9a0+0xe8b+-0x4eb],_0x251904[_0x35b12d+(-0x21c3+-0x329+0x24ed)]=_0x2f048e[-0x4*-0x902+0xcc2+0x30c9*-0x1],_0x251904[_0x35b12d+(0x491*0x1+0x193*-0x17+0x1fa6)]=_0x2f048e[0x2578+-0xf*0x1f1+-0x857];},Be[da]=function(_0x54c4cf,_0x2bf05b,_0x25d974){const _0x4a8cce=_0x54c4cf['storageInt'+'32'];_0x4a8cce[_0x25d974]=_0x2bf05b[-0xa8*-0xb+0x595*-0x5+-0x1*-0x14b1],_0x4a8cce[_0x25d974+(0x3*0x48b+0x1e4e*0x1+0x1*-0x2bee)]=_0x2bf05b[-0x1*-0x251d+0x1*0x234e+0x2*-0x2435],_0x4a8cce[_0x25d974+(-0x2542+0x1b2f*0x1+0x1*0xa15)]=_0x2bf05b[-0x1718+0x19*0x106+-0x27c],_0x4a8cce[_0x25d974+(-0x5*0x1d3+0xb40+0x21e*-0x1)]=_0x2bf05b[0x1*0x1e59+0x23c6+-0x1*0x421c];},Be[_h]=(_0x3c026c,_0x3aeaa3,_0x321463)=>{const _0x52f35a=_0x3c026c['storageFlo'+'at32'];_0x52f35a[_0x321463]=_0x3aeaa3[-0x114b*-0x2+-0x3*-0x313+-0x8c3*0x5],_0x52f35a[_0x321463+(-0x10*-0x20e+0x17d*-0x11+-0x792)]=_0x3aeaa3[-0x2*0xd00+-0x1741+0x3ca*0xd],_0x52f35a[_0x321463+(0x1df1+-0x1*-0x21e6+-0x1*0x3fd3)]=_0x3aeaa3[-0x29*-0xb0+-0x2375+0x747],_0x52f35a[_0x321463+(-0x9d*-0x2b+0x13d*0x7+-0x2305)]=_0x3aeaa3[0x4*0x51a+-0x1545+-0x70*-0x2],_0x52f35a[_0x321463+(0x4*-0x10f+0x1*-0x22ad+0x26f1)]=_0x3aeaa3[-0x17da+0x1*0xa42+0xd9c],_0x52f35a[_0x321463+(0x138a+0x38d+-0xd*0x1c6)]=_0x3aeaa3[0x1385+0x692+0x47*-0x5e];},Be[On]=(_0xc994cf,_0x2992a3,_0x469f9b)=>{const _0x495866=_0xc994cf['storageFlo'+'at32'];_0x495866[_0x469f9b]=_0x2992a3[-0xfe7+-0x1a21+-0x1504*-0x2],_0x495866[_0x469f9b+(0x138+-0x1*-0x1163+-0x129a)]=_0x2992a3[-0x6*-0x3b9+-0x26fc+0x10a7],_0x495866[_0x469f9b+(-0xea7+0x224d+-0xc*0x1a3)]=_0x2992a3[0x59*-0x6d+0x1a5*0x17+0x14],_0x495866[_0x469f9b+(0x2006+0x21af+-0x41b1)]=_0x2992a3[-0x167*-0x13+0x10*0x1fd+-0x1*0x3a72],_0x495866[_0x469f9b+(0x1e7b+-0x1*0xa33+-0x5b*0x39)]=_0x2992a3[-0x4d*-0x3f+0xd10+-0x1fff],_0x495866[_0x469f9b+(0xe2*-0x2+-0x1833+0x19fd)]=_0x2992a3[0x23*0xaa+0x7cc+-0x3*0xa57],_0x495866[_0x469f9b+(0x134a*-0x1+0x2017+-0xcc5)]=_0x2992a3[-0x617*-0x1+0x1*0x1f64+-0x2575],_0x495866[_0x469f9b+(-0x1*-0xcb9+-0x26d7+0x1a27)]=_0x2992a3[-0x17f7+-0x1f4d*-0x1+0x74f*-0x1],_0x495866[_0x469f9b+(0x1505+0x5b5*-0x1+-0x187*0xa)]=_0x2992a3[-0x1099+-0xea4*-0x1+0x1fd];},Be[ud]=function(_0x4a60fc,_0x3b6d55,_0x720f02,_0x2a47bc){const _0x47a2dc=_0x4a60fc['storageFlo'+'at32'];for(let _0x449719=-0x9e*-0x34+0x4*-0x24b+0x5bb*-0x4;_0x449719<_0x2a47bc;_0x449719++)_0x47a2dc[_0x720f02+_0x449719*(-0x10f7+-0x14f*0x3+0xdf*0x18)]=_0x3b6d55[_0x449719];},Be[pd]=(_0x54f997,_0x18c412,_0xd84e47,_0x435f5e)=>{const _0x335df8=_0x54f997['storageFlo'+'at32'];for(let _0x14cb70=-0x348*0x2+-0x1cbd+-0x1*-0x234d;_0x14cb70<_0x435f5e;_0x14cb70++)_0x335df8[_0xd84e47+_0x14cb70*(0x4af*-0x3+0x7*0x229+-0x10e)]=_0x18c412[_0x14cb70*(0x1*-0xaa9+0x1*-0x2635+-0x2*-0x1870)],_0x335df8[_0xd84e47+_0x14cb70*(0x1*-0x26c5+-0x4*-0x995+-0x75*-0x1)+(-0x9*-0x414+-0x1*-0x3d+-0x24f0)]=_0x18c412[_0x14cb70*(0x2223+-0x5b+-0x21c6)+(-0x195f+0x98+-0x632*-0x4)];},Be[md]=(_0x1ed252,_0x1fc2ab,_0x25cc0b,_0x1ffb9b)=>{const _0x55d54b=_0x1ed252['storageFlo'+'at32'];for(let _0x2f6f32=-0x164c+-0x1*0x55e+0x1baa;_0x2f6f32<_0x1ffb9b;_0x2f6f32++)_0x55d54b[_0x25cc0b+_0x2f6f32*(0x1*-0x25d4+-0x11*-0x1f3+-0x1*-0x4b5)]=_0x1fc2ab[_0x2f6f32*(-0x172e+0x9ec+0xd45)],_0x55d54b[_0x25cc0b+_0x2f6f32*(0xabd*-0x3+0x2014+0x27)+(-0x19a6+0x1f*-0xee+0x3679)]=_0x1fc2ab[_0x2f6f32*(0x155e+-0x1*-0x3df+-0x193a)+(-0x120+-0x2416+-0x551*-0x7)],_0x55d54b[_0x25cc0b+_0x2f6f32*(0x1*0x386+-0x1028*-0x2+-0x23d2)+(-0x1*-0x17fb+0x21f4+-0x39ed)]=_0x1fc2ab[_0x2f6f32*(-0x26*-0xcb+0x12*-0x58+-0x17ef)+(0x32*-0xa4+0x16c3+0x5*0x1db)];},Be[Fn]=(_0x4dfa29,_0x5cfe94,_0x3618e6,_0x2f9022)=>{const _0x5a59de=_0x4dfa29['storageUin'+'t32'];_0x5a59de[_0x3618e6]=_0x5cfe94;},Be[Nn]=(_0x36fd2a,_0x41e3a4,_0x1b7f44,_0x44e2c4)=>{const _0x1355e4=_0x36fd2a['storageUin'+'t32'];_0x1355e4[_0x1b7f44]=_0x41e3a4[-0xa05+-0x5*-0x696+-0x17*0xff],_0x1355e4[_0x1b7f44+(-0x1b95+0x1c54+0x5f*-0x2)]=_0x41e3a4[0x1275+0x699+-0x190d];},Be[kn]=(_0x204b1a,_0x337528,_0x5e0df6,_0x44af1a)=>{const _0x5f246a=_0x204b1a['storageUin'+'t32'];_0x5f246a[_0x5e0df6]=_0x337528[-0x1ce9+0x6*-0x11c+0xf*0x25f],_0x5f246a[_0x5e0df6+(0x102b+0xad3*-0x1+-0x557)]=_0x337528[-0x2134*-0x1+0x1b1e+-0x1*0x3c51],_0x5f246a[_0x5e0df6+(-0x2458+0x1*0x1a6c+0x9ee)]=_0x337528[-0x2574+-0x2f*-0xa5+0x72b];},Be[Un]=(_0x1d5fb6,_0x2af1bd,_0xab91be,_0x15372b)=>{const _0x13f33a=_0x1d5fb6['storageUin'+'t32'];_0x13f33a[_0xab91be]=_0x2af1bd[-0x2253+0x3*-0x6bf+0x48*0xc2],_0x13f33a[_0xab91be+(0xd24+0x1691+-0x23b4)]=_0x2af1bd[-0x2033*-0x1+0x21c5+-0x41f7],_0x13f33a[_0xab91be+(-0x428*-0x5+0x20af*-0x1+0xbe9)]=_0x2af1bd[-0x1*0x3aa+-0x6*-0x7d+0xbe*0x1],_0x13f33a[_0xab91be+(0x3*0xdd+-0x1*0x6d2+0xb5*0x6)]=_0x2af1bd[0x35*-0x7+0x8*-0x232+0x1306];},Be[Bn]=function(_0x5365a3,_0x14ab56,_0x3ab8b1,_0x3b3326){const _0x422025=_0x5365a3['storageInt'+'32'];for(let _0x13f086=-0xb61+0x17af+0x3f*-0x32;_0x13f086<_0x3b3326;_0x13f086++)_0x422025[_0x3ab8b1+_0x13f086*(-0x4d*-0x6d+0x1dec+-0x3eb1)]=_0x14ab56[_0x13f086];},Be[gd]=Be[Bn],Be[_d]=function(_0x319408,_0x535e63,_0x2e48c2,_0x2628b2){const _0x3aeecf=_0x319408['storageUin'+'t32'];for(let _0x5399da=0x3*0x4c7+-0x6*-0x44+-0x3*0x54f;_0x5399da<_0x2628b2;_0x5399da++)_0x3aeecf[_0x2e48c2+_0x5399da*(0x431*-0x7+0x18ca+-0xa7*-0x7)]=_0x535e63[_0x5399da];},Be[zn]=(_0x17cdd5,_0x5f2a42,_0x358c41,_0x17392a)=>{const _0x5cb9fd=_0x17cdd5['storageInt'+'32'];for(let _0x20eda9=0x9e*0x35+-0x23*-0x48+-0x2a8e;_0x20eda9<_0x17392a;_0x20eda9++)_0x5cb9fd[_0x358c41+_0x20eda9*(0x3bb+0x21df+-0x2596)]=_0x5f2a42[_0x20eda9*(0x2546+0x6c*-0x12+0x1dac*-0x1)],_0x5cb9fd[_0x358c41+_0x20eda9*(0x2a9+0x2031+-0x2*0x116b)+(-0x1*-0x2186+-0x1bd4+-0x5b1)]=_0x5f2a42[_0x20eda9*(0x1763*-0x1+0x195f+-0xb*0x2e)+(-0x21*0x44+0x2ed*0xb+-0x29a*0x9)];},Be[yd]=Be[zn],Be[Sd]=(_0x5bc65c,_0x20dea5,_0x1e07b9,_0x167f37)=>{const _0x2e029e=_0x5bc65c['storageUin'+'t32'];for(let _0x220ef7=0x1128+0xd9*0xf+-0x1ddf;_0x220ef7<_0x167f37;_0x220ef7++)_0x2e029e[_0x1e07b9+_0x220ef7*(0x1c43+-0xb18+0x1*-0x1127)]=_0x20dea5[_0x220ef7*(0x10dc+0x2f2*-0x6+-0x46*-0x3)],_0x2e029e[_0x1e07b9+_0x220ef7*(0xc6*-0x2e+0x49*0x59+0x5*0x20b)+(0x2d*-0x1+0x1c59+-0x1c2b)]=_0x20dea5[_0x220ef7*(-0x24b5+-0x2479*-0x1+0x2*0x1f)+(-0x72e*-0x2+0x3*-0x3+-0xe52)];},Be[Vn]=(_0x35a881,_0x58c4c1,_0x4af5f7,_0x41fd49)=>{const _0x52a25b=_0x35a881['storageInt'+'32'];for(let _0x1fc294=-0x1*0x9d9+-0x1*-0x1529+-0xb50;_0x1fc294<_0x41fd49;_0x1fc294++)_0x52a25b[_0x4af5f7+_0x1fc294*(0x1be+0x1ae6+-0x1ca0)]=_0x58c4c1[_0x1fc294*(0x732*0x2+0xeda*0x2+0x25*-0x131)],_0x52a25b[_0x4af5f7+_0x1fc294*(0x5*0x209+0x44*-0x66+-0x10ef*-0x1)+(0x369*-0x1+0x1*0x1fae+-0x1c44)]=_0x58c4c1[_0x1fc294*(-0x67*-0x34+0x746+0x22b*-0xd)+(-0x45*0x1a+0xe64+-0x761*0x1)],_0x52a25b[_0x4af5f7+_0x1fc294*(-0xc98+-0x1*0x1951+-0x1*-0x25ed)+(0x1f*-0x89+0x1*-0x92+0x112b)]=_0x58c4c1[_0x1fc294*(0xfbb*-0x2+0x2315+-0x39c)+(0x1668*-0x1+-0x1db+-0x1845*-0x1)];},Be[xd]=Be[Vn],Be[vd]=(_0x2588ab,_0x42c38e,_0x1bab3a,_0x131561)=>{const _0x16621e=_0x2588ab['storageUin'+'t32'];for(let _0xf43051=-0xd66*-0x1+-0x1b47+0xb*0x143;_0xf43051<_0x131561;_0xf43051++)_0x16621e[_0x1bab3a+_0xf43051*(-0xd09+0x45*0x19+0x650)]=_0x42c38e[_0xf43051*(-0x12*0x20e+0x33f*-0xc+-0x1951*-0x3)],_0x16621e[_0x1bab3a+_0xf43051*(-0x1*0x20f9+0x2077+0x86)+(0x16c5+0x1f2f*0x1+-0x7b5*0x7)]=_0x42c38e[_0xf43051*(0x996+0x2*-0x5ae+0x1c9)+(0x2639+0x4a2*-0x8+-0x128)],_0x16621e[_0x1bab3a+_0xf43051*(-0x2*-0xe57+0x16*0x165+-0x3b58)+(0x914+-0x419*0x2+-0xe0)]=_0x42c38e[_0xf43051*(-0x1cb6+-0x123*-0x2+0x6f*0x3d)+(0x9*0x254+-0x257a+0x8*0x211)];};class zp{constructor(_0x4cc72a,_0x430ba7,_0x40e627=!(-0x1bcc+0xf41+0xc8b)){h(this,'device'),h(this,'persistent'),h(this,'allocation'),h(this,'storageFlo'+'at32'),h(this,'storageInt'+'32'),h(this,'storageUin'+'t32'),h(this,'renderVers'+'ionDirty',0xf21+0x2*-0xa70+0x5bf);if(this['device']=_0x4cc72a,this['format']=_0x430ba7,this['persistent']=_0x40e627,w['assert'](_0x430ba7),_0x40e627){this['impl']=_0x4cc72a['createUnif'+'ormBufferI'+'mpl'](this);const _0x25671c=new ArrayBuffer(_0x430ba7['byteSize']);this['assignStor'+'age'](new Int32Array(_0x25671c)),_0x4cc72a['_vram']['ub']+=this['format']['byteSize'];}else this['allocation']=new WT();}['destroy'](){if(this['persistent']){const _0x135a93=this['device'];this['impl']['destroy'](_0x135a93),_0x135a93['_vram']['ub']-=this['format']['byteSize'];}}get['offset'](){return this['persistent']?0x17cd+0xbb5+0x25e*-0xf:this['allocation']['offset'];}['assignStor'+'age'](_0xf6658a){this['storageInt'+'32']=_0xf6658a,this['storageUin'+'t32']=new Uint32Array(_0xf6658a['buffer'],_0xf6658a['byteOffset'],_0xf6658a['byteLength']/(0x1*-0xde7+0xb2*-0x25+0x27a5)),this['storageFlo'+'at32']=new Float32Array(_0xf6658a['buffer'],_0xf6658a['byteOffset'],_0xf6658a['byteLength']/(-0x205b+-0x131d+0x337c*0x1));}['loseContex'+'t'](){var _0x1eec0b;(_0x1eec0b=this['impl'])==null||_0x1eec0b['loseContex'+'t']();}['setUniform'](_0x14f54d,_0x3da491){w['assert'](_0x14f54d);const _0x410ad9=_0x14f54d['offset'];if(_0x3da491!=null){const _0x56484a=Be[_0x14f54d['updateType']];_0x56484a?_0x56484a(this,_0x3da491,_0x410ad9,_0x14f54d['count']):this['storageFlo'+'at32']['set'](_0x3da491,_0x410ad9);}else w['warnOnce']('Value\x20was\x20'+'not\x20set\x20wh'+'en\x20assigni'+'ng\x20to\x20unif'+'orm\x20['+_0x14f54d['name']+('],\x20expecte'+'d\x20type\x20')+Ey[_0x14f54d['type']]+('\x20while\x20ren'+'dering\x20')+Q['toString']());}['set'](_0x465e88,_0x560f4f){const _0x41efc7=this['format']['map']['get'](_0x465e88);w['assert'](_0x41efc7,'Uniform\x20na'+'me\x20['+_0x465e88+(']\x20is\x20not\x20p'+'art\x20of\x20the'+'\x20Uniform\x20b'+'uffer.')),_0x41efc7&&this['setUniform'](_0x41efc7,_0x560f4f);}['startUpdat'+'e'](_0x19acef){if(!this['persistent']){const _0x2deef7=this['allocation'],_0x54c1eb=_0x2deef7['gpuBuffer'];this['device']['dynamicBuf'+'fers']['alloc'](_0x2deef7,this['format']['byteSize']),this['assignStor'+'age'](_0x2deef7['storage']),_0x19acef&&(_0x19acef['bindGroup']=_0x2deef7['gpuBuffer']['getBindGro'+'up'](this),_0x19acef['offsets'][-0x6ce*-0x2+-0x1*0x1bc7+0x4b9*0x3]=_0x2deef7['offset']),_0x54c1eb!==_0x2deef7['gpuBuffer']&&(this['renderVers'+'ionDirty']=this['device']['renderVers'+'ion']);}}['endUpdate'](){this['persistent']?this['impl']['unlock'](this):(this['storageFlo'+'at32']=null,this['storageInt'+'32']=null);}['update'](_0x53a3a4){this['startUpdat'+'e'](_0x53a3a4);const _0x57c1df=this['format']['uniforms'];for(let _0x4c2db5=0x1006+-0xb71+-0x495;_0x4c2db5<_0x57c1df['length'];_0x4c2db5++){const _0x54ac85=_0x57c1df[_0x4c2db5]['scopeId']['value'];this['setUniform'](_0x57c1df[_0x4c2db5],_0x54ac85);}this['endUpdate']();}}class $T{constructor(){h(this,'frameAlloc'+'ations',[]),h(this,'pastFrameA'+'llocations',new Map()),h(this,'_enabled',!(0x4df*0x1+-0x22ce+0x1df0)),h(this,'_enableReq'+'uest',!(-0x671+-0x1125+0xb7*0x21)),h(this,'_frameTime',-0xc0b+0xa3*-0x29+0x2626);}['loseContex'+'t'](){this['pastFrameA'+'llocations']['clear']();}set['enabled'](_0x5385ac){this['_enableReq'+'uest']=_0x5385ac;}get['enabled'](){return this['_enableReq'+'uest'];}['processEna'+'bleRequest'](){this['_enableReq'+'uest']!==this['_enabled']&&(this['_enabled']=this['_enableReq'+'uest'],this['_enabled']||(this['_frameTime']=-0x7a0+0x1345*0x1+0x1*-0xba5));}['request'](_0x64dea4){this['pastFrameA'+'llocations']['set'](_0x64dea4,this['frameAlloc'+'ations']),this['frameAlloc'+'ations']=[];}['report'](_0x3cc8f7,_0x261382){if(_0x261382){const _0x238f55=this['pastFrameA'+'llocations']['get'](_0x3cc8f7);if(w['assert'](_0x238f55['length']===_0x261382['length']),_0x261382['length']>0x5e6+-0x2134+0x6*0x48d&&(this['_frameTime']=_0x261382['reduce']((_0xe34007,_0x160d3b)=>_0xe34007+_0x160d3b,-0x10bf*0x2+0x26a0+-0x522)),mi['get'](Gl)){w['trace'](Gl,'--\x20GPU\x20tim'+'ings\x20for\x20f'+'rame\x20'+_0x3cc8f7+'\x20--');let _0x4bf0b9=-0x180f+-0x1319*0x2+0x3e41;for(let _0x414c4d=-0x53*0x71+0x83*-0x40+0x4563;_0x414c4d<_0x238f55['length'];++_0x414c4d){const _0x4f76da=_0x238f55[_0x414c4d];_0x4bf0b9+=_0x261382[_0x414c4d],w['trace'](Gl,_0x261382[_0x414c4d]['toFixed'](-0x97b*-0x3+-0x481*0x3+-0xeec)+'\x20ms\x20'+_0x4f76da);}w['trace'](Gl,_0x4bf0b9['toFixed'](0xb0e+-0x293*0x8+0x98c)+'\x20ms\x20TOTAL');}}this['pastFrameA'+'llocations']['delete'](_0x3cc8f7);}['getSlot'](_0x1199a8){const _0x39bf46=this['frameAlloc'+'ations']['length'];return this['frameAlloc'+'ations']['push'](_0x1199a8),_0x39bf46;}get['slotCount'](){return this['frameAlloc'+'ations']['length'];}}class jy{constructor(){h(this,'bufferId',null);}['destroy'](_0x4480bc){this['bufferId']&&(_0x4480bc['gl']['deleteBuff'+'er'](this['bufferId']),this['bufferId']=null);}get['initialize'+'d'](){return!!this['bufferId'];}['loseContex'+'t'](){this['bufferId']=null;}['unlock'](_0x2c577a,_0xe9d283,_0x363589,_0x46f9d7){const _0x454e3d=_0x2c577a['gl'];if(this['bufferId'])_0x454e3d['bindBuffer'](_0x363589,this['bufferId']),_0x454e3d['bufferSubD'+'ata'](_0x363589,0x258b+0x18a9+-0x3e34,_0x46f9d7);else{let _0x3dc097;switch(_0xe9d283){case ms:_0x3dc097=_0x454e3d['STATIC_DRA'+'W'];break;case lh:_0x3dc097=_0x454e3d['DYNAMIC_DR'+'AW'];break;case ey:_0x3dc097=_0x454e3d['STREAM_DRA'+'W'];break;case bx:_0x3dc097=_0x454e3d['DYNAMIC_CO'+'PY'];break;}this['bufferId']=_0x454e3d['createBuff'+'er'](),_0x454e3d['bindBuffer'](_0x363589,this['bufferId']),_0x454e3d['bufferData'](_0x363589,_0x46f9d7,_0x3dc097);}}}class XT extends jy{constructor(){super(...arguments),h(this,'vao',null);}['destroy'](_0x47aa78){super['destroy'](_0x47aa78),_0x47aa78['unbindVert'+'exArray']();}['loseContex'+'t'](){super['loseContex'+'t'](),this['vao']=null;}['unlock'](_0x45b02d){const _0x2b0c6b=_0x45b02d['device'];super['unlock'](_0x2b0c6b,_0x45b02d['usage'],_0x2b0c6b['gl']['ARRAY_BUFF'+'ER'],_0x45b02d['storage']);}}class qT extends jy{constructor(_0x4429f1){super();const _0x566614=_0x4429f1['device']['gl'],_0x435578=_0x4429f1['format'];_0x435578===$f?this['glFormat']=_0x566614['UNSIGNED_B'+'YTE']:_0x435578===Yi?this['glFormat']=_0x566614['UNSIGNED_S'+'HORT']:_0x435578===wr&&(this['glFormat']=_0x566614['UNSIGNED_I'+'NT']);}['unlock'](_0xe15448){const _0x4308cd=_0xe15448['device'];super['unlock'](_0x4308cd,_0xe15448['usage'],_0x4308cd['gl']['ELEMENT_AR'+'RAY_BUFFER'],_0xe15448['storage']);}}class jT{constructor(_0x1bd418,_0xba9877,_0x3f00e4,_0x123f28){if(this['locationId']=_0x123f28,this['scopeId']=_0x1bd418['scope']['resolve'](_0xba9877),this['version']=new Uy(),_0xba9877['substring'](_0xba9877['length']-(-0x1*0xc1+0x2*-0x12ff+-0x16*-0x1c3))==='[0]')switch(_0x3f00e4){case Xs:_0x3f00e4=ud;break;case _a:_0x3f00e4=Bn;break;case Fn:_0x3f00e4=_d;break;case Tn:_0x3f00e4=gd;break;case ga:_0x3f00e4=pd;break;case ca:_0x3f00e4=zn;break;case Nn:_0x3f00e4=Sd;break;case tl:_0x3f00e4=yd;break;case ds:_0x3f00e4=md;break;case ha:_0x3f00e4=Vn;break;case kn:_0x3f00e4=vd;break;case sl:_0x3f00e4=xd;break;case Rn:_0x3f00e4=Lp;break;case da:_0x3f00e4=gh;break;case Un:_0x3f00e4=Rp;break;case il:_0x3f00e4=Op;break;}this['dataType']=_0x3f00e4,this['value']=[null,null,null,null],this['array']=[];}}let l_=0x1cc8+-0x245e+0x796*0x1;const YT=new Set(['gl_VertexI'+'D','gl_Instanc'+'eID','gl_DrawID','gl_BaseVer'+'tex','gl_BaseIns'+'tance']);class KT{constructor(){h(this,'map',new Map());}['destroy'](_0x412c99){this['map']['forEach'](_0x27ee73=>{_0x412c99['gl']['deleteShad'+'er'](_0x27ee73);});}['loseContex'+'t'](_0x16af7e){this['map']['clear']();}}const ZT=new Kt(),QT=new Kt();class JT{constructor(_0xe92bf8){h(this,'compileDur'+'ation',-0x2192+0xf30+0x1262),(this['init'](),this['compile'](_0xe92bf8['device'],_0xe92bf8),this['link'](_0xe92bf8['device'],_0xe92bf8),_0xe92bf8['device']['shaders']['push'](_0xe92bf8));}['destroy'](_0x5acb76){this['glProgram']&&(_0x5acb76['device']['gl']['deleteProg'+'ram'](this['glProgram']),this['glProgram']=null);}['init'](){this['uniforms']=[],this['samplers']=[],this['attributes']=[],this['glProgram']=null,this['glVertexSh'+'ader']=null,this['glFragment'+'Shader']=null;}['loseContex'+'t'](){this['init']();}['restoreCon'+'text'](_0x18ccd0,_0x3c1d73){this['compile'](_0x18ccd0,_0x3c1d73),this['link'](_0x18ccd0,_0x3c1d73);}['compile'](_0x5dcbf8,_0x3a1158){const _0x5eb4ac=_0x3a1158['definition'];this['glVertexSh'+'ader']=this['_compileSh'+'aderSource'](_0x5dcbf8,_0x5eb4ac['vshader'],!(0x9fb+0xf*-0x12d+-0x4*-0x1ea)),this['glFragment'+'Shader']=this['_compileSh'+'aderSource'](_0x5dcbf8,_0x5eb4ac['fshader'],!(0xc57+-0x4*0x97a+0x1*0x1992));}['link'](_0x2a48cb,_0x1a70fc){if(this['glProgram'])return;const _0xf1b573=_0x2a48cb['gl'];if(_0xf1b573['isContextL'+'ost']())return;let _0x5ec744=-0xa3e+-0x1928+0x2*0x11b3;w['call'](()=>{this['compileDur'+'ation']=0x1a20+-0xbf+0x59*-0x49,_0x5ec744=de();});const _0x495777=_0xf1b573['createProg'+'ram']();this['glProgram']=_0x495777,_0xf1b573['attachShad'+'er'](_0x495777,this['glVertexSh'+'ader']),_0xf1b573['attachShad'+'er'](_0x495777,this['glFragment'+'Shader']);const _0x45f74c=_0x1a70fc['definition'],_0x468cfb=_0x45f74c['attributes'];if(_0x45f74c['useTransfo'+'rmFeedback']){const _0x233384=[];for(const _0x56f4cd in _0x468cfb)_0x468cfb['hasOwnProp'+'erty'](_0x56f4cd)&&_0x233384['push']('out_'+_0x56f4cd);_0xf1b573['transformF'+'eedbackVar'+'yings'](_0x495777,_0x233384,_0xf1b573['INTERLEAVE'+'D_ATTRIBS']);}const _0x17d9b0={};for(const _0x44f489 in _0x468cfb)if(_0x468cfb['hasOwnProp'+'erty'](_0x44f489)){const _0x1078f8=_0x468cfb[_0x44f489],_0x2ad65c=Le[_0x1078f8];w['assert'](!_0x17d9b0['hasOwnProp'+'erty'](_0x2ad65c),'WARNING:\x20T'+'wo\x20attribu'+'tes\x20are\x20ma'+'pped\x20to\x20th'+'e\x20same\x20loc'+'ation\x20in\x20a'+'\x20shader:\x20'+_0x17d9b0[_0x2ad65c]+'\x20and\x20'+_0x44f489),_0x17d9b0[_0x2ad65c]=_0x44f489,_0xf1b573['bindAttrib'+'Location'](_0x495777,_0x2ad65c,_0x44f489);}_0xf1b573['linkProgra'+'m'](_0x495777),w['call'](()=>{this['compileDur'+'ation']=de()-_0x5ec744;}),_0x2a48cb['_shaderSta'+'ts']['linked']++,_0x45f74c['tag']===Sy&&_0x2a48cb['_shaderSta'+'ts']['materialSh'+'aders']++;}['_compileSh'+'aderSource'](_0x5ad721,_0x599b95,_0x13ecdf){const _0xe6de34=_0x5ad721['gl'];if(_0xe6de34['isContextL'+'ost']())return null;const _0x38f96e=(_0x13ecdf?ZT:QT)['get'](_0x5ad721,()=>new KT());let _0x2db34f=_0x38f96e['map']['get'](_0x599b95);if(!_0x2db34f){const _0x1a7255=de();_0x5ad721['fire']('shader:com'+'pile:start',{'timestamp':_0x1a7255,'target':_0x5ad721}),_0x2db34f=_0xe6de34['createShad'+'er'](_0x13ecdf?_0xe6de34['VERTEX_SHA'+'DER']:_0xe6de34['FRAGMENT_S'+'HADER']),_0xe6de34['shaderSour'+'ce'](_0x2db34f,_0x599b95),_0xe6de34['compileSha'+'der'](_0x2db34f),_0x38f96e['map']['set'](_0x599b95,_0x2db34f);const _0x1ff4f6=de();_0x5ad721['fire']('shader:com'+'pile:end',{'timestamp':_0x1ff4f6,'target':_0x5ad721}),_0x5ad721['_shaderSta'+'ts']['compileTim'+'e']+=_0x1ff4f6-_0x1a7255,_0x13ecdf?_0x5ad721['_shaderSta'+'ts']['vsCompiled']++:_0x5ad721['_shaderSta'+'ts']['fsCompiled']++;}return _0x2db34f;}['finalize'](_0x591110,_0x5538b2){var _0x5ae0f5,_0x44ac6d;const _0x3767ed=_0x591110['gl'];if(_0x3767ed['isContextL'+'ost']())return!(-0x1*0x1720+0x1dd7+0xbf*-0x9);const _0x2e94d1=this['glProgram'],_0x15c7aa=_0x5538b2['definition'],_0x509316=de();_0x591110['fire']('shader:lin'+'k:start',{'timestamp':_0x509316,'target':_0x591110});let _0x4ee8b5=-0x18a9+-0x1fd0+-0x1*-0x3879;if(w['call'](()=>{_0x4ee8b5=de();}),!_0x3767ed['getProgram'+'Parameter'](_0x2e94d1,_0x3767ed['LINK_STATU'+'S'])){if(!this['_isCompile'+'d'](_0x591110,_0x5538b2,this['glVertexSh'+'ader'],_0x15c7aa['vshader'],'vertex')||!this['_isCompile'+'d'](_0x591110,_0x5538b2,this['glFragment'+'Shader'],_0x15c7aa['fshader'],'fragment'))return!(-0x2353+0xc62+0x16f2);const _0x1ff256='Failed\x20to\x20'+'link\x20shade'+'r\x20program.'+'\x20Error:\x20'+_0x3767ed['getProgram'+'InfoLog'](_0x2e94d1);return _0x15c7aa['translated'+'Frag']=(_0x5ae0f5=_0x3767ed['getExtensi'+'on']('WEBGL_debu'+'g_shaders'))==null?void(0xc4f+-0x1*0x241d+-0x115*-0x16):_0x5ae0f5['getTransla'+'tedShaderS'+'ource'](this['glFragment'+'Shader']),_0x15c7aa['translated'+'Vert']=(_0x44ac6d=_0x3767ed['getExtensi'+'on']('WEBGL_debu'+'g_shaders'))==null?void(0x15bb+0x226e+-0x3829):_0x44ac6d['getTransla'+'tedShaderS'+'ource'](this['glVertexSh'+'ader']),console['error'](_0x1ff256,_0x15c7aa),console['error'](_0x1ff256),!(0xd6*-0x8+-0x1633+0x1ce4);}const _0x536f43=_0x3767ed['getProgram'+'Parameter'](_0x2e94d1,_0x3767ed['ACTIVE_ATT'+'RIBUTES']);_0x5538b2['attributes']['clear']();for(let _0x1f4d04=-0x1*0x1e97+0x3*0x5+0x1e88;_0x1f4d04<_0x536f43;_0x1f4d04++){const _0x3a3c56=_0x3767ed['getActiveA'+'ttrib'](_0x2e94d1,_0x1f4d04),_0x3f99a8=_0x3767ed['getAttribL'+'ocation'](_0x2e94d1,_0x3a3c56['name']);YT['has'](_0x3a3c56['name'])||(_0x15c7aa['attributes'][_0x3a3c56['name']]===void(0xea6+0x3*0x15d+-0x12bd)?(console['error']('Vertex\x20sha'+'der\x20attrib'+'ute\x20\x22'+_0x3a3c56['name']+('\x22\x20is\x20not\x20m'+'apped\x20to\x20a'+'\x20semantic\x20'+'in\x20shader\x20'+'definition'+',\x20shader\x20[')+_0x5538b2['label']+']',_0x5538b2),_0x5538b2['failed']=!(-0x4f*-0x76+-0x55*-0x4f+-0x1d*0x229)):_0x5538b2['attributes']['set'](_0x3f99a8,_0x3a3c56['name']));}const _0x486d65=_0x591110['_samplerTy'+'pes'],_0x27066c=_0x3767ed['getProgram'+'Parameter'](_0x2e94d1,_0x3767ed['ACTIVE_UNI'+'FORMS']);for(let _0x19a91a=-0x3ca*0x2+-0x1a51*-0x1+-0x12bd;_0x19a91a<_0x27066c;_0x19a91a++){const _0xb7a11f=_0x3767ed['getActiveU'+'niform'](_0x2e94d1,_0x19a91a),_0x534f14=_0x3767ed['getUniform'+'Location'](_0x2e94d1,_0xb7a11f['name']),_0x170124=new jT(_0x591110,_0xb7a11f['name'],_0x591110['pcUniformT'+'ype'][_0xb7a11f['type']],_0x534f14);_0x486d65['has'](_0xb7a11f['type'])?this['samplers']['push'](_0x170124):this['uniforms']['push'](_0x170124);}_0x5538b2['ready']=!(0x35e+-0x1ad0+0xbb9*0x2);const _0x7c9ee1=de();return _0x591110['fire']('shader:lin'+'k:end',{'timestamp':_0x7c9ee1,'target':_0x591110}),_0x591110['_shaderSta'+'ts']['compileTim'+'e']+=_0x7c9ee1-_0x509316,w['call'](()=>{const _0x2a1e59=de()-_0x4ee8b5;this['compileDur'+'ation']+=_0x2a1e59,l_+=this['compileDur'+'ation'],w['trace']($0,'[id:\x20'+_0x5538b2['id']+']\x20'+_0x5538b2['name']+':\x20'+this['compileDur'+'ation']['toFixed'](-0xfa3*-0x1+0x7f6+0x5*-0x4b8)+('ms,\x20TOTAL:'+'\x20')+l_['toFixed'](-0x2ef*-0x1+-0x148c+0x2*0x8cf)+'ms');}),!(-0x1671*-0x1+0x1*0x1a63+0x1f4*-0x19);}['_isCompile'+'d'](_0x3a1bed,_0x19dac7,_0x336730,_0x297d52,_0x5347e0){const _0x4be482=_0x3a1bed['gl'];if(!_0x4be482['getShaderP'+'arameter'](_0x336730,_0x4be482['COMPILE_ST'+'ATUS'])){const _0x20114a=_0x4be482['getShaderI'+'nfoLog'](_0x336730),[_0x20942c,_0x4bbdd3]=this['_processEr'+'ror'](_0x297d52,_0x20114a),_0x337293='Failed\x20to\x20'+'compile\x20'+_0x5347e0+'\x20shader:\x0a\x0a'+_0x20114a+'\x0a'+_0x20942c+('\x20while\x20ren'+'dering\x20')+Q['toString']();return _0x4bbdd3['shader']=_0x19dac7,console['error'](_0x337293,_0x4bbdd3),console['error'](_0x337293),!(0x2be+-0x10b*-0x25+0x5c*-0x73);}return!(0x120b+-0x86*-0x42+-0x3497);}['isLinked'](_0x8ddeeb){const {extParallelShaderCompile:_0x4051aa}=_0x8ddeeb;return _0x4051aa?_0x8ddeeb['gl']['getProgram'+'Parameter'](this['glProgram'],_0x4051aa['COMPLETION'+'_STATUS_KH'+'R']):!(-0x1c45+-0x17c4+-0x76f*-0x7);}['_processEr'+'ror'](_0x801d75,_0x3b878f){const _0x5c9ca9={};let _0x58fd74='';if(_0x801d75){const _0x21c91f=_0x801d75['split']('\x0a');let _0x47b03a=-0x33*0xa1+-0xd*0x97+0x13df*0x2,_0x2e72c7=_0x21c91f['length'];if(_0x3b878f&&_0x3b878f['startsWith']('ERROR:')){const _0x9acbf3=_0x3b878f['match'](/^ERROR:\s(\d+):(\d+):\s*(.+)/);_0x9acbf3&&(_0x5c9ca9['message']=_0x9acbf3[-0x123f+0x72f+0xb13],_0x5c9ca9['line']=parseInt(_0x9acbf3[0x1b8*-0x2+0x19b*-0x9+0x11e5],-0x21d2+-0xf7*0x17+0x380d),_0x47b03a=Math['max'](0x1c9a+-0x1*-0x13f1+0x2b*-0x121,_0x5c9ca9['line']-(0x1*0x14cf+0x1554+-0x1*0x2a1d)),_0x2e72c7=Math['min'](_0x21c91f['length'],_0x5c9ca9['line']+(0xf1f+0x3*0x434+0x1*-0x1bb6)));}for(let _0x5e0a70=_0x47b03a;_0x5e0a70<_0x2e72c7;_0x5e0a70++){const _0x250bb0=_0x5e0a70+(-0x635+-0x1a31+0x4a1*0x7)===_0x5c9ca9['line']?'>\x20':'\x20\x20';_0x58fd74+=''+_0x250bb0+(_0x5e0a70+(0x124b+0x2*-0xfda+0xd6a))+':\x09'+_0x21c91f[_0x5e0a70]+'\x0a';}_0x5c9ca9['source']=_0x801d75;}return[_0x58fd74,_0x5c9ca9];}}function c_(_0x516581,_0x3effdf){const _0x19ae30=_0x516581['width'],_0xd79c06=_0x516581['height'];if(_0x19ae30>_0x3effdf||_0xd79c06>_0x3effdf){const _0xcf1c75=_0x3effdf/Math['max'](_0x19ae30,_0xd79c06),_0x13cf4d=Math['floor'](_0x19ae30*_0xcf1c75),_0xde1da2=Math['floor'](_0xd79c06*_0xcf1c75);w['warn']('Image\x20dime'+'nsions\x20lar'+'ger\x20than\x20m'+'ax\x20support'+'ed\x20texture'+'\x20size\x20of\x20'+_0x3effdf+('.\x20Resizing'+'\x20from\x20')+_0x19ae30+',\x20'+_0xd79c06+'\x20to\x20'+_0x13cf4d+',\x20'+_0xde1da2+'.');const _0x43b3cf=document['createElem'+'ent']('canvas');return _0x43b3cf['width']=_0x13cf4d,_0x43b3cf['height']=_0xde1da2,_0x43b3cf['getContext']('2d')['drawImage'](_0x516581,0x4ce+-0x377*0xa+-0x1*-0x1dd8,-0x595+0x19a5+-0x6*0x358,_0x19ae30,_0xd79c06,-0x3*-0x199+0x1daf+-0x227a,0x1118*0x1+-0x25a6+0x148e,_0x13cf4d,_0xde1da2),_0x43b3cf;}return _0x516581;}class ew{constructor(_0x47689f){h(this,'_glTexture',null),h(this,'_glTarget'),h(this,'_glFormat'),h(this,'_glInterna'+'lFormat'),h(this,'_glPixelTy'+'pe'),h(this,'_glCreated'),h(this,'dirtyParam'+'eterFlags',0x171a+-0x20f4+0x9da),this['texture']=_0x47689f;}['destroy'](_0x203fcb){if(this['_glTexture']){for(let _0x4b3d3b=0x1fa5+0x22d7+0x172*-0x2e;_0x4b3d3b<_0x203fcb['textureUni'+'ts']['length'];_0x4b3d3b++){const _0x14b2ec=_0x203fcb['textureUni'+'ts'][_0x4b3d3b];for(let _0x24f72c=-0x6c6+-0x186c+0x1f32;_0x24f72c<_0x14b2ec['length'];_0x24f72c++)_0x14b2ec[_0x24f72c]===this['_glTexture']&&(_0x14b2ec[_0x24f72c]=null);}_0x203fcb['gl']['deleteText'+'ure'](this['_glTexture']),this['_glTexture']=null;}}['loseContex'+'t'](){this['_glTexture']=null;}['propertyCh'+'anged'](_0x2336ff){this['dirtyParam'+'eterFlags']|=_0x2336ff;}['initialize'](_0x46cbf4,_0x1c9b22){const _0x5d1ea2=_0x46cbf4['gl'];switch(this['_glTexture']=_0x5d1ea2['createText'+'ure'](),this['_glTarget']=_0x1c9b22['_cubemap']?_0x5d1ea2['TEXTURE_CU'+'BE_MAP']:_0x1c9b22['_volume']?_0x5d1ea2['TEXTURE_3D']:_0x1c9b22['array']?_0x5d1ea2['TEXTURE_2D'+'_ARRAY']:_0x5d1ea2['TEXTURE_2D'],_0x1c9b22['_format']){case ty:this['_glFormat']=_0x5d1ea2['ALPHA'],this['_glInterna'+'lFormat']=_0x5d1ea2['ALPHA'],this['_glPixelTy'+'pe']=_0x5d1ea2['UNSIGNED_B'+'YTE'];break;case sy:this['_glFormat']=_0x5d1ea2['LUMINANCE'],this['_glInterna'+'lFormat']=_0x5d1ea2['LUMINANCE'],this['_glPixelTy'+'pe']=_0x5d1ea2['UNSIGNED_B'+'YTE'];break;case ap:this['_glFormat']=_0x5d1ea2['LUMINANCE_'+'ALPHA'],this['_glInterna'+'lFormat']=_0x5d1ea2['LUMINANCE_'+'ALPHA'],this['_glPixelTy'+'pe']=_0x5d1ea2['UNSIGNED_B'+'YTE'];break;case Ep:this['_glFormat']=_0x5d1ea2['RED'],this['_glInterna'+'lFormat']=_0x5d1ea2['R8'],this['_glPixelTy'+'pe']=_0x5d1ea2['UNSIGNED_B'+'YTE'];break;case bp:this['_glFormat']=_0x5d1ea2['RG'],this['_glInterna'+'lFormat']=_0x5d1ea2['RG8'],this['_glPixelTy'+'pe']=_0x5d1ea2['UNSIGNED_B'+'YTE'];break;case Jh:this['_glFormat']=_0x5d1ea2['RGB'],this['_glInterna'+'lFormat']=_0x5d1ea2['RGB565'],this['_glPixelTy'+'pe']=_0x5d1ea2['UNSIGNED_S'+'HORT_5_6_5'];break;case np:this['_glFormat']=_0x5d1ea2['RGBA'],this['_glInterna'+'lFormat']=_0x5d1ea2['RGB5_A1'],this['_glPixelTy'+'pe']=_0x5d1ea2['UNSIGNED_S'+'HORT_5_5_5'+'_1'];break;case ed:this['_glFormat']=_0x5d1ea2['RGBA'],this['_glInterna'+'lFormat']=_0x5d1ea2['RGBA4'],this['_glPixelTy'+'pe']=_0x5d1ea2['UNSIGNED_S'+'HORT_4_4_4'+'_4'];break;case Cr:this['_glFormat']=_0x5d1ea2['RGB'],this['_glInterna'+'lFormat']=_0x5d1ea2['RGB8'],this['_glPixelTy'+'pe']=_0x5d1ea2['UNSIGNED_B'+'YTE'];break;case Ne:this['_glFormat']=_0x5d1ea2['RGBA'],this['_glInterna'+'lFormat']=_0x5d1ea2['RGBA8'],this['_glPixelTy'+'pe']=_0x5d1ea2['UNSIGNED_B'+'YTE'];break;case ny:case hy:w['error']('BGRA8\x20and\x20'+'SBGRA8\x20tex'+'ture\x20forma'+'ts\x20are\x20not'+'\x20supported'+'\x20by\x20WebGL.');break;case td:this['_glFormat']=_0x5d1ea2['RGB'],this['_glInterna'+'lFormat']=_0x46cbf4['extCompres'+'sedTexture'+'S3TC']['COMPRESSED'+'_RGB_S3TC_'+'DXT1_EXT'];break;case op:this['_glFormat']=_0x5d1ea2['RGBA'],this['_glInterna'+'lFormat']=_0x46cbf4['extCompres'+'sedTexture'+'S3TC']['COMPRESSED'+'_RGBA_S3TC'+'_DXT3_EXT'];break;case vl:this['_glFormat']=_0x5d1ea2['RGBA'],this['_glInterna'+'lFormat']=_0x46cbf4['extCompres'+'sedTexture'+'S3TC']['COMPRESSED'+'_RGBA_S3TC'+'_DXT5_EXT'];break;case id:this['_glFormat']=_0x5d1ea2['RGB'],this['_glInterna'+'lFormat']=_0x46cbf4['extCompres'+'sedTexture'+'ETC1']['COMPRESSED'+'_RGB_ETC1_'+'WEBGL'];break;case xl:this['_glFormat']=_0x5d1ea2['RGB'],this['_glInterna'+'lFormat']=_0x46cbf4['extCompres'+'sedTexture'+'PVRTC']['COMPRESSED'+'_RGB_PVRTC'+'_2BPPV1_IM'+'G'];break;case Tl:this['_glFormat']=_0x5d1ea2['RGBA'],this['_glInterna'+'lFormat']=_0x46cbf4['extCompres'+'sedTexture'+'PVRTC']['COMPRESSED'+'_RGBA_PVRT'+'C_2BPPV1_I'+'MG'];break;case rd:this['_glFormat']=_0x5d1ea2['RGB'],this['_glInterna'+'lFormat']=_0x46cbf4['extCompres'+'sedTexture'+'PVRTC']['COMPRESSED'+'_RGB_PVRTC'+'_4BPPV1_IM'+'G'];break;case ad:this['_glFormat']=_0x5d1ea2['RGBA'],this['_glInterna'+'lFormat']=_0x46cbf4['extCompres'+'sedTexture'+'PVRTC']['COMPRESSED'+'_RGBA_PVRT'+'C_4BPPV1_I'+'MG'];break;case cp:this['_glFormat']=_0x5d1ea2['RGB'],this['_glInterna'+'lFormat']=_0x46cbf4['extCompres'+'sedTexture'+'ETC']['COMPRESSED'+'_RGB8_ETC2'];break;case hp:this['_glFormat']=_0x5d1ea2['RGBA'],this['_glInterna'+'lFormat']=_0x46cbf4['extCompres'+'sedTexture'+'ETC']['COMPRESSED'+'_RGBA8_ETC'+'2_EAC'];break;case iy:this['_glFormat']=_0x5d1ea2['RGBA'],this['_glInterna'+'lFormat']=_0x46cbf4['extCompres'+'sedTexture'+'ASTC']['COMPRESSED'+'_RGBA_ASTC'+'_4x4_KHR'];break;case ry:this['_glFormat']=_0x5d1ea2['RGB'],this['_glInterna'+'lFormat']=_0x46cbf4['extCompres'+'sedTexture'+'ATC']['COMPRESSED'+'_RGB_ATC_W'+'EBGL'];break;case ay:this['_glFormat']=_0x5d1ea2['RGBA'],this['_glInterna'+'lFormat']=_0x46cbf4['extCompres'+'sedTexture'+'ATC']['COMPRESSED'+'_RGBA_ATC_'+'INTERPOLAT'+'ED_ALPHA_W'+'EBGL'];break;case dy:this['_glFormat']=_0x5d1ea2['RGB'],this['_glInterna'+'lFormat']=_0x46cbf4['extTexture'+'Compressio'+'nBPTC']['COMPRESSED'+'_RGB_BPTC_'+'SIGNED_FLO'+'AT_EXT'];break;case fy:this['_glFormat']=_0x5d1ea2['RGB'],this['_glInterna'+'lFormat']=_0x46cbf4['extTexture'+'Compressio'+'nBPTC']['COMPRESSED'+'_RGB_BPTC_'+'UNSIGNED_F'+'LOAT_EXT'];break;case uy:this['_glFormat']=_0x5d1ea2['RGBA'],this['_glInterna'+'lFormat']=_0x46cbf4['extTexture'+'Compressio'+'nBPTC']['COMPRESSED'+'_RGBA_BPTC'+'_UNORM_EXT'];break;case Xf:this['_glFormat']=_0x5d1ea2['SRGB'],this['_glInterna'+'lFormat']=_0x46cbf4['extCompres'+'sedTexture'+'S3TC_SRGB']['COMPRESSED'+'_SRGB_S3TC'+'_DXT1_EXT'];break;case qf:this['_glFormat']=_0x5d1ea2['SRGB_ALPHA'],this['_glInterna'+'lFormat']=_0x46cbf4['extCompres'+'sedTexture'+'S3TC_SRGB']['COMPRESSED'+'_SRGB_ALPH'+'A_S3TC_DXT'+'3_EXT'];break;case jf:this['_glFormat']=_0x5d1ea2['SRGB_ALPHA'],this['_glInterna'+'lFormat']=_0x46cbf4['extCompres'+'sedTexture'+'S3TC_SRGB']['COMPRESSED'+'_SRGB_ALPH'+'A_S3TC_DXT'+'5_EXT'];break;case Yf:this['_glFormat']=_0x5d1ea2['SRGB'],this['_glInterna'+'lFormat']=_0x46cbf4['extCompres'+'sedTexture'+'ETC']['COMPRESSED'+'_SRGB8_ETC'+'2'];break;case Kf:this['_glFormat']=_0x5d1ea2['SRGB_ALPHA'],this['_glInterna'+'lFormat']=_0x46cbf4['extCompres'+'sedTexture'+'ETC']['COMPRESSED'+'_SRGB8_ALP'+'HA8_ETC2_E'+'AC'];break;case Zf:this['_glFormat']=_0x5d1ea2['SRGB_ALPHA'],this['_glInterna'+'lFormat']=_0x46cbf4['extCompres'+'sedTexture'+'ASTC']['COMPRESSED'+'_SRGB8_ALP'+'HA8_ASTC_4'+'x4_KHR'];break;case Qf:this['_glFormat']=_0x5d1ea2['RGBA'],this['_glInterna'+'lFormat']=_0x46cbf4['extTexture'+'Compressio'+'nBPTC']['COMPRESSED'+'_SRGB_ALPH'+'A_BPTC_UNO'+'RM_EXT'];break;case od:this['_glFormat']=_0x5d1ea2['RED'],this['_glInterna'+'lFormat']=_0x5d1ea2['R16F'],this['_glPixelTy'+'pe']=_0x5d1ea2['HALF_FLOAT'];break;case wp:this['_glFormat']=_0x5d1ea2['RG'],this['_glInterna'+'lFormat']=_0x5d1ea2['RG16F'],this['_glPixelTy'+'pe']=_0x5d1ea2['HALF_FLOAT'];break;case ui:this['_glFormat']=_0x5d1ea2['RGB'],this['_glInterna'+'lFormat']=_0x5d1ea2['RGB16F'],this['_glPixelTy'+'pe']=_0x5d1ea2['HALF_FLOAT'];break;case nt:this['_glFormat']=_0x5d1ea2['RGBA'],this['_glInterna'+'lFormat']=_0x5d1ea2['RGBA16F'],this['_glPixelTy'+'pe']=_0x5d1ea2['HALF_FLOAT'];break;case Ye:this['_glFormat']=_0x5d1ea2['RGB'],this['_glInterna'+'lFormat']=_0x5d1ea2['RGB32F'],this['_glPixelTy'+'pe']=_0x5d1ea2['FLOAT'];break;case Xt:this['_glFormat']=_0x5d1ea2['RGBA'],this['_glInterna'+'lFormat']=_0x5d1ea2['RGBA32F'],this['_glPixelTy'+'pe']=_0x5d1ea2['FLOAT'];break;case Ji:this['_glFormat']=_0x5d1ea2['RED'],this['_glInterna'+'lFormat']=_0x5d1ea2['R32F'],this['_glPixelTy'+'pe']=_0x5d1ea2['FLOAT'];break;case $i:this['_glFormat']=_0x5d1ea2['DEPTH_COMP'+'ONENT'],this['_glInterna'+'lFormat']=_0x5d1ea2['DEPTH_COMP'+'ONENT32F'],this['_glPixelTy'+'pe']=_0x5d1ea2['FLOAT'];break;case vn:this['_glFormat']=_0x5d1ea2['DEPTH_COMP'+'ONENT'],this['_glInterna'+'lFormat']=_0x5d1ea2['DEPTH_COMP'+'ONENT16'],this['_glPixelTy'+'pe']=_0x5d1ea2['UNSIGNED_S'+'HORT'];break;case sd:this['_glFormat']=_0x5d1ea2['DEPTH_STEN'+'CIL'],this['_glInterna'+'lFormat']=_0x5d1ea2['DEPTH24_ST'+'ENCIL8'],this['_glPixelTy'+'pe']=_0x5d1ea2['UNSIGNED_I'+'NT_24_8'];break;case In:this['_glFormat']=_0x5d1ea2['RGB'],this['_glInterna'+'lFormat']=_0x5d1ea2['R11F_G11F_'+'B10F'],this['_glPixelTy'+'pe']=_0x5d1ea2['UNSIGNED_I'+'NT_10F_11F'+'_11F_REV'];break;case lp:this['_glFormat']=_0x5d1ea2['RGB'],this['_glInterna'+'lFormat']=_0x5d1ea2['SRGB8'],this['_glPixelTy'+'pe']=_0x5d1ea2['UNSIGNED_B'+'YTE'];break;case _s:this['_glFormat']=_0x5d1ea2['RGBA'],this['_glInterna'+'lFormat']=_0x5d1ea2['SRGB8_ALPH'+'A8'],this['_glPixelTy'+'pe']=_0x5d1ea2['UNSIGNED_B'+'YTE'];break;case dp:this['_glFormat']=_0x5d1ea2['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0x5d1ea2['R8I'],this['_glPixelTy'+'pe']=_0x5d1ea2['BYTE'];break;case oy:this['_glFormat']=_0x5d1ea2['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0x5d1ea2['R8UI'],this['_glPixelTy'+'pe']=_0x5d1ea2['UNSIGNED_B'+'YTE'];break;case fp:this['_glFormat']=_0x5d1ea2['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0x5d1ea2['R16I'],this['_glPixelTy'+'pe']=_0x5d1ea2['SHORT'];break;case up:this['_glFormat']=_0x5d1ea2['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0x5d1ea2['R16UI'],this['_glPixelTy'+'pe']=_0x5d1ea2['UNSIGNED_S'+'HORT'];break;case pp:this['_glFormat']=_0x5d1ea2['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0x5d1ea2['R32I'],this['_glPixelTy'+'pe']=_0x5d1ea2['INT'];break;case Ki:this['_glFormat']=_0x5d1ea2['RED_INTEGE'+'R'],this['_glInterna'+'lFormat']=_0x5d1ea2['R32UI'],this['_glPixelTy'+'pe']=_0x5d1ea2['UNSIGNED_I'+'NT'];break;case mp:this['_glFormat']=_0x5d1ea2['RG_INTEGER'],this['_glInterna'+'lFormat']=_0x5d1ea2['RG8I'],this['_glPixelTy'+'pe']=_0x5d1ea2['BYTE'];break;case ly:this['_glFormat']=_0x5d1ea2['RG_INTEGER'],this['_glInterna'+'lFormat']=_0x5d1ea2['RG8UI'],this['_glPixelTy'+'pe']=_0x5d1ea2['UNSIGNED_B'+'YTE'];break;case _p:this['_glFormat']=_0x5d1ea2['RG_INTEGER'],this['_glInterna'+'lFormat']=_0x5d1ea2['RG16I'],this['_glPixelTy'+'pe']=_0x5d1ea2['SHORT'];break;case gp:this['_glFormat']=_0x5d1ea2['RG_INTEGER'],this['_glInterna'+'lFormat']=_0x5d1ea2['RG16UI'],this['_glPixelTy'+'pe']=_0x5d1ea2['UNSIGNED_S'+'HORT'];break;case Sp:this['_glFormat']=_0x5d1ea2['RG_INTEGER'],this['_glInterna'+'lFormat']=_0x5d1ea2['RG32I'],this['_glPixelTy'+'pe']=_0x5d1ea2['INT'];break;case yp:this['_glFormat']=_0x5d1ea2['RG_INTEGER'],this['_glInterna'+'lFormat']=_0x5d1ea2['RG32UI'],this['_glPixelTy'+'pe']=_0x5d1ea2['UNSIGNED_I'+'NT'];break;case vp:this['_glFormat']=_0x5d1ea2['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0x5d1ea2['RGBA8I'],this['_glPixelTy'+'pe']=_0x5d1ea2['BYTE'];break;case cy:this['_glFormat']=_0x5d1ea2['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0x5d1ea2['RGBA8UI'],this['_glPixelTy'+'pe']=_0x5d1ea2['UNSIGNED_B'+'YTE'];break;case xp:this['_glFormat']=_0x5d1ea2['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0x5d1ea2['RGBA16I'],this['_glPixelTy'+'pe']=_0x5d1ea2['SHORT'];break;case nd:this['_glFormat']=_0x5d1ea2['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0x5d1ea2['RGBA16UI'],this['_glPixelTy'+'pe']=_0x5d1ea2['UNSIGNED_S'+'HORT'];break;case Tp:this['_glFormat']=_0x5d1ea2['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0x5d1ea2['RGBA32I'],this['_glPixelTy'+'pe']=_0x5d1ea2['INT'];break;case Ue:this['_glFormat']=_0x5d1ea2['RGBA_INTEG'+'ER'],this['_glInterna'+'lFormat']=_0x5d1ea2['RGBA32UI'],this['_glPixelTy'+'pe']=_0x5d1ea2['UNSIGNED_I'+'NT'];break;}this['_glCreated']=!(-0x4ee*0x5+0x25*-0x3e+0x219d);}['upload'](_0x4d4b31,_0x36a782){w['assert'](_0x36a782['device'],'Attempting'+'\x20to\x20use\x20a\x20'+'texture\x20th'+'at\x20has\x20bee'+'n\x20destroye'+'d.',_0x36a782);const _0x42df86=_0x4d4b31['gl'];if(!_0x36a782['_needsUplo'+'ad']&&(_0x36a782['_needsMipm'+'apsUpload']&&_0x36a782['_mipmapsUp'+'loaded']||!_0x36a782['pot']))return;let _0x5377b2=0x6*0x1ba+0x10b0+-0xd86*0x2,_0xf93471,_0x318432;const _0xe159ad=_0x36a782['numLevels'];for(_0x36a782['array']&&_0x42df86['texStorage'+'3D'](_0x42df86['TEXTURE_2D'+'_ARRAY'],_0xe159ad,this['_glInterna'+'lFormat'],_0x36a782['_width'],_0x36a782['_height'],_0x36a782['_arrayLeng'+'th']);_0x36a782['_levels'][_0x5377b2]||_0x5377b2===0x1787+-0x1*-0x33f+-0x1ac6;){if(!_0x36a782['_needsUplo'+'ad']&&_0x5377b2===0xd6a+0xd0d*0x1+0x5*-0x54b){_0x5377b2++;continue;}else{if(_0x5377b2&&(!_0x36a782['_needsMipm'+'apsUpload']||!_0x36a782['_mipmaps']))break;}if(_0xf93471=_0x36a782['_levels'][_0x5377b2],_0x318432=(-0x4*0x97+-0x6b*-0x53+-0x2054)/Math['pow'](0x2060+-0x1*0x6df+-0x197f,_0x5377b2),_0x5377b2===-0x94d*0x4+0x1844*-0x1+0x1*0x3d79&&!_0x36a782['_compresse'+'d']&&!_0x36a782['_integerFo'+'rmat']&&_0x36a782['_levels']['length']<_0xe159ad&&(_0x42df86['generateMi'+'pmap'](this['_glTarget']),_0x36a782['_mipmapsUp'+'loaded']=!(-0x1d*-0x29+-0x17f*-0x1+-0x624)),_0x36a782['_cubemap']){let _0x37b8c9;if(_0x4d4b31['_isBrowser'+'Interface'](_0xf93471[0x89*-0xb+0x1401+-0xe1e]))for(_0x37b8c9=-0x1cde+-0x1*0x19c1+-0x1235*-0x3;_0x37b8c9<0x3*-0x85d+0x2*0x123a+-0xb57;_0x37b8c9++){if(!_0x36a782['_levelsUpd'+'ated'][-0x1d7c+-0x23a0+0x4*0x1047][_0x37b8c9])continue;let _0x383487=_0xf93471[_0x37b8c9];_0x4d4b31['_isImageBr'+'owserInter'+'face'](_0x383487)&&(_0x383487['width']>_0x4d4b31['maxCubeMap'+'Size']||_0x383487['height']>_0x4d4b31['maxCubeMap'+'Size'])&&(_0x383487=c_(_0x383487,_0x4d4b31['maxCubeMap'+'Size']),_0x5377b2===0xace+-0xfd6+0x508&&(_0x36a782['_width']=_0x383487['width'],_0x36a782['_height']=_0x383487['height'])),_0x4d4b31['setUnpackF'+'lipY'](!(-0x59b*-0x2+0x4c7+-0xffc)),_0x4d4b31['setUnpackP'+'remultiply'+'Alpha'](_0x36a782['_premultip'+'lyAlpha']),this['_glCreated']?_0x42df86['texSubImag'+'e2D'](_0x42df86['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x37b8c9,_0x5377b2,0x1*0x1591+0x1*-0x263b+0x2c7*0x6,-0x315*0x6+-0x133*-0x1e+-0x117c,this['_glFormat'],this['_glPixelTy'+'pe'],_0x383487):_0x42df86['texImage2D'](_0x42df86['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x37b8c9,_0x5377b2,this['_glInterna'+'lFormat'],this['_glFormat'],this['_glPixelTy'+'pe'],_0x383487);}else for(_0x318432=(0x1*0x33+-0x142+0x110)/Math['pow'](0x269*0x5+-0x10*0x8a+-0x36b,_0x5377b2),_0x37b8c9=0xa72+0xb5f*0x2+-0x2130;_0x37b8c9<0x15a+0x2*-0x110a+0x20c0;_0x37b8c9++){if(!_0x36a782['_levelsUpd'+'ated'][0x1ed2+0x5*-0x675+0x3*0x7d][_0x37b8c9])continue;const _0x1ba32b=_0xf93471[_0x37b8c9];_0x36a782['_compresse'+'d']?this['_glCreated']&&_0x1ba32b?_0x42df86['compressed'+'TexSubImag'+'e2D'](_0x42df86['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x37b8c9,_0x5377b2,0x1c7d+-0x557*0x6+-0x65*-0x9,0x1071*0x2+-0x2020+0x1*-0xc2,Math['max'](_0x36a782['_width']*_0x318432,0x13c2+0x13e6+-0x27a7),Math['max'](_0x36a782['_height']*_0x318432,-0x1bc9*0x1+0xd9f+-0x1f*-0x75),this['_glInterna'+'lFormat'],_0x1ba32b):_0x42df86['compressed'+'TexImage2D'](_0x42df86['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x37b8c9,_0x5377b2,this['_glInterna'+'lFormat'],Math['max'](_0x36a782['_width']*_0x318432,-0x1847+-0x28e*0xd+-0x132a*-0x3),Math['max'](_0x36a782['_height']*_0x318432,-0x250+0x8e*0x29+-0x15*0xf9),-0x1a9d+0x4e*0x2f+0x1*0xc4b,_0x1ba32b):(_0x4d4b31['setUnpackF'+'lipY'](!(-0x184f*-0x1+0x15d0+-0x2e1e)),_0x4d4b31['setUnpackP'+'remultiply'+'Alpha'](_0x36a782['_premultip'+'lyAlpha']),this['_glCreated']&&_0x1ba32b?_0x42df86['texSubImag'+'e2D'](_0x42df86['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x37b8c9,_0x5377b2,0xa9*-0x14+-0x107*0xb+0x1881,0x1eaf+0xf4*0x4+0x1*-0x227f,Math['max'](_0x36a782['_width']*_0x318432,-0x25f6+-0x124*0xc+0x33a7),Math['max'](_0x36a782['_height']*_0x318432,0x617+-0xf55+0x9*0x107),this['_glFormat'],this['_glPixelTy'+'pe'],_0x1ba32b):_0x42df86['texImage2D'](_0x42df86['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x37b8c9,_0x5377b2,this['_glInterna'+'lFormat'],Math['max'](_0x36a782['_width']*_0x318432,0x2ad*-0x2+-0x2d5+-0x8*-0x106),Math['max'](_0x36a782['_height']*_0x318432,0x1212+0x1e01+-0x3012),-0x1d*0x41+0x1*0xb8a+-0x42d,this['_glFormat'],this['_glPixelTy'+'pe'],_0x1ba32b));}}else{if(_0x36a782['_volume'])_0x36a782['_compresse'+'d']?_0x42df86['compressed'+'TexImage3D'](_0x42df86['TEXTURE_3D'],_0x5377b2,this['_glInterna'+'lFormat'],Math['max'](_0x36a782['_width']*_0x318432,-0xb87+-0x1*0xfdd+0x1b65),Math['max'](_0x36a782['_height']*_0x318432,-0x44b*0x1+0x1de3+-0x1997),Math['max'](_0x36a782['_depth']*_0x318432,-0xe96+0x1489+-0x5f2),-0x11f*-0xd+-0x6d3+-0x7c*0x10,_0xf93471):(_0x4d4b31['setUnpackF'+'lipY'](!(-0x1bec+-0x1d2*0x5+-0x1*-0x2507)),_0x4d4b31['setUnpackP'+'remultiply'+'Alpha'](_0x36a782['_premultip'+'lyAlpha']),_0x42df86['texImage3D'](_0x42df86['TEXTURE_3D'],_0x5377b2,this['_glInterna'+'lFormat'],Math['max'](_0x36a782['_width']*_0x318432,0x8b3*-0x1+-0x51*0x3e+-0x3a*-0x7d),Math['max'](_0x36a782['_height']*_0x318432,0xcc1+0x1*0xac9+-0xf1*0x19),Math['max'](_0x36a782['_depth']*_0x318432,-0x49*0x29+-0x162f+0x21e1),-0xb2f+0x30*-0x8f+0x25ff,this['_glFormat'],this['_glPixelTy'+'pe'],_0xf93471));else{if(_0x36a782['array']&&typeof _0xf93471=='object'){if(_0x36a782['_arrayLeng'+'th']===_0xf93471['length']){if(_0x36a782['_compresse'+'d']){for(let _0x3c9941=-0x12*0x1eb+-0x1f*0x83+-0x1*-0x3263;_0x3c9941<_0x36a782['_arrayLeng'+'th'];_0x3c9941++)_0x42df86['compressed'+'TexSubImag'+'e3D'](_0x42df86['TEXTURE_2D'+'_ARRAY'],_0x5377b2,0x235c+0x1d5*-0xd+-0xc5*0xf,0x561+0x1f*-0x7d+0x9c2,_0x3c9941,Math['max'](Math['floor'](_0x36a782['_width']*_0x318432),0x1d33+0x1e07+-0x3b39),Math['max'](Math['floor'](_0x36a782['_height']*_0x318432),0x19cc+0x745+-0x17*0x170),-0x4*-0x5db+0x3*0x5d5+-0x28ea,this['_glInterna'+'lFormat'],_0xf93471[_0x3c9941]);}else{for(let _0x219809=0x12ad+-0x11*0x95+-0x8c8;_0x219809<_0x36a782['_arrayLeng'+'th'];_0x219809++)_0x42df86['texSubImag'+'e3D'](_0x42df86['TEXTURE_2D'+'_ARRAY'],_0x5377b2,0x269f+0xa8f+-0x312e,-0xf26+-0x172b+0x2651,_0x219809,Math['max'](Math['floor'](_0x36a782['_width']*_0x318432),0x23d2+0xc1d+-0x2fee),Math['max'](Math['floor'](_0x36a782['_height']*_0x318432),-0x2*-0x1288+-0x1688+0x1*-0xe87),-0x6a*-0x22+-0x3*-0xbce+0x67*-0x7b,this['_glFormat'],this['_glPixelTy'+'pe'],_0xf93471[_0x219809]);}}}else{if(_0x4d4b31['_isBrowser'+'Interface'](_0xf93471)){_0x4d4b31['_isImageBr'+'owserInter'+'face'](_0xf93471)&&(_0xf93471['width']>_0x4d4b31['maxTexture'+'Size']||_0xf93471['height']>_0x4d4b31['maxTexture'+'Size'])&&(_0xf93471=c_(_0xf93471,_0x4d4b31['maxTexture'+'Size']),_0x5377b2===0x7e0+-0x1cf+-0x1*0x611&&(_0x36a782['_width']=_0xf93471['width'],_0x36a782['_height']=_0xf93471['height']));const _0x1da090=_0xf93471['width']||_0xf93471['videoWidth'],_0x197b71=_0xf93471['height']||_0xf93471['videoHeigh'+'t'];_0x4d4b31['setUnpackF'+'lipY'](_0x36a782['_flipY']),_0x4d4b31['setUnpackP'+'remultiply'+'Alpha'](_0x36a782['_premultip'+'lyAlpha']),this['_glCreated']&&_0x36a782['_width']===_0x1da090&&_0x36a782['_height']===_0x197b71&&!_0x4d4b31['_isImageVi'+'deoInterfa'+'ce'](_0xf93471)?_0x42df86['texSubImag'+'e2D'](_0x42df86['TEXTURE_2D'],_0x5377b2,0x54b+0xc41+0x2*-0x8c6,-0x4e2*-0x1+0xee6+-0x13c8,this['_glFormat'],this['_glPixelTy'+'pe'],_0xf93471):(_0x42df86['texImage2D'](_0x42df86['TEXTURE_2D'],_0x5377b2,this['_glInterna'+'lFormat'],this['_glFormat'],this['_glPixelTy'+'pe'],_0xf93471),_0x5377b2===0x1*0x160+0x1112+-0x1272&&(_0x36a782['_width']=_0x1da090,_0x36a782['_height']=_0x197b71));}else _0x318432=(-0x26c3*0x1+-0x49d+0x2b61)/Math['pow'](-0x1920+-0x2*0x6c3+0x26a8,_0x5377b2),_0x36a782['_compresse'+'d']?this['_glCreated']&&_0xf93471?_0x42df86['compressed'+'TexSubImag'+'e2D'](_0x42df86['TEXTURE_2D'],_0x5377b2,0x1033+0x1560+-0x2593,0x22ff+0x26ac+0x49ab*-0x1,Math['max'](Math['floor'](_0x36a782['_width']*_0x318432),-0x833*0x2+-0x2f*-0x8+-0x1*-0xeef),Math['max'](Math['floor'](_0x36a782['_height']*_0x318432),-0x1a7c+-0xb*-0x2+0x8cd*0x3),this['_glInterna'+'lFormat'],_0xf93471):_0x42df86['compressed'+'TexImage2D'](_0x42df86['TEXTURE_2D'],_0x5377b2,this['_glInterna'+'lFormat'],Math['max'](Math['floor'](_0x36a782['_width']*_0x318432),0x267+-0xe*-0x1cf+-0x377*0x8),Math['max'](Math['floor'](_0x36a782['_height']*_0x318432),-0x5*-0xf9+-0x179c+-0x12c0*-0x1),-0x119a*0x1+0x2251+-0x10b7,_0xf93471):(_0x4d4b31['setUnpackF'+'lipY'](!(0x24ad+-0x1fae+-0x1*0x4fe)),_0x4d4b31['setUnpackP'+'remultiply'+'Alpha'](_0x36a782['_premultip'+'lyAlpha']),this['_glCreated']&&_0xf93471?_0x42df86['texSubImag'+'e2D'](_0x42df86['TEXTURE_2D'],_0x5377b2,-0x717+0x178a+-0x1073,-0x2513+-0x1e5d+0x530*0xd,Math['max'](_0x36a782['_width']*_0x318432,0x1b6c+-0x15e0+-0x58b),Math['max'](_0x36a782['_height']*_0x318432,0x220d+-0x11e7+-0x1*0x1025),this['_glFormat'],this['_glPixelTy'+'pe'],_0xf93471):_0x42df86['texImage2D'](_0x42df86['TEXTURE_2D'],_0x5377b2,this['_glInterna'+'lFormat'],Math['max'](_0x36a782['_width']*_0x318432,0x1edf+-0x1d6b*0x1+-0x7*0x35),Math['max'](_0x36a782['_height']*_0x318432,-0x17ec*-0x1+0x1*-0x17cc+-0x1*0x1f),0xd7e+0x1769*-0x1+-0x9eb*-0x1,this['_glFormat'],this['_glPixelTy'+'pe'],_0xf93471));_0x5377b2===-0x134d+0x1e0b+-0xabe*0x1?_0x36a782['_mipmapsUp'+'loaded']=!(-0x50c+0x238d+-0x1e80):_0x36a782['_mipmapsUp'+'loaded']=!(0x1ab7+-0x58e+-0x1529*0x1);}}}_0x5377b2++;}if(_0x36a782['_needsUplo'+'ad']){if(_0x36a782['_cubemap']){for(let _0xae8708=-0x14*0x1d2+0x107d+0x13eb;_0xae8708<0xd2a+0x15fc+-0x4*0x8c8;_0xae8708++)_0x36a782['_levelsUpd'+'ated'][0x1a78+0x1d6a+-0x1bf1*0x2][_0xae8708]=!(-0x71*-0x3d+0x1*0x204b+-0x3b37);}else _0x36a782['_levelsUpd'+'ated'][0x26ce+-0x1f42+-0x78c]=!(0x2101+-0x164e*0x1+-0x559*0x2);}!_0x36a782['_compresse'+'d']&&!_0x36a782['_integerFo'+'rmat']&&_0x36a782['_mipmaps']&&_0x36a782['_needsMipm'+'apsUpload']&&_0x36a782['_levels']['length']===0x2666+0x1a66+-0x9*0x733&&(_0x42df86['generateMi'+'pmap'](this['_glTarget']),_0x36a782['_mipmapsUp'+'loaded']=!(-0x1653*0x1+0x2243+-0xbf0*0x1)),_0x36a782['_gpuSize']&&_0x36a782['adjustVram'+'SizeTracki'+'ng'](_0x4d4b31['_vram'],-_0x36a782['_gpuSize']),_0x36a782['_gpuSize']=_0x36a782['gpuSize'],_0x36a782['adjustVram'+'SizeTracki'+'ng'](_0x4d4b31['_vram'],_0x36a782['_gpuSize']),this['_glCreated']=!(-0x2493+-0x25ca+0x4a5d);}['read'](_0x51fb6d,_0x175b03,_0x1363fc,_0x1b546a,_0x8ac442){const _0x39e119=this['texture'];return _0x39e119['device']['readTextur'+'eAsync'](_0x39e119,_0x51fb6d,_0x175b03,_0x1363fc,_0x1b546a,_0x8ac442);}['write'](_0xe0b886,_0x1d96a6,_0xc1c19b,_0x11c00e,_0x30a873){const {texture:_0x3e2387}=this,{device:_0x10cab9}=_0x3e2387;return _0x10cab9['setTexture'](_0x3e2387,-0x10*-0x93+0x12*-0x4+-0x8e8),_0x10cab9['writeTextu'+'reAsync'](_0x3e2387,_0xe0b886,_0x1d96a6,_0xc1c19b,_0x11c00e,_0x30a873);}}class tw{constructor(_0x4c0192,_0x59b033){h(this,'msaaFB'),h(this,'resolveFB'),(this['msaaFB']=_0x4c0192,this['resolveFB']=_0x59b033);}['destroy'](_0x1f721a){this['msaaFB']&&(_0x1f721a['deleteRend'+'erbuffer'](this['msaaFB']),this['msaaFB']=null),this['resolveFB']&&(_0x1f721a['deleteRend'+'erbuffer'](this['resolveFB']),this['resolveFB']=null);}}class sw{constructor(){h(this,'_glFrameBu'+'ffer',null),h(this,'_glDepthBu'+'ffer',null),h(this,'_glResolve'+'FrameBuffe'+'r',null),h(this,'colorMrtFr'+'amebuffers',null),h(this,'_glMsaaCol'+'orBuffers',[]),h(this,'_glMsaaDep'+'thBuffer',null),h(this,'msaaDepthB'+'ufferKey'),h(this,'suppliedCo'+'lorFramebu'+'ffer'),h(this,'_isInitial'+'ized',!(0x14da+-0xce*-0x1+-0x1*0x15a7));}['destroy'](_0x376967){var _0x30728f;const _0x4d250b=_0x376967['gl'];this['_isInitial'+'ized']=!(-0x1cb+-0x23d*0xc+0x1ca8),this['_glFrameBu'+'ffer']&&(this['_glFrameBu'+'ffer']!==this['suppliedCo'+'lorFramebu'+'ffer']&&_0x4d250b['deleteFram'+'ebuffer'](this['_glFrameBu'+'ffer']),this['_glFrameBu'+'ffer']=null),this['_glDepthBu'+'ffer']&&(_0x4d250b['deleteRend'+'erbuffer'](this['_glDepthBu'+'ffer']),this['_glDepthBu'+'ffer']=null),this['_glResolve'+'FrameBuffe'+'r']&&(this['_glResolve'+'FrameBuffe'+'r']!==this['suppliedCo'+'lorFramebu'+'ffer']&&_0x4d250b['deleteFram'+'ebuffer'](this['_glResolve'+'FrameBuffe'+'r']),this['_glResolve'+'FrameBuffe'+'r']=null),this['_glMsaaCol'+'orBuffers']['forEach'](_0x29ad85=>{_0x4d250b['deleteRend'+'erbuffer'](_0x29ad85);}),this['_glMsaaCol'+'orBuffers']['length']=-0x37*0x7d+-0x2258+0x3d33,(_0x30728f=this['colorMrtFr'+'amebuffers'])==null||_0x30728f['forEach'](_0x69ebfe=>{_0x69ebfe['destroy'](_0x4d250b);}),this['colorMrtFr'+'amebuffers']=null,this['_glMsaaDep'+'thBuffer']&&(this['_glMsaaDep'+'thBuffer']=null,this['msaaDepthB'+'ufferKey']&&Fd(_0x376967)['release'](this['msaaDepthB'+'ufferKey'])),this['suppliedCo'+'lorFramebu'+'ffer']=void(-0x1a28+0x18a6+-0xc1*-0x2);}get['initialize'+'d'](){return this['_isInitial'+'ized'];}['init'](_0x55158c,_0x42171c){var _0x94a5cc,_0x2e389c;const _0x33e376=_0x55158c['gl'];w['assert'](!this['_isInitial'+'ized'],'Render\x20tar'+'get\x20alread'+'y\x20initiali'+'zed.'),this['_isInitial'+'ized']=!(0x1*0x6f+-0xe*-0xb8+-0xa7f*0x1);const _0x594c51=[];if(this['suppliedCo'+'lorFramebu'+'ffer']!==void(-0x2482+-0x3*-0xb38+0xa*0x49))this['_glFrameBu'+'ffer']=this['suppliedCo'+'lorFramebu'+'ffer'];else{w['call'](()=>{(_0x42171c['width']<=0x1*-0x2175+0x8b9+0x18bc||_0x42171c['height']<=0x24cb*-0x1+-0x203c+0x4507)&&w['warnOnce']('Invalid\x20re'+'nder\x20targe'+'t\x20size:\x20'+_0x42171c['width']+'\x20x\x20'+_0x42171c['height'],_0x42171c);}),this['_glFrameBu'+'ffer']=_0x33e376['createFram'+'ebuffer'](),_0x55158c['setFramebu'+'ffer'](this['_glFrameBu'+'ffer']);const _0x53f2c5=((_0x94a5cc=_0x42171c['_colorBuff'+'ers'])==null?void(0x411*0x9+0x1*-0x212+-0x2287):_0x94a5cc['length'])??-0x3*0x407+0x185d+0xc*-0x106,_0x366bbc=_0x33e376['COLOR_ATTA'+'CHMENT0'];for(let _0x163f40=0xd*-0x227+0x4*0x382+0xdf3*0x1;_0x163f40<_0x53f2c5;++_0x163f40){const _0x2f80bb=_0x42171c['getColorBu'+'ffer'](_0x163f40);_0x2f80bb&&(_0x2f80bb['impl']['_glTexture']||(_0x2f80bb['_width']=Math['min'](_0x2f80bb['width'],_0x55158c['maxRenderB'+'ufferSize']),_0x2f80bb['_height']=Math['min'](_0x2f80bb['height'],_0x55158c['maxRenderB'+'ufferSize']),_0x55158c['setTexture'](_0x2f80bb,0x1*0x1a17+0x17*-0xc2+-0x8a9)),_0x33e376['framebuffe'+'rTexture2D'](_0x33e376['FRAMEBUFFE'+'R'],_0x366bbc+_0x163f40,_0x2f80bb['_cubemap']?_0x33e376['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x42171c['_face']:_0x33e376['TEXTURE_2D'],_0x2f80bb['impl']['_glTexture'],_0x42171c['mipLevel']),_0x594c51['push'](_0x366bbc+_0x163f40));}_0x33e376['drawBuffer'+'s'](_0x594c51);const _0x32f592=_0x42171c['_depthBuff'+'er'];if(_0x32f592||_0x42171c['_depth']){const _0x49262c=_0x42171c['_stencil']?_0x33e376['DEPTH_STEN'+'CIL_ATTACH'+'MENT']:_0x33e376['DEPTH_ATTA'+'CHMENT'];if(_0x32f592)_0x32f592['impl']['_glTexture']||(_0x32f592['_width']=Math['min'](_0x32f592['width'],_0x55158c['maxRenderB'+'ufferSize']),_0x32f592['_height']=Math['min'](_0x32f592['height'],_0x55158c['maxRenderB'+'ufferSize']),_0x55158c['setTexture'](_0x32f592,-0x64f+0x1*0x22ed+-0x1c9e)),_0x33e376['framebuffe'+'rTexture2D'](_0x33e376['FRAMEBUFFE'+'R'],_0x49262c,_0x32f592['_cubemap']?_0x33e376['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x42171c['_face']:_0x33e376['TEXTURE_2D'],_0x42171c['_depthBuff'+'er']['impl']['_glTexture'],_0x42171c['mipLevel']);else{if(!(_0x42171c['_samples']>0x11c2+0x11a1+-0xe*0x287)){this['_glDepthBu'+'ffer']||(this['_glDepthBu'+'ffer']=_0x33e376['createRend'+'erbuffer']());const _0x2fce12=_0x42171c['_stencil']?_0x33e376['DEPTH24_ST'+'ENCIL8']:_0x33e376['DEPTH_COMP'+'ONENT32F'];_0x33e376['bindRender'+'buffer'](_0x33e376['RENDERBUFF'+'ER'],this['_glDepthBu'+'ffer']),_0x33e376['renderbuff'+'erStorage'](_0x33e376['RENDERBUFF'+'ER'],_0x2fce12,_0x42171c['width'],_0x42171c['height']),_0x33e376['framebuffe'+'rRenderbuf'+'fer'](_0x33e376['FRAMEBUFFE'+'R'],_0x49262c,_0x33e376['RENDERBUFF'+'ER'],this['_glDepthBu'+'ffer']),_0x33e376['bindRender'+'buffer'](_0x33e376['RENDERBUFF'+'ER'],null);}}}w['call'](()=>this['_checkFbo'](_0x55158c,_0x42171c));}if(_0x42171c['_samples']>-0x3*-0x9d9+-0x1*-0x17ef+-0x3579){this['_glResolve'+'FrameBuffe'+'r']=this['_glFrameBu'+'ffer'],this['_glFrameBu'+'ffer']=_0x33e376['createFram'+'ebuffer'](),_0x55158c['setFramebu'+'ffer'](this['_glFrameBu'+'ffer']);const _0x2415a4=((_0x2e389c=_0x42171c['_colorBuff'+'ers'])==null?void(-0x1924+-0x265+0x1b89):_0x2e389c['length'])??-0x5*-0x652+-0x2241+0x2a7;if(this['suppliedCo'+'lorFramebu'+'ffer']!==void(-0x229b+-0x1caf+0x3f4a)){const _0xae4bb7=_0x33e376['createRend'+'erbuffer']();this['_glMsaaCol'+'orBuffers']['push'](_0xae4bb7);const _0xd9ef0e=_0x55158c['backBuffer'+'Format']===Ne?_0x33e376['RGBA8']:_0x33e376['RGB8'];_0x33e376['bindRender'+'buffer'](_0x33e376['RENDERBUFF'+'ER'],_0xae4bb7),_0x33e376['renderbuff'+'erStorageM'+'ultisample'](_0x33e376['RENDERBUFF'+'ER'],_0x42171c['_samples'],_0xd9ef0e,_0x42171c['width'],_0x42171c['height']),_0x33e376['framebuffe'+'rRenderbuf'+'fer'](_0x33e376['FRAMEBUFFE'+'R'],_0x33e376['COLOR_ATTA'+'CHMENT0'],_0x33e376['RENDERBUFF'+'ER'],_0xae4bb7);}else for(let _0x56282f=-0x64*0xa+-0x1e46+0x222e;_0x56282f<_0x2415a4;++_0x56282f){const _0x41c631=_0x42171c['getColorBu'+'ffer'](_0x56282f);if(_0x41c631){const _0x4ab62b=_0x33e376['createRend'+'erbuffer']();this['_glMsaaCol'+'orBuffers']['push'](_0x4ab62b),_0x33e376['bindRender'+'buffer'](_0x33e376['RENDERBUFF'+'ER'],_0x4ab62b),_0x33e376['renderbuff'+'erStorageM'+'ultisample'](_0x33e376['RENDERBUFF'+'ER'],_0x42171c['_samples'],_0x41c631['impl']['_glInterna'+'lFormat'],_0x42171c['width'],_0x42171c['height']),_0x33e376['framebuffe'+'rRenderbuf'+'fer'](_0x33e376['FRAMEBUFFE'+'R'],_0x33e376['COLOR_ATTA'+'CHMENT0']+_0x56282f,_0x33e376['RENDERBUFF'+'ER'],_0x4ab62b);}}if(_0x42171c['_depth']){w['assert'](!this['_glMsaaDep'+'thBuffer']);const _0x1ac717=_0x42171c['_stencil']?_0x33e376['DEPTH24_ST'+'ENCIL8']:_0x33e376['DEPTH_COMP'+'ONENT32F'],_0x1677e7=_0x42171c['_stencil']?_0x33e376['DEPTH_STEN'+'CIL_ATTACH'+'MENT']:_0x33e376['DEPTH_ATTA'+'CHMENT'];let _0xdf2ac6;const _0x3f421f=_0x42171c['_depthBuff'+'er'];_0x3f421f&&(_0xdf2ac6=_0x3f421f['id']+':'+_0x42171c['width']+':'+_0x42171c['height']+':'+_0x42171c['_samples']+':'+_0x1ac717+':'+_0x1677e7,this['_glMsaaDep'+'thBuffer']=Fd(_0x55158c)['get'](_0xdf2ac6)),this['_glMsaaDep'+'thBuffer']||(this['_glMsaaDep'+'thBuffer']=_0x33e376['createRend'+'erbuffer'](),_0x33e376['bindRender'+'buffer'](_0x33e376['RENDERBUFF'+'ER'],this['_glMsaaDep'+'thBuffer']),_0x33e376['renderbuff'+'erStorageM'+'ultisample'](_0x33e376['RENDERBUFF'+'ER'],_0x42171c['_samples'],_0x1ac717,_0x42171c['width'],_0x42171c['height']),this['_glMsaaDep'+'thBuffer']['destroy']=function(){_0x33e376['deleteRend'+'erbuffer'](this);},_0x3f421f&&Fd(_0x55158c)['set'](_0xdf2ac6,this['_glMsaaDep'+'thBuffer'])),this['msaaDepthB'+'ufferKey']=_0xdf2ac6,_0x33e376['framebuffe'+'rRenderbuf'+'fer'](_0x33e376['FRAMEBUFFE'+'R'],_0x1677e7,_0x33e376['RENDERBUFF'+'ER'],this['_glMsaaDep'+'thBuffer']);}w['call'](()=>this['_checkFbo'](_0x55158c,_0x42171c,'MSAA')),_0x2415a4>-0x61*0x3a+-0xe7c+0x2477&&(this['_createMsa'+'aMrtFrameb'+'uffers'](_0x55158c,_0x42171c,_0x2415a4),_0x55158c['setFramebu'+'ffer'](this['_glFrameBu'+'ffer']),_0x33e376['drawBuffer'+'s'](_0x594c51));}}['_createMsa'+'aMrtFrameb'+'uffers'](_0x2a8d29,_0x53f060,_0xf3b7aa){const _0x2537b2=_0x2a8d29['gl'];this['colorMrtFr'+'amebuffers']=[];for(let _0x4c75a7=0x2623+0x1df*-0x8+0x3*-0x7b9;_0x4c75a7<_0xf3b7aa;++_0x4c75a7){const _0x334cd1=_0x53f060['getColorBu'+'ffer'](_0x4c75a7),_0x33f531=_0x2537b2['createFram'+'ebuffer']();_0x2a8d29['setFramebu'+'ffer'](_0x33f531);const _0x47f160=this['_glMsaaCol'+'orBuffers'][_0x4c75a7];_0x2537b2['bindRender'+'buffer'](_0x2537b2['RENDERBUFF'+'ER'],_0x47f160),_0x2537b2['renderbuff'+'erStorageM'+'ultisample'](_0x2537b2['RENDERBUFF'+'ER'],_0x53f060['_samples'],_0x334cd1['impl']['_glInterna'+'lFormat'],_0x53f060['width'],_0x53f060['height']),_0x2537b2['framebuffe'+'rRenderbuf'+'fer'](_0x2537b2['FRAMEBUFFE'+'R'],_0x2537b2['COLOR_ATTA'+'CHMENT0'],_0x2537b2['RENDERBUFF'+'ER'],_0x47f160),_0x2537b2['drawBuffer'+'s']([_0x2537b2['COLOR_ATTA'+'CHMENT0']]),w['call'](()=>this['_checkFbo'](_0x2a8d29,_0x53f060,'MSAA-MRT-s'+'rc'+_0x4c75a7));const _0x50b4b8=_0x2537b2['createFram'+'ebuffer']();_0x2a8d29['setFramebu'+'ffer'](_0x50b4b8),_0x2537b2['framebuffe'+'rTexture2D'](_0x2537b2['FRAMEBUFFE'+'R'],_0x2537b2['COLOR_ATTA'+'CHMENT0'],_0x334cd1['_cubemap']?_0x2537b2['TEXTURE_CU'+'BE_MAP_POS'+'ITIVE_X']+_0x53f060['_face']:_0x2537b2['TEXTURE_2D'],_0x334cd1['impl']['_glTexture'],0xd6b+0xe57+-0x1bc2),this['colorMrtFr'+'amebuffers'][_0x4c75a7]=new tw(_0x33f531,_0x50b4b8),w['call'](()=>this['_checkFbo'](_0x2a8d29,_0x53f060,'MSAA-MRT-d'+'st'+_0x4c75a7));}}['_checkFbo'](_0x8a651c,_0x32b227,_0xd62305=''){const _0xc49054=_0x8a651c['gl'],_0x65a8dc=_0xc49054['checkFrame'+'bufferStat'+'us'](_0xc49054['FRAMEBUFFE'+'R']);let _0x36a173;switch(_0x65a8dc){case _0xc49054['FRAMEBUFFE'+'R_INCOMPLE'+'TE_ATTACHM'+'ENT']:_0x36a173='FRAMEBUFFE'+'R_INCOMPLE'+'TE_ATTACHM'+'ENT';break;case _0xc49054['FRAMEBUFFE'+'R_INCOMPLE'+'TE_MISSING'+'_ATTACHMEN'+'T']:_0x36a173='FRAMEBUFFE'+'R_INCOMPLE'+'TE_MISSING'+'_ATTACHMEN'+'T';break;case _0xc49054['FRAMEBUFFE'+'R_INCOMPLE'+'TE_DIMENSI'+'ONS']:_0x36a173='FRAMEBUFFE'+'R_INCOMPLE'+'TE_DIMENSI'+'ONS';break;case _0xc49054['FRAMEBUFFE'+'R_UNSUPPOR'+'TED']:_0x36a173='FRAMEBUFFE'+'R_UNSUPPOR'+'TED';break;}w['assert'](!_0x36a173,'Framebuffe'+'r\x20creation'+'\x20failed\x20wi'+'th\x20error\x20c'+'ode\x20'+_0x36a173+(',\x20render\x20t'+'arget:\x20')+_0x32b227['name']+'\x20'+_0xd62305,_0x32b227);}['loseContex'+'t'](){this['_glFrameBu'+'ffer']=null,this['_glDepthBu'+'ffer']=null,this['_glResolve'+'FrameBuffe'+'r']=null,this['_glMsaaCol'+'orBuffers']['length']=0x1*0x1f2f+0x265c+-0x458b,this['_glMsaaDep'+'thBuffer']=null,this['msaaDepthB'+'ufferKey']=void(0x12d5*-0x2+-0x1be*0x5+0x2e60),this['colorMrtFr'+'amebuffers']=null,this['suppliedCo'+'lorFramebu'+'ffer']=void(0x92*0x21+-0x15fe+0x32c),this['_isInitial'+'ized']=!(-0x1c69+0x45e+0x180c);}['internalRe'+'solve'](_0x57b7fc,_0x5d2d85,_0x4cdeb7,_0x1c72ff,_0x131cac){w['assert'](_0x5d2d85!==_0x4cdeb7,'Source\x20and'+'\x20destinati'+'on\x20framebu'+'ffers\x20must'+'\x20be\x20differ'+'ent\x20when\x20b'+'litting.'),_0x57b7fc['setScissor'](-0x1052*-0x2+-0x188*-0x19+-0x66*0xb2,-0x3af*-0x9+0x13bb*-0x1+0x1*-0xd6c,_0x1c72ff['width'],_0x1c72ff['height']);const _0x54a803=_0x57b7fc['gl'];_0x54a803['bindFrameb'+'uffer'](_0x54a803['READ_FRAME'+'BUFFER'],_0x5d2d85),_0x54a803['bindFrameb'+'uffer'](_0x54a803['DRAW_FRAME'+'BUFFER'],_0x4cdeb7),_0x54a803['blitFrameb'+'uffer'](0x1*0x1441+-0x3*0xadf+-0x71*-0x1c,-0x120*-0xe+0x10*0x17f+-0x27b0,_0x1c72ff['width'],_0x1c72ff['height'],-0x1d9f+0x17a+0x1c25,0x1665+-0x99b+-0xcca,_0x1c72ff['width'],_0x1c72ff['height'],_0x131cac,_0x54a803['NEAREST']);}['resolve'](_0x2688d1,_0x9a5adf,_0x332ff4,_0x26b8ec){const _0x465f12=_0x2688d1['gl'];if(this['colorMrtFr'+'amebuffers']){if(_0x332ff4)for(let _0x501fdd=0xfc4+0x123*-0xb+-0x343;_0x501fdd<this['colorMrtFr'+'amebuffers']['length'];_0x501fdd++){const _0x3d9799=this['colorMrtFr'+'amebuffers'][_0x501fdd];Q['pushGpuMar'+'ker'](_0x2688d1,'RESOLVE-MR'+'T'+_0x501fdd),this['internalRe'+'solve'](_0x2688d1,_0x3d9799['msaaFB'],_0x3d9799['resolveFB'],_0x9a5adf,_0x465f12['COLOR_BUFF'+'ER_BIT']),Q['popGpuMark'+'er'](_0x2688d1);}_0x26b8ec&&(Q['pushGpuMar'+'ker'](_0x2688d1,'RESOLVE-MR'+'T-DEPTH'),this['internalRe'+'solve'](_0x2688d1,this['_glFrameBu'+'ffer'],this['_glResolve'+'FrameBuffe'+'r'],_0x9a5adf,_0x465f12['DEPTH_BUFF'+'ER_BIT']),Q['popGpuMark'+'er'](_0x2688d1));}else Q['pushGpuMar'+'ker'](_0x2688d1,'RESOLVE'),this['internalRe'+'solve'](_0x2688d1,this['_glFrameBu'+'ffer'],this['_glResolve'+'FrameBuffe'+'r'],_0x9a5adf,(_0x332ff4?_0x465f12['COLOR_BUFF'+'ER_BIT']:0xf1f*0x2+0x6*0x1c6+0x1471*-0x2)|(_0x26b8ec?_0x465f12['DEPTH_BUFF'+'ER_BIT']:-0xa31+-0x2320+0x2d51)),Q['popGpuMark'+'er'](_0x2688d1);_0x465f12['bindFrameb'+'uffer'](_0x465f12['FRAMEBUFFE'+'R'],this['_glFrameBu'+'ffer']);}}class iw{constructor(){h(this,'renderVers'+'ion'),h(this,'queries',[]);}['destroy'](_0x2d54a1){this['queries']['forEach'](_0x1d35b9=>_0x2d54a1['deleteQuer'+'y'](_0x1d35b9)),this['queries']=null;}}class rw extends $T{constructor(_0x234202){super(),h(this,'device'),h(this,'freeQuerie'+'s',[]),h(this,'frameQueri'+'es',[]),h(this,'previousFr'+'ameQueries',[]),h(this,'timings',[]),(this['device']=_0x234202,this['ext']=_0x234202['extDisjoin'+'tTimerQuer'+'y']);}['destroy'](){this['freeQuerie'+'s']['forEach'](_0x2309ea=>this['device']['gl']['deleteQuer'+'y'](_0x2309ea)),this['frameQueri'+'es']['forEach'](_0x54cc8d=>this['device']['gl']['deleteQuer'+'y'](_0x54cc8d)),this['previousFr'+'ameQueries']['forEach'](_0x372ece=>_0x372ece['destroy'](this['device']['gl'])),this['freeQuerie'+'s']=null,this['frameQueri'+'es']=null,this['previousFr'+'ameQueries']=null;}['loseContex'+'t'](){super['loseContex'+'t'](),this['freeQuerie'+'s']=[],this['frameQueri'+'es']=[],this['previousFr'+'ameQueries']=[];}['restoreCon'+'text'](){this['ext']=this['device']['extDisjoin'+'tTimerQuer'+'y'];}['getQuery'](){return this['freeQuerie'+'s']['pop']()??this['device']['gl']['createQuer'+'y']();}['start'](_0x238d6f){if(this['ext']){const _0x2404cc=this['getSlot'](_0x238d6f),_0x52df97=this['getQuery']();return this['frameQueri'+'es'][_0x2404cc]=_0x52df97,this['device']['gl']['beginQuery'](this['ext']['TIME_ELAPS'+'ED_EXT'],_0x52df97),_0x2404cc;}}['end'](_0x2df526){_0x2df526!==void(-0x26f6+0x20cd+0x629)&&this['device']['gl']['endQuery'](this['ext']['TIME_ELAPS'+'ED_EXT']);}['frameStart'](){this['processEna'+'bleRequest'](),this['_enabled']&&(this['frameGPUMa'+'rkerSlot']=this['start']('GpuFrame'));}['frameEnd'](){this['_enabled']&&this['end'](this['frameGPUMa'+'rkerSlot']);}['request'](){if(this['_enabled']){const _0x570eac=this['ext'],_0x2c465c=this['device']['gl'],_0x231f4c=this['device']['renderVers'+'ion'],_0x5b079b=this['frameQueri'+'es'];if(_0x5b079b['length']>-0x8a3+-0x130d*-0x1+-0xa6a){this['frameQueri'+'es']=[];const _0x5ac6ad=new iw();_0x5ac6ad['queries']=_0x5b079b,_0x5ac6ad['renderVers'+'ion']=_0x231f4c,this['previousFr'+'ameQueries']['push'](_0x5ac6ad);}if(this['previousFr'+'ameQueries']['length']>-0x1*-0x5eb+-0x167*-0x11+-0x1dc2){const _0x53a70f=this['previousFr'+'ameQueries'][-0x1*-0x1fe1+-0x1*0x1863+0x3bf*-0x2],_0x197553=_0x53a70f['queries'],_0x2c226e=_0x197553[_0x197553['length']-(0x11b1*0x1+0x18dd*-0x1+0x72d)],_0x5d9b3c=_0x2c465c['getQueryPa'+'rameter'](_0x2c226e,_0x2c465c['QUERY_RESU'+'LT_AVAILAB'+'LE']),_0x2d9342=_0x2c465c['getParamet'+'er'](_0x570eac['GPU_DISJOI'+'NT_EXT']);if(_0x5d9b3c&&!_0x2d9342){this['previousFr'+'ameQueries']['shift']();const _0x31e7b9=this['timings'];_0x31e7b9['length']=0x894+-0xd*-0xa9+0x17*-0xbf;for(let _0x27c1e8=-0xced+0x7*-0x3fd+0x28d8;_0x27c1e8<_0x197553['length'];_0x27c1e8++){const _0x5274fe=_0x197553[_0x27c1e8],_0x2f11cf=_0x2c465c['getQueryPa'+'rameter'](_0x5274fe,_0x2c465c['QUERY_RESU'+'LT']);_0x31e7b9[_0x27c1e8]=_0x2f11cf*(-0x1a3c+-0x375+0x1db1+0.000001),this['freeQuerie'+'s']['push'](_0x5274fe);}this['report'](_0x53a70f['renderVers'+'ion'],_0x31e7b9);}_0x2d9342&&(this['previousFr'+'ameQueries']['forEach'](_0x1fc7f8=>{this['report'](_0x1fc7f8['renderVers'+'ion'],null),_0x1fc7f8['destroy'](_0x2c465c);}),this['previousFr'+'ameQueries']['length']=-0x310+-0x11ae+0x14be);}super['request'](_0x231f4c);}}}const Da=[];class aw extends $e{constructor(_0x396c4a,_0x5d6669={}){super(_0x396c4a,_0x5d6669),h(this,'gl'),h(this,'_defaultFr'+'amebuffer',null),h(this,'_defaultFr'+'amebufferC'+'hanged',!(-0x939*0x1+-0x588+-0x2*-0x761)),(_0x5d6669=this['initOption'+'s'],this['updateClie'+'ntRect'](),this['initTextur'+'eUnits'](),this['contextLos'+'t']=!(-0x2*-0x1374+-0x70*0xc+-0x5*0x6bb),this['_contextLo'+'stHandler']=_0x4b6ab6=>{_0x4b6ab6['preventDef'+'ault'](),this['loseContex'+'t'](),w['log']('pc.Graphic'+'sDevice:\x20W'+'ebGL\x20conte'+'xt\x20lost.'),this['fire']('devicelost');},this['_contextRe'+'storedHand'+'ler']=()=>{w['log']('pc.Graphic'+'sDevice:\x20W'+'ebGL\x20conte'+'xt\x20restore'+'d.'),this['restoreCon'+'text'](),this['fire']('devicerest'+'ored');});const _0x326eee=typeof navigator<'u'&&navigator['userAgent'];if(this['forceDisab'+'leMultisam'+'pling']=_0x326eee&&_0x326eee['includes']('AppleWebKi'+'t')&&(_0x326eee['includes']('15.4')||_0x326eee['includes']('15_4')),this['forceDisab'+'leMultisam'+'pling']&&(_0x5d6669['antialias']=!(-0x1*-0xdef+-0x155*-0x1+-0xf43),w['log']('Antialiasi'+'ng\x20has\x20bee'+'n\x20turned\x20o'+'ff\x20due\x20to\x20'+'rendering\x20'+'issues\x20on\x20'+'AppleWebKi'+'t\x2015.4')),Ae['browserNam'+'e']==='firefox'){const _0x2e34a7=(typeof navigator<'u'?navigator['userAgent']:'')['match'](/Firefox\/(\d+(\.\d+)*)/),_0x24bd60=_0x2e34a7?_0x2e34a7[0x1*0x18cb+-0x5d*0x4e+0x38c]:null;if(_0x24bd60){const _0x461071=parseFloat(_0x24bd60);(Ae['name']==='windows'&&(_0x461071>=0xa0f*-0x1+0x1f*0xf0+-0x1289||_0x461071===0x7*-0x3f9+-0x1*0x16bb+0x32fd)||Ae['name']==='android'&&_0x461071>=0x2*0x6d9+-0x16ea+0x9bc)&&(_0x5d6669['antialias']=!(-0x37d*-0x2+0x102d+-0x1726),w['log']('Antialiasi'+'ng\x20has\x20bee'+'n\x20turned\x20o'+'ff\x20due\x20to\x20'+'rendering\x20'+'issues\x20on\x20'+'Firefox\x20'+Ae['name']+('\x20platform\x20'+'version\x20')+_0x24bd60));}}this['backBuffer'+'Antialias']=_0x5d6669['antialias']??!(-0x2670+-0x13b6+0x1*0x3a27),_0x5d6669['antialias']=!(-0x142c+-0xf30+0x235d);const _0x88154d=_0x5d6669['gl']??_0x396c4a['getContext']('webgl2',_0x5d6669);if(!_0x88154d)throw new Error('WebGL\x20not\x20'+'supported');this['gl']=_0x88154d,this['isWebGL2']=!(-0x2274+-0x125*-0x1+0x214f*0x1),this['_deviceTyp'+'e']=aT,this['updateBack'+'bufferForm'+'at'](null);const _0x5f133d=Ae['browserNam'+'e']==='chrome',_0x4f6fb2=Ae['browserNam'+'e']==='safari',_0x1af665=Ae['browser']&&navigator['appVersion']['indexOf']('Mac')!==-(-0x34*0xa6+-0xe5*-0x11+0x1284);this['_tempEnabl'+'eSafariTex'+'tureUnitWo'+'rkaround']=_0x4f6fb2,this['_tempMacCh'+'romeBlitFr'+'amebufferW'+'orkaround']=_0x1af665&&_0x5f133d&&!_0x5d6669['alpha'],_0x396c4a['addEventLi'+'stener']('webglconte'+'xtlost',this['_contextLo'+'stHandler'],!(0x1*-0xacc+0x1*0x1dc9+0xa2*-0x1e)),_0x396c4a['addEventLi'+'stener']('webglconte'+'xtrestored',this['_contextRe'+'storedHand'+'ler'],!(0x20e*-0x4+-0x1069+0x18a2)),this['initialize'+'Extensions'](),this['initialize'+'Capabiliti'+'es'](),this['initialize'+'RenderStat'+'e'](),this['initialize'+'ContextCac'+'hes'](),this['createBack'+'buffer'](null),this['supportsIm'+'ageBitmap']=!_0x4f6fb2&&typeof ImageBitmap<'u',this['_samplerTy'+'pes']=new Set([_0x88154d['SAMPLER_2D'],_0x88154d['SAMPLER_CU'+'BE'],_0x88154d['UNSIGNED_I'+'NT_SAMPLER'+'_2D'],_0x88154d['INT_SAMPLE'+'R_2D'],_0x88154d['SAMPLER_2D'+'_SHADOW'],_0x88154d['SAMPLER_CU'+'BE_SHADOW'],_0x88154d['SAMPLER_3D'],_0x88154d['INT_SAMPLE'+'R_3D'],_0x88154d['UNSIGNED_I'+'NT_SAMPLER'+'_3D'],_0x88154d['SAMPLER_2D'+'_ARRAY'],_0x88154d['INT_SAMPLE'+'R_2D_ARRAY'],_0x88154d['UNSIGNED_I'+'NT_SAMPLER'+'_2D_ARRAY']]),this['glAddress']=[_0x88154d['REPEAT'],_0x88154d['CLAMP_TO_E'+'DGE'],_0x88154d['MIRRORED_R'+'EPEAT']],this['glBlendEqu'+'ation']=[_0x88154d['FUNC_ADD'],_0x88154d['FUNC_SUBTR'+'ACT'],_0x88154d['FUNC_REVER'+'SE_SUBTRAC'+'T'],_0x88154d['MIN'],_0x88154d['MAX']],this['glBlendFun'+'ctionColor']=[_0x88154d['ZERO'],_0x88154d['ONE'],_0x88154d['SRC_COLOR'],_0x88154d['ONE_MINUS_'+'SRC_COLOR'],_0x88154d['DST_COLOR'],_0x88154d['ONE_MINUS_'+'DST_COLOR'],_0x88154d['SRC_ALPHA'],_0x88154d['SRC_ALPHA_'+'SATURATE'],_0x88154d['ONE_MINUS_'+'SRC_ALPHA'],_0x88154d['DST_ALPHA'],_0x88154d['ONE_MINUS_'+'DST_ALPHA'],_0x88154d['CONSTANT_C'+'OLOR'],_0x88154d['ONE_MINUS_'+'CONSTANT_C'+'OLOR']],this['glBlendFun'+'ctionAlpha']=[_0x88154d['ZERO'],_0x88154d['ONE'],_0x88154d['SRC_COLOR'],_0x88154d['ONE_MINUS_'+'SRC_COLOR'],_0x88154d['DST_COLOR'],_0x88154d['ONE_MINUS_'+'DST_COLOR'],_0x88154d['SRC_ALPHA'],_0x88154d['SRC_ALPHA_'+'SATURATE'],_0x88154d['ONE_MINUS_'+'SRC_ALPHA'],_0x88154d['DST_ALPHA'],_0x88154d['ONE_MINUS_'+'DST_ALPHA'],_0x88154d['CONSTANT_A'+'LPHA'],_0x88154d['ONE_MINUS_'+'CONSTANT_A'+'LPHA']],this['glComparis'+'on']=[_0x88154d['NEVER'],_0x88154d['LESS'],_0x88154d['EQUAL'],_0x88154d['LEQUAL'],_0x88154d['GREATER'],_0x88154d['NOTEQUAL'],_0x88154d['GEQUAL'],_0x88154d['ALWAYS']],this['glStencilO'+'p']=[_0x88154d['KEEP'],_0x88154d['ZERO'],_0x88154d['REPLACE'],_0x88154d['INCR'],_0x88154d['INCR_WRAP'],_0x88154d['DECR'],_0x88154d['DECR_WRAP'],_0x88154d['INVERT']],this['glClearFla'+'g']=[0x18e4+0x3c8*0x4+-0x2804,_0x88154d['COLOR_BUFF'+'ER_BIT'],_0x88154d['DEPTH_BUFF'+'ER_BIT'],_0x88154d['COLOR_BUFF'+'ER_BIT']|_0x88154d['DEPTH_BUFF'+'ER_BIT'],_0x88154d['STENCIL_BU'+'FFER_BIT'],_0x88154d['STENCIL_BU'+'FFER_BIT']|_0x88154d['COLOR_BUFF'+'ER_BIT'],_0x88154d['STENCIL_BU'+'FFER_BIT']|_0x88154d['DEPTH_BUFF'+'ER_BIT'],_0x88154d['STENCIL_BU'+'FFER_BIT']|_0x88154d['COLOR_BUFF'+'ER_BIT']|_0x88154d['DEPTH_BUFF'+'ER_BIT']],this['glCull']=[0x1533+-0x2*-0x132f+-0x27*0x187,_0x88154d['BACK'],_0x88154d['FRONT'],_0x88154d['FRONT_AND_'+'BACK']],this['glFilter']=[_0x88154d['NEAREST'],_0x88154d['LINEAR'],_0x88154d['NEAREST_MI'+'PMAP_NEARE'+'ST'],_0x88154d['NEAREST_MI'+'PMAP_LINEA'+'R'],_0x88154d['LINEAR_MIP'+'MAP_NEARES'+'T'],_0x88154d['LINEAR_MIP'+'MAP_LINEAR']],this['glPrimitiv'+'e']=[_0x88154d['POINTS'],_0x88154d['LINES'],_0x88154d['LINE_LOOP'],_0x88154d['LINE_STRIP'],_0x88154d['TRIANGLES'],_0x88154d['TRIANGLE_S'+'TRIP'],_0x88154d['TRIANGLE_F'+'AN']],this['glType']=[_0x88154d['BYTE'],_0x88154d['UNSIGNED_B'+'YTE'],_0x88154d['SHORT'],_0x88154d['UNSIGNED_S'+'HORT'],_0x88154d['INT'],_0x88154d['UNSIGNED_I'+'NT'],_0x88154d['FLOAT'],_0x88154d['HALF_FLOAT']],this['pcUniformT'+'ype']={},this['pcUniformT'+'ype'][_0x88154d['BOOL']]=Tn,this['pcUniformT'+'ype'][_0x88154d['INT']]=_a,this['pcUniformT'+'ype'][_0x88154d['FLOAT']]=Xs,this['pcUniformT'+'ype'][_0x88154d['FLOAT_VEC2']]=ga,this['pcUniformT'+'ype'][_0x88154d['FLOAT_VEC3']]=ds,this['pcUniformT'+'ype'][_0x88154d['FLOAT_VEC4']]=Rn,this['pcUniformT'+'ype'][_0x88154d['INT_VEC2']]=ca,this['pcUniformT'+'ype'][_0x88154d['INT_VEC3']]=ha,this['pcUniformT'+'ype'][_0x88154d['INT_VEC4']]=da,this['pcUniformT'+'ype'][_0x88154d['BOOL_VEC2']]=tl,this['pcUniformT'+'ype'][_0x88154d['BOOL_VEC3']]=sl,this['pcUniformT'+'ype'][_0x88154d['BOOL_VEC4']]=il,this['pcUniformT'+'ype'][_0x88154d['FLOAT_MAT2']]=_h,this['pcUniformT'+'ype'][_0x88154d['FLOAT_MAT3']]=On,this['pcUniformT'+'ype'][_0x88154d['FLOAT_MAT4']]=li,this['pcUniformT'+'ype'][_0x88154d['SAMPLER_2D']]=Hx,this['pcUniformT'+'ype'][_0x88154d['SAMPLER_CU'+'BE']]=Wx,this['pcUniformT'+'ype'][_0x88154d['UNSIGNED_I'+'NT']]=Fn,this['pcUniformT'+'ype'][_0x88154d['UNSIGNED_I'+'NT_VEC2']]=Nn,this['pcUniformT'+'ype'][_0x88154d['UNSIGNED_I'+'NT_VEC3']]=kn,this['pcUniformT'+'ype'][_0x88154d['UNSIGNED_I'+'NT_VEC4']]=Un,this['pcUniformT'+'ype'][_0x88154d['SAMPLER_2D'+'_SHADOW']]=$x,this['pcUniformT'+'ype'][_0x88154d['SAMPLER_CU'+'BE_SHADOW']]=Xx,this['pcUniformT'+'ype'][_0x88154d['SAMPLER_2D'+'_ARRAY']]=jx,this['pcUniformT'+'ype'][_0x88154d['SAMPLER_3D']]=qx,this['pcUniformT'+'ype'][_0x88154d['INT_SAMPLE'+'R_2D']]=Yx,this['pcUniformT'+'ype'][_0x88154d['UNSIGNED_I'+'NT_SAMPLER'+'_2D']]=Kx,this['pcUniformT'+'ype'][_0x88154d['INT_SAMPLE'+'R_CUBE']]=Zx,this['pcUniformT'+'ype'][_0x88154d['UNSIGNED_I'+'NT_SAMPLER'+'_2D']]=Qx,this['pcUniformT'+'ype'][_0x88154d['INT_SAMPLE'+'R_3D']]=Jx,this['pcUniformT'+'ype'][_0x88154d['UNSIGNED_I'+'NT_SAMPLER'+'_3D']]=eT,this['pcUniformT'+'ype'][_0x88154d['INT_SAMPLE'+'R_2D_ARRAY']]=tT,this['pcUniformT'+'ype'][_0x88154d['UNSIGNED_I'+'NT_SAMPLER'+'_2D_ARRAY']]=sT,this['targetToSl'+'ot']={},this['targetToSl'+'ot'][_0x88154d['TEXTURE_2D']]=-0xee0+-0x111f+0x1*0x1fff,this['targetToSl'+'ot'][_0x88154d['TEXTURE_CU'+'BE_MAP']]=-0xb66*-0x2+-0x7a8+0x7d*-0x1f,this['targetToSl'+'ot'][_0x88154d['TEXTURE_3D']]=0x3ca+0x21ad+0x2b*-0xdf;let _0x2c0c49,_0x4ababf,_0xfe497,_0xb12314,_0x29f11e;this['commitFunc'+'tion']=[],this['commitFunc'+'tion'][Tn]=function(_0x538544,_0x53b67f){_0x538544['value']!==_0x53b67f&&(_0x88154d['uniform1i'](_0x538544['locationId'],_0x53b67f),_0x538544['value']=_0x53b67f);},this['commitFunc'+'tion'][_a]=this['commitFunc'+'tion'][Tn],this['commitFunc'+'tion'][Xs]=function(_0x486efe,_0xe0d511){_0x486efe['value']!==_0xe0d511&&(_0x88154d['uniform1f'](_0x486efe['locationId'],_0xe0d511),_0x486efe['value']=_0xe0d511);},this['commitFunc'+'tion'][ga]=function(_0x3417f1,_0x23244a){_0x29f11e=_0x3417f1['value'],_0x2c0c49=_0x23244a[-0x16b5+-0x25a5*0x1+0xa*0x609],_0x4ababf=_0x23244a[0x1176+-0x1*-0x10b+-0x1280],(_0x29f11e[0x1b8e+0x2642+-0x288*0x1a]!==_0x2c0c49||_0x29f11e[-0x1d14+-0x9*0x346+0x3a8b]!==_0x4ababf)&&(_0x88154d['uniform2fv'](_0x3417f1['locationId'],_0x23244a),_0x29f11e[-0xd*-0x146+0x1d*0xad+-0x2427]=_0x2c0c49,_0x29f11e[-0xee9*0x2+0xd*0x97+0x1628]=_0x4ababf);},this['commitFunc'+'tion'][ds]=function(_0x274fae,_0xf938cd){_0x29f11e=_0x274fae['value'],_0x2c0c49=_0xf938cd[-0x1*0xec9+-0x28a+0x1153],_0x4ababf=_0xf938cd[0x1*-0x1337+-0xfbd+0x1d7*0x13],_0xfe497=_0xf938cd[0x1a9a+-0xb89*0x1+-0xf0f],(_0x29f11e[-0x1b0f+0x2*-0xc4f+0x1*0x33ad]!==_0x2c0c49||_0x29f11e[-0x5*-0x81+0x1ad5+-0x1d59]!==_0x4ababf||_0x29f11e[-0x2606+-0xb3f*-0x1+0x1ac9*0x1]!==_0xfe497)&&(_0x88154d['uniform3fv'](_0x274fae['locationId'],_0xf938cd),_0x29f11e[0x2ef*0x2+-0x9*-0x2f5+-0x207b]=_0x2c0c49,_0x29f11e[0x24c4+-0x1779+0x9*-0x17a]=_0x4ababf,_0x29f11e[0x251*0xf+0x1ed+-0x24aa]=_0xfe497);},this['commitFunc'+'tion'][Rn]=function(_0x495723,_0x27abef){_0x29f11e=_0x495723['value'],_0x2c0c49=_0x27abef[-0xfb6*-0x2+-0x1*-0x1feb+-0x3f57],_0x4ababf=_0x27abef[-0x17cc+-0x382*-0x3+0xd47],_0xfe497=_0x27abef[0x22c7+0x196e+-0x3c33],_0xb12314=_0x27abef[-0xffd+-0x31*-0x89+-0xa39],(_0x29f11e[-0xf60+-0x182*-0x2+0xc5c]!==_0x2c0c49||_0x29f11e[0x26f1+0xa3*0x7+0x211*-0x15]!==_0x4ababf||_0x29f11e[0x7c9*-0x2+-0x41*0x7b+0x2ecf]!==_0xfe497||_0x29f11e[0x1800+0x73c+-0x1f39]!==_0xb12314)&&(_0x88154d['uniform4fv'](_0x495723['locationId'],_0x27abef),_0x29f11e[-0x24c4+-0x17f7+0x3cbb]=_0x2c0c49,_0x29f11e[0xa02+0x120a+-0x1c0b]=_0x4ababf,_0x29f11e[-0x1547+-0x72d+0x1c76*0x1]=_0xfe497,_0x29f11e[-0x2e7+-0x1275+-0x155f*-0x1]=_0xb12314);},this['commitFunc'+'tion'][ca]=function(_0x5d234b,_0x5d5722){_0x29f11e=_0x5d234b['value'],_0x2c0c49=_0x5d5722[-0x221*0xb+-0x34*-0x7f+-0x261],_0x4ababf=_0x5d5722[-0x30d*-0x3+-0xf55+-0x62f*-0x1],(_0x29f11e[-0x7*0xda+0x162c+0x1036*-0x1]!==_0x2c0c49||_0x29f11e[0x2*-0x963+-0x1b81+0x2e48]!==_0x4ababf)&&(_0x88154d['uniform2iv'](_0x5d234b['locationId'],_0x5d5722),_0x29f11e[-0x1747*0x1+-0x10c1*-0x1+0x343*0x2]=_0x2c0c49,_0x29f11e[0x1*-0x3ae+0x1168+-0x493*0x3]=_0x4ababf);},this['commitFunc'+'tion'][tl]=this['commitFunc'+'tion'][ca],this['commitFunc'+'tion'][ha]=function(_0x21c65f,_0x1c9b4a){_0x29f11e=_0x21c65f['value'],_0x2c0c49=_0x1c9b4a[0x1*-0x7bf+-0x1b50+0x230f],_0x4ababf=_0x1c9b4a[-0xe7d+0x2219+-0x139b],_0xfe497=_0x1c9b4a[0x1028+-0xdf*0x1d+0x91d],(_0x29f11e[0xb11*-0x2+0xa74+0xbae]!==_0x2c0c49||_0x29f11e[-0xb5d+-0x20da+-0x236*-0x14]!==_0x4ababf||_0x29f11e[0x50b*0x6+0x1b01+0x1*-0x3941]!==_0xfe497)&&(_0x88154d['uniform3iv'](_0x21c65f['locationId'],_0x1c9b4a),_0x29f11e[0x1*-0xa6d+0x27*-0x6d+0x28*0xad]=_0x2c0c49,_0x29f11e[0xa36+0x3e9+-0x2*0x70f]=_0x4ababf,_0x29f11e[-0x1793+0x1b1b+-0x386]=_0xfe497);},this['commitFunc'+'tion'][sl]=this['commitFunc'+'tion'][ha],this['commitFunc'+'tion'][da]=function(_0x571729,_0x5e0372){_0x29f11e=_0x571729['value'],_0x2c0c49=_0x5e0372[-0x6fe+0x4ee+0x108*0x2],_0x4ababf=_0x5e0372[-0x9a0+-0x267e+0x1*0x301f],_0xfe497=_0x5e0372[-0x13*0x126+0x7*-0x1d8+0x22bc],_0xb12314=_0x5e0372[-0x13*-0x10+0x1fde+-0x210b],(_0x29f11e[-0x2387*-0x1+-0x2204+-0x183]!==_0x2c0c49||_0x29f11e[0x25fd+0x1e90+0x1ac*-0x29]!==_0x4ababf||_0x29f11e[0x70b*-0x1+0x26ef*0x1+-0x1fe2*0x1]!==_0xfe497||_0x29f11e[0x1e7f+0x14bb*0x1+-0x1*0x3337]!==_0xb12314)&&(_0x88154d['uniform4iv'](_0x571729['locationId'],_0x5e0372),_0x29f11e[0x24f6+0x2152+-0x4648]=_0x2c0c49,_0x29f11e[-0x999*-0x1+0x101*0x1+-0xa99]=_0x4ababf,_0x29f11e[-0x1402+0x11d9+0x1*0x22b]=_0xfe497,_0x29f11e[0x7c7+-0xb90+0x144*0x3]=_0xb12314);},this['commitFunc'+'tion'][il]=this['commitFunc'+'tion'][da],this['commitFunc'+'tion'][_h]=function(_0x460bc9,_0x4712ed){_0x88154d['uniformMat'+'rix2fv'](_0x460bc9['locationId'],!(0x793+0x1faa+-0x24*0x117),_0x4712ed);},this['commitFunc'+'tion'][On]=function(_0x15be99,_0x3310d1){_0x88154d['uniformMat'+'rix3fv'](_0x15be99['locationId'],!(-0x8*-0x3ce+0x2b*0x11+0x2*-0x10a5),_0x3310d1);},this['commitFunc'+'tion'][li]=function(_0x4bf21f,_0x3f867e){_0x88154d['uniformMat'+'rix4fv'](_0x4bf21f['locationId'],!(-0x1d4*0xc+0x206b+-0x12a*0x9),_0x3f867e);},this['commitFunc'+'tion'][ud]=function(_0x356670,_0x38f603){_0x88154d['uniform1fv'](_0x356670['locationId'],_0x38f603);},this['commitFunc'+'tion'][pd]=function(_0x4b5f8f,_0x5b1411){_0x88154d['uniform2fv'](_0x4b5f8f['locationId'],_0x5b1411);},this['commitFunc'+'tion'][md]=function(_0x1f71e2,_0x178854){_0x88154d['uniform3fv'](_0x1f71e2['locationId'],_0x178854);},this['commitFunc'+'tion'][Lp]=function(_0x481cfc,_0xea8187){_0x88154d['uniform4fv'](_0x481cfc['locationId'],_0xea8187);},this['commitFunc'+'tion'][Fn]=function(_0x54d7c0,_0x23f542){_0x54d7c0['value']!==_0x23f542&&(_0x88154d['uniform1ui'](_0x54d7c0['locationId'],_0x23f542),_0x54d7c0['value']=_0x23f542);},this['commitFunc'+'tion'][Nn]=function(_0x14e08f,_0x21ee2c){_0x29f11e=_0x14e08f['value'],_0x2c0c49=_0x21ee2c[0x102f+0x21c6+0x1*-0x31f5],_0x4ababf=_0x21ee2c[-0x1b95+-0x1a27+-0x35bd*-0x1],(_0x29f11e[0x169e+-0x11*0x73+-0x2ff*0x5]!==_0x2c0c49||_0x29f11e[-0x19ea+-0xdad+-0x4*-0x9e6]!==_0x4ababf)&&(_0x88154d['uniform2ui'+'v'](_0x14e08f['locationId'],_0x21ee2c),_0x29f11e[0x1*-0x1da1+0x16eb+0x2*0x35b]=_0x2c0c49,_0x29f11e[0x1*0x219b+0x3e9*0x7+-0x79*0x81]=_0x4ababf);},this['commitFunc'+'tion'][kn]=function(_0x39f62e,_0x50bd4b){_0x29f11e=_0x39f62e['value'],_0x2c0c49=_0x50bd4b[0xd50+-0xbfb*-0x1+0x39d*-0x7],_0x4ababf=_0x50bd4b[-0x4ba+-0xb*0x103+0xfdc],_0xfe497=_0x50bd4b[0x36*0x14+-0x1834+0x13fe*0x1],(_0x29f11e[0x1*-0x26aa+0x9*-0x3df+-0x25f*-0x1f]!==_0x2c0c49||_0x29f11e[0x1d*-0x42+0x16a7+0x3cb*-0x4]!==_0x4ababf||_0x29f11e[0x20b+-0x35*0x67+0x337*0x6]!==_0xfe497)&&(_0x88154d['uniform3ui'+'v'](_0x39f62e['locationId'],_0x50bd4b),_0x29f11e[0x1fe3+0x8f8+-0x1*0x28db]=_0x2c0c49,_0x29f11e[-0x248f*0x1+0x1*0x1565+-0xf2b*-0x1]=_0x4ababf,_0x29f11e[0x82d+-0x156f+0xd44]=_0xfe497);},this['commitFunc'+'tion'][Un]=function(_0x1f2eba,_0x271a1c){_0x29f11e=_0x1f2eba['value'],_0x2c0c49=_0x271a1c[-0x1c16+0x11ab*-0x1+0x385*0xd],_0x4ababf=_0x271a1c[-0x367+0x969+0x35*-0x1d],_0xfe497=_0x271a1c[0x23b*-0xe+0x13d*0x7+0x1691*0x1],_0xb12314=_0x271a1c[0xf18+-0x10d1+0x1bc],(_0x29f11e[-0x1cd0+-0x309+0x1fd9]!==_0x2c0c49||_0x29f11e[0x20df+-0x11*0xc+-0x2012]!==_0x4ababf||_0x29f11e[0x27*0x36+-0x1c6*-0x2+-0x5e2*0x2]!==_0xfe497||_0x29f11e[0x15*0x9+0x1483*-0x1+-0x1*-0x13c9]!==_0xb12314)&&(_0x88154d['uniform4ui'+'v'](_0x1f2eba['locationId'],_0x271a1c),_0x29f11e[-0x147e+0x75a+0xd24*0x1]=_0x2c0c49,_0x29f11e[0x66d+-0x23f4+0x1d88]=_0x4ababf,_0x29f11e[0x1149+0x1*-0x37b+0x2*-0x6e6]=_0xfe497,_0x29f11e[0x3*0x686+0x1904+-0x2c93]=_0xb12314);},this['commitFunc'+'tion'][Bn]=function(_0x1c4f1b,_0x26e006){_0x88154d['uniform1iv'](_0x1c4f1b['locationId'],_0x26e006);},this['commitFunc'+'tion'][_d]=function(_0x10c40b,_0x319f29){_0x88154d['uniform1ui'+'v'](_0x10c40b['locationId'],_0x319f29);},this['commitFunc'+'tion'][gd]=this['commitFunc'+'tion'][Bn],this['commitFunc'+'tion'][zn]=function(_0x429522,_0x53e771){_0x88154d['uniform2iv'](_0x429522['locationId'],_0x53e771);},this['commitFunc'+'tion'][Sd]=function(_0x1dd141,_0xd8430){_0x88154d['uniform2ui'+'v'](_0x1dd141['locationId'],_0xd8430);},this['commitFunc'+'tion'][yd]=this['commitFunc'+'tion'][zn],this['commitFunc'+'tion'][Vn]=function(_0x417b3d,_0x3ff9e4){_0x88154d['uniform3iv'](_0x417b3d['locationId'],_0x3ff9e4);},this['commitFunc'+'tion'][vd]=function(_0x121278,_0x1a596a){_0x88154d['uniform3ui'+'v'](_0x121278['locationId'],_0x1a596a);},this['commitFunc'+'tion'][xd]=this['commitFunc'+'tion'][Vn],this['commitFunc'+'tion'][gh]=function(_0x258761,_0x389810){_0x88154d['uniform4iv'](_0x258761['locationId'],_0x389810);},this['commitFunc'+'tion'][Rp]=function(_0x44217a,_0x55902f){_0x88154d['uniform4ui'+'v'](_0x44217a['locationId'],_0x55902f);},this['commitFunc'+'tion'][Op]=this['commitFunc'+'tion'][gh],this['commitFunc'+'tion'][wy]=function(_0x1dbff2,_0x2eeae0){_0x88154d['uniformMat'+'rix4fv'](_0x1dbff2['locationId'],!(-0x343*-0x7+-0x2a0+-0x1434*0x1),_0x2eeae0);},this['constantTe'+'xSource']=this['scope']['resolve']('source'),this['postInit']();}['postInit'](){super['postInit'](),this['gpuProfile'+'r']=new rw(this);}['destroy'](){super['destroy']();const _0x5314a6=this['gl'];this['feedback']&&_0x5314a6['deleteTran'+'sformFeedb'+'ack'](this['feedback']),this['clearVerte'+'xArrayObje'+'ctCache'](),this['canvas']['removeEven'+'tListener']('webglconte'+'xtlost',this['_contextLo'+'stHandler'],!(0x1e55+-0x1a45+-0x40f)),this['canvas']['removeEven'+'tListener']('webglconte'+'xtrestored',this['_contextRe'+'storedHand'+'ler'],!(0x4*0x2e6+-0x70d+-0x48a)),this['_contextLo'+'stHandler']=null,this['_contextRe'+'storedHand'+'ler']=null,this['gl']=null,super['postDestro'+'y']();}['createBack'+'buffer'](_0x3dd488){this['supportsSt'+'encil']=this['initOption'+'s']['stencil'],this['backBuffer']=new gt({'name':'WebglFrame'+'buffer','graphicsDevice':this,'depth':this['initOption'+'s']['depth'],'stencil':this['supportsSt'+'encil'],'samples':this['samples']}),this['backBuffer']['impl']['suppliedCo'+'lorFramebu'+'ffer']=_0x3dd488;}['updateBack'+'bufferForm'+'at'](_0xfc2c79){const _0x32219a=this['gl'];_0x32219a['bindFrameb'+'uffer'](_0x32219a['FRAMEBUFFE'+'R'],_0xfc2c79);const _0x729c8b=this['gl']['getParamet'+'er'](this['gl']['ALPHA_BITS']);this['backBuffer'+'Format']=_0x729c8b?Ne:Cr;}['updateBack'+'buffer'](){const _0x2e7b50=this['canvas']['width']!==this['backBuffer'+'Size']['x']||this['canvas']['height']!==this['backBuffer'+'Size']['y'];(this['_defaultFr'+'amebufferC'+'hanged']||_0x2e7b50)&&(this['_defaultFr'+'amebufferC'+'hanged']&&this['updateBack'+'bufferForm'+'at'](this['_defaultFr'+'amebuffer']),this['_defaultFr'+'amebufferC'+'hanged']=!(-0xa83+0xaa1+-0x1d),this['backBuffer'+'Size']['set'](this['canvas']['width'],this['canvas']['height']),this['backBuffer']['destroy'](),this['createBack'+'buffer'](this['_defaultFr'+'amebuffer']));}['createVert'+'exBufferIm'+'pl'](_0x20db64,_0x4d3db7){return new XT();}['createInde'+'xBufferImp'+'l'](_0x5bdc29){return new qT(_0x5bdc29);}['createShad'+'erImpl'](_0xd43d1f){return new JT(_0xd43d1f);}['createText'+'ureImpl'](_0x3fd322){return new ew(_0x3fd322);}['createRend'+'erTargetIm'+'pl'](_0xc241b7){return new sw();}['pushMarker'](_0x5bbb56){if(Ae['browser']&&window['spector']){const _0x2687f6=Q['toString']();window['spector']['setMarker'](_0x2687f6+'\x20#');}}['popMarker'](){if(Ae['browser']&&window['spector']){const _0x279763=Q['toString']();_0x279763['length']?window['spector']['setMarker'](_0x279763+'\x20#'):window['spector']['clearMarke'+'r']();}}['getPrecisi'+'on'](){const _0x2beee1=this['gl'];let _0x4bf97c='highp';if(_0x2beee1['getShaderP'+'recisionFo'+'rmat']){const _0x3271e3=_0x2beee1['getShaderP'+'recisionFo'+'rmat'](_0x2beee1['VERTEX_SHA'+'DER'],_0x2beee1['HIGH_FLOAT']),_0x517f21=_0x2beee1['getShaderP'+'recisionFo'+'rmat'](_0x2beee1['VERTEX_SHA'+'DER'],_0x2beee1['MEDIUM_FLO'+'AT']),_0x4bd609=_0x2beee1['getShaderP'+'recisionFo'+'rmat'](_0x2beee1['FRAGMENT_S'+'HADER'],_0x2beee1['HIGH_FLOAT']),_0x512b1f=_0x2beee1['getShaderP'+'recisionFo'+'rmat'](_0x2beee1['FRAGMENT_S'+'HADER'],_0x2beee1['MEDIUM_FLO'+'AT']);if(_0x3271e3&&_0x517f21&&_0x4bd609&&_0x512b1f){const _0xfa97fc=_0x3271e3['precision']>0x1*0x1aa8+0x1*-0x102d+0xa7b*-0x1&&_0x4bd609['precision']>-0x264d+-0x77*-0x1+0x14e*0x1d,_0x19d030=_0x517f21['precision']>0x635+0x97b+-0xfb0&&_0x512b1f['precision']>0x1*-0x1741+-0x1393*0x1+0x2*0x156a;_0xfa97fc||(_0x19d030?(_0x4bf97c='mediump',w['warn']('WARNING:\x20h'+'ighp\x20not\x20s'+'upported,\x20'+'using\x20medi'+'ump')):(_0x4bf97c='lowp',w['warn']('WARNING:\x20h'+'ighp\x20and\x20m'+'ediump\x20not'+'\x20supported'+',\x20using\x20lo'+'wp')));}}return _0x4bf97c;}['getExtensi'+'on'](){for(let _0x14fe8c=-0x2*-0x5e+-0x123*0x13+0x14dd;_0x14fe8c<arguments['length'];_0x14fe8c++)if(this['supportedE'+'xtensions']['indexOf'](arguments[_0x14fe8c])!==-(-0x4*-0x65b+0x58f+-0x1efa))return this['gl']['getExtensi'+'on'](arguments[_0x14fe8c]);return null;}get['extDisjoin'+'tTimerQuer'+'y'](){return this['_extDisjoi'+'ntTimerQue'+'ry']||(this['_extDisjoi'+'ntTimerQue'+'ry']=this['getExtensi'+'on']('EXT_disjoi'+'nt_timer_q'+'uery_webgl'+'2','EXT_disjoi'+'nt_timer_q'+'uery')),this['_extDisjoi'+'ntTimerQue'+'ry'];}['initialize'+'Extensions'](){const _0x3964c4=this['gl'];this['supportedE'+'xtensions']=_0x3964c4['getSupport'+'edExtensio'+'ns']()??[],this['_extDisjoi'+'ntTimerQue'+'ry']=null,this['textureRG1'+'1B10Render'+'able']=!(-0xb46+-0xd*0x27+-0x27*-0x57),this['extColorBu'+'fferFloat']=this['getExtensi'+'on']('EXT_color_'+'buffer_flo'+'at'),this['textureFlo'+'atRenderab'+'le']=!!this['extColorBu'+'fferFloat'],this['extColorBu'+'fferHalfFl'+'oat']=this['getExtensi'+'on']('EXT_color_'+'buffer_hal'+'f_float'),this['textureHal'+'fFloatRend'+'erable']=!!this['extColorBu'+'fferHalfFl'+'oat']||!!this['extColorBu'+'fferFloat'],this['extDebugRe'+'ndererInfo']=this['getExtensi'+'on']('WEBGL_debu'+'g_renderer'+'_info'),this['extTexture'+'FloatLinea'+'r']=this['getExtensi'+'on']('OES_textur'+'e_float_li'+'near'),this['textureFlo'+'atFilterab'+'le']=!!this['extTexture'+'FloatLinea'+'r'],this['extFloatBl'+'end']=this['getExtensi'+'on']('EXT_float_'+'blend'),this['extTexture'+'FilterAnis'+'otropic']=this['getExtensi'+'on']('EXT_textur'+'e_filter_a'+'nisotropic','WEBKIT_EXT'+'_texture_f'+'ilter_anis'+'otropic'),this['extParalle'+'lShaderCom'+'pile']=this['getExtensi'+'on']('KHR_parall'+'el_shader_'+'compile'),this['extCompres'+'sedTexture'+'ETC1']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_etc1'),this['extCompres'+'sedTexture'+'ETC']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_etc'),this['extCompres'+'sedTexture'+'PVRTC']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_pvrtc','WEBKIT_WEB'+'GL_compres'+'sed_textur'+'e_pvrtc'),this['extCompres'+'sedTexture'+'S3TC']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_s3tc','WEBKIT_WEB'+'GL_compres'+'sed_textur'+'e_s3tc'),this['extCompres'+'sedTexture'+'S3TC_SRGB']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_s3tc_'+'srgb'),this['extCompres'+'sedTexture'+'ATC']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_atc'),this['extCompres'+'sedTexture'+'ASTC']=this['getExtensi'+'on']('WEBGL_comp'+'ressed_tex'+'ture_astc'),this['extTexture'+'Compressio'+'nBPTC']=this['getExtensi'+'on']('EXT_textur'+'e_compress'+'ion_bptc');}['initialize'+'Capabiliti'+'es'](){const _0x51f288=this['gl'];let _0x1d7014;const _0x151f24=typeof navigator<'u'?navigator['userAgent']:'';this['maxPrecisi'+'on']=this['precision']=this['getPrecisi'+'on']();const _0x2bee4e=_0x51f288['getContext'+'Attributes']();this['supportsMs'+'aa']=(_0x2bee4e==null?void(-0x23a7*0x1+-0x12ab*0x1+-0x1*-0x3652):_0x2bee4e['antialias'])??!(-0x106*0x1b+0x12d4*0x1+0x8cf),this['supportsSt'+'encil']=(_0x2bee4e==null?void(0xdb5+0xfd*0x1c+-0x499*0x9):_0x2bee4e['stencil'])??!(-0x79d*0x2+-0x11b7+0x20f2),this['maxTexture'+'Size']=_0x51f288['getParamet'+'er'](_0x51f288['MAX_TEXTUR'+'E_SIZE']),this['maxCubeMap'+'Size']=_0x51f288['getParamet'+'er'](_0x51f288['MAX_CUBE_M'+'AP_TEXTURE'+'_SIZE']),this['maxRenderB'+'ufferSize']=_0x51f288['getParamet'+'er'](_0x51f288['MAX_RENDER'+'BUFFER_SIZ'+'E']),this['maxTexture'+'s']=_0x51f288['getParamet'+'er'](_0x51f288['MAX_TEXTUR'+'E_IMAGE_UN'+'ITS']),this['maxCombine'+'dTextures']=_0x51f288['getParamet'+'er'](_0x51f288['MAX_COMBIN'+'ED_TEXTURE'+'_IMAGE_UNI'+'TS']),this['maxVertexT'+'extures']=_0x51f288['getParamet'+'er'](_0x51f288['MAX_VERTEX'+'_TEXTURE_I'+'MAGE_UNITS']),this['vertexUnif'+'ormsCount']=_0x51f288['getParamet'+'er'](_0x51f288['MAX_VERTEX'+'_UNIFORM_V'+'ECTORS']),this['fragmentUn'+'iformsCoun'+'t']=_0x51f288['getParamet'+'er'](_0x51f288['MAX_FRAGME'+'NT_UNIFORM'+'_VECTORS']),this['maxColorAt'+'tachments']=_0x51f288['getParamet'+'er'](_0x51f288['MAX_COLOR_'+'ATTACHMENT'+'S']),this['maxVolumeS'+'ize']=_0x51f288['getParamet'+'er'](_0x51f288['MAX_3D_TEX'+'TURE_SIZE']),_0x1d7014=this['extDebugRe'+'ndererInfo'],this['unmaskedRe'+'nderer']=_0x1d7014?_0x51f288['getParamet'+'er'](_0x1d7014['UNMASKED_R'+'ENDERER_WE'+'BGL']):'',this['unmaskedVe'+'ndor']=_0x1d7014?_0x51f288['getParamet'+'er'](_0x1d7014['UNMASKED_V'+'ENDOR_WEBG'+'L']):'';const _0x4957fd=/\bMali-G52+/,_0x24fa62=/SM-[a-zA-Z0-9]+/;this['supportsGp'+'uParticles']=!(this['unmaskedVe'+'ndor']==='ARM'&&_0x151f24['match'](_0x24fa62))&&!this['unmaskedRe'+'nderer']['match'](_0x4957fd),_0x1d7014=this['extTexture'+'FilterAnis'+'otropic'],this['maxAnisotr'+'opy']=_0x1d7014?_0x51f288['getParamet'+'er'](_0x1d7014['MAX_TEXTUR'+'E_MAX_ANIS'+'OTROPY_EXT']):0x1a27+-0x12*0x10d+-0x4*0x1cf;const _0x359b73=!this['forceDisab'+'leMultisam'+'pling'];this['maxSamples']=_0x359b73?_0x51f288['getParamet'+'er'](_0x51f288['MAX_SAMPLE'+'S']):-0x1ab+-0x1d56+0x1f02,this['maxSamples']=Math['min'](this['maxSamples'],0xdd9+-0x1f7d+0x28*0x71),this['samples']=_0x359b73&&this['backBuffer'+'Antialias']?this['maxSamples']:-0x15*0xf1+-0x1eb2+0x3278,this['supportsAr'+'eaLights']=!Ae['android'],this['maxTexture'+'s']<=-0x14f7+-0xe7*0x7+0xb8*0x26&&(this['supportsAr'+'eaLights']=!(-0x1352+-0x1b06+0x2e59)),this['initCapsDe'+'fines']();}['initialize'+'RenderStat'+'e'](){super['initialize'+'RenderStat'+'e']();const _0x311f1d=this['gl'];_0x311f1d['disable'](_0x311f1d['BLEND']),_0x311f1d['blendFunc'](_0x311f1d['ONE'],_0x311f1d['ZERO']),_0x311f1d['blendEquat'+'ion'](_0x311f1d['FUNC_ADD']),_0x311f1d['colorMask'](!(-0x2320*0x1+-0x2*0xf79+0x4212),!(0x2b8+0x36+-0x96*0x5),!(0x1f61*0x1+-0x6*-0x62a+0x1d9*-0x25),!(-0x1*0xc4c+0xd47+0xfb*-0x1)),_0x311f1d['blendColor'](0x1*-0x144d+0xed8+0x575,-0x2669+0x10*0x1e8+0x2d*0x2d,-0x23*0x34+0x1dc7+0x33d*-0x7,-0x2374+0xd7d+0x15f7*0x1),_0x311f1d['enable'](_0x311f1d['CULL_FACE']),this['cullFace']=_0x311f1d['BACK'],_0x311f1d['cullFace'](_0x311f1d['BACK']),_0x311f1d['enable'](_0x311f1d['DEPTH_TEST']),_0x311f1d['depthFunc'](_0x311f1d['LEQUAL']),_0x311f1d['depthMask'](!(0x353+-0x7*0x13+-0x2ce)),this['stencil']=!(-0x11a2+0x3b*-0x27+0x1aa0),_0x311f1d['disable'](_0x311f1d['STENCIL_TE'+'ST']),this['stencilFun'+'cFront']=this['stencilFun'+'cBack']=Wi,this['stencilRef'+'Front']=this['stencilRef'+'Back']=-0x9e4+0x1*-0x1fc7+-0x29ab*-0x1,this['stencilMas'+'kFront']=this['stencilMas'+'kBack']=0x4e9*0x1+-0x251*0xf+0xa47*0x3,_0x311f1d['stencilFun'+'c'](_0x311f1d['ALWAYS'],-0x1*-0xb18+0xc26*-0x1+0x10e,0x1*0x113e+-0x2208+0x11c9),this['stencilFai'+'lFront']=this['stencilFai'+'lBack']=xn,this['stencilZfa'+'ilFront']=this['stencilZfa'+'ilBack']=xn,this['stencilZpa'+'ssFront']=this['stencilZpa'+'ssBack']=xn,this['stencilWri'+'teMaskFron'+'t']=-0x1*-0x791+-0x1fa*0x5+-0x8*-0x6a,this['stencilWri'+'teMaskBack']=-0x43*-0x6e+0x17ae+0x3379*-0x1,_0x311f1d['stencilOp'](_0x311f1d['KEEP'],_0x311f1d['KEEP'],_0x311f1d['KEEP']),_0x311f1d['stencilMas'+'k'](-0x7b9*-0x1+-0x7*0x369+-0xb*-0x18f),this['alphaToCov'+'erage']=!(-0x196a+-0x207*0x1+-0x2*-0xdb9),this['raster']=!(-0x25*0x19+-0x1c09+-0xfd3*-0x2),_0x311f1d['disable'](_0x311f1d['SAMPLE_ALP'+'HA_TO_COVE'+'RAGE']),_0x311f1d['disable'](_0x311f1d['RASTERIZER'+'_DISCARD']),this['depthBiasE'+'nabled']=!(-0x20*0xd5+0x1289+0x818),_0x311f1d['disable'](_0x311f1d['POLYGON_OF'+'FSET_FILL']),this['clearDepth']=-0x1733+0x5b*0x6b+0xed5*-0x1,_0x311f1d['clearDepth'](0x148a+-0x1df*-0x9+0xd*-0x2e0),this['clearColor']=new ie(0x4fd+-0x14b5+0xfb8,0x623+-0x1*0x83e+0x1*0x21b,-0x127d*-0x2+0x90*-0x37+-0x60a*0x1,-0x2578+0x16a*0x13+0xa9a),_0x311f1d['clearColor'](0xbcb+-0x48e+-0x73d,-0xd*-0x35+-0x75*-0x2f+0xc16*-0x2,-0x164b+-0x1554+-0xd*-0x35b,-0xc0b*-0x2+0x184e+-0x3064),this['clearStenc'+'il']=-0x1351+0x15b4+-0x263,_0x311f1d['clearStenc'+'il'](0x24f9*-0x1+0x1*-0x1352+0x384b),_0x311f1d['hint'](_0x311f1d['FRAGMENT_S'+'HADER_DERI'+'VATIVE_HIN'+'T'],_0x311f1d['NICEST']),_0x311f1d['enable'](_0x311f1d['SCISSOR_TE'+'ST']),_0x311f1d['pixelStore'+'i'](_0x311f1d['UNPACK_COL'+'ORSPACE_CO'+'NVERSION_W'+'EBGL'],_0x311f1d['NONE']),this['unpackFlip'+'Y']=!(0x667*0x3+-0x800+-0xb34),_0x311f1d['pixelStore'+'i'](_0x311f1d['UNPACK_FLI'+'P_Y_WEBGL'],!(0x1a37+-0xb69+-0x1a5*0x9)),this['unpackPrem'+'ultiplyAlp'+'ha']=!(-0xa*-0x62+0x71+-0x444),_0x311f1d['pixelStore'+'i'](_0x311f1d['UNPACK_PRE'+'MULTIPLY_A'+'LPHA_WEBGL'],!(-0x44*0x6d+-0xa9*0x1d+0x301a)),_0x311f1d['pixelStore'+'i'](_0x311f1d['UNPACK_ALI'+'GNMENT'],-0x22*-0xba+0x1885*0x1+0xb4*-0x46);}['initTextur'+'eUnits'](_0x540728=0x7d1+0x1*-0x365+0x2*-0x22e){this['textureUni'+'ts']=[];for(let _0x2bd5a4=0x77b*0x2+-0x1396+-0x10*-0x4a;_0x2bd5a4<_0x540728;_0x2bd5a4++)this['textureUni'+'ts']['push']([null,null,null]);}['initialize'+'ContextCac'+'hes'](){super['initialize'+'ContextCac'+'hes'](),this['_vaoMap']=new Map(),this['boundVao']=null,this['activeFram'+'ebuffer']=null,this['feedback']=null,this['transformF'+'eedbackBuf'+'fer']=null,this['textureUni'+'t']=0x1*0x12bf+0x598*0x6+-0x344f,this['initTextur'+'eUnits'](this['maxCombine'+'dTextures']);}['loseContex'+'t'](){super['loseContex'+'t']();for(const _0x53d3fe of this['shaders'])_0x53d3fe['loseContex'+'t']();}['restoreCon'+'text'](){this['initialize'+'Extensions'](),this['initialize'+'Capabiliti'+'es'](),super['restoreCon'+'text']();for(const _0x39160e of this['shaders'])_0x39160e['restoreCon'+'text']();}['setViewpor'+'t'](_0x378933,_0x35b435,_0x311f6a,_0x12a5da){(this['vx']!==_0x378933||this['vy']!==_0x35b435||this['vw']!==_0x311f6a||this['vh']!==_0x12a5da)&&(this['gl']['viewport'](_0x378933,_0x35b435,_0x311f6a,_0x12a5da),this['vx']=_0x378933,this['vy']=_0x35b435,this['vw']=_0x311f6a,this['vh']=_0x12a5da);}['setScissor'](_0x5bfefb,_0x1d2a79,_0x49eb48,_0x546f7f){(this['sx']!==_0x5bfefb||this['sy']!==_0x1d2a79||this['sw']!==_0x49eb48||this['sh']!==_0x546f7f)&&(this['gl']['scissor'](_0x5bfefb,_0x1d2a79,_0x49eb48,_0x546f7f),this['sx']=_0x5bfefb,this['sy']=_0x1d2a79,this['sw']=_0x49eb48,this['sh']=_0x546f7f);}['setFramebu'+'ffer'](_0x34c262){if(this['activeFram'+'ebuffer']!==_0x34c262){const _0x3b4161=this['gl'];_0x3b4161['bindFrameb'+'uffer'](_0x3b4161['FRAMEBUFFE'+'R'],_0x34c262),this['activeFram'+'ebuffer']=_0x34c262;}}['copyRender'+'Target'](_0xf11d2e,_0x499bcb,_0xbc46aa,_0x19bf45){var _0x20738d,_0x42999c;const _0x1d4a56=this['gl'];if(_0xf11d2e===this['backBuffer']&&(_0xf11d2e=null),_0xbc46aa){if(_0x499bcb){if(_0xf11d2e){if(!_0xf11d2e['_colorBuff'+'er']||!_0x499bcb['_colorBuff'+'er'])return w['error']('Can\x27t\x20copy'+'\x20color\x20buf'+'fer,\x20becau'+'se\x20one\x20of\x20'+'the\x20render'+'\x20targets\x20d'+'oesn\x27t\x20hav'+'e\x20it'),!(0x57d+-0x1532+0xfb6);if(_0xf11d2e['_colorBuff'+'er']['_format']!==_0x499bcb['_colorBuff'+'er']['_format'])return w['error']('Can\x27t\x20copy'+'\x20render\x20ta'+'rgets\x20of\x20d'+'ifferent\x20c'+'olor\x20forma'+'ts'),!(-0x1*-0x172f+-0x2054+0x1*0x926);}}else{if(!_0xf11d2e['_colorBuff'+'er'])return w['error']('Can\x27t\x20copy'+'\x20empty\x20col'+'or\x20buffer\x20'+'to\x20backbuf'+'fer'),!(0x28*-0xd+-0x1*-0x177d+-0x1574);}}if(_0x19bf45&&_0xf11d2e&&!_0xf11d2e['_depth']){if(!_0xf11d2e['_depthBuff'+'er']||!_0x499bcb['_depthBuff'+'er'])return w['error']('Can\x27t\x20copy'+'\x20depth\x20buf'+'fer,\x20becau'+'se\x20one\x20of\x20'+'the\x20render'+'\x20targets\x20d'+'oesn\x27t\x20hav'+'e\x20it'),!(-0xaf8+-0x1e85+0x1*0x297e);if(_0xf11d2e['_depthBuff'+'er']['_format']!==_0x499bcb['_depthBuff'+'er']['_format'])return w['error']('Can\x27t\x20copy'+'\x20render\x20ta'+'rgets\x20of\x20d'+'ifferent\x20d'+'epth\x20forma'+'ts'),!(0x4d0+0x116c+-0x15*0x10f);}Q['pushGpuMar'+'ker'](this,'COPY-RT');const _0x3b974f=this['renderTarg'+'et'];this['renderTarg'+'et']=_0x499bcb,this['updateBegi'+'n']();const _0x572254=_0xf11d2e?_0xf11d2e['impl']['_glFrameBu'+'ffer']:(_0x20738d=this['backBuffer'])==null?void(0x605*0x5+-0x1596+0x883*-0x1):_0x20738d['impl']['_glFrameBu'+'ffer'],_0x50f469=_0x499bcb?_0x499bcb['impl']['_glFrameBu'+'ffer']:(_0x42999c=this['backBuffer'])==null?void(0x1*0x1af5+0x1*0x1cfd+-0x2*0x1bf9):_0x42999c['impl']['_glFrameBu'+'ffer'];w['assert'](_0x572254!==_0x50f469,'Source\x20and'+'\x20destinati'+'on\x20framebu'+'ffers\x20must'+'\x20be\x20differ'+'ent\x20when\x20b'+'litting.'),_0x1d4a56['bindFrameb'+'uffer'](_0x1d4a56['READ_FRAME'+'BUFFER'],_0x572254),_0x1d4a56['bindFrameb'+'uffer'](_0x1d4a56['DRAW_FRAME'+'BUFFER'],_0x50f469);const _0x559c75=_0xf11d2e?_0xf11d2e['width']:_0x499bcb?_0x499bcb['width']:this['width'],_0x104f61=_0xf11d2e?_0xf11d2e['height']:_0x499bcb?_0x499bcb['height']:this['height'];return _0x1d4a56['blitFrameb'+'uffer'](0x256a+-0x345+-0x2225,0x2*0x127c+0x14+-0x250c,_0x559c75,_0x104f61,0x10ac*-0x1+-0x1505+-0x25b1*-0x1,-0x1ae*0x14+0x11*0x157+0xad1,_0x559c75,_0x104f61,(_0xbc46aa?_0x1d4a56['COLOR_BUFF'+'ER_BIT']:-0x1*-0x809+-0x45e+-0x3ab)|(_0x19bf45?_0x1d4a56['DEPTH_BUFF'+'ER_BIT']:0x216e+-0x1*0x167f+-0x137*0x9),_0x1d4a56['NEAREST']),this['renderTarg'+'et']=_0x3b974f,_0x1d4a56['bindFrameb'+'uffer'](_0x1d4a56['FRAMEBUFFE'+'R'],_0x3b974f?_0x3b974f['impl']['_glFrameBu'+'ffer']:null),Q['popGpuMark'+'er'](this),!(-0x7f*-0x23+0x1f*0x6d+-0x1e90);}['frameStart'](){super['frameStart'](),this['updateBack'+'buffer'](),this['gpuProfile'+'r']['frameStart']();}['frameEnd'](){super['frameEnd'](),this['gpuProfile'+'r']['frameEnd'](),this['gpuProfile'+'r']['request']();}['startRende'+'rPass'](_0x3f86f6){const _0x133ba1=_0x3f86f6['renderTarg'+'et']??this['backBuffer'];this['renderTarg'+'et']=_0x133ba1,w['assert'](_0x133ba1),Q['pushGpuMar'+'ker'](this,'Pass:'+_0x3f86f6['name']+'\x20RT:'+_0x133ba1['name']),Q['pushGpuMar'+'ker'](this,'START-PASS'),this['updateBegi'+'n']();const {width:_0x39fe62,height:_0x384856}=_0x133ba1;this['setViewpor'+'t'](-0x25aa+0x26f2+0x4*-0x52,-0xd5a*0x2+0xd3*0x1e+0x1fa,_0x39fe62,_0x384856),this['setScissor'](0x1c*0x86+0x1*0xbb9+-0x1a61*0x1,0xd33+0x1c2d+-0x20*0x14b,_0x39fe62,_0x384856);const _0x39ab98=_0x3f86f6['colorOps'],_0x2fb299=_0x3f86f6['depthStenc'+'ilOps'];if(_0x39ab98!=null&&_0x39ab98['clear']||_0x2fb299['clearDepth']||_0x2fb299['clearStenc'+'il']){let _0x50e3bd=0x4*-0x1d2+0x71b+0x2d;const _0x354d7f={};_0x39ab98!=null&&_0x39ab98['clear']&&(_0x50e3bd|=jo,_0x354d7f['color']=[_0x39ab98['clearValue']['r'],_0x39ab98['clearValue']['g'],_0x39ab98['clearValue']['b'],_0x39ab98['clearValue']['a']]),_0x2fb299['clearDepth']&&(_0x50e3bd|=Yo,_0x354d7f['depth']=_0x2fb299['clearDepth'+'Value']),_0x2fb299['clearStenc'+'il']&&(_0x50e3bd|=ch,_0x354d7f['stencil']=_0x2fb299['clearStenc'+'ilValue']),_0x354d7f['flags']=_0x50e3bd,this['clear'](_0x354d7f);}w['call'](()=>{this['insideRend'+'erPass']&&w['errorOnce']('RenderPass'+'\x20cannot\x20be'+'\x20started\x20w'+'hile\x20insid'+'e\x20another\x20'+'render\x20pas'+'s.');}),this['insideRend'+'erPass']=!(-0x47*0x6f+-0x1aa5+-0x1cb7*-0x2),Q['popGpuMark'+'er'](this);}['endRenderP'+'ass'](_0x417818){var _0x1536c7;Q['pushGpuMar'+'ker'](this,'END-PASS'),this['unbindVert'+'exArray']();const _0x72ccb1=this['renderTarg'+'et'],_0x58f634=_0x417818['colorArray'+'Ops']['length'];if(_0x72ccb1){Da['length']=0x15fb+0x8e*0x3a+-0x3627;const _0x4795d1=this['gl'];for(let _0x52f6e9=0x14*0x115+0x15ad+-0x2b51;_0x52f6e9<_0x58f634;_0x52f6e9++){const _0x2de805=_0x417818['colorArray'+'Ops'][_0x52f6e9];_0x2de805['store']||_0x2de805['resolve']||Da['push'](_0x4795d1['COLOR_ATTA'+'CHMENT0']+_0x52f6e9);}_0x72ccb1!==this['backBuffer']&&(_0x417818['depthStenc'+'ilOps']['storeDepth']||Da['push'](_0x4795d1['DEPTH_ATTA'+'CHMENT']),_0x417818['depthStenc'+'ilOps']['storeStenc'+'il']||Da['push'](_0x4795d1['STENCIL_AT'+'TACHMENT'])),Da['length']>-0x1527+-0x9*-0x11a+-0x19b*-0x7&&_0x417818['fullSizeCl'+'earRect']&&_0x4795d1['invalidate'+'Framebuffe'+'r'](_0x4795d1['DRAW_FRAME'+'BUFFER'],Da),_0x58f634&&((_0x1536c7=_0x417818['colorOps'])!=null&&_0x1536c7['resolve'])&&_0x417818['samples']>0x49*-0x37+-0x1675+0x2625&&_0x72ccb1['autoResolv'+'e']&&_0x72ccb1['resolve'](!(0xb57+0x1*0xa0e+-0x1565*0x1),!(-0x4+-0x1b71+0x1b76)),_0x72ccb1['depthBuffe'+'r']&&_0x417818['depthStenc'+'ilOps']['resolveDep'+'th']&&_0x417818['samples']>0x68+0x53*-0x17+-0x6*-0x12d&&_0x72ccb1['autoResolv'+'e']&&_0x72ccb1['resolve'](!(0x13f*0x3+-0xe4+0x7*-0x68),!(-0x4d7+-0x13e+0x615));for(let _0x53c470=0x16dc+-0x268c*-0x1+0x1478*-0x3;_0x53c470<_0x58f634;_0x53c470++)if(_0x417818['colorArray'+'Ops'][_0x53c470]['genMipmaps']){const _0x35339d=_0x72ccb1['_colorBuff'+'ers'][_0x53c470];_0x35339d&&_0x35339d['impl']['_glTexture']&&_0x35339d['mipmaps']&&(Q['pushGpuMar'+'ker'](this,'MIPS'+_0x53c470),this['activeText'+'ure'](this['maxCombine'+'dTextures']-(0x11*-0x1+-0xe11+-0x149*-0xb)),this['bindTextur'+'e'](_0x35339d),this['gl']['generateMi'+'pmap'](_0x35339d['impl']['_glTarget']),Q['popGpuMark'+'er'](this));}}this['insideRend'+'erPass']=!(-0x243+-0x443*-0x7+-0x1b91),Q['popGpuMark'+'er'](this),Q['popGpuMark'+'er'](this);}set['defaultFra'+'mebuffer'](_0x2aa61d){this['_defaultFr'+'amebuffer']!==_0x2aa61d&&(this['_defaultFr'+'amebuffer']=_0x2aa61d,this['_defaultFr'+'amebufferC'+'hanged']=!(-0x16f*-0x1+0xd97*-0x2+-0x1*-0x19bf));}get['defaultFra'+'mebuffer'](){return this['_defaultFr'+'amebuffer'];}['updateBegi'+'n'](){if(Q['pushGpuMar'+'ker'](this,'UPDATE-BEG'+'IN'),this['boundVao']=null,this['_tempEnabl'+'eSafariTex'+'tureUnitWo'+'rkaround']){for(let _0x34e810=0xda2+0x17dc+0x1*-0x257e;_0x34e810<this['textureUni'+'ts']['length'];++_0x34e810)for(let _0x4a92ae=0xf*0x251+-0x589*-0x1+-0x2848;_0x4a92ae<0x14ae*0x1+0x3de+-0x1889;++_0x4a92ae)this['textureUni'+'ts'][_0x34e810][_0x4a92ae]=null;}const _0x350606=this['renderTarg'+'et']??this['backBuffer'];w['assert'](_0x350606);const _0x58f3a2=_0x350606['impl'];_0x58f3a2['initialize'+'d']||this['initRender'+'Target'](_0x350606),this['setFramebu'+'ffer'](_0x58f3a2['_glFrameBu'+'ffer']),Q['popGpuMark'+'er'](this);}['updateEnd'](){Q['pushGpuMar'+'ker'](this,'UPDATE-END'),this['unbindVert'+'exArray']();const _0x35da20=this['renderTarg'+'et'];if(_0x35da20&&_0x35da20!==this['backBuffer']){_0x35da20['_samples']>-0x1*0x78b+0x9ef*0x1+-0x263*0x1&&_0x35da20['autoResolv'+'e']&&_0x35da20['resolve']();const _0x5bfd8e=_0x35da20['_colorBuff'+'er'];_0x5bfd8e&&_0x5bfd8e['impl']['_glTexture']&&_0x5bfd8e['mipmaps']&&(this['activeText'+'ure'](this['maxCombine'+'dTextures']-(0x87*0x2a+-0xc49+0x277*-0x4)),this['bindTextur'+'e'](_0x5bfd8e),this['gl']['generateMi'+'pmap'](_0x5bfd8e['impl']['_glTarget']));}Q['popGpuMark'+'er'](this);}['setUnpackF'+'lipY'](_0x32da79){if(this['unpackFlip'+'Y']!==_0x32da79){this['unpackFlip'+'Y']=_0x32da79;const _0x1b1b49=this['gl'];_0x1b1b49['pixelStore'+'i'](_0x1b1b49['UNPACK_FLI'+'P_Y_WEBGL'],_0x32da79);}}['setUnpackP'+'remultiply'+'Alpha'](_0x2c2818){if(this['unpackPrem'+'ultiplyAlp'+'ha']!==_0x2c2818){this['unpackPrem'+'ultiplyAlp'+'ha']=_0x2c2818;const _0x2c90e3=this['gl'];_0x2c90e3['pixelStore'+'i'](_0x2c90e3['UNPACK_PRE'+'MULTIPLY_A'+'LPHA_WEBGL'],_0x2c2818);}}['activeText'+'ure'](_0x5b88e9){this['textureUni'+'t']!==_0x5b88e9&&(this['gl']['activeText'+'ure'](this['gl']['TEXTURE0']+_0x5b88e9),this['textureUni'+'t']=_0x5b88e9);}['bindTextur'+'e'](_0x4cf663){const _0x4de859=_0x4cf663['impl'],_0x1575eb=_0x4de859['_glTarget'],_0x555a2b=_0x4de859['_glTexture'],_0x498476=this['textureUni'+'t'],_0x304244=this['targetToSl'+'ot'][_0x1575eb];this['textureUni'+'ts'][_0x498476][_0x304244]!==_0x555a2b&&(this['gl']['bindTextur'+'e'](_0x1575eb,_0x555a2b),this['textureUni'+'ts'][_0x498476][_0x304244]=_0x555a2b);}['bindTextur'+'eOnUnit'](_0x47a17b,_0x389b76){const _0x3496a3=_0x47a17b['impl'],_0x4dabdb=_0x3496a3['_glTarget'],_0x3949be=_0x3496a3['_glTexture'],_0x3033fc=this['targetToSl'+'ot'][_0x4dabdb];this['textureUni'+'ts'][_0x389b76][_0x3033fc]!==_0x3949be&&(this['activeText'+'ure'](_0x389b76),this['gl']['bindTextur'+'e'](_0x4dabdb,_0x3949be),this['textureUni'+'ts'][_0x389b76][_0x3033fc]=_0x3949be);}['setTexture'+'Parameters'](_0x1f7dbb){const _0x139ca2=this['gl'],_0x3e5686=_0x1f7dbb['impl']['dirtyParam'+'eterFlags'],_0x44d55f=_0x1f7dbb['impl']['_glTarget'];if(_0x3e5686&Ay){let _0xfa7700=_0x1f7dbb['_minFilter'];(!_0x1f7dbb['_mipmaps']||_0x1f7dbb['_compresse'+'d']&&_0x1f7dbb['_levels']['length']===0x2236+-0x9f7+-0x183e)&&(_0xfa7700===Kh||_0xfa7700===Zh?_0xfa7700=Te:(_0xfa7700===Qh||_0xfa7700===ma)&&(_0xfa7700=vt)),_0x139ca2['texParamet'+'eri'](_0x44d55f,_0x139ca2['TEXTURE_MI'+'N_FILTER'],this['glFilter'][_0xfa7700]);}if(_0x3e5686&Cy&&_0x139ca2['texParamet'+'eri'](_0x44d55f,_0x139ca2['TEXTURE_MA'+'G_FILTER'],this['glFilter'][_0x1f7dbb['_magFilter']]),_0x3e5686&Py&&_0x139ca2['texParamet'+'eri'](_0x44d55f,_0x139ca2['TEXTURE_WR'+'AP_S'],this['glAddress'][_0x1f7dbb['_addressU']]),_0x3e5686&My&&_0x139ca2['texParamet'+'eri'](_0x44d55f,_0x139ca2['TEXTURE_WR'+'AP_T'],this['glAddress'][_0x1f7dbb['_addressV']]),_0x3e5686&Dy&&_0x139ca2['texParamet'+'eri'](_0x44d55f,_0x139ca2['TEXTURE_WR'+'AP_R'],this['glAddress'][_0x1f7dbb['_addressW']]),_0x3e5686&Iy&&_0x139ca2['texParamet'+'eri'](_0x44d55f,_0x139ca2['TEXTURE_CO'+'MPARE_MODE'],_0x1f7dbb['_compareOn'+'Read']?_0x139ca2['COMPARE_RE'+'F_TO_TEXTU'+'RE']:_0x139ca2['NONE']),_0x3e5686&Ly&&_0x139ca2['texParamet'+'eri'](_0x44d55f,_0x139ca2['TEXTURE_CO'+'MPARE_FUNC'],this['glComparis'+'on'][_0x1f7dbb['_compareFu'+'nc']]),_0x3e5686&Ry){const _0x5b38c3=this['extTexture'+'FilterAnis'+'otropic'];_0x5b38c3&&_0x139ca2['texParamet'+'erf'](_0x44d55f,_0x5b38c3['TEXTURE_MA'+'X_ANISOTRO'+'PY_EXT'],Y['clamp'](Math['round'](_0x1f7dbb['_anisotrop'+'y']),-0x1*0x1499+-0x1*0x17af+0x2c49,this['maxAnisotr'+'opy']));}}['setTexture'](_0x4d7945,_0x32ce57){const _0x2d5a9e=_0x4d7945['impl'];_0x2d5a9e['_glTexture']||_0x2d5a9e['initialize'](this,_0x4d7945),_0x2d5a9e['dirtyParam'+'eterFlags']>-0x1e0e+0x2*-0xdfb+-0x13c*-0x2f||_0x4d7945['_needsUplo'+'ad']||_0x4d7945['_needsMipm'+'apsUpload']?(this['activeText'+'ure'](_0x32ce57),this['bindTextur'+'e'](_0x4d7945),_0x2d5a9e['dirtyParam'+'eterFlags']&&(this['setTexture'+'Parameters'](_0x4d7945),_0x2d5a9e['dirtyParam'+'eterFlags']=0x10e0+0x12e*-0x17+-0x521*-0x2),(_0x4d7945['_needsUplo'+'ad']||_0x4d7945['_needsMipm'+'apsUpload'])&&(_0x2d5a9e['upload'](this,_0x4d7945),_0x4d7945['_needsUplo'+'ad']=!(-0x1446+-0x2191+0x35d8),_0x4d7945['_needsMipm'+'apsUpload']=!(-0x242a+-0x1*0x1d27+0x4152))):this['bindTextur'+'eOnUnit'](_0x4d7945,_0x32ce57);}['createVert'+'exArray'](_0x5533e7){let _0x4a2979,_0x1759af;const _0x26fb8e=_0x5533e7['length']>0x1860+-0x1bbe+0x35f*0x1;if(_0x26fb8e){_0x4a2979='';for(let _0x1b6e3a=-0x2618+0xd6*-0x3+0x289a;_0x1b6e3a<_0x5533e7['length'];_0x1b6e3a++){const _0x1f23fb=_0x5533e7[_0x1b6e3a];_0x4a2979+=_0x1f23fb['id']+_0x1f23fb['format']['renderingH'+'ash'];}_0x1759af=this['_vaoMap']['get'](_0x4a2979);}if(!_0x1759af){const _0x19534a=this['gl'];_0x1759af=_0x19534a['createVert'+'exArray'](),_0x19534a['bindVertex'+'Array'](_0x1759af),_0x19534a['bindBuffer'](_0x19534a['ELEMENT_AR'+'RAY_BUFFER'],null);let _0x197663=!(-0x17ea*0x1+-0xad6*0x1+0x22c1);for(let _0x34e503=-0x1586+-0x2013+0x3599;_0x34e503<_0x5533e7['length'];_0x34e503++){const _0x441f90=_0x5533e7[_0x34e503];_0x19534a['bindBuffer'](_0x19534a['ARRAY_BUFF'+'ER'],_0x441f90['impl']['bufferId']);const _0x380549=_0x441f90['format']['elements'];for(let _0x187379=0x1d*0x131+0x11b*0x11+-0x3558*0x1;_0x187379<_0x380549['length'];_0x187379++){const _0x3c427e=_0x380549[_0x187379],_0x55cb14=Le[_0x3c427e['name']];_0x55cb14===0x6b*-0x2d+-0x2*-0xd50+-0x29b*0x3&&(_0x197663=!(-0x1e49+-0x3*0x31a+0x7eb*0x5)),_0x3c427e['asInt']?_0x19534a['vertexAttr'+'ibIPointer'](_0x55cb14,_0x3c427e['numCompone'+'nts'],this['glType'][_0x3c427e['dataType']],_0x3c427e['stride'],_0x3c427e['offset']):_0x19534a['vertexAttr'+'ibPointer'](_0x55cb14,_0x3c427e['numCompone'+'nts'],this['glType'][_0x3c427e['dataType']],_0x3c427e['normalize'],_0x3c427e['stride'],_0x3c427e['offset']),_0x19534a['enableVert'+'exAttribAr'+'ray'](_0x55cb14),_0x441f90['format']['instancing']&&_0x19534a['vertexAttr'+'ibDivisor'](_0x55cb14,-0x5ab*0x3+-0x2a6+0x4ea*0x4);}}_0x19534a['bindVertex'+'Array'](null),_0x19534a['bindBuffer'](_0x19534a['ARRAY_BUFF'+'ER'],null),_0x26fb8e&&this['_vaoMap']['set'](_0x4a2979,_0x1759af),_0x197663||w['warn']('No\x20vertex\x20'+'attribute\x20'+'is\x20mapped\x20'+'to\x20locatio'+'n\x200,\x20which'+'\x20might\x20cau'+'se\x20compati'+'bility\x20iss'+'ues\x20on\x20Saf'+'ari\x20on\x20Mac'+'OS\x20-\x20pleas'+'e\x20use\x20attr'+'ibute\x20SEMA'+'NTIC_POSIT'+'ION\x20or\x20SEM'+'ANTIC_ATTR'+'15');}return _0x1759af;}['unbindVert'+'exArray'](){this['boundVao']&&(this['boundVao']=null,this['gl']['bindVertex'+'Array'](null));}['setBuffers'](_0x4e18bc){const _0x2fae1d=this['gl'];let _0x38cb87;if(this['vertexBuff'+'ers']['length']===0x3f+0x7*0x11+-0xb5){const _0x3cda80=this['vertexBuff'+'ers'][0x1274+-0x1f51+-0x25*-0x59];w['assert'](_0x3cda80['device']===this,'The\x20Vertex'+'Buffer\x20was'+'\x20not\x20creat'+'ed\x20using\x20c'+'urrent\x20Gra'+'phicsDevic'+'e'),_0x3cda80['impl']['vao']||(_0x3cda80['impl']['vao']=this['createVert'+'exArray'](this['vertexBuff'+'ers'])),_0x38cb87=_0x3cda80['impl']['vao'];}else _0x38cb87=this['createVert'+'exArray'](this['vertexBuff'+'ers']);this['boundVao']!==_0x38cb87&&(this['boundVao']=_0x38cb87,_0x2fae1d['bindVertex'+'Array'](_0x38cb87));const _0x5d39b6=_0x4e18bc?_0x4e18bc['impl']['bufferId']:null;_0x2fae1d['bindBuffer'](_0x2fae1d['ELEMENT_AR'+'RAY_BUFFER'],_0x5d39b6);}['draw'](_0x20734c,_0x12bc7b,_0x1a48b9,_0x261892,_0x1baccc=!(-0x9fa+0x1a95+-0x109b),_0x229cff=!(-0xbce*0x3+0x1a02+0x968)){const _0x7a8cbe=this['shader'];if(_0x7a8cbe&&(this['activateSh'+'ader'](),this['shaderVali'+'d'])){const _0x273523=this['gl'];_0x1baccc&&(w['call'](()=>{var _0x5d3d5f,_0x582006;return this['validateAt'+'tributes'](this['shader'],(_0x5d3d5f=this['vertexBuff'+'ers'][-0x884+0x1e82+-0x15fe])==null?void(-0xfbc+0x17f1+-0x1*0x835):_0x5d3d5f['format'],(_0x582006=this['vertexBuff'+'ers'][0x4*0x147+-0x1965+0x144a])==null?void(-0x10d*-0x2+-0x2*0x107+-0xc):_0x582006['format']);}),this['setBuffers'](_0x12bc7b));let _0x221b39=-0xb5*-0x1e+0x858+-0x1d8e;const _0x3866c8=_0x7a8cbe['impl']['samplers'];for(let _0x439446=-0x52d+-0x16a8+0x13*0x177,_0x404c0d=_0x3866c8['length'];_0x439446<_0x404c0d;_0x439446++){const _0x177868=_0x3866c8[_0x439446];let _0x35e350=_0x177868['scopeId']['value'];if(!_0x35e350){const _0x301d5c=_0x177868['scopeId']['name'];w['assert'](_0x301d5c!=='texture_gr'+'abPass','Engine\x20pro'+'vided\x20text'+'ure\x20with\x20s'+'ampler\x20nam'+'e\x20\x27texture'+'_grabPass\x27'+'\x20is\x20not\x20lo'+'nger\x20suppo'+'rted,\x20use\x20'+'\x27uSceneCol'+'orMap\x27\x20ins'+'tead'),w['assert'](_0x301d5c!=='uDepthMap','Engine\x20pro'+'vided\x20text'+'ure\x20with\x20s'+'ampler\x20nam'+'e\x20\x27uDepthM'+'ap\x27\x20is\x20not'+'\x20longer\x20su'+'pported,\x20u'+'se\x20\x27uScene'+'DepthMap\x27\x20'+'instead'),_0x301d5c==='uSceneDept'+'hMap'&&(w['errorOnce']('A\x20uSceneDe'+'pthMap\x20tex'+'ture\x20is\x20us'+'ed\x20by\x20the\x20'+'shader\x20but'+'\x20a\x20scene\x20d'+'epth\x20textu'+'re\x20is\x20not\x20'+'available.'+'\x20Use\x20Camer'+'aComponent'+'.requestSc'+'eneDepthMa'+'p\x20/\x20enable'+'\x20Depth\x20Gra'+'bpass\x20on\x20t'+'he\x20Camera\x20'+'Component\x20'+'to\x20enable\x20'+'it.\x20Render'+'ing\x20['+Q['toString']()+']'),_0x35e350=fa(this,'white')),_0x301d5c==='uSceneColo'+'rMap'&&(w['errorOnce']('A\x20uSceneCo'+'lorMap\x20tex'+'ture\x20is\x20us'+'ed\x20by\x20the\x20'+'shader\x20but'+'\x20a\x20scene\x20c'+'olor\x20textu'+'re\x20is\x20not\x20'+'available.'+'\x20Use\x20Camer'+'aComponent'+'.requestSc'+'eneColorMa'+'p\x20/\x20enable'+'\x20Color\x20Gra'+'bpass\x20on\x20t'+'he\x20Camera\x20'+'Component\x20'+'to\x20enable\x20'+'it.\x20Render'+'ing\x20['+Q['toString']()+']'),_0x35e350=fa(this,'pink')),_0x35e350||(w['errorOnce']('Shader\x20'+_0x7a8cbe['name']+'\x20requires\x20'+_0x301d5c+('\x20texture\x20w'+'hich\x20was\x20n'+'ot\x20set.\x20Re'+'ndering\x20[')+Q['toString']()+']',_0x7a8cbe),_0x35e350=fa(this,'pink'));}if(_0x35e350 instanceof _e){const _0x43a43e=_0x35e350;this['setTexture'](_0x43a43e,_0x221b39),this['renderTarg'+'et']&&this['renderTarg'+'et']['_samples']<-0x22e0+0x6*0x47b+0x800&&(this['renderTarg'+'et']['colorBuffe'+'r']&&this['renderTarg'+'et']['colorBuffe'+'r']===_0x43a43e?w['error']('Trying\x20to\x20'+'bind\x20curre'+'nt\x20color\x20b'+'uffer\x20as\x20a'+'\x20texture',{'renderTarget':this['renderTarg'+'et'],'texture':_0x43a43e}):this['renderTarg'+'et']['depthBuffe'+'r']&&this['renderTarg'+'et']['depthBuffe'+'r']===_0x43a43e&&w['error']('Trying\x20to\x20'+'bind\x20curre'+'nt\x20depth\x20b'+'uffer\x20as\x20a'+'\x20texture',{'texture':_0x43a43e})),_0x177868['slot']!==_0x221b39&&(_0x273523['uniform1i'](_0x177868['locationId'],_0x221b39),_0x177868['slot']=_0x221b39),_0x221b39++;}else{_0x177868['array']['length']=-0x3*-0x115+-0x2683*-0x1+0x1*-0x29c2;const _0x1cba13=_0x35e350['length'];for(let _0xba8b3=0x2*-0x4dc+0x1a0c*-0x1+0x23c4;_0xba8b3<_0x1cba13;_0xba8b3++){const _0x9fc9fc=_0x35e350[_0xba8b3];this['setTexture'](_0x9fc9fc,_0x221b39),_0x177868['array'][_0xba8b3]=_0x221b39,_0x221b39++;}_0x273523['uniform1iv'](_0x177868['locationId'],_0x177868['array']);}}const _0x55dbbc=_0x7a8cbe['impl']['uniforms'];for(let _0x5a81e5=0x18b5+-0x841+-0x1074,_0x4404a1=_0x55dbbc['length'];_0x5a81e5<_0x4404a1;_0x5a81e5++){const _0x262523=_0x55dbbc[_0x5a81e5],_0x349e5e=_0x262523['scopeId'],_0x5bb3d6=_0x262523['version'],_0xf3fa5c=_0x349e5e['versionObj'+'ect']['version'];if(_0x5bb3d6['globalId']!==_0xf3fa5c['globalId']||_0x5bb3d6['revision']!==_0xf3fa5c['revision']){_0x5bb3d6['globalId']=_0xf3fa5c['globalId'],_0x5bb3d6['revision']=_0xf3fa5c['revision'];const _0x4a3a2c=_0x349e5e['value'];_0x4a3a2c!=null?this['commitFunc'+'tion'][_0x262523['dataType']](_0x262523,_0x4a3a2c):w['warnOnce']('Shader\x20['+_0x7a8cbe['label']+(']\x20requires'+'\x20uniform\x20[')+_0x262523['scopeId']['name']+(']\x20which\x20ha'+'s\x20not\x20been'+'\x20set,\x20whil'+'e\x20renderin'+'g\x20[')+Q['toString']()+']');}}this['transformF'+'eedbackBuf'+'fer']&&(_0x273523['bindBuffer'+'Base'](_0x273523['TRANSFORM_'+'FEEDBACK_B'+'UFFER'],-0x5*0x475+0x1c9c+0x1*-0x653,this['transformF'+'eedbackBuf'+'fer']['impl']['bufferId']),_0x273523['beginTrans'+'formFeedba'+'ck'](_0x273523['POINTS']));const _0x3de418=this['glPrimitiv'+'e'][_0x20734c['type']],_0x1d8204=_0x20734c['count'];if(_0x20734c['indexed']){w['assert'](_0x12bc7b['device']===this,'The\x20IndexB'+'uffer\x20was\x20'+'not\x20create'+'d\x20using\x20cu'+'rrent\x20Grap'+'hicsDevice');const _0x34b03e=_0x12bc7b['impl']['glFormat'],_0x3aaf1c=_0x20734c['base']*_0x12bc7b['bytesPerIn'+'dex'];_0x1a48b9>-0x21c+0x15f*-0x19+0x2463?_0x273523['drawElemen'+'tsInstance'+'d'](_0x3de418,_0x1d8204,_0x34b03e,_0x3aaf1c,_0x1a48b9):_0x273523['drawElemen'+'ts'](_0x3de418,_0x1d8204,_0x34b03e,_0x3aaf1c);}else{const _0x3996d3=_0x20734c['base'];_0x1a48b9>-0x2458+-0x199*-0xa+0x145e?_0x273523['drawArrays'+'Instanced'](_0x3de418,_0x3996d3,_0x1d8204,_0x1a48b9):_0x273523['drawArrays'](_0x3de418,_0x3996d3,_0x1d8204);}this['transformF'+'eedbackBuf'+'fer']&&(_0x273523['endTransfo'+'rmFeedback'](),_0x273523['bindBuffer'+'Base'](_0x273523['TRANSFORM_'+'FEEDBACK_B'+'UFFER'],-0x2c4+-0x2*0xb71+0x19a6,null)),this['_drawCalls'+'PerFrame']++,this['_primsPerF'+'rame'][_0x20734c['type']]+=_0x20734c['count']*(_0x1a48b9>-0x16*-0x1b4+0x22*0x8+0x1*-0x2687?_0x1a48b9:0xe7*-0x1c+0x1a8d+-0x148);}_0x229cff&&this['clearVerte'+'xBuffer']();}['clear'](_0x308972){const _0x35e528=this['defaultCle'+'arOptions'];_0x308972=_0x308972||_0x35e528;const _0x5cda3c=_0x308972['flags']??_0x35e528['flags'];if(_0x5cda3c!==0xb3c+-0x1a*0x27+-0x62*0x13){const _0x2aeafa=this['gl'];if(_0x5cda3c&jo){const _0x151252=_0x308972['color']??_0x35e528['color'],_0x48e928=_0x151252[-0xd12+0x180e+0x4a*-0x26],_0x413b16=_0x151252[0x1b1*0xb+0x1*-0x1fde+-0x1*-0xd44],_0x1ffc98=_0x151252[-0x260+0x86f+-0x60d],_0xc6e0ce=_0x151252[-0x625+0x6*0x56e+-0x1a6c],_0x284eb5=this['clearColor'];(_0x48e928!==_0x284eb5['r']||_0x413b16!==_0x284eb5['g']||_0x1ffc98!==_0x284eb5['b']||_0xc6e0ce!==_0x284eb5['a'])&&(this['gl']['clearColor'](_0x48e928,_0x413b16,_0x1ffc98,_0xc6e0ce),this['clearColor']['set'](_0x48e928,_0x413b16,_0x1ffc98,_0xc6e0ce)),this['setBlendSt'+'ate'](pt['NOBLEND']);}if(_0x5cda3c&Yo){const _0x106cbd=_0x308972['depth']??_0x35e528['depth'];_0x106cbd!==this['clearDepth']&&(this['gl']['clearDepth'](_0x106cbd),this['clearDepth']=_0x106cbd),this['setDepthSt'+'ate'](Yt['WRITEDEPTH']);}if(_0x5cda3c&ch){const _0x5fbb8a=_0x308972['stencil']??_0x35e528['stencil'];_0x5fbb8a!==this['clearStenc'+'il']&&(this['gl']['clearStenc'+'il'](_0x5fbb8a),this['clearStenc'+'il']=_0x5fbb8a),_0x2aeafa['stencilMas'+'k'](0x25ac*-0x1+0x95*0x3b+0x454),this['stencilWri'+'teMaskFron'+'t']=0x26f5+0xc*0x19d+0x536*-0xb,this['stencilWri'+'teMaskBack']=0xed7+-0x500+-0x8d8;}_0x2aeafa['clear'](this['glClearFla'+'g'][_0x5cda3c]);}}['submit'](){this['gl']['flush']();}['readPixels'](_0x350636,_0x5448ca,_0x3ddd46,_0x4e91a4,_0x448c3b){const _0x5f4949=this['gl'];_0x5f4949['readPixels'](_0x350636,_0x5448ca,_0x3ddd46,_0x4e91a4,_0x5f4949['RGBA'],_0x5f4949['UNSIGNED_B'+'YTE'],_0x448c3b);}['clientWait'+'Async'](_0x18d804,_0x4b9881){const _0xfecb37=this['gl'],_0x189efe=_0xfecb37['fenceSync'](_0xfecb37['SYNC_GPU_C'+'OMMANDS_CO'+'MPLETE'],0x2464+0x153a+-0x19*0x24e);return this['submit'](),new Promise((_0x2d98b5,_0x3ac8b4)=>{function _0xe20c56(){const _0x83954c=_0xfecb37['clientWait'+'Sync'](_0x189efe,_0x18d804,0x1300*-0x1+-0x298+0x1598);_0x83954c===_0xfecb37['TIMEOUT_EX'+'PIRED']?setTimeout(_0xe20c56,_0x4b9881):(_0xfecb37['deleteSync'](_0x189efe),_0x83954c===_0xfecb37['WAIT_FAILE'+'D']?_0x3ac8b4(new Error('webgl\x20clie'+'ntWaitSync'+'\x20sync\x20fail'+'ed')):_0x2d98b5());}_0xe20c56();});}async['readPixels'+'Async'](_0x59f9d5,_0x1a6933,_0x10abe7,_0x1b394a,_0x311db5){var _0x2c4c1d;const _0x54a54a=this['gl'],_0x148e40=(_0x2c4c1d=this['renderTarg'+'et']['colorBuffe'+'r'])==null?void(-0x157d+-0x92f+0x1eac):_0x2c4c1d['impl'],_0x2b9db8=(_0x148e40==null?void(-0x8f3+0x1fd*-0xb+0x1ed2):_0x148e40['_glFormat'])??_0x54a54a['RGBA'],_0x109a9c=(_0x148e40==null?void(0xd*-0x13+0xd1b*-0x1+0x2*0x709):_0x148e40['_glPixelTy'+'pe'])??_0x54a54a['UNSIGNED_B'+'YTE'],_0x1a1376=_0x54a54a['createBuff'+'er']();return _0x54a54a['bindBuffer'](_0x54a54a['PIXEL_PACK'+'_BUFFER'],_0x1a1376),_0x54a54a['bufferData'](_0x54a54a['PIXEL_PACK'+'_BUFFER'],_0x311db5['byteLength'],_0x54a54a['STREAM_REA'+'D']),_0x54a54a['readPixels'](_0x59f9d5,_0x1a6933,_0x10abe7,_0x1b394a,_0x2b9db8,_0x109a9c,-0xea9*0x1+-0x221b+0x1862*0x2),_0x54a54a['bindBuffer'](_0x54a54a['PIXEL_PACK'+'_BUFFER'],null),await this['clientWait'+'Async'](-0x4e4+-0x5*-0x35f+-0xbf7,0x1*0x1d82+0x26ef*-0x1+0x97d),_0x54a54a['bindBuffer'](_0x54a54a['PIXEL_PACK'+'_BUFFER'],_0x1a1376),_0x54a54a['getBufferS'+'ubData'](_0x54a54a['PIXEL_PACK'+'_BUFFER'],0x209*0x4+0x1887*-0x1+0x1063,_0x311db5),_0x54a54a['bindBuffer'](_0x54a54a['PIXEL_PACK'+'_BUFFER'],null),_0x54a54a['deleteBuff'+'er'](_0x1a1376),_0x311db5;}['readTextur'+'eAsync'](_0x42dacd,_0x558f1c,_0x47cf89,_0x4ecf36,_0x299712,_0x1e4874){const _0xc97134=_0x1e4874['face']??-0x2*-0x329+-0x787+0x135,_0x46821f=_0x1e4874['renderTarg'+'et']??new gt({'colorBuffer':_0x42dacd,'depth':!(-0x17ea+-0x15f5+0x2de0),'face':_0xc97134});w['assert'](_0x46821f['colorBuffe'+'r']===_0x42dacd);const _0x440501=new ArrayBuffer(Xi['calcLevelG'+'puSize'](_0x4ecf36,_0x299712,0x2*-0x746+-0xdf*0xf+0x23*0xca,_0x42dacd['_format'])),_0x3a1f81=_0x1e4874['data']??new(my(_0x42dacd['_format']))(_0x440501);return this['setRenderT'+'arget'](_0x46821f),this['initRender'+'Target'](_0x46821f),new Promise((_0x29fd29,_0x52b079)=>{this['readPixels'+'Async'](_0x558f1c,_0x47cf89,_0x4ecf36,_0x299712,_0x3a1f81)['then'](_0x4113d8=>{_0x1e4874['renderTarg'+'et']||_0x46821f['destroy'](),_0x29fd29(_0x4113d8);})['catch'](_0x52b079);});}async['writeTextu'+'reAsync'](_0x1cb00c,_0x4b6307,_0x354a9e,_0x44a646,_0xed5cb1,_0x22af61){const _0x51dee7=this['gl'],_0x191aa3=_0x1cb00c['impl'],_0x17b531=(_0x191aa3==null?void(0x81*-0x4b+0x1ff*-0x3+0x18*0x1d3):_0x191aa3['_glFormat'])??_0x51dee7['RGBA'],_0x1d84d9=(_0x191aa3==null?void(-0x1*-0x1ab1+-0x1*0x26ef+0xc3e):_0x191aa3['_glPixelTy'+'pe'])??_0x51dee7['UNSIGNED_B'+'YTE'],_0x225415=_0x51dee7['createBuff'+'er']();_0x51dee7['bindBuffer'](_0x51dee7['PIXEL_UNPA'+'CK_BUFFER'],_0x225415),_0x51dee7['bufferData'](_0x51dee7['PIXEL_UNPA'+'CK_BUFFER'],_0x22af61,_0x51dee7['STREAM_DRA'+'W']),_0x51dee7['bindTextur'+'e'](_0x51dee7['TEXTURE_2D'],_0x191aa3['_glTexture']),_0x51dee7['texSubImag'+'e2D'](_0x51dee7['TEXTURE_2D'],-0x2039+0x1075+-0x1*-0xfc4,_0x4b6307,_0x354a9e,_0x44a646,_0xed5cb1,_0x17b531,_0x1d84d9,0x2137+0x652*-0x2+0xe5*-0x17),_0x51dee7['bindBuffer'](_0x51dee7['PIXEL_UNPA'+'CK_BUFFER'],null),_0x1cb00c['_needsUplo'+'ad']=!(-0x6d*0x43+-0x943*0x3+0x3851),_0x1cb00c['_mipmapsUp'+'loaded']=!(-0x1a44*0x1+0x361*0x2+0x1383),await this['clientWait'+'Async'](0x3*-0x626+0x1950+-0x6de,0x1*0x22ed+0x44*-0xd+-0x1f69);}['setAlphaTo'+'Coverage'](_0x3d63ec){this['alphaToCov'+'erage']!==_0x3d63ec&&(this['alphaToCov'+'erage']=_0x3d63ec,_0x3d63ec?this['gl']['enable'](this['gl']['SAMPLE_ALP'+'HA_TO_COVE'+'RAGE']):this['gl']['disable'](this['gl']['SAMPLE_ALP'+'HA_TO_COVE'+'RAGE']));}['setTransfo'+'rmFeedback'+'Buffer'](_0x145bcd){if(this['transformF'+'eedbackBuf'+'fer']!==_0x145bcd){this['transformF'+'eedbackBuf'+'fer']=_0x145bcd;const _0x190d7c=this['gl'];_0x145bcd?(this['feedback']||(this['feedback']=_0x190d7c['createTran'+'sformFeedb'+'ack']()),_0x190d7c['bindTransf'+'ormFeedbac'+'k'](_0x190d7c['TRANSFORM_'+'FEEDBACK'],this['feedback'])):_0x190d7c['bindTransf'+'ormFeedbac'+'k'](_0x190d7c['TRANSFORM_'+'FEEDBACK'],null);}}['setRaster'](_0xe4a9d2){this['raster']!==_0xe4a9d2&&(this['raster']=_0xe4a9d2,_0xe4a9d2?this['gl']['disable'](this['gl']['RASTERIZER'+'_DISCARD']):this['gl']['enable'](this['gl']['RASTERIZER'+'_DISCARD']));}['setStencil'+'Test'](_0x3ea1ea){if(this['stencil']!==_0x3ea1ea){const _0x202c04=this['gl'];_0x3ea1ea?_0x202c04['enable'](_0x202c04['STENCIL_TE'+'ST']):_0x202c04['disable'](_0x202c04['STENCIL_TE'+'ST']),this['stencil']=_0x3ea1ea;}}['setStencil'+'Func'](_0x52ff76,_0x3b0387,_0x2d10af){(this['stencilFun'+'cFront']!==_0x52ff76||this['stencilRef'+'Front']!==_0x3b0387||this['stencilMas'+'kFront']!==_0x2d10af||this['stencilFun'+'cBack']!==_0x52ff76||this['stencilRef'+'Back']!==_0x3b0387||this['stencilMas'+'kBack']!==_0x2d10af)&&(this['gl']['stencilFun'+'c'](this['glComparis'+'on'][_0x52ff76],_0x3b0387,_0x2d10af),this['stencilFun'+'cFront']=this['stencilFun'+'cBack']=_0x52ff76,this['stencilRef'+'Front']=this['stencilRef'+'Back']=_0x3b0387,this['stencilMas'+'kFront']=this['stencilMas'+'kBack']=_0x2d10af);}['setStencil'+'FuncFront'](_0x5b36c5,_0x13e349,_0x5bebee){if(this['stencilFun'+'cFront']!==_0x5b36c5||this['stencilRef'+'Front']!==_0x13e349||this['stencilMas'+'kFront']!==_0x5bebee){const _0x4fa25a=this['gl'];_0x4fa25a['stencilFun'+'cSeparate'](_0x4fa25a['FRONT'],this['glComparis'+'on'][_0x5b36c5],_0x13e349,_0x5bebee),this['stencilFun'+'cFront']=_0x5b36c5,this['stencilRef'+'Front']=_0x13e349,this['stencilMas'+'kFront']=_0x5bebee;}}['setStencil'+'FuncBack'](_0x3ec744,_0x75962a,_0xf08889){if(this['stencilFun'+'cBack']!==_0x3ec744||this['stencilRef'+'Back']!==_0x75962a||this['stencilMas'+'kBack']!==_0xf08889){const _0x2ab0cd=this['gl'];_0x2ab0cd['stencilFun'+'cSeparate'](_0x2ab0cd['BACK'],this['glComparis'+'on'][_0x3ec744],_0x75962a,_0xf08889),this['stencilFun'+'cBack']=_0x3ec744,this['stencilRef'+'Back']=_0x75962a,this['stencilMas'+'kBack']=_0xf08889;}}['setStencil'+'Operation'](_0x337816,_0x3fbd2d,_0xc5c0a7,_0x18b644){(this['stencilFai'+'lFront']!==_0x337816||this['stencilZfa'+'ilFront']!==_0x3fbd2d||this['stencilZpa'+'ssFront']!==_0xc5c0a7||this['stencilFai'+'lBack']!==_0x337816||this['stencilZfa'+'ilBack']!==_0x3fbd2d||this['stencilZpa'+'ssBack']!==_0xc5c0a7)&&(this['gl']['stencilOp'](this['glStencilO'+'p'][_0x337816],this['glStencilO'+'p'][_0x3fbd2d],this['glStencilO'+'p'][_0xc5c0a7]),this['stencilFai'+'lFront']=this['stencilFai'+'lBack']=_0x337816,this['stencilZfa'+'ilFront']=this['stencilZfa'+'ilBack']=_0x3fbd2d,this['stencilZpa'+'ssFront']=this['stencilZpa'+'ssBack']=_0xc5c0a7),(this['stencilWri'+'teMaskFron'+'t']!==_0x18b644||this['stencilWri'+'teMaskBack']!==_0x18b644)&&(this['gl']['stencilMas'+'k'](_0x18b644),this['stencilWri'+'teMaskFron'+'t']=_0x18b644,this['stencilWri'+'teMaskBack']=_0x18b644);}['setStencil'+'OperationF'+'ront'](_0x299695,_0x54aaa6,_0x50f9a1,_0xf6a7fa){(this['stencilFai'+'lFront']!==_0x299695||this['stencilZfa'+'ilFront']!==_0x54aaa6||this['stencilZpa'+'ssFront']!==_0x50f9a1)&&(this['gl']['stencilOpS'+'eparate'](this['gl']['FRONT'],this['glStencilO'+'p'][_0x299695],this['glStencilO'+'p'][_0x54aaa6],this['glStencilO'+'p'][_0x50f9a1]),this['stencilFai'+'lFront']=_0x299695,this['stencilZfa'+'ilFront']=_0x54aaa6,this['stencilZpa'+'ssFront']=_0x50f9a1),this['stencilWri'+'teMaskFron'+'t']!==_0xf6a7fa&&(this['gl']['stencilMas'+'kSeparate'](this['gl']['FRONT'],_0xf6a7fa),this['stencilWri'+'teMaskFron'+'t']=_0xf6a7fa);}['setStencil'+'OperationB'+'ack'](_0x3162c9,_0x4348bb,_0x19f73a,_0x105906){(this['stencilFai'+'lBack']!==_0x3162c9||this['stencilZfa'+'ilBack']!==_0x4348bb||this['stencilZpa'+'ssBack']!==_0x19f73a)&&(this['gl']['stencilOpS'+'eparate'](this['gl']['BACK'],this['glStencilO'+'p'][_0x3162c9],this['glStencilO'+'p'][_0x4348bb],this['glStencilO'+'p'][_0x19f73a]),this['stencilFai'+'lBack']=_0x3162c9,this['stencilZfa'+'ilBack']=_0x4348bb,this['stencilZpa'+'ssBack']=_0x19f73a),this['stencilWri'+'teMaskBack']!==_0x105906&&(this['gl']['stencilMas'+'kSeparate'](this['gl']['BACK'],_0x105906),this['stencilWri'+'teMaskBack']=_0x105906);}['setBlendSt'+'ate'](_0x5e4e28){const _0x552f87=this['blendState'];if(!_0x552f87['equals'](_0x5e4e28)){const _0x3e4784=this['gl'],{blend:_0x298675,colorOp:_0x85bf63,alphaOp:_0x5edd43,colorSrcFactor:_0x252d50,colorDstFactor:_0x3738b9,alphaSrcFactor:_0x24777c,alphaDstFactor:_0x2be777}=_0x5e4e28;if(_0x552f87['blend']!==_0x298675&&(_0x298675?_0x3e4784['enable'](_0x3e4784['BLEND']):_0x3e4784['disable'](_0x3e4784['BLEND'])),_0x552f87['colorOp']!==_0x85bf63||_0x552f87['alphaOp']!==_0x5edd43){const _0x3003e9=this['glBlendEqu'+'ation'];_0x3e4784['blendEquat'+'ionSeparat'+'e'](_0x3003e9[_0x85bf63],_0x3003e9[_0x5edd43]);}(_0x552f87['colorSrcFa'+'ctor']!==_0x252d50||_0x552f87['colorDstFa'+'ctor']!==_0x3738b9||_0x552f87['alphaSrcFa'+'ctor']!==_0x24777c||_0x552f87['alphaDstFa'+'ctor']!==_0x2be777)&&_0x3e4784['blendFuncS'+'eparate'](this['glBlendFun'+'ctionColor'][_0x252d50],this['glBlendFun'+'ctionColor'][_0x3738b9],this['glBlendFun'+'ctionAlpha'][_0x24777c],this['glBlendFun'+'ctionAlpha'][_0x2be777]),_0x552f87['allWrite']!==_0x5e4e28['allWrite']&&this['gl']['colorMask'](_0x5e4e28['redWrite'],_0x5e4e28['greenWrite'],_0x5e4e28['blueWrite'],_0x5e4e28['alphaWrite']),_0x552f87['copy'](_0x5e4e28);}}['setBlendCo'+'lor'](_0x555849,_0x4a3a4a,_0x5bb77c,_0x4d4fac){const _0x5c8154=this['blendColor'];(_0x555849!==_0x5c8154['r']||_0x4a3a4a!==_0x5c8154['g']||_0x5bb77c!==_0x5c8154['b']||_0x4d4fac!==_0x5c8154['a'])&&(this['gl']['blendColor'](_0x555849,_0x4a3a4a,_0x5bb77c,_0x4d4fac),_0x5c8154['set'](_0x555849,_0x4a3a4a,_0x5bb77c,_0x4d4fac));}['setStencil'+'State'](_0x1376a4,_0x153a54){_0x1376a4||_0x153a54?(this['setStencil'+'Test'](!(0x239e*-0x1+-0x125*0x22+-0x3ba*-0x14)),_0x1376a4===_0x153a54?(this['setStencil'+'Func'](_0x1376a4['func'],_0x1376a4['ref'],_0x1376a4['readMask']),this['setStencil'+'Operation'](_0x1376a4['fail'],_0x1376a4['zfail'],_0x1376a4['zpass'],_0x1376a4['writeMask'])):(_0x1376a4??(_0x1376a4=pi['DEFAULT']),this['setStencil'+'FuncFront'](_0x1376a4['func'],_0x1376a4['ref'],_0x1376a4['readMask']),this['setStencil'+'OperationF'+'ront'](_0x1376a4['fail'],_0x1376a4['zfail'],_0x1376a4['zpass'],_0x1376a4['writeMask']),_0x153a54??(_0x153a54=pi['DEFAULT']),this['setStencil'+'FuncBack'](_0x153a54['func'],_0x153a54['ref'],_0x153a54['readMask']),this['setStencil'+'OperationB'+'ack'](_0x153a54['fail'],_0x153a54['zfail'],_0x153a54['zpass'],_0x153a54['writeMask']))):this['setStencil'+'Test'](!(-0x14ce+0x25fa+0x1*-0x112b));}['setDepthSt'+'ate'](_0xb2940e){const _0xc650d=this['depthState'];if(!_0xc650d['equals'](_0xb2940e)){const _0x523444=this['gl'],_0x70b9aa=_0xb2940e['write'];_0xc650d['write']!==_0x70b9aa&&_0x523444['depthMask'](_0x70b9aa);let {func:_0x193603,test:_0x5f489c}=_0xb2940e;!_0x5f489c&&_0x70b9aa&&(_0x5f489c=!(-0x11*-0xaf+0x1a3*0x12+-0x1*0x2915),_0x193603=Wi),_0xc650d['func']!==_0x193603&&_0x523444['depthFunc'](this['glComparis'+'on'][_0x193603]),_0xc650d['test']!==_0x5f489c&&(_0x5f489c?_0x523444['enable'](_0x523444['DEPTH_TEST']):_0x523444['disable'](_0x523444['DEPTH_TEST']));const {depthBias:_0x47e293,depthBiasSlope:_0x25425b}=_0xb2940e;_0x47e293||_0x25425b?(this['depthBiasE'+'nabled']||(this['depthBiasE'+'nabled']=!(0x1a72+0x581*0x2+0x95d*-0x4),this['gl']['enable'](this['gl']['POLYGON_OF'+'FSET_FILL'])),_0x523444['polygonOff'+'set'](_0x25425b,_0x47e293)):this['depthBiasE'+'nabled']&&(this['depthBiasE'+'nabled']=!(0x21d6+0x1a55+-0x3c2a),this['gl']['disable'](this['gl']['POLYGON_OF'+'FSET_FILL'])),_0xc650d['copy'](_0xb2940e);}}['setCullMod'+'e'](_0x2f4d28){if(this['cullMode']!==_0x2f4d28){if(_0x2f4d28===bt)this['gl']['disable'](this['gl']['CULL_FACE']);else{this['cullMode']===bt&&this['gl']['enable'](this['gl']['CULL_FACE']);const _0x50aad4=this['glCull'][_0x2f4d28];this['cullFace']!==_0x50aad4&&(this['gl']['cullFace'](_0x50aad4),this['cullFace']=_0x50aad4);}this['cullMode']=_0x2f4d28;}}['setShader'](_0x3f7d03,_0x1f6c60=!(0x1250+0x4d*0x1+-0x129c)){_0x3f7d03!==this['shader']&&(this['shader']=_0x3f7d03,this['shaderAsyn'+'cCompile']=_0x1f6c60,this['shaderVali'+'d']=void(-0x1*0x2197+-0x95*0x5+0x2480),this['_shaderSwi'+'tchesPerFr'+'ame']++);}['activateSh'+'ader'](){const {shader:_0x51e2af}=this,{impl:_0x1daf5a}=_0x51e2af;this['shaderVali'+'d']===void(-0x1*-0x12ed+0xc5b*0x1+-0x1f48)&&(_0x51e2af['failed']?this['shaderVali'+'d']=!(-0xd78+-0xdd3*-0x2+0x13*-0xbf):_0x51e2af['ready']||(this['shaderAsyn'+'cCompile']?_0x1daf5a['isLinked'](this)?_0x1daf5a['finalize'](this,_0x51e2af)||(_0x51e2af['failed']=!(0x3*-0xb32+-0xd0b+0x1*0x2ea1),this['shaderVali'+'d']=!(-0x5c2+-0x7*0x3b+0x760*0x1)):this['shaderVali'+'d']=!(-0x6*0x5b8+0x5b+0x21f6):_0x1daf5a['finalize'](this,_0x51e2af)||(_0x51e2af['failed']=!(-0x37a+-0x1*0x15ed+0x1967),this['shaderVali'+'d']=!(0x1b68+-0x10ea*-0x1+0x5*-0x8dd)))),this['shaderVali'+'d']===void(0x1013+0x481*-0x6+-0x1*-0xaf3)&&(this['gl']['useProgram'](_0x1daf5a['glProgram']),this['shaderVali'+'d']=!(0xcb0+0xebd+-0x1b6d));}['clearVerte'+'xArrayObje'+'ctCache'](){const _0x2eb60a=this['gl'];this['_vaoMap']['forEach']((_0x3468b9,_0x369e9d,_0x30340c)=>{_0x2eb60a['deleteVert'+'exArray'](_0x3468b9);}),this['_vaoMap']['clear']();}set['fullscreen'](_0x5a0204){_0x5a0204?this['gl']['canvas']['requestFul'+'lscreen']():document['exitFullsc'+'reen']();}get['fullscreen'](){return!!document['fullscreen'+'Element'];}['debugLoseC'+'ontext'](_0x5dee60=0x15d*-0x13+-0x5*0x4d5+0x3274){const _0x1d6c81=this['gl']['getExtensi'+'on']('WEBGL_lose'+'_context');_0x1d6c81['loseContex'+'t'](),setTimeout(()=>_0x1d6c81['restoreCon'+'text'](),_0x5dee60);}}let nw=0x10a2*0x2+-0x10e1+-0x1063;class br{constructor(_0x13ab47,_0x28feeb,_0x538f05,_0x12063c=ms,_0x3c0986,_0x46356c){this['device']=_0x13ab47,this['format']=_0x28feeb,this['numIndices']=_0x538f05,this['usage']=_0x12063c,this['id']=nw++,this['impl']=_0x13ab47['createInde'+'xBufferImp'+'l'](this,_0x46356c);const _0x250229=hT[_0x28feeb];this['bytesPerIn'+'dex']=_0x250229,this['numBytes']=this['numIndices']*_0x250229,_0x3c0986?this['setData'](_0x3c0986):this['storage']=new ArrayBuffer(this['numBytes']),this['adjustVram'+'SizeTracki'+'ng'](_0x13ab47['_vram'],this['numBytes']),this['device']['buffers']['push'](this);}['destroy'](){const _0x28182c=this['device'],_0x449329=_0x28182c['buffers']['indexOf'](this);_0x449329!==-(0x14db+0x406+0x2*-0xc70)&&_0x28182c['buffers']['splice'](_0x449329,-0x1*0x1744+-0x34f*-0x1+0x13f6),this['device']['indexBuffe'+'r']===this&&(this['device']['indexBuffe'+'r']=null),this['impl']['initialize'+'d']&&(this['impl']['destroy'](_0x28182c),this['adjustVram'+'SizeTracki'+'ng'](_0x28182c['_vram'],-this['storage']['byteLength']));}['adjustVram'+'SizeTracki'+'ng'](_0x3e15f3,_0x873a75){w['trace'](j0,this['id']+'\x20size:\x20'+_0x873a75+'\x20vram.ib:\x20'+_0x3e15f3['ib']+'\x20=>\x20'+(_0x3e15f3['ib']+_0x873a75)),_0x3e15f3['ib']+=_0x873a75;}['loseContex'+'t'](){this['impl']['loseContex'+'t']();}['getFormat'](){return this['format'];}['getNumIndi'+'ces'](){return this['numIndices'];}['lock'](){return this['storage'];}['unlock'](){this['impl']['unlock'](this);}['setData'](_0x502140){return _0x502140['byteLength']!==this['numBytes']?(w['error']('IndexBuffe'+'r:\x20wrong\x20i'+'nitial\x20dat'+'a\x20size:\x20ex'+'pected\x20'+this['numBytes']+',\x20got\x20'+_0x502140['byteLength']),!(-0x11*-0xc5+-0x9a8+-0x1b6*0x2)):(this['storage']=_0x502140,this['unlock'](),!(-0x95f*0x4+0xc5a+0x1922));}['_lockTyped'+'Array'](){const _0x2ced9b=this['lock']();return this['format']===wr?new Uint32Array(_0x2ced9b):this['format']===Yi?new Uint16Array(_0x2ced9b):new Uint8Array(_0x2ced9b);}['writeData'](_0x280608,_0x1112cc){const _0x5354ba=this['_lockTyped'+'Array']();if(_0x280608['length']>_0x1112cc){if(ArrayBuffer['isView'](_0x280608))_0x280608=_0x280608['subarray'](-0x74c*-0x5+0x103f+-0x34bb,_0x1112cc),_0x5354ba['set'](_0x280608);else{for(let _0x4f8440=0x3*-0xa94+-0x8*0x4a0+0x44bc;_0x4f8440<_0x1112cc;_0x4f8440++)_0x5354ba[_0x4f8440]=_0x280608[_0x4f8440];}}else _0x5354ba['set'](_0x280608);this['unlock']();}['readData'](_0x4e8d5d){const _0x2b309e=this['_lockTyped'+'Array'](),_0x3e92be=this['numIndices'];if(ArrayBuffer['isView'](_0x4e8d5d))_0x4e8d5d['set'](_0x2b309e);else{_0x4e8d5d['length']=0x2df*-0x3+-0x168f+0x1c*0x11d;for(let _0x4ae108=-0x2055+-0x2177+0x41cc;_0x4ae108<_0x3e92be;_0x4ae108++)_0x4e8d5d[_0x4ae108]=_0x2b309e[_0x4ae108];}return _0x3e92be;}}class ow{constructor(){h(this,'clearValue',new ie(-0x6a7+-0x5*0x241+-0x4*-0x47b,0x454*0x2+0x1*0x2701+-0x2fa9,0x13b9+0x3*0x36c+0x355*-0x9,0x3*-0xc8d+0x5a2+0x2006)),h(this,'clearValue'+'Linear',new ie(0x179e+-0x8*0xc8+-0x115e,0x131c+-0x1*-0x1795+0x1*-0x2ab1,0x43*-0x1a+0x388+0x346,0x1*0x1756+-0x12cd*-0x1+-0x2a22)),h(this,'clear',!(0xbed+-0x787+-0x465)),h(this,'store',!(0x7b*-0xb+-0x26b6+0x2c00)),h(this,'resolve',!(0x215*-0x4+0xa79+0x1*-0x225)),h(this,'genMipmaps',!(0x12b*0xd+-0x1*-0x1d29+0x2c57*-0x1));}}class lw{constructor(){h(this,'clearDepth'+'Value',0x1b*0x41+-0x1*-0x57b+-0xc55),h(this,'clearStenc'+'ilValue',0x3*-0xb8f+-0x1c65+0x3f12),h(this,'clearDepth',!(0x1ab8+0x1*0x1fba+0x3*-0x137b)),h(this,'clearStenc'+'il',!(-0x14f9+0x8*0x2fa+-0x2d6)),h(this,'storeDepth',!(-0x5*-0x1fb+-0xdfb+-0x5f*-0xb)),h(this,'resolveDep'+'th',!(-0x15bb*0x1+-0x1e8+-0x4*-0x5e9)),h(this,'storeStenc'+'il',!(0xb25+0x2099+-0x2bbd));}}class ys{constructor(_0x527e6d){h(this,'_name'),h(this,'device'),h(this,'_enabled',!(-0xb01*0x3+-0x1*-0x25d7+0x19c*-0x3)),h(this,'_skipStart',!(-0xb*-0x20e+0x3*-0x108+0x1*-0x1381)),h(this,'_skipEnd',!(0xda3*-0x1+0x1f0+-0x2ed*-0x4)),h(this,'executeEna'+'bled',!(0x6*-0x85+0x1751+-0x1433)),h(this,'renderTarg'+'et'),h(this,'_options'),h(this,'samples',0x206a*0x1+-0xc4e+-0x141c),h(this,'colorArray'+'Ops',[]),h(this,'depthStenc'+'ilOps'),h(this,'requiresCu'+'bemaps',!(0x14ae+0x1*-0x1385+0x1b*-0xb)),h(this,'fullSizeCl'+'earRect',!(0x5*-0x473+-0x2*0x925+-0xd83*-0x3)),h(this,'beforePass'+'es',[]),h(this,'afterPasse'+'s',[]),(w['assert'](_0x527e6d),this['device']=_0x527e6d);}get['colorOps'](){return this['colorArray'+'Ops'][-0xd*0x274+0x155c+0xa88];}set['name'](_0x3b6f73){this['_name']=_0x3b6f73;}get['name'](){return this['_name']||(this['_name']=this['constructo'+'r']['name']),this['_name'];}set['scaleX'](_0x130daa){w['assert'](this['_options'],'The\x20render'+'\x20pass\x20need'+'s\x20to\x20be\x20in'+'itialized\x20'+'first.'),this['_options']['scaleX']=_0x130daa;}get['scaleX'](){return this['_options']['scaleX'];}set['scaleY'](_0xf1ea6){w['assert'](this['_options'],'The\x20render'+'\x20pass\x20need'+'s\x20to\x20be\x20in'+'itialized\x20'+'first.'),this['_options']['scaleY']=_0xf1ea6;}get['scaleY'](){return this['_options']['scaleY'];}set['options'](_0x5bda7f){this['_options']=_0x5bda7f,_0x5bda7f&&(this['scaleX']=this['scaleX']??-0x1bf7*-0x1+-0x334+0xc61*-0x2,this['scaleY']=this['scaleY']??-0x347*0x9+-0x12b5*-0x1+0xacb*0x1);}get['options'](){return this['_options'];}['init'](_0x5c63b9=null,_0x47b34e){this['options']=_0x47b34e,this['renderTarg'+'et']=_0x5c63b9,this['samples']=Math['max'](this['renderTarg'+'et']?this['renderTarg'+'et']['samples']:this['device']['samples'],-0x316*-0x3+-0x12cf+0x98e),this['allocateAt'+'tachments'](),this['postInit']();}['allocateAt'+'tachments'](){var _0x23a368,_0x3febe4,_0x2ffbdb,_0x5dd707;const _0x48c986=this['renderTarg'+'et'];this['depthStenc'+'ilOps']=new lw(),_0x48c986!=null&&_0x48c986['depthBuffe'+'r']&&(this['depthStenc'+'ilOps']['storeDepth']=!(0x2*0x4a9+0x2c*-0xc+-0x1*0x742));const _0x4cc3fd=_0x48c986?((_0x23a368=_0x48c986['_colorBuff'+'ers'])==null?void(0x1*0x52+-0xd3b+0xce9):_0x23a368['length'])??0x3*0xc31+0xced*0x3+0x4b5a*-0x1:0xf03+-0x128e+0x38c;this['colorArray'+'Ops']['length']=-0x1*0x237b+-0x18c9+0x227*0x1c;for(let _0x587b34=-0x1dac+-0x1025*-0x1+0xd87;_0x587b34<_0x4cc3fd;_0x587b34++){const _0x126944=new ow();this['colorArray'+'Ops'][_0x587b34]=_0x126944,this['samples']===-0x177c+0x3a0*0xa+-0xcc3&&(_0x126944['store']=!(-0x557+-0x283+0x7da),_0x126944['resolve']=!(0x2*-0x96+0x1c86*0x1+-0x1b59));const _0x5b2c37=(_0x2ffbdb=(_0x3febe4=this['renderTarg'+'et'])==null?void(-0x1f42+-0x1c8c+0x3bce):_0x3febe4['_colorBuff'+'ers'])==null?void(0x28*-0xa+0x9*0x21e+-0x117e):_0x2ffbdb[_0x587b34];if((_0x5dd707=this['renderTarg'+'et'])!=null&&_0x5dd707['mipmaps']&&(_0x5b2c37!=null&&_0x5b2c37['mipmaps'])){const _0x2b6fd7=dn(_0x5b2c37['_format']);_0x126944['genMipmaps']=!_0x2b6fd7;}}}['destroy'](){}['postInit'](){}['frameUpdat'+'e'](){if(this['_options']&&this['renderTarg'+'et']){const _0x1721f9=this['_options']['resizeSour'+'ce']??this['device']['backBuffer'],_0x14b949=Math['floor'](_0x1721f9['width']*this['scaleX']),_0x37103a=Math['floor'](_0x1721f9['height']*this['scaleY']);this['renderTarg'+'et']['resize'](_0x14b949,_0x37103a);}}['before'](){}['execute'](){}['after'](){}['onEnable'](){}['onDisable'](){}set['enabled'](_0x516cc9){this['_enabled']!==_0x516cc9&&(this['_enabled']=_0x516cc9,_0x516cc9?this['onEnable']():this['onDisable']());}get['enabled'](){return this['_enabled'];}['setClearCo'+'lor'](_0x51c223){const _0x45a125=this['colorArray'+'Ops']['length'];for(let _0x142cb4=0x3*-0xbe6+-0x15d5+0x1*0x3987;_0x142cb4<_0x45a125;_0x142cb4++){const _0x5e5438=this['colorArray'+'Ops'][_0x142cb4];_0x51c223&&(_0x5e5438['clearValue']['copy'](_0x51c223),_0x5e5438['clearValue'+'Linear']['linear'](_0x51c223)),_0x5e5438['clear']=!!_0x51c223;}}['setClearDe'+'pth'](_0x1a54a1){_0x1a54a1&&(this['depthStenc'+'ilOps']['clearDepth'+'Value']=_0x1a54a1),this['depthStenc'+'ilOps']['clearDepth']=_0x1a54a1!==void(0x144+-0x39d*0x5+-0x17*-0xbb);}['setClearSt'+'encil'](_0x77ff54){_0x77ff54&&(this['depthStenc'+'ilOps']['clearStenc'+'ilValue']=_0x77ff54),this['depthStenc'+'ilOps']['clearStenc'+'il']=_0x77ff54!==void(0xc*-0x89+0x1*0x37a+0x2f2);}['render'](){if(this['enabled']){const _0x5cece3=this['device'],_0x4fd0f2=this['renderTarg'+'et']!==void(0x9ab*-0x3+0x740+0x15c1);w['call'](()=>{this['log'](_0x5cece3,_0x5cece3['renderPass'+'Index']);}),this['before'](),this['executeEna'+'bled']&&(_0x4fd0f2&&!this['_skipStart']&&_0x5cece3['startRende'+'rPass'](this),this['execute'](),_0x4fd0f2&&!this['_skipEnd']&&_0x5cece3['endRenderP'+'ass'](this)),this['after'](),_0x5cece3['renderPass'+'Index']++;}}['log'](_0x10c845,_0x203a81=0x165b+-0x668+-0x3*0x551){var _0x4cc4b6,_0xc339f0,_0x4e41dc;if(mi['get'](Pm)||mi['get'](cn)){const _0x5d282e=this['renderTarg'+'et']??(this['renderTarg'+'et']===null?_0x10c845['backBuffer']:null),_0x53a6d0=!!(_0x5d282e!=null&&_0x5d282e['impl']['assignedCo'+'lorTexture'])||(_0x5d282e==null?void(-0xc*-0x22e+0x98a*0x2+-0x2d3c):_0x5d282e['impl']['suppliedCo'+'lorFramebu'+'ffer'])!==void(-0x1*0x2658+0xdf2+0x6*0x411),_0x1f5e98=((_0x4cc4b6=_0x5d282e==null?void(0x1dae+-0x4*0x70+-0x1bee):_0x5d282e['_colorBuff'+'ers'])==null?void(-0x2314+0x1*-0x19a8+-0x4*-0xf2f):_0x4cc4b6['length'])??(_0x53a6d0?0x2*0xb3d+-0x2059+0x9e0:0x214b+0x102+0x3*-0xb6f),_0xd01c81=_0x5d282e==null?void(0x1ef7*0x1+0x7fa*0x4+-0x5*0xc93):_0x5d282e['depth'],_0x3a96ed=_0x5d282e==null?void(0x11ef+-0x1cb8*-0x1+-0x3*0xf8d):_0x5d282e['stencil'],_0xc2ec8e=_0x5d282e==null?void(-0x13f3+-0x1e2*0x2+0xd*0x1d3):_0x5d282e['mipLevel'],_0x477d09=_0x5d282e?'\x20RT:\x20'+(_0x5d282e?_0x5d282e['name']:'NULL')+'\x20'+(_0x1f5e98>-0x51d+0x2325+-0x1e08?'[Color'+(_0x1f5e98>0xa*-0x347+-0x1*-0x1013+0x85a*0x2?'\x20x\x20'+_0x1f5e98:'')+']':'')+(_0xd01c81?'[Depth]':'')+(_0x3a96ed?'[Stencil]':'')+'\x20'+_0x5d282e['width']+'\x20x\x20'+_0x5d282e['height']+(this['samples']>0x1b34+0x1461+-0x2f95?'\x20samples:\x20'+this['samples']:'')+(_0xc2ec8e>0x1a45*-0x1+0x10df+0x966*0x1?'\x20mipLevel:'+'\x20'+_0xc2ec8e:''):'',_0x1023c4=this['_skipStart']?'++':_0x203a81['toString']()['padEnd'](-0x459+0x244f+-0x1ff4,'\x20');w['trace'](Pm,_0x1023c4+':\x20'+this['name']['padEnd'](-0x8b+0xa2a+-0x98b*0x1,'\x20')+(this['executeEna'+'bled']?'':'\x20DISABLED\x20')+_0x477d09['padEnd'](-0x2*-0xc18+-0x1939*0x1+0x127));for(let _0x2f0985=0x85e+0x135b*0x1+-0x97*0x2f;_0x2f0985<_0x1f5e98;_0x2f0985++){const _0x2b8e39=this['colorArray'+'Ops'][_0x2f0985],_0x160bb9=(_0xc339f0=Nt['get'](_0x53a6d0?_0x10c845['backBuffer'+'Format']:_0x5d282e['getColorBu'+'ffer'](_0x2f0985)['format']))==null?void(0x195d+0x872+-0x21cf*0x1):_0xc339f0['name'];w['trace'](cn,'\x20\x20\x20\x20color['+_0x2f0985+']:\x20'+(_0x2b8e39['clear']?'clear':'load')+'->'+(_0x2b8e39['store']?'store':'discard')+'\x20'+(_0x2b8e39['resolve']?'resolve\x20':'')+(_0x2b8e39['genMipmaps']?'mipmaps\x20':'')+'\x20[format:\x20'+_0x160bb9+']\x20'+(_0x2b8e39['clear']?'[clear:\x20'+_0x2b8e39['clearValue']['toString'](!(0x412*0x1+-0x4*-0x9ad+0x2*-0x1563),!(-0xc6d*-0x1+-0xd*0x59+-0x7e8))+']':''));}if(this['depthStenc'+'ilOps']){const _0x1f510f=''+(_0x5d282e['depthBuffe'+'r']?'\x20[format:\x20'+((_0x4e41dc=Nt['get'](_0x5d282e['depthBuffe'+'r']['format']))==null?void(-0x1*-0x246c+-0x2c*-0x3d+-0x98*0x4f):_0x4e41dc['name'])+']':'');_0xd01c81&&w['trace'](cn,'\x20\x20\x20\x20depthO'+'ps:\x20'+(this['depthStenc'+'ilOps']['clearDepth']?'clear':'load')+'->'+(this['depthStenc'+'ilOps']['storeDepth']?'store':'discard')+(this['depthStenc'+'ilOps']['resolveDep'+'th']?'\x20resolve':'')+_0x1f510f+(this['depthStenc'+'ilOps']['clearDepth']?'\x20[clear:\x20'+this['depthStenc'+'ilOps']['clearDepth'+'Value']+']':'')),_0x3a96ed&&w['trace'](cn,'\x20\x20\x20\x20stencO'+'ps:\x20'+(this['depthStenc'+'ilOps']['clearStenc'+'il']?'clear':'load')+'->'+(this['depthStenc'+'ilOps']['storeStenc'+'il']?'store':'discard')+_0x1f510f+(this['depthStenc'+'ilOps']['clearStenc'+'il']?'\x20[clear:\x20'+this['depthStenc'+'ilOps']['clearStenc'+'ilValue']+']':''));}}}}function cw(_0x5e664d){this['array'][this['index']]=_0x5e664d;}function hw(_0x4d1bef,_0x39dba7){this['array'][this['index']]=_0x4d1bef,this['array'][this['index']+(0x17ea*-0x1+-0x12e9+0x156a*0x2)]=_0x39dba7;}function dw(_0x5dae86,_0x3a0429,_0x554303){this['array'][this['index']]=_0x5dae86,this['array'][this['index']+(-0x4de+-0x1*0x26f+0x74e)]=_0x3a0429,this['array'][this['index']+(0x80e*-0x3+0xf88+-0x4*-0x229)]=_0x554303;}function fw(_0xcb1eed,_0x1b0eee,_0x4a4fd4,_0x112a50){this['array'][this['index']]=_0xcb1eed,this['array'][this['index']+(0x701+-0x19*0x111+-0x2cf*-0x7)]=_0x1b0eee,this['array'][this['index']+(-0x233d+0x2d7+0x2068)]=_0x4a4fd4,this['array'][this['index']+(-0x4a3+-0xba1+-0x9*-0x1cf)]=_0x112a50;}function uw(_0x33a796,_0x5b1dba,_0x37e049){this['array'][_0x33a796]=_0x5b1dba[_0x37e049];}function pw(_0x57002b,_0x367d78,_0x1c3aed){this['array'][_0x57002b]=_0x367d78[_0x1c3aed],this['array'][_0x57002b+(0x224f+-0x1a4+-0x20aa)]=_0x367d78[_0x1c3aed+(-0x1296+-0x320+0x15b7)];}function mw(_0x441ff5,_0x56891f,_0x687478){this['array'][_0x441ff5]=_0x56891f[_0x687478],this['array'][_0x441ff5+(0xd*0x1f1+0x1a51+-0x338d)]=_0x56891f[_0x687478+(0x24bd+-0xcf4+-0x17c8)],this['array'][_0x441ff5+(-0x6*0x3bb+-0x260e+-0xa13*-0x6)]=_0x56891f[_0x687478+(0x1*-0x18da+0x28e+-0x476*-0x5)];}function _w(_0x3905e8,_0x50770e,_0x5cb9e0){this['array'][_0x3905e8]=_0x50770e[_0x5cb9e0],this['array'][_0x3905e8+(0x1*-0xdfd+0x4a*0x40+0x482*-0x1)]=_0x50770e[_0x5cb9e0+(-0xc92+-0x1ea*-0xd+0x17*-0x89)],this['array'][_0x3905e8+(-0xe7e+-0x1abf+0x293f)]=_0x50770e[_0x5cb9e0+(-0x57*0x25+-0x2d9*0xb+0x2be8)],this['array'][_0x3905e8+(0x2e*-0x6c+0x213a+-0xdcf)]=_0x50770e[_0x5cb9e0+(0x1*0x22ec+-0x2022+-0x2c7)];}function gw(_0x5776bb,_0xcf3034,_0x803321){_0xcf3034[_0x803321]=this['array'][_0x5776bb];}function Sw(_0x169fce,_0x2898b3,_0x320ba0){_0x2898b3[_0x320ba0]=this['array'][_0x169fce],_0x2898b3[_0x320ba0+(0x18d8+-0x243b+-0x3cc*-0x3)]=this['array'][_0x169fce+(-0x1526+-0x25cc+0x3af3)];}function yw(_0xcb917b,_0x15125d,_0x2341f5){_0x15125d[_0x2341f5]=this['array'][_0xcb917b],_0x15125d[_0x2341f5+(-0xb7*-0x15+-0x1*0x101+0xe01*-0x1)]=this['array'][_0xcb917b+(-0x1d70+0x2579*-0x1+0x42ea)],_0x15125d[_0x2341f5+(0xc5c+-0x17b8+0xc2*0xf)]=this['array'][_0xcb917b+(-0x2586+0x1*-0x205e+0x45e6)];}function vw(_0xec436,_0x2130fe,_0x153f43){_0x2130fe[_0x153f43]=this['array'][_0xec436],_0x2130fe[_0x153f43+(0x105b+-0x1*-0xbb6+-0x1c10)]=this['array'][_0xec436+(0x19*-0x10d+-0x1df5*-0x1+-0x29*0x17)],_0x2130fe[_0x153f43+(-0x16f9+0x1*-0x283+0x197e*0x1)]=this['array'][_0xec436+(-0x20*0x1f+0x133e+-0xf5c)],_0x2130fe[_0x153f43+(0x1495+-0x621*0x4+0x3f2)]=this['array'][_0xec436+(0x1c3a+0x580+-0x7*0x4d1)];}class xw{constructor(_0x55fdbb,_0x5ccd49,_0x2ccf70){switch(this['index']=0x2545+0xec+-0x2631,this['numCompone'+'nts']=_0x5ccd49['numCompone'+'nts'],_0x2ccf70['interleave'+'d']?this['array']=new wn[_0x5ccd49['dataType']](_0x55fdbb,_0x5ccd49['offset']):this['array']=new wn[_0x5ccd49['dataType']](_0x55fdbb,_0x5ccd49['offset'],_0x2ccf70['vertexCoun'+'t']*_0x5ccd49['numCompone'+'nts']),this['stride']=_0x5ccd49['stride']/this['array']['constructo'+'r']['BYTES_PER_'+'ELEMENT'],_0x5ccd49['numCompone'+'nts']){case-0x6f+-0x22de*-0x1+-0x226e:this['set']=cw,this['getToArray']=gw,this['setFromArr'+'ay']=uw;break;case-0x179d+-0x1e2*0x2+-0x29*-0xab:this['set']=hw,this['getToArray']=Sw,this['setFromArr'+'ay']=pw;break;case 0xe35*-0x2+0xe87+-0x4a2*-0x3:this['set']=dw,this['getToArray']=yw,this['setFromArr'+'ay']=mw;break;case-0x304*-0x4+-0x1774+0xb68:this['set']=fw,this['getToArray']=vw,this['setFromArr'+'ay']=_w;break;}}['get'](_0x414f6f){return this['array'][this['index']+_0x414f6f];}['set'](_0x4d26bb,_0x1c10c3,_0x321253,_0x76b1c3){}['getToArray'](_0x5d3e33,_0x49b0da,_0x981d30){}['setFromArr'+'ay'](_0x53b291,_0x4a4cc4,_0x39749c){}}class Uo{constructor(_0x352f9c){this['vertexBuff'+'er']=_0x352f9c,this['vertexForm'+'atSize']=_0x352f9c['getFormat']()['size'],this['buffer']=this['vertexBuff'+'er']['lock'](),this['accessors']=[],this['element']={};const _0x28d363=this['vertexBuff'+'er']['getFormat']();for(let _0x3aa25c=0x20b2+0x619+-0x26cb;_0x3aa25c<_0x28d363['elements']['length'];_0x3aa25c++){const _0x74473a=_0x28d363['elements'][_0x3aa25c];this['accessors'][_0x3aa25c]=new xw(this['buffer'],_0x74473a,_0x28d363),this['element'][_0x74473a['name']]=this['accessors'][_0x3aa25c];}}['next'](_0x32b9a5=-0x1970+-0x3*-0x77d+0x3*0xfe){let _0xa3e7cc=0x1f*-0x139+-0x142*0x13+-0x1*-0x3dcd;const _0x5826fd=this['accessors'],_0x3744c1=this['accessors']['length'];for(;_0xa3e7cc<_0x3744c1;){const _0x322922=_0x5826fd[_0xa3e7cc++];_0x322922['index']+=_0x32b9a5*_0x322922['stride'];}}['end'](){this['vertexBuff'+'er']['unlock']();}['writeData'](_0xdf0a35,_0x41ac61,_0x5e4f04){const _0x520fc4=this['element'][_0xdf0a35];if(_0x520fc4){_0x5e4f04>this['vertexBuff'+'er']['numVertice'+'s']&&(w['error']('NumVertice'+'s\x20provided'+'\x20to\x20setDat'+'a:\x20'+_0x5e4f04+('\x20is\x20larger'+'\x20than\x20spac'+'e\x20in\x20Verte'+'xBuffer:\x20')+this['vertexBuff'+'er']['numVertice'+'s']),_0x5e4f04=this['vertexBuff'+'er']['numVertice'+'s']);const _0x4fe3cf=_0x520fc4['numCompone'+'nts'];if(this['vertexBuff'+'er']['getFormat']()['interleave'+'d']){let _0x14544d=-0xe54+0x33*0x9d+-0x10f3*0x1;for(let _0x546d8f=-0x29*0xd6+-0x244f+0x4695*0x1;_0x546d8f<_0x5e4f04;_0x546d8f++)_0x520fc4['setFromArr'+'ay'](_0x14544d,_0x41ac61,_0x546d8f*_0x4fe3cf),_0x14544d+=_0x520fc4['stride'];}else{if(_0x41ac61['length']>_0x5e4f04*_0x4fe3cf){const _0x4b367e=_0x5e4f04*_0x4fe3cf;if(ArrayBuffer['isView'](_0x41ac61))_0x41ac61=_0x41ac61['subarray'](0xc36+0xa46+0x4*-0x59f,_0x4b367e),_0x520fc4['array']['set'](_0x41ac61);else{for(let _0x3c8f38=0x17*0x42+0x23b3+-0x29a1;_0x3c8f38<_0x4b367e;_0x3c8f38++)_0x520fc4['array'][_0x3c8f38]=_0x41ac61[_0x3c8f38];}}else _0x520fc4['array']['set'](_0x41ac61);}}}['readData'](_0x3afc3a,_0x4b6792){const _0x253f59=this['element'][_0x3afc3a];let _0x3b3291=-0x2532+0x4c9+0x2069;if(_0x253f59){_0x3b3291=this['vertexBuff'+'er']['numVertice'+'s'];let _0x20b7c9;const _0x2d93b0=_0x253f59['numCompone'+'nts'];if(this['vertexBuff'+'er']['getFormat']()['interleave'+'d']){Array['isArray'](_0x4b6792)&&(_0x4b6792['length']=0x946+0x1*-0x23b5+-0x65*-0x43),_0x253f59['index']=-0x70*0x35+0x2*0x1177+-0x3ea*0x3;let _0x1abe81=-0x4*0x3c2+0x1ed5+-0xfcd*0x1;for(_0x20b7c9=0x3*0x6f+0x47*-0x3b+0x1*0xf10;_0x20b7c9<_0x3b3291;_0x20b7c9++)_0x253f59['getToArray'](_0x1abe81,_0x4b6792,_0x20b7c9*_0x2d93b0),_0x1abe81+=_0x253f59['stride'];}else{if(ArrayBuffer['isView'](_0x4b6792))_0x4b6792['set'](_0x253f59['array']);else{_0x4b6792['length']=0xa53+-0xef7*-0x1+-0xf9*0x1a;const _0x424668=_0x3b3291*_0x2d93b0;for(_0x20b7c9=-0x147b+-0x9ef*0x2+0x2859;_0x20b7c9<_0x424668;_0x20b7c9++)_0x4b6792[_0x20b7c9]=_0x253f59['array'][_0x20b7c9];}}}return _0x3b3291;}}const Tw=-(-0x18b+-0x1a3*-0x8+-0xb8c);class ww{constructor(_0x134c97,_0x227796){h(this,'key',null),h(this,'element',null),h(this,'event',null),_0x227796&&(this['key']=_0x227796['keyCode'],this['element']=_0x227796['target'],this['event']=_0x227796);}}const jl=new ww();function Vd(_0x106e8e){return jl['key']=_0x106e8e['keyCode'],jl['element']=_0x106e8e['target'],jl['event']=_0x106e8e,jl;}function Yl(_0x594192){return typeof _0x594192=='string'?_0x594192['toUpperCas'+'e']()['charCodeAt'](0x164a+-0xf41+-0x709):_0x594192;}const Ew={0x9:'Tab',0xd:'Enter',0x10:'Shift',0x11:'Control',0x12:'Alt',0x1b:'Escape',0x25:'Left',0x26:'Up',0x27:'Right',0x28:'Down',0x2e:'Delete',0x5b:'Win'};class h_ extends me{constructor(_0x5381d4,_0x4f2fa6={}){super(),h(this,'_element',null),h(this,'_keymap',{}),h(this,'_lastmap',{}),(this['_keyDownHa'+'ndler']=this['_handleKey'+'Down']['bind'](this),this['_keyUpHand'+'ler']=this['_handleKey'+'Up']['bind'](this),this['_keyPressH'+'andler']=this['_handleKey'+'Press']['bind'](this),this['_visibilit'+'yChangeHan'+'dler']=this['_handleVis'+'ibilityCha'+'nge']['bind'](this),this['_windowBlu'+'rHandler']=this['_handleWin'+'dowBlur']['bind'](this),_0x5381d4&&this['attach'](_0x5381d4),this['preventDef'+'ault']=_0x4f2fa6['preventDef'+'ault']||!(0x12ac+0x7d1+-0x1a7c),this['stopPropag'+'ation']=_0x4f2fa6['stopPropag'+'ation']||!(0x3*-0xb66+0x192+-0x1*-0x20a1));}['attach'](_0xcd68aa){this['_element']&&this['detach'](),this['_element']=_0xcd68aa,this['_element']['addEventLi'+'stener']('keydown',this['_keyDownHa'+'ndler'],!(-0x23c7+0x32*0xc5+-0x2e*0xf)),this['_element']['addEventLi'+'stener']('keypress',this['_keyPressH'+'andler'],!(0x4*0x3ed+-0x132b+-0x8*-0x6f)),this['_element']['addEventLi'+'stener']('keyup',this['_keyUpHand'+'ler'],!(0x86*0x25+-0x224e*-0x1+0x4e1*-0xb)),document['addEventLi'+'stener']('visibility'+'change',this['_visibilit'+'yChangeHan'+'dler'],!(-0x1d77*0x1+-0xe07+0x2b7f*0x1)),window['addEventLi'+'stener']('blur',this['_windowBlu'+'rHandler'],!(0x18e+0xef1+-0x107e));}['detach'](){if(!this['_element']){w['warn']('Unable\x20to\x20'+'detach\x20key'+'board.\x20It\x20'+'is\x20not\x20att'+'ached\x20to\x20a'+'n\x20element.');return;}this['_element']['removeEven'+'tListener']('keydown',this['_keyDownHa'+'ndler']),this['_element']['removeEven'+'tListener']('keypress',this['_keyPressH'+'andler']),this['_element']['removeEven'+'tListener']('keyup',this['_keyUpHand'+'ler']),this['_element']=null,document['removeEven'+'tListener']('visibility'+'change',this['_visibilit'+'yChangeHan'+'dler'],!(-0x1dfb+-0x1257+0x3053)),window['removeEven'+'tListener']('blur',this['_windowBlu'+'rHandler'],!(0xcb6*0x1+0x1*-0x7a8+-0x50d));}['toKeyIdent'+'ifier'](_0x50b617){_0x50b617=Yl(_0x50b617);const _0x24c331=Ew[_0x50b617['toString']()];if(_0x24c331)return _0x24c331;let _0x129f67=_0x50b617['toString'](0x287+0xe1b+-0x1092)['toUpperCas'+'e']();const _0x1c2dcd=_0x129f67['length'];for(let _0x59cb01=-0x19a*-0x1+0x764*0x3+0xbe3*-0x2;_0x59cb01<0x1e25*0x1+0x227c+-0x409d-_0x1c2dcd;_0x59cb01++)_0x129f67='0'+_0x129f67;return'U+'+_0x129f67;}['_handleKey'+'Down'](_0x47ebbd){const _0x408dc7=_0x47ebbd['keyCode']||_0x47ebbd['charCode'];if(_0x408dc7===void(-0x9d5*-0x1+-0x1b50+0x5*0x37f))return;const _0x95a1c6=this['toKeyIdent'+'ifier'](_0x408dc7);this['_keymap'][_0x95a1c6]=!(-0x264c+0x6*0x296+0x5b2*0x4),this['fire']('keydown',Vd(_0x47ebbd)),this['preventDef'+'ault']&&_0x47ebbd['preventDef'+'ault'](),this['stopPropag'+'ation']&&_0x47ebbd['stopPropag'+'ation']();}['_handleKey'+'Up'](_0x2b6e80){const _0x5ebe10=_0x2b6e80['keyCode']||_0x2b6e80['charCode'];if(_0x5ebe10===void(0x12f4+0x1f*-0xfb+0xb71*0x1))return;const _0x8686e1=this['toKeyIdent'+'ifier'](_0x5ebe10);delete this['_keymap'][_0x8686e1],this['fire']('keyup',Vd(_0x2b6e80)),this['preventDef'+'ault']&&_0x2b6e80['preventDef'+'ault'](),this['stopPropag'+'ation']&&_0x2b6e80['stopPropag'+'ation']();}['_handleKey'+'Press'](_0x574aa3){this['fire']('keypress',Vd(_0x574aa3)),this['preventDef'+'ault']&&_0x574aa3['preventDef'+'ault'](),this['stopPropag'+'ation']&&_0x574aa3['stopPropag'+'ation']();}['_handleVis'+'ibilityCha'+'nge'](){document['visibility'+'State']==='hidden'&&this['_handleWin'+'dowBlur']();}['_handleWin'+'dowBlur'](){this['_keymap']={},this['_lastmap']={};}['update'](){for(const _0x4ed156 in this['_lastmap'])delete this['_lastmap'][_0x4ed156];for(const _0xed9deb in this['_keymap'])this['_keymap']['hasOwnProp'+'erty'](_0xed9deb)&&(this['_lastmap'][_0xed9deb]=this['_keymap'][_0xed9deb]);}['isPressed'](_0x1e603f){const _0x2a6212=Yl(_0x1e603f),_0x5c3d1a=this['toKeyIdent'+'ifier'](_0x2a6212);return!!this['_keymap'][_0x5c3d1a];}['wasPressed'](_0x4d3978){const _0x4c6ea8=Yl(_0x4d3978),_0x21e90a=this['toKeyIdent'+'ifier'](_0x4c6ea8);return!!this['_keymap'][_0x21e90a]&&!this['_lastmap'][_0x21e90a];}['wasRelease'+'d'](_0x313781){const _0x21b257=Yl(_0x313781),_0x34fc00=this['toKeyIdent'+'ifier'](_0x21b257);return!this['_keymap'][_0x34fc00]&&!!this['_lastmap'][_0x34fc00];}}h(h_,'EVENT_KEYD'+'OWN','keydown'),h(h_,'EVENT_KEYU'+'P','keyup');function ru(){return!!(document['pointerLoc'+'kElement']||document['mozPointer'+'LockElemen'+'t']||document['webkitPoin'+'terLockEle'+'ment']);}class ta{constructor(_0x1fead9,_0x1c4b54){h(this,'x',0x2*0x1f7+0x185b+0xd*-0x22d),h(this,'y',-0x1b22*0x1+0x87*-0x18+-0x13e5*-0x2),h(this,'dx',-0x8f*0x37+-0x67*-0x18+0x1511*0x1),h(this,'dy',-0x2*0xa13+0x1116+-0x62*-0x8),h(this,'button',Tw),h(this,'wheelDelta',0x7*0x1f7+-0x104+-0xcbd),h(this,'element'),h(this,'ctrlKey',!(0x207*-0x1+0x21ab+-0xd*0x26f)),h(this,'altKey',!(0x223f+-0x166f+-0xbcf)),h(this,'shiftKey',!(-0x12b0+-0x3*0x32b+0x1c32)),h(this,'metaKey',!(-0x25e7+0x1533*0x1+0x10b5)),h(this,'event');let _0xe77590={'x':0x0,'y':0x0};if(_0x1c4b54){if(_0x1c4b54 instanceof ta)throw Error('Expected\x20M'+'ouseEvent');_0xe77590=_0x1fead9['_getTarget'+'Coords'](_0x1c4b54);}else _0x1c4b54={};if(_0xe77590)this['x']=_0xe77590['x'],this['y']=_0xe77590['y'];else{if(ru())this['x']=-0x1*0xe3+0x2*0x108+0x12d*-0x1,this['y']=-0x6*-0x62f+-0x579*0x3+-0x3*0x6e5;else return;}_0x1c4b54['type']==='wheel'&&(_0x1c4b54['deltaY']>0x11f2*0x1+0x2255+0x5cf*-0x9?this['wheelDelta']=0xd7b+0x779*0x2+-0x1c6c:_0x1c4b54['deltaY']<-0x1*-0x2653+0x1682+-0x1*0x3cd5&&(this['wheelDelta']=-(0x34*0x43+0x2436+-0x31d1))),ru()?(this['dx']=_0x1c4b54['movementX']||_0x1c4b54['webkitMove'+'mentX']||_0x1c4b54['mozMovemen'+'tX']||-0x60d+0x1408+0xdfb*-0x1,this['dy']=_0x1c4b54['movementY']||_0x1c4b54['webkitMove'+'mentY']||_0x1c4b54['mozMovemen'+'tY']||0x1*0x783+-0x1855+0x10d2):(this['dx']=this['x']-_0x1fead9['_lastX'],this['dy']=this['y']-_0x1fead9['_lastY']),(_0x1c4b54['type']==='mousedown'||_0x1c4b54['type']==='mouseup')&&(this['button']=_0x1c4b54['button']),this['buttons']=_0x1fead9['_buttons']['slice'](0x1*-0xd1+0x482*0x2+-0x833),this['element']=_0x1c4b54['target'],this['ctrlKey']=_0x1c4b54['ctrlKey']??!(-0x1*0x158f+-0x9*-0x34f+-0x837*0x1),this['altKey']=_0x1c4b54['altKey']??!(-0x13*0xa2+0x1cd2+-0x10cb),this['shiftKey']=_0x1c4b54['shiftKey']??!(-0x1c44+0x1*0x1a33+0x212),this['metaKey']=_0x1c4b54['metaKey']??!(-0x22b0+0x19a9+-0x44*-0x22),this['event']=_0x1c4b54;}}class sa extends me{constructor(_0x3f568c){super(),h(this,'_lastX',-0x2*0xfeb+-0x187*-0xe+0xa74),h(this,'_lastY',-0x1a4b+0x1d60+-0x315),h(this,'_buttons',[!(0x665+-0x1*-0x2010+-0x2674),!(0x23d1+0x2470+-0x4840),!(-0x1f7d+0x14c0+0xfa*0xb)]),h(this,'_lastbutto'+'ns',[!(-0x21*-0x93+0x2180*0x1+0x62*-0x89),!(0x262d+-0x39*0x70+-0xd3c),!(-0x1*-0xfd1+0x667+-0x1*0x1637)]),h(this,'_target',null),h(this,'_attached',!(0x1*-0x443+-0x24f*-0x2+0x2d*-0x2)),(this['_upHandler']=this['_handleUp']['bind'](this),this['_downHandl'+'er']=this['_handleDow'+'n']['bind'](this),this['_moveHandl'+'er']=this['_handleMov'+'e']['bind'](this),this['_wheelHand'+'ler']=this['_handleWhe'+'el']['bind'](this),this['_contextMe'+'nuHandler']=_0x23b3b1=>{_0x23b3b1['preventDef'+'ault']();},this['attach'](_0x3f568c));}static['isPointerL'+'ocked'](){return ru();}['attach'](_0x1e78a6){if(this['_target']=_0x1e78a6,this['_attached'])return;this['_attached']=!(0x16bd*-0x1+-0xd0+0x178d*0x1);const _0x521872={'passive':!(0x35*-0x17+0x1*0x3c5+0xff)},_0x45b563=Ae['passiveEve'+'nts']?_0x521872:!(-0x84b+0x5*-0x7cf+0x2f57*0x1);window['addEventLi'+'stener']('mouseup',this['_upHandler'],_0x45b563),window['addEventLi'+'stener']('mousedown',this['_downHandl'+'er'],_0x45b563),window['addEventLi'+'stener']('mousemove',this['_moveHandl'+'er'],_0x45b563),window['addEventLi'+'stener']('wheel',this['_wheelHand'+'ler'],_0x45b563);}['detach'](){if(!this['_attached'])return;this['_attached']=!(0x13*-0xe9+-0x4a*0x19+0x1886),this['_target']=null;const _0x57f8b6={'passive':!(-0x24e7+-0x1*0x1735+0x3c1d)},_0x48a371=Ae['passiveEve'+'nts']?_0x57f8b6:!(0x1478+0x2*-0x712+-0x653);window['removeEven'+'tListener']('mouseup',this['_upHandler'],_0x48a371),window['removeEven'+'tListener']('mousedown',this['_downHandl'+'er'],_0x48a371),window['removeEven'+'tListener']('mousemove',this['_moveHandl'+'er'],_0x48a371),window['removeEven'+'tListener']('wheel',this['_wheelHand'+'ler'],_0x48a371);}['disableCon'+'textMenu'](){this['_target']&&this['_target']['addEventLi'+'stener']('contextmen'+'u',this['_contextMe'+'nuHandler']);}['enableCont'+'extMenu'](){this['_target']&&this['_target']['removeEven'+'tListener']('contextmen'+'u',this['_contextMe'+'nuHandler']);}['enablePoin'+'terLock'](_0x2072cd,_0x424d41){if(!document['body']['requestPoi'+'nterLock']){_0x424d41&&_0x424d41();return;}const _0x782766=()=>{_0x2072cd(),document['removeEven'+'tListener']('pointerloc'+'kchange',_0x782766);},_0x207275=()=>{_0x424d41(),document['removeEven'+'tListener']('pointerloc'+'kerror',_0x207275);};_0x2072cd&&document['addEventLi'+'stener']('pointerloc'+'kchange',_0x782766,!(0x16b8+-0x1a77+0x3c0)),_0x424d41&&document['addEventLi'+'stener']('pointerloc'+'kerror',_0x207275,!(0xc*0x23a+-0xa0d+-0x10aa)),document['body']['requestPoi'+'nterLock']();}['disablePoi'+'nterLock'](_0x22b1de){if(!document['exitPointe'+'rLock'])return;const _0x57ce0c=()=>{_0x22b1de(),document['removeEven'+'tListener']('pointerloc'+'kchange',_0x57ce0c);};_0x22b1de&&document['addEventLi'+'stener']('pointerloc'+'kchange',_0x57ce0c,!(-0x18db+0x5b4+0x1328)),document['exitPointe'+'rLock']();}['update'](){this['_lastbutto'+'ns'][-0x9*0x185+-0x2a0+-0xd*-0x141]=this['_buttons'][-0x5fa+0xdc2*0x1+0x18*-0x53],this['_lastbutto'+'ns'][0x1*-0xd7f+-0x216f+-0x1b*-0x1bd]=this['_buttons'][0x1a0e+0x2250+-0x3c5d],this['_lastbutto'+'ns'][-0x94b+-0xec6+0x1813]=this['_buttons'][-0x1c42+-0xcd5+0x491*0x9];}['isPressed'](_0x237d10){return this['_buttons'][_0x237d10];}['wasPressed'](_0x5a29c9){return this['_buttons'][_0x5a29c9]&&!this['_lastbutto'+'ns'][_0x5a29c9];}['wasRelease'+'d'](_0x2701f0){return!this['_buttons'][_0x2701f0]&&this['_lastbutto'+'ns'][_0x2701f0];}['_handleUp'](_0x4bc82){this['_buttons'][_0x4bc82['button']]=!(0x2130+0x6*0x3f5+-0x38ed);const _0x145ac5=new ta(this,_0x4bc82);_0x145ac5['event']&&this['fire']('mouseup',_0x145ac5);}['_handleDow'+'n'](_0x38e122){this['_buttons'][_0x38e122['button']]=!(-0x1228+0x912+-0x2*-0x48b);const _0x5e934a=new ta(this,_0x38e122);_0x5e934a['event']&&this['fire']('mousedown',_0x5e934a);}['_handleMov'+'e'](_0xfc7bed){const _0x69b705=new ta(this,_0xfc7bed);_0x69b705['event']&&(this['fire']('mousemove',_0x69b705),this['_lastX']=_0x69b705['x'],this['_lastY']=_0x69b705['y']);}['_handleWhe'+'el'](_0x425bc3){const _0x3e6c75=new ta(this,_0x425bc3);_0x3e6c75['event']&&this['fire']('mousewheel',_0x3e6c75);}['_getTarget'+'Coords'](_0x507597){const _0x175672=this['_target']['getBoundin'+'gClientRec'+'t'](),_0x420fbf=Math['floor'](_0x175672['left']),_0x15ad25=Math['floor'](_0x175672['top']);return _0x507597['clientX']<_0x420fbf||_0x507597['clientX']>=_0x420fbf+this['_target']['clientWidt'+'h']||_0x507597['clientY']<_0x15ad25||_0x507597['clientY']>=_0x15ad25+this['_target']['clientHeig'+'ht']?null:{'x':_0x507597['clientX']-_0x420fbf,'y':_0x507597['clientY']-_0x15ad25};}}h(sa,'EVENT_MOUS'+'EMOVE','mousemove'),h(sa,'EVENT_MOUS'+'EDOWN','mousedown'),h(sa,'EVENT_MOUS'+'EUP','mouseup'),h(sa,'EVENT_MOUS'+'EWHEEL','mousewheel');function Wc(_0x485722){let _0x5c8cb2=0xe29+-0x3c3+-0x533*0x2,_0x164247=-0x2067+0x6d*0x29+-0x2*-0x779,_0x2a593b=_0x485722['target'];for(;!(_0x2a593b instanceof HTMLElement)&&_0x2a593b;)_0x2a593b=_0x2a593b['parentNode'];for(;_0x2a593b;)_0x5c8cb2+=_0x2a593b['offsetLeft']-_0x2a593b['scrollLeft'],_0x164247+=_0x2a593b['offsetTop']-_0x2a593b['scrollTop'],_0x2a593b=_0x2a593b['offsetPare'+'nt'];return{'x':_0x485722['pageX']-_0x5c8cb2,'y':_0x485722['pageY']-_0x164247};}class d_{constructor(_0x92367f){h(this,'id'),h(this,'x'),h(this,'y'),h(this,'target'),h(this,'touch');const _0x14af79=Wc(_0x92367f);this['id']=_0x92367f['identifier'],this['x']=_0x14af79['x'],this['y']=_0x14af79['y'],this['target']=_0x92367f['target'],this['touch']=_0x92367f;}}class Kl{constructor(_0x4ba481,_0x3c07c2){h(this,'element'),h(this,'event'),h(this,'touches',[]),h(this,'changedTou'+'ches',[]),(this['element']=_0x3c07c2['target'],this['event']=_0x3c07c2,this['touches']=Array['from'](_0x3c07c2['touches'])['map'](_0x3eaf4e=>new d_(_0x3eaf4e)),this['changedTou'+'ches']=Array['from'](_0x3c07c2['changedTou'+'ches'])['map'](_0x1fd4d2=>new d_(_0x1fd4d2)));}['getTouchBy'+'Id'](_0x56b14a,_0x329f6f){return _0x329f6f['find'](_0x15e792=>_0x15e792['id']===_0x56b14a)||null;}}class Zl extends me{constructor(_0x5c53ab){super(),this['_element']=null,this['_startHand'+'ler']=this['_handleTou'+'chStart']['bind'](this),this['_endHandle'+'r']=this['_handleTou'+'chEnd']['bind'](this),this['_moveHandl'+'er']=this['_handleTou'+'chMove']['bind'](this),this['_cancelHan'+'dler']=this['_handleTou'+'chCancel']['bind'](this),this['attach'](_0x5c53ab);}['attach'](_0x15d991){this['_element']&&this['detach'](),this['_element']=_0x15d991,this['_element']['addEventLi'+'stener']('touchstart',this['_startHand'+'ler'],!(0x1*-0x171f+0x2*0x799+0x7ee)),this['_element']['addEventLi'+'stener']('touchend',this['_endHandle'+'r'],!(0xf67*-0x1+-0x228d+-0x31f5*-0x1)),this['_element']['addEventLi'+'stener']('touchmove',this['_moveHandl'+'er'],!(-0x45b*-0x5+-0x1af7+0x531)),this['_element']['addEventLi'+'stener']('touchcance'+'l',this['_cancelHan'+'dler'],!(-0x12b5+0xa1f*-0x1+0x29f*0xb));}['detach'](){this['_element']&&(this['_element']['removeEven'+'tListener']('touchstart',this['_startHand'+'ler'],!(-0x4a*0x6f+0x1*0x1bbb+0x45c)),this['_element']['removeEven'+'tListener']('touchend',this['_endHandle'+'r'],!(-0x865+-0x14b*-0x17+0x1557*-0x1)),this['_element']['removeEven'+'tListener']('touchmove',this['_moveHandl'+'er'],!(-0x175b+-0x18b*-0x9+-0x1e5*-0x5)),this['_element']['removeEven'+'tListener']('touchcance'+'l',this['_cancelHan'+'dler'],!(0x1d31+0x13e*0x19+-0x3c3e))),this['_element']=null;}['_handleTou'+'chStart'](_0x20d83a){this['fire']('touchstart',new Kl(this,_0x20d83a));}['_handleTou'+'chEnd'](_0x5ab2c9){this['fire']('touchend',new Kl(this,_0x5ab2c9));}['_handleTou'+'chMove'](_0x48ec3d){_0x48ec3d['preventDef'+'ault'](),this['fire']('touchmove',new Kl(this,_0x48ec3d));}['_handleTou'+'chCancel'](_0xfccadc){this['fire']('touchcance'+'l',new Kl(this,_0xfccadc));}}h(Zl,'EVENT_TOUC'+'HSTART','touchstart'),h(Zl,'EVENT_TOUC'+'HEND','touchend'),h(Zl,'EVENT_TOUC'+'HMOVE','touchmove'),h(Zl,'EVENT_TOUC'+'HCANCEL','touchcance'+'l');const Oe=class Oe{['get'](_0x286e52,_0x4cd8a5,_0xcf5ed9){typeof _0x4cd8a5=='function'&&(_0xcf5ed9=_0x4cd8a5,_0x4cd8a5={});const _0x50ee92=this['request']('GET',_0x286e52,_0x4cd8a5,_0xcf5ed9),{progress:_0x246de6}=_0x4cd8a5;if(_0x246de6){const _0x447365=_0x13d0bf=>{_0x13d0bf['lengthComp'+'utable']&&_0x246de6['fire']('progress',_0x13d0bf['loaded'],_0x13d0bf['total']);},_0x408bef=_0xdd6d92=>{_0x447365(_0xdd6d92),_0x50ee92['removeEven'+'tListener']('loadstart',_0x447365),_0x50ee92['removeEven'+'tListener']('progress',_0x447365),_0x50ee92['removeEven'+'tListener']('loadend',_0x408bef);};_0x50ee92['addEventLi'+'stener']('loadstart',_0x447365),_0x50ee92['addEventLi'+'stener']('progress',_0x447365),_0x50ee92['addEventLi'+'stener']('loadend',_0x408bef);}return _0x50ee92;}['post'](_0x185db6,_0x5054c7,_0x1a6488,_0x4eddb8){return typeof _0x1a6488=='function'&&(_0x4eddb8=_0x1a6488,_0x1a6488={}),_0x1a6488['postdata']=_0x5054c7,this['request']('POST',_0x185db6,_0x1a6488,_0x4eddb8);}['put'](_0x5f2019,_0x169e5a,_0x538a83,_0x3859f3){return typeof _0x538a83=='function'&&(_0x3859f3=_0x538a83,_0x538a83={}),_0x538a83['postdata']=_0x169e5a,this['request']('PUT',_0x5f2019,_0x538a83,_0x3859f3);}['del'](_0xb71018,_0x956c17,_0x559822){return typeof _0x956c17=='function'&&(_0x559822=_0x956c17,_0x956c17={}),this['request']('DELETE',_0xb71018,_0x956c17,_0x559822);}['request'](_0x2a8778,_0x2bd509,_0x279445,_0x4a69c2){let _0x41d823,_0x119b3d,_0x3287c0,_0x3cfe7e=!(-0x21*-0x1b+-0x742+-0x79*-0x8);if(typeof _0x279445=='function'&&(_0x4a69c2=_0x279445,_0x279445={}),_0x279445['retry']&&(_0x279445=Object['assign']({'retries':0x0,'maxRetries':0x5},_0x279445)),_0x279445['callback']=_0x4a69c2,_0x279445['async']==null&&(_0x279445['async']=!(0xcb*-0x24+-0x19d3+-0x1c1*-0x1f)),_0x279445['headers']==null&&(_0x279445['headers']={}),_0x279445['postdata']!=null){if(_0x279445['postdata']instanceof Document)_0x3287c0=_0x279445['postdata'];else{if(_0x279445['postdata']instanceof FormData)_0x3287c0=_0x279445['postdata'];else{if(_0x279445['postdata']instanceof Object){let _0x577510=_0x279445['headers']['Content-Ty'+'pe'];switch(_0x577510===void(0xd61+0x18ba+-0x261b)&&(_0x279445['headers']['Content-Ty'+'pe']=Oe['ContentTyp'+'e']['FORM_URLEN'+'CODED'],_0x577510=_0x279445['headers']['Content-Ty'+'pe']),_0x577510){case Oe['ContentTyp'+'e']['FORM_URLEN'+'CODED']:{_0x3287c0='';let _0x5cda5c=!(0x119*-0x1f+-0x1a41+0x3c48);for(const _0x46f137 in _0x279445['postdata'])if(_0x279445['postdata']['hasOwnProp'+'erty'](_0x46f137)){_0x5cda5c?_0x5cda5c=!(-0x17d2+-0xe13*0x2+0x33f9):_0x3287c0+='&';const _0x2406c8=encodeURIComponent(_0x46f137),_0x29a03c=encodeURIComponent(_0x279445['postdata'][_0x46f137]);_0x3287c0+=_0x2406c8+'='+_0x29a03c;}break;}default:case Oe['ContentTyp'+'e']['JSON']:_0x577510==null&&(_0x279445['headers']['Content-Ty'+'pe']=Oe['ContentTyp'+'e']['JSON']),_0x3287c0=JSON['stringify'](_0x279445['postdata']);break;}}else _0x3287c0=_0x279445['postdata'];}}}if(_0x279445['cache']===!(0x2a4*0x1+0x50b+-0x7ae)){const _0x369d4a=de();_0x41d823=new Rd(_0x2bd509),_0x41d823['query']?_0x41d823['query']=_0x41d823['query']+'&ts='+_0x369d4a:_0x41d823['query']='ts='+_0x369d4a,_0x2bd509=_0x41d823['toString']();}_0x279445['query']&&(_0x41d823=new Rd(_0x2bd509),_0x119b3d=ah(_0x41d823['getQuery'](),_0x279445['query']),_0x41d823['setQuery'](_0x119b3d),_0x2bd509=_0x41d823['toString']());const _0x37011a=new XMLHttpRequest();_0x37011a['open'](_0x2a8778,_0x2bd509,_0x279445['async']),_0x37011a['withCreden'+'tials']=_0x279445['withCreden'+'tials']!==void(-0x22e5+0x2ff*0xb+0x1f0)?_0x279445['withCreden'+'tials']:!(0x75*-0x13+-0x5*-0x6e5+-0x19c9),_0x37011a['responseTy'+'pe']=_0x279445['responseTy'+'pe']||this['_guessResp'+'onseType'](_0x2bd509);for(const _0x49f200 in _0x279445['headers'])_0x279445['headers']['hasOwnProp'+'erty'](_0x49f200)&&_0x37011a['setRequest'+'Header'](_0x49f200,_0x279445['headers'][_0x49f200]);_0x37011a['onreadysta'+'techange']=()=>{this['_onReadySt'+'ateChange'](_0x2a8778,_0x2bd509,_0x279445,_0x37011a);},_0x37011a['onerror']=()=>{this['_onError'](_0x2a8778,_0x2bd509,_0x279445,_0x37011a),_0x3cfe7e=!(-0x2cb+-0x2ed+0x5b8);};try{_0x37011a['send'](_0x3287c0);}catch(_0x31c78b){_0x3cfe7e||_0x279445['error'](_0x37011a['status'],_0x37011a,_0x31c78b);}return _0x37011a;}['_guessResp'+'onseType'](_0x31cc4b){const _0x123082=new Rd(_0x31cc4b),_0x12e324=xe['getExtensi'+'on'](_0x123082['path'])['toLowerCas'+'e']();return Oe['binaryExte'+'nsions']['indexOf'](_0x12e324)>=-0xf1*-0x28+-0x14*-0xe4+-0x8*0x6ef?Oe['ResponseTy'+'pe']['ARRAY_BUFF'+'ER']:_0x12e324==='.json'?Oe['ResponseTy'+'pe']['JSON']:_0x12e324==='.xml'?Oe['ResponseTy'+'pe']['DOCUMENT']:Oe['ResponseTy'+'pe']['TEXT'];}['_isBinaryC'+'ontentType'](_0x4667b5){return[Oe['ContentTyp'+'e']['BASIS'],Oe['ContentTyp'+'e']['BIN'],Oe['ContentTyp'+'e']['DDS'],Oe['ContentTyp'+'e']['GLB'],Oe['ContentTyp'+'e']['MP3'],Oe['ContentTyp'+'e']['MP4'],Oe['ContentTyp'+'e']['OGG'],Oe['ContentTyp'+'e']['OPUS'],Oe['ContentTyp'+'e']['WAV']]['indexOf'](_0x4667b5)>=-0x7*0x4cc+-0x1*-0xbc9+0x15cb;}['_isBinaryR'+'esponseTyp'+'e'](_0x2a225a){return _0x2a225a===Oe['ResponseTy'+'pe']['ARRAY_BUFF'+'ER']||_0x2a225a===Oe['ResponseTy'+'pe']['BLOB']||_0x2a225a===Oe['ResponseTy'+'pe']['JSON'];}['_onReadySt'+'ateChange'](_0x5f4e55,_0x4782a3,_0x53c599,_0x471c4b){if(_0x471c4b['readyState']===-0x1137+-0x497*-0x7+-0xee6*0x1)switch(_0x471c4b['status']){case 0x144f*-0x1+0x1*-0x305+0x5d5*0x4:{_0x471c4b['responseUR'+'L']&&_0x471c4b['responseUR'+'L']['startsWith']('file:///')?this['_onSuccess'](_0x5f4e55,_0x4782a3,_0x53c599,_0x471c4b):this['_onError'](_0x5f4e55,_0x4782a3,_0x53c599,_0x471c4b);break;}case 0x1a0+0x1*0x17b9+-0x1891:case-0xb*0xb3+-0xcbf*-0x2+-0x1104:case 0x1b47+-0x36a+-0x170f*0x1:case 0x1142*0x1+-0x15e9+-0x73*-0xd:{this['_onSuccess'](_0x5f4e55,_0x4782a3,_0x53c599,_0x471c4b);break;}default:{this['_onError'](_0x5f4e55,_0x4782a3,_0x53c599,_0x471c4b);break;}}}['_onSuccess'](_0x35b361,_0x489924,_0x5cf845,_0x3499bf){let _0x1c1a9e,_0x4a9516;const _0x2c1d82=_0x3499bf['getRespons'+'eHeader']('Content-Ty'+'pe');_0x2c1d82&&(_0x4a9516=_0x2c1d82['split'](';')[0x16a2+-0x1a21+0x37f]['trim']());try{this['_isBinaryC'+'ontentType'](_0x4a9516)||this['_isBinaryR'+'esponseTyp'+'e'](_0x3499bf['responseTy'+'pe'])?_0x1c1a9e=_0x3499bf['response']:_0x4a9516===Oe['ContentTyp'+'e']['JSON']||_0x489924['split']('?')[-0x6e7+-0x19*0x4+0x74b]['endsWith']('.json')?_0x1c1a9e=JSON['parse'](_0x3499bf['responseTe'+'xt']):_0x3499bf['responseTy'+'pe']===Oe['ResponseTy'+'pe']['DOCUMENT']||_0x4a9516===Oe['ContentTyp'+'e']['XML']?_0x1c1a9e=_0x3499bf['responseXM'+'L']:_0x1c1a9e=_0x3499bf['responseTe'+'xt'],_0x5cf845['callback'](null,_0x1c1a9e);}catch(_0x5385e7){_0x5cf845['callback'](_0x5385e7);}}['_onError'](_0x121004,_0x1fa3d8,_0x3badc9,_0x3e8e4a){if(!_0x3badc9['retrying']){if(_0x3badc9['retry']&&_0x3badc9['retries']<_0x3badc9['maxRetries']){_0x3badc9['retries']++,_0x3badc9['retrying']=!(0xd*0x273+0x1792+-0x3769);const _0x1f819=Y['clamp'](Math['pow'](0x86*-0x4+0xd*0x128+-0xcee,_0x3badc9['retries'])*Oe['retryDelay'],0x15d*-0xc+-0x151d+0xb5*0x35,_0x3badc9['maxRetryDe'+'lay']||0x36d*-0x7+0x7ba+0x23c9);console['log'](_0x121004+':\x20'+_0x1fa3d8+'\x20-\x20Error\x20'+_0x3e8e4a['status']+('.\x20Retrying'+'\x20in\x20')+_0x1f819+'\x20ms'),setTimeout(()=>{_0x3badc9['retrying']=!(0x38+0x9*-0x6c+0x395),this['request'](_0x121004,_0x1fa3d8,_0x3badc9,_0x3badc9['callback']);},_0x1f819);}else _0x3badc9['callback'](_0x3e8e4a['status']===-0x1*-0x8db+0x19b3+-0x228e?'Network\x20er'+'ror':_0x3e8e4a['status'],null);}}};h(Oe,'ContentTyp'+'e',{'AAC':'audio/aac','BASIS':'image/basi'+'s','BIN':'applicatio'+'n/octet-st'+'ream','DDS':'image/dds','FORM_URLENCODED':'applicatio'+'n/x-www-fo'+'rm-urlenco'+'ded','GIF':'image/gif','GLB':'model/gltf'+'-binary','JPEG':'image/jpeg','JSON':'applicatio'+'n/json','MP3':'audio/mpeg','MP4':'audio/mp4','OGG':'audio/ogg','OPUS':'audio/ogg;'+'\x20codecs=\x22o'+'pus\x22','PNG':'image/png','TEXT':'text/plain','WAV':'audio/x-wa'+'v','XML':'applicatio'+'n/xml'}),h(Oe,'ResponseTy'+'pe',{'TEXT':'text','ARRAY_BUFFER':'arraybuffe'+'r','BLOB':'blob','DOCUMENT':'document','JSON':'json'}),h(Oe,'binaryExte'+'nsions',['.model','.wav','.ogg','.mp3','.mp4','.m4a','.aac','.dds','.basis','.glb','.opus']),h(Oe,'retryDelay',-0x22b0+0x14*0x1b+-0x83e*-0x4);let Ls=Oe;const ot=new Ls(),Vp='linear',bw='inverse',Aw='exponentia'+'l';class Cw{constructor(_0x4d4227){h(this,'_manager'),h(this,'position',new D()),h(this,'orientatio'+'n',new te()),this['_manager']=_0x4d4227;}['getPositio'+'n'](){return this['position'];}['setPositio'+'n'](_0x1eafc1){this['position']['copy'](_0x1eafc1);const _0x206214=this['listener'];_0x206214&&('positionX'in _0x206214?(_0x206214['positionX']['value']=_0x1eafc1['x'],_0x206214['positionY']['value']=_0x1eafc1['y'],_0x206214['positionZ']['value']=_0x1eafc1['z']):_0x206214['setPositio'+'n']&&_0x206214['setPositio'+'n'](_0x1eafc1['x'],_0x1eafc1['y'],_0x1eafc1['z']));}['setOrienta'+'tion'](_0x296c4c){this['orientatio'+'n']['copy'](_0x296c4c);const _0x56fb2d=this['listener'];if(_0x56fb2d){const _0x5957bc=_0x296c4c['data'];'forwardX'in _0x56fb2d?(_0x56fb2d['forwardX']['value']=-_0x5957bc[0x2310+-0xb9e*0x2+-0xa*0x12e],_0x56fb2d['forwardY']['value']=-_0x5957bc[0x2527+0x8*-0x161+-0x1a16],_0x56fb2d['forwardZ']['value']=-_0x5957bc[-0x4ca+-0x77a+-0x7e*-0x19],_0x56fb2d['upX']['value']=_0x5957bc[0xfbd+-0x1b7c+0x1*0xbc3],_0x56fb2d['upY']['value']=_0x5957bc[0x188+0x145e+0x1*-0x15e1],_0x56fb2d['upZ']['value']=_0x5957bc[0x1a67+-0x241e*0x1+0x9bd]):_0x56fb2d['setOrienta'+'tion']&&_0x56fb2d['setOrienta'+'tion'](-_0x5957bc[-0x7e+-0x1e70+0xf7b*0x2],-_0x5957bc[0x267*-0x7+-0x2*0x704+-0x2*-0xf71],-_0x5957bc[-0xb*0x1a6+-0xf73+-0xb35*-0x3],_0x5957bc[0x1*-0x162a+0x3d3+0x125b],_0x5957bc[0x20b8+-0x1a01+-0x6b2],_0x5957bc[-0x114a+0x1b*-0x6+0x2*0x8f9]);}}['getOrienta'+'tion'](){return this['orientatio'+'n'];}get['listener'](){const _0x3b1739=this['_manager']['context'];return _0x3b1739?_0x3b1739['listener']:null;}}const Ql='running',f_=['click','touchstart','mousedown'];class Pw extends me{constructor(){super(),this['_context']=null,this['AudioConte'+'xt']=typeof AudioContext<'u'&&AudioContext||typeof webkitAudioContext<'u'&&webkitAudioContext,this['AudioConte'+'xt']||w['warn']('No\x20support'+'\x20for\x203D\x20au'+'dio\x20found'),this['_unlockHan'+'dlerFunc']=this['_unlockHan'+'dler']['bind'](this),this['_userSuspe'+'nded']=!(-0x8c4+0x1b65*-0x1+0xc0e*0x3),this['listener']=new Cw(this),this['_volume']=-0xf2c+0x3*-0x865+0x285c;}set['volume'](_0x183bde){_0x183bde=Y['clamp'](_0x183bde,-0x307+-0x8*0xb5+0x1*0x8af,-0x2f5*0x5+-0xb25+0x19ef),this['_volume']=_0x183bde,this['fire']('volumechan'+'ge',_0x183bde);}get['volume'](){return this['_volume'];}get['suspended'](){return this['_userSuspe'+'nded'];}get['context'](){return!this['_context']&&this['AudioConte'+'xt']&&(this['_context']=new this['AudioConte'+'xt'](),this['_context']['state']!==Ql&&this['_registerU'+'nlockListe'+'ners']()),this['_context'];}['suspend'](){this['_userSuspe'+'nded']||(this['_userSuspe'+'nded']=!(0x188e+-0x17c4+-0x1*0xca),this['_context']&&this['_context']['state']===Ql&&this['_suspend']());}['resume'](){this['_userSuspe'+'nded']&&(this['_userSuspe'+'nded']=!(-0xaa5*0x1+0x1*-0x248a+0x50*0x97),this['_context']&&this['_context']['state']!==Ql&&this['_resume']());}['destroy'](){var _0x4636c1;this['fire']('destroy'),this['_context']&&(this['_removeUnl'+'ockListene'+'rs'](),(_0x4636c1=this['_context'])==null||_0x4636c1['close'](),this['_context']=null);}['_resume'](){this['_context']['resume']()['then'](()=>{const _0x1c65dd=this['_context']['createBuff'+'erSource']();_0x1c65dd['buffer']=this['_context']['createBuff'+'er'](-0xd*0x287+0x91+0x204b,0x15*-0x5b+0x2a1*0x2+0x236,this['_context']['sampleRate']),_0x1c65dd['connect'](this['_context']['destinatio'+'n']),_0x1c65dd['start'](0x2*0x1169+-0x13*-0x34+-0x26ae),_0x1c65dd['onended']=_0x5588ee=>{_0x1c65dd['disconnect'](0x1*-0x16f1+-0x2d*0x17+0x1afc),this['fire']('resume');};},_0x434b03=>{w['error']('Attempted\x20'+'to\x20resume\x20'+'the\x20AudioC'+'ontext\x20on\x20'+'SoundManag'+'er.resume('+'),\x20but\x20it\x20'+'was\x20reject'+'ed\x20'+_0x434b03);})['catch'](_0x275b4b=>{w['error']('Attempted\x20'+'to\x20resume\x20'+'the\x20AudioC'+'ontext\x20on\x20'+'SoundManag'+'er.resume('+'),\x20but\x20thr'+'ew\x20an\x20exce'+'ption\x20'+_0x275b4b);});}['_suspend'](){this['_context']['suspend']()['then'](()=>{this['fire']('suspend');},_0x34fcf7=>{w['error']('Attempted\x20'+'to\x20suspend'+'\x20the\x20Audio'+'Context\x20on'+'\x20SoundMana'+'ger.suspen'+'d(),\x20but\x20i'+'t\x20was\x20reje'+'cted\x20'+_0x34fcf7);})['catch'](_0x56ecef=>{w['error']('Attempted\x20'+'to\x20suspend'+'\x20the\x20Audio'+'Context\x20on'+'\x20SoundMana'+'ger.suspen'+'d(),\x20but\x20t'+'hrew\x20an\x20ex'+'ception\x20'+_0x56ecef);});}['_unlockHan'+'dler'](){this['_removeUnl'+'ockListene'+'rs'](),!this['_userSuspe'+'nded']&&this['_context']['state']!==Ql&&this['_resume']();}['_registerU'+'nlockListe'+'ners'](){f_['forEach'](_0x452a31=>{window['addEventLi'+'stener'](_0x452a31,this['_unlockHan'+'dlerFunc'],!(0xf6d+-0x3*-0xca9+-0x3567));});}['_removeUnl'+'ockListene'+'rs'](){f_['forEach'](_0x7b0a22=>{window['removeEven'+'tListener'](_0x7b0a22,this['_unlockHan'+'dlerFunc'],!(0x13d*-0x14+0x48b+0x143a*0x1));});}}class Mw{constructor(_0x5c4c6e){h(this,'audio'),h(this,'buffer'),_0x5c4c6e instanceof Audio?this['audio']=_0x5c4c6e:this['buffer']=_0x5c4c6e;}get['duration'](){let _0x58f226=0x1*0x295+0x14ef*-0x1+0x125a;return this['buffer']?_0x58f226=this['buffer']['duration']:this['audio']&&(_0x58f226=this['audio']['duration']),_0x58f226||-0x1ce1+-0x8fb+0x2*0x12ee;}}function Dl(){return typeof AudioContext<'u'||typeof webkitAudioContext<'u';}const Zt=0x129b+-0x2b*-0x1d+-0x177a,fn=-0x2067+-0x1339+0x33a1,Hs=0xc1b*0x1+-0x1*0x1149+0x530;function es(_0x31e9a5,_0x1bc831){return _0x31e9a5%_0x1bc831||-0x19d1+0xc74+-0x1*-0xd5d;}class As extends me{constructor(_0x14d80e,_0xf07108,_0x455a20){super(),h(this,'source',null),(this['_manager']=_0x14d80e,this['_volume']=_0x455a20['volume']!==void(0xed7+-0x1*-0x26b9+0x4*-0xd64)?Y['clamp'](Number(_0x455a20['volume'])||0x25fc+-0x13bd+-0x123f,-0x19ae+0xc03+0xdab,-0x197c+-0x22ae+0x3c2b):0x1dfd+0x565*0x1+-0x2361,this['_pitch']=_0x455a20['pitch']!==void(0x268e+0x4a8+-0x2b36)?Math['max'](-0x10dd+-0x7*0x2c+0x1211+0.01,Number(_0x455a20['pitch'])||0x822*-0x4+-0x222*0x6+0x2d54):-0x1802+-0xb93*-0x1+0xc70,this['_loop']=!!(_0x455a20['loop']!==void(0x1e62+0xcbb*0x3+-0x4493)&&_0x455a20['loop']),this['_sound']=_0xf07108,this['_state']=Hs,this['_suspended']=!(0x656+0x9*-0x167+0x64a),this['_suspendEn'+'dEvent']=-0x2589+-0xae*-0x1+0x55*0x6f,this['_suspendIn'+'stanceEven'+'ts']=!(-0x13aa+-0x1a11*-0x1+0x3f*-0x1a),this['_playWhenL'+'oaded']=!(-0x254d+0x5d1*0x2+0x19ab*0x1),this['_startTime']=Math['max'](-0x11*0x1c2+-0x19c1+-0x1*-0x37a3,Number(_0x455a20['startTime'])||0xd7*-0x2+-0x1d92+0x19*0x140),this['_duration']=Math['max'](-0xb47*0x1+0x22c+0x91b,Number(_0x455a20['duration'])||-0x24a6+0x3*0x5c9+0xb*0x1c1),this['_startOffs'+'et']=null,this['_onPlayCal'+'lback']=_0x455a20['onPlay'],this['_onPauseCa'+'llback']=_0x455a20['onPause'],this['_onResumeC'+'allback']=_0x455a20['onResume'],this['_onStopCal'+'lback']=_0x455a20['onStop'],this['_onEndCall'+'back']=_0x455a20['onEnd'],Dl()?(this['_startedAt']=0x1*-0x4f3+0x24df+-0xc*0x2a9,this['_currentTi'+'me']=-0xf*-0x167+0x18f6+-0x2dff,this['_currentOf'+'fset']=0x21d*-0x1+-0x41*0x64+0x1b81,this['_inputNode']=null,this['_connector'+'Node']=null,this['_firstNode']=null,this['_lastNode']=null,this['_waitingCo'+'ntextSuspe'+'nsion']=!(-0xa3d*0x2+-0x249*0xa+0x2b55),this['_initializ'+'eNodes'](),this['_endedHand'+'ler']=this['_onEnded']['bind'](this)):(this['_isReady']=!(-0x1a21+-0x9*-0x81+0x1599),this['_loadedMet'+'adataHandl'+'er']=this['_onLoadedM'+'etadata']['bind'](this),this['_timeUpdat'+'eHandler']=this['_onTimeUpd'+'ate']['bind'](this),this['_endedHand'+'ler']=this['_onEnded']['bind'](this),this['_createSou'+'rce']()));}set['currentTim'+'e'](_0x3076d4){if(!(_0x3076d4<0x2e*-0x7+-0x61*-0x2d+0xd*-0x137)){if(this['_state']===Zt){const _0xe8f987=this['_suspendIn'+'stanceEven'+'ts'];this['_suspendIn'+'stanceEven'+'ts']=!(-0x11*0xb4+0x4*-0x3+-0x600*-0x2),this['stop'](),this['_startOffs'+'et']=_0x3076d4,this['play'](),this['_suspendIn'+'stanceEven'+'ts']=_0xe8f987;}else this['_startOffs'+'et']=_0x3076d4,this['_currentTi'+'me']=_0x3076d4;}}get['currentTim'+'e'](){return this['_startOffs'+'et']!==null?this['_startOffs'+'et']:this['_state']===fn?this['_currentTi'+'me']:this['_state']===Hs||!this['source']?-0x1e22+0x14d*0x17+0x37:(this['_updateCur'+'rentTime'](),this['_currentTi'+'me']);}set['duration'](_0x4bc058){this['_duration']=Math['max'](0x1ab7+-0x39*-0x9d+-0x3dac,Number(_0x4bc058)||-0x1cb7+0x518+0x179f);const _0x2a0eb6=this['_state']===Zt;this['stop'](),_0x2a0eb6&&this['play']();}get['duration'](){return this['_sound']?this['_duration']?es(this['_duration'],this['_sound']['duration']):this['_sound']['duration']:0x2167+-0x25dd+-0x476*-0x1;}get['isPaused'](){return this['_state']===fn;}get['isPlaying'](){return this['_state']===Zt;}get['isStopped'](){return this['_state']===Hs;}get['isSuspende'+'d'](){return this['_suspended'];}set['loop'](_0x15381f){this['_loop']=!!_0x15381f,this['source']&&(this['source']['loop']=this['_loop']);}get['loop'](){return this['_loop'];}set['pitch'](_0x30bdd2){this['_currentOf'+'fset']=this['currentTim'+'e'],this['_startedAt']=this['_manager']['context']['currentTim'+'e'],this['_pitch']=Math['max'](Number(_0x30bdd2)||0x1445*-0x1+-0x57e+-0x1*-0x19c3,-0xb*0x68+0x6ae+-0x236+0.01),this['source']&&(this['source']['playbackRa'+'te']['value']=this['_pitch']);}get['pitch'](){return this['_pitch'];}set['sound'](_0x104e39){this['_sound']=_0x104e39,this['_state']!==Hs?this['stop']():this['_createSou'+'rce']();}get['sound'](){return this['_sound'];}set['startTime'](_0x2ea629){this['_startTime']=Math['max'](-0x2283+0x183b+-0x38*-0x2f,Number(_0x2ea629)||0x357+0x1*0x2057+-0x23ae);const _0x1c0268=this['_state']===Zt;this['stop'](),_0x1c0268&&this['play']();}get['startTime'](){return this['_startTime'];}set['volume'](_0x3da20c){_0x3da20c=Y['clamp'](_0x3da20c,0xa0e+0x2141*-0x1+0x1733,-0x3a*0x4+0x1*-0x1a70+0x1b59),this['_volume']=_0x3da20c,this['gain']&&(this['gain']['gain']['value']=_0x3da20c*this['_manager']['volume']);}get['volume'](){return this['_volume'];}['_onPlay'](){this['fire']('play'),this['_onPlayCal'+'lback']&&this['_onPlayCal'+'lback'](this);}['_onPause'](){this['fire']('pause'),this['_onPauseCa'+'llback']&&this['_onPauseCa'+'llback'](this);}['_onResume'](){this['fire']('resume'),this['_onResumeC'+'allback']&&this['_onResumeC'+'allback'](this);}['_onStop'](){this['fire']('stop'),this['_onStopCal'+'lback']&&this['_onStopCal'+'lback'](this);}['_onEnded'](){if(this['_suspendEn'+'dEvent']>0x151*0x19+0xe*0x298+-0x63*0xb3){this['_suspendEn'+'dEvent']--;return;}this['fire']('end'),this['_onEndCall'+'back']&&this['_onEndCall'+'back'](this),this['stop']();}['_onManager'+'VolumeChan'+'ge'](){this['volume']=this['_volume'];}['_onManager'+'Suspend'](){this['_state']===Zt&&!this['_suspended']&&(this['_suspended']=!(0x22e0+0x5*0xca+0x26d2*-0x1),this['pause']());}['_onManager'+'Resume'](){this['_suspended']&&(this['_suspended']=!(-0x8dc+-0x6a*-0x26+-0x6df),this['resume']());}['_initializ'+'eNodes'](){this['gain']=this['_manager']['context']['createGain'](),this['_inputNode']=this['gain'],this['_connector'+'Node']=this['gain'],this['_connector'+'Node']['connect'](this['_manager']['context']['destinatio'+'n']);}['play'](){return this['_state']!==Hs&&this['stop'](),this['_state']=Zt,this['_playWhenL'+'oaded']=!(0xda7+-0x23b9+0x1613),this['_waitingCo'+'ntextSuspe'+'nsion']?!(0x569+0x1*0xbeb+-0x1153):this['_manager']['suspended']?(this['_manager']['once']('resume',this['_playAudio'+'Immediate'],this),this['_waitingCo'+'ntextSuspe'+'nsion']=!(-0x9*0x5e+-0x236c+0x26ba),!(0x2633+-0xa52*-0x1+-0x2d*0x114)):(this['_playAudio'+'Immediate'](),!(0x2492+0xb19*-0x2+-0xe60));}['_playAudio'+'Immediate'](){if(this['_waitingCo'+'ntextSuspe'+'nsion']=!(0x210f+-0x77e+-0x1990),this['_state']!==Zt)return;this['source']||this['_createSou'+'rce']();let _0x1d520c=es(this['_startOffs'+'et'],this['duration']);_0x1d520c=es(this['_startTime']+_0x1d520c,this['_sound']['duration']),this['_startOffs'+'et']=null,this['_duration']?this['source']['start'](0x3*-0x85c+0x275+0x169f,_0x1d520c,this['_duration']):this['source']['start'](0xb9d+-0xe37+0x29a,_0x1d520c),this['_startedAt']=this['_manager']['context']['currentTim'+'e'],this['_currentTi'+'me']=-0x2*-0x3f5+-0x4*-0x8ce+-0x2b22*0x1,this['_currentOf'+'fset']=_0x1d520c,this['volume']=this['_volume'],this['loop']=this['_loop'],this['pitch']=this['_pitch'],this['_manager']['on']('volumechan'+'ge',this['_onManager'+'VolumeChan'+'ge'],this),this['_manager']['on']('suspend',this['_onManager'+'Suspend'],this),this['_manager']['on']('resume',this['_onManager'+'Resume'],this),this['_manager']['on']('destroy',this['_onManager'+'Destroy'],this),this['_suspendIn'+'stanceEven'+'ts']||this['_onPlay']();}['pause'](){return this['_playWhenL'+'oaded']=!(0x240+0xe9*-0x12+0xe23),this['_state']!==Zt?!(-0x19*0x179+0x164*-0x7+0x2e8e):(this['_state']=fn,this['_waitingCo'+'ntextSuspe'+'nsion']||(this['_updateCur'+'rentTime'](),this['_suspendEn'+'dEvent']++,this['source']['stop'](-0x48*0x7a+-0x2683*-0x1+0x1*-0x433),this['source']=null,this['_startOffs'+'et']=null,this['_suspendIn'+'stanceEven'+'ts']||this['_onPause']()),!(0x3*-0x509+-0x3a*-0x35+-0x3d*-0xd));}['resume'](){if(this['_state']!==fn)return!(-0x31c*-0x6+0x1*0x1d21+-0x2fc8);let _0x4a5930=this['currentTim'+'e'];return this['_state']=Zt,this['_waitingCo'+'ntextSuspe'+'nsion']||(this['source']||this['_createSou'+'rce'](),this['_startOffs'+'et']!==null&&(_0x4a5930=es(this['_startOffs'+'et'],this['duration']),_0x4a5930=es(this['_startTime']+_0x4a5930,this['_sound']['duration']),this['_startOffs'+'et']=null),this['_duration']?this['source']['start'](0x2*0xf7f+-0x1*-0xb8a+-0x1544*0x2,_0x4a5930,this['_duration']):this['source']['start'](-0x1*-0x1d27+0x371*-0x1+0xcdb*-0x2,_0x4a5930),this['_startedAt']=this['_manager']['context']['currentTim'+'e'],this['_currentOf'+'fset']=_0x4a5930,this['volume']=this['_volume'],this['loop']=this['_loop'],this['pitch']=this['_pitch'],this['_playWhenL'+'oaded']=!(-0x39*-0x73+0x210a+0x3*-0x138c),this['_suspendIn'+'stanceEven'+'ts']||this['_onResume']()),!(-0x1e6c+-0xb17+0x1*0x2983);}['stop'](){if(this['_playWhenL'+'oaded']=!(0x1dc5*-0x1+-0x12b1+0x3077),this['_state']===Hs)return!(-0x49*0xd+0x425*-0x9+0x2903);const _0x52920a=this['_state']===Zt;return this['_state']=Hs,this['_waitingCo'+'ntextSuspe'+'nsion']||(this['_manager']['off']('volumechan'+'ge',this['_onManager'+'VolumeChan'+'ge'],this),this['_manager']['off']('suspend',this['_onManager'+'Suspend'],this),this['_manager']['off']('resume',this['_onManager'+'Resume'],this),this['_manager']['off']('destroy',this['_onManager'+'Destroy'],this),this['_startedAt']=-0x114b+-0x17*-0x126+0x5*-0x1d3,this['_currentTi'+'me']=-0x3*-0x15b+-0x8b6*-0x1+-0xcc7,this['_currentOf'+'fset']=0x5a*0x67+-0x26d5+0x29f,this['_startOffs'+'et']=null,this['_suspendEn'+'dEvent']++,_0x52920a&&this['source']&&this['source']['stop'](-0x1a0+0x1*-0x1e21+0x1fc1),this['source']=null,this['_suspendIn'+'stanceEven'+'ts']||this['_onStop']()),!(-0x8ca+0x1*0xdf3+-0x529*0x1);}['setExterna'+'lNodes'](_0x473ed3,_0x46ac8b){if(!_0x473ed3){console['error']('The\x20firstN'+'ode\x20must\x20b'+'e\x20a\x20valid\x20'+'Audio\x20Node');return;}_0x46ac8b||(_0x46ac8b=_0x473ed3);const _0x25623a=this['_manager']['context']['destinatio'+'n'];this['_firstNode']!==_0x473ed3&&(this['_firstNode']?this['_connector'+'Node']['disconnect'](this['_firstNode']):this['_connector'+'Node']['disconnect'](_0x25623a),this['_firstNode']=_0x473ed3,this['_connector'+'Node']['connect'](_0x473ed3)),this['_lastNode']!==_0x46ac8b&&(this['_lastNode']&&this['_lastNode']['disconnect'](_0x25623a),this['_lastNode']=_0x46ac8b,this['_lastNode']['connect'](_0x25623a));}['clearExter'+'nalNodes'](){const _0x5bae74=this['_manager']['context']['destinatio'+'n'];this['_firstNode']&&(this['_connector'+'Node']['disconnect'](this['_firstNode']),this['_firstNode']=null),this['_lastNode']&&(this['_lastNode']['disconnect'](_0x5bae74),this['_lastNode']=null),this['_connector'+'Node']['connect'](_0x5bae74);}['getExterna'+'lNodes'](){return[this['_firstNode'],this['_lastNode']];}['_createSou'+'rce'](){if(!this['_sound'])return null;const _0x2a7b7a=this['_manager']['context'];return this['_sound']['buffer']&&(this['source']=_0x2a7b7a['createBuff'+'erSource'](),this['source']['buffer']=this['_sound']['buffer'],this['source']['connect'](this['_inputNode']),this['source']['onended']=this['_endedHand'+'ler'],this['source']['loopStart']=es(this['_startTime'],this['source']['buffer']['duration']),this['_duration']&&(this['source']['loopEnd']=Math['max'](this['source']['loopStart'],es(this['_startTime']+this['_duration'],this['source']['buffer']['duration'])))),this['source'];}['_updateCur'+'rentTime'](){this['_currentTi'+'me']=es((this['_manager']['context']['currentTim'+'e']-this['_startedAt'])*this['_pitch']+this['_currentOf'+'fset'],this['duration']);}['_onManager'+'Destroy'](){this['source']&&this['_state']===Zt&&(this['source']['stop'](0x234b+0xa0a*-0x1+0x86b*-0x3),this['source']=null);}}h(As,'EVENT_PLAY','play'),h(As,'EVENT_PAUS'+'E','pause'),h(As,'EVENT_RESU'+'ME','resume'),h(As,'EVENT_STOP','stop'),h(As,'EVENT_END','end'),Dl()||(Object['assign'](As['prototype'],{'play':function(){return this['_state']!==Hs&&this['stop'](),!this['source']&&!this['_createSou'+'rce']()?!(-0x8ef*0x2+-0x5e5*0x1+0x17c4):(this['volume']=this['_volume'],this['pitch']=this['_pitch'],this['loop']=this['_loop'],this['source']['play'](),this['_state']=Zt,this['_playWhenL'+'oaded']=!(-0x692+0x123e+-0xbab),this['_manager']['on']('volumechan'+'ge',this['_onManager'+'VolumeChan'+'ge'],this),this['_manager']['on']('suspend',this['_onManager'+'Suspend'],this),this['_manager']['on']('resume',this['_onManager'+'Resume'],this),this['_manager']['on']('destroy',this['_onManager'+'Destroy'],this),this['_manager']['suspended']&&this['_onManager'+'Suspend'](),this['_suspendIn'+'stanceEven'+'ts']||this['_onPlay'](),!(0x246d+-0x15a9+-0xec4));},'pause':function(){return!this['source']||this['_state']!==Zt?!(0x26b*-0xb+0x1553+0x547):(this['_suspendEn'+'dEvent']++,this['source']['pause'](),this['_playWhenL'+'oaded']=!(-0x2*-0xaf7+0x1f9a+-0x3587),this['_state']=fn,this['_startOffs'+'et']=null,this['_suspendIn'+'stanceEven'+'ts']||this['_onPause'](),!(-0x4*0x761+-0x314*0x1+0x2098));},'resume':function(){return!this['source']||this['_state']!==fn?!(0x1cec+0xb7*0xb+0xb*-0x358):(this['_state']=Zt,this['_playWhenL'+'oaded']=!(-0x1f9a*-0x1+0xa76+-0x2a0f),this['source']['paused']&&(this['source']['play'](),this['_suspendIn'+'stanceEven'+'ts']||this['_onResume']()),!(0x296+-0x814+-0x25*-0x26));},'stop':function(){return!this['source']||this['_state']===Hs?!(-0xbd2+0x4*-0x491+0x1e17):(this['_manager']['off']('volumechan'+'ge',this['_onManager'+'VolumeChan'+'ge'],this),this['_manager']['off']('suspend',this['_onManager'+'Suspend'],this),this['_manager']['off']('resume',this['_onManager'+'Resume'],this),this['_manager']['off']('destroy',this['_onManager'+'Destroy'],this),this['_suspendEn'+'dEvent']++,this['source']['pause'](),this['_playWhenL'+'oaded']=!(-0x8b*-0x17+0xd7*0x2d+-0xd3*0x3d),this['_state']=Hs,this['_startOffs'+'et']=null,this['_suspendIn'+'stanceEven'+'ts']||this['_onStop'](),!(0x2ae*0x1+-0x2*0x632+0x9b6));},'setExternalNodes':function(){},'clearExternalNodes':function(){},'getExternalNodes':function(){return[null,null];},'_onLoadedMetadata':function(){this['source']['removeEven'+'tListener']('loadedmeta'+'data',this['_loadedMet'+'adataHandl'+'er']),this['_isReady']=!(-0x16d7*0x1+0xb*-0x279+-0x501*-0xa);let _0x44f79a=es(this['_startOffs'+'et'],this['duration']);_0x44f79a=es(this['_startTime']+_0x44f79a,this['_sound']['duration']),this['_startOffs'+'et']=null,this['source']['currentTim'+'e']=_0x44f79a;},'_createSource':function(){return this['_sound']&&this['_sound']['audio']&&(this['_isReady']=!(0x19a4+-0x6*0x168+-0x11*0x103),this['source']=this['_sound']['audio']['cloneNode'](!(-0x73*-0x1e+0x12d7+-0x2051)),this['source']['addEventLi'+'stener']('loadedmeta'+'data',this['_loadedMet'+'adataHandl'+'er']),this['source']['addEventLi'+'stener']('timeupdate',this['_timeUpdat'+'eHandler']),this['source']['onended']=this['_endedHand'+'ler']),this['source'];},'_onTimeUpdate':function(){this['_duration']&&this['source']['currentTim'+'e']>es(this['_startTime']+this['_duration'],this['source']['duration'])&&(this['loop']?this['source']['currentTim'+'e']=es(this['_startTime'],this['source']['duration']):(this['source']['removeEven'+'tListener']('timeupdate',this['_timeUpdat'+'eHandler']),this['source']['pause'](),this['_onEnded']()));},'_onManagerDestroy':function(){this['source']&&this['source']['pause']();}}),Object['defineProp'+'erty'](As['prototype'],'volume',{'get':function(){return this['_volume'];},'set':function(_0x106ba4){_0x106ba4=Y['clamp'](_0x106ba4,-0x940+0xc73*0x2+0x2*-0x7d3,0x193e+0x18c7+-0x184*0x21),this['_volume']=_0x106ba4,this['source']&&(this['source']['volume']=_0x106ba4*this['_manager']['volume']);}}),Object['defineProp'+'erty'](As['prototype'],'pitch',{'get':function(){return this['_pitch'];},'set':function(_0x578fd4){this['_pitch']=Math['max'](Number(_0x578fd4)||-0x1633+-0x2*-0xa34+0x9*0x33,0xde+0x242d+0x57*-0x6d+0.01),this['source']&&(this['source']['playbackRa'+'te']=this['_pitch']);}}),Object['defineProp'+'erty'](As['prototype'],'sound',{'get':function(){return this['_sound'];},'set':function(_0x424d6e){this['stop'](),this['_sound']=_0x424d6e;}}),Object['defineProp'+'erty'](As['prototype'],'currentTim'+'e',{'get':function(){return this['_startOffs'+'et']!==null?this['_startOffs'+'et']:this['_state']===Hs||!this['source']?-0x7*-0x4e6+0xf0*-0x16+-0x9f*0x16:this['source']['currentTim'+'e']-this['_startTime'];},'set':function(_0x53a88e){_0x53a88e<0x2*0x581+0x26*-0x6+-0xa1e||(this['_startOffs'+'et']=_0x53a88e,this['source']&&this['_isReady']&&(this['source']['currentTim'+'e']=es(this['_startTime']+es(_0x53a88e,this['duration']),this['_sound']['duration']),this['_startOffs'+'et']=null));}}));const Dw=-0x3ad+-0xe1d*-0x3+0x66;class sn extends As{constructor(_0x41851c,_0x27dc71,_0x1aa1d2={}){super(_0x41851c,_0x27dc71,_0x1aa1d2),h(this,'_position',new D()),h(this,'_velocity',new D()),(_0x1aa1d2['position']&&(this['position']=_0x1aa1d2['position']),this['maxDistanc'+'e']=_0x1aa1d2['maxDistanc'+'e']!==void(-0x1*-0x10bb+-0x205*-0x1+-0xc8*0x18)?Number(_0x1aa1d2['maxDistanc'+'e']):Dw,this['refDistanc'+'e']=_0x1aa1d2['refDistanc'+'e']!==void(-0x105f*-0x1+0x18*0x3+0x93*-0x1d)?Number(_0x1aa1d2['refDistanc'+'e']):-0x88*-0x1+-0x3b*0x49+-0x413*-0x4,this['rollOffFac'+'tor']=_0x1aa1d2['rollOffFac'+'tor']!==void(-0xfbb+0x21ab*0x1+-0x11f0)?Number(_0x1aa1d2['rollOffFac'+'tor']):-0x2643+-0x1a4+0x27e8,this['distanceMo'+'del']=_0x1aa1d2['distanceMo'+'del']!==void(-0x1*-0x1ffd+-0x151*0x19+-0xec*-0x1)?_0x1aa1d2['distanceMo'+'del']:Vp);}['_initializ'+'eNodes'](){this['gain']=this['_manager']['context']['createGain'](),this['panner']=this['_manager']['context']['createPann'+'er'](),this['panner']['connect'](this['gain']),this['_inputNode']=this['panner'],this['_connector'+'Node']=this['gain'],this['_connector'+'Node']['connect'](this['_manager']['context']['destinatio'+'n']);}set['position'](_0x20fbc6){this['_position']['copy'](_0x20fbc6);const _0x240efa=this['panner'];'positionX'in _0x240efa?(_0x240efa['positionX']['value']=_0x20fbc6['x'],_0x240efa['positionY']['value']=_0x20fbc6['y'],_0x240efa['positionZ']['value']=_0x20fbc6['z']):_0x240efa['setPositio'+'n']&&_0x240efa['setPositio'+'n'](_0x20fbc6['x'],_0x20fbc6['y'],_0x20fbc6['z']);}get['position'](){return this['_position'];}set['velocity'](_0x3617cf){w['warn']('SoundInsta'+'nce3d#velo'+'city\x20is\x20no'+'t\x20implemen'+'ted.'),this['_velocity']['copy'](_0x3617cf);}get['velocity'](){return w['warn']('SoundInsta'+'nce3d#velo'+'city\x20is\x20no'+'t\x20implemen'+'ted.'),this['_velocity'];}set['maxDistanc'+'e'](_0x552406){this['panner']['maxDistanc'+'e']=_0x552406;}get['maxDistanc'+'e'](){return this['panner']['maxDistanc'+'e'];}set['refDistanc'+'e'](_0x54c634){this['panner']['refDistanc'+'e']=_0x54c634;}get['refDistanc'+'e'](){return this['panner']['refDistanc'+'e'];}set['rollOffFac'+'tor'](_0x5db7d3){this['panner']['rolloffFac'+'tor']=_0x5db7d3;}get['rollOffFac'+'tor'](){return this['panner']['rolloffFac'+'tor'];}set['distanceMo'+'del'](_0x501930){this['panner']['distanceMo'+'del']=_0x501930;}get['distanceMo'+'del'](){return this['panner']['distanceMo'+'del'];}}if(!Dl()){let l=new D();const t=function(_0x514ed4,_0x296c34,_0x3c24f1,_0x1881e2,_0x52df15,_0x871eb3){l=l['sub2'](_0x514ed4,_0x296c34);const _0x116062=l['length']();if(_0x116062<_0x3c24f1)return-0x8*-0x2d0+-0x25*0x55+-0x2*0x51b;if(_0x116062>_0x1881e2)return 0x5a0+0x1aec+-0x208c;let _0x5e0775=-0xbb*0x11+-0x96d*0x1+0x576*0x4;return _0x871eb3===Vp?_0x5e0775=-0x6ad*0x2+-0x58f+0x2*0x975-_0x52df15*(_0x116062-_0x3c24f1)/(_0x1881e2-_0x3c24f1):_0x871eb3===bw?_0x5e0775=_0x3c24f1/(_0x3c24f1+_0x52df15*(_0x116062-_0x3c24f1)):_0x871eb3===Aw&&(_0x5e0775=Math['pow'](_0x116062/_0x3c24f1,-_0x52df15)),Y['clamp'](_0x5e0775,-0x2fb+0x9*-0x1f2+0x147d,0x131f+-0x1462+0x144);};Object['defineProp'+'erty'](sn['prototype'],'position',{'get':function(){return this['_position'];},'set':function(_0x145598){if(this['_position']['copy'](_0x145598),this['source']){const _0x41cd9f=this['_manager']['listener']['getPositio'+'n'](),_0x2a35ee=t(_0x41cd9f,this['_position'],this['refDistanc'+'e'],this['maxDistanc'+'e'],this['rollOffFac'+'tor'],this['distanceMo'+'del']),_0x36ae51=this['volume'];this['source']['volume']=_0x36ae51*_0x2a35ee*this['_manager']['volume'];}}}),Object['defineProp'+'erty'](sn['prototype'],'maxDistanc'+'e',{'get':function(){return this['_maxDistan'+'ce'];},'set':function(_0x2b287c){this['_maxDistan'+'ce']=_0x2b287c;}}),Object['defineProp'+'erty'](sn['prototype'],'refDistanc'+'e',{'get':function(){return this['_refDistan'+'ce'];},'set':function(_0xc3ed06){this['_refDistan'+'ce']=_0xc3ed06;}}),Object['defineProp'+'erty'](sn['prototype'],'rollOffFac'+'tor',{'get':function(){return this['_rollOffFa'+'ctor'];},'set':function(_0x268380){this['_rollOffFa'+'ctor']=_0x268380;}}),Object['defineProp'+'erty'](sn['prototype'],'distanceMo'+'del',{'get':function(){return this['_distanceM'+'odel'];},'set':function(_0x79b30c){this['_distanceM'+'odel']=_0x79b30c;}});}const Gp=0x6*-0x2a2+-0x172e+-0xcfe*-0x3,Hp=-0x6aa*-0x2+-0x313*-0x7+-0x22d8,Zs=0xb9+0x3*0xa0f+-0x1ee4,Cs=-0x91*-0x43+0x2*0x4ac+-0x2f48,Gn=0x1c*-0x14d+-0x1843*0x1+0x1*0x3cb3,Wp=0x1*-0x101f+-0x1bdc+0x8*0x580,Ed=0xf07+0x1*-0x839+0x4*-0x1b2,$p=0x445*-0x1+0x8*-0x117+0xd04,Xp=0x1*0x301+-0xaf0+-0x7f7*-0x1,qp=-0x184e+-0x22bf+-0x3*-0x13b2,jp=0x1*0x22f3+-0x63c+-0x1cad,Yy={[Gp]:'SUBTRACTIV'+'E',[Hp]:'ADDITIVE',[Zs]:'NORMAL',[Cs]:'NONE',[Gn]:'PREMULTIPL'+'IED',[Wp]:'MULTIPLICA'+'TIVE',[Ed]:'ADDITIVEAL'+'PHA',[$p]:'MULTIPLICA'+'TIVE2X',[Xp]:'SCREEN',[qp]:'MIN',[jp]:'MAX'},Kn='none',Iw='linear',Lw=-0x2df+0x1ead+-0x1bce,Yp=-0x109a+0x116b+-0xcf*0x1,Rw={[Lw]:'NONE',[Yp]:'SCHLICK'},Ow=-0x38d+0x648*-0x6+0x293d,Ky=0x7a7+-0x1e65+0x16cd*0x1,er=0x2a*0xa4+-0x121*-0xb+-0x2753,ps=0xce5*-0x1+-0x653*-0x3+-0x613*0x1,Kp=-0xd14+0x49*-0x16+-0x162*-0xe,Zp=-0x1be+-0x329*0x5+-0xd6*-0x15,Il=-0x4*-0x1ba+0x11*-0x65+-0x2f,ve=0xe20+0x9d9*-0x1+-0xdb*0x5,Ke=-0x1d53*-0x1+-0x53*-0x1d+-0x26b9,Ze=-0x69*0x2+0x29*-0x31+0x8ad,u_={[ve]:'DIRECTIONA'+'L',[Ke]:'OMNI',[Ze]:'SPOT'},$c=-0x1756+-0x24*0x63+0x25a6,Ys=0xd*0xd+0x67b*-0x3+0x8*0x259,Zy=0xd3*-0xd+0x1d8b+-0x12d3,Qy=0x16ba+-0x1*-0x123c+0x147a*-0x2,Jy=-0x257*-0x2+0x1033+-0x14de,Fw={[Ys]:'PUNCTUAL',[Zy]:'RECT',[Qy]:'DISK',[Jy]:'SPHERE'},Qp=-0x1ba1*-0x1+0x1*-0x1e60+0x2bf,ev=-0x788+0x2*-0x1222+0x2bcd,Nw={[Qp]:'LINEAR',[ev]:'INVERSESQU'+'ARED'},$s=-0x1056+-0x2180+-0x1*-0x31d6,au=0x23e*-0xa+-0x1c97+-0x1*-0x3305,Jp=0x1784+0xebb+-0x263c,kw=0x1f6f+-0x2398+0x42d,tv=-0x1598*0x1+0xa3d+0x70*0x1a,al=-0xb6*-0x31+0x219*-0x6+-0x5*0x472,sv=0xf*0x101+0x72*-0x4f+0x1426,iv=0x48*0x7f+0x1d58+-0x4108,Uw=-0x1204+0x10f0+0x11d,qi=new Map([[tv,{'name':'PCF1_32F','kind':'PCF1','format':$i,'pcf':!(-0x2246+0x1cf*0x11+0x1*0x387)}],[$s,{'name':'PCF3_32F','kind':'PCF3','format':$i,'pcf':!(-0x6*0x623+-0x1a5+0x2677)}],[kw,{'name':'PCF5_32F','kind':'PCF5','format':$i,'pcf':!(-0x29d+-0x18e+0x42b)}],[sv,{'name':'PCF1_16F','kind':'PCF1','format':vn,'pcf':!(0x1c6*0xd+0xaaf*0x2+-0x1*0x2c6c)}],[iv,{'name':'PCF3_16F','kind':'PCF3','format':vn,'pcf':!(-0x9c5+-0x19f6+0x3*0xbe9)}],[Uw,{'name':'PCF5_16F','kind':'PCF5','format':vn,'pcf':!(0x7*-0xfa+0x1a3b+-0x1365)}],[au,{'name':'VSM_16F','kind':'VSM','format':nt,'vsm':!(-0xdb*-0xd+0x1f0a+-0x1*0x2a29)}],[Jp,{'name':'VSM_32F','kind':'VSM','format':Xt,'vsm':!(-0x21a7+0xf96+-0x25*-0x7d)}],[al,{'name':'PCSS_32F','kind':'PCSS','format':Ji,'pcss':!(-0x967*0x2+0x1*-0x1d00+0x1a6*0x1d)}]]),Bw=0x2*-0x75e+0x625*-0x5+-0x2*-0x173a,em=-0x77*-0x2f+0x1bd*-0x9+0x17*-0x45,nu=0x7a1+-0x11*0x5+-0x74c,rv=0x108c+0x161*-0x10+-0x161*-0x4,ai=0x107b+-0x10b3+0xe*0x4,zw=-0xe83*-0x1+-0x2341+0x14bf,yh=0x23a9*0x1+-0x2ae*0x2+-0x1e4d,Vw=-0x17e+-0x23*0xf4+0x22db,ni=-0x83*0x26+-0x1a91+0x2e03,En=0x2251+0x1754+-0x39a4,un=0x1717+-0x2225*-0x1+0xc*-0x4c5,$r=-0x78b*0x3+0x22d0+-0xc2e,Jl=0x176+-0x1809+0x8d*0x29,tm=-0x407*0x3+-0x8df+0x14f4*0x1,av=0x1f*-0xfb+-0x1b2a+0xe64*0x4,Gw={[tm]:'NONE',[av]:'BOX'},p_='mul',Ll=0xa*0x3b5+0x1539+-0x3a4b,Xc=0x207d*-0x1+-0x3f2+0x2470,Hw={[Ll]:'NONE',[Xc]:'SRGB'},sm=-0xdce+0x25b0+0x3fb*-0x6,UU=0x1*-0xcb5+-0xe6b*0x2+0x298c,BU=-0x1*0x11af+0x3f3*-0x1+-0xa*-0x22a,zU=-0x17f*0x11+0x9bf+-0xfb3*-0x1,VU=-0x1802+-0x1647+-0x3*-0xf6f,GU=0xe2c+-0x3c6*0x1+-0x1*0xa61,nv=0x471*0x5+0x6da+-0x1d09,ov=['LINEAR','FILMIC','HEJL','ACES','ACES2','NEUTRAL','NONE'],lv=0x144c+-0x1987+0x53b,bd=-0x1*-0xc25+-0x5b+-0xbc9,cv=0x199+0x172c+-0x18c3,Ww={[lv]:'NONE',[bd]:'AO',[cv]:'GLOSSDEPEN'+'DENT'},vr='none',vh='envAtlas',xh='envAtlasHQ',Th='cubeMap',hv='sphereMap',$w={[vr]:'NONE',[vh]:'ENVATLAS',[xh]:'ENVATLASHQ',[Th]:'CUBEMAP',[hv]:'SPHEREMAP'},im='ambientSH',rm='envAtlas',am='constant',Xw={[im]:'AMBIENTSH',[rm]:'ENVALATLAS',[am]:'CONSTANT'},wh=0x23a5+0x2*-0xe3+-0x21de,nl=0x62e+-0x101*0x25+0x1ef9,nm=0x1380+-0x156*0x11+0x33a,dv=-0x1caf+0x722+0x1595,fv=-0x1ce+0x2014+-0x6*0x509,ol=-0x16ff+0x1*-0x269b+0x3dba,ou=0x1247+-0xdf4+-0x413,uv=-0x1297+0x1e27+-0xb10,Eh=-0x5*0x37f+0xed1+-0x86*-0x7,om=0x1df*-0x10+0x6d*0xc+0x1ad4,ll=-0x1*-0x1a0b+-0xd*-0xca+-0x204d,cl=0x367*-0x1+0x2f*0x35+0x1ac*0x1,pv=-0x71*0x7+-0xcf0+0x2007,hl=0x3ab7+-0x386f+0x1db8,qc=0x2ff*-0x26+0x60d3*-0x1+0x112ad,Ps=0xe07+-0x1c96+-0xe8f*-0x1,xr=-0x1a11+-0x1f03*0x1+0x3915,lm=0x1e31+-0xfc7+-0xe68,Ss=0x22a6+-0x338+-0x1f6d,di=-0x1d46+-0xe64+0x1ae*0x1a,fi=-0x5bf+-0x17bc+0x1d7f,Aa=0x8d5+-0x62d+0x11*-0x28,Rl=0x18fa+-0x3*-0x833+-0x3192,cm=-0x1*0x2345+-0x2*0x2f1+-0x1*-0x2929,Zn=0x9*-0x3f8+-0x210a+-0x23*-0x1f7,ci=0x16*-0xa6+0x4d5*0x6+0x1*-0xeba,Pt=-0x24d5*-0x1+0x2116+-0x45ea,Mt=0x5d8+0x1580+-0x1b56,qw={[ci]:'SIMPLE',[Pt]:'SLICED',[Mt]:'TILED'},jc=0x20aa+0x10e1+-0x318a,ec=0x7a2+0x1*0x2559+-0x2cfb,Yc=-0x23a+0xfd7*-0x2+0x21e8,jw=-0x239c+0x1ea8+0x4f5,Yw=-0x207f+0x2043+0x1*0x3e,m_=0x1ff4+0x19e6+-0xdd*0x43,Kw=0x151e+-0x4e0*0x3+0x2*-0x33d,Zw=0x1c87+0x16ec+-0x3a*0xe3,hm=0x5ce*0x3+-0x3*-0x2cf+-0x19d7,lu=0x1634+-0x8d4+-0xd5f,Ce=-0xa6f+0x1148+-0x6d9,je=0x108*0x22+0x4d1+-0x27e0,Bo='infinite',Qw='box',Jw='dome',Sa='none',eE='bayer8',tE='bluenoise',sE='ignnoise',iE={[Sa]:'NONE',[eE]:'BAYER8',[tE]:'BLUENOISE',[sE]:'IGNNOISE'},rE='prerender',aE='postrender',nE='prerender:'+'layer',oE='postrender'+':layer',mv='precull',_v='postcull',lE='cull:end';class Ad{constructor(_0x33a996,_0x352399,_0x31156a){h(this,'uniformFor'+'mats',[]),h(this,'bindGroupF'+'ormats',[]),h(this,'vertexForm'+'at'),(this['uniformFor'+'mats'][rl]=_0x33a996,this['bindGroupF'+'ormats'][rl]=_0x352399,this['vertexForm'+'at']=_0x31156a);}['hasUniform'](_0x31cc40){for(let _0x2ea94b=-0x315*0xa+-0x18d4+-0x1a3*-0x22;_0x2ea94b<this['uniformFor'+'mats']['length'];_0x2ea94b++){const _0xc38808=this['uniformFor'+'mats'][_0x2ea94b];if(_0xc38808!=null&&_0xc38808['get'](_0x31cc40))return!(0x8d*-0x40+-0x1054+0x3394);}return!(-0x1*0x19d1+0x1*0x1c74+-0x1*0x2a2);}['hasTexture'](_0x5e3484){for(let _0x1dd812=0x1*-0x21d6+0x161a+-0x4*-0x2ef;_0x1dd812<this['bindGroupF'+'ormats']['length'];_0x1dd812++){const _0x1d284f=this['bindGroupF'+'ormats'][_0x1dd812];if(_0x1d284f!=null&&_0x1d284f['getTexture'](_0x5e3484))return!(0x4e*0x2a+0x1990+0x997*-0x4);}return!(-0x319*0x3+-0x44*-0x74+-0x1584);}['getVertexE'+'lement'](_0x2d2cac){var _0x30d4f4;return(_0x30d4f4=this['vertexForm'+'at'])==null?void(0x267a+0x15b*0x1b+0x1*-0x4b13):_0x30d4f4['elements']['find'](_0x339b90=>_0x339b90['name']===_0x2d2cac);}['generateKe'+'y'](_0x2f5de2){var _0x13c7b5;let _0x2e7cce=JSON['stringify'](this['uniformFor'+'mats'])+JSON['stringify'](this['bindGroupF'+'ormats']);return _0x2f5de2['isWebGPU']&&(_0x2e7cce+=(_0x13c7b5=this['vertexForm'+'at'])==null?void(0x1*0x1aac+0xf*-0x17+-0x1953):_0x13c7b5['shaderProc'+'essingHash'+'String']),_0x2e7cce;}}const gv=new Kt();function Hn(_0x302bce){const _0x268328=gv['get'](_0x302bce);return w['assert'](_0x268328),_0x268328;}function cE(_0x70edca,_0x185f40){w['assert'](_0x185f40),gv['get'](_0x70edca,()=>_0x185f40);}class ya{static['definesHas'+'h'](_0x2ed171){const _0x3418ea=Array['from'](_0x2ed171)['sort']((_0x502fdf,_0x40c3f5)=>_0x502fdf[-0x84*0x35+-0x13*-0x1d+0x192d]>_0x40c3f5[-0x1d51+-0x11*0x8e+0x26bf]?-0xdb*-0x13+0xee6+-0x1f26:-(-0x173*0x11+-0x10be*0x1+0x14b1*0x2));return hi(JSON['stringify'](_0x3418ea));}}const hE=new Kt();class dE{constructor(_0x21d920,_0x7810a9,_0x303966={}){h(this,'index'),h(this,'name'),h(this,'defines',new Map()),(w['assert'](/^[a-z]\w*$/i['test'](_0x21d920),'ShaderPass'+'\x20name\x20can\x20'+'only\x20conta'+'in\x20letters'+',\x20numbers\x20'+'and\x20unders'+'cores\x20and\x20'+'start\x20with'+'\x20a\x20letter:'+'\x20'+_0x21d920),this['name']=_0x21d920,this['index']=_0x7810a9,Object['assign'](this,_0x303966),this['buildShade'+'rDefines']());}['buildShade'+'rDefines'](){let _0x41ab4f;this['isShadow']?_0x41ab4f='SHADOW':this['isForward']?_0x41ab4f='FORWARD':this['index']===Zn&&(_0x41ab4f='PICK'),this['defines']['set'](_0x41ab4f+'_PASS',''),this['defines']['set'](this['name']['toUpperCas'+'e']()+'_PASS','');}}class Si{constructor(){h(this,'passesName'+'d',new Map()),h(this,'passesInde'+'xed',[]),h(this,'nextIndex',-0x1fc4+0x151b+0x1*0xaa9);const _0x59e00f=(_0x749f14,_0x583ba6,_0xd7bbce)=>{const _0x496644=this['allocate'](_0x749f14,_0xd7bbce);w['assert'](_0x496644['index']===_0x583ba6);};_0x59e00f('forward',Aa,{'isForward':!(-0x81f+-0x13f*-0x15+-0x1e*0x9a)}),_0x59e00f('prepass',Rl),_0x59e00f('shadow',cm),_0x59e00f('pick',Zn);}static['get'](_0x14b8bc){return w['assert'](_0x14b8bc),hE['get'](_0x14b8bc,()=>new Si());}['allocate'](_0x3ae37f,_0x49d66e){let _0x58b562=this['passesName'+'d']['get'](_0x3ae37f);return _0x58b562===void(-0x1*0x26c4+0x25a0+0x4*0x49)&&(_0x58b562=new dE(_0x3ae37f,this['nextIndex'],_0x49d66e),this['passesName'+'d']['set'](_0x58b562['name'],_0x58b562),this['passesInde'+'xed'][_0x58b562['index']]=_0x58b562,this['nextIndex']++),_0x58b562;}['getByIndex'](_0x541c6b){const _0x551ccd=this['passesInde'+'xed'][_0x541c6b];return w['assert'](_0x551ccd),_0x551ccd;}['getByName'](_0x584f5a){return this['passesName'+'d']['get'](_0x584f5a);}}class __ extends Map{constructor(){super(...arguments),h(this,'_keyDirty',!(-0x2*-0xab3+0x4b1+-0x1*0x1a16)),h(this,'_key','');}['set'](_0x214e2b,_0x332528){return(!this['has'](_0x214e2b)||this['get'](_0x214e2b)!==_0x332528)&&this['markDirty'](),super['set'](_0x214e2b,_0x332528);}['add'](_0x127d7d){for(const [_0x5168ab,_0x5f0e0b]of Object['entries'](_0x127d7d))this['set'](_0x5168ab,_0x5f0e0b);return this;}['delete'](_0x2bcb99){const _0x5934f6=this['has'](_0x2bcb99),_0x28e96b=super['delete'](_0x2bcb99);return _0x5934f6&&_0x28e96b&&this['markDirty'](),_0x28e96b;}['clear'](){this['size']>-0x743+0xac2+0x5*-0xb3&&this['markDirty'](),super['clear']();}['markDirty'](){this['_dirty']=!(-0x235c+-0x2b*0xda+0x47fa),this['_keyDirty']=!(-0x12ad+0x8*-0x495+0x3755);}['isDirty'](){return this['_dirty'];}['resetDirty'](){this['_dirty']=!(0x1*-0xf5+0x4*0x4d8+-0x935*0x2);}get['key'](){return this['_keyDirty']&&(this['_keyDirty']=!(-0x4*-0x45+-0x1*0x2d4+0x1c1),this['_key']=Array['from'](this['entries']())['sort'](([_0x5db15a],[_0xd0c29a])=>_0x5db15a<_0xd0c29a?-(-0x15d3+-0x5e7*0x5+0x3357):_0x5db15a>_0xd0c29a?0x1*-0x1274+0x2*-0x48f+0x1b93:0xa2e+0x403*0x9+-0x2e49)['map'](([_0x27f850,_0x285eed])=>_0x27f850+'='+hi(_0x285eed))['join'](',')),this['_key'];}['copy'](_0x57e3a1){this['clear']();for(const [_0x3ad0e2,_0x4b0305]of _0x57e3a1)this['set'](_0x3ad0e2,_0x4b0305);return this;}}const fE=new Kt();class Pe{constructor(){h(this,'glsl',new __()),h(this,'wgsl',new __()),h(this,'version','');}static['get'](_0x20fddb,_0x4168b3=Fe){const _0x173773=fE['get'](_0x20fddb,()=>new Pe());return _0x4168b3===Fe?_0x173773['glsl']:_0x173773['wgsl'];}get['useWGSL'](){return this['glsl']['size']===-0x24d+-0x99*0x3e+-0x19*-0x193||this['wgsl']['size']>0x1*-0x13d+-0x1a43+-0x16*-0x140;}get['key'](){return'GLSL:'+this['glsl']['key']+'|WGSL:'+this['wgsl']['key']+'|API:'+this['version'];}['isDirty'](){return this['glsl']['isDirty']()||this['wgsl']['isDirty']();}['resetDirty'](){this['glsl']['resetDirty'](),this['wgsl']['resetDirty']();}['copy'](_0x17ea32){return this['version']=_0x17ea32['version'],this['glsl']['copy'](_0x17ea32['glsl']),this['wgsl']['copy'](_0x17ea32['wgsl']),this;}}class bh{static['merge'](..._0x3b8b55){const _0x5e92af=new Map(_0x3b8b55[-0xc8b+0x17e4+0x53*-0x23]??[]);for(let _0x1db207=-0x2024+0x3*-0xc33+-0x7*-0x9d2;_0x1db207<_0x3b8b55['length'];_0x1db207++){const _0xb7c84f=_0x3b8b55[_0x1db207];if(_0xb7c84f){for(const [_0x2fbf71,_0x5ddf3e]of _0xb7c84f)_0x5e92af['set'](_0x2fbf71,_0x5ddf3e);}}return _0x5e92af;}}class uE extends ya{constructor(_0x27b26a,_0x21c997){super(),this['key']=_0x27b26a,this['shaderDefi'+'nition']=_0x21c997;}['generateKe'+'y'](_0x7485be){return this['key'];}['createShad'+'erDefiniti'+'on'](_0x150038,_0xbbfaef){return this['shaderDefi'+'nition'];}}class $t{static['createShad'+'er'](_0x5f4367,_0x1a4ac2){const _0x41c7d9=Hn(_0x5f4367);let _0x159caa=_0x41c7d9['getCachedS'+'hader'](_0x1a4ac2['uniqueName']);if(!_0x159caa){const _0x4dd18e=_0x5f4367['isWebGPU']&&(!!_0x1a4ac2['vertexWGSL']||!!_0x1a4ac2['vertexChun'+'k'])&&(!!_0x1a4ac2['fragmentWG'+'SL']||!!_0x1a4ac2['fragmentCh'+'unk']),_0x3cc120=Pe['get'](_0x5f4367,_0x4dd18e?it:Fe),_0x372444=_0x1a4ac2['vertexChun'+'k']?_0x3cc120['get'](_0x1a4ac2['vertexChun'+'k']):_0x4dd18e?_0x1a4ac2['vertexWGSL']:_0x1a4ac2['vertexGLSL'],_0x21b594=_0x1a4ac2['fragmentCh'+'unk']?_0x3cc120['get'](_0x1a4ac2['fragmentCh'+'unk']):_0x4dd18e?_0x1a4ac2['fragmentWG'+'SL']:_0x1a4ac2['fragmentGL'+'SL'];w['assert'](_0x372444,'ShaderUtil'+'s.createSh'+'ader:\x20vert'+'ex\x20shader\x20'+'code\x20not\x20p'+'rovided',_0x1a4ac2),w['assert'](_0x21b594,'ShaderUtil'+'s.createSh'+'ader:\x20frag'+'ment\x20shade'+'r\x20code\x20not'+'\x20provided',_0x1a4ac2);const _0x463573=bh['merge'](_0x3cc120,_0x1a4ac2['fragmentIn'+'cludes']),_0x15ab6e=bh['merge'](_0x3cc120,_0x1a4ac2['vertexIncl'+'udes']);_0x159caa=new qy(_0x5f4367,Jt['createDefi'+'nition'](_0x5f4367,{'name':_0x1a4ac2['uniqueName'],'shaderLanguage':_0x4dd18e?it:Fe,'attributes':_0x1a4ac2['attributes'],'vertexCode':_0x372444,'fragmentCode':_0x21b594,'useTransformFeedback':_0x1a4ac2['useTransfo'+'rmFeedback'],'vertexIncludes':_0x15ab6e,'vertexDefines':_0x1a4ac2['vertexDefi'+'nes'],'fragmentIncludes':_0x463573,'fragmentDefines':_0x1a4ac2['fragmentDe'+'fines'],'fragmentOutputTypes':_0x1a4ac2['fragmentOu'+'tputTypes']})),_0x41c7d9['setCachedS'+'hader'](_0x1a4ac2['uniqueName'],_0x159caa);}return _0x159caa;}static['getCoreDef'+'ines'](_0x2b959d,_0x79aad){const _0x38ec7d=new Map(_0x2b959d['defines']);return _0x79aad['cameraShad'+'erParams']['defines']['forEach']((_0x543fb3,_0x125f47)=>_0x38ec7d['set'](_0x125f47,_0x543fb3)),Si['get'](_0x79aad['device'])['getByIndex'](_0x79aad['pass'])['defines']['forEach']((_0x17542e,_0x104d15)=>_0x38ec7d['set'](_0x104d15,_0x17542e)),_0x38ec7d;}static['processSha'+'der'](_0x5c348e,_0x30c688){w['assert'](_0x5c348e);const _0x2ea27f=_0x5c348e['definition'],_0xf7356c=(_0x2ea27f['name']??'shader')+'-id-'+_0x5c348e['id'],_0xcc2adb=new uE(_0xf7356c,_0x2ea27f),_0x7da5a7='shader',_0x33075c=Hn(_0x5c348e['device']);w['assert'](!_0x33075c['isRegister'+'ed'](_0x7da5a7)),_0x33075c['register'](_0x7da5a7,_0xcc2adb);const _0x25c2a4=_0x33075c['getProgram'](_0x7da5a7,{},_0x30c688);return _0x33075c['unregister'](_0x7da5a7),_0x25c2a4;}static['addScreenD'+'epthChunkD'+'efines'](_0x172b50,_0x1ef494,_0x12fd1e){_0x1ef494['sceneDepth'+'MapLinear']&&_0x12fd1e['set']('SCENE_DEPT'+'HMAP_LINEA'+'R',''),_0x172b50['textureFlo'+'atRenderab'+'le']&&_0x12fd1e['set']('SCENE_DEPT'+'HMAP_FLOAT','');}}const pE={'type':Er,'base':0x0,'baseVertex':0x0,'count':0x4,'indexed':!(-0x1aa2+-0x1f7+0x1c9a)},so=new re(),io=new re(),Gd=new ky();class Ah{constructor(_0x1c37d1){h(this,'uniformBuf'+'fer'),h(this,'bindGroup');const _0x2ac8be=_0x1c37d1['device'];if(this['shader']=_0x1c37d1,w['assert'](_0x1c37d1),_0x2ac8be['supportsUn'+'iformBuffe'+'rs']){const _0x53614b=new Ad();this['shader']=$t['processSha'+'der'](_0x1c37d1,_0x53614b);const _0x15d08a=this['shader']['meshUnifor'+'mBufferFor'+'mat'];_0x15d08a&&(this['uniformBuf'+'fer']=new zp(_0x2ac8be,_0x15d08a,!(0x766+-0x3*0x822+0x1101)));const _0x44d0e8=this['shader']['meshBindGr'+'oupFormat'];w['assert'](_0x44d0e8),this['bindGroup']=new Up(_0x2ac8be,_0x44d0e8),Ea['setName'](this['bindGroup'],'QuadRender'+'-MeshBindG'+'roup_'+this['bindGroup']['id']);}}['destroy'](){var _0x3b1d39,_0x345b38;(_0x3b1d39=this['uniformBuf'+'fer'])==null||_0x3b1d39['destroy'](),this['uniformBuf'+'fer']=null,(_0x345b38=this['bindGroup'])==null||_0x345b38['destroy'](),this['bindGroup']=null;}['render'](_0x29281e,_0x5320a7){const _0x4cc5c3=this['shader']['device'];Q['pushGpuMar'+'ker'](_0x4cc5c3,'QuadRender'),_0x29281e&&(so['set'](_0x4cc5c3['vx'],_0x4cc5c3['vy'],_0x4cc5c3['vw'],_0x4cc5c3['vh']),io['set'](_0x4cc5c3['sx'],_0x4cc5c3['sy'],_0x4cc5c3['sw'],_0x4cc5c3['sh']),_0x5320a7=_0x5320a7??_0x29281e,_0x4cc5c3['setViewpor'+'t'](_0x29281e['x'],_0x29281e['y'],_0x29281e['z'],_0x29281e['w']),_0x4cc5c3['setScissor'](_0x5320a7['x'],_0x5320a7['y'],_0x5320a7['z'],_0x5320a7['w'])),_0x4cc5c3['setVertexB'+'uffer'](_0x4cc5c3['quadVertex'+'Buffer'],0x3b2+-0x10d4*-0x2+-0x255a);const _0x34e739=this['shader'];if(_0x4cc5c3['setShader'](_0x34e739),_0x4cc5c3['supportsUn'+'iformBuffe'+'rs']){_0x4cc5c3['setBindGro'+'up'](rl,_0x4cc5c3['emptyBindG'+'roup']);const _0x4dbcc1=this['bindGroup'];_0x4dbcc1['update'](),_0x4cc5c3['setBindGro'+'up'](Oy,_0x4dbcc1);const _0x4e4b53=this['uniformBuf'+'fer'];_0x4e4b53?(_0x4e4b53['update'](Gd),_0x4cc5c3['setBindGro'+'up'](su,Gd['bindGroup'],Gd['offsets'])):_0x4cc5c3['setBindGro'+'up'](su,_0x4cc5c3['emptyBindG'+'roup']);}_0x4cc5c3['draw'](pE),_0x29281e&&(_0x4cc5c3['setViewpor'+'t'](so['x'],so['y'],so['z'],so['w']),_0x4cc5c3['setScissor'](io['x'],io['y'],io['z'],io['w'])),Q['popGpuMark'+'er'](_0x4cc5c3);}}class mE extends ys{constructor(_0x4d2b05,_0x4651cd,_0x5c650f,_0x57f3a5){super(_0x4d2b05),this['quad']=_0x4651cd,this['rect']=_0x5c650f,this['scissorRec'+'t']=_0x57f3a5;}['execute'](){const {device:_0x2bb75e}=this;Q['pushGpuMar'+'ker'](_0x2bb75e,this['name']+':'+this['quad']['shader']['name']),_0x2bb75e['setCullMod'+'e'](bt),_0x2bb75e['setDepthSt'+'ate'](Yt['NODEPTH']),_0x2bb75e['setStencil'+'State'](null,null),this['quad']['render'](this['rect'],this['scissorRec'+'t']),Q['popGpuMark'+'er'](_0x2bb75e);}}const _E=new re();function Ar(_0x4474c7,_0x20b29d,_0x37b1bf,_0x34b4a1,_0x5ab88e){w['assert'](_0x20b29d!==void(-0xa8b+-0x136e+0x1df9));const _0x24b280=arguments[-0x1*-0x57+-0x25d*-0xf+0x23c5*-0x1];w['call'](()=>{_0x24b280!==void(0x25f*-0x7+-0x1*-0x122+0x6b*0x25)&&w['warnOnce']('pc.drawQua'+'dWithShade'+'r\x20no\x20longe'+'r\x20accepts\x20'+'useBlend\x20p'+'arameter,\x20'+'and\x20blendi'+'ng\x20state\x20n'+'eeds\x20to\x20be'+'\x20set\x20up\x20us'+'ing\x20Graphi'+'csDevice.s'+'etBlendSta'+'te.');});const _0x2168e9=new Ah(_0x37b1bf);_0x34b4a1||(_0x34b4a1=_E,_0x34b4a1['x']=0x1028+-0xf*0x10f+-0x47,_0x34b4a1['y']=0x20a2*-0x1+0x1*-0x1e9+-0x1*-0x228b,_0x34b4a1['z']=_0x20b29d?_0x20b29d['width']:_0x4474c7['width'],_0x34b4a1['w']=_0x20b29d?_0x20b29d['height']:_0x4474c7['height']);const _0x4d9b7d=new mE(_0x4474c7,_0x2168e9,_0x34b4a1,_0x5ab88e);_0x4d9b7d['init'](_0x20b29d),_0x4d9b7d['colorOps']['clear']=!(-0x22*-0x109+0x2607+-0xd5*0x58),_0x4d9b7d['depthStenc'+'ilOps']['clearDepth']=!(0x1*-0x1c03+-0x1f57+0x3b5b),_0x4474c7['isWebGPU']&&_0x20b29d===null&&_0x4474c7['samples']>-0x1*0x17e0+-0xaaf+0x1*0x2290&&(_0x4d9b7d['colorOps']['store']=!(0x1151+0x239*-0xa+0x4e9*0x1)),_0x4d9b7d['render'](),_0x2168e9['destroy']();}class g_{constructor(_0x8037ca,_0x3726cc,_0x57585f){h(this,'_aabb',new De()),h(this,'origMeshIn'+'stances'),h(this,'meshInstan'+'ce',null),h(this,'dynamic'),h(this,'batchGroup'+'Id'),(this['origMeshIn'+'stances']=_0x8037ca,this['dynamic']=_0x3726cc,this['batchGroup'+'Id']=_0x57585f);}['destroy'](_0x49e181,_0xaa8788){this['meshInstan'+'ce']&&(this['removeFrom'+'Layers'](_0x49e181,_0xaa8788),this['meshInstan'+'ce']['destroy'](),this['meshInstan'+'ce']=null);}['addToLayer'+'s'](_0x4bfeaa,_0x2483f0){for(let _0x51fa01=0x1*-0x1ba4+0x131a+0x88a;_0x51fa01<_0x2483f0['length'];_0x51fa01++){const _0x5be682=_0x4bfeaa['layers']['getLayerBy'+'Id'](_0x2483f0[_0x51fa01]);_0x5be682&&_0x5be682['addMeshIns'+'tances']([this['meshInstan'+'ce']]);}}['removeFrom'+'Layers'](_0x44b925,_0x4b4fbd){for(let _0x1cea66=0x1d46*-0x1+0x1e1d+-0x2b*0x5;_0x1cea66<_0x4b4fbd['length'];_0x1cea66++){const _0x51c8c7=_0x44b925['layers']['getLayerBy'+'Id'](_0x4b4fbd[_0x1cea66]);_0x51c8c7&&_0x51c8c7['removeMesh'+'Instances']([this['meshInstan'+'ce']]);}}['updateBoun'+'dingBox'](){this['_aabb']['copy'](this['origMeshIn'+'stances'][-0x243e+0x457+-0x1*-0x1fe7]['aabb']);for(let _0x42ced9=-0xc67+0x1*-0x2551+-0x31b9*-0x1;_0x42ced9<this['origMeshIn'+'stances']['length'];_0x42ced9++)this['_aabb']['add'](this['origMeshIn'+'stances'][_0x42ced9]['aabb']);this['meshInstan'+'ce']['aabb']=this['_aabb'],this['meshInstan'+'ce']['_aabbVer']=-0x3*-0xa55+-0x1ab3+0x19*-0x2c;}get['model'](){w['removed']('pc.Batch#m'+'odel\x20was\x20r'+'emoved.\x20Us'+'e\x20pc.Batch'+'#meshInsta'+'nce\x20to\x20acc'+'ess\x20batche'+'d\x20mesh\x20ins'+'tead.');}}class St{constructor(_0x4893c,_0x26ed66,_0x9bfd62,_0x590438,_0x355cec=[er]){h(this,'_ui',!(0x6a*0x1d+-0x61c+-0x3*0x1f7)),h(this,'_sprite',!(0x189f+0x1*-0x1dd6+-0x4*-0x14e)),h(this,'_obj',{'model':[],'element':[],'sprite':[],'render':[]}),h(this,'id'),h(this,'name'),h(this,'dynamic'),h(this,'maxAabbSiz'+'e'),h(this,'layers'),(this['id']=_0x4893c,this['name']=_0x26ed66,this['dynamic']=_0x9bfd62,this['maxAabbSiz'+'e']=_0x590438,this['layers']=_0x355cec);}}h(St,'MODEL','model'),h(St,'ELEMENT','element'),h(St,'SPRITE','sprite'),h(St,'RENDER','render');const S_=new te();class Ol{constructor(_0x334e11){h(this,'bones'),(this['_dirty']=!(-0xc65+0x130c+-0x6a7),this['_rootBone']=null,this['_skinUpdat'+'eIndex']=-(0x2bf+-0x5*0x1a9+0x1*0x58f),this['_updateBef'+'oreCull']=!(0x359*0xb+0x1da7+-0x427a),_0x334e11&&this['initSkin'](_0x334e11));}set['rootBone'](_0x4ba8d0){this['_rootBone']=_0x4ba8d0;}get['rootBone'](){return this['_rootBone'];}['init'](_0x2b88e7,_0x1c2721){const _0x445fcf=_0x1c2721*(0x15b9+-0x1f*0xd1+0x399);let _0x175305=Math['ceil'](Math['sqrt'](_0x445fcf));_0x175305=Y['roundUp'](_0x175305,-0x7e*0x1d+0x1f05+0x85e*-0x2);const _0x3bdf0f=Math['ceil'](_0x445fcf/_0x175305);this['boneTextur'+'e']=new _e(_0x2b88e7,{'width':_0x175305,'height':_0x3bdf0f,'format':Xt,'mipmaps':!(-0x164d+-0x2437+0x3a85),'minFilter':Te,'magFilter':Te,'name':'skin'}),this['matrixPale'+'tte']=this['boneTextur'+'e']['lock']({'mode':yy}),this['boneTextur'+'e']['unlock']();}['destroy'](){this['boneTextur'+'e']&&(this['boneTextur'+'e']['destroy'](),this['boneTextur'+'e']=null);}['resolve'](_0x261a86,_0x53d5af){this['rootBone']=_0x261a86;const _0xe4ea80=this['skin'],_0x263ab0=[];for(let _0x3d29a3=-0x6*-0x4c0+-0x1d64+0x2*0x72;_0x3d29a3<_0xe4ea80['boneNames']['length'];_0x3d29a3++){const _0x44e148=_0xe4ea80['boneNames'][_0x3d29a3];let _0x1bee55=_0x261a86['findByName'](_0x44e148);_0x1bee55||(w['error']('Failed\x20to\x20'+'find\x20bone\x20'+'['+_0x44e148+(']\x20in\x20the\x20e'+'ntity\x20hier'+'archy,\x20Ren'+'derCompone'+'nt\x20on\x20')+_0x53d5af['name']+(',\x20rootBone'+':\x20')+_0x261a86['name']),_0x1bee55=_0x53d5af),_0x263ab0['push'](_0x1bee55);}this['bones']=_0x263ab0;}['initSkin'](_0x376dbe){this['skin']=_0x376dbe,this['bones']=[];const _0x4f09c5=_0x376dbe['inverseBin'+'dPose']['length'];this['init'](_0x376dbe['device'],_0x4f09c5),this['matrices']=[];for(let _0x1fc51b=0x24de+0x1*-0x1fc9+-0x515;_0x1fc51b<_0x4f09c5;_0x1fc51b++)this['matrices'][_0x1fc51b]=new te();}['uploadBone'+'s'](_0x27c7e8){this['boneTextur'+'e']['upload']();}['_updateMat'+'rices'](_0x1aba4f,_0x20c2f0){if(this['_skinUpdat'+'eIndex']!==_0x20c2f0){this['_skinUpdat'+'eIndex']=_0x20c2f0,S_['copy'](_0x1aba4f['getWorldTr'+'ansform']())['invert']();for(let _0x388bd4=this['bones']['length']-(-0x1*0x8f6+0x2*-0x1333+0x2f5d);_0x388bd4>=0x2fb+0x62b*-0x2+0x1df*0x5;_0x388bd4--)this['matrices'][_0x388bd4]['mulAffine2'](S_,this['bones'][_0x388bd4]['getWorldTr'+'ansform']()),this['matrices'][_0x388bd4]['mulAffine2'](this['matrices'][_0x388bd4],this['skin']['inverseBin'+'dPose'][_0x388bd4]);}}['updateMatr'+'ices'](_0x28e00c,_0x148848){this['_updateBef'+'oreCull']&&this['_updateMat'+'rices'](_0x28e00c,_0x148848);}['updateMatr'+'ixPalette'](_0x30657e,_0x53aaf9){this['_updateMat'+'rices'](_0x30657e,_0x53aaf9);const _0x21e314=this['matrixPale'+'tte'],_0x3f433e=this['bones']['length'];for(let _0xc3bb8c=0x21b*0x6+-0x3*-0x9de+-0x2a3c;_0xc3bb8c<_0x3f433e;_0xc3bb8c++){const _0x1c8ba3=this['matrices'][_0xc3bb8c]['data'],_0xd121ad=_0xc3bb8c*(0x6b*-0x4a+-0x6*0x641+0x4480);_0x21e314[_0xd121ad]=_0x1c8ba3[-0xb78+0x4*-0x33+0x4*0x311],_0x21e314[_0xd121ad+(-0xa1*-0x1c+0x231d*0x1+-0x34b8)]=_0x1c8ba3[-0x2693+-0x99*-0x7+0x2*0x1134],_0x21e314[_0xd121ad+(-0x1*-0x1bf2+0x138e*0x1+-0x2f7e)]=_0x1c8ba3[0x1a*0x13+0x172+0x358*-0x1],_0x21e314[_0xd121ad+(0x225f+-0xb43+0x1b*-0xdb)]=_0x1c8ba3[0x3d1*0x2+0x1*0x611+0x3*-0x48d],_0x21e314[_0xd121ad+(-0x3e5+-0x1ad0+0x1eb9)]=_0x1c8ba3[-0x9*0x81+-0xd*0x242+0x21e4],_0x21e314[_0xd121ad+(-0x338+-0x366*0x1+-0x6a3*-0x1)]=_0x1c8ba3[-0x14ff+0x711+0x1*0xdf3],_0x21e314[_0xd121ad+(-0xf36*0x1+-0x2639+0x3575)]=_0x1c8ba3[-0x1282*-0x1+-0x1*0x1085+0x32*-0xa],_0x21e314[_0xd121ad+(-0x8b*-0x2f+-0x23e6*-0x1+0x1eb2*-0x2)]=_0x1c8ba3[-0xd*0x19d+-0x9b*0x13+0x1*0x2087],_0x21e314[_0xd121ad+(0x1*-0x622+0x1f65+-0x193b)]=_0x1c8ba3[-0x1*-0xdc9+-0x6a6+-0x721*0x1],_0x21e314[_0xd121ad+(0x1ae1*-0x1+-0x254*-0x7+-0x97*-0x12)]=_0x1c8ba3[-0xbb3*-0x1+0x243e+-0x2f*0x105],_0x21e314[_0xd121ad+(-0x23ec+-0x124+0x251a)]=_0x1c8ba3[-0x21a*0xb+-0xf83+0x1*0x26ab],_0x21e314[_0xd121ad+(-0xa3c+-0x1230+-0x1*-0x1c77)]=_0x1c8ba3[0x20f+0x173*0x9+-0xf0c];}this['uploadBone'+'s'](this['skin']['device']);}}class y_ extends Ol{constructor(_0x4d9500,_0x59771e,_0x29d082){super();const _0x1c685f=_0x59771e['length'];this['init'](_0x4d9500,_0x1c685f),this['device']=_0x4d9500,this['rootNode']=_0x29d082,this['bones']=_0x59771e;}['updateMatr'+'ices'](_0x544c37,_0x31c815){}['updateMatr'+'ixPalette'](_0x4d645b,_0x136190){const _0x2d0197=this['matrixPale'+'tte'],_0xa64cd9=this['bones']['length'];for(let _0x3abddc=-0x2231*0x1+0x4*-0x7b5+0xd01*0x5;_0x3abddc<_0xa64cd9;_0x3abddc++){const _0x20f17b=this['bones'][_0x3abddc]['getWorldTr'+'ansform']()['data'],_0x73787f=_0x3abddc*(0xa*-0xe9+0x20da+0x4a*-0x52);_0x2d0197[_0x73787f]=_0x20f17b[0xf3f*-0x2+0x1537+-0x1*-0x947],_0x2d0197[_0x73787f+(0xd*0x34+-0xfd9*-0x1+-0x127c)]=_0x20f17b[-0x7*0xdf+-0x1ed8+0x24f5],_0x2d0197[_0x73787f+(0x1bfb+0x177*-0x1+-0x1a82)]=_0x20f17b[-0xb24+0x1*0xc51+-0x125],_0x2d0197[_0x73787f+(-0xb*-0xef+0x4*0x6a3+-0x24ce)]=_0x20f17b[-0x19c3*-0x1+-0x23fc+0xa45],_0x2d0197[_0x73787f+(-0x5e*-0x17+-0x463*-0x2+-0x1134)]=_0x20f17b[-0x1a19+-0x15fc+-0x99e*-0x5],_0x2d0197[_0x73787f+(-0x1*-0x647+-0x6d*-0x5+-0x71*0x13)]=_0x20f17b[0x2dc+0x2516+-0x1*0x27ed],_0x2d0197[_0x73787f+(-0x1833+0x1002+0x2bd*0x3)]=_0x20f17b[0x1311+0xec6+-0x21ce],_0x2d0197[_0x73787f+(-0x1632+-0x7*0x24b+-0x17*-0x1aa)]=_0x20f17b[0x53*-0x1f+0x1b3*-0x1+0x9f*0x13],_0x2d0197[_0x73787f+(-0x2431*-0x1+0x3*-0x5f7+-0x1244)]=_0x20f17b[-0x1cf8+-0x1*-0xe74+0xe86],_0x2d0197[_0x73787f+(-0x10f*-0x5+0x3*-0x329+0x17*0x2f)]=_0x20f17b[-0x1*0x1ea7+0x4f*0x47+0x8c4],_0x2d0197[_0x73787f+(-0x49*-0x63+0x433+-0x2064)]=_0x20f17b[0x3*-0x175+-0x169a+0x1b03],_0x2d0197[_0x73787f+(0x3b*0xa7+0x31*-0x78+-0x2*0x7bd)]=_0x20f17b[-0x392+-0xf6a+0x130a];}this['uploadBone'+'s'](this['device']);}}let gE=0x2bf*0x5+-0x1*-0x23bf+-0x2*0x18bd;class oi{constructor(){this['initDefaul'+'ts']();}['initDefaul'+'ts'](){this['recreate']=!(-0x166f*-0x1+0x5*-0xd5+-0x1245),this['verticesUs'+'age']=ms,this['indicesUsa'+'ge']=ms,this['maxVertice'+'s']=-0x266f*0x1+-0x667+-0x779*-0x6,this['maxIndices']=-0x1f24+-0x1*0x2449+-0x1*-0x436d,this['vertexCoun'+'t']=-0x23fe+-0x875*0x2+0x34e8,this['indexCount']=-0x22be+-0x9*0x144+0x2e22,this['vertexStre'+'amsUpdated']=!(0x1fc*0x1+-0x1510+0x1315),this['indexStrea'+'mUpdated']=!(-0x1*0x1cb1+0x189*-0x7+0x2771),this['vertexStre'+'amDictiona'+'ry']={},this['indices']=null;}['_changeVer'+'texCount'](_0x511d7c,_0xa2309b){this['vertexCoun'+'t']?w['assert'](this['vertexCoun'+'t']===_0x511d7c,'Vertex\x20str'+'eam\x20'+_0xa2309b+'\x20has\x20'+_0x511d7c+('\x20vertices,'+'\x20which\x20doe'+'s\x20not\x20matc'+'h\x20already\x20'+'set\x20stream'+'s\x20with\x20')+this['vertexCoun'+'t']+'\x20vertices.'):this['vertexCoun'+'t']=_0x511d7c;}}h(oi,'DEFAULT_CO'+'MPONENTS_P'+'OSITION',0x231d+0x1*0x1843+0x87b*-0x7),h(oi,'DEFAULT_CO'+'MPONENTS_N'+'ORMAL',-0x1519+-0x27b+0x1*0x1797),h(oi,'DEFAULT_CO'+'MPONENTS_U'+'V',-0x22e1*-0x1+-0x2545+0x266),h(oi,'DEFAULT_CO'+'MPONENTS_C'+'OLORS',0x89*0x44+-0x64e+-0xa06*0x3);class SE{constructor(_0x54020a,_0x296d2f,_0x36a24c,_0x3dfc71,_0x50f027){this['data']=_0x54020a,this['componentC'+'ount']=_0x296d2f,this['dataType']=_0x36a24c,this['dataTypeNo'+'rmalize']=_0x3dfc71,this['asInt']=_0x50f027;}}class Ge extends wd{constructor(_0x1e24d9,_0x54197c){super(),h(this,'indexBuffe'+'r',[null]),h(this,'vertexBuff'+'er',null),h(this,'primitive',[{'type':0x0,'base':0x0,'baseVertex':0x0,'count':0x0}]),h(this,'skin',null),h(this,'boneAabb',null),h(this,'_aabbVer',0x186*0x16+-0x1*0x20c5+-0xbf),h(this,'_aabb',new De()),h(this,'_geometryD'+'ata',null),h(this,'_morph',null),h(this,'_storageIn'+'dex',!(-0x17c4+-0x1426+0x2beb*0x1)),h(this,'_storageVe'+'rtex',!(-0xf15+-0xa2a*0x3+-0xb65*-0x4)),(this['id']=gE++,w['assert'](_0x1e24d9,'Mesh\x20const'+'ructor\x20tak'+'es\x20a\x20Graph'+'icsDevice\x20'+'as\x20a\x20param'+'eter,\x20and\x20'+'it\x20was\x20not'+'\x20provided.'),this['device']=_0x1e24d9,this['_storageIn'+'dex']=(_0x54197c==null?void(-0xe90+0x3b*0x6+0xd2e):_0x54197c['storageInd'+'ex'])||!(-0x20f6+0x15*0x10b+0xb10),this['_storageVe'+'rtex']=(_0x54197c==null?void(0x27*-0x43+-0x1*-0x21f5+-0x17c0):_0x54197c['storageVer'+'tex'])||!(0x2548+0x444+-0x298b));}static['fromGeomet'+'ry'](_0x43f454,_0x3ea45b,_0x361778={}){const _0x3d331e=new Ge(_0x43f454,_0x361778),{positions:_0xc5ea04,normals:_0x1e5c53,tangents:_0x4b54eb,colors:_0x44d732,uvs:_0xbab435,uvs1:_0x1ccd63,blendIndices:_0x412885,blendWeights:_0x138bba,indices:_0x58b60b}=_0x3ea45b;return _0xc5ea04&&_0x3d331e['setPositio'+'ns'](_0xc5ea04),_0x1e5c53&&_0x3d331e['setNormals'](_0x1e5c53),_0x4b54eb&&_0x3d331e['setVertexS'+'tream'](yi,_0x4b54eb,0xc69*-0x3+-0xebd+0x33fc),_0x44d732&&_0x3d331e['setColors3'+'2'](_0x44d732),_0xbab435&&_0x3d331e['setUvs'](-0x1caf+0x140c+0x8a3,_0xbab435),_0x1ccd63&&_0x3d331e['setUvs'](-0x34b+-0xe8+-0x21a*-0x2,_0x1ccd63),_0x412885&&_0x3d331e['setVertexS'+'tream'](us,_0x412885,-0x454+-0x362*0xa+0x1c*0x15d,_0x412885['length']/(-0x1*-0xeb4+-0x155d+0x6ad),la),_0x138bba&&_0x3d331e['setVertexS'+'tream'](gi,_0x138bba,-0x5d+-0x17ec*0x1+0x1*0x184d),_0x58b60b&&_0x3d331e['setIndices'](_0x58b60b),_0x3d331e['update'](),_0x3d331e;}set['morph'](_0x1dd03a){_0x1dd03a!==this['_morph']&&(this['_morph']&&this['_morph']['decRefCoun'+'t'](),this['_morph']=_0x1dd03a,_0x1dd03a&&_0x1dd03a['incRefCoun'+'t']());}get['morph'](){return this['_morph'];}set['aabb'](_0x5abce2){this['_aabb']=_0x5abce2,this['_aabbVer']++;}get['aabb'](){return this['_aabb'];}['destroy'](){const _0x42298e=this['morph'];_0x42298e&&(this['morph']=null,_0x42298e['refCount']<0x94f+-0x1*-0x260b+-0x2f59&&_0x42298e['destroy']()),this['vertexBuff'+'er']&&(this['vertexBuff'+'er']['destroy'](),this['vertexBuff'+'er']=null);for(let _0xe3578=-0x1*0x1c66+-0x270d+-0x1f*-0x22d;_0xe3578<this['indexBuffe'+'r']['length'];_0xe3578++)this['_destroyIn'+'dexBuffer'](_0xe3578);this['indexBuffe'+'r']['length']=-0x1*0xbbe+-0x50f*-0x4+-0x87e,this['_geometryD'+'ata']=null;}['_destroyIn'+'dexBuffer'](_0x309a05){this['indexBuffe'+'r'][_0x309a05]&&(this['indexBuffe'+'r'][_0x309a05]['destroy'](),this['indexBuffe'+'r'][_0x309a05]=null);}['_initBoneA'+'abbs'](_0x482580){this['boneAabb']=[],this['boneUsed']=[];let _0x2efa9c,_0x59ccae,_0xefca71,_0x3baceb,_0x2471b2;const _0x1b63ab=[],_0x10a7c9=[],_0x2e0d60=this['boneUsed'],_0x507bc6=this['skin']['boneNames']['length'];let _0x2702c3,_0x45ce3e,_0x453cb;for(let _0x4b6909=-0xe48+0x1aed*-0x1+-0x89*-0x4d;_0x4b6909<_0x507bc6;_0x4b6909++)_0x1b63ab[_0x4b6909]=new D(Number['MAX_VALUE'],Number['MAX_VALUE'],Number['MAX_VALUE']),_0x10a7c9[_0x4b6909]=new D(-Number['MAX_VALUE'],-Number['MAX_VALUE'],-Number['MAX_VALUE']);const _0x561221=new Uo(this['vertexBuff'+'er']),_0x93496c=_0x561221['element'][Me],_0x19f5ce=_0x561221['element'][gi],_0x4a72b7=_0x561221['element'][us],_0x565e72=this['vertexBuff'+'er']['numVertice'+'s'];for(let _0x15d31c=-0x126d+0xb5+0x54*0x36;_0x15d31c<_0x565e72;_0x15d31c++){for(let _0x30af40=0x1ea7+0x3*-0x6f5+0x2*-0x4e4;_0x30af40<-0x9*-0x2fa+-0x86d+-0x1259;_0x30af40++)if(_0x19f5ce['array'][_0x19f5ce['index']+_0x30af40]>0x18cf+0x50*0x74+-0x3d0f){const _0x4fa163=_0x4a72b7['array'][_0x4a72b7['index']+_0x30af40];if(_0x2e0d60[_0x4fa163]=!(-0x1cf0+0x1bb5+0x13b),_0x2efa9c=_0x93496c['array'][_0x93496c['index']],_0x59ccae=_0x93496c['array'][_0x93496c['index']+(0x2072+0x11*-0x207+-0x2*-0x103)],_0xefca71=_0x93496c['array'][_0x93496c['index']+(-0x1d71+-0x1cec+0x3a5f)],_0x3baceb=_0x10a7c9[_0x4fa163],_0x2471b2=_0x1b63ab[_0x4fa163],_0x2471b2['x']>_0x2efa9c&&(_0x2471b2['x']=_0x2efa9c),_0x2471b2['y']>_0x59ccae&&(_0x2471b2['y']=_0x59ccae),_0x2471b2['z']>_0xefca71&&(_0x2471b2['z']=_0xefca71),_0x3baceb['x']<_0x2efa9c&&(_0x3baceb['x']=_0x2efa9c),_0x3baceb['y']<_0x59ccae&&(_0x3baceb['y']=_0x59ccae),_0x3baceb['z']<_0xefca71&&(_0x3baceb['z']=_0xefca71),_0x482580){let _0x57651b=_0x2702c3=_0x2efa9c,_0x46106a=_0x45ce3e=_0x59ccae,_0x304594=_0x453cb=_0xefca71;for(let _0x3fe2d3=0x1*0x9b9+0x160e+0x1fc7*-0x1;_0x3fe2d3<_0x482580['length'];_0x3fe2d3++){const _0xf65b59=_0x482580[_0x3fe2d3],_0x269d57=_0xf65b59['deltaPosit'+'ions'][_0x15d31c*(0x1048+0x35*0x5b+-0x141*0x1c)],_0x51a168=_0xf65b59['deltaPosit'+'ions'][_0x15d31c*(0x1c51+-0x531+-0x171d)+(0x1ace*-0x1+-0x4*0x3ef+-0x2a8b*-0x1)],_0x24ba90=_0xf65b59['deltaPosit'+'ions'][_0x15d31c*(-0x20e2+-0x256f+0x4654)+(-0x288+0x1*0xa+0x280)];_0x269d57<0x1f*0x9b+-0x1044+-0x1*0x281?_0x57651b+=_0x269d57:_0x2702c3+=_0x269d57,_0x51a168<-0x95b*-0x3+0x243c+-0x1f*0x213?_0x46106a+=_0x51a168:_0x45ce3e+=_0x51a168,_0x24ba90<-0x1f4+-0x79d*0x1+0x991?_0x304594+=_0x24ba90:_0x453cb+=_0x24ba90;}_0x2471b2['x']>_0x57651b&&(_0x2471b2['x']=_0x57651b),_0x2471b2['y']>_0x46106a&&(_0x2471b2['y']=_0x46106a),_0x2471b2['z']>_0x304594&&(_0x2471b2['z']=_0x304594),_0x3baceb['x']<_0x2702c3&&(_0x3baceb['x']=_0x2702c3),_0x3baceb['y']<_0x45ce3e&&(_0x3baceb['y']=_0x45ce3e),_0x3baceb['z']<_0x453cb&&(_0x3baceb['z']=_0x453cb);}}_0x561221['next']();}const _0x24ae98=this['vertexBuff'+'er']['getFormat']()['elements']['find'](_0x1a62dc=>_0x1a62dc['name']===Me);if(_0x24ae98&&_0x24ae98['normalize']){const _0x24e85f=((()=>{switch(_0x24ae98['dataType']){case dd:return _0x35b261=>Math['max'](_0x35b261/(0x24*-0x10b+-0xbe*-0xc+0x1d23),-(0xdb4+0x53*0x44+0x23bf*-0x1));case la:return _0x55115e=>_0x55115e/(-0x1*-0x95e+-0x9c1*-0x2+0x27*-0xb7);case fd:return _0x2da75f=>Math['max'](_0x2da75f/(0x5e2+-0x627f+0xdc9c),-(-0x22a+0xa*0x32b+-0x5e7*0x5));case Ml:return _0x459f3c=>_0x459f3c/(0xc68f*-0x2+0x12394+0x16989);default:return _0x3dd10e=>_0x3dd10e;}})());for(let _0x1753d6=0x1*0x1e6c+-0xe1e+-0x827*0x2;_0x1753d6<_0x507bc6;_0x1753d6++)if(_0x2e0d60[_0x1753d6]){const _0x4f6910=_0x1b63ab[_0x1753d6],_0x180147=_0x10a7c9[_0x1753d6];_0x4f6910['set'](_0x24e85f(_0x4f6910['x']),_0x24e85f(_0x4f6910['y']),_0x24e85f(_0x4f6910['z'])),_0x180147['set'](_0x24e85f(_0x180147['x']),_0x24e85f(_0x180147['y']),_0x24e85f(_0x180147['z']));}}for(let _0x51c7de=-0x1318+0x15aa+-0x292;_0x51c7de<_0x507bc6;_0x51c7de++){const _0x1d5caf=new De();_0x1d5caf['setMinMax'](_0x1b63ab[_0x51c7de],_0x10a7c9[_0x51c7de]),this['boneAabb']['push'](_0x1d5caf);}}['_initGeome'+'tryData'](){this['_geometryD'+'ata']||(this['_geometryD'+'ata']=new oi(),this['vertexBuff'+'er']&&(this['_geometryD'+'ata']['vertexCoun'+'t']=this['vertexBuff'+'er']['numVertice'+'s'],this['_geometryD'+'ata']['maxVertice'+'s']=this['vertexBuff'+'er']['numVertice'+'s']),this['indexBuffe'+'r']['length']>-0x261f+-0x1*-0x79d+0x8e*0x37&&this['indexBuffe'+'r'][0x33*0x58+0x251f+-0x36a7]&&(this['_geometryD'+'ata']['indexCount']=this['indexBuffe'+'r'][0xd92+0x5*0x1cf+-0x169d]['numIndices'],this['_geometryD'+'ata']['maxIndices']=this['indexBuffe'+'r'][-0xadc+0x1e23+-0xf*0x149]['numIndices']));}['clear'](_0x235f29,_0x2a1fe2,_0x4f84d8=-0x150d+0x1439+0x1*0xd4,_0x2c7f34=0x2aa+-0xa74+0x1*0x7ca){this['_initGeome'+'tryData'](),this['_geometryD'+'ata']['initDefaul'+'ts'](),this['_geometryD'+'ata']['recreate']=!(-0x1961+0x1873*-0x1+0x109c*0x3),this['_geometryD'+'ata']['maxVertice'+'s']=_0x4f84d8,this['_geometryD'+'ata']['maxIndices']=_0x2c7f34,this['_geometryD'+'ata']['verticesUs'+'age']=_0x235f29?ms:lh,this['_geometryD'+'ata']['indicesUsa'+'ge']=_0x2a1fe2?ms:lh;}['setVertexS'+'tream'](_0x3d46e8,_0x2fcbed,_0x174c23,_0x108021,_0x2ff37b=Ve,_0x20191b=!(0x3*-0xa0b+0xa9*0xd+0x265*0x9),_0x55c6cd=!(0xe78+-0x38b*0x1+-0x2bb*0x4)){this['_initGeome'+'tryData']();const _0x23d877=_0x108021||_0x2fcbed['length']/_0x174c23;this['_geometryD'+'ata']['_changeVer'+'texCount'](_0x23d877,_0x3d46e8),this['_geometryD'+'ata']['vertexStre'+'amsUpdated']=!(-0x12df+0x5*0x3b5+0x56*0x1),this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][_0x3d46e8]=new SE(_0x2fcbed,_0x174c23,_0x2ff37b,_0x20191b,_0x55c6cd);}['getVertexS'+'tream'](_0x2fda0a,_0x4875b7){let _0x293e65=0x1f5e+-0x26c0+-0xa*-0xbd,_0x274989=!(0x238b+0x1*0x16d7+-0xf5*0x3d);if(this['_geometryD'+'ata']){const _0x434485=this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][_0x2fda0a];_0x434485&&(_0x274989=!(-0x24f1+0x409*-0x2+0x2d03),_0x293e65=this['_geometryD'+'ata']['vertexCoun'+'t'],ArrayBuffer['isView'](_0x4875b7)?_0x4875b7['set'](_0x434485['data']):(_0x4875b7['length']=0x1*0x595+-0x2482+0x1eed,_0x4875b7['push'](_0x434485['data'])));}return _0x274989||this['vertexBuff'+'er']&&(_0x293e65=new Uo(this['vertexBuff'+'er'])['readData'](_0x2fda0a,_0x4875b7)),_0x293e65;}['setPositio'+'ns'](_0x4d206a,_0x54f2cc=oi['DEFAULT_CO'+'MPONENTS_P'+'OSITION'],_0x3eae5c){this['setVertexS'+'tream'](Me,_0x4d206a,_0x54f2cc,_0x3eae5c,Ve,!(-0x24b*0x3+0xb9+0x629));}['setNormals'](_0x2f05ae,_0x20fef5=oi['DEFAULT_CO'+'MPONENTS_N'+'ORMAL'],_0x49489e){this['setVertexS'+'tream'](gs,_0x2f05ae,_0x20fef5,_0x49489e,Ve,!(0xe*0x2a0+0x210c+0x1*-0x45cb));}['setUvs'](_0x3624a0,_0x759756,_0x30fd8e=oi['DEFAULT_CO'+'MPONENTS_U'+'V'],_0x24242a){this['setVertexS'+'tream'](zm+_0x3624a0,_0x759756,_0x30fd8e,_0x24242a,Ve,!(-0x17ec+0x103e+0x119*0x7));}['setColors'](_0x227f7e,_0x30f3e3=oi['DEFAULT_CO'+'MPONENTS_C'+'OLORS'],_0x2558e7){this['setVertexS'+'tream'](Wt,_0x227f7e,_0x30f3e3,_0x2558e7,Ve,!(0x1509*-0x1+-0x8ec+-0x5*-0x5fe));}['setColors3'+'2'](_0x2ee0b4,_0x1fce00){this['setVertexS'+'tream'](Wt,_0x2ee0b4,oi['DEFAULT_CO'+'MPONENTS_C'+'OLORS'],_0x1fce00,la,!(-0x1e*-0x134+0x8ad+-0x2cc5));}['setIndices'](_0x41275f,_0x46e854){this['_initGeome'+'tryData'](),this['_geometryD'+'ata']['indexStrea'+'mUpdated']=!(0x72c+-0x1f73+-0x5*-0x4db),this['_geometryD'+'ata']['indices']=_0x41275f,this['_geometryD'+'ata']['indexCount']=_0x46e854||_0x41275f['length'];}['getPositio'+'ns'](_0x25b9ca){return this['getVertexS'+'tream'](Me,_0x25b9ca);}['getNormals'](_0xc315d8){return this['getVertexS'+'tream'](gs,_0xc315d8);}['getUvs'](_0x164904,_0xc67eb4){return this['getVertexS'+'tream'](zm+_0x164904,_0xc67eb4);}['getColors'](_0x5daa2d){return this['getVertexS'+'tream'](Wt,_0x5daa2d);}['getIndices'](_0x1cf092){let _0x3dedc2=0x2c9+-0x1bcf+0x1906;if(this['_geometryD'+'ata']&&this['_geometryD'+'ata']['indices']){const _0x2cddd0=this['_geometryD'+'ata']['indices'];if(_0x3dedc2=this['_geometryD'+'ata']['indexCount'],ArrayBuffer['isView'](_0x1cf092))_0x1cf092['set'](_0x2cddd0);else{_0x1cf092['length']=0x15e0+-0x7f3*0x1+-0xded;for(let _0x10d29c=0x8f9+-0x66*0x25+0x1*0x5c5,_0x4c4936=_0x2cddd0['length'];_0x10d29c<_0x4c4936;_0x10d29c++)_0x1cf092['push'](_0x2cddd0[_0x10d29c]);}}else this['indexBuffe'+'r']['length']>-0x3b0*-0x2+-0x7*0x3c5+-0x1303*-0x1&&this['indexBuffe'+'r'][-0x1f14+0x23fa+-0x4e6]&&(_0x3dedc2=this['indexBuffe'+'r'][0x2405*-0x1+-0xa*0x3d6+0x3*0x18cb]['readData'](_0x1cf092));return _0x3dedc2;}['update'](_0x2aa6e5=js,_0x589037=!(-0x89d+0x9db+-0x13e)){if(this['_geometryD'+'ata']){if(_0x589037){const _0x586b5a=this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][Me];_0x586b5a&&_0x586b5a['componentC'+'ount']===0x2b*-0x8+0x1*-0x9d5+0xb30&&(this['_aabb']['compute'](_0x586b5a['data'],this['_geometryD'+'ata']['vertexCoun'+'t']),this['_aabbVer']++);}let _0x1ace2c=this['_geometryD'+'ata']['recreate'];this['_geometryD'+'ata']['vertexCoun'+'t']>this['_geometryD'+'ata']['maxVertice'+'s']&&(_0x1ace2c=!(0x5*0x1ae+-0x151d+0x3*0x43d),this['_geometryD'+'ata']['maxVertice'+'s']=this['_geometryD'+'ata']['vertexCoun'+'t']),_0x1ace2c&&this['vertexBuff'+'er']&&(this['vertexBuff'+'er']['destroy'](),this['vertexBuff'+'er']=null);let _0x530791=this['_geometryD'+'ata']['recreate'];this['_geometryD'+'ata']['indexCount']>this['_geometryD'+'ata']['maxIndices']&&(_0x530791=!(0x1*0x210d+-0x3b5*-0x1+-0x24c2),this['_geometryD'+'ata']['maxIndices']=this['_geometryD'+'ata']['indexCount']),_0x530791&&this['indexBuffe'+'r']['length']>-0x1*-0x99b+0x320+-0xcbb&&this['indexBuffe'+'r'][-0x720+0x5*-0x41b+0x1ba7]&&(this['indexBuffe'+'r'][-0xcba+-0x2593*-0x1+-0x18d9]['destroy'](),this['indexBuffe'+'r'][-0x2584+0x1bfc+0x262*0x4]=null),this['_geometryD'+'ata']['vertexStre'+'amsUpdated']&&this['_updateVer'+'texBuffer'](),this['_geometryD'+'ata']['indexStrea'+'mUpdated']&&this['_updateInd'+'exBuffer'](),this['primitive'][0x9ce+-0x5d4*-0x2+-0x1*0x1576]['type']=_0x2aa6e5,this['indexBuffe'+'r']['length']>0x601+-0x24cd*-0x1+-0x2ace*0x1&&this['indexBuffe'+'r'][0x1ba1+-0x157*-0x17+-0x3a72]?this['_geometryD'+'ata']['indexStrea'+'mUpdated']&&(this['primitive'][-0x254b*0x1+-0x2*0xc4+-0x3*-0xcf1]['count']=this['_geometryD'+'ata']['indexCount'],this['primitive'][0x111e*0x1+-0x17*-0x62+-0x8a4*0x3]['indexed']=!(0x11*-0x15+-0xb*-0x28a+-0x1a89*0x1)):this['_geometryD'+'ata']['vertexStre'+'amsUpdated']&&(this['primitive'][-0x1*0x1d09+-0x1373*0x1+0x183e*0x2]['count']=this['_geometryD'+'ata']['vertexCoun'+'t'],this['primitive'][-0xbff+0x1f72+-0x1373]['indexed']=!(-0x1977+0x1af4+-0x17c)),this['_geometryD'+'ata']['vertexCoun'+'t']=0xc23*0x1+0xde1+-0x1a04,this['_geometryD'+'ata']['indexCount']=0x13*-0x175+-0x5ab*0x2+0x2705,this['_geometryD'+'ata']['vertexStre'+'amsUpdated']=!(-0xac+0x372+-0x2c5),this['_geometryD'+'ata']['indexStrea'+'mUpdated']=!(-0x1*-0x1366+-0x11*0x1dc+0xc37),this['_geometryD'+'ata']['recreate']=!(-0x1*-0x2405+0x3dd+-0x27e1),this['updateRend'+'erStates']();}}['_buildVert'+'exFormat'](_0x1f000d){const _0x3ed472=[];for(const _0x106f33 in this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry']){const _0xc31018=this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][_0x106f33];_0x3ed472['push']({'semantic':_0x106f33,'components':_0xc31018['componentC'+'ount'],'type':_0xc31018['dataType'],'normalize':_0xc31018['dataTypeNo'+'rmalize'],'asInt':_0xc31018['asInt']});}return new kt(this['device'],_0x3ed472,_0x1f000d);}['_updateVer'+'texBuffer'](){if(!this['vertexBuff'+'er']){const _0x45265b=this['_geometryD'+'ata']['maxVertice'+'s'],_0x5375af=this['_buildVert'+'exFormat'](_0x45265b);this['vertexBuff'+'er']=new Is(this['device'],_0x5375af,_0x45265b,{'usage':this['_geometryD'+'ata']['verticesUs'+'age'],'storage':this['_storageVe'+'rtex']});}const _0x1aad41=new Uo(this['vertexBuff'+'er']),_0x563b34=this['_geometryD'+'ata']['vertexCoun'+'t'];for(const _0x72bfb6 in this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry']){const _0x354b8a=this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][_0x72bfb6];_0x1aad41['writeData'](_0x72bfb6,_0x354b8a['data'],_0x563b34),delete this['_geometryD'+'ata']['vertexStre'+'amDictiona'+'ry'][_0x72bfb6];}_0x1aad41['end']();}['_updateInd'+'exBuffer'](){if(this['indexBuffe'+'r']['length']<=0xa3d*-0x1+0x1*0x1a8d+0x3a*-0x48||!this['indexBuffe'+'r'][0x1949+-0xe5+-0x1c*0xdf]){const _0x1550b2=this['_geometryD'+'ata']['maxVertice'+'s'],_0x5ba63=_0x1550b2>-0xa1*-0x229+-0xf3d9+0x980f||_0x1550b2===0x1c22+-0x2*0x123e+-0x2*-0x42d?wr:Yi,_0x475dbe=this['_storageIn'+'dex']?{'storage':!(-0x651+-0xb1*0x33+0x2994)}:void(0x19d5+0x1466+-0x2e3b);this['indexBuffe'+'r'][0x249+-0xe*-0x14+-0x5*0xad]=new br(this['device'],_0x5ba63,this['_geometryD'+'ata']['maxIndices'],this['_geometryD'+'ata']['indicesUsa'+'ge'],void(0xfd9+-0x34*-0x50+-0x2019),_0x475dbe);}const _0x5c6bc6=this['_geometryD'+'ata']['indices'];_0x5c6bc6&&(this['indexBuffe'+'r'][-0x3d6*-0x4+-0x1f40+0xfe8]['writeData'](_0x5c6bc6,this['_geometryD'+'ata']['indexCount']),this['_geometryD'+'ata']['indices']=null);}['prepareRen'+'derState'](_0x5eb561){_0x5eb561===$r?this['generateWi'+'reframe']():_0x5eb561===Jl&&(this['primitive'][Jl]={'type':cd,'base':0x0,'baseVertex':0x0,'count':this['vertexBuff'+'er']?this['vertexBuff'+'er']['numVertice'+'s']:0x821+0xe5*0x22+-0x268b,'indexed':!(0x245+0xc28+-0xe6c)});}['updateRend'+'erStates'](){this['primitive'][Jl]&&this['prepareRen'+'derState'](Jl),this['primitive'][$r]&&this['prepareRen'+'derState']($r);}['generateWi'+'reframe'](){this['_destroyIn'+'dexBuffer']($r);const _0xc2f530=this['vertexBuff'+'er']['numVertice'+'s'],_0x417fa6=[];let _0x17bf96;if(this['indexBuffe'+'r']['length']>-0x1*0xad8+-0x270b+0x31e3&&this['indexBuffe'+'r'][-0x929*-0x2+0x1*0x20d3+-0x3325*0x1]){const _0x12e548=[[0x9fc+0x14a7+-0xfd*0x1f,-0x1e95*-0x1+0x244a+-0x42de],[-0x1a5*0xc+-0x5d9+0x83*0x32,-0x1d*0xe5+-0x88e+-0xb*-0x323],[0x5*0x6a6+0x1*0x253+-0x238f,0x3c5+-0x2381*0x1+0x1fbc]],_0xe084=this['primitive'][un]['base'],_0x372b1a=this['primitive'][un]['count'],_0x48aeeb=this['primitive'][un]['baseVertex']||0x2*-0x38c+0x2*-0xd2e+0x2174,_0x42e0e0=this['indexBuffe'+'r'][un],_0x1e2761=new Sh[_0x42e0e0['format']](_0x42e0e0['storage']),_0x1307c9=new Set();for(let _0x341680=_0xe084;_0x341680<_0xe084+_0x372b1a;_0x341680+=-0x1*-0x1feb+0x45+-0x202d)for(let _0x34b4b9=0x1f49+-0x3b3*-0x9+-0x4094;_0x34b4b9<0x332*0xa+-0x66*0x2+-0x1f25;_0x34b4b9++){const _0x347558=_0x1e2761[_0x341680+_0x12e548[_0x34b4b9][0x1c6a+-0x248a+-0x28*-0x34]]+_0x48aeeb,_0x43589b=_0x1e2761[_0x341680+_0x12e548[_0x34b4b9][-0x2*-0x925+0x20f8+0x3341*-0x1]]+_0x48aeeb,_0x53c415=_0x347558>_0x43589b?_0x43589b*_0xc2f530+_0x347558:_0x347558*_0xc2f530+_0x43589b;_0x1307c9['has'](_0x53c415)||(_0x1307c9['add'](_0x53c415),_0x417fa6['push'](_0x347558,_0x43589b));}_0x17bf96=_0x42e0e0['format'];}else{for(let _0x4d141a=-0x23eb+0x23e+0x21ad;_0x4d141a<_0xc2f530;_0x4d141a+=0xadc+0x226c+-0x2d45)_0x417fa6['push'](_0x4d141a,_0x4d141a+(-0x3f*0x2b+0x487+0x60f),_0x4d141a+(0x1e58+0x1*-0x1007+-0xe50*0x1),_0x4d141a+(0x5*0x62+-0x11f6*0x2+-0x1102*-0x2),_0x4d141a+(0x91e+-0xd3+0x65*-0x15),_0x4d141a);_0x17bf96=_0x417fa6['length']>0x1*-0x11121+0x313d*0xa+0x24be?wr:Yi;}const _0x31f446=new br(this['vertexBuff'+'er']['device'],_0x17bf96,_0x417fa6['length']);new Sh[_0x31f446['format']](_0x31f446['storage'])['set'](_0x417fa6),_0x31f446['unlock'](),this['primitive'][$r]={'type':hd,'base':0x0,'baseVertex':0x0,'count':_0x417fa6['length'],'indexed':!(0x185a+0x2b7*0x5+0x1ff*-0x13)},this['indexBuffe'+'r'][$r]=_0x31f446;}}const v_=new te(),Hd=new D(),x_=new le(),Wd=new le(),T_=new D(),w_=new D(),yE=new te(),vE=new le(),rs=new D(),ro=new te(),as=new le(),Ia=new le(),E_=new te(),$d=new D(),tc=new D();function b_(_0x41a8ec,_0x3ffafd){return _0x41a8ec instanceof Function?_0x41a8ec:_0x545160=>{let _0x4a0a7e=_0x545160[_0x41a8ec];return _0x4a0a7e instanceof Function&&(_0x4a0a7e=_0x4a0a7e()),_0x4a0a7e===_0x3ffafd;};}function Sv(_0x4c6fad,_0x2608e4){if(_0x2608e4(_0x4c6fad))return _0x4c6fad;const _0x3c908e=_0x4c6fad['_children'],_0x4bb63e=_0x3c908e['length'];for(let _0x161cc2=-0x13f9*-0x1+-0x25f9+0x1200;_0x161cc2<_0x4bb63e;++_0x161cc2){const _0xf4269=Sv(_0x3c908e[_0x161cc2],_0x2608e4);if(_0xf4269)return _0xf4269;}return null;}class Ie extends me{constructor(_0x5d0746='Untitled'){super(),h(this,'name'),h(this,'tags',new Oo(this)),h(this,'localPosit'+'ion',new D()),h(this,'localRotat'+'ion',new le()),h(this,'localScale',new D(-0xf29*-0x2+-0x144f+-0xa02,-0xde7+-0x1*-0x147d+0x1*-0x695,0x619+0x28*-0xe+-0x3e8)),h(this,'localEuler'+'Angles',new D()),h(this,'position',new D()),h(this,'rotation',new le()),h(this,'eulerAngle'+'s',new D()),h(this,'_scale',null),h(this,'localTrans'+'form',new te()),h(this,'_dirtyLoca'+'l',!(-0x1dfa+0xc8+0x1d33)),h(this,'_aabbVer',-0x2077*-0x1+0xb57+0x12*-0x26f),h(this,'_frozen',!(0x8f*0x6+-0x913*-0x2+-0x1*0x157f)),h(this,'worldTrans'+'form',new te()),h(this,'_dirtyWorl'+'d',!(0x195b+0xfef*0x2+-0x3938)),h(this,'_worldScal'+'eSign',-0x1*0x2339+0x213*0xc+0xa55),h(this,'_normalMat'+'rix',new _i()),h(this,'_dirtyNorm'+'al',!(-0x5f2*-0x1+0x1cf4+-0x22e6)),h(this,'_right',null),h(this,'_up',null),h(this,'_forward',null),h(this,'_parent',null),h(this,'_children',[]),h(this,'_graphDept'+'h',0x1bbc+-0x751*0x3+-0x5c9),h(this,'_enabled',!(0x2326+-0x13*-0x131+-0x39c9)),h(this,'_enabledIn'+'Hierarchy',!(0x7a7+-0xc47+-0x3*-0x18b)),h(this,'scaleCompe'+'nsation',!(-0xf50+0x6f8*0x2+0x161)),this['name']=_0x5d0746;}get['right'](){return this['_right']||(this['_right']=new D()),this['getWorldTr'+'ansform']()['getX'](this['_right'])['normalize']();}get['up'](){return this['_up']||(this['_up']=new D()),this['getWorldTr'+'ansform']()['getY'](this['_up'])['normalize']();}get['forward'](){return this['_forward']||(this['_forward']=new D()),this['getWorldTr'+'ansform']()['getZ'](this['_forward'])['normalize']()['mulScalar'](-(-0x1*0x1a2b+-0x352*0x2+0x20d0));}get['normalMatr'+'ix'](){const _0x45abc9=this['_normalMat'+'rix'];return this['_dirtyNorm'+'al']&&(_0x45abc9['invertMat4'](this['getWorldTr'+'ansform']())['transpose'](),this['_dirtyNorm'+'al']=!(0x2101+0x1aa5+0x3ba5*-0x1)),_0x45abc9;}set['enabled'](_0x27eed0){var _0x58012d;this['_enabled']!==_0x27eed0&&(this['_enabled']=_0x27eed0,(_0x27eed0&&((_0x58012d=this['_parent'])!=null&&_0x58012d['enabled'])||!_0x27eed0)&&this['_notifyHie'+'rarchyStat'+'eChanged'](this,_0x27eed0));}get['enabled'](){return this['_enabled']&&this['_enabledIn'+'Hierarchy'];}get['parent'](){return this['_parent'];}get['path'](){let _0x5ad4a9=this['_parent'];if(!_0x5ad4a9)return'';let _0x111787=this['name'];for(;_0x5ad4a9&&_0x5ad4a9['_parent'];)_0x111787=_0x5ad4a9['name']+'/'+_0x111787,_0x5ad4a9=_0x5ad4a9['_parent'];return _0x111787;}get['root'](){let _0x51b179=this;for(;_0x51b179['_parent'];)_0x51b179=_0x51b179['_parent'];return _0x51b179;}get['children'](){return this['_children'];}get['graphDepth'](){return this['_graphDept'+'h'];}['_notifyHie'+'rarchyStat'+'eChanged'](_0x4d5097,_0x2c9ddd){_0x4d5097['_onHierarc'+'hyStateCha'+'nged'](_0x2c9ddd);const _0x513fa5=_0x4d5097['_children'];for(let _0x59d322=0xbf1+-0x2617+-0x1a26*-0x1,_0x4dd3c1=_0x513fa5['length'];_0x59d322<_0x4dd3c1;_0x59d322++)_0x513fa5[_0x59d322]['_enabled']&&this['_notifyHie'+'rarchyStat'+'eChanged'](_0x513fa5[_0x59d322],_0x2c9ddd);}['_onHierarc'+'hyStateCha'+'nged'](_0x2acdf6){this['_enabledIn'+'Hierarchy']=_0x2acdf6,_0x2acdf6&&!this['_frozen']&&this['_unfreezeP'+'arentToRoo'+'t']();}['_cloneInte'+'rnal'](_0x39c37b){_0x39c37b['name']=this['name'];const _0x99f4c0=this['tags']['_list'];_0x39c37b['tags']['clear']();for(let _0x34cbf7=0x13a7+0x2a4*0x1+0x1b7*-0xd;_0x34cbf7<_0x99f4c0['length'];_0x34cbf7++)_0x39c37b['tags']['add'](_0x99f4c0[_0x34cbf7]);_0x39c37b['localPosit'+'ion']['copy'](this['localPosit'+'ion']),_0x39c37b['localRotat'+'ion']['copy'](this['localRotat'+'ion']),_0x39c37b['localScale']['copy'](this['localScale']),_0x39c37b['localEuler'+'Angles']['copy'](this['localEuler'+'Angles']),_0x39c37b['position']['copy'](this['position']),_0x39c37b['rotation']['copy'](this['rotation']),_0x39c37b['eulerAngle'+'s']['copy'](this['eulerAngle'+'s']),_0x39c37b['localTrans'+'form']['copy'](this['localTrans'+'form']),_0x39c37b['_dirtyLoca'+'l']=this['_dirtyLoca'+'l'],_0x39c37b['worldTrans'+'form']['copy'](this['worldTrans'+'form']),_0x39c37b['_dirtyWorl'+'d']=this['_dirtyWorl'+'d'],_0x39c37b['_dirtyNorm'+'al']=this['_dirtyNorm'+'al'],_0x39c37b['_aabbVer']=this['_aabbVer']+(0x938*-0x4+0x1dc4+0x71d),_0x39c37b['_enabled']=this['_enabled'],_0x39c37b['scaleCompe'+'nsation']=this['scaleCompe'+'nsation'],_0x39c37b['_enabledIn'+'Hierarchy']=!(0x10ba*-0x2+-0xcce*0x2+0x3b11*0x1);}['clone'](){const _0x32184b=new this['constructo'+'r']();return this['_cloneInte'+'rnal'](_0x32184b),_0x32184b;}['copy'](_0x5bd48e){return _0x5bd48e['_cloneInte'+'rnal'](this),this;}['destroy'](){this['remove']();const _0x4bf32c=this['_children'];for(;_0x4bf32c['length'];){const _0x5885f6=_0x4bf32c['pop']();_0x5885f6['_parent']=null,_0x5885f6['destroy']();}this['fire']('destroy',this),this['off']();}['find'](_0x25943a,_0x1139e9){const _0x20ccce=[],_0x4556f1=b_(_0x25943a,_0x1139e9);return this['forEach'](_0x34557e=>{_0x4556f1(_0x34557e)&&_0x20ccce['push'](_0x34557e);}),_0x20ccce;}['findOne'](_0x37de2e,_0x48b82a){const _0x411b02=b_(_0x37de2e,_0x48b82a);return Sv(this,_0x411b02);}['findByTag'](..._0x1a02fb){const _0x2bbf15=[],_0x179322=(_0x313785,_0x392092)=>{_0x392092&&_0x313785['tags']['has'](..._0x1a02fb)&&_0x2bbf15['push'](_0x313785);for(let _0x3ed115=0x1294+-0x16ed+0x459;_0x3ed115<_0x313785['_children']['length'];_0x3ed115++)_0x179322(_0x313785['_children'][_0x3ed115],!(-0x43+0x71*-0x49+0x1*0x207c));};return _0x179322(this,!(0x2f2+0xbd+0x3ae*-0x1)),_0x2bbf15;}['findByName'](_0x13e932){return this['findOne']('name',_0x13e932);}['findByPath'](_0x3a4354){const _0x2208b2=Array['isArray'](_0x3a4354)?_0x3a4354:_0x3a4354['split']('/');let _0x3b5a44=this;for(let _0x3deb63=0x2163+0x20a+-0x236d,_0x495a38=_0x2208b2['length'];_0x3deb63<_0x495a38;++_0x3deb63)if(_0x3b5a44=_0x3b5a44['children']['find'](_0x297131=>_0x297131['name']===_0x2208b2[_0x3deb63]),!_0x3b5a44)return null;return _0x3b5a44;}['forEach'](_0x2a1fc0,_0x4d3d36){_0x2a1fc0['call'](_0x4d3d36,this);const _0xb8dfe2=this['_children'],_0x45c747=_0xb8dfe2['length'];for(let _0x6b2461=0x2*0x6c9+0x9dc+-0x176e;_0x6b2461<_0x45c747;++_0x6b2461)_0xb8dfe2[_0x6b2461]['forEach'](_0x2a1fc0,_0x4d3d36);}['isDescenda'+'ntOf'](_0x450ca9){let _0x50eb15=this['_parent'];for(;_0x50eb15;){if(_0x50eb15===_0x450ca9)return!(0xf77+-0x4*0x5bc+0x1*0x779);_0x50eb15=_0x50eb15['_parent'];}return!(0x7f*-0x29+0x105+0x1353);}['isAncestor'+'Of'](_0x149fb0){return _0x149fb0['isDescenda'+'ntOf'](this);}['getEulerAn'+'gles'](){return this['getWorldTr'+'ansform']()['getEulerAn'+'gles'](this['eulerAngle'+'s']),this['eulerAngle'+'s'];}['getLocalEu'+'lerAngles'](){return this['localRotat'+'ion']['getEulerAn'+'gles'](this['localEuler'+'Angles']),this['localEuler'+'Angles'];}['getLocalPo'+'sition'](){return this['localPosit'+'ion'];}['getLocalRo'+'tation'](){return this['localRotat'+'ion'];}['getLocalSc'+'ale'](){return this['localScale'];}['getLocalTr'+'ansform'](){return this['_dirtyLoca'+'l']&&(this['localTrans'+'form']['setTRS'](this['localPosit'+'ion'],this['localRotat'+'ion'],this['localScale']),this['_dirtyLoca'+'l']=!(-0x20*0x1b+0x86*-0x1c+-0x9*-0x201)),this['localTrans'+'form'];}['getPositio'+'n'](){return this['getWorldTr'+'ansform']()['getTransla'+'tion'](this['position']),this['position'];}['getRotatio'+'n'](){return this['rotation']['setFromMat'+'4'](this['getWorldTr'+'ansform']()),this['rotation'];}['getScale'](){return this['_scale']||(this['_scale']=new D()),this['getWorldTr'+'ansform']()['getScale'](this['_scale']);}['getWorldTr'+'ansform'](){return!this['_dirtyLoca'+'l']&&!this['_dirtyWorl'+'d']?this['worldTrans'+'form']:(this['_parent']&&this['_parent']['getWorldTr'+'ansform'](),this['_sync'](),this['worldTrans'+'form']);}get['worldScale'+'Sign'](){return this['_worldScal'+'eSign']===-0xf12+-0x1d09+0x1*0x2c1b&&(this['_worldScal'+'eSign']=this['getWorldTr'+'ansform']()['scaleSign']),this['_worldScal'+'eSign'];}['remove'](){var _0xa6d3ae;(_0xa6d3ae=this['_parent'])==null||_0xa6d3ae['removeChil'+'d'](this);}['reparent'](_0xccf73d,_0x50bac4){this['remove'](),_0xccf73d&&(_0x50bac4>=0x2*-0x33+-0x66f*-0x1+-0x609?_0xccf73d['insertChil'+'d'](this,_0x50bac4):_0xccf73d['addChild'](this));}['setLocalEu'+'lerAngles'](_0x18214f,_0x2a4059,_0x341f95){this['localRotat'+'ion']['setFromEul'+'erAngles'](_0x18214f,_0x2a4059,_0x341f95),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setLocalPo'+'sition'](_0x17e3b2,_0x8aa515,_0x69542e){_0x17e3b2 instanceof D?this['localPosit'+'ion']['copy'](_0x17e3b2):this['localPosit'+'ion']['set'](_0x17e3b2,_0x8aa515,_0x69542e),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setLocalRo'+'tation'](_0x5c2989,_0x351f80,_0xb1e25e,_0x5152f8){_0x5c2989 instanceof le?this['localRotat'+'ion']['copy'](_0x5c2989):this['localRotat'+'ion']['set'](_0x5c2989,_0x351f80,_0xb1e25e,_0x5152f8),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setLocalSc'+'ale'](_0x346872,_0x17ce9c,_0x4924c4){_0x346872 instanceof D?this['localScale']['copy'](_0x346872):this['localScale']['set'](_0x346872,_0x17ce9c,_0x4924c4),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['_dirtifyLo'+'cal'](){this['_dirtyLoca'+'l']||(this['_dirtyLoca'+'l']=!(0x1c16+0xc4+-0x1cda*0x1),this['_dirtyWorl'+'d']||this['_dirtifyWo'+'rld']());}['_unfreezeP'+'arentToRoo'+'t'](){let _0x523c4b=this['_parent'];for(;_0x523c4b;)_0x523c4b['_frozen']=!(-0xb6f*0x1+-0x259f+0x310f),_0x523c4b=_0x523c4b['_parent'];}['_dirtifyWo'+'rld'](){this['_dirtyWorl'+'d']||this['_unfreezeP'+'arentToRoo'+'t'](),this['_dirtifyWo'+'rldInterna'+'l']();}['_dirtifyWo'+'rldInterna'+'l'](){if(!this['_dirtyWorl'+'d']){this['_frozen']=!(-0x12f9+-0x4*-0x422+0x272),this['_dirtyWorl'+'d']=!(-0x665*0x1+-0x6*-0x3f8+-0x27d*0x7);for(let _0x3b85c0=-0x1d46+0x19d7+0x36f;_0x3b85c0<this['_children']['length'];_0x3b85c0++)this['_children'][_0x3b85c0]['_dirtyWorl'+'d']||this['_children'][_0x3b85c0]['_dirtifyWo'+'rldInterna'+'l']();}this['_dirtyNorm'+'al']=!(0x3*-0x9ff+0x1b4c+-0x1*-0x2b1),this['_worldScal'+'eSign']=-0x266+-0x1b97+0x1dfd,this['_aabbVer']++;}['setPositio'+'n'](_0x11168a,_0x15691e,_0x1156ac){_0x11168a instanceof D?rs['copy'](_0x11168a):rs['set'](_0x11168a,_0x15691e,_0x1156ac),this['_parent']===null?this['localPosit'+'ion']['copy'](rs):(ro['copy'](this['_parent']['getWorldTr'+'ansform']())['invert'](),ro['transformP'+'oint'](rs,this['localPosit'+'ion'])),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setRotatio'+'n'](_0x29bbcd,_0x353908,_0x392168,_0x2f4f4c){if(_0x29bbcd instanceof le?as['copy'](_0x29bbcd):as['set'](_0x29bbcd,_0x353908,_0x392168,_0x2f4f4c),this['_parent']===null)this['localRotat'+'ion']['copy'](as);else{const _0x1238f5=this['_parent']['getRotatio'+'n']();Ia['copy'](_0x1238f5)['invert'](),this['localRotat'+'ion']['copy'](Ia)['mul'](as);}this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setPositio'+'nAndRotati'+'on'](_0x515c62,_0xfdb52d){if(this['_parent']===null)this['localPosit'+'ion']['copy'](_0x515c62),this['localRotat'+'ion']['copy'](_0xfdb52d);else{const _0x4301dd=this['_parent']['getWorldTr'+'ansform']();ro['copy'](_0x4301dd)['invert'](),ro['transformP'+'oint'](_0x515c62,this['localPosit'+'ion']),this['localRotat'+'ion']['setFromMat'+'4'](ro)['mul'](_0xfdb52d);}this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['setEulerAn'+'gles'](_0x23334d,_0x144115,_0x16b07b){if(this['localRotat'+'ion']['setFromEul'+'erAngles'](_0x23334d,_0x144115,_0x16b07b),this['_parent']!==null){const _0x2888a0=this['_parent']['getRotatio'+'n']();Ia['copy'](_0x2888a0)['invert'](),this['localRotat'+'ion']['mul2'](Ia,this['localRotat'+'ion']);}this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['addChild'](_0x32b9d8){this['_prepareIn'+'sertChild'](_0x32b9d8),this['_children']['push'](_0x32b9d8),this['_onInsertC'+'hild'](_0x32b9d8);}['addChildAn'+'dSaveTrans'+'form'](_0x511c72){const _0x38f9b6=_0x511c72['getPositio'+'n'](),_0x4806ff=_0x511c72['getRotatio'+'n']();this['_prepareIn'+'sertChild'](_0x511c72),_0x511c72['setPositio'+'n'](yE['copy'](this['worldTrans'+'form'])['invert']()['transformP'+'oint'](_0x38f9b6)),_0x511c72['setRotatio'+'n'](vE['copy'](this['getRotatio'+'n']())['invert']()['mul'](_0x4806ff)),this['_children']['push'](_0x511c72),this['_onInsertC'+'hild'](_0x511c72);}['insertChil'+'d'](_0x564ade,_0xaebcd0){this['_prepareIn'+'sertChild'](_0x564ade),this['_children']['splice'](_0xaebcd0,-0xef2*0x2+-0x1*0x7b5+0x2599,_0x564ade),this['_onInsertC'+'hild'](_0x564ade);}['_prepareIn'+'sertChild'](_0x94056d){_0x94056d['remove'](),w['assert'](_0x94056d!==this,'GraphNode\x20'+(_0x94056d==null?void(-0x1f81+-0xb5*-0x15+0x10a8):_0x94056d['name'])+('\x20cannot\x20be'+'\x20a\x20child\x20o'+'f\x20itself')),w['assert'](!this['isDescenda'+'ntOf'](_0x94056d),'GraphNode\x20'+(_0x94056d==null?void(-0xa3f+-0x5cc+0x100b):_0x94056d['name'])+('\x20cannot\x20ad'+'d\x20an\x20ances'+'tor\x20as\x20a\x20c'+'hild'));}['_fireOnHie'+'rarchy'](_0x3539f4,_0x41444d,_0x3c39b8){this['fire'](_0x3539f4,_0x3c39b8);for(let _0x26b178=-0xc11+0x87*-0x1d+0x1b5c;_0x26b178<this['_children']['length'];_0x26b178++)this['_children'][_0x26b178]['_fireOnHie'+'rarchy'](_0x41444d,_0x41444d,_0x3c39b8);}['_onInsertC'+'hild'](_0x2004ef){_0x2004ef['_parent']=this;const _0x1ff0ba=_0x2004ef['_enabled']&&this['enabled'];_0x2004ef['_enabledIn'+'Hierarchy']!==_0x1ff0ba&&(_0x2004ef['_enabledIn'+'Hierarchy']=_0x1ff0ba,_0x2004ef['_notifyHie'+'rarchyStat'+'eChanged'](_0x2004ef,_0x1ff0ba)),_0x2004ef['_updateGra'+'phDepth'](),_0x2004ef['_dirtifyWo'+'rld'](),this['_frozen']&&_0x2004ef['_unfreezeP'+'arentToRoo'+'t'](),_0x2004ef['_fireOnHie'+'rarchy']('insert','inserthier'+'archy',this),this['fire']&&this['fire']('childinser'+'t',_0x2004ef);}['_updateGra'+'phDepth'](){this['_graphDept'+'h']=this['_parent']?this['_parent']['_graphDept'+'h']+(-0x31*-0xa+0x180b+0x4*-0x67d):-0x17b0+0x5ec+0x11c4;for(let _0x16a94b=-0xdd8+0x1c96+0x33*-0x4a,_0x27a73d=this['_children']['length'];_0x16a94b<_0x27a73d;_0x16a94b++)this['_children'][_0x16a94b]['_updateGra'+'phDepth']();}['removeChil'+'d'](_0x1123c1){const _0x5497f4=this['_children']['indexOf'](_0x1123c1);_0x5497f4!==-(0x307+0xc3b+0x1*-0xf41)&&(this['_children']['splice'](_0x5497f4,0x223*0x7+-0x18a8+0x9b4),_0x1123c1['_parent']=null,_0x1123c1['_fireOnHie'+'rarchy']('remove','removehier'+'archy',this),this['fire']('childremov'+'e',_0x1123c1));}['_sync'](){if(this['_dirtyLoca'+'l']&&(this['localTrans'+'form']['setTRS'](this['localPosit'+'ion'],this['localRotat'+'ion'],this['localScale']),this['_dirtyLoca'+'l']=!(-0x5*0x6a1+0x87e+0x18a8*0x1)),this['_dirtyWorl'+'d']){if(this['_parent']===null)this['worldTrans'+'form']['copy'](this['localTrans'+'form']);else{if(this['scaleCompe'+'nsation']){let _0x2985e7;const _0x362623=this['_parent'];let _0x537e24=this['localScale'],_0xb592bb=_0x362623;if(_0xb592bb){for(;_0xb592bb&&_0xb592bb['scaleCompe'+'nsation'];)_0xb592bb=_0xb592bb['_parent'];_0xb592bb&&(_0xb592bb=_0xb592bb['_parent'],_0xb592bb&&(_0x2985e7=_0xb592bb['worldTrans'+'form']['getScale'](),T_['mul2'](_0x2985e7,this['localScale']),_0x537e24=T_));}Wd['setFromMat'+'4'](_0x362623['worldTrans'+'form']),x_['mul2'](Wd,this['localRotat'+'ion']);let _0x4bcf6c=_0x362623['worldTrans'+'form'];_0x362623['scaleCompe'+'nsation']&&(w_['mul2'](_0x2985e7,_0x362623['getLocalSc'+'ale']()),v_['setTRS'](_0x362623['worldTrans'+'form']['getTransla'+'tion'](Hd),Wd,w_),_0x4bcf6c=v_),_0x4bcf6c['transformP'+'oint'](this['localPosit'+'ion'],Hd),this['worldTrans'+'form']['setTRS'](Hd,x_,_0x537e24);}else this['worldTrans'+'form']['mulAffine2'](this['_parent']['worldTrans'+'form'],this['localTrans'+'form']);}this['_dirtyWorl'+'d']=!(-0x1dc8+-0x2*0x6dc+0x2b81);}}['syncHierar'+'chy'](){if(!this['_enabled']||this['_frozen'])return;this['_frozen']=!(-0x8b3+0x2c8*-0x4+0x13d3),(this['_dirtyLoca'+'l']||this['_dirtyWorl'+'d'])&&this['_sync']();const _0x57196e=this['_children'];for(let _0x4808a3=0x591+0x358*0xb+-0x2a59,_0xcaea24=_0x57196e['length'];_0x4808a3<_0xcaea24;_0x4808a3++)_0x57196e[_0x4808a3]['syncHierar'+'chy']();}['lookAt'](_0x180e4c,_0x52ad71,_0x5f4e40,_0x21a673=0x1fd8+0x267+-0x223f,_0x119d67=-0x316*0x2+0xd78+-0x1*0x74b,_0x4f6b50=-0x1*0x1aa8+0x5*0x7ae+0x3*-0x3ea){if(_0x180e4c instanceof D)$d['copy'](_0x180e4c),_0x52ad71 instanceof D?tc['copy'](_0x52ad71):tc['copy'](D['UP']);else{if(_0x5f4e40===void(-0x2660+-0x36*-0x12+0x2294))return;$d['set'](_0x180e4c,_0x52ad71,_0x5f4e40),tc['set'](_0x21a673,_0x119d67,_0x4f6b50);}E_['setLookAt'](this['getPositio'+'n'](),$d,tc),as['setFromMat'+'4'](E_),this['setRotatio'+'n'](as);}['translate'](_0x4f7a02,_0x41b8a2,_0x286429){_0x4f7a02 instanceof D?rs['copy'](_0x4f7a02):rs['set'](_0x4f7a02,_0x41b8a2,_0x286429),rs['add'](this['getPositio'+'n']()),this['setPositio'+'n'](rs);}['translateL'+'ocal'](_0x45c461,_0x40c4da,_0x50ae81){_0x45c461 instanceof D?rs['copy'](_0x45c461):rs['set'](_0x45c461,_0x40c4da,_0x50ae81),this['localRotat'+'ion']['transformV'+'ector'](rs,rs),this['localPosit'+'ion']['add'](rs),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['rotate'](_0x14a994,_0x1b70ee,_0x4f51d4){if(as['setFromEul'+'erAngles'](_0x14a994,_0x1b70ee,_0x4f51d4),this['_parent']===null)this['localRotat'+'ion']['mul2'](as,this['localRotat'+'ion']);else{const _0x2870b2=this['getRotatio'+'n'](),_0x4e7f55=this['_parent']['getRotatio'+'n']();Ia['copy'](_0x4e7f55)['invert'](),as['mul2'](Ia,as),this['localRotat'+'ion']['mul2'](as,_0x2870b2);}this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['rotateLoca'+'l'](_0x237c6d,_0x758027,_0x61c2da){as['setFromEul'+'erAngles'](_0x237c6d,_0x758027,_0x61c2da),this['localRotat'+'ion']['mul'](as),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}}const yv=new Kt();function Qn(_0x13a45b){const _0x3d06c0=yv['get'](_0x13a45b);return w['assert'](_0x3d06c0),_0x3d06c0;}function xE(_0x4920b9,_0x406d08){w['assert'](_0x406d08),yv['get'](_0x4920b9,()=>_0x406d08);}class TE{constructor(){h(this,'cache',new Map());}['destroy'](){this['cache']['forEach']((_0x4bf904,_0x574c1a)=>{_0x574c1a['destroy']();}),this['cache']['clear']();}['incRef'](_0x142d4a){const _0x460ef4=(this['cache']['get'](_0x142d4a)||-0x1*0x1c37+-0x19fb+0x3632)+(-0x68e*0x2+0x128e+-0xc7*0x7);this['cache']['set'](_0x142d4a,_0x460ef4);}['decRef'](_0x4b3d01){if(_0x4b3d01){let _0x5c0629=this['cache']['get'](_0x4b3d01);_0x5c0629&&(_0x5c0629--,_0x5c0629===0x1004+-0x1*0x26ad+-0x16a9*-0x1?(this['cache']['delete'](_0x4b3d01),_0x4b3d01['destroy']()):this['cache']['set'](_0x4b3d01,_0x5c0629));}}}class zi{static['incRef'](_0x9f3623){this['cache']['incRef'](_0x9f3623);}static['decRef'](_0xdf0f75){this['cache']['decRef'](_0xdf0f75);}static['destroy'](){this['cache']['destroy']();}}h(zi,'cache',new TE());let wE=0xbe6+-0x1*-0x1a8d+-0x2673;const EE=new De(),sc=new De(),Xd=new sp(),qd=new Set(),Rr=new Uint32Array(-0x1ef0+-0x11*-0x133+0xa91);class bE{constructor(_0x642577){h(this,'vertexBuff'+'er',null),h(this,'_destroyVe'+'rtexBuffer',!(0xde6+-0x1ef0+0x110b)),this['count']=_0x642577;}['destroy'](){var _0x5540ca;this['_destroyVe'+'rtexBuffer']&&((_0x5540ca=this['vertexBuff'+'er'])==null||_0x5540ca['destroy']()),this['vertexBuff'+'er']=null;}}class AE{constructor(){h(this,'map',new Map()),h(this,'meshMetaDa'+'ta',new Int32Array(0x21f9+-0x1*-0x19e9+-0x3bde));}['get'](_0x49220b){return this['map']['get'](_0x49220b)??this['map']['get'](null);}}class CE{constructor(){h(this,'shader'),h(this,'bindGroup',null),h(this,'uniformBuf'+'fer',null),h(this,'hashes');}['getBindGro'+'up'](_0xf1ff61){if(!this['bindGroup']){const _0x1f3346=this['shader'];w['assert'](_0x1f3346);const _0x1d30a7=_0x1f3346['meshBindGr'+'oupFormat'];w['assert'](_0x1d30a7),this['bindGroup']=new Up(_0xf1ff61,_0x1d30a7),Ea['setName'](this['bindGroup'],'MeshBindGr'+'oup_'+this['bindGroup']['id']);}return this['bindGroup'];}['getUniform'+'Buffer'](_0x4a169b){if(!this['uniformBuf'+'fer']){const _0x4b9380=this['shader'];w['assert'](_0x4b9380);const _0x5e2dd3=_0x4b9380['meshUnifor'+'mBufferFor'+'mat'];w['assert'](_0x5e2dd3),this['uniformBuf'+'fer']=new zp(_0x4a169b,_0x5e2dd3,!(-0xa41*-0x1+0xc00+0x40*-0x59));}return this['uniformBuf'+'fer'];}['destroy'](){var _0x4b511b,_0x417c9c;(_0x4b511b=this['bindGroup'])==null||_0x4b511b['destroy'](),this['bindGroup']=null,(_0x417c9c=this['uniformBuf'+'fer'])==null||_0x417c9c['destroy'](),this['uniformBuf'+'fer']=null;}}const Jr=class Jr{constructor(_0x46fcd3,_0x5e5de7,_0x3e4e6c=null){h(this,'castShadow',!(-0x1689+0x331*-0x5+0x267f)),h(this,'shadowCasc'+'adeMask',Bw),h(this,'cull',!(0x6d*-0x3b+0x176*0xd+0x20b*0x3)),h(this,'drawOrder',-0x7cd+-0x8aa*-0x2+-0x987),h(this,'_drawBucke'+'t',0xb*-0x4c+-0x3c5+-0x788*-0x1),h(this,'node'),h(this,'visible',!(-0x2472+0xc*-0x312+0x494a)),h(this,'visibleThi'+'sFrame',!(0x9e1+0x21*-0xc2+0x791*0x2)),h(this,'flipFacesF'+'actor',-0x1705+0x2179+-0x5*0x217),h(this,'gsplatInst'+'ance',null),h(this,'id',wE++),h(this,'isVisibleF'+'unc',null),h(this,'instancing'+'Data',null),h(this,'indirectDa'+'ta',null),h(this,'parameters',{}),h(this,'pick',!(-0x261c+0x3*0xb8d+0x375)),h(this,'stencilFro'+'nt',null),h(this,'stencilBac'+'k',null),h(this,'transparen'+'t',!(0x83*-0x49+-0x3ac+0x2908)),h(this,'_aabb',new De()),h(this,'_aabbVer',-(-0x1*-0x1e09+0x1f7b+-0x3d83)),h(this,'_aabbMeshV'+'er',-(0x14e+0x1910+0x1a5d*-0x1)),h(this,'_customAab'+'b',null),h(this,'_updateAab'+'b',!(0x2395*0x1+0x13a2+-0x101*0x37)),h(this,'_updateAab'+'bFunc',null),h(this,'_sortKeySh'+'adow',0x1*-0x13ee+-0xf09+0x22f7),h(this,'_sortKeyFo'+'rward',0x2ea*-0x1+-0x1a25+-0x1d0f*-0x1),h(this,'_sortKeyDy'+'namic',-0x3*-0x862+0x1cc*-0xe+0x2),h(this,'_layer',Ky),h(this,'_material',null),h(this,'_skinInsta'+'nce',null),h(this,'_morphInst'+'ance',null),h(this,'_receiveSh'+'adow',!(0x1f59+0x65d+-0x3*0xc92)),h(this,'_renderSty'+'le',un),h(this,'_screenSpa'+'ce',!(-0x839+0x461+0x3d9)),h(this,'_shaderCac'+'he',new Map()),h(this,'_shaderDef'+'s',Ss<<0x7aa+0x456+-0xbf0),h(this,'_calculate'+'SortDistan'+'ce',null);if(w['assert'](!(_0x46fcd3 instanceof Ie),'Incorrect\x20'+'parameters'+'\x20for\x20MeshI'+'nstance\x27s\x20'+'constructo'+'r.\x20Use\x20new'+'\x20MeshInsta'+'nce(mesh,\x20'+'material,\x20'+'node)'),this['node']=_0x3e4e6c,this['_mesh']=_0x46fcd3,_0x46fcd3['incRefCoun'+'t'](),this['material']=_0x5e5de7,_0x46fcd3['vertexBuff'+'er']){const _0x1d26b8=_0x46fcd3['vertexBuff'+'er']['format'];this['_shaderDef'+'s']|=_0x1d26b8['hasUv0']?nm:-0x1*-0x202f+0x18*0xdf+-0x3517,this['_shaderDef'+'s']|=_0x1d26b8['hasUv1']?dv:0x26b6+-0x1*0x21e5+0x4d1*-0x1,this['_shaderDef'+'s']|=_0x1d26b8['hasColor']?fv:-0x130d+0x1*-0x1465+-0x13b9*-0x2,this['_shaderDef'+'s']|=_0x1d26b8['hasTangent'+'s']?om:0x4e4*-0x1+-0x1842+0x1d26;}this['updateKey']();}set['drawBucket'](_0x15f162){this['_drawBucke'+'t']=Math['floor'](_0x15f162)&-0x1bb7+-0x1b8+-0x5*-0x616,this['updateKey']();}get['drawBucket'](){return this['_drawBucke'+'t'];}set['renderStyl'+'e'](_0x4f151e){this['_renderSty'+'le']=_0x4f151e,this['mesh']['prepareRen'+'derState'](_0x4f151e);}get['renderStyl'+'e'](){return this['_renderSty'+'le'];}set['mesh'](_0x353ead){_0x353ead!==this['_mesh']&&(this['_mesh']&&this['_mesh']['decRefCoun'+'t'](),this['_mesh']=_0x353ead,_0x353ead&&_0x353ead['incRefCoun'+'t']());}get['mesh'](){return this['_mesh'];}set['aabb'](_0x33e537){this['_aabb']=_0x33e537;}get['aabb'](){if(!this['_updateAab'+'b'])return this['_aabb'];if(this['_updateAab'+'bFunc'])return this['_updateAab'+'bFunc'](this['_aabb']);let _0x2b96ed=this['_customAab'+'b'],_0x4cc990=!!_0x2b96ed;if(!_0x2b96ed){if(_0x2b96ed=EE,this['skinInstan'+'ce']){if(!this['mesh']['boneAabb']){const _0x4feabe=this['_morphInst'+'ance']?this['_morphInst'+'ance']['morph']['_targets']:null;this['mesh']['_initBoneA'+'abbs'](_0x4feabe);}const _0x2bbf23=this['mesh']['boneUsed'];let _0x3bcf49=!(0x1d1+0x3e*-0x8b+0x1fd9*0x1);for(let _0x3be269=0x229+0x1*0x141b+-0x1644;_0x3be269<this['mesh']['boneAabb']['length'];_0x3be269++)_0x2bbf23[_0x3be269]&&(sc['setFromTra'+'nsformedAa'+'bb'](this['mesh']['boneAabb'][_0x3be269],this['skinInstan'+'ce']['matrices'][_0x3be269]),_0x3bcf49?(_0x3bcf49=!(0xa22*-0x3+-0x202a*0x1+0x1*0x3e91),_0x2b96ed['center']['copy'](sc['center']),_0x2b96ed['halfExtent'+'s']['copy'](sc['halfExtent'+'s'])):_0x2b96ed['add'](sc));_0x4cc990=!(0x1d1d*0x1+-0x138e+-0x98f);}else{if(this['node']['_aabbVer']!==this['_aabbVer']||this['mesh']['_aabbVer']!==this['_aabbMeshV'+'er']){if(this['mesh']?(_0x2b96ed['center']['copy'](this['mesh']['aabb']['center']),_0x2b96ed['halfExtent'+'s']['copy'](this['mesh']['aabb']['halfExtent'+'s'])):(_0x2b96ed['center']['set'](0x2640+0x7*0xeb+-0x2cad,-0x1*-0xf3b+-0x15f6+0x6bb,-0xb7*-0x6+0x2604*0x1+-0x1*0x2a4e),_0x2b96ed['halfExtent'+'s']['set'](-0x2024+-0x241*0xb+-0x35*-0x113,-0x20ea+-0xd8f+0x2e79,-0x3*-0xbe6+-0x1*0x404+-0x32b*0xa)),this['mesh']&&this['mesh']['morph']){const _0x130d00=this['mesh']['morph']['aabb'];_0x2b96ed['_expand'](_0x130d00['getMin'](),_0x130d00['getMax']());}_0x4cc990=!(0x6a*-0x2b+-0x1c57+0x2e25),this['_aabbVer']=this['node']['_aabbVer'],this['_aabbMeshV'+'er']=this['mesh']['_aabbVer'];}}}return _0x4cc990&&this['_aabb']['setFromTra'+'nsformedAa'+'bb'](_0x2b96ed,this['node']['getWorldTr'+'ansform']()),this['_aabb'];}['clearShade'+'rs'](){this['_shaderCac'+'he']['forEach'](_0x175c70=>{_0x175c70['destroy']();}),this['_shaderCac'+'he']['clear']();}['getShaderI'+'nstance'](_0x3d6878,_0x20623f,_0x59ff5b,_0x43577c,_0x38cd8b,_0x57b642,_0x1171ec){var _0x4f66be;const _0x408d13=this['_shaderDef'+'s'];Rr[-0xa1*0x3b+0xcf4+0xe5*0x1b]=_0x3d6878,Rr[0x1*-0x12be+0x15*-0xb7+0x21c2]=_0x20623f,Rr[-0xc65*-0x1+-0x16ba+0xa57]=_0x408d13,Rr[-0xc2*0x19+-0x1f3*0x7+0x209a]=_0x43577c['hash'];const _0x2cbba6=By(Rr);let _0x40ae29=this['_shaderCac'+'he']['get'](_0x2cbba6);if(!_0x40ae29){const _0x3a963f=this['_material'];if(_0x40ae29=new CE(),_0x40ae29['shader']=_0x3a963f['variants']['get'](_0x2cbba6),_0x40ae29['hashes']=new Uint32Array(Rr),!_0x40ae29['shader']){Q['pushGpuMar'+'ker'](this['mesh']['device'],'Node:\x20'+this['node']['name']);const _0x162f35=_0x3a963f['getShaderV'+'ariant']({'device':this['mesh']['device'],'scene':_0x59ff5b,'objDefs':_0x408d13,'cameraShaderParams':_0x43577c,'pass':_0x3d6878,'sortedLights':_0x1171ec,'viewUniformFormat':_0x38cd8b,'viewBindGroupFormat':_0x57b642,'vertexFormat':(_0x4f66be=this['mesh']['vertexBuff'+'er'])==null?void(-0x6ea*0x2+-0x128*-0xf+0x12c*-0x3):_0x4f66be['format']});Q['popGpuMark'+'er'](this['mesh']['device']),_0x3a963f['variants']['set'](_0x2cbba6,_0x162f35),_0x40ae29['shader']=_0x162f35;}this['_shaderCac'+'he']['set'](_0x2cbba6,_0x40ae29);}return w['call'](()=>{IT['equals'](_0x40ae29['hashes'],Rr)||w['errorOnce']('Hash\x20colli'+'sion\x20in\x20th'+'e\x20shader\x20c'+'ache\x20for\x20m'+'esh\x20instan'+'ce.\x20This\x20i'+'s\x20very\x20unl'+'ikely\x20but\x20'+'still\x20poss'+'ible.\x20Plea'+'se\x20report\x20'+'this\x20issue'+'.');}),_0x40ae29;}set['material'](_0x37bdbd){this['clearShade'+'rs']();const _0x8d56c0=this['_material'];_0x8d56c0&&_0x8d56c0['removeMesh'+'InstanceRe'+'f'](this),this['_material']=_0x37bdbd,_0x37bdbd&&(_0x37bdbd['addMeshIns'+'tanceRef'](this),this['transparen'+'t']=_0x37bdbd['transparen'+'t'],this['updateKey']());}get['material'](){return this['_material'];}['_updateSha'+'derDefs'](_0x4dd502){_0x4dd502!==this['_shaderDef'+'s']&&(this['_shaderDef'+'s']=_0x4dd502,this['clearShade'+'rs']());}set['calculateS'+'ortDistanc'+'e'](_0x5195ab){this['_calculate'+'SortDistan'+'ce']=_0x5195ab;}get['calculateS'+'ortDistanc'+'e'](){return this['_calculate'+'SortDistan'+'ce'];}set['receiveSha'+'dow'](_0x564ea7){this['_receiveSh'+'adow']!==_0x564ea7&&(this['_receiveSh'+'adow']=_0x564ea7,this['_updateSha'+'derDefs'](_0x564ea7?this['_shaderDef'+'s']&~wh:this['_shaderDef'+'s']|wh));}get['receiveSha'+'dow'](){return this['_receiveSh'+'adow'];}set['batching'](_0x5ec268){this['_updateSha'+'derDefs'](_0x5ec268?this['_shaderDef'+'s']|qc:this['_shaderDef'+'s']&~qc);}get['batching'](){return(this['_shaderDef'+'s']&qc)!==-0x60d+-0x683*0x3+0x1996;}set['skinInstan'+'ce'](_0x3b71bc){this['_skinInsta'+'nce']=_0x3b71bc,this['_updateSha'+'derDefs'](_0x3b71bc?this['_shaderDef'+'s']|nl:this['_shaderDef'+'s']&~nl),this['_setupSkin'+'Update']();}get['skinInstan'+'ce'](){return this['_skinInsta'+'nce'];}set['morphInsta'+'nce'](_0x396f89){var _0x21d0dc;(_0x21d0dc=this['_morphInst'+'ance'])==null||_0x21d0dc['destroy'](),this['_morphInst'+'ance']=_0x396f89;let _0x2f6b79=this['_shaderDef'+'s'];_0x2f6b79=_0x396f89&&_0x396f89['morph']['morphPosit'+'ions']?_0x2f6b79|ll:_0x2f6b79&~ll,_0x2f6b79=_0x396f89&&_0x396f89['morph']['morphNorma'+'ls']?_0x2f6b79|cl:_0x2f6b79&~cl,_0x2f6b79=_0x396f89&&_0x396f89['morph']['intRenderF'+'ormat']?_0x2f6b79|hl:_0x2f6b79&~hl,this['_updateSha'+'derDefs'](_0x2f6b79);}get['morphInsta'+'nce'](){return this['_morphInst'+'ance'];}set['screenSpac'+'e'](_0x438deb){this['_screenSpa'+'ce']!==_0x438deb&&(this['_screenSpa'+'ce']=_0x438deb,this['_updateSha'+'derDefs'](_0x438deb?this['_shaderDef'+'s']|Eh:this['_shaderDef'+'s']&~Eh));}get['screenSpac'+'e'](){return this['_screenSpa'+'ce'];}set['key'](_0x44bb20){this['_sortKeyFo'+'rward']=_0x44bb20;}get['key'](){return this['_sortKeyFo'+'rward'];}set['mask'](_0x530c73){const _0x1f7fca=this['_shaderDef'+'s']&0x7*0x1fa4+-0xdb*-0xf2+-0x1*0xac83;this['_updateSha'+'derDefs'](_0x1f7fca|_0x530c73<<0xad*-0x35+-0x2481+-0x22*-0x221);}get['mask'](){return this['_shaderDef'+'s']>>-0x1c58+-0x1*0xcd6+0x293e*0x1;}set['instancing'+'Count'](_0x425d24){this['instancing'+'Data']&&(this['instancing'+'Data']['count']=_0x425d24);}get['instancing'+'Count'](){return this['instancing'+'Data']?this['instancing'+'Data']['count']:-0x1bc2+0xe9*0xb+0x11bf;}['destroy'](){var _0x308955,_0x24745d,_0x56076d;const _0x3067f2=this['mesh'];_0x3067f2&&(this['mesh']=null,_0x3067f2['refCount']<0x232d+-0x1*-0x25fe+-0x492a&&_0x3067f2['destroy']()),this['setRealtim'+'eLightmap'](Jr['lightmapPa'+'ramNames'][0x2116+0x1f25+-0x9*0x723],null),this['setRealtim'+'eLightmap'](Jr['lightmapPa'+'ramNames'][-0x3a0+0xa35+-0x2*0x34a],null),(_0x308955=this['_skinInsta'+'nce'])==null||_0x308955['destroy'](),this['_skinInsta'+'nce']=null,(_0x24745d=this['morphInsta'+'nce'])==null||_0x24745d['destroy'](),this['morphInsta'+'nce']=null,this['clearShade'+'rs'](),this['material']=null,(_0x56076d=this['instancing'+'Data'])==null||_0x56076d['destroy']();}static['_prepareRe'+'nderStyleF'+'orArray'](_0x3f1eb3,_0x348c7a){if(_0x3f1eb3){for(let _0x574640=0x2c0+0x2d*0x9d+-0x1e59;_0x574640<_0x3f1eb3['length'];_0x574640++){_0x3f1eb3[_0x574640]['_renderSty'+'le']=_0x348c7a;const _0xcacc32=_0x3f1eb3[_0x574640]['mesh'];qd['has'](_0xcacc32)||(qd['add'](_0xcacc32),_0xcacc32['prepareRen'+'derState'](_0x348c7a));}qd['clear']();}}['_isVisible'](_0x4f5829){return this['visible']?this['isVisibleF'+'unc']?this['isVisibleF'+'unc'](_0x4f5829):(Xd['center']=this['aabb']['center'],Xd['radius']=this['_aabb']['halfExtent'+'s']['length'](),_0x4f5829['frustum']['containsSp'+'here'](Xd)>0x909+-0x36d*0x1+-0x59c):!(-0x1cb2+0x17e8+0x4cb);}['updateKey'](){const {material:_0x498af3}=this;this['_sortKeyFo'+'rward']=this['_drawBucke'+'t']<<0x1c21+-0x4*0x76d+0x1aa|(_0x498af3['alphaToCov'+'erage']||_0x498af3['alphaTest']?-0x178*0x448f+0x2602c*0x29+0x434afc:-0x22e5+0x13a3*-0x1+0x28*0x15d)|_0x498af3['id']&-0x11847e+0x6b5b6f+-0x19d6f2;}['setInstanc'+'ing'](_0x2d02d9,_0x4364ba=!(0x823+-0x1*0x71f+0x25*-0x7)){_0x2d02d9?(this['instancing'+'Data']=new bE(_0x2d02d9['numVertice'+'s']),this['instancing'+'Data']['vertexBuff'+'er']=_0x2d02d9,_0x2d02d9['format']['instancing']=!(-0x1b3b*-0x1+0xe0*-0x6+-0x14b*0x11),this['cull']=_0x4364ba):(this['instancing'+'Data']=null,this['cull']=!(-0xc6+0x19*-0x153+0x21e1)),this['_updateSha'+'derDefs'](_0x2d02d9?this['_shaderDef'+'s']|ol:this['_shaderDef'+'s']&~ol);}['setIndirec'+'t'](_0x486ae4,_0x471f1e){this['_allocIndi'+'rectData'](),this['indirectDa'+'ta']['map']['set']((_0x486ae4==null?void(-0x14b9+-0x70b+0x6f1*0x4):_0x486ae4['camera'])??null,_0x471f1e),this['mesh']['device']['mapsToClea'+'r']['add'](this['indirectDa'+'ta']['map']);}['getIndirec'+'tMetaData'](){var _0x3b6c7e;this['_allocIndi'+'rectData']();const _0x2707c2=(_0x3b6c7e=this['mesh'])==null?void(-0x606+0x32*-0x6d+0x1*0x1b50):_0x3b6c7e['primitive'][this['renderStyl'+'e']],_0x11200f=this['indirectDa'+'ta']['meshMetaDa'+'ta'];return _0x11200f[0x24a7*-0x1+0xc3b+0x412*0x6]=_0x2707c2['count'],_0x11200f[-0x75f+0x4bf+0x2a1]=_0x2707c2['base'],_0x11200f[0x263f*0x1+-0x1*-0x1ac9+-0x4106]=_0x2707c2['baseVertex'],_0x11200f;}['_allocIndi'+'rectData'](){this['indirectDa'+'ta']||(this['indirectDa'+'ta']=new AE());}['ensureMate'+'rial'](_0x28547e){this['material']||(w['warn']('Mesh\x20attac'+'hed\x20to\x20ent'+'ity\x20\x27'+this['node']['name']+('\x27\x20does\x20not'+'\x20have\x20a\x20ma'+'terial,\x20us'+'ing\x20a\x20defa'+'ult\x20one.')),this['material']=Qn(_0x28547e));}['clearParam'+'eters'](){this['parameters']={};}['getParamet'+'ers'](){return this['parameters'];}['getParamet'+'er'](_0x43e697){return this['parameters'][_0x43e697];}['setParamet'+'er'](_0x12ff5c,_0x304cad,_0x2fdf2b=-0x1af2ef11*-0x7+-0x1ab247373*0x1+0x143*0x187ece9){const _0x430285=this['parameters'][_0x12ff5c];_0x430285?(_0x430285['data']=_0x304cad,_0x430285['passFlags']=_0x2fdf2b):this['parameters'][_0x12ff5c]={'scopeId':null,'data':_0x304cad,'passFlags':_0x2fdf2b};}['setRealtim'+'eLightmap'](_0x5bb86b,_0x3669a3){const _0x95543c=this['getParamet'+'er'](_0x5bb86b);_0x95543c!==_0x3669a3&&(_0x95543c&&zi['decRef'](_0x95543c['data']),_0x3669a3?(zi['incRef'](_0x3669a3),this['setParamet'+'er'](_0x5bb86b,_0x3669a3)):this['deletePara'+'meter'](_0x5bb86b));}['deletePara'+'meter'](_0x133c7e){this['parameters'][_0x133c7e]&&delete this['parameters'][_0x133c7e];}['setParamet'+'ers'](_0x311ce1,_0x489430){const _0x494e4c=this['parameters'];for(const _0x39f64a in _0x494e4c){const _0x21952e=_0x494e4c[_0x39f64a];_0x21952e['passFlags']&_0x489430&&(_0x21952e['scopeId']||(_0x21952e['scopeId']=_0x311ce1['scope']['resolve'](_0x39f64a)),_0x21952e['scopeId']['setValue'](_0x21952e['data']));}}['setLightma'+'pped'](_0x1238fd){_0x1238fd?this['mask']=(this['mask']|di)&-(-0x219b+0x1e87+-0x18d*-0x2):(this['setRealtim'+'eLightmap'](Jr['lightmapPa'+'ramNames'][-0x1*0xdf+0x2227+-0x1*0x2148],null),this['setRealtim'+'eLightmap'](Jr['lightmapPa'+'ramNames'][0x1ed7+-0x4a7*0x6+-0x2c*0x11],null),this['_shaderDef'+'s']&=-(-0x61*-0x1+0xa*0x109+-0x1*-0x606),this['mask']=(this['mask']|Ss)&-(0xf00+0x5*-0x3ba+0x3a9));}['setCustomA'+'abb'](_0x4dfdc0){_0x4dfdc0?this['_customAab'+'b']?this['_customAab'+'b']['copy'](_0x4dfdc0):this['_customAab'+'b']=_0x4dfdc0['clone']():(this['_customAab'+'b']=null,this['_aabbVer']=-(0x1049+0x2*0x1000+-0x203*0x18)),this['_setupSkin'+'Update']();}['_setupSkin'+'Update'](){this['_skinInsta'+'nce']&&(this['_skinInsta'+'nce']['_updateBef'+'oreCull']=!this['_customAab'+'b']);}};h(Jr,'lightmapPa'+'ramNames',['texture_li'+'ghtMap','texture_di'+'rLightMap']);let He=Jr;const PE=[0x9c1*-0x3+0x254b*-0x1+0x428e,0x1a12+-0x1*-0xced+-0x137f*0x2,-0xa4a+-0x1b3b+0x2588,0x1861+0x24ef+-0x3d4e,0x1b54+0x5e4+-0x1*0x2135,0x541+-0xf3*0x26+-0x6*-0x523],ME=[0x4b5+-0x243a+0x1f85*0x1,-0xa64+0x17c9+0x1*-0xd64,-0x1d3e+-0x1481+0x31c2,-0x1237+-0x1*-0x42d+0x4ae*0x3,-0x2120+-0x17*0x12a+0x3be9,-0x17d4+-0x261c+0x3df2],A_=new _i();function C_(_0x3826df,_0x2ebbed){if(_0x3826df&&!_0x2ebbed||!_0x3826df&&_0x2ebbed)return!(0x69d+0x1655+-0x1cf1);if(_0x3826df=_0x3826df['data'],_0x2ebbed=_0x2ebbed['data'],_0x3826df===_0x2ebbed)return!(0xda*-0x1f+-0x11*-0x35+0x1*0x16e1);if(_0x3826df instanceof Float32Array&&_0x2ebbed instanceof Float32Array){if(_0x3826df['length']!==_0x2ebbed['length'])return!(0x2301+0xbd*0x19+-0x3575);for(let _0x435915=-0x3f7*0x7+-0x132c+-0x2eed*-0x1;_0x435915<_0x3826df['length'];_0x435915++)if(_0x3826df[_0x435915]!==_0x2ebbed[_0x435915])return!(-0x19d6+0x219e+-0x7c7);return!(-0x2b3*0x7+-0x2633+0x3918);}return!(0xf*0x1df+-0x17d5+-0x43b);}function DE(_0x663850,_0x1d40ce){for(const _0x2251ed in _0x663850)if(_0x663850['hasOwnProp'+'erty'](_0x2251ed)&&!C_(_0x663850[_0x2251ed],_0x1d40ce[_0x2251ed]))return!(-0x11d6+0xb9d*-0x3+0x34ae);for(const _0x2b7ddc in _0x1d40ce)if(_0x1d40ce['hasOwnProp'+'erty'](_0x2b7ddc)&&!C_(_0x1d40ce[_0x2b7ddc],_0x663850[_0x2b7ddc]))return!(-0x3*0xa00+-0x449*0x6+-0x11*-0x347);return!(-0x2363+-0x1860+-0x1*-0x3bc3);}function jd(_0x5a3f5f){return _0x5a3f5f['node']['worldTrans'+'form']['scaleSign'];}class IE{constructor(_0x2a417a,_0x376ac9,_0x548e8a){this['device']=_0x2a417a,this['rootNode']=_0x376ac9,this['scene']=_0x548e8a,this['_init']=!(0x26c4+-0x7a6+-0x1f1d),this['_batchGrou'+'ps']={},this['_batchGrou'+'pCounter']=0x19e1+0x2*0x771+-0x28c3,this['_batchList']=[],this['_dirtyGrou'+'ps']=[],this['_stats']={'createTime':0x0,'updateLastFrameTime':0x0};}['destroy'](){this['device']=null,this['rootNode']=null,this['scene']=null,this['_batchGrou'+'ps']={},this['_batchList']=[],this['_dirtyGrou'+'ps']=[];}['addGroup'](_0x4119ef,_0x1d73de,_0xc8eedd,_0x61a121,_0x54f491){if(_0x61a121===void(-0x1889*0x1+-0x13*0xdd+0x28f0)&&(_0x61a121=this['_batchGrou'+'pCounter'],this['_batchGrou'+'pCounter']++),this['_batchGrou'+'ps'][_0x61a121]){w['error']('Batch\x20grou'+'p\x20with\x20id\x20'+_0x61a121+('\x20already\x20e'+'xists.'));return;}const _0x2691a8=new St(_0x61a121,_0x4119ef,_0x1d73de,_0xc8eedd,_0x54f491);return this['_batchGrou'+'ps'][_0x61a121]=_0x2691a8,_0x2691a8;}['removeGrou'+'p'](_0x5c80b6){if(!this['_batchGrou'+'ps'][_0x5c80b6]){w['error']('Batch\x20grou'+'p\x20with\x20id\x20'+_0x5c80b6+('\x20doesn\x27t\x20e'+'xist.'));return;}const _0x26aee6=[];for(let _0x1817c9=-0x1193+0x2081+-0xeee;_0x1817c9<this['_batchList']['length'];_0x1817c9++)this['_batchList'][_0x1817c9]['batchGroup'+'Id']===_0x5c80b6?this['destroyBat'+'ch'](this['_batchList'][_0x1817c9]):_0x26aee6['push'](this['_batchList'][_0x1817c9]);this['_batchList']=_0x26aee6,this['_removeMod'+'elsFromBat'+'chGroup'](this['rootNode'],_0x5c80b6),delete this['_batchGrou'+'ps'][_0x5c80b6];}['markGroupD'+'irty'](_0x1d7ec7){this['_dirtyGrou'+'ps']['indexOf'](_0x1d7ec7)<-0x18b7+-0x325+-0x1*-0x1bdc&&this['_dirtyGrou'+'ps']['push'](_0x1d7ec7);}['getGroupBy'+'Name'](_0xf0c2de){const _0x5499be=this['_batchGrou'+'ps'];for(const _0x5d34cb in _0x5499be)if(_0x5499be['hasOwnProp'+'erty'](_0x5d34cb)&&_0x5499be[_0x5d34cb]['name']===_0xf0c2de)return _0x5499be[_0x5d34cb];return null;}['getBatches'](_0xbad06a){const _0x18e16c=[],_0x55f735=this['_batchList']['length'];for(let _0x575d7c=0x1*-0x24e5+0xe1*-0x1+-0x1*-0x25c6;_0x575d7c<_0x55f735;_0x575d7c++){const _0x3b0e4a=this['_batchList'][_0x575d7c];_0x3b0e4a['batchGroup'+'Id']===_0xbad06a&&_0x18e16c['push'](_0x3b0e4a);}return _0x18e16c;}['_removeMod'+'elsFromBat'+'chGroup'](_0x2d2568,_0x31f430){if(_0x2d2568['enabled']){_0x2d2568['model']&&_0x2d2568['model']['batchGroup'+'Id']===_0x31f430&&(_0x2d2568['model']['batchGroup'+'Id']=-(-0x20e3*0x1+-0x4*0x3a3+0x210*0x17)),_0x2d2568['render']&&_0x2d2568['render']['batchGroup'+'Id']===_0x31f430&&(_0x2d2568['render']['batchGroup'+'Id']=-(0x11ab+-0x460+0x6a5*-0x2)),_0x2d2568['element']&&_0x2d2568['element']['batchGroup'+'Id']===_0x31f430&&(_0x2d2568['element']['batchGroup'+'Id']=-(-0x1*0x727+-0xb29+0x1251)),_0x2d2568['sprite']&&_0x2d2568['sprite']['batchGroup'+'Id']===_0x31f430&&(_0x2d2568['sprite']['batchGroup'+'Id']=-(0x18d8+-0x1*0x130a+0x9*-0xa5));for(let _0x2cfcb0=0x2*-0x10c7+-0x112d*-0x2+0x66*-0x2;_0x2cfcb0<_0x2d2568['_children']['length'];_0x2cfcb0++)this['_removeMod'+'elsFromBat'+'chGroup'](_0x2d2568['_children'][_0x2cfcb0],_0x31f430);}}['insert'](_0x53888a,_0x88e4f5,_0x48d034){const _0x302c67=this['_batchGrou'+'ps'][_0x88e4f5];w['assert'](_0x302c67,'Invalid\x20ba'+'tch\x20'+_0x88e4f5+'\x20insertion'),_0x302c67&&_0x302c67['_obj'][_0x53888a]['indexOf'](_0x48d034)<0x1*0x21a9+0x24bd+-0x4666&&(_0x302c67['_obj'][_0x53888a]['push'](_0x48d034),this['markGroupD'+'irty'](_0x88e4f5));}['remove'](_0x3827ca,_0x449a93,_0x524ccf){const _0x40950c=this['_batchGrou'+'ps'][_0x449a93];if(w['assert'](_0x40950c,'Invalid\x20ba'+'tch\x20'+_0x449a93+'\x20insertion'),_0x40950c){const _0xd0ecf5=_0x40950c['_obj'][_0x3827ca]['indexOf'](_0x524ccf);_0xd0ecf5>=0x823+-0xa3d*-0x2+-0x1*0x1c9d&&(_0x40950c['_obj'][_0x3827ca]['splice'](_0xd0ecf5,0x2062+-0x2f1*0x7+-0x1*0xbca),this['markGroupD'+'irty'](_0x449a93));}}['_extractRe'+'nder'](_0x4051b1,_0x42ace9,_0x56f58f,_0x2e1c84){return _0x4051b1['render']&&(_0x42ace9=_0x2e1c84[_0x4051b1['render']['batchGroup'+'Id']]=_0x42ace9['concat'](_0x4051b1['render']['meshInstan'+'ces']),_0x4051b1['render']['removeFrom'+'Layers']()),_0x42ace9;}['_extractMo'+'del'](_0x559b20,_0x171fa4,_0x5758e8,_0x5623b1){return _0x559b20['model']&&_0x559b20['model']['model']&&(_0x171fa4=_0x5623b1[_0x559b20['model']['batchGroup'+'Id']]=_0x171fa4['concat'](_0x559b20['model']['meshInstan'+'ces']),_0x559b20['model']['removeMode'+'lFromLayer'+'s'](),_0x559b20['model']['_batchGrou'+'p']=_0x5758e8),_0x171fa4;}['_extractEl'+'ement'](_0x4cf509,_0x547904,_0x351ee4){if(!_0x4cf509['element'])return;let _0x31ba1a=!(0x2403+-0x2c*0xc2+0x16*-0x1f);_0x4cf509['element']['_text']&&_0x4cf509['element']['_text']['_model']['meshInstan'+'ces']['length']>0x12d1*0x1+0x15b0+0x2881*-0x1?(_0x547904['push'](_0x4cf509['element']['_text']['_model']['meshInstan'+'ces'][-0x1*0x24cb+0x19e+-0x709*-0x5]),_0x4cf509['element']['removeMode'+'lFromLayer'+'s'](_0x4cf509['element']['_text']['_model']),_0x31ba1a=!(-0x1*-0x1086+0x5*-0x2e4+0x1*-0x212)):_0x4cf509['element']['_image']&&(_0x547904['push'](_0x4cf509['element']['_image']['_renderabl'+'e']['meshInstan'+'ce']),_0x4cf509['element']['removeMode'+'lFromLayer'+'s'](_0x4cf509['element']['_image']['_renderabl'+'e']['model']),_0x4cf509['element']['_image']['_renderabl'+'e']['unmaskMesh'+'Instance']&&(_0x547904['push'](_0x4cf509['element']['_image']['_renderabl'+'e']['unmaskMesh'+'Instance']),(!_0x4cf509['element']['_image']['_renderabl'+'e']['unmaskMesh'+'Instance']['stencilFro'+'nt']||!_0x4cf509['element']['_image']['_renderabl'+'e']['unmaskMesh'+'Instance']['stencilBac'+'k'])&&(_0x4cf509['element']['_dirtifyMa'+'sk'](),_0x4cf509['element']['_onPrerend'+'er']())),_0x31ba1a=!(-0x989+0x2*-0x86b+-0x9d*-0x2b)),_0x31ba1a&&(_0x351ee4['_ui']=!(-0x1037+0x2114+-0x10dd),_0x4cf509['element']['_batchGrou'+'p']=_0x351ee4);}['_collectAn'+'dRemoveMes'+'hInstances'](_0x51dafa,_0x4a2147){for(let _0x50b68a=-0x1*0x1883+0x15bf+0x2c4;_0x50b68a<_0x4a2147['length'];_0x50b68a++){const _0x5e34be=_0x4a2147[_0x50b68a],_0x3886a3=this['_batchGrou'+'ps'][_0x5e34be];if(!_0x3886a3)continue;let _0x38f8ce=_0x51dafa[_0x5e34be];_0x38f8ce||(_0x38f8ce=_0x51dafa[_0x5e34be]=[]);for(let _0x167a61=-0x1acf+-0x16b3+0x3182;_0x167a61<_0x3886a3['_obj']['model']['length'];_0x167a61++)_0x38f8ce=this['_extractMo'+'del'](_0x3886a3['_obj']['model'][_0x167a61],_0x38f8ce,_0x3886a3,_0x51dafa);for(let _0x50e55b=-0x16fc+0x1*-0x25af+0x3cab;_0x50e55b<_0x3886a3['_obj']['render']['length'];_0x50e55b++)_0x38f8ce=this['_extractRe'+'nder'](_0x3886a3['_obj']['render'][_0x50e55b],_0x38f8ce,_0x3886a3,_0x51dafa);for(let _0x10dcc4=-0xd26+-0x1e09+-0x2e1*-0xf;_0x10dcc4<_0x3886a3['_obj']['element']['length'];_0x10dcc4++)this['_extractEl'+'ement'](_0x3886a3['_obj']['element'][_0x10dcc4],_0x38f8ce,_0x3886a3);for(let _0x3033ca=-0x195b+0x23e0+-0xa85;_0x3033ca<_0x3886a3['_obj']['sprite']['length'];_0x3033ca++){const _0x12f7b4=_0x3886a3['_obj']['sprite'][_0x3033ca];_0x12f7b4['sprite']&&_0x12f7b4['sprite']['_meshInsta'+'nce']&&(_0x3886a3['dynamic']||_0x12f7b4['sprite']['sprite']['_renderMod'+'e']===ci)&&(_0x38f8ce['push'](_0x12f7b4['sprite']['_meshInsta'+'nce']),_0x12f7b4['sprite']['removeMode'+'lFromLayer'+'s'](),_0x3886a3['_sprite']=!(-0x7e9+-0x1b7*0x16+0x2da3),_0x12f7b4['sprite']['_batchGrou'+'p']=_0x3886a3);}}}['generate'](_0x287b72){const _0x37d9ff={};_0x287b72||(_0x287b72=Object['keys'](this['_batchGrou'+'ps']));const _0x2132d8=[];for(let _0x410f89=-0xcdd+-0x10*0x5f+-0x1*-0x12cd;_0x410f89<this['_batchList']['length'];_0x410f89++){if(_0x287b72['indexOf'](this['_batchList'][_0x410f89]['batchGroup'+'Id'])<0x2*0x6c4+0x286+-0x336*0x5){_0x2132d8['push'](this['_batchList'][_0x410f89]);continue;}this['destroyBat'+'ch'](this['_batchList'][_0x410f89]);}if(this['_batchList']=_0x2132d8,this['_collectAn'+'dRemoveMes'+'hInstances'](_0x37d9ff,_0x287b72),_0x287b72===this['_dirtyGrou'+'ps'])this['_dirtyGrou'+'ps']['length']=0x49*0x4a+-0xefe+-0x61c;else{const _0x24d334=[];for(let _0xcd6109=-0x1a6d+-0x8*0x476+-0x3e1d*-0x1;_0xcd6109<this['_dirtyGrou'+'ps']['length'];_0xcd6109++)_0x287b72['indexOf'](this['_dirtyGrou'+'ps'][_0xcd6109])<0x8a+0x2605*-0x1+0x257b&&_0x24d334['push'](this['_dirtyGrou'+'ps'][_0xcd6109]);this['_dirtyGrou'+'ps']=_0x24d334;}let _0x403fed,_0x5f0218,_0x2dac7a,_0x52f954;for(const _0x3c4331 in _0x37d9ff)if(_0x37d9ff['hasOwnProp'+'erty'](_0x3c4331)){if(_0x403fed=_0x37d9ff[_0x3c4331],_0x2dac7a=this['_batchGrou'+'ps'][_0x3c4331],!_0x2dac7a){w['error']('batch\x20grou'+'p\x20'+_0x3c4331+'\x20not\x20found');continue;}_0x5f0218=this['prepare'](_0x403fed,_0x2dac7a['dynamic'],_0x2dac7a['maxAabbSiz'+'e'],_0x2dac7a['_ui']||_0x2dac7a['_sprite']);for(let _0x50101f=0xd*-0x16f+-0xb1+-0x4d5*-0x4;_0x50101f<_0x5f0218['length'];_0x50101f++)_0x52f954=this['create'](_0x5f0218[_0x50101f],_0x2dac7a['dynamic'],parseInt(_0x3c4331,-0x1066+-0x1f9d*-0x1+-0xf2d)),_0x52f954&&_0x52f954['addToLayer'+'s'](this['scene'],_0x2dac7a['layers']);}}['prepare'](_0x53e8a0,_0xf426f6,_0x2b5f89=Number['POSITIVE_I'+'NFINITY'],_0x2fba9f){if(_0x53e8a0['length']===0x1a67+0x960+0x23c7*-0x1)return[];const _0x47d909=_0x2b5f89*(-0x17*-0x29+0x1b*0x7f+-0x2*0x88a+0.5),_0x58db36=-0x6ed+0x1451+-0x964,_0x35dedc=0x422d09*0x463+-0x551f8c58*-0x1+0x56d987e*-0x16,_0x21705d=new De(),_0x46e0d2=new De();let _0x55246b=null,_0x3754ec;const _0xa15f84=[];let _0x31f1a5=-0x21e0+-0x161d+0x37fd;_0x2fba9f&&_0x53e8a0['sort']((_0x230d21,_0xceb575)=>_0x230d21['drawOrder']-_0xceb575['drawOrder']);let _0x299753=_0x53e8a0,_0x259fc2;const _0x17fc43=_0x2fba9f?function(_0x40f480){_0x55246b?_0x55246b['add'](_0x40f480['aabb']):_0x55246b=_0x40f480['aabb']['clone'](),_0x259fc2['push'](_0x40f480);}:function(_0x56ed0b){_0x259fc2['push'](_0x56ed0b);};for(;_0x299753['length']>-0x2576+0x49f*0x7+0x11*0x4d;){_0xa15f84[_0x31f1a5]=[_0x299753[0x128a+-0x6ff*-0x1+-0x1989]],_0x259fc2=[];const _0xb3dd60=_0x299753[0x1243+0x2bc+-0x14ff]['material'],_0x411de9=_0x299753[-0x4f*0x9+0x1f74+-0x1cad]['layer'],_0x1be4b7=_0x299753[0x111b+-0x2208*0x1+0x10ed]['_shaderDef'+'s'],_0x194130=_0x299753[0x252f+0x548*-0x1+0x1fe7*-0x1]['parameters'],_0x12e9ba=_0x299753[0x2*0x411+-0x1*0x8c3+0xa1]['stencilFro'+'nt'];let _0x4dd218=_0x299753[-0xcee*-0x3+-0x14a0+-0x9b*0x1e]['mesh']['vertexBuff'+'er']['getNumVert'+'ices']();const _0x265d8d=_0x299753[-0x1b6a*0x1+0x100*0x2+0x196a]['drawOrder'];_0x21705d['copy'](_0x299753[-0x1*-0x271+0x89*0x34+-0x1e45]['aabb']);const _0xd5d7ba=jd(_0x299753[-0x3b9*0x1+0x1c0f+0x1856*-0x1]),_0x2b4714=_0x299753[0x7f*0x3d+-0x17b9+-0x9*0xba]['mesh']['vertexBuff'+'er']['format']['batchingHa'+'sh'],_0x37c854=_0x299753[0x1*0x1edf+-0x1597+-0x948]['mesh']['primitive'][-0x14*-0x114+-0x65b*-0x2+-0x2246]['indexed'];_0x55246b=null;for(let _0x377c69=-0x1*0x20ea+0x26*0x15+0x1dcd;_0x377c69<_0x299753['length'];_0x377c69++){const _0x489b32=_0x299753[_0x377c69];if(_0xf426f6&&_0xa15f84[_0x31f1a5]['length']>=_0x58db36){_0x259fc2=_0x259fc2['concat'](_0x299753['slice'](_0x377c69));break;}if(_0xb3dd60!==_0x489b32['material']||_0x411de9!==_0x489b32['layer']||_0x2b4714!==_0x489b32['mesh']['vertexBuff'+'er']['format']['batchingHa'+'sh']||_0x37c854!==_0x489b32['mesh']['primitive'][0x1df+0x3*-0xc7+0x76]['indexed']||_0x1be4b7!==_0x489b32['_shaderDef'+'s']||_0x4dd218+_0x489b32['mesh']['vertexBuff'+'er']['getNumVert'+'ices']()>_0x35dedc){_0x17fc43(_0x489b32);continue;}if(_0x46e0d2['copy'](_0x21705d),_0x46e0d2['add'](_0x489b32['aabb']),_0x46e0d2['halfExtent'+'s']['x']>_0x47d909||_0x46e0d2['halfExtent'+'s']['y']>_0x47d909||_0x46e0d2['halfExtent'+'s']['z']>_0x47d909){_0x17fc43(_0x489b32);continue;}if(_0x12e9ba&&(!(_0x3754ec=_0x489b32['stencilFro'+'nt'])||_0x12e9ba['func']!==_0x3754ec['func']||_0x12e9ba['zpass']!==_0x3754ec['zpass'])){_0x17fc43(_0x489b32);continue;}if(_0xd5d7ba!==jd(_0x489b32)){_0x17fc43(_0x489b32);continue;}if(!DE(_0x194130,_0x489b32['parameters'])){_0x17fc43(_0x489b32);continue;}if(_0x2fba9f&&_0x55246b&&_0x55246b['intersects'](_0x489b32['aabb'])&&_0x489b32['drawOrder']!==_0x265d8d){_0x17fc43(_0x489b32);continue;}_0x21705d['add'](_0x489b32['aabb']),_0x4dd218+=_0x489b32['mesh']['vertexBuff'+'er']['getNumVert'+'ices'](),_0xa15f84[_0x31f1a5]['push'](_0x489b32);}_0x31f1a5++,_0x299753=_0x259fc2;}return _0xa15f84;}['collectBat'+'chedMeshDa'+'ta'](_0x487eb0,_0x3498eb){let _0x32ce3e=null,_0x4a2d7f=-0x1765+-0x246*-0x1+0x151f,_0x4862fd=0xeee+0xe96+0x2*-0xec2,_0x852a03=null;for(let _0x349568=-0x2157+0x1*-0x1d1a+-0x2b7*-0x17;_0x349568<_0x487eb0['length'];_0x349568++)if(_0x487eb0[_0x349568]['visible']){const _0x371266=_0x487eb0[_0x349568]['mesh'],_0x291cd3=_0x371266['vertexBuff'+'er']['numVertice'+'s'];if(_0x4a2d7f+=_0x291cd3,_0x371266['primitive'][-0x59d+-0xa8b+-0x16*-0xbc]['indexed'])_0x4862fd+=_0x371266['primitive'][-0x1f46*-0x1+-0x1*-0x18e6+0xe0b*-0x4]['count'];else{const _0x5670db=_0x371266['primitive'][-0xd87*-0x1+-0x2290+0x1509]['type'];(_0x5670db===oa||_0x5670db===Er)&&_0x371266['primitive'][-0x1ab3*0x1+-0xa*0x8e+-0x5*-0x673]['count']===0xfdb*-0x1+-0x21e0+-0x5*-0x9f3&&(_0x4862fd+=0x2*-0x132c+0x1*0xfad+0x16b1);}if(!_0x32ce3e){_0x852a03=_0x487eb0[_0x349568]['material'],_0x32ce3e={};const _0x17ef1d=_0x371266['vertexBuff'+'er']['format']['elements'];for(let _0x2a9501=0x69d+-0x13d7+0xd3a;_0x2a9501<_0x17ef1d['length'];_0x2a9501++){const _0xdf3de8=_0x17ef1d[_0x2a9501]['name'];_0x32ce3e[_0xdf3de8]={'numComponents':_0x17ef1d[_0x2a9501]['numCompone'+'nts'],'dataType':_0x17ef1d[_0x2a9501]['dataType'],'normalize':_0x17ef1d[_0x2a9501]['normalize'],'count':0x0};}_0x3498eb&&(_0x32ce3e[us]={'numComponents':0x1,'dataType':Ve,'normalize':!(-0x206f+0x2fe*-0x3+0x6e7*0x6),'count':0x0});}}return{'streams':_0x32ce3e,'batchNumVerts':_0x4a2d7f,'batchNumIndices':_0x4862fd,'material':_0x852a03};}['create'](_0x3a7d22,_0x4562f2,_0x3c0b11){const _0x3a1bb5=de();this['_init']||(this['vertexForm'+'ats']={},this['_init']=!(-0x2295+0x1608+0x77*0x1b));let _0x2e3d3c=null,_0x3223ae,_0x295faf,_0x2a60bb,_0x1a8c0c=null;const _0x3661f7=this['collectBat'+'chedMeshDa'+'ta'](_0x3a7d22,_0x4562f2);if(_0x3661f7['streams']){const _0x206677=_0x3661f7['streams'];let _0x30a5b2=_0x3661f7['material'];const _0x2d4b25=_0x3661f7['batchNumVe'+'rts'],_0x9edc72=_0x3661f7['batchNumIn'+'dices'];_0x1a8c0c=new g_(_0x3a7d22,_0x4562f2,_0x3c0b11),this['_batchList']['push'](_0x1a8c0c);let _0x3b0142,_0x57bd62,_0x156c82,_0x542674,_0x139f92=0x571+-0x22d*0xf+-0x3b*-0x76,_0x8ea515=-0x3*-0x39b+0x1b8c+-0x265d,_0x559e7c;const _0x4ae182=_0x2d4b25<=0x1b253*-0x1+-0x6418+-0x18b35*-0x2?Uint16Array:Uint32Array,_0x1fefd2=new _0x4ae182(_0x9edc72);for(_0x3223ae in _0x206677)_0x2e3d3c=_0x206677[_0x3223ae],_0x2e3d3c['typeArrayT'+'ype']=wn[_0x2e3d3c['dataType']],_0x2e3d3c['elementByt'+'eSize']=No[_0x2e3d3c['dataType']],_0x2e3d3c['buffer']=new _0x2e3d3c['typeArrayT'+'ype'](_0x2d4b25*_0x2e3d3c['numCompone'+'nts']);for(let _0x24f137=-0x1*-0x1c8b+0x1dec+0x67f*-0x9;_0x24f137<_0x3a7d22['length'];_0x24f137++)if(_0x3a7d22[_0x24f137]['visible']){_0x295faf=_0x3a7d22[_0x24f137]['mesh'],_0x2a60bb=_0x295faf['vertexBuff'+'er']['numVertice'+'s'],_0x4562f2||(_0x559e7c=_0x3a7d22[_0x24f137]['node']['getWorldTr'+'ansform']());for(_0x3223ae in _0x206677)if(_0x3223ae!==us){_0x2e3d3c=_0x206677[_0x3223ae];const _0x3af667=new _0x2e3d3c['typeArrayT'+'ype'](_0x2e3d3c['buffer']['buffer'],_0x2e3d3c['elementByt'+'eSize']*_0x2e3d3c['count']),_0x4ad23e=_0x295faf['getVertexS'+'tream'](_0x3223ae,_0x3af667)*_0x2e3d3c['numCompone'+'nts'];if(_0x2e3d3c['count']+=_0x4ad23e,!_0x4562f2&&_0x2e3d3c['numCompone'+'nts']>=-0x6a2+0x1*0x1ae+-0x4f7*-0x1){if(_0x3223ae===Me){const _0x5d755d=_0x559e7c['data'],_0x34822c=_0x5d755d[-0x1*-0x45a+0x1509+-0x1963],_0x31d10b=_0x5d755d[-0x85*-0x42+-0x1b*0xcd+-0xcaa],_0x53f873=_0x5d755d[-0x65*-0xa+-0x2004+0x1c14],_0x517975=_0x5d755d[0x143*-0x13+-0x246+0xf9*0x1b],_0x3e2768=_0x5d755d[-0xca+0x39*-0x59+0x14a0],_0x47a6ce=_0x5d755d[-0x10bf+0xc5b*-0x2+-0x29*-0x103],_0x13deff=_0x5d755d[0x145*-0x5+-0x49*0x53+-0x3*-0xa04],_0x2eae7f=_0x5d755d[0x2*0xf92+0x1f5*-0x7+-0x1168],_0x29bc72=_0x5d755d[0x7*-0x33d+-0x1*-0x21d3+-0xb1e],_0xba8cba=_0x5d755d[-0x2*0x8ad+0x18e7+-0x71*0x11],_0x2d4cf9=_0x5d755d[0x1*-0x1969+-0x5*-0x14f+-0x1*-0x12eb],_0x1779ce=_0x5d755d[0x3e1+0x2122+-0x24f5];let _0x533bf5,_0x19a6e6,_0x355c08;for(let _0xc81a12=0x49*0x47+-0x3*0x824+0x1*0x42d;_0xc81a12<_0x4ad23e;_0xc81a12+=_0x2e3d3c['numCompone'+'nts'])_0x533bf5=_0x3af667[_0xc81a12],_0x19a6e6=_0x3af667[_0xc81a12+(-0x1*-0x718+-0x10d+-0x60a)],_0x355c08=_0x3af667[_0xc81a12+(0x3*-0x130+-0x16ab*0x1+0x1a3d)],_0x3af667[_0xc81a12]=_0x533bf5*_0x34822c+_0x19a6e6*_0x517975+_0x355c08*_0x13deff+_0xba8cba,_0x3af667[_0xc81a12+(0x489*-0x3+0x2ef*-0x8+0x1c4*0x15)]=_0x533bf5*_0x31d10b+_0x19a6e6*_0x3e2768+_0x355c08*_0x2eae7f+_0x2d4cf9,_0x3af667[_0xc81a12+(0x15e1+0x1*-0x2de+-0x1301)]=_0x533bf5*_0x53f873+_0x19a6e6*_0x47a6ce+_0x355c08*_0x29bc72+_0x1779ce;}else{if(_0x3223ae===gs||_0x3223ae===yi){A_['invertMat4'](_0x559e7c)['transpose']();const [_0x5633ad,_0x217821,_0x201430,_0x5d99c2,_0x3a8b64,_0x2d517e,_0x4d6b41,_0x302dde,_0x14e27b]=A_['data'];let _0x4f1562,_0x384159,_0x460c72;for(let _0x56dac8=0x203a+0xabb+-0x1*0x2af5;_0x56dac8<_0x4ad23e;_0x56dac8+=_0x2e3d3c['numCompone'+'nts'])_0x4f1562=_0x3af667[_0x56dac8],_0x384159=_0x3af667[_0x56dac8+(-0x1641+-0x5*-0x485+-0x57)],_0x460c72=_0x3af667[_0x56dac8+(0x25e3+0x24f7+-0x4ad8)],_0x3af667[_0x56dac8]=_0x4f1562*_0x5633ad+_0x384159*_0x5d99c2+_0x460c72*_0x4d6b41,_0x3af667[_0x56dac8+(0x1*0x267b+-0x245f+-0x21b)]=_0x4f1562*_0x217821+_0x384159*_0x3a8b64+_0x460c72*_0x302dde,_0x3af667[_0x56dac8+(0x31a+-0x26df*0x1+-0xbed*-0x3)]=_0x4f1562*_0x201430+_0x384159*_0x2d517e+_0x460c72*_0x14e27b;}}}}if(_0x4562f2){_0x2e3d3c=_0x206677[us];for(let _0x544370=-0x1dfd*0x1+-0xf37+0x2d34;_0x544370<_0x2a60bb;_0x544370++)_0x2e3d3c['buffer'][_0x2e3d3c['count']++]=_0x24f137;}if(_0x295faf['primitive'][-0x1ff4+-0x1904+0x38f8]['indexed']){_0x3b0142=_0x295faf['primitive'][0x1889*0x1+0x1*-0x152e+0x1*-0x35b]['base'],_0x57bd62=_0x295faf['primitive'][0x1a5*-0x8+-0x5*0x305+0x1c41]['baseVertex']||-0x64*0x35+-0x41*-0x61+-0xc9*0x5,_0x156c82=_0x295faf['primitive'][0x2229+-0x1b67+-0x2*0x361]['count'];const _0x4104f3=_0x295faf['indexBuffe'+'r'][-0x257e+0x7*0x2a8+0x12e6]['getFormat']();_0x542674=new Sh[_0x4104f3](_0x295faf['indexBuffe'+'r'][0x2*-0x3d1+-0x1160+0x1902]['storage']);}else{_0x57bd62=0x2167+-0x8*0x305+-0x93f;const _0x5d42f9=_0x295faf['primitive'][-0x271+-0x26e3+-0x2e*-0xe6]['type'];if(_0x5d42f9===oa||_0x5d42f9===Er){if(_0x295faf['primitive'][-0xf5c+-0x38e+0x12ea]['count']===-0x21*0xf4+0x8*-0x394+0x3c18)_0x3b0142=0x1928+0x15e3+-0x2f0b,_0x156c82=-0x216f+0x133*-0x19+0x3f70,_0x542674=_0x5d42f9===oa?PE:ME;else{_0x156c82=0x489*0x2+-0x1d02+-0x16*-0xe8;continue;}}}for(let _0x551865=0x493+0x59*-0x51+0xbcb*0x2;_0x551865<_0x156c82;_0x551865++)_0x1fefd2[_0x551865+_0x8ea515]=_0x542674[_0x3b0142+_0x551865]+_0x57bd62+_0x139f92;_0x8ea515+=_0x156c82,_0x139f92+=_0x2a60bb;}_0x295faf=new Ge(this['device']);for(_0x3223ae in _0x206677)_0x2e3d3c=_0x206677[_0x3223ae],_0x295faf['setVertexS'+'tream'](_0x3223ae,_0x2e3d3c['buffer'],_0x2e3d3c['numCompone'+'nts'],void(0x960+0x1*0x187d+0x1*-0x21dd),_0x2e3d3c['dataType'],_0x2e3d3c['normalize']);_0x1fefd2['length']>-0x1de8+-0x2419+0x4201&&_0x295faf['setIndices'](_0x1fefd2),_0x295faf['update'](js,!(0x6e5+0xed+0x3*-0x29b)),_0x4562f2&&(_0x30a5b2=_0x30a5b2['clone'](),_0x30a5b2['update']());const _0x1ee389=new He(_0x295faf,_0x30a5b2,this['rootNode']);_0x1ee389['castShadow']=_0x1a8c0c['origMeshIn'+'stances'][-0x14e3+-0xce*0x16+-0x59*-0x6f]['castShadow'],_0x1ee389['parameters']=_0x1a8c0c['origMeshIn'+'stances'][-0x2100*-0x1+0x53*-0x7+-0x1ebb]['parameters'],_0x1ee389['layer']=_0x1a8c0c['origMeshIn'+'stances'][-0xd3*-0x25+-0x17*0x15f+-0x7*-0x26]['layer'],_0x1ee389['_shaderDef'+'s']=_0x1a8c0c['origMeshIn'+'stances'][0x234d+-0x2188+-0x97*0x3]['_shaderDef'+'s'],_0x1ee389['batching']=!(0x215f+0x8b+0xb4e*-0x3),_0x1ee389['cull']=_0x1a8c0c['origMeshIn'+'stances'][-0xa*0x233+-0x36f*-0x1+0x128f]['cull'];const _0x28de67=this['_batchGrou'+'ps'][_0x3c0b11];if(_0x28de67&&_0x28de67['_ui']&&(_0x1ee389['cull']=!(-0x12ef+-0x2194+0x3484)),_0x4562f2){const _0x3c8c9b=[];for(let _0x1310a7=-0x1c2+0x1d72*-0x1+0x1f34;_0x1310a7<_0x1a8c0c['origMeshIn'+'stances']['length'];_0x1310a7++)_0x3c8c9b['push'](_0x1a8c0c['origMeshIn'+'stances'][_0x1310a7]['node']);_0x1ee389['skinInstan'+'ce']=new y_(this['device'],_0x3c8c9b,this['rootNode']);}_0x1ee389['_updateAab'+'b']=!(-0x1dd0+-0x1*0x1c19+0x39ea),_0x1ee389['drawOrder']=_0x1a8c0c['origMeshIn'+'stances'][0x563*-0x2+-0x1ef1+0x29b7]['drawOrder'],_0x1ee389['stencilFro'+'nt']=_0x1a8c0c['origMeshIn'+'stances'][-0x220d+0xcbd*0x1+0x1550]['stencilFro'+'nt'],_0x1ee389['stencilBac'+'k']=_0x1a8c0c['origMeshIn'+'stances'][-0x465+-0x7*-0x4a5+-0x1c1e]['stencilBac'+'k'],_0x1ee389['flipFacesF'+'actor']=jd(_0x1a8c0c['origMeshIn'+'stances'][-0x1a0+-0x547+-0x5d*-0x13]),_0x1ee389['castShadow']=_0x1a8c0c['origMeshIn'+'stances'][-0x25a1*-0x1+0x6*-0x5f2+-0x1f5]['castShadow'],_0x1a8c0c['meshInstan'+'ce']=_0x1ee389,_0x1a8c0c['updateBoun'+'dingBox']();}return this['_stats']['createTime']+=de()-_0x3a1bb5,_0x1a8c0c;}['updateAll'](){this['_dirtyGrou'+'ps']['length']>-0x20aa+-0x2b7+0x3*0xbcb&&this['generate'](this['_dirtyGrou'+'ps']);const _0x48de1e=de();for(let _0x261682=-0x174+0x255*-0x10+-0x1*-0x26c4;_0x261682<this['_batchList']['length'];_0x261682++)this['_batchList'][_0x261682]['dynamic']&&this['_batchList'][_0x261682]['updateBoun'+'dingBox']();this['_stats']['updateLast'+'FrameTime']=de()-_0x48de1e;}['clone'](_0x372c36,_0x39ad14){const _0x1f2dba=new g_(_0x39ad14,_0x372c36['dynamic'],_0x372c36['batchGroup'+'Id']);this['_batchList']['push'](_0x1f2dba);const _0x3192b5=[];for(let _0x54c0f2=0x2380+0x189b+-0x29d*0x17;_0x54c0f2<_0x39ad14['length'];_0x54c0f2++)_0x3192b5['push'](_0x39ad14[_0x54c0f2]['node']);return _0x1f2dba['meshInstan'+'ce']=new He(_0x372c36['meshInstan'+'ce']['mesh'],_0x372c36['meshInstan'+'ce']['material'],_0x372c36['meshInstan'+'ce']['node']),_0x1f2dba['meshInstan'+'ce']['_updateAab'+'b']=!(0x1*0x930+0xef*0x1+0x7*-0x172),_0x1f2dba['meshInstan'+'ce']['parameters']=_0x39ad14[0x6c3*0x4+-0xb4d+-0xfbf]['parameters'],_0x1f2dba['meshInstan'+'ce']['cull']=_0x39ad14[0x5ff+0x30d*-0xb+0x6*0x498]['cull'],_0x1f2dba['meshInstan'+'ce']['layer']=_0x39ad14[-0xcd9*-0x3+-0x1a66+-0xc25]['layer'],_0x372c36['dynamic']&&(_0x1f2dba['meshInstan'+'ce']['skinInstan'+'ce']=new y_(this['device'],_0x3192b5,this['rootNode'])),_0x1f2dba['meshInstan'+'ce']['castShadow']=_0x372c36['meshInstan'+'ce']['castShadow'],_0x1f2dba;}['destroyBat'+'ch'](_0x522252){_0x522252['destroy'](this['scene'],this['_batchGrou'+'ps'][_0x522252['batchGroup'+'Id']]['layers']);}}const P_='uSceneColo'+'rMap';class LE extends ys{constructor(){super(...arguments),h(this,'colorRende'+'rTarget',null),h(this,'source',null);}['destroy'](){super['destroy'](),this['releaseRen'+'derTarget'](this['colorRende'+'rTarget']);}['shouldReal'+'locate'](_0x4fa72c,_0x98d862,_0x5dd5f2){if((_0x4fa72c==null?void(-0x9fa+0x1*-0xd29+-0x1*-0x1723):_0x4fa72c['colorBuffe'+'r']['format'])!==_0x5dd5f2)return!(-0x1*-0x20d8+0x1590+-0x8*0x6cd);const _0x5b51dd=(_0x98d862==null?void(0xcbd+0x22ae+-0x2f6b):_0x98d862['width'])||this['device']['width'],_0x3854a5=(_0x98d862==null?void(-0x4*-0x2e7+-0x480+-0x71c):_0x98d862['height'])||this['device']['height'];return!_0x4fa72c||_0x5b51dd!==_0x4fa72c['width']||_0x3854a5!==_0x4fa72c['height'];}['allocateRe'+'nderTarget'](_0x8865a1,_0x49b355,_0x1f510e,_0xbcbaa5){const _0x4f368b=new _e(_0x1f510e,{'name':P_,'format':_0xbcbaa5,'width':_0x49b355?_0x49b355['colorBuffe'+'r']['width']:_0x1f510e['width'],'height':_0x49b355?_0x49b355['colorBuffe'+'r']['height']:_0x1f510e['height'],'mipmaps':!(-0xf3*-0x1f+-0x151a+-0x853),'minFilter':ma,'magFilter':vt,'addressU':ue,'addressV':ue});return _0x8865a1?(_0x8865a1['destroyFra'+'meBuffers'](),_0x8865a1['_colorBuff'+'er']=_0x4f368b,_0x8865a1['_colorBuff'+'ers']=[_0x4f368b]):_0x8865a1=new gt({'name':'ColorGrabR'+'T','colorBuffer':_0x4f368b,'depth':!(-0x16eb*-0x1+-0x2111+0x17*0x71),'stencil':!(0xa4*0x3a+-0x5*-0x28d+0x2*-0x18f4),'autoResolve':!(-0x5*0x2e4+0xcfd+-0x2f*-0x8)}),_0x8865a1;}['releaseRen'+'derTarget'](_0x3ab646){_0x3ab646&&(_0x3ab646['destroyTex'+'tureBuffer'+'s'](),_0x3ab646['destroy']());}['frameUpdat'+'e'](){const _0x53181a=this['device'],_0x2e252a=this['source'],_0x2e643b=(_0x2e252a==null?void(0xb*0x223+-0x1*-0x14ae+-0x2c2f*0x1):_0x2e252a['colorBuffe'+'r']['format'])??this['device']['backBuffer'+'Format'];this['shouldReal'+'locate'](this['colorRende'+'rTarget'],_0x2e252a==null?void(-0x1c0d+-0xfa1+0x2bae*0x1):_0x2e252a['colorBuffe'+'r'],_0x2e643b)&&(this['releaseRen'+'derTarget'](this['colorRende'+'rTarget']),this['colorRende'+'rTarget']=this['allocateRe'+'nderTarget'](this['colorRende'+'rTarget'],_0x2e252a,_0x53181a,_0x2e643b));const _0x32fb99=this['colorRende'+'rTarget']['colorBuffe'+'r'];_0x53181a['scope']['resolve'](P_)['setValue'](_0x32fb99);}['execute'](){const _0x5561ae=this['device'];Q['pushGpuMar'+'ker'](_0x5561ae,'GRAB-COLOR');const _0x1b3f66=this['source'],_0xfbbcff=this['colorRende'+'rTarget']['colorBuffe'+'r'];_0x5561ae['isWebGPU']?(_0x5561ae['copyRender'+'Target'](_0x1b3f66,this['colorRende'+'rTarget'],!(0x1e2c+0x6*0x24+-0x1f04),!(0x266*0x7+0x985*-0x2+0x1*0x241)),_0x5561ae['mipmapRend'+'erer']['generate'](this['colorRende'+'rTarget']['colorBuffe'+'r']['impl'])):(_0x5561ae['copyRender'+'Target'](_0x1b3f66,this['colorRende'+'rTarget'],!(-0x6d*-0x13+-0x669*-0x3+-0x21a*0xd),!(-0x3*-0x306+0x7*0x1cd+-0x15ac)),_0x5561ae['activeText'+'ure'](_0x5561ae['maxCombine'+'dTextures']-(0x170f+0x1*-0x25ba+0x4*0x3ab)),_0x5561ae['bindTextur'+'e'](_0xfbbcff),_0x5561ae['gl']['generateMi'+'pmap'](_0xfbbcff['impl']['_glTarget'])),Q['popGpuMark'+'er'](_0x5561ae);}}const M_='uSceneDept'+'hMap';class RE extends ys{constructor(_0x2aa9f3,_0xb3745f){super(_0x2aa9f3),h(this,'depthRende'+'rTarget',null),h(this,'camera',null),this['camera']=_0xb3745f;}['destroy'](){super['destroy'](),this['releaseRen'+'derTarget'](this['depthRende'+'rTarget']);}['shouldReal'+'locate'](_0x3ef1fd,_0x565bd4){const _0x2a09b=(_0x565bd4==null?void(0x269f+-0x130b+-0x1394):_0x565bd4['width'])||this['device']['width'],_0x12fb1a=(_0x565bd4==null?void(0x53*-0x56+-0x1999+0x357b*0x1):_0x565bd4['height'])||this['device']['height'];return!_0x3ef1fd||_0x2a09b!==_0x3ef1fd['width']||_0x12fb1a!==_0x3ef1fd['height'];}['allocateRe'+'nderTarget'](_0x16f21c,_0x181c47,_0x108202,_0xa4722b,_0xf89f0e){const _0x3c7bf5=new _e(_0x108202,{'name':M_,'format':_0xa4722b,'width':_0x181c47?_0x181c47['colorBuffe'+'r']['width']:_0x108202['width'],'height':_0x181c47?_0x181c47['colorBuffe'+'r']['height']:_0x108202['height'],'mipmaps':!(-0x1*-0x1c2d+0x4*0x5a3+-0x32b8),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue});return _0x16f21c?(_0x16f21c['destroyFra'+'meBuffers'](),_0xf89f0e?_0x16f21c['_depthBuff'+'er']=_0x3c7bf5:(_0x16f21c['_colorBuff'+'er']=_0x3c7bf5,_0x16f21c['_colorBuff'+'ers']=[_0x3c7bf5])):_0x16f21c=new gt({'name':'DepthGrabR'+'T','colorBuffer':_0xf89f0e?null:_0x3c7bf5,'depthBuffer':_0xf89f0e?_0x3c7bf5:null,'depth':!_0xf89f0e,'stencil':_0x108202['supportsSt'+'encil'],'autoResolve':!(-0x1*0x16e1+0xc7f*-0x1+0x2361)}),_0x16f21c;}['releaseRen'+'derTarget'](_0x176e3a){_0x176e3a&&(_0x176e3a['destroyTex'+'tureBuffer'+'s'](),_0x176e3a['destroy']());}['before'](){var _0x1052aa,_0x1bd903;const _0x44f2be=this['camera'],_0x1b3c6e=this['device'],_0x3815f2=(_0x44f2be==null?void(0x2509+-0x211d*-0x1+-0x4626):_0x44f2be['renderTarg'+'et'])??_0x1b3c6e['backBuffer'];let _0x166a56=!(0x5*0x752+0x7ea+0x134*-0x25),_0x81b3bf=_0x3815f2['stencil']?sd:$i;_0x1b3c6e['isWebGPU']&&_0x3815f2['samples']>0x191d+0x9*0x385+0x38c9*-0x1&&(_0x81b3bf=Ji,_0x166a56=!(0x1f1c+-0x45b+-0x1ac0));const _0x4bb821=((_0x1052aa=_0x44f2be['renderTarg'+'et'])==null?void(0x697+0x17be+0x611*-0x5):_0x1052aa['depthBuffe'+'r'])??((_0x1bd903=_0x44f2be['renderTarg'+'et'])==null?void(0x24c0+-0x52*-0x8+-0x2750):_0x1bd903['colorBuffe'+'r']);this['shouldReal'+'locate'](this['depthRende'+'rTarget'],_0x4bb821)&&(this['releaseRen'+'derTarget'](this['depthRende'+'rTarget']),this['depthRende'+'rTarget']=this['allocateRe'+'nderTarget'](this['depthRende'+'rTarget'],_0x44f2be['renderTarg'+'et'],_0x1b3c6e,_0x81b3bf,_0x166a56));const _0x317b15=_0x166a56?this['depthRende'+'rTarget']['depthBuffe'+'r']:this['depthRende'+'rTarget']['colorBuffe'+'r'];_0x1b3c6e['scope']['resolve'](M_)['setValue'](_0x317b15);}['execute'](){const _0x2e8009=this['device'];if(Q['pushGpuMar'+'ker'](_0x2e8009,'GRAB-DEPTH'),_0x2e8009['isWebGL2']&&_0x2e8009['renderTarg'+'et']['samples']>0x95*-0x17+-0x9*-0xb+0xd01){const _0x2b9416=_0x2e8009['renderTarg'+'et']['impl']['_glFrameBu'+'ffer'],_0x1f6cd3=this['depthRende'+'rTarget'];_0x2e8009['renderTarg'+'et']=_0x1f6cd3,_0x2e8009['updateBegi'+'n'](),this['depthRende'+'rTarget']['impl']['internalRe'+'solve'](_0x2e8009,_0x2b9416,_0x1f6cd3['impl']['_glFrameBu'+'ffer'],this['depthRende'+'rTarget'],_0x2e8009['gl']['DEPTH_BUFF'+'ER_BIT']);}else _0x2e8009['copyRender'+'Target'](_0x2e8009['renderTarg'+'et'],this['depthRende'+'rTarget'],!(0x22f9+-0x269*0x10+0x2e*0x14),!(0x17*-0xd3+0x42e+0xec7));Q['popGpuMark'+'er'](_0x2e8009);}}class vv{constructor(){h(this,'_gammaCorr'+'ection',Xc),h(this,'_toneMappi'+'ng',sm),h(this,'_srgbRende'+'rTarget',!(-0x3*0x7cf+-0x946+0x20b4)),h(this,'_ssaoEnabl'+'ed',!(0x1691+-0x1*0x17bf+0x12f)),h(this,'_fog',Kn),h(this,'_sceneDept'+'hMapLinear',!(0x20ab+0x880+-0xb*0x3be)),h(this,'_hash'),h(this,'_defines',new Map()),h(this,'_definesDi'+'rty',!(-0x25cf+0x6d*-0x17+0x2f9a));}get['hash'](){if(this['_hash']===void(0x19*-0xa9+0xc2b+0x456)){const _0x468e47=this['gammaCorre'+'ction']+'_'+this['toneMappin'+'g']+'_'+this['srgbRender'+'Target']+'_'+this['fog']+'_'+this['ssaoEnable'+'d']+'_'+this['sceneDepth'+'MapLinear'];this['_hash']=hi(_0x468e47);}return this['_hash'];}get['defines'](){const _0x3ec2f4=this['_defines'];return this['_definesDi'+'rty']&&(this['_definesDi'+'rty']=!(-0x13b2+-0x581*-0x5+0x1*-0x7d2),_0x3ec2f4['clear'](),this['_sceneDept'+'hMapLinear']&&_0x3ec2f4['set']('SCENE_DEPT'+'HMAP_LINEA'+'R',!(-0x1*-0x1161+0x7*0x591+-0x4b2*0xc)),_0x3ec2f4['set']('FOG',this['_fog']['toUpperCas'+'e']()),_0x3ec2f4['set']('TONEMAP',ov[this['_toneMappi'+'ng']]),_0x3ec2f4['set']('GAMMA',Hw[this['shaderOutp'+'utGamma']])),_0x3ec2f4;}['markDirty'](){this['_hash']=void(0x107f+0x1e9a*-0x1+-0xe1b*-0x1),this['_definesDi'+'rty']=!(0x137d+-0x5dc+-0xda1);}set['fog'](_0x36ad63){this['_fog']!==_0x36ad63&&(this['_fog']=_0x36ad63,this['markDirty']());}get['fog'](){return this['_fog'];}set['ssaoEnable'+'d'](_0x432ee9){this['_ssaoEnabl'+'ed']!==_0x432ee9&&(this['_ssaoEnabl'+'ed']=_0x432ee9,this['markDirty']());}get['ssaoEnable'+'d'](){return this['_ssaoEnabl'+'ed'];}set['gammaCorre'+'ction'](_0x53ba30){this['_gammaCorr'+'ectionAssi'+'gned']=!(-0x3*0x1ba+-0xdfa*-0x1+-0x8cc),this['_gammaCorr'+'ection']!==_0x53ba30&&(this['_gammaCorr'+'ection']=_0x53ba30,this['markDirty']());}get['gammaCorre'+'ction'](){return this['_gammaCorr'+'ection'];}set['toneMappin'+'g'](_0x589ea0){this['_toneMappi'+'ng']!==_0x589ea0&&(this['_toneMappi'+'ng']=_0x589ea0,this['markDirty']());}get['toneMappin'+'g'](){return this['_toneMappi'+'ng'];}set['srgbRender'+'Target'](_0x3c7c7c){this['_srgbRende'+'rTarget']!==_0x3c7c7c&&(this['_srgbRende'+'rTarget']=_0x3c7c7c,this['markDirty']());}get['srgbRender'+'Target'](){return this['_srgbRende'+'rTarget'];}set['sceneDepth'+'MapLinear'](_0x102304){this['_sceneDept'+'hMapLinear']!==_0x102304&&(this['_sceneDept'+'hMapLinear']=_0x102304,this['markDirty']());}get['sceneDepth'+'MapLinear'](){return this['_sceneDept'+'hMapLinear'];}get['shaderOutp'+'utGamma'](){return this['_gammaCorr'+'ection']===Xc&&!this['_srgbRende'+'rTarget']?Xc:Ll;}}const La=new D(),ao=new D(),D_=new D(),I_=new te(),OE=[new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D()];class Fl{constructor(){h(this,'shaderPass'+'Info',null),h(this,'renderPass'+'ColorGrab',null),h(this,'renderPass'+'DepthGrab',null),h(this,'fogParams',null),h(this,'shaderPara'+'ms',new vv()),h(this,'renderPass'+'es',[]),h(this,'jitter',-0x1*-0x1206+0x2081+-0x41*0xc7),(this['_aspectRat'+'io']=(-0x3*-0x287+-0x1f12*0x1+0x178d*0x1)/(0x1098+-0x1e0b+0xd7c),this['_aspectRat'+'ioMode']=hm,this['_calculate'+'Projection']=null,this['_calculate'+'Transform']=null,this['_clearColo'+'r']=new ie(-0x969+-0xc01+-0x156a*-0x1+0.75,-0x2*-0xc1d+-0x386+-0x14b4+0.75,0x16f7+-0x97f+-0x6bc*0x2+0.75,-0xdab*-0x2+-0xc07+0x7a7*-0x2),this['_clearColo'+'rBuffer']=!(0xc*-0x218+-0x102e+0x294e),this['_clearDept'+'h']=-0x2*-0x21+-0x1951+0x322*0x8,this['_clearDept'+'hBuffer']=!(-0xa36+0x1be2+0x1a*-0xae),this['_clearSten'+'cil']=0xd6*0x2b+0x1ca6*-0x1+-0x74c,this['_clearSten'+'cilBuffer']=!(-0xf*-0x55+-0x1*0x1cb2+0x17b7),this['_cullFaces']=!(-0xce9+0xc70+0x79*0x1),this['_farClip']=0x31*0x31+-0x18c7+0x134e,this['_flipFaces']=!(-0x519+-0x259b+0x2ab5),this['_fov']=-0x14b*-0x2+-0x1*0x863+0x5fa,this['_frustumCu'+'lling']=!(-0x53*-0x5+-0x16d*0xc+0x41*0x3d),this['_horizonta'+'lFov']=!(-0x1a*-0x147+-0x69*0x36+-0xb0f),this['_layers']=[er,ps,Kp,Il,Zp],this['_layersSet']=new Set(this['_layers']),this['_nearClip']=0x2251+-0x3d4+-0x1e7d+0.1,this['_node']=null,this['_orthoHeig'+'ht']=-0xcde+-0x6e9+-0x59*-0x39,this['_projectio'+'n']=ni,this['_rect']=new re(0x37c+-0x118a+0xe0e,-0x173*0x11+0x93*-0x7+0x1ca8,-0xb1d*0x2+-0x8f*0x25+0x121*0x26,0x209e+0x201a+0x1*-0x40b7),this['_renderTar'+'get']=null,this['_scissorRe'+'ct']=new re(0x2007+-0x20b4+0xad,-0x1*0x10fd+0xbdb*-0x1+-0xe6c*-0x2,0x7bc+-0x1f9b+0x2fc*0x8,0x17b0+0x2*-0x653+-0xb09),this['_scissorRe'+'ctClear']=!(-0xf7b+-0x675+0x15f1*0x1),this['_aperture']=0x12*-0x1a3+0x180b+0x1*0x57b,this['_shutter']=(-0x751*0x1+-0x3*0x16+-0xa*-0xc2)/(-0x13d6+0x49d+0x1321),this['_sensitivi'+'ty']=0x37c*-0x1+0x195b+-0x11f7,this['_projMat']=new te(),this['_projMatDi'+'rty']=!(-0x2*-0x953+-0xd5*0x25+-0xc23*-0x1),this['_projMatSk'+'ybox']=new te(),this['_viewMat']=new te(),this['_viewMatDi'+'rty']=!(0x17d9+-0x509*-0x6+-0x360f),this['_viewProjM'+'at']=new te(),this['_viewProjM'+'atDirty']=!(0x1fd8*-0x1+0x2667+-0x68f),this['_shaderMat'+'ricesVersi'+'on']=-0x72e+0x6*-0x60d+0x2b7c,this['_viewProjI'+'nverse']=new te(),this['_viewProjC'+'urrent']=null,this['_viewProjP'+'revious']=new te(),this['_jitters']=[-0x7*0x1bb+-0x1b7*-0xd+0x1*-0xa2e,0x5bc+0x14bc+0xd3c*-0x2,0x24+-0xd*0x2c5+0x1*0x23dd,0xb4d+0x2211+-0x2d5e],this['frustum']=new yx(),this['_xr']=null,this['_xrPropert'+'ies']={'horizontalFov':this['_horizonta'+'lFov'],'fov':this['_fov'],'aspectRatio':this['_aspectRat'+'io'],'farClip':this['_farClip'],'nearClip':this['_nearClip']});}['destroy'](){var _0xdda6fb,_0x196dcb;(_0xdda6fb=this['renderPass'+'ColorGrab'])==null||_0xdda6fb['destroy'](),this['renderPass'+'ColorGrab']=null,(_0x196dcb=this['renderPass'+'DepthGrab'])==null||_0x196dcb['destroy'](),this['renderPass'+'DepthGrab']=null,this['renderPass'+'es']['length']=0x1533+0x1c31+-0x3164;}['_storeShad'+'erMatrices'](_0x1bb88c,_0x92a88a,_0xd204f3,_0x3968ac){this['_shaderMat'+'ricesVersi'+'on']!==_0x3968ac&&(this['_shaderMat'+'ricesVersi'+'on']=_0x3968ac,this['_viewProjP'+'revious']['copy'](this['_viewProjC'+'urrent']??_0x1bb88c),this['_viewProjC'+'urrent']??(this['_viewProjC'+'urrent']=new te()),this['_viewProjC'+'urrent']['copy'](_0x1bb88c),this['_viewProjI'+'nverse']['invert'](_0x1bb88c),this['_jitters'][-0xe9*0x1e+-0x155*0x5+0x21f9]=this['_jitters'][-0x49*0x32+-0x1*-0xfa3+-0x161],this['_jitters'][-0x76*-0x4c+0xe07+-0x310c]=this['_jitters'][-0xe*-0xd0+0xc5*0xb+-0x13d6],this['_jitters'][-0x3*0xbe9+-0x1834*0x1+0x3bef]=_0x92a88a,this['_jitters'][-0x1*-0x6c1+-0x23c6+0x1d06]=_0xd204f3);}get['fullSizeCl'+'earRect'](){const _0x3a93e6=this['_scissorRe'+'ctClear']?this['scissorRec'+'t']:this['_rect'];return _0x3a93e6['x']===0x649*-0x1+0x17*0x149+0x296*-0x9&&_0x3a93e6['y']===-0x78b*-0x1+-0x16e4+0xf59&&_0x3a93e6['z']===-0x23b6+-0x7*-0x30d+0x2*0x72e&&_0x3a93e6['w']===-0x10d1+0x20a3+-0xfd1;}set['aspectRati'+'o'](_0x4b22f3){this['_aspectRat'+'io']!==_0x4b22f3&&(this['_aspectRat'+'io']=_0x4b22f3,this['_projMatDi'+'rty']=!(-0x12f7+0xc*0x2ef+0x1*-0x103d));}get['aspectRati'+'o'](){var _0x59f675;return(_0x59f675=this['xr'])!=null&&_0x59f675['active']?this['_xrPropert'+'ies']['aspectRati'+'o']:this['_aspectRat'+'io'];}set['aspectRati'+'oMode'](_0x3cfeef){this['_aspectRat'+'ioMode']!==_0x3cfeef&&(this['_aspectRat'+'ioMode']=_0x3cfeef,this['_projMatDi'+'rty']=!(-0xb5*0xb+-0x690+-0x1*-0xe57));}get['aspectRati'+'oMode'](){return this['_aspectRat'+'ioMode'];}set['calculateP'+'rojection'](_0x22920d){this['_calculate'+'Projection']=_0x22920d,this['_projMatDi'+'rty']=!(0x1*-0x154e+-0x1091+0x115*0x23);}get['calculateP'+'rojection'](){return this['_calculate'+'Projection'];}set['calculateT'+'ransform'](_0x311f96){this['_calculate'+'Transform']=_0x311f96;}get['calculateT'+'ransform'](){return this['_calculate'+'Transform'];}set['clearColor'](_0x559e18){this['_clearColo'+'r']['copy'](_0x559e18);}get['clearColor'](){return this['_clearColo'+'r'];}set['clearColor'+'Buffer'](_0x57882d){this['_clearColo'+'rBuffer']=_0x57882d;}get['clearColor'+'Buffer'](){return this['_clearColo'+'rBuffer'];}set['clearDepth'](_0x41be58){this['_clearDept'+'h']=_0x41be58;}get['clearDepth'](){return this['_clearDept'+'h'];}set['clearDepth'+'Buffer'](_0xd5dc25){this['_clearDept'+'hBuffer']=_0xd5dc25;}get['clearDepth'+'Buffer'](){return this['_clearDept'+'hBuffer'];}set['clearStenc'+'il'](_0x473c6c){this['_clearSten'+'cil']=_0x473c6c;}get['clearStenc'+'il'](){return this['_clearSten'+'cil'];}set['clearStenc'+'ilBuffer'](_0x5430df){this['_clearSten'+'cilBuffer']=_0x5430df;}get['clearStenc'+'ilBuffer'](){return this['_clearSten'+'cilBuffer'];}set['cullFaces'](_0x3f7761){this['_cullFaces']=_0x3f7761;}get['cullFaces'](){return this['_cullFaces'];}set['farClip'](_0x246409){this['_farClip']!==_0x246409&&(this['_farClip']=_0x246409,this['_projMatDi'+'rty']=!(0x463*0x3+0x30f*0x9+-0x38*0xba));}get['farClip'](){var _0x55d4d5;return(_0x55d4d5=this['xr'])!=null&&_0x55d4d5['active']?this['_xrPropert'+'ies']['farClip']:this['_farClip'];}set['flipFaces'](_0x2115b4){this['_flipFaces']=_0x2115b4;}get['flipFaces'](){return this['_flipFaces'];}set['fov'](_0x2eada7){this['_fov']!==_0x2eada7&&(this['_fov']=_0x2eada7,this['_projMatDi'+'rty']=!(0x3*0x466+0x17*-0x6e+-0x350));}get['fov'](){var _0x4bef59;return(_0x4bef59=this['xr'])!=null&&_0x4bef59['active']?this['_xrPropert'+'ies']['fov']:this['_fov'];}set['frustumCul'+'ling'](_0x516657){this['_frustumCu'+'lling']=_0x516657;}get['frustumCul'+'ling'](){return this['_frustumCu'+'lling'];}set['horizontal'+'Fov'](_0x5360c9){this['_horizonta'+'lFov']!==_0x5360c9&&(this['_horizonta'+'lFov']=_0x5360c9,this['_projMatDi'+'rty']=!(-0x177f+-0x1*0x9f7+-0x2176*-0x1));}get['horizontal'+'Fov'](){var _0x280f00;return(_0x280f00=this['xr'])!=null&&_0x280f00['active']?this['_xrPropert'+'ies']['horizontal'+'Fov']:this['_horizonta'+'lFov'];}set['layers'](_0x5eaec4){this['_layers']=_0x5eaec4['slice'](-0x1b50+-0x10ac+0x2bfc),this['_layersSet']=new Set(this['_layers']);}get['layers'](){return this['_layers'];}get['layersSet'](){return this['_layersSet'];}set['nearClip'](_0x51b2e4){this['_nearClip']!==_0x51b2e4&&(this['_nearClip']=_0x51b2e4,this['_projMatDi'+'rty']=!(-0xdd*-0xb+0x1*-0x197e+0xfff));}get['nearClip'](){var _0xc93d84;return(_0xc93d84=this['xr'])!=null&&_0xc93d84['active']?this['_xrPropert'+'ies']['nearClip']:this['_nearClip'];}set['node'](_0x1b2c36){this['_node']=_0x1b2c36;}get['node'](){return this['_node'];}set['orthoHeigh'+'t'](_0x23452d){this['_orthoHeig'+'ht']!==_0x23452d&&(this['_orthoHeig'+'ht']=_0x23452d,this['_projMatDi'+'rty']=!(-0x26fc+-0x2473+0x4b6f));}get['orthoHeigh'+'t'](){return this['_orthoHeig'+'ht'];}set['projection'](_0xc7afaf){this['_projectio'+'n']!==_0xc7afaf&&(this['_projectio'+'n']=_0xc7afaf,this['_projMatDi'+'rty']=!(0x1*0xc8e+0xbf5*-0x1+0x9*-0x11));}get['projection'](){return this['_projectio'+'n'];}get['projection'+'Matrix'](){return this['_evaluateP'+'rojectionM'+'atrix'](),this['_projMat'];}set['rect'](_0x1e23f3){this['_rect']['copy'](_0x1e23f3);}get['rect'](){return this['_rect'];}set['renderTarg'+'et'](_0x399c2e){this['_renderTar'+'get']=_0x399c2e;}get['renderTarg'+'et'](){return this['_renderTar'+'get'];}set['scissorRec'+'t'](_0x29128d){this['_scissorRe'+'ct']['copy'](_0x29128d);}get['scissorRec'+'t'](){return this['_scissorRe'+'ct'];}get['viewMatrix'](){if(this['_viewMatDi'+'rty']){const _0x26c826=this['_node']['getWorldTr'+'ansform']();this['_viewMat']['copy'](_0x26c826)['invert'](),this['_viewMatDi'+'rty']=!(-0x11*-0x23b+-0x53*-0xc+0x29ce*-0x1);}return this['_viewMat'];}set['aperture'](_0x4ac79b){this['_aperture']=_0x4ac79b;}get['aperture'](){return this['_aperture'];}set['sensitivit'+'y'](_0x1991b7){this['_sensitivi'+'ty']=_0x1991b7;}get['sensitivit'+'y'](){return this['_sensitivi'+'ty'];}set['shutter'](_0x2e160f){this['_shutter']=_0x2e160f;}get['shutter'](){return this['_shutter'];}set['xr'](_0x4774ce){this['_xr']!==_0x4774ce&&(this['_xr']=_0x4774ce,this['_projMatDi'+'rty']=!(0x8*-0x119+0x2e0+-0x6c*-0xe));}get['xr'](){return this['_xr'];}['clone'](){return new Fl()['copy'](this);}['copy'](_0x3362ac){return this['_aspectRat'+'io']=_0x3362ac['_aspectRat'+'io'],this['_farClip']=_0x3362ac['_farClip'],this['_fov']=_0x3362ac['_fov'],this['_horizonta'+'lFov']=_0x3362ac['_horizonta'+'lFov'],this['_nearClip']=_0x3362ac['_nearClip'],this['_xrPropert'+'ies']['aspectRati'+'o']=_0x3362ac['_xrPropert'+'ies']['aspectRati'+'o'],this['_xrPropert'+'ies']['farClip']=_0x3362ac['_xrPropert'+'ies']['farClip'],this['_xrPropert'+'ies']['fov']=_0x3362ac['_xrPropert'+'ies']['fov'],this['_xrPropert'+'ies']['horizontal'+'Fov']=_0x3362ac['_xrPropert'+'ies']['horizontal'+'Fov'],this['_xrPropert'+'ies']['nearClip']=_0x3362ac['_xrPropert'+'ies']['nearClip'],this['aspectRati'+'oMode']=_0x3362ac['aspectRati'+'oMode'],this['calculateP'+'rojection']=_0x3362ac['calculateP'+'rojection'],this['calculateT'+'ransform']=_0x3362ac['calculateT'+'ransform'],this['clearColor']=_0x3362ac['clearColor'],this['clearColor'+'Buffer']=_0x3362ac['clearColor'+'Buffer'],this['clearDepth']=_0x3362ac['clearDepth'],this['clearDepth'+'Buffer']=_0x3362ac['clearDepth'+'Buffer'],this['clearStenc'+'il']=_0x3362ac['clearStenc'+'il'],this['clearStenc'+'ilBuffer']=_0x3362ac['clearStenc'+'ilBuffer'],this['cullFaces']=_0x3362ac['cullFaces'],this['flipFaces']=_0x3362ac['flipFaces'],this['frustumCul'+'ling']=_0x3362ac['frustumCul'+'ling'],this['layers']=_0x3362ac['layers'],this['orthoHeigh'+'t']=_0x3362ac['orthoHeigh'+'t'],this['projection']=_0x3362ac['projection'],this['rect']=_0x3362ac['rect'],this['renderTarg'+'et']=_0x3362ac['renderTarg'+'et'],this['scissorRec'+'t']=_0x3362ac['scissorRec'+'t'],this['aperture']=_0x3362ac['aperture'],this['shutter']=_0x3362ac['shutter'],this['sensitivit'+'y']=_0x3362ac['sensitivit'+'y'],this['shaderPass'+'Info']=_0x3362ac['shaderPass'+'Info'],this['jitter']=_0x3362ac['jitter'],this['_projMatDi'+'rty']=!(0x8ae+0x6*-0x101+-0x2a8),this;}['_enableRen'+'derPassCol'+'orGrab'](_0x42141a,_0x3e098d){var _0x484675;_0x3e098d?this['renderPass'+'ColorGrab']||(this['renderPass'+'ColorGrab']=new LE(_0x42141a)):((_0x484675=this['renderPass'+'ColorGrab'])==null||_0x484675['destroy'](),this['renderPass'+'ColorGrab']=null);}['_enableRen'+'derPassDep'+'thGrab'](_0x6bf876,_0x5a1728,_0x3e49c0){var _0x54b3b9;_0x3e49c0?this['renderPass'+'DepthGrab']||(this['renderPass'+'DepthGrab']=new RE(_0x6bf876,this)):((_0x54b3b9=this['renderPass'+'DepthGrab'])==null||_0x54b3b9['destroy'](),this['renderPass'+'DepthGrab']=null);}['_updateVie'+'wProjMat'](){(this['_projMatDi'+'rty']||this['_viewMatDi'+'rty']||this['_viewProjM'+'atDirty'])&&(this['_viewProjM'+'at']['mul2'](this['projection'+'Matrix'],this['viewMatrix']),this['_viewProjM'+'atDirty']=!(-0x1bb*-0x10+0x13ca+-0x2f79));}['worldToScr'+'een'](_0x36d0c4,_0x3c6704,_0xc8c89f,_0x31c369=new D()){this['_updateVie'+'wProjMat'](),this['_viewProjM'+'at']['transformP'+'oint'](_0x36d0c4,_0x31c369);const _0x1fd226=this['_viewProjM'+'at']['data'],_0x5ac44f=_0x36d0c4['x']*_0x1fd226[0x2*-0xdd2+0x26f3+-0xb4c]+_0x36d0c4['y']*_0x1fd226[0x2*0x13a+-0x1*-0x257b+-0x27e8]+_0x36d0c4['z']*_0x1fd226[-0x1*-0x1d96+-0x1687*0x1+-0x704]+(0x2d0+0x1f5*0x13+0x1*-0x27fe)*_0x1fd226[-0xba*0x34+0x26e3+-0x10c];_0x31c369['x']=(_0x31c369['x']/_0x5ac44f+(0x1fd4+0xad*-0xa+-0x1911))*(0x17be+0x9e1*0x3+-0x38f*0xf+0.5),_0x31c369['y']=(-0x2182+-0x15c8+0x374b-_0x31c369['y']/_0x5ac44f)*(-0x1*0x1c1f+0x583+0xb4e*0x2+0.5);const {x:_0x37864d,y:_0x15adc1,z:_0x3585cd,w:_0x371d16}=this['_rect'];return _0x31c369['x']=_0x31c369['x']*_0x3585cd*_0x3c6704+_0x37864d*_0x3c6704,_0x31c369['y']=_0x31c369['y']*_0x371d16*_0xc8c89f+(0x2154+-0x7*0x353+-0xa0e-_0x15adc1-_0x371d16)*_0xc8c89f,_0x31c369;}['screenToWo'+'rld'](_0x17859f,_0x2a4263,_0x2c036c,_0x253502,_0x37033f,_0x3b98ea=new D()){const {x:_0x5cace5,y:_0x41628a,z:_0x2ff575,w:_0x47c152}=this['_rect'],_0xc27f4b=this['farClip']-this['nearClip'];if(La['set']((_0x17859f-_0x5cace5*_0x253502)/(_0x2ff575*_0x253502),0xbfb*-0x1+0x14dc+-0x8e0-(_0x2a4263-(-0x17ec+-0x2476+-0x3c63*-0x1-_0x41628a-_0x47c152)*_0x37033f)/(_0x47c152*_0x37033f),_0x2c036c/_0xc27f4b),La['mulScalar'](-0x6a6+0x2259+-0x1bb1),La['sub'](D['ONE']),this['_projectio'+'n']===ni){te['_getPerspe'+'ctiveHalfS'+'ize'](ao,this['fov'],this['aspectRati'+'o'],this['nearClip'],this['horizontal'+'Fov']),ao['x']*=La['x'],ao['y']*=La['y'];const _0x5a4be3=this['_node']['getWorldTr'+'ansform']();ao['z']=-this['nearClip'],_0x5a4be3['transformP'+'oint'](ao,D_);const _0x125961=this['_node']['getPositio'+'n']();_0x3b98ea['sub2'](D_,_0x125961),_0x3b98ea['normalize'](),_0x3b98ea['mulScalar'](_0x2c036c),_0x3b98ea['add'](_0x125961);}else this['_updateVie'+'wProjMat'](),I_['copy'](this['_viewProjM'+'at'])['invert'](),I_['transformP'+'oint'](La,_0x3b98ea);return _0x3b98ea;}['_evaluateP'+'rojectionM'+'atrix'](){if(this['_projMatDi'+'rty']){if(this['_projectio'+'n']===ni)this['_projMat']['setPerspec'+'tive'](this['fov'],this['aspectRati'+'o'],this['nearClip'],this['farClip'],this['horizontal'+'Fov']),this['_projMatSk'+'ybox']['copy'](this['_projMat']);else{const _0x22fdf2=this['_orthoHeig'+'ht'],_0x51e027=_0x22fdf2*this['aspectRati'+'o'];this['_projMat']['setOrtho'](-_0x51e027,_0x51e027,-_0x22fdf2,_0x22fdf2,this['nearClip'],this['farClip']),this['_projMatSk'+'ybox']['setPerspec'+'tive'](this['fov'],this['aspectRati'+'o'],this['nearClip'],this['farClip']);}this['_projMatDi'+'rty']=!(-0xe96+0x1*0x8c2+0x1*0x5d5);}}['getProject'+'ionMatrixS'+'kybox'](){return this['_evaluateP'+'rojectionM'+'atrix'](),this['_projMatSk'+'ybox'];}['getExposur'+'e'](){const _0x1f5437=Math['log2'](this['_aperture']*this['_aperture']/this['_shutter']*(-0x7a2+-0x1c*0xa8+0x1*0x1a66)/this['_sensitivi'+'ty']);return(-0x1bc7+-0x707*-0x3+0x6b3)/(Math['pow'](-0xf*-0x21d+-0x4db*0x8+-0x727*-0x1,_0x1f5437)*(0x1*-0x82c+-0x22bc+0x2ae9+0.19999999999999996));}['getScreenS'+'ize'](_0x2fe34f){if(this['_projectio'+'n']===ni){const _0x203221=this['_node']['getPositio'+'n']()['distance'](_0x2fe34f['center']);if(_0x203221<_0x2fe34f['radius'])return-0x192d+0x4*0x5fb+0x142;const _0x131027=Math['asin'](_0x2fe34f['radius']/_0x203221),_0x494ba0=Math['tan'](_0x131027),_0x3257f7=Math['tan'](this['fov']/(-0x31*-0xe+0x35a*0x9+0x6*-0x579)*Y['DEG_TO_RAD']);return Math['min'](_0x494ba0/_0x3257f7,0x3*-0x3b7+0x9df*-0x1+0x1505);}return Y['clamp'](_0x2fe34f['radius']/this['_orthoHeig'+'ht'],0xf5b+0x1aa8+-0x5*0x867,-0x2337+-0x1*0x1a1a+0x3d52);}['getFrustum'+'Corners'](_0x82ffd3=this['nearClip'],_0x349eaf=this['farClip']){const _0x2b4889=this['fov']*Math['PI']/(-0x2548*-0x1+0xd43+-0x31d7);let _0x390623,_0x22998e;this['projection']===ni?this['horizontal'+'Fov']?(_0x390623=_0x82ffd3*Math['tan'](_0x2b4889/(-0x34c*-0x1+0x191a+-0x5c*0x4f)),_0x22998e=_0x390623/this['aspectRati'+'o']):(_0x22998e=_0x82ffd3*Math['tan'](_0x2b4889/(-0x25*-0x107+-0x1253*0x1+0x13ae*-0x1)),_0x390623=_0x22998e*this['aspectRati'+'o']):(_0x22998e=this['_orthoHeig'+'ht'],_0x390623=_0x22998e*this['aspectRati'+'o']);const _0x323462=OE;return _0x323462[-0x1b60+0x2*-0x7eb+0x1*0x2b36]['x']=_0x390623,_0x323462[0x25e1*0x1+-0x14dd+-0x3*0x5ac]['y']=-_0x22998e,_0x323462[0xb06*-0x1+-0x7b7+-0x9*-0x215]['z']=-_0x82ffd3,_0x323462[-0x1cb3+0xe3*0x1f+-0x137*-0x1]['x']=_0x390623,_0x323462[0x269e+0x2617+-0x4cb4]['y']=_0x22998e,_0x323462[0x1aef+-0x1914+-0x1da*0x1]['z']=-_0x82ffd3,_0x323462[0x1*0xf3f+0xd60+-0x1c9d]['x']=-_0x390623,_0x323462[-0x2377+-0xe7b*0x2+0x406f]['y']=_0x22998e,_0x323462[-0x2091+-0xd6c+0x2dff]['z']=-_0x82ffd3,_0x323462[-0x1*0xffc+0x1118+-0x119]['x']=-_0x390623,_0x323462[-0x230e+-0x1*0x579+0x288a]['y']=-_0x22998e,_0x323462[0x1*0xcc8+-0x2d*0xf+-0xa22]['z']=-_0x82ffd3,this['_projectio'+'n']===ni&&(this['horizontal'+'Fov']?(_0x390623=_0x349eaf*Math['tan'](_0x2b4889/(-0x9*0x1ae+0x1*-0xf17+0x1e37)),_0x22998e=_0x390623/this['aspectRati'+'o']):(_0x22998e=_0x349eaf*Math['tan'](_0x2b4889/(0x139d+0x151f*0x1+-0x28ba*0x1)),_0x390623=_0x22998e*this['aspectRati'+'o'])),_0x323462[0x8dd*-0x4+0xe07+0x1571]['x']=_0x390623,_0x323462[-0x1e20+-0x1289+-0x2dd*-0x11]['y']=-_0x22998e,_0x323462[0xc72+-0x106a+0x3fc]['z']=-_0x349eaf,_0x323462[-0x12a4*-0x2+0x3a*0x2b+-0x2f01]['x']=_0x390623,_0x323462[0x1273+-0x1779+-0x50b*-0x1]['y']=_0x22998e,_0x323462[-0x3*-0x5fd+0x51b*-0x5+0x287*0x3]['z']=-_0x349eaf,_0x323462[0x9f*-0x1+0x1de7+-0x1d42]['x']=-_0x390623,_0x323462[-0x7*-0x10b+-0x1ad7+0x1390]['y']=_0x22998e,_0x323462[-0x1*0x4db+0x15*0x139+0x1e4*-0xb]['z']=-_0x349eaf,_0x323462[-0x3*-0x5fc+0x236f+-0x355c]['x']=-_0x390623,_0x323462[0x4ef+-0x44c+0xd*-0xc]['y']=-_0x22998e,_0x323462[-0x17b*0xe+-0x837+0x1cf8]['z']=-_0x349eaf,_0x323462;}['setXrPrope'+'rties'](_0x555b66){Object['assign'](this['_xrPropert'+'ies'],_0x555b66),this['_projMatDi'+'rty']=!(-0xce1+-0x58a+0x3af*0x5);}}const L_=new te(),R_=new te(),O_=new te(),gr=class gr{static['create'](_0x99477,_0x27ba3d,_0x151a43){const _0xb21192=new Fl();switch(_0xb21192['node']=new Ie(_0x99477),_0xb21192['aspectRati'+'o']=-0x1704+0x1c45+-0x540,_0xb21192['aspectRati'+'oMode']=lu,_0xb21192['_scissorRe'+'ctClear']=!(-0x15*-0x20+0x1906*-0x1+0x1666),_0x27ba3d){case Ke:_0xb21192['node']['setRotatio'+'n'](gr['pointLight'+'Rotations'][_0x151a43]),_0xb21192['fov']=0x1dae+-0x6fc+-0x1658,_0xb21192['projection']=ni;break;case Ze:_0xb21192['projection']=ni;break;case ve:_0xb21192['projection']=En;break;}return _0xb21192;}static['evalSpotCo'+'okieMatrix'](_0xdf6f37){let _0x263d78=gr['_spotCooki'+'eCamera'];_0x263d78||(_0x263d78=gr['create']('SpotCookie'+'Camera',Ze),gr['_spotCooki'+'eCamera']=_0x263d78),_0x263d78['fov']=_0xdf6f37['_outerCone'+'Angle']*(0x23b+-0x1aa1+-0x1868*-0x1);const _0x3bbc75=_0x263d78['_node'];_0x3bbc75['setPositio'+'n'](_0xdf6f37['_node']['getPositio'+'n']()),_0x3bbc75['setRotatio'+'n'](_0xdf6f37['_node']['getRotatio'+'n']()),_0x3bbc75['rotateLoca'+'l'](-(-0xe3a+-0x9f2+0x1886),0x1081+0x7f8+-0xb3*0x23,-0x1a*-0x163+-0x1e90+0x13*-0x4a),L_['setTRS'](_0x3bbc75['getPositio'+'n'](),_0x3bbc75['getRotatio'+'n'](),D['ONE'])['invert'](),R_['mul2'](_0x263d78['projection'+'Matrix'],L_);const _0x3c94a9=_0xdf6f37['cookieMatr'+'ix'],_0x43fef2=_0xdf6f37['atlasViewp'+'ort'];return O_['setViewpor'+'t'](_0x43fef2['x'],_0x43fef2['y'],_0x43fef2['z'],_0x43fef2['w']),_0x3c94a9['mul2'](O_,R_),_0x3c94a9;}};h(gr,'pointLight'+'Rotations',[new le()['setFromEul'+'erAngles'](0x359*-0x9+0x7*-0x4a8+0x3eb9,-0x17dc+-0x1426+-0xb17*-0x4,0x1*0x1b91+0x238e+-0x3e6b),new le()['setFromEul'+'erAngles'](-0x7*-0x11+-0x32*-0x11+-0x3c9,-(0x21*-0x5d+-0x525*0x7+-0x2*-0x182d),-0x138c+0x1320+0x10*0x12),new le()['setFromEul'+'erAngles'](-0x3dc+-0xe4a+0x1280,0xbd7+-0x1d65+-0x15*-0xd6,-0x1*0x1c37+-0x7*-0x270+0xb27),new le()['setFromEul'+'erAngles'](-(-0x1*0x923+-0x1026*-0x1+-0x6a9),-0xd82+0x1*-0x19+0xd9b,-0x248+-0x21b+0x463),new le()['setFromEul'+'erAngles'](-0x1fe5+0x1ede+0x107*0x1,-0xe7b+-0x3f8+-0x1*-0x1327,-0x1137+-0xd0d+0x1ef8),new le()['setFromEul'+'erAngles'](0x1a69+-0xb*-0x133+-0x279a,-0x19c*-0x2+-0x238b+-0x1*-0x2053,-0x17b6+0x8*-0x135+0x1*0x2212)]),h(gr,'_spotCooki'+'eCamera',null);let Wn=gr;const vs=new D(),Or=new Float32Array(0xa70+0x8d1+0x669*-0x3),FE=new D(-(-0xc2*-0x20+-0xf*-0xa5+-0x1*0x21eb+0.5),0x321*-0x3+-0x1a19+0x2f5*0xc,0x43*-0x7a+-0x1532+-0x550*-0xa),NE=new D(-0x901+0x18b9+-0xfb8,-0x68f*0x4+-0x1ab4+-0xb0*-0x4d,0x2a7*-0x3+-0x253d+-0x2d32*-0x1+0.5),at={'POSITION_RANGE':0x0,'DIRECTION_FLAGS':0x1,'COLOR_ANGLES_BIAS':0x2,'PROJ_MAT_0':0x3,'ATLAS_VIEWPORT':0x3,'PROJ_MAT_1':0x4,'PROJ_MAT_2':0x5,'PROJ_MAT_3':0x6,'AREA_DATA_WIDTH':0x7,'AREA_DATA_HEIGHT':0x8,'COUNT':0x9},kE={'LIGHTSHAPE_PUNCTUAL':Ys+'u','LIGHTSHAPE_RECT':Zy+'u','LIGHTSHAPE_DISK':Qy+'u','LIGHTSHAPE_SPHERE':Jy+'u','LIGHT_COLOR_DIVIDER':$c+'.0'},F_=(_0x3f7e2d,_0x35a023)=>Object['keys'](_0x3f7e2d)['map'](_0x450d70=>'#define\x20{'+_0x35a023+_0x450d70+'}\x20'+_0x3f7e2d[_0x450d70])['join']('\x0a'),N_='\x0a\x0a\x20\x20\x20\x20'+F_(at,'CLUSTER_TE'+'XTURE_')+'\x0a\x20\x20\x20\x20'+F_(kE,'')+'\x0a';class UE{constructor(_0x2be610){h(this,'areaLights'+'Enabled',!(0x1ec1*-0x1+-0xd97+0x2c59*0x1)),(this['device']=_0x2be610,Pe['get'](_0x2be610,Fe)['set']('lightBuffe'+'rDefinesPS',N_),Pe['get'](_0x2be610,it)['set']('lightBuffe'+'rDefinesPS',N_),this['cookiesEna'+'bled']=!(-0x1*0x19cf+-0x3*0x4e0+0x50e*0x8),this['shadowsEna'+'bled']=!(0x18f7*-0x1+0x9*-0x9+0x1949),this['areaLights'+'Enabled']=!(0xe5*0xd+0xc19+0x1*-0x17b9),this['maxLights']=0x2536+-0x17b7+0x20*-0x64);const _0x4cee95=at['COUNT'];this['lightsFloa'+'t']=new Float32Array((0xc*0x2c2+-0x1d78+0xc*-0x4d)*_0x4cee95*this['maxLights']),this['lightsUint']=new Uint32Array(this['lightsFloa'+'t']['buffer']),this['lightsText'+'ure']=this['createText'+'ure'](this['device'],_0x4cee95,this['maxLights'],Xt,'LightsText'+'ure'),this['_lightsTex'+'tureId']=this['device']['scope']['resolve']('lightsText'+'ure'),this['invMaxColo'+'rValue']=-0x19c5*-0x1+0x3*0x649+0x3*-0xee0,this['invMaxAtte'+'nuation']=-0x20b4+-0x49*0x3a+0x313e,this['boundsMin']=new D(),this['boundsDelt'+'a']=new D();}['destroy'](){var _0x57261f;(_0x57261f=this['lightsText'+'ure'])==null||_0x57261f['destroy'](),this['lightsText'+'ure']=null;}['createText'+'ure'](_0x5678d2,_0x59f046,_0x5d8f67,_0x4b6a20,_0xca846e){return new _e(_0x5678d2,{'name':_0xca846e,'width':_0x59f046,'height':_0x5d8f67,'mipmaps':!(-0x6a7+0x1*0x90b+0x2f*-0xd),'format':_0x4b6a20,'addressU':ue,'addressV':ue,'type':Ds,'magFilter':Te,'minFilter':Te,'anisotropy':0x1});}['setBounds'](_0x30b89d,_0x9f84f6){this['boundsMin']['copy'](_0x30b89d),this['boundsDelt'+'a']['copy'](_0x9f84f6);}['uploadText'+'ures'](){this['lightsText'+'ure']['lock']()['set'](this['lightsFloa'+'t']),this['lightsText'+'ure']['unlock']();}['updateUnif'+'orms'](){this['_lightsTex'+'tureId']['setValue'](this['lightsText'+'ure']);}['getSpotDir'+'ection'](_0xe4cf61,_0x5def5d){_0x5def5d['_node']['getWorldTr'+'ansform']()['getY'](_0xe4cf61)['mulScalar'](-(0x1154*-0x2+-0x1fe7+0x4290)),_0xe4cf61['normalize']();}['getLightAr'+'eaSizes'](_0x35f06c){const _0x4bc24a=_0x35f06c['_node']['getWorldTr'+'ansform']();return _0x4bc24a['transformV'+'ector'](FE,vs),Or[-0x1*0x1a2d+-0x328+-0x1*-0x1d55]=vs['x'],Or[0x5d9+-0x1*0x1ddb+0x1803]=vs['y'],Or[0x311*-0x1+-0x1*-0x1a3f+-0x172c]=vs['z'],_0x4bc24a['transformV'+'ector'](NE,vs),Or[0x2*0xe68+-0x3*0xa30+-0x1c3*-0x1]=vs['x'],Or[-0x20b1*-0x1+-0x1972+-0x73b]=vs['y'],Or[-0x1*-0x9fa+-0x575*-0x3+-0x1a54]=vs['z'],Or;}['addLightDa'+'ta'](_0x1fff0c,_0x340f0b){const _0x1c46b5=_0x1fff0c['_type']===Ze,_0x293fc1=_0x1fff0c['atlasViewp'+'ortAllocat'+'ed'],_0x524a17=this['cookiesEna'+'bled']&&!!_0x1fff0c['_cookie']&&_0x293fc1,_0x1c55af=this['areaLights'+'Enabled']&&_0x1fff0c['shape']!==Ys,_0x580748=this['shadowsEna'+'bled']&&_0x1fff0c['castShadow'+'s']&&_0x293fc1,_0x31f20e=_0x1fff0c['_node']['getPositio'+'n']();let _0x3ea43c=null,_0x1591dc=null;_0x1c46b5?_0x580748?_0x3ea43c=_0x1fff0c['getRenderD'+'ata'](null,-0x2*-0xaaf+-0x62*0x2e+-0x3c2)['shadowMatr'+'ix']:_0x524a17&&(_0x3ea43c=Wn['evalSpotCo'+'okieMatrix'](_0x1fff0c)):(_0x580748||_0x524a17)&&(_0x1591dc=_0x1fff0c['atlasViewp'+'ort']);const _0x5cfdcb=this['lightsFloa'+'t'],_0x5a1e40=this['lightsUint'],_0x4d7821=_0x340f0b*this['lightsText'+'ure']['width']*(0x2501*0x1+0xc02+0x1055*-0x3);_0x5cfdcb[_0x4d7821+(-0x1*0x1419+-0x9*0x202+0x262f)*at['POSITION_R'+'ANGE']+(0x4*0x24+0x43*-0x14+0x4ac)]=_0x31f20e['x'],_0x5cfdcb[_0x4d7821+(-0x877+-0xb4b+0x13c6)*at['POSITION_R'+'ANGE']+(0x125b*0x2+0xb39+-0x2fee)]=_0x31f20e['y'],_0x5cfdcb[_0x4d7821+(0x1a0*0x16+-0xd15*-0x1+-0x30d1)*at['POSITION_R'+'ANGE']+(0x24c+0x1*0x14cb+-0x1715)]=_0x31f20e['z'],_0x5cfdcb[_0x4d7821+(0x1b00+-0x1a02+-0xfa)*at['POSITION_R'+'ANGE']+(0x236d+-0xc5*0x7+0x1*-0x1e07)]=_0x1fff0c['attenuatio'+'nEnd'];const _0x5dd85b=_0x1fff0c['clusteredD'+'ata'];if(_0x5a1e40[_0x4d7821+(0x237d+0x1f4e+0x1*-0x42c7)*at['COLOR_ANGL'+'ES_BIAS']+(-0x206d+-0x5*-0x45d+0x184*0x7)]=_0x5dd85b[-0x5e*0x5c+-0xa1d*0x3+0x401f],_0x5a1e40[_0x4d7821+(-0xfff+-0x3*0x421+-0xa*-0x2d7)*at['COLOR_ANGL'+'ES_BIAS']+(0x1615+-0x50c+0xa*-0x1b4)]=_0x5dd85b[0x1*-0xc0e+-0x35*0x1+-0x14*-0x9d],_0x5a1e40[_0x4d7821+(0x53b+0x1c1c+-0x1c1*0x13)*at['COLOR_ANGL'+'ES_BIAS']+(-0xffd+0x146e+-0x46f)]=_0x5dd85b[-0x19f5+0x1c*0x161+0x53*-0x27],_0x1fff0c['castShadow'+'s']){const _0x532fd2=_0x1fff0c['getRenderD'+'ata'](null,0x19f9*0x1+-0x1eaf*-0x1+-0x715*0x8),_0xe0eefa=_0x1fff0c['_getUnifor'+'mBiasValue'+'s'](_0x532fd2),_0x5ecaf8=Mn['float2Half'](_0xe0eefa['bias']),_0x373bf1=Mn['float2Half'](_0xe0eefa['normalBias']);_0x5a1e40[_0x4d7821+(0x36d*0xb+0x2a0+-0x284b)*at['COLOR_ANGL'+'ES_BIAS']+(-0xc9d+0x29*0x29+0x60f)]=_0x5ecaf8|_0x373bf1<<0x19b9+0x886*-0x3+-0x17;}if(_0x1c46b5&&(this['getSpotDir'+'ection'](vs,_0x1fff0c),_0x5cfdcb[_0x4d7821+(0x16*-0xfd+-0x1d81+0x3343)*at['DIRECTION_'+'FLAGS']+(-0x21cc+0x1*-0x7e1+0x29ad)]=vs['x'],_0x5cfdcb[_0x4d7821+(-0x156*-0xb+-0x172a+0x6*0x16a)*at['DIRECTION_'+'FLAGS']+(0xc19+-0x1f*-0xa3+-0x1fd5)]=vs['y'],_0x5cfdcb[_0x4d7821+(0x7fc+-0x1a*0x3f+-0x1*0x192)*at['DIRECTION_'+'FLAGS']+(0xa72+0x1635+-0x89*0x3d)]=vs['z']),_0x5a1e40[_0x4d7821+(0xaea+-0x136c+0x886)*at['DIRECTION_'+'FLAGS']+(0x2072+0x5*0x45a+-0x3631)]=_0x1fff0c['getCluster'+'edFlags'](_0x580748,_0x524a17),_0x3ea43c){const _0x55c381=_0x3ea43c['data'];for(let _0x42869f=-0x1a5+-0xad5+0xc7a;_0x42869f<0x25ba+-0x17a1+-0xe09*0x1;_0x42869f++)_0x5cfdcb[_0x4d7821+(0xc41+-0x3*-0x971+0x512*-0x8)*at['PROJ_MAT_0']+_0x42869f]=_0x55c381[_0x42869f];}if(_0x1591dc&&(_0x5cfdcb[_0x4d7821+(0xf86+0x180f+-0x2791)*at['ATLAS_VIEW'+'PORT']+(0x26c9*-0x1+-0x16df+0x3da8)]=_0x1591dc['x'],_0x5cfdcb[_0x4d7821+(0x1e4*0x6+-0xcf1+0x19d)*at['ATLAS_VIEW'+'PORT']+(-0xe66*-0x2+-0x14b0+-0x81b)]=_0x1591dc['y'],_0x5cfdcb[_0x4d7821+(0x1cde*-0x1+-0x1d5d*0x1+0x3a3f)*at['ATLAS_VIEW'+'PORT']+(0x26f2+-0x8*-0x169+0x647*-0x8)]=_0x1591dc['z']/(0x11*0x161+-0x13e+-0x1630)),_0x1c55af){const _0x1d9948=this['getLightAr'+'eaSizes'](_0x1fff0c);_0x5cfdcb[_0x4d7821+(-0x47*-0x54+0x25b3+-0x3cfb)*at['AREA_DATA_'+'WIDTH']+(-0x623+-0x10d0+0x16f3)]=_0x1d9948[0xb65*0x1+-0xea2+-0x33d*-0x1],_0x5cfdcb[_0x4d7821+(-0x806+0xa39+-0x22f)*at['AREA_DATA_'+'WIDTH']+(0x32e+-0x4e7+0x1ba)]=_0x1d9948[-0x35*0x1+0xea9+-0xe73],_0x5cfdcb[_0x4d7821+(-0xaa4+0x8a*-0x27+0x1fae)*at['AREA_DATA_'+'WIDTH']+(-0x74d+-0x72+0x5*0x18d)]=_0x1d9948[0x269c+-0x1cf5+0x9a5*-0x1],_0x5cfdcb[_0x4d7821+(-0x8*-0xd1+0x21c4+-0x2848)*at['AREA_DATA_'+'HEIGHT']+(0x97d+0x1*-0x4cf+-0x4ae*0x1)]=_0x1d9948[-0x1*-0x15b+-0x31a*0xa+0x2*0xed6],_0x5cfdcb[_0x4d7821+(-0x161*-0xc+-0x27*-0x95+-0x273b)*at['AREA_DATA_'+'HEIGHT']+(-0x1eab+-0x1ee*0x1+0x209a)]=_0x1d9948[-0x12f9*0x1+-0x617*0x1+-0xc*-0x217],_0x5cfdcb[_0x4d7821+(-0x67+0x15e0+-0x1575)*at['AREA_DATA_'+'HEIGHT']+(-0x2154+-0x1c9+0x51*0x6f)]=_0x1d9948[0xec9*-0x1+-0x1571+0x9*0x407];}}}const ic=new D(),rc=new D(),ac=new D(),Yd=new De(),k_=-0x1e46+-0x9d8+-0x1c0f*-0x2;class U_{constructor(){this['light']=null,this['min']=new D(),this['max']=new D();}}class cu{constructor(_0x44d8bb){h(this,'clusterTex'+'ture'),(this['device']=_0x44d8bb,this['name']='Untitled',this['reportCoun'+'t']=0xd*-0x237+-0x2462+0x412d,this['boundsMin']=new D(),this['boundsMax']=new D(),this['boundsDelt'+'a']=new D(),this['_cells']=new D(0x331*0x1+-0x1*-0x1e58+0x8*-0x431,-0x1*0xda7+-0x78e+0x712*0x3,-0x17c9*-0x1+0xb77*0x3+-0x3a2d),this['_cellsLimi'+'t']=new D(),this['cells']=this['_cells'],this['maxCellLig'+'htCount']=0x34f*0x9+0x226+-0x1*0x1fe9,this['_usedLight'+'s']=[],this['_usedLight'+'s']['push'](new U_()),this['lightsBuff'+'er']=new UE(_0x44d8bb),this['registerUn'+'iforms'](_0x44d8bb));}set['maxCellLig'+'htCount'](_0x2e770f){_0x2e770f!==this['_maxCellLi'+'ghtCount']&&(this['_maxCellLi'+'ghtCount']=_0x2e770f,this['_cellsDirt'+'y']=!(-0x8e9*-0x3+-0x1324+-0x797));}get['maxCellLig'+'htCount'](){return this['_maxCellLi'+'ghtCount'];}set['cells'](_0x625fb4){ic['copy'](_0x625fb4)['floor'](),this['_cells']['equals'](ic)||(this['_cells']['copy'](ic),this['_cellsLimi'+'t']['copy'](ic)['sub'](D['ONE']),this['_cellsDirt'+'y']=!(0xcb*0x12+0x981*-0x1+-0x4c5));}get['cells'](){return this['_cells'];}['destroy'](){this['lightsBuff'+'er']['destroy'](),this['releaseClu'+'sterTextur'+'e']();}['releaseClu'+'sterTextur'+'e'](){this['clusterTex'+'ture']&&(this['clusterTex'+'ture']['destroy'](),this['clusterTex'+'ture']=null);}['registerUn'+'iforms'](_0xa26903){this['_clusterSk'+'ipId']=_0xa26903['scope']['resolve']('clusterSki'+'p'),this['_clusterMa'+'xCellsId']=_0xa26903['scope']['resolve']('clusterMax'+'Cells'),this['_clusterWo'+'rldTexture'+'Id']=_0xa26903['scope']['resolve']('clusterWor'+'ldTexture'),this['_clusterTe'+'xtureSizeI'+'d']=_0xa26903['scope']['resolve']('clusterTex'+'tureSize'),this['_clusterTe'+'xtureSizeD'+'ata']=new Float32Array(0x6*-0x3f9+0x9*-0x3db+0x3a8c),this['_clusterBo'+'undsMinId']=_0xa26903['scope']['resolve']('clusterBou'+'ndsMin'),this['_clusterBo'+'undsMinDat'+'a']=new Float32Array(-0x1673+-0xcee+0x2364),this['_clusterBo'+'undsDeltaI'+'d']=_0xa26903['scope']['resolve']('clusterBou'+'ndsDelta'),this['_clusterBo'+'undsDeltaD'+'ata']=new Float32Array(0x103*-0x17+0x5*-0x416+0x3*0xe92),this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Id']=_0xa26903['scope']['resolve']('clusterCel'+'lsCountByB'+'oundsSize'),this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Data']=new Float32Array(0x1e27+-0x3e1*0xa+0x8a6),this['_clusterCe'+'llsDotId']=_0xa26903['scope']['resolve']('clusterCel'+'lsDot'),this['_clusterCe'+'llsDotData']=new Float32Array(0xc89+-0x8c3*-0x3+-0x26cf),this['_clusterCe'+'llsMaxId']=_0xa26903['scope']['resolve']('clusterCel'+'lsMax'),this['_clusterCe'+'llsMaxData']=new Float32Array(0x3*-0x52d+0x112b+-0x1a1);}['updatePara'+'ms'](_0xd3f40d){_0xd3f40d&&(this['cells']=_0xd3f40d['cells'],this['maxCellLig'+'htCount']=_0xd3f40d['maxLightsP'+'erCell'],this['lightsBuff'+'er']['cookiesEna'+'bled']=_0xd3f40d['cookiesEna'+'bled'],this['lightsBuff'+'er']['shadowsEna'+'bled']=_0xd3f40d['shadowsEna'+'bled'],this['lightsBuff'+'er']['areaLights'+'Enabled']=_0xd3f40d['areaLights'+'Enabled']);}['updateCell'+'s'](){if(this['_cellsDirt'+'y']){this['_cellsDirt'+'y']=!(-0x2115+0x17fa+0x91c);const _0x40420d=this['_cells']['x'],_0x228fa4=this['_cells']['y'],_0x151c6e=this['_cells']['z'],_0x509a92=_0x40420d*_0x228fa4*_0x151c6e,_0x5a8108=this['maxCellLig'+'htCount']*_0x509a92;let _0x3dc053=Math['ceil'](Math['sqrt'](_0x5a8108));_0x3dc053=Y['roundUp'](_0x3dc053,this['maxCellLig'+'htCount']);const _0x336d6a=Math['ceil'](_0x5a8108/_0x3dc053);w['assert'](_0x3dc053<=k_&&_0x336d6a<=k_,'Clustered\x20'+'lights\x20par'+'ameters\x20ca'+'use\x20the\x20te'+'xture\x20size'+'\x20to\x20be\x20ove'+'r\x20the\x20limi'+'t,\x20please\x20'+'adjust\x20the'+'m.'),this['_clusterCe'+'llsMaxData'][-0x6f9+0x9*-0x30f+-0x4*-0x8a0]=_0x40420d,this['_clusterCe'+'llsMaxData'][-0x1555*0x1+0x554+0x1*0x1002]=_0x228fa4,this['_clusterCe'+'llsMaxData'][0x1*-0x188b+-0x197a+-0x10ad*-0x3]=_0x151c6e,this['_clusterCe'+'llsDotData'][0xa62+0x213f*0x1+-0x4d9*0x9]=this['maxCellLig'+'htCount'],this['_clusterCe'+'llsDotData'][0x140a+-0x6b*-0x52+0x364f*-0x1]=_0x40420d*_0x151c6e*this['maxCellLig'+'htCount'],this['_clusterCe'+'llsDotData'][0x1*0x185e+-0x185f+0x3]=_0x40420d*this['maxCellLig'+'htCount'],this['clusters']=new Uint8ClampedArray(_0x5a8108),this['counts']=new Int32Array(_0x509a92),this['_clusterTe'+'xtureSizeD'+'ata'][0x1ca1+-0x284+0x5*-0x539]=_0x3dc053,this['_clusterTe'+'xtureSizeD'+'ata'][-0x789+-0x1*-0x898+-0x10e]=(-0x2*0x7f6+-0x19cb+0x29b8)/_0x3dc053,this['_clusterTe'+'xtureSizeD'+'ata'][-0x6dc*0x2+-0x13ad*0x1+0x1f7*0x11]=(0x613*-0x5+0x1c6c+-0x14*-0x19)/_0x336d6a,this['releaseClu'+'sterTextur'+'e'](),this['clusterTex'+'ture']=this['lightsBuff'+'er']['createText'+'ure'](this['device'],_0x3dc053,_0x336d6a,Ep,'ClusterTex'+'ture');}}['uploadText'+'ures'](){this['clusterTex'+'ture']['lock']()['set'](this['clusters']),this['clusterTex'+'ture']['unlock'](),this['lightsBuff'+'er']['uploadText'+'ures']();}['updateUnif'+'orms'](){this['_clusterSk'+'ipId']['setValue'](this['_usedLight'+'s']['length']>0x695+0x1a6a+0x2*-0x107f?0x1419+0x1*-0x1d9f+-0x4c3*-0x2:-0x20*0x97+-0xce9*0x1+0x1a*0x139),this['lightsBuff'+'er']['updateUnif'+'orms'](),this['_clusterWo'+'rldTexture'+'Id']['setValue'](this['clusterTex'+'ture']),this['_clusterMa'+'xCellsId']['setValue'](this['maxCellLig'+'htCount']);const _0x2c53bc=this['boundsDelt'+'a'];this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Data'][0x1*0x551+0x10ed*0x1+-0x163e*0x1]=this['_cells']['x']/_0x2c53bc['x'],this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Data'][-0x66*0x22+0x25*0x51+0x1d8]=this['_cells']['y']/_0x2c53bc['y'],this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Data'][0xf71+0x2*-0x44f+-0x6d1*0x1]=this['_cells']['z']/_0x2c53bc['z'],this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Id']['setValue'](this['_clusterCe'+'llsCountBy'+'BoundsSize'+'Data']),this['_clusterBo'+'undsMinDat'+'a'][-0x1380+-0x2175*-0x1+-0x9*0x18d]=this['boundsMin']['x'],this['_clusterBo'+'undsMinDat'+'a'][-0x181c*0x1+0x5*-0x6f8+0x3*0x13a7]=this['boundsMin']['y'],this['_clusterBo'+'undsMinDat'+'a'][0x94f+0xcb+-0xa18]=this['boundsMin']['z'],this['_clusterBo'+'undsDeltaD'+'ata'][-0x23d2+0x2504+-0x132]=_0x2c53bc['x'],this['_clusterBo'+'undsDeltaD'+'ata'][-0x2646+-0x701*-0x5+-0x342*-0x1]=_0x2c53bc['y'],this['_clusterBo'+'undsDeltaD'+'ata'][-0x1*0xba7+0x1692+-0xae9]=_0x2c53bc['z'],this['_clusterTe'+'xtureSizeI'+'d']['setValue'](this['_clusterTe'+'xtureSizeD'+'ata']),this['_clusterBo'+'undsMinId']['setValue'](this['_clusterBo'+'undsMinDat'+'a']),this['_clusterBo'+'undsDeltaI'+'d']['setValue'](this['_clusterBo'+'undsDeltaD'+'ata']),this['_clusterCe'+'llsDotId']['setValue'](this['_clusterCe'+'llsDotData']),this['_clusterCe'+'llsMaxId']['setValue'](this['_clusterCe'+'llsMaxData']);}['evalLightC'+'ellMinMax'](_0xbe1422,_0x338179,_0x5f19f8){_0x338179['copy'](_0xbe1422['min']),_0x338179['sub'](this['boundsMin']),_0x338179['div'](this['boundsDelt'+'a']),_0x338179['mul2'](_0x338179,this['cells']),_0x338179['floor'](),_0x5f19f8['copy'](_0xbe1422['max']),_0x5f19f8['sub'](this['boundsMin']),_0x5f19f8['div'](this['boundsDelt'+'a']),_0x5f19f8['mul2'](_0x5f19f8,this['cells']),_0x5f19f8['ceil'](),_0x338179['max'](D['ZERO']),_0x5f19f8['min'](this['_cellsLimi'+'t']);}['collectLig'+'hts'](_0x188833){const _0xfbfeed=this['lightsBuff'+'er']['maxLights'],_0x2dd40f=this['_usedLight'+'s'];let _0x9d86c2=-0x890+0x131*0x3+0x47*0x12;_0x188833['forEach'](_0x4bf575=>{const _0xb10492=!!(_0x4bf575['mask']&(Ss|di)),_0x10e47f=_0x4bf575['type']===Ze&&_0x4bf575['_outerCone'+'Angle']===-0x1*-0xe5+0x1*0x491+-0x576;if(_0x4bf575['enabled']&&_0x4bf575['type']!==ve&&_0x4bf575['visibleThi'+'sFrame']&&_0x4bf575['intensity']>0x3*-0x163+-0xbd+0x4e6&&_0xb10492&&!_0x10e47f){if(_0x9d86c2<_0xfbfeed){let _0x30d9b5;_0x9d86c2<_0x2dd40f['length']?_0x30d9b5=_0x2dd40f[_0x9d86c2]:(_0x30d9b5=new U_(),_0x2dd40f['push'](_0x30d9b5)),_0x30d9b5['light']=_0x4bf575,_0x4bf575['getBoundin'+'gBox'](Yd),_0x30d9b5['min']['copy'](Yd['getMin']()),_0x30d9b5['max']['copy'](Yd['getMax']()),_0x9d86c2++;}else w['warnOnce']('Clustered\x20'+'lighting:\x20'+'more\x20than\x20'+(_0xfbfeed-(-0xe6*0x1a+0x127+0x1636))+('\x20lights\x20in'+'\x20the\x20frame'+',\x20ignoring'+'\x20some.'));}}),_0x2dd40f['length']=_0x9d86c2;}['evaluateBo'+'unds'](){const _0x40c6bb=this['_usedLight'+'s'],_0x356676=this['boundsMin'],_0x42f336=this['boundsMax'];if(_0x40c6bb['length']>-0x23c*-0x3+-0x1eb*-0xa+-0x19e1*0x1){_0x356676['copy'](_0x40c6bb[-0x4b2+-0xc6d+0x448*0x4]['min']),_0x42f336['copy'](_0x40c6bb[-0x1968+0x190e+0x5b]['max']);for(let _0x210adc=0xab6+0x1*-0x1c44+-0x2*-0x8c8;_0x210adc<_0x40c6bb['length'];_0x210adc++)_0x356676['min'](_0x40c6bb[_0x210adc]['min']),_0x42f336['max'](_0x40c6bb[_0x210adc]['max']);}else _0x356676['set'](0x26bb+-0x8a+0x2631*-0x1,-0xb57+0x181b+-0x56*0x26,0x20fe+0x16af+0x3*-0x128f),_0x42f336['set'](-0x5*-0x1b7+0x92b+0x13*-0xef,0x6e*0x4b+-0x290+0x1da9*-0x1,0x222+-0x16e0+0x2f*0x71);this['boundsDelt'+'a']['sub2'](_0x42f336,_0x356676),this['lightsBuff'+'er']['setBounds'](_0x356676,this['boundsDelt'+'a']);}['updateClus'+'ters'](_0x42de0a){this['counts']['fill'](0x2eb*-0x5+0x58f*-0x7+-0x3580*-0x1),this['clusters']['fill'](-0x1*-0x688+-0x20eb+0x7*0x3c5),this['lightsBuff'+'er']['areaLights'+'Enabled']=_0x42de0a?_0x42de0a['areaLights'+'Enabled']:!(0x1cfc+0x12bc+-0x23*0x15d);const _0x3cabbf=this['_cells']['x'],_0x45b6e3=this['_cells']['z'],_0xc509d9=this['counts'],_0x4e3546=this['_maxCellLi'+'ghtCount'],_0x1d5f66=this['clusters'],_0x3e4d7f=this['maxCellLig'+'htCount'];let _0x18f99f=!(0x9*-0x1fd+-0xc68*0x3+0x19f*0x22);const _0x1b18e3=this['_usedLight'+'s'];for(let _0xff60e4=0xcc*0x17+-0x1*0x1f2f+-0xcdc*-0x1;_0xff60e4<_0x1b18e3['length'];_0xff60e4++){const _0x50f179=_0x1b18e3[_0xff60e4],_0x2d1d0b=_0x50f179['light'];this['lightsBuff'+'er']['addLightDa'+'ta'](_0x2d1d0b,_0xff60e4),this['evalLightC'+'ellMinMax'](_0x50f179,rc,ac);const _0x1339e6=rc['x'],_0x3188c3=ac['x'],_0x97d7be=rc['y'],_0x3a4bac=ac['y'],_0x26832d=rc['z'],_0x371a15=ac['z'];for(let _0x490e28=_0x1339e6;_0x490e28<=_0x3188c3;_0x490e28++)for(let _0x54995b=_0x26832d;_0x54995b<=_0x371a15;_0x54995b++)for(let _0x4b0ecd=_0x97d7be;_0x4b0ecd<=_0x3a4bac;_0x4b0ecd++){const _0x40713f=_0x490e28+_0x3cabbf*(_0x54995b+_0x4b0ecd*_0x45b6e3),_0x4ac5f2=_0xc509d9[_0x40713f];_0x4ac5f2<_0x4e3546?(_0x1d5f66[_0x3e4d7f*_0x40713f+_0x4ac5f2]=_0xff60e4,_0xc509d9[_0x40713f]=_0x4ac5f2+(-0x2363+-0x1*-0x1a8e+0x8d6)):_0x18f99f=!(0x1*0x81b+-0x1691+0xe76);}}_0x18f99f&&this['reportCoun'+'t']<-0x1468+-0xfe9+0x2456&&(console['warn']('Too\x20many\x20l'+'ights\x20in\x20l'+'ight\x20clust'+'er\x20'+this['name']+(',\x20please\x20a'+'djust\x20para'+'meters.')+(this['reportCoun'+'t']===0x1*0x20de+-0x234+0x1*-0x1ea6?'\x20Giving\x20up'+'\x20on\x20report'+'ing\x20it.':'')),this['reportCoun'+'t']++);}['update'](_0x20e710,_0x3269a5=null){this['updatePara'+'ms'](_0x3269a5),this['updateCell'+'s'](),this['collectLig'+'hts'](_0x20e710),this['evaluateBo'+'unds'](),this['updateClus'+'ters'](_0x3269a5),this['uploadText'+'ures']();}['activate'](){this['updateUnif'+'orms']();}}const B_=0x31d*0x2+0xd0f*-0x1+0x6d7*0x1+0.39996322972865306,Nl={'circlePoint'(_0x1a7f55){const _0x2fd89c=Math['sqrt'](Math['random']()),_0x31d14d=Math['random']()*(-0x8cd+-0x1*0x2dd+0xbac)*Math['PI'];_0x1a7f55['x']=_0x2fd89c*Math['cos'](_0x31d14d),_0x1a7f55['y']=_0x2fd89c*Math['sin'](_0x31d14d);},'circlePointDeterministic'(_0x4c43f4,_0x164b2d,_0x3273dc){const _0x1fe868=_0x164b2d*B_,_0x48e071=Math['sqrt'](_0x164b2d)/Math['sqrt'](_0x3273dc);_0x4c43f4['x']=_0x48e071*Math['cos'](_0x1fe868),_0x4c43f4['y']=_0x48e071*Math['sin'](_0x1fe868);},'spherePointDeterministic'(_0x355de3,_0x3f1b96,_0x21df6b,_0x491432=-0x1818+-0xc5*0x1+-0x1*-0x18dd,_0x354f31=0xf93+0x479*-0x1+0x3*-0x3b3){_0x491432=-0x1d57+-0x1e3d*-0x1+-0xe5*0x1-(-0x10bd+0x4f4+0xbcb)*_0x491432,_0x354f31=-0x54+-0x11*-0x3d+-0x3b8-(0x513*-0x2+0x2c*0x96+0x32*-0x50)*_0x354f31;const _0x37f0a8=Y['lerp'](_0x491432,_0x354f31,_0x3f1b96/_0x21df6b),_0x345c38=Math['sqrt'](0x1*-0x607+-0x25d7+0x2bdf-_0x37f0a8*_0x37f0a8),_0x5a5edc=B_*_0x3f1b96;_0x355de3['x']=Math['cos'](_0x5a5edc)*_0x345c38,_0x355de3['y']=_0x37f0a8,_0x355de3['z']=Math['sin'](_0x5a5edc)*_0x345c38;},'radicalInverse'(_0x2d293d){let _0x25641b=(_0x2d293d<<-0x157f+-0x31*-0xa1+-0xf*0x9e|_0x2d293d>>>-0x1*-0x1924+-0xb59+0xdbb*-0x1)>>>0x1513+-0xd*0x23d+0x1a*0x4f;return _0x25641b=((_0x25641b&-0x9acf*0xb671+0x675709a5+0x1*0x5c51cb0f)<<-0x25*0xa3+0x2*-0x39b+-0x27*-0xca|(_0x25641b&-0x4*0xea53794+-0x3*0x6b7e3d45+0x227ba40c9)>>>0x25d8+-0x25db*-0x1+-0x4bb2*0x1)>>>0x1*0xdfd+-0x10c8+0x2cb,_0x25641b=((_0x25641b&0x368867b1+0x227eaeee+-0x25d3e36c)<<-0xb79+0x5a3+0x1*0x5d8|(_0x25641b&-0x9b2e9cf6+0x918da720+-0x1*-0xd66dc2a2)>>>0x1c8a+0x1775+-0x33fd)>>>-0xbc8+-0x190+-0x7a*-0x1c,_0x25641b=((_0x25641b&0x972b645*-0x1+0x1131319f+0x75093b5)<<-0x69*-0xd+0xa39+-0xf8a|(_0x25641b&-0x1*0x1c4a5cb42+-0x1cd4a4b*0x104+0x3cc3407*0x132)>>>-0x147+-0x764*-0x3+-0x14e1*0x1)>>>-0x1*-0xdd3+0x64d+-0x1420,_0x25641b=((_0x25641b&-0x58*-0xc7a4+0x12dabe9+-0x734b4a)<<0x4*0x98e+0x9f7*0x1+-0x3027|(_0x25641b&-0x2bccd3c4+-0x10d10863d+-0x431f5*-0x875d)>>>0x3e*0x2b+0x841*0x2+-0x1ae4)>>>-0x198c+0xc2+0x18ca,_0x25641b*(-0x1ddb+-0x9b1+0x278c*0x1+2.3283064365386963e-10);}},BE={'linear':'decodeLine'+'ar','srgb':'decodeGamm'+'a','rgbm':'decodeRGBM','rgbe':'decodeRGBE','rgbp':'decodeRGBP','xy':'unpackNorm'+'alXY','xyz':'unpackNorm'+'alXYZ'},zE={'linear':'encodeLine'+'ar','srgb':'encodeGamm'+'a','rgbm':'encodeRGBM','rgbe':'encodeRGBE','rgbp':'encodeRGBP'};class Tr{static['decodeFunc'](_0x2d6ec2){return BE[_0x2d6ec2]??'decodeGamm'+'a';}static['encodeFunc'](_0x2dc286){return zE[_0x2dc286]??'encodeGamm'+'a';}}const z_=_0x186a73=>{switch(_0x186a73){case tu:return'Cubemap';case Gx:return'Octahedral';default:return'Equirect';}},nc=(_0x46faca,_0x35a541,_0x3ecdb6)=>{if(_0x46faca<=0x1*-0x1421+0xca0+-0x781*-0x1)_0x35a541[_0x3ecdb6+(-0x1be*0x6+-0xfd2+0x162*0x13)]=0x1f76+0x84*-0x22+-0xdee,_0x35a541[_0x3ecdb6+(-0x1*-0x2195+-0x587*-0x6+-0x42be*0x1)]=0x64f+0x691*0x5+-0x2724,_0x35a541[_0x3ecdb6+(0x245c+0x1*-0xc8e+-0x17cc)]=0x1fff+0x1951*-0x1+-0x39*0x1e,_0x35a541[_0x3ecdb6+(-0x1082+-0x1*0x239+0x12be)]=-0x25ac+-0x1cf8+-0x6aa*-0xa;else{if(_0x46faca>=0x356*0x2+0x1fa8+-0x2653)_0x35a541[_0x3ecdb6+(-0x2*0x11d2+-0x1f72+0x115*0x3e)]=0x15*-0x1b8+-0x4cb*-0x3+0x16b6,_0x35a541[_0x3ecdb6+(0x126c+0x100e*-0x2+-0x2bd*-0x5)]=0x1425+-0x207*0x1+-0x121e,_0x35a541[_0x3ecdb6+(0x1a28+-0x26f4*0x1+-0xcce*-0x1)]=0x13c1+0xcd1*0x1+0x2092*-0x1,_0x35a541[_0x3ecdb6+(0x1777+0x612+-0x1d86)]=0x1360+-0x19ef+0x1*0x68f;else{let _0x5523f2=(0x1*0x821+-0x26*0x5+-0x762)*_0x46faca%(-0x32d*0x7+-0x1*0x1355+0x2991),_0x2f9bdf=(0xcf*-0x2c+-0xec5+0x3358)*_0x46faca%(0x249d+-0x1*0x20e3+-0x3b9),_0x3c6171=(0x4aae+-0x12c36+0x1*0x1df89)*_0x46faca%(-0x1*-0x1aed+-0x7*-0x33d+0x3197*-0x1);const _0x5f4ba0=(-0xa1083e+0x140859+0x18a02e4)*_0x46faca%(-0xfda+-0x160b+0x93*0x42);_0x5523f2-=_0x2f9bdf/(-0x26bb+0x1bf1+0x7*0x1af),_0x2f9bdf-=_0x3c6171/(-0xffb+0x1*0x1669+-0x56f),_0x3c6171-=_0x5f4ba0/(-0x932+0x349+0xdd*0x8),_0x35a541[_0x3ecdb6+(0x36*0x3e+-0x2650+0x193c)]=Math['min'](-0x2*-0x557+0x341+-0x12*0xb8,Math['floor'](_0x5523f2*(-0xd30+0x33c*-0x6+-0x35c*-0xa))),_0x35a541[_0x3ecdb6+(-0x1*0x179e+-0x4af+0x1c4e)]=Math['min'](-0x1c51+0xbf*0x24+0x274,Math['floor'](_0x2f9bdf*(-0xde9+-0x2*-0x3a1+-0x7a7*-0x1))),_0x35a541[_0x3ecdb6+(-0x1448+-0x144a+-0x7*-0x5cc)]=Math['min'](-0xf3a+-0x23ef+0x3428,Math['floor'](_0x3c6171*(-0x31f*-0x9+-0x263e+-0x23b*-0x5))),_0x35a541[_0x3ecdb6+(0x79c*0x1+0x11*-0x132+-0x1*-0xcb9)]=Math['min'](0x1561+0xa*0x18a+-0x23c6,Math['floor'](_0x5f4ba0*(-0x2e5*-0x7+0xcf8+-0x203b)));}}},VE=_0x455dd5=>{const _0xf5c30a=_0x455dd5['length'],_0xd754aa=Math['min'](_0xf5c30a,-0x12*-0x49+0x1*-0x137+-0x1eb),_0x1c8acf=Math['ceil'](_0xf5c30a/_0xd754aa),_0x437d80=new Uint8Array(_0xd754aa*_0x1c8acf*(0x22*0x8+-0xf*0x6d+0x557));let _0x4bc2b8=-0x192b*-0x1+0xb71*-0x1+-0xdba;for(let _0x11e229=-0x93d+-0xb3f*0x1+0x26*0x8a;_0x11e229<_0xf5c30a;_0x11e229+=-0x20c4+-0x1*0x1015+0x30dd)nc(_0x455dd5[_0x11e229+(0x1*-0x1edd+0x5*-0x57b+-0x9b6*-0x6)]*(-0x1cd*-0x13+0x1064+-0x329b*0x1+0.5)+(-0x17*0x151+0x938*-0x1+0x1*0x277f+0.5),_0x437d80,_0x4bc2b8+(0xa9d+0x13d*-0x3+-0x6e6)),nc(_0x455dd5[_0x11e229+(-0x11*0x18a+-0x580+0x1fab)]*(-0x1*0x1759+0x18e8+-0x18f+0.5)+(0x10*-0xb5+0xcf7*0x1+0x9*-0x2f+0.5),_0x437d80,_0x4bc2b8+(-0x47*-0x8b+-0x23*-0x13+0x6*-0x6db)),nc(_0x455dd5[_0x11e229+(0x1*-0x1cea+-0xb7*0x16+-0xf*-0x2fa)]*(-0x122d+-0x12*0x77+-0x54f*-0x5+0.5)+(-0x106*0x11+0x1f8a+-0xe24+0.5),_0x437d80,_0x4bc2b8+(-0x7f*0x3b+-0xde9+0x159b*0x2)),nc(_0x455dd5[_0x11e229+(0x1711+-0x335*0xa+0x904)]/(0xe35+-0x2*-0x120d+-0x3247*0x1),_0x437d80,_0x4bc2b8+(0x11*-0xca+0x1714+0x99e*-0x1)),_0x4bc2b8+=-0x5e7+-0x2da*0xd+-0x2b09*-0x1;return{'width':_0xd754aa,'height':_0x1c8acf,'data':_0x437d80};},GE=(_0x3930f6,_0x11f4a2,_0x18c8bc,_0x554c98)=>{const _0x15b30c=_0x18c8bc*(-0xdc3+-0x25a1+0x99*0x56)*Math['PI'],_0x5b65ad=Math['pow'](-0x1fd2+-0x6f1*-0x2+0x11f1-_0x11f4a2,(-0x1*-0x20e+0x3*-0x533+0x363*0x4)/(_0x554c98+(0x1*0x85+0x16a+-0x1ee))),_0x33cf01=Math['sqrt'](0x31*-0x7+0x16f2+0xa*-0x229-_0x5b65ad*_0x5b65ad);_0x3930f6['set'](Math['cos'](_0x15b30c)*_0x33cf01,Math['sin'](_0x15b30c)*_0x33cf01,_0x5b65ad)['normalize']();},HE=(_0x1e13ff,_0x978fba,_0x593bdb)=>{const _0x4bd7ca=_0x593bdb*(-0xc34+-0x75f*-0x3+-0x5*0x1fb)*Math['PI'],_0x20420c=Math['sqrt'](0xca6+-0x4*0x7c4+0x126b-_0x978fba),_0x231c2d=Math['sqrt'](_0x978fba);_0x1e13ff['set'](Math['cos'](_0x4bd7ca)*_0x231c2d,Math['sin'](_0x4bd7ca)*_0x231c2d,_0x20420c)['normalize']();},WE=(_0x21d24d,_0x523254,_0x6ff2d0,_0x456a2d)=>{const _0x216680=_0x6ff2d0*(0x6e4+-0x8de+0x1fc)*Math['PI'],_0x3bb431=Math['sqrt']((0x26b2+0x2*0x119e+-0x49ed-_0x523254)/(-0x38a*0xa+-0x6ae+0x2a13+(_0x456a2d*_0x456a2d-(-0x209c+-0x1251+-0x3*-0x10fa))*_0x523254)),_0x5a3951=Math['sqrt'](0x1*-0x15d+0x1a5e+-0x1900-_0x3bb431*_0x3bb431);_0x21d24d['set'](Math['cos'](_0x216680)*_0x5a3951,Math['sin'](_0x216680)*_0x5a3951,_0x3bb431)['normalize']();},$E=(_0x5837e8,_0x445b62)=>{const _0x9d37fe=_0x5837e8*_0x445b62,_0x520e53=_0x445b62/(-0x1*0x2233+-0xe*-0x9d+0x199e-_0x5837e8*_0x5837e8+_0x9d37fe*_0x9d37fe);return _0x520e53*_0x520e53*((0x4e7*-0x3+0x3cf+-0xae7*-0x1)/Math['PI']);},XE=(_0x2bea5d,_0x2e912a)=>{const _0x26a6ec=new D(),_0xbfa28e=[];for(let _0xffeb12=-0xa03+0x526*-0x2+0x3*0x6c5;_0xffeb12<_0x2bea5d;++_0xffeb12)GE(_0x26a6ec,_0xffeb12/_0x2bea5d,Nl['radicalInv'+'erse'](_0xffeb12),_0x2e912a),_0xbfa28e['push'](_0x26a6ec['x'],_0x26a6ec['y'],_0x26a6ec['z'],-0x814+0x767+0x1*0xad);return _0xbfa28e;},qE=(_0x4c9b94,_0x180d3a)=>{const _0x40e73a=_0x180d3a/_0x4c9b94,_0x1ef4b8=new D(),_0x238cc9=[];for(let _0xb7af93=0x20f7+0x194*0x15+-0x421b*0x1;_0xb7af93<_0x4c9b94;++_0xb7af93){HE(_0x1ef4b8,_0xb7af93/_0x4c9b94,Nl['radicalInv'+'erse'](_0xb7af93));const _0x1535a1=_0x1ef4b8['z']/Math['PI'],_0x1530dc=(0xb6e+-0x13d7*0x1+0x869+0.5)*Math['log2'](_0x40e73a/_0x1535a1);_0x238cc9['push'](_0x1ef4b8['x'],_0x1ef4b8['y'],_0x1ef4b8['z'],_0x1530dc);}return _0x238cc9;},jE={0x10:{0x2:0x1a,0x8:0x14,0x20:0x11,0x80:0x10,0x200:0x10},0x20:{0x2:0x35,0x8:0x28,0x20:0x22,0x80:0x20,0x200:0x20},0x80:{0x2:0xd6,0x8:0xa3,0x20:0x8b,0x80:0x82,0x200:0x80},0x400:{0x2:0x6ba,0x8:0x51e,0x20:0x45a,0x80:0x411,0x200:0x401}},YE=(_0x3bf3bd,_0x21fc4d)=>{const _0x1987b8=jE[_0x3bf3bd];return _0x1987b8&&_0x1987b8[_0x21fc4d]||_0x3bf3bd;},KE=(_0x527bec,_0x2d439e,_0x2a7470)=>{const _0x457924=_0x2a7470/_0x527bec,_0x5799bb=-0xd*0x10+-0x13*0x88+0xae9-Math['log2'](_0x2d439e)/(0x1962+-0x32f+-0x58a*0x4),_0x202502=_0x5799bb*_0x5799bb,_0xa7383c=new D(),_0x34130a=new D(),_0x2dcbec=new D(-0x9ee+0x7*0x283+-0x7a7,-0x2322+-0x2520*0x1+-0x6*-0xc0b,0x2b1*0xe+0x1*-0x263b+0x2*0x47),_0x1e886f=[],_0xa643bc=YE(_0x527bec,_0x2d439e);for(let _0x1b189a=-0x10a6+-0x1b13+0x63f*0x7;_0x1b189a<_0xa643bc;++_0x1b189a){WE(_0xa7383c,_0x1b189a/_0xa643bc,Nl['radicalInv'+'erse'](_0x1b189a),_0x202502);const _0x212ce0=_0xa7383c['z'];if(_0x34130a['set'](_0xa7383c['x'],_0xa7383c['y'],_0xa7383c['z'])['mulScalar']((-0x1*0x16ed+0xe93+0x85c)*_0x212ce0)['sub'](_0x2dcbec),_0x34130a['z']>0x261a*0x1+-0x2526+-0xf4*0x1){const _0x3bf909=$E(Math['min'](0x1cc+-0x1*-0xc8d+-0xe58,_0x212ce0),_0x202502)/(-0x1*0xa6d+-0x8d1*-0x2+0x107*-0x7)+(0x10*-0x24+0x117b+-0xf3b+0.001),_0x213436=(0xc4b+0x137*-0x11+-0xd6*-0xa+0.5)*Math['log2'](_0x457924/_0x3bf909);_0x1e886f['push'](_0x34130a['x'],_0x34130a['y'],_0x34130a['z'],_0x213436);}}for(;_0x1e886f['length']<_0x527bec*(-0x76f+0x21a1+-0x1a2e);)_0x1e886f['push'](-0x46a+-0x88*-0x2+0x35a,0x184d+0x8e1*0x2+-0x2a0f,-0x49*-0x27+0x22e8+0x2e07*-0x1,-0xa6f+-0x12b+0x10e*0xb);return _0x1e886f;},ZE=(_0x3d050a,_0x3cdd87,_0x662d3c)=>{const _0x5536e1=VE(_0x662d3c);return new _e(_0x3d050a,{'name':_0x3cdd87,'width':_0x5536e1['width'],'height':_0x5536e1['height'],'mipmaps':!(0x15d8+-0x241+-0x1396),'minFilter':Te,'magFilter':Te,'levels':[_0x5536e1['data']]});};class xv{constructor(_0x5952e1=!(0x1fbb+-0x2*-0xfe9+0x5c7*-0xb)){h(this,'map',new Map()),this['destroyCon'+'tent']=_0x5952e1;}['destroy'](){this['destroyCon'+'tent']&&this['map']['forEach']((_0x17230f,_0x226f42)=>{_0x17230f['destroy']();});}['get'](_0x5806c5,_0x2f5fb4){if(!this['map']['has'](_0x5806c5)){const _0x5bdb34=_0x2f5fb4();return this['map']['set'](_0x5806c5,_0x5bdb34),_0x5bdb34;}return this['map']['get'](_0x5806c5);}}const QE=new xv(!(-0x2612+-0x1815+0x48*0xdd)),JE=new Kt(),dm=(_0xa25321,_0x1920cb,_0x503d02)=>JE['get'](_0xa25321,()=>new xv())['get'](_0x1920cb,()=>ZE(_0xa25321,_0x1920cb,QE['get'](_0x1920cb,_0x503d02))),eb=(_0x3a303c,_0x2f17f2,_0x5073e7)=>{const _0x22ffa3='lambert-sa'+'mples-'+_0x2f17f2+'-'+_0x5073e7;return dm(_0x3a303c,_0x22ffa3,()=>qE(_0x2f17f2,_0x5073e7));},tb=(_0x172adc,_0x28cdbd,_0x1b7007)=>{const _0x2fdd7c='phong-samp'+'les-'+_0x28cdbd+'-'+_0x1b7007;return dm(_0x172adc,_0x2fdd7c,()=>XE(_0x28cdbd,_0x1b7007));},sb=(_0x37654c,_0x470d4a,_0x491578,_0x99fcb7)=>{const _0x2a3916='ggx-sample'+'s-'+_0x470d4a+'-'+_0x491578+'-'+_0x99fcb7;return dm(_0x37654c,_0x2a3916,()=>KE(_0x470d4a,_0x491578,_0x99fcb7));};function vi(_0x2d622e,_0x7508e1,_0x503641={}){var _0x55dba0,_0x1b6060;w['assert'](_0x2d622e instanceof _e&&_0x7508e1 instanceof _e,'source\x20and'+'\x20target\x20mu'+'st\x20be\x20text'+'ures');const _0x75ad48=_0x503641['seamPixels']??-0x7df+0x1008+0x829*-0x1,_0xdcdbd5=(((_0x55dba0=_0x503641['rect'])==null?void(-0x229e+-0x6cd*0x2+0x3038):_0x55dba0['z'])??_0x7508e1['width'])-_0x75ad48*(0x6a*0x20+-0x58e*0x7+-0xc*-0x223),_0x54ed11=(((_0x1b6060=_0x503641['rect'])==null?void(-0x90a+0x4fe+-0x4*-0x103):_0x1b6060['w'])??_0x7508e1['height'])-_0x75ad48*(-0xb3*-0xd+0x44*0x7+0xaf1*-0x1);if(_0xdcdbd5<0x1780+-0x26c2+0xf43||_0x54ed11<0x1*0x1649+-0x16*0x69+0xd42*-0x1)return!(0x1a56+0x4d*-0x1f+-0x1102);const _0x50b5f4={'none':'reproject','lambert':'prefilterS'+'amplesUnwe'+'ighted','phong':'prefilterS'+'amplesUnwe'+'ighted','ggx':'prefilterS'+'amples'},_0x4c4955=_0x503641['hasOwnProp'+'erty']('specularPo'+'wer')?_0x503641['specularPo'+'wer']:0x54a+-0x1f6+-0x353,_0x330847=_0x503641['hasOwnProp'+'erty']('face')?_0x503641['face']:null,_0x40450d=_0x503641['hasOwnProp'+'erty']('distributi'+'on')?_0x503641['distributi'+'on']:_0x4c4955===-0xc67*0x2+0x11ba+-0x103*-0x7?'none':'phong',_0x19177d=_0x50b5f4[_0x40450d]||'reproject',_0x106961=_0x19177d['startsWith']('prefilterS'+'amples'),_0xbd4030=Tr['decodeFunc'](_0x2d622e['encoding']),_0x516819=Tr['encodeFunc'](_0x7508e1['encoding']),_0x2da460='sample'+z_(_0x2d622e['projection']),_0x393945='getDirecti'+'on'+z_(_0x7508e1['projection']),_0x1438ad=_0x503641['hasOwnProp'+'erty']('numSamples')?_0x503641['numSamples']:0x1a93+-0x25b1+0xf1e,_0x2ec0a9='ReprojectS'+'hader:'+_0x19177d+'_'+_0xbd4030+'_'+_0x516819+'_'+_0x2da460+'_'+_0x393945+'_'+_0x1438ad,_0x11127f=_0x2d622e['device'];let _0x1b6bba=Hn(_0x11127f)['getCachedS'+'hader'](_0x2ec0a9);if(!_0x1b6bba){const _0x19dcf2=new Map();_0x106961&&_0x19dcf2['set']('USE_SAMPLE'+'S_TEX',''),_0x2d622e['cubemap']&&_0x19dcf2['set']('CUBEMAP_SO'+'URCE',''),_0x19dcf2['set']('{PROCESS_F'+'UNC}',_0x19177d),_0x19dcf2['set']('{DECODE_FU'+'NC}',_0xbd4030),_0x19dcf2['set']('{ENCODE_FU'+'NC}',_0x516819),_0x19dcf2['set']('{SOURCE_FU'+'NC}',_0x2da460),_0x19dcf2['set']('{TARGET_FU'+'NC}',_0x393945),_0x19dcf2['set']('{NUM_SAMPL'+'ES}',_0x1438ad),_0x19dcf2['set']('{NUM_SAMPL'+'ES_SQRT}',Math['round'](Math['sqrt'](_0x1438ad))['toFixed'](0x1*-0x3bd+-0x86*-0x26+0x6*-0x2b1));const _0x2358b9=_0x11127f['isWebGPU'],_0xf6ff45=Pe['get'](_0x11127f,_0x2358b9?it:Fe),_0xeb16a0=new Map();_0xeb16a0['set']('decodePS',_0xf6ff45['get']('decodePS')),_0xeb16a0['set']('encodePS',_0xf6ff45['get']('encodePS')),_0x1b6bba=$t['createShad'+'er'](_0x11127f,{'uniqueName':_0x2ec0a9,'attributes':{'vertex_position':Me},'vertexChunk':'reprojectV'+'S','fragmentChunk':'reprojectP'+'S','fragmentIncludes':_0xeb16a0,'fragmentDefines':_0x19dcf2});}Q['pushGpuMar'+'ker'](_0x11127f,'ReprojectT'+'exture'),_0x11127f['setBlendSt'+'ate'](pt['NOBLEND']);const _0x1eff4e=_0x11127f['scope']['resolve'](_0x2d622e['cubemap']?'sourceCube':'sourceTex');w['assert'](_0x1eff4e),_0x1eff4e['setValue'](_0x2d622e);const _0x3dd190=_0x11127f['scope']['resolve']('params'),_0x22eb9c=_0x11127f['scope']['resolve']('uvMod');_0x75ad48>-0x43e+0x2f1+0x9*0x25?_0x22eb9c['setValue']([(_0xdcdbd5+_0x75ad48*(-0x533+-0x13d2+-0x95*-0x2b))/_0xdcdbd5,(_0x54ed11+_0x75ad48*(-0x1*-0x20b1+-0x215*0x7+-0x121c))/_0x54ed11,-_0x75ad48/_0xdcdbd5,-_0x75ad48/_0x54ed11]):_0x22eb9c['setValue']([0x1*0x1793+0x2150+-0x38e2,-0x2710+0x3f5+0xe*0x282,-0x553+-0x926+0x11d*0xd,0x23de+0x9a2*-0x2+-0x22*0x7d]);const _0x1a8812=[-0x2007+0x220*0xe+0x1*0x247,_0x7508e1['width']*_0x7508e1['height']*(_0x7508e1['cubemap']?0x1*-0x549+0x1ae8+-0x1599:0x1e68+-0xe92+-0x243*0x7),_0x2d622e['width']*_0x2d622e['height']*(_0x2d622e['cubemap']?0x26f*-0x10+-0x11e0+0x5af*0xa:-0x1d*-0x103+-0x155+-0x6b*0x43)];if(_0x106961){const _0x21674e=_0x2d622e['width']*_0x2d622e['height']*(_0x2d622e['cubemap']?0x61c+0x21ab+0x1*-0x27c1:0x2d*-0x1d+-0x126a+0x1784),_0x38a609=_0x40450d==='ggx'?sb(_0x11127f,_0x1438ad,_0x4c4955,_0x21674e):_0x40450d==='lambert'?eb(_0x11127f,_0x1438ad,_0x21674e):tb(_0x11127f,_0x1438ad,_0x4c4955);_0x11127f['scope']['resolve']('samplesTex')['setValue'](_0x38a609),_0x11127f['scope']['resolve']('samplesTex'+'InverseSiz'+'e')['setValue']([(0x83+0x652*0x3+0x4de*-0x4)/_0x38a609['width'],(0x6df+0x1cbe+-0x239c)/_0x38a609['height']]);}for(let _0x1accb5=0x20c4+0x3*-0x8e9+0x135*-0x5;_0x1accb5<(_0x7508e1['cubemap']?-0x9*0x38b+-0x1a44+0x3a2d:-0xeb+-0x58f*-0x3+-0x1*0xfc1);_0x1accb5++)if(_0x330847===null||_0x1accb5===_0x330847){const _0x38bfc8=new gt({'colorBuffer':_0x7508e1,'face':_0x1accb5,'depth':!(-0x2db*-0xd+-0xf2*-0x1+-0x2610),'flipY':_0x11127f['isWebGPU']});_0x1a8812[-0xec6+-0x4f*-0x4f+-0x99b]=_0x1accb5,_0x3dd190['setValue'](_0x1a8812),Ar(_0x11127f,_0x38bfc8,_0x1b6bba,_0x503641==null?void(0x1043+-0x1f*-0xee+-0x2d15*0x1):_0x503641['rect']),_0x38bfc8['destroy']();}return Q['popGpuMark'+'er'](_0x11127f),!(0xf6a*-0x1+-0x3*0xa40+0x1*0x2e2a);}const Kd=(_0x15af18,_0x47c447=0x1*-0x66b+0x16ab+0xd*-0x140)=>0x1b0a+-0x8*-0x17+-0x1bc1+Math['floor'](Math['log2'](Math['max'](_0x15af18,_0x47c447))),ib=_0x485ebe=>_0x485ebe['textureHal'+'fFloatRend'+'erable'],rb=_0x5e31c5=>_0x5e31c5['textureFlo'+'atRenderab'+'le'],ab=_0x26f516=>ib(_0x26f516)?nt:rb(_0x26f516)?Xt:Ne,nb=_0x547eb6=>Ne,ob=(_0x320639,_0x2fcf03,_0x10e8b7,_0x450c3a)=>new _e(_0x320639,{'name':'lighting-'+_0x2fcf03,'cubemap':!(-0xca7+-0x1ccd+0x2974),'width':_0x2fcf03,'height':_0x2fcf03,'format':_0x10e8b7,'type':Qo,'addressU':ue,'addressV':ue,'mipmaps':!(0x19*-0x14+0x1*-0x5d1+-0x5*-0x18e)});class Tv{static['generateSk'+'yboxCubema'+'p'](_0x3f3dc1,_0x3d3626){const _0x1d1fed=_0x3f3dc1['device'];Q['pushGpuMar'+'ker'](_0x1d1fed,'genSkyboxC'+'ubemap');const _0x96a664=ob(_0x1d1fed,_0x3d3626||(_0x3f3dc1['cubemap']?_0x3f3dc1['width']:_0x3f3dc1['width']/(0x741*0x2+0x2*0x1e7+0x493*-0x4)),Ne);return vi(_0x3f3dc1,_0x96a664,{'numSamples':0x400}),Q['popGpuMark'+'er'](_0x1d1fed),_0x96a664;}static['generateLi'+'ghtingSour'+'ce'](_0x3131dc,_0x2b9a3d){const _0x1224f2=_0x3131dc['device'];Q['pushGpuMar'+'ker'](_0x1224f2,'genLightin'+'gSource');const _0x2d3570=ab(_0x1224f2),_0x4a0c94=(_0x2b9a3d==null?void(-0x7f3+0x33*0x81+-0x11c0):_0x2b9a3d['target'])||new _e(_0x1224f2,{'name':'lighting-s'+'ource','cubemap':!(0x183f+-0x1a43+0x6*0x56),'width':(_0x2b9a3d==null?void(-0x11ef*0x1+-0x1b66+0x37*0xd3):_0x2b9a3d['size'])||0x2507+-0x34*-0x9c+0x1*-0x4437,'height':(_0x2b9a3d==null?void(-0xb3*0xd+-0x251f+-0xa*-0x49f):_0x2b9a3d['size'])||0x1a88+-0x969*-0x1+-0x2371,'format':_0x2d3570,'type':_0x2d3570===Ne?Qo:Ds,'addressU':ue,'addressV':ue,'mipmaps':!(-0x26b4+-0x1fcb+0x1*0x467f)});return vi(_0x3131dc,_0x4a0c94,{'numSamples':_0x3131dc['mipmaps']?-0xb41*0x1+-0x1081+0x1bc3:0x1098+0x5*0x275+-0x18e1}),Q['popGpuMark'+'er'](_0x1224f2),_0x4a0c94;}static['generateAt'+'las'](_0x390fe4,_0x59c545){const _0x559b09=_0x390fe4['device'],_0x4050e8=nb();Q['pushGpuMar'+'ker'](_0x559b09,'genAtlas');const _0x4ed291=(_0x59c545==null?void(0x21*0x10d+0xe*-0xd0+-0x174d):_0x59c545['target'])||new _e(_0x559b09,{'name':'envAtlas','width':(_0x59c545==null?void(-0x3cb*0x2+0x1d4d+-0x15b7):_0x59c545['size'])||-0xf*-0x143+0xa8e+-0x1b7b,'height':(_0x59c545==null?void(-0x1*-0x1a83+-0x19d*-0x1+-0x1c20):_0x59c545['size'])||0x6*0x41b+-0x1*-0x4be+-0x49*0x60,'format':_0x4050e8,'type':Qo,'projection':Vm,'addressU':ue,'addressV':ue,'mipmaps':!(-0x1a35+-0x1*0xa81+0x24b7)});Q['pushGpuMar'+'ker'](_0x559b09,'mipmaps');const _0x2d4fda=_0x4ed291['width']/(-0x1*-0x13f1+-0x1990+0x79f*0x1),_0x2570fa=new re(-0xc66+0xc0a+-0x5c*-0x1,-0x2221*0x1+0x1343*-0x1+0x3564,(0x1*-0x81b+0x28e+0x1*0x78d)*_0x2d4fda,(-0x5f*-0x64+-0x15c8+0x1*-0xe54)*_0x2d4fda),_0x289bac=Kd(-0x2e9*-0x3+-0x2*0xbeb+-0xd9*-0x13)-Kd(-0x107b+-0x3be*-0x2+-0x903*-0x1);for(let _0xba3f2a=0x6b*0x2b+-0x1875*0x1+0x67c;_0xba3f2a<_0x289bac;++_0xba3f2a)vi(_0x390fe4,_0x4ed291,{'numSamples':0x1,'rect':_0x2570fa,'seamPixels':_0x2d4fda}),_0x2570fa['x']+=_0x2570fa['w'],_0x2570fa['y']+=_0x2570fa['w'],_0x2570fa['z']=Math['max'](0x2e2*0x1+-0x22ad+0x1fcc,Math['floor'](_0x2570fa['z']*(-0x2*0x11d2+-0x3*0x2eb+0x2c65+0.5))),_0x2570fa['w']=Math['max'](-0x1*0x1b07+0x1c72+-0x16a,Math['floor'](_0x2570fa['w']*(-0x255b+0x1b80+0x9db+0.5)));Q['popGpuMark'+'er'](_0x559b09),Q['pushGpuMar'+'ker'](_0x559b09,'reflection'+'s'),_0x2570fa['set'](0x1e2b*0x1+0x66e*0x2+-0x2b07,(0x164f*0x1+0x8fc+-0x37*0x8d)*_0x2d4fda,(-0x3*-0x92b+0x1d6*0xb+-0x1*0x2eb3)*_0x2d4fda,(-0x1750*-0x1+0x1376+-0x2a46)*_0x2d4fda);for(let _0x1ba97c=-0xef+-0x265*0x5+0xce9*0x1;_0x1ba97c<0x2*-0xc9a+-0x258+0x1b93;++_0x1ba97c)vi(_0x390fe4,_0x4ed291,{'numSamples':(_0x59c545==null?void(0x4*-0x659+0x57+0x190d):_0x59c545['numReflect'+'ionSamples'])||0x9f*0x4+0x15ea+-0x1466,'distribution':(_0x59c545==null?void(0x1*0x1541+-0x315*-0x1+-0x1856):_0x59c545['distributi'+'on'])||'ggx','specularPower':Math['max'](0x10d3+-0xaba+-0x618,-0x9f1+0xad*0xa+0xb2f>>_0x1ba97c*(0x22f7*0x1+0x1e2a+-0x15b5*0x3)),'rect':_0x2570fa,'seamPixels':_0x2d4fda}),_0x2570fa['y']+=_0x2570fa['w'],_0x2570fa['z']=Math['max'](0xfb2+-0x354*-0x6+-0x23a9,Math['floor'](_0x2570fa['z']*(-0x1cc9+-0x1*-0x2524+-0x1f*0x45+0.5))),_0x2570fa['w']=Math['max'](-0x5d1+-0x1*0x2099+-0x266b*-0x1,Math['floor'](_0x2570fa['w']*(0x160+0x1*-0x5e1+0x481+0.5)));return Q['popGpuMark'+'er'](_0x559b09),Q['pushGpuMar'+'ker'](_0x559b09,'ambient'),_0x2570fa['set']((-0x784+0x18e9+-0x10e5)*_0x2d4fda,(-0x1251+0x460+0xf71)*_0x2d4fda,(0x1ab3+0x1ecb+-0x393e)*_0x2d4fda,(-0x1*0x1487+0x1058+0x44f)*_0x2d4fda),vi(_0x390fe4,_0x4ed291,{'numSamples':(_0x59c545==null?void(0x78d+0x82*0x20+-0x17cd):_0x59c545['numAmbient'+'Samples'])||-0x23e1*-0x1+0x828+-0x2409,'distribution':'lambert','rect':_0x2570fa,'seamPixels':_0x2d4fda}),Q['popGpuMark'+'er'](_0x559b09),Q['popGpuMark'+'er'](_0x559b09),_0x4ed291;}static['generatePr'+'efilteredA'+'tlas'](_0x5db940,_0x524b8f){const _0x2b714e=_0x5db940[-0x2425*0x1+-0x1035+0x345a]['device'],_0x1f133f=_0x5db940[-0x127e*-0x1+-0x5*-0x33b+0x7*-0x4f3]['format'],_0x1928db=_0x5db940[-0x872+-0x21c1*-0x1+-0x194f]['type'];Q['pushGpuMar'+'ker'](_0x2b714e,'genPrefilt'+'eredAtlas');const _0x3c83da=(_0x524b8f==null?void(-0x732+0xd16*-0x1+0x1448):_0x524b8f['target'])||new _e(_0x2b714e,{'name':'envPrefilt'+'eredAtlas','width':(_0x524b8f==null?void(-0x1*-0x10+0x177e+-0x178e):_0x524b8f['size'])||0x20a9+0x4bd+-0x2366,'height':(_0x524b8f==null?void(-0x83+-0x17*0x6d+-0x1*-0xa4e):_0x524b8f['size'])||0x1d*0x31+0x4*0x9a8+0xe0f*-0x3,'format':_0x1f133f,'type':_0x1928db,'projection':Vm,'addressU':ue,'addressV':ue,'mipmaps':!(-0x1b24+0xfac*-0x1+0x2ad1)});Q['pushGpuMar'+'ker'](_0x2b714e,'mipmaps');const _0x442d5d=_0x3c83da['width']/(-0x24e7+0x1a36+0xab*0x13),_0x13ca0e=new re(-0xfb*-0x19+0x86*-0x19+0x75*-0x19,-0x800+0x1430+-0xc30,(0x80e*-0x2+0x485+-0x1f1*-0x7)*_0x442d5d,(-0x1f*0x3e+0x3*0x8d1+-0x1*0x11f1)*_0x442d5d),_0x6a0db6=Kd(0x1f3*0xa+0x11*-0xf+-0x107f);for(let _0xb320bd=-0x1ef1*-0x1+0xfa6*0x2+-0x3e3d;_0xb320bd<_0x6a0db6;++_0xb320bd)vi(_0x5db940[0x32d+0x1*-0x1942+0x1615],_0x3c83da,{'numSamples':0x1,'rect':_0x13ca0e,'seamPixels':_0x442d5d}),_0x13ca0e['x']+=_0x13ca0e['w'],_0x13ca0e['y']+=_0x13ca0e['w'],_0x13ca0e['z']=Math['max'](-0xb1*0x1f+0x1bf*0x6+0xaf6,Math['floor'](_0x13ca0e['z']*(-0x2383*0x1+-0x106e+0x33f1*0x1+0.5))),_0x13ca0e['w']=Math['max'](-0x1005+0x353*-0x5+-0x1*-0x20a5,Math['floor'](_0x13ca0e['w']*(0x1*0x1dd5+0x8ee*0x3+-0x389f+0.5)));Q['popGpuMark'+'er'](_0x2b714e),Q['pushGpuMar'+'ker'](_0x2b714e,'reflection'+'s'),_0x13ca0e['set'](0xe78+0xe07+-0x5*0x5b3,(-0x5*-0x6d1+-0x1e9b+-0x27a)*_0x442d5d,(-0xa*0x2c2+-0x6ee+0x2382)*_0x442d5d,(0x21a7+-0xec1+-0x13a*0xf)*_0x442d5d);for(let _0xa211d4=-0x8da*-0x3+0x2254+0x3*-0x144b;_0xa211d4<_0x5db940['length'];++_0xa211d4)vi(_0x5db940[_0xa211d4],_0x3c83da,{'numSamples':0x1,'rect':_0x13ca0e,'seamPixels':_0x442d5d}),_0x13ca0e['y']+=_0x13ca0e['w'],_0x13ca0e['z']=Math['max'](-0x3*-0xbcb+-0x78d+-0x1bd3,Math['floor'](_0x13ca0e['z']*(0x12a9+0x1a8*-0x8+-0x1*0x569+0.5))),_0x13ca0e['w']=Math['max'](0x215*0x5+-0x64b+0x15f*-0x3,Math['floor'](_0x13ca0e['w']*(-0x11dd+0xa93+0x74a+0.5)));return Q['popGpuMark'+'er'](_0x2b714e),Q['pushGpuMar'+'ker'](_0x2b714e,'ambient'),_0x13ca0e['set']((-0x249*0xb+-0x10ec+0x5*0x883)*_0x442d5d,(-0x6*-0x30+0x22d*-0xb+0x31*0x7f)*_0x442d5d,(-0x1*-0x196a+0x8d2+0x6cc*-0x5)*_0x442d5d,(0x880+0x1*0x1601+-0x1e61)*_0x442d5d),_0x524b8f!=null&&_0x524b8f['legacyAmbi'+'ent']?vi(_0x5db940[0x4*-0x37+0x152c+-0x144b],_0x3c83da,{'numSamples':0x1,'rect':_0x13ca0e,'seamPixels':_0x442d5d}):vi(_0x5db940[-0xd49*-0x2+-0x1*0x557+0x153b*-0x1],_0x3c83da,{'numSamples':(_0x524b8f==null?void(0x7*0x3f6+0x8d4+0x2*-0x1247):_0x524b8f['numSamples'])||0xd2*-0xb+-0x182a+0x2930,'distribution':'lambert','rect':_0x13ca0e,'seamPixels':_0x442d5d}),Q['popGpuMark'+'er'](_0x2b714e),Q['popGpuMark'+'er'](_0x2b714e),_0x3c83da;}}const lb={'aoPS':'1.57','clearCoatPS':'1.57','clearCoatGlossPS':'1.60','clearCoatNormalPS':'1.57','diffusePS':'1.57','emissivePS':'1.57','glossPS':'1.60','metalnessPS':'1.57','normalMapPS':'1.57','opacityPS':'1.57','parallaxPS':'1.57','sheenPS':'1.57','sheenGlossPS':'1.60','specularPS':'1.57','specularityFactorPS':'1.57','thicknessPS':'1.57','transmissionPS':'1.57','normalVertexPS':'1.55','aoDiffuseOccPS':'1.62','aoSpecOccPS':'2.6','clusteredLightPS':'1.62','clusteredLightShadowPS':'1.62','combinePS':'1.62','falloffInvSquaredPS':'1.62','falloffLinearPS':'1.62','lightDiffuseLambertPS':'1.62','lightSheenPS':'1.62','lightSpecularAnisoGGXPS':'1.62','lightSpecularBlinnPS':'1.62','ltcPS':'1.62','reflDirPS':'1.62','reflDirAnisoPS':'1.62','reflectionCCPS':'1.62','reflectionCubePS':'2.6','reflectionEnvPS':'2.6','reflectionEnvHQPS':'2.6','reflectionSpherePS':'2.6','reflectionSheenPS':'1.62','shadowCommonPS':'1.62','shadowCoordPS':'1.62','shadowCoordPerspZBufferPS':'1.62','shadowEVSMPS':'1.62','spotPS':'1.62','TBNPS':'1.62','endPS':'1.65','metalnessModulatePS':'1.65','outputAlphaPS':'1.65','outputAlphaPremulPS':'1.65','fresnelSchlickPS':'1.65','iridescenceDiffractionPS':'1.65','lightmapAddPS':'1.65','refractionCubePS':'1.70','refractionDynamicPS':'1.70'},V_={'ambientPrefilteredCubePS':'1.51','ambientPrefilteredCubeLodPS':'1.51','dpAtlasQuadPS':'1.51','genParaboloidPS':'1.51','prefilterCubemapPS':'1.51','reflectionDpAtlasPS':'1.51','reflectionPrefilteredCubePS':'1.51','reflectionPrefilteredCubeLodPS':'1.51','refractionPS':'1.56','combineClearCoatPS':'1.56','combineDiffusePS':'1.56','combineDiffuseSpecularPS':'1.56','combineDiffuseSpecularNoReflPS':'1.56','combineDiffuseSpecularNoReflSeparateAmbientPS':'1.56','combineDiffuseSpecularOldPS':'1.56','lightmapSingleVertPS':'1.55','normalMapFastPS':'1.55','specularAaNonePS':'1.55','specularAaToksvigPS':'1.55','specularAaToksvigFastPS':'1.55','skyboxEnvPS':'2.1','skyboxHDRPS':'2.1','shadowVSM8PS':'2.3','fogExpPS':'2.5','fogExp2PS':'2.5','fogLinearPS':'2.5','fogNonePS':'2.5','gamma1_0PS':'2.5','gamma2_2PS':'2.5','storeEVSMPS':'2.6','shadowEVSMnPS':'2.6','shadowVSM_commonPS':'2.6','shadowStandardPS':'2.6','shadowStandardGL2PS':'2.6','startVS':'2.6','endVS':'2.6','baseVS':'2.6','baseNineSlicedVS':'2.6','viewNormalVS':'2.6','lightmapDirAddPS':'2.6','TBNObjectSpacePS':'2.6','TBNderivativePS':'2.6','startPS':'2.6','outputAlphaOpaque':'2.6','outputAlphaPremul':'2.6','cubeMapProjectBoxPS':'2.6','cubeMapProjectNonePS':'2.6','envMultiplyPS':'2.6','envConstPS':'2.6','aoSpecOccConstPS':'2.6','aoSpecOccConstSimplePS':'2.6','aoSpecOccSimplePS':'2.6','ambientConstantPS':'2.6','ambientEnvPS':'2.6','ambientSHPS':'2.6','shadowSampleCoordPS':'2.6','diffuseDetailMapPS':'2.7','normalDetailMapPS':'2.7','normalXYPS':'2.7','normalXYZPS':'2.7','aoDetailMapPS':'2.7','lightmapDirPS':'2.7','lightmapSinglePS':'2.7','tangentBinormalVS':'2.7'},cb=(_0x108685,_0x3caa4a)=>{const _0x2d360e=_0x108685['split']('.')['map'](_0x958bbe=>parseInt(_0x958bbe,-0x1fe4*-0x1+0x128c*-0x1+-0xd4e)),_0x3cac08=_0x3caa4a['split']('.')['map'](_0x5eeca6=>parseInt(_0x5eeca6,0x31*-0x86+-0xb48*0x1+0x24f8));return _0x2d360e[0xc00+-0x345+0x2e9*-0x3]<_0x3cac08[0x2b*-0x3b+0xd15+0x1c*-0x1d]||_0x2d360e[0xedd*0x2+-0x522*0x3+-0x1*0xe54]===_0x3cac08[0xd0*-0x30+-0xb*0x2e8+-0x8*-0x8df]&&_0x2d360e[-0x17d2+-0x1151*-0x1+0x682]<_0x3cac08[0x4*-0x592+0x9d*-0x8+0x1b31];},hb=(_0x4952a3,_0x244cab)=>{for(const _0x3dc720 of _0x4952a3['keys']())if(V_['hasOwnProp'+'erty'](_0x3dc720)){const _0xd2b7a5=V_[_0x3dc720];w['warnOnce']('Shader\x20chu'+'nk\x20\x27'+_0x3dc720+('\x27\x20was\x20remo'+'ved\x20in\x20API'+'\x20')+_0xd2b7a5+('\x20and\x20is\x20no'+'\x20longer\x20su'+'pported.'));}else{const _0xd9b9a6=lb[_0x3dc720];_0xd9b9a6&&(!_0x244cab||cb(_0x244cab,_0xd9b9a6))&&w['warnOnce']('Shader\x20chu'+'nk\x20\x27'+_0x3dc720+('\x27\x20is\x20API\x20v'+'ersion\x20')+_0xd9b9a6+(',\x20but\x20the\x20'+'supplied\x20c'+'hunk\x20is\x20ve'+'rsion\x20')+(_0x244cab||'undefined')+('.\x20Please\x20u'+'pdate\x20to\x20t'+'he\x20latest\x20'+'API:\x20https'+'://develop'+'er.playcan'+'vas.com/us'+'er-manual/'+'graphics/s'+'hader-chun'+'k-migratio'+'ns/'));}},Zd={'vertex_normal':gs,'vertex_tangent':yi,'vertex_texCoord0':is,'vertex_texCoord1':ba,'vertex_color':Wt,'vertex_boneWeights':gi,'vertex_boneIndices':us};class db{constructor(_0x1c9adb,_0x4da7fd,_0x4295a9=!(0x1eb1+0x1cd5+-0x1*0x3b86)){h(this,'varyingsCo'+'de',''),h(this,'device'),h(this,'options'),h(this,'shaderLang'+'uage'),h(this,'vDefines',new Map()),h(this,'fDefines',new Map()),h(this,'includes',new Map()),h(this,'chunks',null),(this['device']=_0x1c9adb,this['options']=_0x4da7fd);const _0x2d7a53=_0x4da7fd['shaderChun'+'ks'];if(this['shaderLang'+'uage']=_0x1c9adb['isWebGPU']&&_0x4295a9&&(_0x2d7a53!=null&&_0x2d7a53['useWGSL'])?it:Fe,this['attributes']={'vertex_position':Me},_0x4da7fd['userAttrib'+'utes']){for(const [_0x132c0b,_0x16d09a]of Object['entries'](_0x4da7fd['userAttrib'+'utes']))this['attributes'][_0x16d09a]=_0x132c0b;}const _0x5e9b19=Pe['get'](_0x1c9adb,this['shaderLang'+'uage']);if(this['chunks']=new Map(_0x5e9b19),_0x2d7a53){const _0x337b46=this['shaderLang'+'uage']===Fe?_0x2d7a53['glsl']:_0x2d7a53['wgsl'];w['call'](()=>{hb(_0x337b46,_0x2d7a53['version']);}),_0x337b46['forEach']((_0x12bb17,_0x4da50d)=>{for(const _0x29488b in Zd)Zd['hasOwnProp'+'erty'](_0x29488b)&&_0x12bb17['indexOf'](_0x29488b)>=-0x1*0x213d+0x227a+-0x13d*0x1&&(this['attributes'][_0x29488b]=Zd[_0x29488b]);this['chunks']['set'](_0x4da50d,_0x12bb17);});}this['shaderPass'+'Info']=Si['get'](this['device'])['getByIndex'](_0x4da7fd['pass']),this['shadowPass']=this['shaderPass'+'Info']['isShadow'],this['lighting']=_0x4da7fd['lights']['length']>0x702+-0x1830+0x112e||_0x4da7fd['dirLightMa'+'pEnabled']||_0x4da7fd['clusteredL'+'ightingEna'+'bled'],this['reflection'+'s']=_0x4da7fd['reflection'+'Source']!==vr,this['needsNorma'+'l']=this['lighting']||this['reflection'+'s']||_0x4da7fd['useSpecula'+'r']||_0x4da7fd['ambientSH']||_0x4da7fd['useHeights']||_0x4da7fd['enableGGXS'+'pecular']||_0x4da7fd['clusteredL'+'ightingEna'+'bled']&&!this['shadowPass']||_0x4da7fd['useClearCo'+'atNormals'],this['needsNorma'+'l']=this['needsNorma'+'l']&&!this['shadowPass'],this['needsScene'+'Color']=_0x4da7fd['useDynamic'+'Refraction'],this['needsScree'+'nSize']=_0x4da7fd['useDynamic'+'Refraction'],this['needsTrans'+'forms']=_0x4da7fd['useDynamic'+'Refraction'],this['vshader']=null,this['fshader']=null;}['fDefineSet'](_0x360401,_0x8ee6fd,_0x1f0ca4=''){_0x360401&&this['fDefines']['set'](_0x8ee6fd,_0x1f0ca4);}['generateVe'+'rtexShader'](_0x39b349,_0xe6c730,_0x2735d5){const {options:_0x4a77fa,vDefines:_0x3688ed,attributes:_0x137971}=this,_0x4055cb=new Map();if(_0x4055cb['set']('vPositionW','vec3'),(_0x4a77fa['nineSliced'+'Mode']===Pt||_0x4a77fa['nineSliced'+'Mode']===Mt)&&_0x3688ed['set']('NINESLICED',!(0x6d*0x57+-0xf*0xac+-0x1af7)),this['options']['linearDept'+'h']&&(_0x3688ed['set']('LINEAR_DEP'+'TH',!(0xa*-0x192+0x4*-0x915+0x1e*0x1bc)),_0x4055cb['set']('vLinearDep'+'th','float')),this['needsNorma'+'l']&&_0x3688ed['set']('NORMALS',!(-0x10af+0x11e5+0x9b*-0x2)),this['options']['useInstanc'+'ing']){const _0x56c38d=Pe['get'](this['device'],this['shaderLang'+'uage']);this['chunks']['get']('transformI'+'nstancingV'+'S')===_0x56c38d['get']('transformI'+'nstancingV'+'S')&&(_0x137971['instance_l'+'ine1']=Mp,_0x137971['instance_l'+'ine2']=Dp,_0x137971['instance_l'+'ine3']=Ip,_0x137971['instance_l'+'ine4']=Ln);}this['needsNorma'+'l']&&(_0x137971['vertex_nor'+'mal']=gs,_0x4055cb['set']('vNormalW','vec3'),_0x4a77fa['hasTangent'+'s']&&(_0x4a77fa['useHeights']||_0x4a77fa['useNormals']||_0x4a77fa['useClearCo'+'atNormals']||_0x4a77fa['enableGGXS'+'pecular'])?(_0x3688ed['set']('TANGENTS',!(0x16bb+0x22cf+-0x398a)),_0x137971['vertex_tan'+'gent']=yi,_0x4055cb['set']('vTangentW','vec3'),_0x4055cb['set']('vBinormalW','vec3')):_0x4a77fa['enableGGXS'+'pecular']&&(_0x3688ed['set']('GGX_SPECUL'+'AR',!(0x3*-0xf2+-0x82b+0x3ab*0x3)),_0x4055cb['set']('vObjectSpa'+'ceUpW','vec3')));const _0x1dcbc5=-0x8d*0x25+-0x21a3+-0x5*-0xace;for(let _0x170798=0x668+0xc39+0xfb*-0x13;_0x170798<_0x1dcbc5;_0x170798++)_0x39b349[_0x170798]&&(_0x3688ed['set']('UV'+_0x170798,!(-0x16c0+0xd07*-0x1+0x23c7)),_0x137971['vertex_tex'+'Coord'+_0x170798]='TEXCOORD'+_0x170798),_0xe6c730[_0x170798]&&(_0x3688ed['set']('UV'+_0x170798+('_UNMODIFIE'+'D'),!(-0x3d*0x97+0x90f+0x1aec)),_0x4055cb['set']('vUv'+_0x170798,'vec2'));let _0x6c4baf=-0x1749+0x1*-0x130c+0x2a55;const _0x224cf7=new Set();_0x2735d5['forEach'](_0x26669d=>{const {id:_0xf3813d,uv:_0xeea36a,name:_0x3c1baf}=_0x26669d,_0x1e5f19=_0xf3813d+_0xeea36a*(0x2a4*0x6+-0x1a3*-0xd+-0x24bb*0x1);if(!_0x224cf7['has'](_0x1e5f19)){_0x224cf7['add'](_0x1e5f19),_0x4055cb['set']('vUV'+_0xeea36a+'_'+_0xf3813d,'vec2');const _0x55e9d4='texture_'+_0x3c1baf+('MapTransfo'+'rm');_0x3688ed['set']('{TRANSFORM'+'_NAME_'+_0x6c4baf+'}',_0x55e9d4),_0x3688ed['set']('{TRANSFORM'+'_UV_'+_0x6c4baf+'}',_0xeea36a),_0x3688ed['set']('{TRANSFORM'+'_ID_'+_0x6c4baf+'}',_0xf3813d),_0x6c4baf++;}}),_0x3688ed['set']('UV_TRANSFO'+'RMS_COUNT',_0x6c4baf),_0x4a77fa['vertexColo'+'rs']&&(_0x137971['vertex_col'+'or']=Wt,_0x3688ed['set']('VERTEX_COL'+'OR',!(0x124d*0x2+0x1055*0x1+-0x34ef)),_0x4055cb['set']('vVertexCol'+'or','vec4')),_0x4a77fa['useMsdf']&&_0x4a77fa['msdfTextAt'+'tribute']&&(_0x137971['vertex_out'+'lineParame'+'ters']=Ko,_0x137971['vertex_sha'+'dowParamet'+'ers']=Zo,_0x3688ed['set']('MSDF',!(-0x10ef*0x1+-0x1*-0xbbf+0x530))),(_0x4a77fa['useMorphPo'+'sition']||_0x4a77fa['useMorphNo'+'rmal'])&&(_0x3688ed['set']('MORPHING',!(0xb*-0x376+0x610+0x1e2*0x11)),_0x4a77fa['useMorphTe'+'xtureBased'+'Int']&&_0x3688ed['set']('MORPHING_I'+'NT',!(0x2531*0x1+-0x595+-0x1f9c)),_0x4a77fa['useMorphPo'+'sition']&&_0x3688ed['set']('MORPHING_P'+'OSITION',!(-0x926+-0x268+-0xb8e*-0x1)),_0x4a77fa['useMorphNo'+'rmal']&&_0x3688ed['set']('MORPHING_N'+'ORMAL',!(-0xe99*-0x2+0x1848+-0x1*0x357a)),_0x137971['morph_vert'+'ex_id']=Ln),_0x4a77fa['skin']&&(_0x137971['vertex_bon'+'eIndices']=us,_0x4a77fa['batch']?_0x3688ed['set']('BATCH',!(0x1b4*-0x8+0x209*0x7+-0x9f)):(_0x137971['vertex_bon'+'eWeights']=gi,_0x3688ed['set']('SKIN',!(-0xe9e+-0xf28+0x1dc6)))),_0x4a77fa['useInstanc'+'ing']&&_0x3688ed['set']('INSTANCING',!(0x134b+-0x2e*0xb8+0xdc5)),_0x4a77fa['screenSpac'+'e']&&_0x3688ed['set']('SCREENSPAC'+'E',!(0x1f6d+-0x503+-0x1a6a)),_0x4a77fa['pixelSnap']&&_0x3688ed['set']('PIXELSNAP',!(-0x3*-0x782+-0x1ff6*0x1+0x970)),_0x4055cb['forEach']((_0x17c3e8,_0x2ca3d1)=>{this['varyingsCo'+'de']+='#define\x20VA'+'RYING_'+_0x2ca3d1['toUpperCas'+'e']()+'\x0a',this['varyingsCo'+'de']+=this['shaderLang'+'uage']===it?'varying\x20'+_0x2ca3d1+':\x20'+Fy['get'](_0x17c3e8)+';\x0a':'varying\x20'+_0x17c3e8+'\x20'+_0x2ca3d1+';\x0a';}),this['includes']['set']('varyingsVS',this['varyingsCo'+'de']),this['includes']['set']('varyingsPS',this['varyingsCo'+'de']),this['vshader']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22litMain'+'VS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20';}['_setupLigh'+'tingDefine'+'s'](_0x7f94ba,_0x3a7288){const _0x1a9874=this['fDefines'],_0x394bdf=this['options'];if(this['fDefines']['set']('LIGHT_COUN'+'T',_0x394bdf['lights']['length']),_0x7f94ba&&_0x1a9874['set']('AREA_LIGHT'+'S',!(-0x1*0x2303+0x22fd+0x6)),_0x3a7288&&this['lighting']&&(_0x1a9874['set']('LIT_CLUSTE'+'RED_LIGHTS',!(0x2102+-0x2d*-0x1d+-0x261b)),_0x394bdf['clusteredL'+'ightingCoo'+'kiesEnable'+'d']&&_0x1a9874['set']('CLUSTER_CO'+'OKIES',!(0x17d6+0x15*0xab+0x3*-0xc9f)),_0x394bdf['clusteredL'+'ightingAre'+'aLightsEna'+'bled']&&_0x1a9874['set']('CLUSTER_AR'+'EALIGHTS',!(0x658*-0x1+-0x7d2+-0x7*-0x206)),_0x394bdf['lightMaskD'+'ynamic']&&_0x1a9874['set']('CLUSTER_ME'+'SH_DYNAMIC'+'_LIGHTS',!(-0x19ff+0x8*0x253+0x767)),_0x394bdf['clusteredL'+'ightingSha'+'dowsEnable'+'d']&&!_0x394bdf['noShadow'])){const _0x3f738f=qi['get'](_0x394bdf['clusteredL'+'ightingSha'+'dowType']);_0x1a9874['set']('CLUSTER_SH'+'ADOWS',!(-0xc7+0x1*0x1e7c+-0x1db5)),_0x1a9874['set']('SHADOW_KIN'+'D_'+_0x3f738f['kind'],!(0x2376+-0x878+-0x5*0x566)),_0x1a9874['set']('CLUSTER_SH'+'ADOW_TYPE_'+_0x3f738f['kind'],!(0x7*-0x19e+-0x241*0xf+0xf0b*0x3));}for(let _0x3db627=0xa15*-0x2+0x6*0x169+-0x2ed*-0x4;_0x3db627<_0x394bdf['lights']['length'];_0x3db627++){const _0x42d292=_0x394bdf['lights'][_0x3db627],_0x2e6f47=_0x42d292['_type'];if(_0x3a7288&&_0x2e6f47!==ve)continue;const _0x551701=_0x7f94ba&&_0x42d292['_shape']?_0x42d292['_shape']:Ys,_0x23e3ab=_0x42d292['_shadowTyp'+'e'],_0xa87a44=_0x42d292['castShadow'+'s']&&!_0x394bdf['noShadow'],_0x4f13c2=qi['get'](_0x23e3ab);w['assert'](_0x4f13c2),_0x1a9874['set']('LIGHT'+_0x3db627,!(0x196+-0x5c3+0x42d)),_0x1a9874['set']('LIGHT'+_0x3db627+'TYPE',''+u_[_0x2e6f47]),_0x1a9874['set']('LIGHT'+_0x3db627+'SHADOWTYPE',''+_0x4f13c2['name']),_0x1a9874['set']('LIGHT'+_0x3db627+'SHAPE',''+Fw[_0x551701]),_0x1a9874['set']('LIGHT'+_0x3db627+'FALLOFF',''+Nw[_0x42d292['_falloffMo'+'de']]),_0x42d292['affectSpec'+'ularity']&&_0x1a9874['set']('LIGHT'+_0x3db627+('AFFECT_SPE'+'CULARITY'),!(0x91*-0x29+-0x13e6+0x2b1f*0x1)),_0x42d292['_cookie']&&(_0x2e6f47===Ze&&!_0x42d292['_cookie']['_cubemap']||_0x2e6f47===Ke&&_0x42d292['_cookie']['_cubemap'])&&(_0x1a9874['set']('LIGHT'+_0x3db627+'COOKIE',!(-0x1710+-0x161+0x1*0x1871)),_0x1a9874['set']('{LIGHT'+_0x3db627+('COOKIE_CHA'+'NNEL}'),_0x42d292['_cookieCha'+'nnel']),_0x2e6f47===Ze&&(_0x42d292['_cookieTra'+'nsform']&&_0x1a9874['set']('LIGHT'+_0x3db627+('COOKIE_TRA'+'NSFORM'),!(-0xd89+-0xb51*-0x3+-0x146a)),_0x42d292['_cookieFal'+'loff']&&_0x1a9874['set']('LIGHT'+_0x3db627+('COOKIE_FAL'+'LOFF'),!(-0x270e+0x1ccf+-0x1*-0xa3f)))),_0xa87a44&&(_0x1a9874['set']('LIGHT'+_0x3db627+'CASTSHADOW',!(0x9d*0x3d+0x56*-0x61+0x41*-0x13)),_0x4f13c2['pcf']&&_0x1a9874['set']('LIGHT'+_0x3db627+'SHADOW_PCF',!(0xf94+-0x124a*0x1+0x15b*0x2)),_0x42d292['_normalOff'+'setBias']&&!_0x42d292['_isVsm']&&_0x1a9874['set']('LIGHT'+_0x3db627+('_SHADOW_SA'+'MPLE_NORMA'+'L_OFFSET'),!(-0x1*0x1fae+-0x2416*0x1+0x43c4)),_0x2e6f47===ve&&(_0x1a9874['set']('LIGHT'+_0x3db627+('_SHADOW_SA'+'MPLE_ORTHO'),!(-0x232a+0xbf*0x17+0x1*0x1201)),_0x42d292['cascadeBle'+'nd']>-0x7*0x164+0x1578+-0x1*0xbbc&&_0x1a9874['set']('LIGHT'+_0x3db627+('_SHADOW_CA'+'SCADE_BLEN'+'D'),!(0x600*-0x5+0x76c+0xa*0x242)),_0x42d292['numCascade'+'s']>0xa*0x1f9+0x1*-0x16fd+0x344&&_0x1a9874['set']('LIGHT'+_0x3db627+('_SHADOW_CA'+'SCADES'),!(0x1*0xef3+-0x23*0x3d+-0x69c))),(_0x4f13c2['pcf']||_0x4f13c2['pcss']||this['device']['isWebGPU'])&&_0x1a9874['set']('LIGHT'+_0x3db627+('_SHADOW_SA'+'MPLE_SOURC'+'E_ZBUFFER'),!(-0x1*-0xe3b+0x1074*0x1+0x623*-0x5)),_0x2e6f47===Ke&&_0x1a9874['set']('LIGHT'+_0x3db627+('_SHADOW_SA'+'MPLE_POINT'),!(-0x1900+0x8*-0x23b+0x55b*0x8))),_0xa87a44&&(_0x1a9874['set']('SHADOW_KIN'+'D_'+_0x4f13c2['kind'],!(-0x2297+-0x37+0x22ce)),_0x2e6f47===ve&&_0x1a9874['set']('SHADOW_DIR'+'ECTIONAL',!(0x7b8+-0x18f0+0x1138)));}}['prepareFor'+'wardPass'](_0x5e0993){const {options:_0x4e481c}=this,_0x1272a1=_0x4e481c['clusteredL'+'ightingEna'+'bled']&&_0x4e481c['clusteredL'+'ightingAre'+'aLightsEna'+'bled']||_0x4e481c['lights']['some'](_0x4d0326=>_0x4d0326['_shape']&&_0x4d0326['_shape']!==Ys),_0x16f440=!_0x4e481c['lightMapEn'+'abled']||_0x4e481c['lightMapWi'+'thoutAmbie'+'nt'],_0x1216b2=this['needsNorma'+'l']&&(_0x4e481c['useNormals']||_0x4e481c['useClearCo'+'atNormals']||_0x4e481c['enableGGXS'+'pecular']&&!_0x4e481c['useHeights']);_0x4e481c['useSpecula'+'r']&&(this['fDefineSet'](!(0x5a4+0x1f5f+-0x2503),'LIT_SPECUL'+'AR'),this['fDefineSet'](this['reflection'+'s'],'LIT_REFLEC'+'TIONS'),this['fDefineSet'](_0x4e481c['useClearCo'+'at'],'LIT_CLEARC'+'OAT'),this['fDefineSet'](_0x4e481c['fresnelMod'+'el']>-0x2b*-0xb3+0x1*-0x159b+0x72*-0x13,'LIT_SPECUL'+'AR_FRESNEL'),this['fDefineSet'](_0x4e481c['useSheen'],'LIT_SHEEN'),this['fDefineSet'](_0x4e481c['useIridesc'+'ence'],'LIT_IRIDES'+'CENCE')),this['fDefineSet'](this['lighting']&&_0x4e481c['useSpecula'+'r']||this['reflection'+'s'],'LIT_SPECUL'+'AR_OR_REFL'+'ECTION'),this['fDefineSet'](this['needsScene'+'Color'],'LIT_SCENE_'+'COLOR'),this['fDefineSet'](this['needsScree'+'nSize'],'LIT_SCREEN'+'_SIZE'),this['fDefineSet'](this['needsTrans'+'forms'],'LIT_TRANSF'+'ORMS'),this['fDefineSet'](this['needsNorma'+'l'],'LIT_NEEDS_'+'NORMAL'),this['fDefineSet'](this['lighting'],'LIT_LIGHTI'+'NG'),this['fDefineSet'](_0x4e481c['useMetalne'+'ss'],'LIT_METALN'+'ESS'),this['fDefineSet'](_0x4e481c['enableGGXS'+'pecular'],'LIT_GGX_SP'+'ECULAR'),this['fDefineSet'](_0x4e481c['useSpecula'+'rityFactor'],'LIT_SPECUL'+'ARITY_FACT'+'OR'),this['fDefineSet'](_0x4e481c['useCubeMap'+'Rotation'],'CUBEMAP_RO'+'TATION'),this['fDefineSet'](_0x4e481c['occludeSpe'+'cularFloat'],'LIT_OCCLUD'+'E_SPECULAR'+'_FLOAT'),this['fDefineSet'](_0x4e481c['separateAm'+'bient'],'LIT_SEPARA'+'TE_AMBIENT'),this['fDefineSet'](_0x4e481c['twoSidedLi'+'ghting'],'LIT_TWO_SI'+'DED_LIGHTI'+'NG'),this['fDefineSet'](_0x4e481c['lightMapEn'+'abled'],'LIT_LIGHTM'+'AP'),this['fDefineSet'](_0x4e481c['dirLightMa'+'pEnabled'],'LIT_DIR_LI'+'GHTMAP'),this['fDefineSet'](_0x4e481c['skyboxInte'+'nsity']>0x1226+0x31*-0x2b+-0x9eb*0x1,'LIT_SKYBOX'+'_INTENSITY'),this['fDefineSet'](_0x4e481c['clusteredL'+'ightingSha'+'dowsEnable'+'d'],'LIT_CLUSTE'+'RED_SHADOW'+'S'),this['fDefineSet'](_0x4e481c['clusteredL'+'ightingAre'+'aLightsEna'+'bled'],'LIT_CLUSTE'+'RED_AREA_L'+'IGHTS'),this['fDefineSet'](_0x1216b2,'LIT_TBN'),this['fDefineSet'](_0x16f440,'LIT_ADD_AM'+'BIENT'),this['fDefineSet'](_0x4e481c['hasTangent'+'s'],'LIT_TANGEN'+'TS'),this['fDefineSet'](_0x4e481c['useNormals'],'LIT_USE_NO'+'RMALS'),this['fDefineSet'](_0x4e481c['useClearCo'+'atNormals'],'LIT_USE_CL'+'EARCOAT_NO'+'RMALS'),this['fDefineSet'](_0x4e481c['useRefract'+'ion'],'LIT_REFRAC'+'TION'),this['fDefineSet'](_0x4e481c['useDynamic'+'Refraction'],'LIT_DYNAMI'+'C_REFRACTI'+'ON'),this['fDefineSet'](_0x4e481c['dispersion'],'LIT_DISPER'+'SION'),this['fDefineSet'](_0x4e481c['useHeights'],'LIT_HEIGHT'+'S'),this['fDefineSet'](_0x4e481c['opacityFad'+'esSpecular'],'LIT_OPACIT'+'Y_FADES_SP'+'ECULAR'),this['fDefineSet'](_0x4e481c['alphaToCov'+'erage'],'LIT_ALPHA_'+'TO_COVERAG'+'E'),this['fDefineSet'](_0x4e481c['alphaTest'],'LIT_ALPHA_'+'TEST'),this['fDefineSet'](_0x4e481c['useMsdf'],'LIT_MSDF'),this['fDefineSet'](_0x4e481c['ssao'],'LIT_SSAO'),this['fDefineSet'](_0x4e481c['useAo'],'LIT_AO'),this['fDefineSet'](_0x4e481c['occludeDir'+'ect'],'LIT_OCCLUD'+'E_DIRECT'),this['fDefineSet'](_0x4e481c['msdfTextAt'+'tribute'],'LIT_MSDF_T'+'EXT_ATTRIB'+'UTE'),this['fDefineSet'](_0x4e481c['diffuseMap'+'Enabled'],'LIT_DIFFUS'+'E_MAP'),this['fDefineSet'](_0x4e481c['shadowCatc'+'her'],'LIT_SHADOW'+'_CATCHER'),this['fDefineSet'](!(0x44d+0x1*-0x1ae9+0x169c),'LIT_FRESNE'+'L_MODEL',Rw[_0x4e481c['fresnelMod'+'el']]),this['fDefineSet'](!(-0x3*-0x265+0x19a4+-0x1*0x20d3),'LIT_NONE_S'+'LICE_MODE',qw[_0x4e481c['nineSliced'+'Mode']]),this['fDefineSet'](!(0x7*0xa2+-0x831+0x3c3),'LIT_BLEND_'+'TYPE',Yy[_0x4e481c['blendType']]),this['fDefineSet'](!(-0x2*-0x74f+-0x26bf+0x1821),'LIT_CUBEMA'+'P_PROJECTI'+'ON',Gw[_0x4e481c['cubeMapPro'+'jection']]),this['fDefineSet'](!(0x7*0xcf+-0x7*-0x101+0xcb*-0x10),'LIT_OCCLUD'+'E_SPECULAR',Ww[_0x4e481c['occludeSpe'+'cular']]),this['fDefineSet'](!(0x7*0x55b+0x166f+0x1*-0x3bec),'LIT_REFLEC'+'TION_SOURC'+'E',$w[_0x4e481c['reflection'+'Source']]),this['fDefineSet'](!(0x7*-0x137+-0x6d*-0x1d+-0x3d8),'LIT_AMBIEN'+'T_SOURCE',Xw[_0x4e481c['ambientSou'+'rce']]),this['fDefineSet'](!(-0x6*-0x120+0x2*-0x8ad+0xa9a),'{lightingU'+'v}',_0x5e0993??''),this['fDefineSet'](!(0xa*0x1e1+-0x3*0x6d+-0x1183*0x1),'{reflectio'+'nDecode}',Tr['decodeFunc'](_0x4e481c['reflection'+'Encoding'])),this['fDefineSet'](!(-0xb94+-0x2fa*-0xb+0x152a*-0x1),'{reflectio'+'nCubemapDe'+'code}',Tr['decodeFunc'](_0x4e481c['reflection'+'CubemapEnc'+'oding'])),this['fDefineSet'](!(-0x1ea7+0x176a+0x73d),'{ambientDe'+'code}',Tr['decodeFunc'](_0x4e481c['ambientEnc'+'oding'])),this['_setupLigh'+'tingDefine'+'s'](_0x1272a1,_0x4e481c['clusteredL'+'ightingEna'+'bled']);}['prepareSha'+'dowPass'](){const {options:_0x38fc85}=this,_0x29f91d=this['shaderPass'+'Info']['lightType'],_0x42caae=this['shaderPass'+'Info']['shadowType'],_0x8b1598=qi['get'](_0x42caae);w['assert'](_0x8b1598);const _0x306a36=_0x29f91d===ve||!_0x8b1598['vsm']&&_0x29f91d===Ze;this['fDefineSet'](_0x306a36,'PERSPECTIV'+'E_DEPTH'),this['fDefineSet'](!(-0x778+-0xdc9+-0x1*-0x1541),'LIGHT_TYPE',''+u_[_0x29f91d]),this['fDefineSet'](!(-0x1f91+0x2003+-0x72),'SHADOW_TYP'+'E',''+_0x8b1598['name']),this['fDefineSet'](_0x38fc85['alphaTest'],'LIT_ALPHA_'+'TEST');}['generateFr'+'agmentShad'+'er'](_0x51a52e,_0x4908be,_0x3a18c5){const _0x3209e7=this['options'];this['includes']['set']('frontendDe'+'clPS',_0x51a52e??''),this['includes']['set']('frontendCo'+'dePS',_0x4908be??''),_0x3209e7['pass']===Zn||_0x3209e7['pass']===Rl||(this['shadowPass']?this['prepareSha'+'dowPass']():this['prepareFor'+'wardPass'](_0x3a18c5)),this['fshader']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22litMain'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20';}}class wv{constructor(){h(this,'hasTangent'+'s',!(-0xc4b+0x1384+-0x738)),h(this,'shaderChun'+'ks',null),h(this,'pass',-0x2*-0xc1a+0x67*0x49+0x5*-0xab7),h(this,'alphaTest',!(-0x653*-0x3+0x12b*-0x15+0x58f)),h(this,'blendType',Cs),h(this,'separateAm'+'bient',!(0xb*0x28f+0x4*0x555+-0x3178)),h(this,'screenSpac'+'e',!(0x25e0+-0x1d*0xe4+-0xc0b)),h(this,'skin',!(0x1*-0x1576+0x166f*0x1+-0xf8)),h(this,'batch',!(0x9*-0x75+0x2239*-0x1+0x1*0x2657)),h(this,'useInstanc'+'ing',!(-0x1c88+0x576+0x1713)),h(this,'useMorphPo'+'sition',!(0x254*0xd+0x457*0x4+0xa7*-0x49)),h(this,'useMorphNo'+'rmal',!(0x13c8+-0x1*0xb4c+-0xa7*0xd)),h(this,'useMorphTe'+'xtureBased'+'Int',!(0x7b*0x1f+0x1650+-0x2534)),h(this,'nineSliced'+'Mode',0x1*-0xf2f+0x1541*-0x1+0x2470),h(this,'clusteredL'+'ightingEna'+'bled',!(0x1357+0xe5*-0x2+-0x1*0x118d)),h(this,'clusteredL'+'ightingCoo'+'kiesEnable'+'d',!(0x1c57+0x14c8+-0x188f*0x2)),h(this,'clusteredL'+'ightingSha'+'dowsEnable'+'d',!(0x1398+-0x21*0xf5+0xbfe)),h(this,'clusteredL'+'ightingSha'+'dowType',-0x1524+-0x305*0xb+0x365b),h(this,'clusteredL'+'ightingAre'+'aLightsEna'+'bled',!(0x3*0x2b5+-0x3*0x6fb+0xcd3)),h(this,'vertexColo'+'rs',!(0x44c+-0x859+0x40e)),h(this,'lightMapEn'+'abled',!(0x16*-0x1+0x993+-0x97c)),h(this,'dirLightMa'+'pEnabled',!(-0x1c5b+-0x3*0x3a9+0x2757)),h(this,'useHeights',!(0xf5+0x1edb+0x1df*-0x11)),h(this,'useNormals',!(-0xf4e+-0x1*0x216d+0x185e*0x2)),h(this,'useClearCo'+'atNormals',!(-0x29a*-0xc+-0x5e*0x61+-0x17*-0x31)),h(this,'useAo',!(-0x1cb4+0x1f07+0x6*-0x63)),h(this,'diffuseMap'+'Enabled',!(-0x10cd+0x89*0x10+-0x41f*-0x2)),h(this,'pixelSnap',!(0x126a+-0x5c*-0x53+-0x303d)),h(this,'ambientSH',!(0x9ed*-0x1+-0x2440+0x2e2e)),h(this,'ssao',!(0x232b+-0x24b1+-0x1*-0x187)),h(this,'twoSidedLi'+'ghting',!(0xb7*-0x18+0x8c6+0x863)),h(this,'occludeDir'+'ect',!(-0xa2b+0x7cd*-0x2+0x19c6)),h(this,'occludeSpe'+'cular',0x23b9+0xb61+-0x2f1a*0x1),h(this,'occludeSpe'+'cularFloat',!(0x5b6+-0x1b7c+0x15c7)),h(this,'useMsdf',!(0x1ee6+-0x1fc1+0x2*0x6e)),h(this,'msdfTextAt'+'tribute',!(0x5*0x247+0x9*-0x371+-0x1397*-0x1)),h(this,'alphaToCov'+'erage',!(0x1*0xd63+-0x10*-0x1f8+0x2ce2*-0x1)),h(this,'opacityFad'+'esSpecular',!(-0x679*-0x2+0x2567+-0x3258)),h(this,'opacityDit'+'her',Sa),h(this,'opacitySha'+'dowDither',Sa),h(this,'cubeMapPro'+'jection',-0x14e5+-0x35a*0x4+0x224d),h(this,'useSpecula'+'r',!(-0x1a63+-0x9c3+0x2427*0x1)),h(this,'useSpecula'+'rityFactor',!(-0x2197*0x1+-0x2056+0x1d*0x246)),h(this,'enableGGXS'+'pecular',!(-0x5cb*-0x1+0x37c*0x9+-0x2526)),h(this,'fresnelMod'+'el',-0x18f7+0x2*0x978+-0x1*-0x607),h(this,'useRefract'+'ion',!(-0xa55+-0x6*0x277+0x1920)),h(this,'useClearCo'+'at',!(-0x11e4+0x17*-0x146+0x2f2f)),h(this,'useSheen',!(0xd*0x2c5+0x6c6+0x32*-0xdb)),h(this,'useIridesc'+'ence',!(0x267c+0x136d*-0x1+-0x130e)),h(this,'useMetalne'+'ss',!(0x1d25+-0x3*-0x1be+-0x6a*0x53)),h(this,'useDynamic'+'Refraction',!(-0x17*-0x6c+0x471*-0x2+-0xd1)),h(this,'dispersion',!(0x1858+0x18*-0x13d+-0x1cb*-0x3)),h(this,'fog',Kn),h(this,'gamma',Ll),h(this,'toneMap',-(0x1fd2+0x653*0x1+-0x2624)),h(this,'reflection'+'Source',vr),h(this,'reflection'+'Encoding',null),h(this,'reflection'+'CubemapEnc'+'oding',null),h(this,'ambientSou'+'rce','constant'),h(this,'ambientEnc'+'oding',null),h(this,'skyboxInte'+'nsity',-0x1*-0x7a7+-0x1*0xa1f+0x1*0x279),h(this,'useCubeMap'+'Rotation',!(0x226e+0x1*-0x17f5+-0xa78)),h(this,'lightMapWi'+'thoutAmbie'+'nt',!(0x1*-0x63d+-0xc*0x144+0x1*0x156e)),h(this,'lights',[]),h(this,'noShadow',!(-0x1546+0x52*-0x73+0x39*0x105)),h(this,'lightMaskD'+'ynamic',0x1*-0x6b1+-0x1*-0x825+-0x174),h(this,'userAttrib'+'utes',{}),h(this,'linearDept'+'h',!(-0x335+0x1232*0x1+0x1c*-0x89)),h(this,'shadowCatc'+'her',!(-0x2*0x65b+0x1d71+-0x1*0x10ba));}}class dl{constructor(){h(this,'defines',new Map()),h(this,'forceUv1',!(-0xc59+-0x180d+-0x1*-0x2467)),h(this,'specularTi'+'nt',!(-0x1af7+-0x1*0x3ca+-0x1f*-0xfe)),h(this,'metalnessT'+'int',!(0xc1c+0x175c+-0x2377)),h(this,'glossTint',!(-0x3be+-0x111e+-0x2fb*-0x7)),h(this,'emissiveEn'+'coding','linear'),h(this,'lightMapEn'+'coding','linear'),h(this,'packedNorm'+'al',!(0x1*-0xb18+0x445*0x1+0x5c*0x13)),h(this,'normalDeta'+'ilPackedNo'+'rmal',!(0x25a4+-0x3a2+-0x2201)),h(this,'clearCoatP'+'ackedNorma'+'l',!(0x3*0xa0c+-0x1732*0x1+-0x6f1)),h(this,'glossInver'+'t',!(-0x1c1b*-0x1+0x707+-0x2321)),h(this,'sheenGloss'+'Invert',!(-0x2*0xb2e+0x110f+0xc2*0x7)),h(this,'clearCoatG'+'lossInvert',!(-0xc74+-0x18ec+-0x7*-0x557)),h(this,'useAO',!(-0xf66+0x468+0x233*0x5)),h(this,'litOptions',new wv());}get['pass'](){return this['litOptions']['pass'];}}const Ev={'generateKey'(_0x431004){return'lit'+Object['keys'](_0x431004)['sort']()['map'](_0x5e005a=>{var _0x5c2e6e;return _0x5e005a==='shaderChun'+'ks'?((_0x5c2e6e=_0x431004['shaderChun'+'ks'])==null?void(-0x12*-0x1df+0x790+-0x293e*0x1):_0x5c2e6e['key'])??'':_0x5e005a==='lights'?Ev['generateLi'+'ghtsKey'](_0x431004):_0x5e005a+_0x431004[_0x5e005a];})['join']('\x0a');},'generateLightsKey'(_0x562161){return'lights:'+_0x562161['lights']['map'](_0xbe1f55=>!_0x562161['clusteredL'+'ightingEna'+'bled']||_0xbe1f55['_type']===ve?_0xbe1f55['key']+',':'')['join']('');}},bn=[],Qd=_0xbcfbaa=>Object['keys'](_0xbcfbaa)['filter'](_0x56de7b=>_0x56de7b!=='litOptions')['sort']();class fb extends ya{constructor(){super(...arguments),h(this,'optionsCon'+'text',new dl()),h(this,'optionsCon'+'textMin',new dl());}['generateKe'+'y'](_0xa87bce){let _0x49d8e6;return _0xa87bce===this['optionsCon'+'textMin']?(this['propsMin']||(this['propsMin']=Qd(_0xa87bce)),_0x49d8e6=this['propsMin']):_0xa87bce===this['optionsCon'+'text']?(this['props']||(this['props']=Qd(_0xa87bce)),_0x49d8e6=this['props']):_0x49d8e6=Qd(_0xa87bce),'standard:\x0a'+ya['definesHas'+'h'](_0xa87bce['defines'])+'\x0a'+_0x49d8e6['map'](_0x291979=>_0x291979+_0xa87bce[_0x291979])['join']('\x0a')+Ev['generateKe'+'y'](_0xa87bce['litOptions']);}['_getUvSour'+'ceExpressi'+'on'](_0x3f8d29,_0xc2cb67,_0x530409){const _0x5ae672=_0x530409[_0x3f8d29],_0xec5bf7=_0x530409[_0xc2cb67],_0x1fde51=_0x530409['litOptions']['pass']===Aa;let _0x5100a1;return _0x1fde51&&_0x530409['litOptions']['nineSliced'+'Mode']===Pt||_0x1fde51&&_0x530409['litOptions']['nineSliced'+'Mode']===Mt?_0x5100a1='nineSliced'+'Uv':(_0x5ae672===-0x1eb*-0x3+0x685*-0x4+-0x1453*-0x1?_0x5100a1='vUv'+_0xec5bf7:_0x5100a1='vUV'+_0xec5bf7+'_'+_0x5ae672,_0x530409['heightMap']&&_0x3f8d29!=='heightMapT'+'ransform'&&(_0x5100a1+='\x20+\x20dUvOffs'+'et')),_0x5100a1;}['_validateM'+'apChunk'](_0x19a408,_0x1a0aee,_0x521b1c){w['call'](()=>{const _0x3dee37=_0x521b1c['get'](_0x1a0aee)['replace'](/\/\*[\s\S]*?\*\/|([^\\:]|^)\/\/.*$/gm,'$1'),_0x525fea=[],_0x4f2ec6=(_0x33e11a,_0x56960d)=>{_0x3dee37['includes'](_0x33e11a)&&_0x525fea['push']('\x20\x20'+_0x33e11a+'\x20->\x20'+_0x56960d);};[['$UV','{STD_'+_0x19a408+('_TEXTURE_U'+'V}')],['$CH','{STD_'+_0x19a408+('_TEXTURE_C'+'HANNEL}')],['$SAMPLER','{STD_'+_0x19a408+('_TEXTURE_N'+'AME}')],['$DECODE','{STD_'+_0x19a408+('_TEXTURE_D'+'ECODE}')],['$VC','{STD_'+_0x19a408+('_VERTEX_CH'+'ANNEL}')],['$DETAILMOD'+'E','{STD_'+_0x19a408+('_DETAILMOD'+'E}')],['unpackNorm'+'al(','{STD_'+_0x19a408+('_TEXTURE_D'+'ECODE}(')]]['forEach'](([_0x142309,_0x3b9a4a])=>_0x4f2ec6(_0x142309,_0x3b9a4a)),[['MAPFLOAT','STD_'+_0x19a408+'_CONSTANT'],['MAPCOLOR','STD_'+_0x19a408+'_CONSTANT'],['MAPVERTEX','STD_'+_0x19a408+'_VERTEX'],['MAPTEXTURE','STD_'+_0x19a408+'_TEXTURE'],['MAPINVERT','STD_'+_0x19a408+'_INVERT']]['forEach'](([_0x46f103,_0x3345d0])=>_0x4f2ec6(_0x46f103,_0x3345d0)),_0x3dee37['includes']('$texture2D'+'SAMPLE')&&_0x4f2ec6('$texture2D'+'SAMPLE','(Macro\x20no\x20'+'longer\x20sup'+'ported\x20-\x20r'+'emove/refa'+'ctor)'),_0x525fea['length']>0x20e4+0x1d0f*0x1+0x1*-0x3df3&&w['errorOnce']('Shader\x20chu'+'nk\x20'+_0x1a0aee+('\x20is\x20in\x20no\x20'+'longer\x20com'+'patible\x20fo'+'rmat.\x20Plea'+'se\x20make\x20th'+'ese\x20replac'+'ements\x20to\x20'+'bring\x20it\x20t'+'o\x20the\x20curr'+'ent\x20versio'+'n:\x0a')+_0x525fea['join']('\x0a'),{'code':_0x3dee37});});}['_addMapDef'+'ines'](_0x8fa1a8,_0x4379d1,_0x25cde7,_0x44dc86,_0x39d5e6,_0x25fc7b,_0x475c3d=null){const _0x4e55e9=_0x4379d1+'Map',_0x276679=_0x4379d1['toUpperCas'+'e'](),_0x59e6ac=_0x4e55e9+'Uv',_0x18496f=_0x4e55e9+'Identifier',_0x4837ae=_0x4e55e9+'Transform',_0x52633a=_0x4e55e9+'Channel',_0x37f99a=_0x4379d1+('VertexColo'+'rChannel'),_0x2a8a73=_0x4379d1+'Tint',_0x610cc9=_0x4379d1+('VertexColo'+'r'),_0x3078ff=_0x4379d1+'Mode',_0x506f03=_0x4379d1+'Invert',_0xa83b41=_0x44dc86[_0x2a8a73],_0x4b1161=_0x44dc86[_0x610cc9],_0x1e19e2=_0x44dc86[_0x4e55e9],_0x92653a=_0x44dc86[_0x18496f],_0x45d14e=_0x44dc86[_0x3078ff],_0x5bac9e=_0x39d5e6['get'](_0x25cde7);if(w['assert'](_0x5bac9e,'Shader\x20chu'+'nk\x20'+_0x25cde7+('\x20not\x20found'+'.')),w['call'](()=>{_0x5bac9e&&this['_validateM'+'apChunk'](_0x276679,_0x25cde7,_0x39d5e6);}),_0x1e19e2){_0x8fa1a8['set']('STD_'+_0x276679+'_TEXTURE','');const _0x5814a3=this['_getUvSour'+'ceExpressi'+'on'](_0x4837ae,_0x59e6ac,_0x44dc86);_0x8fa1a8['set']('{STD_'+_0x276679+('_TEXTURE_U'+'V}'),_0x5814a3),_0x8fa1a8['set']('{STD_'+_0x276679+('_TEXTURE_C'+'HANNEL}'),_0x44dc86[_0x52633a]);const _0x1b748a='{STD_'+_0x276679+('_TEXTURE_N'+'AME}');if(_0x5bac9e['includes'](_0x1b748a)){let _0x1802c8='texture_'+_0x4e55e9;const _0x524346=_0x25fc7b[_0x92653a];_0x524346?_0x1802c8=_0x524346:(_0x25fc7b[_0x92653a]=_0x1802c8,_0x8fa1a8['set']('STD_'+_0x276679+('_TEXTURE_A'+'LLOCATE'),'')),_0x8fa1a8['set'](_0x1b748a,_0x1802c8);}if(_0x475c3d){const _0x51b4a2=_0x44dc86[_0x52633a]==='aaa'?'passThroug'+'h':Tr['decodeFunc'](_0x475c3d);_0x8fa1a8['set']('{STD_'+_0x276679+('_TEXTURE_D'+'ECODE}'),_0x51b4a2);}}_0x4b1161&&(_0x8fa1a8['set']('STD_'+_0x276679+'_VERTEX',''),_0x8fa1a8['set']('{STD_'+_0x276679+('_VERTEX_CH'+'ANNEL}'),_0x44dc86[_0x37f99a])),_0x45d14e&&_0x8fa1a8['set']('{STD_'+_0x276679+('_DETAILMOD'+'E}'),_0x45d14e),_0xa83b41&&_0x8fa1a8['set']('STD_'+_0x276679+'_CONSTANT',''),_0x44dc86[_0x506f03]&&_0x8fa1a8['set']('STD_'+_0x276679+'_INVERT','');}['_correctCh'+'annel'](_0x4de89b,_0x468421,_0x3fa154){if(_0x3fa154[_0x4de89b]>-0x121f*0x1+-0xf1*-0xd+0x5e2){if(_0x3fa154[_0x4de89b]<_0x468421['length'])return _0x468421['substring'](-0x1*-0xae5+-0x12bd+-0x1*-0x7d8,_0x3fa154[_0x4de89b]);if(_0x3fa154[_0x4de89b]>_0x468421['length']){let _0x4e3d06=_0x468421;const _0x2ec4c8=_0x4e3d06['charAt'](_0x4e3d06['length']-(0x17*0x33+0x94e+-0xde2*0x1)),_0x52926f=_0x3fa154[_0x4de89b]-_0x4e3d06['length'];for(let _0x4f4e09=-0x1cc8+-0x2a*-0x73+-0x11a*-0x9;_0x4f4e09<_0x52926f;_0x4f4e09++)_0x4e3d06+=_0x2ec4c8;return _0x4e3d06;}return _0x468421;}}['createVert'+'exShader'](_0x199888,_0x3c7e3d){const _0x30326d=[],_0x2273ef=[],_0x2dbc66=[];for(const _0x2b8f1f in bn){const _0x59a6b4=_0x2b8f1f+'Map';if(_0x3c7e3d[_0x2b8f1f+('VertexColo'+'r')]){const _0x32ad7b=_0x2b8f1f+('VertexColo'+'rChannel');_0x3c7e3d[_0x32ad7b]=this['_correctCh'+'annel'](_0x2b8f1f,_0x3c7e3d[_0x32ad7b],bn);}if(_0x3c7e3d[_0x59a6b4]){const _0x57e513=_0x59a6b4+'Channel',_0x47992b=_0x59a6b4+'Transform',_0x5c8346=_0x59a6b4+'Uv';_0x3c7e3d[_0x5c8346]=Math['min'](_0x3c7e3d[_0x5c8346],-0x192*0x1+0x92b+-0x798),_0x3c7e3d[_0x57e513]=this['_correctCh'+'annel'](_0x2b8f1f,_0x3c7e3d[_0x57e513],bn);const _0x1c1923=_0x3c7e3d[_0x5c8346];_0x30326d[_0x1c1923]=!(-0x2044+-0x1c74+-0xf2e*-0x4),_0x2273ef[_0x1c1923]=_0x2273ef[_0x1c1923]||_0x3c7e3d[_0x59a6b4]&&!_0x3c7e3d[_0x47992b],_0x3c7e3d[_0x47992b]&&_0x2dbc66['push']({'name':_0x2b8f1f,'id':_0x3c7e3d[_0x47992b],'uv':_0x3c7e3d[_0x5c8346]});}}_0x3c7e3d['forceUv1']&&(_0x30326d[0x20*-0x1f+0x1*0x118d+-0xa*0x15e]=!(-0x1fc8+-0x1*0x21fb+0x41c3),_0x2273ef[-0x10a+-0x1338+0x1443]=_0x2273ef[-0x1*-0x315+-0x2*-0x17c+-0x60c]!==void(0x50e*0x3+0x1*0x1b83+-0x2aad)?_0x2273ef[0x24b6+0x2b*-0xdf+0xc0]:!(-0x243*0x1+0x8*0x131+-0x745)),_0x199888['generateVe'+'rtexShader'](_0x30326d,_0x2273ef,_0x2dbc66);}['prepareFra'+'gmentDefin'+'es'](_0x2c1f00,_0x473370,_0x107198){const _0x2b4600=(_0x8d9f09,_0x3a43ef,_0x4607e8='')=>{_0x8d9f09&&_0x473370['set'](_0x3a43ef,_0x4607e8);};_0x2b4600(_0x2c1f00['lightMap'],'STD_LIGHTM'+'AP',''),_0x2b4600(_0x2c1f00['lightVerte'+'xColor'],'STD_LIGHT_'+'VERTEX_COL'+'OR',''),_0x2b4600(_0x2c1f00['dirLightMa'+'p']&&_0x2c1f00['litOptions']['useSpecula'+'r'],'STD_LIGHTM'+'AP_DIR',''),_0x2b4600(_0x2c1f00['heightMap'],'STD_HEIGHT'+'_MAP',''),_0x2b4600(_0x2c1f00['useSpecula'+'rColor'],'STD_SPECUL'+'AR_COLOR',''),_0x2b4600(_0x2c1f00['aoMap']||_0x2c1f00['aoVertexCo'+'lor']||_0x2c1f00['useAO'],'STD_AO',''),_0x2b4600(!(0x1*-0x164f+-0x4d*-0x67+-0x8ac),'STD_OPACIT'+'Y_DITHER',iE[_0x107198['isForward']?_0x2c1f00['litOptions']['opacityDit'+'her']:_0x2c1f00['litOptions']['opacitySha'+'dowDither']]);}['createShad'+'erDefiniti'+'on'](_0x309c8e,_0x127445){const _0x59d517=Si['get'](_0x309c8e)['getByIndex'](_0x127445['litOptions']['pass']),_0xe9e5c6=_0x59d517['isForward'],_0x19b14d=new db(_0x309c8e,_0x127445['litOptions']);this['createVert'+'exShader'](_0x19b14d,_0x127445);const _0x2aff90={};_0x127445['litOptions']['fresnelMod'+'el']=_0x127445['litOptions']['fresnelMod'+'el']===0x1*-0x2303+-0x1885*-0x1+0xa7e?Yp:_0x127445['litOptions']['fresnelMod'+'el'];const _0x932146=_0x19b14d['fDefines'];this['prepareFra'+'gmentDefin'+'es'](_0x127445,_0x932146,_0x59d517);let _0x12a7b9='';if(_0xe9e5c6){if(_0x127445['heightMap']&&this['_addMapDef'+'ines'](_0x932146,'height','parallaxPS',_0x127445,_0x19b14d['chunks'],_0x2aff90),(_0x127445['litOptions']['blendType']!==Cs||_0x127445['litOptions']['alphaTest']||_0x127445['litOptions']['alphaToCov'+'erage']||_0x127445['litOptions']['opacityDit'+'her']!==Sa)&&this['_addMapDef'+'ines'](_0x932146,'opacity','opacityPS',_0x127445,_0x19b14d['chunks'],_0x2aff90),_0x19b14d['needsNorma'+'l']){if((_0x127445['normalMap']||_0x127445['clearCoatN'+'ormalMap'])&&!_0x127445['litOptions']['hasTangent'+'s']){const _0x486407=_0x127445['normalMap']?'normalMap':'clearCoatN'+'ormalMap';_0x12a7b9=this['_getUvSour'+'ceExpressi'+'on'](_0x486407+'Transform',_0x486407+'Uv',_0x127445);}this['_addMapDef'+'ines'](_0x932146,'normalDeta'+'il','normalMapP'+'S',_0x127445,_0x19b14d['chunks'],_0x2aff90,_0x127445['normalDeta'+'ilPackedNo'+'rmal']?'xy':'xyz'),this['_addMapDef'+'ines'](_0x932146,'normal','normalMapP'+'S',_0x127445,_0x19b14d['chunks'],_0x2aff90,_0x127445['packedNorm'+'al']?'xy':'xyz');}_0x127445['diffuseDet'+'ail']&&this['_addMapDef'+'ines'](_0x932146,'diffuseDet'+'ail','diffusePS',_0x127445,_0x19b14d['chunks'],_0x2aff90,_0x127445['diffuseDet'+'ailEncodin'+'g']),this['_addMapDef'+'ines'](_0x932146,'diffuse','diffusePS',_0x127445,_0x19b14d['chunks'],_0x2aff90,_0x127445['diffuseEnc'+'oding']),_0x127445['litOptions']['useRefract'+'ion']&&(this['_addMapDef'+'ines'](_0x932146,'refraction','transmissi'+'onPS',_0x127445,_0x19b14d['chunks'],_0x2aff90),this['_addMapDef'+'ines'](_0x932146,'thickness','thicknessP'+'S',_0x127445,_0x19b14d['chunks'],_0x2aff90)),_0x127445['litOptions']['useIridesc'+'ence']&&(this['_addMapDef'+'ines'](_0x932146,'iridescenc'+'e','iridescenc'+'ePS',_0x127445,_0x19b14d['chunks'],_0x2aff90),this['_addMapDef'+'ines'](_0x932146,'iridescenc'+'eThickness','iridescenc'+'eThickness'+'PS',_0x127445,_0x19b14d['chunks'],_0x2aff90)),(_0x19b14d['lighting']&&_0x127445['litOptions']['useSpecula'+'r']||_0x19b14d['reflection'+'s'])&&(_0x127445['litOptions']['useSheen']&&(this['_addMapDef'+'ines'](_0x932146,'sheen','sheenPS',_0x127445,_0x19b14d['chunks'],_0x2aff90,_0x127445['sheenEncod'+'ing']),this['_addMapDef'+'ines'](_0x932146,'sheenGloss','sheenGloss'+'PS',_0x127445,_0x19b14d['chunks'],_0x2aff90)),_0x127445['litOptions']['useMetalne'+'ss']&&(this['_addMapDef'+'ines'](_0x932146,'metalness','metalnessP'+'S',_0x127445,_0x19b14d['chunks'],_0x2aff90),this['_addMapDef'+'ines'](_0x932146,'ior','iorPS',_0x127445,_0x19b14d['chunks'],_0x2aff90)),_0x127445['litOptions']['useSpecula'+'rityFactor']&&this['_addMapDef'+'ines'](_0x932146,'specularit'+'yFactor','specularit'+'yFactorPS',_0x127445,_0x19b14d['chunks'],_0x2aff90),_0x127445['useSpecula'+'rColor']&&this['_addMapDef'+'ines'](_0x932146,'specular','specularPS',_0x127445,_0x19b14d['chunks'],_0x2aff90,_0x127445['specularEn'+'coding']),this['_addMapDef'+'ines'](_0x932146,'gloss','glossPS',_0x127445,_0x19b14d['chunks'],_0x2aff90)),_0x127445['aoDetail']&&this['_addMapDef'+'ines'](_0x932146,'aoDetail','aoPS',_0x127445,_0x19b14d['chunks'],_0x2aff90),(_0x127445['aoMap']||_0x127445['aoVertexCo'+'lor']||_0x127445['useAO'])&&this['_addMapDef'+'ines'](_0x932146,'ao','aoPS',_0x127445,_0x19b14d['chunks'],_0x2aff90),this['_addMapDef'+'ines'](_0x932146,'emissive','emissivePS',_0x127445,_0x19b14d['chunks'],_0x2aff90,_0x127445['emissiveEn'+'coding']),_0x127445['litOptions']['useClearCo'+'at']&&(this['_addMapDef'+'ines'](_0x932146,'clearCoat','clearCoatP'+'S',_0x127445,_0x19b14d['chunks'],_0x2aff90),this['_addMapDef'+'ines'](_0x932146,'clearCoatG'+'loss','clearCoatG'+'lossPS',_0x127445,_0x19b14d['chunks'],_0x2aff90),this['_addMapDef'+'ines'](_0x932146,'clearCoatN'+'ormal','clearCoatN'+'ormalPS',_0x127445,_0x19b14d['chunks'],_0x2aff90,_0x127445['clearCoatP'+'ackedNorma'+'l']?'xy':'xyz')),_0x127445['litOptions']['enableGGXS'+'pecular']&&this['_addMapDef'+'ines'](_0x932146,'anisotropy','anisotropy'+'PS',_0x127445,_0x19b14d['chunks'],_0x2aff90),(_0x127445['lightMap']||_0x127445['lightVerte'+'xColor'])&&this['_addMapDef'+'ines'](_0x932146,'light','lightmapPS',_0x127445,_0x19b14d['chunks'],_0x2aff90,_0x127445['lightMapEn'+'coding']);}else{const _0x366d37=_0x127445['litOptions']['opacitySha'+'dowDither'];(_0x127445['litOptions']['alphaTest']||_0x366d37)&&this['_addMapDef'+'ines'](_0x932146,'opacity','opacityPS',_0x127445,_0x19b14d['chunks'],_0x2aff90);}_0x19b14d['generateFr'+'agmentShad'+'er'](_0x19b14d['chunks']['get']('stdDeclara'+'tionPS'),_0x19b14d['chunks']['get']('stdFrontEn'+'dPS'),_0x12a7b9);const _0x5e2509=bh['merge'](_0x19b14d['chunks'],_0x19b14d['includes']),_0x78c499=_0x19b14d['vDefines'];_0x127445['defines']['forEach']((_0x29a01a,_0x42c4b6)=>_0x78c499['set'](_0x42c4b6,_0x29a01a)),_0x127445['defines']['forEach']((_0xf1fc25,_0x2fb797)=>_0x932146['set'](_0x2fb797,_0xf1fc25));const _0x569003=Jt['createDefi'+'nition'](_0x309c8e,{'name':'StandardSh'+'ader','attributes':_0x19b14d['attributes'],'shaderLanguage':_0x19b14d['shaderLang'+'uage'],'vertexCode':_0x19b14d['vshader'],'fragmentCode':_0x19b14d['fshader'],'vertexIncludes':_0x5e2509,'fragmentIncludes':_0x5e2509,'fragmentDefines':_0x932146,'vertexDefines':_0x78c499});return _0x19b14d['shaderPass'+'Info']['isForward']&&(_0x569003['tag']=Sy),_0x569003;}}const Jd=new fb(),ss=[];ss[Gp]={'src':Ft,'dst':Ft,'op':Tx},ss[Cs]={'src':Ft,'dst':rp,'op':fs},ss[Zs]={'src':jh,'dst':Yh,'op':fs,'alphaSrc':Ft},ss[Gn]={'src':Ft,'dst':Yh,'op':fs},ss[Hp]={'src':Ft,'dst':Ft,'op':fs},ss[Ed]={'src':jh,'dst':Ft,'op':fs},ss[$p]={'src':JS,'dst':vx,'op':fs},ss[Xp]={'src':xx,'dst':Ft,'op':fs},ss[Wp]={'src':JS,'dst':rp,'op':fs},ss[qp]={'src':Ft,'dst':Ft,'op':wx},ss[jp]={'src':Ft,'dst':Ft,'op':Ex};let ub=-0x1ab+0x6*0x579+-0x1f2b;class tr{constructor(){h(this,'meshInstan'+'ces',[]),h(this,'name','Untitled'),h(this,'userId',''),h(this,'id',ub++),h(this,'variants',new Map()),h(this,'defines',new Map()),h(this,'_definesDi'+'rty',!(-0x11b*0x19+-0xdb*-0x15+-0x9ad*-0x1)),h(this,'parameters',{}),h(this,'alphaTest',-0x5a*-0x36+0x1744+0x1a*-0x1a0),h(this,'alphaToCov'+'erage',!(-0x1133+-0x1eb2+0x2fe6*0x1)),h(this,'_blendStat'+'e',new pt()),h(this,'_depthStat'+'e',new Yt()),h(this,'cull',pa),h(this,'stencilFro'+'nt',null),h(this,'stencilBac'+'k',null),h(this,'_shaderChu'+'nks',null),h(this,'_oldChunks',{}),h(this,'_dirtyShad'+'er',!(-0xad*0x1f+-0xce9+0x21dc)),h(this,'_shaderVer'+'sion',-0x2267+-0xd57+-0x61*-0x7e),h(this,'_scene',null),h(this,'dirty',!(0x1*-0x1607+-0x1bf7+-0x1*-0x31fe)),new.target===tr&&w['error']('Material\x20c'+'lass\x20canno'+'t\x20be\x20insta'+'ntiated,\x20u'+'se\x20ShaderM'+'aterial\x20in'+'stead');}get['hasShaderC'+'hunks'](){return this['_shaderChu'+'nks']!=null;}get['shaderChun'+'ks'](){return this['_shaderChu'+'nks']||(this['_shaderChu'+'nks']=new Pe()),this['_shaderChu'+'nks'];}['getShaderC'+'hunks'](_0x412157=Fe){const _0x36cbd1=this['shaderChun'+'ks'];return _0x412157===Fe?_0x36cbd1['glsl']:_0x36cbd1['wgsl'];}set['shaderChun'+'ksVersion'](_0x44f15f){this['shaderChun'+'ks']['version']=_0x44f15f;}get['shaderChun'+'ksVersion'](){return this['shaderChun'+'ks']['version'];}set['chunks'](_0x4df140){w['deprecated']('Material.c'+'hunks\x20has\x20'+'been\x20remov'+'ed,\x20please'+'\x20use\x20Mater'+'ial.getSha'+'derChunks\x20'+'instead.\x20F'+'or\x20example'+':\x20material'+'.getShader'+'Chunks(pc.'+'SHADERLANG'+'UAGE_GLSL)'+'.set(\x22chun'+'kName\x22,\x20\x22c'+'hunkCode\x22)'),this['_oldChunks']=_0x4df140;}get['chunks'](){return w['deprecated']('Material.c'+'hunks\x20has\x20'+'been\x20remov'+'ed,\x20please'+'\x20use\x20Mater'+'ial.getSha'+'derChunks\x20'+'instead.\x20F'+'or\x20example'+':\x20material'+'.getShader'+'Chunks(pc.'+'SHADERLANG'+'UAGE_GLSL)'+'.set(\x22chun'+'kName\x22,\x20\x22c'+'hunkCode\x22)'),Object['assign'](this['_oldChunks'],Object['fromEntrie'+'s'](this['shaderChun'+'ks']['glsl'])),this['_oldChunks'];}set['depthBias'](_0x1ed2d7){this['_depthStat'+'e']['depthBias']=_0x1ed2d7;}get['depthBias'](){return this['_depthStat'+'e']['depthBias'];}set['slopeDepth'+'Bias'](_0x53cef6){this['_depthStat'+'e']['depthBiasS'+'lope']=_0x53cef6;}get['slopeDepth'+'Bias'](){return this['_depthStat'+'e']['depthBiasS'+'lope'];}set['redWrite'](_0x139f41){this['_blendStat'+'e']['redWrite']=_0x139f41;}get['redWrite'](){return this['_blendStat'+'e']['redWrite'];}set['greenWrite'](_0xdd7423){this['_blendStat'+'e']['greenWrite']=_0xdd7423;}get['greenWrite'](){return this['_blendStat'+'e']['greenWrite'];}set['blueWrite'](_0x2dddc1){this['_blendStat'+'e']['blueWrite']=_0x2dddc1;}get['blueWrite'](){return this['_blendStat'+'e']['blueWrite'];}set['alphaWrite'](_0x30491e){this['_blendStat'+'e']['alphaWrite']=_0x30491e;}get['alphaWrite'](){return this['_blendStat'+'e']['alphaWrite'];}get['transparen'+'t'](){return this['_blendStat'+'e']['blend'];}['_updateTra'+'nsparency'](){const _0x2fe3b5=this['transparen'+'t'],_0x4de0fa=this['meshInstan'+'ces'];for(let _0x428cfc=0x1*0x88b+0x7bb+-0x823*0x2;_0x428cfc<_0x4de0fa['length'];_0x428cfc++)_0x4de0fa[_0x428cfc]['transparen'+'t']=_0x2fe3b5;}set['blendState'](_0x36fa03){this['_blendStat'+'e']['copy'](_0x36fa03),this['_updateTra'+'nsparency']();}get['blendState'](){return this['_blendStat'+'e'];}set['blendType'](_0xec607){const _0x302d49=ss[_0xec607];w['assert'](_0x302d49,'Unknown\x20bl'+'end\x20mode\x20'+_0xec607),this['_blendStat'+'e']['setColorBl'+'end'](_0x302d49['op'],_0x302d49['src'],_0x302d49['dst']),this['_blendStat'+'e']['setAlphaBl'+'end'](_0x302d49['alphaOp']??_0x302d49['op'],_0x302d49['alphaSrc']??_0x302d49['src'],_0x302d49['alphaDst']??_0x302d49['dst']);const _0x27e42d=_0xec607!==Cs;this['_blendStat'+'e']['blend']!==_0x27e42d&&(this['_blendStat'+'e']['blend']=_0x27e42d,this['_updateTra'+'nsparency']()),this['_updateMes'+'hInstanceK'+'eys']();}get['blendType'](){if(!this['transparen'+'t'])return Cs;const {colorOp:_0x730438,colorSrcFactor:_0x4bc659,colorDstFactor:_0x4a9585,alphaOp:_0x4d27b9,alphaSrcFactor:_0x20cd9d,alphaDstFactor:_0x301d26}=this['_blendStat'+'e'];for(let _0xb7078b=0x1e4+0x245d+-0x1*0x2641;_0xb7078b<ss['length'];_0xb7078b++){const _0x485453=ss[_0xb7078b];if(_0x485453['src']===_0x4bc659&&_0x485453['dst']===_0x4a9585&&_0x485453['op']===_0x730438&&_0x485453['src']===_0x20cd9d&&_0x485453['dst']===_0x301d26&&_0x485453['op']===_0x4d27b9)return _0xb7078b;}return Zs;}set['depthState'](_0x3bff91){this['_depthStat'+'e']['copy'](_0x3bff91);}get['depthState'](){return this['_depthStat'+'e'];}set['depthTest'](_0x933062){this['_depthStat'+'e']['test']=_0x933062;}get['depthTest'](){return this['_depthStat'+'e']['test'];}set['depthFunc'](_0x2c8ccc){this['_depthStat'+'e']['func']=_0x2c8ccc;}get['depthFunc'](){return this['_depthStat'+'e']['func'];}set['depthWrite'](_0x3a201b){this['_depthStat'+'e']['write']=_0x3a201b;}get['depthWrite'](){return this['_depthStat'+'e']['write'];}['copy'](_0x4a16f0){var _0x544d6b,_0x32ead5;this['name']=_0x4a16f0['name'],this['alphaTest']=_0x4a16f0['alphaTest'],this['alphaToCov'+'erage']=_0x4a16f0['alphaToCov'+'erage'],this['_blendStat'+'e']['copy'](_0x4a16f0['_blendStat'+'e']),this['_depthStat'+'e']['copy'](_0x4a16f0['_depthStat'+'e']),this['cull']=_0x4a16f0['cull'],this['stencilFro'+'nt']=(_0x544d6b=_0x4a16f0['stencilFro'+'nt'])==null?void(0x3b2+0x568*-0x1+0x1b6):_0x544d6b['clone'](),_0x4a16f0['stencilBac'+'k']&&(this['stencilBac'+'k']=_0x4a16f0['stencilFro'+'nt']===_0x4a16f0['stencilBac'+'k']?this['stencilFro'+'nt']:_0x4a16f0['stencilBac'+'k']['clone']()),this['clearParam'+'eters']();for(const _0x64d618 in _0x4a16f0['parameters'])_0x4a16f0['parameters']['hasOwnProp'+'erty'](_0x64d618)&&this['_setParame'+'terSimple'](_0x64d618,_0x4a16f0['parameters'][_0x64d618]['data']);return this['defines']['clear'](),_0x4a16f0['defines']['forEach']((_0x16642a,_0x4f00f8)=>this['defines']['set'](_0x4f00f8,_0x16642a)),this['_shaderChu'+'nks']=_0x4a16f0['hasShaderC'+'hunks']?new Pe():null,(_0x32ead5=this['_shaderChu'+'nks'])==null||_0x32ead5['copy'](_0x4a16f0['_shaderChu'+'nks']),this;}['clone'](){return new this['constructo'+'r']()['copy'](this);}['_updateMes'+'hInstanceK'+'eys'](){const _0x5e2f7c=this['meshInstan'+'ces'];for(let _0x2c8249=-0x97*-0x3+0x1ff0+-0x21b5;_0x2c8249<_0x5e2f7c['length'];_0x2c8249++)_0x5e2f7c[_0x2c8249]['updateKey']();}['updateUnif'+'orms'](_0x21d51f,_0x2ca30f){this['_dirtyShad'+'er']&&this['clearVaria'+'nts']();}['getShaderV'+'ariant'](_0x3fd4f6){w['assert'](!(0x59f+0xb6*-0x25+0x8*0x296),'Not\x20implem'+'ented');}['update'](){var _0x471e35,_0x2a3476;if(Object['keys'](this['_oldChunks'])['length']>0x371+-0x1*-0xc9a+-0x3*0x559){for(const [_0x1ac34c,_0x4e778e]of Object['entries'](this['_oldChunks']))this['shaderChun'+'ks']['glsl']['set'](_0x1ac34c,_0x4e778e),delete this['_oldChunks'][_0x1ac34c];}(this['_definesDi'+'rty']||(_0x471e35=this['_shaderChu'+'nks'])!=null&&_0x471e35['isDirty']())&&(this['_definesDi'+'rty']=!(-0x26+0x1*0x2345+-0x118f*0x2),(_0x2a3476=this['_shaderChu'+'nks'])==null||_0x2a3476['resetDirty'](),this['clearVaria'+'nts']()),this['dirty']=!(0x23f5+-0x1b*-0x6b+-0x2f3e);}['clearParam'+'eters'](){this['parameters']={};}['getParamet'+'ers'](){return this['parameters'];}['clearVaria'+'nts'](){this['variants']['clear']();const _0x42b3eb=this['meshInstan'+'ces'],_0x4ce47f=_0x42b3eb['length'];for(let _0x4c87d6=0x3bb+-0x650+-0x1*-0x295;_0x4c87d6<_0x4ce47f;_0x4c87d6++)_0x42b3eb[_0x4c87d6]['clearShade'+'rs']();}['getParamet'+'er'](_0x2f6261){return this['parameters'][_0x2f6261];}['_setParame'+'terSimple'](_0x5bd13b,_0x3fbb04){w['call'](()=>{_0x3fbb04===void(-0x247e+-0x242a+0x48a8)&&w['warnOnce']('Material#s'+'etParamete'+'r:\x20Attempt'+'ing\x20to\x20set'+'\x20undefined'+'\x20data\x20for\x20'+'parameter\x20'+'\x22'+_0x5bd13b+('\x22,\x20this\x20is'+'\x20likely\x20no'+'t\x20expected'+'.'),this);});const _0x25ff19=this['parameters'][_0x5bd13b];_0x25ff19?_0x25ff19['data']=_0x3fbb04:this['parameters'][_0x5bd13b]={'scopeId':null,'data':_0x3fbb04};}['setParamet'+'er'](_0x4061fe,_0x44d845){if(_0x44d845===void(0x317+0x14e5+-0x17fc)&&typeof _0x4061fe=='object'){const _0x5a547b=_0x4061fe;if(_0x5a547b['length']){for(let _0x85e1e1=0x1*0x26d8+-0x10fa+-0x15de;_0x85e1e1<_0x5a547b['length'];_0x85e1e1++)this['setParamet'+'er'](_0x5a547b[_0x85e1e1]);return;}_0x4061fe=_0x5a547b['name'],_0x44d845=_0x5a547b['value'];}this['_setParame'+'terSimple'](_0x4061fe,_0x44d845);}['deletePara'+'meter'](_0x1dc14f){this['parameters'][_0x1dc14f]&&delete this['parameters'][_0x1dc14f];}['setParamet'+'ers'](_0x4e8578,_0x47cd52){const _0x32c6ed=this['parameters'];_0x47cd52===void(-0x11a*-0x2+-0x2220+0x3*0xaa4)&&(_0x47cd52=_0x32c6ed);for(const _0x2241d2 in _0x47cd52){const _0x447ad3=_0x32c6ed[_0x2241d2];_0x447ad3&&(_0x447ad3['scopeId']||(_0x447ad3['scopeId']=_0x4e8578['scope']['resolve'](_0x2241d2)),_0x447ad3['scopeId']['setValue'](_0x447ad3['data']));}}['setDefine'](_0x39f9db,_0x14d8aa){let _0x5a11d6=!(-0x43a+-0x1e4c+0x1*0x2287);const {defines:_0x314cea}=this;_0x14d8aa!==void(0x16ad+0x53f+-0x1bec)&&_0x14d8aa!==!(0x42b+-0x2675+0x224b)?(_0x5a11d6=!_0x314cea['has'](_0x39f9db)||_0x314cea['get'](_0x39f9db)!==_0x14d8aa,_0x314cea['set'](_0x39f9db,_0x14d8aa)):(_0x5a11d6=_0x314cea['has'](_0x39f9db),_0x314cea['delete'](_0x39f9db)),this['_definesDi'+'rty']||(this['_definesDi'+'rty']=_0x5a11d6);}['getDefine'](_0x2b07d8){return this['defines']['has'](_0x2b07d8);}['destroy'](){this['variants']['clear']();for(let _0x4d3fe7=0x16*0xe0+0x23*0x111+-0x3893*0x1;_0x4d3fe7<this['meshInstan'+'ces']['length'];_0x4d3fe7++){const _0x5309b1=this['meshInstan'+'ces'][_0x4d3fe7];if(_0x5309b1['clearShade'+'rs'](),_0x5309b1['_material']=null,_0x5309b1['mesh']){const _0xca4593=Qn(_0x5309b1['mesh']['device']);this!==_0xca4593&&(_0x5309b1['material']=_0xca4593);}else w['warn']('pc.Materia'+'l:\x20MeshIns'+'tance.mesh'+'\x20is\x20null,\x20'+'default\x20ma'+'terial\x20can'+'not\x20be\x20ass'+'igned\x20to\x20t'+'he\x20MeshIns'+'tance');}this['meshInstan'+'ces']['length']=-0x2f2+-0x1ae+-0x128*-0x4;}['addMeshIns'+'tanceRef'](_0x455c0f){this['meshInstan'+'ces']['push'](_0x455c0f);}['removeMesh'+'InstanceRe'+'f'](_0x175c25){const _0x3ecc88=this['meshInstan'+'ces'],_0x3786f2=_0x3ecc88['indexOf'](_0x175c25);_0x3786f2!==-(-0x1d0c+-0xc5*0x4+0x2021)&&_0x3ecc88['splice'](_0x3786f2,0x2034+0xf50+-0x2f83);}}class Ws{static['update'](_0x1cc351,_0x2f0d93,_0x196670,_0x3dff63,_0x58eba9,_0x5526ec,_0x1664f1){Ws['updateShar'+'edOptions'](_0x1cc351,_0x2f0d93,_0x196670,_0x58eba9,_0x5526ec),Ws['updateMate'+'rialOption'+'s'](_0x1cc351,_0x2f0d93),Ws['updateEnvO'+'ptions'](_0x1cc351,_0x2f0d93,_0x196670,_0x3dff63),Ws['updateLigh'+'tingOption'+'s'](_0x1cc351,_0x2f0d93,_0x196670,_0x58eba9,_0x1664f1);}static['updateShar'+'edOptions'](_0x29f41a,_0x39502d,_0x3275a8,_0x32622f,_0x48829c){_0x29f41a['shaderChun'+'ks']=_0x39502d['shaderChun'+'ks'],_0x29f41a['pass']=_0x48829c,_0x29f41a['alphaTest']=_0x39502d['alphaTest']>0x78a+0x1*-0x1e50+-0x35*-0x6e,_0x29f41a['blendType']=_0x39502d['blendType'],_0x29f41a['screenSpac'+'e']=_0x32622f&&(_0x32622f&Eh)!==0xc2a*-0x3+0x9dd+-0x191*-0x11,_0x29f41a['skin']=_0x32622f&&(_0x32622f&nl)!==0xeab+0x17f*-0x3+0x517*-0x2,_0x29f41a['useInstanc'+'ing']=_0x32622f&&(_0x32622f&ol)!==0xa4+-0xf6+0x52,_0x29f41a['useMorphPo'+'sition']=_0x32622f&&(_0x32622f&ll)!==-0x16c8+0x1*-0x1c57+0x331f,_0x29f41a['useMorphNo'+'rmal']=_0x32622f&&(_0x32622f&cl)!==-0x18b5+0x156e+0x347,_0x29f41a['useMorphTe'+'xtureBased'+'Int']=_0x32622f&&(_0x32622f&hl)!==0x176e+-0x1a2e+-0x58*-0x8,_0x29f41a['hasTangent'+'s']=_0x32622f&&(_0x32622f&om)!==-0x6*0x47e+-0xe*0x77+0x2176,_0x29f41a['nineSliced'+'Mode']=_0x39502d['nineSliced'+'Mode']||ci,_0x39502d['useLightin'+'g']&&_0x3275a8['clusteredL'+'ightingEna'+'bled']?(_0x29f41a['clusteredL'+'ightingEna'+'bled']=!(-0x21dd*0x1+0x850+0x198d),_0x29f41a['clusteredL'+'ightingCoo'+'kiesEnable'+'d']=_0x3275a8['lighting']['cookiesEna'+'bled'],_0x29f41a['clusteredL'+'ightingSha'+'dowsEnable'+'d']=_0x3275a8['lighting']['shadowsEna'+'bled'],_0x29f41a['clusteredL'+'ightingSha'+'dowType']=_0x3275a8['lighting']['shadowType'],_0x29f41a['clusteredL'+'ightingAre'+'aLightsEna'+'bled']=_0x3275a8['lighting']['areaLights'+'Enabled']):(_0x29f41a['clusteredL'+'ightingEna'+'bled']=!(0x8b*-0x13+-0x1b47+0x23*0x113),_0x29f41a['clusteredL'+'ightingCoo'+'kiesEnable'+'d']=!(-0x1e5*-0xd+0xcc8+-0x2568),_0x29f41a['clusteredL'+'ightingSha'+'dowsEnable'+'d']=!(0x1d07+0x2b3+-0x1fb9),_0x29f41a['clusteredL'+'ightingAre'+'aLightsEna'+'bled']=!(0x1*0x21f1+0x1*-0x59b+-0x1c55));}static['updateMate'+'rialOption'+'s'](_0x486480,_0x3acd4d){_0x486480['separateAm'+'bient']=!(0x26fa+-0xc9*0x1f+-0x2*0x751),_0x486480['pixelSnap']=_0x3acd4d['pixelSnap'],_0x486480['ambientSH']=_0x3acd4d['ambientSH'],_0x486480['twoSidedLi'+'ghting']=_0x3acd4d['twoSidedLi'+'ghting'],_0x486480['occludeDir'+'ect']=_0x3acd4d['occludeDir'+'ect'],_0x486480['occludeSpe'+'cular']=_0x3acd4d['occludeSpe'+'cular'],_0x486480['occludeSpe'+'cularFloat']=_0x3acd4d['occludeSpe'+'cularInten'+'sity']!==-0x2*0x6de+0x25ae*0x1+-0x17f1,_0x486480['useMsdf']=!(-0x52*0xe+0x89*0x3f+-0x1d3a),_0x486480['msdfTextAt'+'tribute']=!(-0x1282+-0x6c9*0x4+0x1*0x2da7),_0x486480['alphaToCov'+'erage']=_0x3acd4d['alphaToCov'+'erage'],_0x486480['opacityFad'+'esSpecular']=_0x3acd4d['opacityFad'+'esSpecular'],_0x486480['opacityDit'+'her']=_0x3acd4d['opacityDit'+'her'],_0x486480['cubeMapPro'+'jection']=tm,_0x486480['useSpecula'+'r']=_0x3acd4d['hasSpecula'+'r'],_0x486480['useSpecula'+'rityFactor']=_0x3acd4d['hasSpecula'+'rityFactor'],_0x486480['enableGGXS'+'pecular']=_0x3acd4d['ggxSpecula'+'r'],_0x486480['fresnelMod'+'el']=_0x3acd4d['fresnelMod'+'el'],_0x486480['useRefract'+'ion']=_0x3acd4d['hasRefract'+'ion'],_0x486480['useClearCo'+'at']=_0x3acd4d['hasClearCo'+'at'],_0x486480['useSheen']=_0x3acd4d['hasSheen'],_0x486480['useIridesc'+'ence']=_0x3acd4d['hasIrrides'+'cence'],_0x486480['useMetalne'+'ss']=_0x3acd4d['hasMetalne'+'ss'],_0x486480['useDynamic'+'Refraction']=_0x3acd4d['dynamicRef'+'raction'],_0x486480['dispersion']=_0x3acd4d['dispersion']>-0x2263*0x1+0x2158+-0x3*-0x59,_0x486480['vertexColo'+'rs']=!(-0x697+0x1047+-0x9af),_0x486480['lightMapEn'+'abled']=_0x3acd4d['hasLightin'+'g'],_0x486480['dirLightMa'+'pEnabled']=_0x3acd4d['dirLightMa'+'p'],_0x486480['useHeights']=_0x3acd4d['hasHeights'],_0x486480['useNormals']=_0x3acd4d['hasNormals'],_0x486480['useClearCo'+'atNormals']=_0x3acd4d['hasClearCo'+'atNormals'],_0x486480['useAo']=_0x3acd4d['hasAo'],_0x486480['diffuseMap'+'Enabled']=_0x3acd4d['hasDiffuse'+'Map'];}static['updateEnvO'+'ptions'](_0x4910e1,_0xeecf1b,_0x50e07e,_0x3fe466){_0x4910e1['fog']=_0xeecf1b['useFog']?_0x3fe466['fog']:Kn,_0x4910e1['gamma']=_0x3fe466['shaderOutp'+'utGamma'],_0x4910e1['toneMap']=_0xeecf1b['useTonemap']?_0x3fe466['toneMappin'+'g']:nv,_0xeecf1b['useSkybox']&&_0x50e07e['envAtlas']&&_0x50e07e['skybox']?(_0x4910e1['reflection'+'Source']=xh,_0x4910e1['reflection'+'Encoding']=_0x50e07e['envAtlas']['encoding'],_0x4910e1['reflection'+'CubemapEnc'+'oding']=_0x50e07e['skybox']['encoding']):_0xeecf1b['useSkybox']&&_0x50e07e['envAtlas']?(_0x4910e1['reflection'+'Source']=vh,_0x4910e1['reflection'+'Encoding']=_0x50e07e['envAtlas']['encoding']):_0xeecf1b['useSkybox']&&_0x50e07e['skybox']?(_0x4910e1['reflection'+'Source']=Th,_0x4910e1['reflection'+'Encoding']=_0x50e07e['skybox']['encoding']):(_0x4910e1['reflection'+'Source']=vr,_0x4910e1['reflection'+'Encoding']=null),_0xeecf1b['ambientSH']?(_0x4910e1['ambientSou'+'rce']=im,_0x4910e1['ambientEnc'+'oding']=null):_0x4910e1['reflection'+'Source']!==vr&&_0x50e07e['envAtlas']?(_0x4910e1['ambientSou'+'rce']=rm,_0x4910e1['ambientEnc'+'oding']=_0x50e07e['envAtlas']['encoding']):(_0x4910e1['ambientSou'+'rce']=am,_0x4910e1['ambientEnc'+'oding']=null);const _0x44b0b4=_0x4910e1['reflection'+'Source']!==vr;_0x4910e1['skyboxInte'+'nsity']=_0x44b0b4,_0x4910e1['useCubeMap'+'Rotation']=_0x44b0b4&&_0x50e07e['_skyboxRot'+'ationShade'+'rInclude'];}static['updateLigh'+'tingOption'+'s'](_0x1a8d94,_0xcb36ed,_0x3a3039,_0x3ca140,_0x2cbf6c){if(_0x1a8d94['lightMapWi'+'thoutAmbie'+'nt']=!(0x1*-0x14cf+-0x5f7+0x1ac7),_0xcb36ed['useLightin'+'g']){const _0xb270f=[],_0x377790=_0x3ca140?_0x3ca140>>0x3d0*-0x4+0x2323+0x13d3*-0x1:Ss;_0x1a8d94['lightMaskD'+'ynamic']=!!(_0x377790&Ss),_0x1a8d94['lightMapWi'+'thoutAmbie'+'nt']=!(-0x1bf0+-0x135c+0x2f4d),_0x2cbf6c&&(Ws['collectLig'+'hts'](ve,_0x2cbf6c[ve],_0xb270f,_0x377790),_0x3a3039['clusteredL'+'ightingEna'+'bled']||(Ws['collectLig'+'hts'](Ke,_0x2cbf6c[Ke],_0xb270f,_0x377790),Ws['collectLig'+'hts'](Ze,_0x2cbf6c[Ze],_0xb270f,_0x377790))),_0x1a8d94['lights']=_0xb270f;}else _0x1a8d94['lights']=[];(_0x1a8d94['lights']['length']===0xa3e*0x2+0x7*0x283+-0x1*0x2611&&!_0x3a3039['clusteredL'+'ightingEna'+'bled']||(_0x3ca140&wh)!==-0x20e*0x13+0x1f8d+0x77d)&&(_0x1a8d94['noShadow']=!(0x13*0xad+0x16cf*0x1+0x3f6*-0x9));}static['collectLig'+'hts'](_0x33e0c4,_0x32e8da,_0x45ad2d,_0x6ab488){for(let _0x36bb93=0x8c6+-0x9f5*0x3+-0xb*-0x1eb;_0x36bb93<_0x32e8da['length'];_0x36bb93++){const _0x4808cf=_0x32e8da[_0x36bb93];_0x4808cf['enabled']&&_0x4808cf['mask']&_0x6ab488&&_0x45ad2d['push'](_0x4808cf);}}}const G_=(_0x489d79,_0x2d3cc9)=>{if(_0x489d79['length']!==_0x2d3cc9['length'])return!(0x11c*0x18+0x739+-0x21d8);for(let _0x14f661=-0x100f+0x373*-0x1+0x1382*0x1;_0x14f661<_0x489d79['length'];++_0x14f661)if(_0x489d79[_0x14f661]!==_0x2d3cc9[_0x14f661])return!(-0x11*0x1f6+-0x1bff+0x3d56);return!(-0x12c1+0x248d+-0x86*0x22);},pb=_0x283440=>_0x283440['r']!==0x11b1+-0x19ec+0x83c||_0x283440['g']!==-0x3*0x553+0x15bb+0x1eb*-0x3||_0x283440['b']!==0x1819*0x1+0x133d+-0x2b55*0x1,mb=_0x132855=>_0x132855['r']!==0x2*0xcf1+-0x2*-0xa12+-0x2e06||_0x132855['g']!==-0x8*-0x1da+-0x12*-0xec+-0x1f68||_0x132855['b']!==0xff2+0x461+-0x1453;class _b{constructor(){this['_mapXForms']=null;}['updateMinR'+'ef'](_0x5f40d2,_0x34adc4,_0x44b1c7,_0x5d8958,_0x4ca720,_0x2031fc){this['_updateSha'+'redOptions'](_0x5f40d2,_0x34adc4,_0x44b1c7,_0x5d8958,_0x4ca720),this['_updateMin'+'Options'](_0x5f40d2,_0x44b1c7,_0x4ca720),this['_updateUVO'+'ptions'](_0x5f40d2,_0x44b1c7,_0x5d8958,!(0x947+-0x24ac*0x1+0x1b65));}['updateRef'](_0x29b5a0,_0xf27c7b,_0x254dfd,_0x298aad,_0xd3655e,_0x217abd,_0x3886e7){this['_updateSha'+'redOptions'](_0x29b5a0,_0xf27c7b,_0x298aad,_0xd3655e,_0x217abd),this['_updateEnv'+'Options'](_0x29b5a0,_0x298aad,_0xf27c7b,_0x254dfd),this['_updateMat'+'erialOptio'+'ns'](_0x29b5a0,_0x298aad,_0xf27c7b),_0x29b5a0['litOptions']['hasTangent'+'s']=_0xd3655e&&(_0xd3655e&om)!==-0x93+-0x1c4f*0x1+-0x2*-0xe71,this['_updateLig'+'htOptions'](_0x29b5a0,_0xf27c7b,_0x298aad,_0xd3655e,_0x3886e7),this['_updateUVO'+'ptions'](_0x29b5a0,_0x298aad,_0xd3655e,!(0x1ba1+-0x14ae+-0xe*0x7f),_0x254dfd);}['_updateSha'+'redOptions'](_0x17d0d9,_0x36cbae,_0x4ff4f0,_0x2270bd,_0x409688){_0x17d0d9['forceUv1']=_0x4ff4f0['forceUv1'],_0x4ff4f0['userAttrib'+'utes']&&(_0x17d0d9['litOptions']['userAttrib'+'utes']=Object['fromEntrie'+'s'](_0x4ff4f0['userAttrib'+'utes']['entries']())),_0x17d0d9['litOptions']['shaderChun'+'ks']=_0x4ff4f0['shaderChun'+'ks'],_0x17d0d9['litOptions']['pass']=_0x409688,_0x17d0d9['litOptions']['alphaTest']=_0x4ff4f0['alphaTest']>0x3f5*-0x1+0x139*0x11+-0x3*0x59c,_0x17d0d9['litOptions']['blendType']=_0x4ff4f0['blendType'],_0x17d0d9['litOptions']['screenSpac'+'e']=_0x2270bd&&(_0x2270bd&Eh)!==0xbf0+-0x9e5+-0x20b*0x1,_0x17d0d9['litOptions']['skin']=_0x2270bd&&(_0x2270bd&nl)!==0x13*0xb+-0x2223+0x2*0x10a9,_0x17d0d9['litOptions']['batch']=_0x2270bd&&(_0x2270bd&qc)!==-0x59d*0x6+0x17c3+0x9eb,_0x17d0d9['litOptions']['useInstanc'+'ing']=_0x2270bd&&(_0x2270bd&ol)!==-0x1*-0x4ad+-0x359+-0x22*0xa,_0x17d0d9['litOptions']['useMorphPo'+'sition']=_0x2270bd&&(_0x2270bd&ll)!==0x3*-0xb96+-0x40e+0x26d0,_0x17d0d9['litOptions']['useMorphNo'+'rmal']=_0x2270bd&&(_0x2270bd&cl)!==0x15ad+0x2f9+-0x18a6,_0x17d0d9['litOptions']['useMorphTe'+'xtureBased'+'Int']=_0x2270bd&&(_0x2270bd&hl)!==0xacc+0x1f25+-0x29f1,_0x17d0d9['litOptions']['nineSliced'+'Mode']=_0x4ff4f0['nineSliced'+'Mode']||-0x210e+-0x1*0x783+-0x1*-0x2891,_0x36cbae['clusteredL'+'ightingEna'+'bled']&&_0x4ff4f0['useLightin'+'g']?(_0x17d0d9['litOptions']['clusteredL'+'ightingEna'+'bled']=!(0x1ce1+0x276+-0x47*0x71),_0x17d0d9['litOptions']['clusteredL'+'ightingCoo'+'kiesEnable'+'d']=_0x36cbae['lighting']['cookiesEna'+'bled'],_0x17d0d9['litOptions']['clusteredL'+'ightingSha'+'dowsEnable'+'d']=_0x36cbae['lighting']['shadowsEna'+'bled'],_0x17d0d9['litOptions']['clusteredL'+'ightingSha'+'dowType']=_0x36cbae['lighting']['shadowType'],_0x17d0d9['litOptions']['clusteredL'+'ightingAre'+'aLightsEna'+'bled']=_0x36cbae['lighting']['areaLights'+'Enabled']):(_0x17d0d9['litOptions']['clusteredL'+'ightingEna'+'bled']=!(0xe*-0x31+0x1*-0x2014+0x22c3),_0x17d0d9['litOptions']['clusteredL'+'ightingCoo'+'kiesEnable'+'d']=!(-0x5c6+0x1bd+-0x2*-0x205),_0x17d0d9['litOptions']['clusteredL'+'ightingSha'+'dowsEnable'+'d']=!(0x272+-0x26c8+0x2457),_0x17d0d9['litOptions']['clusteredL'+'ightingAre'+'aLightsEna'+'bled']=!(0x3*-0x164+-0x63d+0x56*0x1f));}['_updateUVO'+'ptions'](_0x4c1153,_0x3ef400,_0x5562e2,_0x1b4efc,_0x4d7004){let _0x45658c=!(0x26da+0x1017*0x1+0xdbc*-0x4),_0x4efd42=!(0x3*-0x3+0x1054+-0x104a),_0x4112ec=!(-0x1*0x623+-0x26cd+0x2cf1*0x1);_0x5562e2&&(_0x45658c=(_0x5562e2&nm)!==0x44f*0x7+-0x638+0xe3*-0x1b,_0x4efd42=(_0x5562e2&dv)!==0x1a9e+-0x297+-0x1807,_0x4112ec=(_0x5562e2&fv)!==0x837+-0x328*0xc+0x1da9),_0x4c1153['litOptions']['vertexColo'+'rs']=!(-0x835+-0x1*0x853+0x11*0xf9),this['_mapXForms']=[];const _0x2ad2fe={};for(const _0x5dd9f4 in bn)this['_updateTex'+'Options'](_0x4c1153,_0x3ef400,_0x5dd9f4,_0x45658c,_0x4efd42,_0x4112ec,_0x1b4efc,_0x2ad2fe);this['_mapXForms']=null,_0x4c1153['litOptions']['ssao']=_0x4d7004==null?void(-0x151a+-0x234*0x10+0x385a):_0x4d7004['ssaoEnable'+'d'],_0x4c1153['useAO']=_0x4c1153['litOptions']['ssao'],_0x4c1153['litOptions']['lightMapEn'+'abled']=_0x4c1153['lightMap'],_0x4c1153['litOptions']['dirLightMa'+'pEnabled']=_0x4c1153['dirLightMa'+'p'],_0x4c1153['litOptions']['useHeights']=_0x4c1153['heightMap'],_0x4c1153['litOptions']['useNormals']=_0x4c1153['normalMap'],_0x4c1153['litOptions']['useClearCo'+'atNormals']=_0x4c1153['clearCoatN'+'ormalMap'],_0x4c1153['litOptions']['useAo']=_0x4c1153['aoMap']||_0x4c1153['aoVertexCo'+'lor']||_0x4c1153['litOptions']['ssao'],_0x4c1153['litOptions']['diffuseMap'+'Enabled']=_0x4c1153['diffuseMap'];}['_updateTex'+'Options'](_0x46abec,_0x4ef636,_0x14cb99,_0x4dcc40,_0x26ece8,_0x4ea05a,_0x500a2a,_0x1319f8){const _0x1a9686=_0x14cb99==='opacity';if(!_0x500a2a||_0x1a9686){const _0x2d89ff=_0x14cb99+'Map',_0x3d8d26=_0x14cb99+('VertexColo'+'r'),_0x5d68e8=_0x14cb99+('VertexColo'+'rChannel'),_0x1ef329=_0x2d89ff+'Channel',_0x368b37=_0x2d89ff+'Transform',_0x35fa05=_0x2d89ff+'Uv',_0x408354=_0x2d89ff+'Identifier';if(_0x14cb99!=='light'&&(_0x46abec[_0x2d89ff]=!(-0x1*-0xb3+-0x257f+-0x1*-0x24cd),_0x46abec[_0x408354]=void(-0x263b*-0x1+-0x7*0x4f5+0x4*-0xe2),_0x46abec[_0x1ef329]='',_0x46abec[_0x368b37]=-0x2f*-0xd+-0x1*0x151+-0x112*0x1,_0x46abec[_0x35fa05]=-0x2044+0x1ef9+0x14b),_0x46abec[_0x3d8d26]=!(0x1283+-0x192*-0x2+-0x15a6),_0x46abec[_0x5d68e8]='',_0x1a9686&&_0x4ef636['blendType']===Cs&&_0x4ef636['alphaTest']===-0x1458+-0x1*0x847+-0x1af*-0x11&&!_0x4ef636['alphaToCov'+'erage']&&_0x4ef636['opacityDit'+'her']===Sa)return;if(_0x14cb99!=='height'&&_0x4ef636[_0x3d8d26]&&_0x4ea05a&&(_0x46abec[_0x3d8d26]=_0x4ef636[_0x3d8d26],_0x46abec[_0x5d68e8]=_0x4ef636[_0x5d68e8],_0x46abec['litOptions']['vertexColo'+'rs']=!(-0x24f2*-0x1+0xfc*-0x21+-0x476)),_0x4ef636[_0x2d89ff]){let _0x5a0a13=!(-0x15d*-0x1+0x1f62+0x1*-0x20bf);if(_0x4ef636[_0x35fa05]===0x5c9*0x3+0x18cc+-0x2a27&&!_0x4dcc40&&(_0x5a0a13=!(-0x32a+0x2363*0x1+-0x2038)),_0x4ef636[_0x35fa05]===-0x1*-0x170b+-0x107b+-0x1*0x68f&&!_0x26ece8&&(_0x5a0a13=!(0x2192+0x1bf9+-0x3d8a)),_0x5a0a13){const _0x54fd9a=_0x4ef636[_0x2d89ff]['id'];let _0x5bf059=_0x1319f8[_0x54fd9a];_0x5bf059===void(0x1e24+0xb65*0x3+-0x21*0x1f3)&&(_0x1319f8[_0x54fd9a]=_0x14cb99,_0x5bf059=_0x14cb99),_0x46abec[_0x2d89ff]=!!_0x4ef636[_0x2d89ff],_0x46abec[_0x408354]=_0x5bf059,_0x46abec[_0x368b37]=this['_getMapTra'+'nsformID'](_0x4ef636['getUniform'](_0x368b37),_0x4ef636[_0x35fa05]),_0x46abec[_0x1ef329]=_0x4ef636[_0x1ef329],_0x46abec[_0x35fa05]=_0x4ef636[_0x35fa05];}}}}['_updateMin'+'Options'](_0x1f619f,_0x60f101,_0x3a36a6){const _0x45d4b3=_0x3a36a6===Rl;_0x1f619f['litOptions']['opacitySha'+'dowDither']=_0x45d4b3?_0x60f101['opacityDit'+'her']:_0x60f101['opacitySha'+'dowDither'],_0x1f619f['litOptions']['linearDept'+'h']=_0x45d4b3,_0x1f619f['litOptions']['lights']=[];}['_updateMat'+'erialOptio'+'ns'](_0x1caa20,_0x45901a,_0x44e9fa){var _0x3c60c0,_0x4e77f5,_0x1ba3b6,_0x53ea5a,_0x3d4734,_0x1747eb;const _0x48787c=!!(_0x45901a['useMetalne'+'ss']||_0x45901a['specularMa'+'p']||_0x45901a['sphereMap']||_0x45901a['cubeMap']||mb(_0x45901a['specular'])||_0x45901a['specularit'+'yFactor']>-0x1*-0x174d+0xe41*0x1+-0xd1*0x2e&&_0x45901a['useMetalne'+'ss']||_0x45901a['enableGGXS'+'pecular']||_0x45901a['clearCoat']>0x1*-0x21da+0x901+0x18d9),_0xfafc35=!_0x45901a['useMetalne'+'ss']||_0x45901a['useMetalne'+'ssSpecular'+'Color'],_0x54ffa5=_0x48787c&&(_0x45901a['specularTi'+'nt']||!_0x45901a['specularMa'+'p']&&!_0x45901a['specularVe'+'rtexColor'])&&pb(_0x45901a['specular']),_0x703159=_0x48787c&&_0x45901a['useMetalne'+'ssSpecular'+'Color']&&(_0x45901a['specularit'+'yFactorTin'+'t']||_0x45901a['specularit'+'yFactor']<0x16b8+-0xb1a+-0x3df*0x3&&!_0x45901a['specularit'+'yFactorMap']),_0x496276=_0x3d8191=>_0x3d8191?_0x3d8191['format']===vl||_0x3d8191['type']===Jo:!(-0x2d7+0x1fc6+-0x1cee),_0x21172c=(_0x388ab,_0xffc66a)=>Math['abs'](_0x388ab-_0xffc66a)<-0xfb+-0x6c+0x167+0.0001;_0x1caa20['specularTi'+'nt']=_0x54ffa5,_0x1caa20['specularit'+'yFactorTin'+'t']=_0x703159,_0x1caa20['metalnessT'+'int']=_0x45901a['useMetalne'+'ss']&&_0x45901a['metalness']<-0x1e61+0x155c*-0x1+0x33be,_0x1caa20['glossTint']=!(-0x223e+-0x145b+-0x3699*-0x1),_0x1caa20['diffuseEnc'+'oding']=(_0x3c60c0=_0x45901a['diffuseMap'])==null?void(-0x23c5+0x3d5+-0x248*-0xe):_0x3c60c0['encoding'],_0x1caa20['diffuseDet'+'ailEncodin'+'g']=(_0x4e77f5=_0x45901a['diffuseDet'+'ailMap'])==null?void(-0x176d+0x1620+0x14d):_0x4e77f5['encoding'],_0x1caa20['emissiveEn'+'coding']=(_0x1ba3b6=_0x45901a['emissiveMa'+'p'])==null?void(0x39*-0x39+0xc54+0x5d):_0x1ba3b6['encoding'],_0x1caa20['lightMapEn'+'coding']=(_0x53ea5a=_0x45901a['lightMap'])==null?void(0x1f0a+0x2518+-0x4422):_0x53ea5a['encoding'],_0x1caa20['packedNorm'+'al']=_0x496276(_0x45901a['normalMap']),_0x1caa20['refraction'+'Tint']=_0x21172c(_0x45901a['refraction'],-0x16cc+-0x2*-0x127f+-0xe31),_0x1caa20['refraction'+'IndexTint']=_0x21172c(_0x45901a['refraction'+'Index'],(0xbf1*-0x3+0x12c0*0x1+0x1114)/(-0x1b63+0x1300+0x2cc*0x3+0.5)),_0x1caa20['thicknessT'+'int']=_0x45901a['useDynamic'+'Refraction']&&_0x45901a['thickness']!==-0x1818+0x225b*-0x1+0x3a74,_0x1caa20['specularEn'+'coding']=(_0x3d4734=_0x45901a['specularMa'+'p'])==null?void(0xe*-0x2a7+0x228*0x3+0x32*0x9d):_0x3d4734['encoding'],_0x1caa20['sheenEncod'+'ing']=(_0x1747eb=_0x45901a['sheenMap'])==null?void(-0x13cc+0xc10+0xa*0xc6):_0x1747eb['encoding'],_0x1caa20['aoMapUv']=_0x45901a['aoUvSet'],_0x1caa20['aoDetail']=!!_0x45901a['aoDetailMa'+'p'],_0x1caa20['diffuseDet'+'ail']=!!_0x45901a['diffuseDet'+'ailMap'],_0x1caa20['normalDeta'+'il']=!!_0x45901a['normalMap'],_0x1caa20['normalDeta'+'ilPackedNo'+'rmal']=_0x496276(_0x45901a['normalDeta'+'ilMap']),_0x1caa20['diffuseDet'+'ailMode']=_0x45901a['diffuseDet'+'ailMode'],_0x1caa20['aoDetailMo'+'de']=_0x45901a['aoDetailMo'+'de'],_0x1caa20['clearCoatG'+'loss']=!!_0x45901a['clearCoatG'+'loss'],_0x1caa20['clearCoatP'+'ackedNorma'+'l']=_0x496276(_0x45901a['clearCoatN'+'ormalMap']),_0x1caa20['iorTint']=_0x21172c(_0x45901a['refraction'+'Index'],(-0x1*-0x1697+0x15d9+-0x2c6f)/(0xd3*-0x7+0xad*-0x22+0xb8*0x28+0.5)),_0x44e9fa['forcePassT'+'hroughSpec'+'ular']&&(_0x1caa20['specularEn'+'coding']='linear',_0x1caa20['sheenEncod'+'ing']='linear'),_0x1caa20['iridescenc'+'eTint']=_0x45901a['iridescenc'+'e']!==0x1e27+-0xb*-0x15a+0xb41*-0x4,_0x1caa20['glossInver'+'t']=_0x45901a['glossInver'+'t'],_0x1caa20['sheenGloss'+'Invert']=_0x45901a['sheenGloss'+'Invert'],_0x1caa20['clearCoatG'+'lossInvert']=_0x45901a['clearCoatG'+'lossInvert'],_0x1caa20['useSpecula'+'rColor']=_0xfafc35,_0x1caa20['litOptions']['separateAm'+'bient']=!(-0xfe0+0x1e69+0x2*-0x744),_0x1caa20['litOptions']['pixelSnap']=_0x45901a['pixelSnap'],_0x1caa20['litOptions']['ambientSH']=!!_0x45901a['ambientSH'],_0x1caa20['litOptions']['twoSidedLi'+'ghting']=_0x45901a['twoSidedLi'+'ghting'],_0x1caa20['litOptions']['occludeSpe'+'cular']=_0x45901a['occludeSpe'+'cular'],_0x1caa20['litOptions']['occludeSpe'+'cularFloat']=_0x45901a['occludeSpe'+'cularInten'+'sity']!==0x1df*0x2+0x1503+-0x18c0,_0x1caa20['litOptions']['useMsdf']=!!_0x45901a['msdfMap'],_0x1caa20['litOptions']['msdfTextAt'+'tribute']=!!_0x45901a['msdfTextAt'+'tribute'],_0x1caa20['litOptions']['alphaToCov'+'erage']=_0x45901a['alphaToCov'+'erage'],_0x1caa20['litOptions']['opacityFad'+'esSpecular']=_0x45901a['opacityFad'+'esSpecular'],_0x1caa20['litOptions']['opacityDit'+'her']=_0x45901a['opacityDit'+'her'],_0x1caa20['litOptions']['cubeMapPro'+'jection']=_0x45901a['cubeMapPro'+'jection'],_0x1caa20['litOptions']['occludeDir'+'ect']=_0x45901a['occludeDir'+'ect'],_0x1caa20['litOptions']['useSpecula'+'r']=_0x48787c,_0x1caa20['litOptions']['useSpecula'+'rityFactor']=(_0x703159||!!_0x45901a['specularit'+'yFactorMap'])&&_0x45901a['useMetalne'+'ssSpecular'+'Color'],_0x1caa20['litOptions']['enableGGXS'+'pecular']=_0x45901a['enableGGXS'+'pecular'],_0x1caa20['litOptions']['fresnelMod'+'el']=_0x45901a['fresnelMod'+'el'],_0x1caa20['litOptions']['useRefract'+'ion']=(_0x45901a['refraction']||!!_0x45901a['refraction'+'Map'])&&(_0x45901a['useDynamic'+'Refraction']||_0x1caa20['litOptions']['reflection'+'Source']!==vr),_0x1caa20['litOptions']['useClearCo'+'at']=!!_0x45901a['clearCoat'],_0x1caa20['litOptions']['useSheen']=_0x45901a['useSheen'],_0x1caa20['litOptions']['useIridesc'+'ence']=_0x45901a['useIridesc'+'ence']&&_0x45901a['iridescenc'+'e']!==-0x8*0x135+-0xd*0xad+0x1271,_0x1caa20['litOptions']['useMetalne'+'ss']=_0x45901a['useMetalne'+'ss'],_0x1caa20['litOptions']['useDynamic'+'Refraction']=_0x45901a['useDynamic'+'Refraction'],_0x1caa20['litOptions']['dispersion']=_0x45901a['dispersion']>0x6d9*0x1+0x10a5*-0x1+-0x4e6*-0x2,_0x1caa20['litOptions']['shadowCatc'+'her']=_0x45901a['shadowCatc'+'her'];}['_updateEnv'+'Options'](_0x2e7f53,_0x33f48b,_0x397f37,_0x5032e4){_0x2e7f53['litOptions']['fog']=_0x33f48b['useFog']?_0x5032e4['fog']:Kn,_0x2e7f53['litOptions']['gamma']=_0x5032e4['shaderOutp'+'utGamma'],_0x2e7f53['litOptions']['toneMap']=_0x33f48b['useTonemap']?_0x5032e4['toneMappin'+'g']:nv;let _0x1a321c=!(-0x1*0x1d12+0x7a2*0x2+0x7*0x1f9);if(_0x33f48b['envAtlas']&&_0x33f48b['cubeMap']?(_0x2e7f53['litOptions']['reflection'+'Source']=xh,_0x2e7f53['litOptions']['reflection'+'Encoding']=_0x33f48b['envAtlas']['encoding'],_0x2e7f53['litOptions']['reflection'+'CubemapEnc'+'oding']=_0x33f48b['cubeMap']['encoding']):_0x33f48b['envAtlas']?(_0x2e7f53['litOptions']['reflection'+'Source']=vh,_0x2e7f53['litOptions']['reflection'+'Encoding']=_0x33f48b['envAtlas']['encoding']):_0x33f48b['cubeMap']?(_0x2e7f53['litOptions']['reflection'+'Source']=Th,_0x2e7f53['litOptions']['reflection'+'Encoding']=_0x33f48b['cubeMap']['encoding']):_0x33f48b['sphereMap']?(_0x2e7f53['litOptions']['reflection'+'Source']=hv,_0x2e7f53['litOptions']['reflection'+'Encoding']=_0x33f48b['sphereMap']['encoding']):_0x33f48b['useSkybox']&&_0x397f37['envAtlas']&&_0x397f37['skybox']?(_0x2e7f53['litOptions']['reflection'+'Source']=xh,_0x2e7f53['litOptions']['reflection'+'Encoding']=_0x397f37['envAtlas']['encoding'],_0x2e7f53['litOptions']['reflection'+'CubemapEnc'+'oding']=_0x397f37['skybox']['encoding'],_0x1a321c=!(-0x1f9f*-0x1+0x20c2+-0x4061*0x1)):_0x33f48b['useSkybox']&&_0x397f37['envAtlas']?(_0x2e7f53['litOptions']['reflection'+'Source']=vh,_0x2e7f53['litOptions']['reflection'+'Encoding']=_0x397f37['envAtlas']['encoding'],_0x1a321c=!(-0xb6b+-0x2209*-0x1+-0x169e)):_0x33f48b['useSkybox']&&_0x397f37['skybox']?(_0x2e7f53['litOptions']['reflection'+'Source']=Th,_0x2e7f53['litOptions']['reflection'+'Encoding']=_0x397f37['skybox']['encoding'],_0x1a321c=!(-0x157*0x9+-0x5b*0x41+0x232a)):(_0x2e7f53['litOptions']['reflection'+'Source']=vr,_0x2e7f53['litOptions']['reflection'+'Encoding']=null),_0x33f48b['ambientSH'])_0x2e7f53['litOptions']['ambientSou'+'rce']=im,_0x2e7f53['litOptions']['ambientEnc'+'oding']=null;else{const _0x5dd3c0=_0x33f48b['envAtlas']||(_0x33f48b['useSkybox']&&_0x397f37['envAtlas']?_0x397f37['envAtlas']:null);_0x5dd3c0&&!_0x33f48b['sphereMap']?(_0x2e7f53['litOptions']['ambientSou'+'rce']=rm,_0x2e7f53['litOptions']['ambientEnc'+'oding']=_0x5dd3c0['encoding']):(_0x2e7f53['litOptions']['ambientSou'+'rce']=am,_0x2e7f53['litOptions']['ambientEnc'+'oding']=null);}_0x2e7f53['litOptions']['skyboxInte'+'nsity']=_0x1a321c,_0x2e7f53['litOptions']['useCubeMap'+'Rotation']=_0x1a321c&&_0x397f37['_skyboxRot'+'ationShade'+'rInclude'];}['_updateLig'+'htOptions'](_0x8b83f6,_0x3dd05a,_0xaef16a,_0x391ac1,_0x2b6495){if(_0x8b83f6['lightMap']=!(-0x177+-0x1920+0x128*0x17),_0x8b83f6['lightMapCh'+'annel']='',_0x8b83f6['lightMapUv']=-0x1f2e+0x565*-0x1+0xc31*0x3,_0x8b83f6['lightMapTr'+'ansform']=0x1e6+0x1d0+-0x3b6,_0x8b83f6['litOptions']['lightMapWi'+'thoutAmbie'+'nt']=!(0x62c+-0x3*-0x197+0x1c*-0x64),_0x8b83f6['dirLightMa'+'p']=!(-0xd24+-0x3a*-0x59+0x1*-0x705),_0x391ac1&&(_0x8b83f6['litOptions']['noShadow']=(_0x391ac1&wh)!==-0xed5+0x33*-0x9+0x10a0,(_0x391ac1&ou)!==0x892+-0x22a2+0x1a10&&(_0x8b83f6['lightMapEn'+'coding']=_0x3dd05a['lightmapPi'+'xelFormat']===Ne?'rgbm':'linear',_0x8b83f6['lightMap']=!(0x14f*-0x19+-0xdcd+0x2e84),_0x8b83f6['lightMapCh'+'annel']='rgb',_0x8b83f6['lightMapUv']=-0x1c39+-0x1235*-0x2+-0x1*0x830,_0x8b83f6['lightMapTr'+'ansform']=-0x25f1*0x1+0x1*-0x15bc+0x3bad,_0x8b83f6['litOptions']['lightMapWi'+'thoutAmbie'+'nt']=!_0xaef16a['lightMap'],(_0x391ac1&uv)!==0x15*-0x50+0xac7*-0x1+-0x1*-0x1157&&(_0x8b83f6['dirLightMa'+'p']=!(-0x4*-0x43f+-0x259d+0x14a1)),(_0x391ac1&pv)!==-0x6*0x2d3+-0x145c*-0x1+-0x1b5*0x2&&(_0x8b83f6['litOptions']['lightMapWi'+'thoutAmbie'+'nt']=!(-0x975*-0x3+0x1f84+-0x3be2)))),_0xaef16a['useLightin'+'g']){const _0x1609d7=[],_0x477c30=_0x391ac1?_0x391ac1>>-0x1e*0x15+0x1aab+-0x1825:Ss;_0x8b83f6['litOptions']['lightMaskD'+'ynamic']=!!(_0x477c30&Ss),_0x2b6495&&(Ws['collectLig'+'hts'](ve,_0x2b6495[ve],_0x1609d7,_0x477c30),_0x3dd05a['clusteredL'+'ightingEna'+'bled']||(Ws['collectLig'+'hts'](Ke,_0x2b6495[Ke],_0x1609d7,_0x477c30),Ws['collectLig'+'hts'](Ze,_0x2b6495[Ze],_0x1609d7,_0x477c30))),_0x8b83f6['litOptions']['lights']=_0x1609d7;}else _0x8b83f6['litOptions']['lights']=[];_0x8b83f6['litOptions']['lights']['length']===-0x8cd*-0x1+-0xe6e+-0x5a1*-0x1&&!_0x3dd05a['clusteredL'+'ightingEna'+'bled']&&(_0x8b83f6['litOptions']['noShadow']=!(0x147c+0x1*0x63d+0x1ab9*-0x1));}['_getMapTra'+'nsformID'](_0x1635cf,_0xd13996){if(!_0x1635cf)return 0x20f4+0xbb*-0x7+-0x1bd7;let _0x4255fe=this['_mapXForms'][_0xd13996];_0x4255fe||(_0x4255fe=[],this['_mapXForms'][_0xd13996]=_0x4255fe);for(let _0x38e53a=-0x9*-0x1fd+0x137*0x1b+-0x32b2;_0x38e53a<_0x4255fe['length'];_0x38e53a++)if(G_(_0x4255fe[_0x38e53a][-0x40a+-0x695+0xa9f*0x1]['value'],_0x1635cf[0xba8*-0x2+0x4ab*0x4+0x12*0x42]['value'])&&G_(_0x4255fe[_0x38e53a][-0x2393*-0x1+0xd42+-0x30d4]['value'],_0x1635cf[0x82*0x1d+-0x7d*0xc+-0x8dd*0x1]['value']))return _0x38e53a+(-0x3*-0x39e+-0x1f45+-0x4*-0x51b);return _0x4255fe['push'](_0x1635cf);}}function rt(_0xfa174f,_0x21eee6=!(0x1*-0x175+0x12dd+-0x8b4*0x2),_0x2443d4=!(-0x13*-0x13f+0x1*0xc5+-0x15*0x12a)){const _0x36afc3={};return _0x36afc3[_0xfa174f+'Map']='texture',_0x36afc3[_0xfa174f+'MapTiling']='vec2',_0x36afc3[_0xfa174f+'MapOffset']='vec2',_0x36afc3[_0xfa174f+('MapRotatio'+'n')]='number',_0x36afc3[_0xfa174f+'MapUv']='number',_0x21eee6&&(_0x36afc3[_0xfa174f+'MapChannel']='string',_0x2443d4&&(_0x36afc3[_0xfa174f+('VertexColo'+'r')]='boolean',_0x36afc3[_0xfa174f+('VertexColo'+'rChannel')]='string')),_0x36afc3;}const $n={'name':'string','chunks':'chunks','mappingFormat':'string','_engine':'boolean','ambient':'rgb',...rt('ao'),...rt('aoDetail',!(0x4f0*-0x1+0xb87+-0x1*0x697),!(-0x7f9+-0x433+0xc2d)),'aoDetailMode':'string','aoIntensity':'number','diffuse':'rgb',...rt('diffuse'),...rt('diffuseDet'+'ail',!(0x1c3*0xc+0x1f69+0xb*-0x4c7),!(0x26b7+0xa6+0x13ae*-0x2)),'diffuseDetailMode':'string','specular':'rgb','specularTint':'boolean',...rt('specular'),'occludeSpecular':'enum:occlu'+'deSpecular','specularityFactor':'number','specularityFactorTint':'boolean',...rt('specularit'+'yFactor'),'useMetalness':'boolean','metalness':'number','enableGGXSpecular':'boolean','metalnessTint':'boolean',...rt('metalness'),'useMetalnessSpecularColor':'boolean','anisotropyIntensity':'number','anisotropyRotation':'number',...rt('anisotropy'),'shininess':'number','gloss':'number','glossInvert':'boolean',...rt('gloss'),'clearCoat':'number',...rt('clearCoat'),'clearCoatGloss':'number','clearCoatGlossInvert':'boolean',...rt('clearCoatG'+'loss'),'clearCoatBumpiness':'number',...rt('clearCoatN'+'ormal',!(-0x5*-0x4df+-0x1f5*0x4+-0x1086)),'useSheen':'boolean','sheen':'rgb',...rt('sheen'),'sheenGloss':'number','sheenGlossInvert':'boolean',...rt('sheenGloss'),'fresnelModel':'number','emissive':'rgb',...rt('emissive'),'emissiveIntensity':'number',...rt('normal',!(-0x6c*-0x5a+0x8c1+0x5*-0x958)),'bumpiness':'number',...rt('normalDeta'+'il',!(0x231*-0x9+-0x82b+0x1*0x1be5)),'normalDetailMapBumpiness':'number',...rt('height',!(0x1124+0xfa5+-0x20c9*0x1),!(-0xbc3+-0x1ae6+0x62*0x65)),'heightMapFactor':'number','alphaToCoverage':'boolean','alphaTest':'number','alphaFade':'number','opacity':'number',...rt('opacity'),'opacityFadesSpecular':'boolean','opacityDither':'string','opacityShadowDither':'string','reflectivity':'number','refraction':'number','refractionTint':'boolean',...rt('refraction'),'refractionIndex':'number','dispersion':'number','thickness':'number','thicknessTint':'boolean',...rt('thickness'),'attenuation':'rgb','attenuationDistance':'number','useDynamicRefraction':'boolean','sphereMap':'texture','cubeMap':'cubemap','cubeMapProjection':'number','cubeMapProjectionBox':'boundingbo'+'x','useIridescence':'boolean','iridescence':'number','iridescenceTint':'boolean',...rt('iridescenc'+'e'),'iridescenceThicknessTint':'boolean','iridescenceThicknessMin':'number','iridescenceThicknessMax':'number','iridescenceRefractionIndex':'number',...rt('iridescenc'+'eThickness'),...rt('light'),'depthTest':'boolean','depthFunc':'enum:depth'+'Func','depthWrite':'boolean','depthBias':'number','slopeDepthBias':'number','cull':'enum:cull','blendType':'enum:blend'+'Type','useFog':'boolean','useLighting':'boolean','useSkybox':'boolean','useTonemap':'boolean','envAtlas':'texture','twoSidedLighting':'boolean','shadowCatcher':'boolean'},Cd=[];for(const l in $n)$n[l]==='texture'&&Cd['push'](l);const fm=[];for(const l in $n)$n[l]==='cubemap'&&fm['push'](l);const gb={'aoMapVertexColor':'boolean','diffuseMapTint':'boolean','diffuseMapVertexColor':'boolean','emissiveMapTint':'boolean','emissiveMapVertexColor':'boolean','glossMapVertexColor':'boolean','metalnessMapVertexColor':'boolean','opacityMapVertexColor':'boolean','specularAntialias':'boolean','specularMapTint':'boolean','specularMapVertexColor':'boolean','ambientTint':'boolean','emissiveTint':'boolean','diffuseTint':'boolean','sheenTint':'boolean','conserveEnergy':'boolean','useGamma':'boolean','useGammaTonemap':'boolean','sheenGlossTint':'boolean','anisotropy':'boolean'},Kc={},bv={};let no=new Set();const oc=new ie();class Ut extends tr{constructor(){super(),h(this,'userAttrib'+'utes',new Map()),h(this,'onUpdateSh'+'ader'),(this['_assetRefe'+'rences']={},this['_activePar'+'ams']=new Set(),this['_activeLig'+'htingParam'+'s']=new Set(),this['shaderOptB'+'uilder']=new _b(),this['reset']());}['reset'](){Object['keys'](Kc)['forEach'](_0x469d4d=>{this['_'+_0x469d4d]=Kc[_0x469d4d]['value']();}),this['_uniformCa'+'che']={};}['copy'](_0x1f3cf0){return super['copy'](_0x1f3cf0),Object['keys'](Kc)['forEach'](_0x154660=>{this[_0x154660]=_0x1f3cf0[_0x154660];}),this['userAttrib'+'utes']=new Map(_0x1f3cf0['userAttrib'+'utes']),this;}['setAttribu'+'te'](_0x693c2f,_0x1df074){this['userAttrib'+'utes']['set'](_0x1df074,_0x693c2f);}['_setParame'+'ter'](_0xbadef9,_0x4cf1f0){no['add'](_0xbadef9),this['setParamet'+'er'](_0xbadef9,_0x4cf1f0);}['_setParame'+'ters'](_0x30e3bb){_0x30e3bb['forEach'](_0x51d2b6=>{this['_setParame'+'ter'](_0x51d2b6['name'],_0x51d2b6['value']);});}['_processPa'+'rameters'](_0x27cfc2){const _0x3c011f=this[_0x27cfc2];_0x3c011f['forEach'](_0x539db0=>{no['has'](_0x539db0)||delete this['parameters'][_0x539db0];}),this[_0x27cfc2]=no,no=_0x3c011f,no['clear']();}['_updateMap'](_0x554325){const _0x40f2b7=_0x554325+'Map',_0x117300=this[_0x40f2b7];if(_0x117300){this['_setParame'+'ter']('texture_'+_0x40f2b7,_0x117300);const _0x44f914=_0x40f2b7+'Transform',_0x371cee=this['getUniform'](_0x44f914);_0x371cee&&this['_setParame'+'ters'](_0x371cee);}}['_allocUnif'+'orm'](_0x4b4a69,_0x4575ba){let _0x336b48=this['_uniformCa'+'che'][_0x4b4a69];return _0x336b48||(_0x336b48=_0x4575ba(),this['_uniformCa'+'che'][_0x4b4a69]=_0x336b48),_0x336b48;}['getUniform'](_0x39ef1c,_0x43c115,_0x4fd59a){return bv[_0x39ef1c](this,_0x43c115,_0x4fd59a);}['updateUnif'+'orms'](_0x17ab7e,_0x378cae){const _0x2ea13c=_0x37038e=>this['getUniform'](_0x37038e,_0x17ab7e,_0x378cae);this['_setParame'+'ter']('material_a'+'mbient',_0x2ea13c('ambient')),this['_setParame'+'ter']('material_d'+'iffuse',_0x2ea13c('diffuse')),this['_setParame'+'ter']('material_a'+'oIntensity',this['aoIntensit'+'y']),this['useMetalne'+'ss']?((!this['metalnessM'+'ap']||this['metalness']<0x9*0x34+0x1*-0x563+0x13*0x30)&&this['_setParame'+'ter']('material_m'+'etalness',this['metalness']),(!this['specularMa'+'p']||this['specularTi'+'nt'])&&this['_setParame'+'ter']('material_s'+'pecular',_0x2ea13c('specular')),(!this['specularit'+'yFactorMap']||this['specularit'+'yFactorTin'+'t'])&&this['_setParame'+'ter']('material_s'+'pecularity'+'Factor',this['specularit'+'yFactor']),this['_setParame'+'ter']('material_s'+'heen',_0x2ea13c('sheen')),this['_setParame'+'ter']('material_s'+'heenGloss',this['sheenGloss']),this['_setParame'+'ter']('material_r'+'efractionI'+'ndex',this['refraction'+'Index'])):(!this['specularMa'+'p']||this['specularTi'+'nt'])&&this['_setParame'+'ter']('material_s'+'pecular',_0x2ea13c('specular')),this['enableGGXS'+'pecular']&&(this['_setParame'+'ter']('material_a'+'nisotropyI'+'ntensity',this['anisotropy'+'Intensity']),this['_setParame'+'ter']('material_a'+'nisotropyR'+'otation',[Math['cos'](this['anisotropy'+'Rotation']*Y['DEG_TO_RAD']),Math['sin'](this['anisotropy'+'Rotation']*Y['DEG_TO_RAD'])])),this['clearCoat']>-0x1c89+-0x1*0x207f+-0x5d*-0xa8&&(this['_setParame'+'ter']('material_c'+'learCoat',this['clearCoat']),this['_setParame'+'ter']('material_c'+'learCoatGl'+'oss',this['clearCoatG'+'loss']),this['_setParame'+'ter']('material_c'+'learCoatBu'+'mpiness',this['clearCoatB'+'umpiness'])),this['_setParame'+'ter']('material_g'+'loss',this['gloss']),w['call'](()=>{this['emissiveMa'+'p']&&this['emissive']['r']===0x54a+0x2141*-0x1+0x1bf7*0x1&&this['emissive']['g']===0x13*-0x19c+-0x25d0+-0xc*-0x5b3&&this['emissive']['b']===0x2f*0xb1+0x19fd+-0x3a7c&&w['warnOnce']('Emissive\x20m'+'ap\x20is\x20set\x20'+'but\x20emissi'+'ve\x20color\x20i'+'s\x20black,\x20m'+'aking\x20the\x20'+'map\x20invisi'+'ble.\x20Set\x20e'+'missive\x20co'+'lor\x20to\x20whi'+'te\x20to\x20make'+'\x20the\x20map\x20v'+'isible.\x20Re'+'ndering\x20['+Q['toString']()+']',this);}),this['_setParame'+'ter']('material_e'+'missive',_0x2ea13c('emissive')),this['_setParame'+'ter']('material_e'+'missiveInt'+'ensity',this['emissiveIn'+'tensity']),this['refraction']>0xd17+0x1de7+-0x2afe&&this['_setParame'+'ter']('material_r'+'efraction',this['refraction']),this['dispersion']>-0x16bd+-0x7*-0x14b+0x49*0x30&&this['_setParame'+'ter']('material_d'+'ispersion',this['dispersion']),this['useDynamic'+'Refraction']&&(this['_setParame'+'ter']('material_t'+'hickness',this['thickness']),this['_setParame'+'ter']('material_a'+'ttenuation',_0x2ea13c('attenuatio'+'n')),this['_setParame'+'ter']('material_i'+'nvAttenuat'+'ionDistanc'+'e',this['attenuatio'+'nDistance']===0x27*0x89+0x71e*0x5+-0x3875?0x13*-0x199+-0x76e+0x25c9:(-0xef*0xc+0x1616+-0xae1)/this['attenuatio'+'nDistance'])),this['useIridesc'+'ence']&&(this['_setParame'+'ter']('material_i'+'ridescence',this['iridescenc'+'e']),this['_setParame'+'ter']('material_i'+'ridescence'+'Refraction'+'Index',this['iridescenc'+'eRefractio'+'nIndex']),this['_setParame'+'ter']('material_i'+'ridescence'+'ThicknessM'+'in',this['iridescenc'+'eThickness'+'Min']),this['_setParame'+'ter']('material_i'+'ridescence'+'ThicknessM'+'ax',this['iridescenc'+'eThickness'+'Max'])),this['_setParame'+'ter']('material_o'+'pacity',this['opacity']),this['opacityFad'+'esSpecular']===!(0x2389+0x1b2f*0x1+-0x3eb7)&&this['_setParame'+'ter']('material_a'+'lphaFade',this['alphaFade']),this['occludeSpe'+'cular']&&this['_setParame'+'ter']('material_o'+'ccludeSpec'+'ularIntens'+'ity',this['occludeSpe'+'cularInten'+'sity']),this['cubeMapPro'+'jection']===av&&this['_setParame'+'ter'](_0x2ea13c('cubeMapPro'+'jectionBox'));for(const _0xf257a7 in bn)this['_updateMap'](_0xf257a7);this['ambientSH']&&this['_setParame'+'ter']('ambientSH['+'0]',this['ambientSH']),this['normalMap']&&this['_setParame'+'ter']('material_b'+'umpiness',this['bumpiness']),this['normalMap']&&this['normalDeta'+'ilMap']&&this['_setParame'+'ter']('material_n'+'ormalDetai'+'lMapBumpin'+'ess',this['normalDeta'+'ilMapBumpi'+'ness']),this['heightMap']&&this['_setParame'+'ter']('material_h'+'eightMapFa'+'ctor',_0x2ea13c('heightMapF'+'actor')),this['envAtlas']&&this['cubeMap']?(this['_setParame'+'ter']('texture_en'+'vAtlas',this['envAtlas']),this['_setParame'+'ter']('texture_cu'+'beMap',this['cubeMap'])):this['envAtlas']?this['_setParame'+'ter']('texture_en'+'vAtlas',this['envAtlas']):this['cubeMap']?this['_setParame'+'ter']('texture_cu'+'beMap',this['cubeMap']):this['sphereMap']&&this['_setParame'+'ter']('texture_sp'+'hereMap',this['sphereMap']),this['_setParame'+'ter']('material_r'+'eflectivit'+'y',this['reflectivi'+'ty']),this['_processPa'+'rameters']('_activePar'+'ams'),super['updateUnif'+'orms'](_0x17ab7e,_0x378cae);}['updateEnvU'+'niforms'](_0x3bf8ba,_0x583182){!(this['envAtlas']||this['cubeMap']||this['sphereMap'])&&this['useSkybox']&&(_0x583182['envAtlas']&&_0x583182['skybox']?(this['_setParame'+'ter']('texture_en'+'vAtlas',_0x583182['envAtlas']),this['_setParame'+'ter']('texture_cu'+'beMap',_0x583182['skybox'])):_0x583182['envAtlas']?this['_setParame'+'ter']('texture_en'+'vAtlas',_0x583182['envAtlas']):_0x583182['skybox']&&this['_setParame'+'ter']('texture_cu'+'beMap',_0x583182['skybox'])),this['_processPa'+'rameters']('_activeLig'+'htingParam'+'s');}['getShaderV'+'ariant'](_0x28ccfe){const {device:_0x1f1846,scene:_0x4b461b,pass:_0x4d56a9,objDefs:_0x15bf86,sortedLights:_0x2a2700,cameraShaderParams:_0x15114c}=_0x28ccfe;this['updateEnvU'+'niforms'](_0x1f1846,_0x4b461b);const _0x3debe4=Si['get'](_0x1f1846)['getByIndex'](_0x4d56a9),_0xfa5c=_0x4d56a9===Zn||_0x4d56a9===Rl||_0x3debe4['isShadow'];let _0x4fd83d=_0xfa5c?Jd['optionsCon'+'textMin']:Jd['optionsCon'+'text'];_0x4fd83d['defines']=$t['getCoreDef'+'ines'](this,_0x28ccfe),_0xfa5c?this['shaderOptB'+'uilder']['updateMinR'+'ef'](_0x4fd83d,_0x4b461b,this,_0x15bf86,_0x4d56a9,_0x2a2700):this['shaderOptB'+'uilder']['updateRef'](_0x4fd83d,_0x4b461b,_0x15114c,this,_0x15bf86,_0x4d56a9,_0x2a2700),this['useFog']||_0x4fd83d['defines']['set']('FOG','NONE'),_0x4fd83d['defines']['set']('TONEMAP',ov[_0x4fd83d['litOptions']['toneMap']]),this['onUpdateSh'+'ader']&&(_0x4fd83d=this['onUpdateSh'+'ader'](_0x4fd83d));const _0x206913=new Ad(_0x28ccfe['viewUnifor'+'mFormat'],_0x28ccfe['viewBindGr'+'oupFormat'],_0x28ccfe['vertexForm'+'at']),_0x3b12e5=Hn(_0x1f1846);_0x3b12e5['register']('standard',Jd);const _0xb9419f=_0x3b12e5['getProgram']('standard',_0x4fd83d,_0x206913,this['userId']);return this['_dirtyShad'+'er']=!(0x15*-0x153+0x19*0x151+0xf*-0x57),_0xb9419f;}['destroy'](){for(const _0x188eeb in this['_assetRefe'+'rences'])this['_assetRefe'+'rences'][_0x188eeb]['_unbind']();this['_assetRefe'+'rences']=null,super['destroy']();}}h(Ut,'TEXTURE_PA'+'RAMETERS',Cd),h(Ut,'CUBEMAP_PA'+'RAMETERS',fm);const Pd=(_0x259376,_0x55c2b9)=>{bv[_0x259376]=_0x55c2b9;},um=(_0x23a0da,_0x4fdb53,_0x439286,_0x2bde37)=>{Object['defineProp'+'erty'](Ut['prototype'],_0x23a0da,{'get':_0x2bde37||function(){return this['_'+_0x23a0da];},'set':_0x439286}),Kc[_0x23a0da]={'value':_0x4fdb53};},Sb=_0x2f22c9=>{const _0x2ba21b='_'+_0x2f22c9['name'],_0x13da5e=_0x2f22c9['dirtyShade'+'rFunc']||(()=>!(0x1287+0x1a3c+-0x2cc3)),_0x1403a3=function(_0x4ef2f7){const _0x5d90a1=this[_0x2ba21b];_0x5d90a1!==_0x4ef2f7&&(this['_dirtyShad'+'er']=this['_dirtyShad'+'er']||_0x13da5e(_0x5d90a1,_0x4ef2f7),this[_0x2ba21b]=_0x4ef2f7);};um(_0x2f22c9['name'],()=>_0x2f22c9['defaultVal'+'ue'],_0x1403a3,_0x2f22c9['getterFunc']);},yb=_0x4dd016=>{const _0x40863d='_'+_0x4dd016['name'],_0x4310d8=_0x4dd016['dirtyShade'+'rFunc']||(()=>!(0x284+0xf*0x89+0x1*-0xa8b)),_0x19e0ff=function(_0x239e49){const _0x40de5a=this[_0x40863d];_0x40de5a['equals'](_0x239e49)||(this['_dirtyShad'+'er']=this['_dirtyShad'+'er']||_0x4310d8(_0x40de5a,_0x239e49),this[_0x40863d]=_0x40de5a['copy'](_0x239e49));};um(_0x4dd016['name'],()=>_0x4dd016['defaultVal'+'ue']['clone'](),_0x19e0ff,_0x4dd016['getterFunc']);},Es=_0x4af65c=>_0x4af65c['defaultVal'+'ue']&&_0x4af65c['defaultVal'+'ue']['clone']?yb(_0x4af65c):Sb(_0x4af65c);function et(_0xc36163,_0x5332eb='rgb',_0x17126b=!(0x674+-0xbe5+0x1*0x571),_0x5eae9c=0x24*0xbd+0xc8e+-0x1*0x2722){bn[_0xc36163]=_0x5332eb['length']||-(-0x1fac+-0x84*-0xf+0x17f1),Es({'name':_0xc36163+'Map','defaultValue':null,'dirtyShaderFunc':(_0x3ea29a,_0x4ec8b0)=>!!_0x3ea29a!=!!_0x4ec8b0||_0x3ea29a&&(_0x3ea29a['type']!==_0x4ec8b0['type']||_0x3ea29a['format']!==_0x4ec8b0['format'])}),Es({'name':_0xc36163+'MapTiling','defaultValue':new J(0x1dcb+-0x3*0x2d+-0x1d43,0xca5+0x3*0xa73+-0x2bfd)}),Es({'name':_0xc36163+'MapOffset','defaultValue':new J(-0x3d*-0x71+-0xe42+-0xcab,-0x1*0x1df7+0x1d9e+0x59)}),Es({'name':_0xc36163+('MapRotatio'+'n'),'defaultValue':0x0}),Es({'name':_0xc36163+'MapUv','defaultValue':_0x5eae9c}),_0x5332eb&&(Es({'name':_0xc36163+'MapChannel','defaultValue':_0x5332eb}),_0x17126b&&(Es({'name':_0xc36163+('VertexColo'+'r'),'defaultValue':!(0x1563+0x1*-0x6be+0x1*-0xea4)}),Es({'name':_0xc36163+('VertexColo'+'rChannel'),'defaultValue':_0x5332eb})));const _0x4c8de8=_0xc36163+'MapTiling',_0xbe29c7=_0xc36163+'MapOffset',_0x593818=_0xc36163+('MapRotatio'+'n'),_0x3095aa=_0xc36163+('MapTransfo'+'rm');Pd(_0x3095aa,(_0x409e16,_0xd3bf25,_0x5c004b)=>{const _0x3ac96a=_0x409e16[_0x4c8de8],_0xe5de01=_0x409e16[_0xbe29c7],_0x55d1ef=_0x409e16[_0x593818];if(_0x3ac96a['x']===0x13d6+0x2*0x76f+-0xbd*0x2f&&_0x3ac96a['y']===0x1*0x1fd3+-0x1c65*0x1+0x1*-0x36d&&_0xe5de01['x']===-0x5d6+-0x93+0x669&&_0xe5de01['y']===-0x2*0x259+0x9a5*-0x3+0x21a1&&_0x55d1ef===-0x83*0x5+0x1613+0x4e1*-0x4)return null;const _0x2c47d0=_0x409e16['_allocUnif'+'orm'](_0x3095aa,()=>[{'name':'texture_'+_0x3095aa+'0','value':new Float32Array(-0xb*0x53+-0x1037*-0x1+0x287*-0x5)},{'name':'texture_'+_0x3095aa+'1','value':new Float32Array(0x3*-0xb7e+-0x1b5a+-0x3dd7*-0x1)}]),_0x22e022=Math['cos'](_0x55d1ef*Y['DEG_TO_RAD']),_0x1ad8c0=Math['sin'](_0x55d1ef*Y['DEG_TO_RAD']),_0x49e641=_0x2c47d0[-0x5e*-0x8+-0x131a*0x2+-0x4*-0x8d1]['value'];_0x49e641[0x1e7*-0xe+0x38f*0xa+-0x8f4]=_0x22e022*_0x3ac96a['x'],_0x49e641[0x3*-0xdd+-0xb*0x2f+0x49d]=-_0x1ad8c0*_0x3ac96a['y'],_0x49e641[-0x11*-0x162+-0x8b+-0x16f5]=_0xe5de01['x'];const _0x736dac=_0x2c47d0[0x25bc+-0x1811*0x1+-0x1*0xdaa]['value'];return _0x736dac[-0x11*-0xbb+-0xf5*0x10+0x2e5]=_0x1ad8c0*_0x3ac96a['x'],_0x736dac[-0x30a+-0x252e+0x2839]=_0x22e022*_0x3ac96a['y'],_0x736dac[-0x19d5+-0x1228+0x649*0x7]=-0x94c+-0xd*0x2f5+-0x15*-0x246-_0x3ac96a['y']-_0xe5de01['y'],_0x2c47d0;});}function Ra(_0x52d4e3,_0x28812a){Es({'name':_0x52d4e3,'defaultValue':_0x28812a,'getterFunc':function(){return this['_dirtyShad'+'er']=!(-0x281*0xe+0xad*0x1+0x1*0x2261),this['_'+_0x52d4e3];}}),Pd(_0x52d4e3,(_0x6d9056,_0x136132,_0x46fa02)=>{const _0x32face=_0x6d9056['_allocUnif'+'orm'](_0x52d4e3,()=>new Float32Array(-0x1*-0x1442+0x11*0x1c5+-0x3254)),_0x5d9d60=_0x6d9056[_0x52d4e3];return oc['linear'](_0x5d9d60),_0x32face[0xb6*-0x20+-0x77c+0xf*0x204]=oc['r'],_0x32face[-0x2f7*0x2+-0x195+0x784]=oc['g'],_0x32face[-0x3f7+-0xa64*0x3+0x1*0x2325]=oc['b'],_0x32face;});}function ze(_0x592816,_0x4f40f9,_0x586319){Es({'name':_0x592816,'defaultValue':_0x4f40f9,'dirtyShaderFunc':(_0x3a4409,_0x139aca)=>(_0x3a4409===0x464+-0x2*0x107e+0xa*0x2dc||_0x3a4409===-0xd3f*-0x1+-0xf91+-0x55*-0x7)!=(_0x139aca===0x1*-0x1e2e+-0x1*0x57c+0x5*0x722||_0x139aca===0x515*0x4+0x4*-0x691+0x5f1)}),Pd(_0x592816,_0x586319);}function oo(_0x11d6eb,_0x165a4a){Es({'name':_0x11d6eb,'defaultValue':null,'dirtyShaderFunc':(_0x5c294a,_0x798f3e)=>!!_0x5c294a==!!_0x798f3e}),Pd(_0x11d6eb,_0x165a4a);}function ke(_0x16126f,_0x6abd67){Es({'name':_0x16126f,'defaultValue':_0x6abd67});}function vb(){Ra('ambient',new ie(-0x4*0x757+-0x15cd*-0x1+0x1e4*0x4,-0x15eb+-0x628+0x1c14,0x6*-0x3c+0x99e*-0x2+0x421*0x5)),Ra('diffuse',new ie(-0x1d49+0xaf*-0x8+0x22c2,-0xe2d+0x17a+0xcb4,0x1*0x11f9+-0x499+-0xd5f*0x1)),Ra('specular',new ie(0x3dc+0x1d47+-0x11*0x1f3,0x1caf*-0x1+-0xe*-0x118+-0x475*-0x3,0x22ab+-0x19*-0x137+-0x410a)),Ra('emissive',new ie(-0x3a*-0x86+-0x7*-0x3fd+-0x3*0x136d,-0x511*-0x3+0x228d+0x40*-0xc7,0x70*-0x43+-0x2ee*0x2+0x232c)),Ra('sheen',new ie(-0x195c*-0x1+-0x689+-0x12d2,0x1*0xec3+-0x1ae1+0xc1f,0x1*0x1b5a+-0xc38+-0xf21)),Ra('attenuatio'+'n',new ie(0x78e*-0x2+0x15*0x3d+0x1*0xa1c,0x20b9*-0x1+0x61b*-0x6+0x17*0x304,0xa21*0x1+-0x5a3+0x3*-0x17f)),ze('emissiveIn'+'tensity',0x43d+-0x41*-0x6e+0x1015*-0x2),ze('specularit'+'yFactor',0x1*-0x22a1+0x737*-0x1+0x29d9),ze('sheenGloss',0x4d9+-0x212a+0x1c51),ze('gloss',0x2ae+0x206d+-0x231b*0x1+0.25),ze('aoIntensit'+'y',0x1829+0xa5*0x35+-0x3a51),ze('heightMapF'+'actor',0x9dd*-0x3+0x1f48+-0x2*0xd8,(_0x14967f,_0x20892b,_0x16dc4b)=>_0x14967f['heightMapF'+'actor']*(-0x217*0x1+0x125*0xb+-0xa80+0.025)),ze('opacity',0x1ef6+0x19d2*-0x1+-0x523),ze('alphaFade',-0x22ac+0x1127*0x1+0x1186),ze('alphaTest',-0xbd4+0x2eb*-0x1+0xebf),ze('bumpiness',-0x207e+0x10d1+-0x7d7*-0x2),ze('normalDeta'+'ilMapBumpi'+'ness',-0x14fc*-0x1+0x4f*-0x7a+0x10ab),ze('reflectivi'+'ty',-0x236f+0x1*0x1565+-0xe0b*-0x1),ze('occludeSpe'+'cularInten'+'sity',-0xd45+0x8b1+0x495),ze('refraction',0x23ec+-0x208d+-0x35f),ze('refraction'+'Index',(0x5*0x513+0x1848+-0xcd*0x3e)/(-0x20b*-0x1+0x1*-0xb87+-0x1*-0x97d+0.5)),ze('dispersion',-0x1df6+-0x1013*0x2+0x3e1c),ze('thickness',-0x193e+-0xf4d+0x288b),ze('attenuatio'+'nDistance',-0xbd*-0x18+0x11c5+-0x719*0x5),ze('metalness',-0x2c*-0xb5+0x20e2+-0x3ffd),ze('anisotropy'+'Intensity',-0x8*0x373+-0x1ce5+-0x1*-0x387d),ze('anisotropy'+'Rotation',-0x20a3+-0x20*0x131+-0x1*-0x46c3),ze('clearCoat',-0x6dd*0x3+0x271*-0xe+0x36c5),ze('clearCoatG'+'loss',0xece+-0x1ea1+0x4*0x3f5),ze('clearCoatB'+'umpiness',0x10b*0x7+0x1bb0*0x1+-0x4*0x8bf),ze('aoUvSet',-0x128c+-0x12b7+0x2543*0x1,null),ze('iridescenc'+'e',0x714+0x68*0x1f+0x4eb*-0x4),ze('iridescenc'+'eRefractio'+'nIndex',(-0x13f*0x5+0xcdd+-0x6a1)/(0x245a+0x2*-0x33f+-0x1ddb*0x1+0.5)),ze('iridescenc'+'eThickness'+'Min',-0x4ab+-0x1*-0x1df5+0x1a*-0xf9),ze('iridescenc'+'eThickness'+'Max',-0x24bf+-0x5*0x1b9+0x2d5c),oo('ambientSH'),oo('cubeMapPro'+'jectionBox',(_0x6b1b87,_0x13912a,_0x7e2195)=>{const _0x37cfcc=_0x6b1b87['_allocUnif'+'orm']('cubeMapPro'+'jectionBox',()=>[{'name':'envBoxMin','value':new Float32Array(-0x2*-0x8d4+-0x1e20+-0x3*-0x429)},{'name':'envBoxMax','value':new Float32Array(0x2238+-0xc22+-0x1613)}]),_0x34dbe2=_0x6b1b87['cubeMapPro'+'jectionBox']['getMin'](),_0x2dd787=_0x37cfcc[-0x11fe+-0x397*0x3+0x1cc3]['value'];_0x2dd787[0x17eb*-0x1+-0x2*-0xec3+-0x59b]=_0x34dbe2['x'],_0x2dd787[0x1194+-0x911+0x63*-0x16]=_0x34dbe2['y'],_0x2dd787[-0x2d1+0x216*-0xb+0x19c5]=_0x34dbe2['z'];const _0x594cfa=_0x6b1b87['cubeMapPro'+'jectionBox']['getMax'](),_0x30beb7=_0x37cfcc[-0x1*0xcdd+0x13*0x9e+-0x2*-0x92]['value'];return _0x30beb7[0x132+0xf4b+-0x107d]=_0x594cfa['x'],_0x30beb7[-0x1*-0x74f+0x33*-0x25+0x11]=_0x594cfa['y'],_0x30beb7[-0x25ba*-0x1+0x206e+-0x2*0x2313]=_0x594cfa['z'],_0x37cfcc;}),ke('specularTi'+'nt',!(0xe7f+0x1ad1+-0x294f)),ke('specularit'+'yFactorTin'+'t',!(0xc73+-0x4c5+-0x7ad)),ke('useMetalne'+'ss',!(-0x1*0x214a+-0x266*-0xb+0x1*0x6e9)),ke('useMetalne'+'ssSpecular'+'Color',!(-0x3*-0x167+-0x1da7+-0x517*-0x5)),ke('useSheen',!(-0x217c*0x1+0x1*0x1225+0xf58)),ke('enableGGXS'+'pecular',!(-0x1d*-0x1+-0xf12+-0x2*-0x77b)),ke('occludeDir'+'ect',!(-0xead+0x2*0x913+-0x378)),ke('opacityFad'+'esSpecular',!(-0x18*-0x141+-0x264a+0x832)),ke('occludeSpe'+'cular',bd),ke('fresnelMod'+'el',Yp),ke('useDynamic'+'Refraction',!(0x1f49+-0x226b+0x323)),ke('cubeMapPro'+'jection',tm),ke('useFog',!(0x1499*0x1+0x11*-0xd+-0x13bc)),ke('useLightin'+'g',!(-0x1934+-0x5a9+0x1edd)),ke('useTonemap',!(0x7c*0x2d+0x2*0x503+-0x1fd2)),ke('useSkybox',!(-0x2548+-0x1e2+0x272a)),ke('forceUv1',!(-0x73c+-0x734*-0x4+-0x1593)),ke('pixelSnap',!(0xdbb+0x1*-0xa84+-0x336)),ke('twoSidedLi'+'ghting',!(-0xbfc*-0x3+-0x613*0x2+-0x17cd)),ke('nineSliced'+'Mode',void(0x1825+-0x17fd+0x2*-0x14)),ke('msdfTextAt'+'tribute',!(-0x2*0xd95+-0x6d9*0x4+0x1*0x368f)),ke('useIridesc'+'ence',!(-0x1f09+0x2*0xaa6+-0x1d*-0x56)),ke('glossInver'+'t',!(0x1ce1+-0x3*-0x6b1+0x3*-0x1051)),ke('sheenGloss'+'Invert',!(0x80b*0x1+-0x77*-0x29+-0x1b19)),ke('clearCoatG'+'lossInvert',!(-0x12d6+-0x1*-0x1ad+0xa9*0x1a)),ke('opacityDit'+'her',Sa),ke('opacitySha'+'dowDither',Sa),ke('shadowCatc'+'her',!(0x1591*0x1+0x1eed+-0x347d)),et('diffuse'),et('specular'),et('emissive'),et('thickness','g'),et('specularit'+'yFactor','g'),et('normal',''),et('metalness','g'),et('gloss','g'),et('opacity','a'),et('refraction','g'),et('height','g',!(0x59f+-0x872+-0x2*-0x16a)),et('ao','g'),et('light','rgb',!(-0xf9a*-0x1+-0x5a7*0x2+-0x113*0x4),0x2463+0x1d70+0x32*-0x151),et('msdf',''),et('diffuseDet'+'ail','rgb',!(-0x188*-0xf+0x216*-0x11+0xc7f)),et('normalDeta'+'il',''),et('aoDetail','g',!(-0x1eb*-0x14+-0x39+0x2622*-0x1)),et('clearCoat','g'),et('clearCoatG'+'loss','g'),et('clearCoatN'+'ormal',''),et('sheen','rgb'),et('sheenGloss','g'),et('iridescenc'+'e','g'),et('iridescenc'+'eThickness','g'),et('anisotropy',''),ke('diffuseDet'+'ailMode',p_),ke('aoDetailMo'+'de',p_),oo('cubeMap'),oo('sphereMap'),oo('envAtlas');const _0x54e863=function(){return this['_prefilter'+'edCubemaps'];},_0x24d937=function(_0x59aabb){const _0x16405b=this['_prefilter'+'edCubemaps'];_0x59aabb=_0x59aabb||[];let _0x57ed6a=!(-0xaa6+-0x1304+0x1dab),_0x288456=!(0xd49+0x614+0x1*-0x135d);for(let _0x2246e4=-0x10*0x207+0x16e7+0x1*0x989;_0x2246e4<-0xe25+0x2200+-0x13d5;++_0x2246e4){const _0x4e8319=_0x59aabb[_0x2246e4]||null;_0x16405b[_0x2246e4]!==_0x4e8319&&(_0x16405b[_0x2246e4]=_0x4e8319,_0x57ed6a=!(0xac*-0x30+-0x164a+0x368a)),_0x288456=_0x288456&&!!_0x16405b[_0x2246e4];}_0x57ed6a&&(_0x288456?this['envAtlas']=Tv['generatePr'+'efilteredA'+'tlas'](_0x16405b,{'target':this['envAtlas']}):this['envAtlas']&&(this['envAtlas']['destroy'](),this['envAtlas']=null),this['_dirtyShad'+'er']=!(0x2*0x9a5+-0x1*0xec3+-0x487));},_0x2a8f35=[null,null,null,null,null,null];um('prefiltere'+'dCubemaps',()=>_0x2a8f35['slice'](),_0x24d937,_0x54e863);}vb();const Rt=class Rt{static['render'](_0x4c56e9,_0x35e4e8){const _0x4317c1=_0x35e4e8['device'],_0x88c26a=_0x4c56e9['cells'],_0x3d8a37=_0x4c56e9['lightsBuff'+'er'],_0x442241=_0x3d8a37['boundsMin'],_0x4064e7=_0x3d8a37['boundsDelt'+'a'],_0x2fee76=_0x442241['clone']()['add'](_0x4064e7),_0x5002ac=_0x3d8a37['boundsDelt'+'a']['clone']()['div'](_0x88c26a),_0x4ca624=Rt['gridPositi'+'ons'],_0xe53ff2=Rt['gridColors'],_0x30f11b=new ie(0x16b3+0xe1+-0x1*0x1794+0.3,-0x1c4c+-0x136d*-0x1+0x8df+0.3,-0x1*-0x1dbf+0x14dd+-0x329c+0.3),_0x5a0f11=(_0x1d69bc,_0x179fdd,_0xf0865f,_0x3d7c3a,_0x491c48,_0x1553ca,_0x37e278,_0x497f68,_0x588b2c)=>{for(let _0x2d3a5c=0x191*0x7+0x13b6*-0x1+0x8bf;_0x2d3a5c<=_0x1d69bc;_0x2d3a5c++)for(let _0x1bfdd6=0x1847+0x1*0x256b+-0x6a*0x95;_0x1bfdd6<=_0x179fdd;_0x1bfdd6++){const _0x4a1bfc=_0xf0865f+_0x2d3a5c*_0x3d7c3a,_0xe5c06f=_0x491c48+_0x1bfdd6*_0x1553ca;_0x588b2c===0x1baf+-0xe57+0xd58*-0x1?_0x4ca624['push'](_0x4a1bfc,_0x37e278,_0xe5c06f,_0x4a1bfc,_0x497f68,_0xe5c06f):_0x588b2c===0x2b3*-0x1+-0x67*-0x1f+-0x9c5?_0x4ca624['push'](_0x4a1bfc,_0xe5c06f,_0x37e278,_0x4a1bfc,_0xe5c06f,_0x497f68):_0x588b2c===-0x2077+0x25e+0x1e1b*0x1&&_0x4ca624['push'](_0x37e278,_0x4a1bfc,_0xe5c06f,_0x497f68,_0x4a1bfc,_0xe5c06f);}};if(_0x5a0f11(_0x88c26a['x'],_0x88c26a['z'],_0x442241['x'],_0x5002ac['x'],_0x442241['z'],_0x5002ac['z'],_0x442241['y'],_0x2fee76['y'],-0x2035+-0x602+0x2637),_0x5a0f11(_0x88c26a['x'],_0x88c26a['y'],_0x442241['x'],_0x5002ac['x'],_0x442241['y'],_0x5002ac['y'],_0x442241['z'],_0x2fee76['z'],0x1*0x2227+-0xdf*-0xb+-0x2bbb),_0x5a0f11(_0x88c26a['y'],_0x88c26a['z'],_0x442241['y'],_0x5002ac['y'],_0x442241['z'],_0x5002ac['z'],_0x442241['x'],_0x2fee76['x'],-0x24*0x95+-0x21bb+0x36b1),_0x4ca624['length']){const _0x47f254=_0x4ca624['length']/(0x22d*0x11+0x20e3+-0x9fb*0x7);if(_0x47f254!==_0xe53ff2['length']/(-0x13b9+0x22ed*-0x1+0x36aa*0x1)){_0xe53ff2['length']=-0x1*0x1526+-0x1aa*0x2+-0x1e2*-0xd;for(let _0x1a18b2=0xf31+0x1*-0xc5e+-0x2d3;_0x1a18b2<_0x47f254;_0x1a18b2++)_0xe53ff2['push'](_0x30f11b['r'],_0x30f11b['g'],_0x30f11b['b'],_0x30f11b['a']);}_0x35e4e8['drawLineAr'+'rays'](_0x4ca624,_0xe53ff2),_0x4ca624['length']=-0x150a+0x21e8+0x7a*-0x1b;}let _0x127684=Rt['mesh'];_0x127684||(_0x127684=new Ge(_0x4317c1),_0x127684['clear'](!(-0x175b+0x61*0x2f+0x58c),!(-0x45+0x1*-0x1d3a+0x9*0x347)),Rt['mesh']=_0x127684);const _0x333f39=[],_0x12e007=[],_0x51e31c=[],_0x5b6de9=_0x4c56e9['_cells']['x'],_0x3b20e4=_0x4c56e9['_cells']['z'],_0x4c7974=_0x4c56e9['counts'],_0x32a206=_0x4c56e9['_maxCellLi'+'ghtCount'],_0x20f650=new D(),_0x34676b=new D(),_0x2fa10a=new D(),_0x2ab4e8=_0x4064e7['clone']()['div'](_0x88c26a);let _0x2b63b1=0x2279+-0x3c*0x9d+0x1*0x253;for(let _0x16598d=0x3f9+0x1102+-0x29*0x83;_0x16598d<_0x88c26a['x'];_0x16598d++)for(let _0x3d2f50=-0x74b+-0x4*-0x94e+-0x1ded;_0x3d2f50<_0x88c26a['z'];_0x3d2f50++)for(let _0x3af2d9=0x704+-0x647+0x7*-0x1b;_0x3af2d9<_0x88c26a['y'];_0x3af2d9++){const _0x3ab67b=_0x16598d+_0x5b6de9*(_0x3d2f50+_0x3af2d9*_0x3b20e4),_0x4ed79c=_0x4c7974[_0x3ab67b];if(_0x4ed79c>0x5*0x26a+-0x7*-0x20e+-0x1a74){_0x20f650['x']=_0x442241['x']+_0x2ab4e8['x']*_0x16598d,_0x20f650['y']=_0x442241['y']+_0x2ab4e8['y']*_0x3af2d9,_0x20f650['z']=_0x442241['z']+_0x2ab4e8['z']*_0x3d2f50,_0x34676b['add2'](_0x20f650,_0x2ab4e8),_0x333f39['push'](_0x20f650['x'],_0x20f650['y'],_0x34676b['z']),_0x333f39['push'](_0x34676b['x'],_0x20f650['y'],_0x34676b['z']),_0x333f39['push'](_0x34676b['x'],_0x34676b['y'],_0x34676b['z']),_0x333f39['push'](_0x20f650['x'],_0x34676b['y'],_0x34676b['z']),_0x333f39['push'](_0x34676b['x'],_0x20f650['y'],_0x20f650['z']),_0x333f39['push'](_0x20f650['x'],_0x20f650['y'],_0x20f650['z']),_0x333f39['push'](_0x20f650['x'],_0x34676b['y'],_0x20f650['z']),_0x333f39['push'](_0x34676b['x'],_0x34676b['y'],_0x20f650['z']),_0x2fa10a['lerp'](Rt['colorLow'],Rt['colorHigh'],_0x4ed79c/_0x32a206)['round']();for(let _0x1b01fd=-0x1d8a+0x83*-0x25+0x3079;_0x1b01fd<-0x5da+-0x198d+0xd*0x26b;_0x1b01fd++)_0x12e007['push'](_0x2fa10a['x'],_0x2fa10a['y'],_0x2fa10a['z'],0x1ec2+-0x26f5+0x834);_0x51e31c['push'](_0x2b63b1*(0x7cd*0x3+0x3ac+0x12d*-0x17)+(0x2*0xd46+-0x287*0x3+-0x12f7),_0x2b63b1*(-0x1*0x20cb+-0x3*0x653+0x1e*0x1ba)+(-0x23be+-0x22e*-0x9+0x1021),_0x2b63b1*(0x2455*-0x1+-0x9*0x1e5+0x356a)+(0x186e+-0x1867*0x1+-0x4)),_0x51e31c['push'](_0x2b63b1*(-0x29*0xe5+0x81c+0x1*0x1c99)+(-0x1df1+-0x24*0x48+0x6ae*0x6),_0x2b63b1*(0x257f+0x1edd*0x1+0x222a*-0x2)+(-0x12ca+-0x32+0x12fd),_0x2b63b1*(-0x946+-0x1684+0x1fd2)+(0x264a+-0x116c+-0x14dc)),_0x51e31c['push'](_0x2b63b1*(-0x859+-0x2b*-0x38+-0x107)+(0x12f1+-0xb1*-0x20+-0xdaf*0x3),_0x2b63b1*(0x153e+-0x16c5+0x85*0x3)+(-0x38b*-0x3+0x20d4+0x2b70*-0x1),_0x2b63b1*(-0x1f26+0x478+0x1ab6)+(0x1aa*-0xa+0x1*-0x2457+0x76*0x73)),_0x51e31c['push'](_0x2b63b1*(0x1162+-0x909+-0x851)+(0xa*-0x341+0x123*-0x1+-0x21b4*-0x1),_0x2b63b1*(-0xfd*0x1f+0x1924+0x587)+(0x1*-0x1f43+0x1*0x243d+-0x1*0x4f5),_0x2b63b1*(0x114a+0x1029+-0x216b)+(-0x7c0*0x1+0x17*-0x12f+-0x1*-0x22ff)),_0x51e31c['push'](_0x2b63b1*(-0x18c2+0xc1*0x25+-0x3*0x109)+(-0x992+0x56*0x10+-0x435*-0x1),_0x2b63b1*(-0xe71*-0x2+-0xa5*-0x33+0x45*-0xe5)+(0x366*-0x6+0x2*-0x36+-0x215*-0xa),_0x2b63b1*(-0x27d*-0xb+-0x1524+0x211*-0x3)+(-0x2176*-0x1+-0x486+-0x1cea*0x1)),_0x51e31c['push'](_0x2b63b1*(0x24b2+-0x90+-0x1*0x241a)+(-0x153d*-0x1+-0xe*0x3b+-0xb*0x1a3),_0x2b63b1*(-0x1*-0x14f6+-0x31c*-0x9+-0x1875*0x2)+(-0x925*-0x1+0x11a7*0x1+-0x1ac5),_0x2b63b1*(0x79e+-0x1db1*0x1+0x161b*0x1)+(0x9*-0x1bb+0x4*-0x7e6+0x2f31*0x1)),_0x51e31c['push'](_0x2b63b1*(0xd8f+-0x673+-0x714)+(-0x2b*0xd1+-0x484+0x27a0*0x1),_0x2b63b1*(-0x1238*-0x2+-0x227f+-0x1e9)+(-0x1146+-0x97*0x3+0x5*0x3cf),_0x2b63b1*(0x1*-0x2657+-0xcac*-0x1+0x19b3)+(-0xcac+-0x43a+0x10ea)),_0x51e31c['push'](_0x2b63b1*(-0x217d+-0x161a+-0x1eb*-0x1d)+(0xd53+0x1*0xa93+0xbf3*-0x2),_0x2b63b1*(0xa*0x281+-0x1065+0x23*-0x3f)+(-0x6*-0x2e7+-0x1122*-0x1+-0x2287),_0x2b63b1*(0x4*0x443+-0x172e+0x62a)+(-0x25d3+0x151*-0x1+0x2728)),_0x51e31c['push'](_0x2b63b1*(0x5e9+-0x2239+-0x38b*-0x8)+(0x26db+0xb71*0x2+-0x3dbc),_0x2b63b1*(-0xae3*-0x3+0x1*0x1fa2+-0x4043)+(-0x2586+0x7dc+0x1dae),_0x2b63b1*(-0xb74+0x49c+0x4*0x1b8)+(0xb*-0x14b+-0x104f+0x6*0x517)),_0x51e31c['push'](_0x2b63b1*(-0x13f1+-0x24ca+0x1*0x38c3)+(0x4cb+-0x161+0xf*-0x3a),_0x2b63b1*(0x2*-0x1148+-0x621*0x3+0x4d1*0xb)+(-0x1da6+0x1*-0x13ed+0x2*0x18cd),_0x2b63b1*(-0x15f*-0x17+0x266f+-0x45f0)+(0x1*0x29f+0x657*0x5+0x5b8*-0x6)),_0x51e31c['push'](_0x2b63b1*(0x1cad+0x1*0x1d70+-0x3a15)+(0x1ec8+-0x17*0x7+-0x1e22),_0x2b63b1*(0x1*0x15f3+-0x654+0xd*-0x133)+(-0x1abc+-0x187d+0x3339),_0x2b63b1*(-0x2*-0x272+0xe88+0x22*-0x92)+(-0x2023+-0xec1+0x2eea)),_0x51e31c['push'](_0x2b63b1*(-0x2239+0xd0c+0x1535)+(0x39c+-0xb*-0x2ff+-0x2491),_0x2b63b1*(-0x1*-0x12fa+-0x1*-0x18c+-0x147e)+(0x37*-0x1f+0x83*-0x1f+0x1689),_0x2b63b1*(0x2106*0x1+-0xce*0x25+-0x1*0x338)+(-0xca*-0x14+0x1*-0x161f+0x65d)),_0x2b63b1++;}}if(_0x2b63b1){if(_0x127684['setPositio'+'ns'](_0x333f39),_0x127684['setNormals'](new Float32Array(_0x333f39['length'])),_0x127684['setColors3'+'2'](_0x12e007),_0x127684['setIndices'](_0x51e31c),_0x127684['update'](js,!(-0x9*-0x41+0x18ae+0x77*-0x3a)),!Rt['meshInstan'+'ce']){const _0x4f50f9=new Ut();_0x4f50f9['useLightin'+'g']=!(-0x11a3+-0x11*-0xb9+0x1c9*0x3),_0x4f50f9['emissive']=new ie(0x1de+0x1c69*-0x1+0x1a8c,0x52f*0x4+-0x719+-0xda2,-0x1bf9+0x167*-0x1+0x1d61),_0x4f50f9['emissiveVe'+'rtexColor']=!(-0x505+0x226a+-0x12d*0x19),_0x4f50f9['blendType']=Ed,_0x4f50f9['depthWrite']=!(0x1e24*0x1+-0x231a*0x1+0x4f7),_0x4f50f9['update']();const _0x5dbf6e=new Ie('WorldClust'+'ersDebug');_0x5dbf6e['worldTrans'+'form']=te['IDENTITY'],_0x5dbf6e['_dirtyWorl'+'d']=_0x5dbf6e['_dirtyNorm'+'al']=!(0x1480+0xcd1+-0x2150),Rt['meshInstan'+'ce']=new He(_0x127684,_0x4f50f9,_0x5dbf6e),Rt['meshInstan'+'ce']['cull']=!(-0x275+0x23*-0x95+0x16d5);}const _0x5ab775=Rt['meshInstan'+'ce'];_0x35e4e8['immediate']['drawMesh'](_0x5ab775['material'],_0x5ab775['node']['worldTrans'+'form'],null,_0x5ab775,_0x35e4e8['defaultDra'+'wLayer']);}}};h(Rt,'gridPositi'+'ons',[]),h(Rt,'gridColors',[]),h(Rt,'mesh',null),h(Rt,'meshInstan'+'ce',null),h(Rt,'colorLow',new D(0x4*0x583+0x1a2b+0x2d6*-0x11,0x14d*-0x3+-0xa7*0x19+0x159*0xf,0x1*0x13ab+0x1*-0xcaf+-0x6fb*0x1)),h(Rt,'colorHigh',new D(0x76*-0x30+-0x12bc+-0x7d*-0x54,-0x7*0x28f+0x72*0xe+0xbad,-0x307*-0x1+0x178e+-0x551*0x5));let hu=Rt;const xb='muPIHORMLN'+'DCz4DxVR/Z'+'vYfAUVEFR4'+'7KRIC4nwAA'+'AAAP7WxlhD'+'6Ci+2HCe7B'+'F8jRAPZwdH'+'2UPpI5PdLC'+'JdkvG4UTaN'+'DJ/0crAzne'+'71GCrb4kbd'+'MjjCEGzdX6'+'fNxDMLJq5x'+'keoIVTdfiZ'+'kodEeArmZm'+'p/FQzFjD4x'+'8iOW7Dg64n'+'+3mWqyEwLx'+'XT8zoJXfbw'+'8QJKDCaarU'+'YyTlMzNFHb'+'gUe9IQV7g4'+'YOgtSKpIFZ'+'J0qERm7u4P'+'pmiF89ktHW'+'CywaGmD6h+'+'hfh2/Zd8KY'+'lKqqo4Cem4'+'T42bT/Z9Fp'+'CQF1hhSjfB'+'zZ5XFn/y3j'+'egWC6u86Ku'+'ELRundQS/1'+'Rp+XuKKGIg'+'Rv3CvP5y74'+'9yqLlFO495'+'JOT3+f2CXg'+'d71npU0/Kj'+'jpkZucbJ5m'+'78IVyuSrSo'+'zc9jgBUhDr'+'z0hFsyb7LF'+'UH9//wJbBg'+'LdNWJZObfK'+'xrNt8TliLA'+'9w9sXFv6g2'+'6iXpf6r/Bq'+'cAusj/QzGB'+'ZuoUGeEtw8'+'BCXCZ3jUiw'+'4hvM18ZVql'+'UD3C40LAFX'+'W6FRjuAZGR'+'Nstb0/qVk4'+'skwyT+MHrv'+'RorI4rKHVM'+'WZmKyAkzL/'+'78u/9pMQuX'+'14pZN50b2P'+'Hn6fRxeaCQ'+'LsfT4dpvIk'+'WWFuFVENZI'+'h+8xgR6lU+'+'85W0PPdAu1'+'j99kcCG40J'+'BQa4JMyRzq'+'6qriOBLtqF'+'87vpCJan0W'+'EduVr/mOYk'+'S00urVA0mA'+'6M3031+GmG'+'mW48PaJDYO'+'EIb3bIXWPa'+'LoAOEinX1T'+'N3+/vwhG6n'+'qJu0TdHped'+'S7QsGZIoxH'+'3nQYYjQP1j'+'mbahlbNngw'+'5ogsGk1y50'+'XZyUmQBY+/'+'JBJ3Unu4dA'+'pm+WmPwHPU'+'9gLb+4mHh4'+'BiY6M86pq+'+'WeTyWdI3s0'+'CXPEtHGXZ8'+'zMZgUoyRom'+'Bi1VdazzuN'+'+WOmQ9Pa0Z'+'0tlNopUi8A'+'J4x2Xn4mmO'+'KEbXLxlbVs'+'Wu8XhuDGYF'+'OGCRVdSqDP'+'XrHU5SDdUl'+'ti3k5///SB'+'wzTMwK3L4a'+'1H7w4lnpEa'+'s6////AfX8'+('asyIBfeFXV'+'J3tgvxQ/bl'+'ZuUKyIODIf'+'r/UzdWNu7p'+'ciLBpdZRZ4'+'pIfZ1R6szq'+'+XNxkGG///'+'8EZFpu7VHA'+'hFWqHEOrB9'+'unw+YQa5o8'+'/9IR/V5/zq'+'+986rJSyfg'+'JKt2u9hxU1'+'wzyQWPjJGv'+'zG9+eWWxGF'+'OHVKqI4jBQ'+'ALwZZswesn'+'vZ2UmmkEXd'+'iRpz8B+oWE'+'7PY70ZTMnd'+'isYSXg2Tqo'+'I+3y9BxbnY'+'2Y4EfbdcRh'+'AvG59NqDEN'+'NYbxKvK5HJ'+'fPG5M+Wi2A'+'cpLVJrD6ca'+'iEOzgSoVNS'+'gQK8fm2M3z'+'GcF4xtClv/'+'8Hs9oD7C3j'+'itTATYNQxm'+'KqKf1LhIxz'+'f1bmfiNn7U'+'KFmcJu4sLq'+'VLwxGSue3t'+'aBEyknkw5h'+'XTsUCvqmmL'+'/f8n/w0giR'+'7Hu/9EHvpk'+'z3yuu64Tio'+'MkzdTJ30i0'+'+hFnQqW1+v'+'9mMwq+z9qG'+'X0UFu9Momv'+'VG2xod6vc1'+'2AAAAACq7s'+'Ga5qptFR0j'+'F3nQt/D+7P'+'ibKYahaxP3'+'hEixPbGi9n'+'wNf2LAa7Lk'+'EZRKxzXeCD'+'64Xpii5n+8'+'Kpg8eHIv7A'+'WXZltgMoGl'+'tmoJ0XGdOC'+'L8WkzphvR9'+'N2o3ARSZ42'+'l5e5Pe4B58'+'MCRlP3EKv+'+'mcloknH+ft'+'o5BWsmEutW'+'6KvjOVsznF'+'CktkSczVk4'+'aGvj9VXlRc'+'LeDoKG8RkB'+'gdcNG2bf8H'+'UL4MT2DM+a'+'r7NImJhKpx'+'akX4Vk0CnP'+'+/XNhl5UsP'+'0lXgeZXPoD'+'BMSW5An+DX'+'lTCO5FQGwS'+'PYwHLKYVIi'+'mEdAoVe49r'+'QLaaNcye5L'+'xU2/c5TijT'+'gJtD5eQQIe'+'1snxauj5jZ'+'sxJBUJdoP/'+'zqpjqv8qBr'+'uoPsVsP8N4'+'4PCUW5Dd0D'+'zqjSS/Dl5m'+'I9cn1w2ndN'+'/0KAEm1QAA'+'AACwu6KM/0'+'83IBbH5bPa'+'/9oHUwcU8I'+'9v3j6/v18Q'+'Yammrf+P6V'+'L///8BrpuM'+'3fOLCxaLNO'+'FNF1zPbPYT'+'P65ni6njft'+'4eVcyrVXRQ'+'Frs52tr35S'+'tiSp55edVD')+('CBC0H5rIfa'+'c6nzUwxQSt'+'7y15QoKb+5'+'zebEQUmVbr'+'PjXuUa19Ey'+'7sqXMiSUKH'+'aw72PJKDdr'+'utJoQr3u6l'+'EYJ8K0MakW'+'Kj9zjTFi4X'+'94TsKYco0G'+'rLeB60M6D8'+'M/80rhXUW8'+'iMequg8y5F'+'838WI0+gp3'+'GBN5Kj/xIO'+'xTWQuUaPV/'+'LwvARr1VH9'+'3BFgGZR1MF'+'W0Ua30GbYm'+'dnAgo9VWy8'+'SQtpDUgGE2'+'r2zq2eTEMC'+'L7sMKmE1hc'+'hVhuF/TCq9'+'iXKEm86kzO'+'f3Rp9ZnCxb'+'pDUj+FKNxV'+'yXe6pVZkRX'+'v/m95SnB/E'+'B8aME29N85'+'MtAcDoXWlo'+'r8De2Q5Dg1'+'tar+8wgiZu'+'fbMam81j//'+'ASUohoR/zS'+'h2KG4bvT6m'+'kIPz6C5/98'+'DC3LaWlaEZ'+'1zA5JORZRu'+'6J/a0GY285'+'sEYzw71YqO'+'T1ihAG0z5S'+'Dt1xNiDQWZ'+'dFpndArp6x'+'WhqSDkRb4k'+'SJEHb9liPv'+'w7uLV/6i5M'+'Vf//A9Qjr8'+'xkAEUh+KDI'+'+zdtJ68d6M'+'BOktg1iyp/'+'SCq8O9f5pb'+'amn1VVVQPR'+'TWqNBvhQKa'+'07s6P0lc9L'+'uu/3gw4Hey'+'OUfz8MxMwV'+'4UQhua+t9c'+'r4bz/nIB2w'+'nDSK1K7I94'+'M+s6C84hta'+'X/CNlMQUSs'+'2KJO+yaebf'+'TbkNX5yWcq'+'EJevo0vbKU'+'iETuFXiL01'+'9A3E+lmsyZ'+'MwXrXLLiQA'+'Z5t9+jI3Jo'+'bhJTMiDH5Z'+'OQ+8Jau555'+'5NMjHSscP9'+'qCVaa40doh'+'+1a3Ukf6jq'+'BmLddgh79/'+'fwTfCyqiul'+'dNkUoy+nUp'+'+4nerwg0Oj'+'tGv2x485PJ'+'OJvUEokNhY'+'IdWjpx7BWk'+'0VZGWOp3jS'+'FTJ2bnu6KC'+'duZtG/UcBC'+'9RZ3W/jMSf'+'SMw4Etr/Do'+'D/XYP2V5Ov'+'w+YoM3F5g2'+'dGLdvuG6Zk'+'VGLE6Dk5Zr'+'+sdSyGliJP'+'1y2OFf/KFO'+'0RWO+3gsGh'+'esTnfZVpTd'+'8/HwgO216g'+'waqo+vY3Tl'+'jfJWowY+i0'+'p0Os4SLn/1'+'wLqDHMlszg')+('gmT/D8MRFz'+'s+pLv6LNJS'+'sNZ/r41mWi'+'/rF6ZcKp/y'+'zJdK0VU44h'+'skq3RGpgO6'+'mIpJDsf/mZ'+'kFrz0yYOML'+'buaj/wp1v7'+'JMFM5eqvBh'+'mTd7U8frQA'+'tHtys4zgpj'+'ZmzUhOVTfN'+'NLifElGXAD'+'lqHGKrkBT/'+'nYwX8ZRm3R'+'jvyPvjKyEq'+'EGKUpVnvOG'+'x+NKPHiWM/'+'/ZDpDVGvvr'+'jmk8RPF/wi'+'YZD3+Us8YC'+'XjrVOfjdd1'+'UPAfjLp8jg'+'Sn4me7DPTp'+'z1Ggy9XL80'+'guFO7ECT10'+'AvILKfD18Q'+'x+KY/f8aRq'+'u0oOO8hfKR'+'FZa9PUJwCs'+'p6VdZz6LFk'+'m2b9Pl2LIi'+'fCwzRy7Tpd'+'G2uAtOxP2O'+'emY26bJMa9'+'ZGSLIRlMsg'+'pDpnDJwd0o'+'a5pQ13x1hr'+'Hf52HpulUW'+'onGWsfXZbS'+'QYKu9bnEN7'+'6ciQih0opN'+'3deDVrbrxo'+'rfVlnCmL1R'+'9zq3ePGWIv'+'21c7pW8kEi'+'FTM5JX8dAw'+'867s/60cf7'+'9/BH+MDFCZ'+'BHlz1L+qGO'+'Jf/1txhhmr'+'f3//As+RIJ'+'wevDb+fgNX'+'VeHw67QptZ'+'egayhrEwr5'+'Gy+EPo1RLa'+'MtPbqOZYoV'+'zXzwzjMFWZ'+'xyUG9YUIf6'+'////AQWy84'+'iAygLk9COt'+'Xt92+0mT/x'+'g0zMzMBeLk'+'b8y9SL2TDX'+'gSX422hDgp'+'GNLJyuPioA'+'+YJ91G8znr'+'pNqHkwYysc'+'aJDEc9Vc+j'+'4cXle3hvcd'+'2JqDQH2lBZ'+'xDn6mUTs0b'+'75raMvbs72'+'7codX01Anj'+'8f3wir9P2x'+'QaQ22v/TxC'+'MglKDFoTja'+'P01XTLgxnT'+'vPv02JgEUr'+'W6UDgOnobF'+'pLdvKdlypg'+'IzPcq14fgX'+'U5tvVW0FEs'+'7VRlsG1IyA'+'69fN4n+awH'+'hT34cE+xUv'+'dj86C8LgAs'+'FheTjI9Ht9'+'EyYAAAAAAV'+'BVKRx2wLgU'+'TI0/2QfyJo'+'2riRw3JDqz'+'EShmx/Lifo'+'6mRkQVbS7X'+'53t+EvKxcX'+'ogtdts31e9'+'MRHdcHgsA8'+'rt4/mt2unl'+'zQ/wsU8Gu7')+('+W6Oj7eD8E'+'QdDp5XlCsV'+'aS/AV/t5Zp'+'POHR3rGpyA'+'Je9IPV+xMr'+'BL1Oz/8MQh'+'Fs31h0N1cV'+'nq371uqIJY'+'HyafKH1jte'+'AK3VpMXBcu'+'C+yt0ZeKyR'+'UY4QhdrJJ4'+'tJ1wg3Hu6k'+'DsbovxupTM'+'kGdRrm8oZS'+'oYPbJ+PwH/'+'xotgTdkA12'+'05vUEfnqkI'+'04T/fnnd1f'+'iZW5AwNcgg'+'d7fi4j5zas'+'mcntZexIxq'+'FZQMzMJpfn'+'dmI5jn17cg'+'n5EV5t9XN0'+'C///8Q9wlJ'+'pMGXdoiaMT'+'G2sVyHQsn8'+'mWRISCLNG7'+'77S0OuDRP2'+'GlLcJ2UeOg'+'7Fo8hTNPeJ'+'//iTJhyqxh'+'KRUntdXOih'+'q2wfKfH///'+'8B0GGrwT+f'+'SOQRdctKxj'+'jGCSS11d6B'+'lQ9BDfE0J6'+'Z25FaNTKGp'+'FKNCMr2G/0'+'41KpWwBLVe'+'1k08vncseQ'+'bKZdXi8x1t'+'9XA45U/Wd4'+'3D9wAh3Tal'+'0aiLVzGPus'+'OZ1F+W3TWo'+'qlX/A95+dN'+'ef11TsuGfu'+'l+ctGssldk'+'3fqpfqh+43'+'XTxL42+leS'+'HoF/dWHYGX'+'6maqUEuLX7'+'UB+r/6Llr4'+'LKocbVIeu+'+'hB9QTPfz9f'+'CP8RyWmX4S'+'mbhMFsNtCi'+'jV7lVcwejL'+'Klvl0GfCnd'+'nWV7/39VBr'+'tTRuUx92ok'+'e3GBgKkC5f'+'dGK0YvNK+x'+'enKaDmsHDj'+'NFUM3NMz3Z'+'iXXFuLgojo'+'sPVCDEl2W5'+'BjX3Ms+j0G'+'SqACHmh0+R'+'PWyuNm/Qe8'+'vFf9AW7N1u'+'RaxWirrUyt'+'qEJnJ4/Flm'+'8hSoiZ2NQB'+'sS6w/yQlC4'+'gCaFo8q4ny'+'Y6AFdo4hiw'+'hBXzbNKKvZ'+'vktCjSCukR'+'R/BbYVbNwZ'+'i2Yh3hGodE'+'acLW8qijiW'+'JODf0P2bhf'+'aiPspPT4lY'+'JBgi/KfcFw'+'CfvyUIgkJO'+'v///8CG/JE'+'epRBLaMFE+'+'2TgrqsJXOV'+'OWHt6g/bFw'+'VLLMVBsMR5'+'0dis/39/Al'+'BX+/rMTJkU'+'QrnlxpR2iu'+'0Tp8tATkRY'+'GmDIrcAiRP'+'8PjoWIlb7/')+('0ecTdSCE9Y'+'58+a+n/Fov'+'JQTVF4F2jA'+'xMZhTgrM/K'+'VS5BQu6bVb'+'kWY5HXnxRs'+'hks3urDdW4'+'RkWp4M4TeL'+'mFK5KF/uHk'+'kiO5Kv96Ri'+'oH984v/CSD'+'BnG+BwlnU9'+'B+o7Y+0X0N'+'ob+0pLsStx'+'jvPXMy2eCp'+'zhOWV4XbOb'+'BHN4UE2sLQ'+'/DIqXhOzxV'+'f38GlTi6aG'+'7EnePO7TRJ'+'m9yOfUUcqq'+'1I2iQHrVDq'+'n3TUNRi/lM'+'w8KbMW/3/n'+'qCz/Ef8PoW'+'5Qxcz2yHR/'+'f78EPB2Stb'+'d+ZFmfNTUY'+'ILzsb9YNhp'+'aHcaymYrBi'+'NHmFE3Y4cc'+'YJ25Prqm7z'+'HobGHED8/9'+'3ZNlWro9vc'+'KivGZs31Ui'+'K1k5zjUhex'+'UgbqJb+fUT'+'jxce/7Zly8'+'a5KMC1fX5n'+'fjPgibdvzb'+'XV1jRT2asX'+'vmSAusaLdq'+'1TSIJ8fXIN'+'k5AtT34EWP'+'AsfP9IFQqM'+'5K11O6saoH'+'JA==');let Vi=null;const Av=()=>{if(!Vi){const _0x34e9c2=atob(xb);Vi=Uint8Array['from'](_0x34e9c2,_0x2bc729=>_0x2bc729['charCodeAt'](-0x49d*-0x1+0x1f3c+0x13*-0x1e3));}},Tb=()=>(Av(),Vi);class wb{constructor(_0x40c920=-0xaa7+0xcef+-0x248){h(this,'seed',-0x37c+0x3*-0x24a+0x5*0x212),(this['seed']=_0x40c920*(-0x1d5d+0x193a+0x427),Av());}['_next'](){this['seed']=(this['seed']+(-0x1*-0x2415+0x90f+-0x2*0x1690))%Vi['length'];}['value'](){return this['_next'](),Vi[this['seed']]/(-0xb81+0x2153+-0x14d3*0x1);}['vec4'](_0x326785=new re()){return this['_next'](),_0x326785['set'](Vi[this['seed']],Vi[this['seed']+(-0x105e+0x1004+0x5b)],Vi[this['seed']+(0x1*-0x206+0x9c+-0x5b*-0x4)],Vi[this['seed']+(-0x9f1+0x2341+-0x194d)])['mulScalar']((0x1904+0x120a+-0x2b0d)/(0x31*-0x9b+0x1421+0xa89));}}const Eb=[new D(-(-0x2205*-0x1+0x45*0x13+0x2b*-0xe9),-0x1441+-0x1750+-0x24b*-0x13,0x2143*0x1+0x237d+0x140*-0x37),new D(-0x1*-0x23de+-0xe6a+-0x1573,-0x83*-0x2f+-0xfe*-0x10+-0x3*0xd4f,0x3*0x7+-0x811*-0x3+-0x18*0x103),new D(-0x2397+0x1627*0x1+0x2b*0x50,-(0x2509+0x3*-0x401+0x1ab*-0xf),0x1*-0x1a24+0x2692+-0xc6e),new D(-0x10b1+0xb*0x28d+-0xb5e,0x1cc1+0x2103+0xa3*-0x61,0x107d+-0x623*-0x2+-0x1cc3),new D(-0x27*-0xd9+0x71b+-0x282a,-0x1a45+-0xd48+0x1b*0x177,-(0x250b*-0x1+-0x2351*0x1+0x485d)),new D(-0x2260+0x15ec+0xc74,0x15*-0x9d+0x19ce+-0xced,-0x9b9*-0x1+-0x2aa+0x25a*-0x3)];class bb{constructor(){h(this,'colors',new Float32Array(-0x16b*0x16+0x56d+0x19d7));}['update'](_0x149801,_0x3cb78d){const _0x248530=this['colors'],{r:_0x442fce,g:_0x391518,b:_0x5a6703}=_0x149801;for(let _0xe0178c=0x1*0x258d+-0x1bd2+0x35*-0x2f;_0xe0178c<-0x362+0x1*-0xee1+0x1249*0x1;_0xe0178c++)_0x248530[_0xe0178c*(-0x2d4*-0x8+-0xf4c+-0x751)]=_0x442fce,_0x248530[_0xe0178c*(-0x58a+0x22a5+-0x1d18)+(-0x1c33+0x2*0x368+0x1564)]=_0x391518,_0x248530[_0xe0178c*(-0x3*-0x9b+-0x2*-0x291+0x6f*-0x10)+(0xceb*0x1+0x1*-0x49f+0x1*-0x84a)]=_0x5a6703;for(let _0x292604=-0x1*0x1949+0x2*0xa6+0x45*0x59;_0x292604<_0x3cb78d['length'];_0x292604++){const _0x191736=_0x3cb78d[_0x292604];if(_0x191736['_type']===ve)for(let _0x5dd759=-0x23bd+0x8*-0x360+0x3ebd;_0x5dd759<0x14fa+-0x2c6*-0x4+0x2*-0x1006;_0x5dd759++){const _0x3c030b=Math['max'](Eb[_0x5dd759]['dot'](_0x191736['_direction']),0x269e*0x1+-0x23*-0x57+0x1*-0x3283)*_0x191736['_intensity'],_0x28fb9a=_0x191736['_color'];_0x248530[_0x5dd759*(-0x5*-0x58d+0x5*-0x3b2+0x944*-0x1)]+=_0x28fb9a['r']*_0x3c030b,_0x248530[_0x5dd759*(0x15a2+-0x1eec*-0x1+-0x348b)+(0xb42+0x141e+-0x1f5f)]+=_0x28fb9a['g']*_0x3c030b,_0x248530[_0x5dd759*(0x11*-0x117+-0x244c+-0x36d6*-0x1)+(-0xe8b+0x124*-0x14+-0x5*-0x779)]+=_0x28fb9a['b']*_0x3c030b;}}}}const Ab=(_0x46dbe2,_0x1444e7,_0x5d8ea8,_0x4e4a2a)=>{const _0x2d0540=new _e(_0x46dbe2,{'name':''+_0x1444e7+_0x5d8ea8,'width':_0x5d8ea8,'height':_0x5d8ea8,'format':Ne,'addressU':yt,'addressV':yt,'type':Ds,'magFilter':Te,'minFilter':Te,'anisotropy':0x1,'mipmaps':!(-0x41*-0x24+0x19fc+-0x231f)});return _0x2d0540['lock']()['set'](_0x4e4a2a),_0x2d0540['unlock'](),_0x2d0540;},Cb=new Kt(),Pb=_0x5c1d06=>Cb['get'](_0x5c1d06,()=>{const _0x3efdab=Tb(),_0x3016b2=Math['sqrt'](_0x3efdab['length']/(-0xfa9+-0xa61+0x1a0e));return Ab(_0x5c1d06,'BlueNoise',_0x3016b2,_0x3efdab);});class va{constructor(_0x49c4bc,_0x211487){this['texture']=_0x49c4bc,this['cached']=!(-0x1af1+0x1e13+-0x321),this['renderTarg'+'ets']=_0x211487;}['destroy'](){this['texture']&&(this['texture']['destroy'](),this['texture']=null);const _0x179b7a=this['renderTarg'+'ets'];for(let _0x5c8d66=-0x2065*-0x1+-0xca3*-0x1+-0x2d08;_0x5c8d66<_0x179b7a['length'];_0x5c8d66++)_0x179b7a[_0x5c8d66]['destroy']();this['renderTarg'+'ets']['length']=0x4*0x2b+0x11*-0x21f+-0x2363*-0x1;}static['create'](_0xba6efa,_0xe7d602){let _0x2d6514=null;return _0xe7d602['_type']===Ke?_0x2d6514=this['createCube'+'map'](_0xba6efa,_0xe7d602['_shadowRes'+'olution'],_0xe7d602['_shadowTyp'+'e']):_0x2d6514=this['create2dMa'+'p'](_0xba6efa,_0xe7d602['_shadowRes'+'olution'],_0xe7d602['_shadowTyp'+'e']),_0x2d6514;}static['createAtla'+'s'](_0x5988cc,_0x4c8362,_0x3537a5){const _0x3d3a55=this['create2dMa'+'p'](_0x5988cc,_0x4c8362,_0x3537a5),_0x3d48ac=_0x3d3a55['renderTarg'+'ets'],_0x1cd25=_0x3d48ac[-0x2523*-0x1+-0x2006+-0x51d];for(let _0xf8eddf=0x26e9*0x1+0x1*-0x235d+-0x2*0x1c6;_0xf8eddf<0x1*0x602+-0x26ef+-0x20f2*-0x1;_0xf8eddf++)_0x3d48ac['push'](_0x1cd25);return _0x3d3a55;}static['create2dMa'+'p'](_0x545038,_0x1f527e,_0x2eb39f){var _0x253336;const _0x3d0278=qi['get'](_0x2eb39f);w['assert'](_0x3d0278);let _0x126c09=_0x3d0278['format'];_0x126c09===Ji&&!_0x545038['textureFlo'+'atRenderab'+'le']&&_0x545038['textureHal'+'fFloatRend'+'erable']&&(_0x126c09=od);const _0x3f4c2c=(_0x253336=Nt['get'](_0x126c09))==null?void(-0x33*0x4+-0xc0c+0xcd8):_0x253336['name'];let _0x2f5ef2=vt;_0x2eb39f===Jp&&(_0x2f5ef2=_0x545038['extTexture'+'FloatLinea'+'r']?vt:Te),_0x2eb39f===al&&(_0x2f5ef2=Te);const _0x551d54=new _e(_0x545038,{'profilerHint':eu,'format':_0x126c09,'width':_0x1f527e,'height':_0x1f527e,'mipmaps':!(0x1f1b+0xef*-0x12+-0xe4c),'minFilter':_0x2f5ef2,'magFilter':_0x2f5ef2,'addressU':ue,'addressV':ue,'name':'ShadowMap2'+'D_'+_0x3f4c2c});let _0x48638f=null;return _0x3d0278!=null&&_0x3d0278['pcf']?(_0x551d54['compareOnR'+'ead']=!(-0xa16+0x1f18+-0x1*0x1502),_0x551d54['compareFun'+'c']=hh,_0x48638f=new gt({'depthBuffer':_0x551d54})):_0x48638f=new gt({'colorBuffer':_0x551d54,'depth':!(0x1c9+0x1d4b+0x12*-0x1ba)}),_0x545038['isWebGPU']&&(_0x48638f['flipY']=!(-0x5*-0x64+-0xc2e+0xa3a)),new va(_0x551d54,[_0x48638f]);}static['createCube'+'map'](_0x39feb6,_0x1bc9ac,_0xf5b147){var _0x3a6716;const _0x15d5fb=qi['get'](_0xf5b147);w['assert'](_0x15d5fb);const _0x5f573b=(_0x3a6716=Nt['get'](_0x15d5fb['format']))==null?void(-0x4fe+0xdbc+-0x8be):_0x3a6716['name'],_0x12e87e=_0xf5b147===al,_0x587438=_0x12e87e?Te:vt,_0x3cf63d=new _e(_0x39feb6,{'profilerHint':eu,'format':_0x15d5fb==null?void(-0x5*-0x493+0x15a*-0x9+-0xab5):_0x15d5fb['format'],'width':_0x1bc9ac,'height':_0x1bc9ac,'cubemap':!(0x1*0xc05+-0x587+-0x67e),'mipmaps':!(0xf5a+0x1b*-0x12f+-0x427*-0x4),'minFilter':_0x587438,'magFilter':_0x587438,'addressU':ue,'addressV':ue,'name':'ShadowMapC'+'ube_'+_0x5f573b});_0x12e87e||(_0x3cf63d['compareOnR'+'ead']=!(0xfe6+0x1bfb*-0x1+0x3*0x407),_0x3cf63d['compareFun'+'c']=hh);const _0x8aea3=[];for(let _0xf2bd1c=0x1dd4+-0x6ff+-0x16d5;_0xf2bd1c<0x9*-0x269+0xf7*0x26+0x59*-0x2b;_0xf2bd1c++)_0x12e87e?_0x8aea3['push'](new gt({'colorBuffer':_0x3cf63d,'face':_0xf2bd1c,'depth':!(0x1*0x1dc8+0x6a1*0x1+-0x2469)})):_0x8aea3['push'](new gt({'depthBuffer':_0x3cf63d,'face':_0xf2bd1c}));return new va(_0x3cf63d,_0x8aea3);}}const Mb=[],Db=[],xi=new re(),ef=new re();class tf{constructor(_0x2bc618){this['size']=Math['floor'](_0x2bc618['w']*(0xfef+-0x1965+0xd76)),this['used']=!(0x13f7*0x1+-0x2d*-0x17+-0x1801),this['lightId']=-(0xb79*0x1+-0x425*0x4+0x6d*0xc),this['rect']=_0x2bc618;}}class Ib{constructor(_0x365f5a){this['device']=_0x365f5a,this['version']=-0x711+0xf46+-0x834,this['shadowAtla'+'sResolutio'+'n']=0x2*0x8bf+-0x17*-0xdd+0x1*-0x1d59,this['shadowAtla'+'s']=null,this['shadowEdge'+'Pixels']=0x1*0x6bb+0x1*0x10d5+0x178d*-0x1,this['cookieAtla'+'sResolutio'+'n']=-0x859*-0x3+-0x1513+-0x3f4,this['cookieAtla'+'s']=new _e(this['device'],{'name':'CookieAtla'+'s','width':this['cookieAtla'+'sResolutio'+'n'],'height':this['cookieAtla'+'sResolutio'+'n'],'format':_s,'cubemap':!(0x22fb+0x24bf+-0x2b*0x1ab),'mipmaps':!(-0x8b5+0x2527*-0x1+0x2ddd),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue}),this['cookieRend'+'erTarget']=new gt({'colorBuffer':this['cookieAtla'+'s'],'depth':!(-0x229d*0x1+-0x4b9+0x1b*0x175),'flipY':!(-0x1aab*0x1+0x1*0x1a37+0x74)}),this['slots']=[],this['atlasSplit']=[],this['cubeSlotsO'+'ffsets']=[new J(-0x2*-0x62b+0x3*0x7f1+-0x2429,0x221e+-0x16a5+-0x21*0x59),new J(-0x6d1*-0x5+-0xa*0x2c9+-0x63b,-0x2*-0x745+-0x13b4+0x52b),new J(-0x2cd+-0x97*0x7+0x5*0x163,0x2b5*-0xb+-0x1197+0x81*0x5e),new J(-0xa*-0xcb+0x109*0xf+-0x1774,-0x50*0x1+-0x11a*-0x5+-0x531),new J(0x1360+-0x1d7f+0xa21,0x3*0x724+0x1135+0x13f*-0x1f),new J(0x1e7*-0xd+0x3b*-0x22+0x2093,0x101*-0x5+0x1cad*-0x1+0x1*0x21b3)],this['scissorVec']=new re(),this['allocateSh'+'adowAtlas'](-0x1d4+0x1*-0x13e7+0x34*0x6b),this['allocateCo'+'okieAtlas'](0x20e*-0x4+-0x324+0xb5d*0x1),this['allocateUn'+'iforms']();}['destroy'](){this['destroySha'+'dowAtlas'](),this['destroyCoo'+'kieAtlas']();}['destroySha'+'dowAtlas'](){var _0x3530a1;(_0x3530a1=this['shadowAtla'+'s'])==null||_0x3530a1['destroy'](),this['shadowAtla'+'s']=null;}['destroyCoo'+'kieAtlas'](){var _0x465fc7,_0x399765;(_0x465fc7=this['cookieAtla'+'s'])==null||_0x465fc7['destroy'](),this['cookieAtla'+'s']=null,(_0x399765=this['cookieRend'+'erTarget'])==null||_0x399765['destroy'](),this['cookieRend'+'erTarget']=null;}['allocateSh'+'adowAtlas'](_0x5059a5,_0x4dbf69=$s){var _0x4e20d3;const _0x395690=(_0x4e20d3=this['shadowAtla'+'s'])==null?void(-0x1*-0x11d9+0x25b3+-0x378c):_0x4e20d3['texture']['format'],_0x12661b=qi['get'](_0x4dbf69)['format'];if(!this['shadowAtla'+'s']||this['shadowAtla'+'s']['texture']['width']!==_0x5059a5||_0x395690!==_0x12661b){this['version']++,this['destroySha'+'dowAtlas'](),this['shadowAtla'+'s']=va['createAtla'+'s'](this['device'],_0x5059a5,_0x4dbf69),this['shadowAtla'+'s']['cached']=!(0xe3*0x29+0x1628*0x1+0x1*-0x3a83);const _0x539147=(0x8a8+0x16c5+-0x1f69)/this['shadowAtla'+'sResolutio'+'n'];this['scissorVec']['set'](_0x539147,_0x539147,-(-0xa3a+-0x1fa6+0x14f1*0x2)*_0x539147,-(0x1642+0x8d4+-0x1f14)*_0x539147);}}['allocateCo'+'okieAtlas'](_0x191ac8){this['cookieAtla'+'s']['width']!==_0x191ac8&&(this['cookieRend'+'erTarget']['resize'](_0x191ac8,_0x191ac8),this['version']++);}['allocateUn'+'iforms'](){this['_shadowAtl'+'asTextureI'+'d']=this['device']['scope']['resolve']('shadowAtla'+'sTexture'),this['_shadowAtl'+'asParamsId']=this['device']['scope']['resolve']('shadowAtla'+'sParams'),this['_shadowAtl'+'asParams']=new Float32Array(0x29*0xc1+0x2f*0x35+0xe*-0x2e7),this['_cookieAtl'+'asTextureI'+'d']=this['device']['scope']['resolve']('cookieAtla'+'sTexture');}['updateUnif'+'orms'](){const _0x416445=this['shadowAtla'+'s']['renderTarg'+'ets'][-0x6*0x62f+-0x12fb+0x1*0x3815]['depthBuffe'+'r'];this['_shadowAtl'+'asTextureI'+'d']['setValue'](_0x416445),this['_shadowAtl'+'asParams'][0x172f+-0xdfd*0x2+0x4cb]=this['shadowAtla'+'sResolutio'+'n'],this['_shadowAtl'+'asParams'][-0x1355*0x1+-0x1d9b*0x1+0x30f1]=this['shadowEdge'+'Pixels'],this['_shadowAtl'+'asParamsId']['setValue'](this['_shadowAtl'+'asParams']),this['_cookieAtl'+'asTextureI'+'d']['setValue'](this['cookieAtla'+'s']);}['subdivide'](_0x257f06,_0x366faa){let _0x426e7a=_0x366faa['atlasSplit'];if(!_0x426e7a){const _0x5b176f=Math['ceil'](Math['sqrt'](_0x257f06));_0x426e7a=Db,_0x426e7a[-0x586+0x88*0x22+-0xc8a]=_0x5b176f,_0x426e7a['length']=0x9c3*0x3+0x1c97+-0x39df;}if(!((_0x3c990e,_0x282683)=>_0x3c990e['length']===_0x282683['length']&&_0x3c990e['every']((_0x1decbf,_0x1bb5dc)=>_0x1decbf===_0x282683[_0x1bb5dc]))(_0x426e7a,this['atlasSplit'])){this['version']++,this['slots']['length']=0x1393+0x1813*-0x1+0x18*0x30,this['atlasSplit']['length']=-0x30*-0x45+0x65d*-0x3+0x627,this['atlasSplit']['push'](..._0x426e7a);const _0x367a50=this['atlasSplit'][0x25*-0x20+0x23*-0xed+0x2507];if(_0x367a50>0x20dc+-0x3*-0x431+0x916*-0x5){const _0x2ca743=(0x2645+0x1792+-0x3dd6)/_0x367a50;for(let _0x280990=0x5*0x67d+0xba*0x19+-0x329b;_0x280990<_0x367a50;_0x280990++)for(let _0x50ec19=-0xb*-0x235+0x183d+-0x5c*0x87;_0x50ec19<_0x367a50;_0x50ec19++){const _0x3f00ff=new re(_0x280990*_0x2ca743,_0x50ec19*_0x2ca743,_0x2ca743,_0x2ca743),_0x461d9c=this['atlasSplit'][0xa4d+-0x10c5*0x1+0x679+_0x280990*_0x367a50+_0x50ec19];if(_0x461d9c>-0x10*0x95+0x1096+-0x745){for(let _0x4af34d=0xa7*0x6+0xcfc*0x1+-0x5a2*0x3;_0x4af34d<_0x461d9c;_0x4af34d++)for(let _0x589f49=-0xe83+-0x92d+0x17b0;_0x589f49<_0x461d9c;_0x589f49++){const _0x5a9940=_0x2ca743/_0x461d9c,_0x44a5b5=new re(_0x3f00ff['x']+_0x4af34d*_0x5a9940,_0x3f00ff['y']+_0x589f49*_0x5a9940,_0x5a9940,_0x5a9940);this['slots']['push'](new tf(_0x44a5b5));}}else this['slots']['push'](new tf(_0x3f00ff));}}else this['slots']['push'](new tf(new re(0x20be+0x1*-0x11b+0x5b*-0x59,-0x310*0x3+-0x130c+-0x34*-0x8b,0x4a8*-0x1+-0x6*0x223+-0x5*-0x37f,-0x4f9*-0x1+-0x2585*0x1+0x208d)));this['slots']['sort']((_0x595933,_0x3ab546)=>_0x3ab546['size']-_0x595933['size']);}}['collectLig'+'hts'](_0x59071a,_0x3de330){const _0x205465=_0x3de330['cookiesEna'+'bled'],_0xd60cc8=_0x3de330['shadowsEna'+'bled'];let _0x4e93ee=!(0xb83+-0x585*0x7+-0x1cf*-0xf),_0x4ca19c=!(-0xdc*0x26+-0xece+0x2f77);const _0xd04cff=Mb;return _0xd04cff['length']=-0x891*-0x1+-0x3b3*0x5+0x9ee,(_0x205465||_0xd60cc8)&&(_0x2c250d=>{for(let _0x27bebf=0x251*0x8+0x1*-0x1c15+0x98d;_0x27bebf<_0x2c250d['length'];_0x27bebf++){const _0x6ccb66=_0x2c250d[_0x27bebf];if(_0x6ccb66['visibleThi'+'sFrame']){const _0x46c725=_0xd60cc8&&_0x6ccb66['castShadow'+'s'],_0x2a1644=_0x205465&&!!_0x6ccb66['cookie'];_0x4e93ee||(_0x4e93ee=_0x46c725),_0x4ca19c||(_0x4ca19c=_0x2a1644),(_0x46c725||_0x2a1644)&&_0xd04cff['push'](_0x6ccb66);}}})(_0x59071a),_0xd04cff['sort']((_0x3b412f,_0x2873f9)=>_0x2873f9['maxScreenS'+'ize']-_0x3b412f['maxScreenS'+'ize']),_0x4e93ee&&this['allocateSh'+'adowAtlas'](this['shadowAtla'+'sResolutio'+'n'],_0x3de330['shadowType']),_0x4ca19c&&this['allocateCo'+'okieAtlas'](this['cookieAtla'+'sResolutio'+'n']),(_0x4e93ee||_0x4ca19c)&&this['subdivide'](_0xd04cff['length'],_0x3de330),_0xd04cff;}['setupSlot'](_0x197207,_0xf35b85){_0x197207['atlasViewp'+'ort']['copy'](_0xf35b85);const _0x539ce9=_0x197207['numShadowF'+'aces'];for(let _0x1fe9e4=0x8fb+-0x42*-0x8e+0x425*-0xb;_0x1fe9e4<_0x539ce9;_0x1fe9e4++)if(_0x197207['castShadow'+'s']||_0x197207['_cookie']){if(xi['copy'](_0xf35b85),ef['copy'](_0xf35b85),_0x197207['_type']===Ze&&xi['add'](this['scissorVec']),_0x197207['_type']===Ke){const _0xc0951a=xi['z']/(0xd0*-0x12+-0x26b4+0x3557),_0x591e8b=this['cubeSlotsO'+'ffsets'][_0x1fe9e4];xi['x']+=_0xc0951a*_0x591e8b['x'],xi['y']+=_0xc0951a*_0x591e8b['y'],xi['z']=_0xc0951a,xi['w']=_0xc0951a,ef['copy'](xi);}if(_0x197207['castShadow'+'s']){const _0x26ef44=_0x197207['getRenderD'+'ata'](null,_0x1fe9e4);_0x26ef44['shadowView'+'port']['copy'](xi),_0x26ef44['shadowScis'+'sor']['copy'](ef);}}}['assignSlot'](_0xe54c16,_0x576557,_0x46a543){_0xe54c16['atlasViewp'+'ortAllocat'+'ed']=!(-0x2623+0xa0b+0x1c18);const _0x2f8621=this['slots'][_0x576557];_0x2f8621['lightId']=_0xe54c16['id'],_0x2f8621['used']=!(-0x3d5+-0x183a*0x1+0x1*0x1c0f),_0x46a543&&(_0xe54c16['atlasSlotU'+'pdated']=!(-0x1c07+-0x137*0x7+0x2*0x1244),_0xe54c16['atlasVersi'+'on']=this['version'],_0xe54c16['atlasSlotI'+'ndex']=_0x576557);}['update'](_0x4c303a,_0xfa7108){this['shadowAtla'+'sResolutio'+'n']=_0xfa7108['shadowAtla'+'sResolutio'+'n'],this['cookieAtla'+'sResolutio'+'n']=_0xfa7108['cookieAtla'+'sResolutio'+'n'];const _0x3730a7=this['collectLig'+'hts'](_0x4c303a,_0xfa7108);if(_0x3730a7['length']>0x1c5b+0xdf7+-0x2a52){const _0x6b5fe9=this['slots'];for(let _0x107eb1=0xf43*-0x1+0x9da+0x5*0x115;_0x107eb1<_0x6b5fe9['length'];_0x107eb1++)_0x6b5fe9[_0x107eb1]['used']=!(0x3a9*-0xa+0x395*-0x2+0xf9*0x2d);const _0x3dbfed=Math['min'](_0x3730a7['length'],_0x6b5fe9['length']);for(let _0x322d34=-0xa55+-0x1333+0x1d88;_0x322d34<_0x3dbfed;_0x322d34++){const _0x3cf18e=_0x3730a7[_0x322d34];_0x3cf18e['castShadow'+'s']&&(_0x3cf18e['_shadowMap']=this['shadowAtla'+'s']);const _0x45a2b0=_0x6b5fe9[_0x3cf18e['atlasSlotI'+'ndex']];if(_0x3cf18e['atlasVersi'+'on']===this['version']&&_0x3cf18e['id']===(_0x45a2b0==null?void(0x5ff*0x5+0x23*0xaf+-0x35e8):_0x45a2b0['lightId'])){const _0x356e59=_0x6b5fe9[_0x3cf18e['atlasSlotI'+'ndex']];_0x356e59['size']===_0x6b5fe9[_0x322d34]['size']&&!_0x356e59['used']&&this['assignSlot'](_0x3cf18e,_0x3cf18e['atlasSlotI'+'ndex'],!(-0x1c8+0x7ad*-0x1+0x976));}}let _0x47f62f=-0x95c+0xe96+-0x53a;for(let _0x3ddd60=0xc2b+0x2*-0x15f+-0x13*0x7f;_0x3ddd60<_0x3dbfed;_0x3ddd60++){for(;_0x47f62f<_0x6b5fe9['length']&&_0x6b5fe9[_0x47f62f]['used'];)_0x47f62f++;const _0x1561d8=_0x3730a7[_0x3ddd60];_0x1561d8['atlasViewp'+'ortAllocat'+'ed']||this['assignSlot'](_0x1561d8,_0x47f62f,!(-0xcfe*0x3+0xe2f+0x18cb));const _0x71fbec=_0x6b5fe9[_0x1561d8['atlasSlotI'+'ndex']];this['setupSlot'](_0x1561d8,_0x71fbec['rect']);}}this['updateUnif'+'orms']();}}class Lb{constructor(){this['cache']=new Map();}['destroy'](){this['clear'](),this['cache']=null;}['clear'](){this['cache']['forEach'](_0x1b331f=>{_0x1b331f['forEach'](_0x32b0d9=>{_0x32b0d9['destroy']();});}),this['cache']['clear']();}['getKey'](_0x5455d4){const _0x208601=_0x5455d4['_type']===Ke,_0x2f55e1=_0x5455d4['_shadowTyp'+'e'],_0x53e9aa=_0x5455d4['_shadowRes'+'olution'];return _0x208601+'-'+_0x2f55e1+'-'+_0x53e9aa;}['get'](_0xbb3f0c,_0x116ba4){const _0x353509=this['getKey'](_0x116ba4),_0x360ba4=this['cache']['get'](_0x353509);if(_0x360ba4&&_0x360ba4['length'])return _0x360ba4['pop']();const _0x3751f2=va['create'](_0xbb3f0c,_0x116ba4);return _0x3751f2['cached']=!(0x1e96+-0x2*-0x60b+-0x2aac),_0x3751f2;}['add'](_0x58d68c,_0x1f08bb){const _0x32f50a=this['getKey'](_0x58d68c),_0x2cdebe=this['cache']['get'](_0x32f50a);_0x2cdebe?_0x2cdebe['push'](_0x1f08bb):this['cache']['set'](_0x32f50a,[_0x1f08bb]);}}class Rb extends ys{constructor(_0xab633c,_0x48488b,_0x22e8d1,_0x41f414,_0x5e508d){super(_0xab633c),Ea['setName'](this,this['name']+'-'+_0x22e8d1['_node']['name']),this['requiresCu'+'bemaps']=!(-0xc95+-0x11f+-0xdb5*-0x1),this['shadowRend'+'erer']=_0x48488b,this['light']=_0x22e8d1,this['face']=_0x41f414,this['applyVsm']=_0x5e508d,this['shadowCame'+'ra']=_0x48488b['prepareFac'+'e'](_0x22e8d1,null,_0x41f414),_0x48488b['setupRende'+'rPass'](this,this['shadowCame'+'ra'],!(-0x1d*0x107+-0x7*0x525+0x41ce));}['execute'](){this['shadowRend'+'erer']['renderFace'](this['light'],null,this['face'],!(-0x679*-0x1+-0x53*0x3d+0xd4f));}['after'](){this['applyVsm']&&this['shadowRend'+'erer']['renderVsm'](this['light'],this['shadowCame'+'ra']);}}class Ob{constructor(_0x585e06,_0x39a2c2){h(this,'shadowLigh'+'ts',[]),h(this,'renderer'),h(this,'shadowRend'+'erer'),h(this,'device'),(this['renderer']=_0x585e06,this['shadowRend'+'erer']=_0x39a2c2,this['device']=_0x585e06['device']);}['cull'](_0x8de5c5,_0x2f0cd0,_0x10becb=null){const _0xf5dc3a=this['renderer']['scene']['clusteredL'+'ightingEna'+'bled'];_0x8de5c5['visibleThi'+'sFrame']=!(0x1fac+-0x332*-0xb+-0x1*0x42d2),_0xf5dc3a||_0x8de5c5['_shadowMap']||(_0x8de5c5['_shadowMap']=va['create'](this['device'],_0x8de5c5));const _0x1f85ba=_0x8de5c5['_type'],_0x4b7917=_0x1f85ba===Ze?-0x193b+0x21d*-0xb+0x307b:-0x25be+0x1*0x1f66+0x65e;for(let _0x4237a9=-0x1c*-0xe7+0x1333+0x1*-0x2c77;_0x4237a9<_0x4b7917;_0x4237a9++){const _0x5eeb3a=_0x8de5c5['getRenderD'+'ata'](null,_0x4237a9),_0x41457d=_0x5eeb3a['shadowCame'+'ra'];_0x41457d['nearClip']=_0x8de5c5['attenuatio'+'nEnd']/(0xf0d*0x1+-0x1d51+0x122c),_0x41457d['farClip']=_0x8de5c5['attenuatio'+'nEnd'];const _0x558d67=_0x41457d['_node'],_0x495fab=_0x8de5c5['_node'];if(_0x558d67['setPositio'+'n'](_0x495fab['getPositio'+'n']()),_0x1f85ba===Ze)_0x41457d['fov']=_0x8de5c5['_outerCone'+'Angle']*(0x9*0x74+-0x40*-0x5c+0x3f*-0x6e),_0x558d67['setRotatio'+'n'](_0x495fab['getRotatio'+'n']()),_0x558d67['rotateLoca'+'l'](-(0x23ad+-0x15a5+-0x1*0xdae),-0xb*0xf1+0xb65*-0x3+0x2c8a,-0x265*-0xb+0x1*0x1dda+0x19b*-0x23);else{if(_0x1f85ba===Ke){if(_0xf5dc3a){const _0x324681=(0x21a5+-0x29a*0x1+-0x1*0x1f09)/(this['shadowRend'+'erer']['lightTextu'+'reAtlas']['shadowAtla'+'sResolutio'+'n']*_0x8de5c5['atlasViewp'+'ort']['z']/(0xd*-0xad+0x29f+0x62d))*this['shadowRend'+'erer']['lightTextu'+'reAtlas']['shadowEdge'+'Pixels'];_0x41457d['fov']=Math['atan'](0x3*0xa9f+0x143+-0x8b*0x3d+_0x324681)*Y['RAD_TO_DEG']*(-0x317*0x8+0x2*-0xc25+0x3104);}else _0x41457d['fov']=-0x1*-0x8ae+-0x13*0x147+0xff1;}}this['renderer']['updateCame'+'raFrustum'](_0x41457d),this['shadowRend'+'erer']['cullShadow'+'Casters'](_0x2f0cd0,_0x8de5c5,_0x5eeb3a['visibleCas'+'ters'],_0x41457d,_0x10becb);}}['prepareLig'+'hts'](_0x424f94,_0x3211dc){let _0x1e0230;for(let _0x273b11=-0x1*0x1f6a+0x889+0x16e1;_0x273b11<_0x3211dc['length'];_0x273b11++){const _0x134b26=_0x3211dc[_0x273b11];if(this['shadowRend'+'erer']['needsShado'+'wRendering'](_0x134b26)&&_0x134b26['atlasViewp'+'ortAllocat'+'ed']){_0x424f94['push'](_0x134b26);for(let _0x45b93c=-0xd6*0x17+-0x12bf+-0x1*-0x25f9;_0x45b93c<_0x134b26['numShadowF'+'aces'];_0x45b93c++)_0x1e0230=this['shadowRend'+'erer']['prepareFac'+'e'](_0x134b26,null,_0x45b93c);}}return _0x1e0230;}['buildNonCl'+'usteredRen'+'derPasses'](_0x532401,_0x1c90b0){for(let _0x35055b=0x4fb+-0xe95*0x1+0x99a;_0x35055b<_0x1c90b0['length'];_0x35055b++){const _0x52faad=_0x1c90b0[_0x35055b];if(this['shadowRend'+'erer']['needsShado'+'wRendering'](_0x52faad)){const _0x21777a=_0x52faad['_type']===Ze,_0x3af281=_0x52faad['numShadowF'+'aces'];for(let _0x3ce8e3=0x26e6+-0x16*-0x8d+-0x3304;_0x3ce8e3<_0x3af281;_0x3ce8e3++){const _0x50ac73=new Rb(this['device'],this['shadowRend'+'erer'],_0x52faad,_0x3ce8e3,_0x21777a);_0x532401['addRenderP'+'ass'](_0x50ac73);}}}}}class Fb extends ys{constructor(_0x1902bc,_0xdc58a4,_0x23b9d,_0x1bfc8b,_0x58d179){super(_0x1902bc),Ea['setName'](this,this['name']+'-'+_0x23b9d['_node']['name']),this['shadowRend'+'erer']=_0xdc58a4,this['light']=_0x23b9d,this['camera']=_0x1bfc8b,this['allCascade'+'sRendering']=_0x58d179;}['execute'](){const {light:_0x2846d6,camera:_0x2e6cf9,shadowRenderer:_0x150762,allCascadesRendering:_0x368b8b}=this,_0x58363f=_0x2846d6['numShadowF'+'aces'],_0x297400=_0x2846d6['shadowUpda'+'teOverride'+'s'];for(let _0x4b07a4=-0x1*0x1087+0x23fd*-0x1+0x3484;_0x4b07a4<_0x58363f;_0x4b07a4++)(_0x297400==null?void(0x1bc2+-0x377*0x7+-0x381):_0x297400[_0x4b07a4])!==Ps&&_0x150762['renderFace'](_0x2846d6,_0x2e6cf9,_0x4b07a4,!_0x368b8b),(_0x297400==null?void(-0x8ec+-0xc46*0x1+0x2*0xa99):_0x297400[_0x4b07a4])===xr&&(_0x297400[_0x4b07a4]=Ps);}['after'](){this['shadowRend'+'erer']['renderVsm'](this['light'],this['camera']);}}const lc=new De(),Ti=new D(),H_=new te(),Xe=[new D(),new D(),new D(),new D(),new D(),new D(),new D(),new D()],sf={'min':0x0,'max':0x0};function Nb(_0x7f975c,_0x3acc14,_0x51ca98){Xe[-0x3*-0x22a+-0x34*0x20+-0x2*-0x1]['x']=Xe[-0x1ecd+0x3*-0xbf8+0x42b6]['x']=Xe[0x573+-0x118d+0xc1c]['x']=Xe[0x101*-0x17+-0x17*0x1a8+0x3d32*0x1]['x']=_0x3acc14['x'],Xe[0xefe*0x2+0x320+0x71*-0x4b]['y']=Xe[0x82f+0x1cd*-0x2+-0x492]['y']=Xe[0x202a+0x18a8+-0x7*0x81d]['y']=Xe[0x97*0x3d+0xdf+-0x24d5]['y']=_0x3acc14['y'],Xe[0x45c*0x1+0x971*0x3+-0x20ad]['z']=Xe[0xa36*-0x2+-0x6ab*-0x3+0x6e]['z']=Xe[-0xaaf+-0x1235+0x1cea]['z']=Xe[-0x1d88+-0x1*-0x761+0x162e]['z']=_0x3acc14['z'],Xe[-0x242*-0x5+-0x1*-0x872+0x2*-0x9dc]['x']=Xe[-0x4*0x8fe+0xb5f*0x1+0x189e]['x']=Xe[0x1*-0x1df9+0xe57*0x1+0xfa8]['x']=Xe[0x1*0x145d+0x2255+0x9*-0x613]['x']=_0x51ca98['x'],Xe[0x5*0x6b5+0x8*0x192+-0x1*0x2e19]['y']=Xe[-0x37f+-0x1*-0x805+0x11*-0x44]['y']=Xe[-0x106*0x3+-0x7f*-0x27+-0x1043]['y']=Xe[-0x1562+0x602+0x1*0xf66]['y']=_0x51ca98['y'],Xe[0x5b*-0x27+-0x217+0x1*0xff4]['z']=Xe[-0x4d*-0x11+0x3d*-0x87+0x1b0f]['z']=Xe[0x7*-0x4a3+-0xa93+0x2b0c]['z']=Xe[-0xf32+-0x32c*0x6+0x223f]['z']=_0x51ca98['z'];let _0x28d421=-0x2a9260d1a+-0x4f921*-0xf07+0x4b2763232,_0x2b6f00=-(-0x3b27e82fe*-0x1+0xb49b33a2*-0x1+0x1*-0xa9d76b5d);for(let _0x1f1af7=-0x172*0x2+-0x373*-0x2+-0x402;_0x1f1af7<-0x250b+-0x6af*0x1+0x2bc2;++_0x1f1af7){_0x7f975c['transformP'+'oint'](Xe[_0x1f1af7],Xe[_0x1f1af7]);const _0x386de8=Xe[_0x1f1af7]['z'];_0x386de8<_0x28d421&&(_0x28d421=_0x386de8),_0x386de8>_0x2b6f00&&(_0x2b6f00=_0x386de8);}return sf['min']=_0x28d421,sf['max']=_0x2b6f00,sf;}class kb{constructor(_0x14dba9,_0x3fcd51){h(this,'renderer'),h(this,'shadowRend'+'erer'),h(this,'device'),(this['renderer']=_0x14dba9,this['shadowRend'+'erer']=_0x3fcd51,this['device']=_0x14dba9['device']);}['cull'](_0x2e98a4,_0x5cabc2,_0x36cf0d,_0x15da35=null){_0x2e98a4['visibleThi'+'sFrame']=!(-0xfcd*-0x1+0xbca+-0x1b97),_0x2e98a4['_shadowMap']||(_0x2e98a4['_shadowMap']=va['create'](this['device'],_0x2e98a4));const _0xe9ba30=_0x36cf0d['_nearClip'];this['generateSp'+'litDistanc'+'es'](_0x2e98a4,_0xe9ba30,Math['min'](_0x36cf0d['_farClip'],_0x2e98a4['shadowDist'+'ance']));const _0x21268d=_0x2e98a4['shadowUpda'+'teOverride'+'s'];for(let _0x48d62e=-0x1b20+-0xc82*0x2+0xd09*0x4;_0x48d62e<_0x2e98a4['numCascade'+'s']&&(_0x21268d==null?void(0x156f+0x3a*0x87+-0x3405):_0x21268d[_0x48d62e])!==Ps;_0x48d62e++){const _0x392bfb=_0x2e98a4['getRenderD'+'ata'](_0x36cf0d,_0x48d62e),_0x34916c=_0x392bfb['shadowCame'+'ra'];_0x34916c['renderTarg'+'et']=_0x2e98a4['_shadowMap']['renderTarg'+'ets'][-0x26a8*-0x1+0x2*0xda3+-0x41ee],_0x392bfb['shadowView'+'port']['copy'](_0x2e98a4['cascades'][_0x48d62e]),_0x392bfb['shadowScis'+'sor']['copy'](_0x2e98a4['cascades'][_0x48d62e]);const _0x2d62f3=_0x34916c['_node'],_0x1866cb=_0x2e98a4['_node'];_0x2d62f3['setPositio'+'n'](_0x1866cb['getPositio'+'n']()),_0x2d62f3['setRotatio'+'n'](_0x1866cb['getRotatio'+'n']()),_0x2d62f3['rotateLoca'+'l'](-(0x52*0x67+0x1d60+-0x3e04),0x1*0x125b+0x38e+-0x15e9,0x1c91+0x447+-0x20d8);const _0x259451=_0x48d62e===-0x379+-0x32*-0x3d+-0x871*0x1?_0xe9ba30:_0x2e98a4['_shadowCas'+'cadeDistan'+'ces'][_0x48d62e-(-0x2*-0x6ec+0x1195*0x2+-0x41*0xc1)],_0x1289b5=_0x2e98a4['_shadowCas'+'cadeDistan'+'ces'][_0x48d62e],_0x135439=_0x36cf0d['getFrustum'+'Corners'](_0x259451,_0x1289b5);Ti['set'](-0x6de*-0x2+-0x147b+0x6bf,-0x21f7+0x255b+-0xd9*0x4,-0xdd*-0x15+-0x6f0+-0xb31);const _0x45be72=_0x36cf0d['node']['getWorldTr'+'ansform']();for(let _0x1cde9c=-0x1a45+-0x772+0x21b7;_0x1cde9c<-0xcd+0x1a1*0xb+-0x1116;_0x1cde9c++)_0x45be72['transformP'+'oint'](_0x135439[_0x1cde9c],_0x135439[_0x1cde9c]),Ti['add'](_0x135439[_0x1cde9c]);Ti['mulScalar']((-0x1*-0x7a3+-0xe34+0x692)/(-0xe6*-0x14+-0x2*-0xbd6+-0x299c));let _0xf47ca2=-0x2265+0x212b+0x13a;for(let _0x5e08f1=0x1389+0x159e+-0x2927;_0x5e08f1<-0x93+0x202*-0x7+-0x4e3*-0x3;_0x5e08f1++){const _0x23a538=_0x135439[_0x5e08f1]['sub'](Ti)['length']();_0x23a538>_0xf47ca2&&(_0xf47ca2=_0x23a538);}const _0x47b650=_0x2d62f3['right'],_0x348258=_0x2d62f3['up'],_0x255545=_0x2d62f3['forward'],_0x571c1a=(0x280+0xf16+-0x1*0x1196+0.25)*_0x2e98a4['_shadowRes'+'olution']/_0xf47ca2,_0xc44810=Math['ceil'](Ti['dot'](_0x348258)*_0x571c1a)/_0x571c1a,_0x140407=Math['ceil'](Ti['dot'](_0x47b650)*_0x571c1a)/_0x571c1a,_0x2b30e9=_0x348258['mulScalar'](_0xc44810),_0x14b4b8=_0x47b650['mulScalar'](_0x140407),_0x12e435=Ti['dot'](_0x255545),_0x5e8497=_0x255545['mulScalar'](_0x12e435);Ti['add2'](_0x2b30e9,_0x14b4b8)['add'](_0x5e8497),_0x2d62f3['setPositio'+'n'](Ti),_0x2d62f3['translateL'+'ocal'](-0x2*-0x1150+0x237d+0x175f*-0x3,-0x4*0x10c+-0x8ec+0xd1c,0xf9f5d+-0x69fca*-0x3+-0x9cb*0x211),_0x34916c['nearClip']=-0xdeb+0x64e+0x79d*0x1+0.01,_0x34916c['farClip']=0x35db02+0x15*0x199fa+-0x38f804,_0x34916c['orthoHeigh'+'t']=_0xf47ca2,this['renderer']['updateCame'+'raFrustum'](_0x34916c),this['shadowRend'+'erer']['cullShadow'+'Casters'](_0x5cabc2,_0x2e98a4,_0x392bfb['visibleCas'+'ters'],_0x34916c,_0x15da35);const _0x2709db=-0x773*0x1+-0x8a*0x17+0x13da*0x1<<_0x48d62e,_0x2d24a6=_0x392bfb['visibleCas'+'ters'],_0x5746d0=_0x2d24a6['length'];let _0x2b1f3e=0xe8d+0x2564+-0x33f1;for(let _0x4d1139=-0xd40*0x2+0x1718+0x368;_0x4d1139<_0x5746d0;_0x4d1139++){const _0x45cdb5=_0x2d24a6[_0x4d1139];_0x45cdb5['shadowCasc'+'adeMask']&_0x2709db&&(_0x2d24a6[_0x2b1f3e++]=_0x45cdb5,_0x2b1f3e===0x1*-0x119a+-0x17ff+0x299a?lc['copy'](_0x45cdb5['aabb']):lc['add'](_0x45cdb5['aabb']));}_0x5746d0!==_0x2b1f3e&&(_0x2d24a6['length']=_0x2b1f3e),H_['copy'](_0x2d62f3['getWorldTr'+'ansform']())['invert']();const _0x67f6b9=Nb(H_,lc['getMin'](),lc['getMax']());_0x2d62f3['translateL'+'ocal'](0x5*0x15b+0x7*-0x446+0x1723*0x1,0x11*-0x147+-0x1614+0xe99*0x3,_0x67f6b9['max']+(-0x1*0x481+0x7d4+-0x25*0x17+0.1)),_0x34916c['farClip']=_0x67f6b9['max']-_0x67f6b9['min']+(-0x8*0x3d1+-0x6*-0x94+-0x1b1*-0x10+0.2),_0x392bfb['projection'+'Compensati'+'on']=_0xf47ca2;}}['generateSp'+'litDistanc'+'es'](_0xe8b7e9,_0x902665,_0x58b0c0){_0xe8b7e9['_shadowCas'+'cadeDistan'+'ces']['fill'](_0x58b0c0);for(let _0x5e6346=0x1628+0x11d+-0x1744;_0x5e6346<_0xe8b7e9['numCascade'+'s'];_0x5e6346++){const _0x5a457=_0x5e6346/_0xe8b7e9['numCascade'+'s'],_0xa2aa44=_0x902665+(_0x58b0c0-_0x902665)*_0x5a457,_0x34fc06=_0x902665*(_0x58b0c0/_0x902665)**_0x5a457,_0xa1e84b=Y['lerp'](_0xa2aa44,_0x34fc06,_0xe8b7e9['cascadeDis'+'tribution']);_0xe8b7e9['_shadowCas'+'cadeDistan'+'ces'][_0x5e6346-(-0x1fa3+0x2641+0x1*-0x69d)]=_0xa1e84b;}}['getLightRe'+'nderPass'](_0x4a1f0a,_0x6c54a8){w['assert'](_0x4a1f0a&&_0x4a1f0a['_type']===ve);let _0x1e39ef=null;if(this['shadowRend'+'erer']['needsShado'+'wRendering'](_0x4a1f0a)){const _0xf2e7e0=_0x4a1f0a['numShadowF'+'aces'],_0x5516e0=_0x4a1f0a['shadowUpda'+'teOverride'+'s'];let _0x1114f2=!(-0x7*0x293+-0x18da*-0x1+-0x6d5),_0x57a967;for(let _0x6fe8bc=0xc0*-0x33+-0xdf8*-0x2+-0x370*-0x3;_0x6fe8bc<_0xf2e7e0;_0x6fe8bc++)(_0x5516e0==null?void(0x1a74*-0x1+0xd*-0xce+-0x13b*-0x1e):_0x5516e0[_0x6fe8bc])===Ps&&(_0x1114f2=!(-0x1*-0x39+0x2a*0x16+0x5*-0xc4)),_0x57a967=this['shadowRend'+'erer']['prepareFac'+'e'](_0x4a1f0a,_0x6c54a8,_0x6fe8bc);_0x1e39ef=new Fb(this['device'],this['shadowRend'+'erer'],_0x4a1f0a,_0x6c54a8,_0x1114f2),this['shadowRend'+'erer']['setupRende'+'rPass'](_0x1e39ef,_0x57a967,_0x1114f2);}return _0x1e39ef;}}const rf=new Set(),W_=new te(),$_=new te(),Fr=new Float32Array(0x5e8+-0xb*0x204+-0x1*-0x1046),lo=new re(-0xb1f+-0xf*0x1f1+-0x1*-0x283f,-0x1898+-0x7*-0x463+-0x61c,0x2333+-0x1*-0x755+-0x2a88,-0x25a0+-0x1*-0x67c+0x1f24),X_=new te();function Ub(_0x48cc66,_0x45028e){return Math['exp'](-(_0x48cc66*_0x48cc66)/((-0x704+-0x861+-0x1*-0xf67)*_0x45028e*_0x45028e));}function Bb(_0x1ade3f){const _0xe454ae=(_0x1ade3f-(-0x3e*0x5c+-0x1*-0x10e3+-0x566*-0x1))/(0xc4+-0x87d*-0x3+-0x1a35*0x1),_0x23d53d=(_0x1ade3f-(0xd78+0x979*-0x1+-0x92*0x7))*(0x3*0xcf7+0x239f+0x12a1*-0x4+0.5),_0x45768e=new Array(_0x1ade3f);let _0x371b1b=-0xfdf+0x14d9+-0x4fa;for(let _0x17bcca=-0x1*-0x1336+0x1f8+0xa97*-0x2;_0x17bcca<_0x1ade3f;++_0x17bcca)_0x45768e[_0x17bcca]=Ub(_0x17bcca-_0x23d53d,_0xe454ae),_0x371b1b+=_0x45768e[_0x17bcca];for(let _0x4e872b=0x1664+-0xe13+-0x851;_0x4e872b<_0x1ade3f;++_0x4e872b)_0x45768e[_0x4e872b]/=_0x371b1b;return _0x45768e;}class Cv{constructor(_0x535551,_0x5c67af){h(this,'shadowPass'+'Cache',[]),(this['device']=_0x535551['device'],this['renderer']=_0x535551,this['lightTextu'+'reAtlas']=_0x5c67af);const _0x5b8b3d=this['device']['scope'];this['sourceId']=_0x5b8b3d['resolve']('source'),this['pixelOffse'+'tId']=_0x5b8b3d['resolve']('pixelOffse'+'t'),this['weightId']=_0x5b8b3d['resolve']('weight[0]'),this['blurVsmSha'+'der']=[{},{}],this['blurVsmWei'+'ghts']={},this['shadowMapL'+'ightRadius'+'Id']=_0x5b8b3d['resolve']('light_radi'+'us'),this['viewUnifor'+'mFormat']=null,this['viewBindGr'+'oupFormat']=null,this['blendState'+'Write']=new pt(),this['blendState'+'NoWrite']=new pt(),this['blendState'+'NoWrite']['setColorWr'+'ite'](!(-0xa3*0x29+0x218d+-0x771),!(0x2107+0xb05+-0x2c0b),!(0x62d+-0x1adc+0x14b0),!(0x1*0x9+-0x20e1+0x20d9*0x1));}static['createShad'+'owCamera'](_0x27cedc,_0x47a52b,_0x5db4bb){const _0x4ee771=Wn['create']('ShadowCame'+'ra',_0x47a52b,_0x5db4bb),_0x47c7d2=qi['get'](_0x27cedc);w['assert'](_0x47c7d2);const _0x4fa330=(_0x47c7d2==null?void(-0x1142+0x14f7+-0x3b5):_0x47c7d2['vsm'])??!(0x20a7+-0x9b9+-0x1*0x16ed),_0x4d320c=(_0x47c7d2==null?void(0x2124+-0x1*-0x16ef+-0x3813):_0x47c7d2['pcf'])??!(-0xeb2+0xa31*-0x1+0x76*0x36);return _0x4fa330?_0x4ee771['clearColor']=new ie(0x19fe+0x2256*-0x1+0x2c8*0x3,-0x36d*-0x7+-0x13*-0x191+-0x35be,0x105b+-0x62f+-0xa2c,0x24ad+0x1ed*-0xb+-0xf7e*0x1):_0x4ee771['clearColor']=new ie(-0x1590+0x101*-0x1f+0x34b0,0x2d5*-0x7+-0x2295+0x3669*0x1,0x449*0x7+0x1ef1+-0x3cef,0x1669+-0x4c7+-0x11a1),_0x4ee771['clearDepth'+'Buffer']=!(0x1f60+-0x261d+-0x4b*-0x17),_0x4ee771['clearStenc'+'ilBuffer']=!(0x26*-0xff+0xc30+0x19ab),_0x4ee771['clearColor'+'Buffer']=!_0x4d320c,_0x4ee771;}['_cullShado'+'wCastersIn'+'ternal'](_0x4f3cac,_0x8cbe19,_0x5610db){const _0xe305f9=_0x4f3cac['length'];for(let _0x32b6c2=-0x1c54+0x1cac+-0x58;_0x32b6c2<_0xe305f9;_0x32b6c2++){const _0x582339=_0x4f3cac[_0x32b6c2];_0x582339['castShadow']&&(!_0x582339['cull']||_0x582339['_isVisible'](_0x5610db))&&(_0x582339['visibleThi'+'sFrame']=!(-0x4a7*-0x1+-0x7*0xe3+-0x18e*-0x1),_0x8cbe19['push'](_0x582339));}}['cullShadow'+'Casters'](_0x2ac0d7,_0x309983,_0x4fa1f1,_0x1b50b9,_0x21b5aa){var _0x4f0feb,_0x7afdcc;if((_0x4f0feb=this['renderer']['scene'])==null||_0x4f0feb['fire'](mv,_0x1b50b9),_0x4fa1f1['length']=-0x14be+-0xaf0+0x1fae,_0x21b5aa)this['_cullShado'+'wCastersIn'+'ternal'](_0x21b5aa,_0x4fa1f1,_0x1b50b9);else{const _0x30e0e4=_0x2ac0d7['layerList'],_0x4ff49c=_0x30e0e4['length'];for(let _0x20c4d2=0x18d5+0x1*0x259+-0x1b2e;_0x20c4d2<_0x4ff49c;_0x20c4d2++){const _0x4ad972=_0x30e0e4[_0x20c4d2];_0x4ad972['_lightsSet']['has'](_0x309983)&&(rf['has'](_0x4ad972)||(rf['add'](_0x4ad972),this['_cullShado'+'wCastersIn'+'ternal'](_0x4ad972['shadowCast'+'ers'],_0x4fa1f1,_0x1b50b9)));}rf['clear']();}_0x4fa1f1['sort'](this['sortCompar'+'eShader']),(_0x7afdcc=this['renderer']['scene'])==null||_0x7afdcc['fire'](_v,_0x1b50b9);}['sortCompar'+'eShader'](_0xece7a9,_0x3dcd71){const _0x389702=_0xece7a9['_sortKeySh'+'adow'],_0x3697fc=_0x3dcd71['_sortKeySh'+'adow'];return _0x389702===_0x3697fc?_0x3dcd71['mesh']['id']-_0xece7a9['mesh']['id']:_0x3697fc-_0x389702;}['setupRende'+'rState'](_0x2e2e6d,_0x169279){const _0x155a92=this['renderer']['scene']['clusteredL'+'ightingEna'+'bled']?_0x169279['_isPcf']:_0x169279['_isPcf']&&_0x169279['_type']!==Ke;_0x2e2e6d['setBlendSt'+'ate'](_0x155a92?this['blendState'+'NoWrite']:this['blendState'+'Write']),_0x2e2e6d['setDepthSt'+'ate'](_0x169279['shadowDept'+'hState']),_0x2e2e6d['setStencil'+'State'](null,null);}['dispatchUn'+'iforms'](_0xf9d10f,_0x1b652a,_0x1843b4,_0x4f701b){const _0xa77bad=_0x1b652a['_node'];_0xf9d10f['_type']!==ve&&(this['renderer']['dispatchVi'+'ewPos'](_0xa77bad['getPositio'+'n']()),this['shadowMapL'+'ightRadius'+'Id']['setValue'](_0xf9d10f['attenuatio'+'nEnd'])),W_['setTRS'](_0xa77bad['getPositio'+'n'](),_0xa77bad['getRotatio'+'n'](),D['ONE'])['invert'](),$_['mul2'](_0x1b652a['projection'+'Matrix'],W_);const _0x3759cd=_0x1843b4['shadowView'+'port'];_0x1b652a['rect']=_0x3759cd,_0x1b652a['scissorRec'+'t']=_0x1843b4['shadowScis'+'sor'],X_['setViewpor'+'t'](_0x3759cd['x'],_0x3759cd['y'],_0x3759cd['z'],_0x3759cd['w']),_0x1843b4['shadowMatr'+'ix']['mul2'](X_,$_),_0xf9d10f['_type']===ve&&_0xf9d10f['_shadowMat'+'rixPalette']['set'](_0x1843b4['shadowMatr'+'ix']['data'],_0x4f701b*(0x21e9*0x1+0x1743+0x2*-0x1c8e));}['getShadowP'+'ass'](_0x3ef426){var _0xa47b48;const _0x19ab02=_0x3ef426['_type'],_0x296b75=_0x3ef426['_shadowTyp'+'e'];let _0x21aa0a=(_0xa47b48=this['shadowPass'+'Cache'][_0x19ab02])==null?void(0x8e3*-0x3+-0x5*-0x356+0x9fb):_0xa47b48[_0x296b75];if(!_0x21aa0a){const _0x386d7e='ShadowPass'+'_'+_0x19ab02+'_'+_0x296b75;_0x21aa0a=Si['get'](this['device'])['allocate'](_0x386d7e,{'isShadow':!(-0x11*0x185+0x8e0+0x1*0x10f5),'lightType':_0x19ab02,'shadowType':_0x296b75}),this['shadowPass'+'Cache'][_0x19ab02]||(this['shadowPass'+'Cache'][_0x19ab02]=[]),this['shadowPass'+'Cache'][_0x19ab02][_0x296b75]=_0x21aa0a;}return _0x21aa0a['index'];}['submitCast'+'ers'](_0x883d38,_0x10ed07,_0x1f348e){var _0x248827;const _0x73b10a=this['device'],_0x12ecc1=this['renderer'],_0x5f4e92=_0x12ecc1['scene'],_0x389bfd=-0xaa5+-0x1d08+0x3*0xd3a<<cm,_0x349645=this['getShadowP'+'ass'](_0x10ed07),_0x4ae658=_0x1f348e['shaderPara'+'ms'],_0x49f63e=_0x1f348e['renderTarg'+'et']['flipY']?-(0x3b+0x2252+-0x228c):-0x2*0xb71+-0x473*0x3+-0x243c*-0x1,_0x2b6b5b=_0x883d38['length'];for(let _0x1629b1=0x1*-0x13d7+-0x675+0x24*0xbb;_0x1629b1<_0x2b6b5b;_0x1629b1++){const _0xa09cb7=_0x883d38[_0x1629b1],_0x5e0c88=_0xa09cb7['mesh'],_0x25b699=_0xa09cb7['instancing'+'Data'];if(_0x25b699&&_0x25b699['count']<=-0x7b7+0x7*-0x361+0x646*0x5)continue;_0xa09cb7['ensureMate'+'rial'](_0x73b10a);const _0xcc073a=_0xa09cb7['material'];Q['pushGpuMar'+'ker'](_0x73b10a,'Node:\x20'+_0xa09cb7['node']['name']+(',\x20Material'+':\x20')+_0xcc073a['name']),_0x12ecc1['setBaseCon'+'stants'](_0x73b10a,_0xcc073a),_0x12ecc1['setSkinnin'+'g'](_0x73b10a,_0xa09cb7),_0xcc073a['dirty']&&(_0xcc073a['updateUnif'+'orms'](_0x73b10a,_0x5f4e92),_0xcc073a['dirty']=!(0x104*0x1a+0x5*0x5fb+-0x384e)),_0x12ecc1['setupCullM'+'ode'](!(0x21fb+-0xd64+-0x3*0x6dd),_0x49f63e,_0xa09cb7),_0xcc073a['setParamet'+'ers'](_0x73b10a),_0xa09cb7['setParamet'+'ers'](_0x73b10a,_0x389bfd);const _0xc5fced=_0xa09cb7['getShaderI'+'nstance'](_0x349645,0x2078+0x888+-0x2900,_0x5f4e92,_0x4ae658,this['viewUnifor'+'mFormat'],this['viewBindGr'+'oupFormat']),_0x36a632=_0xc5fced['shader'];if(w['assert'](_0x36a632,'no\x20shader\x20'+'for\x20pass\x20'+_0x349645,_0xcc073a),_0x36a632['failed'])continue;_0xa09cb7['_sortKeySh'+'adow']=_0x36a632['id'],_0x73b10a['setShader'](_0x36a632),_0x12ecc1['setVertexB'+'uffers'](_0x73b10a,_0x5e0c88),_0x12ecc1['setMorphin'+'g'](_0x73b10a,_0xa09cb7['morphInsta'+'nce']),_0x25b699&&_0x73b10a['setVertexB'+'uffer'](_0x25b699['vertexBuff'+'er']),_0x12ecc1['setMeshIns'+'tanceMatri'+'ces'](_0xa09cb7),_0x12ecc1['setupMeshU'+'niformBuff'+'ers'](_0xc5fced);const _0x2d8da8=_0xa09cb7['renderStyl'+'e'],_0x34ee98=(_0x248827=_0xa09cb7['indirectDa'+'ta'])==null?void(-0x2fa*-0x4+0x1a24+-0x260c):_0x248827['get'](_0x1f348e);_0x73b10a['draw'](_0x5e0c88['primitive'][_0x2d8da8],_0x5e0c88['indexBuffe'+'r'][_0x2d8da8],_0x25b699==null?void(0x10a8*0x1+0x17f8+-0x28a0):_0x25b699['count'],_0x34ee98),_0x12ecc1['_shadowDra'+'wCalls']++,_0x25b699&&_0x12ecc1['_instanced'+'DrawCalls']++,Q['popGpuMark'+'er'](_0x73b10a);}}['needsShado'+'wRendering'](_0x3f4ff0){const _0x2acb78=_0x3f4ff0['enabled']&&_0x3f4ff0['castShadow'+'s']&&_0x3f4ff0['shadowUpda'+'teMode']!==Ps&&_0x3f4ff0['visibleThi'+'sFrame'];return _0x3f4ff0['shadowUpda'+'teMode']===xr&&(_0x3f4ff0['shadowUpda'+'teMode']=Ps),_0x2acb78&&(this['renderer']['_shadowMap'+'Updates']+=_0x3f4ff0['numShadowF'+'aces']),_0x2acb78;}['getLightRe'+'nderData'](_0x3351b3,_0x41766d,_0x19d1b8){return _0x3351b3['getRenderD'+'ata'](_0x3351b3['_type']===ve?_0x41766d:null,_0x19d1b8);}['setupRende'+'rPass'](_0x2f9b27,_0x5361f5,_0x219acf){const _0x45572e=_0x5361f5['renderTarg'+'et'];_0x2f9b27['init'](_0x45572e),_0x2f9b27['depthStenc'+'ilOps']['clearDepth'+'Value']=0x1840+0x1605+-0x2e44,_0x2f9b27['depthStenc'+'ilOps']['clearDepth']=_0x219acf,_0x45572e['depthBuffe'+'r']?_0x2f9b27['depthStenc'+'ilOps']['storeDepth']=!(-0x124+-0x1a31+0x1b55):(_0x2f9b27['colorOps']['clearValue']['copy'](_0x5361f5['clearColor']),_0x2f9b27['colorOps']['clear']=_0x219acf,_0x2f9b27['depthStenc'+'ilOps']['storeDepth']=!(-0xa7e+0x1f2+-0xc7*-0xb)),_0x2f9b27['requiresCu'+'bemaps']=!(0x26fd+-0x25ea+-0x112);}['prepareFac'+'e'](_0x1e0bd8,_0xc376f6,_0x48f861){const _0x847ea6=_0x1e0bd8['_type'],_0x7913bc=this['getLightRe'+'nderData'](_0x1e0bd8,_0xc376f6,_0x48f861)['shadowCame'+'ra'],_0x5aedec=_0x847ea6===ve?0xb76+0x23b2+-0x2f28:_0x48f861;return _0x7913bc['renderTarg'+'et']=_0x1e0bd8['_shadowMap']['renderTarg'+'ets'][_0x5aedec],_0x7913bc;}['renderFace'](_0x22c208,_0xb6273,_0x516a0f,_0x13f29e,_0x18c2c1=!(0xdb0+0x2*0x49c+0x5ba*-0x4)){const _0x414a44=this['device'],_0x4c6cf2=de();Q['pushGpuMar'+'ker'](_0x414a44,'SHADOW\x20'+_0x22c208['_node']['name']+'\x20FACE\x20'+_0x516a0f);const _0x17609f=this['getLightRe'+'nderData'](_0x22c208,_0xb6273,_0x516a0f),_0x4dc6f8=_0x17609f['shadowCame'+'ra'];this['dispatchUn'+'iforms'](_0x22c208,_0x4dc6f8,_0x17609f,_0x516a0f);const _0x5aec6b=_0x4dc6f8['renderTarg'+'et'],_0x4f6f53=this['renderer'];_0x4f6f53['setCameraU'+'niforms'](_0x4dc6f8,_0x5aec6b),_0x414a44['supportsUn'+'iformBuffe'+'rs']&&_0x4f6f53['setupViewU'+'niformBuff'+'ers'](_0x17609f['viewBindGr'+'oups'],this['viewUnifor'+'mFormat'],this['viewBindGr'+'oupFormat'],null),_0x18c2c1?(_0x4f6f53['setupViewp'+'ort'](_0x4dc6f8,_0x5aec6b),_0x13f29e&&_0x4f6f53['clear'](_0x4dc6f8)):_0x4f6f53['clearView'](_0x4dc6f8,_0x5aec6b,!(0x12c6+0x7e2*0x4+-0x5e*0x89),!(0xfc1+0x2c3+-0x1283)),this['setupRende'+'rState'](_0x414a44,_0x22c208),this['submitCast'+'ers'](_0x17609f['visibleCas'+'ters'],_0x22c208,_0x4dc6f8),Q['popGpuMark'+'er'](_0x414a44),_0x4f6f53['_shadowMap'+'Time']+=de()-_0x4c6cf2;}['render'](_0x7d475f,_0x56dd5d,_0x595aae=!(-0x256*0x4+0xb96*0x3+-0x1*0x196a)){if(this['needsShado'+'wRendering'](_0x7d475f)){const _0x1b06d9=_0x7d475f['numShadowF'+'aces'];for(let _0x59e295=0x305+0x292+0x9*-0x9f;_0x59e295<_0x1b06d9;_0x59e295++)this['prepareFac'+'e'](_0x7d475f,_0x56dd5d,_0x59e295),this['renderFace'](_0x7d475f,_0x56dd5d,_0x59e295,!(0x133*0x13+0x1d6c+-0x3435),_0x595aae);this['renderVsm'](_0x7d475f,_0x56dd5d);}}['renderVsm'](_0x212d9d,_0x22e4fd){_0x212d9d['_isVsm']&&_0x212d9d['_vsmBlurSi'+'ze']>-0xd*-0x28b+0xf*0x215+-0x4049&&(!this['renderer']['scene']['clusteredL'+'ightingEna'+'bled']||_0x212d9d['_type']===ve)&&this['applyVsmBl'+'ur'](_0x212d9d,_0x22e4fd);}['getVsmBlur'+'Shader'](_0x223222,_0x2ccec4){const _0x29fb13=this['blurVsmSha'+'der'];let _0x18bc50=_0x29fb13[_0x223222][_0x2ccec4];if(!_0x18bc50){this['blurVsmWei'+'ghts'][_0x2ccec4]=Bb(_0x2ccec4);const _0x1df3ba=new Map();_0x1df3ba['set']('{SAMPLES}',_0x2ccec4),_0x223222===-0x2*0x7ae+0x1*0x1fda+-0x107d&&_0x1df3ba['set']('GAUSS',''),_0x18bc50=$t['createShad'+'er'](this['device'],{'uniqueName':'blurVsm'+_0x223222+_0x2ccec4,'attributes':{'vertex_position':Me},'vertexChunk':'fullscreen'+'QuadVS','fragmentChunk':'blurVSMPS','fragmentDefines':_0x1df3ba}),_0x29fb13[_0x223222][_0x2ccec4]=_0x18bc50;}return _0x18bc50;}['applyVsmBl'+'ur'](_0x443834,_0xdcf596){const _0x23dc55=this['device'];Q['pushGpuMar'+'ker'](_0x23dc55,'VSM\x20'+_0x443834['_node']['name']),_0x23dc55['setBlendSt'+'ate'](pt['NOBLEND']);const _0x45ba33=_0x443834['getRenderD'+'ata'](_0x443834['_type']===ve?_0xdcf596:null,0x20*0x42+-0x238b+0x1b4b)['shadowCame'+'ra']['renderTarg'+'et'],_0x25ea54=this['renderer']['shadowMapC'+'ache']['get'](_0x23dc55,_0x443834),_0x3ab1d9=_0x25ea54['renderTarg'+'ets'][0x1ffb+-0x1f27+-0xd4],_0x194a07=_0x443834['vsmBlurMod'+'e'],_0x390efa=_0x443834['_vsmBlurSi'+'ze'],_0x4bc37b=this['getVsmBlur'+'Shader'](_0x194a07,_0x390efa);lo['z']=_0x443834['_shadowRes'+'olution']-(0xfdb+0x1d6c+-0x2d45),lo['w']=lo['z'],this['sourceId']['setValue'](_0x45ba33['colorBuffe'+'r']),Fr[-0x1a6a+0x8*-0xff+0x2262]=(0x1cb4+0x3*-0x6c+-0x1b6f)/_0x443834['_shadowRes'+'olution'],Fr[0x1481+0x8aa+-0x1d2a*0x1]=0xbe+-0xa0f*-0x1+-0xacd,this['pixelOffse'+'tId']['setValue'](Fr),_0x194a07===em&&this['weightId']['setValue'](this['blurVsmWei'+'ghts'][_0x390efa]),Ar(_0x23dc55,_0x3ab1d9,_0x4bc37b,null,lo),this['sourceId']['setValue'](_0x3ab1d9['colorBuffe'+'r']),Fr[-0x10*0x133+-0x3*-0x626+0xbf*0x1]=Fr[-0x29*0x4d+-0x1e73*-0x1+-0x90f*0x2],Fr[-0x149*-0xc+-0x1d85+0xe19]=0x11b7*0x1+-0x21*0x12f+0x1558,this['pixelOffse'+'tId']['setValue'](Fr),Ar(_0x23dc55,_0x45ba33,_0x4bc37b,null,lo),this['renderer']['shadowMapC'+'ache']['add'](_0x443834,_0x25ea54),Q['popGpuMark'+'er'](_0x23dc55);}['initViewBi'+'ndGroupFor'+'mat'](){this['device']['supportsUn'+'iformBuffe'+'rs']&&!this['viewUnifor'+'mFormat']&&(this['viewUnifor'+'mFormat']=new zy(this['device'],[new dt('matrix_vie'+'wProjectio'+'n',li)]),this['viewBindGr'+'oupFormat']=new Ny(this['device'],[new kp(Np,Fp|by)]));}['frameUpdat'+'e'](){this['initViewBi'+'ndGroupFor'+'mat']();}}const cc=[];class zb{constructor(_0x5a4954){h(this,'_empty',null),h(this,'_allocated',[]),h(this,'_clusters',new Map()),this['device']=_0x5a4954;}['destroy'](){this['_empty']&&(this['_empty']['destroy'](),this['_empty']=null),this['_allocated']['forEach'](_0x38bad0=>{_0x38bad0['destroy']();}),this['_allocated']['length']=-0x1576+0x13*-0x15b+-0xed*-0x33;}get['count'](){return this['_allocated']['length'];}get['empty'](){if(!this['_empty']){const _0x5b0d54=new cu(this['device']);_0x5b0d54['name']='ClusterEmp'+'ty',_0x5b0d54['update']([]),this['_empty']=_0x5b0d54;}return this['_empty'];}['assign'](_0x28549c){const _0x3a0bbe=this['empty'];cc['push'](...this['_allocated']),this['_allocated']['length']=0x155b+0x67*-0x10+0x39*-0x43,this['_clusters']['clear']();const _0x644a15=_0x28549c['length'];for(let _0x3c590d=0x51d+0x26f2+-0x2c0f;_0x3c590d<_0x644a15;_0x3c590d++){const _0x58ff35=_0x28549c[_0x3c590d]['renderActi'+'ons'];if(_0x58ff35){const _0x144173=_0x58ff35['length'];for(let _0x46bd98=0x1*0x1624+-0x16d7+0xb3;_0x46bd98<_0x144173;_0x46bd98++){const _0x3ab303=_0x58ff35[_0x46bd98];_0x3ab303['lightClust'+'ers']=null;const _0x1b412a=_0x3ab303['layer'];if(_0x1b412a['hasCluster'+'edLights']&&_0x1b412a['meshInstan'+'ces']['length']){const _0x5090d8=_0x1b412a['getLightId'+'Hash'](),_0x35cd26=this['_clusters']['get'](_0x5090d8);let _0x496f7f=_0x35cd26==null?void(-0xc40+-0xb09+0x7c3*0x3):_0x35cd26['lightClust'+'ers'];_0x496f7f||(_0x496f7f=cc['pop']()??new cu(this['device']),Ea['setName'](_0x496f7f,'Cluster-'+this['_allocated']['length']),this['_allocated']['push'](_0x496f7f),this['_clusters']['set'](_0x5090d8,_0x3ab303)),_0x3ab303['lightClust'+'ers']=_0x496f7f;}_0x3ab303['lightClust'+'ers']||(_0x3ab303['lightClust'+'ers']=_0x3a0bbe);}}}cc['forEach'](_0x2c5f49=>_0x2c5f49['destroy']()),cc['length']=-0x3*-0x7c7+-0xa58*0x1+-0x299*0x5;}['update'](_0x5b3106,_0x2cf13b){this['assign'](_0x5b3106),this['_clusters']['forEach'](_0x222324=>{const _0x55d7f7=_0x222324['layer'];_0x222324['lightClust'+'ers']['update'](_0x55d7f7['clusteredL'+'ightsSet'],_0x2cf13b);});}}const rr=new re(),af=[];class pm extends ys{constructor(_0x3b855f,_0x2e5cbb){super(_0x3b855f),h(this,'_quadRende'+'rer2D',null),h(this,'_quadRende'+'rerCube',null),h(this,'_filteredL'+'ights',[]),h(this,'_forceCopy',!(0xc10+-0x3a*-0xb+-0x2e9*0x5)),h(this,'_evtDevice'+'Restored',null),(this['_cubeSlots'+'Offsets']=_0x2e5cbb,this['requiresCu'+'bemaps']=!(0x1aed+0x2*-0xf8b+0x42a),this['blitTextur'+'eId']=_0x3b855f['scope']['resolve']('blitTextur'+'e'),this['invViewPro'+'jId']=_0x3b855f['scope']['resolve']('invViewPro'+'j'),this['_evtDevice'+'Restored']=_0x3b855f['on']('devicerest'+'ored',this['onDeviceRe'+'stored'],this));}['destroy'](){var _0x2f0a57,_0x4bf5d7,_0x4b0c01;(_0x2f0a57=this['_quadRende'+'rer2D'])==null||_0x2f0a57['destroy'](),this['_quadRende'+'rer2D']=null,(_0x4bf5d7=this['_quadRende'+'rerCube'])==null||_0x4bf5d7['destroy'](),this['_quadRende'+'rerCube']=null,(_0x4b0c01=this['_evtDevice'+'Restored'])==null||_0x4b0c01['off'](),this['_evtDevice'+'Restored']=null;}static['create'](_0x57e671,_0x3fc034){w['assert'](_0x57e671);const _0x4bc10e=new pm(_0x57e671['device'],_0x3fc034);return _0x4bc10e['init'](_0x57e671),_0x4bc10e['colorOps']['clear']=!(-0x2118+-0x1f2b+-0x4044*-0x1),_0x4bc10e['depthStenc'+'ilOps']['clearDepth']=!(-0x2*0xbc5+0xe60+0x1*0x92b),_0x4bc10e;}['onDeviceRe'+'stored'](){this['_forceCopy']=!(-0x59*-0x52+-0x1691+-0x5f1);}['update'](_0xfda73f){const _0x4520c0=this['_filteredL'+'ights'];this['filter'](_0xfda73f,_0x4520c0),this['executeEna'+'bled']=_0x4520c0['length']>-0x14db+0x976+0xb65;}['filter'](_0x15952f,_0x36b504){for(let _0x2a71de=0x1d49+0x169+-0x1eb2;_0x2a71de<_0x15952f['length'];_0x2a71de++){const _0x4449ae=_0x15952f[_0x2a71de];_0x4449ae['_type']!==ve&&_0x4449ae['atlasViewp'+'ortAllocat'+'ed']&&(!_0x4449ae['atlasSlotU'+'pdated']&&!this['_forceCopy']||_0x4449ae['enabled']&&_0x4449ae['cookie']&&_0x4449ae['visibleThi'+'sFrame']&&_0x36b504['push'](_0x4449ae));}this['_forceCopy']=!(-0x10*-0x22d+-0x19ff+-0x8d0);}['initInvVie'+'wProjMatri'+'ces'](){if(!af['length'])for(let _0x2b344d=-0x15df+0xadc+0xb03;_0x2b344d<0xdff+0xa+-0xe03;_0x2b344d++){const _0x19f679=Wn['create'](null,Ke,_0x2b344d),_0x4c8364=_0x19f679['projection'+'Matrix'],_0x569ccf=_0x19f679['node']['getLocalTr'+'ansform']()['clone']()['invert']();af[_0x2b344d]=new te()['mul2'](_0x4c8364,_0x569ccf)['invert']();}}get['quadRender'+'er2D'](){if(!this['_quadRende'+'rer2D']){const _0x137199=$t['createShad'+'er'](this['device'],{'uniqueName':'cookieRend'+'erer2d','attributes':{'vertex_position':Me},'vertexChunk':'cookieBlit'+'VS','fragmentChunk':'cookieBlit'+'2DPS'});this['_quadRende'+'rer2D']=new Ah(_0x137199);}return this['_quadRende'+'rer2D'];}get['quadRender'+'erCube'](){if(!this['_quadRende'+'rerCube']){const _0x1136e1=$t['createShad'+'er'](this['device'],{'uniqueName':'cookieRend'+'ererCube','attributes':{'vertex_position':Me},'vertexChunk':'cookieBlit'+'VS','fragmentChunk':'cookieBlit'+'CubePS'});this['_quadRende'+'rerCube']=new Ah(_0x1136e1);}return this['_quadRende'+'rerCube'];}['execute'](){const _0x4cc5ea=this['device'];_0x4cc5ea['setBlendSt'+'ate'](pt['NOBLEND']),_0x4cc5ea['setCullMod'+'e'](bt),_0x4cc5ea['setDepthSt'+'ate'](Yt['NODEPTH']),_0x4cc5ea['setStencil'+'State']();const _0xe5a08e=this['renderTarg'+'et']['colorBuffe'+'r']['width'],_0x50bc3a=this['_cubeSlots'+'Offsets'],_0x360ad0=this['_filteredL'+'ights'];for(let _0x31a4ab=0x5*0x7b7+0x123+-0x27b6;_0x31a4ab<_0x360ad0['length'];_0x31a4ab++){const _0x542da6=_0x360ad0[_0x31a4ab];Q['pushGpuMar'+'ker'](this['device'],'COOKIE\x20'+_0x542da6['_node']['name']);const _0x341e81=_0x542da6['numShadowF'+'aces'],_0x2a188e=_0x341e81>0x784+-0x1962+0x11df?this['quadRender'+'erCube']:this['quadRender'+'er2D'];_0x341e81>-0x131e+0x812+-0xb0d*-0x1&&this['initInvVie'+'wProjMatri'+'ces'](),this['blitTextur'+'eId']['setValue'](_0x542da6['cookie']);for(let _0x507861=0x43*-0x18+-0x1376+0xa*0x293;_0x507861<_0x341e81;_0x507861++){if(rr['copy'](_0x542da6['atlasViewp'+'ort']),_0x341e81>-0x36d*0x9+-0x10fa+-0x990*-0x5){const _0x96a3c7=rr['z']/(0x1ebc+-0xed5+-0xfe4*0x1),_0x5a480c=_0x50bc3a[_0x507861];rr['x']+=_0x96a3c7*_0x5a480c['x'],rr['y']+=_0x96a3c7*_0x5a480c['y'],rr['z']=_0x96a3c7,rr['w']=_0x96a3c7,this['invViewPro'+'jId']['setValue'](af[_0x507861]['data']);}rr['mulScalar'](_0xe5a08e),_0x2a188e['render'](rr);}Q['popGpuMark'+'er'](_0x4cc5ea);}_0x360ad0['length']=0x12*0x97+0x1235*0x2+0x12d*-0x28;}}class Vb extends ys{constructor(_0x343365,_0x5e66b8,_0x50c8a0){super(_0x343365),this['requiresCu'+'bemaps']=!(-0xf30+0x10c+0x1*0xe25),this['shadowRend'+'erer']=_0x5e66b8,this['shadowRend'+'ererLocal']=_0x50c8a0;}['update'](_0x5642ac){const _0x243ab8=this['shadowRend'+'ererLocal']['shadowLigh'+'ts'],_0x518cba=this['shadowRend'+'ererLocal']['prepareLig'+'hts'](_0x243ab8,_0x5642ac),_0x36ab2a=_0x243ab8['length'];this['enabled']=_0x36ab2a>-0x1f24+-0x1*0x1bc5+0x3*0x13a3,_0x36ab2a&&this['shadowRend'+'erer']['setupRende'+'rPass'](this,_0x518cba,!(-0xc37+0xec5*-0x1+0x1afd));}['execute'](){const _0x89ac1c=this['shadowRend'+'ererLocal']['shadowLigh'+'ts'],_0xd521e1=_0x89ac1c['length'];for(let _0x388baf=-0x68d+-0x280+0x90d;_0x388baf<_0xd521e1;_0x388baf++){const _0x524760=_0x89ac1c[_0x388baf];for(let _0x3c1408=-0x1*-0xa17+0x2*-0x15f+0xb*-0xab;_0x3c1408<_0x524760['numShadowF'+'aces'];_0x3c1408++)this['shadowRend'+'erer']['renderFace'](_0x524760,null,_0x3c1408,!(0x551+0x4*0x32+-0x619*0x1));}_0x89ac1c['length']=0x1*0x6b+0x850*0x2+-0x110b;}}class Gb extends ys{constructor(_0x3c30e5,_0x517122,_0x4dc7b0,_0x1e9cce,_0x248b51){super(_0x3c30e5),this['renderer']=_0x517122,this['frameGraph']=null,this['cookiesRen'+'derPass']=pm['create'](_0x248b51['cookieRend'+'erTarget'],_0x248b51['cubeSlotsO'+'ffsets']),this['beforePass'+'es']['push'](this['cookiesRen'+'derPass']),this['shadowRend'+'erPass']=new Vb(_0x3c30e5,_0x4dc7b0,_0x1e9cce),this['beforePass'+'es']['push'](this['shadowRend'+'erPass']);}['update'](_0x3f4e41,_0x5d7602,_0x1bf2b3,_0x2f3414,_0x1ed01e){this['frameGraph']=_0x3f4e41,this['cookiesRen'+'derPass']['enabled']=_0x1bf2b3,_0x1bf2b3&&this['cookiesRen'+'derPass']['update'](_0x2f3414),this['shadowRend'+'erPass']['enabled']=_0x5d7602,_0x5d7602&&this['shadowRend'+'erPass']['update'](_0x1ed01e);}['destroy'](){this['cookiesRen'+'derPass']['destroy'](),this['cookiesRen'+'derPass']=null;}['execute'](){const _0x2f8a91=de(),{renderer:_0x3c8266}=this,{scene:_0x315408}=_0x3c8266;_0x3c8266['worldClust'+'ersAllocat'+'or']['update'](this['frameGraph']['renderPass'+'es'],_0x315408['lighting']),_0x3c8266['_lightClus'+'tersTime']+=de()-_0x2f8a91,_0x3c8266['_lightClus'+'ters']=_0x3c8266['worldClust'+'ersAllocat'+'or']['count'];}}let nf=-0x1*-0x211+0xabe+-0xccf;const ar=new te(),nr=new te(),Oa=new te(),q_=new _i(),of=new sp(),j_=new te()['setScale'](-0x58*-0x36+-0x134d+0xbe,-(0x1fb*0x3+0x4d8*-0x8+0x20d0),0x1c2a+-0x1a29*-0x1+-0x3652),lf=new Set(),cf=new Set(),hf=new ky(),Y_=new te()['set']([0x1429+0x5*0x599+-0x3025,0x1801+-0xe*0x15d+-0x4eb,-0x1365+-0x340+0x155*0x11,-0x1d*-0xad+0x2551+0xeb*-0x3e,-0x17f7*0x1+0x1*-0x1bc5+-0x2*-0x19de,-0x635*0x2+0x2258*-0x1+-0x2ec3*-0x1,-0xdd3*0x1+-0x1bb7+0x1a*0x199,0x1*-0x136e+0x1*-0x2642+0x39b0,-0x13e5*-0x1+-0x2*-0x94f+-0x2683*0x1,-0x3*-0xbb+-0xe07+0x1e*0x65,0x24*-0xc+-0xccb*-0x2+-0x17e6+0.5,-0xc8c+-0x13b4+0x102*0x20,0x13d2+0xbe7*-0x1+-0x7eb,0x6*0xb7+0x1c06*0x1+0x814*-0x4,-0x1*-0xb2f+-0x17db+0xcac+0.5,0xf85+-0x1*-0xd3+-0x1057]),K_=[new J(0x2206+-0x29*0x21+-0x1*0x1cbd+0.5,-0x2*-0x686+-0x8*-0x412+0xe*-0x342+0.333333),new J(0x1f48+0x1407+-0x334f+0.25,0x1*-0xb21+0x24c2+0x9*-0x2d9+0.666667),new J(-0x1aeb+-0xc9c+0x2787+0.75,0xdf*0x5+-0x1767+0x130c+0.111111),new J(0xc7a*-0x2+0x2*0xdfd+-0x306+0.125,-0xa*0x1c6+-0x4f7+0x16b3+0.444444),new J(-0x2507+-0x16*0x1a3+0x4909+0.625,-0x1*-0x8f+-0x1f+-0x70+0.777778),new J(0x1*0x1c37+-0x678*0x6+0xa99*0x1+0.375,0x6*-0x445+0x1298+0x383*0x2+0.222222),new J(-0x722*0x4+0xfa3*-0x1+0x2c2b+0.875,-0x423*0x6+-0x1320+0x2bf2+0.555556),new J(-0x1*-0xb68+0x3*0x9e8+-0x2f*0xe0+0.0625,-0x1df7*-0x1+0x1e51+-0x789*0x8+0.888889),new J(-0x179b+0x42*0x83+-0xa2b+0.5625,0xb3a+0x998+-0x14d2+0.037037),new J(-0x328+0xa*0xf4+-0x660+0.3125,-0x13c5+0x1bbb+-0x7f6*0x1+0.37037),new J(-0x1717+-0x1ee5*-0x1+0x6*-0x14d+0.8125,0x58f*0x7+-0x15fe+-0x10eb*0x1+0.703704),new J(0xf*0x26a+-0x19e7+-0xa4f+0.1875,-0xe*-0x1a2+0x1d89+-0x3465+0.148148),new J(0x574*0x4+-0x1730+-0xb0*-0x2+0.6875,0x1db+0x10*0x1b1+0x1*-0x1ceb+0.481481),new J(0x2376+-0x4*0x244+-0x1a66+0.4375,0x576+-0xed*-0xa+-0xeb8+0.814815),new J(0x1d*-0x2c+-0x13*-0x189+-0x97*0x29+0.9375,0x1*0x2183+-0x3a*-0xe+-0x24af+0.259259),new J(0xa56+0x15*-0xa1+-0x3*-0xf5+0.03125,0x742+0xa8d*-0x1+0x1*0x34b+0.592593)],Hb=new te(),Wb=new te(),$b=new te(),Xb=new te(),qb=new te(),jb=new te(),Fa=new Set(),df=[],ff=[];class Yb{constructor(_0x5f5489){h(this,'clustersDe'+'bugRendere'+'d',!(-0x1*-0x892+-0x2217+0x1986)),h(this,'processing'+'MeshInstan'+'ces',new Set()),h(this,'worldClust'+'ersAllocat'+'or'),h(this,'lights',[]),h(this,'localLight'+'s',[]),h(this,'cameraDirS'+'hadowLight'+'s',new Map()),h(this,'dirLightSh'+'adows',new Map()),h(this,'blueNoise',new wb(0x1e17+-0x2138+0x39c)),(this['device']=_0x5f5489,this['scene']=null,this['worldClust'+'ersAllocat'+'or']=new zb(_0x5f5489),this['lightTextu'+'reAtlas']=new Ib(_0x5f5489),this['shadowMapC'+'ache']=new Lb(),this['shadowRend'+'erer']=new Cv(this,this['lightTextu'+'reAtlas']),this['_shadowRen'+'dererLocal']=new Ob(this,this['shadowRend'+'erer']),this['_shadowRen'+'dererDirec'+'tional']=new kb(this,this['shadowRend'+'erer']),this['_renderPas'+'sUpdateClu'+'stered']=new Gb(this['device'],this,this['shadowRend'+'erer'],this['_shadowRen'+'dererLocal'],this['lightTextu'+'reAtlas']),this['viewUnifor'+'mFormat']=null,this['viewBindGr'+'oupFormat']=null,this['_skinTime']=0x29*-0x7f+-0x1*0xa8b+0x1ee2,this['_morphTime']=0x228b+0x2*-0x653+-0x127*0x13,this['_cullTime']=-0x29*-0x88+-0x7*-0x565+0x3*-0x13d9,this['_shadowMap'+'Time']=0x3*0xd01+0x59*-0x65+0x2*-0x1f3,this['_lightClus'+'tersTime']=0x1*-0xf58+-0x188f+0x2a9*0xf,this['_layerComp'+'ositionUpd'+'ateTime']=-0x1*0x7c2+0x788*-0x1+0xf4a,this['_shadowDra'+'wCalls']=-0x1ec6+-0x1c*-0x9+0x3e*0x7b,this['_skinDrawC'+'alls']=0x64*0xa+0x1f*-0xb7+0x1241,this['_instanced'+'DrawCalls']=0x745+-0x10*-0x16b+-0x1*0x1df5,this['_shadowMap'+'Updates']=0x98e+-0x134+-0x85a,this['_numDrawCa'+'llsCulled']=0xaf+-0xae0+0xa31,this['_camerasRe'+'ndered']=-0x15e5+0xa9*-0x33+0x3790,this['_lightClus'+'ters']=0x1*0x9ea+-0x1*0x209+0x1*-0x7e1);const _0x450730=_0x5f5489['scope'];this['boneTextur'+'eId']=_0x450730['resolve']('texture_po'+'seMap'),this['modelMatri'+'xId']=_0x450730['resolve']('matrix_mod'+'el'),this['normalMatr'+'ixId']=_0x450730['resolve']('matrix_nor'+'mal'),this['viewInvId']=_0x450730['resolve']('matrix_vie'+'wInverse'),this['viewPos']=new Float32Array(0x9ce+-0x183*-0x3+-0xe54),this['viewPosId']=_0x450730['resolve']('view_posit'+'ion'),this['projId']=_0x450730['resolve']('matrix_pro'+'jection'),this['projSkybox'+'Id']=_0x450730['resolve']('matrix_pro'+'jectionSky'+'box'),this['viewId']=_0x450730['resolve']('matrix_vie'+'w'),this['viewId3']=_0x450730['resolve']('matrix_vie'+'w3'),this['viewProjId']=_0x450730['resolve']('matrix_vie'+'wProjectio'+'n'),this['flipYId']=_0x450730['resolve']('projection'+'FlipY'),this['tbnBasis']=_0x450730['resolve']('tbnBasis'),this['nearClipId']=_0x450730['resolve']('camera_nea'+'r'),this['farClipId']=_0x450730['resolve']('camera_far'),this['cameraPara'+'ms']=new Float32Array(0x22c0*0x1+0x1d1f+0x3fdb*-0x1),this['cameraPara'+'msId']=_0x450730['resolve']('camera_par'+'ams'),this['viewIndexI'+'d']=_0x450730['resolve']('view_index'),this['viewIndexI'+'d']['setValue'](-0x134e*0x2+0xf1*0x1+0x25ab*0x1),this['blueNoiseJ'+'itterVersi'+'on']=-0x30+-0xd23+-0x9*-0x17b,this['blueNoiseJ'+'itterVec']=new re(),this['blueNoiseJ'+'itterData']=new Float32Array(-0x25ae+0x3*0xc9d+0x25*-0x1),this['blueNoiseJ'+'itterId']=_0x450730['resolve']('blueNoiseJ'+'itter'),this['blueNoiseT'+'extureId']=_0x450730['resolve']('blueNoiseT'+'ex32'),this['alphaTestI'+'d']=_0x450730['resolve']('alpha_ref'),this['opacityMap'+'Id']=_0x450730['resolve']('texture_op'+'acityMap'),this['exposureId']=_0x450730['resolve']('exposure'),this['twoSidedLi'+'ghtingNegS'+'caleFactor'+'Id']=_0x450730['resolve']('twoSidedLi'+'ghtingNegS'+'caleFactor'),this['twoSidedLi'+'ghtingNegS'+'caleFactor'+'Id']['setValue'](0x252e+0x27f*-0x1+-0xd*0x2ab),this['morphPosit'+'ionTex']=_0x450730['resolve']('morphPosit'+'ionTex'),this['morphNorma'+'lTex']=_0x450730['resolve']('morphNorma'+'lTex'),this['morphTexPa'+'rams']=_0x450730['resolve']('morph_tex_'+'params'),this['lightCube']=new bb(),this['constantLi'+'ghtCube']=_0x450730['resolve']('lightCube['+'0]');}['destroy'](){this['shadowRend'+'erer']=null,this['_shadowRen'+'dererLocal']=null,this['_shadowRen'+'dererDirec'+'tional']=null,this['shadowMapC'+'ache']['destroy'](),this['shadowMapC'+'ache']=null,this['_renderPas'+'sUpdateClu'+'stered']['destroy'](),this['_renderPas'+'sUpdateClu'+'stered']=null,this['lightTextu'+'reAtlas']['destroy'](),this['lightTextu'+'reAtlas']=null;}['setupViewp'+'ort'](_0x541888,_0x1cb04e){const _0x4b7306=this['device'],_0x16bd59=_0x1cb04e?_0x1cb04e['width']:_0x4b7306['width'],_0x414380=_0x1cb04e?_0x1cb04e['height']:_0x4b7306['height'],_0x5b8989=_0x541888['rect'];let _0x55d997=Math['floor'](_0x5b8989['x']*_0x16bd59),_0x3e766a=Math['floor'](_0x5b8989['y']*_0x414380),_0x3bf939=Math['floor'](_0x5b8989['z']*_0x16bd59),_0x21d4af=Math['floor'](_0x5b8989['w']*_0x414380);if(_0x4b7306['setViewpor'+'t'](_0x55d997,_0x3e766a,_0x3bf939,_0x21d4af),_0x541888['_scissorRe'+'ctClear']){const _0x3ef5a9=_0x541888['scissorRec'+'t'];_0x55d997=Math['floor'](_0x3ef5a9['x']*_0x16bd59),_0x3e766a=Math['floor'](_0x3ef5a9['y']*_0x414380),_0x3bf939=Math['floor'](_0x3ef5a9['z']*_0x16bd59),_0x21d4af=Math['floor'](_0x3ef5a9['w']*_0x414380);}_0x4b7306['setScissor'](_0x55d997,_0x3e766a,_0x3bf939,_0x21d4af);}['setCameraU'+'niforms'](_0x545987,_0x4d89c5){var _0x47b041,_0x3596f4;const _0x4000e9=_0x4d89c5==null?void(-0x15a+0x1*0x209e+0x2e*-0xae):_0x4d89c5['flipY'];let _0x54f78f=null;if(_0x545987['xr']&&_0x545987['xr']['session']){const _0x4ce057=((_0x3596f4=(_0x47b041=_0x545987['_node'])==null?void(-0x1*0x236b+0x11a1+0x11ca):_0x47b041['parent'])==null?void(-0x1a*-0x3b+0x14e*0x1+-0x2*0x3a6):_0x3596f4['getWorldTr'+'ansform']())||null;_0x54f78f=_0x545987['xr']['views']['list'];for(let _0x4f4433=0x110a+0xdd7+-0x1ee1;_0x4f4433<_0x54f78f['length'];_0x4f4433++){const _0x3a8c94=_0x54f78f[_0x4f4433];_0x3a8c94['updateTran'+'sforms'](_0x4ce057),_0x545987['frustum']['setFromMat'+'4'](_0x3a8c94['projViewOf'+'fMat']);}}else{let _0x443f9d=_0x545987['projection'+'Matrix'];_0x545987['calculateP'+'rojection']&&_0x545987['calculateP'+'rojection'](_0x443f9d,ec);let _0x45d5c0=_0x545987['getProject'+'ionMatrixS'+'kybox']();_0x4000e9&&(_0x443f9d=Hb['mul2'](j_,_0x443f9d),_0x45d5c0=Wb['mul2'](j_,_0x45d5c0)),this['device']['isWebGPU']&&(_0x443f9d=$b['mul2'](Y_,_0x443f9d),_0x45d5c0=Xb['mul2'](Y_,_0x45d5c0));const {jitter:_0x5dc1f2}=_0x545987;let _0x382d19=-0x1dfd+-0x1*-0x26a3+0x3*-0x2e2,_0xcf5476=-0x1885+0xd*0x47+-0x1*-0x14ea;if(_0x5dc1f2>-0x92*-0x21+-0x28*-0xd+-0x11*0x13a){const _0x121e9b=_0x4d89c5?_0x4d89c5['width']:this['device']['width'],_0x36b4f4=_0x4d89c5?_0x4d89c5['height']:this['device']['height'],_0xcd1ccc=K_[this['device']['renderVers'+'ion']%K_['length']];_0x382d19=_0x5dc1f2*(_0xcd1ccc['x']*(-0x1*-0x10b+-0x217d*-0x1+0x3*-0xb82)-(0xa34+-0xe8*-0x13+-0x1*0x1b6b))/_0x121e9b,_0xcf5476=_0x5dc1f2*(_0xcd1ccc['y']*(-0x18ce+-0x1bd5+0x34a5)-(0x2504*0x1+-0x2575+0x72))/_0x36b4f4,_0x443f9d=qb['copy'](_0x443f9d),_0x443f9d['data'][-0x2*-0xf77+-0xaca+-0xa0e*0x2]=_0x382d19,_0x443f9d['data'][-0xaca*0x1+-0x2690+0x3163]=_0xcf5476,_0x45d5c0=jb['copy'](_0x45d5c0),_0x45d5c0['data'][0x10ac+-0x11*0x124+-0x58*-0x8]=_0x382d19,_0x45d5c0['data'][0x14f1+-0x877+-0x23*0x5b]=_0xcf5476,this['blueNoiseJ'+'itterVersi'+'on']!==this['device']['renderVers'+'ion']&&(this['blueNoiseJ'+'itterVersi'+'on']=this['device']['renderVers'+'ion'],this['blueNoise']['vec4'](this['blueNoiseJ'+'itterVec']));}const _0x51fb64=_0x5dc1f2>0x2*0x735+0x1588*-0x1+0x71e?this['blueNoiseJ'+'itterVec']:re['ZERO'];if(this['blueNoiseJ'+'itterData'][0x7f*-0x2f+-0x1*-0x16f+0x2*0xaf1]=_0x51fb64['x'],this['blueNoiseJ'+'itterData'][-0xae*0xc+-0x1c4+0x15*0x79]=_0x51fb64['y'],this['blueNoiseJ'+'itterData'][0x260b+0x1fb9+-0x45c2*0x1]=_0x51fb64['z'],this['blueNoiseJ'+'itterData'][-0x69b+-0xd5f+0x2db*0x7]=_0x51fb64['w'],this['blueNoiseJ'+'itterId']['setValue'](this['blueNoiseJ'+'itterData']),this['projId']['setValue'](_0x443f9d['data']),this['projSkybox'+'Id']['setValue'](_0x45d5c0['data']),_0x545987['calculateT'+'ransform'])_0x545987['calculateT'+'ransform'](nr,ec);else{const _0xec9e9b=_0x545987['_node']['getPositio'+'n'](),_0x19a609=_0x545987['_node']['getRotatio'+'n']();nr['setTRS'](_0xec9e9b,_0x19a609,D['ONE']);}this['viewInvId']['setValue'](nr['data']),Oa['copy'](nr)['invert'](),this['viewId']['setValue'](Oa['data']),q_['setFromMat'+'4'](Oa),this['viewId3']['setValue'](q_['data']),ar['mul2'](_0x443f9d,Oa),this['viewProjId']['setValue'](ar['data']),_0x545987['_storeShad'+'erMatrices'](ar,_0x382d19,_0xcf5476,this['device']['renderVers'+'ion']),this['flipYId']['setValue'](_0x4000e9?-(0xe07+0x29c*0xe+-0x328e):0x10b9+0x1cb4+-0x2d6c),this['dispatchVi'+'ewPos'](_0x545987['_node']['getPositio'+'n']()),_0x545987['frustum']['setFromMat'+'4'](ar);}this['tbnBasis']['setValue'](_0x4000e9?-(-0x1b7+0x22*-0x25+0x6a2):-0x95*-0x21+-0x150a+0x1d6);const _0x213499=_0x545987['_nearClip'],_0x263ff8=_0x545987['_farClip'];return this['nearClipId']['setValue'](_0x213499),this['farClipId']['setValue'](_0x263ff8),this['cameraPara'+'ms'][0x7aa+-0x40*0x7a+0xb6b*0x2]=(-0x1d5*-0xd+0x1cc8+0x2c*-0x132)/_0x263ff8,this['cameraPara'+'ms'][-0x1*-0x1bc9+-0x2356+0x78e]=_0x263ff8,this['cameraPara'+'ms'][0x1a0f+-0xb*-0x85+0x1ac*-0x13]=_0x213499,this['cameraPara'+'ms'][-0x13c*-0x12+-0x43*-0x29+-0x20f0]=_0x545987['projection']===En?0x145b+0xd36+-0x2190:0x1dd2+0x1c48+-0x6*0x9af,this['cameraPara'+'msId']['setValue'](this['cameraPara'+'ms']),this['exposureId']['setValue'](this['scene']['physicalUn'+'its']?_0x545987['getExposur'+'e']():this['scene']['exposure']),_0x54f78f;}['clear'](_0x4dc8d6,_0x31f461,_0x1d2e3a,_0x22601c){const _0xaf9d33=(_0x31f461??_0x4dc8d6['_clearColo'+'rBuffer']?jo:0x1*0x1a71+0xc1b*0x3+-0x22a*0x1d)|(_0x1d2e3a??_0x4dc8d6['_clearDept'+'hBuffer']?Yo:-0x1df*0x1+-0x14*0xe9+0x1413)|(_0x22601c??_0x4dc8d6['_clearSten'+'cilBuffer']?ch:0x1e98+0x9b0*0x4+-0x4558);if(_0xaf9d33){const _0x22aaad=this['device'];Q['pushGpuMar'+'ker'](_0x22aaad,'CLEAR'),_0x22aaad['clear']({'color':[_0x4dc8d6['_clearColo'+'r']['r'],_0x4dc8d6['_clearColo'+'r']['g'],_0x4dc8d6['_clearColo'+'r']['b'],_0x4dc8d6['_clearColo'+'r']['a']],'depth':_0x4dc8d6['_clearDept'+'h'],'stencil':_0x4dc8d6['_clearSten'+'cil'],'flags':_0xaf9d33}),Q['popGpuMark'+'er'](_0x22aaad);}}['setCamera'](_0x4c9313,_0x5f4b3b,_0x182c50,_0x38ea65=null){this['setCameraU'+'niforms'](_0x4c9313,_0x5f4b3b),this['clearView'](_0x4c9313,_0x5f4b3b,_0x182c50,!(-0x1b6b+0x171f+0x3*0x16f));}['clearView'](_0x5570a1,_0x1411b9,_0x2e937b,_0x536b87){const _0x50cc30=this['device'];if(Q['pushGpuMar'+'ker'](_0x50cc30,'CLEAR-VIEW'),_0x50cc30['setRenderT'+'arget'](_0x1411b9),_0x50cc30['updateBegi'+'n'](),_0x536b87&&(_0x50cc30['setColorWr'+'ite'](!(0x14b2+0x3*-0x412+-0x87c),!(-0x25ce+0x1641+0xf8d),!(-0x1d72+-0x1741+0x34b3),!(0x19*0x14d+-0x1*0x183b+-0x84a)),_0x50cc30['setDepthWr'+'ite'](!(-0x1*-0x25a9+0x90f*0x3+0x1*-0x40d6))),this['setupViewp'+'ort'](_0x5570a1,_0x1411b9),_0x2e937b){const _0xe563d7=_0x5570a1['_clearOpti'+'ons'];_0x50cc30['clear'](_0xe563d7||{'color':[_0x5570a1['_clearColo'+'r']['r'],_0x5570a1['_clearColo'+'r']['g'],_0x5570a1['_clearColo'+'r']['b'],_0x5570a1['_clearColo'+'r']['a']],'depth':_0x5570a1['_clearDept'+'h'],'flags':(_0x5570a1['_clearColo'+'rBuffer']?jo:-0x1d0b*-0x1+0x25*-0x61+0x3*-0x502)|(_0x5570a1['_clearDept'+'hBuffer']?Yo:-0x66a+-0xb1*0x2f+0x26e9)|(_0x5570a1['_clearSten'+'cilBuffer']?ch:0xb03*-0x3+-0x14bc+0x35c5),'stencil':_0x5570a1['_clearSten'+'cil']});}Q['popGpuMark'+'er'](_0x50cc30);}['setupCullM'+'ode'](_0x1c4aaa,_0x1d30f7,_0x32db2f){const _0x1c7976=_0x32db2f['material'];let _0x12cee8=bt;if(_0x1c4aaa){let _0xf297e6=-0x2*-0x215+-0x10*-0x1b1+0x1*-0x1f39;(_0x1c7976['cull']===Fo||_0x1c7976['cull']===pa)&&(_0xf297e6=_0x1d30f7*_0x32db2f['flipFacesF'+'actor']*_0x32db2f['node']['worldScale'+'Sign']),_0xf297e6<0x21d0+0x5*0x4eb+0x3a67*-0x1?_0x12cee8=_0x1c7976['cull']===Fo?pa:Fo:_0x12cee8=_0x1c7976['cull'];}this['device']['setCullMod'+'e'](_0x12cee8),_0x12cee8===bt&&_0x1c7976['cull']===bt&&this['twoSidedLi'+'ghtingNegS'+'caleFactor'+'Id']['setValue'](_0x32db2f['node']['worldScale'+'Sign']);}['updateCame'+'raFrustum'](_0x5ad46c){if(_0x5ad46c['xr']&&_0x5ad46c['xr']['views']['list']['length']){const _0x518907=_0x5ad46c['xr']['views']['list'][0x6e6+0x8c6+-0xfac];ar['mul2'](_0x518907['projMat'],_0x518907['viewOffMat']),_0x5ad46c['frustum']['setFromMat'+'4'](ar);return;}const _0x4c696b=_0x5ad46c['projection'+'Matrix'];if(_0x5ad46c['calculateP'+'rojection']&&_0x5ad46c['calculateP'+'rojection'](_0x4c696b,ec),_0x5ad46c['calculateT'+'ransform'])_0x5ad46c['calculateT'+'ransform'](nr,ec);else{const _0x53bffe=_0x5ad46c['_node']['getPositio'+'n'](),_0x279dab=_0x5ad46c['_node']['getRotatio'+'n']();nr['setTRS'](_0x53bffe,_0x279dab,D['ONE']),this['viewInvId']['setValue'](nr['data']);}Oa['copy'](nr)['invert'](),ar['mul2'](_0x4c696b,Oa),_0x5ad46c['frustum']['setFromMat'+'4'](ar);}['setBaseCon'+'stants'](_0x3d2be3,_0x2b8c27){_0x3d2be3['setCullMod'+'e'](_0x2b8c27['cull']),_0x2b8c27['opacityMap']&&this['opacityMap'+'Id']['setValue'](_0x2b8c27['opacityMap']),(_0x2b8c27['opacityMap']||_0x2b8c27['alphaTest']>-0xcb5*0x3+-0x1*0x989+0x5*0x988)&&this['alphaTestI'+'d']['setValue'](_0x2b8c27['alphaTest']);}['updateCpuS'+'kinMatrice'+'s'](_0x46455b){nf++;const _0x16828f=_0x46455b['length'];if(_0x16828f===0x85c+0x2c5+-0xb21)return;const _0x1a2e29=de();for(let _0x5de87a=0x1507*-0x1+-0x2*0x1237+-0x3975*-0x1;_0x5de87a<_0x16828f;_0x5de87a++){const _0x23014a=_0x46455b[_0x5de87a]['skinInstan'+'ce'];_0x23014a&&(_0x23014a['updateMatr'+'ices'](_0x46455b[_0x5de87a]['node'],nf),_0x23014a['_dirty']=!(0x1950+0x2*0x21c+0x3b1*-0x8));}this['_skinTime']+=de()-_0x1a2e29;}['updateGpuS'+'kinMatrice'+'s'](_0x4074bb){const _0x137311=de();for(const _0x44b109 of _0x4074bb){const _0x59c6ac=_0x44b109['skinInstan'+'ce'];_0x59c6ac&&_0x59c6ac['_dirty']&&(_0x59c6ac['updateMatr'+'ixPalette'](_0x44b109['node'],nf),_0x59c6ac['_dirty']=!(-0x1*-0x1cd+0xd70+-0xf3c));}this['_skinTime']+=de()-_0x137311;}['updateMorp'+'hing'](_0x4e89f6){const _0x5979bb=de();for(const _0x468f1e of _0x4e89f6){const _0x13c67d=_0x468f1e['morphInsta'+'nce'];_0x13c67d&&_0x13c67d['_dirty']&&_0x13c67d['update']();}this['_morphTime']+=de()-_0x5979bb;}['updateGSpl'+'ats'](_0x2b489f){var _0x1051b9;for(const _0x9d3b90 of _0x2b489f)(_0x1051b9=_0x9d3b90['gsplatInst'+'ance'])==null||_0x1051b9['update']();}['gpuUpdate'](_0x56b351){this['updateGpuS'+'kinMatrice'+'s'](_0x56b351),this['updateMorp'+'hing'](_0x56b351),this['updateGSpl'+'ats'](_0x56b351);}['setVertexB'+'uffers'](_0x4c7336,_0x26bf81){_0x4c7336['setVertexB'+'uffer'](_0x26bf81['vertexBuff'+'er']);}['setMorphin'+'g'](_0x3fa4f3,_0x46df1e){_0x46df1e&&(_0x46df1e['prepareRen'+'dering'](_0x3fa4f3),_0x3fa4f3['setVertexB'+'uffer'](_0x46df1e['morph']['vertexBuff'+'erIds']),this['morphPosit'+'ionTex']['setValue'](_0x46df1e['texturePos'+'itions']),this['morphNorma'+'lTex']['setValue'](_0x46df1e['textureNor'+'mals']),this['morphTexPa'+'rams']['setValue'](_0x46df1e['_texturePa'+'rams']));}['setSkinnin'+'g'](_0x45954f,_0x447843){const _0x1706f7=_0x447843['skinInstan'+'ce'];if(_0x1706f7){this['_skinDrawC'+'alls']++;const _0x3828f2=_0x1706f7['boneTextur'+'e'];this['boneTextur'+'eId']['setValue'](_0x3828f2);}}['dispatchVi'+'ewPos'](_0x500b54){const _0x4c72e0=this['viewPos'];_0x4c72e0[-0x223*0xf+0x1a0d+0x600]=_0x500b54['x'],_0x4c72e0[0x1b8e+-0x2f+0x1b5e*-0x1]=_0x500b54['y'],_0x4c72e0[-0x131*-0x11+0xb27+0xfb3*-0x2]=_0x500b54['z'],this['viewPosId']['setValue'](_0x4c72e0);}['initViewBi'+'ndGroupFor'+'mat'](_0x53f7b6){if(this['device']['supportsUn'+'iformBuffe'+'rs']&&!this['viewUnifor'+'mFormat']){const _0x37a493=[new dt('matrix_vie'+'w',li),new dt('matrix_vie'+'wInverse',li),new dt('matrix_pro'+'jection',li),new dt('matrix_pro'+'jectionSky'+'box',li),new dt('matrix_vie'+'wProjectio'+'n',li),new dt('matrix_vie'+'w3',On),new dt('cubeMapRot'+'ationMatri'+'x',On),new dt('view_posit'+'ion',ds),new dt('skyboxInte'+'nsity',Xs),new dt('exposure',Xs),new dt('textureBia'+'s',Xs),new dt('view_index',Xs)];_0x53f7b6&&_0x37a493['push'](new dt('clusterCel'+'lsCountByB'+'oundsSize',ds),new dt('clusterTex'+'tureSize',ds),new dt('clusterBou'+'ndsMin',ds),new dt('clusterBou'+'ndsDelta',ds),new dt('clusterCel'+'lsDot',ds),new dt('clusterCel'+'lsMax',ds),new dt('shadowAtla'+'sParams',ga),new dt('clusterMax'+'Cells',_a),new dt('clusterSki'+'p',Xs)),this['viewUnifor'+'mFormat']=new zy(this['device'],_0x37a493);const _0x4fc334=[new kp(Np,Fp|by)];this['viewBindGr'+'oupFormat']=new Ny(this['device'],_0x4fc334);}}['setupViewU'+'niforms'](_0x5efe10,_0xf61860){this['projId']['setValue'](_0x5efe10['projMat']['data']),this['projSkybox'+'Id']['setValue'](_0x5efe10['projMat']['data']),this['viewId']['setValue'](_0x5efe10['viewOffMat']['data']),this['viewInvId']['setValue'](_0x5efe10['viewInvOff'+'Mat']['data']),this['viewId3']['setValue'](_0x5efe10['viewMat3']['data']),this['viewProjId']['setValue'](_0x5efe10['projViewOf'+'fMat']['data']),this['viewPosId']['setValue'](_0x5efe10['positionDa'+'ta']),this['viewIndexI'+'d']['setValue'](_0xf61860);}['setupViewU'+'niformBuff'+'ers'](_0x5c8dea,_0x4c7c55,_0x260051,_0xa983bf){w['assert'](Array['isArray'](_0x5c8dea),'viewBindGr'+'oups\x20must\x20'+'be\x20an\x20arra'+'y');const {device:_0x2671bf}=this,_0x1ab59c=(_0xa983bf==null?void(-0x2b7+0x255e+-0x22a7):_0xa983bf['length'])??-0xa9d*-0x1+-0x144b+0x9af;for(;_0x5c8dea['length']<_0x1ab59c;){const _0x5871e0=new zp(_0x2671bf,_0x4c7c55,!(-0x1341*0x1+-0x1*0x1e6d+0x4f*0xa1)),_0x208ff9=new Up(_0x2671bf,_0x260051,_0x5871e0);Ea['setName'](_0x208ff9,'ViewBindGr'+'oup_'+_0x208ff9['id']),_0x5c8dea['push'](_0x208ff9);}if(_0xa983bf)for(let _0xd350=0x1502*-0x1+0xb*0x61+0x10d7;_0xd350<_0x1ab59c;_0xd350++){const _0x56129e=_0xa983bf[_0xd350];this['setupViewU'+'niforms'](_0x56129e,_0xd350);const _0xfc3f8d=_0x5c8dea[_0xd350];_0xfc3f8d['defaultUni'+'formBuffer']['update'](),_0xfc3f8d['update']();}else{const _0x53e603=_0x5c8dea[-0xe1d+-0x1606+0x2423];_0x53e603['defaultUni'+'formBuffer']['update'](),_0x53e603['update']();}_0xa983bf||_0x2671bf['setBindGro'+'up'](rl,_0x5c8dea[0x14d1+0x5f+-0x1530]);}['setupMeshU'+'niformBuff'+'ers'](_0x2054d5){const _0x200fc7=this['device'];if(_0x200fc7['supportsUn'+'iformBuffe'+'rs']){const _0x28b163=_0x2054d5['getBindGro'+'up'](_0x200fc7);_0x28b163['update'](),_0x200fc7['setBindGro'+'up'](Oy,_0x28b163),_0x2054d5['getUniform'+'Buffer'](_0x200fc7)['update'](hf),_0x200fc7['setBindGro'+'up'](su,hf['bindGroup'],hf['offsets']);}}['setMeshIns'+'tanceMatri'+'ces'](_0x57e19a,_0x2c035b=!(0x94f+0x3e*0x43+-0x1988)){const _0x4df2d2=_0x57e19a['node']['worldTrans'+'form'];this['modelMatri'+'xId']['setValue'](_0x4df2d2['data']),_0x2c035b&&this['normalMatr'+'ixId']['setValue'](_0x57e19a['node']['normalMatr'+'ix']['data']);}['cull'](_0x1a4c55,_0x1e7e07,_0x469ae6){const _0x145329=de(),_0x2ecc38=_0x469ae6['opaque'];_0x2ecc38['length']=-0x19eb+0x16*0x89+0x11*0xd5;const _0x3f73f3=_0x469ae6['transparen'+'t'];_0x3f73f3['length']=0x1*0x2231+0x14b3*0x1+-0x1*0x36e4;const _0x4cad81=_0x1a4c55['frustumCul'+'ling'],_0x57f75e=_0x1e7e07['length'];for(let _0x4ccaa9=-0x254b+-0x1*-0x646+-0x3*-0xa57;_0x4ccaa9<_0x57f75e;_0x4ccaa9++){const _0x63d33d=_0x1e7e07[_0x4ccaa9];_0x63d33d['visible']&&(!_0x4cad81||!_0x63d33d['cull']||_0x63d33d['_isVisible'](_0x1a4c55))&&(_0x63d33d['visibleThi'+'sFrame']=!(0x26c9+0x6f3*0x5+-0x4988),(_0x63d33d['transparen'+'t']?_0x3f73f3:_0x2ecc38)['push'](_0x63d33d),(_0x63d33d['skinInstan'+'ce']||_0x63d33d['morphInsta'+'nce']||_0x63d33d['gsplatInst'+'ance'])&&(this['processing'+'MeshInstan'+'ces']['add'](_0x63d33d),_0x63d33d['gsplatInst'+'ance']&&_0x63d33d['gsplatInst'+'ance']['cameras']['push'](_0x1a4c55)));}this['_cullTime']+=de()-_0x145329,this['_numDrawCa'+'llsCulled']+=_0x4cad81?_0x57f75e:-0x2b*-0x7c+0x1*-0x137d+-0x157;}['collectLig'+'hts'](_0x3c553b){this['lights']['length']=0xf3a+0x1f47+-0x2e81*0x1,this['localLight'+'s']['length']=0x14d1+0x19*-0x19+-0x1260;const _0x5e1129=this['scene']['_stats'];_0x5e1129['dynamicLig'+'hts']=0x2*-0x17a+0x167e+-0x9c5*0x2,_0x5e1129['bakedLight'+'s']=0x53d+0x1e5f+-0x239c;const _0x3c925f=_0x3c553b['layerList']['length'];for(let _0x1fade7=0x2591+-0x181+-0x2410;_0x1fade7<_0x3c925f;_0x1fade7++){const _0x4f3395=_0x3c553b['layerList'][_0x1fade7];if(!cf['has'](_0x4f3395)){cf['add'](_0x4f3395);const _0x50ba56=_0x4f3395['_lights'];for(let _0x483ed9=-0x816+0x5f*-0x9+0xc3*0xf;_0x483ed9<_0x50ba56['length'];_0x483ed9++){const _0x12552b=_0x50ba56[_0x483ed9];lf['has'](_0x12552b)||(lf['add'](_0x12552b),this['lights']['push'](_0x12552b),_0x12552b['_type']!==ve&&this['localLight'+'s']['push'](_0x12552b),(_0x12552b['mask']&Ss||_0x12552b['mask']&di)&&_0x5e1129['dynamicLig'+'hts']++,_0x12552b['mask']&fi&&_0x5e1129['bakedLight'+'s']++);}}}_0x5e1129['lights']=this['lights']['length'],lf['clear'](),cf['clear']();}['cullLights'](_0x3ad2a7,_0x13c903){const _0x2e3042=this['scene']['clusteredL'+'ightingEna'+'bled'],_0x2df432=this['scene']['physicalUn'+'its'];for(let _0x41d361=-0x102*-0x6+-0x1634+-0x5e*-0x2c;_0x41d361<_0x13c903['length'];_0x41d361++){const _0x4ea3fc=_0x13c903[_0x41d361];if(_0x4ea3fc['enabled']){if(_0x4ea3fc['_type']!==ve){if(_0x4ea3fc['getBoundin'+'gSphere'](of),_0x3ad2a7['frustum']['containsSp'+'here'](of)){_0x4ea3fc['visibleThi'+'sFrame']=!(0x1eb7+-0x3fb*0x8+0x121*0x1),_0x4ea3fc['usePhysica'+'lUnits']=_0x2df432;const _0x1b8fa9=_0x3ad2a7['getScreenS'+'ize'](of);_0x4ea3fc['maxScreenS'+'ize']=Math['max'](_0x4ea3fc['maxScreenS'+'ize'],_0x1b8fa9);}else _0x2e3042||_0x4ea3fc['castShadow'+'s']&&!_0x4ea3fc['shadowMap']&&(_0x4ea3fc['visibleThi'+'sFrame']=!(-0x10bf+-0x38d+0x144c));}else _0x4ea3fc['usePhysica'+'lUnits']=this['scene']['physicalUn'+'its'];}}}['cullShadow'+'maps'](_0x259d91){const _0x5b4d84=this['scene']['clusteredL'+'ightingEna'+'bled'];for(let _0x4b7f4c=0xf44+0x225a+0x845*-0x6;_0x4b7f4c<this['localLight'+'s']['length'];_0x4b7f4c++){const _0x27b3d4=this['localLight'+'s'][_0x4b7f4c];_0x27b3d4['_type']!==ve&&(_0x5b4d84?_0x27b3d4['atlasSlotU'+'pdated']&&_0x27b3d4['shadowUpda'+'teMode']===Ps&&(_0x27b3d4['shadowUpda'+'teMode']=xr):_0x27b3d4['shadowUpda'+'teMode']===Ps&&_0x27b3d4['castShadow'+'s']&&(_0x27b3d4['getRenderD'+'ata'](null,-0x1cc*0x5+-0x1d32+0x1b*0x16a)['shadowCame'+'ra']['renderTarg'+'et']||(_0x27b3d4['shadowUpda'+'teMode']=xr)),_0x27b3d4['visibleThi'+'sFrame']&&_0x27b3d4['castShadow'+'s']&&_0x27b3d4['shadowUpda'+'teMode']!==Ps&&this['_shadowRen'+'dererLocal']['cull'](_0x27b3d4,_0x259d91));}this['cameraDirS'+'hadowLight'+'s']['clear']();const _0x1eefba=_0x259d91['cameras'];for(let _0x400036=0x99a*-0x2+-0x7cd+0x1b01;_0x400036<_0x1eefba['length'];_0x400036++){const _0x44abc4=_0x1eefba[_0x400036];if(_0x44abc4['enabled']){const _0x1cc724=_0x44abc4['camera'];let _0x20398d;const _0x21b042=_0x1cc724['layers'];for(let _0x5173a9=-0x1d94+-0x1211+-0x2fa5*-0x1;_0x5173a9<_0x21b042['length'];_0x5173a9++){const _0x4f4fee=_0x259d91['getLayerBy'+'Id'](_0x21b042[_0x5173a9]);if(_0x4f4fee){const _0x1409ae=_0x4f4fee['splitLight'+'s'][ve];for(let _0x27c789=0xc53*-0x1+0x12db+-0x688;_0x27c789<_0x1409ae['length'];_0x27c789++){const _0x236823=_0x1409ae[_0x27c789];_0x236823['castShadow'+'s']&&!Fa['has'](_0x236823)&&(Fa['add'](_0x236823),_0x20398d=_0x20398d??[],_0x20398d['push'](_0x236823),this['_shadowRen'+'dererDirec'+'tional']['cull'](_0x236823,_0x259d91,_0x1cc724));}}}_0x20398d&&this['cameraDirS'+'hadowLight'+'s']['set'](_0x1cc724,_0x20398d),Fa['clear']();}}}['cullCompos'+'ition'](_0x1aaec7){const _0x540fde=de(),{scene:_0x5b108c}=this;this['processing'+'MeshInstan'+'ces']['clear']();const _0x4ecfbd=_0x1aaec7['cameras']['length'];this['_camerasRe'+'ndered']+=_0x4ecfbd;for(let _0x55473c=-0x1a94+-0x423*0x7+0x15*0x2a5;_0x55473c<_0x4ecfbd;_0x55473c++){const _0x4e4822=_0x1aaec7['cameras'][_0x55473c];_0x5b108c==null||_0x5b108c['fire'](mv,_0x4e4822);const _0x481f8d=_0x4e4822['renderTarg'+'et'];_0x4e4822['frameUpdat'+'e'](_0x481f8d),this['updateCame'+'raFrustum'](_0x4e4822['camera']);const _0x415dab=_0x4e4822['layers'];for(let _0x48ada2=0x1b07+-0x595*-0x1+-0x209c;_0x48ada2<_0x415dab['length'];_0x48ada2++){const _0x25a4ac=_0x1aaec7['getLayerBy'+'Id'](_0x415dab[_0x48ada2]);if(_0x25a4ac&&_0x25a4ac['enabled']){this['cullLights'](_0x4e4822['camera'],_0x25a4ac['_lights']);const _0x5d885b=_0x25a4ac['getCulledI'+'nstances'](_0x4e4822['camera']);this['cull'](_0x4e4822['camera'],_0x25a4ac['meshInstan'+'ces'],_0x5d885b);}}_0x5b108c==null||_0x5b108c['fire'](_v,_0x4e4822);}_0x5b108c['clusteredL'+'ightingEna'+'bled']&&this['updateLigh'+'tTextureAt'+'las'](),this['cullShadow'+'maps'](_0x1aaec7),_0x5b108c==null||_0x5b108c['fire'](lE),this['_cullTime']+=de()-_0x540fde;}['updateShad'+'ers'](_0x413bf9,_0x35946f){const _0x23dcea=_0x413bf9['length'];for(let _0x3b06b3=0x3*0x137+0x1*-0x5d1+-0x2*-0x116;_0x3b06b3<_0x23dcea;_0x3b06b3++){const _0x418c5a=_0x413bf9[_0x3b06b3]['material'];if(_0x418c5a&&!Fa['has'](_0x418c5a)&&(Fa['add'](_0x418c5a),_0x418c5a['getShaderV'+'ariant']!==tr['prototype']['getShaderV'+'ariant'])){if(_0x35946f&&(!_0x418c5a['useLightin'+'g']||_0x418c5a['emitter']&&!_0x418c5a['emitter']['lighting']))continue;_0x418c5a['clearVaria'+'nts']();}}Fa['clear']();}['updateFram'+'eUniforms'](){this['blueNoiseT'+'extureId']['setValue'](Pb(this['device']));}['beginFrame'](_0x1a5313){const _0x5ae96e=this['scene'],_0x90856d=_0x5ae96e['updateShad'+'ers']||this['device']['_shadersDi'+'rty'];let _0x27977a=0xaef+0x46+-0x97*0x13;const _0x4f8a1d=_0x1a5313['layerList'],_0x3bba08=_0x4f8a1d['length'];for(let _0x33ce67=0x1116+0xac8+-0x1bde;_0x33ce67<_0x3bba08;_0x33ce67++){const _0x5cbd04=_0x4f8a1d[_0x33ce67]['meshInstan'+'ces'],_0x58b62a=_0x5cbd04['length'];_0x27977a+=_0x58b62a;for(let _0x23c6f3=0x381+0x1725+0x8e2*-0x3;_0x23c6f3<_0x58b62a;_0x23c6f3++){const _0x4de1b8=_0x5cbd04[_0x23c6f3];_0x4de1b8['visibleThi'+'sFrame']=!(-0x1b7*0xb+0x462+0xe7c),_0x90856d&&df['push'](_0x4de1b8),_0x4de1b8['skinInstan'+'ce']&&ff['push'](_0x4de1b8);}}if(_0x5ae96e['_stats']['meshInstan'+'ces']=_0x27977a,_0x90856d){const _0x47d9b0=!_0x5ae96e['updateShad'+'ers']||!this['device']['_shadersDi'+'rty'];this['updateShad'+'ers'](df,_0x47d9b0),_0x5ae96e['updateShad'+'ers']=!(-0x1*0x6fb+-0x2335+0x2a31),this['device']['_shadersDi'+'rty']=!(0xe56*0x1+-0x1*-0x1e8f+-0x2ce4),_0x5ae96e['_shaderVer'+'sion']++;}this['updateFram'+'eUniforms'](),this['updateCpuS'+'kinMatrice'+'s'](ff),df['length']=-0x1319*0x2+0x19fe+0xc34,ff['length']=-0x1476+-0x5e3+0x1a59;const _0x40ea27=this['lights'],_0x188f45=_0x40ea27['length'];for(let _0x419cbf=-0x1*-0x1e65+-0x38c*0x6+-0x1*0x91d;_0x419cbf<_0x188f45;_0x419cbf++)_0x40ea27[_0x419cbf]['beginFrame']();}['updateLigh'+'tTextureAt'+'las'](){this['lightTextu'+'reAtlas']['update'](this['localLight'+'s'],this['scene']['lighting']);}['updateLaye'+'rCompositi'+'on'](_0x4f2e42){const _0x583d22=de(),_0x19db5c=_0x4f2e42['layerList']['length'],_0x1be892=this['scene']['_shaderVer'+'sion'];for(let _0x53ae06=0x1113+-0x17f2+0x1*0x6df;_0x53ae06<_0x19db5c;_0x53ae06++){const _0x281fd7=_0x4f2e42['layerList'][_0x53ae06];_0x281fd7['_shaderVer'+'sion']=_0x1be892,_0x281fd7['_skipRende'+'rCounter']=-0x215+-0x3cb+-0x2*-0x2f0,_0x281fd7['_forwardDr'+'awCalls']=0x1c6e*-0x1+0x123*0xd+-0x48d*-0x3,_0x281fd7['_shadowDra'+'wCalls']=0x1*-0x2671+0x31*0x9+0x5*0x758,_0x281fd7['_renderTim'+'e']=0x16*-0x179+0x21e0+-0x17a;}_0x4f2e42['_update'](),this['_layerComp'+'ositionUpd'+'ateTime']+=de()-_0x583d22;}['frameUpdat'+'e'](){this['clustersDe'+'bugRendere'+'d']=!(0x2d*-0x31+0x125c+-0x56*0x1d),this['initViewBi'+'ndGroupFor'+'mat'](this['scene']['clusteredL'+'ightingEna'+'bled']),this['dirLightSh'+'adows']['clear']();}}class Pv{constructor(){h(this,'camera',null),(this['layer']=null,this['transparen'+'t']=!(-0x520+0x4b*-0x1d+0x6d*0x20),this['renderTarg'+'et']=null,this['lightClust'+'ers']=null,this['clearColor']=!(0x11*-0x1d3+0x8e0+-0xd*-0x1b4),this['clearDepth']=!(0x7f6+-0x1df1+0x15fc),this['clearStenc'+'il']=!(0x1*0x1d62+0x86*-0x25+-0xa03),this['triggerPos'+'tprocess']=!(-0x1f*0x119+-0x630+0x2838),this['firstCamer'+'aUse']=!(-0x3d*-0x20+0x1c06+-0x23a5),this['lastCamera'+'Use']=!(-0x1a6*0x7+0xe40+0x3*-0xe7),this['viewBindGr'+'oups']=[],this['useCameraP'+'asses']=!(0x1460+-0x2273+-0xe14*-0x1));}['destroy'](){this['viewBindGr'+'oups']['forEach'](_0x4c9784=>{_0x4c9784['defaultUni'+'formBuffer']['destroy'](),_0x4c9784['destroy']();}),this['viewBindGr'+'oups']['length']=0x1577+0x13ad+-0x2924;}['setupClear'+'s'](_0x4eaf05,_0x36224c){this['clearColor']=(_0x4eaf05==null?void(-0x20b5+0x634+0x1a81):_0x4eaf05['clearColor'+'Buffer'])||_0x36224c['clearColor'+'Buffer'],this['clearDepth']=(_0x4eaf05==null?void(0x387*0x1+-0x18*-0xb9+-0x14df):_0x4eaf05['clearDepth'+'Buffer'])||_0x36224c['clearDepth'+'Buffer'],this['clearStenc'+'il']=(_0x4eaf05==null?void(0x712+0xcb+-0x7dd):_0x4eaf05['clearStenc'+'ilBuffer'])||_0x36224c['clearStenc'+'ilBuffer'];}}class Kb extends ys{constructor(_0x37439c,_0x2df70c,_0x2a7414,_0xd2f73){super(_0x37439c),h(this,'layerCompo'+'sition'),h(this,'scene'),h(this,'renderer'),h(this,'renderActi'+'ons',[]),h(this,'gammaCorre'+'ction'),h(this,'toneMappin'+'g'),h(this,'noDepthCle'+'ar',!(0x567*-0x3+-0x77+0x10ad*0x1)),(this['layerCompo'+'sition']=_0x2df70c,this['scene']=_0x2a7414,this['renderer']=_0xd2f73);}get['rendersAny'+'thing'](){return this['renderActi'+'ons']['length']>0x121f*0x1+0x2364+-0x7*0x7a5;}['addRenderA'+'ction'](_0x130482){this['renderActi'+'ons']['push'](_0x130482);}['addLayer'](_0x140355,_0x563a84,_0x474f3a,_0x4f7c84=!(-0x134c+0x1b0e+0x6*-0x14b)){w['assert'](_0x140355),w['assert'](this['renderTarg'+'et']!==void(-0x851+0x2*-0x2aa+0xda5),'Render\x20pas'+'s\x20needs\x20to'+'\x20be\x20initia'+'lized\x20befo'+'re\x20adding\x20'+'layers'),w['assert'](_0x140355['camera']['layersSet']['has'](_0x563a84['id']),'Camera\x20'+_0x140355['entity']['name']+('\x20does\x20not\x20'+'render\x20lay'+'er\x20')+_0x563a84['name']+'.');const _0x100b8f=new Pv();if(_0x100b8f['renderTarg'+'et']=this['renderTarg'+'et'],_0x100b8f['camera']=_0x140355,_0x100b8f['layer']=_0x563a84,_0x100b8f['transparen'+'t']=_0x474f3a,_0x4f7c84){const _0x3486e8=this['renderActi'+'ons']['length']===0x8*0x137+0x2557*-0x1+0x1b9f*0x1;_0x100b8f['setupClear'+'s'](_0x3486e8?_0x140355:void(-0x29*0x65+-0xeb2+0x1edf),_0x563a84);}this['addRenderA'+'ction'](_0x100b8f);}['addLayers'](_0x11fd6b,_0x27804c,_0x39cc7a,_0x57d22d,_0x5e7e12,_0x320502=!(-0x2*0x2bb+0x8f*0x11+-0x409)){const {layerList:_0x45df56,subLayerList:_0x3c0310}=_0x11fd6b;let _0x395365=_0x57d22d,_0x57a998=_0x39cc7a;for(;_0x57a998<_0x45df56['length'];){const _0x485ac1=_0x45df56[_0x57a998],_0x56e4f7=_0x3c0310[_0x57a998];if(_0x27804c['camera']['layersSet']['has'](_0x485ac1['id'])&&(this['addLayer'](_0x27804c,_0x485ac1,_0x56e4f7,_0x395365),_0x395365=!(0xafe+-0x1*-0x13a5+-0x1ea2)),_0x57a998++,_0x485ac1['id']===_0x5e7e12&&_0x56e4f7===_0x320502)break;}return _0x57a998;}['updateDire'+'ctionalSha'+'dows'](){const {renderer:_0x4429dc,renderActions:_0x3f7278}=this;for(let _0x4ca089=-0x412*0x5+-0x138d+0x27e7;_0x4ca089<_0x3f7278['length'];_0x4ca089++){const _0x1042e7=_0x3f7278[_0x4ca089]['camera']['camera'],_0x51ae43=this['renderer']['cameraDirS'+'hadowLight'+'s']['get'](_0x1042e7);if(_0x51ae43)for(let _0x5ece04=0x2244+-0x2328+0x4c*0x3;_0x5ece04<_0x51ae43['length'];_0x5ece04++){const _0x35be08=_0x51ae43[_0x5ece04];if(_0x4429dc['dirLightSh'+'adows']['get'](_0x35be08)!==_0x1042e7){_0x4429dc['dirLightSh'+'adows']['set'](_0x35be08,_0x1042e7);const _0x464f1f=_0x4429dc['_shadowRen'+'dererDirec'+'tional']['getLightRe'+'nderPass'](_0x35be08,_0x1042e7);_0x464f1f&&this['beforePass'+'es']['push'](_0x464f1f);}}}}['updateClea'+'rs'](){const _0x2cdc72=this['renderActi'+'ons'][0x1*-0x15c3+-0x1*-0x1e9b+-0x8d8];if(_0x2cdc72){const _0x21c9f3=_0x2cdc72['camera']['camera'],_0x3c9e81=_0x21c9f3['fullSizeCl'+'earRect'];this['setClearCo'+'lor'](_0x3c9e81&&_0x2cdc72['clearColor']?_0x21c9f3['clearColor']:void(-0xf3*-0x6+-0x1863+-0x1b3*-0xb)),this['setClearDe'+'pth'](_0x3c9e81&&_0x2cdc72['clearDepth']&&!this['noDepthCle'+'ar']?_0x21c9f3['clearDepth']:void(0x152d+0x8d*0x7+-0x59*0x48)),this['setClearSt'+'encil'](_0x3c9e81&&_0x2cdc72['clearStenc'+'il']?_0x21c9f3['clearStenc'+'il']:void(0x1389+-0x1d*-0x6c+-0x1fc5));}}['frameUpdat'+'e'](){super['frameUpdat'+'e'](),this['updateDire'+'ctionalSha'+'dows'](),this['updateClea'+'rs']();}['before'](){const {renderActions:_0x2d36f5}=this;for(let _0x125f9d=-0x26d0+0x9c2+0x1d0e;_0x125f9d<_0x2d36f5['length'];_0x125f9d++){const _0x434f6a=_0x2d36f5[_0x125f9d];_0x434f6a['firstCamer'+'aUse']&&this['scene']['fire'](rE,_0x434f6a['camera']);}}['execute'](){const {layerComposition:_0x15cafb,renderActions:_0x366cbc}=this;for(let _0x4d2cbc=0x23bc*-0x1+0xd29+0x1693;_0x4d2cbc<_0x366cbc['length'];_0x4d2cbc++){const _0x232043=_0x366cbc[_0x4d2cbc],_0x4bf25d=_0x232043['layer'];w['call'](()=>{_0x15cafb['getLayerBy'+'Name'](_0x4bf25d['name'])||w['warnOnce']('Layer\x20'+_0x4bf25d['name']+('\x20is\x20not\x20fo'+'und\x20in\x20the'+'\x20scene\x20and'+'\x20will\x20not\x20'+'be\x20rendere'+'d.\x20Your\x20re'+'nder\x20pass\x20'+'setup\x20migh'+'t\x20need\x20to\x20'+'be\x20updated'+'.'));}),_0x15cafb['isEnabled'](_0x4bf25d,_0x232043['transparen'+'t'])&&this['renderRend'+'erAction'](_0x232043,_0x4d2cbc===-0x2*-0x2f2+0x11f9+-0x29*0x95);}}['after'](){for(let _0x143379=0xaea+0x1dbb+-0x28a5;_0x143379<this['renderActi'+'ons']['length'];_0x143379++){const _0x164e66=this['renderActi'+'ons'][_0x143379];_0x164e66['lastCamera'+'Use']&&this['scene']['fire'](aE,_0x164e66['camera']);}this['beforePass'+'es']['length']=0x4*0x34+0xc01+0xcd1*-0x1;}['renderRend'+'erAction'](_0x217d06,_0x2d6683){var _0x47cfd4;const {renderer:_0x459032,scene:_0x3ac0fb}=this,_0x55ad25=_0x459032['device'],{layer:_0x77af23,transparent:_0x1f8f3e,camera:_0x2b356d}=_0x217d06;Q['pushGpuMar'+'ker'](this['device'],'Camera:\x20'+(_0x2b356d?_0x2b356d['entity']['name']:'Unnamed')+',\x20Layer:\x20'+_0x77af23['name']+'('+(_0x1f8f3e?'TRANSP':'OPAQUE')+')');const _0x91c637=de();if(_0x2b356d){const _0x39bb9d=_0x2b356d['gammaCorre'+'ction'],_0x132dcd=_0x2b356d['toneMappin'+'g'];this['gammaCorre'+'ction']!==void(-0xe19+0x607*0x4+-0xa03*0x1)&&(_0x2b356d['gammaCorre'+'ction']=this['gammaCorre'+'ction']),this['toneMappin'+'g']!==void(0xbaf*0x2+-0x20ac+0x18d*0x6)&&(_0x2b356d['toneMappin'+'g']=this['toneMappin'+'g']),_0x3ac0fb['fire'](nE,_0x2b356d,_0x77af23,_0x1f8f3e);const _0xa99878={'lightClusters':_0x217d06['lightClust'+'ers']},_0xa99cc4=((_0x47cfd4=_0x2b356d['camera']['shaderPass'+'Info'])==null?void(-0xa*-0x335+-0x2*-0x72f+0x1738*-0x2):_0x47cfd4['index'])??Aa;(!_0x2d6683||!_0x2b356d['camera']['fullSizeCl'+'earRect'])&&(_0xa99878['clearColor']=_0x217d06['clearColor'],_0xa99878['clearDepth']=_0x217d06['clearDepth'],_0xa99878['clearStenc'+'il']=_0x217d06['clearStenc'+'il']);const _0x5c0334=_0x217d06['renderTarg'+'et']??_0x55ad25['backBuffer'];_0x459032['renderForw'+'ardLayer'](_0x2b356d['camera'],_0x5c0334,_0x77af23,_0x1f8f3e,_0xa99cc4,_0x217d06['viewBindGr'+'oups'],_0xa99878),_0x55ad25['setBlendSt'+'ate'](pt['NOBLEND']),_0x55ad25['setStencil'+'State'](null,null),_0x55ad25['setAlphaTo'+'Coverage'](!(-0x3ee+-0x9e3+0xdd2)),_0x3ac0fb['fire'](oE,_0x2b356d,_0x77af23,_0x1f8f3e),this['gammaCorre'+'ction']!==void(-0x1471+-0x61*-0x1+0xa08*0x2)&&(_0x2b356d['gammaCorre'+'ction']=_0x39bb9d),this['toneMappin'+'g']!==void(0x2579+0x1970+-0x3ee9)&&(_0x2b356d['toneMappin'+'g']=_0x132dcd);}Q['popGpuMark'+'er'](this['device']),_0x77af23['_renderTim'+'e']+=de()-_0x91c637;}['log'](_0x3cbd4a,_0x4450bc){if(super['log'](_0x3cbd4a,_0x4450bc),mi['get'](cn)){const {layerComposition:_0x448c73}=this;this['renderActi'+'ons']['forEach']((_0x1cadbe,_0x40d752)=>{const _0xc3ccd9=_0x1cadbe['layer'],_0x34898a=_0xc3ccd9['enabled']&&_0x448c73['isEnabled'](_0xc3ccd9,_0x1cadbe['transparen'+'t']),_0x24e79b=_0x1cadbe['camera'];w['trace'](cn,'\x20\x20\x20\x20'+_0x40d752+':'+('\x20Cam:\x20'+(_0x24e79b?_0x24e79b['entity']['name']:'-'))['padEnd'](0x1742+0x3f*0x9b+-0x3d51,'\x20')+('\x20Lay:\x20'+_0xc3ccd9['name'])['padEnd'](0xb5*0x7+0xb*0x4c+-0x1*0x821,'\x20')+(_0x1cadbe['transparen'+'t']?'\x20TRANSP':'\x20OPAQUE')+(_0x34898a?'\x20ENABLED':'\x20DISABLED')+('\x20Meshes:\x20'+_0xc3ccd9['meshInstan'+'ces']['length'])['padEnd'](0xd7b+-0x11ff+0x489*0x1,'\x20'));});}}}class Zb extends ys{constructor(_0x2186b2,_0x3547ed,_0x1f391b){super(_0x2186b2),this['renderer']=_0x3547ed,this['renderActi'+'on']=_0x1f391b,this['requiresCu'+'bemaps']=!(-0x1*0x19b6+-0x2435+0xc*0x529);}['execute'](){const _0x178bcc=this['renderActi'+'on'],_0x528ab0=_0x178bcc['camera'];w['assert'](_0x178bcc['triggerPos'+'tprocess']&&_0x528ab0['onPostproc'+'essing']),_0x528ab0['onPostproc'+'essing']();}}const Qb=[[],[],[]],or=new ie(),Nr={'drawCalls':[],'shaderInstances':[],'isNewMaterial':[],'lightMaskChanged':[],'clear':function(){this['drawCalls']['length']=0xab1+0x4b7*-0x1+-0x5fa,this['shaderInst'+'ances']['length']=0x1a0f+0x1a6+0x1*-0x1bb5,this['isNewMater'+'ial']['length']=0x1*-0x23b5+-0x23a7+0x475c,this['lightMaskC'+'hanged']['length']=0x26fa+-0x1baf+-0xb4b;}};function Jb(_0x2e3e4a){const _0x5575c8=[];for(let _0x41f262=0xc83*0x1+-0x1*-0xe7f+-0x1b02;_0x41f262<_0x2e3e4a;++_0x41f262){const _0x25c67a=Math['sqrt'](_0x41f262+(0x38a*-0x9+-0x2*-0x81d+0xfa0+0.5))/Math['sqrt'](_0x2e3e4a);_0x5575c8['push'](_0x25c67a);}return _0x5575c8;}function eA(_0x334adc){const _0x3c7860=[];for(let _0x373b67=-0xb*0x70+0x165f+-0x118f;_0x373b67<_0x334adc;_0x373b67++){const _0x5230c4=_0x373b67/_0x334adc,_0x2021ff=Math['sqrt'](_0x5230c4*_0x5230c4);_0x3c7860['push'](_0x2021ff);}return _0x3c7860;}const Ni=class Ni extends Yb{constructor(_0x3b79fd){super(_0x3b79fd);const _0x49656e=this['device'];this['_forwardDr'+'awCalls']=0x43*-0x67+-0x5f*0xc+-0x1f69*-0x1,this['_materialS'+'witches']=0x1*0x1e13+-0x22ac+0x6b*0xb,this['_depthMapT'+'ime']=0x25c5+0x1*0x220d+-0x47d2,this['_forwardTi'+'me']=-0xb*0x16f+-0x1a0f+0xa75*0x4,this['_sortTime']=0x2099*0x1+0x6fe+-0x1*0x2797;const _0x488a70=_0x49656e['scope'];this['fogColorId']=_0x488a70['resolve']('fog_color'),this['fogStartId']=_0x488a70['resolve']('fog_start'),this['fogEndId']=_0x488a70['resolve']('fog_end'),this['fogDensity'+'Id']=_0x488a70['resolve']('fog_densit'+'y'),this['ambientId']=_0x488a70['resolve']('light_glob'+'alAmbient'),this['skyboxInte'+'nsityId']=_0x488a70['resolve']('skyboxInte'+'nsity'),this['cubeMapRot'+'ationMatri'+'xId']=_0x488a70['resolve']('cubeMapRot'+'ationMatri'+'x'),this['pcssDiskSa'+'mplesId']=_0x488a70['resolve']('pcssDiskSa'+'mples[0]'),this['pcssSphere'+'SamplesId']=_0x488a70['resolve']('pcssSphere'+'Samples[0]'),this['lightColor'+'Id']=[],this['lightDir']=[],this['lightDirId']=[],this['lightShado'+'wMapId']=[],this['lightShado'+'wMatrixId']=[],this['lightShado'+'wParamsId']=[],this['lightShado'+'wIntensity']=[],this['lightRadiu'+'sId']=[],this['lightPos']=[],this['lightPosId']=[],this['lightWidth']=[],this['lightWidth'+'Id']=[],this['lightHeigh'+'t']=[],this['lightHeigh'+'tId']=[],this['lightInAng'+'leId']=[],this['lightOutAn'+'gleId']=[],this['lightCooki'+'eId']=[],this['lightCooki'+'eIntId']=[],this['lightCooki'+'eMatrixId']=[],this['lightCooki'+'eOffsetId']=[],this['lightShado'+'wSearchAre'+'aId']=[],this['lightCamer'+'aParamsId']=[],this['lightSoftS'+'hadowParam'+'sId']=[],this['shadowMatr'+'ixPaletteI'+'d']=[],this['shadowCasc'+'adeDistanc'+'esId']=[],this['shadowCasc'+'adeCountId']=[],this['shadowCasc'+'adeBlendId']=[],this['screenSize'+'Id']=_0x488a70['resolve']('uScreenSiz'+'e'),this['_screenSiz'+'e']=new Float32Array(-0x4d0*-0x1+-0x22d1*-0x1+-0x279d),this['fogColor']=new Float32Array(0xbc7*0x2+-0x899*0x1+-0x2*0x779),this['ambientCol'+'or']=new Float32Array(-0x1105+0x83*0x33+0x911*-0x1),this['pcssDiskSa'+'mples']=Jb(0x12ef+-0x4*-0x4ef+-0x269b),this['pcssSphere'+'Samples']=eA(-0x2*0x10d4+0xc0*-0x1f+0x38f8);}['destroy'](){super['destroy']();}['dispatchGl'+'obalLights'](_0x54ad1d){const _0x1c1862=this['ambientCol'+'or'];if(or['linear'](_0x54ad1d['ambientLig'+'ht']),_0x1c1862[-0x1221+-0x1b47*-0x1+-0x1*0x926]=or['r'],_0x1c1862[0x208c+0x22ca+-0x4355]=or['g'],_0x1c1862[-0xb9d*0x1+-0x135+0xcd4]=or['b'],_0x54ad1d['physicalUn'+'its']){for(let _0x38de71=0x1dd4+-0x3*-0x79b+-0x34a5;_0x38de71<0x26a9+-0x7a6+0x40*-0x7c;_0x38de71++)_0x1c1862[_0x38de71]*=_0x54ad1d['ambientLum'+'inance'];}this['ambientId']['setValue'](_0x1c1862),this['skyboxInte'+'nsityId']['setValue'](_0x54ad1d['physicalUn'+'its']?_0x54ad1d['skyboxLumi'+'nance']:_0x54ad1d['skyboxInte'+'nsity']),this['cubeMapRot'+'ationMatri'+'xId']['setValue'](_0x54ad1d['_skyboxRot'+'ationMat3']['data']);}['_resolveLi'+'ght'](_0x5abd39,_0x5e6e46){const _0x2c2618='light'+_0x5e6e46;this['lightColor'+'Id'][_0x5e6e46]=_0x5abd39['resolve'](_0x2c2618+'_color'),this['lightDir'][_0x5e6e46]=new Float32Array(0x1531+0x1c*-0xd6+-0x39*-0xa),this['lightDirId'][_0x5e6e46]=_0x5abd39['resolve'](_0x2c2618+'_direction'),this['lightShado'+'wMapId'][_0x5e6e46]=_0x5abd39['resolve'](_0x2c2618+'_shadowMap'),this['lightShado'+'wMatrixId'][_0x5e6e46]=_0x5abd39['resolve'](_0x2c2618+('_shadowMat'+'rix')),this['lightShado'+'wParamsId'][_0x5e6e46]=_0x5abd39['resolve'](_0x2c2618+('_shadowPar'+'ams')),this['lightShado'+'wIntensity'][_0x5e6e46]=_0x5abd39['resolve'](_0x2c2618+('_shadowInt'+'ensity')),this['lightShado'+'wSearchAre'+'aId'][_0x5e6e46]=_0x5abd39['resolve'](_0x2c2618+('_shadowSea'+'rchArea')),this['lightRadiu'+'sId'][_0x5e6e46]=_0x5abd39['resolve'](_0x2c2618+'_radius'),this['lightPos'][_0x5e6e46]=new Float32Array(-0x1505+0x1*0x871+-0xc97*-0x1),this['lightPosId'][_0x5e6e46]=_0x5abd39['resolve'](_0x2c2618+'_position'),this['lightWidth'][_0x5e6e46]=new Float32Array(-0x5*0x3f5+-0x5c*0x42+0x2b84),this['lightWidth'+'Id'][_0x5e6e46]=_0x5abd39['resolve'](_0x2c2618+'_halfWidth'),this['lightHeigh'+'t'][_0x5e6e46]=new Float32Array(0x211f+0x1f9e+-0x40ba),this['lightHeigh'+'tId'][_0x5e6e46]=_0x5abd39['resolve'](_0x2c2618+('_halfHeigh'+'t')),this['lightInAng'+'leId'][_0x5e6e46]=_0x5abd39['resolve'](_0x2c2618+('_innerCone'+'Angle')),this['lightOutAn'+'gleId'][_0x5e6e46]=_0x5abd39['resolve'](_0x2c2618+('_outerCone'+'Angle')),this['lightCooki'+'eId'][_0x5e6e46]=_0x5abd39['resolve'](_0x2c2618+'_cookie'),this['lightCooki'+'eIntId'][_0x5e6e46]=_0x5abd39['resolve'](_0x2c2618+('_cookieInt'+'ensity')),this['lightCooki'+'eMatrixId'][_0x5e6e46]=_0x5abd39['resolve'](_0x2c2618+('_cookieMat'+'rix')),this['lightCooki'+'eOffsetId'][_0x5e6e46]=_0x5abd39['resolve'](_0x2c2618+('_cookieOff'+'set')),this['lightCamer'+'aParamsId'][_0x5e6e46]=_0x5abd39['resolve'](_0x2c2618+('_cameraPar'+'ams')),this['lightSoftS'+'hadowParam'+'sId'][_0x5e6e46]=_0x5abd39['resolve'](_0x2c2618+('_softShado'+'wParams')),this['shadowMatr'+'ixPaletteI'+'d'][_0x5e6e46]=_0x5abd39['resolve'](_0x2c2618+('_shadowMat'+'rixPalette'+'[0]')),this['shadowCasc'+'adeDistanc'+'esId'][_0x5e6e46]=_0x5abd39['resolve'](_0x2c2618+('_shadowCas'+'cadeDistan'+'ces')),this['shadowCasc'+'adeCountId'][_0x5e6e46]=_0x5abd39['resolve'](_0x2c2618+('_shadowCas'+'cadeCount')),this['shadowCasc'+'adeBlendId'][_0x5e6e46]=_0x5abd39['resolve'](_0x2c2618+('_shadowCas'+'cadeBlend'));}['setLTCDire'+'ctionalLig'+'ht'](_0x27e0a6,_0x1c297f,_0x3c15c1,_0x5f2b34,_0x2b99e){this['lightPos'][_0x1c297f][-0xe2c+-0x15d5+0x2401]=_0x5f2b34['x']-_0x3c15c1['x']*_0x2b99e,this['lightPos'][_0x1c297f][-0x2b3*0x7+0x437+0x15*0xb3]=_0x5f2b34['y']-_0x3c15c1['y']*_0x2b99e,this['lightPos'][_0x1c297f][-0x2353+0x2554+-0x1ff]=_0x5f2b34['z']-_0x3c15c1['z']*_0x2b99e,this['lightPosId'][_0x1c297f]['setValue'](this['lightPos'][_0x1c297f]);const _0x523d83=_0x27e0a6['transformV'+'ector'](new D(-(0x1829+-0x2*0x246+-0x139d*0x1+0.5),-0x9*-0x18d+0x2263*-0x1+0x146e,-0xe35+0x149*0x19+-0x11ec));this['lightWidth'][_0x1c297f][0x1972*-0x1+-0x147b+0x2ded]=_0x523d83['x']*_0x2b99e,this['lightWidth'][_0x1c297f][0x3*-0x2f6+-0x227*-0x5+-0x1e0]=_0x523d83['y']*_0x2b99e,this['lightWidth'][_0x1c297f][0x1c1f*0x1+0xd1*0x17+-0x2ee4]=_0x523d83['z']*_0x2b99e,this['lightWidth'+'Id'][_0x1c297f]['setValue'](this['lightWidth'][_0x1c297f]);const _0x3b5bf4=_0x27e0a6['transformV'+'ector'](new D(0x2270+-0x143+-0x212d*0x1,-0x1679*-0x1+0x2011+0x6*-0x917,0x4*0x193+0x1*-0x18af+-0x9*-0x20b+0.5));this['lightHeigh'+'t'][_0x1c297f][0x7f*-0x3b+0x1*-0x1383+0x8*0x619]=_0x3b5bf4['x']*_0x2b99e,this['lightHeigh'+'t'][_0x1c297f][-0xc6e+-0x1b16+0x43*0x97]=_0x3b5bf4['y']*_0x2b99e,this['lightHeigh'+'t'][_0x1c297f][0x1437+0x1*0x108+-0x153d]=_0x3b5bf4['z']*_0x2b99e,this['lightHeigh'+'tId'][_0x1c297f]['setValue'](this['lightHeigh'+'t'][_0x1c297f]);}['dispatchDi'+'rectLights'](_0x1a25b7,_0x4384c2,_0x1e8856){let _0x47accb=0x945+-0x1f18+0x1*0x15d3;const _0x4d1a18=this['device']['scope'];for(let _0x3f787b=-0x1*-0x1ff6+-0x1*0x1a42+-0x5b4;_0x3f787b<_0x1a25b7['length'];_0x3f787b++){if(!(_0x1a25b7[_0x3f787b]['mask']&_0x4384c2))continue;const _0x32033f=_0x1a25b7[_0x3f787b],_0x41f63f=_0x32033f['_node']['getWorldTr'+'ansform']();if(this['lightColor'+'Id'][_0x47accb]||this['_resolveLi'+'ght'](_0x4d1a18,_0x47accb),this['lightColor'+'Id'][_0x47accb]['setValue'](_0x32033f['_colorLine'+'ar']),_0x41f63f['getY'](_0x32033f['_direction'])['mulScalar'](-(-0x504+-0x1a17*-0x1+0x3e*-0x57)),_0x32033f['_direction']['normalize'](),this['lightDir'][_0x47accb][-0x1d44+-0x1*-0x1549+0x2a9*0x3]=_0x32033f['_direction']['x'],this['lightDir'][_0x47accb][-0x486*0x7+-0x1075*-0x1+0xf36]=_0x32033f['_direction']['y'],this['lightDir'][_0x47accb][0x24f3+-0x2056+-0x49b]=_0x32033f['_direction']['z'],this['lightDirId'][_0x47accb]['setValue'](this['lightDir'][_0x47accb]),_0x32033f['shape']!==Ys&&this['setLTCDire'+'ctionalLig'+'ht'](_0x41f63f,_0x47accb,_0x32033f['_direction'],_0x1e8856['_node']['getPositio'+'n'](),_0x1e8856['farClip']),_0x32033f['castShadow'+'s']){const _0x1a2f7f=_0x32033f['getRenderD'+'ata'](_0x1e8856,-0xa*-0x33f+-0x12ce+-0xda8),_0x42a68c=_0x32033f['_getUnifor'+'mBiasValue'+'s'](_0x1a2f7f);this['lightShado'+'wMapId'][_0x47accb]['setValue'](_0x1a2f7f['shadowBuff'+'er']),this['lightShado'+'wMatrixId'][_0x47accb]['setValue'](_0x1a2f7f['shadowMatr'+'ix']['data']),this['shadowMatr'+'ixPaletteI'+'d'][_0x47accb]['setValue'](_0x32033f['_shadowMat'+'rixPalette']),this['shadowCasc'+'adeDistanc'+'esId'][_0x47accb]['setValue'](_0x32033f['_shadowCas'+'cadeDistan'+'ces']),this['shadowCasc'+'adeCountId'][_0x47accb]['setValue'](_0x32033f['numCascade'+'s']),this['shadowCasc'+'adeBlendId'][_0x47accb]['setValue'](-0x1*0x74b+0x96b+-0x21f-_0x32033f['cascadeBle'+'nd']),this['lightShado'+'wIntensity'][_0x47accb]['setValue'](_0x32033f['shadowInte'+'nsity']),this['lightSoftS'+'hadowParam'+'sId'][_0x47accb]['setValue'](_0x32033f['_softShado'+'wParams']),_0x1a2f7f['shadowCame'+'ra']['renderTarg'+'et']&&this['lightShado'+'wSearchAre'+'aId'][_0x47accb]['setValue'](_0x32033f['penumbraSi'+'ze']/_0x1a2f7f['shadowCame'+'ra']['renderTarg'+'et']['width']*_0x1a2f7f['projection'+'Compensati'+'on']);const _0x248f87=_0x32033f['_shadowCam'+'eraParams'];_0x248f87['length']=0xc74+0x14a3+0x2113*-0x1,_0x248f87[0x23f4+0x210+-0x2604]=0x1b4d+-0x1ef0+0x85*0x7,_0x248f87[0x2*-0xbaa+-0x3*0x519+-0x2*-0x1350]=_0x1a2f7f['shadowCame'+'ra']['_farClip'],_0x248f87[0x1d7+-0x5b*-0x3a+-0x1*0x1673]=_0x1a2f7f['shadowCame'+'ra']['_nearClip'],_0x248f87[0x887*0x1+-0x2*0x808+0x78c]=-0x32f+0x6e*0x23+-0xbda,this['lightCamer'+'aParamsId'][_0x47accb]['setValue'](_0x248f87);const _0x3b87c9=_0x32033f['_shadowRen'+'derParams'];_0x3b87c9['length']=-0x6bf+0xb*0x23b+0xb6*-0x19,_0x3b87c9[-0x1*0x5e0+0x14a3+-0x1*0xec3]=_0x32033f['_shadowRes'+'olution'],_0x3b87c9[0x7*-0x40e+0x620+-0x8b*-0x29]=_0x42a68c['normalBias'],_0x3b87c9[0x3*0xc72+0x136a+-0x38be]=_0x42a68c['bias'],_0x3b87c9[-0x2454+-0x91c*-0x4+-0x19]=-0x7a7+-0xaf9*0x2+-0x1*-0x1d99,this['lightShado'+'wParamsId'][_0x47accb]['setValue'](_0x3b87c9);}_0x47accb++;}return _0x47accb;}['setLTCPosi'+'tionalLigh'+'t'](_0x475594,_0x52a645){const _0x4c735b=_0x475594['transformV'+'ector'](new D(-(0x1*0x8db+0x1*0xd6+-0x9b1+0.5),-0x8b*-0x1e+-0x1b13+0xac9,-0x5*-0x7b8+-0xd7e+0x15*-0x132));this['lightWidth'][_0x52a645][0x26fa+0x1859+-0x3f53]=_0x4c735b['x'],this['lightWidth'][_0x52a645][0x1b18+-0x35*0x97+0x42c]=_0x4c735b['y'],this['lightWidth'][_0x52a645][0x1361+-0xcc7+0x2*-0x34c]=_0x4c735b['z'],this['lightWidth'+'Id'][_0x52a645]['setValue'](this['lightWidth'][_0x52a645]);const _0x4c80ae=_0x475594['transformV'+'ector'](new D(0x2*-0x1+-0x1*0xe4b+0xe4d,-0x2*0x803+-0x1f9d+0x9*0x54b,-0x6c7+0xeec+-0x825+0.5));this['lightHeigh'+'t'][_0x52a645][0x17*-0x12e+-0x1213+0x2d35]=_0x4c80ae['x'],this['lightHeigh'+'t'][_0x52a645][0x2*-0x2c7+-0x21ae*-0x1+-0x17*0x139]=_0x4c80ae['y'],this['lightHeigh'+'t'][_0x52a645][0x385*0x6+0x11*0x1b+-0x16e7]=_0x4c80ae['z'],this['lightHeigh'+'tId'][_0x52a645]['setValue'](this['lightHeigh'+'t'][_0x52a645]);}['dispatchOm'+'niLight'](_0xa1c547,_0x400201,_0x4d3ddf){const _0x56666d=_0x400201['_node']['getWorldTr'+'ansform']();if(this['lightColor'+'Id'][_0x4d3ddf]||this['_resolveLi'+'ght'](_0xa1c547,_0x4d3ddf),this['lightRadiu'+'sId'][_0x4d3ddf]['setValue'](_0x400201['attenuatio'+'nEnd']),this['lightColor'+'Id'][_0x4d3ddf]['setValue'](_0x400201['_colorLine'+'ar']),_0x56666d['getTransla'+'tion'](_0x400201['_position']),this['lightPos'][_0x4d3ddf][-0x72*-0x22+-0xb11+-0x7*0x95]=_0x400201['_position']['x'],this['lightPos'][_0x4d3ddf][-0x250e+-0x26*-0x93+0xf3d]=_0x400201['_position']['y'],this['lightPos'][_0x4d3ddf][-0x178d+0x207b+-0x8ec]=_0x400201['_position']['z'],this['lightPosId'][_0x4d3ddf]['setValue'](this['lightPos'][_0x4d3ddf]),_0x400201['shape']!==Ys&&this['setLTCPosi'+'tionalLigh'+'t'](_0x56666d,_0x4d3ddf),_0x400201['castShadow'+'s']){const _0x1b515c=_0x400201['getRenderD'+'ata'](null,-0x1*0x32d+0x103e+0x45b*-0x3);this['lightShado'+'wMapId'][_0x4d3ddf]['setValue'](_0x1b515c['shadowBuff'+'er']);const _0x15dcc7=_0x400201['_getUnifor'+'mBiasValue'+'s'](_0x1b515c),_0x40333b=_0x400201['_shadowRen'+'derParams'];_0x40333b['length']=0x21e7*0x1+-0x74b+0x25*-0xb8,_0x40333b[0x178*0x19+0x1c12*-0x1+-0x8a6]=_0x400201['_shadowRes'+'olution'],_0x40333b[-0x9e7+0x2182+-0x179a]=_0x15dcc7['normalBias'],_0x40333b[-0x32*0xba+-0x120a+0x3660]=_0x15dcc7['bias'],_0x40333b[0x189e+0x305*0xa+-0x36cd*0x1]=(0x28f+-0xe83+0xbf5)/_0x400201['attenuatio'+'nEnd'],this['lightShado'+'wParamsId'][_0x4d3ddf]['setValue'](_0x40333b),this['lightShado'+'wIntensity'][_0x4d3ddf]['setValue'](_0x400201['shadowInte'+'nsity']);const _0x46d614=_0x400201['penumbraSi'+'ze']/_0x1b515c['shadowCame'+'ra']['renderTarg'+'et']['width'];this['lightShado'+'wSearchAre'+'aId'][_0x4d3ddf]['setValue'](_0x46d614);const _0x11d4cf=_0x400201['_shadowCam'+'eraParams'];_0x11d4cf['length']=0x7ca+-0x197a+-0xce*-0x16,_0x11d4cf[0x1dc9+-0x2*0xa1d+-0x98f]=0x24f8+0x1*-0x4be+0x37*-0x96,_0x11d4cf[0x885+0x1*0x1ab5+-0x2339]=_0x1b515c['shadowCame'+'ra']['_farClip'],_0x11d4cf[-0x9*-0x367+0x1aef+-0x398c]=_0x1b515c['shadowCame'+'ra']['_nearClip'],_0x11d4cf[0x1033+0x1ca8+-0x2cd8]=0x1*-0x127d+-0x50b+-0x2*-0xbc4,this['lightCamer'+'aParamsId'][_0x4d3ddf]['setValue'](_0x11d4cf);}_0x400201['_cookie']&&(this['lightCooki'+'eId'][_0x4d3ddf]['setValue'](_0x400201['_cookie']),this['lightShado'+'wMatrixId'][_0x4d3ddf]['setValue'](_0x56666d['data']),this['lightCooki'+'eIntId'][_0x4d3ddf]['setValue'](_0x400201['cookieInte'+'nsity']));}['dispatchSp'+'otLight'](_0x273dc4,_0x5c4aaf,_0x35499a){const _0x3fcea9=_0x5c4aaf['_node']['getWorldTr'+'ansform']();if(this['lightColor'+'Id'][_0x35499a]||this['_resolveLi'+'ght'](_0x273dc4,_0x35499a),this['lightInAng'+'leId'][_0x35499a]['setValue'](_0x5c4aaf['_innerCone'+'AngleCos']),this['lightOutAn'+'gleId'][_0x35499a]['setValue'](_0x5c4aaf['_outerCone'+'AngleCos']),this['lightRadiu'+'sId'][_0x35499a]['setValue'](_0x5c4aaf['attenuatio'+'nEnd']),this['lightColor'+'Id'][_0x35499a]['setValue'](_0x5c4aaf['_colorLine'+'ar']),_0x3fcea9['getTransla'+'tion'](_0x5c4aaf['_position']),this['lightPos'][_0x35499a][-0x245*-0x3+0x1df4+0xc41*-0x3]=_0x5c4aaf['_position']['x'],this['lightPos'][_0x35499a][0x6d5*-0x2+-0x23b*-0x8+0x1*-0x42d]=_0x5c4aaf['_position']['y'],this['lightPos'][_0x35499a][0x23b1*-0x1+0x18*-0x32+-0x2863*-0x1]=_0x5c4aaf['_position']['z'],this['lightPosId'][_0x35499a]['setValue'](this['lightPos'][_0x35499a]),_0x5c4aaf['shape']!==Ys&&this['setLTCPosi'+'tionalLigh'+'t'](_0x3fcea9,_0x35499a),_0x3fcea9['getY'](_0x5c4aaf['_direction'])['mulScalar'](-(0x135c+0x6e9+-0x1a44)),_0x5c4aaf['_direction']['normalize'](),this['lightDir'][_0x35499a][0x25f1+0x1*-0xc29+-0x19c8]=_0x5c4aaf['_direction']['x'],this['lightDir'][_0x35499a][-0x179a+-0x1*-0x16b7+0x1*0xe4]=_0x5c4aaf['_direction']['y'],this['lightDir'][_0x35499a][-0x36f+-0x1f*-0x36+-0x319]=_0x5c4aaf['_direction']['z'],this['lightDirId'][_0x35499a]['setValue'](this['lightDir'][_0x35499a]),_0x5c4aaf['castShadow'+'s']){const _0x241127=_0x5c4aaf['getRenderD'+'ata'](null,-0x4*0x25c+-0x581+0xef1);this['lightShado'+'wMapId'][_0x35499a]['setValue'](_0x241127['shadowBuff'+'er']),this['lightShado'+'wMatrixId'][_0x35499a]['setValue'](_0x241127['shadowMatr'+'ix']['data']);const _0x36cd21=_0x5c4aaf['_getUnifor'+'mBiasValue'+'s'](_0x241127),_0x561760=_0x5c4aaf['_shadowRen'+'derParams'];_0x561760['length']=0x1*-0x266f+0xe74+0x17ff,_0x561760[-0x61*0x27+-0x1f8e+0x2e55]=_0x5c4aaf['_shadowRes'+'olution'],_0x561760[0x1682+-0x1da+0x137*-0x11]=_0x36cd21['normalBias'],_0x561760[-0xca8+-0x26c4+0x336e]=_0x36cd21['bias'],_0x561760[0x23*0x119+-0x1759+-0xf0f]=(-0x125*-0x22+-0x413+-0x22d6)/_0x5c4aaf['attenuatio'+'nEnd'],this['lightShado'+'wParamsId'][_0x35499a]['setValue'](_0x561760),this['lightShado'+'wIntensity'][_0x35499a]['setValue'](_0x5c4aaf['shadowInte'+'nsity']);const _0x392733=_0x5c4aaf['penumbraSi'+'ze']/_0x241127['shadowCame'+'ra']['renderTarg'+'et']['width'],_0xdba841=_0x241127['shadowCame'+'ra']['_fov']*Math['PI']/(-0x1184+0x225e+0x3*-0x562),_0x45979b=(0x23*0x101+-0x846*-0x2+-0x3*0x113a)/Math['tan'](_0xdba841/(-0xb0a+0x1*0x19ed+0x125*-0xd));this['lightShado'+'wSearchAre'+'aId'][_0x35499a]['setValue'](_0x392733*_0x45979b);const _0xc832d3=_0x5c4aaf['_shadowCam'+'eraParams'];_0xc832d3['length']=0x11ca+-0x1445+0x27f,_0xc832d3[-0x2341*-0x1+0x1227+-0x3568*0x1]=0x2d7*0xc+-0x86*0x7+-0x1e6a,_0xc832d3[-0x1d7e+-0xfb8+0x2d37]=_0x241127['shadowCame'+'ra']['_farClip'],_0xc832d3[-0x1*0xc4f+-0x1*-0xb59+-0x7c*-0x2]=_0x241127['shadowCame'+'ra']['_nearClip'],_0xc832d3[-0x8f6*-0x1+-0x1da0+0x14ad]=-0x19d*0x2+0x1251+0x1*-0xf17,this['lightCamer'+'aParamsId'][_0x35499a]['setValue'](_0xc832d3);}if(_0x5c4aaf['_cookie']){if(!_0x5c4aaf['castShadow'+'s']){const _0x21ff7a=Wn['evalSpotCo'+'okieMatrix'](_0x5c4aaf);this['lightShado'+'wMatrixId'][_0x35499a]['setValue'](_0x21ff7a['data']);}this['lightCooki'+'eId'][_0x35499a]['setValue'](_0x5c4aaf['_cookie']),this['lightCooki'+'eIntId'][_0x35499a]['setValue'](_0x5c4aaf['cookieInte'+'nsity']),_0x5c4aaf['_cookieTra'+'nsform']&&(_0x5c4aaf['_cookieTra'+'nsformUnif'+'orm'][0x4ba+0x4c*-0x39+0x7*0x1be]=_0x5c4aaf['_cookieTra'+'nsform']['x'],_0x5c4aaf['_cookieTra'+'nsformUnif'+'orm'][-0xaf*-0x2b+-0x1fc7*0x1+0x263]=_0x5c4aaf['_cookieTra'+'nsform']['y'],_0x5c4aaf['_cookieTra'+'nsformUnif'+'orm'][0x785+0x592*-0x5+0x1457]=_0x5c4aaf['_cookieTra'+'nsform']['z'],_0x5c4aaf['_cookieTra'+'nsformUnif'+'orm'][0x2701*-0x1+0xc*-0x107+0x3358]=_0x5c4aaf['_cookieTra'+'nsform']['w'],this['lightCooki'+'eMatrixId'][_0x35499a]['setValue'](_0x5c4aaf['_cookieTra'+'nsformUnif'+'orm']),_0x5c4aaf['_cookieOff'+'setUniform'][0x1faf*-0x1+-0xb7+0x27e*0xd]=_0x5c4aaf['_cookieOff'+'set']['x'],_0x5c4aaf['_cookieOff'+'setUniform'][0xfa9+-0x499*-0x8+-0x3470]=_0x5c4aaf['_cookieOff'+'set']['y'],this['lightCooki'+'eOffsetId'][_0x35499a]['setValue'](_0x5c4aaf['_cookieOff'+'setUniform']));}}['dispatchLo'+'calLights'](_0x14e9be,_0x29c227,_0xa5db47){let _0x5d4941=_0xa5db47;const _0xe98576=this['device']['scope'],_0x4bdd7f=_0x14e9be[Ke],_0x42b12f=_0x4bdd7f['length'];for(let _0x13dc67=-0x16ca+0x153*0x3+-0x12d1*-0x1;_0x13dc67<_0x42b12f;_0x13dc67++){const _0x30344d=_0x4bdd7f[_0x13dc67];_0x30344d['mask']&_0x29c227&&(this['dispatchOm'+'niLight'](_0xe98576,_0x30344d,_0x5d4941),_0x5d4941++);}const _0x1053ed=_0x14e9be[Ze],_0x29d61d=_0x1053ed['length'];for(let _0x401787=0x2039+0x1*-0x15eb+-0xa4e;_0x401787<_0x29d61d;_0x401787++){const _0x5cfb0a=_0x1053ed[_0x401787];_0x5cfb0a['mask']&_0x29c227&&(this['dispatchSp'+'otLight'](_0xe98576,_0x5cfb0a,_0x5d4941),_0x5d4941++);}}['renderForw'+'ardPrepare'+'Materials'](_0x34c212,_0x222c4e,_0x43cd3c,_0x1775d0,_0x1a4101,_0x18092e){const _0x104538=_0x34c212['fogParams']??this['scene']['fog'],_0x29810a=_0x34c212['shaderPara'+'ms'];_0x29810a['fog']=_0x104538['type'],_0x29810a['srgbRender'+'Target']=(_0x222c4e==null?void(-0x25cf*0x1+-0x5db+-0x15d5*-0x2):_0x222c4e['isColorBuf'+'ferSrgb'](0x1993*0x1+0x1*-0x1743+-0x250))??!(-0xb09+0xc0e+-0x104);const _0xd762c=(_0x448efd,_0x5ed1af,_0x2da008,_0x480e52)=>{Nr['drawCalls']['push'](_0x448efd),Nr['shaderInst'+'ances']['push'](_0x5ed1af),Nr['isNewMater'+'ial']['push'](_0x2da008),Nr['lightMaskC'+'hanged']['push'](_0x480e52);};Nr['clear']();const _0x1dcd00=this['device'],_0x5c47bb=this['scene'],_0x335183=_0x5c47bb['clusteredL'+'ightingEna'+'bled'],_0x1bf2f8=(_0x1a4101==null?void(-0xe6b+0x1890+-0x35*0x31):_0x1a4101['getLightHa'+'sh'](_0x335183))??-0x24*-0x97+0x1a7e*0x1+-0x1*0x2fba;let _0x4f2582=null,_0x5f0fcf,_0x2987d2;const _0x206283=_0x43cd3c['length'];for(let _0x1c0ff5=-0x18a6+0x221*0x2+0x1464;_0x1c0ff5<_0x206283;_0x1c0ff5++){const _0x1953da=_0x43cd3c[_0x1c0ff5];if(_0x34c212===Ni['skipRender'+'Camera']){if(Ni['_skipRende'+'rCounter']>=Ni['skipRender'+'After'])continue;Ni['_skipRende'+'rCounter']++;}if(_0x1a4101){if(_0x1a4101['_skipRende'+'rCounter']>=_0x1a4101['skipRender'+'After'])continue;_0x1a4101['_skipRende'+'rCounter']++;}const _0x7a0327=_0x1953da['instancing'+'Data'];if(_0x7a0327&&_0x7a0327['count']<=0x1c0c*0x1+0x1497+-0x30a3)continue;_0x1953da['ensureMate'+'rial'](_0x1dcd00);const _0x247c3d=_0x1953da['material'],_0x543fd5=_0x1953da['_shaderDef'+'s'],_0x4cf568=_0x1953da['mask'];_0x247c3d&&_0x247c3d===_0x4f2582&&_0x543fd5!==_0x5f0fcf&&(_0x4f2582=null),_0x247c3d!==_0x4f2582&&(this['_materialS'+'witches']++,_0x247c3d['_scene']=_0x5c47bb,_0x247c3d['dirty']&&(Q['pushGpuMar'+'ker'](_0x1dcd00,'Node:\x20'+_0x1953da['node']['name']+(',\x20Material'+':\x20')+_0x247c3d['name']),_0x247c3d['updateUnif'+'orms'](_0x1dcd00,_0x5c47bb),_0x247c3d['dirty']=!(-0xd3d+-0x870+0x73a*0x3),Q['popGpuMark'+'er'](_0x1dcd00)));const _0x1ed645=_0x1953da['getShaderI'+'nstance'](_0x18092e,_0x1bf2f8,_0x5c47bb,_0x29810a,this['viewUnifor'+'mFormat'],this['viewBindGr'+'oupFormat'],_0x1775d0);_0xd762c(_0x1953da,_0x1ed645,_0x247c3d!==_0x4f2582,!_0x4f2582||_0x4cf568!==_0x2987d2),_0x4f2582=_0x247c3d,_0x5f0fcf=_0x543fd5,_0x2987d2=_0x4cf568;}return Nr;}['renderForw'+'ardInterna'+'l'](_0x13a86d,_0x2d8a3b,_0x19c0f6,_0x160939,_0x436906,_0x270723,_0xc6531b){var _0x364a1d,_0x476bcf;const _0xb9391e=this['device'],_0x23da46=this['scene'],_0x4fd26c=0x1882+0x336+-0x1bb7<<_0x160939,_0x351aee=_0x270723?-(0x15c3+0x157e+-0x20*0x15a):0x826+-0x1e12+0x74f*0x3,_0x3ec5e5=_0x23da46['clusteredL'+'ightingEna'+'bled'],_0x41dd70=(_0x364a1d=_0x13a86d['xr'])!=null&&_0x364a1d['session']&&_0x13a86d['xr']['views']['list']['length']?_0x13a86d['xr']['views']['list']:null,_0x5808c9=_0x2d8a3b['drawCalls']['length'];for(let _0x3a800f=0x27*0x79+0x1e8f+-0x30fe;_0x3a800f<_0x5808c9;_0x3a800f++){const _0xa21aea=_0x2d8a3b['drawCalls'][_0x3a800f],_0x15d9b1=_0x2d8a3b['isNewMater'+'ial'][_0x3a800f],_0x16836d=_0x2d8a3b['lightMaskC'+'hanged'][_0x3a800f],_0x3075b9=_0x2d8a3b['shaderInst'+'ances'][_0x3a800f],_0x480826=_0xa21aea['material'],_0x157eaf=_0xa21aea['mask'];if(_0x3075b9['shader']['failed'])continue;if(_0x15d9b1){if(_0xb9391e['setShader'](_0x3075b9['shader'],!(-0x1cb0+-0x160d+-0x1e*-0x1b1)),_0x480826['setParamet'+'ers'](_0xb9391e),_0x16836d){const _0x5ab164=this['dispatchDi'+'rectLights'](_0x19c0f6[ve],_0x157eaf,_0x13a86d);_0x3ec5e5||this['dispatchLo'+'calLights'](_0x19c0f6,_0x157eaf,_0x5ab164);}this['alphaTestI'+'d']['setValue'](_0x480826['alphaTest']),_0xb9391e['setBlendSt'+'ate'](_0x480826['blendState']),_0xb9391e['setDepthSt'+'ate'](_0x480826['depthState']),_0xb9391e['setAlphaTo'+'Coverage'](_0x480826['alphaToCov'+'erage']);}Q['pushGpuMar'+'ker'](_0xb9391e,'Node:\x20'+_0xa21aea['node']['name']+(',\x20Material'+':\x20')+_0x480826['name']),this['setupCullM'+'ode'](_0x13a86d['_cullFaces'],_0x351aee,_0xa21aea);const _0x384f16=_0xa21aea['stencilFro'+'nt']??_0x480826['stencilFro'+'nt'],_0x5e2f2e=_0xa21aea['stencilBac'+'k']??_0x480826['stencilBac'+'k'];_0xb9391e['setStencil'+'State'](_0x384f16,_0x5e2f2e),_0xa21aea['setParamet'+'ers'](_0xb9391e,_0x4fd26c),_0xb9391e['scope']['resolve']('meshInstan'+'ceId')['setValue'](_0xa21aea['id']);const _0x334c09=_0xa21aea['mesh'];this['setVertexB'+'uffers'](_0xb9391e,_0x334c09),this['setMorphin'+'g'](_0xb9391e,_0xa21aea['morphInsta'+'nce']),this['setSkinnin'+'g'](_0xb9391e,_0xa21aea);const _0x327d84=_0xa21aea['instancing'+'Data'];_0x327d84&&_0xb9391e['setVertexB'+'uffer'](_0x327d84['vertexBuff'+'er']),this['setMeshIns'+'tanceMatri'+'ces'](_0xa21aea,!(-0xa5*-0xb+0x1f65+0x267c*-0x1)),this['setupMeshU'+'niformBuff'+'ers'](_0x3075b9);const _0x4bca1f=_0xa21aea['renderStyl'+'e'],_0x625464=_0x334c09['indexBuffe'+'r'][_0x4bca1f];_0x436906==null||_0x436906(_0xa21aea,_0x3a800f);const _0x2359aa=(_0x476bcf=_0xa21aea['indirectDa'+'ta'])==null?void(0x2c+0xa1*0xd+-0x859):_0x476bcf['get'](_0x13a86d);if(_0x41dd70)for(let _0x327245=0x1b84+-0xf4+-0x1a90;_0x327245<_0x41dd70['length'];_0x327245++){const _0x1400a1=_0x41dd70[_0x327245];if(_0xb9391e['setViewpor'+'t'](_0x1400a1['viewport']['x'],_0x1400a1['viewport']['y'],_0x1400a1['viewport']['z'],_0x1400a1['viewport']['w']),_0xb9391e['supportsUn'+'iformBuffe'+'rs']){const _0x13005d=_0xc6531b[_0x327245];_0xb9391e['setBindGro'+'up'](rl,_0x13005d);}else this['setupViewU'+'niforms'](_0x1400a1,_0x327245);const _0x3f9874=_0x327245===-0x25b1+-0x115c+0x370d,_0x8a580e=_0x327245===_0x41dd70['length']-(-0x228d+0x5*-0x6de+0x44e4);_0xb9391e['draw'](_0x334c09['primitive'][_0x4bca1f],_0x625464,_0x327d84==null?void(0x1df+0x900+-0x17*0x79):_0x327d84['count'],_0x2359aa,_0x3f9874,_0x8a580e),this['_forwardDr'+'awCalls']++,_0xa21aea['instancing'+'Data']&&this['_instanced'+'DrawCalls']++;}else _0xb9391e['draw'](_0x334c09['primitive'][_0x4bca1f],_0x625464,_0x327d84==null?void(-0x263d+-0x735+0x2d72):_0x327d84['count'],_0x2359aa),this['_forwardDr'+'awCalls']++,_0xa21aea['instancing'+'Data']&&this['_instanced'+'DrawCalls']++;_0x3a800f<_0x5808c9-(-0xc27+0x148*-0x1+-0x8*-0x1ae)&&!_0x2d8a3b['isNewMater'+'ial'][_0x3a800f+(0xadf*-0x3+0x120d+0xe91)]&&_0x480826['setParamet'+'ers'](_0xb9391e,_0xa21aea['parameters']),Q['popGpuMark'+'er'](_0xb9391e);}}['renderForw'+'ard'](_0x238e57,_0x469160,_0x3449e7,_0x59a7b6,_0x552dd9,_0x1c7b91,_0x20e4d6,_0x39c280,_0x5a4866){const _0x5456df=de(),_0x314517=this['renderForw'+'ardPrepare'+'Materials'](_0x238e57,_0x469160,_0x3449e7,_0x59a7b6,_0x20e4d6,_0x552dd9);this['renderForw'+'ardInterna'+'l'](_0x238e57,_0x314517,_0x59a7b6,_0x552dd9,_0x1c7b91,_0x39c280,_0x5a4866),Nr['clear'](),this['_forwardTi'+'me']+=de()-_0x5456df;}['renderForw'+'ardLayer'](_0xa0a6b2,_0x175443,_0x12bd74,_0x311246,_0x4080c2,_0x1db7f8,_0x8fac0={}){const {scene:_0x5c7a2a,device:_0xee2e86}=this,_0x18fc12=_0x5c7a2a['clusteredL'+'ightingEna'+'bled'];this['setupViewp'+'ort'](_0xa0a6b2,_0x175443);let _0x10c85f,_0x5ee6ea;if(_0x12bd74){const _0x203fc9=de();_0x12bd74['sortVisibl'+'e'](_0xa0a6b2,_0x311246),this['_sortTime']+=de()-_0x203fc9;const _0x45582f=_0x12bd74['getCulledI'+'nstances'](_0xa0a6b2);_0x10c85f=_0x311246?_0x45582f['transparen'+'t']:_0x45582f['opaque'],_0x5c7a2a['immediate']['onPreRende'+'rLayer'](_0x12bd74,_0x10c85f,_0x311246),_0x12bd74['requiresLi'+'ghtCube']&&(this['lightCube']['update'](_0x5c7a2a['ambientLig'+'ht'],_0x12bd74['_lights']),this['constantLi'+'ghtCube']['setValue'](this['lightCube']['colors'])),_0x5ee6ea=_0x12bd74['splitLight'+'s'];}else _0x10c85f=_0x8fac0['meshInstan'+'ces'],_0x5ee6ea=_0x8fac0['splitLight'+'s']??Qb;if(w['assert'](_0x10c85f,'Either\x20lay'+'er\x20or\x20opti'+'ons.meshIn'+'stances\x20mu'+'st\x20be\x20prov'+'ided'),_0x18fc12){const _0x1fb5f1=_0x8fac0['lightClust'+'ers']??this['worldClust'+'ersAllocat'+'or']['empty'];_0x1fb5f1['activate'](),_0x12bd74&&!this['clustersDe'+'bugRendere'+'d']&&_0x5c7a2a['lighting']['debugLayer']===_0x12bd74['id']&&(this['clustersDe'+'bugRendere'+'d']=!(-0x26ae+0x13f4+0x12ba),hu['render'](_0x1fb5f1,this['scene']));}_0x5c7a2a['_activeCam'+'era']=_0xa0a6b2;const _0x55bccb=_0xa0a6b2['fogParams']??this['scene']['fog'];this['setFogCons'+'tants'](_0x55bccb);const _0x498df7=this['setCameraU'+'niforms'](_0xa0a6b2,_0x175443);_0xee2e86['supportsUn'+'iformBuffe'+'rs']&&this['setupViewU'+'niformBuff'+'ers'](_0x1db7f8,this['viewUnifor'+'mFormat'],this['viewBindGr'+'oupFormat'],_0x498df7);const _0x5b568e=_0x8fac0['clearColor']??!(-0x20f3+0x7b5*0x2+0x118a),_0x3b486f=_0x8fac0['clearDepth']??!(0x3*-0x785+-0x7db*0x1+0x257*0xd),_0x11970c=_0x8fac0['clearStenc'+'il']??!(0x2*-0xc2e+-0xfa9+0x2806);(_0x5b568e||_0x3b486f||_0x11970c)&&this['clear'](_0xa0a6b2,_0x5b568e,_0x3b486f,_0x11970c);const _0x1434be=!!(_0xa0a6b2['_flipFaces']^(_0x175443==null?void(-0x232e+0x10f*0x6+0x1cd4):_0x175443['flipY'])),_0xba8a81=this['_forwardDr'+'awCalls'];this['renderForw'+'ard'](_0xa0a6b2,_0x175443,_0x10c85f,_0x5ee6ea,_0x4080c2,null,_0x12bd74,_0x1434be,_0x1db7f8),_0x12bd74&&(_0x12bd74['_forwardDr'+'awCalls']+=this['_forwardDr'+'awCalls']-_0xba8a81);}['setFogCons'+'tants'](_0x4a966f){if(_0x4a966f['type']!==Kn){or['linear'](_0x4a966f['color']);const _0xa4c59=this['fogColor'];_0xa4c59[-0x1*-0x1855+-0x156b*-0x1+-0x2dc0]=or['r'],_0xa4c59[0x2*0x161+-0x1*0x10b2+-0x1*-0xdf1]=or['g'],_0xa4c59[0x119f+-0xf2c*-0x1+0x4af*-0x7]=or['b'],this['fogColorId']['setValue'](_0xa4c59),_0x4a966f['type']===Iw?(this['fogStartId']['setValue'](_0x4a966f['start']),this['fogEndId']['setValue'](_0x4a966f['end'])):this['fogDensity'+'Id']['setValue'](_0x4a966f['density']);}}['setSceneCo'+'nstants'](){const _0x4bd731=this['scene'];this['dispatchGl'+'obalLights'](_0x4bd731);const _0x1d298b=this['device'];this['_screenSiz'+'e'][-0xa5f+-0x3f9+0x132*0xc]=_0x1d298b['width'],this['_screenSiz'+'e'][0x348*0x3+0x194a+-0x2321]=_0x1d298b['height'],this['_screenSiz'+'e'][0x1f14+0x1bb6+-0x3ac8]=(0xd*0x137+-0x191*0xb+0x171*0x1)/_0x1d298b['width'],this['_screenSiz'+'e'][-0x4*0x3cd+-0xd56+0x1c8d]=(0x1cbe*0x1+0x339+0xffb*-0x2)/_0x1d298b['height'],this['screenSize'+'Id']['setValue'](this['_screenSiz'+'e']),this['pcssDiskSa'+'mplesId']['setValue'](this['pcssDiskSa'+'mples']),this['pcssSphere'+'SamplesId']['setValue'](this['pcssSphere'+'Samples']);}['buildFrame'+'Graph'](_0x353775,_0x2fadeb){const _0xc99f3f=this['scene'];if(_0x353775['reset'](),_0xc99f3f['clusteredL'+'ightingEna'+'bled']){const {shadowsEnabled:_0xb138ad,cookiesEnabled:_0x4ba684}=_0xc99f3f['lighting'];this['_renderPas'+'sUpdateClu'+'stered']['update'](_0x353775,_0xb138ad,_0x4ba684,this['lights'],this['localLight'+'s']),_0x353775['addRenderP'+'ass'](this['_renderPas'+'sUpdateClu'+'stered']);}else this['_shadowRen'+'dererLocal']['buildNonCl'+'usteredRen'+'derPasses'](_0x353775,this['localLight'+'s']);let _0x488a14=0x1e9*0x6+0x1bc+-0x466*0x3,_0x15a198=!(0xa21*0x2+-0x1b5a+-0x4*-0x1c6),_0x5b92c4=null;const _0x511937=_0x2fadeb['_renderAct'+'ions'];for(let _0x426a09=_0x488a14;_0x426a09<_0x511937['length'];_0x426a09++){const _0x4d69a3=_0x511937[_0x426a09],{layer:_0x20e7ac,camera:_0x3e9aa1}=_0x4d69a3;if(_0x4d69a3['useCameraP'+'asses'])w['call'](()=>{_0x3e9aa1['postEffect'+'s']['effects']['length']>0x2638+0x1*-0x3a1+-0x325*0xb&&w['warnOnce']('Camera\x20\x27'+_0x3e9aa1['entity']['name']+('\x27\x20uses\x20ren'+'der\x20passes'+',\x20which\x20ar'+'e\x20not\x20comp'+'atible\x20wit'+'h\x20post-eff'+'ects\x20scrip'+'ts.\x20Render'+'ing\x20of\x20the'+'\x20post-effe'+'cts\x20is\x20ign'+'ored,\x20but\x20'+'they\x20shoul'+'d\x20not\x20be\x20a'+'ttached\x20to'+'\x20the\x20camer'+'a.'));}),_0x3e9aa1['camera']['renderPass'+'es']['forEach'](_0x441e83=>{_0x353775['addRenderP'+'ass'](_0x441e83);});else{const _0x451a1b=_0x20e7ac['id']===ps,_0x1bf936=_0x451a1b&&(_0x3e9aa1['renderScen'+'eColorMap']||_0x3e9aa1['renderScen'+'eDepthMap']);_0x15a198&&(_0x15a198=!(-0x78b+-0xf31+0x1*0x16bd),_0x488a14=_0x426a09,_0x5b92c4=_0x4d69a3['renderTarg'+'et']);const _0x53ba37=_0x511937[_0x426a09+(-0x2*0x6b2+-0xda8+0x1b0d)],_0x279485=(_0x53ba37?!_0x53ba37['useCameraP'+'asses']&&_0x53ba37['layer']['id']===ps:!(-0x27a*-0xd+0x35*0x1e+-0x2667))&&(_0x3e9aa1['renderScen'+'eColorMap']||_0x3e9aa1['renderScen'+'eDepthMap']),_0x1895fa=_0x53ba37?_0x53ba37['firstCamer'+'aUse']&&this['cameraDirS'+'hadowLight'+'s']['has'](_0x53ba37['camera']['camera']):!(-0x2566+0x1ecc+0x69b);if(!_0x53ba37||_0x53ba37['renderTarg'+'et']!==_0x5b92c4||_0x1895fa||_0x279485||_0x1bf936){if(_0x451a1b&&_0x488a14===_0x426a09||this['addMainRen'+'derPass'](_0x353775,_0x2fadeb,_0x5b92c4,_0x488a14,_0x426a09),_0x451a1b){if(_0x3e9aa1['renderScen'+'eColorMap']){const _0x12807c=_0x3e9aa1['camera']['renderPass'+'ColorGrab'];_0x12807c['source']=_0x3e9aa1['renderTarg'+'et'],_0x353775['addRenderP'+'ass'](_0x12807c);}_0x3e9aa1['renderScen'+'eDepthMap']&&_0x353775['addRenderP'+'ass'](_0x3e9aa1['camera']['renderPass'+'DepthGrab']);}if(_0x4d69a3['triggerPos'+'tprocess']&&(_0x3e9aa1!=null&&_0x3e9aa1['onPostproc'+'essing'])){const _0x3d2704=new Zb(this['device'],this,_0x4d69a3);_0x353775['addRenderP'+'ass'](_0x3d2704);}_0x15a198=!(0x441+-0x940+0x4ff*0x1);}}}}['addMainRen'+'derPass'](_0x215ee7,_0x324e98,_0x14949e,_0x4032f7,_0x5c9dcf){const _0x3bf098=new Kb(this['device'],_0x324e98,this['scene'],this);_0x3bf098['init'](_0x14949e);const _0x3ca2e2=_0x324e98['_renderAct'+'ions'];for(let _0x7df431=_0x4032f7;_0x7df431<=_0x5c9dcf;_0x7df431++)_0x3bf098['addRenderA'+'ction'](_0x3ca2e2[_0x7df431]);_0x215ee7['addRenderP'+'ass'](_0x3bf098);}['update'](_0x8aeeaf){this['frameUpdat'+'e'](),this['shadowRend'+'erer']['frameUpdat'+'e'](),this['scene']['_updateSky'+'Mesh'](),this['updateLaye'+'rCompositi'+'on'](_0x8aeeaf),this['collectLig'+'hts'](_0x8aeeaf),this['beginFrame'](_0x8aeeaf),this['setSceneCo'+'nstants'](),this['cullCompos'+'ition'](_0x8aeeaf),this['gpuUpdate'](this['processing'+'MeshInstan'+'ces']);}};h(Ni,'skipRender'+'Camera',null),h(Ni,'_skipRende'+'rCounter',0x1*0x1e3b+0x1b*-0x140+0x385),h(Ni,'skipRender'+'After',-0x12d6+0x2*0xe9+0x1104);let fl=Ni,uf=0x1*0x25d9+0xb*0x5f+-0x14f7*0x2;const co=[],hc=new Set();function tA(_0x4c45b9,_0xdf49b8){return _0x4c45b9['drawOrder']-_0xdf49b8['drawOrder'];}function sA(_0x27c79f,_0x386f6b){const _0x2fc2aa=_0x27c79f['_sortKeyFo'+'rward'],_0x24388f=_0x386f6b['_sortKeyFo'+'rward'];return _0x2fc2aa===_0x24388f?_0x386f6b['mesh']['id']-_0x27c79f['mesh']['id']:_0x24388f-_0x2fc2aa;}function iA(_0x590abb,_0xa8321d){return _0xa8321d['_sortKeyDy'+'namic']-_0x590abb['_sortKeyDy'+'namic'];}function rA(_0x374df9,_0x5cee3a){return _0x374df9['_sortKeyDy'+'namic']-_0x5cee3a['_sortKeyDy'+'namic'];}const aA=[null,tA,sA,iA,rA];class nA{constructor(){h(this,'opaque',[]),h(this,'transparen'+'t',[]);}}class Ot{constructor(_0x38b9be={}){h(this,'meshInstan'+'ces',[]),h(this,'meshInstan'+'cesSet',new Set()),h(this,'shadowCast'+'ers',[]),h(this,'shadowCast'+'ersSet',new Set()),h(this,'_visibleIn'+'stances',new WeakMap()),h(this,'_lights',[]),h(this,'_lightsSet',new Set()),h(this,'_clustered'+'LightsSet',new Set()),h(this,'_splitLigh'+'ts',[[],[],[]]),h(this,'_splitLigh'+'tsDirty',!(0x20ce+0xc5*-0x3+0x25*-0xd3)),h(this,'requiresLi'+'ghtCube',!(0x8*-0x25f+-0x1680+0x2979)),h(this,'cameras',[]),h(this,'camerasSet',new Set()),h(this,'_dirtyComp'+'osition',!(0xfa1+0x21ae+-0x314e*0x1)),(_0x38b9be['id']!==void(0x1*0x8b7+0x3ee+-0xca5)?(this['id']=_0x38b9be['id'],uf=Math['max'](this['id']+(-0xa8b+-0xbd*-0x3+0x855),uf)):this['id']=uf++,this['name']=_0x38b9be['name'],this['_enabled']=_0x38b9be['enabled']??!(-0x1*0x13ed+-0x2313+-0xdc*-0x40),this['_refCounte'+'r']=this['_enabled']?0x1e53+0x61*0x2d+-0x43*0xb5:-0x20fa+0x5*0x503+-0x1*-0x7eb,this['opaqueSort'+'Mode']=_0x38b9be['opaqueSort'+'Mode']??Yw,this['transparen'+'tSortMode']=_0x38b9be['transparen'+'tSortMode']??m_,_0x38b9be['renderTarg'+'et']&&(this['renderTarg'+'et']=_0x38b9be['renderTarg'+'et']),this['_clearColo'+'rBuffer']=!!_0x38b9be['clearColor'+'Buffer'],this['_clearDept'+'hBuffer']=!!_0x38b9be['clearDepth'+'Buffer'],this['_clearSten'+'cilBuffer']=!!_0x38b9be['clearStenc'+'ilBuffer'],this['onEnable']=_0x38b9be['onEnable'],this['onDisable']=_0x38b9be['onDisable'],this['_enabled']&&this['onEnable']&&this['onEnable'](),this['customSort'+'Callback']=null,this['customCalc'+'ulateSortV'+'alues']=null,this['_lightHash']=0x1*-0x1ebb+0x13*-0x13f+-0x6cd*-0x8,this['_lightHash'+'Dirty']=!(0x152+0x2b7*0xc+-0x21e5),this['_lightIdHa'+'sh']=0x1ce3+-0x16e+-0x1b75,this['_lightIdHa'+'shDirty']=!(0x5b*-0x37+-0x4*-0x3cb+0x462),this['skipRender'+'After']=Number['MAX_VALUE'],this['_skipRende'+'rCounter']=-0x566+-0x21a1+-0x67*-0x61,this['_renderTim'+'e']=0x128e+-0xa4*0x15+-0x51a*0x1,this['_forwardDr'+'awCalls']=0x623*-0x1+0x993+-0x10*0x37,this['_shadowDra'+'wCalls']=-0xeeb+-0x24c9+-0x4*-0xced,this['_shaderVer'+'sion']=-(-0x26df+0x229b+-0x1*-0x445));}set['enabled'](_0x1de246){_0x1de246!==this['_enabled']&&(this['_dirtyComp'+'osition']=!(-0x232c+-0x1e09+0x4135),this['_enabled']=_0x1de246,_0x1de246?(this['incrementC'+'ounter'](),this['onEnable']&&this['onEnable']()):(this['decrementC'+'ounter'](),this['onDisable']&&this['onDisable']()));}get['enabled'](){return this['_enabled'];}set['clearColor'+'Buffer'](_0x5ce7e1){this['_clearColo'+'rBuffer']=_0x5ce7e1,this['_dirtyComp'+'osition']=!(-0x2081+-0x1*0x15d7+0x8*0x6cb);}get['clearColor'+'Buffer'](){return this['_clearColo'+'rBuffer'];}set['clearDepth'+'Buffer'](_0x3f3d46){this['_clearDept'+'hBuffer']=_0x3f3d46,this['_dirtyComp'+'osition']=!(0x17e*0xa+-0x1b2*0x7+-0x1*0x30e);}get['clearDepth'+'Buffer'](){return this['_clearDept'+'hBuffer'];}set['clearStenc'+'ilBuffer'](_0x10449c){this['_clearSten'+'cilBuffer']=_0x10449c,this['_dirtyComp'+'osition']=!(-0x1666+0x853+-0xe13*-0x1);}get['clearStenc'+'ilBuffer'](){return this['_clearSten'+'cilBuffer'];}get['hasCluster'+'edLights'](){return this['_clustered'+'LightsSet']['size']>-0x121*-0x5+-0x56a*0x6+0x1ad7;}get['clusteredL'+'ightsSet'](){return this['_clustered'+'LightsSet'];}['incrementC'+'ounter'](){this['_refCounte'+'r']===-0x171*0x15+0x12f6+0xb4f&&(this['_enabled']=!(0x1*0x1d2e+-0x1b3c+-0x2*0xf9),this['onEnable']&&this['onEnable']()),this['_refCounte'+'r']++;}['decrementC'+'ounter'](){if(this['_refCounte'+'r']===0x1836+0x2538+-0x3d6d)this['_enabled']=!(-0x1480+0x4*0x24+0x13f1),this['onDisable']&&this['onDisable']();else{if(this['_refCounte'+'r']===-0x38e+-0xfea*0x2+0x2362){w['warn']('Trying\x20to\x20'+'decrement\x20'+'layer\x20coun'+'ter\x20below\x20'+'0');return;}}this['_refCounte'+'r']--;}['addMeshIns'+'tances'](_0x1583fd,_0x5cdbfa){const _0x1c15e2=this['meshInstan'+'ces'],_0x4dbf5c=this['meshInstan'+'cesSet'];for(let _0x57a598=-0x3f7+-0xfdd+0x2f*0x6c;_0x57a598<_0x1583fd['length'];_0x57a598++){const _0x1ac034=_0x1583fd[_0x57a598];_0x4dbf5c['has'](_0x1ac034)||(_0x1c15e2['push'](_0x1ac034),_0x4dbf5c['add'](_0x1ac034),hc['add'](_0x1ac034['material']));}if(_0x5cdbfa||this['addShadowC'+'asters'](_0x1583fd),hc['size']>0x6b*-0x11+-0x12b7+0x19d2){const _0x5e7235=this['_shaderVer'+'sion'];hc['forEach'](_0x3baf79=>{_0x5e7235>=0x2605+-0x19*0xd6+-0x111f&&_0x3baf79['_shaderVer'+'sion']!==_0x5e7235&&(_0x3baf79['getShaderV'+'ariant']!==tr['prototype']['getShaderV'+'ariant']&&_0x3baf79['clearVaria'+'nts'](),_0x3baf79['_shaderVer'+'sion']=_0x5e7235);}),hc['clear']();}}['removeMesh'+'Instances'](_0x5aa603,_0x59ad37){const _0x40e92d=this['meshInstan'+'ces'],_0x494626=this['meshInstan'+'cesSet'];for(let _0x2790ba=0x163a+0x1*0x2417+-0x3a51;_0x2790ba<_0x5aa603['length'];_0x2790ba++){const _0x37e3b1=_0x5aa603[_0x2790ba];if(_0x494626['has'](_0x37e3b1)){_0x494626['delete'](_0x37e3b1);const _0x4797a1=_0x40e92d['indexOf'](_0x37e3b1);_0x4797a1>=0x1*0x222b+0x8f*0x31+0x1ec5*-0x2&&_0x40e92d['splice'](_0x4797a1,0x5*0xc2+0x7*0x26f+-0x14d2);}}_0x59ad37||this['removeShad'+'owCasters'](_0x5aa603);}['addShadowC'+'asters'](_0xb072b7){const _0x3e398e=this['shadowCast'+'ers'],_0x2c44f9=this['shadowCast'+'ersSet'];for(let _0x3ab0cf=0x1*0x17e9+-0x2b0+0x1*-0x1539;_0x3ab0cf<_0xb072b7['length'];_0x3ab0cf++){const _0x53737a=_0xb072b7[_0x3ab0cf];_0x53737a['castShadow']&&!_0x2c44f9['has'](_0x53737a)&&(_0x2c44f9['add'](_0x53737a),_0x3e398e['push'](_0x53737a));}}['removeShad'+'owCasters'](_0x152730){const _0x45ce72=this['shadowCast'+'ers'],_0x50d806=this['shadowCast'+'ersSet'];for(let _0x2041a9=0x2*-0xc4b+0x26b6+-0xe20*0x1;_0x2041a9<_0x152730['length'];_0x2041a9++){const _0xc097d4=_0x152730[_0x2041a9];if(_0x50d806['has'](_0xc097d4)){_0x50d806['delete'](_0xc097d4);const _0x277bc9=_0x45ce72['indexOf'](_0xc097d4);_0x277bc9>=-0xad9*0x1+0x1bb1*0x1+-0x8*0x21b&&_0x45ce72['splice'](_0x277bc9,-0x263f*-0x1+0x1*-0x2575+-0xc9);}}}['clearMeshI'+'nstances'](_0x3f9d6b=!(-0xf33+0x1d85+-0xe51)){this['meshInstan'+'ces']['length']=0x1c23*0x1+0x7f*0x3f+-0x9e6*0x6,this['meshInstan'+'cesSet']['clear'](),_0x3f9d6b||(this['shadowCast'+'ers']['length']=0x1*-0x210d+-0x3ad+0x24ba,this['shadowCast'+'ersSet']['clear']());}['markLights'+'Dirty'](){this['_lightHash'+'Dirty']=!(0x137*0xb+-0x1ce*-0xe+-0x26a1),this['_lightIdHa'+'shDirty']=!(-0x84a*0x2+0x3*-0x9f7+0x1*0x2e79),this['_splitLigh'+'tsDirty']=!(0x1*0x156b+0x59*0x1f+0x1019*-0x2);}['hasLight'](_0x39a183){return this['_lightsSet']['has'](_0x39a183);}['addLight'](_0x1be514){const _0x48fd66=_0x1be514['light'];this['_lightsSet']['has'](_0x48fd66)||(this['_lightsSet']['add'](_0x48fd66),this['_lights']['push'](_0x48fd66),this['markLights'+'Dirty']()),_0x48fd66['type']!==ve&&this['_clustered'+'LightsSet']['add'](_0x48fd66);}['removeLigh'+'t'](_0x1ed703){const _0x23349e=_0x1ed703['light'];this['_lightsSet']['has'](_0x23349e)&&(this['_lightsSet']['delete'](_0x23349e),this['_lights']['splice'](this['_lights']['indexOf'](_0x23349e),0x1*-0xd15+-0x1aa1+0xd3d*0x3),this['markLights'+'Dirty']()),_0x23349e['type']!==ve&&this['_clustered'+'LightsSet']['delete'](_0x23349e);}['clearLight'+'s'](){this['_lightsSet']['forEach'](_0x6e9810=>_0x6e9810['removeLaye'+'r'](this)),this['_lightsSet']['clear'](),this['_clustered'+'LightsSet']['clear'](),this['_lights']['length']=0x1eb7+-0x8c4+0x3*-0x751,this['markLights'+'Dirty']();}get['splitLight'+'s'](){if(this['_splitLigh'+'tsDirty']){this['_splitLigh'+'tsDirty']=!(-0xcb7+0x6b1*-0x1+0x1369);const _0x55d541=this['_splitLigh'+'ts'];for(let _0x478a84=-0x1*-0x98f+-0x12b8+-0x23*-0x43;_0x478a84<_0x55d541['length'];_0x478a84++)_0x55d541[_0x478a84]['length']=-0x1*-0x11f9+-0x1fd+-0x5d*0x2c;const _0x41dd66=this['_lights'];for(let _0x14dd7e=0x1*-0x1035+-0x2484+-0xb*-0x4cb;_0x14dd7e<_0x41dd66['length'];_0x14dd7e++){const _0x447597=_0x41dd66[_0x14dd7e];_0x447597['enabled']&&_0x55d541[_0x447597['_type']]['push'](_0x447597);}for(let _0x14c17c=-0x4c9*-0x5+-0xbd9+-0xc14;_0x14c17c<_0x55d541['length'];_0x14c17c++)_0x55d541[_0x14c17c]['sort']((_0x1f770b,_0x293af9)=>_0x1f770b['key']-_0x293af9['key']);}return this['_splitLigh'+'ts'];}['evaluateLi'+'ghtHash'](_0x335879,_0x511e76,_0x4e4c2a){let _0xa0a5da=0x170d+0x118a+-0x2897;const _0x3b004c=this['_lights'];for(let _0x1a334=0xfaa+0x2167+-0x3111;_0x1a334<_0x3b004c['length'];_0x1a334++){const _0x5e75df=_0x3b004c[_0x1a334]['type']!==ve;(_0x335879&&_0x5e75df||_0x511e76&&!_0x5e75df)&&co['push'](_0x4e4c2a?_0x3b004c[_0x1a334]['id']:_0x3b004c[_0x1a334]['key']);}return co['length']>0x81c+-0x13*-0x52+-0xe32&&(co['sort'](),_0xa0a5da=By(co),co['length']=0x11bc+-0x1*-0xbfc+-0x27a*0xc),_0xa0a5da;}['getLightHa'+'sh'](_0x1192b4){return this['_lightHash'+'Dirty']&&(this['_lightHash'+'Dirty']=!(-0xfab+0x222b*0x1+0x5*-0x3b3),this['_lightHash']=this['evaluateLi'+'ghtHash'](!_0x1192b4,!(0x133*0xc+-0xf3*-0xb+-0x18d5),!(-0x165*0x1+-0x467+-0x87*-0xb))),this['_lightHash'];}['getLightId'+'Hash'](){return this['_lightIdHa'+'shDirty']&&(this['_lightIdHa'+'shDirty']=!(-0x1ee1+-0x1*0x17f1+0x23*0x191),this['_lightIdHa'+'sh']=this['evaluateLi'+'ghtHash'](!(0x263d+0xa79+0x3a*-0xd7),!(-0x2634+0x1726+0xf0f),!(0x16e3+-0x46*0x60+0x35d))),this['_lightIdHa'+'sh'];}['addCamera'](_0x1a3b8a){this['camerasSet']['has'](_0x1a3b8a['camera'])||(this['camerasSet']['add'](_0x1a3b8a['camera']),this['cameras']['push'](_0x1a3b8a),this['_dirtyComp'+'osition']=!(0x29*0x35+0x1da5*0x1+-0x3*0xcb6));}['removeCame'+'ra'](_0x1688c2){if(this['camerasSet']['has'](_0x1688c2['camera'])){this['camerasSet']['delete'](_0x1688c2['camera']);const _0x3c3b31=this['cameras']['indexOf'](_0x1688c2);this['cameras']['splice'](_0x3c3b31,-0x1ddc+0x5e6+0x4cb*0x5),this['_dirtyComp'+'osition']=!(-0x129f+-0x1*-0x1ca5+-0xa06);}}['clearCamer'+'as'](){this['cameras']['length']=-0xe2c+-0x59*-0x18+0x5d4,this['camerasSet']['clear'](),this['_dirtyComp'+'osition']=!(0x778*0x5+-0x112d+0x3*-0x6b9);}['_calculate'+'SortDistan'+'ces'](_0x58eb4c,_0x50863f,_0x480252){const _0x30a419=_0x58eb4c['length'],{x:_0x5741d6,y:_0x443f14,z:_0x3e09c5}=_0x50863f,{x:_0x2e0e32,y:_0x1ced56,z:_0x5c9b98}=_0x480252;for(let _0x56c656=0xf2b+0xb3d+-0x41*0x68;_0x56c656<_0x30a419;_0x56c656++){const _0x50f707=_0x58eb4c[_0x56c656];let _0x6a60d1;if(_0x50f707['calculateS'+'ortDistanc'+'e'])_0x6a60d1=_0x50f707['calculateS'+'ortDistanc'+'e'](_0x50f707,_0x50863f,_0x480252);else{const _0xb82490=_0x50f707['aabb']['center'];_0x6a60d1=(_0xb82490['x']-_0x5741d6)*_0x2e0e32+(_0xb82490['y']-_0x443f14)*_0x1ced56+(_0xb82490['z']-_0x3e09c5)*_0x5c9b98;}const _0x2b9a8e=_0x50f707['_drawBucke'+'t']*(0x621f7c4+-0x9f278c5+0x3f6b4b01);_0x50f707['_sortKeyDy'+'namic']=_0x2b9a8e+_0x6a60d1;}}['getCulledI'+'nstances'](_0x4f1d22){let _0x3fd42d=this['_visibleIn'+'stances']['get'](_0x4f1d22);return _0x3fd42d||(_0x3fd42d=new nA(),this['_visibleIn'+'stances']['set'](_0x4f1d22,_0x3fd42d)),_0x3fd42d;}['sortVisibl'+'e'](_0x57a042,_0x18016f){const _0x23414c=_0x18016f?this['transparen'+'tSortMode']:this['opaqueSort'+'Mode'];if(_0x23414c===Yc)return;const _0x2f9023=this['getCulledI'+'nstances'](_0x57a042),_0x5d50b9=_0x18016f?_0x2f9023['transparen'+'t']:_0x2f9023['opaque'],_0x372723=_0x57a042['node'];if(_0x23414c===Zw){const _0x2e16ac=_0x372723['getPositio'+'n'](),_0x2ad6e3=_0x372723['forward'];this['customCalc'+'ulateSortV'+'alues']&&this['customCalc'+'ulateSortV'+'alues'](_0x5d50b9,_0x5d50b9['length'],_0x2e16ac,_0x2ad6e3),this['customSort'+'Callback']&&_0x5d50b9['sort'](this['customSort'+'Callback']);}else{if(_0x23414c===m_||_0x23414c===Kw){const _0x2fe574=_0x372723['getPositio'+'n'](),_0x265a7c=_0x372723['forward'];this['_calculate'+'SortDistan'+'ces'](_0x5d50b9,_0x2fe574,_0x265a7c);}_0x5d50b9['sort'](aA[_0x23414c]);}}}const oA=(_0x4dfc7c,_0x3bc6ce)=>_0x4dfc7c['priority']-_0x3bc6ce['priority'],ul=_0x1906f3=>_0x1906f3['sort'](oA);class du extends me{constructor(_0xb543d3='Untitled'){super(),h(this,'layerList',[]),h(this,'layerIdMap',new Map()),h(this,'layerNameM'+'ap',new Map()),h(this,'layerOpaqu'+'eIndexMap',new Map()),h(this,'layerTrans'+'parentInde'+'xMap',new Map()),h(this,'subLayerLi'+'st',[]),h(this,'subLayerEn'+'abled',[]),h(this,'cameras',[]),h(this,'_renderAct'+'ions',[]),h(this,'_dirty',!(-0x15*-0x31+0xed+-0x4f1)),(this['name']=_0xb543d3,this['_opaqueOrd'+'er']={},this['_transpare'+'ntOrder']={});}['destroy'](){this['destroyRen'+'derActions']();}['destroyRen'+'derActions'](){this['_renderAct'+'ions']['forEach'](_0x3861bb=>_0x3861bb['destroy']()),this['_renderAct'+'ions']['length']=0x8b*-0x1+-0x1137+0x2*0x8e1;}['markDirty'](){this['_dirty']=!(0x1553+0x1*0x8cd+0x4*-0x788);}['_update'](){const _0xdc7971=this['layerList']['length'];if(!this['_dirty']){for(let _0x58bb3f=0x1285+-0x61b+-0xc6a;_0x58bb3f<_0xdc7971;_0x58bb3f++)if(this['layerList'][_0x58bb3f]['_dirtyComp'+'osition']){this['_dirty']=!(0x41d+0x10*0x25f+0x2a0d*-0x1);break;}}if(this['_dirty']){this['_dirty']=!(0x1b48+0x22d4*0x1+-0x3e1b),this['cameras']['length']=0xbb*-0x2f+-0x2*0x11be+0x45d1;for(let _0x5029e6=-0x1*-0xcf1+-0x1*0x1dcd+0x10dc;_0x5029e6<_0xdc7971;_0x5029e6++){const _0x1edf72=this['layerList'][_0x5029e6];_0x1edf72['_dirtyComp'+'osition']=!(-0xf3d*0x1+-0x2ae*0x7+-0x8*-0x440);for(let _0x236235=0xb4*0x4+0x27*-0x56+0xa4a;_0x236235<_0x1edf72['cameras']['length'];_0x236235++){const _0x36f877=_0x1edf72['cameras'][_0x236235];this['cameras']['indexOf'](_0x36f877)<0xf70+0x392*0x3+-0x1a26*0x1&&this['cameras']['push'](_0x36f877);}}this['cameras']['length']>0x2556+0xfc9+-0x2*0x1a8f&&ul(this['cameras']);let _0x377072=0xcc1+-0x1*0x16ed+-0x1*-0xa2c;this['destroyRen'+'derActions']();for(let _0x27281a=0x2501+-0x1*-0x187+-0xcd8*0x3;_0x27281a<this['cameras']['length'];_0x27281a++){const _0x5a97c7=this['cameras'][_0x27281a];if(_0x5a97c7['camera']['renderPass'+'es']['length']>0x15d*-0xf+0x1*0x1eae+-0xa3b){this['addDummyRe'+'nderAction'](_0x377072,_0x5a97c7),_0x377072++;continue;}let _0x74db3e=!(-0xfcc+-0x1e07+-0x2dd3*-0x1);const _0x52f8e8=_0x377072;let _0x47ff9b=null,_0x2fdcea=!(-0xe*0x20f+0x1*0x160f+0x6c4);for(let _0x13a21=0x5*0x188+-0x2323+0x1b7b;_0x13a21<_0xdc7971;_0x13a21++){const _0x36bc39=this['layerList'][_0x13a21];if(_0x36bc39['enabled']&&this['subLayerEn'+'abled'][_0x13a21]&&_0x36bc39['cameras']['length']>0x55e*0x7+0xa13+-0x2fa5&&_0x5a97c7['layers']['indexOf'](_0x36bc39['id'])>=0x1506+-0x9f7*0x3+0x8df*0x1){!_0x2fdcea&&_0x36bc39['id']===_0x5a97c7['disablePos'+'tEffectsLa'+'yer']&&(_0x2fdcea=!(0x1cd*0xd+-0x25b0+0xd7*0x11),_0x47ff9b&&(_0x47ff9b['triggerPos'+'tprocess']=!(0x23f4+0x3fb+0x1*-0x27ef)));const _0x16acc8=this['subLayerLi'+'st'][_0x13a21];_0x47ff9b=this['addRenderA'+'ction'](_0x377072,_0x36bc39,_0x16acc8,_0x5a97c7,_0x74db3e,_0x2fdcea),_0x377072++,_0x74db3e=!(-0xe42+-0xc*0xf1+0x198f);}}_0x52f8e8<_0x377072&&(_0x47ff9b['lastCamera'+'Use']=!(-0x133*-0x1+0x166*-0x17+0x1ef7*0x1)),!_0x2fdcea&&_0x47ff9b&&(_0x47ff9b['triggerPos'+'tprocess']=!(0x576+-0x16*0x98+0x1*0x79a)),_0x5a97c7['renderTarg'+'et']&&_0x5a97c7['postEffect'+'sEnabled']&&this['propagateR'+'enderTarge'+'t'](_0x52f8e8-(-0xa4c+-0x1f4e+-0x1*-0x299b),_0x5a97c7);}this['_logRender'+'Actions']();}}['getNextRen'+'derAction'](_0x18d891){w['assert'](this['_renderAct'+'ions']['length']===_0x18d891);const _0x35a4e3=new Pv();return this['_renderAct'+'ions']['push'](_0x35a4e3),_0x35a4e3;}['addDummyRe'+'nderAction'](_0xf23c53,_0x2e1aa7){const _0x12f932=this['getNextRen'+'derAction'](_0xf23c53);_0x12f932['camera']=_0x2e1aa7,_0x12f932['useCameraP'+'asses']=!(0x1e32+-0x23*0x32+0x34*-0x73);}['addRenderA'+'ction'](_0x1f69f1,_0x554c39,_0x47d3e4,_0x59b9f7,_0x1aed83,_0x490c6a){let _0x1a7c1f=_0x554c39['id']!==ps?_0x59b9f7['renderTarg'+'et']:null,_0x378d87=!(0x1083+0x1bed+0x659*-0x7);const _0x670f21=this['_renderAct'+'ions'];for(let _0x185ddf=_0x1f69f1-(-0x1*0x175+0x2ae+-0x138);_0x185ddf>=-0x227d*0x1+0x3*0x16a+0x1*0x1e3f;_0x185ddf--)if(_0x670f21[_0x185ddf]['camera']===_0x59b9f7&&_0x670f21[_0x185ddf]['renderTarg'+'et']===_0x1a7c1f){_0x378d87=!(0x1*0x1ebb+-0x2fe*-0x2+0xd*-0x2d3);break;}_0x490c6a&&_0x59b9f7['postEffect'+'sEnabled']&&(_0x1a7c1f=null);const _0x176a8e=this['getNextRen'+'derAction'](_0x1f69f1);_0x176a8e['triggerPos'+'tprocess']=!(0x1*0xeb9+-0x1e5*0x7+-0x175),_0x176a8e['layer']=_0x554c39,_0x176a8e['transparen'+'t']=_0x47d3e4,_0x176a8e['camera']=_0x59b9f7,_0x176a8e['renderTarg'+'et']=_0x1a7c1f,_0x176a8e['firstCamer'+'aUse']=_0x1aed83,_0x176a8e['lastCamera'+'Use']=!(-0x14e+0x1dcb+-0x1c7c);const _0x65cf02=_0x1aed83||!_0x378d87,_0x360df0=_0x554c39['clearColor'+'Buffer']||_0x554c39['clearDepth'+'Buffer']||_0x554c39['clearStenc'+'ilBuffer'];return(_0x65cf02||_0x360df0)&&_0x176a8e['setupClear'+'s'](_0x65cf02?_0x59b9f7:void(0x638+0x203+-0x1*0x83b),_0x554c39),_0x176a8e;}['propagateR'+'enderTarge'+'t'](_0x34985,_0x3e9c37){for(let _0x56faf0=_0x34985;_0x56faf0>=-0xbcf*0x1+0x1*-0x20d3+0x2ca2;_0x56faf0--){const _0x1106a4=this['_renderAct'+'ions'][_0x56faf0],_0x22f168=_0x1106a4['layer'];if(_0x1106a4['renderTarg'+'et']&&_0x22f168['id']!==ps)break;if(_0x22f168['id']===ps)continue;if(_0x1106a4['useCameraP'+'asses'])break;const _0x12aaa0=_0x1106a4==null?void(-0x1e*-0x101+0x1*-0xd8b+-0x1093*0x1):_0x1106a4['camera']['camera'];if(_0x12aaa0&&(!_0x3e9c37['camera']['rect']['equals'](_0x12aaa0['rect'])||!_0x3e9c37['camera']['scissorRec'+'t']['equals'](_0x12aaa0['scissorRec'+'t'])))break;_0x1106a4['renderTarg'+'et']=_0x3e9c37['renderTarg'+'et'];}}['_logRender'+'Actions'](){if(mi['get'](Vl)){w['trace'](Vl,'Render\x20Act'+'ions\x20for\x20c'+'omposition'+':\x20'+this['name']);for(let _0x509999=-0x7*0x125+-0x268b+0x1*0x2e8e;_0x509999<this['_renderAct'+'ions']['length'];_0x509999++){const _0x1c8331=this['_renderAct'+'ions'][_0x509999],_0x339dca=_0x1c8331['camera'];if(_0x1c8331['useCameraP'+'asses'])w['trace'](Vl,_0x509999+('CustomPass'+'es\x20Cam:\x20')+(_0x339dca?_0x339dca['entity']['name']:'-'));else{const _0x4940f0=_0x1c8331['layer'],_0x2594ed=_0x4940f0['enabled']&&this['isEnabled'](_0x4940f0,_0x1c8331['transparen'+'t']),_0x28c807=(_0x1c8331['clearColor']?'Color\x20':'.....\x20')+(_0x1c8331['clearDepth']?'Depth\x20':'.....\x20')+(_0x1c8331['clearStenc'+'il']?'Stencil':'.......');w['trace'](Vl,_0x509999+('\x20Cam:\x20'+(_0x339dca?_0x339dca['entity']['name']:'-'))['padEnd'](-0x2e9*0x5+0x2593+-0x1*0x16f0,'\x20')+('\x20Lay:\x20'+_0x4940f0['name'])['padEnd'](0x5*0x601+0x2138*0x1+-0x3f27*0x1,'\x20')+(_0x1c8331['transparen'+'t']?'\x20TRANSP':'\x20OPAQUE')+(_0x2594ed?'\x20ENABLED\x20':'\x20DISABLED')+('\x20RT:\x20'+(_0x1c8331['renderTarg'+'et']?_0x1c8331['renderTarg'+'et']['name']:'-'))['padEnd'](-0x1ff9+-0x1895+0x12*0x326,'\x20')+'\x20Clear:\x20'+_0x28c807+(_0x1c8331['firstCamer'+'aUse']?'\x20CAM-FIRST':'')+(_0x1c8331['lastCamera'+'Use']?'\x20CAM-LAST':'')+(_0x1c8331['triggerPos'+'tprocess']?'\x20POSTPROCE'+'SS':''));}}}}['_isLayerAd'+'ded'](_0x165d2d){const _0x4dada7=this['layerIdMap']['get'](_0x165d2d['id'])===_0x165d2d;return w['assert'](!_0x4dada7,'Layer\x20is\x20a'+'lready\x20add'+'ed:\x20'+_0x165d2d['name']),_0x4dada7;}['_isSublaye'+'rAdded'](_0xe57e37,_0x94c9db){return(_0x94c9db?this['layerTrans'+'parentInde'+'xMap']:this['layerOpaqu'+'eIndexMap'])['get'](_0xe57e37)!==void(-0xb64+-0x25f5+0x3159)?(w['error']('Sublayer\x20'+_0xe57e37['name']+(',\x20transpar'+'ent:\x20')+_0x94c9db+('\x20is\x20alread'+'y\x20added.')),!(0x5ea*-0x1+-0x1730+0x1d1a)):!(-0x4*0x1d9+-0x37*-0x36+-0x435*0x1);}['push'](_0x3a1450){this['_isLayerAd'+'ded'](_0x3a1450)||(this['layerList']['push'](_0x3a1450),this['layerList']['push'](_0x3a1450),this['_opaqueOrd'+'er'][_0x3a1450['id']]=this['subLayerLi'+'st']['push'](!(0x849+0xd*-0x21d+-0x11*-0x121))-(-0x14fb+0x887*0x1+0x427*0x3),this['_transpare'+'ntOrder'][_0x3a1450['id']]=this['subLayerLi'+'st']['push'](!(0x15b*0x3+-0x3ca+-0x47))-(-0x5fd*-0x4+-0x26e4+0xe1*0x11),this['subLayerEn'+'abled']['push'](!(-0xda1+0x24ba+-0x1719)),this['subLayerEn'+'abled']['push'](!(-0x1d81+0x8c4+0x14bd)),this['_updateLay'+'erMaps'](),this['_dirty']=!(-0x1*-0x1943+0xba*-0x23+0x2b),this['fire']('add',_0x3a1450));}['insert'](_0x6c384,_0x3963e0){if(this['_isLayerAd'+'ded'](_0x6c384))return;this['layerList']['splice'](_0x3963e0,-0x11*-0x18a+0x6ce+0x107c*-0x2,_0x6c384,_0x6c384),this['subLayerLi'+'st']['splice'](_0x3963e0,-0x2*0xc3e+0x37*0x45+0x1*0x9a9,!(-0x2322+0x95*-0x13+0x3*0xf66),!(0x909+-0x160+-0x7a9));const _0x1b1ae6=this['layerList']['length'];this['_updateOpa'+'queOrder'](_0x3963e0,_0x1b1ae6-(0x29*0xa7+0x1df4+0x1c59*-0x2)),this['_updateTra'+'nsparentOr'+'der'](_0x3963e0,_0x1b1ae6-(-0xbab+0x226e+-0x6*0x3cb)),this['subLayerEn'+'abled']['splice'](_0x3963e0,-0x1*0x241f+0x1*-0x1a8a+0x14e3*0x3,!(-0x4*-0x617+-0xc0f+-0xc4d),!(0x5*-0x5ac+-0x1*-0x1b35+0x1*0x127)),this['_updateLay'+'erMaps'](),this['_dirty']=!(0x681+-0x155*-0x16+0x67*-0x59),this['fire']('add',_0x6c384);}['remove'](_0x5bf341){let _0x5f1f60=this['layerList']['indexOf'](_0x5bf341);for(delete this['_opaqueOrd'+'er'][_0x5f1f60],delete this['_transpare'+'ntOrder'][_0x5f1f60];_0x5f1f60>=0x1129+-0x11ca+0xa1;)this['layerList']['splice'](_0x5f1f60,-0x1ed6+-0xe9*0x1a+0x3681),this['subLayerLi'+'st']['splice'](_0x5f1f60,-0x146c+0xd02+0x76b),this['subLayerEn'+'abled']['splice'](_0x5f1f60,0x31*0x71+0xc54*0x1+-0x52*0x6a),_0x5f1f60=this['layerList']['indexOf'](_0x5bf341),this['_dirty']=!(-0x4*-0x59d+0x125c+0x8*-0x51a),this['fire']('remove',_0x5bf341);const _0x105c74=this['layerList']['length'];this['_updateOpa'+'queOrder'](0x12e9+0x5b6*-0x6+0xf5b,_0x105c74-(0x175c+-0x732+-0x1029*0x1)),this['_updateTra'+'nsparentOr'+'der'](-0x19a*0x7+-0x10d4+0x1c0a*0x1,_0x105c74-(-0x517*-0x4+0x63b*0x1+-0x1a96)),this['_updateLay'+'erMaps']();}['pushOpaque'](_0x16af08){this['_isSublaye'+'rAdded'](_0x16af08,!(0x1*0x254d+0x133*-0x1+0x1*-0x2419))||(this['layerList']['push'](_0x16af08),this['_opaqueOrd'+'er'][_0x16af08['id']]=this['subLayerLi'+'st']['push'](!(0x12c6+0x1*-0x1141+-0x184))-(0x87+-0x3*0x565+-0xd3*-0x13),this['subLayerEn'+'abled']['push'](!(0x148c+0x1e2f*0x1+-0x32bb)),this['_updateLay'+'erMaps'](),this['_dirty']=!(0x11*0x1a8+-0x5*-0x29+-0x7*0x423),this['fire']('add',_0x16af08));}['insertOpaq'+'ue'](_0x57998b,_0x4a03bb){if(this['_isSublaye'+'rAdded'](_0x57998b,!(0x1*0xf86+-0x18e7+0x962)))return;this['layerList']['splice'](_0x4a03bb,-0x28a*0x4+-0x13c5+-0x1*-0x1ded,_0x57998b),this['subLayerLi'+'st']['splice'](_0x4a03bb,0x1*-0xf6b+-0x23e9+0x3354,!(-0x406+0x167c+-0x1275));const _0x3ecc85=this['subLayerLi'+'st']['length'];this['_updateOpa'+'queOrder'](_0x4a03bb,_0x3ecc85-(-0x1*0x1bb4+0xc1f+-0x6*-0x299)),this['subLayerEn'+'abled']['splice'](_0x4a03bb,0x2bc+-0x14e7+-0x1*-0x122b,!(0xc40+0x41a+-0x105a)),this['_updateLay'+'erMaps'](),this['_dirty']=!(-0x245f*-0x1+0x2655+0x255a*-0x2),this['fire']('add',_0x57998b);}['removeOpaq'+'ue'](_0x1460bd){for(let _0x2020af=-0x52*-0x57+0x5da+0x14c*-0x1a,_0x32b2de=this['layerList']['length'];_0x2020af<_0x32b2de;_0x2020af++)if(this['layerList'][_0x2020af]===_0x1460bd&&!this['subLayerLi'+'st'][_0x2020af]){this['layerList']['splice'](_0x2020af,-0x957*-0x1+0x2509+-0x2e5f),this['subLayerLi'+'st']['splice'](_0x2020af,0x91*-0x2f+0xa72*0x1+-0x26*-0x6d),_0x32b2de--,this['_updateOpa'+'queOrder'](_0x2020af,_0x32b2de-(-0x1*0x763+0x8*-0x29c+0x1c44)),this['subLayerEn'+'abled']['splice'](_0x2020af,0x2598+-0x18a*-0x2+-0x28ab),this['_dirty']=!(-0x1*-0x2167+-0x3dd*0x1+0x1*-0x1d8a),this['layerList']['indexOf'](_0x1460bd)<0x1e44+0x1225+-0x3069&&this['fire']('remove',_0x1460bd);break;}this['_updateLay'+'erMaps']();}['pushTransp'+'arent'](_0x4fcb3c){this['_isSublaye'+'rAdded'](_0x4fcb3c,!(-0xe0+-0x19*-0x41+-0x579))||(this['layerList']['push'](_0x4fcb3c),this['_transpare'+'ntOrder'][_0x4fcb3c['id']]=this['subLayerLi'+'st']['push'](!(-0x12b9*0x1+-0x182*-0x1+0x1137))-(0x510+0x1cc0+-0xf*0x241),this['subLayerEn'+'abled']['push'](!(-0x1dd0+0x9a3+-0x142d*-0x1)),this['_updateLay'+'erMaps'](),this['_dirty']=!(-0x74+0x1d*0xc9+-0x1651),this['fire']('add',_0x4fcb3c));}['insertTran'+'sparent'](_0x4db84d,_0x24f315){if(this['_isSublaye'+'rAdded'](_0x4db84d,!(-0x25aa+-0x2*0x392+0x2cce)))return;this['layerList']['splice'](_0x24f315,-0x1e4+-0x435*-0x2+0x1*-0x686,_0x4db84d),this['subLayerLi'+'st']['splice'](_0x24f315,0x259+-0x61*0x67+0x24ae,!(-0x3*0xcb1+-0x1ac6+0x40d9));const _0x286766=this['subLayerLi'+'st']['length'];this['_updateTra'+'nsparentOr'+'der'](_0x24f315,_0x286766-(0x20c4+-0x1*-0x1be1+-0x1*0x3ca4)),this['subLayerEn'+'abled']['splice'](_0x24f315,0x3c7*-0x2+-0x171c+0x1eaa,!(0x1*-0x665+0x189b+-0x1236)),this['_updateLay'+'erMaps'](),this['_dirty']=!(-0x53*-0x29+0x10fd*0x1+-0x1e48),this['fire']('add',_0x4db84d);}['removeTran'+'sparent'](_0x41b88c){for(let _0x4fb055=0xdb6+-0x142*0xe+0x3e6,_0x5e719c=this['layerList']['length'];_0x4fb055<_0x5e719c;_0x4fb055++)if(this['layerList'][_0x4fb055]===_0x41b88c&&this['subLayerLi'+'st'][_0x4fb055]){this['layerList']['splice'](_0x4fb055,0x1b24+-0xa7b*0x1+-0x10a8),this['subLayerLi'+'st']['splice'](_0x4fb055,-0x607+0x47+0x5c1),_0x5e719c--,this['_updateTra'+'nsparentOr'+'der'](_0x4fb055,_0x5e719c-(0x1*-0xd4d+0x3*-0xa03+0x7*0x631)),this['subLayerEn'+'abled']['splice'](_0x4fb055,-0x1ba4+0x7a*0x1+0x6b*0x41),this['_dirty']=!(0x151d*0x1+0x220e+-0x372b),this['layerList']['indexOf'](_0x41b88c)<-0xa2c*-0x1+-0x1*-0x3bf+-0xdeb&&this['fire']('remove',_0x41b88c);break;}this['_updateLay'+'erMaps']();}['getOpaqueI'+'ndex'](_0x1ede47){return this['layerOpaqu'+'eIndexMap']['get'](_0x1ede47)??-(-0xe95+0x1*-0xd62+0x5*0x598);}['getTranspa'+'rentIndex'](_0x40af29){return this['layerTrans'+'parentInde'+'xMap']['get'](_0x40af29)??-(-0x3cd+0x19*-0x4e+0x11*0xac);}['isEnabled'](_0xe34879,_0x17c044){if(_0xe34879['enabled']){const _0x4914bf=_0x17c044?this['getTranspa'+'rentIndex'](_0xe34879):this['getOpaqueI'+'ndex'](_0xe34879);if(_0x4914bf>=-0x1*0x1975+0x1ab4+-0x1*0x13f)return this['subLayerEn'+'abled'][_0x4914bf];}return!(-0x1c33*-0x1+0x2223+-0x14c7*0x3);}['_updateLay'+'erMaps'](){this['layerIdMap']['clear'](),this['layerNameM'+'ap']['clear'](),this['layerOpaqu'+'eIndexMap']['clear'](),this['layerTrans'+'parentInde'+'xMap']['clear']();for(let _0x2bcb2f=-0xa3*0x19+-0x1b06+0x1*0x2af1;_0x2bcb2f<this['layerList']['length'];_0x2bcb2f++){const _0xf47080=this['layerList'][_0x2bcb2f];this['layerIdMap']['set'](_0xf47080['id'],_0xf47080),this['layerNameM'+'ap']['set'](_0xf47080['name'],_0xf47080),(this['subLayerLi'+'st'][_0x2bcb2f]?this['layerTrans'+'parentInde'+'xMap']:this['layerOpaqu'+'eIndexMap'])['set'](_0xf47080,_0x2bcb2f);}}['getLayerBy'+'Id'](_0x4451fc){return this['layerIdMap']['get'](_0x4451fc)??null;}['getLayerBy'+'Name'](_0x2f9555){return this['layerNameM'+'ap']['get'](_0x2f9555)??null;}['_updateOpa'+'queOrder'](_0x74ee86,_0x3cb512){for(let _0x57dc38=_0x74ee86;_0x57dc38<=_0x3cb512;_0x57dc38++)this['subLayerLi'+'st'][_0x57dc38]===!(-0x71d+-0x80+0x4e*0x19)&&(this['_opaqueOrd'+'er'][this['layerList'][_0x57dc38]['id']]=_0x57dc38);}['_updateTra'+'nsparentOr'+'der'](_0x484d9d,_0x333b4e){for(let _0x268c82=_0x484d9d;_0x268c82<=_0x333b4e;_0x268c82++)this['subLayerLi'+'st'][_0x268c82]===!(-0x1b6b*0x1+0x1*0x244f+-0x8e4)&&(this['_transpare'+'ntOrder'][this['layerList'][_0x268c82]['id']]=_0x268c82);}['_sortLayer'+'sDescendin'+'g'](_0x39c92e,_0x507d13,_0x4a8dcb){let _0x483b0b=-(-0x2519+0x7*-0x1b5+0x310d),_0x1944f7=-(-0xe5*-0x7+-0x7d3*-0x1+-0xe15);for(let _0x2dd9d1=-0x12*0xf4+0x1e65+0xd3d*-0x1,_0x4fb75c=_0x39c92e['length'];_0x2dd9d1<_0x4fb75c;_0x2dd9d1++){const _0x492aec=_0x39c92e[_0x2dd9d1];_0x4a8dcb['hasOwnProp'+'erty'](_0x492aec)&&(_0x483b0b=Math['max'](_0x483b0b,_0x4a8dcb[_0x492aec]));}for(let _0x166a09=0x1a1*-0x16+-0x5b8+-0x2*-0x14c7,_0x4f6fa6=_0x507d13['length'];_0x166a09<_0x4f6fa6;_0x166a09++){const _0x49861f=_0x507d13[_0x166a09];_0x4a8dcb['hasOwnProp'+'erty'](_0x49861f)&&(_0x1944f7=Math['max'](_0x1944f7,_0x4a8dcb[_0x49861f]));}return _0x483b0b===-(-0x836+-0x4a8+0xcdf)&&_0x1944f7!==-(-0x6fa+-0x1b8*-0xb+-0xbed)?0x19f3+0x1c30+-0x3622:_0x1944f7===-(-0xeb5+0x14fc+-0x646)&&_0x483b0b!==-(-0xb64+-0x48c+0xff1)?-(0x35*-0x61+0x1*-0xa93+-0x1ea9*-0x1):_0x1944f7-_0x483b0b;}['sortTransp'+'arentLayer'+'s'](_0x156416,_0x190b18){return this['_sortLayer'+'sDescendin'+'g'](_0x156416,_0x190b18,this['_transpare'+'ntOrder']);}['sortOpaque'+'Layers'](_0x154116,_0x1a750e){return this['_sortLayer'+'sDescendin'+'g'](_0x154116,_0x1a750e,this['_opaqueOrd'+'er']);}}const dc=new D(),wi={'bias':0x0,'normalBias':0x0},ho=new ie(),pf={'r':0x0,'g':0x1,'b':0x2,'a':0x3},fu={'directional':ve,'omni':Ke,'point':Ke,'spot':Ze},lA=[[new re(-0x4ae+0x1a5e+0x8*-0x2b6,-0x902+-0x216d+0x2a6f,0x3da*-0x9+0x1*-0x1994+0x1415*0x3,0xbf3+0x1225+-0x1e17*0x1)],[new re(-0x13bb+-0xc*0x3b+0x167f,-0xa1e+-0x2*-0x49+0x98c,0x1de8+0xb5f*-0x1+-0x1289+0.5,-0x33*-0x71+-0xf4e+-0x3*0x267+0.5),new re(0x1b3e+0x3a*0xe+-0x1e6a,-0x8ee+0x3*-0x2e7+0x11a3+0.5,0x66e*-0x1+0x14c0+-0xe52+0.5,0x211b+0xb3*0x16+-0x307d*0x1+0.5)],[new re(-0x13*-0x15a+-0x3*0x791+-0x2fb,0xf3+-0x21d8+-0x191*-0x15,0x985*0x1+-0x1f02+0x1*0x157d+0.5,0x2dd+-0xd1f+-0x1*-0xa42+0.5),new re(0xfde*-0x1+-0x1fc0+0x2f9e,-0x44*0x80+-0x8*-0x221+0x10f8+0.5,-0x216e+-0x2650*0x1+0x47be+0.5,-0x2406+-0xf92*0x1+0x68*0x7f+0.5),new re(0x1204+0x1e69+0x7*-0x6eb+0.5,-0x2*-0xe9b+0x183b*-0x1+-0x4fb,-0x67+0x11b+0x6*-0x1e+0.5,-0x26a+-0x4*-0x1c9+-0x4ba+0.5)],[new re(0x9*-0x1e9+-0x1*-0xf98+0x199,-0x99c+0x7*-0x3a9+0x1d*0x137,0xf67*-0x1+-0x206d*0x1+0x2fd4+0.5,-0xff6+0x16cc+-0x6d6+0.5),new re(-0x1057*-0x1+-0x2*0x106+-0xe4b,0x23*-0xa+-0x16c4+0x2*0xc11+0.5,0x5d0+-0x9*-0x233+0x11d*-0x17+0.5,-0x82*0x2b+-0x1c78+0x324e+0.5),new re(-0x74b+-0x9fe+0x1149+0.5,0x462+-0x11*-0x10d+-0x163f,-0x11b6+0x4*-0x9ad+0x386a+0.5,0x1*-0x1a4d+0x9*0x359+-0xc4*0x5+0.5),new re(-0x466*0x6+0x1154*-0x1+0x2bb8+0.5,0x16*-0x190+0x521+0x1*0x1d3f+0.5,-0x63+0xd4c+-0xce9+0.5,0x17*-0x11+0x22e0+-0x2159*0x1+0.5)]],cA={'rrr':0x1,'ggg':0x2,'bbb':0x4,'aaa':0x8,'rgb':0x7};let hA=-0x22a3*-0x1+-0xe22+-0x1*0x1481;class dA{constructor(_0x3b174c,_0x45ba70,_0x364cf8){this['light']=_0x364cf8,this['camera']=_0x3b174c,this['shadowCame'+'ra']=Cv['createShad'+'owCamera'](_0x364cf8['_shadowTyp'+'e'],_0x364cf8['_type'],_0x45ba70),this['shadowMatr'+'ix']=new te(),this['shadowView'+'port']=new re(0x2581+0x1996+0x3f17*-0x1,0x538*0x6+0xaf7+-0x1*0x2a47,0x1*0x1971+-0x81e+-0x1152,-0xd28+-0x23fa+-0x257*-0x15),this['shadowScis'+'sor']=new re(0x1596+-0x3*-0xabf+0x1*-0x35d3,-0x8f9*0x3+-0x3*-0x8ad+0xe4,-0x1871+-0x1b84+0x1*0x33f6,-0x311+0x238e+-0x63*0x54),this['projection'+'Compensati'+'on']=0xbf*-0x1+-0x1ee2+0x1fa1,this['face']=_0x45ba70,this['visibleCas'+'ters']=[],this['viewBindGr'+'oups']=[];}['destroy'](){this['viewBindGr'+'oups']['forEach'](_0x513ea2=>{_0x513ea2['defaultUni'+'formBuffer']['destroy'](),_0x513ea2['destroy']();}),this['viewBindGr'+'oups']['length']=0xc5+-0x1f1b*0x1+0x1e56;}get['shadowBuff'+'er'](){const _0x31b6f8=this['shadowCame'+'ra']['renderTarg'+'et'];return _0x31b6f8?this['light']['_isPcf']?_0x31b6f8['depthBuffe'+'r']:_0x31b6f8['colorBuffe'+'r']:null;}}class pl{constructor(_0x4f5c19,_0x112838){h(this,'layers',new Set()),h(this,'clusteredL'+'ighting'),h(this,'shadowDept'+'hState',Yt['DEFAULT']['clone']()),h(this,'clusteredF'+'lags',-0x1e1*-0x7+-0x167a+0x953),h(this,'clusteredD'+'ata',new Uint32Array(0x1456+-0x2*-0x81a+-0x3*0xc2d)),h(this,'clusteredD'+'ata16',new Uint16Array(this['clusteredD'+'ata']['buffer'])),h(this,'_evtDevice'+'Restored',null),(this['device']=_0x4f5c19,this['clusteredL'+'ighting']=_0x112838,this['id']=hA++,this['_evtDevice'+'Restored']=_0x4f5c19['on']('devicerest'+'ored',this['onDeviceRe'+'stored'],this),this['_type']=ve,this['_color']=new ie(0x1644+0x2596+-0x3bda+0.8,-0x1dfd+-0x6af+0x24ac+0.8,0x1b0b+0x4*0x6b6+0x35e3*-0x1+0.8),this['_intensity']=0xc1e+-0x926+-0xfd*0x3,this['_affectSpe'+'cularity']=!(0x1*0x1e49+-0x270d+0x8c4),this['_luminance']=0x797*0x1+-0x23a5+0x9*0x31e,this['_castShado'+'ws']=!(0x403+0x1cf0+-0x20f2),this['_enabled']=!(-0x292+0x1e*-0x89+0x12a1),this['_mask']=Ss,this['isStatic']=!(-0x1*0x7e5+0x1139+0x155*-0x7),this['key']=0x1212*0x1+0xf42+-0xb1c*0x3,this['bakeDir']=!(-0x1eff+-0x4f4+0x23f3),this['bakeNumSam'+'ples']=0x125f+-0x41+-0x121d,this['bakeArea']=-0x1*-0x23e5+-0x5*-0xc1+-0x13d5*0x2,this['attenuatio'+'nStart']=0x2173*0x1+0x1*0x1b0e+-0x17*0x2a1,this['attenuatio'+'nEnd']=-0x1123+-0x1e51+0x2f7e,this['_falloffMo'+'de']=Qp,this['_shadowTyp'+'e']=$s,this['_vsmBlurSi'+'ze']=-0x1fc4+-0xb32+-0x65*-0x6d,this['vsmBlurMod'+'e']=em,this['vsmBias']=(0x5*-0x147+0x136*-0x1f+-0x361*-0xd+0.01)*(0xa44+-0x12*-0x4b+-0xd*0x132+0.25),this['_cookie']=null,this['cookieInte'+'nsity']=-0x1b0+-0x159b+0x174c,this['_cookieFal'+'loff']=!(-0xeb*0x2+0x7e*0x3e+0x1*-0x1cae),this['_cookieCha'+'nnel']='rgb',this['_cookieTra'+'nsform']=null,this['_cookieTra'+'nsformUnif'+'orm']=new Float32Array(-0x2*-0xcd8+0x3*0xc15+-0x3deb),this['_cookieOff'+'set']=null,this['_cookieOff'+'setUniform']=new Float32Array(-0x21bb+0x163a*-0x1+0x37f7*0x1),this['_cookieTra'+'nsformSet']=!(0x2*-0x185+-0x25c5+0x51a*0x8),this['_cookieOff'+'setSet']=!(-0x79+0xb9c+-0xb22),this['_innerCone'+'Angle']=0xc*-0x135+-0xd*-0x155+-0x2ad,this['_outerCone'+'Angle']=-0xb3e*0x3+0x1b7*-0x6+0x2c31,this['cascades']=null,this['_shadowMat'+'rixPalette']=null,this['_shadowCas'+'cadeDistan'+'ces']=null,this['numCascade'+'s']=-0x1802+-0x68*0x1e+0x2433,this['_cascadeBl'+'end']=0x23c9*-0x1+-0x1f28+0x42f1*0x1,this['cascadeDis'+'tribution']=-0x2020+-0xe*0x70+-0x90*-0x44+0.5,this['_shape']=Ys,this['_colorLine'+'ar']=new Float32Array(0xb1a+0x201e+-0x2b35),this['_updateLin'+'earColor'](),this['_position']=new D(0x1*-0xcef+-0x7a*-0x2b+-0x78f,0xcfe+-0x426*-0x3+0x1*-0x1970,0x138a+-0xda*0x17+0xc),this['_direction']=new D(-0x1*-0xeea+0x4*0x194+-0x153a,0x2b3*0x4+0x84f*0x1+-0x131b,0x11d+-0x1*-0xe0a+-0xf27),this['_innerCone'+'AngleCos']=Math['cos'](this['_innerCone'+'Angle']*Math['PI']/(-0x270d+-0x1*-0xb73+-0x1c4e*-0x1)),this['_updateOut'+'erAngle'](this['_outerCone'+'Angle']),this['_usePhysic'+'alUnits']=void(0x4a2+-0xae7+0x645),this['_shadowMap']=null,this['_shadowRen'+'derParams']=[],this['_shadowCam'+'eraParams']=[],this['shadowDist'+'ance']=-0x1c24+-0x15ec+-0x647*-0x8,this['_shadowRes'+'olution']=0x918+-0xd7*-0x5+0x3d*-0x27,this['_shadowBia'+'s']=-(-0x15*0x1a0+-0x1871*0x1+0x205*0x1d+0.0005),this['_shadowInt'+'ensity']=0xb79+0x45*0x17+-0x11ab,this['_normalOff'+'setBias']=0x1f57+0xdcc+-0x907*0x5,this['shadowUpda'+'teMode']=lm,this['shadowUpda'+'teOverride'+'s']=null,this['_isVsm']=!(0x2*-0x2c2+-0x4d7+0xa5c),this['_isPcf']=!(-0x16dc+0x1e6d+-0x791),this['_softShado'+'wParams']=new Float32Array(-0x1*0xfc1+0x2556+0x1*-0x1591),this['shadowSamp'+'les']=0xca9+-0x1683+0x9ea,this['shadowBloc'+'kerSamples']=0x1ca3+0x1401+0x2*-0x184a,this['penumbraSi'+'ze']=0x9*0x10c+-0x2593*-0x1+0x1*-0x2efe,this['penumbraFa'+'lloff']=0x7a6+0x13d5+-0x1b7a,this['_cookieMat'+'rix']=null,this['_atlasView'+'port']=null,this['atlasViewp'+'ortAllocat'+'ed']=!(-0xd72+0x10f*-0x11+-0x142*-0x19),this['atlasVersi'+'on']=0x189d*0x1+-0xf04+-0x3*0x333,this['atlasSlotI'+'ndex']=-0x7*0xec+0x154d+-0xed9,this['atlasSlotU'+'pdated']=!(0x1bb*0xd+-0x28d*0xc+0x81e),this['_node']=null,this['_renderDat'+'a']=[],this['visibleThi'+'sFrame']=!(-0x22d4+0x1c4b+-0x12*-0x5d),this['maxScreenS'+'ize']=-0x1ae4+0x206c+-0xc*0x76,this['_updateSha'+'dowBias']());}['destroy'](){var _0x570c85;(_0x570c85=this['_evtDevice'+'Restored'])==null||_0x570c85['off'](),this['_evtDevice'+'Restored']=null,this['_destroySh'+'adowMap'](),this['releaseRen'+'derData'](),this['_renderDat'+'a']=null;}['onDeviceRe'+'stored'](){this['shadowUpda'+'teMode']===Ps&&(this['shadowUpda'+'teMode']=xr);}['releaseRen'+'derData'](){if(this['_renderDat'+'a']){for(let _0x3cba72=-0x32d*-0x1+-0x123*-0x6+-0x9ff;_0x3cba72<this['_renderDat'+'a']['length'];_0x3cba72++)this['_renderDat'+'a'][_0x3cba72]['destroy']();this['_renderDat'+'a']['length']=-0x1*0x2de+-0x1436+0x1714;}}['addLayer'](_0xe4551a){this['layers']['add'](_0xe4551a);}['removeLaye'+'r'](_0x397e85){this['layers']['delete'](_0x397e85);}set['shadowSamp'+'les'](_0x190905){this['_softShado'+'wParams'][0x20e5+0x186f+-0x1*0x3954]=_0x190905;}get['shadowSamp'+'les'](){return this['_softShado'+'wParams'][0x23ea+0x1b+-0x2405];}set['shadowBloc'+'kerSamples'](_0x7154bd){this['_softShado'+'wParams'][0x3c1+0x1afc+-0x7af*0x4]=_0x7154bd;}get['shadowBloc'+'kerSamples'](){return this['_softShado'+'wParams'][-0x1875+0x1d6a+-0x27a*0x2];}set['shadowBias'](_0x4175b6){this['_shadowBia'+'s']!==_0x4175b6&&(this['_shadowBia'+'s']=_0x4175b6,this['_updateSha'+'dowBias']());}get['shadowBias'](){return this['_shadowBia'+'s'];}set['numCascade'+'s'](_0x228b41){(!this['cascades']||this['numCascade'+'s']!==_0x228b41)&&(this['cascades']=lA[_0x228b41-(0x1d*-0xcd+0xdd0+0x4b5*0x2)],this['_shadowMat'+'rixPalette']=new Float32Array(-0x9*0x317+0x195c+0x2b3),this['_shadowCas'+'cadeDistan'+'ces']=new Float32Array(-0x385+0x1a67+-0x1*0x16de),this['_destroySh'+'adowMap'](),this['updateKey']());}get['numCascade'+'s'](){return this['cascades']['length'];}set['cascadeBle'+'nd'](_0x17f0cd){this['_cascadeBl'+'end']!==_0x17f0cd&&(this['_cascadeBl'+'end']=_0x17f0cd,this['updateKey']());}get['cascadeBle'+'nd'](){return this['_cascadeBl'+'end'];}set['shadowMap'](_0xe727d7){this['_shadowMap']!==_0xe727d7&&(this['_destroySh'+'adowMap'](),this['_shadowMap']=_0xe727d7);}get['shadowMap'](){return this['_shadowMap'];}set['mask'](_0x5142b7){this['_mask']!==_0x5142b7&&(this['_mask']=_0x5142b7,this['updateKey'](),this['updateClus'+'teredFlags']());}get['mask'](){return this['_mask'];}get['numShadowF'+'aces'](){const _0x40c7ac=this['_type'];return _0x40c7ac===ve?this['numCascade'+'s']:_0x40c7ac===Ke?-0xf9c+0x1*0x165a+-0x6b8:0x1838+-0x1c31+0x2*0x1fd;}set['type'](_0x13e848){if(this['_type']===_0x13e848)return;this['_type']=_0x13e848,this['_destroySh'+'adowMap'](),this['_updateSha'+'dowBias'](),this['updateKey'](),this['updateClus'+'teredFlags']();const _0x19d098=this['_shadowTyp'+'e'];this['_shadowTyp'+'e']=null,this['shadowUpda'+'teOverride'+'s']=null,this['shadowType']=_0x19d098;}get['type'](){return this['_type'];}set['shape'](_0x225d1f){if(this['_shape']===_0x225d1f)return;this['_shape']=_0x225d1f,this['_destroySh'+'adowMap'](),this['updateKey'](),this['updateClus'+'teredFlags']();const _0x556d65=this['_shadowTyp'+'e'];this['_shadowTyp'+'e']=null,this['shadowType']=_0x556d65;}get['shape'](){return this['_shape'];}set['usePhysica'+'lUnits'](_0x31271c){this['_usePhysic'+'alUnits']!==_0x31271c&&(this['_usePhysic'+'alUnits']=_0x31271c,this['_updateLin'+'earColor']());}get['usePhysica'+'lUnits'](){return this['_usePhysic'+'alUnits'];}set['shadowType'](_0x5e7ebd){if(this['_shadowTyp'+'e']===_0x5e7ebd)return;let _0x5f1292=qi['get'](_0x5e7ebd);_0x5f1292||(_0x5e7ebd=$s);const _0x509f4f=this['device'];_0x5e7ebd===al&&!_0x509f4f['textureFlo'+'atRenderab'+'le']&&!_0x509f4f['textureHal'+'fFloatRend'+'erable']&&(_0x5e7ebd=$s),this['_type']===Ke&&_0x5e7ebd!==tv&&_0x5e7ebd!==$s&&_0x5e7ebd!==sv&&_0x5e7ebd!==iv&&_0x5e7ebd!==al&&(_0x5e7ebd=$s),_0x5e7ebd===Jp&&(!_0x509f4f['textureFlo'+'atRenderab'+'le']||!_0x509f4f['textureFlo'+'atFilterab'+'le'])&&(_0x5e7ebd=au),_0x5e7ebd===au&&!_0x509f4f['textureHal'+'fFloatRend'+'erable']&&(_0x5e7ebd=$s),_0x5f1292=qi['get'](_0x5e7ebd),this['_isVsm']=(_0x5f1292==null?void(-0x3*0x5fb+-0x32f*-0x6+-0x129):_0x5f1292['vsm'])??!(0xd*0x199+0x6*0x4ff+-0x32be),this['_isPcf']=(_0x5f1292==null?void(0x1*-0x574+0x1*-0x1b3+0x727):_0x5f1292['pcf'])??!(-0x3d3*0x1+-0x1*-0x15bf+-0x11eb),this['_shadowTyp'+'e']=_0x5e7ebd,this['_destroySh'+'adowMap'](),this['updateKey']();}get['shadowType'](){return this['_shadowTyp'+'e'];}set['enabled'](_0x3e28d0){this['_enabled']!==_0x3e28d0&&(this['_enabled']=_0x3e28d0,this['layersDirt'+'y']());}get['enabled'](){return this['_enabled'];}set['castShadow'+'s'](_0x3760fd){this['_castShado'+'ws']!==_0x3760fd&&(this['_castShado'+'ws']=_0x3760fd,this['_destroySh'+'adowMap'](),this['layersDirt'+'y'](),this['updateKey']());}get['castShadow'+'s'](){return this['_castShado'+'ws']&&this['_mask']!==fi&&this['_mask']!==-0x6d*-0x2a+-0xd57*-0x2+-0x2c90;}set['shadowInte'+'nsity'](_0x1ece8c){this['_shadowInt'+'ensity']!==_0x1ece8c&&(this['_shadowInt'+'ensity']=_0x1ece8c,this['updateKey']());}get['shadowInte'+'nsity'](){return this['_shadowInt'+'ensity'];}get['bakeShadow'+'s'](){return this['_castShado'+'ws']&&this['_mask']===fi;}set['shadowReso'+'lution'](_0x5ea3d1){this['_shadowRes'+'olution']!==_0x5ea3d1&&(this['_type']===Ke?_0x5ea3d1=Math['min'](_0x5ea3d1,this['device']['maxCubeMap'+'Size']):_0x5ea3d1=Math['min'](_0x5ea3d1,this['device']['maxTexture'+'Size']),this['_shadowRes'+'olution']=_0x5ea3d1,this['_destroySh'+'adowMap']());}get['shadowReso'+'lution'](){return this['_shadowRes'+'olution'];}set['vsmBlurSiz'+'e'](_0x7086aa){this['_vsmBlurSi'+'ze']!==_0x7086aa&&(_0x7086aa%(-0x1f4d+0x218f*0x1+0x48*-0x8)===0x1*-0x1445+0xa75*-0x3+-0x295*-0x14&&_0x7086aa++,this['_vsmBlurSi'+'ze']=_0x7086aa);}get['vsmBlurSiz'+'e'](){return this['_vsmBlurSi'+'ze'];}set['normalOffs'+'etBias'](_0x1e9757){if(this['_normalOff'+'setBias']!==_0x1e9757){const _0x1de409=!this['_normalOff'+'setBias']&&_0x1e9757||this['_normalOff'+'setBias']&&!_0x1e9757;this['_normalOff'+'setBias']=_0x1e9757,_0x1de409&&this['updateKey']();}}get['normalOffs'+'etBias'](){return this['_normalOff'+'setBias'];}set['falloffMod'+'e'](_0xe3f1ab){this['_falloffMo'+'de']!==_0xe3f1ab&&(this['_falloffMo'+'de']=_0xe3f1ab,this['updateKey'](),this['updateClus'+'teredFlags']());}get['falloffMod'+'e'](){return this['_falloffMo'+'de'];}set['innerConeA'+'ngle'](_0x3d40bd){this['_innerCone'+'Angle']!==_0x3d40bd&&(this['_innerCone'+'Angle']=_0x3d40bd,this['_innerCone'+'AngleCos']=Math['cos'](_0x3d40bd*Math['PI']/(0x6*-0x265+-0x2032+-0xf2*-0x32)),this['updateClus'+'terData'](!(0x79f*0x1+0xbbb+-0x17d*0xd),!(-0x1c4*0x2+-0x2*0x426+0x5ea*0x2)),this['_usePhysic'+'alUnits']&&this['_updateLin'+'earColor']());}get['innerConeA'+'ngle'](){return this['_innerCone'+'Angle'];}set['outerConeA'+'ngle'](_0x28850e){this['_outerCone'+'Angle']!==_0x28850e&&(this['_outerCone'+'Angle']=_0x28850e,this['_updateOut'+'erAngle'](_0x28850e),this['_usePhysic'+'alUnits']&&this['_updateLin'+'earColor']());}get['outerConeA'+'ngle'](){return this['_outerCone'+'Angle'];}set['penumbraSi'+'ze'](_0x554433){this['_penumbraS'+'ize']=_0x554433,this['_softShado'+'wParams'][0x5fc+0x115b+-0x7c7*0x3]=_0x554433;}get['penumbraSi'+'ze'](){return this['_penumbraS'+'ize'];}set['penumbraFa'+'lloff'](_0x2ae08e){this['_softShado'+'wParams'][-0x1a6a+-0x10b7+0x2b24]=_0x2ae08e;}get['penumbraFa'+'lloff'](){return this['_softShado'+'wParams'][0x1641+0x1fc8+-0xace*0x5];}['_updateOut'+'erAngle'](_0x2cab07){const _0x262c95=_0x2cab07*Math['PI']/(0x18f1*0x1+0xafe*0x1+0x1d*-0x137);this['_outerCone'+'AngleCos']=Math['cos'](_0x262c95),this['_outerCone'+'AngleSin']=Math['sin'](_0x262c95),this['updateClus'+'terData'](!(0x589*-0x3+-0x1*0x25bd+0x3659),!(-0x20df+0x5f5+-0x562*-0x5));}set['intensity'](_0x13f20f){this['_intensity']!==_0x13f20f&&(this['_intensity']=_0x13f20f,this['_updateLin'+'earColor']());}get['intensity'](){return this['_intensity'];}set['affectSpec'+'ularity'](_0x285d55){this['_type']===ve&&(this['_affectSpe'+'cularity']=_0x285d55,this['updateKey']());}get['affectSpec'+'ularity'](){return this['_affectSpe'+'cularity'];}set['luminance'](_0x834553){this['_luminance']!==_0x834553&&(this['_luminance']=_0x834553,this['_updateLin'+'earColor']());}get['luminance'](){return this['_luminance'];}get['cookieMatr'+'ix'](){return this['_cookieMat'+'rix']||(this['_cookieMat'+'rix']=new te()),this['_cookieMat'+'rix'];}get['atlasViewp'+'ort'](){return this['_atlasView'+'port']||(this['_atlasView'+'port']=new re(0xefa*0x1+0x7*-0x1b4+-0x30e,-0x1dc5+-0xd*0x301+0x2e*0x17f,-0xfe2+-0x565*-0x1+0xa7e,0x11a6+-0x4cc*-0x1+-0x47d*0x5)),this['_atlasView'+'port'];}set['cookie'](_0x287ea9){this['_cookie']!==_0x287ea9&&(this['_cookie']=_0x287ea9,this['updateKey']());}get['cookie'](){return this['_cookie'];}set['cookieFall'+'off'](_0xe7ef31){this['_cookieFal'+'loff']!==_0xe7ef31&&(this['_cookieFal'+'loff']=_0xe7ef31,this['updateKey']());}get['cookieFall'+'off'](){return this['_cookieFal'+'loff'];}set['cookieChan'+'nel'](_0x24d7a3){if(this['_cookieCha'+'nnel']!==_0x24d7a3){if(_0x24d7a3['length']<0x14ea+0x3*0x44b+-0x2e*0xbc){const _0x457e10=_0x24d7a3['charAt'](_0x24d7a3['length']-(-0x1aa2+0x7*-0x33a+-0x1*-0x3139)),_0x5f5704=-0x5fe+-0x1fae+0x36d*0xb-_0x24d7a3['length'];for(let _0x4f9274=-0x54*-0x25+0x1*-0x23ad+0xf1*0x19;_0x4f9274<_0x5f5704;_0x4f9274++)_0x24d7a3+=_0x457e10;}this['_cookieCha'+'nnel']=_0x24d7a3,this['updateKey'](),this['updateClus'+'teredFlags']();}}get['cookieChan'+'nel'](){return this['_cookieCha'+'nnel'];}set['cookieTran'+'sform'](_0x374816){this['_cookieTra'+'nsform']!==_0x374816&&(this['_cookieTra'+'nsform']=_0x374816,this['_cookieTra'+'nsformSet']=!!_0x374816,_0x374816&&!this['_cookieOff'+'set']&&(this['cookieOffs'+'et']=new J(),this['_cookieOff'+'setSet']=!(0xd31+-0x885+0x4ab*-0x1)),this['updateKey']());}get['cookieTran'+'sform'](){return this['_cookieTra'+'nsform'];}set['cookieOffs'+'et'](_0x4834ab){if(this['_cookieOff'+'set']===_0x4834ab)return;!!(this['_cookieTra'+'nsformSet']||_0x4834ab)&&!_0x4834ab&&this['_cookieOff'+'set']?this['_cookieOff'+'set']['set'](-0x8*0x95+-0x1*0x9d+0x545,0x3*0x833+0x1*0x24d9+-0x3d72):this['_cookieOff'+'set']=_0x4834ab,this['_cookieOff'+'setSet']=!!_0x4834ab,_0x4834ab&&!this['_cookieTra'+'nsform']&&(this['cookieTran'+'sform']=new re(0x793*-0x2+0x1c70+-0xd49,0x1cd5+-0x521+0x17b3*-0x1,-0xe*-0x21d+0x177+0x1*-0x1f0d,0x1184+-0xf58+0x1*-0x22c),this['_cookieTra'+'nsformSet']=!(0x6*0x16+-0x1*0xf20+0xe9d)),this['updateKey']();}get['cookieOffs'+'et'](){return this['_cookieOff'+'set'];}['beginFrame'](){this['visibleThi'+'sFrame']=this['_type']===ve&&this['_enabled'],this['maxScreenS'+'ize']=-0x61*-0x55+-0x28f*0x1+-0x1da6,this['atlasViewp'+'ortAllocat'+'ed']=!(0x402+-0x2f1+-0x110),this['atlasSlotU'+'pdated']=!(-0x1*0x46f+0x4*-0x466+0x1608);}['_destroySh'+'adowMap'](){if(this['releaseRen'+'derData'](),this['_shadowMap']&&(this['_shadowMap']['cached']||this['_shadowMap']['destroy'](),this['_shadowMap']=null),this['shadowUpda'+'teMode']===Ps&&(this['shadowUpda'+'teMode']=xr),this['shadowUpda'+'teOverride'+'s']){for(let _0x3ac5ba=-0xa*-0x1df+-0x1309+0x53;_0x3ac5ba<this['shadowUpda'+'teOverride'+'s']['length'];_0x3ac5ba++)this['shadowUpda'+'teOverride'+'s'][_0x3ac5ba]===Ps&&(this['shadowUpda'+'teOverride'+'s'][_0x3ac5ba]=xr);}}['getRenderD'+'ata'](_0x554c2e,_0x33fcbc){for(let _0x1fa24b=0x110a*0x2+-0x9d*-0x13+-0x2dbb;_0x1fa24b<this['_renderDat'+'a']['length'];_0x1fa24b++){const _0x5c9227=this['_renderDat'+'a'][_0x1fa24b];if(_0x5c9227['camera']===_0x554c2e&&_0x5c9227['face']===_0x33fcbc)return _0x5c9227;}const _0x4e5f15=new dA(_0x554c2e,_0x33fcbc,this);return this['_renderDat'+'a']['push'](_0x4e5f15),_0x4e5f15;}['clone'](){const _0x1294e4=new pl(this['device'],this['clusteredL'+'ighting']);return _0x1294e4['type']=this['_type'],_0x1294e4['setColor'](this['_color']),_0x1294e4['intensity']=this['_intensity'],_0x1294e4['affectSpec'+'ularity']=this['_affectSpe'+'cularity'],_0x1294e4['luminance']=this['_luminance'],_0x1294e4['castShadow'+'s']=this['castShadow'+'s'],_0x1294e4['_enabled']=this['_enabled'],_0x1294e4['attenuatio'+'nStart']=this['attenuatio'+'nStart'],_0x1294e4['attenuatio'+'nEnd']=this['attenuatio'+'nEnd'],_0x1294e4['falloffMod'+'e']=this['_falloffMo'+'de'],_0x1294e4['shadowType']=this['_shadowTyp'+'e'],_0x1294e4['vsmBlurSiz'+'e']=this['_vsmBlurSi'+'ze'],_0x1294e4['vsmBlurMod'+'e']=this['vsmBlurMod'+'e'],_0x1294e4['vsmBias']=this['vsmBias'],_0x1294e4['shadowUpda'+'teMode']=this['shadowUpda'+'teMode'],_0x1294e4['mask']=this['mask'],this['shadowUpda'+'teOverride'+'s']&&(_0x1294e4['shadowUpda'+'teOverride'+'s']=this['shadowUpda'+'teOverride'+'s']['slice']()),_0x1294e4['innerConeA'+'ngle']=this['_innerCone'+'Angle'],_0x1294e4['outerConeA'+'ngle']=this['_outerCone'+'Angle'],_0x1294e4['numCascade'+'s']=this['numCascade'+'s'],_0x1294e4['cascadeDis'+'tribution']=this['cascadeDis'+'tribution'],_0x1294e4['cascadeBle'+'nd']=this['_cascadeBl'+'end'],_0x1294e4['shape']=this['_shape'],_0x1294e4['shadowDept'+'hState']['copy'](this['shadowDept'+'hState']),_0x1294e4['shadowBias']=this['shadowBias'],_0x1294e4['normalOffs'+'etBias']=this['_normalOff'+'setBias'],_0x1294e4['shadowReso'+'lution']=this['_shadowRes'+'olution'],_0x1294e4['shadowDist'+'ance']=this['shadowDist'+'ance'],_0x1294e4['shadowInte'+'nsity']=this['shadowInte'+'nsity'],_0x1294e4['shadowSamp'+'les']=this['shadowSamp'+'les'],_0x1294e4['shadowBloc'+'kerSamples']=this['shadowBloc'+'kerSamples'],_0x1294e4['penumbraSi'+'ze']=this['penumbraSi'+'ze'],_0x1294e4['penumbraFa'+'lloff']=this['penumbraFa'+'lloff'],_0x1294e4;}static['getLightUn'+'itConversi'+'on'](_0x3c3328,_0x446ec=Math['PI']/(0x3*-0xc5f+-0x24ae+0x49cf),_0x24de3a=-0x10b1*-0x2+-0x833+-0x192f){switch(_0x3c3328){case Ze:{const _0x81c564=Math['cos'](_0x446ec),_0x12b4f6=Math['cos'](_0x24de3a);return(-0x1*-0xa7e+0x14e1+0x103*-0x1f)*Math['PI']*(0x7b*0x1d+-0x3d3+-0xa1b-_0x12b4f6+(_0x12b4f6-_0x81c564)/(0xa45*0x1+-0x1*0x57b+-0x4c8));}case Ke:return(0x1a52+-0x11f0+-0x85e)*Math['PI'];case ve:return-0x182d+-0x1*-0x148d+0x3a1;}}['_getUnifor'+'mBiasValue'+'s'](_0x2debdf){const _0x32216d=_0x2debdf['shadowCame'+'ra']['_farClip'];switch(this['_type']){case Ke:wi['bias']=this['shadowBias'],wi['normalBias']=this['_normalOff'+'setBias'];break;case Ze:this['_isVsm']?wi['bias']=-(0x1206+0x20*0x72+-0x51*0x66+0.00001)*(-0x18fd+0x20cb+-0x56*0x17):wi['bias']=this['shadowBias']*(-0x135d*0x1+0x1*-0x1747+-0x8*-0x557),wi['normalBias']=this['_isVsm']?this['vsmBias']/(this['attenuatio'+'nEnd']/(-0x493*0x5+0x21b3+-0x23*0x4f)):this['_normalOff'+'setBias'];break;case ve:this['_isVsm']?wi['bias']=-(0x12b2+-0x1f*-0x2f+-0x1863+0.00001)*(-0x1d55+-0x1a38+0x3*0x128b):wi['bias']=this['shadowBias']/_0x32216d*(0x2*-0xff6+0xc5b+0x13f5),wi['normalBias']=this['_isVsm']?this['vsmBias']/(_0x32216d/(-0x8e*-0x33+-0x6*-0x527+-0x3b2d)):this['_normalOff'+'setBias'];break;}return wi;}['getColor'](){return this['_color'];}['getBoundin'+'gSphere'](_0x42c3ad){if(this['_type']===Ze){const _0x389c68=this['attenuatio'+'nEnd'],_0xd2f45b=this['_outerCone'+'Angle'],_0x2ca970=this['_outerCone'+'AngleCos'],_0x5c71a6=this['_node'];dc['copy'](_0x5c71a6['up']),_0xd2f45b>-0x29*0x83+0xca1+0x887?(_0x42c3ad['radius']=_0x389c68*this['_outerCone'+'AngleSin'],dc['mulScalar'](-_0x389c68*_0x2ca970)):(_0x42c3ad['radius']=_0x389c68/((-0x1*0xc62+0xa71+-0x1f3*-0x1)*_0x2ca970),dc['mulScalar'](-_0x42c3ad['radius'])),_0x42c3ad['center']['add2'](_0x5c71a6['getPositio'+'n'](),dc);}else this['_type']===Ke&&(_0x42c3ad['center']=this['_node']['getPositio'+'n'](),_0x42c3ad['radius']=this['attenuatio'+'nEnd']);}['getBoundin'+'gBox'](_0xc30941){if(this['_type']===Ze){const _0x1dbf63=this['attenuatio'+'nEnd'],_0x270856=this['_outerCone'+'Angle'],_0x3509ef=this['_node'],_0x4bd8df=Math['abs'](Math['sin'](_0x270856*Y['DEG_TO_RAD'])*_0x1dbf63);_0xc30941['center']['set'](0x1*-0x35b+-0x131d*0x2+0x851*0x5,-_0x1dbf63*(-0x16c+0x127c+-0x150*0xd+0.5),-0xce9+0x9c2+0x327),_0xc30941['halfExtent'+'s']['set'](_0x4bd8df,_0x1dbf63*(-0x1*-0x26fb+-0x17de+0x1*-0xf1d+0.5),_0x4bd8df),_0xc30941['setFromTra'+'nsformedAa'+'bb'](_0xc30941,_0x3509ef['getWorldTr'+'ansform'](),!(0x878+-0x2*-0xb15+0xf51*-0x2));}else this['_type']===Ke&&(_0xc30941['center']['copy'](this['_node']['getPositio'+'n']()),_0xc30941['halfExtent'+'s']['set'](this['attenuatio'+'nEnd'],this['attenuatio'+'nEnd'],this['attenuatio'+'nEnd']));}['_updateSha'+'dowBias'](){if(this['_type']===Ke&&!this['clusteredL'+'ighting'])this['shadowDept'+'hState']['depthBias']=-0x93a+0x1195*0x1+-0x85b,this['shadowDept'+'hState']['depthBiasS'+'lope']=-0xf9b+0x16f1+0x2*-0x3ab;else{const _0x1353c5=this['shadowBias']*-(0x1b3b*0x1+-0x14f+-0x1604);this['shadowDept'+'hState']['depthBias']=_0x1353c5,this['shadowDept'+'hState']['depthBiasS'+'lope']=_0x1353c5;}}['_updateLin'+'earColor'](){let _0x1ef4eb=this['_intensity'];this['_usePhysic'+'alUnits']&&(_0x1ef4eb=this['_luminance']/pl['getLightUn'+'itConversi'+'on'](this['_type'],this['_outerCone'+'Angle']*Y['DEG_TO_RAD'],this['_innerCone'+'Angle']*Y['DEG_TO_RAD']));const _0x17245e=this['_color'],_0x3eba01=this['_colorLine'+'ar'];_0x1ef4eb>=0xc*0x1e7+-0x2*0x64c+0x1b*-0x61?ho['linear'](_0x17245e)['mulScalar'](_0x1ef4eb):ho['copy'](_0x17245e)['mulScalar'](_0x1ef4eb)['linear'](),_0x3eba01[0x127*0x1+0x20*-0xf+-0x25*-0x5]=ho['r'],_0x3eba01[-0x25*0x57+0xfcb+-0x337]=ho['g'],_0x3eba01[0x320+0x8*0xc9+0x4b3*-0x2]=ho['b'],this['updateClus'+'terData'](!(-0x389*0x1+-0x4e*0x71+0x25f7*0x1));}['setColor'](){arguments['length']===-0x20b9+-0x2f*-0x7a+0xa54?this['_color']['set'](arguments[0x219d+-0xb*0x2c9+-0x2fa]['r'],arguments[0x1*-0x20cc+-0x486+-0x12a9*-0x2]['g'],arguments[0x512*0x7+0x153b+-0x38b9]['b']):arguments['length']===-0x1d83+0x1518+0x1*0x86e&&this['_color']['set'](arguments[0xbbe+-0x1f1b+0x1*0x135d],arguments[0x56*-0x7+0x6f3+-0x498],arguments[0xee8+-0x1bfc+0xd16]),this['_updateLin'+'earColor']();}['layersDirt'+'y'](){this['layers']['forEach'](_0x1019e7=>{_0x1019e7['hasLight'](this)&&_0x1019e7['markLights'+'Dirty']();});}['updateKey'](){let _0x4b276b=this['_type']<<-0x38*0x41+-0x4*-0x47+0xd39|this['_shadowTyp'+'e']<<0xdb2+0x1*-0x10f1+0x358*0x1|this['_falloffMo'+'de']<<-0x2521+-0x11fb+0x3733|(this['_normalOff'+'setBias']!==0x1c8e+-0x11fe+-0xa90?0x27*-0xb5+0xa*-0x32b+0x3b42:0x1204+0xdfa+-0x1ffe)<<-0x1*-0x894+0xd77+0x15f5*-0x1|(this['_cookie']?-0x9*-0x1f9+0xd42+-0x7e*0x3f:-0x1005+-0x203b+-0x608*-0x8)<<0x5b2+0x2334+-0x28d1|(this['_cookieFal'+'loff']?-0xb48+-0x1291+0x1dda:-0x17cb+0x15d6*0x1+0x1f5)<<0x193+-0x1a7+0x28|pf[this['_cookieCha'+'nnel']['charAt'](0x3*0x741+-0x5b*0xb+-0xa*0x1c9)]<<-0x5*0x329+-0xf4*0xd+-0x1c43*-0x1|(this['_cookieTra'+'nsform']?0x169c+-0x1e0e+0x773:-0x1*0x500+-0x4cc*-0x1+0x34*0x1)<<0x1ced+0x7*0x3d7+-0x37c2|this['_shape']<<-0x2fe*0x4+-0x9*0x51+0xedb*0x1|(this['numCascade'+'s']>0x17fd+0x16c+-0x1969?0xe41+0x1*-0xb89+-0x5*0x8b:-0x1*0x120d+-0x5*0x546+0x2c6b)<<0x1fab+0x1*0x141f+-0x33c1|(this['_cascadeBl'+'end']>0x5f3*0x2+-0x515+-0x1*0x6d1?0x18ef+-0x86f*0x2+0x6*-0x158:0x9*0x2f2+-0x406*-0x9+-0x3eb8)<<-0x10*-0x158+0x14f5+-0x2a6d|(this['affectSpec'+'ularity']?-0x21d6+0x1455+-0x26*-0x5b:-0x6*-0xd+-0x141c+-0x82*-0x27)<<-0xdbd+-0xe3*0x25+-0x1*-0x2e93|this['mask']<<-0x56+-0x2*0x1121+0x229e|(this['_castShado'+'ws']?0x1f2d+-0xebd+-0x106f:0x2385*-0x1+0x3*-0x22c+0x2a09)<<0x778+0x30*-0x2f+-0x15b*-0x1;this['_cookieCha'+'nnel']['length']===-0x1028+-0x2e9*0x1+0x4*0x4c5&&(_0x4b276b|=pf[this['_cookieCha'+'nnel']['charAt'](0x4cd*0x4+-0x249b*-0x1+0x6*-0x94d)]<<-0x1ef3+-0x13b9+0x195e*0x2,_0x4b276b|=pf[this['_cookieCha'+'nnel']['charAt'](-0x78d*0x4+-0x50*0x6a+0x1*0x3f56)]<<-0x1459*-0x1+-0xa23+-0xa28),_0x4b276b!==this['key']&&this['layersDirt'+'y'](),this['key']=_0x4b276b;}['updateClus'+'teredFlags'](){const _0x1b1c6e=!!(this['mask']&Ss),_0x2c2fd5=!!(this['mask']&di);this['clusteredF'+'lags']=(this['type']===Ze?-0x12c4+-0x184*-0xe+-0x13*0x21:-0x15*0x198+0x119c+0xfdc)<<0x1*0x21af+-0x2*-0x33+0x21f7*-0x1|(this['_shape']&0x2534+-0x13eb+0x2e1*-0x6)<<0xb6+-0xa2*-0x3a+-0x254e|(this['_falloffMo'+'de']&0x8b1+0x35d*-0x4+-0xf4*-0x5)<<-0x1303+0x14d+0x11d1|(cA[this['_cookieCha'+'nnel']]??-0x4*0x2bc+0x24c0+-0x4*0x674)<<-0x20a7+-0x6ec*0x3+0x3582|(_0x1b1c6e?-0x1193+0x1f3+0xfa1:0xb5f*0x2+0x1af0+-0x31ae)<<0x860+-0x1892+-0x209*-0x8|(_0x2c2fd5?-0x1ee1+-0x1826+0x3708:0x1025+-0x9*-0x225+-0x2372)<<0x7c7+0x11c5+-0x9f*0x29;}['getCluster'+'edFlags'](_0x19767e,_0x13f66c){return this['clusteredF'+'lags']|((_0x19767e?Math['floor'](this['shadowInte'+'nsity']*(-0x1714+0x1ccc+-0x3*0x193)):-0x129f+-0x6*0x139+0x19f5)&-0x6cb*0x1+-0x528+0xcf2)<<-0x21e*-0xe+-0x1*-0x1f8f+-0x3d33|((_0x13f66c?Math['floor'](this['cookieInte'+'nsity']*(-0x1d*0x46+-0x7*-0x2f8+-0xbdb)):-0x1571+0x710+0xe61)&0x6f*-0x2+0x1ddf+-0x1c02)<<-0x149*-0x4+-0x1e83*0x1+-0x3a1*-0x7;}['updateClus'+'terData'](_0x24fd65,_0x10e139){const {clusteredData16:_0x54f5f0}=this,_0x10cf9f=Mn['float2Half'];_0x24fd65&&(_0x54f5f0[0x2b8+0x158f+-0x1*0x1847]=_0x10cf9f(Y['clamp'](this['_colorLine'+'ar'][0x22b7+-0x146*-0x5+-0xd*0x329]/$c,-0x2f*0x5b+-0x43*-0x71+0x6*-0x225,0xef4f+0x9ab1+-0x8a20)),_0x54f5f0[-0x2058+-0x1d*0x117+0x3ff4]=_0x10cf9f(Y['clamp'](this['_colorLine'+'ar'][-0x2703*-0x1+-0x195*0x1+0x1*-0x256d]/$c,0xc19*-0x3+0x7*0x47d+0x30*0x1a,-0x18b85+0x62b4+0x228b1)),_0x54f5f0[-0x1d3d*-0x1+0x107a+-0x2db5]=_0x10cf9f(Y['clamp'](this['_colorLine'+'ar'][-0xf89+-0x2615+-0x34*-0x108]/$c,0x211f+0x21c2+-0x42e1,-0x1*-0x11a25+-0x5cd6+0x4291))),_0x10e139&&(_0x54f5f0[-0xd02+0x24a2+-0x179c*0x1]=_0x10cf9f(this['_innerCone'+'AngleCos']),_0x54f5f0[-0x22cd+0x4d*-0x6b+0x4301]=_0x10cf9f(this['_outerCone'+'AngleCos']));}}class Mv{constructor(_0x10fd0a,_0x1c3527,_0x6f8edb){h(this,'_areaLight'+'sEnabled',!(0x1d1e+-0xc6f*-0x1+-0x298c)),h(this,'_cells',new D(-0x96+-0x1dc7+0x1e67,-0x6e3*-0x3+-0x4ed+-0xfb9,-0x567*0x7+0x11ef+-0x9f6*-0x2)),h(this,'_maxLights'+'PerCell',-0x1fad+-0x4*0x6b4+0x3b7c),h(this,'_shadowsEn'+'abled',!(0x15c8+-0x7*0x3a6+0x3c2*0x1)),h(this,'_shadowTyp'+'e',$s),h(this,'_shadowAtl'+'asResoluti'+'on',0x613+0x1df6+-0x1*0x1c09),h(this,'_cookiesEn'+'abled',!(-0x2*-0xd2c+-0x21f5*0x1+0x82*0xf)),h(this,'_cookieAtl'+'asResoluti'+'on',0x1b34+0xc4d+0x64d*-0x5),h(this,'debugLayer'),h(this,'atlasSplit',null),(this['_supportsA'+'reaLights']=_0x10fd0a,this['_maxTextur'+'eSize']=_0x1c3527,this['_dirtyLigh'+'tsFnc']=_0x6f8edb);}['applySetti'+'ngs'](_0xb86201){this['shadowsEna'+'bled']=_0xb86201['lightingSh'+'adowsEnabl'+'ed']??this['shadowsEna'+'bled'],this['cookiesEna'+'bled']=_0xb86201['lightingCo'+'okiesEnabl'+'ed']??this['cookiesEna'+'bled'],this['areaLights'+'Enabled']=_0xb86201['lightingAr'+'eaLightsEn'+'abled']??this['areaLights'+'Enabled'],this['shadowAtla'+'sResolutio'+'n']=_0xb86201['lightingSh'+'adowAtlasR'+'esolution']??this['shadowAtla'+'sResolutio'+'n'],this['cookieAtla'+'sResolutio'+'n']=_0xb86201['lightingCo'+'okieAtlasR'+'esolution']??this['cookieAtla'+'sResolutio'+'n'],this['maxLightsP'+'erCell']=_0xb86201['lightingMa'+'xLightsPer'+'Cell']??this['maxLightsP'+'erCell'],this['shadowType']=_0xb86201['lightingSh'+'adowType']??this['shadowType'],_0xb86201['lightingCe'+'lls']&&(this['cells']=new D(_0xb86201['lightingCe'+'lls']));}set['cells'](_0x5dc893){this['_cells']['copy'](_0x5dc893);}get['cells'](){return this['_cells'];}set['maxLightsP'+'erCell'](_0x13ae4e){this['_maxLights'+'PerCell']=Y['clamp'](_0x13ae4e,0x7*0x275+0x357+0x1489*-0x1,0x1abe+-0x1313+-0x6ac);}get['maxLightsP'+'erCell'](){return this['_maxLights'+'PerCell'];}set['cookieAtla'+'sResolutio'+'n'](_0x23c563){this['_cookieAtl'+'asResoluti'+'on']=Y['clamp'](_0x23c563,0x265*-0x3+0x228b+0xa6*-0x2a,this['_maxTextur'+'eSize']);}get['cookieAtla'+'sResolutio'+'n'](){return this['_cookieAtl'+'asResoluti'+'on'];}set['shadowAtla'+'sResolutio'+'n'](_0x47128f){this['_shadowAtl'+'asResoluti'+'on']=Y['clamp'](_0x47128f,0x1*0xdbd+-0x129c+-0x4ff*-0x1,this['_maxTextur'+'eSize']);}get['shadowAtla'+'sResolutio'+'n'](){return this['_shadowAtl'+'asResoluti'+'on'];}set['shadowType'](_0x3d80ba){this['_shadowTyp'+'e']!==_0x3d80ba&&(this['_shadowTyp'+'e']=_0x3d80ba,this['_dirtyLigh'+'tsFnc']());}get['shadowType'](){return this['_shadowTyp'+'e'];}set['cookiesEna'+'bled'](_0x225979){this['_cookiesEn'+'abled']!==_0x225979&&(this['_cookiesEn'+'abled']=_0x225979,this['_dirtyLigh'+'tsFnc']());}get['cookiesEna'+'bled'](){return this['_cookiesEn'+'abled'];}set['areaLights'+'Enabled'](_0x2d63c0){this['_supportsA'+'reaLights']&&this['_areaLight'+'sEnabled']!==_0x2d63c0&&(this['_areaLight'+'sEnabled']=_0x2d63c0,this['_dirtyLigh'+'tsFnc']());}get['areaLights'+'Enabled'](){return this['_areaLight'+'sEnabled'];}set['shadowsEna'+'bled'](_0x38a10e){this['_shadowsEn'+'abled']!==_0x38a10e&&(this['_shadowsEn'+'abled']=_0x38a10e,this['_dirtyLigh'+'tsFnc']());}get['shadowsEna'+'bled'](){return this['_shadowsEn'+'abled'];}}class xa{constructor(_0x979703){this['morph']=_0x979703,_0x979703['incRefCoun'+'t'](),this['device']=_0x979703['device'];const _0x358ae0=_0x979703['_targets']['length'];this['shader']=this['_createSha'+'der'](_0x358ae0),this['_weights']=[],this['_weightMap']=new Map();for(let _0x17b261=0x2d*0x65+0x1397+0x1*-0x2558;_0x17b261<_0x979703['_targets']['length'];_0x17b261++){const _0x3c082b=_0x979703['_targets'][_0x17b261];_0x3c082b['name']&&this['_weightMap']['set'](_0x3c082b['name'],_0x17b261),this['setWeight'](_0x17b261,_0x3c082b['defaultWei'+'ght']);}this['_shaderMor'+'phWeights']=new Float32Array(_0x358ae0),this['_shaderMor'+'phIndex']=new Uint32Array(_0x358ae0);const _0x16cf1c=(_0x12c647,_0x1b75f2)=>(this[_0x1b75f2]=_0x979703['_createTex'+'ture'](_0x12c647,_0x979703['_renderTex'+'tureFormat']),new gt({'colorBuffer':this[_0x1b75f2],'depth':!(0x3b*-0x4a+0x4*-0x1b7+0x17eb)}));_0x979703['morphPosit'+'ions']&&(this['rtPosition'+'s']=_0x16cf1c('MorphRTPos','texturePos'+'itions')),_0x979703['morphNorma'+'ls']&&(this['rtNormals']=_0x16cf1c('MorphRTNrm','textureNor'+'mals')),this['_texturePa'+'rams']=new Float32Array([_0x979703['morphTextu'+'reWidth'],_0x979703['morphTextu'+'reHeight']]);const _0x40e3f9=_0x979703['aabb']['halfExtent'+'s'];this['_aabbSize']=new Float32Array([_0x40e3f9['x']*(-0x1*0x20ff+0xab*0x1f+-0x1e*-0x69),_0x40e3f9['y']*(0x1737+-0x16b1+0x41*-0x2),_0x40e3f9['z']*(-0x25eb*0x1+-0x1273+0x3862)]);const _0x333990=_0x979703['aabb']['getMin']();this['_aabbMin']=new Float32Array([_0x333990['x']*(-0x2*0x7b7+0x4*-0x950+0x34b*0x10),_0x333990['y']*(0xf*0x260+0x2*-0x722+0x38f*-0x6),_0x333990['z']*(-0x35*0x9f+0x26*-0x20+0x25ad)]),this['_aabbNrmSi'+'ze']=new Float32Array([0xc16+0x1c06+-0x281a,0x2126+0x15fa+-0x371e,-0x2a*0xaf+0x92*-0x6+0x2024]),this['_aabbNrmMi'+'n']=new Float32Array([-(-0x19cf+0x11*-0x191+0x4b*0xb3),-(0x1408+-0x6*-0x66e+-0x3a9b),-(0x19fd*-0x1+0x2b*-0x93+-0x19*-0x207)]),this['aabbSizeId']=this['device']['scope']['resolve']('aabbSize'),this['aabbMinId']=this['device']['scope']['resolve']('aabbMin'),this['morphTextu'+'reId']=this['device']['scope']['resolve']('morphTextu'+'re'),this['morphFacto'+'r']=this['device']['scope']['resolve']('morphFacto'+'r[0]'),this['morphIndex']=this['device']['scope']['resolve']('morphIndex'+'[0]'),this['countId']=this['device']['scope']['resolve']('count'),this['zeroTextur'+'es']=!(-0x6+0xa74+-0xa6d);}['destroy'](){var _0x284b87,_0x1def93,_0x26090b,_0x422cc0;this['shader']=null;const _0x3393b9=this['morph'];_0x3393b9&&(this['morph']=null,_0x3393b9['decRefCoun'+'t'](),_0x3393b9['refCount']<0x205d+-0x1*0x1e05+-0x1*0x257&&_0x3393b9['destroy']()),(_0x284b87=this['rtPosition'+'s'])==null||_0x284b87['destroy'](),this['rtPosition'+'s']=null,(_0x1def93=this['texturePos'+'itions'])==null||_0x1def93['destroy'](),this['texturePos'+'itions']=null,(_0x26090b=this['rtNormals'])==null||_0x26090b['destroy'](),this['rtNormals']=null,(_0x422cc0=this['textureNor'+'mals'])==null||_0x422cc0['destroy'](),this['textureNor'+'mals']=null;}['clone'](){return new xa(this['morph']);}['_getWeight'+'Index'](_0x4db500){if(typeof _0x4db500=='string'){const _0x43ce43=this['_weightMap']['get'](_0x4db500);return _0x43ce43===void(-0x4*-0x916+0x10df*-0x1+0x5*-0x3e5)&&w['errorOnce']('Cannot\x20fin'+'d\x20morph\x20ta'+'rget\x20with\x20'+'name:\x20'+_0x4db500+'.'),_0x43ce43;}return _0x4db500;}['getWeight'](_0x48aa84){const _0x3a2d08=this['_getWeight'+'Index'](_0x48aa84);return this['_weights'][_0x3a2d08];}['setWeight'](_0x53ce76,_0x3be00f){const _0x1c7d4b=this['_getWeight'+'Index'](_0x53ce76);w['assert'](_0x1c7d4b>=0x2*0x279+0x2426+-0x2918&&_0x1c7d4b<this['morph']['_targets']['length']),this['_weights'][_0x1c7d4b]=_0x3be00f,this['_dirty']=!(0x2f+0x3b*0x5e+-0x7*0x31f);}['_createSha'+'der'](_0x204ffb){const _0x269429=new Map();_0x269429['set']('{MORPH_TEX'+'TURE_MAX_C'+'OUNT}',_0x204ffb),this['morph']['intRenderF'+'ormat']&&_0x269429['set']('MORPH_INT','');const _0x2dc266=this['morph']['intRenderF'+'ormat']?'uvec4':'vec4';return $t['createShad'+'er'](this['device'],{'uniqueName':'TextureMor'+'phShader_'+_0x204ffb+'-'+(this['morph']['intRenderF'+'ormat']?'int':'float'),'attributes':{'vertex_position':Me},'vertexChunk':'morphVS','fragmentChunk':'morphPS','fragmentDefines':_0x269429,'fragmentOutputTypes':[_0x2dc266]});}['_updateTex'+'tureRender'+'Target'](_0x549f6b,_0x4864fc,_0x1ca08d){const {morph:_0x573825,device:_0x836cfa}=this;this['setAabbUni'+'forms'](_0x1ca08d),this['morphTextu'+'reId']['setValue'](_0x1ca08d?_0x573825['targetsTex'+'turePositi'+'ons']:_0x573825['targetsTex'+'tureNormal'+'s']),_0x836cfa['setBlendSt'+'ate'](pt['NOBLEND']),this['countId']['setValue'](_0x4864fc),this['morphFacto'+'r']['setValue'](this['_shaderMor'+'phWeights']),this['morphIndex']['setValue'](this['_shaderMor'+'phIndex']),Ar(_0x836cfa,_0x549f6b,this['shader']);}['_updateTex'+'tureMorph'](_0x18d42e){const _0x18e9ec=this['device'];Q['pushGpuMar'+'ker'](_0x18e9ec,'MorphUpdat'+'e'),(_0x18d42e>0x2*0xe27+-0x1c*-0x10d+-0x39ba||!this['zeroTextur'+'es'])&&(this['rtPosition'+'s']&&this['_updateTex'+'tureRender'+'Target'](this['rtPosition'+'s'],_0x18d42e,!(-0x18e3+0x1e48+-0x565)),this['rtNormals']&&this['_updateTex'+'tureRender'+'Target'](this['rtNormals'],_0x18d42e,!(-0x18ce+0x60f*-0x3+0x2afc)),this['zeroTextur'+'es']=_0x18d42e===0xf*-0xed+-0x1*-0x1cef+-0x4*0x3c3),Q['popGpuMark'+'er'](_0x18e9ec);}['setAabbUni'+'forms'](_0xefe3d9=!(-0x13*0x164+0xee1+0xb8b)){this['aabbSizeId']['setValue'](_0xefe3d9?this['_aabbSize']:this['_aabbNrmSi'+'ze']),this['aabbMinId']['setValue'](_0xefe3d9?this['_aabbMin']:this['_aabbNrmMi'+'n']);}['prepareRen'+'dering'](_0x6b8976){this['setAabbUni'+'forms']();}['update'](){this['_dirty']=!(0x17c9*0x1+0x1bb8+-0x3380*0x1);const _0x395bbc=this['morph']['_targets'],_0x2c744b=0xc62*0x3+-0x269+0x1*-0x22bd+0.00001,_0x108b01=this['_shaderMor'+'phWeights'],_0xbbc83f=this['_shaderMor'+'phIndex'];let _0x2abea4=0x26d1+0xf04+0x35d5*-0x1;for(let _0x2cfa32=-0x127*-0xd+-0x117a+0x27f;_0x2cfa32<_0x395bbc['length'];_0x2cfa32++)Math['abs'](this['getWeight'](_0x2cfa32))>_0x2c744b&&(_0x108b01[_0x2abea4]=this['getWeight'](_0x2cfa32),_0xbbc83f[_0x2abea4]=_0x2cfa32,_0x2abea4++);this['_updateTex'+'tureMorph'](_0x2abea4);}}class sr{constructor(){h(this,'graph',null),h(this,'meshInstan'+'ces',[]),h(this,'skinInstan'+'ces',[]),h(this,'morphInsta'+'nces',[]),(this['cameras']=[],this['lights']=[],this['_shadersVe'+'rsion']=0x1d85*-0x1+-0x254b*0x1+-0x2168*-0x2,this['_immutable']=!(-0x4*0x8db+-0x122a+-0x1*-0x3597));}['getGraph'](){return this['graph'];}['setGraph'](_0x52b893){this['graph']=_0x52b893;}['getCameras'](){return this['cameras'];}['setCameras'](_0xaaa551){this['cameras']=_0xaaa551;}['getLights'](){return this['lights'];}['setLights'](_0x529792){this['lights']=_0x529792;}['getMateria'+'ls'](){const _0x63e1cb=[];for(let _0x42d6f9=0xfb3*-0x1+0x3*-0xba3+0x329c;_0x42d6f9<this['meshInstan'+'ces']['length'];_0x42d6f9++){const _0x7337a=this['meshInstan'+'ces'][_0x42d6f9];_0x63e1cb['indexOf'](_0x7337a['material'])===-(0x1f2b+-0x1178+-0x1*0xdb2)&&_0x63e1cb['push'](_0x7337a['material']);}return _0x63e1cb;}['clone'](){const _0x402596=[],_0xdd4619=[],_0x251a5a=function(_0x4a6b57){const _0x2d4c4a=_0x4a6b57['clone']();_0x402596['push'](_0x4a6b57),_0xdd4619['push'](_0x2d4c4a);for(let _0x511d5b=0x3*-0x793+-0x189+-0xa*-0x26d;_0x511d5b<_0x4a6b57['_children']['length'];_0x511d5b++)_0x2d4c4a['addChild'](_0x251a5a(_0x4a6b57['_children'][_0x511d5b]));return _0x2d4c4a;},_0x46eee5=_0x251a5a(this['graph']),_0x30337d=[],_0x73abf8=[],_0x3d2207=[];for(let _0x27f32f=0x1c7a+0x1706+0x338*-0x10;_0x27f32f<this['skinInstan'+'ces']['length'];_0x27f32f++){const _0x30121f=this['skinInstan'+'ces'][_0x27f32f]['skin'],_0x57430a=new Ol(_0x30121f),_0x5a0dfe=[];for(let _0x52259f=0x1e13*0x1+0x18e*-0x9+-0x1015*0x1;_0x52259f<_0x30121f['boneNames']['length'];_0x52259f++){const _0x3e27b8=_0x30121f['boneNames'][_0x52259f],_0x876d8=_0x46eee5['findByName'](_0x3e27b8);_0x5a0dfe['push'](_0x876d8);}_0x57430a['bones']=_0x5a0dfe,_0x73abf8['push'](_0x57430a);}for(let _0x48a9e6=-0x54e*0x4+-0x8de+0x1e16*0x1;_0x48a9e6<this['morphInsta'+'nces']['length'];_0x48a9e6++){const _0x4e7d04=this['morphInsta'+'nces'][_0x48a9e6]['morph'],_0x2e1556=new xa(_0x4e7d04);_0x3d2207['push'](_0x2e1556);}for(let _0x3fceab=-0x145a+-0x1595+0x29ef;_0x3fceab<this['meshInstan'+'ces']['length'];_0x3fceab++){const _0x2eadd8=this['meshInstan'+'ces'][_0x3fceab],_0x90ac63=_0x402596['indexOf'](_0x2eadd8['node']),_0x12b400=new He(_0x2eadd8['mesh'],_0x2eadd8['material'],_0xdd4619[_0x90ac63]);if(_0x2eadd8['skinInstan'+'ce']){const _0x47025b=this['skinInstan'+'ces']['indexOf'](_0x2eadd8['skinInstan'+'ce']);_0x12b400['skinInstan'+'ce']=_0x73abf8[_0x47025b];}if(_0x2eadd8['morphInsta'+'nce']){const _0x1e5e0d=this['morphInsta'+'nces']['indexOf'](_0x2eadd8['morphInsta'+'nce']);_0x12b400['morphInsta'+'nce']=_0x3d2207[_0x1e5e0d];}_0x30337d['push'](_0x12b400);}const _0x4eb8bf=new sr();return _0x4eb8bf['graph']=_0x46eee5,_0x4eb8bf['meshInstan'+'ces']=_0x30337d,_0x4eb8bf['skinInstan'+'ces']=_0x73abf8,_0x4eb8bf['morphInsta'+'nces']=_0x3d2207,_0x4eb8bf['getGraph']()['syncHierar'+'chy'](),_0x4eb8bf;}['destroy'](){const _0x347d23=this['meshInstan'+'ces'];for(let _0x4d84e2=-0x7c4+0x8a1*0x1+0x1*-0xdd;_0x4d84e2<_0x347d23['length'];_0x4d84e2++)_0x347d23[_0x4d84e2]['destroy']();this['meshInstan'+'ces']['length']=0x8a2+0x1ce6+0x8*-0x4b1;}['generateWi'+'reframe'](){He['_prepareRe'+'nderStyleF'+'orArray'](this['meshInstan'+'ces'],$r);}}class mm extends wd{constructor(_0x1b0e6f,_0x527da2,{preferHighPrecision:_0x535646=!(-0x685+-0x163a+0x1cc0)}={}){super(),h(this,'_aabb'),h(this,'preferHigh'+'Precision'),(w['assert'](_0x527da2,'Morph\x20cons'+'tructor\x20ta'+'kes\x20a\x20Grap'+'hicsDevice'+'\x20as\x20a\x20para'+'meter,\x20and'+'\x20it\x20was\x20no'+'t\x20provided'+'.'),this['device']=_0x527da2);const _0x3834f1=_0x527da2;this['preferHigh'+'Precision']=_0x535646,w['assert'](_0x1b0e6f['every'](_0x5b35a3=>!_0x5b35a3['used']),'A\x20specifie'+'d\x20target\x20h'+'as\x20already'+'\x20been\x20used'+'\x20to\x20create'+'\x20a\x20Morph,\x20'+'use\x20its\x20cl'+'one\x20instea'+'d.'),this['_targets']=_0x1b0e6f['slice']();const _0xa2fafa=_0x3834f1['textureHal'+'fFloatRend'+'erable']?nt:void(0xe68*-0x1+-0xd9c+0x1c04),_0x33aa99=_0x3834f1['textureFlo'+'atRenderab'+'le']?Xt:void(0x166d+0x9e4*-0x2+0x1*-0x2a5);this['_renderTex'+'tureFormat']=this['preferHigh'+'Precision']?_0x33aa99??_0xa2fafa:_0xa2fafa??_0x33aa99,this['_renderTex'+'tureFormat']=this['_renderTex'+'tureFormat']??nd,this['intRenderF'+'ormat']=dn(this['_renderTex'+'tureFormat']),this['_textureFo'+'rmat']=this['preferHigh'+'Precision']?Xt:nt,this['_init'](),this['_updateMor'+'phFlags']();}['destroy'](){var _0x3ddb29,_0xc10c39,_0x57e2d2;(_0x3ddb29=this['vertexBuff'+'erIds'])==null||_0x3ddb29['destroy'](),this['vertexBuff'+'erIds']=null,(_0xc10c39=this['targetsTex'+'turePositi'+'ons'])==null||_0xc10c39['destroy'](),this['targetsTex'+'turePositi'+'ons']=null,(_0x57e2d2=this['targetsTex'+'tureNormal'+'s'])==null||_0x57e2d2['destroy'](),this['targetsTex'+'tureNormal'+'s']=null;}get['aabb'](){if(!this['_aabb']){const _0xa7990a=new D(),_0x4b3f87=new D();for(let _0x2532c7=-0x1ec1+0x2*0x1e1+0x1aff;_0x2532c7<this['_targets']['length'];_0x2532c7++){const _0x47c1de=this['_targets'][_0x2532c7]['aabb'];_0xa7990a['min'](_0x47c1de['getMin']()),_0x4b3f87['max'](_0x47c1de['getMax']());}this['_aabb']=new De(),this['_aabb']['setMinMax'](_0xa7990a,_0x4b3f87);}return this['_aabb'];}get['morphPosit'+'ions'](){return this['_morphPosi'+'tions'];}get['morphNorma'+'ls'](){return this['_morphNorm'+'als'];}['_init'](){this['_initTextu'+'reBased']();for(let _0x5c193f=0x35*0x43+-0x4de*-0x1+-0xd*0x171;_0x5c193f<this['_targets']['length'];_0x5c193f++)this['_targets'][_0x5c193f]['_postInit']();}['_findSpars'+'eSet'](_0x53ea13,_0x3059be,_0x14752e){let _0x32a0d2=-0x1f3*0xb+-0x1181+0xa9*0x3b;const _0x1a3a81=_0x53ea13[0x14f4+0x21c9+-0x3*0x123f]['length'];for(let _0x196c58=-0x497*0x2+-0x62d+-0xf5b*-0x1;_0x196c58<_0x1a3a81;_0x196c58+=-0x1ce*0x5+0x597+-0x2*-0x1b9){let _0x171c2a=!(-0x1340+-0x55e*0x3+0x235b);for(let _0x420636=0x53*-0x53+-0x1405+-0x2*-0x1777;_0x420636<_0x53ea13['length'];_0x420636++){const _0xb93ec0=_0x53ea13[_0x420636];if(_0xb93ec0[_0x196c58]!==-0x1b26+0x9c5+-0x5cb*-0x3||_0xb93ec0[_0x196c58+(0x1f2b*0x1+-0x118a*-0x2+-0x2*0x211f)]!==0x265b+0x2249+0x48a4*-0x1||_0xb93ec0[_0x196c58+(-0x397*-0x7+-0x2669+0x3*0x46e)]!==0x13e*-0x7+0xe90*0x2+0x2*-0xa37){_0x171c2a=!(-0x23e2+0x588+0x1e5a);break;}}_0x171c2a?(_0x3059be['push'](_0x32a0d2),_0x14752e['push'](_0x196c58/(-0x1*-0x1a7d+-0x1a62*-0x1+-0x34dc)),_0x32a0d2++):_0x3059be['push'](0x215d+-0x387+0x9f2*-0x3);}return _0x32a0d2;}['_initTextu'+'reBased'](){const _0x2889d1=[],_0x2110fc=[],_0x90a19=this['_targets'];for(let _0x98b7de=-0xd58+-0x861+0x15b9;_0x98b7de<_0x90a19['length'];_0x98b7de++){const _0x478e67=_0x90a19[_0x98b7de];_0x478e67['options']['deltaPosit'+'ions']&&(_0x2889d1['push'](_0x478e67['options']['deltaPosit'+'ions']),_0x2110fc['push'](!(-0xe3+0x229b*0x1+-0x21b8))),_0x478e67['options']['deltaNorma'+'ls']&&(_0x2889d1['push'](_0x478e67['options']['deltaNorma'+'ls']),_0x2110fc['push'](!(0xaf1+-0xb0*-0x16+-0x4*0x684)));}const _0x38d974=[],_0x2e6643=[],_0x41d283=this['_findSpars'+'eSet'](_0x2889d1,_0x38d974,_0x2e6643),_0x4758bd=this['device']['maxTexture'+'Size'];let _0x1f545d=Math['ceil'](Math['sqrt'](_0x41d283));_0x1f545d=Math['min'](_0x1f545d,_0x4758bd);const _0x37cd42=Math['ceil'](_0x41d283/_0x1f545d);if(_0x37cd42>_0x4758bd){w['warnOnce']('Morph\x20targ'+'et\x20data\x20is'+'\x20too\x20large'+'\x20to\x20fit\x20in'+'to\x20a\x20textu'+'re\x20array.\x20'+'Required\x20t'+'exture\x20siz'+'e:\x20'+_0x1f545d+'x'+_0x37cd42+(',\x20max\x20text'+'ure\x20size:\x20')+_0x4758bd+'x'+_0x4758bd+'.');return;}this['morphTextu'+'reWidth']=_0x1f545d,this['morphTextu'+'reHeight']=_0x37cd42;let _0x38c6b0=!(-0x120d+-0x1f5*0x5+0x1bd7);const _0x17dbd6=Mn['float2Half'];this['_textureFo'+'rmat']===nt&&(_0x38c6b0=!(-0x27b+-0x56*-0x3+0x179*0x1));const _0x3066f6=[],_0xa95d6=[],_0x41f41a=_0x1f545d*_0x37cd42*(0x1cd6*-0x1+-0x47+0x1d21);for(let _0x4cefe=-0xefe*-0x1+0x19*-0xe+0xda*-0x10;_0x4cefe<_0x2889d1['length'];_0x4cefe++){const _0x12a3f7=_0x2889d1[_0x4cefe],_0x50201c=this['_textureFo'+'rmat']===nt?new Uint16Array(_0x41f41a):new Float32Array(_0x41f41a);if((_0x2110fc[_0x4cefe]?_0x3066f6:_0xa95d6)['push'](_0x50201c),_0x38c6b0)for(let _0x2d58f6=-0x1*-0x5b5+-0x2317+0x1d62;_0x2d58f6<_0x2e6643['length'];_0x2d58f6++){const _0x1169d6=_0x2e6643[_0x2d58f6]*(-0x1a79+-0x11*-0x191+0x1*-0x25),_0x6fc037=_0x2d58f6*(0x146b*0x1+-0x6ad+-0xdba)+(-0x55d+-0x47*0xb+0xd*0xa6);_0x50201c[_0x6fc037]=_0x17dbd6(_0x12a3f7[_0x1169d6]),_0x50201c[_0x6fc037+(-0x1a2b+0x10ea+0x942)]=_0x17dbd6(_0x12a3f7[_0x1169d6+(0x1c45+-0x7*-0x4d5+-0x3e17)]),_0x50201c[_0x6fc037+(0x7c*-0x1c+0x10a4+-0x1*0x312)]=_0x17dbd6(_0x12a3f7[_0x1169d6+(0x9f*0x24+-0x4*-0x3b7+-0x2536)]);}else for(let _0x1c3dce=0x253c*-0x1+-0x7b*0x25+0x1*0x3703;_0x1c3dce<_0x2e6643['length'];_0x1c3dce++){const _0x4d93db=_0x2e6643[_0x1c3dce]*(-0x94d+0x68*-0x8+-0xc9*-0x10),_0x57f4c5=_0x1c3dce*(0xa*0x123+0x3*0x5c6+-0x1cac)+(-0x9f*0x12+0x42e*0x1+0x4*0x1c1);_0x50201c[_0x57f4c5]=_0x12a3f7[_0x4d93db],_0x50201c[_0x57f4c5+(0x1dfc+0xce*-0xb+-0x9*0x259)]=_0x12a3f7[_0x4d93db+(0x1*-0x1827+-0x16ed+0x2f15)],_0x50201c[_0x57f4c5+(0x15c3+0x17d2*-0x1+0x17*0x17)]=_0x12a3f7[_0x4d93db+(0xdae+-0x3f+-0xd6d)];}}_0x3066f6['length']>0x2c8+-0x101f*-0x2+-0x2306&&(this['targetsTex'+'turePositi'+'ons']=this['_createTex'+'ture']('MorphPosit'+'ionsTextur'+'e',this['_textureFo'+'rmat'],_0x90a19['length'],[_0x3066f6]),this['targetsTex'+'turePositi'+'ons']['upload']()),_0xa95d6['length']>0x23b*0x11+-0x12aa+-0x1341&&(this['targetsTex'+'tureNormal'+'s']=this['_createTex'+'ture']('MorphNorma'+'lsTexture',this['_textureFo'+'rmat'],_0x90a19['length'],[_0xa95d6]),this['targetsTex'+'tureNormal'+'s']['upload']());const _0xbfe7d2=[{'semantic':Ln,'components':0x1,'type':el,'asInt':!(0x1c*0x151+-0x224a+0x7*-0x5e)}];return this['vertexBuff'+'erIds']=new Is(this['device'],new kt(this['device'],_0xbfe7d2,_0x38d974['length']),_0x38d974['length'],{'data':new Uint32Array(_0x38d974)}),!(0x1*-0x39d+0x3*-0xc5+0x4*0x17b);}get['targets'](){return this['_targets'];}['_updateMor'+'phFlags'](){this['_morphPosi'+'tions']=!(-0x1b8+0xccb+0xd*-0xda),this['_morphNorm'+'als']=!(0x1bab+0x1*-0x1ea1+0x2f7);for(let _0x5621a4=0x1*0x611+-0x11*0x21a+0x1da9;_0x5621a4<this['_targets']['length'];_0x5621a4++){const _0x2623ee=this['_targets'][_0x5621a4];_0x2623ee['morphPosit'+'ions']&&(this['_morphPosi'+'tions']=!(0x4f*0x73+0x1*0x6fd+0x2*-0x153d)),_0x2623ee['morphNorma'+'ls']&&(this['_morphNorm'+'als']=!(0x1b74+-0x22e9*0x1+0x1*0x775));}}['_createTex'+'ture'](_0x55f281,_0x4d8e22,_0x22e5f7,_0x5f0519){return new _e(this['device'],{'levels':_0x5f0519,'arrayLength':_0x22e5f7,'width':this['morphTextu'+'reWidth'],'height':this['morphTextu'+'reHeight'],'format':_0x4d8e22,'cubemap':!(0xae6+0x1785+-0xa*0x371),'mipmaps':!(0xb6a+0x1*0x281+-0xdea),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue,'name':_0x55f281});}}class Md{constructor(_0x43e587){h(this,'used',!(-0x4*0x434+0x8d*0x17+-0x3*-0x162)),(w['assert'](arguments['length']===-0x270+0x1ea3+-0x1c32),this['options']=_0x43e587,this['_name']=_0x43e587['name'],this['_defaultWe'+'ight']=_0x43e587['defaultWei'+'ght']||0x6*-0x55+0x26f2+0x2*-0x127a,this['_aabb']=_0x43e587['aabb'],this['deltaPosit'+'ions']=_0x43e587['deltaPosit'+'ions'],this['morphPosit'+'ions']=!!_0x43e587['deltaPosit'+'ions'],this['morphNorma'+'ls']=!!_0x43e587['deltaNorma'+'ls']);}get['name'](){return this['_name'];}get['defaultWei'+'ght'](){return this['_defaultWe'+'ight'];}get['aabb'](){return this['_aabb']||(this['_aabb']=new De(),this['deltaPosit'+'ions']&&this['_aabb']['compute'](this['deltaPosit'+'ions'])),this['_aabb'];}['clone'](){return w['assert'](this['options'],'MorphTarge'+'t\x20cannot\x20b'+'e\x20cloned,\x20'+'was\x20it\x20cre'+'ated\x20with\x20'+'a\x20preserve'+'Data\x20optio'+'n?'),new Md(this['options']);}['_postInit'](){this['options']['preserveDa'+'ta']||(this['options']=null),this['used']=!(0x3c0+0x1088*-0x1+0xcc8);}}let Ei,Z_=-0x389*0x7+0x23fd+-0xb3d;const ce=-0x1*-0x1d47+-0x9*-0x94+-0x2277,mf=new te(),_f=new te(),ti=new D(),tt=new D(),Ns=new D(),Na=new D(),ns=new D(),_t=new D(),ka=new D(),Ua=new D(),fo=new D(),Q_=new D(),zt=new D(),fc=new D(),kr=new D();function pn(_0x4730a7){return _0x4730a7-Math['floor'](_0x4730a7);}function fA(_0x59e313){return Math['max'](Math['min'](_0x59e313,-0x1cc8*0x1+-0xf09*-0x1+0xdc0),0x1c6c+-0x2e7+-0x1985);}function gf(_0x5be9b1,_0x4e3709){return _0x5be9b1-_0x4e3709*Math['floor'](_0x5be9b1/_0x4e3709);}function uA(_0x5adc30){let _0xb6bd51=pn(_0x5adc30),_0x5be67d=pn((0x3*-0xade+-0x1bbd+-0x6*-0xa39)*_0x5adc30),_0x41a122=pn((0x7fe9+0x2a5*-0x13+0x7*0x1931)*_0x5adc30),_0xb3d2a7=pn((-0x17*-0xa54f42+0x6397*-0x1a69+-0x55390*-0xf0)*_0x5adc30);return _0xb6bd51-=_0x5be67d/(-0x25a1+-0x13c+0x27dc),_0x5be67d-=_0x41a122/(-0x267e*-0x1+0x18*-0x154+-0x59f),_0x41a122-=_0xb3d2a7/(0x14d6+0xaae+-0x1e85),_0xb3d2a7-=_0xb3d2a7/(-0x2565+0x4ac+-0x53*-0x68),[_0xb6bd51,_0x5be67d,_0x41a122,_0xb3d2a7];}function uc(_0xccc4b5){let _0x3fda85=pn(_0xccc4b5),_0x2f46f6=pn((-0x2367+-0x1582*-0x1+-0x4*-0x3b9)*_0xccc4b5);return _0x3fda85-=_0x2f46f6/(0x1d*-0xc5+-0x1339+0x2a89),_0x2f46f6-=_0x2f46f6/(0x2505+-0x2559*-0x1+-0x495f),[_0x3fda85,_0x2f46f6];}class pA{constructor(_0x6b34ea){this['_emitter']=_0x6b34ea;}['calcSpawnP'+'osition'](_0x28a37c,_0x32b12b,_0x146096,_0x5a7346,_0x33ff8f){const _0x15dbfc=this['_emitter'],_0x19fba1=Math['random'](),_0x305a1c=Math['random'](),_0x34f6fd=Math['random'](),_0x10cdc3=Math['random']();if(_0x15dbfc['useCpu']&&(_0x28a37c[_0x33ff8f*ce+(0x6b5*0x4+-0x25a2+0xace)+_0x15dbfc['numParticl'+'esPot']*(-0x1e42+-0xee7+0x2d2b)*ce]=_0x19fba1,_0x28a37c[_0x33ff8f*ce+(0x96c+-0x209*-0xd+-0x70*0x52)+_0x15dbfc['numParticl'+'esPot']*(0x1c96+-0x1f06+0x272*0x1)*ce]=_0x305a1c,_0x28a37c[_0x33ff8f*ce+(-0x1*-0x1ec1+-0x2*0xe1d+-0x285)+_0x15dbfc['numParticl'+'esPot']*(0x1*0x16d4+0x2348+-0x3a1a)*ce]=_0x34f6fd),tt['x']=_0x19fba1-(-0x2678+0x26fd+-0x85+0.5),tt['y']=_0x305a1c-(0x779+-0x12a4*-0x2+0x13*-0x25b+0.5),tt['z']=_0x34f6fd-(-0x12b7+-0x26e5+0x399c+0.5),_0x15dbfc['emitterSha'+'pe']===ai){const _0x4d9183=Math['max'](Math['abs'](tt['x']),Math['max'](Math['abs'](tt['y']),Math['abs'](tt['z']))),_0x4ccfdf=_0x4d9183+(-0x1753+0x4*0x48b+0x527+0.5-_0x4d9183)*_0x146096[-0xab8+-0x579+-0x1*-0x1031],_0x53e4eb=_0x4d9183+(0x29*-0x61+0xbf8*0x2+-0x867+0.5-_0x4d9183)*_0x146096[-0x1a90+-0x1e+0x129*0x17],_0x17462c=_0x4d9183+(0x2423+-0xd7d*0x1+-0x16a6+0.5-_0x4d9183)*_0x146096[-0xd*0x2f5+0x1f39+0x5*0x172];tt['x']=_0x4ccfdf*(_0x4d9183===Math['abs'](tt['x'])?Math['sign'](tt['x']):(0x979+-0x1*0xa6f+0xf8)*tt['x']),tt['y']=_0x53e4eb*(_0x4d9183===Math['abs'](tt['y'])?Math['sign'](tt['y']):(-0x3*0x504+0x13*0xb7+0x179)*tt['y']),tt['z']=_0x17462c*(_0x4d9183===Math['abs'](tt['z'])?Math['sign'](tt['z']):(0x3de*0x5+0x3*-0x6be+0x1*0xe6)*tt['z']),_0x15dbfc['localSpace']?ti['copy'](_0x32b12b['transformP'+'oint'](tt)):ti['copy'](_0x5a7346)['add'](_0x32b12b['transformP'+'oint'](tt));}else{tt['normalize']();const _0xd4d08b=_0x15dbfc['emitterRad'+'ius']===-0x2*0x1b7+0x1c8f+-0x1921?-0x45b*-0x1+0x329+0x34*-0x25:_0x15dbfc['emitterRad'+'iusInner']/_0x15dbfc['emitterRad'+'ius'],_0x3e80cf=_0x10cdc3*(0x1141*0x1+-0x256c+0x142c-_0xd4d08b)+_0xd4d08b;_0x15dbfc['localSpace']?ti['copy'](tt['mulScalar'](_0x3e80cf*_0x15dbfc['emitterRad'+'ius'])):ti['copy'](_0x5a7346)['add'](tt['mulScalar'](_0x3e80cf*_0x15dbfc['emitterRad'+'ius']));}let _0x46d33f=-Y['lerp'](_0x15dbfc['rate'],_0x15dbfc['rate2'],_0x19fba1)*_0x33ff8f;if(_0x15dbfc['pack8']){const _0xc639ae=(ti['x']-_0x15dbfc['worldBound'+'s']['center']['x'])/_0x15dbfc['worldBound'+'sSize']['x']+(0x186b*-0x1+0x1*-0x73+0x18de+0.5),_0x206b0d=(ti['y']-_0x15dbfc['worldBound'+'s']['center']['y'])/_0x15dbfc['worldBound'+'sSize']['y']+(0x17b4+0x124b+0x29ff*-0x1+0.5),_0x4c52b3=(ti['z']-_0x15dbfc['worldBound'+'s']['center']['z'])/_0x15dbfc['worldBound'+'sSize']['z']+(-0x2d*0x1b+0xdc0+-0x1cd*0x5+0.5);let _0x21abc5=Y['lerp'](_0x15dbfc['startAngle']*Y['DEG_TO_RAD'],_0x15dbfc['startAngle'+'2']*Y['DEG_TO_RAD'],_0x19fba1);_0x21abc5=_0x21abc5%(Math['PI']*(-0x7fd*-0x2+-0x1266+0x137*0x2))/(Math['PI']*(-0x1*0x236+-0xb*0x322+0x139*0x1e));const _0x228879=uc(_0xc639ae);_0x28a37c[_0x33ff8f*ce]=_0x228879[0x10*0x26a+0x1645*-0x1+-0x1*0x105b],_0x28a37c[_0x33ff8f*ce+(0x19de+-0x638+-0x13a5)]=_0x228879[0xb7+0xb6a+-0x1*0xc20];const _0x595c19=uc(_0x206b0d);_0x28a37c[_0x33ff8f*ce+(-0x26*0x53+-0x1101+-0x9c7*-0x3)]=_0x595c19[-0x8b1*-0x1+-0x10f9+0x109*0x8],_0x28a37c[_0x33ff8f*ce+(0x4*-0x8ed+0x1*-0x6dd+0x2a94)]=_0x595c19[-0x1e5a+-0x1*-0xb8f+0x12cc];const _0x258292=uc(_0x4c52b3);_0x28a37c[_0x33ff8f*ce+(-0x3aa*-0x3+-0x750+-0x1*0x3ae)+_0x15dbfc['numParticl'+'esPot']*ce]=_0x258292[-0x5*0x161+0x45*0x5e+-0x1271],_0x28a37c[_0x33ff8f*ce+(-0x1*-0xb8a+0x12*-0x1f8+0x17e7)+_0x15dbfc['numParticl'+'esPot']*ce]=_0x258292[-0x7a*-0x2c+-0x16ce+0x9d*0x3];const _0x1f6080=uc(_0x21abc5);_0x28a37c[_0x33ff8f*ce+(-0xe91+-0x8a7+0x173a)+_0x15dbfc['numParticl'+'esPot']*ce]=_0x1f6080[-0x1*0x149f+0xb09*-0x2+0x3*0xe3b],_0x28a37c[_0x33ff8f*ce+(0xe9*0x1a+-0x1f1e+0x15*0x5b)+_0x15dbfc['numParticl'+'esPot']*ce]=_0x1f6080[0x6a9+-0xa6+0x602*-0x1];const _0x3bbc8e=-0x902+0x3*0x885+-0x108c*0x1;_0x28a37c[_0x33ff8f*ce+(-0x3*-0x1f5+-0x33*0x9d+-0x9*-0x2d3)+_0x15dbfc['numParticl'+'esPot']*ce*(0x2*0x1e9+-0x132d*0x1+0xf5d)]=_0x3bbc8e;const _0x132159=Math['max'](_0x15dbfc['lifetime'],(_0x15dbfc['numParticl'+'es']-(0xe95+0x1*-0x1763+0x8cf))*Math['max'](_0x15dbfc['rate'],_0x15dbfc['rate2'])),_0x453afc=_0x15dbfc['lifetime']+(0x1bb9+-0x1*0x201e+0x1*0x466);_0x46d33f=(_0x46d33f+_0x132159)/(_0x132159+_0x453afc);const _0x4397e0=uA(_0x46d33f);_0x28a37c[_0x33ff8f*ce+(-0x18a0+-0x7fc+0x4*0x827)+_0x15dbfc['numParticl'+'esPot']*ce*(0x1eec+-0x45*-0x18+-0x2561)]=_0x4397e0[-0x13*0x1f7+0x6*0x20b+0x31*0x83],_0x28a37c[_0x33ff8f*ce+(0x78c+0x4*0x685+-0xb35*0x3)+_0x15dbfc['numParticl'+'esPot']*ce*(0x432*0x7+0x47*-0x70+0x1b5)]=_0x4397e0[-0x1e78+0xe6b+0x100e],_0x28a37c[_0x33ff8f*ce+(0x1831*-0x1+0xb25*0x2+0x1e9)+_0x15dbfc['numParticl'+'esPot']*ce*(0xa09*-0x2+-0x1e75+0x1945*0x2)]=_0x4397e0[-0x1ade+-0x5*-0x3ef+0x735],_0x28a37c[_0x33ff8f*ce+(-0x13c1+0x1*-0x40d+0x43*0x5b)+_0x15dbfc['numParticl'+'esPot']*ce*(0x11*-0x1c1+-0x61f*-0x1+0x77*0x33)]=_0x4397e0[0x20b9+-0x1*0x24eb+-0x435*-0x1];}else _0x28a37c[_0x33ff8f*ce]=ti['x'],_0x28a37c[_0x33ff8f*ce+(0x107*0xf+-0x1430+-0x1*-0x4c8)]=ti['y'],_0x28a37c[_0x33ff8f*ce+(0x2186+0xd7a+-0x2efe)]=ti['z'],_0x28a37c[_0x33ff8f*ce+(0x30a*-0x4+0x1571+0x2*-0x4a3)]=Y['lerp'](_0x15dbfc['startAngle']*Y['DEG_TO_RAD'],_0x15dbfc['startAngle'+'2']*Y['DEG_TO_RAD'],_0x19fba1),_0x28a37c[_0x33ff8f*ce+(0x1*-0xfd8+0x1*0x1186+-0x7*0x3d)+_0x15dbfc['numParticl'+'esPot']*ce]=_0x46d33f;}['update'](_0x5bfc27,_0x4d1ff5,_0x3e1211,_0x40673d,_0x5af135,_0x3c3443,_0x14798d,_0xf1bd8e){let _0x208030,_0x42c404,_0xdb930b;const _0x258819=this['_emitter'];if(_0x258819['meshInstan'+'ce']['node']){const _0x195869=_0x258819['meshInstan'+'ce']['node']['worldTrans'+'form'];for(let _0x2113b4=-0xdc*0x27+0x93a+0x184a;_0x2113b4<-0x16e*-0x16+0x9f7+-0x11*0x26f;_0x2113b4++)mf['data'][_0x2113b4]=_0x195869['data'][_0x2113b4];_f['copy'](mf),_f['invert'](),Ei=_0x258819['meshInstan'+'ce']['node']['localScale'],Z_=Math['max'](Math['max'](Ei['x'],Ei['y']),Ei['z']);}_0x3c3443=_0x258819['meshInstan'+'ce']['node']===null||_0x258819['localSpace']?D['ZERO']:_0x258819['meshInstan'+'ce']['node']['getPositio'+'n']();const _0x52dd89=_0x258819['camera']?_0x258819['camera']['_node']['getPositio'+'n']():D['ZERO'],_0x458deb=_0x258819['useMesh']?0x81b+-0x41b*0x5+0x8b*0x17:0x1b56*0x1+0xb6a+-0x26b1;let _0x2e0cb8,_0x21c92d,_0x42223d,_0x1c60d8,_0x4d1a13,_0x13b6bd,_0x2e9d65,_0x415c01,_0x2bdb16;const _0xe09405=_0x258819['precision']-(0xe0c*-0x1+0x9d2+0x43b);for(let _0xc07508=-0x6ca+-0x23c1+0x1*0x2a8b;_0xc07508<_0x258819['numParticl'+'es'];_0xc07508++){const _0x2d24a9=Math['floor'](_0x258819['vbCPU'][_0xc07508*_0x258819['numParticl'+'eVerts']*(_0x258819['useMesh']?0xe80+-0x2186+-0x35*-0x5c:-0x11*-0x4f+0x1bbe+-0x1*0x20f9)+(0x46c*-0x5+0x18b*-0x15+0x3686)]),_0x4896b0=_0x3e1211[_0x2d24a9*ce+(0x1*-0x14b9+-0x25be*-0x1+-0x1105)+_0x258819['numParticl'+'esPot']*(0x2*-0xe+0x1ddd*0x1+-0x5f3*0x5)*ce];Ns['x']=_0x4896b0,Ns['y']=_0x3e1211[_0x2d24a9*ce+(0xa1*0x7+0x135c+-0x17c2)+_0x258819['numParticl'+'esPot']*(0x1ec6*-0x1+0x9*0x3d6+-0x3be)*ce],Ns['z']=_0x3e1211[_0x2d24a9*ce+(0x1*0x52f+-0x85c+0x32f)+_0x258819['numParticl'+'esPot']*(0x20f7*-0x1+0x1269+0xe90)*ce];const _0x1bbe1e=_0x258819['rate']+(_0x258819['rate2']-_0x258819['rate'])*_0x4896b0,_0xf5cf1e=_0x258819['lifetime'];let _0x1d2f8c=_0x3e1211[_0x2d24a9*ce+(0x1*-0x4a7+0xe6f*0x2+-0x1834)+_0x258819['numParticl'+'esPot']*ce]+_0x14798d;const _0x40e7bb=fA(_0x1d2f8c/_0xf5cf1e);let _0x3b200=-0x1*-0xf99+-0x29*-0x65+0xa6*-0x31,_0xe0f93b=-0x1ac5+0x121f+0x9*0xf6;const _0x4f3f96=-0x573+-0x26df+0x2c52;(_0x1d2f8c-_0x14798d<=-0x6f9+-0x221b+-0x3bc*-0xb||_0x1d2f8c>=_0xf5cf1e)&&this['calcSpawnP'+'osition'](_0x3e1211,_0x40673d,_0x5af135,_0x3c3443,_0x2d24a9);let _0x565809=_0x1d2f8c>-0x36c*-0x1+-0x35+0x337*-0x1&&_0x1d2f8c<_0xf5cf1e;_0x565809&&(_0xdb930b=_0x40e7bb*_0xe09405,_0x2e0cb8=Math['floor'](_0xdb930b),_0x21c92d=Math['ceil'](_0xdb930b),_0xdb930b%=-0x3f6+-0x1*-0x2651+-0x225a,_0x208030=_0x258819['qRotSpeed'][_0x2e0cb8],_0x42c404=_0x258819['qRotSpeed'][_0x21c92d],_0x42223d=_0x208030+(_0x42c404-_0x208030)*_0xdb930b,_0x208030=_0x258819['qRotSpeed2'][_0x2e0cb8],_0x42c404=_0x258819['qRotSpeed2'][_0x21c92d],_0x1c60d8=_0x208030+(_0x42c404-_0x208030)*_0xdb930b,_0x208030=_0x258819['qScale'][_0x2e0cb8],_0x42c404=_0x258819['qScale'][_0x21c92d],_0x3b200=_0x208030+(_0x42c404-_0x208030)*_0xdb930b,_0x208030=_0x258819['qScale2'][_0x2e0cb8],_0x42c404=_0x258819['qScale2'][_0x21c92d],_0x4d1a13=_0x208030+(_0x42c404-_0x208030)*_0xdb930b,_0x208030=_0x258819['qAlpha'][_0x2e0cb8],_0x42c404=_0x258819['qAlpha'][_0x21c92d],_0x13b6bd=_0x208030+(_0x42c404-_0x208030)*_0xdb930b,_0x208030=_0x258819['qAlpha2'][_0x2e0cb8],_0x42c404=_0x258819['qAlpha2'][_0x21c92d],_0x2e9d65=_0x208030+(_0x42c404-_0x208030)*_0xdb930b,_0x208030=_0x258819['qRadialSpe'+'ed'][_0x2e0cb8],_0x42c404=_0x258819['qRadialSpe'+'ed'][_0x21c92d],_0x415c01=_0x208030+(_0x42c404-_0x208030)*_0xdb930b,_0x208030=_0x258819['qRadialSpe'+'ed2'][_0x2e0cb8],_0x42c404=_0x258819['qRadialSpe'+'ed2'][_0x21c92d],_0x2bdb16=_0x208030+(_0x42c404-_0x208030)*_0xdb930b,_0x415c01+=(_0x2bdb16-_0x415c01)*(_0x4896b0*(-0x95*0x38+-0x6ab*-0x1+0x1a51)%(-0x11f+-0x786+0x2*0x453)),Na['x']=_0x3e1211[_0x2d24a9*ce],Na['y']=_0x3e1211[_0x2d24a9*ce+(0x1ec6+0x2*0xba2+-0x3609)],Na['z']=_0x3e1211[_0x2d24a9*ce+(-0x1*0x1323+-0x23de+-0x1*-0x3703)],_0x258819['localSpace']?fo['copy'](Na):fo['copy'](Na)['sub'](_0x3c3443),fo['normalize']()['mulScalar'](_0x415c01),_0x2e0cb8*=0x131e+0x2*0x8e4+-0x1f1*0x13,_0x21c92d*=0xa46+-0xc9+0x2*-0x4bd,_0x208030=_0x258819['qLocalVelo'+'city'][_0x2e0cb8],_0x42c404=_0x258819['qLocalVelo'+'city'][_0x21c92d],_t['x']=_0x208030+(_0x42c404-_0x208030)*_0xdb930b,_0x208030=_0x258819['qLocalVelo'+'city'][_0x2e0cb8+(0x1404*0x1+0x1d3*-0x11+0xb00)],_0x42c404=_0x258819['qLocalVelo'+'city'][_0x21c92d+(-0x12d9+-0x25c2+0x389c)],_t['y']=_0x208030+(_0x42c404-_0x208030)*_0xdb930b,_0x208030=_0x258819['qLocalVelo'+'city'][_0x2e0cb8+(0x1aae+0x54e+-0x1ffa)],_0x42c404=_0x258819['qLocalVelo'+'city'][_0x21c92d+(-0x70a+0x1d*-0x4a+-0x316*-0x5)],_t['z']=_0x208030+(_0x42c404-_0x208030)*_0xdb930b,_0x208030=_0x258819['qLocalVelo'+'city2'][_0x2e0cb8],_0x42c404=_0x258819['qLocalVelo'+'city2'][_0x21c92d],Ua['x']=_0x208030+(_0x42c404-_0x208030)*_0xdb930b,_0x208030=_0x258819['qLocalVelo'+'city2'][_0x2e0cb8+(-0x1ffe+0x1*-0x2604+-0x4603*-0x1)],_0x42c404=_0x258819['qLocalVelo'+'city2'][_0x21c92d+(0xaea*0x2+-0x25c8+0x2b*0x5f)],Ua['y']=_0x208030+(_0x42c404-_0x208030)*_0xdb930b,_0x208030=_0x258819['qLocalVelo'+'city2'][_0x2e0cb8+(0x1d12+-0x1*0x392+-0xfb*0x1a)],_0x42c404=_0x258819['qLocalVelo'+'city2'][_0x21c92d+(0x1c8c+-0x2*0xab7+-0x23*0x34)],Ua['z']=_0x208030+(_0x42c404-_0x208030)*_0xdb930b,_0x208030=_0x258819['qVelocity'][_0x2e0cb8],_0x42c404=_0x258819['qVelocity'][_0x21c92d],ns['x']=_0x208030+(_0x42c404-_0x208030)*_0xdb930b,_0x208030=_0x258819['qVelocity'][_0x2e0cb8+(0x2*-0xe03+-0x1c8e*-0x1+-0x87)],_0x42c404=_0x258819['qVelocity'][_0x21c92d+(-0x20a0+0x9ef*0x1+-0x5*-0x48a)],ns['y']=_0x208030+(_0x42c404-_0x208030)*_0xdb930b,_0x208030=_0x258819['qVelocity'][_0x2e0cb8+(0x35b*-0x7+0x8a2+0x5*0x2f9)],_0x42c404=_0x258819['qVelocity'][_0x21c92d+(0xe*-0x24a+0x7df+-0x182f*-0x1)],ns['z']=_0x208030+(_0x42c404-_0x208030)*_0xdb930b,_0x208030=_0x258819['qVelocity2'][_0x2e0cb8],_0x42c404=_0x258819['qVelocity2'][_0x21c92d],ka['x']=_0x208030+(_0x42c404-_0x208030)*_0xdb930b,_0x208030=_0x258819['qVelocity2'][_0x2e0cb8+(-0x229*-0xb+-0x1ef6+0x734)],_0x42c404=_0x258819['qVelocity2'][_0x21c92d+(0x136b+0x1b29+-0x2e93)],ka['y']=_0x208030+(_0x42c404-_0x208030)*_0xdb930b,_0x208030=_0x258819['qVelocity2'][_0x2e0cb8+(-0xd62+-0x17f9+-0x5*-0x779)],_0x42c404=_0x258819['qVelocity2'][_0x21c92d+(-0x13fd+-0x1*0x263b+0x3a3a)],ka['z']=_0x208030+(_0x42c404-_0x208030)*_0xdb930b,_t['x']+=(Ua['x']-_t['x'])*Ns['x'],_t['y']+=(Ua['y']-_t['y'])*Ns['y'],_t['z']+=(Ua['z']-_t['z'])*Ns['z'],_0x258819['initialVel'+'ocity']>0x25ef+0x7*-0x517+0x2*-0x127&&(_0x258819['emitterSha'+'pe']===zw?(tt['copy'](Ns)['mulScalar'](-0x1*-0x615+0x266a+-0x2c7d)['sub'](D['ONE'])['normalize'](),_t['add'](tt['mulScalar'](_0x258819['initialVel'+'ocity']))):_t['add'](D['FORWARD']['mulScalar'](_0x258819['initialVel'+'ocity']))),ns['x']+=(ka['x']-ns['x'])*Ns['x'],ns['y']+=(ka['y']-ns['y'])*Ns['y'],ns['z']+=(ka['z']-ns['z'])*Ns['z'],_0x42223d+=(_0x1c60d8-_0x42223d)*Ns['y'],_0x3b200=(_0x3b200+(_0x4d1a13-_0x3b200)*(_0x4896b0*(0x371d+-0x137*0x17+-0x2f9*-0x4)%(-0x1ee+0x7c2*-0x4+0x123*0x1d)))*Z_,_0xe0f93b=(_0x2e9d65-_0x13b6bd)*(_0x4896b0*(0x18d6+-0x7*-0x593+-0x3bf3)%(0x3*-0x9c2+-0x1c15+0x1*0x395c)),_0x258819['meshInstan'+'ce']['node']&&(_0x258819['localSpace']?(_t['x']/=Ei['x'],_t['y']/=Ei['y'],_t['z']/=Ei['z']):mf['transformP'+'oint'](_t,_t)),_0x258819['localSpace']?(_f['transformP'+'oint'](ns,ns),_t['add'](ns)['add'](fo)):(_t['add'](ns['mul'](Ei)),_t['add'](fo['mul'](Ei))),fc['copy'](_t),Q_['copy'](Na)['add'](_t['mulScalar'](_0x14798d)),zt['copy'](Q_),_0x3e1211[_0x2d24a9*ce]=zt['x'],_0x3e1211[_0x2d24a9*ce+(0x8*0x65+-0x195a+-0x1*-0x1633)]=zt['y'],_0x3e1211[_0x2d24a9*ce+(-0x36*-0x7a+-0x227a+0x8c0)]=zt['z'],_0x3e1211[_0x2d24a9*ce+(-0x241f+-0x1e8a+-0x1*-0x42ac)]+=_0x42223d*_0x14798d,_0x258819['wrap']&&_0x258819['wrapBounds']&&(_0x258819['localSpace']||zt['sub'](_0x3c3443),zt['x']=gf(zt['x'],_0x258819['wrapBounds']['x'])-_0x258819['wrapBounds']['x']*(-0x5d*-0x3a+-0x2457+0xf45+0.5),zt['y']=gf(zt['y'],_0x258819['wrapBounds']['y'])-_0x258819['wrapBounds']['y']*(0x1039*0x1+-0xa8c+-0x5ad*0x1+0.5),zt['z']=gf(zt['z'],_0x258819['wrapBounds']['z'])-_0x258819['wrapBounds']['z']*(-0x2352+-0x23a3*0x1+0x46f5+0.5),_0x258819['localSpace']||zt['add'](_0x3c3443)),_0x258819['sort']>-0x5*-0x5d9+-0x2fa*-0x1+-0x1*0x2037&&(_0x258819['sort']===-0xd92*0x1+0x1216+0x37*-0x15?(kr['copy'](zt)['sub'](_0x52dd89),_0x258819['particleDi'+'stance'][_0x2d24a9]=-(kr['x']*kr['x']+kr['y']*kr['y']+kr['z']*kr['z'])):_0x258819['sort']===0xc73+0x495+-0x1106?_0x258819['particleDi'+'stance'][_0x2d24a9]=_0x1d2f8c:_0x258819['sort']===0xa35+-0x35*-0x8b+-0x26f9&&(_0x258819['particleDi'+'stance'][_0x2d24a9]=-_0x1d2f8c))),_0xf1bd8e?_0x1d2f8c<0x34*0xd+0x15fa*0x1+-0xc4f*0x2&&(_0x3e1211[_0x2d24a9*ce+(0x1*-0xe13+0x101*0x4+0x509*0x2)+_0x258819['numParticl'+'esPot']*(-0x21d7+-0xc2d+0x2*0x1703)*ce]=-(0x1*-0x135a+0x413+0xa3*0x18)):(_0x1d2f8c>=_0xf5cf1e&&(_0x1d2f8c-=Math['max'](_0xf5cf1e,(_0x258819['numParticl'+'es']-(0xe12*0x1+-0xa60*-0x1+-0x1871))*_0x1bbe1e),_0x3e1211[_0x2d24a9*ce+(0x8*-0x2e4+-0xfb6+0x297*0xf)+_0x258819['numParticl'+'esPot']*(0x1*-0x164a+0x349*-0x5+-0x17*-0x1af)*ce]=_0x258819['loop']?-0xa*0x145+-0x1b89+0x283c:-(-0xed9+-0x6b9+0x1593)),_0x1d2f8c<-0x125d*0x1+0x2f*0xbf+-0x10b4&&_0x258819['loop']&&(_0x3e1211[_0x2d24a9*ce+(-0x21b1+0x11f5+-0x8b*-0x1d)+_0x258819['numParticl'+'esPot']*(0x8c8*-0x2+0xdc6+0x3cc)*ce]=-0x2*0x39e+-0x3*-0x8bd+0x7*-0x2b6)),_0x3e1211[_0x2d24a9*ce+(-0x8a9*0x2+-0x400*0x4+0x7*0x4c3)+_0x258819['numParticl'+'esPot']*(0x1*-0x1a52+0x510+0x1544)*ce]<-0x26a1+0xe*0x16f+0x128f&&(_0x565809=!(0x15cd+-0xc41+-0x1*0x98b)),_0x3e1211[_0x2d24a9*ce+(0x1032+0x2469+-0x3498)+_0x258819['numParticl'+'esPot']*ce]=_0x1d2f8c;for(let _0x1644a0=0x2ef+0x248a+0xd7*-0x2f;_0x1644a0<_0x258819['numParticl'+'eVerts'];_0x1644a0++){const _0x3664ce=(_0xc07508*_0x258819['numParticl'+'eVerts']+_0x1644a0)*(_0x258819['useMesh']?0x13af+-0x4f*-0x56+-0x1*0x2e33:-0x3a*-0x5d+0x253*0x5+0x5*-0x689);let _0x38172f=_0x258819['vbCPU'][_0x3664ce],_0x4e0740=_0x258819['vbCPU'][_0x3664ce+(0x16d6+0x1d6e+-0x3443)],_0x36d119=_0x258819['vbCPU'][_0x3664ce+(-0x1c9d+-0xbb*0x22+-0xab1*-0x5)];_0x565809||(_0x38172f=_0x4e0740=_0x36d119=0x2*0x44f+0x1678+-0x1f16);const _0x2a880f=_0xc07508*_0x258819['numParticl'+'eVerts']*_0x458deb+_0x1644a0*_0x458deb;_0x5bfc27[_0x2a880f]=zt['x'],_0x5bfc27[_0x2a880f+(0x1cff*0x1+0x113e+0x171e*-0x2)]=zt['y'],_0x5bfc27[_0x2a880f+(-0xbca+-0x2*-0x350+0x1*0x52c)]=zt['z'],_0x5bfc27[_0x2a880f+(0x5f4*-0x1+-0x7*-0x34b+-0x1116)]=_0x40e7bb,_0x5bfc27[_0x2a880f+(0x1*0x1478+-0x4c*0x45+0x8)]=_0x258819['alignToMot'+'ion']?_0x4f3f96:_0x3e1211[_0x2d24a9*ce+(0x1863+0x1f85+-0x37e5)],_0x5bfc27[_0x2a880f+(-0x3f2+-0x29*-0xe+0x1b9*0x1)]=_0x3b200,_0x5bfc27[_0x2a880f+(0x1548+-0x227b+0xd39)]=_0xe0f93b,_0x5bfc27[_0x2a880f+(0x38d*-0x4+0x17e*-0x15+0x2d91)]=fc['x'],_0x5bfc27[_0x2a880f+(-0x3*-0x527+0x16*-0x15d+0xe91)]=_0x38172f,_0x5bfc27[_0x2a880f+(0x1*0x2489+0x6b*0x49+0x49*-0xeb)]=_0x4e0740,_0x5bfc27[_0x2a880f+(0x1d7b+0x22cf+0x202*-0x20)]=_0x36d119,_0x5bfc27[_0x2a880f+(0x24fc+0x148f+-0x3980)]=fc['y'],_0x5bfc27[_0x2a880f+(-0x1281+-0x1aa3*-0x1+-0x816)]=_0x2d24a9,_0x5bfc27[_0x2a880f+(0xbca*0x1+-0x43d*0x3+-0x1*-0xfa)]=fc['z'],_0x5bfc27[_0x2a880f+(0x1060+0x32*-0xb1+0x40*0x49)]=_0x258819['vbCPU'][_0x3664ce+(-0x13be+-0x1c61+-0x3022*-0x1)],_0x258819['useMesh']&&(_0x5bfc27[_0x2a880f+(-0x509*0x2+0x2e*0x9b+-0x11b9)]=_0x258819['vbCPU'][_0x3664ce+(-0x1a*-0x1+0xe7c+-0x175*0xa)],_0x5bfc27[_0x2a880f+(-0x9a8+-0x1*-0x1b87+-0x61*0x2f)]=_0x258819['vbCPU'][_0x3664ce+(-0x185*-0x2+-0xf1*-0x3+-0x5d8)]);}}if(_0x258819['sort']>nu&&_0x258819['camera']){const _0x22f265=_0x258819['useMesh']?0x17*0x152+0x18e*0x16+0x72c*-0x9:0xe7d*0x1+-0xe4b+-0x2e,_0x42df3e=_0x258819['particleDi'+'stance'];for(let _0x298b56=0x1778+-0x17*0x188+-0xbc*-0x10;_0x298b56<_0x258819['numParticl'+'es'];_0x298b56++)_0x4d1ff5[_0x298b56][-0x32d*-0x2+0x1*-0x1190+0x1*0xb36]=_0x298b56,_0x4d1ff5[_0x298b56][0x141a+0x2316+-0x372f]=_0x42df3e[Math['floor'](_0x258819['vbCPU'][_0x298b56*_0x258819['numParticl'+'eVerts']*_0x22f265+(-0x17*-0x5f+0x35*0x36+0x4ed*-0x4)])];_0x258819['vbOld']['set'](_0x258819['vbCPU']),_0x4d1ff5['sort']((_0x577fd8,_0x5328ec)=>_0x577fd8[0xc33*-0x1+0xa40+0x1f4]-_0x5328ec[0x21d+0x63*0x1d+-0xd53]);for(let _0x44f608=-0x47b*0x6+0xa73+0x106f;_0x44f608<_0x258819['numParticl'+'es'];_0x44f608++){const _0x9fb13a=_0x4d1ff5[_0x44f608][0x17*0x13e+0x5ed*0x2+0x1436*-0x2]*_0x258819['numParticl'+'eVerts']*_0x22f265,_0x282150=_0x44f608*_0x258819['numParticl'+'eVerts']*_0x22f265;for(let _0x216aa7=-0x1*-0x8e0+0x617*-0x3+0x965;_0x216aa7<_0x258819['numParticl'+'eVerts']*_0x22f265;_0x216aa7++)_0x258819['vbCPU'][_0x282150+_0x216aa7]=_0x258819['vbOld'][_0x9fb13a+_0x216aa7];}}}}const J_=new _i(),eg=new _i(),tg=new _i();class mA{constructor(_0x42bdab,_0x4df343){this['_emitter']=_0x42bdab,this['frameRando'+'mUniform']=new Float32Array(0x9d1+0xbc*0x11+-0x164a),this['emitterPos'+'Uniform']=new Float32Array(-0x259d*-0x1+-0x1f09+0x29*-0x29),this['emitterSca'+'leUniform']=new Float32Array([0x3c7*-0x1+0xefb*0x2+-0x1a2e,-0x2151+0x200+0xd3*0x26,-0x1*0x829+-0xae2+0x130c]),this['worldBound'+'sMulUnifor'+'m']=new Float32Array(0xb27+0x53c*-0x5+-0x3c2*-0x4),this['worldBound'+'sAddUnifor'+'m']=new Float32Array(-0x17de+-0x21c0+-0x39a1*-0x1),this['inBoundsSi'+'zeUniform']=new Float32Array(0x1691*0x1+0x1cf*0x1+-0x185d),this['inBoundsCe'+'nterUnifor'+'m']=new Float32Array(-0x3*-0x9c9+-0x23b0+0xcb*0x8),this['constantPa'+'rticleTexI'+'N']=_0x4df343['scope']['resolve']('particleTe'+'xIN'),this['constantPa'+'rticleTexO'+'UT']=_0x4df343['scope']['resolve']('particleTe'+'xOUT'),this['constantEm'+'itterPos']=_0x4df343['scope']['resolve']('emitterPos'),this['constantEm'+'itterScale']=_0x4df343['scope']['resolve']('emitterSca'+'le'),this['constantSp'+'awnBounds']=_0x4df343['scope']['resolve']('spawnBound'+'s'),this['constantSp'+'awnPosInne'+'rRatio']=_0x4df343['scope']['resolve']('spawnPosIn'+'nerRatio'),this['constantSp'+'awnBoundsS'+'phere']=_0x4df343['scope']['resolve']('spawnBound'+'sSphere'),this['constantSp'+'awnBoundsS'+'phereInner'+'Ratio']=_0x4df343['scope']['resolve']('spawnBound'+'sSphereInn'+'erRatio'),this['constantIn'+'itialVeloc'+'ity']=_0x4df343['scope']['resolve']('initialVel'+'ocity'),this['constantFr'+'ameRandom']=_0x4df343['scope']['resolve']('frameRando'+'m'),this['constantDe'+'lta']=_0x4df343['scope']['resolve']('delta'),this['constantRa'+'te']=_0x4df343['scope']['resolve']('rate'),this['constantRa'+'teDiv']=_0x4df343['scope']['resolve']('rateDiv'),this['constantLi'+'fetime']=_0x4df343['scope']['resolve']('lifetime'),this['constantGr'+'aphSampleS'+'ize']=_0x4df343['scope']['resolve']('graphSampl'+'eSize'),this['constantGr'+'aphNumSamp'+'les']=_0x4df343['scope']['resolve']('graphNumSa'+'mples'),this['constantIn'+'ternalTex0']=_0x4df343['scope']['resolve']('internalTe'+'x0'),this['constantIn'+'ternalTex1']=_0x4df343['scope']['resolve']('internalTe'+'x1'),this['constantIn'+'ternalTex2']=_0x4df343['scope']['resolve']('internalTe'+'x2'),this['constantIn'+'ternalTex3']=_0x4df343['scope']['resolve']('internalTe'+'x3'),this['constantEm'+'itterMatri'+'x']=_0x4df343['scope']['resolve']('emitterMat'+'rix'),this['constantEm'+'itterMatri'+'xInv']=_0x4df343['scope']['resolve']('emitterMat'+'rixInv'),this['constantNu'+'mParticles']=_0x4df343['scope']['resolve']('numParticl'+'es'),this['constantNu'+'mParticles'+'Pot']=_0x4df343['scope']['resolve']('numParticl'+'esPot'),this['constantLo'+'calVelocit'+'yDivMult']=_0x4df343['scope']['resolve']('localVeloc'+'ityDivMult'),this['constantVe'+'locityDivM'+'ult']=_0x4df343['scope']['resolve']('velocityDi'+'vMult'),this['constantRo'+'tSpeedDivM'+'ult']=_0x4df343['scope']['resolve']('rotSpeedDi'+'vMult'),this['constantSe'+'ed']=_0x4df343['scope']['resolve']('seed'),this['constantSt'+'artAngle']=_0x4df343['scope']['resolve']('startAngle'),this['constantSt'+'artAngle2']=_0x4df343['scope']['resolve']('startAngle'+'2'),this['constantOu'+'tBoundsMul']=_0x4df343['scope']['resolve']('outBoundsM'+'ul'),this['constantOu'+'tBoundsAdd']=_0x4df343['scope']['resolve']('outBoundsA'+'dd'),this['constantIn'+'BoundsSize']=_0x4df343['scope']['resolve']('inBoundsSi'+'ze'),this['constantIn'+'BoundsCent'+'er']=_0x4df343['scope']['resolve']('inBoundsCe'+'nter'),this['constantMa'+'xVel']=_0x4df343['scope']['resolve']('maxVel'),this['constantFa'+'ceTangent']=_0x4df343['scope']['resolve']('faceTangen'+'t'),this['constantFa'+'ceBinorm']=_0x4df343['scope']['resolve']('faceBinorm');}['_setInputB'+'ounds'](){this['inBoundsSi'+'zeUniform'][0x3*-0x985+-0x251d+0x41ac]=this['_emitter']['prevWorldB'+'oundsSize']['x'],this['inBoundsSi'+'zeUniform'][0x1*0x25e3+0x1*0x879+0x1*-0x2e5b]=this['_emitter']['prevWorldB'+'oundsSize']['y'],this['inBoundsSi'+'zeUniform'][0x1ca5*0x1+-0x916+-0x37*0x5b]=this['_emitter']['prevWorldB'+'oundsSize']['z'],this['constantIn'+'BoundsSize']['setValue'](this['inBoundsSi'+'zeUniform']),this['inBoundsCe'+'nterUnifor'+'m'][-0x2*0x388+0x162b+-0xf1b*0x1]=this['_emitter']['prevWorldB'+'oundsCente'+'r']['x'],this['inBoundsCe'+'nterUnifor'+'m'][-0x2c2+0x1*-0x110b+-0x186*-0xd]=this['_emitter']['prevWorldB'+'oundsCente'+'r']['y'],this['inBoundsCe'+'nterUnifor'+'m'][0x26ae*-0x1+0x1fd2+0x3*0x24a]=this['_emitter']['prevWorldB'+'oundsCente'+'r']['z'],this['constantIn'+'BoundsCent'+'er']['setValue'](this['inBoundsCe'+'nterUnifor'+'m']);}['randomize'](){this['frameRando'+'mUniform'][-0x2089+-0x1685+0x370e]=Math['random'](),this['frameRando'+'mUniform'][0x1b92+-0x19c2+-0x1cf]=Math['random'](),this['frameRando'+'mUniform'][-0x2*-0xdc6+0xe3*0x1b+-0x337b]=Math['random']();}['update'](_0x36f1cd,_0x15b771,_0x566ef9,_0x32d223,_0x1ccd55){Q['pushGpuMar'+'ker'](_0x36f1cd,'ParticleGP'+'U');const _0x1a7448=this['_emitter'];_0x36f1cd['setBlendSt'+'ate'](pt['NOBLEND']),_0x36f1cd['setDepthSt'+'ate'](Yt['NODEPTH']),_0x36f1cd['setCullMod'+'e'](bt),this['randomize'](),this['constantGr'+'aphSampleS'+'ize']['setValue']((-0x2040+0x62*-0x2c+0x3119)/_0x1a7448['precision']),this['constantGr'+'aphNumSamp'+'les']['setValue'](_0x1a7448['precision']),this['constantNu'+'mParticles']['setValue'](_0x1a7448['numParticl'+'es']),this['constantNu'+'mParticles'+'Pot']['setValue'](_0x1a7448['numParticl'+'esPot']),this['constantIn'+'ternalTex0']['setValue'](_0x1a7448['internalTe'+'x0']),this['constantIn'+'ternalTex1']['setValue'](_0x1a7448['internalTe'+'x1']),this['constantIn'+'ternalTex2']['setValue'](_0x1a7448['internalTe'+'x2']),this['constantIn'+'ternalTex3']['setValue'](_0x1a7448['internalTe'+'x3']);const _0x2d8df8=_0x1a7448['meshInstan'+'ce']['node'],_0x16a0d3=_0x2d8df8===null?D['ONE']:_0x2d8df8['localScale'];if(_0x1a7448['pack8']){this['worldBound'+'sMulUnifor'+'m'][0x43*0x63+0x1b10+0x47*-0xbf]=_0x1a7448['worldBound'+'sMul']['x'],this['worldBound'+'sMulUnifor'+'m'][0x19e5+-0x2cd*-0x1+-0x235*0xd]=_0x1a7448['worldBound'+'sMul']['y'],this['worldBound'+'sMulUnifor'+'m'][-0xd*0xc1+-0x1*0x24ee+0x2ebd]=_0x1a7448['worldBound'+'sMul']['z'],this['constantOu'+'tBoundsMul']['setValue'](this['worldBound'+'sMulUnifor'+'m']),this['worldBound'+'sAddUnifor'+'m'][0x1253+-0x2658+0x1405]=_0x1a7448['worldBound'+'sAdd']['x'],this['worldBound'+'sAddUnifor'+'m'][0x23ca+-0x23e4+-0x1b*-0x1]=_0x1a7448['worldBound'+'sAdd']['y'],this['worldBound'+'sAddUnifor'+'m'][-0x1d*-0xdf+-0x3ce+-0x1573]=_0x1a7448['worldBound'+'sAdd']['z'],this['constantOu'+'tBoundsAdd']['setValue'](this['worldBound'+'sAddUnifor'+'m']),this['_setInputB'+'ounds']();let _0x309130=_0x1a7448['maxVel']*Math['max'](Math['max'](_0x16a0d3['x'],_0x16a0d3['y']),_0x16a0d3['z']);_0x309130=Math['max'](_0x309130,-0x1*0x6f2+0x2650+-0x1f5d),this['constantMa'+'xVel']['setValue'](_0x309130);}const _0x2784fb=_0x2d8df8===null||_0x1a7448['localSpace']?D['ZERO']:_0x2d8df8['getPositio'+'n'](),_0x5ae85b=_0x2d8df8===null?te['IDENTITY']:_0x2d8df8['getWorldTr'+'ansform']();_0x1a7448['emitterSha'+'pe']===ai?(J_['setFromMat'+'4'](_0x15b771),this['constantSp'+'awnBounds']['setValue'](J_['data']),this['constantSp'+'awnPosInne'+'rRatio']['setValue'](_0x566ef9)):(this['constantSp'+'awnBoundsS'+'phere']['setValue'](_0x1a7448['emitterRad'+'ius']),this['constantSp'+'awnBoundsS'+'phereInner'+'Ratio']['setValue'](_0x1a7448['emitterRad'+'ius']===0x1263+-0x104*0x26+0x1435?0x1ca3+-0x1c3e+-0x65*0x1:_0x1a7448['emitterRad'+'iusInner']/_0x1a7448['emitterRad'+'ius'])),this['constantIn'+'itialVeloc'+'ity']['setValue'](_0x1a7448['initialVel'+'ocity']),eg['setFromMat'+'4'](_0x5ae85b),tg['invertMat4'](_0x5ae85b),this['emitterPos'+'Uniform'][0x35c+0x26*-0x38+0x4f4*0x1]=_0x2784fb['x'],this['emitterPos'+'Uniform'][0x20b4+0x748+0x73*-0x59]=_0x2784fb['y'],this['emitterPos'+'Uniform'][-0x7ec+-0x1a1d+0x220b]=_0x2784fb['z'],this['constantEm'+'itterPos']['setValue'](this['emitterPos'+'Uniform']),this['constantFr'+'ameRandom']['setValue'](this['frameRando'+'mUniform']),this['constantDe'+'lta']['setValue'](_0x32d223),this['constantRa'+'te']['setValue'](_0x1a7448['rate']),this['constantRa'+'teDiv']['setValue'](_0x1a7448['rate2']-_0x1a7448['rate']),this['constantSt'+'artAngle']['setValue'](_0x1a7448['startAngle']*Y['DEG_TO_RAD']),this['constantSt'+'artAngle2']['setValue'](_0x1a7448['startAngle'+'2']*Y['DEG_TO_RAD']),this['constantSe'+'ed']['setValue'](_0x1a7448['seed']),this['constantLi'+'fetime']['setValue'](_0x1a7448['lifetime']),this['emitterSca'+'leUniform'][0x1ac6+-0x1f81*-0x1+0x1*-0x3a47]=_0x16a0d3['x'],this['emitterSca'+'leUniform'][0x14f3+0x1*0x1e20+-0x6*0x883]=_0x16a0d3['y'],this['emitterSca'+'leUniform'][-0x2b*0x82+0x4ca*0x8+-0x1078]=_0x16a0d3['z'],this['constantEm'+'itterScale']['setValue'](this['emitterSca'+'leUniform']),this['constantEm'+'itterMatri'+'x']['setValue'](eg['data']),this['constantEm'+'itterMatri'+'xInv']['setValue'](tg['data']),this['constantLo'+'calVelocit'+'yDivMult']['setValue'](_0x1a7448['localVeloc'+'ityUMax']),this['constantVe'+'locityDivM'+'ult']['setValue'](_0x1a7448['velocityUM'+'ax']),this['constantRo'+'tSpeedDivM'+'ult']['setValue'](_0x1a7448['rotSpeedUM'+'ax'][0x225+0x7e3*0x3+-0x19ce]);let _0x40c897=_0x1a7448['swapTex']?_0x1a7448['particleTe'+'xOUT']:_0x1a7448['particleTe'+'xIN'];_0x40c897=_0x1a7448['beenReset']?_0x1a7448['particleTe'+'xStart']:_0x40c897;const _0x1096ba=_0x1a7448['swapTex']?_0x1a7448['particleTe'+'xIN']:_0x1a7448['particleTe'+'xOUT'];this['constantPa'+'rticleTexI'+'N']['setValue'](_0x40c897),Ar(_0x36f1cd,_0x1a7448['swapTex']?_0x1a7448['rtParticle'+'TexIN']:_0x1a7448['rtParticle'+'TexOUT'],_0x1ccd55?_0x1a7448['shaderPart'+'icleUpdate'+'OnStop']:_0x1a7448['loop']?_0x1a7448['shaderPart'+'icleUpdate'+'Respawn']:_0x1a7448['shaderPart'+'icleUpdate'+'NoRespawn']),_0x1a7448['material']['setParamet'+'er']('particleTe'+'xOUT',_0x40c897),_0x1a7448['material']['setParamet'+'er']('particleTe'+'xIN',_0x1096ba),_0x1a7448['beenReset']=!(-0xc*-0x86+0x6fa*0x4+-0x222f),_0x1a7448['swapTex']=!_0x1a7448['swapTex'],_0x1a7448['prevWorldB'+'oundsSize']['copy'](_0x1a7448['worldBound'+'sSize']),_0x1a7448['prevWorldB'+'oundsCente'+'r']['copy'](_0x1a7448['worldBound'+'s']['center']),_0x1a7448['pack8']&&this['_setInputB'+'ounds'](),Q['popGpuMark'+'er'](_0x36f1cd);}}const sg=['NONE','VERTEX','MAP'];class _A extends ya{['generateKe'+'y'](_0x58909a){let _0x93fb39='particle_'+ya['definesHas'+'h'](_0x58909a['defines'])+'_';for(const _0x5d7ccd in _0x58909a)_0x58909a['hasOwnProp'+'erty'](_0x5d7ccd)&&(_0x93fb39+=_0x58909a[_0x5d7ccd]);return _0x93fb39;}['createVert'+'exDefines'](_0x5bd609,_0x49cfa6){const _0x180421=new Map(_0x5bd609['defines']);return _0x5bd609['mesh']&&_0x180421['set']('USE_MESH',''),_0x5bd609['meshUv']&&_0x180421['set']('USE_MESH_U'+'V',''),_0x5bd609['localSpace']&&_0x180421['set']('LOCAL_SPAC'+'E',''),_0x5bd609['screenSpac'+'e']&&_0x180421['set']('SCREEN_SPA'+'CE',''),_0x5bd609['animTex']&&_0x180421['set']('ANIMTEX',''),_0x5bd609['soft']>-0x1eef*-0x1+-0x13d5*0x1+-0xb1a&&_0x180421['set']('SOFT',''),_0x5bd609['stretch']>0x4f6+-0x2a*0x17+-0x130&&_0x180421['set']('STRETCH',''),_0x5bd609['customFace']&&_0x180421['set']('CUSTOM_FAC'+'E',''),_0x5bd609['pack8']&&_0x180421['set']('PACK8',''),_0x5bd609['localSpace']&&_0x180421['set']('LOCAL_SPAC'+'E',''),_0x5bd609['animTexLoo'+'p']&&_0x180421['set']('ANIMTEX_LO'+'OP',''),_0x5bd609['wrap']&&_0x180421['set']('WRAP',''),_0x5bd609['alignToMot'+'ion']&&_0x180421['set']('ALIGN_TO_M'+'OTION',''),_0x180421['set']('NORMAL',sg[_0x5bd609['normal']]),_0x49cfa6['particle_v'+'ertexData']=Me,_0x5bd609['mesh']&&_0x5bd609['meshUv']&&(_0x49cfa6['particle_u'+'v']=is),_0x5bd609['useCpu']&&(_0x49cfa6['particle_v'+'ertexData2']=uh,_0x49cfa6['particle_v'+'ertexData3']=Ap,_0x49cfa6['particle_v'+'ertexData4']=Cp,_0x49cfa6['particle_v'+'ertexData5']=Pp),_0x180421;}['createFrag'+'mentDefine'+'s'](_0x54a938){const _0x3e3928=new Map(_0x54a938['defines']);return _0x54a938['soft']>-0x5b4+0x1fd5+-0x1a21&&_0x3e3928['set']('SOFT',''),_0x54a938['halflamber'+'t']&&_0x3e3928['set']('HALF_LAMBE'+'RT',''),_0x3e3928['set']('NORMAL',sg[_0x54a938['normal']]),_0x3e3928['set']('BLEND',Yy[_0x54a938['blend']]),_0x3e3928;}['createShad'+'erDefiniti'+'on'](_0x5826bb,_0x19f71){const _0x27bca9=_0x5826bb['isWebGPU']?it:Fe,_0x384715=Pe['get'](_0x5826bb,_0x27bca9),_0x25dafa={},_0x348936=this['createVert'+'exDefines'](_0x19f71,_0x25dafa),_0x4bb1b3=this['createFrag'+'mentDefine'+'s'](_0x19f71),_0x8abb0f='PARTICLE_'+(_0x19f71['useCpu']?'CPU':'GPU')+'\x0a';_0x348936['set'](_0x8abb0f,''),_0x4bb1b3['set'](_0x8abb0f,'');const _0x6b240a=new Map(_0x384715);return Jt['createDefi'+'nition'](_0x5826bb,{'name':'ParticleSh'+'ader','shaderLanguage':_0x27bca9,'attributes':_0x25dafa,'vertexCode':_0x384715['get']('particle_s'+'haderVS'),'fragmentCode':_0x384715['get']('particle_s'+'haderPS'),'fragmentDefines':_0x4bb1b3,'fragmentIncludes':_0x6b240a,'vertexIncludes':_0x6b240a,'vertexDefines':_0x348936});}}const gA=new _A();class SA extends tr{constructor(_0x406503){super(),h(this,'emitter',null),(this['emitter']=_0x406503,w['assert'](_0x406503));}['getShaderV'+'ariant'](_0x36f3a1){const {device:_0x2ae3bf,scene:_0x5c7459,cameraShaderParams:_0x101ef2,objDefs:_0x42b01d}=_0x36f3a1,{emitter:_0x92d77c}=this,_0xafc2fa={'defines':$t['getCoreDef'+'ines'](this,_0x36f3a1),'pass':Aa,'useCpu':this['emitter']['useCpu'],'normal':_0x92d77c['lighting']?_0x92d77c['normalMap']!==null?0x5*0x5b9+-0x2e9*0x5+0x2*-0x707:0x35+-0x1e*0xa7+-0x4a*-0x43:0xac7+0x13fe+-0x1ec5,'halflambert':this['emitter']['halfLamber'+'t'],'stretch':this['emitter']['stretch'],'alignToMotion':this['emitter']['alignToMot'+'ion'],'soft':this['emitter']['depthSofte'+'ning'],'mesh':this['emitter']['useMesh'],'meshUv':_0x42b01d&nm,'gamma':(_0x101ef2==null?void(-0x20fc+0x127d*0x1+-0xe7f*-0x1):_0x101ef2['shaderOutp'+'utGamma'])??Ll,'toneMap':(_0x101ef2==null?void(0x2029*0x1+-0x8*-0x13b+0x1*-0x2a01):_0x101ef2['toneMappin'+'g'])??sm,'fog':_0x5c7459&&!this['emitter']['noFog']?_0x5c7459['fog']['type']:'none','wrap':this['emitter']['wrap']&&this['emitter']['wrapBounds'],'localSpace':this['emitter']['localSpace'],'screenSpace':_0x92d77c['inTools']?!(-0x1414+0x15b0+-0x19b):this['emitter']['screenSpac'+'e'],'blend':this['emitter']['blendType'],'animTex':this['emitter']['_isAnimate'+'d'](),'animTexLoop':this['emitter']['animLoop'],'pack8':this['emitter']['pack8'],'customFace':this['emitter']['orientatio'+'n']!==yh},_0x43e31d=new Ad(_0x36f3a1['viewUnifor'+'mFormat'],_0x36f3a1['viewBindGr'+'oupFormat'],_0x36f3a1['vertexForm'+'at']),_0x2519fc=Hn(_0x2ae3bf);return _0x2519fc['register']('particle',gA),_0x2519fc['getProgram']('particle',_0xafc2fa,_0x43e31d,this['userId']);}}const ig=[[-(-0x1*-0x1afe+0x1a4d+-0x354a),-(-0x139*-0xf+-0x4*-0x5a+-0x26*0x85)],[-0x1*0x7+0x124d+0x617*-0x3,-(0x39d+-0x1c37+-0x1*-0x189b)],[-0xb*-0x1e7+-0x63a+-0xeb2,0x42a+-0x1e1e+0x19f5],[-(0x1e69+0x598+-0x100*0x24),0xb4a+0x30*-0x38+0x43*-0x3]];function xs(_0x2d2599,_0x370b4c,_0x22dc8,_0x1e1df9,_0x212710=Xt,_0x2f6140,_0x467af7){let _0x2a8808=Te;_0x467af7&&(_0x212710===Ne||_0x212710===_s)&&(_0x2a8808=vt);const _0x49218c=new _e(_0x2d2599,{'width':_0x370b4c,'height':_0x22dc8,'format':_0x212710,'cubemap':!(0x1bd7+-0x24a9+0x1*0x8d3),'mipmaps':!(0x1beb+0x201a+0x29c*-0x17),'minFilter':_0x2a8808,'magFilter':_0x2a8808,'addressU':ue,'addressV':ue,'name':'ParticleSy'+'stemTextur'+'e'}),_0x2f09eb=_0x49218c['lock']();if(_0x212710===Ne||_0x212710===_s){const _0x271fd7=new Uint8Array(_0x1e1df9['length']);for(let _0xe6001=0x2134+-0x1a0a+0x106*-0x7;_0xe6001<_0x1e1df9['length'];_0xe6001++)_0x271fd7[_0xe6001]=_0x1e1df9[_0xe6001]*_0x2f6140*(0x914+0x217d*-0x1+0x1968);_0x1e1df9=_0x271fd7;}return _0x2f09eb['set'](_0x1e1df9),_0x49218c['unlock'](),_0x49218c;}function rg(_0x328a52){return Math['max'](Math['min'](_0x328a52,0x11b8*0x1+0x2467+-0x361e),0x1a26+-0x25be+0xb98);}const ag=new qs([0xa21+-0x50e*0x2+-0x5*0x1,0x1229*-0x1+-0x1cf*0xb+-0x1307*-0x2,-0x2*-0x134f+-0x138+-0x2565,0x1ca8+-0xecd+-0xddb]),ng=new qs([0xffa+-0x4*0x24a+-0x6d2,-0x22a9+-0x5*-0x22d+0x17c9,-0x4*0x3e6+0x15f1*-0x1+0x136*0x1f,0x2*0x191+0x1208+-0x1529]),og=new na([0x17de+0x242a+-0x3c08,0x21*0x99+0xe3e+0x6cb*-0x5,-0x5b6+0x1aea+-0x1533,0x1906+-0xbb*-0x22+-0x31dc],[-0x1ecb+-0x887+0x59e*0x7,0x1a84+-0x10c1*0x1+-0x77*0x15,-0x1f9f*-0x1+-0x24b*0x5+0x2e1*-0x7,-0x96d+-0x1*0x15cf+0x1f3c],[-0x2*-0x1063+0xf*-0x74+-0x19fa,0x74d+0x1d*-0x107+0x167e,-0x1e89+-0xd69+0x1*0x2bf3,0x31*-0x2+0x2c6*0xc+-0x20e6]),yA=new na([0x2*-0x34a+0xe7f+-0x1*0x7eb,-0x1*-0x2227+-0x47*0x5b+-0x8e9,-0x2*0xdfb+0x18b*0x13+-0x15a,-0x1a68+-0x2656+0x40bf],[-0x1e31+0x1*0x719+0x1718,0x2*-0xa8d+-0x7aa+0x3*0x997,-0x25d2*-0x1+-0x1c81+-0x950,0x92*-0x3b+0x70a*-0x5+0x44d9],[0x14ea+0x4*0x7a0+-0x336a*0x1,0x1952+0xa67+-0x4*0x8ee,0x8c3*0x3+0x3f3+0x1e3b*-0x1,-0x208+0xf73*0x2+-0x99f*0x3]);let bi=-0x6c*0x1d+-0xcf4+0x1932;const pc=0x1dac+0x223e*0x1+-0x1ff3*0x2,Ai=new Float32Array(-0x1e90+-0x1fce+-0x3e61*-0x1),Ur=new te(),lg=new D(),mc=new D(),_c=new D();let uu,Zc;function he(_0x204af9,_0x3606b0){Zc[_0x204af9]!==void(-0x1c7b*-0x1+-0x92b*-0x1+-0x25a6)&&Zc[_0x204af9]!==null?uu[_0x204af9]=Zc[_0x204af9]:uu[_0x204af9]=_0x3606b0;}function Dv(_0x1edf44,_0x1c7695,_0x3f6922){return(_0x1edf44*(0x1bd1+-0x1507+-0x5cb)<<0x8fd+-0x1f3*-0x11+-0x2a10|_0x1c7695*(0x6a*0x59+0x142a+0x1*-0x3805)<<0x1a3b+0x39e*0x5+-0x3*0xec3|_0x3f6922*(-0x269f*-0x1+0x1*-0x1681+-0xf1f))/(-0x1*0xa26+-0x1*0x1eee+0x2915<<0x18a8+-0x10a9+-0x7e7);}function cg(_0x17ceee,_0x2a758f){const _0x16edaf=_0x17ceee['length']/(-0x16d4*0x1+-0x621*0x2+0x2319),_0x47d339=new Array(_0x16edaf*(0x19*-0x90+0x57*0x58+0x7ea*-0x2));for(let _0xf60d0d=0x3*0x315+0x1*-0x827+0x4*-0x46;_0xf60d0d<_0x16edaf;_0xf60d0d++)_0x47d339[_0xf60d0d*(-0x235f+0xe3a+0x1529)]=_0x17ceee[_0xf60d0d*(0xca3+-0x2702+0x1a62)],_0x47d339[_0xf60d0d*(-0x1*-0x2511+-0x5*-0x6fb+0x133*-0x3c)+(-0xa5e*0x1+-0x1f67+-0x29c6*-0x1)]=_0x17ceee[_0xf60d0d*(0x103c+0xc74+-0x98f*0x3)+(0x169c+0xcfc+-0x2397)],_0x47d339[_0xf60d0d*(0x5*-0x23b+-0xe5+0x304*0x4)+(-0xba2+0x9*-0x2b3+0x23ef)]=_0x17ceee[_0xf60d0d*(-0x14bb+0x1*0x94e+0xb70)+(0xcc4+0x23*-0x2e+0x2e*-0x24)],_0x47d339[_0xf60d0d*(-0x7a*-0x3+-0x1f07+0x1d9d)+(-0x1fa5+-0x2*-0xc7b+0x359*0x2)]=Dv(_0x2a758f[_0xf60d0d*(0x2af+-0x1*-0x220d+0x24b9*-0x1)],_0x2a758f[_0xf60d0d*(0x5bd+-0x1cd*0x8+0x8ae)+(0x3*0x91f+0x1912+-0x346e)],_0x2a758f[_0xf60d0d*(-0xd9*-0xd+0x38a+-0xe8c)+(-0x133*0x2+-0xc19+-0x2f*-0x4f)]);return _0x47d339;}function vA(_0xfa1355,_0x23e06e){const _0x555e52=new Array(_0x23e06e['length']*(-0x195+0x978*-0x3+-0x1*-0x1e01));for(let _0x5ae9e7=-0x3*0x233+0x5d9*0x1+-0x40*-0x3;_0x5ae9e7<_0x23e06e['length'];_0x5ae9e7++)_0x555e52[_0x5ae9e7*(-0x412+-0x1*-0x219f+0x1d89*-0x1)]=_0xfa1355[_0x5ae9e7*(0xf22+-0x1d*-0x13c+0x21*-0x18b)],_0x555e52[_0x5ae9e7*(-0xc5*0x25+-0x98d*0x3+0x3924)+(0x15a1+0x2a*0xea+-0x3c04)]=_0xfa1355[_0x5ae9e7*(0x2586+0x13f1+-0x3974)+(-0x1783+0x1*0x14ae+0x2d6)],_0x555e52[_0x5ae9e7*(0x1e7*-0xe+-0x112*-0x17+0x41*0x8)+(-0xe04+0x6e9+0x71d*0x1)]=_0xfa1355[_0x5ae9e7*(0x1a2f+-0x10b*0x24+0xb60)+(0x1b*0xf3+0x2146+-0x3ae5)],_0x555e52[_0x5ae9e7*(-0x11a5+0x7*-0x53+0x13ee)+(-0x2172+0x1616*0x1+0xb5f*0x1)]=_0x23e06e[_0x5ae9e7];return _0x555e52;}function xA(_0x1b49b9,_0x1ae0d1,_0x35eada,_0x1bf05c,_0x1fc1ec){const _0xb6e815=new Array(_0x1b49b9['length']*(-0x21d7+-0x27f*0x1+-0x40a*-0x9));for(let _0x2d18c4=-0x15+-0x6c8+0x7*0xfb;_0x2d18c4<_0x1b49b9['length'];_0x2d18c4++)_0xb6e815[_0x2d18c4*(-0x24d1*-0x1+-0x4*0x509+-0x10a9)]=_0x1b49b9[_0x2d18c4],_0xb6e815[_0x2d18c4*(-0x1*-0x1367+-0x25*-0x1+0x271*-0x8)+(-0x2404+-0x5*0x111+0x295a)]=_0x1ae0d1[_0x2d18c4],_0xb6e815[_0x2d18c4*(0x1c*0x137+0x56*0xc+0x4*-0x982)+(0xae6+0x11*-0xab+0x77*0x1)]=0x141b+0x3b4+-0x17cf,_0xb6e815[_0x2d18c4*(-0xc6e+-0x2*0x279+0xe*0x13e)+(0x4d*0x35+0xe45*-0x2+-0x1*-0xc9c)]=Dv(_0x35eada[_0x2d18c4],_0x1bf05c[_0x2d18c4],_0x1fc1ec[_0x2d18c4]);return _0xb6e815;}function TA(_0x351f1f,_0x13a561){const _0x3697a5=new Array(_0x351f1f['length']*(-0x1*0x98f+0xf*-0x21f+-0x4*-0xa59));for(let _0x21c804=-0xb1*0x25+0x1*-0x493+0x182*0x14;_0x21c804<_0x351f1f['length'];_0x21c804++)_0x3697a5[_0x21c804*(-0x829*-0x3+0x1*0x26d6+-0x3f4d*0x1)]=_0x351f1f[_0x21c804],_0x3697a5[_0x21c804*(0x2*-0x170+-0x1865+0x575*0x5)+(0x24af+-0x122e*-0x1+-0xdb7*0x4)]=_0x13a561[_0x21c804],_0x3697a5[_0x21c804*(0xe+-0x715*-0x2+0x3*-0x4bc)+(-0x24a1+-0x1db+0xd*0x2f6)]=0x7d6+0x473*0x1+-0xb9*0x11,_0x3697a5[_0x21c804*(-0x2*-0xe89+-0x6a*-0x1d+0x9*-0x490)+(0x9e*0x2b+0x71*0x3c+-0x14b*0x29)]=-0x1*0x1877+0x1c14+-0x1*0x39d;return _0x3697a5;}function wA(_0xdc252b){const _0x2987ad=Math['max'](_0xdc252b['rate'],_0xdc252b['rate2'])*_0xdc252b['numParticl'+'es']+_0xdc252b['lifetime'];return Date['now']()+_0x2987ad*(-0x6ed*0x5+-0x2162+0x1*0x47eb);}function EA(_0x3cfd59,_0x5cd78f){const _0x57f66f=new Float32Array(_0x3cfd59['length']);for(let _0x4a987c=0xc65+-0x430+0xbf*-0xb;_0x4a987c<_0x3cfd59['length'];_0x4a987c++)_0x57f66f[_0x4a987c]=_0x3cfd59[_0x4a987c]-_0x5cd78f[_0x4a987c];return _0x57f66f;}function Xr(_0x185816,_0x2ee1b5){const _0x2d9e8e=_0x2ee1b5['length'],_0x2f6fd0=_0x185816['length']/_0x2d9e8e;for(let _0x49375e=0x4*-0x51d+-0x1229*-0x1+0x24b*0x1;_0x49375e<_0x2f6fd0;_0x49375e++)for(let _0x4b583e=0x2a5*-0xd+-0x5da*-0x2+-0x3*-0x78f;_0x4b583e<_0x2d9e8e;_0x4b583e++){const _0x393a54=Math['abs'](_0x185816[_0x49375e*_0x2d9e8e+_0x4b583e]);_0x2ee1b5[_0x4b583e]=Math['max'](_0x2ee1b5[_0x4b583e],_0x393a54);}}function bA(_0x51bd8b,_0x41f453){const _0x272d2d=_0x41f453['length'],_0x3e99c2=_0x51bd8b['length']/_0x272d2d;for(let _0x91e2d1=-0xcd5+0x1fa1*0x1+-0x4b3*0x4;_0x91e2d1<_0x3e99c2;_0x91e2d1++)for(let _0x36c8d2=-0x1eda+0x699*-0x2+0x4*0xb03;_0x36c8d2<_0x272d2d;_0x36c8d2++)_0x51bd8b[_0x91e2d1*_0x272d2d+_0x36c8d2]/=_0x41f453[_0x36c8d2]===0xc7*0x4+-0xb*0x1e4+-0x2*-0x8d8?-0x2181+-0x12*-0x1c1+-0x2*-0xf8:_0x41f453[_0x36c8d2],_0x51bd8b[_0x91e2d1*_0x272d2d+_0x36c8d2]*=0x1ebe+0x17e*-0x17+-0x4*-0xe5+0.5,_0x51bd8b[_0x91e2d1*_0x272d2d+_0x36c8d2]+=-0xfc2+0x1*0x65b+-0x1*-0x967+0.5;}function Br(_0x4b9ce6,_0x550d74,_0x34ad03){const _0x2f4c0e=EA(_0x550d74,_0x4b9ce6);return Xr(_0x2f4c0e,_0x34ad03),bA(_0x2f4c0e,_0x34ad03),_0x2f4c0e;}const AA=new Kt();class CA{constructor(_0x112d3c,_0x57c84f){h(this,'material',null),h(this,'internalTe'+'x0',null),h(this,'internalTe'+'x1',null),h(this,'internalTe'+'x2',null),h(this,'colorParam',null),this['graphicsDe'+'vice']=_0x112d3c;const _0x42cec3=_0x112d3c,_0x41a970=0x23da+0x1*0x266d+-0x4a27;this['precision']=_0x41a970,this['_addTimeTi'+'me']=-0x11*-0x15d+0x1*-0x95+-0x1698,uu=this,Zc=_0x57c84f,he('numParticl'+'es',0x2*0xcc1+0x1010+-0x2991),this['numParticl'+'es']>_0x112d3c['maxTexture'+'Size']&&(w['warn']('WARNING:\x20c'+'an\x27t\x20creat'+'e\x20more\x20tha'+'n\x20'+_0x112d3c['maxTexture'+'Size']+('\x20particles'+'\x20on\x20this\x20d'+'evice.')),this['numParticl'+'es']=_0x112d3c['maxTexture'+'Size']),he('rate',-0x49*0x22+0x9*-0x1da+0x1a5d),he('rate2',this['rate']),he('lifetime',0xca0+-0x79d*-0x3+0x2345*-0x1),he('emitterExt'+'ents',new D(0xb85+0x1830+-0x23b5,0x22d*-0x7+0x5ba*-0x5+-0x1*-0x2bdd,-0x1631+0x4*0x6e2+-0x557)),he('emitterExt'+'entsInner',new D(0x126b*0x1+0x5*-0x367+-0x168,0x34*0xb4+-0x25c4+0x134,-0x1a03*0x1+-0xcf8+0x26fb)),he('emitterRad'+'ius',-0x1*0x137e+-0x851+-0x3f*-0x71),he('emitterRad'+'iusInner',0x1bcb+0x1*-0x1acd+-0xfe),he('emitterSha'+'pe',ai),he('initialVel'+'ocity',-0x2ea*0x3+0x5a8*-0x3+0x19b7),he('wrap',!(0xc*0x7+0x1b91+-0x1be4)),he('localSpace',!(-0xa9d*-0x1+0x6*0x50e+-0x28f0)),he('screenSpac'+'e',!(-0x2*-0x1094+-0x5c*-0x50+0x17*-0x2b1)),he('wrapBounds',null),he('colorMap',this['defaultPar'+'amTexture']),he('normalMap',null),he('loop',!(-0x1*-0x13e3+0x1d9d+-0x3180)),he('preWarm',!(-0xd4c+0xfe*0x13+0xcb*-0x7)),he('sort',nu),he('mode',rv),he('scene',null),he('lighting',!(0x16bb+-0x2060+-0xf7*-0xa)),he('halfLamber'+'t',!(-0x1*-0xb6e+0x1352+-0x1ebf)),he('intensity',-0x107*0x11+-0xf8f+-0x1*-0x2107),he('stretch',0x2203*0x1+-0x5*-0x337+-0x3*0x10b2),he('alignToMot'+'ion',!(0x3c9*-0x3+0x185d+0x1*-0xd01)),he('depthSofte'+'ning',0x1a9*-0x3+0x13ad+-0xeb2),he('mesh',null),he('particleNo'+'rmal',new D(-0x1e95*-0x1+-0xd0*-0x29+-0x3fe5,-0x1bb0+-0x1b31*-0x1+0x20*0x4,0x786+-0x2433+0x1cad)),he('orientatio'+'n',yh),he('depthWrite',!(0x3ad+-0x215a+-0x106*-0x1d)),he('noFog',!(0x18*-0x164+0x85f+0x42*0x61)),he('blendType',Zs),he('node',null),he('startAngle',0x27c*0x5+-0x809*-0x1+0x1475*-0x1),he('startAngle'+'2',this['startAngle']),he('animTilesX',-0x4c6*-0x4+0xc0*-0x3+-0x1*0x10d7),he('animTilesY',0x17*0x5c+-0x2b8*-0xa+0x21*-0x113),he('animStartF'+'rame',-0xe27*-0x1+0xc35+-0x2*0xd2e),he('animNumFra'+'mes',-0x1df+0x1340+-0x1160),he('animNumAni'+'mations',-0x1*0x1087+-0x3*0xda+0x1316),he('animIndex',-0x5*0x22c+0x4*-0x6f7+0x26b8),he('randomizeA'+'nimIndex',!(-0x1b*-0xad+0x1*0x9fe+0x70f*-0x4)),he('animSpeed',-0xf4c+-0xae5*-0x3+-0x1162),he('animLoop',!(0x306+0x33b*-0x2+0x370)),this['_gpuUpdate'+'r']=new mA(this,_0x42cec3),this['_cpuUpdate'+'r']=new pA(this),this['emitterPos'+'Uniform']=new Float32Array(0xe4e+-0x1ff0+0x11a5),this['wrapBounds'+'Uniform']=new Float32Array(0x4f0+0xe*-0x107+0x975),this['emitterSca'+'leUniform']=new Float32Array([0x49b*0x4+-0x21e0+0xf75,0x1acc+0xac7+-0x2*0x12c9,-0x1edc+0x12c6+0xc17]),he('colorGraph',yA),he('colorGraph'+'2',this['colorGraph']),he('scaleGraph',ng),he('scaleGraph'+'2',this['scaleGraph']),he('alphaGraph',ng),he('alphaGraph'+'2',this['alphaGraph']),he('localVeloc'+'ityGraph',og),he('localVeloc'+'ityGraph2',this['localVeloc'+'ityGraph']),he('velocityGr'+'aph',og),he('velocityGr'+'aph2',this['velocityGr'+'aph']),he('rotationSp'+'eedGraph',ag),he('rotationSp'+'eedGraph2',this['rotationSp'+'eedGraph']),he('radialSpee'+'dGraph',ag),he('radialSpee'+'dGraph2',this['radialSpee'+'dGraph']),this['animTilesP'+'arams']=new Float32Array(0x6f2+0x1bdc+-0x22cc),this['animParams']=new Float32Array(0x1e15*-0x1+0x6fd+0x171c),this['animIndexP'+'arams']=new Float32Array(0x2321+0x16ea+-0x3a09),this['vbToSort']=null,this['vbOld']=null,this['particleDi'+'stance']=null,this['camera']=null,this['swapTex']=!(-0x22cb+0x15ea+0xce2),this['useMesh']=!(0x1842+0x38*-0xad+0xd96),this['useCpu']=!_0x112d3c['supportsGp'+'uParticles'],this['pack8']=!(0x479*0x6+0x1df*-0x2+-0x1718),this['localBound'+'s']=new De(),this['worldBound'+'sNoTrail']=new De(),this['worldBound'+'sTrail']=[new De(),new De()],this['worldBound'+'s']=new De(),this['worldBound'+'sSize']=new D(),this['prevWorldB'+'oundsSize']=new D(),this['prevWorldB'+'oundsCente'+'r']=new D(),this['prevEmitte'+'rExtents']=this['emitterExt'+'ents'],this['prevEmitte'+'rRadius']=this['emitterRad'+'ius'],this['worldBound'+'sMul']=new D(),this['worldBound'+'sAdd']=new D(),this['timeToSwit'+'chBounds']=-0x189f+-0x108a*0x1+0x29*0x101,this['shaderPart'+'icleUpdate'+'Respawn']=null,this['shaderPart'+'icleUpdate'+'NoRespawn']=null,this['shaderPart'+'icleUpdate'+'OnStop']=null,this['numParticl'+'eVerts']=0x22a*-0x2+0x7*0x443+-0x1*0x1981,this['numParticl'+'eIndices']=-0x1fa0+0x1de0+0x1c0,this['material']=null,this['meshInstan'+'ce']=null,this['drawOrder']=0x1193*-0x2+0x20c2+0x3*0xcc,this['seed']=Math['random'](),this['fixedTimeS'+'tep']=(0x1b5b+-0xfa*0x13+0x233*-0x4)/(0x1*-0xd8+0xd46*0x2+-0x1978),this['maxSubStep'+'s']=-0x47*0x5d+-0x12c6+0x13*0x259,this['simTime']=0x5*0x2bc+0x62*-0x7+-0xafe,this['simTimeTot'+'al']=-0x451*-0x5+-0x25eb*0x1+-0x2b9*-0x6,this['beenReset']=!(-0x18f*0x5+0x2*0xc77+-0x5b6*0x3),this['_layer']=null,this['rebuild']();}get['defaultPar'+'amTexture'](){return w['assert'](this['graphicsDe'+'vice']),AA['get'](this['graphicsDe'+'vice'],()=>{const _0x11ec94=new Float32Array(0x757*-0x1+0x55d+0x5fa);for(let _0x17a542=-0x200b+0x1cc1+0x34a;_0x17a542<-0x60e*0x1+0x2*0x245+0x194;_0x17a542++)for(let _0x2ba23f=-0x7eb*-0x2+-0x23f0+0x1*0x141a;_0x2ba23f<0xf53+-0x1e1f+0xedc;_0x2ba23f++){const _0x5fb07=_0x2ba23f+(0x75*0x5+-0x1*0x246b+0x2223)-(0x2df+0x12e+-0x93*0x7+0.5),_0x4105e9=_0x17a542+(-0xd*0x180+-0xfc9*-0x1+0x1*0x3b8)-(-0x25e+-0x2ac+0x512*0x1+0.5),_0x371389=rg(0x1305+0x1e1*-0x1+-0x1123-rg(Math['sqrt'](_0x5fb07*_0x5fb07+_0x4105e9*_0x4105e9)/(-0x3*-0x577+-0x99*-0x31+0x2d9e*-0x1))-(0xd*0x2fd+-0x11b5+-0x1524+0.5)),_0x2da7f3=_0x17a542*(0x150f+0x26bc+-0x13e9*0x3)+_0x2ba23f;_0x11ec94[_0x2da7f3*(0x2d8*0x2+-0x22cc+0x10*0x1d2)]=0x262e+0x14*0x13d+-0x7b*0x83,_0x11ec94[_0x2da7f3*(-0x156d+0x11+0x26*0x90)+(-0xe87+0x75*0x33+-0x8c7)]=-0x492+-0x472*-0x2+-0x451,_0x11ec94[_0x2da7f3*(-0x329*0x5+-0x8fd+0xc67*0x2)+(-0x1e48+0x2*-0x3d1+0xc*0x329)]=0x9b4+-0x11*-0x1ba+-0x270d,_0x11ec94[_0x2da7f3*(0x70+0x209b*-0x1+0x202f)+(0x90f+-0xb50+0x244)]=_0x371389;}const _0xd7e87d=xs(this['graphicsDe'+'vice'],0x229a*-0x1+0x49*0x16+-0xe32*-0x2,0x19a1+-0xb30+-0xe61,_0x11ec94,_s,-0x56*-0x70+0xe95*0x2+-0x42c9,!(-0x3*0x49d+-0x26f8+0x34cf));return _0xd7e87d['minFilter']=vt,_0xd7e87d['magFilter']=vt,_0xd7e87d;});}['onChangeCa'+'mera'](){this['resetMater'+'ial']();}['calculateB'+'oundsMad'](){this['worldBound'+'sMul']['x']=(0x1*0x1482+-0x1*-0x13c7+-0x2848)/this['worldBound'+'sSize']['x'],this['worldBound'+'sMul']['y']=(0xbae+0x29*0x2+0xbff*-0x1)/this['worldBound'+'sSize']['y'],this['worldBound'+'sMul']['z']=(-0xe3f*-0x1+-0x1*-0x1433+0x2271*-0x1)/this['worldBound'+'sSize']['z'],this['worldBound'+'sAdd']['copy'](this['worldBound'+'s']['center'])['mul'](this['worldBound'+'sMul'])['mulScalar'](-(0xb9e+-0x16dc+0xb3f)),this['worldBound'+'sAdd']['x']+=-0x393+-0x6*-0x45+-0xa7*-0x3+0.5,this['worldBound'+'sAdd']['y']+=0x5*0x581+0xaf5+-0xc5*0x32+0.5,this['worldBound'+'sAdd']['z']+=-0x19d4+-0x277*-0x9+0x3a5+0.5;}['calculateW'+'orldBounds'](){if(!this['node'])return;if(this['prevWorldB'+'oundsSize']['copy'](this['worldBound'+'sSize']),this['prevWorldB'+'oundsCente'+'r']['copy'](this['worldBound'+'s']['center']),!this['useCpu']){let _0x41c574=!(0x5f2+-0xdf4+0x1*0x803);this['emitterSha'+'pe']===ai?_0x41c574=!this['emitterExt'+'ents']['equals'](this['prevEmitte'+'rExtents']):_0x41c574=this['emitterRad'+'ius']!==this['prevEmitte'+'rRadius'],_0x41c574&&this['calculateL'+'ocalBounds']();}const _0x2a5942=this['node']['getWorldTr'+'ansform']();this['localSpace']?this['worldBound'+'sNoTrail']['copy'](this['localBound'+'s']):this['worldBound'+'sNoTrail']['setFromTra'+'nsformedAa'+'bb'](this['localBound'+'s'],_0x2a5942),this['worldBound'+'sTrail'][0x15da+0x5*-0x67f+0xaa1]['add'](this['worldBound'+'sNoTrail']),this['worldBound'+'sTrail'][0x2031+0x1f2c+-0xfd7*0x4]['add'](this['worldBound'+'sNoTrail']);const _0x291737=this['simTimeTot'+'al'];_0x291737>=this['timeToSwit'+'chBounds']&&(this['worldBound'+'sTrail'][-0x19*0xe9+0x1d*0x13d+-0x8*0x1a5]['copy'](this['worldBound'+'sTrail'][0x1*0x1ea3+0x1a*-0xec+-0x1*0x6aa]),this['worldBound'+'sTrail'][0x4cd*-0x5+0x2b*0x49+0x61*0x1f]['copy'](this['worldBound'+'sNoTrail']),this['timeToSwit'+'chBounds']=_0x291737+this['lifetime']),this['worldBound'+'s']['copy'](this['worldBound'+'sTrail'][-0x7e8*0x4+-0x4e1*0x1+0x2481]),this['worldBound'+'sSize']['copy'](this['worldBound'+'s']['halfExtent'+'s'])['mulScalar'](-0x3*0x229+-0x122d+0x9a*0x29),this['localSpace']?(this['meshInstan'+'ce']['aabb']['setFromTra'+'nsformedAa'+'bb'](this['worldBound'+'s'],_0x2a5942),this['meshInstan'+'ce']['mesh']['aabb']['setFromTra'+'nsformedAa'+'bb'](this['worldBound'+'s'],_0x2a5942)):(this['meshInstan'+'ce']['aabb']['copy'](this['worldBound'+'s']),this['meshInstan'+'ce']['mesh']['aabb']['copy'](this['worldBound'+'s'])),this['meshInstan'+'ce']['_aabbVer']=0xa0b+-0x2081*0x1+0x1b*0xd5-this['meshInstan'+'ce']['_aabbVer'],this['pack8']&&this['calculateB'+'oundsMad']();}['resetWorld'+'Bounds'](){this['node']&&(this['worldBound'+'sNoTrail']['setFromTra'+'nsformedAa'+'bb'](this['localBound'+'s'],this['localSpace']?te['IDENTITY']:this['node']['getWorldTr'+'ansform']()),this['worldBound'+'sTrail'][-0x1c81*0x1+0x151c+-0x765*-0x1]['copy'](this['worldBound'+'sNoTrail']),this['worldBound'+'sTrail'][0x8*0xfe+-0x1ed6+-0xd*-0x1c3]['copy'](this['worldBound'+'sNoTrail']),this['worldBound'+'s']['copy'](this['worldBound'+'sTrail'][0x7*0x2c5+0x43*0x8e+-0x388d]),this['worldBound'+'sSize']['copy'](this['worldBound'+'s']['halfExtent'+'s'])['mulScalar'](0x2532*0x1+0x1698+-0x3bc8),this['prevWorldB'+'oundsSize']['copy'](this['worldBound'+'sSize']),this['prevWorldB'+'oundsCente'+'r']['copy'](this['worldBound'+'s']['center']),this['simTimeTot'+'al']=-0x1cbd+-0x1d*-0x76+0xf5f,this['timeToSwit'+'chBounds']=-0x1*-0x2707+-0x10*0xe2+0x84d*-0x3);}['calculateL'+'ocalBounds'](){let _0x286d1e=Number['MAX_VALUE'],_0x50980d=Number['MAX_VALUE'],_0x1ae261=Number['MAX_VALUE'],_0x44fe21=-Number['MAX_VALUE'],_0x23281a=-Number['MAX_VALUE'],_0x3be75f=-Number['MAX_VALUE'],_0x576857=0xe9a+0x56b+-0x19*0xcd,_0x312cba=-0x232*-0x8+-0x1*0x1bdd+-0x3*-0x36f;const _0x4d66bd=this['lifetime']/this['precision'],_0xb5c719=[this['qVelocity'],this['qVelocity2']],_0x1834ce=[this['qLocalVelo'+'city'],this['qLocalVelo'+'city2']],_0x19d77d=[-0x34a*-0x3+0xcae+-0xde*0x1a,-0x69f*0x4+0x17*0xe9+0x7*0xcb],_0x1f27dc=[-0x1*-0xb47+-0x1a46+0xeff,0xdd3+-0x154b+-0x778*-0x1],_0x25820f=[0x1*0xda5+0x147*0x1+-0xbf*0x14,-0x107*-0x1+-0x11*-0x1da+-0x2081],_0x37c3f5=[0x25bd*-0x1+-0x2f*-0x41+-0x3*-0x89a,0x1*0x1563+-0xa*0x272+-0x1*-0x311],_0x3b1fcf=[0x2*0x739+-0x1102+0x2*0x148,-0xeec+0x35*0x6a+-0x706];let _0x55979e,_0x581f89,_0x282bc8;for(let _0x4bfd26=-0x51a+0x2319+-0x1dff;_0x4bfd26<this['precision']+(-0xecb*0x2+-0x9d*-0x13+-0x29*-0x70);_0x4bfd26++){const _0x1721ea=Math['min'](_0x4bfd26,this['precision']-(-0xdc0+-0x1*0xe7f+-0x1*-0x1c40));for(let _0x4556b8=-0x2607+-0xa2c+-0x1b*-0x1c9;_0x4556b8<-0x1eb*-0x4+-0x197e+0x11d4;_0x4556b8++)_0x55979e=_0x1834ce[_0x4556b8][_0x1721ea*(0x151d+0x270a+-0x6*0xa06)+(-0x2b3*-0x7+-0x16e1*0x1+0x3fc)]*_0x4d66bd+_0x19d77d[_0x4556b8],_0x581f89=_0x1834ce[_0x4556b8][_0x1721ea*(0x13a6+-0x1ec+0x11b7*-0x1)+(-0x2e2+-0x11*0xaa+0xe2d)]*_0x4d66bd+_0x1f27dc[_0x4556b8],_0x282bc8=_0x1834ce[_0x4556b8][_0x1721ea*(-0x1*0x248b+-0x230d*-0x1+0x181)+(-0x1697*-0x1+-0x1001+-0x2*0x34a)]*_0x4d66bd+_0x25820f[_0x4556b8],_0x286d1e=Math['min'](_0x55979e,_0x286d1e),_0x50980d=Math['min'](_0x581f89,_0x50980d),_0x1ae261=Math['min'](_0x282bc8,_0x1ae261),_0x44fe21=Math['max'](_0x55979e,_0x44fe21),_0x23281a=Math['max'](_0x581f89,_0x23281a),_0x3be75f=Math['max'](_0x282bc8,_0x3be75f),_0x19d77d[_0x4556b8]=_0x55979e,_0x1f27dc[_0x4556b8]=_0x581f89,_0x25820f[_0x4556b8]=_0x282bc8;for(let _0x20e815=-0xd3*0x11+0x2190+-0x138d;_0x20e815<-0x37*0x2+-0xaf8+0xb68;_0x20e815++)_0x3b1fcf[_0x20e815]+=_0x4d66bd*Math['sqrt'](_0xb5c719[_0x20e815][_0x1721ea*(0x502*0x4+-0x1a26+0x621)+(-0x3*-0x6b5+0x256f+-0x6a*0x8b)]*_0xb5c719[_0x20e815][_0x1721ea*(-0x1760+-0x686+0x1de9)+(-0xf64+-0x1e5b*-0x1+-0x1*0xef7)]+_0xb5c719[_0x20e815][_0x1721ea*(0x2cf*0xa+-0x932*0x1+-0x12e1)+(-0x1*-0xad3+0xa0c*0x3+0x2ed*-0xe)]*_0xb5c719[_0x20e815][_0x1721ea*(0x6*0x590+0xe24+-0x2f81)+(0x270b+-0x1b52*-0x1+-0x425c)]+_0xb5c719[_0x20e815][_0x1721ea*(-0x1*-0x656+-0x37*0x47+-0x12*-0x7f)+(-0x1ba+0x23b4+0x8*-0x43f)]*_0xb5c719[_0x20e815][_0x1721ea*(0x7ba+-0x8a9+0x16*0xb)+(-0xa7*0x9+0x175f+-0x1*0x117e)]);_0x37c3f5[-0x1d6b+0x1*0x1ec5+-0x15a]+=this['qRadialSpe'+'ed'][_0x1721ea]*_0x4d66bd,_0x37c3f5[-0x3dd*0x7+0xe5a*0x1+0xcb2]+=this['qRadialSpe'+'ed2'][_0x1721ea]*_0x4d66bd,_0x576857=Math['max'](_0x576857,Math['max'](Math['abs'](_0x37c3f5[-0x7df+-0x3*0x1fe+-0x5*-0x2c5]),Math['abs'](_0x37c3f5[0xa35+-0x2016+0x15e2*0x1]))),_0x312cba=Math['max'](_0x312cba,this['qScale'][_0x1721ea]);}this['emitterSha'+'pe']===ai?(_0x55979e=this['emitterExt'+'ents']['x']*(-0x45*0x65+0x161*0x6+-0x3*-0x651+0.5),_0x581f89=this['emitterExt'+'ents']['y']*(-0xe5c*0x1+0x103*-0x21+-0x11*-0x2cf+0.5),_0x282bc8=this['emitterExt'+'ents']['z']*(0x30*-0xce+0x1*-0xdf3+0x3493+0.5)):(_0x55979e=this['emitterRad'+'ius'],_0x581f89=this['emitterRad'+'ius'],_0x282bc8=this['emitterRad'+'ius']);const _0x52a63d=Math['max'](_0x3b1fcf[0x1b7a+-0x1b5e+-0xe*0x2],_0x3b1fcf[0x6bb*0x5+-0x1006+-0xbc*0x18]);mc['x']=_0x286d1e-_0x312cba-_0x55979e-_0x576857-_0x52a63d,mc['y']=_0x50980d-_0x312cba-_0x581f89-_0x576857-_0x52a63d,mc['z']=_0x1ae261-_0x312cba-_0x282bc8-_0x576857-_0x52a63d,_c['x']=_0x44fe21+_0x312cba+_0x55979e+_0x576857+_0x52a63d,_c['y']=_0x23281a+_0x312cba+_0x581f89+_0x576857+_0x52a63d,_c['z']=_0x3be75f+_0x312cba+_0x282bc8+_0x576857+_0x52a63d,this['localBound'+'s']['setMinMax'](mc,_c);}['rebuild'](){const _0x59d4a9=this['graphicsDe'+'vice'];this['colorMap']===null&&(this['colorMap']=this['defaultPar'+'amTexture']),this['spawnBound'+'s']=this['emitterSha'+'pe']===ai?this['emitterExt'+'ents']:this['emitterRad'+'ius'],this['useCpu']=this['useCpu']||this['sort']>nu||_0x59d4a9['maxVertexT'+'extures']<=0xefd+0x1c9+0x1b*-0x9f||_0x59d4a9['fragmentUn'+'iformsCoun'+'t']<0x17d*0xa+-0x8b2*0x1+-0x5f0*0x1||_0x59d4a9['forceCpuPa'+'rticles'],this['_destroyRe'+'sources'](),this['pack8']=(this['pack8']||!_0x59d4a9['textureFlo'+'atRenderab'+'le'])&&!this['useCpu'],bi=this['useCpu']||this['pack8']?-0xb09+0x2266+-0x1759:0x1321+-0x12e4+-0x3b*0x1,this['useMesh']=!!this['mesh'],this['numParticl'+'esPot']=Y['nextPowerO'+'fTwo'](this['numParticl'+'es']),this['rebuildGra'+'phs'](),this['calculateL'+'ocalBounds'](),this['resetWorld'+'Bounds'](),this['node']&&(this['worldBound'+'s']['setFromTra'+'nsformedAa'+'bb'](this['localBound'+'s'],this['localSpace']?te['IDENTITY']:this['node']['getWorldTr'+'ansform']()),this['worldBound'+'sTrail'][-0x251*-0x5+0x206f+-0x2c04]['copy'](this['worldBound'+'s']),this['worldBound'+'sTrail'][0x1661+0x1*-0x1f39+0x8d9]['copy'](this['worldBound'+'s']),this['worldBound'+'sSize']['copy'](this['worldBound'+'s']['halfExtent'+'s'])['mulScalar'](0x733+-0x1*-0xe9+-0x81a*0x1),this['prevWorldB'+'oundsSize']['copy'](this['worldBound'+'sSize']),this['prevWorldB'+'oundsCente'+'r']['copy'](this['worldBound'+'s']['center']),this['pack8']&&this['calculateB'+'oundsMad']()),this['vbToSort']=new Array(this['numParticl'+'es']);for(let _0x58dfc2=0x9*-0x3d5+0xce9+0x1594;_0x58dfc2<this['numParticl'+'es'];_0x58dfc2++)this['vbToSort'][_0x58dfc2]=[-0xb*0xb1+0x20af+0x4*-0x645,0x17*-0xe7+0x10*0x12c+0x201];this['particleDi'+'stance']=new Float32Array(this['numParticl'+'es']),this['_gpuUpdate'+'r']['randomize'](),this['particleTe'+'x']=new Float32Array(this['numParticl'+'esPot']*bi*pc);const _0x5e1d42=this['node']===null||this['localSpace']?D['ZERO']:this['node']['getPositio'+'n']();this['emitterSha'+'pe']===ai&&(this['node']===null||this['localSpace']?Ur['setTRS'](D['ZERO'],le['IDENTITY'],this['spawnBound'+'s']):Ur['setTRS'](D['ZERO'],this['node']['getRotatio'+'n'](),lg['copy'](this['spawnBound'+'s'])['mul'](this['node']['localScale'])),Ai[-0x2342+-0x23c5+0x4707]=this['emitterExt'+'ents']['x']!==-0x1*0x1b2c+0x6f4+0x1438?this['emitterExt'+'entsInner']['x']/this['emitterExt'+'ents']['x']:0x9*-0x1df+0x6de+0x9f9,Ai[-0x726*-0x3+0x26fa+-0x3c6b]=this['emitterExt'+'ents']['y']!==0x1dd8+-0x9*-0x16f+0x161*-0x1f?this['emitterExt'+'entsInner']['y']/this['emitterExt'+'ents']['y']:0x1ccb+-0x1b94+-0x137,Ai[0x1*-0x4f3+-0x1*0x1f9a+0x248f]=this['emitterExt'+'ents']['z']!==-0xcfb*-0x3+0x31c+-0x869*0x5?this['emitterExt'+'entsInner']['z']/this['emitterExt'+'ents']['z']:-0x1*0x1858+0x11c8+0x690);for(let _0x44b99d=0x53*0xe+0x3*0x7d5+-0x1c09*0x1;_0x44b99d<this['numParticl'+'es'];_0x44b99d++)this['_cpuUpdate'+'r']['calcSpawnP'+'osition'](this['particleTe'+'x'],Ur,Ai,_0x5e1d42,_0x44b99d),this['useCpu']&&(this['particleTe'+'x'][_0x44b99d*pc+(-0x581*0x7+0x592*0x1+0x83e*0x4)+this['numParticl'+'esPot']*(0x8ed+-0xb4f+0x264)*pc]=-0x1*-0x75b+0x15f4+-0x1d4e);this['particleTe'+'xStart']=new Float32Array(this['numParticl'+'esPot']*bi*pc);for(let _0x331211=0x13f*-0xc+-0x63a*0x4+0x27dc;_0x331211<this['particleTe'+'xStart']['length'];_0x331211++)this['particleTe'+'xStart'][_0x331211]=this['particleTe'+'x'][_0x331211];this['useCpu']||(this['pack8']?(this['particleTe'+'xIN']=xs(_0x59d4a9,this['numParticl'+'esPot'],bi,this['particleTe'+'x'],Ne,-0xb*0xf+-0xac2+-0x2*-0x5b4,!(0x266d+0x1c73+0x1*-0x42df)),this['particleTe'+'xOUT']=xs(_0x59d4a9,this['numParticl'+'esPot'],bi,this['particleTe'+'x'],Ne,-0x2*-0x219+-0x5a+0x3d7*-0x1,!(-0x10b7+0x1*-0x745+0x7ff*0x3)),this['particleTe'+'xStart']=xs(_0x59d4a9,this['numParticl'+'esPot'],bi,this['particleTe'+'xStart'],Ne,-0x407+-0xf*-0x119+0x1*-0xc6f,!(0xbb7+-0x1681+0xacb))):(this['particleTe'+'xIN']=xs(_0x59d4a9,this['numParticl'+'esPot'],bi,this['particleTe'+'x']),this['particleTe'+'xOUT']=xs(_0x59d4a9,this['numParticl'+'esPot'],bi,this['particleTe'+'x']),this['particleTe'+'xStart']=xs(_0x59d4a9,this['numParticl'+'esPot'],bi,this['particleTe'+'xStart'])),this['rtParticle'+'TexIN']=new gt({'colorBuffer':this['particleTe'+'xIN'],'depth':!(0x240+0x4*0x95c+-0x27af)}),this['rtParticle'+'TexOUT']=new gt({'colorBuffer':this['particleTe'+'xOUT'],'depth':!(0x1671+-0x71e+-0xf52*0x1)}),this['swapTex']=!(-0x1e*-0x73+-0x1ff1+0xc5*0x18));const _0x2f888c=new Map();this['localSpace']&&_0x2f888c['set']('LOCAL_SPAC'+'E',''),this['pack8']&&_0x2f888c['set']('PACK8',''),this['emitterSha'+'pe']===ai&&_0x2f888c['set']('EMITTERSHA'+'PE_BOX','');const _0x151275='Shape:'+this['emitterSha'+'pe']+'-Pack:'+this['pack8']+'-Local:'+this['localSpace'],_0x2a0055=Pe['get'](_0x59d4a9,_0x59d4a9['isWebGPU']?it:Fe),_0x351e7b=new Map(_0x2a0055),_0x4ab1fd={'attributes':{'vertex_position':Me},'vertexChunk':'fullscreen'+'QuadVS','fragmentChunk':'particle_s'+'imulationP'+'S','fragmentDefines':_0x2f888c,'fragmentIncludes':_0x351e7b};_0x4ab1fd['uniqueName']='ParticleUp'+'dateRespaw'+'n-'+_0x151275,_0x2f888c['set']('RESPAWN',''),this['shaderPart'+'icleUpdate'+'Respawn']=$t['createShad'+'er'](_0x59d4a9,_0x4ab1fd),_0x2f888c['delete']('RESPAWN'),_0x4ab1fd['uniqueName']='ParticleUp'+'dateNoResp'+'awn-'+_0x151275,_0x2f888c['set']('NO_RESPAWN',''),this['shaderPart'+'icleUpdate'+'NoRespawn']=$t['createShad'+'er'](_0x59d4a9,_0x4ab1fd),_0x2f888c['delete']('NO_RESPAWN'),_0x4ab1fd['uniqueName']='ParticleUp'+'dateStop-'+_0x151275,_0x2f888c['set']('ON_STOP',''),this['shaderPart'+'icleUpdate'+'OnStop']=$t['createShad'+'er'](_0x59d4a9,_0x4ab1fd),this['numParticl'+'eVerts']=this['useMesh']?this['mesh']['vertexBuff'+'er']['numVertice'+'s']:0xb2d*-0x3+0x5*-0x3f5+0x3554,this['numParticl'+'eIndices']=this['useMesh']?this['mesh']['indexBuffe'+'r'][-0x1113+-0x4*0x52e+0xc99*0x3]['numIndices']:0x26c9+0x13f+-0x2802,this['_allocate'](this['numParticl'+'es']);const _0x2baa5c=new Ge(_0x59d4a9);_0x2baa5c['vertexBuff'+'er']=this['vertexBuff'+'er'],_0x2baa5c['indexBuffe'+'r'][0x8*-0x164+0xb3*0x31+-0x1723]=this['indexBuffe'+'r'],_0x2baa5c['primitive'][-0x1*-0x1fd7+0xb*0x5e+0x5*-0x72d]['type']=js,_0x2baa5c['primitive'][-0x180+-0x1*0x166b+0x17eb]['base']=-0x202d+-0xcf1*0x1+0x2d1e,_0x2baa5c['primitive'][-0x80*-0xa+-0x1*-0x956+-0xe56]['count']=this['numParticl'+'es']*this['numParticl'+'eIndices'],_0x2baa5c['primitive'][-0x3*-0x224+-0x995*0x1+-0x1*-0x329]['indexed']=!(0x2a*0x6d+-0x12aa+-0x4*-0x32),this['material']=this['_createMat'+'erial'](),this['resetMater'+'ial']();const _0x1bf301=this['meshInstan'+'ce']?this['meshInstan'+'ce']['visible']:!(-0x1368+0x156*0x13+0x132*-0x5);this['meshInstan'+'ce']=new He(_0x2baa5c,this['material'],this['node']),this['meshInstan'+'ce']['pick']=!(0xe70+-0x7*-0x269+-0x2*0xfa7),this['meshInstan'+'ce']['updateKey'](),this['meshInstan'+'ce']['cull']=!(0x6a*-0x3e+-0xb0b*-0x1+0x5*0x2ed),this['localSpace']?this['meshInstan'+'ce']['aabb']['setFromTra'+'nsformedAa'+'bb'](this['worldBound'+'s'],this['node']['getWorldTr'+'ansform']()):this['meshInstan'+'ce']['aabb']['copy'](this['worldBound'+'s']),this['meshInstan'+'ce']['_updateAab'+'b']=!(-0x1e31+0xa07*0x1+0x142b),this['meshInstan'+'ce']['visible']=_0x1bf301,this['_setMateri'+'alTextures'](),this['resetTime'](),this['addTime'](-0x1df0+-0x3*-0x146+0x1a1e,!(-0x1616+-0x1cd3+0x32ea)),this['preWarm']&&this['prewarm'](this['lifetime']);}['_isAnimate'+'d'](){return this['animNumFra'+'mes']>=-0x1783+-0x3*0xa3+0x196d&&(this['animTilesX']>0x1c8b+0x16a1+0x1*-0x332b||this['animTilesY']>-0x1*0x1253+-0x2c*0x4a+0x1f0c)&&(this['colorMap']&&this['colorMap']!==this['defaultPar'+'amTexture']||this['normalMap']);}['rebuildGra'+'phs'](){const _0x599514=this['precision'],_0x22c53a=this['graphicsDe'+'vice'];this['qLocalVelo'+'city']=this['localVeloc'+'ityGraph']['quantize'](_0x599514),this['qVelocity']=this['velocityGr'+'aph']['quantize'](_0x599514),this['qColor']=this['colorGraph']['quantizeCl'+'amped'](_0x599514,-0x4be+-0x3*-0x107+-0x55*-0x5,0x26f6+0x1*-0x14b0+-0x1245),this['qRotSpeed']=this['rotationSp'+'eedGraph']['quantize'](_0x599514),this['qScale']=this['scaleGraph']['quantize'](_0x599514),this['qAlpha']=this['alphaGraph']['quantize'](_0x599514),this['qRadialSpe'+'ed']=this['radialSpee'+'dGraph']['quantize'](_0x599514),this['qLocalVelo'+'city2']=this['localVeloc'+'ityGraph2']['quantize'](_0x599514),this['qVelocity2']=this['velocityGr'+'aph2']['quantize'](_0x599514),this['qColor2']=this['colorGraph'+'2']['quantizeCl'+'amped'](_0x599514,0x1a24+-0x5e3*-0x1+-0x3*0xaad,-0x13ec+-0xb*-0x50+-0x57f*-0x3),this['qRotSpeed2']=this['rotationSp'+'eedGraph2']['quantize'](_0x599514),this['qScale2']=this['scaleGraph'+'2']['quantize'](_0x599514),this['qAlpha2']=this['alphaGraph'+'2']['quantize'](_0x599514),this['qRadialSpe'+'ed2']=this['radialSpee'+'dGraph2']['quantize'](_0x599514);for(let _0x2aff7b=-0xdbd*-0x1+0x21*-0x47+-0x496*0x1;_0x2aff7b<_0x599514;_0x2aff7b++)this['qRotSpeed'][_0x2aff7b]*=Y['DEG_TO_RAD'],this['qRotSpeed2'][_0x2aff7b]*=Y['DEG_TO_RAD'];if(this['localVeloc'+'ityUMax']=new Float32Array(-0x11*0x146+-0x6*-0x29e+-0x5f5*-0x1),this['velocityUM'+'ax']=new Float32Array(0x1310+-0x11*0x109+-0x6*0x3e),this['colorUMax']=new Float32Array(0x1*0x1b2+-0x338*-0x4+-0xe8f),this['rotSpeedUM'+'ax']=[0x19c2+-0x2ae*0x4+0xf0a*-0x1],this['scaleUMax']=[0x3*0xa04+-0x114c+-0xcc0],this['alphaUMax']=[-0x1dd1+-0x2529+0x42fa],this['radialSpee'+'dUMax']=[-0x248*-0x4+-0xe40+0x520],this['qLocalVelo'+'cityDiv']=Br(this['qLocalVelo'+'city'],this['qLocalVelo'+'city2'],this['localVeloc'+'ityUMax']),this['qVelocityD'+'iv']=Br(this['qVelocity'],this['qVelocity2'],this['velocityUM'+'ax']),this['qColorDiv']=Br(this['qColor'],this['qColor2'],this['colorUMax']),this['qRotSpeedD'+'iv']=Br(this['qRotSpeed'],this['qRotSpeed2'],this['rotSpeedUM'+'ax']),this['qScaleDiv']=Br(this['qScale'],this['qScale2'],this['scaleUMax']),this['qAlphaDiv']=Br(this['qAlpha'],this['qAlpha2'],this['alphaUMax']),this['qRadialSpe'+'edDiv']=Br(this['qRadialSpe'+'ed'],this['qRadialSpe'+'ed2'],this['radialSpee'+'dUMax']),this['pack8']){const _0x544923=[-0x157a+-0x24f0+-0x3a6a*-0x1,-0x1143+0x6dc+0xa67*0x1,-0x29*-0x33+-0x1f*0xb+-0x19*0x46];Xr(this['qVelocity'],_0x544923);const _0x96a6f9=[-0xb*0x281+0x1*-0x25d9+0x4164,-0x3*-0xc82+0x8+-0x258e,0x7c+-0x1cf*-0x7+-0xd25];Xr(this['qVelocity2'],_0x96a6f9);const _0x14fa8f=[-0x1a4b+-0x11a1+0x2bec,-0x2373+0x17d*-0x5+-0x5a*-0x7a,-0x2*-0x373+0x1aa0+0x7*-0x4ca];Xr(this['qLocalVelo'+'city'],_0x14fa8f);const _0x168ef7=[0x3*-0x62b+0x1298+-0x1*0x17,-0x1b03*0x1+-0x494*0x2+0x242b*0x1,-0x6d*0x4a+0x565*-0x3+0x2fb1];Xr(this['qLocalVelo'+'city2'],_0x168ef7);const _0x1a4b3e=[-0x1dae+0x207+0x1ba7];Xr(this['qRadialSpe'+'ed'],_0x1a4b3e);const _0xafacfe=[0x8a9*-0x3+-0x88*0x33+0x3513];Xr(this['qRadialSpe'+'ed2'],_0xafacfe);let _0x756bc=Math['max'](_0x544923[-0x12c1*0x2+0x17*-0xb+0x1*0x267f],_0x96a6f9[0x1e96+0xf1+-0x1f87]);_0x756bc=Math['max'](_0x756bc,_0x544923[0x1a3f+-0x3d3*0x6+-0x34c]),_0x756bc=Math['max'](_0x756bc,_0x96a6f9[-0x1a1f+-0xf*-0x1c9+0x1*-0xa7]),_0x756bc=Math['max'](_0x756bc,_0x544923[-0x1771+-0x3*-0x390+0x1b*0x79]),_0x756bc=Math['max'](_0x756bc,_0x96a6f9[-0x558*0x1+-0x1bda+0x2134]);let _0x43d499=Math['max'](_0x14fa8f[-0x24*-0x8+-0x56*0x29+0xca6],_0x168ef7[-0x14d*0x1+-0x16d*-0x1+-0x20*0x1]);_0x43d499=Math['max'](_0x43d499,_0x14fa8f[0xf84+-0x1*-0x649+0xf*-0x174]),_0x43d499=Math['max'](_0x43d499,_0x168ef7[0x1b2e+-0xd1c*-0x2+0x1*-0x3565]),_0x43d499=Math['max'](_0x43d499,_0x14fa8f[0x484*-0x8+0x786+0x1c9c*0x1]),_0x43d499=Math['max'](_0x43d499,_0x168ef7[0x1e48+0xf8*-0x1f+-0x3e]);const _0x51c286=Math['max'](_0x1a4b3e[-0x745+-0x1*0x18f5+0x203a],_0xafacfe[0xfd0+0x11*-0xd3+0x1*-0x1cd]);this['maxVel']=_0x756bc+_0x43d499+_0x51c286;}this['useCpu']||(this['internalTe'+'x0']=xs(_0x22c53a,_0x599514,0x6cd+-0x4*-0x265+-0x1060,cg(this['qLocalVelo'+'city'],this['qLocalVelo'+'cityDiv'])),this['internalTe'+'x1']=xs(_0x22c53a,_0x599514,-0x8e2+-0x1*-0x18d1+0x1*-0xfee,cg(this['qVelocity'],this['qVelocityD'+'iv'])),this['internalTe'+'x2']=xs(_0x22c53a,_0x599514,-0xdb3+-0x11*-0xc7+0x19*0x5,xA(this['qRotSpeed'],this['qScale'],this['qScaleDiv'],this['qRotSpeedD'+'iv'],this['qAlphaDiv'])),this['internalTe'+'x3']=xs(_0x22c53a,_0x599514,-0x114f+0x1*-0x1c3c+0x2d8c,TA(this['qRadialSpe'+'ed'],this['qRadialSpe'+'edDiv']))),this['colorParam']=xs(_0x22c53a,_0x599514,0x21c*0xe+0x13*0x1df+-0x4114,vA(this['qColor'],this['qAlpha']),_s,-0x3*0x80b+0x1615+-0x15*-0x19,!(0x133b+0x269a+-0x39d5));}['_setMateri'+'alTextures'](){this['colorMap']&&(w['call'](()=>{py(this['colorMap']['format'])&&w['warnOnce']('ParticleEm'+'itter:\x20col'+'orMap\x20text'+'ure\x20['+this['colorMap']['name']+(']\x20is\x20not\x20u'+'sing\x20sRGB\x20'+'format.\x20Pl'+'ease\x20corre'+'ct\x20it\x20for\x20'+'the\x20correc'+'t\x20renderin'+'g.'),this['colorMap']);}),this['material']['setParamet'+'er']('colorMap',this['colorMap']),this['lighting']&&this['normalMap']&&this['material']['setParamet'+'er']('normalMap',this['normalMap']));}['_createMat'+'erial'](){const _0x9a89df=new SA(this);return _0x9a89df['name']='EmitterMat'+'erial:'+this['node']['name'],_0x9a89df['cull']=bt,_0x9a89df['alphaWrite']=!(-0x693+-0x12df*-0x1+0x419*-0x3),_0x9a89df['blendType']=this['blendType'],_0x9a89df['depthWrite']=this['depthWrite'],_0x9a89df;}['resetMater'+'ial'](){const _0x4a3da4=this['material'];_0x4a3da4['setParamet'+'er']('stretch',this['stretch']),this['_isAnimate'+'d']()&&(_0x4a3da4['setParamet'+'er']('animTexTil'+'esParams',this['animTilesP'+'arams']),_0x4a3da4['setParamet'+'er']('animTexPar'+'ams',this['animParams']),_0x4a3da4['setParamet'+'er']('animTexInd'+'exParams',this['animIndexP'+'arams'])),_0x4a3da4['setParamet'+'er']('colorMult',this['intensity']),this['useCpu']||(_0x4a3da4['setParamet'+'er']('internalTe'+'x0',this['internalTe'+'x0']),_0x4a3da4['setParamet'+'er']('internalTe'+'x1',this['internalTe'+'x1']),_0x4a3da4['setParamet'+'er']('internalTe'+'x2',this['internalTe'+'x2']),_0x4a3da4['setParamet'+'er']('internalTe'+'x3',this['internalTe'+'x3'])),_0x4a3da4['setParamet'+'er']('colorParam',this['colorParam']),_0x4a3da4['setParamet'+'er']('numParticl'+'es',this['numParticl'+'es']),_0x4a3da4['setParamet'+'er']('numParticl'+'esPot',this['numParticl'+'esPot']),_0x4a3da4['setParamet'+'er']('lifetime',this['lifetime']),_0x4a3da4['setParamet'+'er']('rate',this['rate']),_0x4a3da4['setParamet'+'er']('rateDiv',this['rate2']-this['rate']),_0x4a3da4['setParamet'+'er']('seed',this['seed']),_0x4a3da4['setParamet'+'er']('scaleDivMu'+'lt',this['scaleUMax'][-0x19e9+0xd*0xa4+0x1195]),_0x4a3da4['setParamet'+'er']('alphaDivMu'+'lt',this['alphaUMax'][0x1*-0x159a+-0xfa3*-0x1+0x5f7]),_0x4a3da4['setParamet'+'er']('radialSpee'+'dDivMult',this['radialSpee'+'dUMax'][0x1*-0x16eb+0xba0+-0x19d*-0x7]),_0x4a3da4['setParamet'+'er']('graphNumSa'+'mples',this['precision']),_0x4a3da4['setParamet'+'er']('graphSampl'+'eSize',(0x5b5+-0x1b18+0x1564)/this['precision']),_0x4a3da4['setParamet'+'er']('emitterSca'+'le',new Float32Array([-0x6b*-0x1+0x6ed+-0x757,0x1c1f+-0x16c2+-0x55c,0x43*0x95+0x4*-0x504+-0x2*0x977])),this['pack8']&&(this['_gpuUpdate'+'r']['_setInputB'+'ounds'](),_0x4a3da4['setParamet'+'er']('inBoundsSi'+'ze',this['_gpuUpdate'+'r']['inBoundsSi'+'zeUniform']),_0x4a3da4['setParamet'+'er']('inBoundsCe'+'nter',this['_gpuUpdate'+'r']['inBoundsCe'+'nterUnifor'+'m']),_0x4a3da4['setParamet'+'er']('maxVel',this['maxVel'])),this['wrap']&&this['wrapBounds']&&(this['wrapBounds'+'Uniform'][-0xb5d*-0x1+-0x1b83*-0x1+-0x26e0]=this['wrapBounds']['x'],this['wrapBounds'+'Uniform'][-0x1b2e*0x1+-0x8a*-0xd+0x142d]=this['wrapBounds']['y'],this['wrapBounds'+'Uniform'][0x2cc+-0x1c88+-0x1*-0x19be]=this['wrapBounds']['z'],_0x4a3da4['setParamet'+'er']('wrapBounds',this['wrapBounds'+'Uniform'])),this['_setMateri'+'alTextures'](),this['depthSofte'+'ning']>0x1378+0x7c3*0x1+-0x1b3b&&_0x4a3da4['setParamet'+'er']('softening',(0x1f1*-0x10+0x1cf7+-0x10d*-0x2)/(this['depthSofte'+'ning']*this['depthSofte'+'ning']*(0x1*-0x24e1+0xee2+0x1663))),this['stretch']>0x32*-0x33+0x1be1+-0x11eb&&(_0x4a3da4['cull']=bt),this['_compParti'+'cleFacePar'+'ams']();}['_compParti'+'cleFacePar'+'ams'](){let _0x5d4a65,_0x2ac68c;if(this['orientatio'+'n']===yh)_0x5d4a65=new Float32Array([0x25c9*-0x1+-0x1*-0x15b9+0x1011,0xb*0x10a+0x2071+-0x2bdf,0x36*0xae+-0x5ab+0x23*-0xe3]),_0x2ac68c=new Float32Array([-0x3b9+-0x31*0xc3+0x8e*0x4a,0x4*-0x8f5+0x1c18+0x7bc,0x20*0xe5+0x6d*0x38+0x25*-0x16b]);else{let _0x22bfb4;this['orientatio'+'n']===Vw?_0x22bfb4=this['particleNo'+'rmal']['normalize']():_0x22bfb4=(this['node']===null?te['IDENTITY']:this['node']['getWorldTr'+'ansform']())['transformV'+'ector'](this['particleNo'+'rmal'])['normalize']();const _0x20b511=new D(-0x610+0x53*-0x66+0xe9*0x2b,-0x1*0x1975+-0x1*0x1b37+0x34ac,0x1071+0x1d*0x11b+0xc20*-0x4);Math['abs'](_0x20b511['dot'](_0x22bfb4))===0x9b9+0x2*-0x8cb+0x35*0x26&&_0x20b511['set'](-0x2363+-0x1*0x565+0x28c8,0xb48+-0x1cc2+0x117a*0x1,-0x1*-0x21e5+0x200a*0x1+-0x61*0xae);const _0x5e7ef6=new D()['cross'](_0x22bfb4,_0x20b511)['normalize']();_0x20b511['cross'](_0x5e7ef6,_0x22bfb4)['normalize'](),_0x5d4a65=new Float32Array([_0x20b511['x'],_0x20b511['y'],_0x20b511['z']]),_0x2ac68c=new Float32Array([_0x5e7ef6['x'],_0x5e7ef6['y'],_0x5e7ef6['z']]);}this['material']['setParamet'+'er']('faceTangen'+'t',_0x5d4a65),this['material']['setParamet'+'er']('faceBinorm',_0x2ac68c);}['getVertexI'+'nfo'](){const _0x595585=[];return this['useCpu']?_0x595585['push']({'semantic':Jf,'components':0x4,'type':Ve},{'semantic':uh,'components':0x4,'type':Ve},{'semantic':Ap,'components':0x4,'type':Ve},{'semantic':Cp,'components':0x1,'type':Ve},{'semantic':Pp,'components':this['useMesh']?0x1c37+0xf1+-0x1d24*0x1:0x6ef+0x192*0x14+0x3*-0xcc7,'type':Ve}):(_0x595585['push']({'semantic':Jf,'components':0x4,'type':Ve}),this['useMesh']&&_0x595585['push']({'semantic':uh,'components':0x2,'type':Ve})),_0x595585;}['_allocate'](_0x40f6d8){const _0x5e0b87=_0x40f6d8*this['numParticl'+'eVerts'],_0x5ce179=_0x40f6d8*this['numParticl'+'eIndices'];if(this['vertexBuff'+'er']===void(0x1*0x15ab+0x231+-0x17dc)||this['vertexBuff'+'er']['getNumVert'+'ices']()!==_0x5e0b87){const _0x3de44a=this['getVertexI'+'nfo'](),_0x15b5ba=new kt(this['graphicsDe'+'vice'],_0x3de44a);this['vertexBuff'+'er']=new Is(this['graphicsDe'+'vice'],_0x15b5ba,_0x5e0b87,{'usage':lh}),this['indexBuffe'+'r']=new br(this['graphicsDe'+'vice'],wr,_0x5ce179);const _0x2bea96=new Float32Array(this['vertexBuff'+'er']['lock']());let _0x57febd,_0x46ab95,_0x3a2ab2;if(this['useMesh']){_0x57febd=new Float32Array(this['mesh']['vertexBuff'+'er']['lock']()),_0x46ab95=_0x57febd['length']/this['mesh']['vertexBuff'+'er']['numVertice'+'s'];for(let _0x65f31=0x83*-0x1+-0x7*0x13+0x2c*0x6;_0x65f31<this['mesh']['vertexBuff'+'er']['format']['elements']['length'];_0x65f31++)if(this['mesh']['vertexBuff'+'er']['format']['elements'][_0x65f31]['name']===is){_0x3a2ab2=this['mesh']['vertexBuff'+'er']['format']['elements'][_0x65f31]['offset']/(0xbd1*0x3+-0x2284+-0xeb);break;}}for(let _0x3df869=0x8bb*0x2+-0x1106+0x8*-0xe;_0x3df869<_0x5e0b87;_0x3df869++){const _0x5d1e39=Math['floor'](_0x3df869/this['numParticl'+'eVerts']);if(this['useMesh']){const _0x5d91d7=_0x3df869%this['numParticl'+'eVerts'];_0x2bea96[_0x3df869*(0x185d+-0xdad+-0xaaa)]=_0x57febd[_0x5d91d7*_0x46ab95],_0x2bea96[_0x3df869*(0x1*0x1ff7+0x51*-0x73+0x2*0x239)+(0x1d1d*0x1+0x1a71+-0x378d)]=_0x57febd[_0x5d91d7*_0x46ab95+(0x2*0x1c7+-0x1113+-0x1*-0xd86)],_0x2bea96[_0x3df869*(-0x1df7+0x5*0x25+0x2*0xea2)+(-0x5*0xf4+-0x2560+0x1*0x2a26)]=_0x57febd[_0x5d91d7*_0x46ab95+(-0x1578+-0x1d05+0x327f)],_0x2bea96[_0x3df869*(0x14c1+0xe3*-0x21+0x54*0x1a)+(0x7*0x33a+0x20d8+0x376b*-0x1)]=_0x5d1e39,_0x2bea96[_0x3df869*(0x1*-0x269b+0x1*-0xa+0x13*0x209)+(-0x1bd8+0x1a*0xa+-0xd6c*-0x2)]=_0x57febd[_0x5d91d7*_0x46ab95+_0x3a2ab2+(-0x148+0x242b+-0x22e3)],_0x2bea96[_0x3df869*(0x231e+0x426+0x273e*-0x1)+(-0x68e+-0x25eb+0x2c7e*0x1)]=-0x1f0e+0x17*-0x86+0x2b19-_0x57febd[_0x5d91d7*_0x46ab95+_0x3a2ab2+(0x12a8+0xcc5*-0x1+-0x5e2)];}else{const _0x578281=_0x3df869%(0x3*0x5e7+0x1af+-0xa*0x1f0);_0x2bea96[_0x3df869*(-0x1*-0xcaf+-0x1*0x5cf+-0x1*0x6dc)]=ig[_0x578281][0x2dd*0x9+-0x183a+-0x1*0x18b],_0x2bea96[_0x3df869*(0x7b4+0xfd9*-0x1+0x829)+(-0x2285+0x1a66*-0x1+0x3cec)]=ig[_0x578281][-0x29*0x74+0xf8a+0x30b],_0x2bea96[_0x3df869*(0x6ba+0x4*-0xd+-0x682)+(-0xcff+-0x1*0x1afb+-0x3*-0xd54)]=0xb1a+0x1*-0x1673+0xb59,_0x2bea96[_0x3df869*(0x1*0x17+0x1*0xb03+-0x16*0x81)+(-0x277*0x4+0x183b*0x1+-0xe5c)]=_0x5d1e39;}}this['useCpu']&&(this['vbCPU']=new Float32Array(_0x2bea96),this['vbOld']=new Float32Array(this['vbCPU']['length'])),this['vertexBuff'+'er']['unlock'](),this['useMesh']&&this['mesh']['vertexBuff'+'er']['unlock']();let _0x5a1c52=0xe32*0x2+0x981+-0x25e5;const _0x4b6e2e=new Uint32Array(this['indexBuffe'+'r']['lock']());if(this['useMesh']){const _0x186cef=this['mesh']['indexBuffe'+'r'][0x16c2+0x121d*0x1+-0x28df];_0x57febd=new Sh[_0x186cef['format']](_0x186cef['lock']());}for(let _0x42d0b3=0x4*0xd+0x13fa+-0x142e;_0x42d0b3<_0x40f6d8;_0x42d0b3++)if(this['useMesh']){for(let _0xee7628=0x1184+-0x16b2+0x2*0x297;_0xee7628<this['numParticl'+'eIndices'];_0xee7628++)_0x4b6e2e[_0x42d0b3*this['numParticl'+'eIndices']+_0xee7628]=_0x57febd[_0xee7628]+_0x42d0b3*this['numParticl'+'eVerts'];}else{const _0x2beb02=_0x42d0b3*(-0x240a+0x168d+0xd81);_0x4b6e2e[_0x5a1c52++]=_0x2beb02,_0x4b6e2e[_0x5a1c52++]=_0x2beb02+(0x671+-0x1e*-0x11b+-0x279a),_0x4b6e2e[_0x5a1c52++]=_0x2beb02+(0x153b+0x4*0x4a5+-0x27cd),_0x4b6e2e[_0x5a1c52++]=_0x2beb02,_0x4b6e2e[_0x5a1c52++]=_0x2beb02+(0x565+0x400+0x9*-0x10b),_0x4b6e2e[_0x5a1c52++]=_0x2beb02+(0x2*0x768+0x15e3+-0x24b0);}this['indexBuffe'+'r']['unlock'](),this['useMesh']&&this['mesh']['indexBuffe'+'r'][0x1cb5+0x5c8+-0x227d]['unlock']();}}['reset'](){if(this['beenReset']=!(-0x1d3c+0x2b*0xdf+-0x839),this['seed']=Math['random'](),this['material']['setParamet'+'er']('seed',this['seed']),this['useCpu']){for(let _0x949289=0x1af2+-0x1198+-0x95a;_0x949289<this['particleTe'+'xStart']['length'];_0x949289++)this['particleTe'+'x'][_0x949289]=this['particleTe'+'xStart'][_0x949289];}else this['_setMateri'+'alTextures']();this['resetWorld'+'Bounds'](),this['resetTime']();const _0x123115=this['loop'];this['loop']=!(-0x5ef*0x1+0x138b+-0xd9c),this['addTime'](-0x12ce+0x254c+-0x2*0x93f,!(-0x1fca+0xb0f+0x14bc)),this['loop']=_0x123115,this['preWarm']&&this['prewarm'](this['lifetime']);}['prewarm'](_0x33ada0){const _0x452bf7=_0x33ada0/this['lifetime'],_0x3bf04f=Math['min'](Math['floor'](_0x452bf7*this['precision']),this['precision']),_0x4b27c6=_0x33ada0/_0x3bf04f;for(let _0x5c8aae=0x43a*0x8+0x1*0x1721+0x71*-0x81;_0x5c8aae<_0x3bf04f;_0x5c8aae++)this['addTime'](_0x4b27c6,!(0xb34+0x1a*-0x24+0x78b*-0x1));}['resetTime'](){this['endTime']=wA(this);}['finishFram'+'e'](){this['useCpu']&&this['vertexBuff'+'er']['unlock']();}['addTime'](_0x44e996,_0x592da2){const _0x5d34c7=this['graphicsDe'+'vice'],_0x534e30=de();if(this['simTimeTot'+'al']+=_0x44e996,this['calculateW'+'orldBounds'](),this['_isAnimate'+'d']()){const _0x197f2a=this['animTilesP'+'arams'];_0x197f2a[-0x1*0x17ff+0x36*-0x73+0x3041]=(0x13f4+-0x26d5+0x12e2)/this['animTilesX'],_0x197f2a[0x13*0xeb+-0x1a74+0x904]=(-0x23fb+-0x7a9+0x2ba5)/this['animTilesY'];const _0x3769c5=this['animParams'];_0x3769c5[0x5d*-0xe+0x32*0x48+-0x8fa]=this['animStartF'+'rame'],_0x3769c5[0x1*-0x369+0x47*-0x78+0x24b2]=this['animNumFra'+'mes']*this['animSpeed'],_0x3769c5[0x885*-0x3+0x997+0xffa]=this['animNumFra'+'mes']-(-0x17ec+-0x1339+-0x107*-0x2a),_0x3769c5[-0x4+0x5*0x19+-0x76]=this['animNumAni'+'mations']-(0xa3*0x1f+-0x16b5+0x2f9);const _0x573efb=this['animIndexP'+'arams'];_0x573efb[0x9*0x303+0xfb*-0x13+-0x87a]=this['animIndex'],_0x573efb[-0x2681+0x79f*-0x1+0x2e21]=this['randomizeA'+'nimIndex'];}this['scene']&&this['camera']!==this['scene']['_activeCam'+'era']&&(this['camera']=this['scene']['_activeCam'+'era'],this['onChangeCa'+'mera']()),this['emitterSha'+'pe']===ai&&(Ai[-0xbca+0x2159*0x1+0x1*-0x158f]=this['emitterExt'+'ents']['x']!==-0x1136+-0x13a4+0xb2*0x35?this['emitterExt'+'entsInner']['x']/this['emitterExt'+'ents']['x']:0x1bd5+-0x177b*-0x1+-0x3350,Ai[0x335+0x8*0x137+-0xcec]=this['emitterExt'+'ents']['y']!==0x5d*0x33+0x1*0xf07+-0x218e?this['emitterExt'+'entsInner']['y']/this['emitterExt'+'ents']['y']:-0x2b*-0xc2+-0x5*0x95+-0x1dad,Ai[0x1de6+0x8c3+0x26a7*-0x1]=this['emitterExt'+'ents']['z']!==0x829+-0xb3*0x1f+0xd84?this['emitterExt'+'entsInner']['z']/this['emitterExt'+'ents']['z']:-0xfc5*-0x1+-0xc89*-0x3+0x1ab*-0x20,this['meshInstan'+'ce']['node']===null?Ur['setTRS'](D['ZERO'],le['IDENTITY'],this['emitterExt'+'ents']):Ur['setTRS'](D['ZERO'],this['meshInstan'+'ce']['node']['getRotatio'+'n'](),lg['copy'](this['emitterExt'+'ents'])['mul'](this['meshInstan'+'ce']['node']['localScale'])));let _0x41ff7e;const _0x12c3e8=this['meshInstan'+'ce']['node']===null?D['ONE']:this['meshInstan'+'ce']['node']['localScale'];if(this['emitterSca'+'leUniform'][-0x31*-0x86+-0x1c6d+0x2c7*0x1]=_0x12c3e8['x'],this['emitterSca'+'leUniform'][-0x2*-0xd42+0x38b*-0x9+0x2b*0x20]=_0x12c3e8['y'],this['emitterSca'+'leUniform'][0x428+-0x1*-0x16ba+-0x1ae0]=_0x12c3e8['z'],this['material']['setParamet'+'er']('emitterSca'+'le',this['emitterSca'+'leUniform']),this['localSpace']&&this['meshInstan'+'ce']['node']&&(_0x41ff7e=this['meshInstan'+'ce']['node']['getPositio'+'n'](),this['emitterPos'+'Uniform'][0x2*-0xa31+0x3e+0x1424]=_0x41ff7e['x'],this['emitterPos'+'Uniform'][0x445*0x1+-0x117+0x32d*-0x1]=_0x41ff7e['y'],this['emitterPos'+'Uniform'][-0xe4b+0xed3+-0x86*0x1]=_0x41ff7e['z'],this['material']['setParamet'+'er']('emitterPos',this['emitterPos'+'Uniform'])),this['_compParti'+'cleFacePar'+'ams'](),!this['useCpu'])this['_gpuUpdate'+'r']['update'](_0x5d34c7,Ur,Ai,_0x44e996,_0x592da2);else{const _0x3f103a=new Float32Array(this['vertexBuff'+'er']['lock']());this['_cpuUpdate'+'r']['update'](_0x3f103a,this['vbToSort'],this['particleTe'+'x'],Ur,Ai,_0x41ff7e,_0x44e996,_0x592da2);}this['loop']||Date['now']()>this['endTime']&&(this['onFinished']&&this['onFinished'](),this['meshInstan'+'ce']['visible']=!(0x24a0+0x3b*0x4f+-0x1*0x36d4)),this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['drawOrder']=this['drawOrder']),this['_addTimeTi'+'me']+=de()-_0x534e30;}['_destroyRe'+'sources'](){var _0x59eb80,_0x420ec2,_0x19856b,_0x3b4705,_0x56a216,_0x46c461,_0x2af8ea,_0x374c87,_0x3d4c0c,_0x494684,_0x30a107,_0x47259f;(_0x59eb80=this['particleTe'+'xIN'])==null||_0x59eb80['destroy'](),this['particleTe'+'xIN']=null,(_0x420ec2=this['particleTe'+'xOUT'])==null||_0x420ec2['destroy'](),this['particleTe'+'xOUT']=null,this['particleTe'+'xStart']&&this['particleTe'+'xStart']['destroy']&&(this['particleTe'+'xStart']['destroy'](),this['particleTe'+'xStart']=null),(_0x19856b=this['rtParticle'+'TexIN'])==null||_0x19856b['destroy'](),this['rtParticle'+'TexIN']=null,(_0x3b4705=this['rtParticle'+'TexOUT'])==null||_0x3b4705['destroy'](),this['rtParticle'+'TexOUT']=null,(_0x56a216=this['internalTe'+'x0'])==null||_0x56a216['destroy'](),this['internalTe'+'x0']=null,(_0x46c461=this['internalTe'+'x1'])==null||_0x46c461['destroy'](),this['internalTe'+'x1']=null,(_0x2af8ea=this['internalTe'+'x2'])==null||_0x2af8ea['destroy'](),this['internalTe'+'x2']=null,(_0x374c87=this['internalTe'+'x3'])==null||_0x374c87['destroy'](),this['internalTe'+'x3']=null,(_0x3d4c0c=this['colorParam'])==null||_0x3d4c0c['destroy'](),this['colorParam']=null,(_0x494684=this['vertexBuff'+'er'])==null||_0x494684['destroy'](),this['vertexBuff'+'er']=void(-0x6ad+-0x204a+-0x20d*-0x13),(_0x30a107=this['indexBuffe'+'r'])==null||_0x30a107['destroy'](),this['indexBuffe'+'r']=void(-0x1bff+0xd77+0xe88),(_0x47259f=this['material'])==null||_0x47259f['destroy'](),this['material']=null;}['destroy'](){this['camera']=null,this['_destroyRe'+'sources']();}}class PA extends ya{['generateKe'+'y'](_0x2e6c39){var _0x223608;const _0x4177b5=_0x2e6c39['shaderDesc'],_0x33d9f6=_0x4177b5['vertexGLSL']?hi(_0x4177b5['vertexGLSL']):0x1652+0x6*-0xbf+-0x11d8,_0xc52d74=_0x4177b5['fragmentGL'+'SL']?hi(_0x4177b5['fragmentGL'+'SL']):0x3*-0xacf+0xaf9*-0x2+0x1f*0x1c1,_0x327fe6=_0x4177b5['vertexWGSL']?hi(_0x4177b5['vertexWGSL']):0x1b9a*0x1+-0xcaa+-0x778*0x2,_0x200c95=_0x4177b5['fragmentWG'+'SL']?hi(_0x4177b5['fragmentWG'+'SL']):0x1d3b+0x5a9*-0x2+0x1*-0x11e9,_0x27f39a=ya['definesHas'+'h'](_0x2e6c39['defines']),_0x57bcc0=((_0x223608=_0x2e6c39['shaderChun'+'ks'])==null?void(0x1199+-0x1f*-0x127+0x28a*-0x15):_0x223608['key'])??'';let _0xe2c4ac=_0x4177b5['uniqueName']+'_'+_0x27f39a+'_'+_0x33d9f6+'_'+_0xc52d74+'_'+_0x327fe6+'_'+_0x200c95+'_'+_0x57bcc0;return _0x2e6c39['skin']&&(_0xe2c4ac+='_skin'),_0x2e6c39['useInstanc'+'ing']&&(_0xe2c4ac+='_inst'),_0x2e6c39['useMorphPo'+'sition']&&(_0xe2c4ac+='_morphp'),_0x2e6c39['useMorphNo'+'rmal']&&(_0xe2c4ac+='_morphn'),_0x2e6c39['useMorphTe'+'xtureBased'+'Int']&&(_0xe2c4ac+='_morphi'),_0xe2c4ac;}['createAttr'+'ibutesDefi'+'nition'](_0x324171,_0x3f5d51){const _0x2bad21=_0x3f5d51['shaderDesc']['attributes'],_0x3ee9b9=_0x2bad21?{..._0x2bad21}:void(0x26c7+-0x2062+-0x665*0x1);_0x3f5d51['skin']&&(_0x3ee9b9['vertex_bon'+'eWeights']=gi,_0x3ee9b9['vertex_bon'+'eIndices']=us),(_0x3f5d51['useMorphPo'+'sition']||_0x3f5d51['useMorphNo'+'rmal'])&&(_0x3ee9b9['morph_vert'+'ex_id']=Ln),_0x324171['attributes']=_0x3ee9b9;}['createVert'+'exDefiniti'+'on'](_0x2a63e0,_0x514538,_0x2e93a9,_0x44f24f){const _0x4496dd=_0x514538['shaderDesc'],_0x370f2d=new Map(_0x2e93a9);_0x370f2d['set']('transformI'+'nstancingV'+'S','');const _0x1e1549=new Map(_0x514538['defines']);_0x514538['skin']&&_0x1e1549['set']('SKIN',!(0xa*-0x13e+-0x2b1*-0xb+-0x112f*0x1)),_0x514538['useInstanc'+'ing']&&_0x1e1549['set']('INSTANCING',!(-0x1*0x1907+0x5e*0x5e+-0x97d)),(_0x514538['useMorphPo'+'sition']||_0x514538['useMorphNo'+'rmal'])&&(_0x1e1549['set']('MORPHING',!(0x1394*0x1+0x21c4+-0x3558)),_0x514538['useMorphTe'+'xtureBased'+'Int']&&_0x1e1549['set']('MORPHING_I'+'NT',!(0x12a9*-0x1+0x1340+-0x1*0x97)),_0x514538['useMorphPo'+'sition']&&_0x1e1549['set']('MORPHING_P'+'OSITION',!(-0x1aa5+0x31*-0x31+-0x3*-0xc02)),_0x514538['useMorphNo'+'rmal']&&_0x1e1549['set']('MORPHING_N'+'ORMAL',!(0x13*0x17b+-0x1*-0x2498+-0x7*0x93f))),_0x2a63e0['vertexCode']=_0x44f24f?_0x4496dd['vertexWGSL']:_0x4496dd['vertexGLSL'],_0x2a63e0['vertexIncl'+'udes']=_0x370f2d,_0x2a63e0['vertexDefi'+'nes']=_0x1e1549;}['createFrag'+'mentDefini'+'tion'](_0x14016d,_0x5bd524,_0x1efe74,_0x2243a0){const _0x4322da=_0x5bd524['shaderDesc'],_0x32ea6f=new Map(_0x1efe74),_0xef68c3=new Map(_0x5bd524['defines']);_0x14016d['fragmentCo'+'de']=_0x2243a0?_0x4322da['fragmentWG'+'SL']:_0x4322da['fragmentGL'+'SL'],_0x14016d['fragmentIn'+'cludes']=_0x32ea6f,_0x14016d['fragmentDe'+'fines']=_0xef68c3;}['createShad'+'erDefiniti'+'on'](_0x29c278,_0x1ce947){var _0x2f6144;const _0x25b70c=_0x1ce947['shaderDesc'],_0xe88be0=_0x29c278['isWebGPU']&&!!_0x25b70c['vertexWGSL']&&!!_0x25b70c['fragmentWG'+'SL']&&(((_0x2f6144=_0x1ce947['shaderChun'+'ks'])==null?void(-0x21bc+0x2a2+0x52f*0x6):_0x2f6144['useWGSL'])??!(-0xa49*0x3+0x19ec+0x4ef)),_0x163cdd={'name':'ShaderMate'+'rial-'+_0x25b70c['uniqueName'],'shaderLanguage':_0xe88be0?it:Fe,'fragmentOutputTypes':_0x25b70c['fragmentOu'+'tputTypes'],'meshUniformBufferFormat':_0x25b70c['meshUnifor'+'mBufferFor'+'mat'],'meshBindGroupFormat':_0x25b70c['meshBindGr'+'oupFormat']},_0x5d84ae=_0xe88be0?it:Fe,_0x49fbf1=bh['merge'](Pe['get'](_0x29c278,_0x5d84ae),_0x1ce947['shaderChun'+'ks'][_0x5d84ae]);return this['createAttr'+'ibutesDefi'+'nition'](_0x163cdd,_0x1ce947),this['createVert'+'exDefiniti'+'on'](_0x163cdd,_0x1ce947,_0x49fbf1,_0xe88be0),this['createFrag'+'mentDefini'+'tion'](_0x163cdd,_0x1ce947,_0x49fbf1,_0xe88be0),Jt['createDefi'+'nition'](_0x29c278,_0x163cdd);}}const MA=new PA();class Xn extends tr{constructor(_0x25c705){super(),h(this,'_shaderDes'+'c'),this['shaderDesc']=_0x25c705;}set['shaderDesc'](_0x1acd17){if(this['_shaderDes'+'c']=void(0x26d*-0x4+0xfdd*0x2+-0x1606),_0x1acd17&&(this['_shaderDes'+'c']={'uniqueName':_0x1acd17['uniqueName'],'attributes':_0x1acd17['attributes'],'fragmentOutputTypes':_0x1acd17['fragmentOu'+'tputTypes'],'vertexGLSL':_0x1acd17['vertexGLSL'],'fragmentGLSL':_0x1acd17['fragmentGL'+'SL'],'vertexWGSL':_0x1acd17['vertexWGSL'],'fragmentWGSL':_0x1acd17['fragmentWG'+'SL']},_0x1acd17['vertexCode']||_0x1acd17['fragmentCo'+'de']||_0x1acd17['shaderLang'+'uage'])){w['deprecated']('ShaderMate'+'rial\x20['+_0x1acd17['uniqueName']+(']:\x20vertexC'+'ode,\x20fragm'+'entCode\x20an'+'d\x20shaderLa'+'nguage\x20pro'+'perties\x20of'+'\x20ShaderDes'+'c\x20is\x20depre'+'cated.\x20Use'+'\x20vertexGLS'+'L,\x20fragmen'+'tGLSL,\x20ver'+'texWGSL\x20or'+'\x20fragmentW'+'GSL\x20instea'+'d.'));const _0x262bf5=_0x1acd17['shaderLang'+'uage']??Fe;_0x262bf5===Fe?(this['_shaderDes'+'c']['vertexGLSL']=_0x1acd17['vertexCode'],this['_shaderDes'+'c']['fragmentGL'+'SL']=_0x1acd17['fragmentCo'+'de']):_0x262bf5===it&&(this['_shaderDes'+'c']['vertexWGSL']=_0x1acd17['vertexCode'],this['_shaderDes'+'c']['fragmentWG'+'SL']=_0x1acd17['fragmentCo'+'de']);}this['clearVaria'+'nts']();}get['shaderDesc'](){return this['_shaderDes'+'c'];}['copy'](_0x3d56e8){return super['copy'](_0x3d56e8),this['shaderDesc']=_0x3d56e8['shaderDesc'],this;}['getShaderV'+'ariant'](_0x4f338b){const {objDefs:_0x20391d}=_0x4f338b,_0x43b536={'defines':$t['getCoreDef'+'ines'](this,_0x4f338b),'skin':(_0x20391d&nl)!==-0x75b*-0x5+0x13e*0x6+-0x2c3b,'useInstancing':(_0x20391d&ol)!==-0x1*-0xf3a+0x1*-0x247f+0x2d*0x79,'useMorphPosition':(_0x20391d&ll)!==0xa37+-0x2c5*0xd+0x19ca,'useMorphNormal':(_0x20391d&cl)!==0x2a4+-0x1b7c+0x18d8,'useMorphTextureBasedInt':(_0x20391d&hl)!==0xb*0x201+0x5e1+-0x1bec,'pass':_0x4f338b['pass'],'gamma':_0x4f338b['cameraShad'+'erParams']['shaderOutp'+'utGamma'],'toneMapping':_0x4f338b['cameraShad'+'erParams']['toneMappin'+'g'],'fog':_0x4f338b['cameraShad'+'erParams']['fog'],'shaderDesc':this['shaderDesc'],'shaderChunks':this['shaderChun'+'ks']},_0x479779=new Ad(_0x4f338b['viewUnifor'+'mFormat'],_0x4f338b['viewBindGr'+'oupFormat'],_0x4f338b['vertexForm'+'at']),_0x1a7be2=Hn(_0x4f338b['device']);return _0x1a7be2['register']('shader-mat'+'erial',MA),_0x1a7be2['getProgram']('shader-mat'+'erial',_0x43b536,_0x479779,this['userId']);}}const Iv=(_0x1fcc2f,_0x548176)=>{const _0x3f24e1=_0x548176['length']/(-0x4bf+-0x2013+0x24d5),_0x209008=_0x1fcc2f['length']/(0x1*0x5cf+0x54c+-0xb18),_0x4f6234=new D(),_0x57df74=new D(),_0x244aa7=new D(),_0x23975a=new D(),_0x572ba7=new D(),_0x3a5107=new D(),_0x39d6bb=[];for(let _0x515dcf=0x23f5+0x1*-0xd4e+-0x16a7;_0x515dcf<_0x1fcc2f['length'];_0x515dcf++)_0x39d6bb[_0x515dcf]=-0xb*-0xb9+0x1349*-0x1+0xb56;for(let _0xf835f7=-0x20cc+0x1*-0x320+-0x8fb*-0x4;_0xf835f7<_0x3f24e1;_0xf835f7++){const _0x2cc572=_0x548176[_0xf835f7*(0xa5c+-0x287*0xf+0x18*0x126)],_0x38d043=_0x548176[_0xf835f7*(-0x6cc+-0xed7+0xad3*0x2)+(0xcbc+0x1d94+0x2a4f*-0x1)],_0x596478=_0x548176[_0xf835f7*(0x1*0x1556+0x1b97+-0x6*0x827)+(0x13*-0xb1+0x7*-0x17d+-0xe8*-0x1a)];_0x4f6234['set'](_0x1fcc2f[_0x2cc572*(0xdc3+0x1*0xa8f+-0x184f*0x1)],_0x1fcc2f[_0x2cc572*(-0x17f+0x230+0xae*-0x1)+(-0x1*0x114d+-0x10e*0x1+-0x5e*-0x32)],_0x1fcc2f[_0x2cc572*(0x29*-0x27+-0x2*0x21c+0xa7a)+(-0x1*-0x2283+-0x13a3+-0xede)]),_0x57df74['set'](_0x1fcc2f[_0x38d043*(0x8a8+0xeb6+-0x3*0x7c9)],_0x1fcc2f[_0x38d043*(-0x14e7*0x1+0x2*0xd74+-0x2*0x2ff)+(-0x440*-0x2+0x243d*0x1+-0x2cbc)],_0x1fcc2f[_0x38d043*(-0x81a+0x1e2c+-0x160f)+(0x20d7*0x1+0x2*0xae7+-0x36a3)]),_0x244aa7['set'](_0x1fcc2f[_0x596478*(0x1442+-0x1f1*0x7+-0xc*0x8e)],_0x1fcc2f[_0x596478*(0x2314+0x1039+-0x334a)+(-0x1eea+0x7c3+0x1728)],_0x1fcc2f[_0x596478*(-0x1561+0x4c1*0x1+0x10a3)+(-0xc77*0x1+-0x1e7d+0x2af6)]),_0x23975a['sub2'](_0x57df74,_0x4f6234),_0x572ba7['sub2'](_0x244aa7,_0x4f6234),_0x3a5107['cross'](_0x23975a,_0x572ba7)['normalize'](),_0x39d6bb[_0x2cc572*(0xe7b*-0x1+0x1a83*0x1+-0xc05*0x1)]+=_0x3a5107['x'],_0x39d6bb[_0x2cc572*(-0x2220+-0x6*-0x28d+0x12d5)+(-0x4db+0xfc9+-0xaed*0x1)]+=_0x3a5107['y'],_0x39d6bb[_0x2cc572*(-0x1db2+0x2253+-0x49e)+(0x9b3+-0x1f*0x6a+-0x23*-0x17)]+=_0x3a5107['z'],_0x39d6bb[_0x38d043*(0x1711+0x17fa+-0x2b*0x118)]+=_0x3a5107['x'],_0x39d6bb[_0x38d043*(0xf*-0x1a6+-0x20e4+0x39a1)+(-0x1778+0x1*0x817+0xb3*0x16)]+=_0x3a5107['y'],_0x39d6bb[_0x38d043*(0x759+0x151+-0x8a7)+(-0x822+0xe0a+-0x5e6)]+=_0x3a5107['z'],_0x39d6bb[_0x596478*(0x1cea+0xd*0x1ba+0x5*-0xa45)]+=_0x3a5107['x'],_0x39d6bb[_0x596478*(0x11c2+0xe1b+-0x3*0xa9e)+(0x1*-0x1e49+0xc*-0x10d+0x2ae6)]+=_0x3a5107['y'],_0x39d6bb[_0x596478*(-0x512+0x1daf+-0x189a)+(-0xcd6+0xaa1*0x2+-0x86a)]+=_0x3a5107['z'];}for(let _0x395f3d=0xf3*-0x9+0x1b1+-0x6da*-0x1;_0x395f3d<_0x209008;_0x395f3d++){const _0x240321=_0x39d6bb[_0x395f3d*(-0xc9a*-0x2+0xc2*0x13+-0x2797)],_0x25ad5c=_0x39d6bb[_0x395f3d*(-0x1b78+0x73*-0x39+-0xa*-0x54f)+(-0x1*0x2040+0x58d+0x2*0xd5a)],_0xbea4cf=_0x39d6bb[_0x395f3d*(0x446+0xd37+-0x117a)+(0x45e+0xc*-0x2c2+-0x4ca*-0x6)],_0x5c49c3=(-0x1*0x1691+-0x1a86+0x3118)/Math['sqrt'](_0x240321*_0x240321+_0x25ad5c*_0x25ad5c+_0xbea4cf*_0xbea4cf);_0x39d6bb[_0x395f3d*(-0x1*-0x1305+-0x1*0x1403+-0x1*-0x101)]*=_0x5c49c3,_0x39d6bb[_0x395f3d*(-0x1*-0x53a+0x1a54+-0x1f8b)+(0x1fc1+0x71f*-0x4+-0x344)]*=_0x5c49c3,_0x39d6bb[_0x395f3d*(0xb5c+-0x23ae+0x1855)+(0x3*-0xbe1+0x2c2*-0x3+0x2beb)]*=_0x5c49c3;}return _0x39d6bb;},Mr=(_0x21e5a3,_0x1d67e1,_0x3390e2,_0x2ccc24)=>{const _0x5191ee=_0x2ccc24['length']/(-0x5*-0x2af+-0x23aa+0x1642),_0x29377e=_0x21e5a3['length']/(-0x1271+0x18b*0x13+-0x1b*0x67),_0x22480c=new D(),_0x3f3e38=new D(),_0x5635bd=new D(),_0x1590bc=new J(),_0x1595b9=new J(),_0x35992c=new J(),_0x585ef8=new D(),_0x55366f=new D(),_0xc4ed22=new Float32Array(_0x29377e*(-0x5f9+-0x1515+0x1b11)),_0x55d326=new Float32Array(_0x29377e*(-0x130a*-0x2+-0x14b5+0x457*-0x4)),_0x433049=[];for(let _0x50c69d=0x4c7*-0x6+0x1dbb+-0x111;_0x50c69d<_0x5191ee;_0x50c69d++){const _0x4f7ecc=_0x2ccc24[_0x50c69d*(-0x9a2+-0x1080+0x1a25)],_0x48e921=_0x2ccc24[_0x50c69d*(-0x1a23+-0x353*-0x3+0x102d)+(-0x161*-0x1+-0x1*0x265+0x105*0x1)],_0x26dbca=_0x2ccc24[_0x50c69d*(-0x16*0xad+0x23cf+-0x14ee)+(-0x1b48+-0xf57+0x2aa1)];_0x22480c['set'](_0x21e5a3[_0x4f7ecc*(0x1b9d+-0x1e36+0x1*0x29c)],_0x21e5a3[_0x4f7ecc*(-0x35d+0xc*0x2a8+0x39*-0x80)+(0x291*-0x5+-0x1857+0x252d)],_0x21e5a3[_0x4f7ecc*(0xdf9+0x1e4d+-0x2c43)+(-0x2*0x417+0x21*-0xbe+0x20ae)]),_0x3f3e38['set'](_0x21e5a3[_0x48e921*(0x4b4+-0x1adc+0xe3*0x19)],_0x21e5a3[_0x48e921*(0x17bf+0x5c3+0x347*-0x9)+(-0x1460*0x1+-0x55*0x4f+-0x4c*-0x9d)],_0x21e5a3[_0x48e921*(-0x6*0x674+0x51c+0x1*0x219f)+(0x1425+0x15c5+-0x29e8)]),_0x5635bd['set'](_0x21e5a3[_0x26dbca*(-0x1ed*-0xe+0x1*-0x997+-0x115c)],_0x21e5a3[_0x26dbca*(0x2*-0x3df+0x264d+-0x1e8c)+(-0x1f6f+-0x1ef1+0x3e61)],_0x21e5a3[_0x26dbca*(-0x13f+-0x33+0x175)+(0xbcc+-0x113b+0x7*0xc7)]),_0x1590bc['set'](_0x3390e2[_0x4f7ecc*(0x57*-0x41+-0x22cf*0x1+0x38e8)],_0x3390e2[_0x4f7ecc*(-0x60a+0x7*0x33f+-0x10ad)+(-0x2*-0x301+0x47*-0x1d+-0x6*-0x57)]),_0x1595b9['set'](_0x3390e2[_0x48e921*(0x71*0x3c+0x21ae+-0x3c28)],_0x3390e2[_0x48e921*(-0x9af*0x2+-0x599*0x1+0x3*0x853)+(-0x52a+0x1ed+-0xa6*-0x5)]),_0x35992c['set'](_0x3390e2[_0x26dbca*(-0x1*0xc0b+0x19ee+-0xde1)],_0x3390e2[_0x26dbca*(-0x35b+-0xd89+0x2d1*0x6)+(0xe17*-0x2+-0x3a*-0x9c+-0x729)]);const _0x23ccf5=_0x3f3e38['x']-_0x22480c['x'],_0x51dd31=_0x5635bd['x']-_0x22480c['x'],_0x3dc384=_0x3f3e38['y']-_0x22480c['y'],_0x2e3120=_0x5635bd['y']-_0x22480c['y'],_0x99ce1d=_0x3f3e38['z']-_0x22480c['z'],_0x323aea=_0x5635bd['z']-_0x22480c['z'],_0x35004e=_0x1595b9['x']-_0x1590bc['x'],_0x1c8da0=_0x35992c['x']-_0x1590bc['x'],_0x1e509c=_0x1595b9['y']-_0x1590bc['y'],_0x2065cc=_0x35992c['y']-_0x1590bc['y'],_0x274ac4=_0x35004e*_0x2065cc-_0x1c8da0*_0x1e509c;if(_0x274ac4===-0x1bd1*0x1+0x1d*0x151+-0xa5c)_0x585ef8['set'](-0x1ec1+0x31d*-0x5+0x2e52,-0x36f+0x7c6+-0x1e*0x25,0x1168+0xb7b*0x1+-0x1ce3),_0x55366f['set'](0x1e14+-0xf5a+-0x1*0xeb9,-0x12c8+-0x183f+0x2b07,-0x22f5+-0x44f+-0x4*-0x9d1);else{const _0x34063b=(-0x1ac9+-0x239+0x7*0x425)/_0x274ac4;_0x585ef8['set']((_0x2065cc*_0x23ccf5-_0x1e509c*_0x51dd31)*_0x34063b,(_0x2065cc*_0x3dc384-_0x1e509c*_0x2e3120)*_0x34063b,(_0x2065cc*_0x99ce1d-_0x1e509c*_0x323aea)*_0x34063b),_0x55366f['set']((_0x35004e*_0x51dd31-_0x1c8da0*_0x23ccf5)*_0x34063b,(_0x35004e*_0x2e3120-_0x1c8da0*_0x3dc384)*_0x34063b,(_0x35004e*_0x323aea-_0x1c8da0*_0x99ce1d)*_0x34063b);}_0xc4ed22[_0x4f7ecc*(0x1752+0x1*-0x102f+-0x720)+(-0x6b7+0x1a43+-0x138c)]+=_0x585ef8['x'],_0xc4ed22[_0x4f7ecc*(0x21b*-0xc+-0xf12*0x1+-0x2859*-0x1)+(0x18b2+0x3d2*0x1+-0x1*0x1c83)]+=_0x585ef8['y'],_0xc4ed22[_0x4f7ecc*(0x200d+0xe5*-0x19+-0x9ad)+(0x1057+-0x511*-0x4+-0xc33*0x3)]+=_0x585ef8['z'],_0xc4ed22[_0x48e921*(0x927+0x20f5+-0x2a19)+(-0x1*0x93d+-0xde7*0x2+0x250b)]+=_0x585ef8['x'],_0xc4ed22[_0x48e921*(0x1*-0xe25+0x1af*-0x7+0x19f1*0x1)+(0xe3+0x12+-0x3d*0x4)]+=_0x585ef8['y'],_0xc4ed22[_0x48e921*(-0x66a+0x1*-0x1921+0x1f8e)+(0x200c+0x6d9*-0x1+-0x1931)]+=_0x585ef8['z'],_0xc4ed22[_0x26dbca*(0xc01+0x1746+-0x4*0x8d1)+(0x4e9+0x1b1b+-0x2004)]+=_0x585ef8['x'],_0xc4ed22[_0x26dbca*(-0x6e6+-0x128b*-0x2+-0x1e2d)+(-0x32b*0x1+0x90a+0x2ef*-0x2)]+=_0x585ef8['y'],_0xc4ed22[_0x26dbca*(-0x26f1*0x1+-0x1e*0x143+0xccd*0x6)+(0x4e5*-0x3+0x11f0+0x1*-0x33f)]+=_0x585ef8['z'],_0x55d326[_0x4f7ecc*(0x1f1e+-0x265d+0x742*0x1)+(-0x2561+-0x4c9+0x2a2a)]+=_0x55366f['x'],_0x55d326[_0x4f7ecc*(-0x109+-0xe*-0x143+-0x109e*0x1)+(0x17ba+-0x1ebd+-0x4*-0x1c1)]+=_0x55366f['y'],_0x55d326[_0x4f7ecc*(-0x1be*0x7+0x1224+0x5ef*-0x1)+(0x1977+0x2048+-0x39bd)]+=_0x55366f['z'],_0x55d326[_0x48e921*(0x12*-0x6a+0x1c4d+-0x379*0x6)+(-0xdd7+0x2*-0x129b+0x74b*0x7)]+=_0x55366f['x'],_0x55d326[_0x48e921*(0x2e5*-0xa+0x11c2*0x1+0xb33)+(-0x3f3*-0x1+0x13*-0x1c1+0x1d61)]+=_0x55366f['y'],_0x55d326[_0x48e921*(-0x367*0x5+-0x1*-0xdc7+0x33f)+(-0xf*0x17e+0x4*-0x89f+0x38e0)]+=_0x55366f['z'],_0x55d326[_0x26dbca*(-0x39*-0xa3+0x877+0x8f3*-0x5)+(-0x1*0x156b+-0x269+0x4c4*0x5)]+=_0x55366f['x'],_0x55d326[_0x26dbca*(0x1658+0x2*-0xfa3+0x8f1)+(0x467+-0xad2+-0xc*-0x89)]+=_0x55366f['y'],_0x55d326[_0x26dbca*(0x3*-0x35+-0x24d2+-0x11a*-0x22)+(-0x124c+-0xfa*-0x3+-0x30*-0x52)]+=_0x55366f['z'];}const _0x18572b=new D(),_0x588667=new D(),_0x2f28cd=new D(),_0x2348a4=new D();for(let _0x5d4074=-0x3a1*0x1+0x1*0x1173+-0xdd2;_0x5d4074<_0x29377e;_0x5d4074++){_0x2f28cd['set'](_0x1d67e1[_0x5d4074*(-0x2199*0x1+0x1383+-0x3*-0x4b3)],_0x1d67e1[_0x5d4074*(0x23a3*-0x1+0x5b7*0x1+0x1def)+(0x15b9+-0x149c+-0x47*0x4)],_0x1d67e1[_0x5d4074*(0x89c+-0x127+-0x772)+(0x44*-0x4f+0x505*-0x1+-0x1*-0x1a03)]),_0x18572b['set'](_0xc4ed22[_0x5d4074*(-0x1*-0x259+-0x575+0x11*0x2f)],_0xc4ed22[_0x5d4074*(0xb60+-0x10f7+0x59a)+(-0x365+-0x2036+0x239c)],_0xc4ed22[_0x5d4074*(0xb68+-0x20fd+0x1598)+(0x200d+-0xd*0x2c0+0xd*0x49)]),_0x588667['set'](_0x55d326[_0x5d4074*(0x1*0x496+0xb*0x21d+-0x1bd2)],_0x55d326[_0x5d4074*(-0xb85*-0x1+0xdd2+0x655*-0x4)+(0x9dc+-0x265*-0x9+-0x28*0xc9)],_0x55d326[_0x5d4074*(-0x7*0x41f+0x1c9*0x1+0x1b13)+(-0x296*0xd+-0x23e7+-0x33*-0x15d)]);const _0x2ce305=_0x2f28cd['dot'](_0x18572b);_0x2348a4['copy'](_0x2f28cd)['mulScalar'](_0x2ce305),_0x2348a4['sub2'](_0x18572b,_0x2348a4)['normalize'](),_0x433049[_0x5d4074*(-0x3a1*0x8+-0x2581*-0x1+-0x875)]=_0x2348a4['x'],_0x433049[_0x5d4074*(0x1*0x469+0x1e83+0x8*-0x45d)+(-0x85f*-0x3+-0xfc9+-0x1*0x953)]=_0x2348a4['y'],_0x433049[_0x5d4074*(0x1727*-0x1+0x14*-0x5b+-0x151*-0x17)+(-0x5*-0x78b+-0x1*0x1b55+-0x4*0x298)]=_0x2348a4['z'],_0x2348a4['cross'](_0x2f28cd,_0x18572b),_0x433049[_0x5d4074*(0x23d4+-0x1*-0x20e3+-0x44b3)+(-0x2193+0x3a*0xe+0xe5*0x22)]=_0x2348a4['dot'](_0x588667)<-0x1*0x73+-0x368+0x2f*0x15?-(-0x2*-0x895+0x1*0xed+-0x1216):0x1874+0x3c0+0x1c33*-0x1;}return _0x433049;};class Ta{constructor(){h(this,'positions'),h(this,'normals'),h(this,'colors'),h(this,'uvs'),h(this,'uvs1'),h(this,'blendIndic'+'es'),h(this,'blendWeigh'+'ts'),h(this,'tangents'),h(this,'indices');}['calculateN'+'ormals'](){w['assert'](this['positions'],'Geometry\x20m'+'ust\x20have\x20p'+'ositions\x20s'+'et'),w['assert'](this['indices'],'Geometry\x20m'+'ust\x20have\x20i'+'ndices\x20set'),this['normals']=Iv(this['positions'],this['indices']);}['calculateT'+'angents'](){w['assert'](this['positions'],'Geometry\x20m'+'ust\x20have\x20p'+'ositions\x20s'+'et'),w['assert'](this['normals'],'Geometry\x20m'+'ust\x20have\x20n'+'ormals\x20set'),w['assert'](this['uvs'],'Geometry\x20m'+'ust\x20have\x20u'+'vs\x20set'),w['assert'](this['indices'],'Geometry\x20m'+'ust\x20have\x20i'+'ndices\x20set'),this['tangents']=Mr(this['positions'],this['normals'],this['uvs'],this['indices']);}}const pu=(0x2319+-0x2f3*0x8+-0xb7d)/(-0x26f0*-0x1+-0x1*0x7ae+-0x1f02),hg=0xfe1+-0x10*0x1d7+-0x10*-0xd9-pu*(-0x3*-0xd02+-0x3f3+0xbf*-0x2f);class mu extends Ta{constructor(_0x5e1282={}){super();const _0x2eb4e5=_0x5e1282['halfExtent'+'s']??new D(-0x176+0x18fb+-0x1b*0xdf+0.5,-0x8*-0x2cf+0x131b+-0x2993+0.5,-0x26f5*0x1+0xe8c+-0x823*-0x3+0.5),_0xfb0142=_0x5e1282['widthSegme'+'nts']??0x11fd+0x3*-0x903+0x90d,_0x3a197f=_0x5e1282['lengthSegm'+'ents']??-0xb69+0xaa8*-0x1+0x19*0xe2,_0x3c8b79=_0x5e1282['heightSegm'+'ents']??0x1f75+-0x17dc+-0x8*0xf3,_0x157b74=_0x5e1282['yOffset']??-0x8*0x2b3+0xdb6+-0x1*-0x7e2,_0x40d621=-_0x2eb4e5['y']+_0x157b74,_0x2cd2e9=_0x2eb4e5['y']+_0x157b74,_0x3625f0=[new D(-_0x2eb4e5['x'],_0x40d621,_0x2eb4e5['z']),new D(_0x2eb4e5['x'],_0x40d621,_0x2eb4e5['z']),new D(_0x2eb4e5['x'],_0x2cd2e9,_0x2eb4e5['z']),new D(-_0x2eb4e5['x'],_0x2cd2e9,_0x2eb4e5['z']),new D(_0x2eb4e5['x'],_0x40d621,-_0x2eb4e5['z']),new D(-_0x2eb4e5['x'],_0x40d621,-_0x2eb4e5['z']),new D(-_0x2eb4e5['x'],_0x2cd2e9,-_0x2eb4e5['z']),new D(_0x2eb4e5['x'],_0x2cd2e9,-_0x2eb4e5['z'])],_0x162717=[[0x1d11+0x2*0x3c5+-0x249b*0x1,0x1ae1*-0x1+-0x185f*-0x1+0x283,0x3*0x4b2+0x2199+-0x2fac],[-0x12ec+0xb23*-0x2+0x2936,0x1f89+-0x7f*0xe+-0x1892,0x1ff5*0x1+0xba5+0x5*-0x8b7],[-0x1e*0x13a+0x2407+0x28*0x5,-0x130d+-0xd*-0x2b3+-0x804*0x2,0x2030+0x24d9+0x4503*-0x1],[-0x6e7+-0x16b9+0x25*0xcd,-0x1*-0x143d+0x151+-0x158e,0x6a7*-0x4+-0x2*-0x127c+-0x1*0xa58],[0x1331+-0x334*0x9+-0x4*-0x269,0x1971+-0x3*0x74d+0x52*-0xb,0x11*0x4+0x198e*-0x1+0x653*0x4],[-0x20b1+-0x1427+0x411*0xd,-0x89*-0x45+-0x2*-0x1003+0x13*-0x3a1,0x223*0x7+-0x101*0x1+-0xdee]],_0xe90185=[[-0x4*-0x8db+-0x96b*0x2+-0x1096,-0x52f*0x7+-0x1eef+0x4338,-0xd30+-0x145a+-0x218b*-0x1],[0x1565*0x1+-0x2690+-0xf*-0x125,-0xd8a*-0x1+-0xd89+-0x1*0x1,-(-0x3*-0x983+-0x23*0x59+-0x105d)],[0x182f+-0x1*0x1433+-0x4*0xff,0x3e9*-0x1+-0x245f+0x2849,0x185*0xa+0x1*0x39c+-0x12ce],[0x431+0x12a9+0x1c2*-0xd,-(0x4a0+-0x25b5+-0xe*-0x25d),0xf*-0x135+-0x1*0x1005+-0x150*-0x1a],[-0x10a3*0x1+0x2f*-0x61+0x2273*0x1,-0xf*-0x24f+-0x2*-0x1159+0x4553*-0x1,-0x109c*0x1+-0x23b4+-0x22e*-0x18],[-(0x3f*0x11+-0x1086+-0x8*-0x18b),0x5*0x4fa+0x1105*0x2+-0x12*0x346,0x1eb1+0x10e5+-0x1*0x2f96]],_0x16912a={'FRONT':0x0,'BACK':0x1,'TOP':0x2,'BOTTOM':0x3,'RIGHT':0x4,'LEFT':0x5},_0x464e82=[],_0x3ff1ad=[],_0x575d50=[],_0x2c6d92=[];let _0x51791c=0x1778+-0x491*-0x7+-0x376f;const _0x251738=(_0x43933c,_0x455f41,_0x11e186)=>{const _0x53bf24=new D(),_0x59c1b3=new D(),_0x24f2f9=new D(),_0x3af270=new D();for(let _0x593b08=-0x103*-0x26+-0x6*-0x23b+-0xcf5*0x4;_0x593b08<=_0x455f41;_0x593b08++)for(let _0x3fa33d=-0x1*0x16ac+0x1645+0x67;_0x3fa33d<=_0x11e186;_0x3fa33d++){_0x53bf24['lerp'](_0x3625f0[_0x162717[_0x43933c][0x1*-0x2129+-0xfa0+0x30c9]],_0x3625f0[_0x162717[_0x43933c][0xa*0x194+-0x175*-0x14+0x3*-0xef9]],_0x593b08/_0x455f41),_0x59c1b3['lerp'](_0x3625f0[_0x162717[_0x43933c][0x7*-0x3c7+-0xfd*0xb+-0x4*-0x954]],_0x3625f0[_0x162717[_0x43933c][-0xb29+0xf17+0x4*-0xfb]],_0x3fa33d/_0x11e186),_0x24f2f9['sub2'](_0x59c1b3,_0x3625f0[_0x162717[_0x43933c][-0x13d4+0xdc3*0x1+0x611]]),_0x3af270['add2'](_0x53bf24,_0x24f2f9);let _0x31b177=_0x593b08/_0x455f41,_0x4ce080=_0x3fa33d/_0x11e186;_0x464e82['push'](_0x3af270['x'],_0x3af270['y'],_0x3af270['z']),_0x3ff1ad['push'](_0xe90185[_0x43933c][-0x12b5+-0x3ab+0x1660],_0xe90185[_0x43933c][-0x2186+-0xb*0x279+-0x2*-0x1e5d],_0xe90185[_0x43933c][-0x3*0xb2a+-0x10a4+-0x1*-0x3224]),_0x575d50['push'](_0x31b177,0x1a*-0xd4+0x1*-0xf29+-0x3d*-0x9a-_0x4ce080),_0x31b177=_0x31b177*hg+pu,_0x4ce080=_0x4ce080*hg+pu,_0x31b177/=0x57*-0xb+-0x24a3+0x2863*0x1,_0x4ce080/=0x1a3c+-0x4a9*0x5+-0x2ec,_0x31b177+=_0x43933c%(0x2595+0x13*-0x1af+-0x595)/(-0xd4+0x1b2d+-0x1a56),_0x4ce080+=Math['floor'](_0x43933c/(-0x20a8+-0x5f6+-0x383*-0xb))/(0x6d*0x10+-0x3c0*0x3+0x473),_0x593b08<_0x455f41&&_0x3fa33d<_0x11e186&&(_0x2c6d92['push'](_0x51791c+_0x11e186+(0x82f*-0x2+-0x26b4+0x3713),_0x51791c+(0xb*-0x38+-0x1*0x2474+0x26dd),_0x51791c),_0x2c6d92['push'](_0x51791c+_0x11e186+(-0x99e*-0x2+0x357*-0x3+-0x936),_0x51791c+_0x11e186+(0xed9+-0x2f2+-0xbe5),_0x51791c+(0xfef+-0x2*-0xf2+-0x11d2))),_0x51791c++;}};_0x251738(_0x16912a['FRONT'],_0xfb0142,_0x3c8b79),_0x251738(_0x16912a['BACK'],_0xfb0142,_0x3c8b79),_0x251738(_0x16912a['TOP'],_0xfb0142,_0x3a197f),_0x251738(_0x16912a['BOTTOM'],_0xfb0142,_0x3a197f),_0x251738(_0x16912a['RIGHT'],_0x3a197f,_0x3c8b79),_0x251738(_0x16912a['LEFT'],_0x3a197f,_0x3c8b79),this['positions']=_0x464e82,this['normals']=_0x3ff1ad,this['uvs']=_0x575d50,this['uvs1']=_0x575d50,this['indices']=_0x2c6d92,_0x5e1282['calculateT'+'angents']&&(this['tangents']=Mr(_0x464e82,_0x3ff1ad,_0x575d50,_0x2c6d92));}}class _m extends Ta{constructor(_0x252c08={}){super();const _0x193631=_0x252c08['radius']??0x11*0x24b+-0x751+-0x1faa+0.5,_0x5412ef=_0x252c08['latitudeBa'+'nds']??0x1*-0x11e7+-0x1438+-0x1*-0x262f,_0xadf95f=_0x252c08['longitudeB'+'ands']??-0x11cf+0xbb*-0x32+0x3665,_0x2548f0=[],_0x1e5290=[],_0x3a0da4=[],_0x2f63f7=[];for(let _0x580e00=-0x12d5*0x1+0x2141+-0xe6c;_0x580e00<=_0x5412ef;_0x580e00++){const _0x363496=_0x580e00*Math['PI']/_0x5412ef,_0x1e925c=Math['sin'](_0x363496),_0x262871=Math['cos'](_0x363496);for(let _0xec7473=-0x25db+0x2*0x3f3+-0x1df5*-0x1;_0xec7473<=_0xadf95f;_0xec7473++){const _0x1bf9c2=_0xec7473*(-0x1958+-0x1*-0x333+-0x1*-0x1627)*Math['PI']/_0xadf95f-Math['PI']/(-0x12cb*0x1+-0xad3*-0x1+-0x2*-0x3fd),_0x329c1a=Math['sin'](_0x1bf9c2),_0x363c3f=Math['cos'](_0x1bf9c2)*_0x1e925c,_0x4acff2=_0x262871,_0x5110ab=_0x329c1a*_0x1e925c,_0x221d55=0xa4f+0x21be+-0xb03*0x4-_0xec7473/_0xadf95f,_0x282429=-0x1*0xe63+-0xcb9+0x1b1d-_0x580e00/_0x5412ef;_0x2548f0['push'](_0x363c3f*_0x193631,_0x4acff2*_0x193631,_0x5110ab*_0x193631),_0x1e5290['push'](_0x363c3f,_0x4acff2,_0x5110ab),_0x3a0da4['push'](_0x221d55,0x3*-0x1f3+-0x1280+0x185a-_0x282429);}}for(let _0x2d5f8b=-0xa3+0x2635*-0x1+-0x2*-0x136c;_0x2d5f8b<_0x5412ef;++_0x2d5f8b)for(let _0x1660d2=-0xda3+0x1d89+-0x172*0xb;_0x1660d2<_0xadf95f;++_0x1660d2){const _0x205587=_0x2d5f8b*(_0xadf95f+(-0x1*-0x1a37+0x1*-0x1e05+-0x145*-0x3))+_0x1660d2,_0x43b0a3=_0x205587+_0xadf95f+(-0xfc5+0x26c2+-0x16fc);_0x2f63f7['push'](_0x205587+(-0x9fd*0x3+-0x1350+-0x629*-0x8),_0x43b0a3,_0x205587),_0x2f63f7['push'](_0x205587+(0x2148+0x342*0x8+-0x3b57),_0x43b0a3+(-0x164d+-0x1fe7*-0x1+-0xbd*0xd),_0x43b0a3);}this['positions']=_0x2548f0,this['normals']=_0x1e5290,this['uvs']=_0x3a0da4,this['uvs1']=_0x3a0da4,this['indices']=_0x2f63f7,_0x252c08['calculateT'+'angents']&&(this['tangents']=Mr(_0x2548f0,_0x1e5290,_0x3a0da4,_0x2f63f7));}}class DA extends _m{constructor(_0x53ba06={}){const _0x48f29b=_0x53ba06['latitudeBa'+'nds']??0x55a+0x72d+0x1*-0xc77,_0x4a3947=_0x53ba06['longitudeB'+'ands']??-0x5f2+-0x18c3+0x1ec5;super({'radius':0.5,'latitudeBands':_0x48f29b,'longitudeBands':_0x4a3947});const _0x82a3ce=0x22c4+-0x17ee+-0xad6+0.1,_0x1e9fad=-0xc86+0x1366+0xb*-0xa0+0.95,_0x4a7ec2=_0x1e9fad*_0x1e9fad,_0x17b874=this['positions'];for(let _0xd7f2b3=0x5*0x5bb+-0x12c8+-0x9df;_0xd7f2b3<_0x17b874['length'];_0xd7f2b3+=0x38d*0x1+0x1327+-0x1*0x16b1){const _0x1135c0=_0x17b874[_0xd7f2b3]/(-0x14be+-0x22c2+0x3780+0.5);let _0x5ea336=_0x17b874[_0xd7f2b3+(0x2539+0xef2+0x2*-0x1a15)]/(-0x8f*0x12+-0xfe*-0xb+0x1*-0xdc+0.5);const _0xefbcbd=_0x17b874[_0xd7f2b3+(-0x1a81+-0x2302+0x3d85)]/(0x21e7+-0x3*-0xa3+-0x8f4*0x4+0.5);_0x5ea336<0xb71+0xf98+0x1*-0x1b09&&(_0x5ea336*=-0xf88*0x2+-0x2*-0xd16+0x4e4+0.3,_0x1135c0*_0x1135c0+_0xefbcbd*_0xefbcbd<_0x4a7ec2&&(_0x5ea336=-_0x82a3ce)),_0x5ea336+=_0x82a3ce,_0x5ea336*=0x1*-0x10b2+-0xcb2+0x13*0x18c+0.5,_0x17b874[_0xd7f2b3+(-0x9d9+0x135a*0x2+-0x3*0x99e)]=_0x5ea336;}}}class zo{static['create'](_0x1548c7,_0x31e3a3){switch(_0x31e3a3){case Qw:return zo['box'](_0x1548c7);case Jw:return zo['dome'](_0x1548c7);}return w['assert'](_0x31e3a3===Bo,'Unsupporte'+'d\x20sky\x20geom'+'etry\x20type\x20'+_0x31e3a3),zo['infinite'](_0x1548c7);}static['infinite'](_0x2a6b43){return Ge['fromGeomet'+'ry'](_0x2a6b43,new mu(_0x2a6b43));}static['box'](_0x21218b){return Ge['fromGeomet'+'ry'](_0x21218b,new mu({'yOffset':0.5}));}static['dome'](_0x4dee86){const _0x466e9b=new DA({'latitudeBands':0x32,'longitudeBands':0x32});return _0x466e9b['normals']=void(0x1*-0x4b2+-0x396+0x848),_0x466e9b['uvs']=void(-0x1f5a+-0xdc*0x3+-0x56*-0x65),Ge['fromGeomet'+'ry'](_0x4dee86,_0x466e9b);}}class IA{constructor(_0x366ee1,_0x520a85,_0x999f65,_0xcba87d,_0x417e18){h(this,'meshInstan'+'ce',null),h(this,'_depthWrit'+'e',!(-0xd*0x233+-0x172+0x1e0a));const _0xb863fb=new Xn({'uniqueName':'SkyMateria'+'l','vertexGLSL':Pe['get'](_0x366ee1,Fe)['get']('skyboxVS'),'fragmentGLSL':Pe['get'](_0x366ee1,Fe)['get']('skyboxPS'),'vertexWGSL':Pe['get'](_0x366ee1,it)['get']('skyboxVS'),'fragmentWGSL':Pe['get'](_0x366ee1,it)['get']('skyboxPS'),'attributes':{'aPosition':Me}});_0xb863fb['setDefine']('{SKYBOX_DE'+'CODE_FNC}',Tr['decodeFunc'](_0xcba87d['encoding'])),_0x417e18!==Bo&&_0xb863fb['setDefine']('SKYMESH',''),_0xcba87d['cubemap']&&_0xb863fb['setDefine']('SKY_CUBEMA'+'P',''),_0xb863fb['setParamet'+'er']('skyboxHigh'+'lightMulti'+'plier',_0x520a85['skyboxHigh'+'lightMulti'+'plier']),_0xcba87d['cubemap']?_0xb863fb['setParamet'+'er']('texture_cu'+'beMap',_0xcba87d):(_0xb863fb['setParamet'+'er']('texture_en'+'vAtlas',_0xcba87d),_0xb863fb['setParamet'+'er']('mipLevel',_0x520a85['skyboxMip'])),_0xb863fb['cull']=Fo,_0xb863fb['depthWrite']=this['_depthWrit'+'e'];const _0x19907f=_0x520a85['layers']['getLayerBy'+'Id'](Kp);if(_0x19907f){const _0x182768=zo['create'](_0x366ee1,_0x417e18),_0x2ff322=new He(_0x182768,_0xb863fb,_0x999f65);this['meshInstan'+'ce']=_0x2ff322,_0x2ff322['cull']=!(-0xbc*0xb+-0x1*-0x13a6+-0xb91),_0x2ff322['pick']=!(-0x33a+-0x6b9+0x9f4),_0x19907f['addMeshIns'+'tances']([_0x2ff322]),this['skyLayer']=_0x19907f;}}['destroy'](){this['meshInstan'+'ce']&&(this['skyLayer']&&this['skyLayer']['removeMesh'+'Instances']([this['meshInstan'+'ce']]),this['meshInstan'+'ce']['destroy'](),this['meshInstan'+'ce']=null);}set['depthWrite'](_0x39bae9){this['_depthWrit'+'e']=_0x39bae9,this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['material']['depthWrite']=_0x39bae9);}get['depthWrite'](){return this['_depthWrit'+'e'];}}class LA{constructor(_0x2985ec){h(this,'_type',Bo),h(this,'_center',new D(-0x1a51+-0x1b40+0x3591,0x10c5+0x412*0x5+-0x2*0x128f,0xa1e*0x3+-0x15fb+-0x1*0x85f)),h(this,'skyMesh',null),h(this,'_depthWrit'+'e',!(0x1*-0x1286+-0x3*-0xad9+-0xe04)),h(this,'node',new Ie('SkyMeshNod'+'e')),(this['device']=_0x2985ec['device'],this['scene']=_0x2985ec,this['center']=new D(-0x1d74*0x1+0x3*0x41d+0x111d,0x3bd*-0xa+0x1037*0x2+0x4f5,0x755*-0x5+0xc7+0x23e2),this['centerArra'+'y']=new Float32Array(-0xa8f+-0x481*-0x3+-0x2f1),this['projectedS'+'kydomeCent'+'erId']=this['device']['scope']['resolve']('projectedS'+'kydomeCent'+'er'));}['applySetti'+'ngs'](_0x3537b5){this['type']=_0x3537b5['skyType']??Bo,this['node']['setLocalPo'+'sition'](new D(_0x3537b5['skyMeshPos'+'ition']??[-0x1145+-0x1b57+0x2c9c,-0x7af*0x1+0x11b*-0x8+0x1087,-0x86*-0x16+-0x2191+-0x1*-0x160d])),this['node']['setLocalEu'+'lerAngles'](new D(_0x3537b5['skyMeshRot'+'ation']??[0x140b+0x1*-0x235f+0xf54,-0x1433*-0x1+0xc83*0x2+-0x2d39,-0xf4*-0xb+-0xa*-0x157+-0x17e2])),this['node']['setLocalSc'+'ale'](new D(_0x3537b5['skyMeshSca'+'le']??[0x2*-0x118c+0x1*0x14a7+-0x56*-0x2b,0x7e3*0x3+0x20ef+-0x3897,-0x3e*0x11+0x3*0x76f+0x166*-0xd])),_0x3537b5['skyCenter']&&(this['_center']=new D(_0x3537b5['skyCenter']));}set['type'](_0xed0ca9){this['_type']!==_0xed0ca9&&(this['_type']=_0xed0ca9,this['scene']['updateShad'+'ers']=!(0x1fc3+0x39a*0x6+-0x41b*0xd),this['updateSkyM'+'esh']());}get['type'](){return this['_type'];}set['center'](_0x17b05f){this['_center']['copy'](_0x17b05f);}get['center'](){return this['_center'];}set['depthWrite'](_0x5ec4fb){this['_depthWrit'+'e']!==_0x5ec4fb&&(this['_depthWrit'+'e']=_0x5ec4fb,this['skyMesh']&&(this['skyMesh']['depthWrite']=_0x5ec4fb));}get['depthWrite'](){return this['_depthWrit'+'e'];}['updateSkyM'+'esh'](){const _0x55ec14=this['scene']['_getSkybox'+'Tex']();_0x55ec14&&(this['resetSkyMe'+'sh'](),this['skyMesh']=new IA(this['device'],this['scene'],this['node'],_0x55ec14,this['type']),this['skyMesh']['depthWrite']=this['_depthWrit'+'e'],this['scene']['fire']('set:skybox',_0x55ec14));}['resetSkyMe'+'sh'](){var _0x5e6961;(_0x5e6961=this['skyMesh'])==null||_0x5e6961['destroy'](),this['skyMesh']=null;}['update'](){if(this['type']!==Bo){const {center:_0x5f3d7f,centerArray:_0x541283}=this,_0x1389a7=new D();this['node']['getWorldTr'+'ansform']()['transformP'+'oint'](_0x5f3d7f,_0x1389a7),_0x541283[-0x1aca+-0x3f0*-0x4+0xb0a]=_0x1389a7['x'],_0x541283[-0x1*0x2653+0x1c27+0xa2d]=_0x1389a7['y'],_0x541283[0x20b1+0x26d1+-0x4780]=_0x1389a7['z'],this['projectedS'+'kydomeCent'+'erId']['setValue'](_0x541283);}}}const Ch=new Ie();Ch['worldTrans'+'form']=te['IDENTITY'],Ch['_dirtyWorl'+'d']=Ch['_dirtyNorm'+'al']=!(0x26d2+0x205+-0x28d6);class RA{constructor(_0x4739f6,_0x1c10eb,_0x1240d4){this['material']=_0x1c10eb,this['layer']=_0x1240d4,this['positions']=[],this['colors']=[],this['mesh']=new Ge(_0x4739f6),this['meshInstan'+'ce']=null;}['addLines'](_0x2d9f0f,_0x5e1a8b){const _0x2af77c=this['positions'],_0x2d6702=_0x2d9f0f['length'];for(let _0x280d5d=-0x3*0x788+0x1df*-0xa+0x294e;_0x280d5d<_0x2d6702;_0x280d5d++){const _0x171bb3=_0x2d9f0f[_0x280d5d];_0x2af77c['push'](_0x171bb3['x'],_0x171bb3['y'],_0x171bb3['z']);}const _0x1788fd=this['colors'];if(_0x5e1a8b['length'])for(let _0x1c622c=0x1*-0x330+0x1*-0x35+0x1*0x365;_0x1c622c<_0x2d6702;_0x1c622c++){const _0x5d6dc2=_0x5e1a8b[_0x1c622c];_0x1788fd['push'](_0x5d6dc2['r'],_0x5d6dc2['g'],_0x5d6dc2['b'],_0x5d6dc2['a']);}else{for(let _0x23c880=-0x631*0x6+-0xc29*-0x2+0xcd4*0x1;_0x23c880<_0x2d6702;_0x23c880++)_0x1788fd['push'](_0x5e1a8b['r'],_0x5e1a8b['g'],_0x5e1a8b['b'],_0x5e1a8b['a']);}}['addLinesAr'+'rays'](_0x4f2c09,_0x43dd7a){const _0x2c687b=this['positions'];for(let _0x1bff1d=-0x1*0x445+0x1*0x853+-0x40e;_0x1bff1d<_0x4f2c09['length'];_0x1bff1d+=-0x1f36+0x3*0x70+0x1de9)_0x2c687b['push'](_0x4f2c09[_0x1bff1d],_0x4f2c09[_0x1bff1d+(0xb*0x239+-0x26cc+0xe5a)],_0x4f2c09[_0x1bff1d+(0x1dc5+0x211*0x11+-0x40e4)]);const _0x431549=this['colors'];if(_0x43dd7a['length']){for(let _0x42c485=0xd2e*0x1+-0xdcc+0x9e;_0x42c485<_0x43dd7a['length'];_0x42c485+=-0x2a5+-0x194d+-0x952*-0x3)_0x431549['push'](_0x43dd7a[_0x42c485],_0x43dd7a[_0x42c485+(0xe09*0x1+-0xa5a+-0x3ae)],_0x43dd7a[_0x42c485+(-0x20ed*-0x1+-0xff8+-0x10f3)],_0x43dd7a[_0x42c485+(-0x1017+-0x1516+-0x5*-0x770)]);}else{const _0x10a650=_0x4f2c09['length']/(0x1*-0xa5d+0x1d37+-0x12d7);for(let _0xe223cf=0x1a25+0x7*0x3ec+-0x1*0x3599;_0xe223cf<_0x10a650;_0xe223cf++)_0x431549['push'](_0x43dd7a['r'],_0x43dd7a['g'],_0x43dd7a['b'],_0x43dd7a['a']);}}['onPreRende'+'r'](_0x514c36,_0x3e4c7b){this['positions']['length']>-0x434+-0x14b*0xd+-0x1503*-0x1&&this['material']['transparen'+'t']===_0x3e4c7b&&(this['mesh']['setPositio'+'ns'](this['positions']),this['mesh']['setColors'](this['colors']),this['mesh']['update'](hd,!(-0x10d9+-0x2*-0x968+-0x1f6)),this['meshInstan'+'ce']||(this['meshInstan'+'ce']=new He(this['mesh'],this['material'],Ch)),_0x514c36['push'](this['meshInstan'+'ce']));}['clear'](){this['positions']['length']=0x2*0x3bb+-0x185*0xe+0xdd0,this['colors']['length']=0x6ba+-0x1aa6+-0x3*-0x6a4;}}class OA{constructor(_0x533219){this['device']=_0x533219,this['map']=new Map();}['getBatch'](_0x34b2f6,_0x3d7fd3){let _0x59f6f6=this['map']['get'](_0x34b2f6);return _0x59f6f6||(_0x59f6f6=new RA(this['device'],_0x34b2f6,_0x3d7fd3),this['map']['set'](_0x34b2f6,_0x59f6f6)),_0x59f6f6;}['onPreRende'+'r'](_0x2662ee,_0x2f9698){this['map']['forEach'](_0x4776f7=>{_0x4776f7['onPreRende'+'r'](_0x2662ee,_0x2f9698);});}['clear'](){this['map']['forEach'](_0x1368d7=>_0x1368d7['clear']());}}const Ts=[],Ba=new D();class FA{constructor(_0x26251f){h(this,'shaderDesc'+'s',new Map()),(this['device']=_0x26251f,this['quadMesh']=null,this['textureSha'+'der']=null,this['depthTextu'+'reShader']=null,this['cubeLocalP'+'os']=null,this['cubeWorldP'+'os']=null,this['batchesMap']=new Map(),this['allBatches']=new Set(),this['updatedLay'+'ers']=new Set(),this['_materialD'+'epth']=null,this['_materialN'+'oDepth']=null,this['layerMeshI'+'nstances']=new Map());}['createMate'+'rial'](_0x235e70){const _0x3e3d57=new Xn({'uniqueName':'ImmediateL'+'ine','vertexGLSL':Pe['get'](this['device'],Fe)['get']('immediateL'+'ineVS'),'fragmentGLSL':Pe['get'](this['device'],Fe)['get']('immediateL'+'inePS'),'vertexWGSL':Pe['get'](this['device'],it)['get']('immediateL'+'ineVS'),'fragmentWGSL':Pe['get'](this['device'],it)['get']('immediateL'+'inePS'),'attributes':{'vertex_position':Me,'vertex_color':Wt}});return _0x3e3d57['blendType']=Zs,_0x3e3d57['depthTest']=_0x235e70,_0x3e3d57['update'](),_0x3e3d57;}get['materialDe'+'pth'](){return this['_materialD'+'epth']||(this['_materialD'+'epth']=this['createMate'+'rial'](!(-0x262+0x1c37+-0x19d5))),this['_materialD'+'epth'];}get['materialNo'+'Depth'](){return this['_materialN'+'oDepth']||(this['_materialN'+'oDepth']=this['createMate'+'rial'](!(-0x1bad+-0x1da*0x7+0x28a4))),this['_materialN'+'oDepth'];}['getBatch'](_0x5c3098,_0x500c8a){let _0x5a0385=this['batchesMap']['get'](_0x5c3098);_0x5a0385||(_0x5a0385=new OA(this['device']),this['batchesMap']['set'](_0x5c3098,_0x5a0385)),this['allBatches']['add'](_0x5a0385);const _0x110a0b=_0x500c8a?this['materialDe'+'pth']:this['materialNo'+'Depth'];return _0x5a0385['getBatch'](_0x110a0b,_0x5c3098);}['getShaderD'+'esc'](_0x2eb0a3,_0x287950,_0x1b527f){return this['shaderDesc'+'s']['has'](_0x2eb0a3)||this['shaderDesc'+'s']['set'](_0x2eb0a3,{'uniqueName':'DebugShade'+'r:'+_0x2eb0a3,'vertexGLSL':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20attribute'+'\x20vec2\x20vert'+'ex_positio'+'n;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20mat4\x20matr'+'ix_model;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'varying\x20ve'+'c2\x20uv0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20vo'+'id\x20main(vo'+'id)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'gl_Positio'+'n\x20=\x20matrix'+'_model\x20*\x20v'+'ec4(vertex'+'_position,'+'\x200,\x201);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uv0\x20=\x20ve'+'rtex_posit'+'ion.xy\x20+\x200'+'.5;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20','vertexWGSL':'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20attribute'+'\x20vertex_po'+'sition:\x20ve'+'c2f;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20matrix_'+'model:\x20mat'+'4x4f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vary'+'ing\x20uv0:\x20v'+'ec2f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20@ver'+'tex\x20fn\x20ver'+'texMain(in'+'put:\x20Verte'+'xInput)\x20->'+'\x20VertexOut'+'put\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20output'+':\x20VertexOu'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'output.pos'+'ition\x20=\x20un'+'iform.matr'+'ix_model\x20*'+'\x20vec4f(inp'+'ut.vertex_'+'position,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20outpu'+'t.uv0\x20=\x20in'+'put.vertex'+'_position.'+'xy\x20+\x20vec2f'+'(0.5);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20','fragmentGLSL':_0x287950,'fragmentWGSL':_0x1b527f,'attributes':{'vertex_position':Me}}),this['shaderDesc'+'s']['get'](_0x2eb0a3);}['getTexture'+'ShaderDesc'](_0x350c13){const _0x4468ef=Tr['decodeFunc'](_0x350c13);return this['getShaderD'+'esc']('textureSha'+'der-'+_0x350c13,'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22gammaPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20varyin'+'g\x20vec2\x20uv0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20sampler2'+'D\x20colorMap'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20void\x20m'+'ain\x20(void)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20linear'+'Color\x20=\x20'+_0x4468ef+('(texture2D'+'(colorMap,'+'\x20uv0));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20v'+'ec4(gammaC'+'orrectOutp'+'ut(linearC'+'olor),\x201);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20'),'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22gammaPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20varyin'+'g\x20uv0:\x20vec'+'2f;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'colorMap:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20colorMa'+'pSampler:\x20'+'sampler;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20@fragment'+'\x20fn\x20fragme'+'ntMain(inp'+'ut\x20:\x20Fragm'+'entInput)\x20'+'->\x20Fragmen'+'tOutput\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'output:\x20Fr'+'agmentOutp'+'ut;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20sample'+'dTex\x20=\x20tex'+'tureSample'+'(colorMap,'+'\x20colorMapS'+'ampler,\x20in'+'put.uv0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'linearColo'+'r:\x20vec3f\x20='+'\x20'+_0x4468ef+('(sampledTe'+'x);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'output.col'+'or\x20=\x20vec4f'+'(gammaCorr'+'ectOutput('+'linearColo'+'r),\x201.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20output;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20'));}['getUnfilte'+'rableTextu'+'reShaderDe'+'sc'](){return this['getShaderD'+'esc']('textureSha'+'derUnfilte'+'rable','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20varying'+'\x20vec2\x20uv0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20highp\x20sam'+'pler2D\x20col'+'orMap;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'oid\x20main\x20('+'void)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ivec2\x20'+'uv\x20=\x20ivec2'+'(uv0\x20*\x20tex'+'tureSize(c'+'olorMap,\x200'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'gl_FragCol'+'or\x20=\x20vec4('+'texelFetch'+'(colorMap,'+'\x20uv,\x200).xy'+'z,\x201);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20varyin'+'g\x20uv0:\x20vec'+'2f;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'colorMap:\x20'+'texture_2d'+'<uff>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20@'+'fragment\x20f'+'n\x20fragment'+'Main(input'+'\x20:\x20Fragmen'+'tInput)\x20->'+'\x20FragmentO'+'utput\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20ou'+'tput:\x20Frag'+'mentOutput'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20uv\x20:\x20vec'+'2<i32>\x20=\x20v'+'ec2<i32>(i'+'nput.uv0\x20*'+'\x20vec2f(tex'+'tureDimens'+'ions(color'+'Map,\x200)));'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20fetchedCo'+'lor\x20:\x20vec4'+'f\x20=\x20textur'+'eLoad(colo'+'rMap,\x20uv,\x20'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'output.col'+'or\x20=\x20vec4f'+'(fetchedCo'+'lor.xyz,\x201'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20');}['getDepthTe'+'xtureShade'+'rDesc'](){return this['getShaderD'+'esc']('depthTextu'+'reShader','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22screenD'+'epthPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'gammaPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20varying\x20v'+'ec2\x20uv0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20void\x20main'+'()\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20dep'+'th\x20=\x20getLi'+'nearScreen'+'Depth(getI'+'mageEffect'+'UV(uv0))\x20*'+'\x20camera_pa'+'rams.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20v'+'ec4(gammaC'+'orrectOutp'+'ut(vec3(de'+'pth)),\x201.0'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22screenD'+'epthPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'gammaPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20varying\x20u'+'v0:\x20vec2f;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20@fragme'+'nt\x20fn\x20frag'+'mentMain(i'+'nput:\x20Frag'+'mentInput)'+'\x20->\x20Fragme'+'ntOutput\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20output:\x20F'+'ragmentOut'+'put;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20depth'+':\x20f32\x20=\x20ge'+'tLinearScr'+'eenDepth(g'+'etImageEff'+'ectUV(inpu'+'t.uv0))\x20*\x20'+'uniform.ca'+'mera_param'+'s.x;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20vec4'+'f(gammaCor'+'rectOutput'+'(vec3f(dep'+'th)),\x201.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20');}['getQuadMes'+'h'](){return this['quadMesh']||(this['quadMesh']=new Ge(this['device']),this['quadMesh']['setPositio'+'ns']([-(-0x2f5*-0x2+-0x4*0x2d1+0x55a+0.5),-(-0x1374+0x4b*0x6d+-0xc7b+0.5),-0xe97*-0x1+0xd76+-0x1c0d,0x1b53+-0x142c+-0x727+0.5,-(0x1870+0x4fb+-0x11*0x1bb+0.5),0x1dde+-0xe98+0x7a3*-0x2,-(0x1*-0x11fe+-0x438+-0x1*-0x1636+0.5),0x45*-0x89+0x1899*-0x1+-0x177*-0x2a+0.5,0xaf2+-0x1e1d+0x1*0x132b,0x3*0x8d7+0x3f2+-0x1e77*0x1+0.5,0x23ae+0x57c+-0x292a+0.5,0x2042+0x5*-0x659+-0x85]),this['quadMesh']['update'](Er)),this['quadMesh'];}['drawMesh'](_0x3bd78b,_0x3d1bf8,_0x3516ae,_0x428617,_0x5d5ba7){if(!_0x428617){const _0x5a012e=this['getGraphNo'+'de'](_0x3d1bf8);_0x428617=new He(_0x3516ae,_0x3bd78b,_0x5a012e);}let _0x1a2227=this['layerMeshI'+'nstances']['get'](_0x5d5ba7);_0x1a2227||(_0x1a2227=[],this['layerMeshI'+'nstances']['set'](_0x5d5ba7,_0x1a2227)),_0x1a2227['push'](_0x428617);}['drawWireAl'+'ignedBox'](_0x2aab4b,_0x53f3c3,_0x192633,_0x1ccdf1,_0x41faa8,_0x4d833d){if(_0x4d833d){const _0x4df7cd=(_0x456c0,_0x49de97,_0x50cd23)=>{Ba['set'](_0x456c0,_0x49de97,_0x50cd23),_0x4d833d['transformP'+'oint'](Ba,Ba),Ts['push'](Ba['x'],Ba['y'],Ba['z']);};_0x4df7cd(_0x2aab4b['x'],_0x2aab4b['y'],_0x2aab4b['z']),_0x4df7cd(_0x2aab4b['x'],_0x53f3c3['y'],_0x2aab4b['z']),_0x4df7cd(_0x2aab4b['x'],_0x53f3c3['y'],_0x2aab4b['z']),_0x4df7cd(_0x53f3c3['x'],_0x53f3c3['y'],_0x2aab4b['z']),_0x4df7cd(_0x53f3c3['x'],_0x53f3c3['y'],_0x2aab4b['z']),_0x4df7cd(_0x53f3c3['x'],_0x2aab4b['y'],_0x2aab4b['z']),_0x4df7cd(_0x53f3c3['x'],_0x2aab4b['y'],_0x2aab4b['z']),_0x4df7cd(_0x2aab4b['x'],_0x2aab4b['y'],_0x2aab4b['z']),_0x4df7cd(_0x2aab4b['x'],_0x2aab4b['y'],_0x53f3c3['z']),_0x4df7cd(_0x2aab4b['x'],_0x53f3c3['y'],_0x53f3c3['z']),_0x4df7cd(_0x2aab4b['x'],_0x53f3c3['y'],_0x53f3c3['z']),_0x4df7cd(_0x53f3c3['x'],_0x53f3c3['y'],_0x53f3c3['z']),_0x4df7cd(_0x53f3c3['x'],_0x53f3c3['y'],_0x53f3c3['z']),_0x4df7cd(_0x53f3c3['x'],_0x2aab4b['y'],_0x53f3c3['z']),_0x4df7cd(_0x53f3c3['x'],_0x2aab4b['y'],_0x53f3c3['z']),_0x4df7cd(_0x2aab4b['x'],_0x2aab4b['y'],_0x53f3c3['z']),_0x4df7cd(_0x2aab4b['x'],_0x2aab4b['y'],_0x2aab4b['z']),_0x4df7cd(_0x2aab4b['x'],_0x2aab4b['y'],_0x53f3c3['z']),_0x4df7cd(_0x2aab4b['x'],_0x53f3c3['y'],_0x2aab4b['z']),_0x4df7cd(_0x2aab4b['x'],_0x53f3c3['y'],_0x53f3c3['z']),_0x4df7cd(_0x53f3c3['x'],_0x53f3c3['y'],_0x2aab4b['z']),_0x4df7cd(_0x53f3c3['x'],_0x53f3c3['y'],_0x53f3c3['z']),_0x4df7cd(_0x53f3c3['x'],_0x2aab4b['y'],_0x2aab4b['z']),_0x4df7cd(_0x53f3c3['x'],_0x2aab4b['y'],_0x53f3c3['z']);}else Ts['push'](_0x2aab4b['x'],_0x2aab4b['y'],_0x2aab4b['z'],_0x2aab4b['x'],_0x53f3c3['y'],_0x2aab4b['z'],_0x2aab4b['x'],_0x53f3c3['y'],_0x2aab4b['z'],_0x53f3c3['x'],_0x53f3c3['y'],_0x2aab4b['z'],_0x53f3c3['x'],_0x53f3c3['y'],_0x2aab4b['z'],_0x53f3c3['x'],_0x2aab4b['y'],_0x2aab4b['z'],_0x53f3c3['x'],_0x2aab4b['y'],_0x2aab4b['z'],_0x2aab4b['x'],_0x2aab4b['y'],_0x2aab4b['z'],_0x2aab4b['x'],_0x2aab4b['y'],_0x53f3c3['z'],_0x2aab4b['x'],_0x53f3c3['y'],_0x53f3c3['z'],_0x2aab4b['x'],_0x53f3c3['y'],_0x53f3c3['z'],_0x53f3c3['x'],_0x53f3c3['y'],_0x53f3c3['z'],_0x53f3c3['x'],_0x53f3c3['y'],_0x53f3c3['z'],_0x53f3c3['x'],_0x2aab4b['y'],_0x53f3c3['z'],_0x53f3c3['x'],_0x2aab4b['y'],_0x53f3c3['z'],_0x2aab4b['x'],_0x2aab4b['y'],_0x53f3c3['z'],_0x2aab4b['x'],_0x2aab4b['y'],_0x2aab4b['z'],_0x2aab4b['x'],_0x2aab4b['y'],_0x53f3c3['z'],_0x2aab4b['x'],_0x53f3c3['y'],_0x2aab4b['z'],_0x2aab4b['x'],_0x53f3c3['y'],_0x53f3c3['z'],_0x53f3c3['x'],_0x53f3c3['y'],_0x2aab4b['z'],_0x53f3c3['x'],_0x53f3c3['y'],_0x53f3c3['z'],_0x53f3c3['x'],_0x2aab4b['y'],_0x2aab4b['z'],_0x53f3c3['x'],_0x2aab4b['y'],_0x53f3c3['z']);this['getBatch'](_0x41faa8,_0x1ccdf1)['addLinesAr'+'rays'](Ts,_0x192633),Ts['length']=-0x19a+0x239*0x1+-0x3*0x35;}['drawWireSp'+'here'](_0x59dcbd,_0x17e82a,_0xcca6fd,_0x8d0757,_0x202b91,_0x3a0e6a){const _0x2d1b1c=(-0x6*-0xa7+-0x28d*0x4+-0x3e*-0x1a)*Math['PI']/_0x8d0757;let _0x3e504a=-0x11d7+0xfd8+0x1ff;for(let _0x41790d=-0x13bc+-0x11d*-0x23+0x669*-0x3;_0x41790d<_0x8d0757;_0x41790d++){const _0xec15c0=Math['sin'](_0x3e504a),_0x1171cf=Math['cos'](_0x3e504a);_0x3e504a+=_0x2d1b1c;const _0x387adb=Math['sin'](_0x3e504a),_0x197949=Math['cos'](_0x3e504a);Ts['push'](_0x59dcbd['x']+_0x17e82a*_0xec15c0,_0x59dcbd['y'],_0x59dcbd['z']+_0x17e82a*_0x1171cf),Ts['push'](_0x59dcbd['x']+_0x17e82a*_0x387adb,_0x59dcbd['y'],_0x59dcbd['z']+_0x17e82a*_0x197949),Ts['push'](_0x59dcbd['x']+_0x17e82a*_0xec15c0,_0x59dcbd['y']+_0x17e82a*_0x1171cf,_0x59dcbd['z']),Ts['push'](_0x59dcbd['x']+_0x17e82a*_0x387adb,_0x59dcbd['y']+_0x17e82a*_0x197949,_0x59dcbd['z']),Ts['push'](_0x59dcbd['x'],_0x59dcbd['y']+_0x17e82a*_0xec15c0,_0x59dcbd['z']+_0x17e82a*_0x1171cf),Ts['push'](_0x59dcbd['x'],_0x59dcbd['y']+_0x17e82a*_0x387adb,_0x59dcbd['z']+_0x17e82a*_0x197949);}this['getBatch'](_0x3a0e6a,_0x202b91)['addLinesAr'+'rays'](Ts,_0xcca6fd),Ts['length']=-0x3a*0x22+-0x9*-0x286+-0xf02;}['getGraphNo'+'de'](_0x5eed6e){const _0x55443c=new Ie('ImmediateD'+'ebug');return _0x55443c['worldTrans'+'form']=_0x5eed6e,_0x55443c['_dirtyWorl'+'d']=_0x55443c['_dirtyNorm'+'al']=!(0xab0+-0x3b3+0xc*-0x95),_0x55443c;}['onPreRende'+'rLayer'](_0x57c7f2,_0x5972b4,_0x2891a9){if(this['batchesMap']['forEach']((_0x5d95cb,_0x1196c9)=>{_0x1196c9===_0x57c7f2&&_0x5d95cb['onPreRende'+'r'](_0x5972b4,_0x2891a9);}),!this['updatedLay'+'ers']['has'](_0x57c7f2)){this['updatedLay'+'ers']['add'](_0x57c7f2);const _0x19c1a3=this['layerMeshI'+'nstances']['get'](_0x57c7f2);if(_0x19c1a3){for(let _0x3e9310=0x1364+0x204b+-0x33af;_0x3e9310<_0x19c1a3['length'];_0x3e9310++)_0x5972b4['push'](_0x19c1a3[_0x3e9310]);_0x19c1a3['length']=-0x14*-0xbe+-0x1*0x15ad+0x6d5;}}}['onPostRend'+'er'](){this['allBatches']['forEach'](_0x2bcb47=>_0x2bcb47['clear']()),this['allBatches']['clear'](),this['updatedLay'+'ers']['clear']();}}class NA{constructor(){h(this,'type',Kn),h(this,'color',new ie(-0x567*-0x7+0x8e2+-0x2eb3,0x614*-0x6+-0x27*0x65+-0x5*-0xa5f,-0x101d+-0x3*-0x573+-0x3c)),h(this,'density',0xa79+0x1927+0x2*-0x11d0),h(this,'start',-0xa*0x295+0x2*0x4e5+0x1009),h(this,'end',0xdde+0x2094+-0x2a8a);}}class Et extends me{constructor(_0x461cea){super(),h(this,'ambientBak'+'e',!(0x1a51+-0x172d+-0xb*0x49)),h(this,'ambientBak'+'eOcclusion'+'Brightness',-0xc65*0x1+0x1dc3+-0x115e),h(this,'ambientBak'+'eOcclusion'+'Contrast',0x10a9+0x4*0x87c+-0x1*0x3299),h(this,'ambientLig'+'ht',new ie(-0x1ce3+0x109c+0xc47,-0x19f9+0x18*0xea+0x1*0x409,0x1886+-0x67*-0x5+0x1*-0x1a89)),h(this,'ambientLum'+'inance',-0xf1*0x25+-0xbe+0x7*0x515),h(this,'exposure',-0x360*-0x2+0xa67*0x1+-0xa*0x1b7),h(this,'lightmapSi'+'zeMultipli'+'er',-0x3*0x803+-0xfc1+0x27cb*0x1),h(this,'lightmapMa'+'xResolutio'+'n',0x3*0x36+0x13eb+-0xc8d),h(this,'lightmapMo'+'de',jc),h(this,'lightmapFi'+'lterEnable'+'d',!(0x19f*0x13+-0x1*0xb65+0x1*-0x1367)),h(this,'lightmapHD'+'R',!(0x1d21+0x5*-0x53+-0x1*0x1b81)),h(this,'root',null),h(this,'physicalUn'+'its',!(0x9f5+-0x1691*-0x1+0x14d*-0x19)),h(this,'_envAtlas',null),h(this,'_skyboxCub'+'eMap',null),h(this,'_fogParams',new NA()),h(this,'forcePassT'+'hroughSpec'+'ular',!(0xf4e+0x169e+-0x25eb*0x1)),(w['assert'](_0x461cea,'Scene\x20cons'+'tructor\x20ta'+'kes\x20a\x20Grap'+'hicsDevice'+'\x20as\x20a\x20para'+'meter,\x20and'+'\x20it\x20was\x20no'+'t\x20provided'+'.'),this['device']=_0x461cea,this['_gravity']=new D(0x11d0+0x2*-0x9b3+-0xcb*-0x2,-(0x1bd+0x6*0x407+-0x19de+0.8000000000000007),-0x46c*-0x6+-0x36d*0x4+-0x335*0x4),this['_layers']=null,this['_prefilter'+'edCubemaps']=[],this['_internalE'+'nvAtlas']=null,this['_skyboxInt'+'ensity']=0x1e24+0x128*-0x1d+0x365,this['_skyboxLum'+'inance']=-0x20e7+0x1*-0x1139+0x3220,this['_skyboxMip']=-0x142d*-0x1+-0x7*-0x30a+0x3*-0xdd1,this['_skyboxHig'+'hlightMult'+'iplier']=-0x1f1c+0xe0+0x1e3d,this['_skyboxRot'+'ationShade'+'rInclude']=!(0x1*0x1035+-0xe1f+-0x29*0xd),this['_skyboxRot'+'ation']=new le(),this['_skyboxRot'+'ationMat3']=new _i(),this['_skyboxRot'+'ationMat4']=new te(),this['_ambientBa'+'keNumSampl'+'es']=0x506+-0xd8d*0x1+0x888,this['_ambientBa'+'keSpherePa'+'rt']=-0x22*0x103+0x23a3+-0x13d+0.4,this['_lightmapF'+'ilterRange']=-0x23b9*0x1+0x950*-0x1+0x2d13,this['_lightmapF'+'ilterSmoot'+'hness']=-0x1c33+-0x248a+0x40bd+0.2,this['_clustered'+'LightingEn'+'abled']=!(-0x2*-0x628+-0x26b3+-0x3c5*-0x7),this['_lightingP'+'arams']=new Mv(this['device']['supportsAr'+'eaLights'],this['device']['maxTexture'+'Size'],()=>{this['updateShad'+'ers']=!(-0x1*-0x254f+-0x61d+-0x1f32);}),this['_sky']=new LA(this),this['_stats']={'meshInstances':0x0,'lights':0x0,'dynamicLights':0x0,'bakedLights':0x0,'updateShadersTime':0x0},this['updateShad'+'ers']=!(-0xf2b+-0x1*0x1bd3+0x2afe),this['_shaderVer'+'sion']=0x1217+0xef1+0x2*-0x1084,this['immediate']=new FA(this['device']));}get['defaultDra'+'wLayer'](){return this['layers']['getLayerBy'+'Id'](Zp);}set['ambientBak'+'eNumSample'+'s'](_0x291436){this['_ambientBa'+'keNumSampl'+'es']=Y['clamp'](Math['floor'](_0x291436),0x5*0x461+-0x1ff0+0xa0c,-0x2a4*0xc+0x2*-0x17e+-0x18d*-0x17);}get['ambientBak'+'eNumSample'+'s'](){return this['_ambientBa'+'keNumSampl'+'es'];}set['ambientBak'+'eSpherePar'+'t'](_0x29e01c){this['_ambientBa'+'keSpherePa'+'rt']=Y['clamp'](_0x29e01c,-0x1c9c+-0x2*0x469+0x256e+0.001,-0x25aa+0x1c75+0x936);}get['ambientBak'+'eSpherePar'+'t'](){return this['_ambientBa'+'keSpherePa'+'rt'];}set['clusteredL'+'ightingEna'+'bled'](_0x2ca8a8){if(this['device']['isWebGPU']&&!_0x2ca8a8){w['warnOnce']('WebGPU\x20cur'+'rently\x20onl'+'y\x20supports'+'\x20clustered'+'\x20lighting,'+'\x20and\x20this\x20'+'cannot\x20be\x20'+'disabled.');return;}if(!this['_clustered'+'LightingEn'+'abled']&&_0x2ca8a8){console['error']('Turning\x20on'+'\x20disabled\x20'+'clustered\x20'+'lighting\x20i'+'s\x20not\x20curr'+'ently\x20supp'+'orted');return;}this['_clustered'+'LightingEn'+'abled']=_0x2ca8a8;}get['clusteredL'+'ightingEna'+'bled'](){return this['_clustered'+'LightingEn'+'abled'];}set['envAtlas'](_0x52b930){_0x52b930!==this['_envAtlas']&&(this['_envAtlas']=_0x52b930,_0x52b930&&(_0x52b930['addressU']=ue,_0x52b930['addressV']=ue,_0x52b930['minFilter']=vt,_0x52b930['magFilter']=vt,_0x52b930['mipmaps']=!(-0x1845+0x2aa+0x4*0x567)),this['_prefilter'+'edCubemaps']=[],this['_internalE'+'nvAtlas']&&(this['_internalE'+'nvAtlas']['destroy'](),this['_internalE'+'nvAtlas']=null),this['_resetSkyM'+'esh']());}get['envAtlas'](){return this['_envAtlas'];}set['layers'](_0xf3ebf1){const _0x34481b=this['_layers'];this['_layers']=_0xf3ebf1,this['fire']('set:layers',_0x34481b,_0xf3ebf1);}get['layers'](){return this['_layers'];}get['sky'](){return this['_sky'];}get['lighting'](){return this['_lightingP'+'arams'];}get['fog'](){return this['_fogParams'];}set['lightmapFi'+'lterRange'](_0xd5c22e){this['_lightmapF'+'ilterRange']=Math['max'](_0xd5c22e,0x761+0x3*-0x8ad+0x12a6+0.001);}get['lightmapFi'+'lterRange'](){return this['_lightmapF'+'ilterRange'];}set['lightmapFi'+'lterSmooth'+'ness'](_0x4b9d81){this['_lightmapF'+'ilterSmoot'+'hness']=Math['max'](_0x4b9d81,0x1db7+-0x1*0x1867+-0x154*0x4+0.001);}get['lightmapFi'+'lterSmooth'+'ness'](){return this['_lightmapF'+'ilterSmoot'+'hness'];}set['prefiltere'+'dCubemaps'](_0x3bf1af){_0x3bf1af=_0x3bf1af||[];const _0x588598=this['_prefilter'+'edCubemaps'];(_0x588598['length']!==_0x3bf1af['length']||_0x588598['some']((_0x16e77c,_0x29a511)=>_0x16e77c!==_0x3bf1af[_0x29a511]))&&(_0x3bf1af['length']===0x1*0x2209+0x1f7*-0x5+0x2*-0xc18&&_0x3bf1af['every'](_0x30e0e3=>!!_0x30e0e3)?(this['_internalE'+'nvAtlas']=Tv['generatePr'+'efilteredA'+'tlas'](_0x3bf1af,{'target':this['_internalE'+'nvAtlas']}),this['_envAtlas']=this['_internalE'+'nvAtlas']):(this['_internalE'+'nvAtlas']&&(this['_internalE'+'nvAtlas']['destroy'](),this['_internalE'+'nvAtlas']=null),this['_envAtlas']=null),this['_prefilter'+'edCubemaps']=_0x3bf1af['slice'](),this['_resetSkyM'+'esh']());}get['prefiltere'+'dCubemaps'](){return this['_prefilter'+'edCubemaps'];}set['skybox'](_0x3604b0){_0x3604b0!==this['_skyboxCub'+'eMap']&&(this['_skyboxCub'+'eMap']=_0x3604b0,this['_resetSkyM'+'esh']());}get['skybox'](){return this['_skyboxCub'+'eMap'];}set['skyboxInte'+'nsity'](_0x4c5724){_0x4c5724!==this['_skyboxInt'+'ensity']&&(this['_skyboxInt'+'ensity']=_0x4c5724,this['_resetSkyM'+'esh']());}get['skyboxInte'+'nsity'](){return this['_skyboxInt'+'ensity'];}set['skyboxLumi'+'nance'](_0x50de5f){_0x50de5f!==this['_skyboxLum'+'inance']&&(this['_skyboxLum'+'inance']=_0x50de5f,this['_resetSkyM'+'esh']());}get['skyboxLumi'+'nance'](){return this['_skyboxLum'+'inance'];}set['skyboxMip'](_0x54d82b){_0x54d82b!==this['_skyboxMip']&&(this['_skyboxMip']=_0x54d82b,this['_resetSkyM'+'esh']());}get['skyboxMip'](){return this['_skyboxMip'];}set['skyboxHigh'+'lightMulti'+'plier'](_0x3284b2){_0x3284b2!==this['_skyboxHig'+'hlightMult'+'iplier']&&(this['_skyboxHig'+'hlightMult'+'iplier']=_0x3284b2,this['_resetSkyM'+'esh']());}get['skyboxHigh'+'lightMulti'+'plier'](){return this['_skyboxHig'+'hlightMult'+'iplier'];}set['skyboxRota'+'tion'](_0x2fa2f7){if(!this['_skyboxRot'+'ation']['equals'](_0x2fa2f7)){const _0x5312b9=_0x2fa2f7['equals'](le['IDENTITY']);this['_skyboxRot'+'ation']['copy'](_0x2fa2f7),_0x5312b9?this['_skyboxRot'+'ationMat3']['setIdentit'+'y']():(this['_skyboxRot'+'ationMat4']['setTRS'](D['ZERO'],_0x2fa2f7,D['ONE']),this['_skyboxRot'+'ationMat3']['invertMat4'](this['_skyboxRot'+'ationMat4'])),!this['_skyboxRot'+'ationShade'+'rInclude']&&!_0x5312b9&&(this['_skyboxRot'+'ationShade'+'rInclude']=!(-0x1669+-0xd08+-0x2371*-0x1),this['_resetSkyM'+'esh']());}}get['skyboxRota'+'tion'](){return this['_skyboxRot'+'ation'];}['destroy'](){this['_resetSkyM'+'esh'](),this['root']=null,this['off']();}['drawLine'](_0x4715d6,_0x31e2a4,_0x17c5b7=ie['WHITE'],_0xac093e=!(0x78+-0x1389+-0x3*-0x65b),_0x9d8284=this['defaultDra'+'wLayer']){this['immediate']['getBatch'](_0x9d8284,_0xac093e)['addLines']([_0x4715d6,_0x31e2a4],[_0x17c5b7,_0x17c5b7]);}['drawLines'](_0x1cdcc4,_0x4c1557,_0x113397=!(0x1fb8+-0x5*0x515+-0x143*0x5),_0x4b8dc2=this['defaultDra'+'wLayer']){this['immediate']['getBatch'](_0x4b8dc2,_0x113397)['addLines'](_0x1cdcc4,_0x4c1557);}['drawLineAr'+'rays'](_0x31f101,_0x5464f1,_0xee3a5d=!(0x115b+-0x5*0x84+-0xec7),_0x204b3b=this['defaultDra'+'wLayer']){this['immediate']['getBatch'](_0x204b3b,_0xee3a5d)['addLinesAr'+'rays'](_0x31f101,_0x5464f1);}['applySetti'+'ngs'](_0x20d4d5){const _0x563762=_0x20d4d5['physics'],_0x1722ad=_0x20d4d5['render'];this['_gravity']['set'](_0x563762['gravity'][0x1509+-0x2*-0xd30+-0x2f69*0x1],_0x563762['gravity'][0x1795*-0x1+0xf0d*0x2+-0x684*0x1],_0x563762['gravity'][0x88c+-0x5*0x6ca+-0x32d*-0x8]),this['ambientLig'+'ht']['set'](_0x1722ad['global_amb'+'ient'][-0xca2+0x1d53+-0x10b1],_0x1722ad['global_amb'+'ient'][0x1317+-0x1659+0x343],_0x1722ad['global_amb'+'ient'][-0x43b+-0x258f*0x1+0xa*0x42e]),this['ambientLum'+'inance']=_0x1722ad['ambientLum'+'inance'],this['fog']['type']=_0x1722ad['fog'],this['fog']['color']['set'](_0x1722ad['fog_color'][-0x758+0x362*0x2+0x94],_0x1722ad['fog_color'][-0x1*0x2304+0x1dd8*-0x1+0x2d*0x171],_0x1722ad['fog_color'][-0xf6a+-0x1094*-0x1+-0x25*0x8]),this['fog']['start']=_0x1722ad['fog_start'],this['fog']['end']=_0x1722ad['fog_end'],this['fog']['density']=_0x1722ad['fog_densit'+'y'],this['lightmapSi'+'zeMultipli'+'er']=_0x1722ad['lightmapSi'+'zeMultipli'+'er'],this['lightmapMa'+'xResolutio'+'n']=_0x1722ad['lightmapMa'+'xResolutio'+'n'],this['lightmapMo'+'de']=_0x1722ad['lightmapMo'+'de'],this['exposure']=_0x1722ad['exposure'],this['_skyboxInt'+'ensity']=_0x1722ad['skyboxInte'+'nsity']??-0x2596+0xc*0x26+0x23cf,this['_skyboxLum'+'inance']=_0x1722ad['skyboxLumi'+'nance']??-0x4974+0x3fba+0x57da,this['_skyboxMip']=_0x1722ad['skyboxMip']??0x239f+0x390+-0x7*0x599,_0x1722ad['skyboxRota'+'tion']&&(this['skyboxRota'+'tion']=new le()['setFromEul'+'erAngles'](_0x1722ad['skyboxRota'+'tion'][-0x171f+-0x10f8+0x2817],_0x1722ad['skyboxRota'+'tion'][-0x2e9*-0x2+0xa61*-0x2+0xef1],_0x1722ad['skyboxRota'+'tion'][0x5f5+-0x227*0x7+0x30a*0x3])),this['sky']['applySetti'+'ngs'](_0x1722ad),this['clusteredL'+'ightingEna'+'bled']=_0x1722ad['clusteredL'+'ightingEna'+'bled']??!(0x132*0x11+0x1*0x21fa+-0x153*0x29),this['lighting']['applySetti'+'ngs'](_0x1722ad),['lightmapFi'+'lterEnable'+'d','lightmapFi'+'lterRange','lightmapFi'+'lterSmooth'+'ness','ambientBak'+'e','ambientBak'+'eNumSample'+'s','ambientBak'+'eSpherePar'+'t','ambientBak'+'eOcclusion'+'Brightness','ambientBak'+'eOcclusion'+'Contrast']['forEach'](_0x341c80=>{_0x1722ad['hasOwnProp'+'erty'](_0x341c80)&&(this[_0x341c80]=_0x1722ad[_0x341c80]);}),this['_resetSkyM'+'esh']();}['_getSkybox'+'Tex'](){const _0x122252=this['_prefilter'+'edCubemaps'];return this['_skyboxMip']?_0x122252[[-0x19e5+0x4dc+0x1509,0x83e+-0x100a+0x7cd,-0x98f*0x1+-0x21b9+0x2b4b,-0xd*-0x125+0x24ae+-0x1c7*0x1d,-0xaa0+0x6cb+-0x1d*-0x22,0x5*0x3b3+0x1*-0x15c1+-0x118*-0x3][this['_skyboxMip']]]||this['_envAtlas']||_0x122252[0x1c0d+0x190d+-0x1*0x351a]||this['_skyboxCub'+'eMap']:this['_skyboxCub'+'eMap']||_0x122252[-0x282+-0x160+-0x7*-0x8e]||this['_envAtlas'];}['_updateSky'+'Mesh'](){this['sky']['skyMesh']||this['sky']['updateSkyM'+'esh'](),this['sky']['update']();}['_resetSkyM'+'esh'](){this['sky']['resetSkyMe'+'sh'](),this['updateShad'+'ers']=!(-0x1686+-0x123d+-0x1*-0x28c3);}['setSkybox'](_0x138a32){_0x138a32?(this['skybox']=_0x138a32[0x1*-0x1aea+0x2120+-0x35*0x1e]||null,_0x138a32[-0xa25*0x1+0x2691+-0x1c6b]&&!_0x138a32[-0x2*-0x102d+0x5*0x4cf+0x322*-0x12]['cubemap']?this['envAtlas']=_0x138a32[-0x1c1*-0x15+-0xc53+-0x1881]:this['prefiltere'+'dCubemaps']=_0x138a32['slice'](-0x1fe9+0x1eab+0x13f)):(this['skybox']=null,this['envAtlas']=null);}get['lightmapPi'+'xelFormat'](){return this['lightmapHD'+'R']&&this['device']['getRendera'+'bleHdrForm'+'at']()||Ne;}}h(Et,'EVENT_SETL'+'AYERS','set:layers'),h(Et,'EVENT_SETS'+'KYBOX','set:skybox'),h(Et,'EVENT_PRER'+'ENDER','prerender'),h(Et,'EVENT_POST'+'RENDER','postrender'),h(Et,'EVENT_PRER'+'ENDER_LAYE'+'R','prerender:'+'layer'),h(Et,'EVENT_POST'+'RENDER_LAY'+'ER','postrender'+':layer'),h(Et,'EVENT_PREC'+'ULL','precull'),h(Et,'EVENT_POST'+'CULL','postcull');class Lv{constructor(_0x7cc678,_0x2bae81,_0x3c4329){this['device']=_0x7cc678,this['inverseBin'+'dPose']=_0x2bae81,this['boneNames']=_0x3c4329;}}const kA=[-0x3c*0x99+0x1*-0x13bb+0x3797,0x3a*0x5b+-0x1a7d+0x3*0x1f5,0x59a*0x3+0x1184+0x5*-0x6dd,-0x5b9*0x1+-0x125a+0x1813,-0x337*0x1+0x1697+-0x7c*0x28,-0x3*-0x6c9+0x3*0x9d+-0x1b5*0xd,0x840+0x1*-0x2516+0x1*0x1cd6,0xc18+0x1*-0x73b+0xf9*-0x5,-0x2123+0x77d*-0x3+0x379b,0x11*-0xe6+0xc22*-0x2+-0x13c5*-0x2,0x269b+0xc71+-0x330c,0x20d4+0x9e9*0x1+-0x2abc],UA=[-0x1a*0x62+0x12c2+-0x2*0x467,0x3a*0x16+-0xc70*0x1+0x775,0x1de3+-0x188e+-0x2a9*0x2,0x1*0x1207+-0x1bbe+-0x13*-0x83,0x1*-0x24dd+-0x4ec+0x29cc,-0x1*0x25b6+0xb65+0x1a52*0x1];class BA extends me{constructor(_0x37be0e,_0x5eec4f){super(),this['_device']=_0x37be0e,this['_pixelsPer'+'Unit']=_0x5eec4f&&_0x5eec4f['pixelsPerU'+'nit']!==void(-0x677+0x1112+-0xa9b)?_0x5eec4f['pixelsPerU'+'nit']:0x496+0x98*-0x14+0x74b,this['_renderMod'+'e']=_0x5eec4f&&_0x5eec4f['renderMode']!==void(-0x96e*0x4+-0x2157+0x470f*0x1)?_0x5eec4f['renderMode']:ci,this['_atlas']=_0x5eec4f&&_0x5eec4f['atlas']!==void(0x2f*0x76+-0x268+-0x1342)?_0x5eec4f['atlas']:null,this['_frameKeys']=_0x5eec4f&&_0x5eec4f['frameKeys']!==void(0x49*0x33+-0x2150+0x12c5)?_0x5eec4f['frameKeys']:null,this['_meshes']=[],this['_updatingP'+'roperties']=!(-0x3ae*-0x1+-0x145e+0x10b1),this['_meshesDir'+'ty']=!(0x1251+-0x1809+0x5b9),this['_atlas']&&this['_frameKeys']&&this['_createMes'+'hes']();}set['frameKeys'](_0x4dea7b){this['_frameKeys']=_0x4dea7b,this['_atlas']&&this['_frameKeys']&&(this['_updatingP'+'roperties']?this['_meshesDir'+'ty']=!(-0x1*0x28c+-0xd*-0x1c1+-0x1441):this['_createMes'+'hes']()),this['fire']('set:frameK'+'eys',_0x4dea7b);}get['frameKeys'](){return this['_frameKeys'];}set['atlas'](_0x5a732b){_0x5a732b!==this['_atlas']&&(this['_atlas']&&(this['_atlas']['off']('set:frames',this['_onSetFram'+'es'],this),this['_atlas']['off']('set:frame',this['_onFrameCh'+'anged'],this),this['_atlas']['off']('remove:fra'+'me',this['_onFrameRe'+'moved'],this)),this['_atlas']=_0x5a732b,this['_atlas']&&this['_frameKeys']&&(this['_atlas']['on']('set:frames',this['_onSetFram'+'es'],this),this['_atlas']['on']('set:frame',this['_onFrameCh'+'anged'],this),this['_atlas']['on']('remove:fra'+'me',this['_onFrameRe'+'moved'],this),this['_updatingP'+'roperties']?this['_meshesDir'+'ty']=!(0x1f73+0x10b5+-0x3028):this['_createMes'+'hes']()),this['fire']('set:atlas',_0x5a732b));}get['atlas'](){return this['_atlas'];}set['pixelsPerU'+'nit'](_0x15e3bc){this['_pixelsPer'+'Unit']!==_0x15e3bc&&(this['_pixelsPer'+'Unit']=_0x15e3bc,this['fire']('set:pixels'+'PerUnit',_0x15e3bc),this['_atlas']&&this['_frameKeys']&&this['renderMode']===ci&&(this['_updatingP'+'roperties']?this['_meshesDir'+'ty']=!(-0xe12+-0x4a7*-0x1+0x1*0x96b):this['_createMes'+'hes']()));}get['pixelsPerU'+'nit'](){return this['_pixelsPer'+'Unit'];}set['renderMode'](_0x532255){if(this['_renderMod'+'e']===_0x532255)return;const _0x2badc5=this['_renderMod'+'e'];this['_renderMod'+'e']=_0x532255,this['fire']('set:render'+'Mode',_0x532255),(_0x2badc5===ci||_0x532255===ci)&&this['_atlas']&&this['_frameKeys']&&(this['_updatingP'+'roperties']?this['_meshesDir'+'ty']=!(0x6e*-0x6+0x6*0x4b2+-0x1998):this['_createMes'+'hes']());}get['renderMode'](){return this['_renderMod'+'e'];}get['meshes'](){return this['_meshes'];}['_createMes'+'hes'](){const _0x2e6d40=this['_meshes']['length'];for(let _0x99b877=-0x1*0xe03+0xf6a+-0x1*0x167;_0x99b877<_0x2e6d40;_0x99b877++){const _0x205234=this['_meshes'][_0x99b877];_0x205234&&_0x205234['destroy']();}const _0x557b3e=this['_frameKeys']['length'];this['_meshes']=new Array(_0x557b3e);const _0x270fce=this['renderMode']===Pt||this['_renderMod'+'e']===Mt?this['_create9Sl'+'iceMesh']:this['_createSim'+'pleMesh'];for(let _0x51a6b4=0x155d+0x8ce+-0x1e2b;_0x51a6b4<_0x557b3e;_0x51a6b4++){const _0x264280=this['_atlas']['frames'][this['_frameKeys'][_0x51a6b4]];this['_meshes'][_0x51a6b4]=_0x264280?_0x270fce['call'](this,_0x264280):null;}this['fire']('set:meshes');}['_createSim'+'pleMesh'](_0x4055ef){const _0x37c362=_0x4055ef['rect'],_0xd2286a=this['_atlas']['texture']['width'],_0x3b08fd=this['_atlas']['texture']['height'],_0x1ba061=_0x37c362['z']/this['_pixelsPer'+'Unit'],_0x3bd406=_0x37c362['w']/this['_pixelsPer'+'Unit'],_0x155fb7=_0x4055ef['pivot']['x'],_0x21a4e9=_0x4055ef['pivot']['y'],_0x3f47fa=[-_0x155fb7*_0x1ba061,-_0x21a4e9*_0x3bd406,0x19ea*0x1+0x2*-0x653+-0xd44,(0xb*-0x15b+0x1a65*-0x1+0x497*0x9-_0x155fb7)*_0x1ba061,-_0x21a4e9*_0x3bd406,-0x8db+0xb10+-0x235,(-0x1313+0xb0*0xf+0x8c4-_0x155fb7)*_0x1ba061,(0xa*-0xe3+0x1*-0x1615+-0x46c*-0x7-_0x21a4e9)*_0x3bd406,0x2641*-0x1+0x5e3+0x205e,-_0x155fb7*_0x1ba061,(-0x643+0x73*-0x3b+0x20c5-_0x21a4e9)*_0x3bd406,0x2*-0xeda+-0xcd*-0x2d+-0x655],_0x26bb04=_0x37c362['x']/_0xd2286a,_0x23935f=0x1719+-0x206b+0x953-_0x37c362['y']/_0x3b08fd,_0x525663=(_0x37c362['x']+_0x37c362['z'])/_0xd2286a,_0x52af9b=0xead*-0x1+0x3*-0x16+0x3bc*0x4-(_0x37c362['y']+_0x37c362['w'])/_0x3b08fd,_0x8bb2f5=[_0x26bb04,_0x23935f,_0x525663,_0x23935f,_0x525663,_0x52af9b,_0x26bb04,_0x52af9b],_0x2dc236=new Ta();return _0x2dc236['positions']=_0x3f47fa,_0x2dc236['normals']=kA,_0x2dc236['uvs']=_0x8bb2f5,_0x2dc236['indices']=UA,Ge['fromGeomet'+'ry'](this['_device'],_0x2dc236);}['_create9Sl'+'iceMesh'](){const _0x467c9c=J['ONE'],_0x1a503e=0x949+-0x2d2+0x76*-0xe,_0x1734d2=0x1f7a+0x19*-0x42+-0x501*0x5,_0x3b6077=[],_0x4fa552=[],_0x1387ab=[],_0x443911=[];let _0x14cc94=0x24f4+-0x17e7+-0xd0d*0x1;for(let _0x1cb44e=0x158c+0x1*-0x1906+0x37a;_0x1cb44e<=_0x1a503e;_0x1cb44e++){const _0xb39400=_0x1cb44e===-0x6f*-0x27+-0x1001*-0x2+-0x1*0x30eb||_0x1cb44e===_0x1a503e?-0xf38+0x115*0x1d+-0x1029:0xb56+0x10df+-0x1c34;for(let _0x4d7aa3=0x110e+0x1ea0+-0x2fae;_0x4d7aa3<=_0x1734d2;_0x4d7aa3++){const _0x1d0208=-_0x467c9c['x']+(-0x13b8+0x3*0x529+0x43f)*_0x467c9c['x']*(_0x1cb44e<=0x18a1+0xee4+0x3*-0xd2c?-0x2dc+-0xe8+0x3c4:0x237c+0x25c3+0xda*-0x56)/_0x1a503e,_0x31ccaa=-0xc1*-0x22+0x34*0x95+-0x37e6,_0x2cffa2=-(-_0x467c9c['y']+(0x20fb*0x1+-0x1*-0x2666+-0x475f*0x1)*_0x467c9c['y']*(_0x4d7aa3<=-0x20c9+0x1766+0x964?0x2166+-0xbfe+-0xab4*0x2:-0xd2f+0x1519+0x7*-0x121)/_0x1734d2),_0xeab00b=_0x4d7aa3===-0xafd+-0x2409+0x2f06||_0x4d7aa3===_0x1734d2?0x1af7+-0x19*-0x2b+-0xf95*0x2:-0x1*-0x766+-0x1079*-0x1+-0x17de;_0x3b6077['push'](-_0x1d0208,_0x31ccaa,_0x2cffa2),_0x4fa552['push'](0x2028+0x6c7*-0x2+-0x2*0x94d,0xd20+-0x8dd*-0x3+-0x27b6,-0x1856+-0x42b*-0x6+0x4*-0x2b),_0x1387ab['push'](_0xb39400,_0xeab00b),_0x1cb44e<_0x1a503e&&_0x4d7aa3<_0x1734d2&&(_0x443911['push'](_0x14cc94+_0x1734d2+(-0x71d+-0x3d*0x1b+-0xd8d*-0x1),_0x14cc94+(0x23fa+0x1120*0x1+-0x3519*0x1),_0x14cc94),_0x443911['push'](_0x14cc94+_0x1734d2+(-0x21a9+0x3*0x427+-0x1535*-0x1),_0x14cc94+_0x1734d2+(0xa*0x199+-0x2*0x905+0x1*0x212),_0x14cc94+(0x83d+0x6a4+0x770*-0x2))),_0x14cc94++;}}const _0x46fbce=new Ta();return _0x46fbce['positions']=_0x3b6077,_0x46fbce['normals']=_0x4fa552,_0x46fbce['uvs']=_0x1387ab,_0x46fbce['indices']=_0x443911,Ge['fromGeomet'+'ry'](this['_device'],_0x46fbce);}['_onSetFram'+'es'](_0x4e2b42){this['_updatingP'+'roperties']?this['_meshesDir'+'ty']=!(0x2*0x62b+0x4*-0x512+-0x9*-0xe2):this['_createMes'+'hes']();}['_onFrameCh'+'anged'](_0xcef8f6,_0x33f769){const _0xac5c7b=this['_frameKeys']['indexOf'](_0xcef8f6);_0xac5c7b<-0x50f+-0x14b*-0x9+-0x694||(_0x33f769?this['renderMode']===ci&&(this['_meshes'][_0xac5c7b]=this['_createSim'+'pleMesh'](_0x33f769)):this['_meshes'][_0xac5c7b]=null,this['fire']('set:meshes'));}['_onFrameRe'+'moved'](_0x2c8984){const _0x3cbe32=this['_frameKeys']['indexOf'](_0x2c8984);_0x3cbe32<-0x98a*0x1+-0x1982+0x230c||(this['_meshes'][_0x3cbe32]=null,this['fire']('set:meshes'));}['startUpdat'+'e'](){this['_updatingP'+'roperties']=!(-0x21b1+0x12c*0x13+0xb6d),this['_meshesDir'+'ty']=!(-0x1*-0x1ef1+-0x3e8+-0x1b08);}['endUpdate'](){this['_updatingP'+'roperties']=!(-0x20bb+-0x1*0x2077+0x4133),this['_meshesDir'+'ty']&&this['_atlas']&&this['_frameKeys']&&this['_createMes'+'hes'](),this['_meshesDir'+'ty']=!(-0x1075+-0x21f5*0x1+0x1*0x326b);}['destroy'](){for(const _0x30ef83 of this['_meshes'])_0x30ef83&&_0x30ef83['destroy']();this['_meshes']['length']=-0x17c6*0x1+-0x1038+-0x13ff*-0x2;}}class zA extends me{constructor(){super(),this['_texture']=null,this['_frames']=null;}set['texture'](_0x512abb){this['_texture']=_0x512abb,this['fire']('set:textur'+'e',_0x512abb);}get['texture'](){return this['_texture'];}set['frames'](_0x23dab1){this['_frames']=_0x23dab1,this['fire']('set:frames',_0x23dab1);}get['frames'](){return this['_frames'];}['setFrame'](_0x1f2a17,_0x2da10f){let _0x3c72fd=this['_frames'][_0x1f2a17];_0x3c72fd?(_0x3c72fd['rect']['copy'](_0x2da10f['rect']),_0x3c72fd['pivot']['copy'](_0x2da10f['pivot']),_0x3c72fd['border']['copy'](_0x2da10f['border'])):(_0x3c72fd={'rect':_0x2da10f['rect']['clone'](),'pivot':_0x2da10f['pivot']['clone'](),'border':_0x2da10f['border']['clone']()},this['_frames'][_0x1f2a17]=_0x3c72fd),this['fire']('set:frame',_0x1f2a17['toString'](),_0x3c72fd);}['removeFram'+'e'](_0x3fed59){const _0x37ab30=this['_frames'][_0x3fed59];_0x37ab30&&(delete this['_frames'][_0x3fed59],this['fire']('remove:fra'+'me',_0x3fed59['toString'](),_0x37ab30));}['destroy'](){this['_texture']&&this['_texture']['destroy']();}}class dg{constructor(_0x28986e,_0x53b835,_0x230ca3,_0x5db77e){this['time']=_0x28986e,this['position']=_0x53b835,this['rotation']=_0x230ca3,this['scale']=_0x5db77e;}}class fg{constructor(){this['_name']='',this['_keys']=[];}}class ug{constructor(){h(this,'name',''),h(this,'duration',-0x30a+0xe74*-0x2+-0x1*-0x1ff2),(this['_nodes']=[],this['_nodeDict']={});}['getNode'](_0x3778c){return this['_nodeDict'][_0x3778c];}['addNode'](_0x388358){this['_nodes']['push'](_0x388358),this['_nodeDict'][_0x388358['_name']]=_0x388358;}get['nodes'](){return this['_nodes'];}}class VA{constructor(){this['_written']=!(0x1bdf+-0x21e7+0x3*0x203),this['_name']='',this['_keyFrames']=[],this['_quat']=new le(),this['_pos']=new D(),this['_scale']=new D(),this['_targetNod'+'e']=null;}['getTarget'](){return this['_targetNod'+'e'];}['setTarget'](_0x3c59b5){this['_targetNod'+'e']=_0x3c59b5;}}class Sf{constructor(_0x5bea1e){h(this,'looping',!(0xd6f+-0x73*-0x3c+-0x2863)),(this['_animation']=null,this['_time']=-0x2109*0x1+0xdbf*-0x1+0x2ec8,this['_interpola'+'tedKeys']=[],this['_interpola'+'tedKeyDict']={},this['_currKeyIn'+'dices']={},this['graph']=null);const _0x23e823=_0x12d815=>{const _0x37aa86=new VA();_0x37aa86['_name']=_0x12d815['name'],this['_interpola'+'tedKeys']['push'](_0x37aa86),this['_interpola'+'tedKeyDict'][_0x12d815['name']]=_0x37aa86,this['_currKeyIn'+'dices'][_0x12d815['name']]=-0x59*-0x3e+0x210e+-0x2bb*0x14;for(let _0x34be58=-0x25*0xa7+-0x1ac*0x7+0x16f*0x19;_0x34be58<_0x12d815['_children']['length'];_0x34be58++)_0x23e823(_0x12d815['_children'][_0x34be58]);};_0x23e823(_0x5bea1e);}set['animation'](_0x3285f1){this['_animation']=_0x3285f1,this['currentTim'+'e']=0x18a2+-0xae6+-0xdbc;}get['animation'](){return this['_animation'];}set['currentTim'+'e'](_0x339eb4){this['_time']=_0x339eb4;const _0x10b821=this['_interpola'+'tedKeys']['length'];for(let _0x3f90d6=-0x5*-0x15+-0x1741+0x16d8;_0x3f90d6<_0x10b821;_0x3f90d6++){const _0x4ddc93=this['_interpola'+'tedKeys'][_0x3f90d6]['_name'];this['_currKeyIn'+'dices'][_0x4ddc93]=0x1016+-0x16f8+0x6e2;}this['addTime'](0x29d+-0xb03+0x866*0x1),this['updateGrap'+'h']();}get['currentTim'+'e'](){return this['_time'];}get['numNodes'](){return this['_interpola'+'tedKeys']['length'];}['addTime'](_0x1e624d){if(this['_animation']!==null){const _0x4dd725=this['_animation']['_nodes'],_0x408ef4=this['_animation']['duration'];if(this['_time']===_0x408ef4&&!this['looping'])return;if(this['_time']+=_0x1e624d,this['_time']>_0x408ef4){this['_time']=this['looping']?0x1228+0x1f88+-0x31b0:_0x408ef4;for(let _0x43f928=0x325+0xad*0x39+0x29aa*-0x1;_0x43f928<_0x4dd725['length'];_0x43f928++){const _0x272ef2=_0x4dd725[_0x43f928]['_name'];this['_currKeyIn'+'dices'][_0x272ef2]=-0x50f+-0x1f1d+0x242c;}}else{if(this['_time']<-0x1779*0x1+0x2cc+0x14ad){this['_time']=this['looping']?_0x408ef4:-0x3b2*0x2+-0x6a*0x2a+0x18c8;for(let _0x2a7d96=0x1087*-0x1+0x13e9+0x1*-0x362;_0x2a7d96<_0x4dd725['length'];_0x2a7d96++){const _0x33b778=_0x4dd725[_0x2a7d96],_0x4cd03a=_0x33b778['_name'];this['_currKeyIn'+'dices'][_0x4cd03a]=_0x33b778['_keys']['length']-(0x3ad*-0x5+0x13f3+-0x190);}}}const _0x531764=_0x1e624d>=-0x7e*-0x3d+0x13d*0x8+0x13*-0x21a?-0x246b+-0x57*-0x71+-0x1fb:-(0x1*-0xa72+-0x21b+-0xc8e*-0x1);for(let _0x21db38=-0x7a5*-0x4+0x13*-0x197+-0x5*0x13;_0x21db38<_0x4dd725['length'];_0x21db38++){const _0x2c9573=_0x4dd725[_0x21db38],_0x25cfb3=_0x2c9573['_name'],_0x2a2ce2=_0x2c9573['_keys'],_0x203a03=this['_interpola'+'tedKeyDict'][_0x25cfb3];if(_0x203a03===void(-0x8cc*0x4+0x2123+0x20d)){w['warn']('Unknown\x20sk'+'eleton\x20nod'+'e\x20name:\x20'+_0x25cfb3);continue;}let _0x1dab3c=!(-0x1aff*0x1+-0x2ef*0xd+0x17*0x2d5);if(_0x2a2ce2['length']!==0x174*-0xe+-0x246d+0x38c6)for(let _0xd5d6a1=this['_currKeyIn'+'dices'][_0x25cfb3];_0xd5d6a1<_0x2a2ce2['length']-(0x9eb*0x1+0x97c+-0x1366)&&_0xd5d6a1>=-0x84b*0x4+0xad*0x2c+0x370;_0xd5d6a1+=_0x531764){const _0x46b3ab=_0x2a2ce2[_0xd5d6a1],_0x551b01=_0x2a2ce2[_0xd5d6a1+(0x7ea*0x1+0xae1+-0x172*0xd)];if(_0x46b3ab['time']<=this['_time']&&_0x551b01['time']>=this['_time']){const _0x2b2533=(this['_time']-_0x46b3ab['time'])/(_0x551b01['time']-_0x46b3ab['time']);_0x203a03['_pos']['lerp'](_0x46b3ab['position'],_0x551b01['position'],_0x2b2533),_0x203a03['_quat']['slerp'](_0x46b3ab['rotation'],_0x551b01['rotation'],_0x2b2533),_0x203a03['_scale']['lerp'](_0x46b3ab['scale'],_0x551b01['scale'],_0x2b2533),_0x203a03['_written']=!(0x2*-0x5e2+-0x97*0x3b+0x2e91),this['_currKeyIn'+'dices'][_0x25cfb3]=_0xd5d6a1,_0x1dab3c=!(0x1185+0x167c+-0x2801);break;}}(_0x2a2ce2['length']===-0x1dfb+0x2382+-0x586||!_0x1dab3c&&this['_time']===0x2129+0x6f0+-0x5*0x805&&this['looping'])&&(_0x203a03['_pos']['copy'](_0x2a2ce2[0x1c29+0x1349*0x2+-0x611*0xb]['position']),_0x203a03['_quat']['copy'](_0x2a2ce2[0x1d8b+-0x1*-0x1e3e+-0x3bc9]['rotation']),_0x203a03['_scale']['copy'](_0x2a2ce2[0x1*0xa21+0x929+0x1*-0x134a]['scale']),_0x203a03['_written']=!(-0x3*-0x4d7+0x1663+-0x93a*0x4));}}}['blend'](_0x6e9945,_0x4f93ba,_0x839073){const _0x148685=this['_interpola'+'tedKeys']['length'];for(let _0x244a43=0x1*0x1689+-0x2*-0x109e+-0x1*0x37c5;_0x244a43<_0x148685;_0x244a43++){const _0x2c2681=_0x6e9945['_interpola'+'tedKeys'][_0x244a43],_0x4d055a=_0x4f93ba['_interpola'+'tedKeys'][_0x244a43],_0x97764a=this['_interpola'+'tedKeys'][_0x244a43];_0x2c2681['_written']&&_0x4d055a['_written']?(_0x97764a['_quat']['slerp'](_0x2c2681['_quat'],_0x4f93ba['_interpola'+'tedKeys'][_0x244a43]['_quat'],_0x839073),_0x97764a['_pos']['lerp'](_0x2c2681['_pos'],_0x4f93ba['_interpola'+'tedKeys'][_0x244a43]['_pos'],_0x839073),_0x97764a['_scale']['lerp'](_0x2c2681['_scale'],_0x4d055a['_scale'],_0x839073),_0x97764a['_written']=!(-0x1b*0x154+0x7*-0x42a+0x6a*0x9d)):_0x2c2681['_written']?(_0x97764a['_quat']['copy'](_0x2c2681['_quat']),_0x97764a['_pos']['copy'](_0x2c2681['_pos']),_0x97764a['_scale']['copy'](_0x2c2681['_scale']),_0x97764a['_written']=!(-0x1b0e+-0x3*0xbdb+-0x3af*-0x11)):_0x4d055a['_written']&&(_0x97764a['_quat']['copy'](_0x4d055a['_quat']),_0x97764a['_pos']['copy'](_0x4d055a['_pos']),_0x97764a['_scale']['copy'](_0x4d055a['_scale']),_0x97764a['_written']=!(-0x1047+-0x908+0x194f));}}['setGraph'](_0xeca9f9){if(this['graph']=_0xeca9f9,_0xeca9f9)for(let _0x1b9ade=-0x8*0x197+0x1854+0x2*-0x5ce;_0x1b9ade<this['_interpola'+'tedKeys']['length'];_0x1b9ade++){const _0x44b391=this['_interpola'+'tedKeys'][_0x1b9ade],_0x399370=_0xeca9f9['findByName'](_0x44b391['_name']);this['_interpola'+'tedKeys'][_0x1b9ade]['setTarget'](_0x399370);}else{for(let _0x268b01=-0x95a*-0x4+0x1cbd+-0x4225;_0x268b01<this['_interpola'+'tedKeys']['length'];_0x268b01++)this['_interpola'+'tedKeys'][_0x268b01]['setTarget'](null);}}['updateGrap'+'h'](){if(this['graph'])for(let _0x163ca5=0x2*-0xdcd+0x1a*-0x114+0x37a2;_0x163ca5<this['_interpola'+'tedKeys']['length'];_0x163ca5++){const _0x40727e=this['_interpola'+'tedKeys'][_0x163ca5];if(_0x40727e['_written']){const _0x4534e1=_0x40727e['getTarget']();_0x4534e1['localPosit'+'ion']['copy'](_0x40727e['_pos']),_0x4534e1['localRotat'+'ion']['copy'](_0x40727e['_quat']),_0x4534e1['localScale']['copy'](_0x40727e['_scale']),_0x4534e1['_dirtyLoca'+'l']||_0x4534e1['_dirtifyLo'+'cal'](),_0x40727e['_written']=!(0x3*0xcc5+-0x17c3+0x3*-0x4d9);}}}}const zs=(-0xc51*-0x2+0x19*0x4b+-0x1ff1)/(0x530*-0x1+0x230c*0x1+0x2f6*-0xa),si=-0xe09+-0x31*-0x4c+-0x82-zs*(-0x2b*0x21+0x1*0x161d+0xd4*-0x14);class gm extends Ta{constructor(_0x16c3d5,_0x1b8031,_0xdd572f,_0x560ceb,_0x3bb823,_0x110f7c){super();const _0x5717ad=new D(),_0x51554d=new D(),_0x25b04f=new D(),_0x1f4f94=new D(),_0x1db3f6=new D(),_0x4472ae=new D(),_0x26dfbb=[],_0x36d823=[],_0x3dd4c5=[],_0x55fcda=[],_0xa8320d=[];let _0x223e04;if(_0xdd572f>-0x50*-0x3+0x1*-0x255e+0x246e){for(let _0x169f9a=-0x1c2f*0x1+0x2bf+0x1970;_0x169f9a<=_0x560ceb;_0x169f9a++)for(let _0x142d83=0x1abb*0x1+0xd*-0x139+-0xad6;_0x142d83<=_0x3bb823;_0x142d83++){const _0x3698f4=_0x142d83/_0x3bb823*(0x264b+0x1f3*-0x7+0x4*-0x629)*Math['PI']-Math['PI'],_0x21ae1a=Math['sin'](_0x3698f4),_0x3abbca=Math['cos'](_0x3698f4);_0x1db3f6['set'](_0x21ae1a*_0x16c3d5,-_0xdd572f/(0xa55+-0x200d+0x15ba),_0x3abbca*_0x16c3d5),_0x1f4f94['set'](_0x21ae1a*_0x1b8031,_0xdd572f/(-0x26*-0xf8+-0xe29+-0xbb*0x1f),_0x3abbca*_0x1b8031),_0x5717ad['lerp'](_0x1db3f6,_0x1f4f94,_0x169f9a/_0x560ceb),_0x51554d['sub2'](_0x1f4f94,_0x1db3f6)['normalize'](),_0x4472ae['set'](_0x3abbca,0xa18+-0x22*0x46+-0xcc,-_0x21ae1a),_0x25b04f['cross'](_0x4472ae,_0x51554d)['normalize'](),_0x26dfbb['push'](_0x5717ad['x'],_0x5717ad['y'],_0x5717ad['z']),_0x36d823['push'](_0x25b04f['x'],_0x25b04f['y'],_0x25b04f['z']);let _0x5ae86a=_0x142d83/_0x3bb823,_0x21b6f6=_0x169f9a/_0x560ceb;_0x3dd4c5['push'](_0x5ae86a,0xee3+-0x1001+-0x1*-0x11f-_0x21b6f6);const _0x30a3b6=_0x21b6f6;if(_0x21b6f6=_0x5ae86a,_0x5ae86a=_0x30a3b6,_0x5ae86a=_0x5ae86a*si+zs,_0x21b6f6=_0x21b6f6*si+zs,_0x5ae86a/=0x1ec+-0x1*0x123+-0x1*0xc6,_0x55fcda['push'](_0x5ae86a,-0x2d8*0x2+-0x5*0x6fb+0x2898-_0x21b6f6),_0x169f9a<_0x560ceb&&_0x142d83<_0x3bb823){const _0x34e1f2=_0x169f9a*(_0x3bb823+(-0x1*-0x337+-0x1913+0x15dd))+_0x142d83,_0x10e5e9=_0x169f9a*(_0x3bb823+(-0x1*-0x1493+0x1748+0x15ed*-0x2))+(_0x142d83+(0x7f1+-0x1623+0x2d7*0x5)),_0x141ff9=(_0x169f9a+(-0x137*-0x1d+-0x8*-0x1d0+-0x2*0x18dd))*(_0x3bb823+(0x1b41+0x88f+-0x23cf))+_0x142d83,_0x2e6ce5=(_0x169f9a+(-0x5e1*-0x5+0x2*0xaf7+0x3352*-0x1))*(_0x3bb823+(0x1*-0x247f+0x2567+-0xe7))+(_0x142d83+(-0x1*0x246+0x1c6c+-0x61*0x45));_0xa8320d['push'](_0x34e1f2,_0x10e5e9,_0x141ff9),_0xa8320d['push'](_0x10e5e9,_0x2e6ce5,_0x141ff9);}}}if(_0x110f7c){const _0x68415b=Math['floor'](_0x3bb823/(-0x1*-0x13ee+0x131e+-0x270a)),_0x3f0d04=_0x3bb823,_0x3fdae2=_0xdd572f/(-0xd01*0x1+-0x219b+0x15f*0x22);for(let _0x1cc1ad=0x11*-0x89+-0x6b*-0x22+-0x51d;_0x1cc1ad<=_0x68415b;_0x1cc1ad++){const _0x496075=_0x1cc1ad*Math['PI']*(0x1*0x472+0xd*0x193+-0x1*0x18e9+0.5)/_0x68415b,_0x481485=Math['sin'](_0x496075),_0x301788=Math['cos'](_0x496075);for(let _0xaacb0d=0x9*-0x3bf+0x136+-0x35*-0x9d;_0xaacb0d<=_0x3f0d04;_0xaacb0d++){const _0x31dc59=_0xaacb0d*(0x1be7+-0x4*-0x5f4+-0x33b5)*Math['PI']/_0x3f0d04-Math['PI']/(0x127e+-0x1f*-0x137+-0x12b7*0x3),_0x346dfc=Math['sin'](_0x31dc59),_0x190d0f=Math['cos'](_0x31dc59)*_0x481485,_0x4342e1=_0x301788,_0x2a05ad=_0x346dfc*_0x481485;let _0x1704c1=-0xc9*-0x24+0x526*-0x7+0x7c7-_0xaacb0d/_0x3f0d04,_0x270cd0=-0x4af*-0x5+-0x1d*-0x73+0x1*-0x2471-_0x1cc1ad/_0x68415b;_0x26dfbb['push'](_0x190d0f*_0x1b8031,_0x4342e1*_0x1b8031+_0x3fdae2,_0x2a05ad*_0x1b8031),_0x36d823['push'](_0x190d0f,_0x4342e1,_0x2a05ad),_0x3dd4c5['push'](_0x1704c1,0x1237*0x1+0x22a*0x3+-0x6*0x41e-_0x270cd0),_0x1704c1=_0x1704c1*si+zs,_0x270cd0=_0x270cd0*si+zs,_0x1704c1/=0x718+0xc5*-0x13+0x78a,_0x270cd0/=-0x1f8d+0x1138+0xe58,_0x1704c1+=(0x1386+-0x1873+0x4ee)/(0x1*-0xc6b+0x1510+-0x1a*0x55),_0x55fcda['push'](_0x1704c1,-0x11b1*-0x1+-0x1898+0x6e8-_0x270cd0);}}_0x223e04=(_0x560ceb+(-0x1439+0xc*-0x11d+0x2196))*(_0x3bb823+(0x47*0x40+0x740*0x5+-0x35ff*0x1));for(let _0x381a9b=0x1e0f+0x8*0x139+0x27d7*-0x1;_0x381a9b<_0x68415b;++_0x381a9b)for(let _0x2bb1ae=0x19ed*0x1+-0x10+-0x19dd;_0x2bb1ae<_0x3f0d04;++_0x2bb1ae){const _0x5dc538=_0x381a9b*(_0x3f0d04+(-0xcf*0x2f+0x424+0x21de))+_0x2bb1ae,_0x3cd379=_0x5dc538+_0x3f0d04+(0x15c1*-0x1+-0xf93+0x1f7*0x13);_0xa8320d['push'](_0x223e04+_0x5dc538+(0x1*-0x39e+-0x4*-0x4b2+-0xf29),_0x223e04+_0x3cd379,_0x223e04+_0x5dc538),_0xa8320d['push'](_0x223e04+_0x5dc538+(-0x153d*-0x1+0x1c9*-0x4+-0xe18),_0x223e04+_0x3cd379+(0xad*-0x13+0x5*-0xe6+0x1156),_0x223e04+_0x3cd379);}for(let _0x24758d=0x1*0x1ce7+0x1ff7+-0x15*0x2e6;_0x24758d<=_0x68415b;_0x24758d++){const _0x2b3945=Math['PI']*(-0x5*-0x6fe+0x2*-0x67e+0x15fa*-0x1+0.5)+_0x24758d*Math['PI']*(0x20a7*0x1+0x4*-0xba+0x1*-0x1dbf+0.5)/_0x68415b,_0x3436ca=Math['sin'](_0x2b3945),_0x375c95=Math['cos'](_0x2b3945);for(let _0x32aad8=0xbab+0xe*-0x283+0x1*0x177f;_0x32aad8<=_0x3f0d04;_0x32aad8++){const _0x3b75f7=_0x32aad8*(-0x1bd2+-0x196*-0x17+-0x453*0x2)*Math['PI']/_0x3f0d04-Math['PI']/(0x18e6+0x8*-0x257+-0x13c*0x5),_0x1776b8=Math['sin'](_0x3b75f7),_0x4ae3f0=Math['cos'](_0x3b75f7)*_0x3436ca,_0x42f0bd=_0x375c95,_0x393cca=_0x1776b8*_0x3436ca;let _0x21b652=-0xe*0x6d+-0xe13+-0x6ae*-0x3-_0x32aad8/_0x3f0d04,_0x383031=-0x687*-0x4+-0x126f+0x4*-0x1eb-_0x24758d/_0x68415b;_0x26dfbb['push'](_0x4ae3f0*_0x1b8031,_0x42f0bd*_0x1b8031-_0x3fdae2,_0x393cca*_0x1b8031),_0x36d823['push'](_0x4ae3f0,_0x42f0bd,_0x393cca),_0x3dd4c5['push'](_0x21b652,0x25bb+0xe0a+-0xcf1*0x4-_0x383031),_0x21b652=_0x21b652*si+zs,_0x383031=_0x383031*si+zs,_0x21b652/=-0x1c7+-0x323+-0x1*-0x4ed,_0x383031/=0xae*-0x2a+0x155b+0x734,_0x21b652+=(0x1*0x1fe1+0x36*0x86+-0x3c23)/(-0x1a92+-0x1*-0xef5+-0x5d*-0x20),_0x55fcda['push'](_0x21b652,-0x199*0x2+-0x3*-0x959+-0x18d8-_0x383031);}}_0x223e04=(_0x560ceb+(0x3dc+0xe8b+-0x1266))*(_0x3bb823+(-0xcf+-0x82d+0x8fd))+(_0x3f0d04+(0x8c*0x31+0x10c0+-0x2b8b))*(_0x68415b+(0x1*-0x180b+0x11*-0x19b+0x3357));for(let _0x3acc07=-0x1*-0x1e8+0x1ea7+0x1*-0x208f;_0x3acc07<_0x68415b;++_0x3acc07)for(let _0x1913de=-0x8e8+0x5*-0x6e3+0x2b57;_0x1913de<_0x3f0d04;++_0x1913de){const _0x236f25=_0x3acc07*(_0x3f0d04+(-0x11*0x2+0x7bb+0x6*-0x144))+_0x1913de,_0x41a5de=_0x236f25+_0x3f0d04+(0xf7*-0x1+-0x1659+0x1751);_0xa8320d['push'](_0x223e04+_0x236f25+(-0x7*-0x13c+-0x25ac*0x1+0x1d09),_0x223e04+_0x41a5de,_0x223e04+_0x236f25),_0xa8320d['push'](_0x223e04+_0x236f25+(-0x1499+0x1c13+0x1*-0x779),_0x223e04+_0x41a5de+(0x158f+-0x1b9d+0x60f),_0x223e04+_0x41a5de);}}else{if(_0x223e04=(_0x560ceb+(-0x8*-0x272+0x37d+-0x14*0x127))*(_0x3bb823+(0x5c6+-0x269c*-0x1+-0xecb*0x3)),_0x16c3d5>-0x6*-0x391+-0x3*-0x831+-0x2df9)for(let _0xa6af05=0x1b*0x11a+0x22*-0x51+0x12*-0x10e;_0xa6af05<_0x3bb823;_0xa6af05++){const _0x401e7f=_0xa6af05/_0x3bb823*(-0x5a*0x33+0x1*-0x259c+0x378c)*Math['PI'],_0x1df435=Math['sin'](_0x401e7f),_0x510ab1=-_0xdd572f/(-0x805*-0x1+-0x1cea+0x1*0x14e7),_0x13ceb6=Math['cos'](_0x401e7f);let _0x4b4514=-0x15f+-0xfb+0x25b-(_0x1df435+(0xd7+0x1b4a+-0x1c20))/(0x6*0x1a3+0x239f+-0x3*0xf25),_0x4f4cf9=(_0x13ceb6+(-0x55b+0xf8*-0x13+0x17c4))/(-0x4*0x7a2+-0x1*0x1f81+0x1*0x3e0b);_0x26dfbb['push'](_0x1df435*_0x16c3d5,_0x510ab1,_0x13ceb6*_0x16c3d5),_0x36d823['push'](-0x24bc+0xd5b+-0x69*-0x39,-(0x25f4+0x3*0x4ae+-0x33fd),0x13ba+-0x1b54+-0x7*-0x116),_0x3dd4c5['push'](_0x4b4514,-0x1495*-0x1+0x33a*0x4+-0x2*0x10be-_0x4f4cf9),_0x4b4514=_0x4b4514*si+zs,_0x4f4cf9=_0x4f4cf9*si+zs,_0x4b4514/=-0x11bc*-0x1+-0x6f5*-0x2+-0x7*0x485,_0x4f4cf9/=-0x17d2*0x1+0x1893+-0xbe,_0x4b4514+=(-0x20a3*0x1+0x1*-0x13c6+-0x346a*-0x1)/(-0x1ba7+0xcf+0x113*0x19),_0x55fcda['push'](_0x4b4514,0x3*-0x701+-0x14b9*0x1+0x29bd-_0x4f4cf9),_0xa6af05>-0x5b*-0xa+-0x1615+0x2*0x944&&_0xa8320d['push'](_0x223e04,_0x223e04+_0xa6af05,_0x223e04+_0xa6af05-(0x1fc0*-0x1+-0x66*-0x1d+0x1433));}if(_0x223e04+=_0x3bb823,_0x1b8031>-0x3*-0x9f5+0x1*-0x10a9+-0xd36)for(let _0x3499a6=-0x8bf*-0x1+-0x1713+0xe54;_0x3499a6<_0x3bb823;_0x3499a6++){const _0x18e5c0=_0x3499a6/_0x3bb823*(-0xebd+-0x117a*-0x1+-0x2bb)*Math['PI'],_0x11f7d5=Math['sin'](_0x18e5c0),_0xfefdaf=_0xdd572f/(0x17c3*-0x1+-0x1196*0x1+0x295b*0x1),_0xcf9991=Math['cos'](_0x18e5c0);let _0x3fc620=0x1663+-0x73*-0x3+-0x17bb-(_0x11f7d5+(-0x1e4+0xe7d+-0xc98))/(0x7*0x69+-0x3*-0x335+-0x31f*0x4),_0x208a61=(_0xcf9991+(0xdc2+0xbc9*-0x2+0x9d1))/(0x170b+0x6b6+-0x5*0x5f3);_0x26dfbb['push'](_0x11f7d5*_0x1b8031,_0xfefdaf,_0xcf9991*_0x1b8031),_0x36d823['push'](0x1*-0x20ed+-0x2e3+0x23d0,-0x50f+0x4*-0x81c+0x2580*0x1,0x1*-0x19d9+0x102b+0x1*0x9ae),_0x3dd4c5['push'](_0x3fc620,0xdb+0x22*-0xe9+0x6*0x504-_0x208a61),_0x3fc620=_0x3fc620*si+zs,_0x208a61=_0x208a61*si+zs,_0x3fc620/=-0x4*0x3e1+-0x171*-0x8+0x3ff,_0x208a61/=-0x1*-0x24c8+0x2*0x281+-0x29c7,_0x3fc620+=(-0x1*0x177b+-0x1*-0x13bb+0x3c2)/(0x1*-0x180a+0x29*0x7d+0x81*0x8),_0x55fcda['push'](_0x3fc620,0x22d3+0x2*-0x88d+-0x11b8-_0x208a61),_0x3499a6>-0x13a7+-0x1f04+0x32ac&&_0xa8320d['push'](_0x223e04,_0x223e04+_0x3499a6-(-0xef5*0x1+0x1963+-0xa6d),_0x223e04+_0x3499a6);}}this['positions']=_0x26dfbb,this['normals']=_0x36d823,this['uvs']=_0x3dd4c5,this['uvs1']=_0x55fcda,this['indices']=_0xa8320d;}}class GA extends gm{constructor(_0x2a49e2={}){const _0x1d47d9=_0x2a49e2['radius']??0x2297+0x2380+-0x4617+0.3,_0x409292=_0x2a49e2['height']??0x321*0x3+-0xd5b+-0x9*-0x71,_0x59f479=_0x2a49e2['heightSegm'+'ents']??0xf87+0x1147+-0x137*0x1b,_0x5304e3=_0x2a49e2['sides']??0x206c+0x207e*0x1+-0x40d6;super(_0x1d47d9,_0x1d47d9,_0x409292-(-0xfe+0x132f*-0x1+0x1*0x142f)*_0x1d47d9,_0x59f479,_0x5304e3,!(0x26f*-0xf+0xe6a+0x1617)),_0x2a49e2['calculateT'+'angents']&&(this['tangents']=Mr(this['positions'],this['normals'],this['uvs'],this['indices']));}}class HA extends gm{constructor(_0x86307d={}){const _0x8a40b2=_0x86307d['baseRadius']??0x26a8*-0x1+0x52*-0x2+-0x5*-0x7dc+0.5,_0x22704b=_0x86307d['peakRadius']??-0x2061+0x17d4+0x88d,_0x3f339a=_0x86307d['height']??-0x1eec+-0x2e6+0x21d3,_0x28b603=_0x86307d['heightSegm'+'ents']??-0x4*0x542+-0x3b*-0x1d+0x1*0xe5e,_0x1fd047=_0x86307d['capSegment'+'s']??-0x11af+-0x1cbb+0xaf*0x44;super(_0x8a40b2,_0x22704b,_0x3f339a,_0x28b603,_0x1fd047,!(-0xa*-0x3b5+0x1cbc*-0x1+-0x1b*0x4f)),_0x86307d['calculateT'+'angents']&&(this['tangents']=Mr(this['positions'],this['normals'],this['uvs'],this['indices']));}}class WA extends gm{constructor(_0x2ca723={}){const _0x5ad10b=_0x2ca723['radius']??0x1af7+0x10*-0x14+-0x19b7+0.5,_0x428ad9=_0x2ca723['height']??0x15*0x106+-0x1a15+0x6*0xc4,_0x4ad431=_0x2ca723['heightSegm'+'ents']??-0x15a*-0xf+-0x147+-0x12fa*0x1,_0x10b9bb=_0x2ca723['capSegment'+'s']??0x5b1*0x2+0x56*-0x26+-0x16*-0x11;super(_0x5ad10b,_0x5ad10b,_0x428ad9,_0x4ad431,_0x10b9bb,!(-0x3*-0x88c+0x18b3+-0x3256)),_0x2ca723['calculateT'+'angents']&&(this['tangents']=Mr(this['positions'],this['normals'],this['uvs'],this['indices']));}}class $A extends Ta{constructor(_0x2ef77b={}){super();const _0x31214a=_0x2ef77b['halfExtent'+'s']??new J(-0x18d*-0x3+-0x2356+0x1eaf+0.5,-0x17e5+0x425*0x6+0x1*-0xf9+0.5),_0x887703=_0x2ef77b['widthSegme'+'nts']??-0x1*-0x8b7+0x1*-0x1607+0xd55,_0x401658=_0x2ef77b['lengthSegm'+'ents']??0x2515*0x1+0x834+-0x2d44,_0x310efe=[],_0x2d3124=[],_0x39b9de=[],_0x42b586=[];let _0xa3d409=-0x356+0xbcc*0x1+-0x876;for(let _0x522a72=-0x1171+0x974+0x1*0x7fd;_0x522a72<=_0x887703;_0x522a72++)for(let _0x53f804=0x1*-0x2dd+0xcbf*-0x1+0xf9c;_0x53f804<=_0x401658;_0x53f804++){const _0x306b2b=-_0x31214a['x']+(-0x1709+-0x2c*-0x8+-0x3*-0x739)*_0x31214a['x']*_0x522a72/_0x887703,_0x2f08cf=0x684*0x4+-0x17ac+0xc*-0x33,_0x1c4eac=-(-_0x31214a['y']+(-0x1*0xb9+0x3ec+0x1*-0x331)*_0x31214a['y']*_0x53f804/_0x401658),_0x83a998=_0x522a72/_0x887703,_0x5b1f9e=_0x53f804/_0x401658;_0x310efe['push'](_0x306b2b,_0x2f08cf,_0x1c4eac),_0x2d3124['push'](0x16e3+0x115*-0x1+-0x15ce,0x129d+-0x1936+0x69a,-0x1d75+0x917+0x145e),_0x39b9de['push'](_0x83a998,-0x2*-0xf3b+-0x22dc+0xa1*0x7-_0x5b1f9e),_0x522a72<_0x887703&&_0x53f804<_0x401658&&(_0x42b586['push'](_0xa3d409+_0x401658+(-0x5f1+-0xd06+0x12f8),_0xa3d409+(-0x3dc*0x1+0xcee*-0x1+0x10cb*0x1),_0xa3d409),_0x42b586['push'](_0xa3d409+_0x401658+(-0x694*0x2+-0x2*0x2b4+0x1291),_0xa3d409+_0x401658+(0x105*-0x25+-0x223f+-0x3*-0x17fe),_0xa3d409+(0x14ca+0x250d+0x542*-0xb))),_0xa3d409++;}this['positions']=_0x310efe,this['normals']=_0x2d3124,this['uvs']=_0x39b9de,this['uvs1']=_0x39b9de,this['indices']=_0x42b586,_0x2ef77b['calculateT'+'angents']&&(this['tangents']=Mr(_0x310efe,_0x2d3124,_0x39b9de,_0x42b586));}}class XA extends Ta{constructor(_0x1f49cb={}){super();const _0xfe051e=_0x1f49cb['tubeRadius']??-0x96*0x1d+0x1c71+-0x3d1*0x3+0.2,_0x494465=_0x1f49cb['ringRadius']??0x18a+-0x1*0x1f49+0x1dbf+0.3,_0x1a4c9e=(_0x1f49cb['sectorAngl'+'e']??-0x5*0xc7+-0x1*0x107a+-0x15c5*-0x1)*Y['DEG_TO_RAD'],_0x28679b=_0x1f49cb['segments']??-0xee+0x1*0xacb+-0x9bf,_0x18d658=_0x1f49cb['sides']??0xd91+-0x1ded+0x838*0x2,_0x46e331=[],_0x184f19=[],_0x4a822d=[],_0x3e87e1=[];for(let _0x4e8a4e=0x17f7+0x33e*0x4+-0x24ef;_0x4e8a4e<=_0x18d658;_0x4e8a4e++)for(let _0x430d3e=-0xb95+0x2*-0x7ae+-0x39*-0x79;_0x430d3e<=_0x28679b;_0x430d3e++){const _0x444fbd=Math['cos'](_0x1a4c9e*_0x430d3e/_0x28679b)*(_0x494465+_0xfe051e*Math['cos']((0x1*0x4fd+0x2*0xd7b+-0x1ff1)*Math['PI']*_0x4e8a4e/_0x18d658)),_0x2821e5=Math['sin']((0x1c6+-0x7*0x241+0xe03)*Math['PI']*_0x4e8a4e/_0x18d658)*_0xfe051e,_0x2386e2=Math['sin'](_0x1a4c9e*_0x430d3e/_0x28679b)*(_0x494465+_0xfe051e*Math['cos']((0x21*-0x57+0x871*-0x4+0x2cfd)*Math['PI']*_0x4e8a4e/_0x18d658)),_0x5264a0=Math['cos'](_0x1a4c9e*_0x430d3e/_0x28679b)*Math['cos']((0x1500+0x375+0x1*-0x1873)*Math['PI']*_0x4e8a4e/_0x18d658),_0x54d1d8=Math['sin']((0xbd*0x1e+-0xca8+-0x97c)*Math['PI']*_0x4e8a4e/_0x18d658),_0x2d17f7=Math['sin'](_0x1a4c9e*_0x430d3e/_0x28679b)*Math['cos']((0x1e6*0xd+0x11*-0x67+0x1*-0x11d5)*Math['PI']*_0x4e8a4e/_0x18d658),_0x3e6891=_0x4e8a4e/_0x18d658,_0x591f59=0x1*-0x1f85+-0x2169+0x40ef-_0x430d3e/_0x28679b;if(_0x46e331['push'](_0x444fbd,_0x2821e5,_0x2386e2),_0x184f19['push'](_0x5264a0,_0x54d1d8,_0x2d17f7),_0x4a822d['push'](_0x3e6891,-0x5*-0x73d+0xc07*0x3+0x4845*-0x1-_0x591f59),_0x4e8a4e<_0x18d658&&_0x430d3e<_0x28679b){const _0x41f3e6=_0x4e8a4e*(_0x28679b+(0x1109+0x2f*0xa7+0x1d*-0x1a5))+_0x430d3e,_0x1238e8=(_0x4e8a4e+(0xfbf*0x2+0x1*0x80+0x1*-0x1ffd))*(_0x28679b+(-0x11e3+0x3a4+-0x72*-0x20))+_0x430d3e,_0x57670e=_0x4e8a4e*(_0x28679b+(-0x1569+0x1445*-0x1+0x29af))+(_0x430d3e+(0x1*0x54a+0x205c+-0x25a5)),_0x1ec137=(_0x4e8a4e+(0x5e7+0xb77*0x2+-0x1cd4))*(_0x28679b+(-0x5*-0x74b+-0x1*-0x1475+-0x38eb*0x1))+(_0x430d3e+(0x1d40+0x16f9+-0x3438));_0x3e87e1['push'](_0x41f3e6,_0x1238e8,_0x57670e),_0x3e87e1['push'](_0x1238e8,_0x1ec137,_0x57670e);}}this['positions']=_0x46e331,this['normals']=_0x184f19,this['uvs']=_0x4a822d,this['uvs1']=_0x4a822d,this['indices']=_0x3e87e1,_0x1f49cb['calculateT'+'angents']&&(this['tangents']=Mr(_0x46e331,_0x184f19,_0x4a822d,_0x3e87e1));}}class qA{constructor(_0x3c224c,_0x2e55c8){h(this,'processedC'+'ache',new Map()),h(this,'definition'+'sCache',new Map()),h(this,'_generator'+'s',new Map()),(this['_device']=_0x3c224c,this['_isClearin'+'gCache']=!(0x337*-0x2+0xd*-0x163+-0x3e*-0x65),this['_precached']=!(0x1364*-0x2+-0x5bb+0x2c84),this['_programsC'+'ollection']=[],this['_defaultSt'+'dMatOption']=new dl(),this['_defaultSt'+'dMatOption'+'Min']=new dl());const _0x30dc56=new vv();_0x2e55c8['shaderOptB'+'uilder']['updateRef'](this['_defaultSt'+'dMatOption'],{},_0x30dc56,_0x2e55c8,null,[],Aa,null),_0x2e55c8['shaderOptB'+'uilder']['updateMinR'+'ef'](this['_defaultSt'+'dMatOption'+'Min'],{},_0x2e55c8,null,cm,null),_0x3c224c['on']('destroy:sh'+'ader',_0x14e94f=>{this['removeFrom'+'Cache'](_0x14e94f);});}['destroy'](){this['clearCache']();}['register'](_0x13f2c1,_0x3cbb61){this['_generator'+'s']['has'](_0x13f2c1)||this['_generator'+'s']['set'](_0x13f2c1,_0x3cbb61);}['unregister'](_0x11f33e){this['_generator'+'s']['has'](_0x11f33e)&&this['_generator'+'s']['delete'](_0x11f33e);}['isRegister'+'ed'](_0xf3e1fa){return this['_generator'+'s']['has'](_0xf3e1fa);}['generateSh'+'aderDefini'+'tion'](_0x12eb34,_0x204f15,_0x168117,_0x907ce2){var _0x453175,_0x699548;let _0x21f506=this['definition'+'sCache']['get'](_0x168117);if(!_0x21f506){let _0x5d8a9d;(_0x453175=_0x907ce2['litOptions'])!=null&&_0x453175['lights']&&(_0x5d8a9d=_0x907ce2['litOptions']['lights'],_0x907ce2['litOptions']['lights']=_0x5d8a9d['map'](_0x438a69=>{const _0x5ad10c=_0x438a69['clone']?_0x438a69['clone']():_0x438a69;return _0x5ad10c['key']=_0x438a69['key'],_0x5ad10c;})),this['storeNewPr'+'ogram'](_0x204f15,_0x907ce2),(_0x699548=_0x907ce2['litOptions'])!=null&&_0x699548['lights']&&(_0x907ce2['litOptions']['lights']=_0x5d8a9d),this['_precached']&&w['log']('ProgramLib'+'rary#getPr'+'ogram:\x20Cac'+'he\x20miss\x20fo'+'r\x20shader\x20'+_0x204f15+'\x20key\x20'+_0x168117+('\x20after\x20sha'+'ders\x20preca'+'ching'));const _0x201203=this['_device'];_0x21f506=_0x12eb34['createShad'+'erDefiniti'+'on'](_0x201203,_0x907ce2),_0x21f506['name']=_0x21f506['name']??(_0x907ce2['pass']?_0x204f15+'-pass:'+_0x907ce2['pass']:_0x204f15),this['definition'+'sCache']['set'](_0x168117,_0x21f506);}return _0x21f506;}['getCachedS'+'hader'](_0x52abcf){return this['processedC'+'ache']['get'](_0x52abcf);}['setCachedS'+'hader'](_0x40f0eb,_0x29aa3f){this['processedC'+'ache']['set'](_0x40f0eb,_0x29aa3f);}['getProgram'](_0x97e6b8,_0x2f13ba,_0x72a990,_0x568111){const _0x54349=this['_generator'+'s']['get'](_0x97e6b8);if(!_0x54349)return w['warn']('ProgramLib'+'rary#getPr'+'ogram:\x20No\x20'+'program\x20li'+'brary\x20func'+'tions\x20regi'+'stered\x20for'+':\x20'+_0x97e6b8),null;const _0x2a2a04=_0x54349['generateKe'+'y'](_0x2f13ba),_0x1f1e8f=hi(_0x2a2a04),_0x3da949=_0x72a990['generateKe'+'y'](this['_device']),_0x5aed53=hi(_0x3da949),_0x33c51c=_0x1f1e8f+'#'+_0x5aed53;let _0x23eb74=this['getCachedS'+'hader'](_0x33c51c);if(!_0x23eb74){const _0x225b83=this['generateSh'+'aderDefini'+'tion'](_0x54349,_0x97e6b8,_0x1f1e8f,_0x2f13ba);w['assert'](_0x225b83);let _0x46b8be='',_0x8f293b;_0x2f13ba['pass']!==void(-0x956+0xf6a*0x1+-0x614)&&(_0x8f293b=Si['get'](this['_device'])['getByIndex'](_0x2f13ba['pass']),_0x46b8be='-'+_0x8f293b['name']),this['_device']['fire']('shader:gen'+'erate',{'userMaterialId':_0x568111,'shaderPassInfo':_0x8f293b,'definition':_0x225b83});const _0x5b87a9={'name':''+_0x225b83['name']+_0x46b8be+'-proc','attributes':_0x225b83['attributes'],'vshader':_0x225b83['vshader'],'vincludes':_0x225b83['vincludes'],'fincludes':_0x225b83['fincludes'],'fshader':_0x225b83['fshader'],'processingOptions':_0x72a990,'shaderLanguage':_0x225b83['shaderLang'+'uage'],'meshUniformBufferFormat':_0x225b83['meshUnifor'+'mBufferFor'+'mat'],'meshBindGroupFormat':_0x225b83['meshBindGr'+'oupFormat']};_0x23eb74=new qy(this['_device'],_0x5b87a9),w['call'](()=>{_0x23eb74['_generatio'+'nKey']=_0x2a2a04,_0x23eb74['_processin'+'gKey']=_0x3da949;}),this['setCachedS'+'hader'](_0x33c51c,_0x23eb74);}return _0x23eb74;}['storeNewPr'+'ogram'](_0xa2650e,_0x4c3688){let _0x34436d={};if(_0xa2650e==='standard'){const _0x103879=this['_getDefaul'+'tStdMatOpt'+'ions'](_0x4c3688['pass']);for(const _0x1a1034 in _0x4c3688)(_0x4c3688['hasOwnProp'+'erty'](_0x1a1034)&&_0x103879[_0x1a1034]!==_0x4c3688[_0x1a1034]||_0x1a1034==='pass')&&(_0x34436d[_0x1a1034]=_0x4c3688[_0x1a1034]);for(const _0x3172aa in _0x4c3688['litOptions'])_0x34436d[_0x3172aa]=_0x4c3688['litOptions'][_0x3172aa];}else _0x34436d=_0x4c3688;this['_programsC'+'ollection']['push'](JSON['stringify']({'name':_0xa2650e,'options':_0x34436d}));}['dumpProgra'+'ms'](){let _0x283da6='let\x20device'+'\x20=\x20pc.app\x20'+'?\x20pc.app.g'+'raphicsDev'+'ice\x20:\x20pc.A'+'pplication'+'.getApplic'+'ation().gr'+'aphicsDevi'+'ce;\x0a';_0x283da6+='let\x20shader'+'s\x20=\x20[',this['_programsC'+'ollection'][-0xeb+0x1b9a+-0x26d*0xb]&&(_0x283da6+='\x0a\x09'+this['_programsC'+'ollection'][-0xe68+-0x2*0x11a1+0x31aa]);for(let _0x42d73d=-0x147*0x1b+0x1*-0x23b1+0x462f;_0x42d73d<this['_programsC'+'ollection']['length'];++_0x42d73d)_0x283da6+=',\x0a\x09'+this['_programsC'+'ollection'][_0x42d73d];_0x283da6+='\x0a];\x0a',_0x283da6+='pc.getProg'+'ramLibrary'+'(device).p'+'recompile('+'shaders);\x0a',_0x283da6+='if\x20(pc.ver'+'sion\x20!=\x20\x22'+hn+('\x22\x20||\x20pc.re'+'vision\x20!=\x20'+'\x22')+$S+'\x22)\x0a',_0x283da6+='\x09console.w'+'arn(\x22preco'+'mpile-shad'+'ers.js:\x20en'+'gine\x20versi'+'on\x20mismatc'+'h,\x20rebuild'+'\x20shaders\x20l'+'ib\x20with\x20cu'+'rrent\x20engi'+'ne\x22);';const _0x1c441c=document['createElem'+'ent']('a');_0x1c441c['setAttribu'+'te']('href','data:text/'+'plain;char'+'set=utf-8,'+encodeURIComponent(_0x283da6)),_0x1c441c['setAttribu'+'te']('download','precompile'+'-shaders.j'+'s'),_0x1c441c['style']['display']='none',document['body']['appendChil'+'d'](_0x1c441c),_0x1c441c['click'](),document['body']['removeChil'+'d'](_0x1c441c);}['clearCache'](){this['_isClearin'+'gCache']=!(-0x177f*-0x1+0x1*-0x1727+-0x58),this['processedC'+'ache']['forEach'](_0xa2544a=>{_0xa2544a['destroy']();}),this['processedC'+'ache']['clear'](),this['_isClearin'+'gCache']=!(0x80f+-0x1286+0xa78);}['removeFrom'+'Cache'](_0x4445be){this['_isClearin'+'gCache']||this['processedC'+'ache']['forEach']((_0x394e5f,_0x144af5)=>{_0x4445be===_0x394e5f&&this['processedC'+'ache']['delete'](_0x144af5);});}['_getDefaul'+'tStdMatOpt'+'ions'](_0x19cc62){const _0x2e2c71=Si['get'](this['_device'])['getByIndex'](_0x19cc62);return _0x19cc62===Zn||_0x19cc62===Rl||_0x2e2c71['isShadow']?this['_defaultSt'+'dMatOption'+'Min']:this['_defaultSt'+'dMatOption'];}['precompile'](_0x20d0b1){if(_0x20d0b1){const _0x3de1af=new Array(_0x20d0b1['length']);for(let _0x4c844f=-0x32*-0x19+-0x25cd+-0x3*-0xaf9;_0x4c844f<_0x20d0b1['length'];_0x4c844f++){if(_0x20d0b1[_0x4c844f]['name']==='standard'){const _0x2b5480=_0x20d0b1[_0x4c844f]['options'],_0x5b1a99=this['_getDefaul'+'tStdMatOpt'+'ions'](_0x2b5480['pass']);for(const _0x524510 in _0x5b1a99)_0x5b1a99['hasOwnProp'+'erty'](_0x524510)&&_0x2b5480[_0x524510]===void(-0x1209+0x26*-0x35+-0x13*-0x15d)&&(_0x2b5480[_0x524510]=_0x5b1a99[_0x524510]);}_0x3de1af[_0x4c844f]=this['getProgram'](_0x20d0b1[_0x4c844f]['name'],_0x20d0b1[_0x4c844f]['options']);}}this['_precached']=!(-0x154+0x1bf*0x11+-0x1c5b);}}async function jA(){const _0x317979=new Float32Array(0x2241+0x3a6+-0x31*0xc6),_0xff2ed3=new Int32Array(_0x317979['buffer']);let _0x52448f=-0x1f8a+0x29d*-0xb+-0x29f*-0x17,_0x1029d8={};self['onmessage']=async _0x35b70d=>{const {data:_0x15ad21}=_0x35b70d;switch(_0x15ad21['type']){case'initWorker':break;case'appendGSpl'+'atData':_0x4a9498(_0x15ad21['properties'],_0x15ad21['timeIndex'],_0x15ad21['timeOption']);break;case'releaseSeq'+'Data':_0x1a7a2e(_0x15ad21['index']);break;case'releaseAll'+'SeqData':_0x4cc4c2();break;case'destroyWor'+'ker':_0x3e4a3e();break;}};class _0x16a0bc{constructor(_0x30d6d8=0x7*-0x47f+-0x140e+0x1*0x3387,_0x199595=-0x5*0x657+-0x2159+0x410c,_0x27e1b1=-0x209f*-0x1+0x24fa+0x4599*-0x1,_0x382cda=0x1*-0x4f+-0x2*0xa5b+0x1506){this['x']=_0x30d6d8,this['y']=_0x199595,this['z']=_0x27e1b1,this['w']=_0x382cda;}['set'](_0x4e17b3,_0x1d90d2,_0x5413e0,_0x13d6c4){return this['x']=_0x4e17b3,this['y']=_0x1d90d2,this['z']=_0x5413e0,this['w']=_0x13d6c4,this;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w']);}['normalize'](_0x2da767=this){let _0x46275e=_0x2da767['length']();return _0x46275e===-0x236f+0x1*-0x1c83+0x3ff2?(this['x']=this['y']=this['z']=-0x24ca+0x2*0xcbd+-0x2*-0x5a8,this['w']=0x25fd+-0x6d*-0x17+-0x9*0x54f):(_0x46275e=(-0x131+-0x1db0+0x1ee2)/_0x46275e,this['x']=_0x2da767['x']*_0x46275e,this['y']=_0x2da767['y']*_0x46275e,this['z']=_0x2da767['z']*_0x46275e,this['w']=_0x2da767['w']*_0x46275e),this;}['mulScalar'](_0x52fde1,_0x1a6ef0=this){return this['x']=_0x1a6ef0['x']*_0x52fde1,this['y']=_0x1a6ef0['y']*_0x52fde1,this['z']=_0x1a6ef0['z']*_0x52fde1,this['w']=_0x1a6ef0['w']*_0x52fde1,this;}}const _0x2caf1c=_0x71ea6e=>{_0x317979[-0x700+0x9c3*0x4+0x1c*-0x125]=_0x71ea6e;const _0xeb8f82=_0xff2ed3[0x13e9*-0x1+-0x11c8+0x1*0x25b1];let _0x107d58=_0xeb8f82>>-0xd85*0x2+0x1979*-0x1+0x3493&0x8db1+-0x2*-0x47a3+-0x9cf7,_0x515f12=_0xeb8f82>>0x1779*-0x1+0x839+0xf4c&0x12b0+-0x2104+-0x477*-0x5;const _0x458d23=_0xeb8f82>>-0x1e12+-0xc36*0x1+0x2a5f&0x2374+0x1563+-0x37d8;return _0x458d23<-0x2033+-0x19d+-0x1*-0x2237?_0x107d58:_0x458d23>-0x4cf+-0x1a61*0x1+-0x1*-0x1fbe?(_0x107d58|=-0xfda*-0x5+0x8c0*-0x5+0x587e,_0x107d58|=(_0x458d23===0x767*-0x4+-0x350*-0x2+0x36d*0x7?0x1cc3+-0x74c+-0x1577:-0xed1*-0x1+0x121*0x4+0x2*-0x9aa)&&_0xeb8f82&-0x65d765*0x2+0x4f18c4+0xfc9605,_0x107d58):_0x458d23<0x1b81+0x2*0x1127+-0x3d5e?(_0x515f12|=-0x1489*0x1+0x212+0x1a77,_0x107d58|=(_0x515f12>>-0x23ad*0x1+-0x1*0xca6+0x30c5-_0x458d23)+(_0x515f12>>-0x6*-0x26d+-0x7*-0x16f+-0xb*0x232-_0x458d23&-0x1f34+0xb23*-0x1+0x2a58),_0x107d58):(_0x107d58|=_0x458d23-(-0x10bc+0x1*0x60b+-0xb21*-0x1)<<0x1d7*-0x1+0xbad+-0x84*0x13|_0x515f12>>0x12ba+0x1682+-0x293b*0x1,_0x107d58+=_0x515f12&0xf4+0x43d+-0x530,_0x107d58);},_0x40c47c=()=>({0x9:0x1,0x18:0x2,0x2d:0x3}[((()=>{for(let _0x2ec937=0x2324+-0x12b*0x1+-0x3*0xb53;_0x2ec937<-0x1*-0x2057+0x4cd*0x1+-0x1*0x24f7;++_0x2ec937)if(!_0x1029d8['f_rest_'+_0x2ec937])return _0x2ec937;return-0x13ed+0x265c+-0x1242;})())]??-0x2ef+-0x1ce5+0x7f5*0x4),_0x4a9498=(_0x5d4da3,_0x44a291,_0x673c35)=>{const _0x591ac0=!!_0x5d4da3['time_index'];_0x591ac0||(_0x5d4da3['time_index']=new Float32Array(-0xe23+0x5*-0x520+-0xd41*-0x3)),_0x52448f+=_0x5d4da3['x']['length']??0x1*0x1bde+0xd5*0x23+-0x655*0x9;const _0x2c379c=Object['keys'](_0x5d4da3);for(let _0x43abe3=-0x19be+0x966+0x1058;_0x43abe3<_0x2c379c['length'];_0x43abe3++){const _0x53d0e5=_0x2c379c[_0x43abe3],_0x5a9dbf=_0x5d4da3[_0x53d0e5],_0x4f2f63=_0x1029d8[_0x53d0e5]??new Float32Array(0x12e5+0x2273+-0x3558);if(!_0x591ac0&&_0x53d0e5==='time_index'){const _0x40ceff=new Float32Array(_0x52448f);_0x40ceff['fill'](_0x44a291),_0x40ceff['set'](_0x4f2f63,-0x1a71+0x1731+-0x4*-0xd0),_0x1029d8[_0x53d0e5]=_0x40ceff;}else{if(!_0x591ac0&&_0x5a9dbf&&_0x53d0e5==='t'){const _0x5a90ef=new Float32Array(_0x52448f);if(_0x5a90ef['set'](_0x4f2f63,0xe79+-0x36b+-0xb0e*0x1),_0x673c35){for(let _0x4f768a=_0x4f2f63['length'];_0x4f768a<_0x52448f;_0x4f768a++)_0x5a9dbf[_0x4f768a-_0x4f2f63['length']]>-(0x3*0x52c+0xf87+-0x26*0xd1)?_0x5a90ef[_0x4f768a]=_0x5a9dbf[_0x4f768a-_0x4f2f63['length']]+_0x673c35[(0x1f83+-0x11*-0x2f+-0x2*0x1150)*_0x44a291]:_0x5a90ef[_0x4f768a]=_0x5a9dbf[_0x4f768a-_0x4f2f63['length']];}_0x1029d8[_0x53d0e5]=_0x5a90ef;}else{if(_0x5a9dbf){const _0x4857c5=new Float32Array(_0x52448f);_0x4857c5['set'](_0x4f2f63,-0x918+-0x1*-0x13ff+-0xae7),_0x4857c5['set'](_0x5a9dbf,_0x4f2f63['length']),_0x1029d8[_0x53d0e5]=_0x4857c5;}}}}const _0x32446c={};Object['keys'](_0x1029d8)['forEach'](_0x19e979=>{_0x32446c[_0x19e979]=new Float32Array(_0x1029d8[_0x19e979]['buffer']['slice']());});const _0x261274=Object['keys'](_0x32446c)['map'](_0x5e74c6=>_0x32446c[_0x5e74c6]['buffer']),_0xd8718c=_0x471d4e(),_0x5422d9=Object['keys'](_0xd8718c)['map'](_0x31914f=>_0xd8718c[_0x31914f]['buffer']);self['postMessag'+'e']({'type':'newAppendD'+'ata','properties':_0x32446c,'transformData':_0xd8718c},_0x261274['concat'](_0x5422d9));},_0x471d4e=()=>{const _0x5f1754=_0x1029d8['x']['length'],_0x14e7f7=_0x1029d8['x'],_0x50210b=_0x1029d8['y'],_0x2d14d2=_0x1029d8['z'],_0x2e53a0=_0x1029d8['scale_0'],_0x4389b2=_0x1029d8['scale_1'],_0x2ad52a=_0x1029d8['scale_2'],_0x145973=_0x1029d8['rot_1'],_0x5c3632=_0x1029d8['rot_2'],_0x1cbddd=_0x1029d8['rot_3'],_0x488b87=_0x1029d8['rot_0'],_0x4dfa22=_0x1029d8['motion_0'],_0x4acf36=_0x1029d8['motion_1'],_0x3cd695=_0x1029d8['motion_2'],_0x5599b5=_0x1029d8['t'],_0x100b2c=_0x1029d8['t_scale'],_0x38edae=_0x1029d8['time_index'],_0x1384ec=_0x1029d8['f_dc_0'],_0x5e4676=_0x1029d8['f_dc_1'],_0x1c0b0e=_0x1029d8['f_dc_2'],_0x578008=_0x1029d8['opacity'],_0x13aa63=(_0x5599b5==null?void(-0x5ad*-0x1+-0xae0+-0x533*-0x1):_0x5599b5['length'])>-0x3*0x61c+-0x443*-0x6+0x135*-0x6,_0x463539=new Float32Array(_0x5f1754*(0x221+-0x1fe5+-0x16b*-0x15)),_0x5c90f0=new Float32Array(_0x5f1754*(0x1a59+-0x69+-0x19ed)),_0xb1136=new Uint16Array(_0x5f1754*(0x1*-0x285+-0x1*0x206d+0x22f5)),_0x215d73=new Float32Array(_0x5f1754*(-0x1b1b+-0x836+-0x143*-0x1c));let _0x1524bb=null,_0x43f335=null,_0xaedf77=null,_0x57bd02=null;_0x13aa63&&(_0x1524bb=new Float32Array(_0x5f1754*(-0x1*0xa0+-0x564+0x607)),_0x43f335=new Float32Array(_0x5f1754*(-0x5ea*0x6+0x14*-0xdc+-0x1*-0x34af)),_0xaedf77=new Float32Array(_0x5f1754*(0x1d1*0xb+-0x222a+0x719*0x2)),_0x57bd02=new Float32Array(_0x5f1754));const _0x1f43ed=new _0x16a0bc(0x1f*0x124+0x1133+0xcf*-0x41,-0x199f*-0x1+0xd*0x71+-0xdf*0x24,-0x1*0x9fa+0x1*0x1a49+-0xa7*0x19,0x24e5+-0x2049+-0x2*0x24e);let _0x296afb=0x1*-0x2429+0x1c65+0x7c4,_0x4b5d4=0x4*0x836+-0xa*0x321+0x1*-0x18e,_0x10541d=0x7*0x445+0x3*-0x1d5+-0x1*0x1864,_0x24b232=-0x8be*0x3+-0x1719+0x225*0x17,_0x1a0d3b=-0x93*-0x4+0x1004+-0x494*0x4,_0x238297=-0x2*0x1cc+-0x1*-0x529+-0x191,_0x252ec2=!(0x3a0+-0x23c5+0x2025);const _0x3883bc=new Float32Array(0x1861+0xd91+-0xd*0x2eb),_0x18b0d2=new Float32Array(0x1ba0+-0x257f+0x9e2),_0x38f460=new Uint16Array(_0x5f1754*(0x1a86+-0x100c*-0x1+0x1*-0x2a8e)),_0x5dcffe=-0xe94+-0x9b9+0x184d+0.28209479177387814;for(let _0x5ca0a9=-0x9*-0x1ce+-0x15bb+0x57d;_0x5ca0a9<_0x5f1754;++_0x5ca0a9){const _0x2268ef=_0x1384ec[_0x5ca0a9]*_0x5dcffe+(0x1f0e+0x4*0x579+-0x2*0x1a79+0.5),_0x50092d=_0x5e4676[_0x5ca0a9]*_0x5dcffe+(0x1421+-0x704*-0x2+-0x2229+0.5),_0x2d0b00=_0x1c0b0e[_0x5ca0a9]*_0x5dcffe+(-0x1*0xe35+-0x8a0*0x2+-0x1*-0x1f75+0.5),_0x193585=_0x578008[_0x5ca0a9];_0x38f460[_0x5ca0a9*(0x1f69+-0x833*0x3+0x1e*-0x3a)+(-0x260a+-0x271*-0xa+0x6d*0x20)]=_0x2caf1c(_0x2268ef),_0x38f460[_0x5ca0a9*(-0x11*0x1d7+0xa23+0x1528)+(-0x2194+0x13d8+-0x1*-0xdbd)]=_0x2caf1c(_0x50092d),_0x38f460[_0x5ca0a9*(0x4b8+-0xc81+0x1*0x7cd)+(0x191*0xa+-0x1161+0x15*0x15)]=_0x2caf1c(_0x2d0b00),_0x38f460[_0x5ca0a9*(-0x1c7a+-0x1ba2+-0x8*-0x704)+(-0xa92+-0x2105+0x2b9a)]=_0x2caf1c(_0x193585);const _0x9b7354=_0x14e7f7[_0x5ca0a9],_0x4143a9=_0x50210b[_0x5ca0a9],_0x510637=_0x2d14d2[_0x5ca0a9],_0x4811cc=Math['max'](_0x2e53a0[_0x5ca0a9],_0x4389b2[_0x5ca0a9],_0x2ad52a[_0x5ca0a9]);if(isFinite(_0x9b7354)&&isFinite(_0x4143a9)&&isFinite(_0x510637)&&isFinite(_0x4811cc)){const _0x3b60f9=(0x1c65+-0x31f+-0x1944)*Math['exp'](_0x4811cc);_0x252ec2?(_0x252ec2=!(0x31*-0x61+0xb*0x1e2+0x112*-0x2),_0x296afb=_0x9b7354-_0x3b60f9,_0x4b5d4=_0x4143a9-_0x3b60f9,_0x10541d=_0x510637-_0x3b60f9,_0x24b232=_0x9b7354+_0x3b60f9,_0x1a0d3b=_0x4143a9+_0x3b60f9,_0x238297=_0x510637+_0x3b60f9):(_0x296afb=Math['min'](_0x296afb,_0x9b7354-_0x3b60f9),_0x4b5d4=Math['min'](_0x4b5d4,_0x4143a9-_0x3b60f9),_0x10541d=Math['min'](_0x10541d,_0x510637-_0x3b60f9),_0x24b232=Math['max'](_0x24b232,_0x9b7354+_0x3b60f9),_0x1a0d3b=Math['max'](_0x1a0d3b,_0x4143a9+_0x3b60f9),_0x238297=Math['max'](_0x238297,_0x510637+_0x3b60f9));}_0x1f43ed['set'](_0x145973[_0x5ca0a9],_0x5c3632[_0x5ca0a9],_0x1cbddd[_0x5ca0a9],_0x488b87[_0x5ca0a9]),_0x1f43ed['normalize'](),_0x1f43ed['w']<-0x1f3*-0x7+0x1*0xa4d+-0x17f2&&_0x1f43ed['mulScalar'](-(-0xc7e+-0x42d*-0x2+0x425)),_0x5c90f0[_0x5ca0a9*(0x1*-0x21ac+0x2c5+0x1eea)+(0x6*0x5f4+0x2559+-0x4911)]=_0x14e7f7[_0x5ca0a9],_0x5c90f0[_0x5ca0a9*(0x1*-0x21d7+-0x937+0x2b11)+(0x1542+0xd13+-0x2254)]=_0x50210b[_0x5ca0a9],_0x5c90f0[_0x5ca0a9*(0xeab*0x1+-0x148*0x19+-0x1*-0x1160)+(0x20ac+0x35*0xb7+-0x468d)]=_0x2d14d2[_0x5ca0a9],_0x463539[_0x5ca0a9*(0x1ec1+0x1e19+-0x23*0x1bd)+(0x20a0+-0x14ec+0x1c*-0x6b)]=_0x14e7f7[_0x5ca0a9],_0x463539[_0x5ca0a9*(-0x899+0x1192+-0x4a*0x1f)+(-0x4f*0x1+-0x4b2+0x502)]=_0x50210b[_0x5ca0a9],_0x463539[_0x5ca0a9*(0x136+0x12ef+0x6*-0x35b)+(0xad*0x4+0x1e53+0x4f*-0x6b)]=_0x2d14d2[_0x5ca0a9],_0xb1136[_0x5ca0a9*(0x59a+-0xeda*0x1+-0x1*-0x943)+(-0x1*-0x20d1+0x1b*-0x5+-0x204a)]=_0x2caf1c(Math['exp'](_0x2e53a0[_0x5ca0a9])),_0xb1136[_0x5ca0a9*(-0x12ad*0x2+0x458+0x1*0x2105)+(-0x179f+-0x241d+-0x1*-0x3bbd)]=_0x2caf1c(Math['exp'](_0x4389b2[_0x5ca0a9])),_0xb1136[_0x5ca0a9*(0x58a*-0x7+-0xd69+0x3432)+(0x241b+0x102*-0x1+-0x2317)]=_0x2caf1c(Math['exp'](_0x2ad52a[_0x5ca0a9])),_0x215d73[_0x5ca0a9*(0x14b*-0xd+-0xd74+0x1e46)+(-0xb1e+-0xa99+-0x15b7*-0x1)]=_0x1f43ed['x'],_0x215d73[_0x5ca0a9*(-0x11e4+-0x1*-0x869+0x97e)+(-0x886*0x3+-0x52+-0x7*-0x3b3)]=_0x1f43ed['y'],_0x215d73[_0x5ca0a9*(-0x2*-0x134+-0x4b5*-0x6+-0x1ea3)+(-0x1a*0x6d+-0x360+0xe74)]=_0x1f43ed['z'],_0x13aa63&&_0x1524bb&&_0x43f335&&_0xaedf77&&_0x57bd02&&(_0x1524bb[_0x5ca0a9*(-0x3*-0xb03+0x3*0x442+-0x2dcc)+(0x1876+-0x11d9*-0x2+-0x3c28)]=_0x4dfa22[_0x5ca0a9],_0x1524bb[_0x5ca0a9*(0x17ce+0x11b9*0x1+-0x2984)+(-0x1488+0x519+0xf70)]=_0x4acf36[_0x5ca0a9],_0x1524bb[_0x5ca0a9*(-0x26b+0x1680+0x7*-0x2de)+(0x58a+0x7ba+-0xd42)]=_0x3cd695[_0x5ca0a9],_0xaedf77[_0x5ca0a9*(0x5d*-0x29+0x170d+0x2b7*-0x3)+(-0x22a*0x1+-0x8*-0x198+0x1*-0xa96)]=_0x4dfa22[_0x5ca0a9],_0xaedf77[_0x5ca0a9*(0x2*0xd26+-0x16cc+-0x2f*0x13)+(-0x22f7+0x1*-0xad+0x23a5)]=_0x4acf36[_0x5ca0a9],_0xaedf77[_0x5ca0a9*(0x653*0x5+0xf95+0xfbb*-0x3)+(0x1c05+0x204c+-0x3c4f)]=_0x3cd695[_0x5ca0a9],_0x57bd02[_0x5ca0a9]=_0x100b2c?Math['exp'](_0x100b2c[_0x5ca0a9]):-0x1*0x1e93+0x2449+-0x1*0x5b6,_0x43f335[_0x5ca0a9*(0x78a+0x14ed+-0x1c74)+(-0x4*-0x5bd+-0x459*0x2+0xa*-0x16d)]=_0x5599b5?_0x5599b5[_0x5ca0a9]:0x1b*0x2b+0x1f97+0x4*-0x908,_0x43f335[_0x5ca0a9*(0x99e*0x3+0x1f*-0x66+0x57f*-0x3)+(-0x2635+0x337*-0x1+-0x1f9*-0x15)]=_0x57bd02[_0x5ca0a9]);}_0x252ec2||(_0x3883bc[-0x665*0x2+-0x1f8a+-0xb15*-0x4]=(_0x296afb+_0x24b232)*(-0x12d7*-0x2+0x10d9+-0x3687+0.5),_0x3883bc[0x1bbf+-0x1e4a+0x28c]=(_0x4b5d4+_0x1a0d3b)*(-0x1a6b+0x328+-0x3*-0x7c1+0.5),_0x3883bc[0x9f0+-0x4a*0x44+0x9ba]=(_0x10541d+_0x238297)*(0x83d+0x1a27+-0x2264+0.5),_0x18b0d2[0x169*-0x19+0x1*-0xd57+0x3098]=(_0x24b232-_0x296afb)*(-0xc24+0x1*-0x1636+0x225a+0.5),_0x18b0d2[-0x86d+-0x1*0x211d+0x298b]=(_0x1a0d3b-_0x4b5d4)*(-0x3*0x729+0x1fae+-0xa33+0.5),_0x18b0d2[0x6*0x450+-0x4cc*-0x1+-0x13a*0x19]=(_0x238297-_0x10541d)*(0xeed+0x2361*-0x1+0x1474+0.5));const _0x2ee69d=_0x5bc2f8();let _0x4cf3da={'dataColor':_0x38f460,'center':_0x3883bc,'halfExtents':_0x18b0d2,'dataCenters':_0x463539,'dataPosition':_0x5c90f0,'dataScale':_0xb1136,'dataRotation':_0x215d73,..._0x2ee69d};return _0x13aa63&&(_0x4cf3da={..._0x4cf3da,'dataMotion':_0x1524bb,'dataTime':_0x43f335,'motion':_0xaedf77,'tScaleArray':_0x57bd02,'muT':new Float32Array(_0x5599b5),'timeIndex':new Float32Array(_0x38edae)}),_0x4cf3da;},_0x41f6d6=_0x416128=>{const _0xaf584e=[];for(let _0x470882=0x158f*0x1+0x23f9*-0x1+0xe6a;_0x470882<_0x416128;++_0x470882)_0xaf584e['push'](_0x1029d8['f_rest_'+_0x470882]);return _0xaf584e;},_0x5bc2f8=()=>{const _0x26bb23=_0x40c47c();if(_0x26bb23<=0x1*-0xb13+0x194b*-0x1+0x245e)return{};const _0x27f50a=_0x1029d8['x']['length'],_0x59de14=new Uint32Array(_0x27f50a*(0x2*0xd6c+-0x7*-0x3+-0x1ae9)),_0x3a6400=new Uint32Array(_0x27f50a*(-0x4*0x4b1+0x533+0xd95)),_0xeee9f2=new Uint32Array(_0x27f50a*(0x18ae+-0x23ba+-0x588*-0x2)),_0x2b0560=new Uint32Array(_0x27f50a*(0x136e*-0x2+-0x159d+0x1*0x3c7d)),_0x3935f3={0x1:0x3,0x2:0x8,0x3:0xf}[_0x26bb23],_0xa6d28c=_0x41f6d6(_0x3935f3*(0xb4*-0x37+0x1669+-0x2*-0x823)),_0x1324b6=-0x94a+-0x957+0x1aa0,_0x3ce8cc=-0x84e+0x1389+-0x73c,_0x5788f9=new Float32Array(0x273*-0x3+-0x1c9d+-0x155*-0x1b),_0x57be1b=new Uint32Array(_0x5788f9['buffer']),_0x491dd9=new Array(_0x3935f3*(0x4a6+-0x229*-0x7+-0x9e1*0x2))['fill'](-0x1*-0xe1b+-0x1*0x22a9+0x148e);for(let _0x156f24=0x8+0x2db*-0x3+0x889;_0x156f24<_0x27f50a;++_0x156f24){for(let _0x32dace=0xb3c*-0x2+-0x1b63+-0x1*-0x31db;_0x32dace<_0x3935f3;++_0x32dace)_0x491dd9[_0x32dace*(0x2534+-0x928+0x1*-0x1c09)]=_0xa6d28c[_0x32dace][_0x156f24],_0x491dd9[_0x32dace*(-0x1cd9+0x1*-0x259+0x3*0xa67)+(-0x1*-0xd32+0x1047+0x8*-0x3af)]=_0xa6d28c[_0x32dace+_0x3935f3][_0x156f24],_0x491dd9[_0x32dace*(0x9*0x3f5+0x1ecb+-0x4265)+(0x235f*-0x1+0x3*-0xa4c+0x4245)]=_0xa6d28c[_0x32dace+_0x3935f3*(0x3*0x653+-0x3*0x1b7+-0xdd2)][_0x156f24];let _0x8cffd0=_0x491dd9[-0x179c*0x1+-0xcf6+0x1f*0x12e];for(let _0x10c803=0x1bc9+0x217c+-0x3d44;_0x10c803<_0x3935f3*(-0x10ff+-0x12b5*-0x2+0x8*-0x28d);++_0x10c803)_0x8cffd0=Math['max'](_0x8cffd0,Math['abs'](_0x491dd9[_0x10c803]));if(_0x8cffd0!==-0xb*0x97+0xe9*-0x1b+0x1f10){for(let _0x2e5c71=0x1b59+0x1*0xc92+0xb*-0x3a1;_0x2e5c71<_0x3935f3;++_0x2e5c71)_0x491dd9[_0x2e5c71*(-0x94a+0x13a9+-0xa5c)+(-0xb6*0x26+-0xa9*-0x7+0x75*0x31)]=Math['max'](-0x233+-0xc68+0xe9b,Math['min'](_0x1324b6,Math['floor']((_0x491dd9[_0x2e5c71*(-0x144b+0x13f0+0x5e)+(-0x719*-0x5+-0x13f*0x1+-0x2*0x111f)]/_0x8cffd0*(-0xae4+-0x25*0xc1+0x26c9+0.5)+(-0x9*-0x3ee+-0x88a+-0x1ad4+0.5))*_0x1324b6+(-0x1*0x264b+0x1*0x1dbb+0x2*0x448+0.5)))),_0x491dd9[_0x2e5c71*(-0x178f+0xd8a+0xa08)+(0x79f+-0x1e*0xf5+0x1518)]=Math['max'](0x864+-0x173+0x1*-0x6f1,Math['min'](_0x3ce8cc,Math['floor']((_0x491dd9[_0x2e5c71*(-0xc18+-0x1*0x218c+0x2da7)+(-0x1*-0x11c3+-0x1cc6+0xb04)]/_0x8cffd0*(0x19fe+0x1265*-0x2+0xacc+0.5)+(-0x1bb*-0xd+-0x16ab+0x2c+0.5))*_0x3ce8cc+(-0x4f*-0x26+-0x8b8*0x1+-0x302+0.5)))),_0x491dd9[_0x2e5c71*(0xcf*0x2+0x13a5+-0x1540)+(-0x1db5+-0x11a9+-0xbd8*-0x4)]=Math['max'](-0xcd7*-0x1+-0x2*-0xa1f+0x9*-0x3ad,Math['min'](_0x1324b6,Math['floor']((_0x491dd9[_0x2e5c71*(-0x1915+0xa3e+-0x1*-0xeda)+(0x1718*0x1+0x11*-0x39+-0x134d)]/_0x8cffd0*(-0x10a9+-0x1357+0x2400+0.5)+(0x2669*0x1+-0x14e*-0x4+-0x2ba1+0.5))*_0x1324b6+(0x1adf+-0x12e*0x4+-0x35*0x6b+0.5))));_0x5788f9[-0xf84+-0x25de+0x3562]=_0x8cffd0,_0x59de14[_0x156f24*(0x214+-0x254b*0x1+0x233b)+(0x75b+0x1652+0x1*-0x1dad)]=_0x57be1b[-0x4*-0x8f7+0x313*-0xb+-0x1*0x20b],_0x59de14[_0x156f24*(-0x1fa6+-0x1*-0x2286+-0x2dc)+(-0x1e55+0x1b3a+0x31c)]=_0x491dd9[-0x2607+0xe5c+0x1*0x17ab]<<0x2612+0x5*-0x789+-0x50|_0x491dd9[0xecf+0x197e+-0x284c]<<0x2138+0xcab+-0x2dd8|_0x491dd9[-0xf1a+-0x1*-0x236+0xce6],_0x59de14[_0x156f24*(-0xac9+-0x2ab*0x4+0x1579)+(-0xe14+0x1*0x1be9+0x1*-0xdd3)]=_0x491dd9[-0xc*0x89+-0x18e6+0x1f55]<<-0xe*-0x18e+0x1cc1+0x18*-0x21a|_0x491dd9[0x17cf+-0x26ad+0xee2]<<0x25bd+-0x8dc+-0x1cd6|_0x491dd9[0x25*-0x75+-0x14d2+-0x12e*-0x20],_0x59de14[_0x156f24*(-0x25cd+0x766+0x1e6b)+(-0x2*0xc89+0x1*0x437+0x14de)]=_0x491dd9[0xd*-0x19b+0x11*-0x182+-0x115*-0x2b]<<-0x2442+0x1*0x1a2f+0xa28|_0x491dd9[-0xc15+0x2*-0xbdc+-0x1*-0x23d4]<<0x13*0x1e9+0x7a*0x16+-0x3e5*0xc|_0x491dd9[0x2287*0x1+0x46*0x46+-0x35a3],_0x26bb23>0x2ee+0x2*-0x1c6+0x9f&&(_0x3a6400[_0x156f24*(-0x3*-0x72f+-0x70a+-0xe7f)+(-0xa21*0x1+-0x56*0x6+0xc25)]=_0x491dd9[-0x2550+-0x1c6e+-0x74f*-0x9]<<0x215e+0x48*-0x6e+-0x259|_0x491dd9[0x161+0x1d*0x155+-0x27f8]<<-0x15d6+0x1d*-0xa0+0x2801|_0x491dd9[0x2b*-0x4f+-0x26b7+0x3407*0x1],_0x3a6400[_0x156f24*(0x145*-0x14+0x2322+-0x9ba)+(0x8d5+-0x53*-0x3e+-0x1cee)]=_0x491dd9[0x9*0x5+-0x1feb*-0x1+0x1c*-0x125]<<-0x7d3+0x4e*0x50+-0x1f*0x88|_0x491dd9[-0x1*-0x4f1+-0x2*0xfcb+-0x1*-0x1ab2]<<-0xcb3+-0x124*0xb+-0x1a*-0xf9|_0x491dd9[-0x1a7*-0x1+0xe3a+-0xfd3*0x1],_0x3a6400[_0x156f24*(0x194e+0xbb9+-0x2503)+(0xc30+-0x269e*-0x1+-0x32cc)]=_0x491dd9[-0xd6e*0x1+-0x101*-0x20+-0x12a3]<<-0x2*-0x382+0x4*-0x36d+-0x6c5*-0x1|_0x491dd9[0x73f*-0x2+-0x1c4c+0x2ada]<<-0x15ae+0x21*-0x20+0x19d9|_0x491dd9[0x11ae+-0x175d+0x5c0],_0x3a6400[_0x156f24*(-0x1e94+0x67*-0x30+0x2*0x18f4)+(-0x3d*-0x91+-0x5*-0x412+0x2*-0x1b72)]=_0x491dd9[-0x127+-0xe7d*-0x2+-0x1bc1]<<0x1511+0x470+-0x65b*0x4|_0x491dd9[-0x76*-0x34+0x16e1+-0x1*0x2ec6]<<0x157c+-0x849+-0xd28|_0x491dd9[0x1d*-0x8b+0x161*0xd+-0x21a],_0x26bb23>0x1eac+0x2*-0x101+-0x1ca8?(_0xeee9f2[_0x156f24*(0x1*0x1872+-0x13b9+-0x4b5)+(-0x19b1*0x1+-0x250+0x1c01)]=_0x491dd9[0x958+-0x17c6*0x1+0xe83]<<-0x8e8+0x26b8+-0x81*0x3b|_0x491dd9[0x1*0x7d5+-0x5fc+-0x1c3]<<0x9*-0x112+-0x3dd*0xa+0x95*0x53|_0x491dd9[-0xc61+-0x8b+0xd03],_0xeee9f2[_0x156f24*(-0x2054+0xc5b+-0x12d*-0x11)+(0x2c0*-0x4+-0x23b*-0x10+0x18af*-0x1)]=_0x491dd9[-0x6f6+0x1267*0x1+0x7*-0x19f]<<-0xfb1+-0x2e7*-0xd+-0x15f5|_0x491dd9[-0x1a8c+0xd9a+0xd0b*0x1]<<0x233a+-0x13fd+-0xf32|_0x491dd9[-0x7c4+-0x1*0x1f9d+-0x3*-0xd29],_0xeee9f2[_0x156f24*(0x39a*-0x8+-0x117*0x11+0x3*0xfc9)+(0x1be*0xa+-0x72*-0x38+0x116*-0x27)]=_0x491dd9[0x6fb*-0x2+0x64+0x185*0x9]<<0x9e6+0x1*0x202d+-0x29fe|_0x491dd9[-0x23dd+0x35*-0xa3+-0x22dc*-0x2]<<-0x25cc+-0x2da*-0x4+0x1a6f*0x1|_0x491dd9[-0x81*0x48+-0xe71+-0x10f2*-0x3],_0xeee9f2[_0x156f24*(-0x83+0x11e0*-0x2+0x2447*0x1)+(0x349+0x1079+-0x13bf)]=_0x491dd9[-0xf90+-0x1be3+0x2b91]<<-0x2160+0x202c+0x149|_0x491dd9[-0x1f2a+0x72*-0x4f+0x5*0xd4b]<<0x10c1+-0x175*0x1a+0x152c|_0x491dd9[-0x15c+-0x1*-0x1e9e+-0x1d22],_0x2b0560[_0x156f24*(0x1de1*0x1+0x1017*0x1+-0x22*0x15a)+(-0x1ec7*-0x1+-0x16f5+-0x5b*0x16)]=_0x491dd9[0x95e+-0x324+-0x619]<<-0x2042*0x1+0x800+0x81d*0x3|_0x491dd9[0x1f38*-0x1+-0x1*-0x176+0x4*0x779]<<-0x4*-0x43f+-0x14c0+0x4b*0xd|_0x491dd9[-0x621+-0x19b7+0x1ffb],_0x2b0560[_0x156f24*(-0x29*-0x67+0x1*0x22fa+0x1127*-0x3)+(-0xe7b+0x13*0xc5+-0x23)]=_0x491dd9[0x1a5a*-0x1+0xc1*-0x5+-0x7f*-0x3d]<<0x1c21+0x18d3+-0xa93*0x5|_0x491dd9[0x1d*-0x151+0x1*0x19b7+0xc9b]<<-0x7*0x42b+0x5*0x97+-0x5*-0x541|_0x491dd9[0xbf9+0x4*-0x15b+-0x667],_0x2b0560[_0x156f24*(0x1*0x16ed+-0x1dd3+0x6ea)+(0x108a+-0x857+-0x9*0xe9)]=_0x491dd9[0x252*-0x1+-0x265*-0xe+-0x1f0d]<<0x21e9*0x1+-0xeff+-0x12d5*0x1|_0x491dd9[-0x3*0x14b+-0x202f*0x1+0x2438]<<-0x13f3+0x1*-0xf19+0x2317|_0x491dd9[0x1849+-0x1c99*0x1+0x479],_0x2b0560[_0x156f24*(-0x512+-0x2174+0x268a)+(-0x2fe+-0x335*0xa+0xbb1*0x3)]=_0x491dd9[0xf28+0x27*0x4a+-0x1a44]<<-0x13e3+0x1785+0x3*-0x12f|_0x491dd9[0x1be5+-0x2*0xc47+0x7*-0x74]<<-0x11*-0xd+-0x219c+-0xaee*-0x3|_0x491dd9[0x224c+-0x6d8+-0x1b48]):_0xeee9f2[_0x156f24]=_0x491dd9[0xfa1+0x10f6+-0x2082]<<0x137b*0x2+0x2*-0x137d+0x19|_0x491dd9[0x239*-0x5+0x24ba*-0x1+0x1*0x2fed]<<0x1761+0x4f*0x43+-0x2c03|_0x491dd9[-0x259*-0x3+0xda4+-0x1498]);}}return{'sh1to3Data':_0x59de14,'sh4to7Data':_0x3a6400,'sh8to11Data':_0xeee9f2,'sh12to15Data':_0x2b0560};},_0x1a7a2e=_0x17d22f=>{if(!_0x1029d8['time_index'])return;const _0xd71bea=_0x1029d8['time_index']['findIndex'](_0x11430c=>_0x11430c===_0x17d22f);let _0x2a5b0e=_0x1029d8['time_index']['findIndex']((_0x286ea0,_0x2a4548)=>_0x286ea0!==_0x17d22f&&_0x2a4548>_0xd71bea);if(_0x2a5b0e===-(0x1f*-0x1+0x10d3*-0x1+0x10f3)&&_0xd71bea===-(-0x125c+-0x17f3+0x2a50))return;_0x2a5b0e===-(-0x1*0xf7b+-0x2663+0x35df*0x1)&&_0xd71bea!==-(0x978+0x1ce9*0x1+-0x2660)&&(_0x2a5b0e=_0x1029d8['time_index']['length']),_0x52448f-=_0x2a5b0e-_0xd71bea;const _0x2f4e15=Object['keys'](_0x1029d8);for(let _0x50337b=0x95*0x10+-0x19b+-0x7b5;_0x50337b<_0x2f4e15['length'];_0x50337b++){const _0x385f9f=_0x2f4e15[_0x50337b],_0x430e19=_0x1029d8[_0x385f9f];if(_0x430e19){const _0x4f2e2d=new Float32Array(_0x52448f);_0xd71bea>0x1*0xac+0xcbb+0x49*-0x2f?(_0x4f2e2d['set'](_0x430e19['subarray'](0x718*-0x3+-0xb3*-0x2+0x13e2,_0xd71bea),0x1d68+0x1e5c+-0x22*0x1c2),_0x4f2e2d['set'](_0x430e19['subarray'](_0x2a5b0e),_0xd71bea)):_0x4f2e2d['set'](_0x430e19['subarray'](_0x2a5b0e),-0xda1*-0x2+-0x509+-0x1639),_0x1029d8[_0x385f9f]=_0x4f2e2d;}}},_0x4cc4c2=()=>{const _0x57a653=Object['keys'](_0x1029d8);for(let _0x3a5733=-0x59*-0x1f+-0x2aa*0x2+-0x573;_0x3a5733<_0x57a653['length'];_0x3a5733++){const _0x2167ae=_0x57a653[_0x3a5733];_0x1029d8[_0x2167ae]&&(_0x1029d8[_0x2167ae]=[]);}},_0x3e4a3e=()=>{_0x1029d8={},_0x52448f=0xb56*0x2+0x1*0x1343+0x5*-0x863;};}class YA extends me{constructor(){super(),this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+jA['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'})));}async['appendGSpl'+'atData'](_0x8fd19e,_0xd2854,_0x125a8f,_0x604a6d=!(0xdd6+-0x5*-0x29+-0x1*0xea2)){var _0x50907c,_0x41ce4d;const _0x1b1149={};return _0x8fd19e['elements'][-0x4eb+-0x3fe+0x1*0x8e9]['properties']['forEach'](_0x599aba=>{_0x1b1149[_0x599aba['name']]=_0x599aba['storage'];}),_0x604a6d?(_0x50907c=this['worker'])==null||_0x50907c['postMessag'+'e']({'type':'appendGSpl'+'atData','properties':_0x1b1149,'timeIndex':_0xd2854,'timeOption':_0x125a8f},_0x8fd19e['elements'][0x52*0x31+-0x1ff0*-0x1+-0x2fa2]['properties']['map'](_0x51ea26=>_0x51ea26['storage']['buffer'])):(_0x41ce4d=this['worker'])==null||_0x41ce4d['postMessag'+'e']({'type':'appendGSpl'+'atData','properties':_0x1b1149,'timeIndex':_0xd2854,'timeOption':_0x125a8f}),new Promise(_0x3663aa=>{this['worker']['onmessage']=_0x4a7f8=>{if(!this['worker'])return;const {data:_0x509181}=_0x4a7f8;_0x509181['type']==='newAppendD'+'ata'&&_0x3663aa(_0x509181);};});}async['releaseSeq'+'Data'](_0x19c1c7){var _0x781a1b;(_0x781a1b=this['worker'])==null||_0x781a1b['postMessag'+'e']({'type':'releaseSeq'+'Data','index':_0x19c1c7});}async['releaseAll'+'SeqData'](){var _0x4fa982;(_0x4fa982=this['worker'])==null||_0x4fa982['postMessag'+'e']({'type':'releaseAll'+'SeqData'});}['destroy'](){var _0x50d44d;this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),(_0x50d44d=this['worker'])==null||_0x50d44d['terminate'](),this['worker']=null);}}const za=new te(),pg=new le(),yf=new De(),mg=new De(),KA=new ie(0x1*-0x2147+0x1107+0x1041,0x1ed6+0x12ab*-0x1+-0xc2a,-0x125*0x13+-0x176a+0x2d29,-0x1*0x193f+-0x1742+0x3081+0.4),vf=0x712+0x4d3*-0x5+0x110d+0.28209479177387814,xf=-0x44*-0x10fd+0x5*-0x3ca7+-0x46b1;let ZA=class{constructor(_0x17054f,_0x1aba21,_0x4464e2,_0x2db3c8,_0x429216,_0x1189bc){const _0x5c93a0=_0x17054f['getProp']('x'),_0x5e0188=_0x17054f['getProp']('y'),_0x3732aa=_0x17054f['getProp']('z'),_0x402dd2=_0x17054f['getProp']('rot_1'),_0x4e91a2=_0x17054f['getProp']('rot_2'),_0xa8661c=_0x17054f['getProp']('rot_3'),_0x2a0c8f=_0x17054f['getProp']('rot_0'),_0x539518=_0x17054f['getProp']('motion_0'),_0x13f438=_0x17054f['getProp']('motion_1'),_0x247203=_0x17054f['getProp']('motion_2'),_0x1f33c6=_0x17054f['getProp']('scale_0'),_0x102391=_0x17054f['getProp']('scale_1'),_0x1a351b=_0x17054f['getProp']('scale_2'),_0x17708b=_0x17054f['getProp']('f_dc_0'),_0x2dd98d=_0x17054f['getProp']('f_dc_1'),_0xc80810=_0x17054f['getProp']('f_dc_2'),_0x365fa6=_0x17054f['getProp']('opacity');this['read']=_0x429d61=>{_0x1aba21&&(_0x1aba21['x']=_0x5c93a0[_0x429d61],_0x1aba21['y']=_0x5e0188[_0x429d61],_0x1aba21['z']=_0x3732aa[_0x429d61]),_0x4464e2&&_0x4464e2['set'](_0x402dd2[_0x429d61],_0x4e91a2[_0x429d61],_0xa8661c[_0x429d61],_0x2a0c8f[_0x429d61]),_0x2db3c8&&_0x2db3c8['set'](Math['exp'](_0x1f33c6[_0x429d61]),Math['exp'](_0x102391[_0x429d61]),Math['exp'](_0x1a351b[_0x429d61])),_0x1189bc&&_0x539518&&_0x1189bc['set'](_0x539518[_0x429d61],_0x13f438[_0x429d61],_0x247203[_0x429d61]),_0x429216&&_0x429216['set'](-0xd*-0x1fb+0x2650*-0x1+-0x1*-0xc91+0.5+_0x17708b[_0x429d61]*vf,0x11fc*-0x2+0x7*0x43a+-0x331*-0x2+0.5+_0x2dd98d[_0x429d61]*vf,-0x74a+0x1f*0xb9+0x49*-0x35+0.5+_0xc80810[_0x429d61]*vf,_0x365fa6[_0x429d61]);};}};const _g=(_0x819fd0,_0x4ec3f3,_0x4df760)=>{pg['set'](_0x4df760['x'],_0x4df760['y'],_0x4df760['z'],_0x4df760['w'])['normalize'](),_0x819fd0['setTRS'](_0x4ec3f3,pg,D['ONE']);};class qn{constructor(_0x59bb79,_0x3a3649=[]){h(this,'elements'),h(this,'numSplats',-0x1*-0x139+0x1b95*-0x1+0x2*0xd2e),h(this,'comments'),h(this,'is4D'),h(this,'dataWorker'),h(this,'destroy',()=>{var _0x270ed6;(_0x270ed6=this['dataWorker'])==null||_0x270ed6['destroy'](),this['dataWorker']=null;});var _0xa078b2,_0x28c238,_0x144a69;this['elements']=_0x59bb79,this['numSplats']=((_0xa078b2=this['getElement']('vertex'))==null?void(-0x1*0x1756+-0x11*0x123+0x2aa9*0x1):_0xa078b2['count'])??-0x225c+-0x1*0x513+0x276f,this['comments']=_0x3a3649,this['is4D']=!!((_0x144a69=(_0x28c238=this['getElement']('vertex'))==null?void(-0xcb6+0x1242+-0x58c):_0x28c238['properties']['find'](_0xd0e0ef=>_0xd0e0ef['name']==='t'))!=null&&_0x144a69['storage']);}async['appendGSpl'+'atData'](_0x380a26,_0x20f863,_0xa1b68c){var _0x27ec4b;let _0x3ae61a=-0x16cb+-0x1378+0x2a43*0x1;for(let _0x63174a=-0x620+-0x983+0xfa3;_0x63174a<_0xa1b68c['length']&&_0x20f863>_0xa1b68c[_0x63174a];_0x63174a+=0x11d5+0x95*-0xd+-0xa42)_0x3ae61a=_0x63174a/(-0x1883*-0x1+-0xfd6+0x13d*-0x7);console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatData'+'\x20appendGSp'+'latData',_0x3ae61a),this['dataWorker']||(this['dataWorker']=new YA(),await this['dataWorker']['appendGSpl'+'atData'](this,-0xd2f*0x1+0x17*-0xdb+0x57a*0x6,_0xa1b68c));const _0x5a8122=this['getElement']('vertex');_0x5a8122&&(_0x5a8122['count']=this['numSplats']);const _0x5a0a7c=await this['dataWorker']['appendGSpl'+'atData'](_0x380a26,_0x3ae61a,_0xa1b68c,!(-0x53*0x45+0x139f*-0x1+0x29fe)),_0x3d6575=_0x5a0a7c['properties'],_0x2c8d1d=((_0x27ec4b=this['getElement']('vertex'))==null?void(-0x2510+0x4fd*-0x1+0x2a0d):_0x27ec4b['properties'])??[];for(const _0x1d255e in _0x3d6575){const _0x5aade8=_0x2c8d1d['find'](_0x79ca9c=>_0x79ca9c['name']===_0x1d255e);_0x5aade8?_0x5aade8['storage']=_0x3d6575[_0x1d255e]:_0x2c8d1d['push']({'type':'float','name':_0x1d255e,'storage':_0x3d6575[_0x1d255e],'byteSize':0x4});}this['transformD'+'ata']=_0x5a0a7c['transformD'+'ata'],this['numSplats']=_0x3d6575['x']['length'],console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatData'+'\x20appendGSp'+'latData\x20nu'+'mSplats',this['numSplats']);}async['releaseSeq'+'Data'](_0x194932){return console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatData'+'\x20releaseSe'+'qData',_0x194932),this['dataWorker']['releaseSeq'+'Data'](_0x194932),this;}async['releaseAll'+'SeqData'](){var _0x4eec92;return console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatData'+'\x20release\x20a'+'ll\x20SeqData'),(_0x4eec92=this['dataWorker'])==null||_0x4eec92['releaseAll'+'SeqData'](),this;}static['calcSplatA'+'abb'](_0x450ec9,_0x4c6289,_0x574259,_0x3babed){_g(za,_0x4c6289,_0x574259),yf['center']['set'](0xcdb+-0x22*-0xa3+-0x2281*0x1,0x1b06+-0xef*0x11+0x1*-0xb27,-0x90d*-0x1+-0xcc4+0x3b7),yf['halfExtent'+'s']['set'](_0x3babed['x']*(-0x6a9*-0x5+-0x2017+-0x134),_0x3babed['y']*(0x94a+0x7*0x3e1+-0x3*0xc25),_0x3babed['z']*(-0x997*0x2+0x1f7f+0x89*-0x17)),_0x450ec9['setFromTra'+'nsformedAa'+'bb'](yf,za);}['getProp'](_0x1aa703,_0x5e5406='vertex'){var _0x3bde54,_0x2a2940;return(_0x2a2940=(_0x3bde54=this['getElement'](_0x5e5406))==null?void(-0x13b9+0x2058+0x435*-0x3):_0x3bde54['properties']['find'](_0x3391a3=>_0x3391a3['name']===_0x1aa703))==null?void(0x265f+-0x245+-0x241a):_0x2a2940['storage'];}['getElement'](_0x4eb4ed){return this['elements']['find'](_0x2fa014=>_0x2fa014['name']===_0x4eb4ed);}['addProp'](_0x4ce175,_0x40ebef){this['getElement']('vertex')['properties']['push']({'type':'float','name':_0x4ce175,'storage':_0x40ebef,'byteSize':0x4});}['createIter'](_0x47efe8,_0x1e4c94,_0x1ffc6e,_0x98cd91,_0x3cf98f){return new ZA(this,_0x47efe8,_0x1e4c94,_0x1ffc6e,_0x98cd91,_0x3cf98f);}async['calcAabbAs'+'ync'](_0x372e03,_0x32b4e6){var _0x1615fb,_0x3e67f7;if((_0x1615fb=this['transformD'+'ata'])!=null&&_0x1615fb['center']&&((_0x3e67f7=this['transformD'+'ata'])!=null&&_0x3e67f7['halfExtent'+'s'])){_0x372e03['center']['set'](this['transformD'+'ata']['center'][0x29*0xd3+0xd76*-0x2+-0x6df],this['transformD'+'ata']['center'][-0x83*-0x35+0x4*-0x496+-0x8c6],this['transformD'+'ata']['center'][0x1981+0xf5*-0x1f+0x6*0xb2]),_0x372e03['halfExtent'+'s']['set'](this['transformD'+'ata']['halfExtent'+'s'][-0x1c*-0x2a+-0xf6*-0x1b+-0x1e8a],this['transformD'+'ata']['halfExtent'+'s'][-0x95b+-0x180*0x16+0x2a5c],this['transformD'+'ata']['halfExtent'+'s'][0x124a+0x9*0x1c6+-0x223e]);return;}const _0x4b1174=this['getProp']('x'),_0xdb9c64=this['getProp']('y'),_0x59d0b1=this['getProp']('z'),_0x26d1c4=this['getProp']('scale_0'),_0x2e3f9e=this['getProp']('scale_1'),_0xaeca9=this['getProp']('scale_2'),_0x1544b4=await(_0x32b4e6==null?void(-0x14*0xc8+-0x3e3+-0x14d*-0xf):_0x32b4e6['calcAabb'](this['numSplats'],_0x4b1174,_0xdb9c64,_0x59d0b1,_0x26d1c4,_0x2e3f9e,_0xaeca9));_0x372e03['center']['set'](_0x1544b4['center'][-0x1096+0x18b*-0xe+0x2630],_0x1544b4['center'][-0x44f*0x3+-0x4ca+0x11b8],_0x1544b4['center'][0x258b+-0x224*0x10+0x1d*-0x1d]),_0x372e03['halfExtent'+'s']['set'](_0x1544b4['halfExtent'+'s'][-0x49*0x1d+-0x1f*0xac+0x1d19],_0x1544b4['halfExtent'+'s'][0x20b9*0x1+-0x818*0x1+-0x18a0],_0x1544b4['halfExtent'+'s'][0x13d*-0x10+-0x643+0xb*0x25f]);}['calcAabb'](_0x363d52,_0x506152){let _0x3fedad,_0x10af84,_0x5009d6,_0x35b714,_0x3c2b6f,_0xd0e392,_0xe8ed56=!(-0x265f*-0x1+0xb1b+0x107e*-0x3);const _0xca8e01=this['getProp']('x'),_0x1f1f55=this['getProp']('y'),_0x8ffb54=this['getProp']('z'),_0x4f5d6a=this['getProp']('scale_0'),_0x1da896=this['getProp']('scale_1'),_0x5a7f71=this['getProp']('scale_2');for(let _0x5bc380=-0x4e5+-0x13d+0x622;_0x5bc380<this['numSplats'];++_0x5bc380){if(_0x506152&&!_0x506152(_0x5bc380))continue;const _0x223c3c=_0xca8e01[_0x5bc380],_0x3eb419=_0x1f1f55[_0x5bc380],_0xb0b1c1=_0x8ffb54[_0x5bc380],_0x22427f=Math['max'](_0x4f5d6a[_0x5bc380],_0x1da896[_0x5bc380],_0x5a7f71[_0x5bc380]);if(!isFinite(_0x223c3c)||!isFinite(_0x3eb419)||!isFinite(_0xb0b1c1)||!isFinite(_0x22427f))continue;const _0x33e4b2=(0x959+-0x9*-0x211+-0x1bf0)*Math['exp'](_0x22427f);_0xe8ed56?(_0xe8ed56=!(-0xa28+-0x1*-0x257a+-0x6f*0x3f),_0x3fedad=_0x223c3c-_0x33e4b2,_0x10af84=_0x3eb419-_0x33e4b2,_0x5009d6=_0xb0b1c1-_0x33e4b2,_0x35b714=_0x223c3c+_0x33e4b2,_0x3c2b6f=_0x3eb419+_0x33e4b2,_0xd0e392=_0xb0b1c1+_0x33e4b2):(_0x3fedad=Math['min'](_0x3fedad,_0x223c3c-_0x33e4b2),_0x10af84=Math['min'](_0x10af84,_0x3eb419-_0x33e4b2),_0x5009d6=Math['min'](_0x5009d6,_0xb0b1c1-_0x33e4b2),_0x35b714=Math['max'](_0x35b714,_0x223c3c+_0x33e4b2),_0x3c2b6f=Math['max'](_0x3c2b6f,_0x3eb419+_0x33e4b2),_0xd0e392=Math['max'](_0xd0e392,_0xb0b1c1+_0x33e4b2));}return _0xe8ed56||(_0x363d52['center']['set']((_0x3fedad+_0x35b714)*(0x1ca*0x12+0xd*0x28d+-0x241*0x1d+0.5),(_0x10af84+_0x3c2b6f)*(-0x10eb+-0x1*-0x1311+-0x226+0.5),(_0x5009d6+_0xd0e392)*(-0x1b53+0x1d*-0x61+-0x1*-0x2650+0.5)),_0x363d52['halfExtent'+'s']['set']((_0x35b714-_0x3fedad)*(-0x44b*0x4+0x501+0xc2b+0.5),(_0x3c2b6f-_0x10af84)*(0x2b4*-0x4+-0x43*-0x43+0x6b9*-0x1+0.5),(_0xd0e392-_0x5009d6)*(-0x1652+-0x5*-0x7b4+-0x1032+0.5))),!_0xe8ed56;}['yieldToMai'+'n'](){var _0x54f9d5;return(_0x54f9d5=globalThis['scheduler'])!=null&&_0x54f9d5['yield']?globalThis['scheduler']['yield']():new Promise(_0x403fb9=>{setTimeout(_0x403fb9,-0x1960*-0x1+-0xe1+-0x187f);});}['calcAabbEx'+'act'](_0x1c576f,_0x1b38e3){const _0x5d40cf=new D(),_0x5a5da7=new le(),_0x49f792=new D(),_0x3fb04e=this['createIter'](_0x5d40cf,_0x5a5da7,_0x49f792);let _0x4b982e=!(-0x1597+0xdf+-0xcc*-0x1a);for(let _0x123ea0=0x83a+0x183c+0x103b*-0x2;_0x123ea0<this['numSplats'];++_0x123ea0)_0x1b38e3&&!_0x1b38e3(_0x123ea0)||(_0x3fb04e['read'](_0x123ea0),_0x4b982e?(_0x4b982e=!(0x1c2a+0x1e2+-0x1e0b*0x1),qn['calcSplatA'+'abb'](_0x1c576f,_0x5d40cf,_0x5a5da7,_0x49f792)):(qn['calcSplatA'+'abb'](mg,_0x5d40cf,_0x5a5da7,_0x49f792),_0x1c576f['add'](mg)));return!_0x4b982e;}async['getCenters'](_0x1bffef){const _0x4e7f27=this['getProp']('x'),_0x1eb28e=this['getProp']('y'),_0x1c275d=this['getProp']('z');for(let _0x102f66=-0x3e5*0xa+0x18a7+0xe4b;_0x102f66<this['numSplats'];++_0x102f66)_0x1bffef[_0x102f66*(-0x2227+0x119a+0x28*0x6a)+(0x21af*-0x1+-0x187f*-0x1+0x930)]=_0x4e7f27[_0x102f66],_0x1bffef[_0x102f66*(-0x26b3+0x3*0x528+0xb9f*0x2)+(0x1c31+-0x50*0x55+0x4*-0x68)]=_0x1eb28e[_0x102f66],_0x1bffef[_0x102f66*(-0x78d*0x1+0x23c9*-0x1+0x2b59)+(-0x196b+0x1*0x477+0x14f6)]=_0x1c275d[_0x102f66],_0x102f66%xf===-0x1786*0x1+0x1525+-0x1d*-0x15&&await this['yieldToMai'+'n']();}async['getMuT'](){var _0x1048d9;if((_0x1048d9=this['transformD'+'ata'])!=null&&_0x1048d9['muT'])return this['transformD'+'ata']['muT'];const _0x430085=this['getProp']('t');return _0x430085?new Float32Array(_0x430085):void(-0x23f4+-0x23ef*-0x1+0x5);}async['getTScale'](){const _0x268817=this['getProp']('t_scale');if(!_0x268817)return;const _0x43f1e6=new Float32Array(this['numSplats']);for(let _0x55ffbe=-0x29*-0x4b+0x1699+0x4*-0x8a7;_0x55ffbe<this['numSplats'];++_0x55ffbe)_0x43f1e6[_0x55ffbe]=Math['exp'](_0x268817[_0x55ffbe]),_0x55ffbe%xf===-0x21a8+-0x664*0x1+0x2c*0xe9&&await this['yieldToMai'+'n']();return _0x43f1e6;}async['getMotion'](_0x330350){const _0x5d5be6=this['getProp']('motion_0'),_0x258d38=this['getProp']('motion_1'),_0x5f2098=this['getProp']('motion_2');if(!(!_0x5d5be6||!_0x258d38||!_0x5f2098)){for(let _0x4459a3=-0xf7a+0x1*0x214f+-0x19f*0xb;_0x4459a3<this['numSplats'];++_0x4459a3)_0x330350[_0x4459a3*(0xbcc*-0x2+0x196f+-0x75*0x4)+(-0x21b1+0x1f4b+0x266)]=_0x5d5be6[_0x4459a3],_0x330350[_0x4459a3*(0x1*0x33b+-0x283*0xf+0x2275*0x1)+(-0x499+0x1b86+0xb76*-0x2)]=_0x258d38[_0x4459a3],_0x330350[_0x4459a3*(0x2232+0x1*-0x153+-0x20dc)+(-0x10e1+-0x2*0xa03+0x24e9)]=_0x5f2098[_0x4459a3],_0x4459a3%xf===-0x40*-0x92+0xf1*0x4+-0x2844&&await this['yieldToMai'+'n']();}}['getTimeInd'+'ex'](){var _0x39ac61;if((_0x39ac61=this['transformD'+'ata'])!=null&&_0x39ac61['timeIndex'])return this['transformD'+'ata']['timeIndex'];const _0x53c21b=this['getProp']('time_index');if(_0x53c21b)return new Float32Array(_0x53c21b);}['calcFocalP'+'oint'](_0x2bda84,_0xbecc38){const _0x101bc9=this['getProp']('x'),_0x1838ce=this['getProp']('y'),_0x1db8c0=this['getProp']('z'),_0x4b8eda=this['getProp']('scale_0'),_0x18840c=this['getProp']('scale_1'),_0x56f2e7=this['getProp']('scale_2');_0x2bda84['x']=0x40a+-0xecb*-0x1+0x3*-0x647,_0x2bda84['y']=-0x192f+0x1247+0x44*0x1a,_0x2bda84['z']=-0x270a+0x1*0x20b9+-0x1*-0x651;let _0x5f2eb1=0x671+0x99a+-0x3*0x559;for(let _0x593b4e=0x16fc*0x1+-0x1722+-0x2*-0x13;_0x593b4e<this['numSplats'];++_0x593b4e){if(_0xbecc38&&!_0xbecc38(_0x593b4e))continue;const _0x2668f0=_0x101bc9[_0x593b4e],_0x43f570=_0x1838ce[_0x593b4e],_0x23b2f9=_0x1db8c0[_0x593b4e];if(!isFinite(_0x2668f0)||!isFinite(_0x43f570)||!isFinite(_0x23b2f9))continue;const _0x4eb537=(-0x4*0x476+-0x92b*0x2+0x242f)/(0x5d5*0x5+-0x1*0x180f+-0xf*0x57+Math['exp'](Math['max'](_0x4b8eda[_0x593b4e],_0x18840c[_0x593b4e],_0x56f2e7[_0x593b4e])));_0x2bda84['x']+=_0x2668f0*_0x4eb537,_0x2bda84['y']+=_0x43f570*_0x4eb537,_0x2bda84['z']+=_0x23b2f9*_0x4eb537,_0x5f2eb1+=_0x4eb537;}_0x2bda84['mulScalar']((0x146e*-0x1+-0x904+0x167*0x15)/_0x5f2eb1);}['renderWire'+'frameBound'+'s'](_0x5d6752,_0x38bcdc){const _0x55dbaa=new D(),_0x1d8c80=new le(),_0x2c3b83=new D(),_0x3f8db6=new D(),_0x2763a1=new D(),_0x42cbb9=this['createIter'](_0x55dbaa,_0x1d8c80,_0x2c3b83);for(let _0x59ef66=0x1efb+-0x14ab+-0xa50;_0x59ef66<this['numSplats'];++_0x59ef66)_0x42cbb9['read'](_0x59ef66),_g(za,_0x55dbaa,_0x1d8c80),za['mul2'](_0x38bcdc,za),_0x3f8db6['set'](_0x2c3b83['x']*-(0x44c+0x14e3+-0x192d),_0x2c3b83['y']*-(-0x1*-0x1f0c+-0x12b*-0x4+-0x23b6),_0x2c3b83['z']*-(0x83*-0x2f+0x1d6b*-0x1+-0x2*-0x1abd)),_0x2763a1['set'](_0x2c3b83['x']*(-0xc6c+0x3*-0x657+0x1f73),_0x2c3b83['y']*(0x2664+-0x1f6e+-0x6f4),_0x2c3b83['z']*(0xa0e+-0xd*-0x105+-0x4a9*0x5)),_0x5d6752['immediate']['drawWireAl'+'ignedBox'](_0x3f8db6,_0x2763a1,KA,!(0x94a*-0x4+0x14f6+-0x566*-0x3),_0x5d6752['defaultDra'+'wLayer'],za);}get['isCompress'+'ed'](){return!(0x8c2+0x13*0x9b+0x1*-0x1442);}get['shBands'](){return{0x9:0x1,0x18:0x2,0x2d:0x3}[((()=>{for(let _0x59b6d4=-0xc11+-0x171e*-0x1+0xb0d*-0x1;_0x59b6d4<0x242c+-0x269d+0x2*0x14f;++_0x59b6d4)if(!this['getProp']('f_rest_'+_0x59b6d4))return _0x59b6d4;return-0x41d+-0x167f*0x1+0x1ac9;})())]??-0x3*-0x1dc+0x297*0x1+0x3*-0x2b9;}['calcMorton'+'Order'](){const _0x87cbdb=_0x177ce5=>{let _0x4c8965=_0x177ce5[-0x8e*0x33+-0x1199+0x2b3*0x11],_0x52ef9c=_0x177ce5[-0x1a6+-0x1*-0x7b7+-0x611];for(let _0x3c12ab=-0x1896+-0x10aa+-0xb3*-0x3b;_0x3c12ab<_0x177ce5['length'];_0x3c12ab++)_0x177ce5[_0x3c12ab]<_0x4c8965&&(_0x4c8965=_0x177ce5[_0x3c12ab]),_0x177ce5[_0x3c12ab]>_0x52ef9c&&(_0x52ef9c=_0x177ce5[_0x3c12ab]);return{'min':_0x4c8965,'max':_0x52ef9c};},_0x21c39f=(_0x192935,_0x51f596,_0x285bfb)=>{const _0x5148e4=_0x4d5c48=>(_0x4d5c48&=-0x1ed8+0x185d+-0x6*-0x1bf,_0x4d5c48=(_0x4d5c48^_0x4d5c48<<-0x1636+0x229b+-0xc55)&0x907*0x64d41+-0x17f87edb3+0x19c1*0x1695ab,_0x4d5c48=(_0x4d5c48^_0x4d5c48<<0x1c6f+-0x1332+-0x1*0x935)&0x3594504+-0x55a21f0+-0x2a1cd*-0x1e7,_0x4d5c48=(_0x4d5c48^_0x4d5c48<<0x562+-0x2272+0x1d14)&0xad5491+-0x14e87bf+0x1*0x3ad63f1,_0x4d5c48=(_0x4d5c48^_0x4d5c48<<-0xdd*0x1f+0xea0*-0x2+0x3805)&0xb4e86ab*-0x1+-0x2*0x548317f+-0x1f037bf2*-0x1,_0x4d5c48);return(_0x5148e4(_0x285bfb)<<0x15d4+-0x185c+0x82*0x5)+(_0x5148e4(_0x51f596)<<0x1ab3+0x2b*0x43+0x797*-0x5)+_0x5148e4(_0x192935);},_0x2a8d03=this['getProp']('x'),_0x57fbde=this['getProp']('y'),_0x48e381=this['getProp']('z'),{min:_0x54fa2e,max:_0x5ab5b0}=_0x87cbdb(_0x2a8d03),{min:_0x5d96bc,max:_0x20d408}=_0x87cbdb(_0x57fbde),{min:_0x285bbc,max:_0x26ebd1}=_0x87cbdb(_0x48e381),_0x13c7be=_0x54fa2e===_0x5ab5b0?0x119a+-0x22a4+-0x885*-0x2:(0x3ab+-0x168d+0x16e2)/(_0x5ab5b0-_0x54fa2e),_0x1b633f=_0x5d96bc===_0x20d408?0xb14+0x1d59+0x286d*-0x1:(0xc3b+0x16ca+-0x1f05)/(_0x20d408-_0x5d96bc),_0x28604b=_0x285bbc===_0x26ebd1?-0x24*0x73+0x16e+0xebe:(-0x1212+0x1da2+0x58*-0x16)/(_0x26ebd1-_0x285bbc),_0x246c11=new Map();for(let _0x34b862=0x1*-0x140e+-0x1*-0x959+-0xab5*-0x1;_0x34b862<this['numSplats'];_0x34b862++){const _0x4ef153=Math['min'](0x136*-0x2+-0x23*0x115+0x2c4a,Math['floor']((_0x2a8d03[_0x34b862]-_0x54fa2e)*_0x13c7be)),_0x354bde=Math['min'](0x1ff3+0xc5*0xc+0x4a6*-0x8,Math['floor']((_0x57fbde[_0x34b862]-_0x5d96bc)*_0x1b633f)),_0x394310=Math['min'](-0x5f*-0x13+-0x1476+0x1168,Math['floor']((_0x48e381[_0x34b862]-_0x285bbc)*_0x28604b)),_0x307ce2=_0x21c39f(_0x4ef153,_0x354bde,_0x394310),_0x101166=_0x246c11['get'](_0x307ce2);_0x101166?_0x101166['push'](_0x34b862):_0x246c11['set'](_0x307ce2,[_0x34b862]);}const _0x4290d3=Array['from'](_0x246c11['keys']())['sort']((_0x49cadf,_0xcd5317)=>_0x49cadf-_0xcd5317),_0x2d5e7f=new Uint32Array(this['numSplats']);let _0x1bb823=-0xb*0x12c+-0x13ad+0x15*0x18d;for(let _0x4f7af1=-0x1e7f+-0x5d*0x17+0x26da;_0x4f7af1<_0x4290d3['length'];++_0x4f7af1){const _0x2a2734=_0x246c11['get'](_0x4290d3[_0x4f7af1]);for(let _0x13cba9=-0x2da+0x109+0xf*0x1f;_0x13cba9<_0x2a2734['length'];++_0x13cba9)_0x2d5e7f[_0x1bb823++]=_0x2a2734[_0x13cba9];}return _0x2d5e7f;}['reorder'](_0xcffbdc){const _0x3ee4a4=new Map(),_0x40b5ab=_0x2074de=>{if(_0x3ee4a4['has'](_0x2074de)){const _0x1ec27a=_0x3ee4a4['get'](_0x2074de);return _0x3ee4a4['delete'](_0x2074de),_0x1ec27a;}return new ArrayBuffer(_0x2074de);},_0x432d0d=_0x53bc46=>{_0x3ee4a4['set'](_0x53bc46['byteLength'],_0x53bc46);},_0x5c5ade=_0x38c3f2=>{const _0x25a6b0=new _0x38c3f2['constructo'+'r'](_0x40b5ab(_0x38c3f2['byteLength']));for(let _0x3258bc=0x10d2*0x2+0x2457+0x45fb*-0x1;_0x3258bc<_0xcffbdc['length'];_0x3258bc++)_0x25a6b0[_0x3258bc]=_0x38c3f2[_0xcffbdc[_0x3258bc]];return _0x432d0d(_0x38c3f2['buffer']),_0x25a6b0;};this['elements']['forEach'](_0x44ef40=>{_0x44ef40['properties']['forEach'](_0x4093bc=>{_0x4093bc['storage']&&(_0x4093bc['storage']=_0x5c5ade(_0x4093bc['storage']));});});}['reorderDat'+'a'](){this['reorder'](this['calcMorton'+'Order']());}}async function QA(){const _0x313861=new Float32Array(0x827+0x1594+0x2f9*-0xa);new Int32Array(_0x313861['buffer']);let _0x5424d9=0x1*0x4d4+0xa6*0x25+-0x22*0xd9,_0x46be23={};self['onmessage']=async _0x16fb53=>{const {data:_0x1e039e}=_0x16fb53;switch(_0x1e039e['type']){case'initWorker':break;case'appendGSpl'+'atData':_0x21ed23(_0x1e039e['properties'],_0x1e039e['timeIndex'],_0x1e039e['timeOption']);break;case'releaseSeq'+'Data':_0x492f1e(_0x1e039e['index']);break;case'releaseAll'+'SeqData':_0x480451();break;case'destroyWor'+'ker':_0x82424c();break;}};const _0x39d2e2=()=>({0x9:0x1,0x18:0x2,0x2d:0x3}[((()=>{for(let _0x3f7d3b=-0x2*0x64c+-0x2*-0x12f1+0x6*-0x437;_0x3f7d3b<0x2e*-0xb2+0x1505*-0x1+0x352e;++_0x3f7d3b)if(!_0x46be23['f_rest_'+_0x3f7d3b])return _0x3f7d3b;return 0xfa7+-0x1*-0xb38+-0x1ab2;})())]??0x67*0x1a+0x1b63+0x25d9*-0x1),_0x21ed23=(_0xed41ea,_0x4d900c,_0x56ada0)=>{var _0x445342,_0x26e213;_0x5424d9+=(((_0x445342=_0xed41ea['position'])==null?void(-0x25a3*0x1+0x45a*0x3+0xcb*0x1f):_0x445342['length'])??-0xc7*0x4+-0xd1c+0x1038)/(-0x2240+0x9e1+0x1862),console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatDeco'+'dedDataWor'+'ker\x20append'+'GSplatData'+'\x20numSplats',_0x5424d9,(((_0x26e213=_0xed41ea['position'])==null?void(-0x3*-0x9a7+0x2*-0x298+0x17c5*-0x1):_0x26e213['length'])??0x22fc+0x9a7*-0x3+0x1*-0x607)/(-0x13c3*0x1+0x1803+-0x43d));const _0xc27936=Object['keys'](_0xed41ea);for(let _0x4ef486=-0x5*-0x679+0x1*0x2315+-0x61*0xb2;_0x4ef486<_0xc27936['length'];_0x4ef486++){const _0x377a1c=_0xc27936[_0x4ef486],_0x2a27f4=_0xed41ea[_0x377a1c],_0x596127=_0x46be23[_0x377a1c]??new Float32Array(0x5*0x34b+-0x1*0x268a+-0x1613*-0x1);if(_0x2a27f4){let _0x4a27bb=null;switch(_0x377a1c){case'position':_0x4a27bb=new Float32Array(_0x5424d9*(0x41*-0x65+-0x7*-0x45d+-0x9*0x8b));break;case'color_opac'+'ity':_0x4a27bb=new Uint16Array(_0x5424d9*(0xc5b+-0x1*-0x17d+0xa*-0x162));break;case'scale':_0x4a27bb=new Uint16Array(_0x5424d9*(0x10ad+0x20*0x127+0x4d*-0xb2));break;case'motion':_0x4a27bb=new Float32Array(_0x5424d9*(0x133*0xe+-0x236*0x7+-0x14d));break;case'rotation':_0x4a27bb=new Float32Array(_0x5424d9*(0x13e9+0x189a+-0x2c80));break;default:_0x4a27bb=new Float32Array(_0x5424d9);break;}_0x4a27bb['set'](_0x596127,-0x134b+0x18cb+-0x580),_0x4a27bb['set'](_0x2a27f4,_0x596127['length']),_0x46be23[_0x377a1c]=_0x4a27bb;}}const _0x1d9283={};Object['keys'](_0x46be23)['forEach'](_0x2872b8=>{_0x2872b8==='scale'||_0x2872b8==='color_opac'+'ity'?_0x1d9283[_0x2872b8]=new Uint16Array(_0x46be23[_0x2872b8]['buffer']['slice']()):_0x1d9283[_0x2872b8]=new Float32Array(_0x46be23[_0x2872b8]['buffer']['slice']());});const _0xe3789=Object['keys'](_0x1d9283)['map'](_0x18ffca=>_0x1d9283[_0x18ffca]['buffer']),_0x4e4984=_0x8c5f55(),_0x43eb5e=Object['keys'](_0x4e4984)['map'](_0x21f7b5=>_0x4e4984[_0x21f7b5]['buffer']);self['postMessag'+'e']({'type':'newAppendD'+'ata','properties':_0x1d9283,'transformData':_0x4e4984},_0xe3789['concat'](_0x43eb5e));},_0x8c5f55=()=>{const _0x99a4fc=_0x46be23['position']['length']/(0xb15*0x2+0x15c2+-0x2be9),_0x1b6991=_0x46be23['position'],_0x353115=_0x46be23['scale'],_0x9f8826=_0x46be23['rotation'],_0x2a5e91=_0x46be23['motion'],_0x48f1c3=_0x46be23['t'],_0x976933=_0x46be23['t_scale'],_0x25eadc=_0x46be23['time_index'],_0x557f3c=_0x46be23['color_opac'+'ity'],_0x559635=(_0x48f1c3==null?void(-0x31d*-0x5+0x2042+-0xe7*0x35):_0x48f1c3['length'])>-0x1cfb+0x7eb+0x1510;let _0x5d52a3=null,_0x263a3a=null,_0x11735f=null,_0x553e36=null;_0x559635&&(_0x263a3a=new Float32Array(_0x99a4fc*(0x10d*-0x14+-0x13c4+0x3*0xd99)),_0x553e36=new Float32Array(_0x99a4fc),_0x5d52a3=new Float32Array(_0x2a5e91['buffer']['slice']()),_0x11735f=new Float32Array(_0x2a5e91['buffer']['slice']()));const _0x2545e0=new Float32Array(_0x1b6991['buffer']['slice']()),_0xfe3ff2=new Float32Array(_0x1b6991['buffer']['slice']()),_0x5085a0=new Uint16Array(_0x557f3c['buffer']['slice']()),_0x24375c=new Uint16Array(_0x353115['buffer']['slice']()),_0x294a88=new Float32Array(_0x9f8826['buffer']['slice']());for(let _0x47d63d=0x13d*-0x2+0x1501*0x1+-0x1287;_0x47d63d<_0x99a4fc;++_0x47d63d)_0x559635&&_0x263a3a&&_0x553e36&&(_0x553e36[_0x47d63d]=_0x976933?Math['exp'](_0x976933[_0x47d63d]):-0x143*0x1d+0x1*0x1e0c+0x14f*0x5,_0x263a3a[_0x47d63d*(0x2615+-0x1e2f*-0x1+-0x65*0xad)+(0x1bd7+0xf4*0x5+-0x209b)]=_0x48f1c3?_0x48f1c3[_0x47d63d]:0x1eb7+0x1ec8+-0x3d7f,_0x263a3a[_0x47d63d*(0x1409+-0x4*-0x4a7+0x17*-0x1ae)+(0x1*0x3e3+0x1279+0x1*-0x165b)]=_0x553e36[_0x47d63d]);const _0x3c1c81=_0x580c9a();let _0x2c0cf4={'dataColor':_0x5085a0,'dataCenters':_0xfe3ff2,'dataPosition':_0x2545e0,'dataScale':_0x24375c,'dataRotation':_0x294a88,..._0x3c1c81};return _0x559635&&(_0x2c0cf4={..._0x2c0cf4,'dataMotion':_0x5d52a3,'dataTime':_0x263a3a,'motion':_0x11735f,'tScaleArray':_0x553e36,'muT':new Float32Array(_0x48f1c3),'timeIndex':new Float32Array(_0x25eadc)}),_0x2c0cf4;},_0x26de92=_0x4144b7=>{const _0x1f8d3b=[];for(let _0x4f9327=0x707*-0x3+-0x11b0*-0x1+0x365;_0x4f9327<_0x4144b7;++_0x4f9327)_0x1f8d3b['push'](_0x46be23['f_rest_'+_0x4f9327]);return _0x1f8d3b;},_0x580c9a=()=>{const _0x1423ae=_0x39d2e2();if(_0x1423ae<=0x1*0x1311+0x1731+-0x6*0x70b)return{};const _0x3e67f9=_0x46be23['x']['length'],_0x549b6d=new Uint32Array(_0x3e67f9*(0xa*-0x2de+-0x1037+0x2ce7)),_0x811efc=new Uint32Array(_0x3e67f9*(0x13b+-0xc91*0x3+0x247c)),_0x512ee3=new Uint32Array(_0x3e67f9*(-0x228+0x14*0x1e8+-0x23f4)),_0x33b55f=new Uint32Array(_0x3e67f9*(0x22ce+-0x2*0x5da+-0x1716)),_0xcf3e0d={0x1:0x3,0x2:0x8,0x3:0xf}[_0x1423ae],_0x5c69a1=_0x26de92(_0xcf3e0d*(-0xe6f+0x16e+0xd04)),_0x7d231c=0x49*-0x22+-0x1f81+0x3132*0x1,_0x56954c=0xc56+0x1*-0x18d1+0x107a,_0x50bb36=new Float32Array(-0x21cc+-0x11*-0xa7+-0x792*-0x3),_0x487aea=new Uint32Array(_0x50bb36['buffer']),_0x49300a=new Array(_0xcf3e0d*(0x2073+0xe42+-0x2eb2))['fill'](-0xe*-0x4+-0x25b8+0x2580);for(let _0x151313=-0x728+0x3c0+0x6d*0x8;_0x151313<_0x3e67f9;++_0x151313){for(let _0x1efd3a=0x972+-0x6be+0x2*-0x15a;_0x1efd3a<_0xcf3e0d;++_0x1efd3a)_0x49300a[_0x1efd3a*(-0x2628+0x10ea*0x1+0x1541*0x1)]=_0x5c69a1[_0x1efd3a][_0x151313],_0x49300a[_0x1efd3a*(0x2*-0x1275+-0x91f*0x1+0x2e0c)+(-0xcfb+-0x1d7*-0xe+-0xcc6)]=_0x5c69a1[_0x1efd3a+_0xcf3e0d][_0x151313],_0x49300a[_0x1efd3a*(-0x1799+-0x111*0x9+0x2135)+(-0x1a6b*0x1+0x21c4+-0x1*0x757)]=_0x5c69a1[_0x1efd3a+_0xcf3e0d*(-0x277*-0x7+0x2*0x112b+-0x13*0x2b7)][_0x151313];let _0x43265e=_0x49300a[0x1183+0x1*-0xc71+-0xb*0x76];for(let _0x3a47a1=-0x1276+-0x82*-0x3f+-0x1*0xd87;_0x3a47a1<_0xcf3e0d*(-0x1*0x25ee+-0x4*0x515+-0x1*-0x3a45);++_0x3a47a1)_0x43265e=Math['max'](_0x43265e,Math['abs'](_0x49300a[_0x3a47a1]));if(_0x43265e!==-0xf9*-0x2+0x1786*0x1+0x32f*-0x8){for(let _0x1ec01b=0x1bd4+0x23c1+-0x3f95;_0x1ec01b<_0xcf3e0d;++_0x1ec01b)_0x49300a[_0x1ec01b*(0xa0b+-0x412+0x6d*-0xe)+(0x1ef9+-0x946+-0x15b3)]=Math['max'](-0x2*-0xc98+0x23db+-0x1459*0x3,Math['min'](_0x7d231c,Math['floor']((_0x49300a[_0x1ec01b*(-0x14*-0x12e+-0x1c40+0x4ab*0x1)+(-0x2*0xe6c+0xa59+-0x1*-0x127f)]/_0x43265e*(-0x1*0x1685+-0xabc+0x2141+0.5)+(0x1*-0x1085+0x156a+-0x4e5+0.5))*_0x7d231c+(0x2*-0x64d+0x3*0xaed+-0x142d+0.5)))),_0x49300a[_0x1ec01b*(-0xa4*0x15+-0x2b+-0x6d1*-0x2)+(-0x26a6+-0x395+0x2a3c)]=Math['max'](-0xf9e+0x25ae+-0x1610,Math['min'](_0x56954c,Math['floor']((_0x49300a[_0x1ec01b*(-0x225f+-0x1321+-0x7*-0x7a5)+(0x1d0f+0x188+-0xa32*0x3)]/_0x43265e*(-0x13*0x107+0xffa*0x1+-0x38b*-0x1+0.5)+(-0x123a*-0x1+0x5c*-0x49+0x802+0.5))*_0x56954c+(-0x15bc+-0x24e0+0x3a9c+0.5)))),_0x49300a[_0x1ec01b*(0x161c+-0x24e6+0xecd)+(-0x1*-0xdca+-0x2*-0x3a7+-0x2*0xa8b)]=Math['max'](0x99c+0x16c5+-0x2061,Math['min'](_0x7d231c,Math['floor']((_0x49300a[_0x1ec01b*(0x29*0xda+-0x2325*0x1+0x2*0x1f)+(-0x1*-0x96b+0x1*-0x579+0x70*-0x9)]/_0x43265e*(-0x78a+-0x19*0xaa+0x1824+0.5)+(0x4e*0x3f+-0x2*0x12f0+-0x957*-0x2+0.5))*_0x7d231c+(-0x3*0x30d+-0x13*-0xc7+0x2cf*-0x2+0.5))));_0x50bb36[0x1*-0x382+0x1970+-0x15ee]=_0x43265e,_0x549b6d[_0x151313*(0x103b+-0x1*0xd46+-0x1*0x2f1)+(-0x212c+0x13f5+0xd37)]=_0x487aea[0x2015+-0xcf5+0x9*-0x220],_0x549b6d[_0x151313*(-0x1af*-0xb+-0x1bb*-0x8+0x49f*-0x7)+(-0x1*0x72b+0x262e+-0x1f02)]=_0x49300a[0xe57+-0x2b8*-0x1+0x18d*-0xb]<<0x1*-0x1d14+0x17d+0x1bac|_0x49300a[-0x22ca+-0x2261+0x2296*0x2]<<0x105d+-0x2*0xf47+0x38f*0x4|_0x49300a[-0x4*0x290+-0x1d64+0x27a6],_0x549b6d[_0x151313*(0x1ccd+-0x8ca+-0x13ff*0x1)+(0x1*-0x108c+0x5*0x2ad+0x32d)]=_0x49300a[-0x1d*-0xef+-0xf5b+-0xbb5]<<0x3*0x8f5+0x17b+0x1*-0x1c45|_0x49300a[0x40*0x88+-0x26*-0xed+-0x1a*0x2a9]<<0x771+-0x48b*-0x2+-0x107c|_0x49300a[-0x2053+-0x16a8+0x3700],_0x549b6d[_0x151313*(0x1*-0x22c0+0x1696+0xc2e)+(0x4*0x304+0x3*0xc7d+-0x3184)]=_0x49300a[-0x15c3+0xf2+0x37*0x61]<<-0xf2b+0x1*-0x5bd+0x1*0x14fd|_0x49300a[-0x11f*0x1f+0x1c4*0xa+0x1120]<<-0x3*-0x342+-0x1a5*-0xd+-0x1f1c|_0x49300a[0xa43*0x2+0x26f*0x1+-0x16ed],_0x1423ae>-0xc14+0x3b+0x52*0x25&&(_0x811efc[_0x151313*(-0x17b*-0xd+0x7a*-0x19+0x1*-0x751)+(0x1495+-0x21b6+0xd21)]=_0x49300a[-0x1b54+0xf25+0xc38]<<0x1599+0xca4+-0x2228|_0x49300a[-0x1fbb+0x7*0x33b+-0x24a*-0x4]<<0x1da0+-0xe*0x281+0x579|_0x49300a[-0x12b0+-0x7*-0x21f+0x3e2],_0x811efc[_0x151313*(0x9a9+0x2057+-0x29fc)+(0xb72+-0x2181+0x1610)]=_0x49300a[-0x1340*0x2+-0x571+0x2bfd]<<-0x208b*0x1+0xae4+0xade*0x2|_0x49300a[0x2192+0x487+-0x1306*0x2]<<0x1118+-0x1*0x565+-0x175*0x8|_0x49300a[-0x227c+-0x262e+0x2*0x245c],_0x811efc[_0x151313*(0xb5*0x19+0x5*0x703+-0x4*0xd2e)+(0x15e0*0x1+-0x453+-0x118b)]=_0x49300a[-0x2+-0xb*-0x383+0x269*-0x10]<<-0xbeb+0x44*-0x4f+-0x1*-0x20fc|_0x49300a[-0x9*0x223+0x13*-0x29+0x1656]<<-0x16b5+0xb4a+-0xb76*-0x1|_0x49300a[-0x1f38*0x1+-0x1b45+0x3a8e*0x1],_0x811efc[_0x151313*(-0x1cac+-0x1*-0x2119+-0x469*0x1)+(0x4c*0x6d+-0x1378+-0xce1)]=_0x49300a[-0x25bc+-0x17f0+0x3dbe]<<-0x47*0x7f+-0x130c+-0x9*-0x60a|_0x49300a[-0x207e*-0x1+0x1133+-0xae*0x49]<<-0x1139*-0x2+-0xa*0x19c+-0x124f|_0x49300a[0x10ec+0x7f9+0x1*-0x18d1],_0x1423ae>0x798+-0x176f+0xfd9?(_0x512ee3[_0x151313*(0x2055+-0x2d*-0x35+-0x1*0x29a2)+(-0x5*0x65+0x155a+0x29*-0x79)]=_0x49300a[0x43*0x53+0x8f9*0x4+-0x3988]<<-0x2471+0xebc+-0xae5*-0x2|_0x49300a[-0x1df5+0xf2c+0xedf]<<0x1047+-0x9ba+-0x682|_0x49300a[-0x2*0xf7d+0x1439+0xad8*0x1],_0x512ee3[_0x151313*(0x9ae+0xe87+-0x1831)+(0x1063+-0x2b+-0x1037)]=_0x49300a[-0x692+-0x70*0x53+0x2afa]<<0xd03*0x1+-0x14b4+0x7c6|_0x49300a[-0x456+0x5bd+0x2*-0xa7]<<0xe18+0xe5*0x4+0x1*-0x11a1|_0x49300a[0x1*-0x252a+-0x4*-0x975+-0x90],_0x512ee3[_0x151313*(-0xd8b*-0x1+0x2292+-0x3019)+(-0xdc4*-0x1+0xe8d+-0x1c4f)]=_0x49300a[0xfe9+-0x2534+0x1566]<<0x1211+0x2190+0xce3*-0x4|_0x49300a[-0x15f5+-0x11ae+0xb9*0x37]<<-0x101d+-0x1c1*-0x5+0x763|_0x49300a[-0x2025*-0x1+0x2a*0x39+-0x2962],_0x512ee3[_0x151313*(-0x1d3*0xa+-0x1aa3+0x2ce5)+(0x1*-0x1c63+0x1*0x162d+-0x1*-0x639)]=_0x49300a[0xe*-0x37+0x1fdd*-0x1+-0x22fd*-0x1]<<0x9*-0x277+-0x3*0xa91+0x3*0x11fd|_0x49300a[-0xbc7*0x3+0x1*0x1052+0x991*0x2]<<0xa5f+0x6*-0x19+-0x9be|_0x49300a[-0x1884+0xd41*0x2+0x1*-0x1de],_0x33b55f[_0x151313*(-0x12ba*0x1+0x1*0xb42+0x77c)+(0x2684+0x590*0x4+-0x3cc4)]=_0x49300a[0x2260+0x3f9*0x7+-0xa9*0x5e]<<-0x228b+-0x1*-0xfc3+-0xb*-0x1b7|_0x49300a[-0x31*-0xb+0xb96*-0x3+0x20c9]<<0x1b17+0x246d+-0x3f79|_0x49300a[0x172d+0xd08+-0x2412],_0x33b55f[_0x151313*(0x614+-0x81b*0x3+-0x1241*-0x1)+(-0x1*0x19a9+-0x1839+0x31e3)]=_0x49300a[-0xdc5+0x173e+-0x1*0x955]<<-0x7d0+-0x1215+-0x5f*-0x46|_0x49300a[-0x1*-0x24fd+0x2617+-0x4aef]<<0x1207+0x882+-0x1a7e|_0x49300a[-0x1edc+0x988+-0xabd*-0x2],_0x33b55f[_0x151313*(-0x2*-0x603+0x1c8d+-0x288f*0x1)+(-0x3e*-0x91+-0x920+-0x19fc)]=_0x49300a[-0x3e6*0x3+0x9f4+0x5*0x61]<<0x2570+0xa1b*-0x3+0x6a*-0x11|_0x49300a[-0x2*0x85e+-0xa11+0x1af5]<<0x11b5*-0x2+0x21d2+0x1a3|_0x49300a[0x1c76+-0x5*0x7b5+0xa3c],_0x33b55f[_0x151313*(-0x184c+-0x26ba+0x3f0a)+(0x12d9+0xd9a+-0x2070)]=_0x49300a[0x1f*0x67+-0x2*-0x4ac+-0x15a7]<<0x4*0x290+-0x216c+-0x1*-0x1741|_0x49300a[0x15b*0x1+0xed3+-0x1003]<<0x160c+-0x1b25+0x524|_0x49300a[-0x11ed*-0x1+0x4a3+0x4*-0x599]):_0x512ee3[_0x151313]=_0x49300a[0x45d*-0x7+-0x209f+-0x15*-0x303]<<-0x444+0x242*-0x11+0x2abb|_0x49300a[-0xcd7+-0x2324+0x3011]<<0x1b74+-0x177b+-0x1*0x3ee|_0x49300a[0xd71+0x1*0x832+0x4*-0x563]);}}return{'sh1to3Data':_0x549b6d,'sh4to7Data':_0x811efc,'sh8to11Data':_0x512ee3,'sh12to15Data':_0x33b55f};},_0x492f1e=_0x11b2a0=>{if(!_0x46be23['time_index'])return;const _0x10bc07=_0x46be23['time_index']['findIndex'](_0x3acc37=>_0x3acc37===_0x11b2a0);let _0x10673d=_0x46be23['time_index']['findIndex']((_0x51a5f2,_0x2d96aa)=>_0x51a5f2!==_0x11b2a0&&_0x2d96aa>_0x10bc07);if(_0x10673d===-(-0x1e59+-0x1d6e+0x3bc8)&&_0x10bc07===-(-0x4*0x7f9+-0xb*-0x22+0x1e6f))return;_0x10673d===-(0x4e5+0x1a3*-0x13+0x1*0x1a35)&&_0x10bc07!==-(-0x464*0x2+-0x192a+-0x1*-0x21f3)&&(_0x10673d=_0x46be23['time_index']['length']),_0x5424d9-=_0x10673d-_0x10bc07,console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatDeco'+'dedDataWor'+'ker\x20releas'+'eSeqData\x20n'+'umSplats',_0x5424d9,_0x10673d-_0x10bc07);const _0xddc367=Object['keys'](_0x46be23);for(let _0x21dbe6=-0x23a4+-0x1b17+0x3ebb;_0x21dbe6<_0xddc367['length'];_0x21dbe6++){const _0x219dbd=_0xddc367[_0x21dbe6],_0xeaf71f=_0x46be23[_0x219dbd];if(_0xeaf71f){let _0x3734e9=-0x1*-0x1b2b+-0x6b1*-0x5+-0x3c9f;switch(_0x219dbd){case'position':_0x3734e9=0x707+-0x1229+-0x13d*-0x9;break;case'color_opac'+'ity':_0x3734e9=0xfc3*0x1+-0xd*0x1db+0x430*0x2;break;case'scale':_0x3734e9=-0x10d1+0x7*-0x24f+0x233*0xf;break;case'motion':_0x3734e9=0x9*0x253+0x202d+-0x3515;break;case'rotation':_0x3734e9=0x2*0xfc3+0x1*0x10df+0x1831*-0x2;break;default:_0x3734e9=-0xb38*-0x1+-0x824+-0x313*0x1;break;}const _0xf9aca3=new Float32Array(_0x5424d9*_0x3734e9);_0x10bc07>-0x26b8+-0x1196+0x384e?(_0xf9aca3['set'](_0xeaf71f['subarray'](-0x1390*0x1+0xa3d+0x953,_0x10bc07*_0x3734e9),-0x74b*-0x1+-0x26*0xd9+0x18eb),_0xf9aca3['set'](_0xeaf71f['subarray'](_0x10673d*_0x3734e9),_0x10bc07*_0x3734e9)):_0xf9aca3['set'](_0xeaf71f['subarray'](_0x10673d*_0x3734e9),0x1dab+-0x18b3+-0x4f8),_0x46be23[_0x219dbd]=_0xf9aca3;}}},_0x480451=()=>{const _0x3313bd=Object['keys'](_0x46be23);for(let _0x150809=-0x17*-0x153+0xe29+0x2c9e*-0x1;_0x150809<_0x3313bd['length'];_0x150809++){const _0x27e7b4=_0x3313bd[_0x150809];_0x46be23[_0x27e7b4]&&(_0x46be23[_0x27e7b4]=[]);}},_0x82424c=()=>{_0x46be23={},_0x5424d9=0x1*-0x17b4+-0x1333+0x2ae7;};}class JA extends me{constructor(){super(),this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+QA['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'})));}async['appendGSpl'+'atData'](_0x5d0727,_0xb4ad74,_0x324fba,_0x3ac509=!(0x3bf+-0x1ef*-0x3+-0x7*0x15d)){var _0x52f551,_0x249c23;const _0x535758={};return _0x5d0727['elements'][0x6*0xec+0x2*-0x53d+0x4f2]['properties']['forEach'](_0x55945e=>{_0x535758[_0x55945e['name']]=_0x55945e['storage'];}),_0x3ac509?(_0x52f551=this['worker'])==null||_0x52f551['postMessag'+'e']({'type':'appendGSpl'+'atData','properties':_0x535758,'timeIndex':_0xb4ad74,'timeOption':_0x324fba},_0x5d0727['elements'][0x2d*0x87+-0xb11+-0xcaa]['properties']['map'](_0x5c0373=>_0x5c0373['storage']['buffer'])):(_0x249c23=this['worker'])==null||_0x249c23['postMessag'+'e']({'type':'appendGSpl'+'atData','properties':_0x535758,'timeIndex':_0xb4ad74,'timeOption':_0x324fba}),new Promise(_0x1e6422=>{this['worker']['onmessage']=_0x45dff5=>{if(!this['worker'])return;const {data:_0x2c3ece}=_0x45dff5;_0x2c3ece['type']==='newAppendD'+'ata'&&_0x1e6422(_0x2c3ece);};});}async['releaseSeq'+'Data'](_0x557568){var _0x57e51f;(_0x57e51f=this['worker'])==null||_0x57e51f['postMessag'+'e']({'type':'releaseSeq'+'Data','index':_0x557568});}async['releaseAll'+'SeqData'](){var _0x3939e1;(_0x3939e1=this['worker'])==null||_0x3939e1['postMessag'+'e']({'type':'releaseAll'+'SeqData'});}['destroy'](){var _0x2dc850;this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),(_0x2dc850=this['worker'])==null||_0x2dc850['terminate'](),this['worker']=null);}}const gc=new te(),gg=new le(),eC=new ie(-0x17*0x15b+0x1*0xb76+0x13b8,-0x2099+0x78d+-0xb*-0x247,-0xe2f+-0x19aa+0x27d9*0x1,0x1*-0x1652+0x2473+-0xe21*0x1+0.4),Sg=0x6f*0x7e7+-0x301bd+0x2a1d4;class tC{constructor(_0x502463,_0x55133f,_0x1f4336,_0x3857f0,_0x1cc071,_0x155c7c){const _0x2feb70=_0x502463['getProp']('position'),_0x2a494c=_0x502463['getProp']('color_opac'+'ity'),_0x135204=_0x502463['getProp']('scale'),_0x4d3993=_0x502463['getProp']('motion'),_0x39245c=_0x502463['getProp']('rotation');this['read']=_0x48f5a5=>{_0x55133f&&_0x55133f['set'](_0x2feb70[_0x48f5a5*(0x2*-0xe3b+0x428+0x1851)+(0x2187+0x72d+0x28b4*-0x1)],_0x2feb70[_0x48f5a5*(-0x10f9*0x1+-0x2379+0xd*0x409)+(0x2096+-0x1442*-0x1+0x5df*-0x9)],_0x2feb70[_0x48f5a5*(-0x7db*-0x3+0x132b+0x1*-0x2ab9)+(-0x1cce+-0x1*-0x2222+-0x552)]),_0x1f4336&&_0x1f4336['set'](_0x39245c[_0x48f5a5*(0xc3f+0xdc1+-0x1*0x19fd)+(0xa03+0x1373*0x1+-0x1d76)],_0x39245c[_0x48f5a5*(0x20*0xff+-0x76d*0x1+0x11*-0x170)+(-0x85*0x21+0x61*0x57+-0xfd1)],_0x39245c[_0x48f5a5*(-0x45e+-0x246c+0x28cd)+(0x6*-0x2ba+-0x24f4+-0x222*-0x19)]),_0x3857f0&&_0x3857f0['set'](_0x135204[_0x48f5a5*(0x206*0x13+0x4c*-0x50+-0xeaf)+(0x4e4*-0x1+0x1*0x1da2+0x1*-0x18be)],_0x135204[_0x48f5a5*(-0x5d0+0xd8+-0xf*-0x55)+(-0xe94*0x1+-0x2*-0x841+-0x1ed)],_0x135204[_0x48f5a5*(0x1*0xe6b+0x4ef*0x1+-0x1357)+(0x274+0x1319+-0x158b)]),_0x155c7c&&_0x4d3993&&_0x155c7c['set'](_0x4d3993[_0x48f5a5*(-0xc65*-0x2+-0x20d8+0x811)+(-0x631*-0x6+-0x80b+-0x1*0x1d1b)],_0x4d3993[_0x48f5a5*(0x1b32*-0x1+0x79*0x3b+-0xae)+(0x1*-0x1639+-0x71f*0x1+-0xb*-0x2ab)],_0x4d3993[_0x48f5a5*(0x21c+-0xaa*0x30+0x1dc7)+(0x85f+0x3*-0x8a6+0x7*0x283)]),_0x1cc071&&_0x1cc071['set'](_0x2a494c[_0x48f5a5*(-0x35c*-0xb+0x123a+-0x372a)+(0x1*-0x150e+0x262a+-0x111c)],_0x2a494c[_0x48f5a5*(0x1*-0x2348+0x299+0x2f9*0xb)+(-0xaa9+-0x21d3*0x1+0x1*0x2c7d)],_0x2a494c[_0x48f5a5*(0x24c+0x5*0x3df+-0x15a3)+(0x6b*-0x2f+-0x138a*-0x1+0x1d)],_0x2a494c[_0x48f5a5*(0xb*0x30b+0xc*-0x2c5+0x3*-0x13)+(-0x7*0x2d3+-0xb29+0x1ef1)]);};}}const sC=(_0x129a00,_0x1afe60,_0x3a6fee)=>{gg['set'](_0x3a6fee['x'],_0x3a6fee['y'],_0x3a6fee['z'],_0x3a6fee['w'])['normalize'](),_0x129a00['setTRS'](_0x1afe60,gg,D['ONE']);};class iC{constructor(_0x59c7fe,_0x111542=[],_0x22efe0=[]){h(this,'elements'),h(this,'properties'),h(this,'numSplats',-0x235c+-0x12e+0x617*0x6),h(this,'comments'),h(this,'is4D'),h(this,'dataWorker'),h(this,'destroy',()=>{var _0x1110b5;(_0x1110b5=this['dataWorker'])==null||_0x1110b5['destroy'](),this['dataWorker']=null;});var _0x1fc6ed,_0x3f3ad1,_0x3c0d1f;this['elements']=_0x59c7fe,this['properties']=_0x22efe0,this['numSplats']=((_0x1fc6ed=this['getElement']('vertex'))==null?void(0x1771+-0x699*-0x1+0x2*-0xf05):_0x1fc6ed['count'])??-0xc2f+0x2*-0x9d6+0x23*0xe9,this['comments']=_0x111542,this['is4D']=!!((_0x3c0d1f=(_0x3f3ad1=this['getElement']('vertex'))==null?void(-0x1071+-0x270c+-0x1*-0x377d):_0x3f3ad1['properties']['find'](_0x559afb=>_0x559afb['name']==='t'))!=null&&_0x3c0d1f['storage']);}async['appendGSpl'+'atData'](_0x1b0ece,_0x246f7e,_0x5b4f96){var _0x3ac9fa;let _0x4fe6de=0x14c2+0x2251+-0x3713;for(let _0x2c65ba=0x1*-0x233f+-0xc*-0x285+-0x503*-0x1;_0x2c65ba<_0x5b4f96['length']&&_0x246f7e>_0x5b4f96[_0x2c65ba];_0x2c65ba+=-0xd0a+-0x5b*0x49+0x26ff)_0x4fe6de=_0x2c65ba/(0x104c+-0x289*0x6+-0x114);this['dataWorker']||(this['dataWorker']=new JA(),await this['dataWorker']['appendGSpl'+'atData'](this,0x3*-0xc7a+0x2473+0xfb,_0x5b4f96));const _0xd7f7f5=this['getElement']('vertex');_0xd7f7f5&&(_0xd7f7f5['count']=this['numSplats']);const _0x46450d=await this['dataWorker']['appendGSpl'+'atData'](_0x1b0ece,_0x4fe6de,_0x5b4f96,!(-0x74b+0x12b9+-0xb6e)),_0x42fdba=_0x46450d['properties'],_0x4e1806=((_0x3ac9fa=this['getElement']('vertex'))==null?void(0x2115+0x614*0x2+0x1*-0x2d3d):_0x3ac9fa['properties'])??[];for(const _0x4ea182 in _0x42fdba){const _0x38c790=_0x4e1806['find'](_0x6eba3d=>_0x6eba3d['name']===_0x4ea182);_0x38c790?_0x38c790['storage']=_0x42fdba[_0x4ea182]:_0x4e1806['push']({'type':'float','name':_0x4ea182,'storage':_0x42fdba[_0x4ea182],'byteSize':0x4});}this['transformD'+'ata']=_0x46450d['transformD'+'ata'],this['numSplats']=_0x42fdba['position']['length']/(0xdce+-0xd*-0x76+0x5*-0x3f5);}async['releaseSeq'+'Data'](_0x2dc5ed){return console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatDeco'+'dedData\x20re'+'leaseSeqDa'+'ta',_0x2dc5ed),this['dataWorker']['releaseSeq'+'Data'](_0x2dc5ed),this;}async['releaseAll'+'SeqData'](){var _0x421051;return console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatDeco'+'dedData\x20re'+'lease\x20all\x20'+'SeqData'),(_0x421051=this['dataWorker'])==null||_0x421051['releaseAll'+'SeqData'](),this;}['getProp'](_0x16814c,_0x2ae27a='vertex'){var _0x1a857d,_0x2422b6;return(_0x2422b6=(_0x1a857d=this['getElement'](_0x2ae27a))==null?void(-0x1a5e+0x12*0x70+-0x2*-0x93f):_0x1a857d['properties']['find'](_0x28ca84=>_0x28ca84['name']===_0x16814c))==null?void(0xce1+-0x28d*0x1+-0xa54):_0x2422b6['storage'];}['getElement'](_0x1959ba){return this['elements']['find'](_0x194ba3=>_0x194ba3['name']===_0x1959ba);}['createIter'](_0x5c2e50,_0x49f02d,_0x54d2b9,_0x55725d,_0x4337c1){return new tC(this,_0x5c2e50,_0x49f02d,_0x54d2b9,_0x55725d,_0x4337c1);}['calcAabb'](_0x357862,_0x54d7b3){let _0x416e3e=0x8c5*-0x3+0x15a9+0x1*0x4a6,_0x2dfeb8=-0x6c*0x1e+-0x47d+0x18f*0xb,_0x36250d=0xa*-0x2e5+0xf3+0x1*0x1bff,_0x3f0eb2=0x1136+-0x14a4+0x36e,_0x3b4e1c=-0x1d53*-0x1+-0x1*0x553+-0x1800,_0x2f0a2a=-0x2517+-0x171+0x336*0xc,_0x3d4d3a=!(-0x15f8+0x2*-0xeaa+0x62*0x86);const _0x5515aa=this['getProp']('position'),_0x16abad=this['getProp']('scale');for(let _0x3b6d8f=0x2*0x124f+0x23f+-0x26dd;_0x3b6d8f<this['numSplats'];++_0x3b6d8f){if(_0x54d7b3&&!_0x54d7b3(_0x3b6d8f))continue;const _0x4cb6af=_0x5515aa[_0x3b6d8f*(-0xf6e+0x190*0x5+-0x1f*-0x3f)+(-0x1b0d*-0x1+0x3de+-0x1eeb)],_0xea5728=_0x5515aa[_0x3b6d8f*(0x2235+0x6b*0x4a+0x412*-0x10)+(-0x1ccf+0x701+-0x745*-0x3)],_0x2a1cc4=_0x5515aa[_0x3b6d8f*(-0x2348+0xd1+0x227a)+(0x93e+0x14*0xef+-0x4*0x6fa)],_0x2b8d37=Math['max'](_0x16abad[_0x3b6d8f*(0x44*-0x53+0x26de*-0x1+-0x1*-0x3ced)+(0x2*0xb63+-0xd*0x185+-0x305*0x1)],_0x16abad[_0x3b6d8f*(-0xb3*-0x2+0x64c+0x7af*-0x1)+(-0x2404+-0xe59*0x1+0x325e)],_0x16abad[_0x3b6d8f*(0x15a*-0xd+-0x436+0x15cb)+(-0x6a1*-0x1+-0x2378+-0x5*-0x5c5)]);if(!isFinite(_0x4cb6af)||!isFinite(_0xea5728)||!isFinite(_0x2a1cc4)||!isFinite(_0x2b8d37))continue;const _0x4247b3=(0x4*0x3ef+-0x4*0x70+0x6fd*-0x2)*Math['exp'](_0x2b8d37);_0x3d4d3a?(_0x3d4d3a=!(-0x49c+-0x823*0x1+0x220*0x6),_0x416e3e=_0x4cb6af-_0x4247b3,_0x2dfeb8=_0xea5728-_0x4247b3,_0x36250d=_0x2a1cc4-_0x4247b3,_0x3f0eb2=_0x4cb6af+_0x4247b3,_0x3b4e1c=_0xea5728+_0x4247b3,_0x2f0a2a=_0x2a1cc4+_0x4247b3):(_0x416e3e=Math['min'](_0x416e3e,_0x4cb6af-_0x4247b3),_0x2dfeb8=Math['min'](_0x2dfeb8,_0xea5728-_0x4247b3),_0x36250d=Math['min'](_0x36250d,_0x2a1cc4-_0x4247b3),_0x3f0eb2=Math['max'](_0x3f0eb2,_0x4cb6af+_0x4247b3),_0x3b4e1c=Math['max'](_0x3b4e1c,_0xea5728+_0x4247b3),_0x2f0a2a=Math['max'](_0x2f0a2a,_0x2a1cc4+_0x4247b3));}return _0x3d4d3a||(_0x357862['center']['set']((_0x416e3e+_0x3f0eb2)*(-0x293*0x8+-0x52f*0x1+0x19c7*0x1+0.5),(_0x2dfeb8+_0x3b4e1c)*(-0xa94+0x100d*0x1+0x1d3*-0x3+0.5),(_0x36250d+_0x2f0a2a)*(0x19*-0x31+-0x1e97+0x2360+0.5)),_0x357862['halfExtent'+'s']['set']((_0x3f0eb2-_0x416e3e)*(0x46b+0x1b90+0x1ffb*-0x1+0.5),(_0x3b4e1c-_0x2dfeb8)*(-0x10*0x149+0x1b5e+-0x6ce+0.5),(_0x2f0a2a-_0x36250d)*(-0x2299+0x14e4*0x1+0xdb5+0.5))),!_0x3d4d3a;}['yieldToMai'+'n'](){var _0x361618;return(_0x361618=globalThis['scheduler'])!=null&&_0x361618['yield']?globalThis['scheduler']['yield']():new Promise(_0x206035=>{setTimeout(_0x206035,0x120b*-0x1+0xe1d*-0x2+-0x941*-0x5);});}async['getCenters'](_0x1ef037){const _0x25b06b=this['getProp']('x'),_0x347a66=this['getProp']('y'),_0x3fda92=this['getProp']('z');for(let _0x2120c2=0xb11+0xd8c+0x1*-0x189d;_0x2120c2<this['numSplats'];++_0x2120c2)_0x1ef037[_0x2120c2*(0x5*0x481+0x7ce+-0x8*0x3ca)+(-0x1000+0xa7*-0x15+0x1db3)]=_0x25b06b[_0x2120c2],_0x1ef037[_0x2120c2*(0x1f7+-0x2*-0x885+0x22*-0x8f)+(0x31*0x46+-0x26*-0x4+-0xdfd)]=_0x347a66[_0x2120c2],_0x1ef037[_0x2120c2*(-0x45f*0x3+-0x14f0+0x221*0x10)+(0x217*-0x1+0x58f+-0x2*0x1bb)]=_0x3fda92[_0x2120c2],_0x2120c2%Sg===-0x158f*0x1+0xd84+0x1*0x80b&&await this['yieldToMai'+'n']();}async['getMuT'](){var _0x5296a7;if((_0x5296a7=this['transformD'+'ata'])!=null&&_0x5296a7['muT'])return this['transformD'+'ata']['muT'];const _0x42a866=this['getProp']('t');return _0x42a866?new Float32Array(_0x42a866):void(-0x909+0xc34+-0x32b);}async['getTScale'](){const _0x26c6f6=this['getProp']('t_scale');if(!_0x26c6f6)return;const _0x348198=new Float32Array(this['numSplats']);for(let _0x216401=0x191+0x77c*-0x2+0xd67;_0x216401<this['numSplats'];++_0x216401)_0x348198[_0x216401]=Math['exp'](_0x26c6f6[_0x216401]),_0x216401%Sg===-0xf*0x1f7+-0x2555+0x42ce&&await this['yieldToMai'+'n']();return _0x348198;}['getMotion'](_0x4f0c25){const _0x5b5c95=this['getProp']('motion');_0x5b5c95&&new Float32Array(_0x5b5c95['buffer']['slice']());}['getTimeInd'+'ex'](){var _0x155adf;if((_0x155adf=this['transformD'+'ata'])!=null&&_0x155adf['timeIndex'])return this['transformD'+'ata']['timeIndex'];const _0x4babd4=this['getProp']('time_index');if(_0x4babd4)return new Float32Array(_0x4babd4);}['calcFocalP'+'oint'](_0xd5daf1,_0x555228){const _0x5c6a07=this['getProp']('position'),_0x308c52=this['getProp']('scale');_0xd5daf1['x']=0x1*0x773+0x35*-0xb3+0x1d9c,_0xd5daf1['y']=0x1e84+0x352*-0x2+-0xbf*0x20,_0xd5daf1['z']=0x2*0x7b3+-0x1f8a+-0x1*-0x1024;let _0x14eb5b=-0x1b2d+0x9bb*-0x1+-0x1274*-0x2;for(let _0x247bcd=-0x1125+-0x1970+0x2a95;_0x247bcd<this['numSplats'];++_0x247bcd){if(_0x555228&&!_0x555228(_0x247bcd))continue;const _0x5d752b=_0x5c6a07[_0x247bcd*(0x5*0x4cd+0x770+-0x1f6e)+(-0x1*-0x719+-0xf39+0xd*0xa0)],_0x1f3074=_0x5c6a07[_0x247bcd*(-0x202d+0x9fe+0x1632)+(0x3*-0x205+-0x503*0x1+0x3f*0x2d)],_0x591262=_0x5c6a07[_0x247bcd*(-0x1*0x9fd+0x2c4+0x1cf*0x4)+(-0x1cb4+-0x451*0x1+0x2107)];if(!isFinite(_0x5d752b)||!isFinite(_0x1f3074)||!isFinite(_0x591262))continue;const _0x10856b=(0x7*-0x4d0+0x3*0x977+0x1c4*0x3)/(-0xe9e*0x1+0x4d5+0x9ca+Math['max'](_0x308c52[_0x247bcd*(0xb86+-0x14d3+-0x8*-0x12a)+(0x1*-0x2517+-0x1*0x1189+0x36a0)],_0x308c52[_0x247bcd*(-0xfc1*-0x2+-0x15d*0x1+-0xf11*0x2)+(-0x52*0x2b+-0x116f+0x1f36)],_0x308c52[_0x247bcd*(-0x1f61+-0x132f+-0x1*-0x3293)+(0x8a7*0x2+-0xaeb+-0x661)]));_0xd5daf1['x']+=_0x5d752b*_0x10856b,_0xd5daf1['y']+=_0x1f3074*_0x10856b,_0xd5daf1['z']+=_0x591262*_0x10856b,_0x14eb5b+=_0x10856b;}_0xd5daf1['mulScalar']((-0x125*-0x8+0x14b+-0xa72)/_0x14eb5b);}['renderWire'+'frameBound'+'s'](_0xd0482,_0x4d399b){const _0x46240f=new D(),_0x545eb4=new le(),_0x51767b=new D(),_0x4bf3fa=new D(),_0x339d20=new D(),_0x2a0a0b=this['createIter'](_0x46240f,_0x545eb4,_0x51767b);for(let _0x477bf2=0xb37+-0x464*0x8+0x1*0x17e9;_0x477bf2<this['numSplats'];++_0x477bf2)_0x2a0a0b['read'](_0x477bf2),sC(gc,_0x46240f,_0x545eb4),gc['mul2'](_0x4d399b,gc),_0x4bf3fa['set'](_0x51767b['x']*-(0x741+0xb9c+0x3*-0x649),_0x51767b['y']*-(-0x12e2*0x1+-0x1c*0x13+0x14f8),_0x51767b['z']*-(0x5*-0x71d+-0x1*-0xb27+0x186c)),_0x339d20['set'](_0x51767b['x']*(0x2173+0x38d*0xb+0x3a*-0x140),_0x51767b['y']*(0x11cf+-0x8f1*0x3+0x7*0x14a),_0x51767b['z']*(0x1093*0x1+-0x3*-0xd01+0x1bca*-0x2)),_0xd0482['immediate']['drawWireAl'+'ignedBox'](_0x4bf3fa,_0x339d20,eC,!(-0x1bb*0x4+-0x25*-0x2e+0x46),_0xd0482['defaultDra'+'wLayer'],gc);}get['isCompress'+'ed'](){return!(-0x17*-0x18d+0x41+-0x23eb);}get['shBands'](){return{0x9:0x1,0x18:0x2,0x2d:0x3}[((()=>{for(let _0x43af33=-0x35c+0x1042*-0x1+0x139e;_0x43af33<-0x1*0x8e+0x25c5+-0x250a;++_0x43af33)if(!this['getProp']('f_rest_'+_0x43af33))return _0x43af33;return 0x2641+0x1fa6+-0x45ba;})())]??0x18e0+-0x1*-0x2513+-0x3df3;}['calcMorton'+'Order'](){const _0x42ab7c=_0xa3bcd=>{let _0xc604bc=_0xa3bcd[0xb*0x12b+0x1ed7*0x1+-0x2bb0],_0x521f9f=_0xa3bcd[0xe0c+-0x1532+0x726];for(let _0x2b4c04=-0x13*-0x19b+0x1a91+-0x3911;_0x2b4c04<_0xa3bcd['length'];_0x2b4c04++)_0xa3bcd[_0x2b4c04]<_0xc604bc&&(_0xc604bc=_0xa3bcd[_0x2b4c04]),_0xa3bcd[_0x2b4c04]>_0x521f9f&&(_0x521f9f=_0xa3bcd[_0x2b4c04]);return{'min':_0xc604bc,'max':_0x521f9f};},_0x233162=(_0x52a431,_0xf44321,_0x35a7b9)=>{const _0x1465ee=_0x45a154=>(_0x45a154&=0x1af+0x1*-0xecf+0x111f*0x1,_0x45a154=(_0x45a154^_0x45a154<<0x3ae+-0x128b+0xeed)&0xd56b2e9e+0xa2b3*0x16025+-0xb638d17e,_0x45a154=(_0x45a154^_0x45a154<<-0x1*-0x307+0x21a4*0x1+0x71*-0x53)&-0x4254313*-0x1+-0x545ecb+-0xcff439,_0x45a154=(_0x45a154^_0x45a154<<-0x1838+-0x1887+0x30c3)&-0x203740f+0x2d0e3da+0xee6*0x2694,_0x45a154=(_0x45a154^_0x45a154<<-0x1300+-0xe2f+0x2131)&-0x2c41539+-0x65e8d7*0x27+0x30c58eb*0x9,_0x45a154);return(_0x1465ee(_0x35a7b9)<<0x113+0x9*0x3a9+0x3*-0xb56)+(_0x1465ee(_0xf44321)<<0xec*-0x14+-0xac*0x32+-0x76f*-0x7)+_0x1465ee(_0x52a431);},_0x112ad4=this['getProp']('x'),_0x104f65=this['getProp']('y'),_0x9072ec=this['getProp']('z'),{min:_0x4e8894,max:_0x2e347c}=_0x42ab7c(_0x112ad4),{min:_0x45ee49,max:_0x3c280a}=_0x42ab7c(_0x104f65),{min:_0x2573e5,max:_0x2b3f57}=_0x42ab7c(_0x9072ec),_0x55f24b=_0x4e8894===_0x2e347c?0x5*0x7b5+-0xb2*-0x2+-0xd4f*0x3:(0x1427+-0x2149+0x2*0x891)/(_0x2e347c-_0x4e8894),_0x3805c4=_0x45ee49===_0x3c280a?-0x283*0xf+-0x1*-0x17fb+0xdb2:(-0x1e1+-0x1d7b+-0x1*-0x235c)/(_0x3c280a-_0x45ee49),_0x323c9e=_0x2573e5===_0x2b3f57?-0x1586+-0x33d*0xb+0x3925:(0x702+-0x26c7+0x23c5*0x1)/(_0x2b3f57-_0x2573e5),_0x3d6ab6=new Map();for(let _0x242381=-0x28e*0xc+-0x2*0x116+0x20d4;_0x242381<this['numSplats'];_0x242381++){const _0x91ea9c=Math['min'](-0x3f5+0x2675+-0x1e81,Math['floor']((_0x112ad4[_0x242381]-_0x4e8894)*_0x55f24b)),_0x5900b1=Math['min'](-0x1*-0x1a89+-0x1372+-0x84*0x6,Math['floor']((_0x104f65[_0x242381]-_0x45ee49)*_0x3805c4)),_0x25ba61=Math['min'](-0x48c+-0xae1+0x136c,Math['floor']((_0x9072ec[_0x242381]-_0x2573e5)*_0x323c9e)),_0x218c7a=_0x233162(_0x91ea9c,_0x5900b1,_0x25ba61),_0x12fa1c=_0x3d6ab6['get'](_0x218c7a);_0x12fa1c?_0x12fa1c['push'](_0x242381):_0x3d6ab6['set'](_0x218c7a,[_0x242381]);}const _0x328998=Array['from'](_0x3d6ab6['keys']())['sort']((_0x51fbc4,_0x7b5d89)=>_0x51fbc4-_0x7b5d89),_0x59f11a=new Uint32Array(this['numSplats']);let _0x55db1b=0x74f+-0x115*0x20+-0x25*-0xbd;for(let _0x48a580=0x180c+-0xd*0x15+-0x16fb;_0x48a580<_0x328998['length'];++_0x48a580){const _0x1faaa5=_0x3d6ab6['get'](_0x328998[_0x48a580]);for(let _0x669dc7=-0x2*0x9a4+0xe*0x4c+0xf20;_0x669dc7<_0x1faaa5['length'];++_0x669dc7)_0x59f11a[_0x55db1b++]=_0x1faaa5[_0x669dc7];}return _0x59f11a;}['reorder'](_0x454337){const _0x54f338=new Map(),_0x3ad614=_0x32bdc3=>{if(_0x54f338['has'](_0x32bdc3)){const _0x16c34f=_0x54f338['get'](_0x32bdc3);return _0x54f338['delete'](_0x32bdc3),_0x16c34f;}return new ArrayBuffer(_0x32bdc3);},_0x4d08d2=_0x1e9de1=>{_0x54f338['set'](_0x1e9de1['byteLength'],_0x1e9de1);},_0x34b06b=_0x482376=>{const _0x3ef78c=new _0x482376['constructo'+'r'](_0x3ad614(_0x482376['byteLength']));for(let _0x4d2800=-0x75b+-0x1*-0x21e9+-0x1a8e;_0x4d2800<_0x454337['length'];_0x4d2800++)_0x3ef78c[_0x4d2800]=_0x482376[_0x454337[_0x4d2800]];return _0x4d08d2(_0x482376['buffer']),_0x3ef78c;};this['elements']['forEach'](_0x4a9245=>{_0x4a9245['properties']['forEach'](_0x1ffd56=>{_0x1ffd56['storage']&&(_0x1ffd56['storage']=_0x34b06b(_0x1ffd56['storage']));});});}['reorderDat'+'a'](){this['reorder'](this['calcMorton'+'Order']());}}const rC='\x0a\x20\x20\x20\x20attri'+'bute\x20vec2\x20'+'vertex_pos'+'ition;\x0a\x20\x20\x20'+'\x20void\x20main'+'(void)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20gl_'+'Position\x20='+'\x20vec4(vert'+'ex_positio'+'n,\x200.0,\x201.'+'0);\x0a\x20\x20\x20\x20}\x0a',aC='\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22gspla'+'tEvalSHVS\x22'+'\x0a\x0a\x20\x20\x20\x20//\x20t'+'akes\x20a\x20nor'+'malized\x203-'+'component\x20'+'value,\x20con'+'vert\x20to\x20(1'+'1,\x2011,\x2010)'+'\x20bit\x20range'+'\x20and\x0a\x20\x20\x20\x20/'+'/\x20then\x20pac'+'kage\x20into\x20'+'RGBA8\x0a\x20\x20\x20\x20'+'vec4\x20packR'+'gb(vec3\x20v)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uvec3\x20vb\x20'+'=\x20uvec3(cl'+'amp(v,\x20vec'+'3(0.0),\x20ve'+'c3(1.0))\x20*'+'\x20vec3(2047'+'.0,\x202047.0'+',\x201023.0))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'uint\x20bits\x20'+'=\x20(vb.x\x20<<'+'\x2021)\x20|\x20(vb'+'.y\x20<<\x2010)\x20'+'|\x20vb.z;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20vec4((u'+'vec4(bits)'+'\x20>>\x20uvec4('+'24,\x2016,\x208,'+'\x200))\x20&\x20uve'+'c4(0xff))\x20'+'/\x20vec4(255'+'.0);\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20unif'+'orm\x20medium'+'p\x20vec3\x20dir'+';\x0a\x20\x20\x20\x20unif'+'orm\x20medium'+'p\x20sampler2'+'D\x20centroid'+'s;\x0a\x20\x20\x20\x20uni'+'form\x20mediu'+'mp\x20float\x20s'+'hN_mins;\x0a\x20'+'\x20\x20\x20uniform'+'\x20mediump\x20f'+'loat\x20shN_m'+'axs;\x0a\x0a\x20\x20\x20\x20'+'void\x20main('+'void)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20ivec'+'2\x20uv\x20=\x20ive'+'c2(gl_Frag'+'Coord.xy)\x20'+'*\x20ivec2(SH'+'_COEFFS,\x201'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20mediump\x20v'+'ec3\x20coeffi'+'cients[SH_'+'COEFFS];\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20read\x20coef'+'ficients\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20for'+'\x20(int\x20i\x20=\x20'+'0;\x20i\x20<\x20SH_'+'COEFFS;\x20i+'+'+)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3\x20s\x20=\x20texe'+'lFetch(cen'+'troids,\x20iv'+'ec2(uv.x\x20+'+'\x20i,\x20uv.y),'+'\x200).xyz;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20coefficie'+'nts[i]\x20=\x20m'+'ix(vec3(sh'+'N_mins),\x20v'+'ec3(shN_ma'+'xs),\x20s);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20evaluate\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_FragColor'+'\x20=\x20packRgb'+'(evalSH(co'+'efficients'+',\x20dir)\x20*\x200'+('.25\x20+\x200.5)'+';\x0a\x20\x20\x20\x20}\x0a'),nC='\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_position'+':\x20vec2f;\x0a\x20'+'\x20\x20\x20@vertex'+'\x0a\x20\x20\x20\x20fn\x20ve'+'rtexMain(i'+'nput:\x20Vert'+'exInput)\x20-'+'>\x20VertexOu'+'tput\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20o'+'utput:\x20Ver'+'texOutput;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.posi'+'tion\x20=\x20vec'+'4f(vertex_'+'position,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a\x20\x20\x20\x20}\x0a',oC='\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22gspla'+'tEvalSHVS\x22'+'\x0a\x0a\x20\x20\x20\x20//\x20t'+'akes\x20a\x20nor'+'malized\x203-'+'component\x20'+'value,\x20con'+'vert\x20to\x20(1'+'1,\x2011,\x2010)'+'\x20bit\x20range'+'\x20and\x0a\x20\x20\x20\x20/'+'/\x20then\x20pac'+'kage\x20into\x20'+'RGBA8\x0a\x20\x20\x20\x20'+'fn\x20packRgb'+'(v:\x20vec3f)'+'\x20->\x20vec4f\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20vb\x20=\x20v'+'ec3u(clamp'+'(v,\x20vec3f('+'0.0),\x20vec3'+'f(1.0))\x20*\x20'+'vec3f(2047'+'.0,\x202047.0'+',\x201023.0))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20bits\x20='+'\x20dot(vb,\x20v'+'ec3u(1\x20<<\x20'+'21,\x201\x20<<\x201'+'0,\x201));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20vec4f(('+'vec4u(bits'+')\x20>>\x20vec4u'+'(24,\x2016,\x208'+',\x200))\x20&\x20ve'+'c4u(0xff))'+'\x20/\x20vec4f(2'+'55.0);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20un'+'iform\x20dir:'+'\x20vec3f;\x0a\x20\x20'+'\x20\x20uniform\x20'+'shN_mins:\x20'+'f32;\x0a\x20\x20\x20\x20u'+'niform\x20shN'+'_maxs:\x20f32'+';\x0a\x0a\x20\x20\x20\x20var'+'\x20centroids'+':\x20texture_'+'2d<f32>;\x0a\x0a'+'\x20\x20\x20\x20@fragm'+'ent\x0a\x20\x20\x20\x20fn'+'\x20fragmentM'+'ain(input:'+'\x20FragmentI'+'nput)\x20->\x20F'+'ragmentOut'+'put\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20ou'+'tput:\x20Frag'+'mentOutput'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20uv\x20=\x20'+'vec2i(inpu'+'t.position'+'.xy)\x20*\x20vec'+'2i(SH_COEF'+'FS,\x201);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'coefficien'+'ts:\x20array<'+'vec3f,\x20SH_'+'COEFFS>;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20read\x20coef'+'ficients\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20for'+'\x20(var\x20i:\x20i'+'32\x20=\x200;\x20i\x20'+'<\x20SH_COEFF'+'S;\x20i++)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20s:\x20v'+'ec3f\x20=\x20tex'+'tureLoad(c'+'entroids,\x20'+'vec2i(uv.x'+'\x20+\x20i,\x20uv.y'+'),\x200).xyz;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20coeffic'+'ients[i]\x20='+'\x20mix(vec3f'+'(uniform.s'+'hN_mins),\x20'+'vec3f(unif'+('orm.shN_ma'+'xs),\x20s);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20evaluate\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.color'+'\x20=\x20packRgb'+'(evalSH(&c'+'oefficient'+'s,\x20uniform'+'.dir)\x20*\x200.'+'25\x20+\x200.5);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20out'+'put;\x0a\x20\x20\x20\x20}'+'\x0a'),lC='\x0a\x20\x20\x20\x20unifo'+'rm\x20mediump'+'\x20sampler2D'+'\x20sh0;\x0a\x20\x20\x20\x20'+'uniform\x20hi'+'ghp\x20sample'+'r2D\x20sh_lab'+'els;\x0a\x20\x20\x20\x20u'+'niform\x20med'+'iump\x20sampl'+'er2D\x20sh_re'+'sult;\x0a\x0a\x20\x20\x20'+'\x20uniform\x20v'+'ec4\x20sh0_mi'+'ns;\x0a\x20\x20\x20\x20un'+'iform\x20vec4'+'\x20sh0_maxs;'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20SH_C0\x20=\x20'+'0.28209479'+'177387814;'+'\x0a\x0a\x20\x20\x20\x20//\x20u'+'npack\x2011,\x20'+'11,\x2010\x20nor'+'malized\x20va'+'lue\x20from\x20r'+'gba8\x20textu'+'re\x20sample\x0a'+'\x20\x20\x20\x20vec3\x20u'+'npackRgb(v'+'ec4\x20v)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uve'+'c4\x20uv\x20=\x20uv'+'ec4(v\x20*\x2025'+'5.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uint\x20b'+'its\x20=\x20(uv.'+'x\x20<<\x2024)\x20|'+'\x20(uv.y\x20<<\x20'+'16)\x20|\x20(uv.'+'z\x20<<\x208)\x20|\x20'+'uv.w;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uvec3\x20'+'vb\x20=\x20(uvec'+'3(bits)\x20>>'+'\x20uvec3(21,'+'\x2010,\x200))\x20&'+'\x20uvec3(0x7'+'ffu,\x200x7ff'+'u,\x200x3ffu)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20vec'+'3(vb)\x20/\x20ve'+'c3(2047.0,'+'\x202047.0,\x201'+'023.0);\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20v'+'ec4\x20readCo'+'lor(in\x20Spl'+'atSource\x20s'+'ource)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'sample\x20bas'+'e\x20color\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'\x20baseSampl'+'e\x20=\x20mix(sh'+'0_mins,\x20sh'+'0_maxs,\x20te'+'xelFetch(s'+'h0,\x20source'+'.uv,\x200));\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20resolve\x20'+'base\x20color'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec4\x20base\x20='+'\x20vec4(vec3'+'(0.5)\x20+\x20ba'+'seSample.x'+'yz\x20*\x20SH_C0'+',\x201.0\x20/\x20(1'+'.0\x20+\x20exp(-'+'baseSample'+'.w)));\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20e'+'xtract\x20sph'+'erical\x20har'+'monics\x20pal'+'ette\x20index'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+'vec2\x20label'+'Sample\x20=\x20i'+'vec2(texel'+'Fetch(sh_l'+'abels,\x20sou'+'rce.uv,\x200)'+'.xy\x20*\x20255.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20int\x20n\x20=\x20'+('labelSampl'+'e.x\x20+\x20labe'+'lSample.y\x20'+'*\x20256;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'\x20shSample\x20'+'=\x20texelFet'+'ch(sh_resu'+'lt,\x20ivec2('+'n\x20%\x2064,\x20n\x20'+'/\x2064),\x200);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20sh\x20=\x20('+'unpackRgb('+'shSample)\x20'+'-\x20vec3(0.5'+'))\x20*\x204.0;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20vec4'+'(base.xyz\x20'+'+\x20sh,\x20base'+'.w);\x0a\x20\x20\x20\x20}'+'\x0a'),cC='\x0a\x20\x20\x20\x20var\x20s'+'h0:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20var\x20s'+'h_labels:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20var\x20sh_re'+'sult:\x20text'+'ure_2d<f32'+'>;\x0a\x0a\x20\x20\x20\x20un'+'iform\x20sh0_'+'mins:\x20vec4'+'f;\x0a\x20\x20\x20\x20uni'+'form\x20sh0_m'+'axs:\x20vec4f'+';\x0a\x0a\x20\x20\x20\x20con'+'st\x20SH_C0:\x20'+'f32\x20=\x200.28'+'2094791773'+'87814;\x0a\x0a\x20\x20'+'\x20\x20//\x20unpac'+'k\x2011,\x2011,\x20'+'10\x20normali'+'zed\x20value\x20'+'from\x20rgba8'+'\x20texture\x20s'+'ample\x0a\x20\x20\x20\x20'+'fn\x20unpackR'+'gb(v:\x20vec4'+'f)\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20bits'+'\x20=\x20dot(vec'+'4u(v\x20*\x20255'+'.0),\x20vec4u'+'(1u\x20<<\x2024,'+'\x201u\x20<<\x2016,'+'\x201u\x20<<\x208,\x20'+'1u));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20vb'+'\x20=\x20(vec3u('+'bits)\x20>>\x20v'+'ec3u(21,\x201'+'0,\x200))\x20&\x20v'+'ec3u(0x7ff'+'u,\x200x7ffu,'+'\x200x3ffu);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20vec3f'+'(vb)\x20/\x20vec'+'3f(2047.0,'+'\x202047.0,\x201'+'023.0);\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20f'+'n\x20readColo'+'r(source:\x20'+'ptr<functi'+'on,\x20SplatS'+'ource>)\x20->'+'\x20vec4f\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'sample\x20bas'+'e\x20color\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'baseSample'+':\x20vec4f\x20=\x20'+'mix(unifor'+'m.sh0_mins'+',\x20uniform.'+'sh0_maxs,\x20'+'textureLoa'+'d(sh0,\x20sou'+'rce.uv,\x200)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20base\x20'+'=\x20vec4f(ve'+'c3f(0.5)\x20+'+'\x20baseSampl'+'e.xyz\x20*\x20SH'+'_C0,\x201.0\x20/'+'\x20(1.0\x20+\x20ex'+'p(-baseSam'+'ple.w)));\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20extract\x20'+'spherical\x20'+'harmonics\x20'+'palette\x20in'+'dex\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20labe'+'lSample:\x20v'+'ec2i\x20=\x20vec'+'2i(texture'+'Load(sh_la'+'bels,\x20sour'+'ce.uv,\x200).'+'xy\x20*\x20255.0'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20n\x20=\x20l'+('abelSample'+'.x\x20+\x20label'+'Sample.y\x20*'+'\x20256;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20s'+'hSample:\x20v'+'ec4f\x20=\x20tex'+'tureLoad(s'+'h_result,\x20'+'vec2i(n\x20%\x20'+'64,\x20n\x20/\x2064'+'),\x200);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20s'+'h:\x20vec3f\x20='+'\x20(unpackRg'+'b(shSample'+')\x20-\x20vec3f('+'0.5))\x20*\x204.'+'0;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20v'+'ec4f(base.'+'xyz\x20+\x20sh,\x20'+'base.w);\x0a\x20'+'\x20\x20\x20}\x0a'),hC=(_0x925335,_0x98662b)=>{for(const _0x54a519 in _0x98662b)_0x925335['resolve'](_0x54a519)['setValue'](_0x98662b[_0x54a519]);};class dC extends ys{constructor(){super(...arguments),h(this,'executeCal'+'lback',null);}['execute'](){var _0x1c254b;(_0x1c254b=this['executeCal'+'lback'])==null||_0x1c254b['call'](this);}}const yg=new te(),uo=new D();class fC{constructor(_0x7dbd8,_0x43de88){h(this,'prevDir',new D()),h(this,'updateMode','enable'),(this['device']=_0x7dbd8,this['gsplatInst'+'ance']=_0x43de88);const {resource:_0x443b26}=_0x43de88,_0x21feb4=new Map(Pe['get'](_0x7dbd8,_0x7dbd8['isWebGPU']?'wgsl':'glsl'));this['shader']=$t['createShad'+'er'](_0x7dbd8,{'uniqueName':'gsplatReso'+'lveSH','vertexGLSL':rC,'fragmentGLSL':aC,'vertexWGSL':nC,'fragmentWGSL':oC,'vertexIncludes':_0x21feb4,'fragmentIncludes':_0x21feb4,'fragmentDefines':new Map([['SH_BANDS',_0x443b26['gsplatData']['shBands']['toString']()]]),'attributes':{'vertex_position':Me}}),this['texture']=_0x443b26['createText'+'ure']('centroids',Ne,new J(0x2438+-0x1a1c+0x4*-0x277,-0xa9+0x192b+-0x1482)),this['renderTarg'+'et']=new gt({'colorBuffer':this['texture'],'depth':!(-0x7c5+-0xba9+0x136f)}),this['renderPass']=new dC(_0x7dbd8),this['renderPass']['init'](this['renderTarg'+'et'],{}),this['renderPass']['colorOps']['clear']=!(0xd4d*-0x1+-0x2d*0x70+0x20fd),this['quadRender']=new Ah(this['shader']);const {material:_0x50554d}=_0x43de88;_0x50554d['setDefine']('SH_BANDS','0');const {shaderChunks:_0x445d38}=_0x50554d;_0x445d38['glsl']['set']('gsplatSogs'+'ColorVS',lC),_0x445d38['wgsl']['set']('gsplatSogs'+'ColorVS',cC),_0x50554d['update'](),_0x7dbd8['scope']['resolve']('sh_result')['setValue'](this['texture']);}['destroy'](){const {gsplatInstance:_0x37e433}=this,{material:_0x4d9ac2}=_0x37e433;_0x4d9ac2['setDefine']('SH_BANDS',_0x37e433['resource']['gsplatData']['shBands']['toString']());const {shaderChunks:_0x4c4f9f}=_0x4d9ac2;_0x4c4f9f['glsl']['delete']('gsplatSogs'+'ColorVS'),_0x4c4f9f['wgsl']['delete']('gsplatSogs'+'ColorVS'),_0x4d9ac2['update'](),this['quadRender']['destroy'](),this['renderPass']['destroy'](),this['renderTarg'+'et']['destroy'](),this['texture']['destroy'](),this['shader']['destroy']();}['render'](_0x5367a0,_0x356f94){const {prevDir:_0xcbc1e0,updateMode:_0x4d47e1}=this;if(_0x4d47e1==='disable'||(yg['invert'](_0x356f94),yg['transformV'+'ector'](_0x5367a0['forward'],uo),uo['normalize'](),_0x4d47e1==='enable'&&uo['equalsAppr'+'ox'](_0xcbc1e0,-0x5*-0x22+0x22*-0x6f+0x70a*0x2+0.001)))return;_0xcbc1e0['copy'](uo);const _0x2995e7=()=>{const {device:_0x100735}=this,{sh_centroids:_0x81d509,meta:_0x138f82}=this['gsplatInst'+'ance']['resource']['gsplatData'];hC(_0x100735['scope'],{'dir':uo['toArray'](),'centroids':_0x81d509,'shN_mins':_0x138f82['shN']['mins'],'shN_maxs':_0x138f82['shN']['maxs']}),_0x100735['setCullMod'+'e'](bt),_0x100735['setDepthSt'+'ate'](Yt['NODEPTH']),_0x100735['setStencil'+'State'](null,null),_0x100735['setBlendSt'+'ate'](pt['NOBLEND']),this['quadRender']['render']();};this['renderPass']['executeCal'+'lback']=_0x2995e7,this['renderPass']['render']();}}const uC='\x0a\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20means_l'+';\x0a\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20means_'+'u;\x0a\x20\x20\x20\x20uni'+'form\x20sampl'+'er2D\x20quats'+';\x0a\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20scales'+';\x0a\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20sh_lab'+'els;\x0a\x0a\x20\x20\x20\x20'+'uniform\x20hi'+'ghp\x20uint\x20n'+'umSplats;\x0a'+'\x0a\x20\x20\x20\x20uint\x20'+'packU32(ve'+'c4\x20v)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20uint(v.'+'x\x20*\x20255.0)'+'\x20<<\x2024u\x20|\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20uint('+'v.y\x20*\x20255.'+'0)\x20<<\x2016u\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uin'+'t(v.z\x20*\x2025'+'5.0)\x20<<\x208u'+'\x20|\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ui'+'nt(v.w\x20*\x202'+'55.0);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20uv'+'ec4\x20packU3'+'2(vec4\x20a,\x20'+'vec4\x20b,\x20ve'+'c4\x20c,\x20vec4'+'\x20d)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20uvec4(pac'+'kU32(a),\x20p'+'ackU32(b),'+'\x20packU32(c'+'),\x20packU32'+'(d));\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20voi'+'d\x20main(voi'+'d)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20int\x20w\x20='+'\x20int(textu'+'reSize(mea'+'ns_l,\x200).x'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20ivec2\x20uv\x20'+'=\x20ivec2(gl'+'_FragCoord'+'.xy);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(ui'+'nt(uv.x\x20+\x20'+'uv.y\x20*\x20w)\x20'+'>=\x20numSpla'+'ts)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20di'+'scard;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20meansLSam'+'ple\x20=\x20texe'+'lFetch(mea'+'ns_l,\x20uv,\x20'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20meansUSam'+'ple\x20=\x20texe'+'lFetch(mea'+'ns_u,\x20uv,\x20'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'\x20quatsSamp'+'le\x20=\x20texel'+'Fetch(quat'+'s,\x20uv,\x200);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20scales'+'Sample\x20=\x20t'+'exelFetch('+'scales,\x20uv'+',\x200).xyz;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20shLabel'+'sSample\x20=\x20'+'texelFetch'+'(sh_labels'+',\x20uv,\x200).x'+('y;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20pcFragCo'+'lor0\x20=\x20pac'+'kU32(\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c4(meansLS'+'ample,\x20shL'+'abelsSampl'+'e.x),\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c4(meansUS'+'ample,\x20shL'+'abelsSampl'+'e.y),\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c4(quatsSa'+'mple),\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec4(scales'+'Sample,\x200.'+'0)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20);\x0a\x20\x20\x20\x20}\x0a'),pC='\x0a\x20\x20\x20\x20var\x20m'+'eans_l:\x20te'+'xture_2d<f'+'32>;\x0a\x20\x20\x20\x20v'+'ar\x20means_u'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20var\x20qua'+'ts:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20var\x20s'+'cales:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20sh_label'+'s:\x20texture'+'_2d<f32>;\x0a'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20numSpla'+'ts:\x20u32;\x0a\x0a'+'\x20\x20\x20\x20fn\x20pac'+'kU32(v:\x20ve'+'c4<f32>)\x20-'+'>\x20u32\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20(u32(v.'+'x\x20*\x20255.0)'+'\x20<<\x2024u)\x20\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20(u3'+'2(v.y\x20*\x2025'+'5.0)\x20<<\x2016'+'u)\x20\x20|\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20(u32(v.z\x20'+'*\x20255.0)\x20<'+'<\x208u)\x20|\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20u32(v.w'+'\x20*\x20255.0);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20fn\x20packU'+'Vec32(a:\x20v'+'ec4<f32>,\x20'+'b:\x20vec4<f3'+'2>,\x20c:\x20vec'+'4<f32>,\x20d:'+'\x20vec4<f32>'+')\x20->\x20vec4<'+'u32>\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20vec4<u32'+'>(packU32('+'a),\x20packU3'+'2(b),\x20pack'+'U32(c),\x20pa'+'ckU32(d));'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20@fragmen'+'t\x0a\x20\x20\x20\x20fn\x20f'+'ragmentMai'+'n(input:\x20F'+'ragmentInp'+'ut)\x20->\x20Fra'+'gmentOutpu'+'t\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20outp'+'ut:\x20Fragme'+'ntOutput;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20w:\x20u32\x20'+'=\x20textureD'+'imensions('+'means_l,\x200'+').x;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20uv:'+'\x20vec2<u32>'+'\x20=\x20vec2<u3'+'2>(pcPosit'+'ion.xy);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(uv.x\x20+\x20uv'+'.y\x20*\x20w\x20>=\x20'+'uniform.nu'+'mSplats)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20discard'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20output;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20fetch\x20the'+'\x20source\x20in'+'dex\x20and\x20ca'+'lculate\x20so'+'urce\x20uv\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'meansLSamp'+'le:\x20vec3<f'+('32>\x20=\x20text'+'ureLoad(me'+'ans_l,\x20uv,'+'\x200).xyz;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20meansUSam'+'ple:\x20vec3<'+'f32>\x20=\x20tex'+'tureLoad(m'+'eans_u,\x20uv'+',\x200).xyz;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20quatsSam'+'ple:\x20vec4<'+'f32>\x20=\x20tex'+'tureLoad(q'+'uats,\x20uv,\x20'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20scal'+'esSample:\x20'+'vec3<f32>\x20'+'=\x20textureL'+'oad(scales'+',\x20uv,\x200).x'+'yz;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20shLa'+'belsSample'+':\x20vec2<f32'+'>\x20=\x20textur'+'eLoad(sh_l'+'abels,\x20uv,'+'\x200).xy;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.color\x20'+'=\x20packUVec'+'32(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'(meansLSam'+'ple,\x20shLab'+'elsSample.'+'x),\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'(meansUSam'+'ple,\x20shLab'+'elsSample.'+'y),\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'(quatsSamp'+'le),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'4(scalesSa'+'mple,\x200.0)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a\x20\x20\x20\x20'+'}\x0a'),An=0x1*0x1121+-0x2*0xb9e+0x61b+0.28209479177387814,Ci=_0x1fb78d=>_0x1fb78d['read'](-0x10b9+0x94d*-0x1+-0x1*-0x1a06,0x25e*-0x7+-0x2*-0x2f0+-0xab2*-0x1,_0x1fb78d['width'],_0x1fb78d['height'],{'mipLevel':0x0,'face':0x0,'immediate':!(-0x1601+0x1966+-0x365)}),mC=(_0xc08df6,_0x467039)=>{for(const _0x392713 in _0x467039)_0xc08df6['resolve'](_0x392713)['setValue'](_0x467039[_0x392713]);};class _C{constructor(_0x476eb3,_0x5a9c1e,_0x241099,_0x57e111,_0x42dcdd,_0x128466){const _0x361a62=(_0x18e02b,_0x4f5e30,_0xd21e76)=>_0x18e02b*(-0x411*-0x1+0x139*0x17+-0x202f-_0xd21e76)+_0x4f5e30*_0xd21e76,{meta:_0x328076}=_0x476eb3,{means:_0x5eaa9f,scales:_0x42d1c9,sh0:_0x40fe0f,shN:_0xd2c1ba}=_0x328076,_0x2d9aa7=_0x5a9c1e&&_0x476eb3['means_l']['_levels'][-0x2253+-0x1b*0x141+0x442e],_0x92a039=_0x5a9c1e&&_0x476eb3['means_u']['_levels'][-0xdb9*-0x1+0x1*0x1baf+0x109*-0x28],_0x187fe7=_0x241099&&_0x476eb3['quats']['_levels'][-0x1*-0x1d03+-0x6bd*-0x4+-0x37f7],_0x4e6ea5=_0x57e111&&_0x476eb3['scales']['_levels'][-0x407*-0x1+0x4*0x539+0x18eb*-0x1],_0x8ddf3=_0x42dcdd&&_0x476eb3['sh0']['_levels'][0x63d*-0x2+-0x1*-0x995+0x2e5],_0x2c7e0d=_0x128466&&_0x476eb3['sh_labels']['_levels'][0x56c+0xfa1*0x2+0x272*-0xf],_0x5a36f7=_0x128466&&_0x476eb3['sh_centroi'+'ds']['_levels'][-0x1d24*-0x1+-0x1bb0+-0x3*0x7c],_0x1ceb12=(0x1d19+0x88a*0x4+-0x909*0x7)/Math['sqrt'](0x31*0xc1+0x1f*0x6b+-0x1f*0x19c);this['read']=_0x1c89ed=>{if(_0x5a9c1e){const _0x150d96=_0x361a62(_0x5eaa9f['mins'][-0x5+0x252c+-0x2527],_0x5eaa9f['maxs'][-0x1718+-0x1*0x2327+0x3a3f],((_0x92a039[_0x1c89ed*(0x238b*0x1+0x1*-0x4ee+-0x1e99*0x1)+(-0x1*-0x1d06+-0xc2*0x2d+-0x41*-0x14)]<<-0x8*0x162+-0x1*-0x1779+-0xc61*0x1)+_0x2d9aa7[_0x1c89ed*(0x10a1+0x3df*0x9+-0xcdd*0x4)+(0x1185+0x1ee7*-0x1+0x6*0x23b)])/(-0xdbe4+-0x1*0x3bf9+0x217dc)),_0x3fdbba=_0x361a62(_0x5eaa9f['mins'][0x25b6+-0x42a*-0x6+-0x3eb1],_0x5eaa9f['maxs'][-0x1f98+0x149d+0xafc],((_0x92a039[_0x1c89ed*(-0x1c11*-0x1+0x90f+-0x251c)+(-0x1ae5+-0x448+0x1f2e)]<<0x1*0x4f8+-0x444+-0xac*0x1)+_0x2d9aa7[_0x1c89ed*(0x2230+-0x1b08+0x1c9*-0x4)+(0x6ee*0x1+-0x21d7+0x1aea)])/(-0x8f*0x2e7+-0xa91a+-0x1a411*-0x2)),_0x474dc2=_0x361a62(_0x5eaa9f['mins'][0x2004+-0x123*-0x2+-0x2248],_0x5eaa9f['maxs'][-0x11*0x76+-0x2ce*-0x5+-0x62e],((_0x92a039[_0x1c89ed*(-0x144*0x18+-0x299+-0x5*-0x699)+(-0x709+-0x860+0xf6b*0x1)]<<0x25bd*0x1+0xca5+-0x325a)+_0x2d9aa7[_0x1c89ed*(0x31*0x6e+0xe41+0x234b*-0x1)+(0x161*-0x2+0x9db+-0x3*0x25d)])/(0x19eb1+-0x1*-0x79+-0x9f2b));_0x5a9c1e['x']=Math['sign'](_0x150d96)*(Math['exp'](Math['abs'](_0x150d96))-(-0x1fa7+-0x2597*0x1+0x453f)),_0x5a9c1e['y']=Math['sign'](_0x3fdbba)*(Math['exp'](Math['abs'](_0x3fdbba))-(-0x12c+0x1d31+0x16*-0x146)),_0x5a9c1e['z']=Math['sign'](_0x474dc2)*(Math['exp'](Math['abs'](_0x474dc2))-(-0x442+0x230d+0xe*-0x233));}if(_0x241099){const _0x202123=(_0x187fe7[_0x1c89ed*(-0x2*0x2a5+0x1*-0xe4+0x632)+(0x44b*0x5+-0x1e1c+-0x8a5*-0x1)]/(0x2f*-0x22+-0xef1+-0xa7*-0x22)-(0x1a4b+-0x226c+0x1*0x821+0.5))*_0x1ceb12,_0x296d77=(_0x187fe7[_0x1c89ed*(0x50*0x7b+0x22e3+-0x494f)+(0x1fa3+-0x223d*-0x1+0x1ff*-0x21)]/(-0xbbd*-0x1+0x85e*0x3+0xf8*-0x25)-(-0x10*0x1ee+-0x2249+0x4129+0.5))*_0x1ceb12,_0xe72059=(_0x187fe7[_0x1c89ed*(-0x7c3+-0x196d+0x19*0x154)+(-0x4*-0x62b+0x2*0xc7+-0x1a38)]/(0xcad*0x1+0x1*0x1d35+0xda1*-0x3)-(-0x1ab0+-0x6*-0x131+0x138a+0.5))*_0x1ceb12,_0x1f63f2=Math['sqrt'](Math['max'](-0x13d*0xb+0x1*0x174d+-0x9ae,-0x1b07+0x1fc3*0x1+-0x1*0x4bb-(_0x202123*_0x202123+_0x296d77*_0x296d77+_0xe72059*_0xe72059)));switch(_0x187fe7[_0x1c89ed*(-0x5*0x50e+-0x4*0x55e+0x2ec2)+(-0x2351+0x1af7+0x85d*0x1)]-(0x7c3*-0x1+-0xb3b+0x13fa)){case-0x53a*0x2+-0x4d*0x45+0x1*0x1f35:_0x241099['set'](_0x202123,_0x296d77,_0xe72059,_0x1f63f2);break;case 0x959+-0x3*0x64b+0x989*0x1:_0x241099['set'](_0x1f63f2,_0x296d77,_0xe72059,_0x202123);break;case-0xcc2+-0x1fa9+0xecf*0x3:_0x241099['set'](_0x296d77,_0x1f63f2,_0xe72059,_0x202123);break;case 0x9b7+-0x21*-0xb5+-0x2109:_0x241099['set'](_0x296d77,_0xe72059,_0x1f63f2,_0x202123);break;}}if(_0x57e111){const _0x1c3ed7=_0x361a62(_0x42d1c9['mins'][-0x21fe+0x6d6+0x6ca*0x4],_0x42d1c9['maxs'][0x29f+0x608*-0x1+0x369],_0x4e6ea5[_0x1c89ed*(-0x3*0x22d+0x74+0x617)+(-0x2*0xe0+0x9e*-0x2+0x2fc)]/(0x1867*0x1+0x29*-0x3d+-0xda3*0x1)),_0x4bf56d=_0x361a62(_0x42d1c9['mins'][0xc8b+-0x522+-0x768],_0x42d1c9['maxs'][-0x26b2+0x5ab*-0x3+0x37b4],_0x4e6ea5[_0x1c89ed*(-0x1*-0x1f42+-0x13*0xc5+0x5*-0x353)+(-0x1*0x1fab+-0x5*0x5f5+-0x1*-0x3d75)]/(-0xb4b+-0xd0+0xd1a)),_0xb0dd36=_0x361a62(_0x42d1c9['mins'][-0x8ae+-0x23cc+-0x3b5*-0xc],_0x42d1c9['maxs'][0x73e+0x25aa+0xe*-0x335],_0x4e6ea5[_0x1c89ed*(-0x4a9*-0x2+0x295*-0xb+0x1319)+(0x5*0x19f+0xd16+-0x152f)]/(0x2592+-0x4ea*0x3+-0x15d5));_0x57e111['set'](_0x1c3ed7,_0x4bf56d,_0xb0dd36);}if(_0x42dcdd){const _0x49602d=_0x361a62(_0x40fe0f['mins'][-0xa*-0x163+0x255a+0x4*-0xcce],_0x40fe0f['maxs'][0x1757+0x1*0x13dc+-0x2b33],_0x8ddf3[_0x1c89ed*(-0x1*-0x7b9+0x1c*0x103+0x401*-0x9)+(-0x2f1+0x29*0x4d+-0x964)]/(-0x157f*0x1+0x1*-0xe6e+-0x8b*-0x44)),_0x45a11c=_0x361a62(_0x40fe0f['mins'][0x2387+0x27*-0x2f+-0x1c5d],_0x40fe0f['maxs'][0x59*0x3d+-0x5e*-0x2e+-0x17*0x1a8],_0x8ddf3[_0x1c89ed*(-0x183b+-0x382*0x6+-0x90f*-0x5)+(0x1672+-0x82*0x1f+-0x6b3)]/(-0x337+-0x101a+0x1450)),_0x1765b5=_0x361a62(_0x40fe0f['mins'][0x117d+-0x193f+0x1c*0x47],_0x40fe0f['maxs'][0xaad+-0x2*0xc74+0x51*0x2d],_0x8ddf3[_0x1c89ed*(-0x1*-0xbf9+0x88a*0x1+-0x35*0x63)+(0x1ac9+-0x753*0x4+0x5*0x81)]/(0x34*0x35+0xba2+-0x1567)),_0x57c98a=_0x361a62(_0x40fe0f['mins'][-0x207b+-0x5*0x771+0x45b3],_0x40fe0f['maxs'][0x143+-0x1*0x14cb+0x138b],_0x8ddf3[_0x1c89ed*(-0x26bb+-0x99+-0x9d6*-0x4)+(0xcea*0x1+0x16a4+-0x238b)]/(0x21a4+0x2*0x11a2+-0x43e9));_0x42dcdd['set'](-0xf4f*0x2+-0x2e9+-0x2187*-0x1+0.5+_0x49602d*An,-0x3b7*0x1+0xe2*-0x29+-0x1*-0x27e9+0.5+_0x45a11c*An,0x137*-0x5+-0xe6b+0xa3f*0x2+0.5+_0x1765b5*An,(-0x102c+0x18ed+-0x46*0x20)/(0x1bdc+-0x8af*-0x3+-0x35e8+Math['exp'](-_0x57c98a)));}if(_0x128466){const _0x1f3d4a=_0x2c7e0d[_0x1c89ed*(0x1*-0x196d+-0x23a1+0x3d12)+(0xc29+0x2c4+0xeed*-0x1)]+(_0x2c7e0d[_0x1c89ed*(-0xa3a+-0x181f+0x225d)+(0x2205+0x22*0x34+0x369*-0xc)]<<0xe81+-0x1*-0x20fb+-0x2f74),_0x4358f2=_0x1f3d4a%(0x1*-0x2b7+0xc25+0x32*-0x2f)*(-0x1987+0x35*-0x63+0x2e15),_0x318920=Math['floor'](_0x1f3d4a/(-0xbf5+0x1*0x259f+-0x196a));for(let _0x27f2f4=-0x1*-0x6bb+-0x1328+0xc6d;_0x27f2f4<0x1872+-0x104*-0x16+-0x5*0x95b;++_0x27f2f4)for(let _0x9adf7a=0x1*0x12a1+-0xc57+-0x64a;_0x9adf7a<0x14*0x8e+0x1e6a+-0x2973;++_0x9adf7a)_0x128466[_0x27f2f4*(-0x7e*0x19+0xa93+0x1ca)+_0x9adf7a]=_0x361a62(_0xd2c1ba['mins'],_0xd2c1ba['maxs'],_0x5a36f7[(_0x4358f2+_0x9adf7a)*(-0x1866+0x1321+0xb*0x7b)+_0x27f2f4+_0x318920*_0x476eb3['sh_centroi'+'ds']['width']*(0x4c*0x8+-0xdf*-0x1d+-0x1b9f)]/(-0xaab*0x2+0xa*-0x113+0x2113*0x1));}};}}class gC{constructor(){h(this,'meta'),h(this,'numSplats'),h(this,'means_l'),h(this,'means_u'),h(this,'quats'),h(this,'scales'),h(this,'sh0'),h(this,'sh_centroi'+'ds'),h(this,'sh_labels'),h(this,'packedText'+'ure');}['destroy'](){var _0x10be71,_0x2c0312,_0x32d08f,_0x244601,_0x5621c3,_0x15bf79,_0x146aa8,_0x31a88f;(_0x10be71=this['means_l'])==null||_0x10be71['destroy'](),(_0x2c0312=this['means_u'])==null||_0x2c0312['destroy'](),(_0x32d08f=this['quats'])==null||_0x32d08f['destroy'](),(_0x244601=this['scales'])==null||_0x244601['destroy'](),(_0x5621c3=this['sh0'])==null||_0x5621c3['destroy'](),(_0x15bf79=this['sh_centroi'+'ds'])==null||_0x15bf79['destroy'](),(_0x146aa8=this['sh_labels'])==null||_0x146aa8['destroy'](),(_0x31a88f=this['packedText'+'ure'])==null||_0x31a88f['destroy']();}['createIter'](_0x4b2bcb,_0xe6d99f,_0x25466a,_0x4e174d,_0x122bfa){return new _C(this,_0x4b2bcb,_0xe6d99f,_0x25466a,_0x4e174d,_0x122bfa);}['calcAabb'](_0x1f4b61){const {mins:_0x5ada52,maxs:_0x2de3e3}=this['meta']['means'],_0x20b357=_0x8490e3=>Math['sign'](_0x8490e3)*(Math['exp'](Math['abs'](_0x8490e3))-(-0x601+-0x29*0x81+-0x1aab*-0x1));_0x1f4b61['center']['set']((_0x20b357(_0x5ada52[-0x938+0x4bd*-0x2+0x12b2])+_0x20b357(_0x2de3e3[-0x1d45+0x4c+0x1cf9]))*(0x1911+0x19ee+0xa33*-0x5+0.5),(_0x20b357(_0x5ada52[0x887+-0x248b+0x1c05*0x1])+_0x20b357(_0x2de3e3[-0x11d8*-0x2+-0x1ffe+0x2d*-0x15]))*(-0x2075+-0x346+-0x3*-0xbe9+0.5),(_0x20b357(_0x5ada52[0x103f+0x1a0c+-0x2a49])+_0x20b357(_0x2de3e3[0x1f95+-0x3*-0xbf+-0x43a*0x8]))*(-0x1*0x160a+-0x1*-0x7fd+-0x3*-0x4af+0.5)),_0x1f4b61['halfExtent'+'s']['set']((_0x20b357(_0x2de3e3[-0xca1+-0x16a5+0x11a3*0x2])-_0x20b357(_0x5ada52[-0x2457+-0x1957*-0x1+0xb00]))*(-0x2d*0x3b+0x16c9+-0xc6a+0.5),(_0x20b357(_0x2de3e3[-0x24+-0x1*-0x1486+0x8d*-0x25])-_0x20b357(_0x5ada52[-0x12*-0xff+-0x26*-0x47+-0x3*0x97d]))*(0x1c14+0x4ce*0x4+-0x2f4c+0.5),(_0x20b357(_0x2de3e3[-0x4*-0x471+0x1370+-0x17*0x19e])-_0x20b357(_0x5ada52[0xc6f+0x83*0x22+-0x1dd3*0x1]))*(-0xeb0+-0x109a+0x1f4a+0.5));}['getCenters'](_0x4d99c3){const {meta:_0x5af0af,means_l:_0xe1b8ae,means_u:_0x15f01a,numSplats:_0x2bccdc}=this,{means:_0x53e0ec}=_0x5af0af,_0x1906bc=new Uint32Array(_0x15f01a['_levels'][-0x33*-0x4+-0x5*-0x491+-0x17a1*0x1]['buffer']),_0x222155=new Uint32Array(_0xe1b8ae['_levels'][-0x192a+-0x1*-0xbbf+0xd6b*0x1]['buffer']),_0x59d393=_0x53e0ec['mins'][0xa7a+-0x919+-0x161]/(0xda96+-0x1c*0xeaf+0x1c08d),_0x20a44a=_0x53e0ec['mins'][-0x17f9+0x7a7*-0x3+0x2eef]/(-0x1*-0x1931+-0xd133+0x1b801),_0x4b3190=_0x53e0ec['mins'][-0x2132*0x1+-0x22ec+-0x2*-0x2210]/(0x1846e+-0xe702*-0x1+0x16b71*-0x1),_0x3dd2c8=_0x53e0ec['maxs'][-0x101b+-0x9*-0x18a+-0x1*-0x241]/(-0x8443*0x1+-0x21d*0x57+-0x1ab*-0x157),_0x33b3d=_0x53e0ec['maxs'][0xe5*-0xd+-0xb50+0x16f2]/(-0x1*0x7163+0xd666+-0x7*-0x1624),_0xd00afb=_0x53e0ec['maxs'][-0x36b*0x1+0xc7a+0x90d*-0x1]/(-0x1f7ab*-0x1+-0x1*-0x6f17+-0x1*0x166c3);for(let _0x5f0c91=0x13b6+0x2b*0x2+-0x140c;_0x5f0c91<_0x2bccdc;_0x5f0c91++){const _0x2a6b9c=_0x5f0c91,_0x2062fd=_0x1906bc[_0x2a6b9c],_0x3c903d=_0x222155[_0x2a6b9c],_0xfabec5=_0x2062fd<<0x1f15*0x1+0xc85+0x2*-0x15c9&0x3*-0x6131+-0xd52f+0x2f7c2|_0x3c903d&0x7*0x233+0x2*0x4a4+-0x1*0x17ae,_0x1341a8=_0x2062fd&0x5*-0x2458+0xb19d*0x1+0x1031b|_0x3c903d>>>-0x10*0x7d+0x2568+-0xec8*0x2&-0x216f+-0x25*0xa3+0x39fd,_0x436769=_0x2062fd>>>0x223e*0x1+0x132f+-0x1*0x3565&-0x38b4+0x3fcc+0x8*0x1efd|_0x3c903d>>>0x1*0x1f39+-0x1b38+0x1*-0x3f1&-0x18b1+-0x1d7f+0x372f,_0x240e04=_0x59d393*(0x17e8f+-0x1*-0x1e413+-0x262a3-_0xfabec5)+_0x3dd2c8*_0xfabec5,_0x5ac719=_0x20a44a*(-0xdcb*-0x1f+-0xa4f4+-0x6a2*0x1-_0x1341a8)+_0x33b3d*_0x1341a8,_0x587450=_0x4b3190*(0x2cf2+-0x1af47+0x28254-_0x436769)+_0xd00afb*_0x436769,_0x174072=_0x240e04<0x2202+0x8ed*0x3+-0x1443*0x3?-_0x240e04:_0x240e04,_0x1c58b8=_0x5ac719<0x1ca7+-0x6d0+-0x15d7*0x1?-_0x5ac719:_0x5ac719,_0x41740a=_0x587450<0x257c+0x63*0x4b+-0x427d?-_0x587450:_0x587450;_0x4d99c3[_0x5f0c91*(-0x69b+-0x1*0x1637+0x1cd5)]=(_0x240e04<0xa56+0x95e*0x2+-0x1d12?-(-0x1*0x12c7+0x1*0x20a2+-0x6ed*0x2):0x2578+0xd*0x63+-0x2a7e)*(Math['exp'](_0x174072)-(0x2*-0xcc6+-0x345+0x1cd2)),_0x4d99c3[_0x5f0c91*(0xaab+0x205e+-0x2b06)+(-0x1*-0x817+-0x22a9+0x1a93*0x1)]=(_0x5ac719<0x1fc0+0x2216+-0x9f*0x6a?-(-0x1*0xef+0x971*0x4+-0x24d4):-0x9b*0x1f+0x1342+-0x7c)*(Math['exp'](_0x1c58b8)-(0x15f1+-0xc58+-0x998)),_0x4d99c3[_0x5f0c91*(-0x1*-0x1e2+-0x1e3d+0x1c5e)+(-0x912+-0x2398+0x2cac)]=(_0x587450<0x2*-0x1079+-0x2573+0x3*0x1777?-(0x15f*-0xf+-0xeab+0x233d):-0x50b+0x1720+-0x1a*0xb2)*(Math['exp'](_0x41740a)-(0x32d+-0x26f9+0x263*0xf));}}['calcFocalP'+'oint'](_0x13078e,_0x383a5d){_0x13078e['set'](0x3c1*0x5+0x1*-0xd49+-0x57c,0x11ab+0x742+-0x18ed,0x727+-0x3d*0xa3+0x2a4*0xc);}get['isSogs'](){return!(0x2*-0x892+0x129+0xffb);}get['shBands'](){var _0x2ba1e1;return{0xc0:0x1,0x200:0x2,0x3c0:0x3}[(_0x2ba1e1=this['sh_centroi'+'ds'])==null?void(0x807+-0x266c+0x1e65):_0x2ba1e1['width']]??-0x60f*-0x2+-0x1f8c+0x136e;}async['decompress'](){const _0x58517e=['x','y','z','f_dc_0','f_dc_1','f_dc_2','opacity','scale_0','scale_1','scale_2','rot_0','rot_1','rot_2','rot_3'],{shBands:_0x3b8264}=this,{means_l:_0x5f5a49,means_u:_0x15ffe0,quats:_0x7508eb,scales:_0x4f878d,sh0:_0x23e8e3,sh_labels:_0x374a2b,sh_centroids:_0xe3db7e}=this;if(_0x5f5a49['_levels'][-0x1b3f+0x9fb+-0x1*-0x1144]=await Ci(_0x5f5a49),_0x15ffe0['_levels'][-0x5*-0x5b8+-0x1*0x1451+-0x847]=await Ci(_0x15ffe0),_0x7508eb['_levels'][0x1fff+0xb*0x28+-0x15*0x19b]=await Ci(_0x7508eb),_0x4f878d['_levels'][-0xa1d+0x3*0x917+-0x8*0x225]=await Ci(_0x4f878d),_0x23e8e3['_levels'][0x2*0x540+-0x16a9+0xb*0x11b]=await Ci(_0x23e8e3),_0x3b8264>-0x18e6+0x1*0x1e97+-0x5b1*0x1){_0x374a2b['_levels'][-0x15fd*-0x1+0x34*0x32+-0x2025]=await Ci(_0x374a2b),_0xe3db7e['_levels'][0x322*0x9+0xc5*0x2b+0x3d49*-0x1]=await Ci(_0xe3db7e);const _0x34baa7=[];for(let _0x4912f4=-0x3*-0x5e5+-0x251*0x6+0x3*-0x143;_0x4912f4<-0x18*0xc2+-0x6d*0xe+0x1df*0xd;++_0x4912f4)_0x34baa7['push']('f_rest_'+_0x4912f4);_0x58517e['splice'](_0x58517e['indexOf']('f_dc_0')+(0x227a+0x84a*0x1+0x3*-0xe41),0x124b+-0xa16+0x1*-0x835,..._0x34baa7);}const _0x35d546={};_0x58517e['forEach'](_0x2d3206=>{_0x35d546[_0x2d3206]=new Float32Array(this['numSplats']);});const _0x156110=new D(),_0x3e8d01=new le(),_0x3fe44f=new D(),_0x1611c4=new re(),_0x1e23da=_0x3b8264>0x2*-0x114a+0x151*0x18+0x2fc?new Float32Array(0x1*-0xb65+0x1c36+-0xf*0x11c):null,_0x417e87=this['createIter'](_0x156110,_0x3e8d01,_0x3fe44f,_0x1611c4,_0x1e23da);for(let _0x10bd51=-0x8a7*-0x3+-0x2*0x925+-0xd*0x97;_0x10bd51<this['numSplats'];++_0x10bd51)if(_0x417e87['read'](_0x10bd51),_0x35d546['x'][_0x10bd51]=_0x156110['x'],_0x35d546['y'][_0x10bd51]=_0x156110['y'],_0x35d546['z'][_0x10bd51]=_0x156110['z'],_0x35d546['rot_1'][_0x10bd51]=_0x3e8d01['x'],_0x35d546['rot_2'][_0x10bd51]=_0x3e8d01['y'],_0x35d546['rot_3'][_0x10bd51]=_0x3e8d01['z'],_0x35d546['rot_0'][_0x10bd51]=_0x3e8d01['w'],_0x35d546['scale_0'][_0x10bd51]=_0x3fe44f['x'],_0x35d546['scale_1'][_0x10bd51]=_0x3fe44f['y'],_0x35d546['scale_2'][_0x10bd51]=_0x3fe44f['z'],_0x35d546['f_dc_0'][_0x10bd51]=(_0x1611c4['x']-(-0x249f+0xa06+0x1a99+0.5))/An,_0x35d546['f_dc_1'][_0x10bd51]=(_0x1611c4['y']-(-0x2cb+-0x1010+0x12db+0.5))/An,_0x35d546['f_dc_2'][_0x10bd51]=(_0x1611c4['z']-(-0x2*-0x7b+0x2*-0x858+-0xb*-0x16e+0.5))/An,_0x35d546['opacity'][_0x10bd51]=_0x1611c4['w']<=-0xe*0x177+-0x416*-0x5+0x14?-(0x1*0x16d2+0x128d+-0xdbd*0x3):_0x1611c4['w']>=-0x5f*-0x2+0x2226+-0x2af*0xd?-0x2*0x9fa+-0x913*-0x4+-0x1030:-Math['log']((0x2631+-0x1321+-0x130f)/_0x1611c4['w']-(-0x1a03+-0x135a*-0x2+-0x74*0x1c)),_0x1e23da){for(let _0xbe2b58=0x19e+-0x1c18+0xd3d*0x2;_0xbe2b58<-0x7*0x25d+-0x1e19+0x33*0xeb;++_0xbe2b58)_0x35d546['f_rest_'+_0xbe2b58][_0x10bd51]=_0x1e23da[_0xbe2b58];}return new qn([{'name':'vertex','count':this['numSplats'],'properties':_0x58517e['map'](_0x5f28a9=>({'name':_0x5f28a9,'type':'float','byteSize':0x4,'storage':_0x35d546[_0x5f28a9]}))}]);}['packGpuMem'+'ory'](){const {means_l:_0x277b1f,means_u:_0x282ed7,quats:_0x4b7a4a,scales:_0x25153d,sh_labels:_0x590704,numSplats:_0x24a534}=this,{device:_0x88a571}=_0x277b1f,{scope:_0x1ee0c8}=_0x88a571,_0x1bb1b7=$t['createShad'+'er'](_0x88a571,{'uniqueName':'GsplatSogs'+'ReorderSha'+'der','attributes':{'vertex_position':Me},'vertexChunk':'fullscreen'+'QuadVS','fragmentGLSL':uC,'fragmentWGSL':pC,'fragmentOutputTypes':['uvec4']}),_0x505ccd=new gt({'colorBuffer':this['packedText'+'ure'],'depth':!(0x15df+-0x2de*0x6+-0x4aa),'mipLevel':0x0});_0x88a571['setCullMod'+'e'](bt),_0x88a571['setBlendSt'+'ate'](pt['NOBLEND']),_0x88a571['setDepthSt'+'ate'](Yt['NODEPTH']),mC(_0x1ee0c8,{'means_l':_0x277b1f,'means_u':_0x282ed7,'quats':_0x4b7a4a,'scales':_0x25153d,'sh_labels':_0x590704??_0x277b1f,'numSplats':_0x24a534}),Ar(_0x88a571,_0x505ccd,_0x1bb1b7),_0x505ccd['destroy'](),_0x1bb1b7['destroy']();}async['prepareGpu'+'Data'](){const {device:_0x4f763b,height:_0x58f4c5,width:_0x11c733}=this['means_l'];this['means_l']['_levels'][-0x4*-0x163+-0x2672+0x20e6*0x1]=await Ci(this['means_l']),this['means_u']['_levels'][-0x961*-0x1+0x1*0x26ad+-0x1*0x300e]=await Ci(this['means_u']),this['packedText'+'ure']=new _e(_0x4f763b,{'name':'sogsPacked'+'Texture','width':_0x11c733,'height':_0x58f4c5,'format':Ue,'mipmaps':!(-0x623*0x1+0x1f7d+-0x3f*0x67)}),_0x4f763b['on']('devicerest'+'ored',()=>{this['packGpuMem'+'ory']();}),this['packGpuMem'+'ory']();}['reorderDat'+'a'](){return this['prepareGpu'+'Data']();}}async function SC(){let _0x27b50c=null,_0x2e2cea=null,_0x3eabcb=null,_0x1d7609=null,_0x410a0d=null,_0x84990c=null,_0x163771=null,_0x158709=null,_0x58e193=null,_0x22ab62=null,_0x4cf14f=null,_0x43c73b=null,_0x26c387=null,_0x52d04a=null,_0x5cae0c=null,_0x3fd054=null,_0x433de6=null,_0x5aee7b=null,_0x35a777=null,_0x56571e=null,_0x1cafc8=null,_0x2ba68c=null,_0x2c41ca=null,_0x4641d2=null,_0x4d74a0=Float32Array['BYTES_PER_'+'ELEMENT'],_0x4cffa2=Uint32Array['BYTES_PER_'+'ELEMENT'],_0x276490=0x1*-0x20c5+-0x2116+-0x41db*-0x1,_0x57ed0c=!(-0x1*-0x2645+-0xbaa+-0x1*0x1a9b),_0x472c0c,_0x23c736,_0x48728d={'x':0x0,'y':0x0,'z':0x0},_0x52ea0d={'x':0x0,'y':0x0,'z':0x0},_0x373482=!(0xbd7+0x1cf+-0x1*0xda6),_0x3aeac1=!(-0x8f*0x13+-0x4*-0x901+0x7*-0x3a1),_0x5d5d52=!(0x192a+0x7fb+-0x2124),_0x26d358=!(0x158+0x2*-0x33a+0x51d),_0x2c1bc5=-0x1be*0xa+-0x67d+0x17e9,_0x2e3518=-0xa14+-0x3f5+-0x1*-0xe09,_0x13a790=!(0x21c7+-0x2*0x62b+0x55c*-0x4),_0x3fc5e1=null,_0x193b67=!(-0x1*0xa0a+0x1*0x5d9+0x432),_0x51c4e6=0x2d4*-0x2+0x10b1*0x1+-0xb09,_0x463a8e=-0x795+-0x132+-0x15*-0x6b,_0x3c139f={'x':0x0,'y':0x0,'z':0x0},_0x3505e0={'x':0x0,'y':0x0,'z':0x0},_0x3d11bd,_0xd372cb;self['onmessage']=async _0x3536fd=>{const {data:_0x3cae9a}=_0x3536fd;switch(_0x3cae9a['type']){case'initWorker':await _0xc67fcc(_0x3cae9a['sortWasmUr'+'l']),self['postMessag'+'e']({'type':'initialize'+'d'});break;case'initData':if(_0x276490=_0x3cae9a['centers']['length']/(-0x262+-0x24ee+0x2753),_0x276490<=-0x20f3+-0x2e*0xcf+-0x4625*-0x1||!_0x2e2cea)return;_0x46c920(),_0x57ed0c=_0x3cae9a['is4d'],_0x3d11bd=_0x3cae9a['id'];const _0x1c7b0f=_0x1c813a(_0x276490);if(_0x1f5838(_0x1c7b0f),_0x3eabcb[0xaad+0x257e+-0x461*0xb]=_0x3c139f['x'],_0x3eabcb[-0x1*-0x15ff+-0x1*-0x3a3+-0x19a1]=_0x3c139f['y'],_0x3eabcb[-0x9b4+-0x2105+0x2abb]=_0x3c139f['z'],_0x1d7609[0x2da+0x19aa+-0x1c84]=_0x3505e0['x'],_0x1d7609[0x26ed+0x2107+-0xa3*0x71]=_0x3505e0['y'],_0x1d7609[0xa*-0x27e+0x6b4+-0x91d*-0x2]=_0x3505e0['z'],_0x84990c&&_0x3cae9a['centers']&&_0x84990c['length']===_0x3cae9a['centers']['length']){const _0x2bfe3c=new Float32Array(_0x3cae9a['centers']);_0x84990c['set'](_0x2bfe3c);}if(_0x158709&&_0x3cae9a['timeIndex']&&_0x158709['length']===_0x3cae9a['timeIndex']['length']){const _0x2c365a=new Uint32Array(_0x3cae9a['timeIndex']);_0x158709['set'](_0x2c365a);}if(_0x4cf14f&&_0x3cae9a['motion']&&_0x4cf14f['length']===_0x3cae9a['motion']['length']){const _0x555606=new Float32Array(_0x3cae9a['motion']);_0x4cf14f['set'](_0x555606);}if(_0x57ed0c&&_0x58e193&&_0x22ab62&&_0x3cae9a['muT']&&_0x3cae9a['tScale']&&_0x58e193['length']===_0x3cae9a['muT']['length']&&_0x22ab62['length']===_0x3cae9a['tScale']['length']&&(_0x58e193['set'](_0x3cae9a['muT']),_0x22ab62['set'](_0x3cae9a['tScale'])),_0x163771){for(let _0x487c32=-0x227c+-0x1*-0xd3+0x21a9;_0x487c32<_0x163771['length'];++_0x487c32)_0x163771[_0x487c32]=_0x487c32;}_0x410a0d&&_0x3cae9a['timeOption']&&_0x410a0d['set'](_0x3cae9a['timeOption']),_0x5d2014(),_0x193b67=!(0x1*-0x7ed+0x3c2+0x42b),_0x5d5d52=!(-0x14fe+0x202a+0x37*-0x34),_0x2d1da5();break;case'setTime':_0x472c0c=_0x3cae9a['time'],_0x2d1da5();break;case'setUseTemp'+'oralSort':_0x373482=_0x3cae9a['useTempora'+'lSort'];break;case'setUseDyna'+'micSort':_0x3aeac1=_0x3cae9a['useDynamic'+'Sort'];break;case'sort':if(!_0x3eabcb)return;_0x3eabcb[-0x377+-0x13c2+0x1739]=_0x3cae9a['cameraPosi'+'tion']['x'],_0x3eabcb[-0xa20*0x1+-0x1*-0x16d7+-0xcb6]=_0x3cae9a['cameraPosi'+'tion']['y'],_0x3eabcb[-0x1083+-0x1ec5+0x2f4a]=_0x3cae9a['cameraPosi'+'tion']['z'],_0x1d7609[-0x19fb+-0x17ff*0x1+0x1*0x31fa]=_0x3cae9a['cameraDire'+'ction']['x'],_0x1d7609[0x154b+-0x1a49+-0x4ff*-0x1]=_0x3cae9a['cameraDire'+'ction']['y'],_0x1d7609[0x107a+-0xa38+0x40*-0x19]=_0x3cae9a['cameraDire'+'ction']['z'],_0x3c139f['x']=_0x3cae9a['cameraPosi'+'tion']['x'],_0x3c139f['y']=_0x3cae9a['cameraPosi'+'tion']['y'],_0x3c139f['z']=_0x3cae9a['cameraPosi'+'tion']['z'],_0x3505e0['x']=_0x3cae9a['cameraDire'+'ction']['x'],_0x3505e0['y']=_0x3cae9a['cameraDire'+'ction']['y'],_0x3505e0['z']=_0x3cae9a['cameraDire'+'ction']['z'],_0x2d1da5();break;}};const _0x46c920=()=>{_0x2e3518=Math['max'](-0x14c7*-0x1+0x15ba+-0x2a77,Math['min'](-0xed*-0x13+-0x1141+-0x42,Math['round'](Math['log2'](_0x276490/(-0x20ef*0x1+0x1027+0x10cc))))),_0x2c1bc5=(0x2637+-0x1ee4+-0x751*0x1)**_0x2e3518+(-0x2131+0x5*-0x45a+-0x1*-0x36f4);},_0x1f5838=_0x24d48b=>{_0x43c73b=0x26c0*0x1+0x5*0x6c3+-0x488f,_0x26c387=_0x43c73b+_0x276490*_0x4d74a0*(0x1b72+-0x12*-0x13c+-0x108d*0x3),_0x5aee7b=_0x26c387+(-0x5f4+-0x454+-0x556*-0x2)*_0x4d74a0*(-0x1da*-0x7+-0xc*-0x122+-0x1a8c),_0x35a777=_0x5aee7b+_0x276490*_0x4cffa2,_0x56571e=_0x35a777+(0x1c96+0x52*-0x2e+-0xdd7)*_0x4d74a0,_0x1cafc8=_0x56571e+(-0x224b*-0x1+-0x3cc+-0x2*0xf3e)*_0x4d74a0,_0x2ba68c=_0x1cafc8+(-0x5f6*0x5+0x38*0x8e+-0x13f)*_0x4d74a0,_0x2c41ca=_0x2ba68c+(0x238a+-0x66d+-0x1d1a)*_0x4d74a0,_0x4641d2=_0x2c41ca+_0x276490*_0x4cffa2,_0x84990c=new Float32Array(_0x24d48b,_0x43c73b,_0x276490*(0x1a8*-0x8+-0x1427+0x216a)),_0x410a0d=new Float32Array(_0x24d48b,_0x26c387,-0x4d1*0x4+0x10b7+0x355),_0x163771=new Uint32Array(_0x24d48b,_0x5aee7b,_0x276490),_0x3eabcb=new Float32Array(_0x24d48b,_0x35a777,0x1f89+0x83*0x47+-0x43db),_0x1d7609=new Float32Array(_0x24d48b,_0x56571e,0x3b4+0x6*0x427+-0x1c9b),_0x57ed0c&&(_0x3fd054=_0x4641d2+_0x2c1bc5*_0x4cffa2,_0x433de6=_0x3fd054+_0x276490*_0x4d74a0,_0x5cae0c=_0x433de6+_0x276490*_0x4d74a0,_0x52d04a=_0x5cae0c+_0x276490*(-0x1241*-0x2+0xd24*-0x1+-0x3*0x7c9)*_0x4d74a0,_0x58e193=new Float32Array(_0x24d48b,_0x3fd054,_0x276490),_0x22ab62=new Float32Array(_0x24d48b,_0x433de6,_0x276490),_0x4cf14f=new Float32Array(_0x24d48b,_0x5cae0c,_0x276490*(0x17*-0x9a+0x15f3+-0x22*0x3d)),_0x158709=new Uint32Array(_0x24d48b,_0x52d04a,_0x276490));},_0xc67fcc=async _0x5a9c54=>{_0x51c4e6=-0x1671+0xb75*0x2+-0x4*0x1e;const _0x1546f8={'env':{'memory':new WebAssembly['Memory']({'initial':_0x51c4e6}),'pthread_self':function(){return-0x4*0x101+0x2131*-0x1+0x2535;},'emscripten_builtin_memalign':function(){return-0x23fe+0x2*0x39f+0x1cc0;},'loggerVec3':(_0x21429a,_0x172458,_0x2ce0e4,_0x11c7af)=>{console['log']('C++\x20logger'+'Vec3\x20['+_0x21429a+']\x200:'+_0x172458+'\x201:'+_0x2ce0e4+'\x202:'+_0x11c7af);},'loggerFloat':(_0x3d056b,_0x246e0d)=>{console['log']('C++\x20LogFlo'+'at\x20['+_0x3d056b+']\x20a:'+_0x246e0d);},'loggerValue':(_0x382e8a,_0x54654f,_0xf5ad36,_0x5d5167,_0x2ca2d5)=>{console['log']('C++\x20logger'+'Value\x20['+_0x382e8a+']\x20minDist:'+_0x54654f+'\x20maxDist:'+_0xf5ad36+'\x20range:'+_0x5d5167+'\x20divider:'+_0x2ca2d5);},'loggerCamera':(_0x24bbda,_0x2a7427,_0x68538f,_0x58f7e2,_0x2eb522,_0x488ef5,_0x45fee8)=>{console['log']('C++\x20logger'+'Camera\x20['+_0x24bbda+']\x20x:'+_0x2a7427+'\x20y:'+_0x68538f+'\x20z:'+_0x58f7e2+'\x20dx:'+_0x2eb522+'\x20dy:'+_0x488ef5+'\x20dz:'+_0x45fee8);},'loggerBound':(_0x3da1f0,_0x559701,_0x260ab5,_0x22cebd,_0x15c3a6,_0x26c51)=>{console['log']('C++\x20logger'+'Bound\x20minX'+':'+_0x3da1f0+'\x20minY:'+_0x559701+'\x20minZ:'+_0x260ab5+'\x20maxX:'+_0x22cebd+'\x20maxY:'+_0x15c3a6+'\x20maxZ:'+_0x26c51);},'loggerDebug':_0x2f3eff=>{console['log']('C++\x20logger'+'Debug\x20['+_0x2f3eff+']');}}};try{const _0x421257=await(await fetch(_0x5a9c54))['arrayBuffe'+'r']();return _0x27b50c=(await WebAssembly['instantiat'+'e'](_0x421257,_0x1546f8))['instance'],_0x2e2cea=_0x1546f8['env']['memory'],_0x27b50c;}catch(_0xd78923){throw console['error']('WASM'+':',_0xd78923),_0xd78923;}},_0x442091=_0x6e208f=>{if(_0x6e208f<=0x141a+-0x33f+-0x5*0x35f)return 0x2*-0x15a+-0x20fe+-0x1*-0x23b3;let _0x2b3afd=_0x6e208f*_0x4d74a0*(-0x1da1+0x1*-0x1513+0x32b7);_0x2b3afd+=_0x6e208f*_0x4cffa2,_0x2b3afd+=(-0xaaf+-0x24f9+-0x1*-0x2fab)*_0x4d74a0,_0x2b3afd+=(-0x136*0x1d+0x12af+0x839*0x2)*_0x4d74a0,_0x2b3afd+=(0xc91*-0x1+0x130+0xb64)*_0x4d74a0,_0x2b3afd+=(0x1d*0xaf+0x94b*-0x4+0x115c)*_0x4d74a0,_0x2b3afd+=_0x6e208f*_0x4d74a0,_0x2b3afd+=_0x2c1bc5*_0x4cffa2,_0x2b3afd+=(-0x213*0x1+-0x79*0x5+0x4d4)*_0x4d74a0*(0x7d*-0x45+-0x2d*-0xad+-0x2*-0x1a5),_0x2b3afd+=_0x6e208f*_0x4cffa2,_0x57ed0c&&(_0x2b3afd+=_0x6e208f*_0x4d74a0,_0x2b3afd+=_0x6e208f*_0x4d74a0,_0x2b3afd+=_0x6e208f*_0x4d74a0*(-0x1b3b*0x1+0x526+0x1618));const _0x35a12c=(-0x29d*0x8+-0xf82+-0x26*-0xf7)*(-0xf61+0x23f6+-0x5*0x351);return Math['ceil'](_0x2b3afd/_0x35a12c);},_0x1c813a=_0x3a0f74=>{const _0x194680=_0x442091(_0x3a0f74);return _0x194680>_0x51c4e6?(_0x2e2cea['grow'](_0x194680-_0x51c4e6),_0x51c4e6=_0x194680):_0x2e2cea['grow'](-0xa*0x389+-0xa78+0x2dd2),_0x2e2cea['buffer'];},_0x5d2014=()=>{if(!_0x27b50c)return;const {calcAABB:_0x3da1a3}=_0x27b50c['exports'];_0x3da1a3(_0x43c73b,_0x1cafc8,_0x2ba68c,_0x276490);},_0x2d1da5=()=>{_0x3fc5e1&&clearTimeout(_0x3fc5e1),_0x3fc5e1=setTimeout(()=>{_0x3fc5e1=null,_0x5a9292();},0x1*0x148e+0x11b3*-0x1+-0x2db);},_0x5a9292=()=>{if(!_0x27b50c||!_0x193b67||_0x163771['length']!==_0x276490||_0x5aee7b===null||_0x43c73b===null||_0x35a777===null||_0x56571e===null||_0x1cafc8===null||_0x2ba68c===null)return;const _0x989209=_0x3eabcb[0xa9d+-0x94*0x1+-0xa09],_0x3b55=_0x3eabcb[-0x1768+-0x252b+0x3c94],_0x18cb92=_0x3eabcb[-0x18fc+-0x223e+0x3b3c],_0x309544=_0x1d7609[-0x269*-0x3+0x25ea+-0x379*0xd],_0x576ef9=_0x1d7609[-0x1f16+0x825+0x16f2],_0x38e42f=_0x1d7609[0x13b*0x19+0x5*-0x56f+0x1cb*-0x2],_0x41b01f=0x143f+0x789*0x3+0x5*-0x892+0.001;if(!_0x5d5d52&&Math['abs'](_0x989209-_0x48728d['x'])<_0x41b01f&&Math['abs'](_0x3b55-_0x48728d['y'])<_0x41b01f&&Math['abs'](_0x18cb92-_0x48728d['z'])<_0x41b01f&&Math['abs'](_0x309544-_0x52ea0d['x'])<_0x41b01f&&Math['abs'](_0x576ef9-_0x52ea0d['y'])<_0x41b01f&&Math['abs'](_0x38e42f-_0x52ea0d['z'])<_0x41b01f&&Math['abs'](_0x472c0c-_0x23c736)<-0x5*-0x6ac+-0x1*-0x14f7+0x3653*-0x1+0.01)return;if(_0x26d358){_0x13a790=!(-0xa0a+0x7*0x10f+0x2a1);return;}_0x26d358=!(0x411+0x231+-0xb2*0x9),_0x5d5d52=!(0x4*-0x1c3+-0x25*0x43+0x10bc),_0x23c736=_0x472c0c,_0x48728d['x']=_0x989209,_0x48728d['y']=_0x3b55,_0x48728d['z']=_0x18cb92,_0x52ea0d['x']=_0x309544,_0x52ea0d['y']=_0x576ef9,_0x52ea0d['z']=_0x38e42f,_0x13a790=!(0x7*-0x53+-0x2*0x93+0x36c);const {sortIndexes:_0x308c54}=_0x27b50c['exports'];try{const _0x5a6cc1=_0x308c54(_0x5aee7b,_0x43c73b,_0x5cae0c,_0x3fd054,_0x433de6,_0x35a777,_0x56571e,_0x1cafc8,_0x2ba68c,_0x2c41ca,_0x4641d2,_0x472c0c||0x753+-0x6f+-0x6e4,_0x373482,_0x3aeac1,_0x57ed0c,_0x276490,_0x2c1bc5,_0x2e3518,_0x26c387,_0x52d04a),_0x3ff4a2=new Uint32Array(_0x163771);if(_0x5a6cc1===-0x1ae0*-0x1+0x2b*0x1c+0x56*-0x5e){debugger;console['log']('____\x20ENGIN'+'E','Indexes\x20co'+'unt\x20===\x20',_0x5a6cc1);}const _0x5ebac9=_0x276490!==_0x463a8e||_0xd372cb!==_0x3d11bd;self['postMessag'+'e']({'type':'sortComple'+'ted','count':_0x5a6cc1,'order':_0x3ff4a2,'isNewOrder':_0x5ebac9},[_0x3ff4a2['buffer']]),_0x463a8e=_0x276490,_0xd372cb=_0x3d11bd;}catch(_0x5d3074){console['error'](':',_0x5d3074),self['postMessag'+'e']({'type':'error','error':_0x5d3074['message']});}_0x26d358=!(0xf84+0x25*0x77+-0x20b6),_0x13a790&&_0x2d1da5();};}class yC extends me{constructor(){super(),h(this,'worker',null),h(this,'numSplats',-0x899+-0x26a9+0x2f42),h(this,'is4d',!(0x8a+0x5*-0x257+-0x1*-0xb29)),h(this,'sortStartT'+'ime',-0x179d*0x1+0xb45+-0xa*-0x13c),h(this,'orderTextu'+'re'),h(this,'backOrderT'+'exture'),h(this,'data',{}),(this['orderTextu'+'re']=null,this['backOrderT'+'exture']=null,this['worker']=null,this['_initWorke'+'r']());}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+SC['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'}))),this['worker']['onmessage']=_0x242a1b=>{var _0x4604a4;if(!this['worker'])return;const {data:_0x4e4a93}=_0x242a1b;switch(_0x4e4a93['type']){case'initialize'+'d':this['fire']('initialize'+'d');break;case'sortComple'+'ted':_0x4e4a93['order']&&(_0x4e4a93['isNewOrder']&&(this['orderTextu'+'re']=this['backOrderT'+'exture']),(_0x4604a4=this['orderTextu'+'re'])==null||_0x4604a4['write'](-0x1856+-0x2375+0x1*0x3bcb,-0x1bf3+-0xfa0+0x1e5*0x17,this['orderTextu'+'re']['width'],this['orderTextu'+'re']['height']-(0x1*-0xdcd+-0x12ef+0x20bd),_0x4e4a93['order']));let _0xc21273=-0x1c2+-0x11dd+0x139f*0x1;this['sortStartT'+'ime']!==0x97*0x21+-0x261f+-0x18e*-0xc&&(_0xc21273=performance['now']()-this['sortStartT'+'ime']),this['fire']('updated',_0x242a1b['data']['count'],_0xc21273,_0x4e4a93['isNewOrder']),this['sortStartT'+'ime']=-0x20b*-0xd+-0x263a+0x67*0x1d;break;case'error':console['error']('Worker:',_0x4e4a93['error']),this['fire']('error',_0x4e4a93['error']);break;}},this['worker']['postMessag'+'e']({'type':'initWorker','sortWasmUrl':'https://fr'+'ontend.4dv'+'-intellige'+'nce.com/vi'+'ewer-stati'+'c/sorter-t'+'railing.wa'+'sm'});}['initData'](_0xd056a9,_0x5d1756,_0x55dba8,_0x204c61,_0x1fce5a,_0x2a2b44,_0x1e8798,_0x53dd57){var _0x1338f4;this['is4d']=_0x53dd57,this['numSplats']=_0x5d1756['length']/(-0x8*0x460+0x7db*-0x1+0x1f*0x162),(!_0x1e8798||_0x1e8798['length']===0x409+-0x236*0xb+-0x6c3*-0x3)&&(_0x1e8798=[0x2*-0x321+-0x1*0x241d+0x2a5f,-0x2015+-0x2*0x506+0x2a5d]),this['orderTextu'+'re']||(this['orderTextu'+'re']=_0xd056a9),this['backOrderT'+'exture']=_0xd056a9;const _0x100f03=new Date()['getTime']();(_0x1338f4=this['worker'])==null||_0x1338f4['postMessag'+'e']({'type':'initData','centers':_0x5d1756,'muT':_0x55dba8,'tScale':_0x204c61,'motion':_0x1fce5a,'timeIndex':_0x2a2b44,'timeOption':_0x1e8798,'is4d':_0x53dd57,'id':_0x100f03});}['setCamera'](_0x23a3a1,_0x326582){this['worker']&&(!_0x23a3a1||!_0x326582||(this['data']['cameraPosi'+'tion']={'x':_0x23a3a1['x'],'y':_0x23a3a1['y'],'z':_0x23a3a1['z']},this['data']['cameraDire'+'ction']={'x':_0x326582['x'],'y':_0x326582['y'],'z':_0x326582['z']},this['sortStartT'+'ime']===-0x322*-0x8+0x50f+0x1*-0x1e1f&&(this['sortStartT'+'ime']=performance['now']()),this['worker']['postMessag'+'e']({'type':'sort','cameraPosition':{'x':_0x23a3a1['x'],'y':_0x23a3a1['y'],'z':_0x23a3a1['z']},'cameraDirection':{'x':_0x326582['x'],'y':_0x326582['y'],'z':_0x326582['z']}})));}['setCurrent'+'Time'](_0x277f76){this['worker']&&(this['data']['time']=_0x277f76,this['sortStartT'+'ime']===-0xe3c+0xa2d*0x3+-0x104b&&(this['sortStartT'+'ime']=performance['now']()),this['worker']['postMessag'+'e']({'type':'setTime','time':_0x277f76}));}['setUseTemp'+'oralSort'](_0x3f851c){this['worker']&&this['worker']['postMessag'+'e']({'type':'setUseTemp'+'oralSort','useTemporalSort':_0x3f851c});}['setUseDyna'+'micSort'](_0x10a45a){this['worker']&&this['worker']['postMessag'+'e']({'type':'setUseDyna'+'micSort','useDynamicSort':_0x10a45a});}['destroy'](){this['worker']&&(this['worker']['terminate'](),this['worker']=null);}}const vC=new te(),Va=new D(),Ga=new D(),Sc=[0xb0d+-0x19b8+0xeab,-0x1c*-0x123+0x1489*0x1+-0x345d];class xC{constructor(_0x3824d9,_0x4b69ef={}){h(this,'resource'),h(this,'orderTextu'+'re'),h(this,'backOrderT'+'exture'),h(this,'_material'),h(this,'meshInstan'+'ce'),h(this,'options',{}),h(this,'sorter',null),h(this,'time',-0x1718+-0xa8*-0x13+0xaa0),h(this,'lastCamera'+'Position',new D()),h(this,'lastCamera'+'Direction',new D()),h(this,'resolveSH',null),h(this,'cameras',[]),h(this,'forceUpDat'+'eSorterTim'+'e',(_0x413bf1,_0x44f35d=void(0x1d3f+0x3*0xba2+0x1*-0x4025))=>{(_0x44f35d||_0x44f35d===-0x252a+-0x1ea6+0x43d0)&&(this['material']['setParamet'+'er']('uTime',_0x44f35d),this['updateTime'](_0x44f35d)),this['sort'](_0x413bf1);}),(console['log']('____\x20ENGIN'+'E\x20IVAN','new\x20GSplat'+'Instance',_0x3824d9['numSplats']),this['resource']=_0x3824d9,this['orderTextu'+'re']=this['resource']['createText'+'ure']('splatOrder',Ki,this['resource']['evalTextur'+'eSize'](this['resource']['numSplats'])),this['backOrderT'+'exture']=null,_0x4b69ef['material']?(this['_material']=_0x4b69ef['material'],this['_material']['setParamet'+'er']('splatOrder',this['orderTextu'+'re'])):(this['_material']=new Xn({'uniqueName':'SplatMater'+'ial','vertexGLSL':'#include\x20\x22'+'gsplatVS\x22','fragmentGLSL':'#include\x20\x22'+'gsplatPS\x22','vertexWGSL':'#include\x20\x22'+'gsplatVS\x22','fragmentWGSL':'#include\x20\x22'+'gsplatPS\x22','attributes':{'vertex_position':Me,'vertex_id_attrib':ph}}),this['configureM'+'aterial'](this['_material']),this['_material']['update']()),this['meshInstan'+'ce']=new He(this['resource']['mesh'],this['_material']),this['meshInstan'+'ce']['setInstanc'+'ing'](this['resource']['instanceIn'+'dices'],!(0x2572+0x1*0x19db+-0x1*0x3f4d)),this['meshInstan'+'ce']['gsplatInst'+'ance']=this,this['meshInstan'+'ce']['instancing'+'Count']=-0xd12+-0xcea*-0x1+-0x8*-0x5,this['sorter']=new yC(),this['sorter']['on']('initialize'+'d',()=>{var _0x280df2,_0x2b9d56,_0x384c42,_0x19427c,_0x897a5f,_0x34c1f0,_0x21b9eb,_0x2dc492,_0x581281,_0x4d146c,_0x32aa3b;const _0x32bf5e=new Float32Array(this['resource']['centers']['buffer']['slice']()),_0x572485=new Float32Array(((_0x2b9d56=(_0x280df2=this['resource']['muT'])==null?void(0xcbb*-0x1+0x26a8+-0x19ed*0x1):_0x280df2['buffer'])==null?void(-0x3fb*0x3+-0x7b5*-0x3+0x12*-0x9f):_0x2b9d56['slice']())??new Float32Array()),_0x19b8e8=new Float32Array(((_0x19427c=(_0x384c42=this['resource']['tScale'])==null?void(0x4*0x517+0x1ad*0x1+-0x1609):_0x384c42['buffer'])==null?void(0xd1e+0x8cb+-0x15e9):_0x19427c['slice']())??new Float32Array()),_0x31deea=new Float32Array(((_0x34c1f0=(_0x897a5f=this['resource']['motion'])==null?void(-0xc9b+-0x1c65+-0x148*-0x20):_0x897a5f['buffer'])==null?void(0x70d*0x1+0x1f08+-0x1*0x2615):_0x34c1f0['slice']())??new Float32Array()),_0x3780bd=new Float32Array(((_0x2dc492=(_0x21b9eb=this['resource']['timeIndex'])==null?void(-0x11dc+0x6*0x2cd+-0x1*-0x10e):_0x21b9eb['buffer'])==null?void(-0x1*-0x175d+-0x1096+-0x6c7):_0x2dc492['slice']())??new Float32Array(-0x3*0x2e7+0x1a*-0x38+0xe65)),_0xdc0c57=new Float32Array(((_0x4d146c=(_0x581281=this['resource']['timeOption'])==null?void(0x96a+-0x1114+0x7aa*0x1):_0x581281['buffer'])==null?void(0x1*-0x257+-0x131d+0x1574):_0x4d146c['slice']())??new Float32Array());(_0x32aa3b=this['sorter'])==null||_0x32aa3b['initData'](this['orderTextu'+'re'],_0x32bf5e,_0x572485,_0x19b8e8,_0x31deea,_0x3780bd,_0xdc0c57,this['resource']['is4D']);}),this['sorter']['on']('updated',async(_0x195b48,_0x5a2529,_0x305399)=>{var _0x1d8aca;this['meshInstan'+'ce']['instancing'+'Count']=Math['ceil'](_0x195b48/this['resource']['instanceSi'+'ze']),_0x305399&&this['backOrderT'+'exture']&&(console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatInst'+'ance\x20updat'+'ed'),[this['orderTextu'+'re'],this['backOrderT'+'exture']]=[this['backOrderT'+'exture'],this['orderTextu'+'re']],await this['resource']['updateText'+'ure'](),this['resource']['configureM'+'aterial'](this['_material']),this['_material']['setParamet'+'er']('splatOrder',this['orderTextu'+'re'])),_0x305399&&((_0x1d8aca=this['resource'])==null||_0x1d8aca['fireAssets'+'ManagerTim'+'eIndex']()),this['material']['setParamet'+'er']('numSplats',_0x195b48);}),this['setHighQua'+'litySH'](_0x4b69ef['highQualit'+'ySH']??!(-0x255*0x6+-0x4f2+0x1*0x12f1)));}async['updateInst'+'anceData'](_0x584a3b){var _0x48b904,_0x19ef8b;console['log']('____\x20ENGIN'+'E\x20IVAN','updateInst'+'anceData\x20A'+'SSETS\x20GSpl'+'atInstance',_0x584a3b['numSplats']),this['resource']=_0x584a3b;const _0x2a7799=this['resource']['evalTextur'+'eSize'](_0x584a3b['centers']['length']/(-0x1*-0xe55+0x9*0x222+-0x2184));return(_0x48b904=this['backOrderT'+'exture'])==null||_0x48b904['destroy'](),this['backOrderT'+'exture']=this['resource']['createText'+'ure']('splatOrder'+'2',Ki,_0x2a7799),this['meshInstan'+'ce']['setInstanc'+'ing'](this['resource']['instanceIn'+'dices'],!(0x73*-0x8+0xbe0+0x109*-0x8)),(_0x19ef8b=this['sorter'])==null||_0x19ef8b['initData'](this['backOrderT'+'exture'],_0x584a3b['centers'],_0x584a3b['muT'],_0x584a3b['tScale'],_0x584a3b['motion'],_0x584a3b['timeIndex'],_0x584a3b['timeOption'],_0x584a3b['is4D']),new Promise(_0x11f70a=>{var _0x32a343;const _0x23c3a0=(_0xea6a38,_0x22c4aa,_0x3891ac)=>{var _0x17d338;_0x3891ac&&((_0x17d338=this['sorter'])==null||_0x17d338['off']('updated',_0x23c3a0),_0x11f70a(!(-0x1*-0x1609+-0x1*0xf5f+0x1*-0x6aa)));};(_0x32a343=this['sorter'])==null||_0x32a343['on']('updated',_0x23c3a0);});}['destroy'](){var _0x4ecab7,_0x14cb11,_0x44679a,_0x5cfbeb,_0x5ae829,_0x388e29;(_0x4ecab7=this['resolveSH'])==null||_0x4ecab7['destroy'](),(_0x14cb11=this['material'])==null||_0x14cb11['destroy'](),(_0x44679a=this['meshInstan'+'ce'])==null||_0x44679a['destroy'](),(_0x5cfbeb=this['sorter'])==null||_0x5cfbeb['destroy'](),(_0x5ae829=this['orderTextu'+'re'])==null||_0x5ae829['destroy'](),(_0x388e29=this['backOrderT'+'exture'])==null||_0x388e29['destroy']();}set['material'](_0x31c097){console['log']('____\x20ENGIN'+'E\x20IVAN','\x20GSplatIns'+'tance.set\x20'+'material'),this['_material']!==_0x31c097&&(this['_material']=_0x31c097,this['_material']['setParamet'+'er']('splatOrder',this['orderTextu'+'re']),this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['material']=_0x31c097));}get['material'](){return this['_material'];}['configureM'+'aterial'](_0x94889c,_0x372c4b={}){console['log']('____\x20ENGIN'+'E\x20IVAN','\x20GSplatIns'+'tance.conf'+'igureMater'+'ial'),this['resource']['configureM'+'aterial'](_0x94889c),_0x94889c['setParamet'+'er']('numSplats',0x25b1+0x1937+0x84*-0x7a),_0x94889c['setParamet'+'er']('splatOrder',this['orderTextu'+'re']),_0x94889c['setParamet'+'er']('alphaClip',0x1*0x22a9+-0x1ed4*-0x1+0xd19*-0x5+0.3),_0x94889c['setDefine']('DITHER_'+(_0x372c4b['dither']?'BLUENOISE':'NONE'),''),_0x94889c['cull']=bt,_0x94889c['blendType']=_0x372c4b['dither']?Cs:Zs,_0x94889c['depthWrite']=!!_0x372c4b['dither'];}['updateView'+'port'](_0x24ff55){var _0x401d79;const _0x1563d5=_0x24ff55==null?void(0x28*-0x14+0x1*0xadf+-0x7bf):_0x24ff55['camera'],_0x31c7cd=_0x1563d5==null?void(0x1a4e+-0xa1*-0x27+0x7*-0x743):_0x1563d5['renderTarg'+'et'],{width:_0x36f9f3,height:_0x4f0846}=_0x31c7cd??this['resource']['device'];Sc[0xdcd+-0x1*0x868+-0x1*0x565]=_0x36f9f3,Sc[-0xd+0x1728+-0x171a]=_0x4f0846;const _0x18c463=(_0x401d79=_0x1563d5==null?void(0x1*-0xfad+0x358+-0x1*-0xc55):_0x1563d5['camera'])==null?void(-0x8*0x344+-0x1b09+0x3529):_0x401d79['xr'];_0x18c463!=null&&_0x18c463['active']&&_0x18c463['views']['list']['length']===-0xc3e+-0x2*-0x12df+-0x197e&&(Sc[-0x5e6*-0x1+-0xed2+0x8ec]*=-0xb*-0x243+-0x1996+0xb5+0.5),this['material']['setParamet'+'er']('viewport',Sc);}['sort'](_0x47a381){if(this['sorter']){const _0x831788=_0x47a381['getWorldTr'+'ansform']();_0x831788['getTransla'+'tion'](Va),_0x831788['getZ'](Ga);const _0x4a5968=this['meshInstan'+'ce']['node']['getWorldTr'+'ansform'](),_0x504467=vC['invert'](_0x4a5968);_0x504467['transformP'+'oint'](Va,Va),_0x504467['transformV'+'ector'](Ga,Ga),(!Va['equalsAppr'+'ox'](this['lastCamera'+'Position'])||!Ga['equalsAppr'+'ox'](this['lastCamera'+'Direction']))&&(this['lastCamera'+'Position']['copy'](Va),this['lastCamera'+'Direction']['copy'](Ga),this['sorter']['setCamera'](Va,Ga)),this['sorter']['setCurrent'+'Time'](this['time']);}this['updateView'+'port'](_0x47a381);}['update'](){var _0xc1a5db;if(this['cameras']['length']>0x1*-0xe09+-0xbff+-0x22*-0xc4){const _0x5b6850=this['cameras'][-0x1b20+-0x1052*0x2+0x3bc4];this['sort'](_0x5b6850['_node']),(_0xc1a5db=this['resolveSH'])==null||_0xc1a5db['render'](_0x5b6850['_node'],this['meshInstan'+'ce']['node']['getWorldTr'+'ansform']()),this['cameras']['length']=0x1267+0x1b0f+-0x2d76;}}['setHighQua'+'litySH'](_0x182716){const {resource:_0x53f243}=this,{gsplatData:_0x14d44c}=_0x53f243;_0x14d44c instanceof gC&&_0x14d44c['shBands']>-0x1f45+0xb11*0x1+0x4*0x50d&&_0x182716===!!this['resolveSH']&&(this['resolveSH']?(this['resolveSH']['destroy'](),this['resolveSH']=null):this['resolveSH']=new fC(_0x53f243['device'],this));}['updateTime'](_0x526039){this['time']=_0x526039;}}class Rv{constructor(_0x5263cc,_0x5574a5){h(this,'sceneInfo',{}),h(this,'isDestroye'+'d',!(-0x20*0x50+-0x1025*0x1+0x1a25)),h(this,'device'),h(this,'gsplatData'),h(this,'centers'),h(this,'aabb'),h(this,'mesh'),h(this,'instanceIn'+'dices'),h(this,'gsplatInst'+'ance'),(this['device']=_0x5263cc,this['gsplatData']=_0x5574a5,this['isDestroye'+'d']=!(0xf96+0x4*-0x87+-0xd79*0x1));const _0x469236=-0x24a*0x2+-0x297*-0x5+-0x5*0x193,_0xdc3140=Math['ceil'](_0x5574a5['numSplats']/_0x469236)*_0x469236/_0x469236,_0xadde3c=new Uint32Array(_0xdc3140);for(let _0xfa2f09=-0xd7f*0x1+-0x3*-0xcf+-0xb12*-0x1;_0xfa2f09<_0xdc3140;++_0xfa2f09)_0xadde3c[_0xfa2f09]=_0xfa2f09*_0x469236;const _0x5438d7=new kt(_0x5263cc,[{'semantic':ph,'components':0x1,'type':el,'asInt':!(0x68*-0x19+0x16e*0x1+0x8ba)}]),_0x470961=new Float32Array((-0x6*0x5c3+-0x613+-0xb*-0x3b3)*_0x469236),_0x4d0257=new Uint32Array((-0xf67+0x5b*0x27+0x190)*_0x469236);for(let _0x42a7f4=0x7c3+0x148c+-0x1c4f;_0x42a7f4<_0x469236;++_0x42a7f4){_0x470961['set']([-(0x3f7+0x2056+0x194*-0x17),-(-0x1*-0x13af+-0x2463+0x1*0x10b5),_0x42a7f4,-0xfa1+-0x11ec+0x5*0x6b6,-(-0x15cc+-0x538+-0x1*-0x1b05),_0x42a7f4,0x1675+-0x96b*-0x4+-0x3c20,0xc03+0x1d3*-0x5+-0x2e3*0x1,_0x42a7f4,-(0x17ef+-0x1fa2*0x1+0x7b4),-0x2ea*0xc+-0xbbe+0x2eb7,_0x42a7f4],_0x42a7f4*(-0x17af+0x445*-0x5+0x4*0xb45));const _0x10b22d=_0x42a7f4*(-0x11*-0x43+0x3c*0x29+-0x2cf*0x5);_0x4d0257['set']([-0x2276+-0x1175+0x33eb*0x1+_0x10b22d,-0xc61*0x1+-0x1832+0x124a*0x2+_0x10b22d,-0x5a6*-0x2+-0x2*0x3fb+0x11c*-0x3+_0x10b22d,0x8cb*0x2+-0x36c+-0xe2a+_0x10b22d,-0x1cde+-0x9*0x41b+0x41d3+_0x10b22d,-0x2670+-0x336+0x87*0x4f+_0x10b22d],_0x42a7f4*(-0x1*-0x2047+-0x1*-0x186f+-0x38b0));}this['mesh']=new Ge(_0x5263cc),this['mesh']['setPositio'+'ns'](_0x470961,0x2bc*-0xd+-0x3*-0xbe1+-0x14),this['mesh']['setIndices'](_0x4d0257),this['mesh']['update'](),this['mesh']['incRefCoun'+'t'](),this['instanceIn'+'dices']=new Is(_0x5263cc,_0x5438d7,_0xdc3140,{'usage':ms,'data':_0xadde3c['buffer']});}['updateData'](){var _0x4f4a22;const _0x132031=this['gsplatData'];if(!_0x132031)return;const _0x49a90e=-0x46f+0x548+-0x1*0x59,_0x49af19=Math['ceil'](_0x132031['numSplats']/_0x49a90e)*_0x49a90e/_0x49a90e,_0x4bbe21=new Uint32Array(_0x49af19);for(let _0x4714ba=-0x2596+-0x59d+-0x2b33*-0x1;_0x4714ba<_0x49af19;++_0x4714ba)_0x4bbe21[_0x4714ba]=_0x4714ba*_0x49a90e;const _0x5a4b50=new kt(this['device'],[{'semantic':ph,'components':0x1,'type':el,'asInt':!(0x451*0x1+-0x241f+0x17*0x162)}]),_0x553287=new Float32Array((-0x1579+-0x2016+0x359b*0x1)*_0x49a90e),_0x117663=new Uint32Array((0x3bb+0x1160+-0x1*0x1515)*_0x49a90e);for(let _0x32df30=0x1c4e+0x2641+-0x428f;_0x32df30<_0x49a90e;++_0x32df30){_0x553287['set']([-(0x168a+0x19*0x114+-0x317d),-(-0x3*-0x407+-0x1e46+0x1232),_0x32df30,0x53*-0x39+-0x1f60+0x31dc,-(0xcb6+-0x923*-0x1+-0x15d8),_0x32df30,0x11*0x4f+-0x1f7e*0x1+0x1a40,0x138*-0x19+-0x2*0x727+0x1*0x2cc7,_0x32df30,-(-0x85*-0x2f+-0x390+-0x14da),-0x15e2+-0x1*0x175d+0x20*0x16a,_0x32df30],_0x32df30*(-0x9d*-0x1+0x2c3*-0x1+0x119*0x2));const _0x34f278=_0x32df30*(0x1579+0x1db9+0x1*-0x332e);_0x117663['set']([0x1*-0xdba+0x22a9+-0x14ef+_0x34f278,0x17cd*0x1+0x6*0x3c3+-0xa*0x4a3+_0x34f278,0x312+0x1*-0x229+-0xe7+_0x34f278,-0x576*-0x4+-0x7f7*-0x2+-0x2*0x12e3+_0x34f278,-0x26fc+-0x5a5+0x2ca3+_0x34f278,0x58e+0x503*0x2+-0xf91+_0x34f278],_0x32df30*(0xc77+0xaf*0x4+0x5*-0x309));}this['mesh']['setPositio'+'ns'](_0x553287,-0x1bb*-0xb+0x1*0xbf0+-0x1*0x1ef6),this['mesh']['setIndices'](_0x117663),this['mesh']['update'](),this['mesh']['incRefCoun'+'t'](),(_0x4f4a22=this['instanceIn'+'dices'])==null||_0x4f4a22['destroy'](),this['instanceIn'+'dices']=new Is(this['device'],_0x5a4b50,_0x49af19,{'usage':ms,'data':_0x4bbe21['buffer']});}['updateText'+'ure'](){}['destroy'](){var _0x392bc7,_0x138023,_0x224ab3,_0x4393e5;(_0x392bc7=this['mesh'])==null||_0x392bc7['destroy'](),(_0x138023=this['instanceIn'+'dices'])==null||_0x138023['destroy'](),(_0x224ab3=this['gsplatData'])==null||_0x224ab3['destroy'](),this['gsplatData']=null,(_0x4393e5=this['gsplatInst'+'ance'])==null||_0x4393e5['destroy'](),this['gsplatInst'+'ance']=void(0x1*-0x43f+0x18ef+-0x14b0*0x1),this['isDestroye'+'d']=!(0x17bd*-0x1+-0x119d+0x295a),this['mesh']=null;}get['instanceSi'+'ze'](){return 0x2052+-0x1d3a+0x4*-0xa6;}get['numSplats'](){var _0x8f7b4e;return(_0x8f7b4e=this['gsplatData'])==null?void(-0x1ff+0x28d+-0x8e):_0x8f7b4e['numSplats'];}['setSceneIn'+'fo'](_0x25ec55){}['configureM'+'aterial'](_0x587794){}['evalTextur'+'eSize'](_0x5a620e){return J['ZERO'];}['appendGSpl'+'atResource'](_0x3d064e,_0x5d6b8d,_0xe2f82e,_0x143424,_0x35edb1){}['fireAssets'+'ManagerTim'+'eIndex'](){}['createText'+'ure'](_0x48cbe0,_0x1ef57d,_0x4abebf,_0x25707){return new _e(this['device'],{'name':_0x48cbe0,'width':_0x4abebf['x'],'height':_0x4abebf['y'],'format':_0x1ef57d,'cubemap':!(0x259d*-0x1+-0x1f*0x1f+0x295f),'mipmaps':!(-0x215a+-0x18f*-0x16+-0xef),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue,..._0x25707?{'levels':[_0x25707]}:{}});}['instantiat'+'e'](){w['removed']('GSplatReso'+'urce.insta'+'ntiate\x20is\x20'+'removed.\x20U'+'se\x20gsplat\x20'+'component\x20'+'instead');}['createInst'+'ance'](_0x14ca8a,_0x28bc3c){return this['gsplatInst'+'ance']=new xC(_0x14ca8a,_0x28bc3c),this['gsplatInst'+'ance'];}}async function TC(){const _0x27f656=new Float32Array(-0xf7*0x3+-0x5f*0x18+0xbce),_0x4df346=new Int32Array(_0x27f656['buffer']);let _0x4b5804=null,_0x21ab7f=null,_0x4b9013=null,_0x20c5e5=null,_0x25b632=null,_0x486c14=null,_0x1a4ae1=null,_0x4d1ad0=null;self['onmessage']=async _0x54dd56=>{const {data:_0x35c927}=_0x54dd56;switch(_0x35c927['type']){case'initWorker':break;case'updateSHDa'+'ta1':_0x20fb43(_0x35c927['numSplats'],_0x35c927['shBands'],_0x35c927['SHData']);break;case'updateColo'+'rData':_0x58668a(_0x35c927['numSplats'],_0x35c927['cr'],_0x35c927['cg'],_0x35c927['cb'],_0x35c927['ca']);break;case'updateTran'+'sformData':_0x447695(_0x35c927['numSplats'],_0x35c927['is4D'],_0x35c927['x'],_0x35c927['y'],_0x35c927['z'],_0x35c927['rx'],_0x35c927['ry'],_0x35c927['rz'],_0x35c927['rw'],_0x35c927['mx'],_0x35c927['my'],_0x35c927['mz'],_0x35c927['sx'],_0x35c927['sy'],_0x35c927['sz'],_0x35c927['muT'],_0x35c927['tScale']);break;case'calcAabb':_0x547155(_0x35c927['numSplats'],_0x35c927['x'],_0x35c927['y'],_0x35c927['z'],_0x35c927['sx'],_0x35c927['sy'],_0x35c927['sz']);break;case'destroyWor'+'ker':_0x135793();break;}};class _0x3880c8{constructor(_0xb4ab73=0x2da+0x2192+-0x246c,_0xda17c9=-0x536*-0x7+-0x10bd+-0x13bd,_0x4a90a2=-0x1bbd+-0xd*0x15d+0x422*0xb,_0x140feb=-0x1f2e+-0x9*0x83+-0xbee*-0x3){this['x']=_0xb4ab73,this['y']=_0xda17c9,this['z']=_0x4a90a2,this['w']=_0x140feb;}['set'](_0x45d1cf,_0xfbcf86,_0x191aef,_0x1dd2ea){return this['x']=_0x45d1cf,this['y']=_0xfbcf86,this['z']=_0x191aef,this['w']=_0x1dd2ea,this;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w']);}['normalize'](_0x2ed15c=this){let _0x4ccb40=_0x2ed15c['length']();return _0x4ccb40===0x1c15+0x238d+-0x1*0x3fa2?(this['x']=this['y']=this['z']=0x2ed+0x4*-0x3d+-0x5*0x65,this['w']=0x170*-0x3+0x21be+-0x1d6d):(_0x4ccb40=(0x3d*-0x49+0x5*0x203+0x1*0x757)/_0x4ccb40,this['x']=_0x2ed15c['x']*_0x4ccb40,this['y']=_0x2ed15c['y']*_0x4ccb40,this['z']=_0x2ed15c['z']*_0x4ccb40,this['w']=_0x2ed15c['w']*_0x4ccb40),this;}['mulScalar'](_0x320bde,_0x2a66af=this){return this['x']=_0x2a66af['x']*_0x320bde,this['y']=_0x2a66af['y']*_0x320bde,this['z']=_0x2a66af['z']*_0x320bde,this['w']=_0x2a66af['w']*_0x320bde,this;}}const _0x1aecf5=_0x41fe7d=>{_0x27f656[-0x1df9*-0x1+0x191c+-0x3715]=_0x41fe7d;const _0x2b7cb9=_0x4df346[0x258e+0x2247*0x1+-0x25*0x1f1];let _0x3cd773=_0x2b7cb9>>0x1*-0xcf9+0x1c23+-0xf1a&-0xa9b*0x10+0x1*-0xac22+0x1d5d2,_0x36e482=_0x2b7cb9>>0x1b5e+0x1*0x2030+-0x1*0x3b82&-0x1753+-0x446*-0x6+0x5ae;const _0x1cb7e7=_0x2b7cb9>>0x20c4+-0x18a3+0x405*-0x2&-0x656+0x3f1*-0x5+0xd85*0x2;return _0x1cb7e7<-0x9cb+-0x12d2+0x1d04?_0x3cd773:_0x1cb7e7>0x1*0x1cef+-0x3*-0x17b+-0x20d2?(_0x3cd773|=0x69ed+-0x29*-0x35f+0x42*-0x1d2,_0x3cd773|=(_0x1cb7e7===-0x1799+0x24f*-0x5+0x2423?0x19c*0xb+-0xa42+-0x772:-0x5d+0xb*0x1df+-0x1437)&&_0x2b7cb9&-0x1*0x790643+-0x1fc63*0x65+0xc26bd*0x25,_0x3cd773):_0x1cb7e7<-0x2387+-0x108+0x2500?(_0x36e482|=0x0+0x92a+-0x12a,_0x3cd773|=(_0x36e482>>-0x7cd*-0x5+-0x1f*-0xa9+0xbce*-0x5-_0x1cb7e7)+(_0x36e482>>0x1*0x17a9+0xf16+-0x1327*0x2-_0x1cb7e7&0x1071+0x2*-0xec7+0xd1e),_0x3cd773):(_0x3cd773|=_0x1cb7e7-(-0x1036+-0x12c6+0x4*0x8db)<<-0x825+-0xde9*-0x1+0x1*-0x5ba|_0x36e482>>-0xa7b+-0xe27*-0x2+0x8e9*-0x2,_0x3cd773+=_0x36e482&-0x13*0x22+0x1feb+-0x1d64,_0x3cd773);},_0x547155=(_0x8ebd55,_0x2d1ad7,_0x32fdf9,_0x5c8eb3,_0x27124b,_0x22da54,_0x28f02d)=>{let _0x11a876=0x73c+0x1e5+-0x921,_0x34c5e9=0x3*-0x142+-0x796+0x2*0x5ae,_0x55a257=0x1492+0x5*-0x585+-0x101*-0x7,_0x26aac4=0x1168+0x5f9+-0x18f*0xf,_0x378d92=0xe*0x2bd+-0x1*-0x5ce+0x14*-0x235,_0xf47b5=0xef5*0x2+-0x1775+-0x39*0x1d,_0x3dc4f1=!(0x1f39+-0x79*-0x9+-0x237a);const _0x48fb8c=new Float32Array(-0x2692+-0x2192+0x8d*0x83),_0x47c8ed=new Float32Array(0x1bde+-0x1*-0xb3+-0x1c8e);for(let _0x29213f=0x251a*-0x1+0x4eb+0x202f;_0x29213f<_0x8ebd55;++_0x29213f){const _0x3e6d25=_0x2d1ad7[_0x29213f],_0x2e3f34=_0x32fdf9[_0x29213f],_0x2b9323=_0x5c8eb3[_0x29213f],_0x58b32a=Math['max'](_0x27124b[_0x29213f],_0x22da54[_0x29213f],_0x28f02d[_0x29213f]);if(!isFinite(_0x3e6d25)||!isFinite(_0x2e3f34)||!isFinite(_0x2b9323)||!isFinite(_0x58b32a))continue;const _0x2a3a94=(-0x537+0x99*0x21+-0x10*0xe8)*Math['exp'](_0x58b32a);_0x3dc4f1?(_0x3dc4f1=!(0x14b*0x5+-0x1873*0x1+0x5ff*0x3),_0x11a876=_0x3e6d25-_0x2a3a94,_0x34c5e9=_0x2e3f34-_0x2a3a94,_0x55a257=_0x2b9323-_0x2a3a94,_0x26aac4=_0x3e6d25+_0x2a3a94,_0x378d92=_0x2e3f34+_0x2a3a94,_0xf47b5=_0x2b9323+_0x2a3a94):(_0x11a876=Math['min'](_0x11a876,_0x3e6d25-_0x2a3a94),_0x34c5e9=Math['min'](_0x34c5e9,_0x2e3f34-_0x2a3a94),_0x55a257=Math['min'](_0x55a257,_0x2b9323-_0x2a3a94),_0x26aac4=Math['max'](_0x26aac4,_0x3e6d25+_0x2a3a94),_0x378d92=Math['max'](_0x378d92,_0x2e3f34+_0x2a3a94),_0xf47b5=Math['max'](_0xf47b5,_0x2b9323+_0x2a3a94));}_0x3dc4f1||(_0x48fb8c[-0x14db+0xb29*0x1+0x1*0x9b2]=(_0x11a876+_0x26aac4)*(-0xcf1+-0x14*0x1d6+0x31a9+0.5),_0x48fb8c[-0x5cf+-0x2*0x2a+-0x1*-0x624]=(_0x34c5e9+_0x378d92)*(0x1*0x11ba+0xfb8+-0x2172+0.5),_0x48fb8c[0x1bbb*-0x1+0xbf5+0xa*0x194]=(_0x55a257+_0xf47b5)*(0x8d*-0x3b+-0x189a+-0x1*-0x3919+0.5),_0x47c8ed[0x1*-0x1422+-0x12b2+0x26d4]=(_0x26aac4-_0x11a876)*(0x2*0x85e+0x188c+0x2948*-0x1+0.5),_0x47c8ed[-0x6*-0x4fd+0xc1+-0x22*0xe7]=(_0x378d92-_0x34c5e9)*(0x26a3+-0x427+-0x227c+0.5),_0x47c8ed[0x8e3+-0x17*-0x1+-0x8f8]=(_0xf47b5-_0x55a257)*(0xf*0x215+0x1*-0x102e+0x1*-0xf0d+0.5)),self['postMessag'+'e']({'type':'updatedAab'+'bData','center':_0x48fb8c,'halfExtents':_0x47c8ed});},_0x447695=(_0x370400,_0x3b8386,_0x4a659c,_0x232fef,_0x5487c1,_0x509ab8,_0xcf0d92,_0x32927f,_0x40f11b,_0x2aee82,_0x502b66,_0x4b1979,_0x5240fb,_0x8d8e3a,_0x457f31,_0x1a3cc4,_0x1b5989)=>{_0x135793(),_0x4b5804=new Float32Array(_0x370400*(-0x23f1+0x1*-0xce5+0x30d9)),_0x20c5e5=new Float32Array(_0x370400*(-0x23f4+0x87a+0x1b7d)),_0x486c14=new Uint16Array(_0x370400*(-0x6aa+0x7c4+-0x3*0x5d)),_0x4b9013=new Float32Array(_0x370400*(0x1*0x15bb+0x3*0xb89+-0x3853)),_0x3b8386&&(_0x25b632=new Float32Array(_0x370400*(-0x4*-0x5ae+0x2*-0xb83+0x3*0x1b)),_0x21ab7f=new Float32Array(_0x370400*(-0x91d*-0x2+0x1*0x4cf+-0x1706*0x1)),_0x1a4ae1=new Float32Array(_0x370400*(-0x23c*-0x5+-0x14e*-0x1a+0x1*-0x2d15)),_0x4d1ad0=new Float32Array(_0x370400));const _0x152164=new _0x3880c8(-0x5ed+0x18d6+-0x12e9,0xdb0+-0x86a+-0x546,-0x1*0x1763+-0x2388+0x3aeb,0x1819+0x1435+0x6a*-0x6b);for(let _0x23228c=-0x241+-0x1*0x2273+-0x30f*-0xc;_0x23228c<_0x370400;_0x23228c++)_0x152164['set'](_0x509ab8[_0x23228c],_0xcf0d92[_0x23228c],_0x32927f[_0x23228c],_0x40f11b[_0x23228c]),_0x152164['normalize'](),_0x152164['w']<-0x7*0x5d+-0x58*-0x56+-0x1*0x1b05&&_0x152164['mulScalar'](-(0xc15+0x1d*0x10d+-0x2a8d)),_0x20c5e5[_0x23228c*(-0x2*-0xd19+0x1507+-0x2f36)+(-0x26f8+0x125d*0x1+-0x1*-0x149b)]=_0x4a659c[_0x23228c],_0x20c5e5[_0x23228c*(0x15a+0x3*0x796+0xc7*-0x1f)+(0x1084+0x476+-0x14f9)]=_0x232fef[_0x23228c],_0x20c5e5[_0x23228c*(0x12ad*-0x1+-0x101e*-0x1+0x2*0x149)+(-0x4*-0x955+0x1*0x2676+-0x4bc8)]=_0x5487c1[_0x23228c],_0x4b5804[_0x23228c*(-0x595+-0x7b*0x1+-0x1*-0x613)+(0xc9*-0xd+0x5e+0xb*0xe5)]=_0x4a659c[_0x23228c],_0x4b5804[_0x23228c*(0x34*0x5b+0x175*-0x13+0x49b*0x2)+(-0xb*-0x312+0x101*-0x2+-0x1fc3)]=_0x232fef[_0x23228c],_0x4b5804[_0x23228c*(-0x1b52+0x90c+-0x1*-0x1249)+(0x18de+-0x43d+-0x149f)]=_0x5487c1[_0x23228c],_0x486c14[_0x23228c*(-0x714*0x2+0x1*-0x23ac+0x31d7)+(0x1543*-0x1+-0x1c2e*-0x1+-0x7*0xfd)]=_0x1aecf5(Math['exp'](_0x5240fb[_0x23228c])),_0x486c14[_0x23228c*(-0x8b5*-0x4+-0x1885+-0xa4c)+(0x2002+-0x3b*0x99+-0x1*-0x342)]=_0x1aecf5(Math['exp'](_0x8d8e3a[_0x23228c])),_0x486c14[_0x23228c*(-0xfa6+-0x1fd*-0x2+-0xbaf*-0x1)+(0x1*-0x209c+0xe87+0x1217)]=_0x1aecf5(Math['exp'](_0x457f31[_0x23228c])),_0x4b9013[_0x23228c*(0xd79+-0x18c+0x1*-0xbea)+(-0x1e25+-0x11*0x34+-0xb33*-0x3)]=_0x152164['x'],_0x4b9013[_0x23228c*(-0xbeb+0x1*0x7c7+0x427)+(-0x33a+-0x7fa+0x97*0x13)]=_0x152164['y'],_0x4b9013[_0x23228c*(-0x55*0x16+0xde*-0x2d+0x2e57*0x1)+(-0x1f9f+0x1a33+0x2*0x2b7)]=_0x152164['z'],_0x3b8386&&_0x25b632&&_0x21ab7f&&(_0x25b632[_0x23228c*(0x16ee+0x17*0x9e+-0xc5f*0x3)+(-0x5fb*-0x6+-0x164f+0x1*-0xd93)]=_0x2aee82[_0x23228c],_0x25b632[_0x23228c*(0x3e5*-0x7+-0xcb7+0x27fd)+(-0x40*0x43+0x2f4*0x4+0x4f1)]=_0x502b66[_0x23228c],_0x25b632[_0x23228c*(0x9d1+0x7*0xc0+-0x52*0x2f)+(0x1150+0x2*-0xb0f+0x4d0)]=_0x4b1979[_0x23228c],_0x1a4ae1[_0x23228c*(0x17*-0x19f+0x1*0x25a9+-0x5d)+(0xd2*0x13+0x1b07+-0x2a9d)]=_0x2aee82[_0x23228c],_0x1a4ae1[_0x23228c*(-0xe*-0x215+0x1c*-0xf1+-0x2c7*0x1)+(-0x2505+0x589*0x4+-0x27b*-0x6)]=_0x502b66[_0x23228c],_0x1a4ae1[_0x23228c*(0x1f28+-0x568+-0x1*0x19bd)+(-0x1d50*-0x1+-0xc6d*0x1+0x1d*-0x95)]=_0x4b1979[_0x23228c],_0x4d1ad0[_0x23228c]=_0x1b5989?Math['exp'](_0x1b5989[_0x23228c]):0x19bc+-0x24a8+0xaec,_0x21ab7f[_0x23228c*(0x9*-0x1c5+-0xa9*-0x11+-0x4b7*-0x1)+(-0x2153*-0x1+0x2549+-0x469c)]=_0x1a3cc4?_0x1a3cc4[_0x23228c]:-0x1751*-0x1+0x10d7+-0x2828,_0x21ab7f[_0x23228c*(-0x23cf+-0xb55+0x2f27)+(0x571*0x2+-0x189e+0xdbd)]=_0x4d1ad0[_0x23228c]);const _0x56bcfe=[_0x4b5804['buffer'],_0x20c5e5['buffer'],_0x486c14['buffer'],_0x4b9013['buffer']];_0x3b8386&&_0x56bcfe['push'](_0x25b632['buffer'],_0x21ab7f['buffer'],_0x1a4ae1['buffer'],_0x4d1ad0['buffer']),self['postMessag'+'e']({'type':'updatedTra'+'nsformData','centers':_0x4b5804,'dataPosition':_0x20c5e5,'dataScale':_0x486c14,'dataRotation':_0x4b9013,'dataMotion':_0x25b632,'dataTime':_0x21ab7f,'motion':_0x1a4ae1,'tScaleArray':_0x4d1ad0},_0x56bcfe);},_0x58668a=(_0x991ba9,_0x2f4132,_0x139df3,_0x3ff2e7,_0x13a115)=>{const _0x455e07=new Uint16Array(_0x991ba9*(-0x68f*0x2+-0x2*0x6b+-0x4a8*-0x3)),_0x162590=-0x5*0x72e+0xd7b*-0x1+-0x1*-0x3161+0.28209479177387814;for(let _0x405e9e=0x18ce+-0x1bcb*-0x1+-0x1*0x3499;_0x405e9e<_0x991ba9;++_0x405e9e){const _0x18bee0=_0x2f4132[_0x405e9e]*_0x162590+(-0x9fe+0x1234+-0x836+0.5),_0x3f825f=_0x139df3[_0x405e9e]*_0x162590+(0x2060+-0x1c*0x27+0xe*-0x202+0.5),_0x2d5785=_0x3ff2e7[_0x405e9e]*_0x162590+(0x4*0x17+0x113f+-0x1*0x119b+0.5),_0x359aab=_0x13a115[_0x405e9e];_0x455e07[_0x405e9e*(-0xb0a+-0x1*0x6a2+-0x4*-0x46c)+(0x93f*0x2+-0x9bf*0x2+0x8*0x20)]=_0x1aecf5(_0x18bee0),_0x455e07[_0x405e9e*(-0x47*0x76+0x16c4+0x9fa)+(0x3*0x8ef+0xd18+-0x27e4)]=_0x1aecf5(_0x3f825f),_0x455e07[_0x405e9e*(0x17bd+-0x1845+-0xa*-0xe)+(0x1a25+-0xf68+-0x1*0xabb)]=_0x1aecf5(_0x2d5785),_0x455e07[_0x405e9e*(-0x581+0x13f3*-0x1+0x32f*0x8)+(-0x1e0+-0x2*0x12b2+-0x1*-0x2747)]=_0x1aecf5(_0x359aab);}self['postMessag'+'e']({'type':'updatedCol'+'orData','data':_0x455e07});},_0x20fb43=(_0x21c0a2,_0x5573cb,_0x27854d)=>{const _0x4882f9=new Uint32Array(_0x21c0a2*(0x1167*0x2+0x1*0x1b14+-0x3dde*0x1)),_0x2e7f4d=new Uint32Array(_0x21c0a2*(0x269+-0x313+0x6*0x1d)),_0x2b4ab0=new Uint32Array(_0x21c0a2*(0xd68+0x672+-0x13d6)),_0x2ce7af=new Uint32Array(_0x21c0a2*(-0x25ce+0x1c9+0x2409)),_0x29c697={0x1:0x3,0x2:0x8,0x3:0xf}[_0x5573cb],_0x53dc8f=_0x27854d,_0x5764dd=0xbcc+-0x42b*-0x1+-0xff*0x8,_0x13db9=-0x146*-0x1+-0x2*0x108e+0x1*0x23d5,_0x4be855=new Float32Array(-0x1*-0xe8f+-0x40*0x92+0x1*0x15f2),_0x4da9da=new Uint32Array(_0x4be855['buffer']),_0x1a5fcf=new Array(_0x29c697*(0xa*-0x238+-0xc71+-0x2*-0x1152))['fill'](-0x3*-0xa59+-0x152*-0x7+-0x2849*0x1);for(let _0x12b291=-0xcc5+0x1*-0x1a53+-0x4*-0x9c6;_0x12b291<_0x21c0a2;++_0x12b291){for(let _0x3566bd=-0x53*0x61+0x18d5+-0x4d*-0x16;_0x3566bd<_0x29c697;++_0x3566bd)_0x1a5fcf[_0x3566bd*(0x3e5+0x1*0x1ac+0x12*-0x4f)]=_0x53dc8f[_0x3566bd][_0x12b291],_0x1a5fcf[_0x3566bd*(-0x16f2+-0x13b9+0x2aae)+(0x127a+0x737+-0x19b0*0x1)]=_0x53dc8f[_0x3566bd+_0x29c697][_0x12b291],_0x1a5fcf[_0x3566bd*(-0x1649*-0x1+0x2e2*-0x3+-0x10*0xda)+(0x9c1*0x1+-0x1*0x3ef+0x6*-0xf8)]=_0x53dc8f[_0x3566bd+_0x29c697*(-0x17a1+-0x1bb9+-0xad*-0x4c)][_0x12b291];let _0x2e80e8=_0x1a5fcf[0x1*-0x2275+0x96*-0x1f+-0x2c5*-0x13];for(let _0x54124d=-0x2643+0x2564+-0x7*-0x20;_0x54124d<_0x29c697*(-0x752+0x6*0x276+-0x76f);++_0x54124d)_0x2e80e8=Math['max'](_0x2e80e8,Math['abs'](_0x1a5fcf[_0x54124d]));if(_0x2e80e8!==0x23b4+-0x21f7+0x1*-0x1bd){for(let _0x2998d8=0x3*0x8a1+-0x13*0x36+-0x3*0x74b;_0x2998d8<_0x29c697;++_0x2998d8)_0x1a5fcf[_0x2998d8*(0x1192+0x5*-0x337+-0x13*0x14)+(-0xcbe+-0x11d6+0x1e94)]=Math['max'](0x1aaf+-0x1ab*-0x3+-0x34*0x9c,Math['min'](_0x5764dd,Math['floor']((_0x1a5fcf[_0x2998d8*(-0x2f*0xa1+0x32d+0x1a65)+(-0x1ddd*0x1+-0x1*-0xf92+0xe4b)]/_0x2e80e8*(0x21f5+0x2510+-0x1*0x4705+0.5)+(-0x469+0x2*-0x6f1+0xdf*0x15+0.5))*_0x5764dd+(0x12e7*-0x2+-0x25a5+0x5*0xf17+0.5)))),_0x1a5fcf[_0x2998d8*(0x390+0x1434+0x1*-0x17c1)+(0x1*-0x1e26+-0x1*-0x1b8e+0x23*0x13)]=Math['max'](0x13*-0x113+-0xccd+-0x2136*-0x1,Math['min'](_0x13db9,Math['floor']((_0x1a5fcf[_0x2998d8*(0x2533+-0x12c4+-0x126c)+(0xc*-0x57+-0xe59*0x1+0x126e)]/_0x2e80e8*(0x1299+-0x1396+0xfd+0.5)+(-0xfb6*0x2+0x25e0+-0x674*0x1+0.5))*_0x13db9+(-0x1a51+0x20a+-0x1*-0x1847+0.5)))),_0x1a5fcf[_0x2998d8*(-0x1620+-0x2261+0x3884)+(0x1605*0x1+0x17df*0x1+-0x1*0x2de2)]=Math['max'](-0x1*0x2662+-0x23*0x79+0x124f*0x3,Math['min'](_0x5764dd,Math['floor']((_0x1a5fcf[_0x2998d8*(0x2b*0xa5+-0x167b+-0xbf*0x7)+(-0x24c3+-0x1681+0x3b46*0x1)]/_0x2e80e8*(-0x5*-0x17f+0xbe2+-0x135d+0.5)+(0xc*-0x27c+-0x1b47*0x1+0x3917*0x1+0.5))*_0x5764dd+(0x19b8+0x84b*0x3+-0x3299*0x1+0.5))));_0x4be855[-0x12b5*0x2+-0x1f74+-0x5*-0xdc6]=_0x2e80e8,_0x4882f9[_0x12b291*(0x2564+-0xa27+-0x1b39*0x1)+(-0x3*0x7c1+0xeb9+0x88a)]=_0x4da9da[-0x108b+0x3*0xc3c+-0x1429],_0x4882f9[_0x12b291*(0x1*-0x251b+-0x1489+-0x7b*-0x78)+(-0x218f+0x1d1d+-0x11*-0x43)]=_0x1a5fcf[-0x1754*-0x1+-0x59f+-0x11b5]<<0x1b32+0x2*0xf8c+0x3a35*-0x1|_0x1a5fcf[-0x373*0x1+0x1*0x25f9+-0x2285]<<0x885+-0xa+-0xf0*0x9|_0x1a5fcf[0x1f45+-0x26ba+0x31*0x27],_0x4882f9[_0x12b291*(-0x1*0x2292+0xa24+0x1872)+(-0x146f*-0x1+0x8fe+-0x1d6b)]=_0x1a5fcf[-0x1*0x927+-0x21e3+0x2b0d]<<-0x18ab*0x1+0x409+0x14b7|_0x1a5fcf[0x233*-0x11+-0x15e7+0x3b4e]<<-0x22e8+0x43*-0x65+0x3d62|_0x1a5fcf[-0x1*-0x1f9+0x1a5+-0x399],_0x4882f9[_0x12b291*(0x1b2f+0xa19+-0x2544)+(-0x23c8+0x77e+0x69*0x45)]=_0x1a5fcf[0xb3+-0x919+0x86c]<<0x586+-0x1*-0x117d+-0x16ee|_0x1a5fcf[0x905*-0x4+0xd88*-0x1+0x31a3]<<-0x12a+-0x2*0x13d+-0x1*-0x3af|_0x1a5fcf[-0x125c+-0x1*0x12d6+0xa*0x3b9],_0x5573cb>0x7*0x14b+-0x2bb+-0x1*0x651&&(_0x2e7f4d[_0x12b291*(-0x9d*0x5+-0xc97+-0x4*-0x3eb)+(0x1c54+0x2209+0xc79*-0x5)]=_0x1a5fcf[0xc08+0x6b*-0x1+-0xb94]<<-0x12*-0x11d+0x1ab6+-0x2eab|_0x1a5fcf[-0x1086+0x21d1+-0x1141]<<-0x4a4*0x6+0x6d*-0x3f+0x2f*0x12a|_0x1a5fcf[0xbf5*-0x1+-0x41d*0x1+-0x4b*-0x37],_0x2e7f4d[_0x12b291*(-0x1348+-0xb77+0x1ec3)+(-0xd8+0x182b*0x1+-0x1752)]=_0x1a5fcf[-0x1f41+0x2*-0x2a5+0x2497]<<0x1751+0x1189*0x1+-0x28c5|_0x1a5fcf[0x4d2+-0x28d*-0x1+-0x752]<<-0x1*0xf67+-0xabe+0x2*0xd18|_0x1a5fcf[0x1*-0x353+-0x1d7*-0x11+-0x2*0xdf3],_0x2e7f4d[_0x12b291*(-0xa1e+-0xf79+0x199b)+(0x1*-0x1949+0x139*-0x6+0x20a1)]=_0x1a5fcf[-0x7f4*-0x1+0x20e7+-0x28cc]<<-0x2f*-0x81+0xab*0x12+-0x3*0xbe0|_0x1a5fcf[0x4d3+0x24b0+-0x189*0x1b]<<0xe5c+0x1ccf+0x5c*-0x78|_0x1a5fcf[0x823*-0x1+0x52*-0x43+0x1daa],_0x2e7f4d[_0x12b291*(0x11*-0x29+-0xdb6+0x1073)+(-0xd24*0x1+-0x9*0x376+0x2c4d)]=_0x1a5fcf[0x5f2+0x1c7d+-0x225d]<<0x1*0x22b7+0x26e2+0x5*-0xeb4|_0x1a5fcf[0x2*0xf99+-0x2*-0xacb+-0x34b5]<<0x1*-0xa11+0x1*-0x1822+0x223e|_0x1a5fcf[0x1*-0x1483+-0x535*0x5+0x2ea0*0x1],_0x5573cb>0x1*-0x82f+0x1063+-0x832?(_0x2b4ab0[_0x12b291*(0x513*-0x1+-0xd79*0x1+0x1290)+(-0x16*0x1a+0x2*-0xd2b+-0x3*-0x986)]=_0x1a5fcf[-0xc*-0x115+-0x7*0x34+-0xb7b]<<-0xf6e+0x23a8+-0x1425|_0x1a5fcf[-0x168a+-0xc5*0x7+0x1c03]<<0x1cf8+-0x10b0+-0xc3d|_0x1a5fcf[0x23b5*-0x1+-0xe4b*-0x2+0x2*0x39b],_0x2b4ab0[_0x12b291*(0xc22*0x1+0x71*0x4f+-0x20b*0x17)+(0x4d3+0x1e6c+-0x233e*0x1)]=_0x1a5fcf[-0x182d*0x1+0x4c1*-0x2+0x21c7]<<0x8+-0x25ef+-0x23c*-0x11|_0x1a5fcf[-0x1*0x2252+-0x226a+0x44d5]<<-0x728*0x2+-0x1e58+0x1*0x2cb3|_0x1a5fcf[-0x1fc8*0x1+-0x1bd6+-0x2d8*-0x15],_0x2b4ab0[_0x12b291*(0x1ec8+-0x176*-0x5+0x376*-0xb)+(-0x1*0xb47+-0x21a0+0x1*0x2ce9)]=_0x1a5fcf[-0x28b+0x58f+-0x2e9]<<0x1fc5+0x26af*-0x1+0x6ff|_0x1a5fcf[-0xcf*-0x1b+0x43*-0x43+-0x430]<<-0x10*-0x15d+0x2421+0x1cf3*-0x2|_0x1a5fcf[0x7d4+0x20b1*0x1+0x2868*-0x1],_0x2b4ab0[_0x12b291*(-0x1554+0x7*0xfb+0xe7b)+(0x62c+-0x27*0xf7+0x1f78)]=_0x1a5fcf[0x1*-0x2119+-0x387+0x24be]<<0x2*0x781+0x1578+-0x2465|_0x1a5fcf[-0x19bc+0x3*0x178+0x1573]<<0x18eb+-0xbe*0x2+-0x1764|_0x1a5fcf[0x9*-0x361+-0x1c29+0xb*0x556],_0x2ce7af[_0x12b291*(-0x1572+0x2*-0x3fe+-0x2*-0xeb9)+(-0x1*-0x954+0x4ad+0xef*-0xf)]=_0x1a5fcf[0x2*-0x3b9+0x8ca*-0x3+0x21f1]<<0x1f1f+0x1ef1+0x3dfb*-0x1|_0x1a5fcf[-0x6c2*0x3+-0x4*0x98e+-0x1*-0x3aa0]<<-0x256f*-0x1+-0x1*-0x113f+-0x1*0x36a3|_0x1a5fcf[0x3*-0xc94+0x1*0xef1+-0x2*-0xb77],_0x2ce7af[_0x12b291*(0x68*-0x3b+0x266c+-0xe70)+(0x4ee+-0x2665+0x2178)]=_0x1a5fcf[0x14a8+-0x1*-0xe10+-0x114a*0x2]<<0x67d+-0x8d0+0x268|_0x1a5fcf[0x2071+-0x75b+-0x18f1]<<0x20a8+-0x2f5*-0x3+-0x297c|_0x1a5fcf[0xdb*-0x1b+0xaf*0x2c+0x1*-0x6d5],_0x2ce7af[_0x12b291*(0x1b33*-0x1+-0x34c*0x1+0x1e83)+(0x1b61+-0x1*0x471+-0x24b*0xa)]=_0x1a5fcf[0x9b2+-0x20bc+-0x1*-0x1731]<<0x246d+0xc+0x919*-0x4|_0x1a5fcf[0x1*-0xc68+0x8*-0x26b+0x1fe8]<<-0xf25*0x1+0x1*0x26e7+-0x17b7|_0x1a5fcf[0x2*-0x1102+-0x2*-0x390+0x115*0x19],_0x2ce7af[_0x12b291*(-0x706+-0x1*0xde7+0x14f1)+(-0xd9f+0x1e07+-0x577*0x3)]=_0x1a5fcf[0x8*0x280+0x1cb+-0x15a1]<<-0xa*0x122+0xe*0x169+-0x4f*0x1b|_0x1a5fcf[0x2*-0x52+-0x14e+-0x21d*-0x1]<<0x162d+0x2184+0x11*-0x346|_0x1a5fcf[-0xdab+0xb*0x9+0xd74]):_0x2b4ab0[_0x12b291]=_0x1a5fcf[0x132e*-0x1+0x15d7+-0x3*0xdc]<<-0x172f+-0x1561+0x2ca5|_0x1a5fcf[-0x25a4+-0x75d+0x2d17]<<-0x1dfd+-0x18af+-0xa1*-0x57|_0x1a5fcf[0x683*-0x2+-0x58f+0xef*0x14]);}}self['postMessag'+'e']({'type':'updatedSHD'+'ata1','data':{'sh1to3Data':_0x4882f9,'sh4to7Data':_0x2e7f4d,'sh8to11Data':_0x2b4ab0,'sh12to15Data':_0x2ce7af}},[_0x4882f9['buffer'],_0x2e7f4d['buffer'],_0x2b4ab0['buffer'],_0x2ce7af['buffer']]);},_0x135793=()=>{_0x4b5804=null,_0x21ab7f=null,_0x4b9013=null,_0x20c5e5=null,_0x25b632=null,_0x486c14=null,_0x1a4ae1=null,_0x4d1ad0=null;};}let wC=class extends me{constructor(){super(),this['_initWorke'+'r']();}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+TC['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'})));}['workerMess'+'ageFn'](_0x57c4b3,_0x13ca44,_0x24ad0b){_0x57c4b3['onmessage']=_0x35608a=>{if(!this['worker'])return;const {data:_0x1a8d63}=_0x35608a;if(_0x1a8d63['type']===_0x13ca44)switch(_0x13ca44){case'updatedSHD'+'ata1':_0x24ad0b(_0x1a8d63['data']);break;case'updatedCol'+'orData':_0x24ad0b(_0x1a8d63['data']);break;case'updatedTra'+'nsformData':_0x24ad0b(_0x1a8d63);break;case'updatedAab'+'bData':_0x24ad0b(_0x1a8d63);break;}};}['updateSHDa'+'ta1'](_0x21981a,_0x21b62d,_0x370681){var _0x1332d3;return(_0x1332d3=this['worker'])==null||_0x1332d3['postMessag'+'e']({'type':'updateSHDa'+'ta1','numSplats':_0x21981a,'shBands':_0x21b62d,'SHData':_0x370681}),new Promise(_0x54e129=>{this['workerMess'+'ageFn'](this['worker'],'updatedSHD'+'ata1',_0x210630=>{_0x54e129(_0x210630);});});}async['updateColo'+'rData'](_0x4c52e1,_0x1bb9d5,_0x3cdc59,_0x356d4c,_0x32d4a9){var _0x31dd20;return(_0x31dd20=this['worker'])==null||_0x31dd20['postMessag'+'e']({'type':'updateColo'+'rData','numSplats':_0x4c52e1,'cr':_0x1bb9d5,'cg':_0x3cdc59,'cb':_0x356d4c,'ca':_0x32d4a9}),new Promise(_0x2187fc=>{this['workerMess'+'ageFn'](this['worker'],'updatedCol'+'orData',_0x4d3ca5=>{_0x2187fc(_0x4d3ca5);});});}async['calcAabb'](_0x4ce42c,_0x5737d0,_0x21e09f,_0xf08205,_0x3998b6,_0x599473,_0x4cda10){var _0x5b618c;const _0xd81c01=new Float32Array(_0x5737d0),_0x516787=new Float32Array(_0x21e09f),_0x229f3d=new Float32Array(_0xf08205),_0x45eb59=new Float32Array(_0x3998b6),_0x184f4e=new Float32Array(_0x599473),_0x521bf0=new Float32Array(_0x4cda10);return(_0x5b618c=this['worker'])==null||_0x5b618c['postMessag'+'e']({'type':'calcAabb','numSplats':_0x4ce42c,'x':_0xd81c01,'y':_0x516787,'z':_0x229f3d,'sx':_0x45eb59,'sy':_0x184f4e,'sz':_0x521bf0},[_0xd81c01['buffer'],_0x516787['buffer'],_0x229f3d['buffer'],_0x45eb59['buffer'],_0x184f4e['buffer'],_0x521bf0['buffer']]),new Promise(_0x182e57=>{this['workerMess'+'ageFn'](this['worker'],'updatedAab'+'bData',_0x43b512=>{_0x182e57(_0x43b512);});});}async['updateTran'+'sData'](_0x4d7328,_0xf249a7,_0x3ac114,_0x40bcd5,_0x3e5055,_0x4adc95,_0x371054,_0x520a4d,_0x2c705e,_0x8501c5,_0x323373,_0x2399fa,_0x21662f,_0x505c69,_0x129394,_0x23bb89,_0x2bc3d6){var _0x1c0805;return(_0x1c0805=this['worker'])==null||_0x1c0805['postMessag'+'e']({'type':'updateTran'+'sformData','numSplats':_0x4d7328,'is4D':_0xf249a7,'x':_0x3ac114,'y':_0x40bcd5,'z':_0x3e5055,'rx':_0x4adc95,'ry':_0x371054,'rz':_0x520a4d,'rw':_0x2c705e,'mx':_0x8501c5,'my':_0x323373,'mz':_0x2399fa,'sx':_0x21662f,'sy':_0x505c69,'sz':_0x129394,'muT':_0x23bb89,'tScale':_0x2bc3d6}),new Promise(_0x503b28=>{const _0x55bad5=_0x33df9f=>{_0x503b28(_0x33df9f);};this['workerMess'+'ageFn'](this['worker'],'updatedTra'+'nsformData',_0x55bad5);});}['destroy'](){var _0x4bef07;this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),(_0x4bef07=this['worker'])==null||_0x4bef07['terminate'](),this['worker']=null);}};const vg=(_0x2f3d98,_0x141ac1)=>{const _0x25608a=[];for(let _0x1b91e2=0x206b+0x1cba+-0x3d25;_0x1b91e2<_0x141ac1;++_0x1b91e2)_0x25608a['push'](_0x2f3d98['getProp']('f_rest_'+_0x1b91e2));return _0x25608a;};class EC extends Rv{constructor(_0x3b6f85,_0x2d8c5c){console['log']('____\x20ENGIN'+'E\x20IVAN','new\x20GSplat'+'Resource'),super(_0x3b6f85,_0x2d8c5c),h(this,'timeOption'),h(this,'appendQueu'+'e',[]),h(this,'isProcessi'+'ngQueue',!(0x900+-0x4e8+-0x417)),h(this,'muT'),h(this,'tScale'),h(this,'motion'),h(this,'timeIndex'),h(this,'colorTextu'+'re'),h(this,'transformA'+'Texture'),h(this,'transformB'+'Texture'),h(this,'transformR'+'Texture'),h(this,'transformM'+'otionTextu'+'re'),h(this,'transformL'+'ifecycleTe'+'xture'),h(this,'colorTextu'+'re2'),h(this,'transformA'+'Texture2'),h(this,'transformB'+'Texture2'),h(this,'transformR'+'Texture2'),h(this,'transformM'+'otionTextu'+'re2'),h(this,'transformL'+'ifecycleTe'+'xture2'),h(this,'is4D'),h(this,'shBands'),h(this,'sh1to3Text'+'ure'),h(this,'sh4to7Text'+'ure'),h(this,'sh8to11Tex'+'ture'),h(this,'sh12to15Te'+'xture'),h(this,'sh1to3Text'+'ure2'),h(this,'sh4to7Text'+'ure2'),h(this,'sh8to11Tex'+'ture2'),h(this,'sh12to15Te'+'xture2'),h(this,'updateData'+'Worker'),(this['updateData'+'Worker']=new wC(),this['assetsMana'+'gerLoadedT'+'ime']=-0x1897+0x1c9*0x9+0x88b);}async['updateData'](){var _0x538307,_0x2e876c,_0x51e58b,_0x2ba963,_0x27da90,_0x24c718,_0xa72077,_0x37ed0e,_0xbea81,_0xa030e5,_0x270a0a;console['log']('____\x20ENGIN'+'E\x20IVAN','ASSETS\x20GSp'+'lat\x20update'+'Data'),await super['updateData']();const _0x562c2e=this['gsplatData'];if(!_0x562c2e)return;this['is4D']=_0x562c2e['is4D'];const _0x1f1e37=await this['getTransfo'+'rmDataByWo'+'rker'](_0x562c2e);this['aabb']=new De(),await _0x562c2e['calcAabbAs'+'ync'](this['aabb'],this['updateData'+'Worker']),this['mesh']['aabb']['copy'](this['aabb']),this['centers']=_0x1f1e37['centers'],this['motion']=_0x1f1e37['motion'],this['tScale']=_0x1f1e37['tScaleArra'+'y'],this['muT']=await _0x562c2e['getMuT'](),this['timeIndex']=await _0x562c2e['getTimeInd'+'ex']();const _0x17fb19=this['evalTextur'+'eSize'](_0x562c2e['numSplats']);this['colorTextu'+'re']?((_0x538307=this['colorTextu'+'re2'])==null||_0x538307['destroy'](),(_0x2e876c=this['transformA'+'Texture2'])==null||_0x2e876c['destroy'](),(_0x51e58b=this['transformB'+'Texture2'])==null||_0x51e58b['destroy'](),(_0x2ba963=this['transformR'+'Texture2'])==null||_0x2ba963['destroy'](),this['colorTextu'+'re2']=this['createText'+'ure']('splatColor'+'2',nt,_0x17fb19),this['transformA'+'Texture2']=this['createText'+'ure']('transformA'+'2',Ye,_0x17fb19),this['transformB'+'Texture2']=this['createText'+'ure']('transformB'+'2',ui,_0x17fb19),this['transformR'+'Texture2']=this['createText'+'ure']('transformR'+'2',Ye,_0x17fb19),this['is4D']&&((_0x27da90=this['transformM'+'otionTextu'+'re2'])==null||_0x27da90['destroy'](),(_0x24c718=this['transformL'+'ifecycleTe'+'xture2'])==null||_0x24c718['destroy'](),this['transformM'+'otionTextu'+'re2']=this['createText'+'ure']('transformM'+'otion2',Ye,_0x17fb19),this['transformL'+'ifecycleTe'+'xture2']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture2',Ye,_0x17fb19))):(this['colorTextu'+'re']=this['createText'+'ure']('splatColor',nt,_0x17fb19),this['colorTextu'+'re2']=this['createText'+'ure']('splatColor'+'2',nt,_0x17fb19),this['transformA'+'Texture']=this['createText'+'ure']('transformA',Ye,_0x17fb19),this['transformA'+'Texture2']=this['createText'+'ure']('transformA'+'2',Ye,_0x17fb19),this['transformB'+'Texture']=this['createText'+'ure']('transformB',ui,_0x17fb19),this['transformB'+'Texture2']=this['createText'+'ure']('transformB'+'2',ui,_0x17fb19),this['transformR'+'Texture']=this['createText'+'ure']('transformR',Ye,_0x17fb19),this['transformR'+'Texture2']=this['createText'+'ure']('transformR'+'2',Ye,_0x17fb19),this['is4D']&&(this['transformM'+'otionTextu'+'re']=this['createText'+'ure']('transformM'+'otion',Ye,_0x17fb19),this['transformM'+'otionTextu'+'re2']=this['createText'+'ure']('transformM'+'otion2',Ye,_0x17fb19),this['transformL'+'ifecycleTe'+'xture']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture',Ye,_0x17fb19),this['transformL'+'ifecycleTe'+'xture2']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture2',Ye,_0x17fb19))),await this['updateColo'+'rData'](_0x562c2e),await this['updateTran'+'sformFromD'+'ata'](_0x1f1e37),this['shBands']=_0x562c2e['shBands'],this['shBands']>-0xaa5*0x1+-0x2*0x47f+-0x1c9*-0xb&&(this['sh1to3Text'+'ure']?((_0xa72077=this['sh1to3Text'+'ure2'])==null||_0xa72077['destroy'](),this['sh1to3Text'+'ure2']=this['createText'+'ure']('splatSH_1t'+'o3',Ue,_0x17fb19),this['shBands']>-0x1296+-0x3e5+-0xb3e*-0x2&&((_0x37ed0e=this['sh4to7Text'+'ure2'])==null||_0x37ed0e['destroy'](),this['sh4to7Text'+'ure2']=this['createText'+'ure']('splatSH_4t'+'o72',Ue,_0x17fb19),this['shBands']>0x16a9*0x1+0x3*-0x55a+0x3*-0x233?((_0xbea81=this['sh8to11Tex'+'ture2'])==null||_0xbea81['destroy'](),(_0xa030e5=this['sh12to15Te'+'xture2'])==null||_0xa030e5['destroy'](),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ue,_0x17fb19),this['sh12to15Te'+'xture2']=this['createText'+'ure']('splatSH_12'+'to152',Ue,_0x17fb19)):((_0x270a0a=this['sh8to11Tex'+'ture2'])==null||_0x270a0a['destroy'](),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ue,_0x17fb19)))):(this['sh1to3Text'+'ure']=this['createText'+'ure']('splatSH_1t'+'o3',Ue,_0x17fb19),this['sh1to3Text'+'ure2']=this['createText'+'ure']('splatSH_1t'+'o32',Ue,_0x17fb19),this['shBands']>0x1dbb*-0x1+0x12d*-0x2+0x2016&&(this['sh4to7Text'+'ure']=this['createText'+'ure']('splatSH_4t'+'o7',Ue,_0x17fb19),this['sh4to7Text'+'ure2']=this['createText'+'ure']('splatSH_4t'+'o72',Ue,_0x17fb19),this['shBands']>0x4*-0x9ba+0x1*-0x22b7+0x49a1?(this['sh8to11Tex'+'ture']=this['createText'+'ure']('splatSH_8t'+'o11',Ue,_0x17fb19),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ue,_0x17fb19),this['sh12to15Te'+'xture']=this['createText'+'ure']('splatSH_12'+'to15',Ue,_0x17fb19),this['sh12to15Te'+'xture2']=this['createText'+'ure']('splatSH_12'+'to152',Ue,_0x17fb19)):(this['sh8to11Tex'+'ture']=this['createText'+'ure']('splatSH_8t'+'o11',Ki,_0x17fb19),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ki,_0x17fb19)))),await this['updateSHDa'+'taByWorker'](_0x562c2e));}['updateText'+'ure'](){console['log']('____\x20ENGIN'+'E\x20IVAN','ASSETS\x20GSp'+'lat\x20update'+'Texture'),!this['isDestroye'+'d']&&(super['updateText'+'ure'](),[this['colorTextu'+'re'],this['colorTextu'+'re2']]=[this['colorTextu'+'re2'],this['colorTextu'+'re']],[this['transformA'+'Texture'],this['transformA'+'Texture2']]=[this['transformA'+'Texture2'],this['transformA'+'Texture']],[this['transformB'+'Texture'],this['transformB'+'Texture2']]=[this['transformB'+'Texture2'],this['transformB'+'Texture']],[this['transformR'+'Texture'],this['transformR'+'Texture2']]=[this['transformR'+'Texture2'],this['transformR'+'Texture']],this['is4D']&&([this['transformM'+'otionTextu'+'re'],this['transformM'+'otionTextu'+'re2']]=[this['transformM'+'otionTextu'+'re2'],this['transformM'+'otionTextu'+'re']],[this['transformL'+'ifecycleTe'+'xture'],this['transformL'+'ifecycleTe'+'xture2']]=[this['transformL'+'ifecycleTe'+'xture2'],this['transformL'+'ifecycleTe'+'xture']]),[this['sh1to3Text'+'ure'],this['sh1to3Text'+'ure2']]=[this['sh1to3Text'+'ure2'],this['sh1to3Text'+'ure']],[this['sh4to7Text'+'ure'],this['sh4to7Text'+'ure2']]=[this['sh4to7Text'+'ure2'],this['sh4to7Text'+'ure']],[this['sh8to11Tex'+'ture'],this['sh8to11Tex'+'ture2']]=[this['sh8to11Tex'+'ture2'],this['sh8to11Tex'+'ture']],[this['sh12to15Te'+'xture'],this['sh12to15Te'+'xture2']]=[this['sh12to15Te'+'xture2'],this['sh12to15Te'+'xture']]);}['releaseGSp'+'latResourc'+'e'](_0xe68f6c){this['appendQueu'+'e']['push']({'type':'release','taskId':new Date()['getTime'](),'data':{'index':_0xe68f6c}}),this['isProcessi'+'ngQueue']||Promise['resolve']()['then'](()=>this['processQue'+'ue']());}async['releaseAll'+'GSplatReso'+'urce'](){this['isDestroye'+'d']||(console['log']('____\x20ENGIN'+'E\x20IVAN','ASSETS\x20GSp'+'lat\x20releas'+'eSeqGSplat'+'\x20all'),this['appendQueu'+'e']=[],await this['gsplatData']['releaseAll'+'SeqData']());}['appendGSpl'+'atResource'](_0x173d24,_0x1f8563,_0x4331b4,_0x34e272,_0x5c37e9){this['appendQueu'+'e']['push']({'type':'append','taskId':new Date()['getTime'](),'data':{'gsplatData':_0x173d24,'timeOption':_0x1f8563,'loadedTime':_0x4331b4,'asset':_0x34e272,'events':_0x5c37e9}}),this['isProcessi'+'ngQueue']||Promise['resolve']()['then'](()=>this['processQue'+'ue']());}async['processQue'+'ue'](){if(!this['isProcessi'+'ngQueue']){this['isProcessi'+'ngQueue']=!(-0x65*-0x63+-0xb65*-0x1+-0x2*0x193a);try{for(;this['appendQueu'+'e']['length']>0x83f*-0x1+0x49d+-0x1*-0x3a2;){const _0x42bd27=this['appendQueu'+'e']['shift']();_0x42bd27['type']==='append'?await this['processApp'+'endTask'](_0x42bd27['data']):_0x42bd27['type']==='release'&&await this['processRel'+'easeTask'](_0x42bd27['data']);}}finally{this['isProcessi'+'ngQueue']=!(0x18f+-0x1eb2+0x1d24);}}}async['processRel'+'easeTask'](_0x5a48b7){const {index:_0x22dfcd}=_0x5a48b7;console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatReso'+'urce.relea'+'seGSplatRe'+'source',_0x22dfcd),!this['isDestroye'+'d']&&await this['gsplatData']['releaseSeq'+'Data'](_0x22dfcd);}async['processApp'+'endTask'](_0x27cc90){var _0x314392;const {gsplatData:_0x12ac28,timeOption:_0x4b7c4e,loadedTime:_0x39d48e,asset:_0x9ce4d2,events:_0x2d43b3}=_0x27cc90;!this['gsplatData']||this['isDestroye'+'d']||(console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatReso'+'urce.appen'+'dGSplatRes'+'ource'),globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),console['log']('loadTime__'+'__','----------'+'----------'+'---'),this['timeOption']=_0x4b7c4e,await this['gsplatData']['appendGSpl'+'atData'](_0x12ac28,_0x39d48e,_0x4b7c4e),console['log']('loadTime__'+'__','gsplatReso'+'urce\x20gspla'+'tData.appe'+'ndGSplatDa'+'ta',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](-0xb5*-0x16+-0x1b58+0xbcc),_0x12ac28['numSplats'],((performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])/_0x12ac28['numSplats'])['toFixed'](-0x143+0x31*0x85+-0x182f)),globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),await this['updateData'](),console['log']('loadTime__'+'__','gsplatReso'+'urce\x20this.'+'updateData',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](0x1*0x277+0x20a9+-0x3e*0x91),_0x12ac28['numSplats']),globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),(_0x314392=this['gsplatInst'+'ance'])==null||_0x314392['updateInst'+'anceData'](this),console['log']('loadTime__'+'__','gsplatReso'+'urce\x20updat'+'eInstanceD'+'ata',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](-0x1*-0x25a5+0x187*0x13+-0x42a8),_0x12ac28['numSplats']),this['asset']=_0x9ce4d2,this['assetsMana'+'gerLoadedT'+'ime']=_0x39d48e,this['events']=_0x2d43b3);}['fireAssets'+'ManagerTim'+'eIndex'](){var _0x57e9c2;const _0x57942b=this['assetsMana'+'gerLoadedT'+'ime'];console['log']('____\x20ENGIN'+'E\x20IVAN','fireAssets'+'ManagerTim'+'eIndex',_0x57942b),(_0x57e9c2=this['asset'])==null||_0x57e9c2['fire']('setAssetsL'+'oaded',_0x57942b);}['destroy'](){var _0x5a1cf6,_0x9905af,_0x371bd1,_0x229bcc,_0x1a2ba5,_0x12be3c,_0x201860,_0x2e51c5,_0x2abb21,_0x241cb3,_0x4dfc91,_0xd35fb,_0x18a296,_0x4c02c6,_0x356f08,_0x58e540,_0x3c7bd6,_0x240956,_0x4bc367,_0x4c2c6d,_0x209b48;(_0x5a1cf6=this['updateData'+'Worker'])==null||_0x5a1cf6['destroy'](),this['updateData'+'Worker']=void(0x1*-0x1e1a+0x1*-0x142+0x1f5c),(_0x9905af=this['colorTextu'+'re'])==null||_0x9905af['destroy'](),(_0x371bd1=this['transformA'+'Texture'])==null||_0x371bd1['destroy'](),(_0x229bcc=this['transformB'+'Texture'])==null||_0x229bcc['destroy'](),(_0x1a2ba5=this['transformR'+'Texture'])==null||_0x1a2ba5['destroy'](),(_0x12be3c=this['transformM'+'otionTextu'+'re'])==null||_0x12be3c['destroy'](),(_0x201860=this['transformL'+'ifecycleTe'+'xture'])==null||_0x201860['destroy'](),(_0x2e51c5=this['sh1to3Text'+'ure'])==null||_0x2e51c5['destroy'](),(_0x2abb21=this['sh4to7Text'+'ure'])==null||_0x2abb21['destroy'](),(_0x241cb3=this['sh8to11Tex'+'ture'])==null||_0x241cb3['destroy'](),(_0x4dfc91=this['sh12to15Te'+'xture'])==null||_0x4dfc91['destroy'](),(_0xd35fb=this['colorTextu'+'re2'])==null||_0xd35fb['destroy'](),(_0x18a296=this['transformA'+'Texture2'])==null||_0x18a296['destroy'](),(_0x4c02c6=this['transformB'+'Texture2'])==null||_0x4c02c6['destroy'](),(_0x356f08=this['transformR'+'Texture2'])==null||_0x356f08['destroy'](),(_0x58e540=this['transformM'+'otionTextu'+'re2'])==null||_0x58e540['destroy'](),(_0x3c7bd6=this['transformL'+'ifecycleTe'+'xture2'])==null||_0x3c7bd6['destroy'](),(_0x240956=this['sh1to3Text'+'ure2'])==null||_0x240956['destroy'](),(_0x4bc367=this['sh4to7Text'+'ure2'])==null||_0x4bc367['destroy'](),(_0x4c2c6d=this['sh8to11Tex'+'ture2'])==null||_0x4c2c6d['destroy'](),(_0x209b48=this['sh12to15Te'+'xture2'])==null||_0x209b48['destroy'](),this['releaseAll'+'GSplatReso'+'urce'](),super['destroy'](),this['aabb']=null,this['centers']=null,this['motion']=null,this['tScale']=null,this['muT']=null,this['timeIndex']=null,this['shBands']=null;}['configureM'+'aterial'](_0x371fb2){var _0xd10bcc,_0x4a39ba,_0x187b21,_0x5d5f1f,_0x52c0db,_0xf049e8,_0x3fd530,_0x540ee1,_0x1d32f0,_0x1d28c0,_0x36229d,_0x1188ae,_0x4d059e;if(console['log']('======\x20ENG'+'INE\x20IVAN','GSplat.con'+'figureMate'+'rial'),this['isDestroye'+'d'])return;const _0x51d1a1=((_0xd10bcc=_0x371fb2['getParamet'+'er']('pointCloud'+'ModeEnable'+'d'))==null?void(0x4e2*0x5+-0x26c6+0xe5c):_0xd10bcc['data'])??0x1*-0x583+-0x5*-0x17f+-0xfc*0x2,_0x4bbe73=((_0x4a39ba=_0x371fb2['getParamet'+'er']('uSplatScal'+'e'))==null?void(-0x67*-0x9+0x2*-0x3d5+0x40b):_0x4a39ba['data'])??-0xc56*0x3+-0x3c4+0x28c7,_0x5ca0e0=((_0x187b21=_0x371fb2['getParamet'+'er']('uSaturatio'+'n'))==null?void(-0x150f*-0x1+0x25e1+-0x3af0):_0x187b21['data'])??0x18eb+-0x114b*-0x1+-0x2a35,_0x2c5944=((_0x5d5f1f=_0x371fb2['getParamet'+'er']('uHueOffset'))==null?void(-0x4f5*0x3+-0x5*-0xa+0xdd*0x11):_0x5d5f1f['data'])??-0x15e9+-0x1a9+0x2*0xbc9,_0x1a7943=((_0x52c0db=_0x371fb2['getParamet'+'er']('uInvertOpa'+'city'))==null?void(0x3*-0x615+0x1*0x180d+-0x5ce):_0x52c0db['data'])??-0x30b+-0x71e+0x121*0x9,_0x5422f4=((_0xf049e8=_0x371fb2['getParamet'+'er']('uOpacity'))==null?void(-0x7c*0x3e+0x2*-0x1f+0x1e46*0x1):_0xf049e8['data'])??0x92*-0x12+0x2293+0x3d*-0x66,_0x461299=((_0x3fd530=_0x371fb2['getParamet'+'er']('clrOffset'))==null?void(0x1*-0x1567+0x4*-0x4d4+0x28b7):_0x3fd530['data'])??[0x1fdb+0x1*-0x17c0+-0x81b,0x168c+-0x1*-0x41c+-0x1aa8,-0xd78+0xd58+0x8*0x4,-0x3*0x52c+-0x252+-0x1*-0x11d7],_0x2f093d=((_0x540ee1=_0x371fb2['getParamet'+'er']('clrScale'))==null?void(-0x246d+0x40*0x8a+0x1*0x1ed):_0x540ee1['data'])??[-0xd9*0x1+-0x13cf+-0x29*-0x81,0xf7*-0x18+0xa96+-0xc93*-0x1,0x1*0x7e+0x3b3*0x6+0x1*-0x16af,0x113c+-0xf89+-0x1b2],_0x2defc4=((_0x1d32f0=_0x371fb2['getParamet'+'er']('uShapeN'))==null?void(0x2*-0x207+-0x553*-0x1+0x41*-0x5):_0x1d32f0['data'])??0x1*-0xcd1+-0x4*0x5b1+0x2395,_0x9c0e8e=((_0x1d28c0=_0x371fb2['getParamet'+'er']('mode'))==null?void(0x859*0x3+-0x3*-0x352+-0x2301):_0x1d28c0['data'])??-0x7bc+-0x1959+0x2115,_0x49f4d7=((_0x36229d=_0x371fb2['getParamet'+'er']('ringSize'))==null?void(-0xb73+0xe7d+0x30a*-0x1):_0x36229d['data'])??-0xb22+-0x1335*-0x1+0x3*-0x2b1,_0x38e198=((_0x1188ae=_0x371fb2['defines'])==null?void(0x278+0x4a*-0x28+0x918):_0x1188ae['get']('uOpenAnim'))??'0',_0x272cbb=((_0x4d059e=_0x371fb2['defines'])==null?void(-0xd0+0xb3d+-0xa6d):_0x4d059e['get']('uControlCo'+'lorMode'))??'0';_0x371fb2['setParamet'+'er']('splatColor',this['colorTextu'+'re']),_0x371fb2['setParamet'+'er']('transformA',this['transformA'+'Texture']),_0x371fb2['setParamet'+'er']('transformB',this['transformB'+'Texture']),_0x371fb2['setParamet'+'er']('transformR',this['transformR'+'Texture']),_0x371fb2['setParamet'+'er']('uSplatScal'+'e',_0x4bbe73),_0x371fb2['setParamet'+'er']('pointCloud'+'ModeEnable'+'d',_0x51d1a1),_0x371fb2['setParamet'+'er']('uSaturatio'+'n',_0x5ca0e0),_0x371fb2['setParamet'+'er']('uHueOffset',_0x2c5944),_0x371fb2['setParamet'+'er']('uInvertOpa'+'city',_0x1a7943),_0x371fb2['setParamet'+'er']('uOpacity',_0x5422f4),_0x371fb2['setParamet'+'er']('clrOffset',_0x461299),_0x371fb2['setParamet'+'er']('clrScale',_0x2f093d),_0x371fb2['setParamet'+'er']('uShapeN',_0x2defc4),_0x371fb2['setParamet'+'er']('mode',_0x9c0e8e),_0x371fb2['setParamet'+'er']('ringSize',_0x49f4d7),_0x371fb2['setParamet'+'er']('prerenderC'+'Time',0x57*-0x6+0x9*0x163+-0xa71),_0x371fb2['setParamet'+'er']('renderSpac'+'e',-0x17fb+0x1*0x573+0x2*0x949),_0x371fb2['setParamet'+'er']('endSpace',0x106f+0x2*-0xd3f+0xa19),_0x371fb2['setDefine']('uOpenAnim',_0x38e198),_0x371fb2['setDefine']('uControlCo'+'lorMode',_0x272cbb),this['transformM'+'otionTextu'+'re']&&_0x371fb2['setParamet'+'er']('transformM'+'otion',this['transformM'+'otionTextu'+'re']),this['transformL'+'ifecycleTe'+'xture']&&_0x371fb2['setParamet'+'er']('transformL'+'ifecycle',this['transformL'+'ifecycleTe'+'xture']),_0x371fb2['setDefine']('SH_BANDS',this['shBands']),_0x371fb2['setDefine']('IS_4D',this['is4D']),this['sh1to3Text'+'ure']&&_0x371fb2['setParamet'+'er']('splatSH_1t'+'o3',this['sh1to3Text'+'ure']),this['sh4to7Text'+'ure']&&_0x371fb2['setParamet'+'er']('splatSH_4t'+'o7',this['sh4to7Text'+'ure']),this['sh8to11Tex'+'ture']&&_0x371fb2['setParamet'+'er']('splatSH_8t'+'o11',this['sh8to11Tex'+'ture']),this['sh12to15Te'+'xture']&&_0x371fb2['setParamet'+'er']('splatSH_12'+'to15',this['sh12to15Te'+'xture']);}['evalTextur'+'eSize'](_0x588278){const _0x17a1e8=Math['ceil'](Math['sqrt'](_0x588278)),_0x1db1d9=Math['ceil'](_0x588278/_0x17a1e8);return new J(_0x17a1e8,_0x1db1d9);}async['updateColo'+'rData'](_0x345c0d){var _0x30c963;console['log']('____\x20ENGIN'+'E\x20IVAN','updateColo'+'rData');const _0x4d8085=this['colorTextu'+'re2'];if(!_0x4d8085||this['isDestroye'+'d'])return;const _0x59f516=_0x345c0d['getProp']('f_dc_0'),_0x43247f=_0x345c0d['getProp']('f_dc_1'),_0x112897=_0x345c0d['getProp']('f_dc_2'),_0xda8128=_0x345c0d['getProp']('opacity');let _0x30c85f=(_0x30c963=_0x345c0d['transformD'+'ata'])==null?void(-0xa*-0x53+-0x154a+0x1a4*0xb):_0x30c963['dataColor'];_0x30c85f||(_0x30c85f=await this['updateData'+'Worker']['updateColo'+'rData'](_0x345c0d['numSplats'],_0x59f516,_0x43247f,_0x112897,_0xda8128)),await this['idleUpdate'+'TexturePro'+'mise'](_0x4d8085,_0x30c85f);}async['getTransfo'+'rmDataByWo'+'rker'](_0xe68ca5){var _0x4271a2;if(console['log']('____\x20ENGIN'+'E\x20IVAN','getTransfo'+'rmDataByWo'+'rker'),(_0x4271a2=_0xe68ca5['transformD'+'ata'])!=null&&_0x4271a2['dataCenter'+'s'])return{'centers':_0xe68ca5['transformD'+'ata']['dataCenter'+'s'],'dataPosition':_0xe68ca5['transformD'+'ata']['dataPositi'+'on'],'dataScale':_0xe68ca5['transformD'+'ata']['dataScale'],'dataRotation':_0xe68ca5['transformD'+'ata']['dataRotati'+'on'],'dataMotion':_0xe68ca5['transformD'+'ata']['dataMotion'],'dataTime':_0xe68ca5['transformD'+'ata']['dataTime'],'motion':_0xe68ca5['transformD'+'ata']['motion'],'tScaleArray':_0xe68ca5['transformD'+'ata']['tScaleArra'+'y']};const _0x2ef1cb=_0xe68ca5['getProp']('x'),_0x5284c5=_0xe68ca5['getProp']('y'),_0x30cb48=_0xe68ca5['getProp']('z'),_0x41e772=_0xe68ca5['getProp']('rot_1'),_0x315c56=_0xe68ca5['getProp']('rot_2'),_0x2007f1=_0xe68ca5['getProp']('rot_3'),_0x222264=_0xe68ca5['getProp']('rot_0'),_0x56f8dc=_0xe68ca5['getProp']('motion_0'),_0x2d397d=_0xe68ca5['getProp']('motion_1'),_0x200ff1=_0xe68ca5['getProp']('motion_2'),_0x140348=_0xe68ca5['getProp']('scale_0'),_0x3e4f85=_0xe68ca5['getProp']('scale_1'),_0x19aa2c=_0xe68ca5['getProp']('scale_2'),_0x4d124c=_0xe68ca5['getProp']('t'),_0x5c6657=_0xe68ca5['getProp']('t_scale');return await this['updateData'+'Worker']['updateTran'+'sData'](_0xe68ca5['numSplats'],this['is4D'],_0x2ef1cb,_0x5284c5,_0x30cb48,_0x41e772,_0x315c56,_0x2007f1,_0x222264,_0x56f8dc,_0x2d397d,_0x200ff1,_0x140348,_0x3e4f85,_0x19aa2c,_0x4d124c,_0x5c6657);}async['updateTran'+'sformFromD'+'ata'](_0x4e3be3){console['log']('____\x20ENGIN'+'E\x20IVAN','updateTran'+'sformFromD'+'ata'),this['transformA'+'Texture2']&&(await this['idleUpdate'+'TexturePro'+'mise'](this['transformA'+'Texture2'],_0x4e3be3['dataPositi'+'on']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformR'+'Texture2'],_0x4e3be3['dataRotati'+'on']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformB'+'Texture2'],_0x4e3be3['dataScale']),this['is4D']&&(await this['idleUpdate'+'TexturePro'+'mise'](this['transformM'+'otionTextu'+'re2'],_0x4e3be3['dataMotion']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformL'+'ifecycleTe'+'xture2'],_0x4e3be3['dataTime'])));}async['idleUpdate'+'TexturePro'+'mise'](_0x49f0da,_0x124247){if(!this['isDestroye'+'d'])return new Promise(_0x43725a=>{requestIdleCallback(()=>{const _0xcbc6e2=_0x49f0da['lock']();_0xcbc6e2==null||_0xcbc6e2['set'](_0x124247),_0x49f0da['unlock'](),_0x43725a(!(0x1c1c+-0xeb6*-0x2+-0x3988*0x1));},{'timeout':0x12c});});}async['updateTran'+'sformData'](_0x35a543){var _0x1a932b,_0x6bc9e7,_0x4b12c3,_0x596ce3;if(console['log']('____\x20ENGIN'+'E\x20IVAN','updateTran'+'sformData'),this['isDestroye'+'d'])return;const _0x5e3940=Mn['float2Half'];if(!this['transformA'+'Texture'])return;const _0x29b06c=this['transformA'+'Texture']['lock'](),_0x4b6138=this['transformR'+'Texture']['lock'](),_0x1d0ffe=this['transformB'+'Texture']['lock'](),_0x2fe08e=(_0x1a932b=this['transformM'+'otionTextu'+'re'])==null?void(-0x733*-0x5+-0x10*-0xf9+-0x338f*0x1):_0x1a932b['lock'](),_0x11a984=(_0x6bc9e7=this['transformL'+'ifecycleTe'+'xture'])==null?void(0x1e*-0xc3+-0x23a8+-0x1*-0x3a82):_0x6bc9e7['lock'](),_0x23bf0f=new D(),_0x4b2bcc=new le(),_0x405688=new D(),_0x439c76=new D(),_0x2f92b1=_0x35a543['createIter'](_0x23bf0f,_0x4b2bcc,_0x405688,null,_0x439c76),_0x542553=_0x35a543['getProp']('t'),_0x43915e=_0x35a543['getProp']('t_scale');for(let _0xd0536d=-0x3*-0xb6f+-0xffd*0x2+-0x253;_0xd0536d<_0x35a543['numSplats'];_0xd0536d++)_0x2f92b1['read'](_0xd0536d),_0x4b2bcc['normalize'](),_0x4b2bcc['w']<0x2331+-0x65*-0x43+-0x3da0&&_0x4b2bcc['mulScalar'](-(0x1*0x1600+0x26de+0x1*-0x3cdd)),_0x29b06c[_0xd0536d*(0x2498+0x44f*-0x7+0x2*-0x336)+(0xb*-0x23e+-0x1cd3*0x1+0x1*0x357d)]=_0x23bf0f['x'],_0x29b06c[_0xd0536d*(-0x2525+0x236c+0x1bc)+(0x1898+0x1045+0x146e*-0x2)]=_0x23bf0f['y'],_0x29b06c[_0xd0536d*(-0x450+0x23fc*-0x1+-0x1*-0x284f)+(-0x21aa+0x322+0x1e8a)]=_0x23bf0f['z'],_0x1d0ffe[_0xd0536d*(0x2*0x60a+0x5*0x2c8+-0x19f9)+(0x952+-0x2437+0x1ae5)]=_0x5e3940(_0x405688['x']),_0x1d0ffe[_0xd0536d*(-0x9e*0x3d+-0x1e72+0x441b)+(-0x422*0x8+0x1691+-0x80*-0x15)]=_0x5e3940(_0x405688['y']),_0x1d0ffe[_0xd0536d*(0x1305+0x1c06+-0x2f08)+(-0xde0+-0x9d4*0x1+0x17b6)]=_0x5e3940(_0x405688['z']),_0x4b6138[_0xd0536d*(0x1572+-0x108e+-0x4e1)+(-0x47*0x70+-0x3*-0xa61+0x1*-0x13)]=_0x4b2bcc['x'],_0x4b6138[_0xd0536d*(0x208f+0x33*-0x3d+-0x1465)+(0xbe9*0x2+-0x17fd+0x2c*0x1)]=_0x4b2bcc['y'],_0x4b6138[_0xd0536d*(0x1*-0xc82+0x67*0x1+0x5e*0x21)+(0x380*0x4+0x1*-0x1e47+0xb*0x17b)]=_0x4b2bcc['z'],this['is4D']&&_0x2fe08e&&_0x11a984&&(_0x2fe08e[_0xd0536d*(0x2675+-0x2e3+0x238f*-0x1)+(-0x246b*0x1+-0x182*-0xf+0xdcd)]=_0x439c76['x'],_0x2fe08e[_0xd0536d*(0xa*-0x59+0x16b+-0x212*-0x1)+(-0x50f+-0x2085+0xc87*0x3)]=_0x439c76['y'],_0x2fe08e[_0xd0536d*(0x14b*-0x1d+0x1*0x7f+0x2503)+(0x1*-0x1d43+-0x15*-0xab+0xf3e)]=_0x439c76['z'],_0x11a984[_0xd0536d*(-0x1*0x11db+-0x1*0x2622+0x3800*0x1)+(-0x17a3+-0x1cdd+0x3480)]=_0x542553?_0x542553[_0xd0536d]:-0x4*-0x342+0xe4f+-0x1b57,_0x11a984[_0xd0536d*(-0x1d7f+-0x7*0x20f+0x2beb)+(-0xd1*-0x29+-0x5*0x1dd+0x1827*-0x1)]=_0x43915e?Math['exp'](_0x43915e[_0xd0536d]):-0x223b+0xeca+0x1371);this['transformA'+'Texture']['unlock'](),this['transformB'+'Texture']['unlock'](),this['transformR'+'Texture']['unlock'](),(_0x4b12c3=this['transformM'+'otionTextu'+'re'])==null||_0x4b12c3['unlock'](),(_0x596ce3=this['transformL'+'ifecycleTe'+'xture'])==null||_0x596ce3['unlock']();}async['updateSHDa'+'ta'](_0x455380){var _0x4069f5,_0x203e4f,_0xb0426b,_0x377ce5,_0x2cb782,_0x320152,_0x4a55a1,_0x3d0260;if(console['log']('____\x20ENGIN'+'E\x20IVAN','updateSHDa'+'ta'),this['isDestroye'+'d'])return;const _0x554908=(_0x4069f5=this['sh1to3Text'+'ure2'])==null?void(0xe03+-0x125*-0x9+-0x1850):_0x4069f5['lock'](),_0x2b447b=(_0x203e4f=this['sh4to7Text'+'ure2'])==null?void(-0x1073+-0x4*0x90d+0x34a7):_0x203e4f['lock'](),_0x435dd5=(_0xb0426b=this['sh8to11Tex'+'ture2'])==null?void(0x270+-0x1*0xe6d+0xbfd):_0xb0426b['lock'](),_0x370c65=(_0x377ce5=this['sh12to15Te'+'xture2'])==null?void(-0x1*0x1345+-0x6e+0x13b3):_0x377ce5['lock'](),_0x539613={0x1:0x3,0x2:0x8,0x3:0xf}[this['shBands']],_0x1a2744=vg(_0x455380,_0x539613*(-0x21f8+0xf2*0x27+0x2e3*-0x1)),_0x27a49e=-0x13d*-0x3+0x371*-0x1+0x1*0x7b9,_0x540170=-0x3f5*0x1+-0x1c70+-0x44*-0x89,_0x1349a0=new Float32Array(-0xcf9+0x71*0x16+0x344),_0x4c8c65=new Uint32Array(_0x1349a0['buffer']),_0x4fcf6e=new Array(_0x539613*(-0x77b+-0xbae+0x132c))['fill'](-0x158*0x1c+-0x1a8a+-0x56*-0xbf);for(let _0x322170=-0x27f+-0xb89+-0xe08*-0x1;_0x322170<_0x455380['numSplats'];++_0x322170){for(let _0x118c83=-0x1a58+0x1d53*-0x1+0x37ab;_0x118c83<_0x539613;++_0x118c83)_0x4fcf6e[_0x118c83*(0x1*0x14eb+0x248*-0x5+-0x980)]=_0x1a2744[_0x118c83][_0x322170],_0x4fcf6e[_0x118c83*(-0x1*-0x1df7+-0xbf1*-0x1+-0x29e5)+(-0x4*0x818+0x24bf+-0x45e)]=_0x1a2744[_0x118c83+_0x539613][_0x322170],_0x4fcf6e[_0x118c83*(-0x16f7+-0x1588*-0x1+-0x4a*-0x5)+(0x12c3+0x25c*0x4+-0x1c31)]=_0x1a2744[_0x118c83+_0x539613*(-0x1582+-0x67*0x43+0x1*0x3079)][_0x322170];let _0x291a64=_0x4fcf6e[0xfdc+-0x1*-0xc05+-0x1be1];for(let _0x52f9d3=-0x2453+-0x1*-0x55b+0x1ef9;_0x52f9d3<_0x539613*(-0x1095*0x1+-0x17*0x5a+0xd*0x1e6);++_0x52f9d3)_0x291a64=Math['max'](_0x291a64,Math['abs'](_0x4fcf6e[_0x52f9d3]));if(_0x291a64!==0xbd*-0x27+-0x2432+0x40fd){for(let _0x1e9028=0x1d2a+-0x2299+0x6b*0xd;_0x1e9028<_0x539613;++_0x1e9028)_0x4fcf6e[_0x1e9028*(0x1e51+-0x6a0+-0x17ae)+(-0x11c1+0x62a+0x3*0x3dd)]=Math['max'](0x2103+-0x23e1+0x2de,Math['min'](_0x27a49e,Math['floor']((_0x4fcf6e[_0x1e9028*(-0x13*0x179+-0x4*-0x628+0x35e)+(0x1*0x148d+0x4e8*0x6+-0xbf*0x43)]/_0x291a64*(0x32*-0x7c+0xd71+0xac7+0.5)+(0x93e+-0x1e60+0x1522+0.5))*_0x27a49e+(0x421*-0x4+-0x349*0xa+-0x59*-0x8e+0.5)))),_0x4fcf6e[_0x1e9028*(0x14f+-0x641*-0x1+-0x78d)+(0x284*0xf+-0x836+-0x1d85)]=Math['max'](-0x1152+0x1dd*-0x5+0x1aa3,Math['min'](_0x540170,Math['floor']((_0x4fcf6e[_0x1e9028*(0x1c02+0x1*-0xba2+-0x105d)+(-0x1e12+-0x912+-0x1*-0x2725)]/_0x291a64*(0xc08+0x18*-0x41+-0x5f0+0.5)+(0x4e*-0x3+-0x1d65+0x1e4f+0.5))*_0x540170+(0x134+0xf9e+0x10d2*-0x1+0.5)))),_0x4fcf6e[_0x1e9028*(-0x3*0x9f+0x1d24+0x1*-0x1b44)+(-0x268c+0x1*-0x23cf+0x4a5d)]=Math['max'](-0x1*-0x1f28+-0x1c87+-0x2a1,Math['min'](_0x27a49e,Math['floor']((_0x4fcf6e[_0x1e9028*(-0x2024+0x2375+-0x34e)+(0x1049+-0x12bb+0x4*0x9d)]/_0x291a64*(-0x4d*0x2e+-0x1ac0+-0x144b*-0x2+0.5)+(0x1cb*-0x4+0x472*-0x1+0x1*0xb9e+0.5))*_0x27a49e+(0x65b*-0x1+-0xd*-0x22f+-0x1608+0.5))));_0x1349a0[0xe*-0x1a+-0xef*0x1f+0x1e5d]=_0x291a64,_0x554908[_0x322170*(-0x128a+-0x256c*-0x1+-0x2e*0x69)+(0x1*0x593+0x25fa+0x2b8d*-0x1)]=_0x4c8c65[0x1*0x2218+-0x935*-0x1+-0x2b4d],_0x554908[_0x322170*(0x13fb+0x1d*0x7f+-0x225a)+(0x2671+-0x1ff2+-0x67e)]=_0x4fcf6e[-0x2*-0x110b+-0xf12+-0x1304]<<-0x26b4+-0x262c+-0xc7*-0x63|_0x4fcf6e[0x3*-0x6ed+-0x1eb5+-0x75b*-0x7]<<0x1aa*-0x2+0x1af6+-0x1797|_0x4fcf6e[-0x254b+0xde6+0x1767],_0x554908[_0x322170*(-0x1*0x22f3+0x2110+0x1e7)+(0xb5*0x27+-0x1ac1*0x1+-0xd0*0x1)]=_0x4fcf6e[0x888+-0x1ac7+0x1242]<<0x536+-0x95a+0x1*0x439|_0x4fcf6e[0x3*0x426+0x18fb+-0x2569]<<-0x985*-0x1+0x17a*-0x9+0x3d0|_0x4fcf6e[-0x2b*0xc5+-0x13b6*-0x1+-0xd66*-0x1],_0x554908[_0x322170*(-0x972+-0x231f+0x65*0x71)+(-0x13*-0xc9+-0x1373+0x1*0x48b)]=_0x4fcf6e[-0xdff+0x168e*0x1+-0x889]<<0x153d+0x2265+-0x378d|_0x4fcf6e[0x15be+-0x1*0xd17+-0x4*0x228]<<0xeed+-0x1bf*0xc+-0x4a*-0x15|_0x4fcf6e[-0x239f+-0x670+0x2a17],this['shBands']>-0xce3*0x1+0xd*-0x28f+0x5*0x93b&&(_0x2b447b[_0x322170*(-0x4c0*0x2+0x1e5+0x79f)+(-0xa9+-0x133b+0x13e4)]=_0x4fcf6e[-0x21ad+0x1322+0xe94]<<-0x1d4d+-0x7*0x30a+0x32a8|_0x4fcf6e[0x20+0x2*-0x502+0x1*0x9ee]<<-0x7e2*-0x1+0x21c3+-0x1*0x299a|_0x4fcf6e[-0x1473+0x1*-0x1b49+0x2fc7],_0x2b447b[_0x322170*(0x1*-0x6c3+0x1*-0x18da+-0x3*-0xa8b)+(0x2664+0xaf*0x1+-0x2712)]=_0x4fcf6e[0xa42*-0x1+-0x71d+0x116b]<<0x1416+0x6+-0x1*0x1407|_0x4fcf6e[0xb*-0x33b+0x1a28+0x47*0x22]<<0x1*-0x96e+-0x1a51+-0x23ca*-0x1|_0x4fcf6e[0x3*0xb5f+-0x19da+-0x1*0x835],_0x2b447b[_0x322170*(0x2b6*0x1+-0x192f+0x65*0x39)+(-0x1*0x1c76+0x254*-0x9+0x1*0x316c)]=_0x4fcf6e[0x8*-0x4d1+0x2b8+0x1*0x23df]<<-0x5*0x5e7+-0xe95+-0x107*-0x2b|_0x4fcf6e[-0xe24+0x1408+-0x5d4]<<-0x24cf+-0x5f4+0x2ace*0x1|_0x4fcf6e[-0x4c0+-0x1*-0x349+0x188],_0x2b447b[_0x322170*(0x2407+0x1740+-0x3b43)+(-0x559+-0x10c*-0xa+-0x51c)]=_0x4fcf6e[-0xa7b+0x167*0x17+-0x2*0xada]<<0xf6d+0xb9e+-0x1af6|_0x4fcf6e[-0x45d*-0x3+-0x4f9*0x1+-0x80b]<<-0x614+-0xdb*0x26+0x26a1|_0x4fcf6e[0xc4a+-0xea7*0x2+0x1118],this['shBands']>0x2296+-0x5*-0x655+0x423d*-0x1?(_0x435dd5[_0x322170*(-0x257*-0x5+0x19*0x77+0x9d*-0x26)+(0x18bb*-0x1+0xa61*-0x3+0x1*0x37de)]=_0x4fcf6e[0x1096+-0x2057*0x1+0xfd6]<<-0x1643+0x168f+0x37*-0x1|_0x4fcf6e[0x10e8+-0xc84*-0x1+-0x1d56]<<-0x1826+-0xfa4+0x27d5|_0x4fcf6e[-0x9fc+-0x2*0xdf0+0x25f3],_0x435dd5[_0x322170*(-0x2307+0x106*0x8+0x1*0x1adb)+(0x1*-0x227+-0x1cac+0x1ed4)]=_0x4fcf6e[-0x412+-0x1a13+0x1*0x1e3d]<<0x1*0x40+0x2*0x49+-0x1*0xbd|_0x4fcf6e[0xd*-0x1d1+-0x1f*-0xb+0x1661]<<-0x31*0x2a+0x1558+-0xd43|_0x4fcf6e[-0x11c*-0x1b+-0x353+0x1*-0x1a87],_0x435dd5[_0x322170*(-0x1ac5*-0x1+-0x3e2*0x8+0x44f)+(-0xd99+0x199c+-0xc01)]=_0x4fcf6e[-0xe83*0x1+-0x1*0x1ea9+0x2d47]<<-0x5*0x3d+0x2*0x203+-0x2c0|_0x4fcf6e[-0x32*0x25+-0x7f6+0x16*0xb2]<<0x17*-0x16f+-0xd4d+-0x1*-0x2e51|_0x4fcf6e[-0x14d9+-0x29*0x27+0x1b35],_0x435dd5[_0x322170*(-0x1c9*0x11+0x25*-0x7a+-0x1*-0x2fff)+(0x1*-0x223+-0xa54+0xc7a)]=_0x4fcf6e[-0xb*-0x189+-0x51*-0x53+-0x2b08]<<-0xa94+-0x21a8+0x2c51|_0x4fcf6e[0xfb9+-0x577*-0x1+-0x1*0x1511]<<0x1e4f+0x2*-0x472+-0x1560|_0x4fcf6e[0x22ab+0x1bf3+0x1*-0x3e7e],_0x370c65[_0x322170*(0x2a4+0xd20+-0x10*0xfc)+(0x60d*-0x3+0x1785+-0x55e)]=_0x4fcf6e[0x3*0x2ab+0x74b+-0xf2b*0x1]<<-0x1e8*-0x2+-0x1d*0x45+0x416|_0x4fcf6e[-0x8e*-0x3b+-0x242e+0x396]<<0xed5+0x3b2+-0x127c|_0x4fcf6e[0x654+0x16*-0x2b+-0x27f],_0x370c65[_0x322170*(-0x3b*-0x23+-0xae8+0x2db)+(-0x1c9c+0x6d*0x3b+-0x6*-0x95)]=_0x4fcf6e[0x275+-0x2168+-0xa5d*-0x3]<<0xad1+0x5e4+-0x10a0|_0x4fcf6e[-0x2*-0x48d+0xbd2*0x1+-0x14c7]<<-0x3b*-0x8a+0x26ca+-0x468d|_0x4fcf6e[0x1*0x2+-0xfa7+0xfcb],_0x370c65[_0x322170*(0x92*0x20+0x17c5+0x2a01*-0x1)+(-0xa9*0x2f+0x335*0xb+-0x21f*0x2)]=_0x4fcf6e[0x48a+0x10ca+0x8b*-0x27]<<0x203d+-0x2558+-0x298*-0x2|_0x4fcf6e[-0x19*-0x137+-0x496*0x7+0x1e3]<<-0x33*-0xa5+-0x18d8+0x49*-0x1c|_0x4fcf6e[-0x5*0x7ae+-0x1f8b+-0x9*-0x7ca],_0x370c65[_0x322170*(0xe01+-0x12*-0x213+0x7*-0x755)+(0x71*0x56+0x2e5*0x1+0x1*-0x28d8)]=_0x4fcf6e[0x12*-0x1e6+0x26c0+0x71*-0xa]<<0x110d+-0x3*0x259+-0x9ed|_0x4fcf6e[-0x9f0+0x18d6+0x1a3*-0x9]<<-0x19b7+-0x25c5+0x3f87|_0x4fcf6e[0x3*0x769+-0x1c99+-0x1*-0x68a]):_0x435dd5[_0x322170]=_0x4fcf6e[-0x1650+0x4*0x515+0x211]<<-0x1*-0x8eb+0x1*-0x246d+0x1b97|_0x4fcf6e[0xf9b+0x243a*0x1+-0x3fb*0xd]<<0x613+-0x4f+0x1*-0x5b9|_0x4fcf6e[-0x16c9+-0xfc8+-0x26a8*-0x1]);}}(_0x2cb782=this['sh1to3Text'+'ure2'])==null||_0x2cb782['unlock'](),(_0x320152=this['sh4to7Text'+'ure2'])==null||_0x320152['unlock'](),(_0x4a55a1=this['sh8to11Tex'+'ture2'])==null||_0x4a55a1['unlock'](),(_0x3d0260=this['sh12to15Te'+'xture2'])==null||_0x3d0260['unlock']();}async['updateSHDa'+'taByWorker'](_0x4b079d){var _0x5b98bc,_0x446045,_0x95afc6,_0x4fae10,_0x2260ae;if(console['log']('____\x20ENGIN'+'E\x20IVAN','updateSHDa'+'taByWorker'),this['isDestroye'+'d'])return;const _0x29b9a7={0x1:0x3,0x2:0x8,0x3:0xf}[this['shBands']];let _0x529540,_0x329c12,_0x5ee60c,_0x145a15;if((_0x5b98bc=_0x4b079d['transformD'+'ata'])!=null&&_0x5b98bc['sh1to3Data'])_0x529540=(_0x446045=_0x4b079d['transformD'+'ata'])==null?void(-0x5*0x268+0x4*0x7c9+0x1*-0x131c):_0x446045['sh1to3Data'],_0x329c12=(_0x95afc6=_0x4b079d['transformD'+'ata'])==null?void(-0x1*-0xb5d+0x23*0x8c+-0x1e81*0x1):_0x95afc6['sh4to7Data'],_0x5ee60c=(_0x4fae10=_0x4b079d['transformD'+'ata'])==null?void(-0x6*-0x657+-0x1a7*0x3+0xb07*-0x3):_0x4fae10['sh8to11Dat'+'a'],_0x145a15=(_0x2260ae=_0x4b079d['transformD'+'ata'])==null?void(0x2304+0x26c9+0x1*-0x49cd):_0x2260ae['sh12to15Da'+'ta'];else{const _0x418a88=vg(_0x4b079d,_0x29b9a7*(0x1*-0x17fd+-0x580+-0x1d80*-0x1)),_0x1cd5c8=await this['updateData'+'Worker']['updateSHDa'+'ta1'](_0x4b079d['numSplats'],this['shBands'],_0x418a88);_0x529540=_0x1cd5c8['sh1to3Data'],_0x329c12=_0x1cd5c8['sh4to7Data'],_0x5ee60c=_0x1cd5c8['sh8to11Dat'+'a'],_0x145a15=_0x1cd5c8['sh12to15Da'+'ta'];}await this['idleUpdate'+'TexturePro'+'mise'](this['sh1to3Text'+'ure2'],_0x529540),this['shBands']>-0x125c+-0xfa2+0x3c7*0x9&&(await this['idleUpdate'+'TexturePro'+'mise'](this['sh4to7Text'+'ure2'],_0x329c12),this['shBands']>0x3fb+-0x11e4+0xdeb?(await this['idleUpdate'+'TexturePro'+'mise'](this['sh8to11Tex'+'ture2'],_0x5ee60c),await this['idleUpdate'+'TexturePro'+'mise'](this['sh12to15Te'+'xture2'],_0x145a15)):await this['idleUpdate'+'TexturePro'+'mise'](this['sh8to11Tex'+'ture2'],_0x5ee60c));}}async function bC(){const _0x3b9bf3=new Float32Array(-0x168f+-0x981*0x1+0x1*0x2011);new Int32Array(_0x3b9bf3['buffer']);let _0x151de2=null,_0x56265a=null,_0x24cd41=null,_0x15411c=null,_0x55a2b5=null,_0x42fe4e=null,_0x53b89f=null,_0x5623d4=null;self['onmessage']=async _0x4cd82f=>{const {data:_0x1f9eec}=_0x4cd82f;switch(_0x1f9eec['type']){case'initWorker':break;case'updateSHDa'+'ta1':_0x238021(_0x1f9eec['numSplats'],_0x1f9eec['shBands'],_0x1f9eec['SHData']);break;case'updateTran'+'sformData':_0x1a781e(_0x1f9eec['numSplats'],_0x1f9eec['is4D'],_0x1f9eec['position'],_0x1f9eec['rotation'],_0x1f9eec['motion'],_0x1f9eec['scale'],_0x1f9eec['muT'],_0x1f9eec['tScale']);break;case'destroyWor'+'ker':_0x245086();break;}};const _0x1a781e=(_0x302bc2,_0x3e99b3,_0x41701a,_0x1bac58,_0x121417,_0x8bdcdf,_0x4b5de0,_0x23eae0)=>{_0x245086(),_0x3e99b3&&(_0x56265a=new Float32Array(_0x302bc2*(-0xd*-0x1b4+-0x1763*-0x1+-0x2d84)),_0x5623d4=new Float32Array(_0x302bc2),_0x55a2b5=new Float32Array(_0x121417['buffer']['slice']()),_0x53b89f=new Float32Array(_0x121417['buffer']['slice']())),_0x15411c=new Float32Array(_0x41701a['buffer']['slice']()),_0x151de2=new Float32Array(_0x41701a['buffer']['slice']()),_0x42fe4e=new Uint16Array(_0x8bdcdf['buffer']['slice']()),_0x24cd41=new Float32Array(_0x1bac58['buffer']['slice']());for(let _0x384ee9=-0xc3c+0x162f+0x9f3*-0x1;_0x384ee9<_0x302bc2;_0x384ee9++)_0x3e99b3&&_0x56265a&&(_0x5623d4[_0x384ee9]=_0x23eae0?Math['exp'](_0x23eae0[_0x384ee9]):0x11a6+0x222a+-0x1*0x33d0,_0x56265a[_0x384ee9*(0x2162+-0x2*0xe85+0x1*-0x455)+(0x151b+-0x125+0x46*-0x49)]=_0x4b5de0?_0x4b5de0[_0x384ee9]:0x1e59+0x71*0x38+-0x6f*0x7f,_0x56265a[_0x384ee9*(-0x2303*-0x1+0x1b13+-0x3e13)+(0x1e34+-0x608+0x17*-0x10d)]=_0x5623d4[_0x384ee9]);const _0x2d347e=[_0x151de2['buffer'],_0x15411c['buffer'],_0x42fe4e['buffer'],_0x24cd41['buffer']];_0x3e99b3&&_0x2d347e['push'](_0x55a2b5['buffer'],_0x56265a['buffer'],_0x53b89f['buffer'],_0x5623d4['buffer']),self['postMessag'+'e']({'type':'updatedTra'+'nsformData','centers':_0x151de2,'dataPosition':_0x15411c,'dataScale':_0x42fe4e,'dataRotation':_0x24cd41,'dataMotion':_0x55a2b5,'dataTime':_0x56265a,'motion':_0x53b89f,'tScaleArray':_0x5623d4},_0x2d347e);},_0x238021=(_0x3ad7e3,_0x5c6141,_0x1c2b08)=>{const _0x31f510=new Uint32Array(_0x3ad7e3*(-0x105d+-0x302+-0x1*-0x1363)),_0x125e01=new Uint32Array(_0x3ad7e3*(-0x8*-0x11c+0x2b3*-0x1+0x629*-0x1)),_0x31050a=new Uint32Array(_0x3ad7e3*(-0x2*-0x8ad+-0x1276+0x120)),_0x51d8ff=new Uint32Array(_0x3ad7e3*(0x20*-0x80+0xe76+0x18e)),_0x3ef3de={0x1:0x3,0x2:0x8,0x3:0xf}[_0x5c6141],_0x3603a7=_0x1c2b08,_0x5e9cc3=0xfd*0x1d+-0xc09+0x1*-0x8a1,_0x4dff2b=0x2233+-0x1586+-0x65*0x16,_0x8bca7f=new Float32Array(0x1*0x1b2f+0x6*-0x592+0x63e),_0x2ea483=new Uint32Array(_0x8bca7f['buffer']),_0x173379=new Array(_0x3ef3de*(-0x1bb0+0x1835+0x37e))['fill'](0x195a+0x9e5+-0x509*0x7);for(let _0x2d0bbe=0x1*-0x2225+-0xb*-0x161+0x1*0x12fa;_0x2d0bbe<_0x3ad7e3;++_0x2d0bbe){for(let _0x389649=0x71*0x2+-0x37c*0x6+0x1406;_0x389649<_0x3ef3de;++_0x389649)_0x173379[_0x389649*(0x1d70+0x1*0x225d+-0x3fca)]=_0x3603a7[_0x389649][_0x2d0bbe],_0x173379[_0x389649*(0x6d*0x5+0x5*0x1c7+-0xb01)+(-0x1e44*0x1+-0x1826*0x1+0x1*0x366b)]=_0x3603a7[_0x389649+_0x3ef3de][_0x2d0bbe],_0x173379[_0x389649*(-0xa9*0x2b+0x2*-0x600+0x1433*0x2)+(-0xa79+0x11ea+-0x76f)]=_0x3603a7[_0x389649+_0x3ef3de*(0x7f3+-0xb9*-0x1d+-0x1ce6)][_0x2d0bbe];let _0x2709df=_0x173379[0x8ec*-0x1+0x1*-0x1292+0x1b7e];for(let _0x5e2ce5=-0x17e4*-0x1+0x1341+-0x2b24;_0x5e2ce5<_0x3ef3de*(0xc5*-0x21+0x1*-0x6fb+-0x2063*-0x1);++_0x5e2ce5)_0x2709df=Math['max'](_0x2709df,Math['abs'](_0x173379[_0x5e2ce5]));if(_0x2709df!==0x3ec+0x1fa*0x7+-0x11c2){for(let _0x24c03d=0x152b+0x6f8+0x15*-0x157;_0x24c03d<_0x3ef3de;++_0x24c03d)_0x173379[_0x24c03d*(0xb0f+-0x1bfe*0x1+0x10f2)+(0x1b8e+0xba7*0x1+-0x2735)]=Math['max'](0x2348+0x2654+-0x499c,Math['min'](_0x5e9cc3,Math['floor']((_0x173379[_0x24c03d*(-0x157e+-0x18b4+0x2e35)+(0x1*0x973+-0x2202+0x188f)]/_0x2709df*(0x2d*-0x8d+0x19fb+-0x132+0.5)+(-0xb14+0x2b3+0x861+0.5))*_0x5e9cc3+(0x78d*-0x1+-0x1*-0x232f+-0x1ba2+0.5)))),_0x173379[_0x24c03d*(-0x1*0x1483+-0x6b*-0xe+0xeac)+(-0xc7*0x26+0xad*-0x1+0x1e38)]=Math['max'](0xf74+-0x10*-0xcd+-0x1c44,Math['min'](_0x4dff2b,Math['floor']((_0x173379[_0x24c03d*(-0x6*0x669+0x1*-0x19de+-0x7*-0x931)+(-0x6*-0x3e+0x2336+0x24a9*-0x1)]/_0x2709df*(0x517+-0x57*0x4f+-0x1*-0x15c2+0.5)+(-0x23f5+-0x15d*0x2+-0xce5*-0x3+0.5))*_0x4dff2b+(-0x1183+0x422+0xd61+0.5)))),_0x173379[_0x24c03d*(-0x2*0x582+-0x13e+0xc45)+(0x1b58+-0x25aa+-0x1*-0xa54)]=Math['max'](0x158*-0xd+-0x1*-0x20d7+-0x313*0x5,Math['min'](_0x5e9cc3,Math['floor']((_0x173379[_0x24c03d*(-0x90*-0x3+-0x1c04+0x1*0x1a57)+(-0x1bd1*-0x1+0x1*0xb8f+-0x13af*0x2)]/_0x2709df*(0x11b3+0x18b5+-0x2a68+0.5)+(0x1bfa+-0x8b0+-0x1*0x134a+0.5))*_0x5e9cc3+(0x17eb+0x1f66+-0x11*0x341+0.5))));_0x8bca7f[-0x1*-0x1a1f+0x1*0x2336+-0x3d55]=_0x2709df,_0x31f510[_0x2d0bbe*(0x1f92+-0x1*-0x21f1+-0xf3*0x45)+(0x1429*-0x1+-0xc5*0x15+0x2452)]=_0x2ea483[-0x142d+-0x1b0d+-0xba*-0x41],_0x31f510[_0x2d0bbe*(-0xc61+0x6c1+-0x2*-0x2d2)+(-0x1c19*-0x1+-0x3*-0xaf3+0x3cf1*-0x1)]=_0x173379[0x26f5*-0x1+0x13*0x6d+0x1ede*0x1]<<-0x100+-0x2cd+-0xe*-0x47|_0x173379[0x2c7*-0x2+0x1b71+-0x15e2]<<0x121*-0x22+0x20db+0x1*0x592|_0x173379[-0x264b+-0x2*0x676+0x3339],_0x31f510[_0x2d0bbe*(0x11*-0xb+-0x29e*-0xd+0x2147*-0x1)+(-0x7*0x30f+0x23f9+-0x2*0x747)]=_0x173379[-0x1*0xd22+0x19f9+-0xcd4]<<-0x6fa+0xc4f*-0x1+0x135e|_0x173379[-0x1*0x2169+0x333+-0x2*-0xf1d]<<0xff1+-0x1*-0x7a2+-0x1788|_0x173379[-0x8d1+0x17c5+0x1*-0xeef],_0x31f510[_0x2d0bbe*(-0x5e*-0x44+-0x25e6+0x1*0xcf2)+(-0xef2+0x216a+0x69*-0x2d)]=_0x173379[0x2312+0x14a5+-0x37b1*0x1]<<0x233f*0x1+0xb2a+-0x2e54|_0x173379[-0x261f+-0x1*0x464+0x2a8a]<<-0x1fe6+0x7db*0x1+-0x2*-0xc0b|_0x173379[-0xa9e*-0x3+0x1*0x4e4+-0x24b6],_0x5c6141>-0x2451+0x1159+0x3*0x653&&(_0x125e01[_0x2d0bbe*(0x1660+-0x1*-0x1295+0xdf*-0x2f)+(0x1*0x1051+0x3*0x4cb+-0x1eb2)]=_0x173379[0xd2e*-0x1+0x9cb*0x3+-0x815*0x2]<<0x277*-0xd+-0x52f+0x254f|_0x173379[0x102*0x19+-0xd*-0x82+-0x1fc2]<<0x1054+-0x7e8+-0x861|_0x173379[0x1*-0x1511+-0x1fe6+-0x1*-0x3502],_0x125e01[_0x2d0bbe*(-0x22*0x22+-0x7c*0xb+0x9dc)+(0x1600+-0xa3*-0x4+-0x188b)]=_0x173379[-0x29*0xe5+0x16f1+0xdc8]<<-0x7*0xa7+0x3f5+0xb1|_0x173379[0x1e25+-0x1ddb*0x1+-0x3d*0x1]<<0x3*0x86+0xd35+-0xebc|_0x173379[0xa7*0x2b+-0x1d0e+0x10f*0x1],_0x125e01[_0x2d0bbe*(0x1a0d+0x1b0d+0x12*-0x2f3)+(-0x17*0xf1+0x174a+-0x1a1*0x1)]=_0x173379[-0x18d*-0x11+0x1037+-0x23*0x137]<<-0x9d7+-0x1bed+0x25d9*0x1|_0x173379[-0x10dc+-0x17f5+0x28e1]<<0x455*0x5+-0x1*-0xef9+-0x2497|_0x173379[-0x2493+-0x3*0x83+0x262d],_0x125e01[_0x2d0bbe*(0x3*-0x8c9+0x5d3+0x5*0x41c)+(0xd92+0xa62+-0x17f1)]=_0x173379[0x25d5+0x470+-0x33f*0xd]<<-0x1895+0x7*-0x40f+0x3513|_0x173379[0x8a9+-0x25e7*-0x1+-0x3*0xf7f]<<0xb*-0x1a6+0x22b7+0x1d*-0x92|_0x173379[-0x3a5+0x193d+-0x1584],_0x5c6141>0x1661*-0x1+-0x16d*-0x17+-0xa68?(_0x31050a[_0x2d0bbe*(0x2501+-0x1b71+-0x98c)+(-0x1921*0x1+0x1ef0+-0x5cf)]=_0x173379[0x6e3+-0x878+0x1aa]<<-0x18ff+0x235b+-0xa47|_0x173379[0x19f5+-0x127f+-0x760]<<0x5*-0x22d+0x2005+-0x1519|_0x173379[-0x16*0x49+-0x2*0x657+0x145*0xf],_0x31050a[_0x2d0bbe*(0x97*-0x26+0x26e3+-0x1075)+(0xe75+0xb*-0x1c3+0x4ed)]=_0x173379[-0x2*0x3df+0x1da5*-0x1+0x65*0x5f]<<0x1f*0x11f+0x1475+0xb*-0x503|_0x173379[-0x1*0xa9+0x24e9*0x1+-0x3*0xc0d]<<-0x14fe+-0x83*0x7+-0x89*-0x2e|_0x173379[-0x24b7*0x1+-0x1*-0x1b3b+0x996],_0x31050a[_0x2d0bbe*(0x1a40+0x3a6+0x1fe*-0xf)+(-0x16a6+0xe1*0x25+-0x9dd)]=_0x173379[-0x2055+-0x716+0x13c3*0x2]<<-0x35c*0x7+0x369+0x1430|_0x173379[0x190+-0x233+0xbf]<<-0x1662+-0x2e*-0x3+0x15e3|_0x173379[0x15*0xcb+0x5da*-0x3+0x104],_0x31050a[_0x2d0bbe*(-0x597+-0x371+0x90c)+(-0x1fb5*0x1+0x2*-0xa76+0x3*0x118c)]=_0x173379[-0x2371+-0xf3a+0x32c9*0x1]<<0x5e0*-0x1+0x14ad+-0xeb8|_0x173379[-0x127d+-0x1311*-0x2+-0x62*0x33]<<0x243f+-0x1*0x1747+-0xced|_0x173379[-0x1177*-0x1+0x4*0x755+-0x2eab],_0x51d8ff[_0x2d0bbe*(0x3*-0x85a+0x19b5+-0xa3)+(0x5e*0x35+0x679*0x1+-0x19ef)]=_0x173379[-0x196e+0x805*-0x1+-0x1*-0x2194]<<0xa*0x1e9+0x7d9+-0x1ade|_0x173379[-0x1*0x1e99+0x17*0xd6+0x1f*0x5f]<<-0xd3*-0x7+0xa*0x115+0x108c*-0x1|_0x173379[-0x19a7+-0x1524+0x2eee],_0x51d8ff[_0x2d0bbe*(-0x165*0xf+0x1530+0x41*-0x1)+(-0x7*-0x1de+0xd60+-0x1a71*0x1)]=_0x173379[-0x431+-0x1566+0x3ad*0x7]<<-0x21df*-0x1+0x1*0x16d3+-0x389d|_0x173379[0x228c+0x1d24+-0x3f8b]<<0x32c+0x16c2+-0x19e3|_0x173379[-0xedc+0x33a*0x2+-0x2da*-0x3],_0x51d8ff[_0x2d0bbe*(-0x1baf+0x1bff+-0x4c)+(-0x124e+0x2424+-0x11d4)]=_0x173379[0x61a+-0x3*0xb+-0x2*0x2e9]<<0xc*0x2ec+0x1acb+-0x3dc6|_0x173379[0x23*-0x91+-0xecc+0x22c7]<<0x1d*-0xc6+0xf6+0x1583|_0x173379[0x1*0x1e8b+-0x11a0+-0x17*0x8e],_0x51d8ff[_0x2d0bbe*(-0x40*-0x14+0x1*0x4b5+-0x3*0x33b)+(-0xb*-0x34b+-0x1e4e+0x15*-0x48)]=_0x173379[-0x1*0x19ac+0xbab+0xe2b]<<-0xce9+0x25ae+-0x18b0|_0x173379[0x653*0x6+-0x223+-0x23a4*0x1]<<0x1dff*-0x1+0x1357+0xab3|_0x173379[0x241*-0x3+-0x21d8+0x28c7]):_0x31050a[_0x2d0bbe]=_0x173379[0x10fd+0x17fd+-0x1*0x28e5]<<-0x1*-0x1ea6+0x1497+-0x3328|_0x173379[-0x2*0x93c+-0x1*-0x26d1+0x85*-0x27]<<-0x18f*0x9+0x1*-0x31a+0x2*0x896|_0x173379[-0x1*0x7dc+-0x1a7c+0x226f]);}}self['postMessag'+'e']({'type':'updatedSHD'+'ata1','data':{'sh1to3Data':_0x31f510,'sh4to7Data':_0x125e01,'sh8to11Data':_0x31050a,'sh12to15Data':_0x51d8ff}},[_0x31f510['buffer'],_0x125e01['buffer'],_0x31050a['buffer'],_0x51d8ff['buffer']]);},_0x245086=()=>{_0x151de2=null,_0x56265a=null,_0x24cd41=null,_0x15411c=null,_0x55a2b5=null,_0x42fe4e=null,_0x53b89f=null,_0x5623d4=null;};}class AC extends me{constructor(){super(),this['_initWorke'+'r']();}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+bC['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'})));}['workerMess'+'ageFn'](_0x1cfce3,_0x26f062,_0x5d8c73){_0x1cfce3['onmessage']=_0x1f57a8=>{if(!this['worker'])return;const {data:_0x5324b7}=_0x1f57a8;if(_0x5324b7['type']===_0x26f062)switch(_0x26f062){case'updatedSHD'+'ata1':_0x5d8c73(_0x5324b7['data']);break;case'updatedCol'+'orData':_0x5d8c73(_0x5324b7['data']);break;case'updatedTra'+'nsformData':_0x5d8c73(_0x5324b7);break;}};}['updateSHDa'+'ta1'](_0x552142,_0x135dcc,_0x1e92d4){var _0x329655;return(_0x329655=this['worker'])==null||_0x329655['postMessag'+'e']({'type':'updateSHDa'+'ta1','numSplats':_0x552142,'shBands':_0x135dcc,'SHData':_0x1e92d4}),new Promise(_0xc6e97f=>{this['workerMess'+'ageFn'](this['worker'],'updatedSHD'+'ata1',_0xf50b8f=>{_0xc6e97f(_0xf50b8f);});});}async['updateTran'+'sData'](_0xa3ae95,_0x46e8bd,_0x45960e,_0x4ef407,_0x52aded,_0x50e0f1,_0x34d814,_0xf7f140){var _0x22173d;return(_0x22173d=this['worker'])==null||_0x22173d['postMessag'+'e']({'type':'updateTran'+'sformData','numSplats':_0xa3ae95,'is4D':_0x46e8bd,'position':_0x45960e,'rotation':_0x4ef407,'motion':_0x52aded,'scale':_0x50e0f1,'muT':_0x34d814,'tScale':_0xf7f140}),new Promise(_0x518722=>{const _0x2bb462=_0x1dc01c=>{_0x518722(_0x1dc01c);};this['workerMess'+'ageFn'](this['worker'],'updatedTra'+'nsformData',_0x2bb462);});}['destroy'](){var _0x3b46aa;this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),(_0x3b46aa=this['worker'])==null||_0x3b46aa['terminate'](),this['worker']=null);}}const xg=(_0x1129e2,_0xa3a3b0)=>{const _0x3e6f5e=[];for(let _0x2c7c2e=-0x11*0x15d+0xfb4+0x779;_0x2c7c2e<_0xa3a3b0;++_0x2c7c2e)_0x3e6f5e['push'](_0x1129e2['getProp']('f_rest_'+_0x2c7c2e));return _0x3e6f5e;};class CC extends Rv{constructor(_0x26aee3,_0x443ef5){super(_0x26aee3,_0x443ef5),h(this,'timeOption'),h(this,'appendQueu'+'e',[]),h(this,'isProcessi'+'ngQueue',!(-0x35*0xa7+0x4e0+0x1db4)),h(this,'muT'),h(this,'tScale'),h(this,'motion'),h(this,'timeIndex'),h(this,'colorTextu'+'re'),h(this,'transformA'+'Texture'),h(this,'transformB'+'Texture'),h(this,'transformR'+'Texture'),h(this,'transformM'+'otionTextu'+'re'),h(this,'transformL'+'ifecycleTe'+'xture'),h(this,'colorTextu'+'re2'),h(this,'transformA'+'Texture2'),h(this,'transformB'+'Texture2'),h(this,'transformR'+'Texture2'),h(this,'transformM'+'otionTextu'+'re2'),h(this,'transformL'+'ifecycleTe'+'xture2'),h(this,'is4D'),h(this,'shBands'),h(this,'sh1to3Text'+'ure'),h(this,'sh4to7Text'+'ure'),h(this,'sh8to11Tex'+'ture'),h(this,'sh12to15Te'+'xture'),h(this,'sh1to3Text'+'ure2'),h(this,'sh4to7Text'+'ure2'),h(this,'sh8to11Tex'+'ture2'),h(this,'sh12to15Te'+'xture2'),h(this,'updateData'+'Worker'),(this['updateData'+'Worker']=new AC(),this['assetsMana'+'gerLoadedT'+'ime']=0x19eb+0x2*-0x25e+-0x152a);}['setSceneIn'+'fo'](_0x3af6bc){this['sceneInfo']['duration']=_0x3af6bc['duration'],this['sceneInfo']['fps']=_0x3af6bc['fps'],this['sceneInfo']['totalGauss'+'ians']=_0x3af6bc['totalGauss'+'ians'],this['sceneInfo']['globalBoun'+'dingBoxMin']=new D(_0x3af6bc['globalBoun'+'dingBox']['min'][-0x5*-0xe8+-0x278*-0x7+-0x15d0],_0x3af6bc['globalBoun'+'dingBox']['min'][-0x698+-0x22fc+-0x851*-0x5],_0x3af6bc['globalBoun'+'dingBox']['min'][-0x10c*-0x1+-0x1*-0x16a+-0x1*0x274]),this['sceneInfo']['globalBoun'+'dingBoxMax']=new D(_0x3af6bc['globalBoun'+'dingBox']['max'][0x12df+-0xfe8+-0x2f7],_0x3af6bc['globalBoun'+'dingBox']['max'][-0x2*-0xee6+-0x20a4+0x2d9],_0x3af6bc['globalBoun'+'dingBox']['max'][0x1344+0x1*-0x2225+0xee3]);const _0x5bddeb=_0x3af6bc['globalBoun'+'dingBox']['min'][-0xe97+0x2*-0x8ce+-0x2033*-0x1],_0x4adbd7=_0x3af6bc['globalBoun'+'dingBox']['min'][-0x30+0x305*0xb+0xb02*-0x3],_0x22ff76=_0x3af6bc['globalBoun'+'dingBox']['min'][0x209d+0x2ea+0x1b1*-0x15],_0x57930a=_0x3af6bc['globalBoun'+'dingBox']['max'][0x1*0xcfb+-0x2597*-0x1+-0x3292],_0x725143=_0x3af6bc['globalBoun'+'dingBox']['max'][0x989+0x446+-0xdce],_0x460f9d=_0x3af6bc['globalBoun'+'dingBox']['max'][0x7cf*-0x1+-0x17be+0x1f8f],_0x29b1a1=new D((_0x5bddeb+_0x57930a)*(-0x139f*-0x1+0xe14+0x1*-0x21b3+0.5),(_0x4adbd7+_0x725143)*(-0x426+-0x1959+0x347*0x9+0.5),(_0x22ff76+_0x460f9d)*(-0xfb3*-0x2+0x139f+-0x1*0x3305+0.5)),_0x2ef005=new D((_0x57930a-_0x5bddeb)*(0xc5b*-0x2+-0x2180+-0x1d1b*-0x2+0.5),(_0x725143-_0x4adbd7)*(0x5c+0x3*0xa54+-0x1f58+0.5),(_0x460f9d-_0x22ff76)*(0x1*-0xd57+0x1c*-0xe3+-0x262b*-0x1+0.5)),_0x2ae37c=new De(_0x29b1a1,_0x2ef005);this['sceneInfo']['globalBoun'+'dingBox']=_0x2ae37c,this['aabb']=_0x2ae37c;}async['updateData'](){var _0x196eaf,_0x1d218c,_0x594fdb,_0xf0b00a,_0x3c584f,_0x53ad76,_0x359228,_0x1c6bf5,_0x293584,_0x50b825,_0x220f16;await super['updateData']();const _0x31c57e=this['gsplatData'];if(!_0x31c57e)return;this['is4D']=_0x31c57e['is4D'];const _0x196a00=await this['getTransfo'+'rmDataByWo'+'rker'](_0x31c57e);this['mesh']['aabb']['copy'](this['aabb']),this['centers']=_0x196a00['centers'],this['motion']=_0x196a00['motion'],this['tScale']=_0x196a00['tScaleArra'+'y'],this['muT']=await _0x31c57e['getMuT'](),this['timeIndex']=await _0x31c57e['getTimeInd'+'ex']();const _0x110981=this['evalTextur'+'eSize'](_0x31c57e['numSplats']);this['colorTextu'+'re']?((_0x196eaf=this['colorTextu'+'re2'])==null||_0x196eaf['destroy'](),(_0x1d218c=this['transformA'+'Texture2'])==null||_0x1d218c['destroy'](),(_0x594fdb=this['transformB'+'Texture2'])==null||_0x594fdb['destroy'](),(_0xf0b00a=this['transformR'+'Texture2'])==null||_0xf0b00a['destroy'](),this['colorTextu'+'re2']=this['createText'+'ure']('splatColor'+'2',nt,_0x110981),this['transformA'+'Texture2']=this['createText'+'ure']('transformA'+'2',Ye,_0x110981),this['transformB'+'Texture2']=this['createText'+'ure']('transformB'+'2',ui,_0x110981),this['transformR'+'Texture2']=this['createText'+'ure']('transformR'+'2',Ye,_0x110981),this['is4D']&&((_0x3c584f=this['transformM'+'otionTextu'+'re2'])==null||_0x3c584f['destroy'](),(_0x53ad76=this['transformL'+'ifecycleTe'+'xture2'])==null||_0x53ad76['destroy'](),this['transformM'+'otionTextu'+'re2']=this['createText'+'ure']('transformM'+'otion2',Ye,_0x110981),this['transformL'+'ifecycleTe'+'xture2']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture2',Ye,_0x110981))):(this['colorTextu'+'re']=this['createText'+'ure']('splatColor',nt,_0x110981),this['colorTextu'+'re2']=this['createText'+'ure']('splatColor'+'2',nt,_0x110981),this['transformA'+'Texture']=this['createText'+'ure']('transformA',Ye,_0x110981),this['transformA'+'Texture2']=this['createText'+'ure']('transformA'+'2',Ye,_0x110981),this['transformB'+'Texture']=this['createText'+'ure']('transformB',ui,_0x110981),this['transformB'+'Texture2']=this['createText'+'ure']('transformB'+'2',ui,_0x110981),this['transformR'+'Texture']=this['createText'+'ure']('transformR',Ye,_0x110981),this['transformR'+'Texture2']=this['createText'+'ure']('transformR'+'2',Ye,_0x110981),this['is4D']&&(this['transformM'+'otionTextu'+'re']=this['createText'+'ure']('transformM'+'otion',Ye,_0x110981),this['transformM'+'otionTextu'+'re2']=this['createText'+'ure']('transformM'+'otion2',Ye,_0x110981),this['transformL'+'ifecycleTe'+'xture']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture',Ye,_0x110981),this['transformL'+'ifecycleTe'+'xture2']=this['createText'+'ure']('transformL'+'ifecycleTe'+'xture2',Ye,_0x110981))),await this['updateColo'+'rData'](_0x31c57e),await this['updateTran'+'sformFromD'+'ata'](_0x196a00),this['shBands']=_0x31c57e['shBands'],this['shBands']>0xd3+-0x13*0x12b+-0xa*-0x223&&(this['sh1to3Text'+'ure']?((_0x359228=this['sh1to3Text'+'ure2'])==null||_0x359228['destroy'](),this['sh1to3Text'+'ure2']=this['createText'+'ure']('splatSH_1t'+'o3',Ue,_0x110981),this['shBands']>0x5c*-0x28+0x68a+0x1*0x7d7&&((_0x1c6bf5=this['sh4to7Text'+'ure2'])==null||_0x1c6bf5['destroy'](),this['sh4to7Text'+'ure2']=this['createText'+'ure']('splatSH_4t'+'o72',Ue,_0x110981),this['shBands']>0x51*0x76+-0x16c3+-0xe91?((_0x293584=this['sh8to11Tex'+'ture2'])==null||_0x293584['destroy'](),(_0x50b825=this['sh12to15Te'+'xture2'])==null||_0x50b825['destroy'](),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ue,_0x110981),this['sh12to15Te'+'xture2']=this['createText'+'ure']('splatSH_12'+'to152',Ue,_0x110981)):((_0x220f16=this['sh8to11Tex'+'ture2'])==null||_0x220f16['destroy'](),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ue,_0x110981)))):(this['sh1to3Text'+'ure']=this['createText'+'ure']('splatSH_1t'+'o3',Ue,_0x110981),this['sh1to3Text'+'ure2']=this['createText'+'ure']('splatSH_1t'+'o32',Ue,_0x110981),this['shBands']>-0x10*-0x151+-0x3*0x2e5+-0xc60&&(this['sh4to7Text'+'ure']=this['createText'+'ure']('splatSH_4t'+'o7',Ue,_0x110981),this['sh4to7Text'+'ure2']=this['createText'+'ure']('splatSH_4t'+'o72',Ue,_0x110981),this['shBands']>0x727+0xdb1+0x2fa*-0x7?(this['sh8to11Tex'+'ture']=this['createText'+'ure']('splatSH_8t'+'o11',Ue,_0x110981),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ue,_0x110981),this['sh12to15Te'+'xture']=this['createText'+'ure']('splatSH_12'+'to15',Ue,_0x110981),this['sh12to15Te'+'xture2']=this['createText'+'ure']('splatSH_12'+'to152',Ue,_0x110981)):(this['sh8to11Tex'+'ture']=this['createText'+'ure']('splatSH_8t'+'o11',Ki,_0x110981),this['sh8to11Tex'+'ture2']=this['createText'+'ure']('splatSH_8t'+'o112',Ki,_0x110981)))),await this['updateSHDa'+'taByWorker'](_0x31c57e));}['updateText'+'ure'](){this['isDestroye'+'d']||(super['updateText'+'ure'](),[this['colorTextu'+'re'],this['colorTextu'+'re2']]=[this['colorTextu'+'re2'],this['colorTextu'+'re']],[this['transformA'+'Texture'],this['transformA'+'Texture2']]=[this['transformA'+'Texture2'],this['transformA'+'Texture']],[this['transformB'+'Texture'],this['transformB'+'Texture2']]=[this['transformB'+'Texture2'],this['transformB'+'Texture']],[this['transformR'+'Texture'],this['transformR'+'Texture2']]=[this['transformR'+'Texture2'],this['transformR'+'Texture']],this['is4D']&&([this['transformM'+'otionTextu'+'re'],this['transformM'+'otionTextu'+'re2']]=[this['transformM'+'otionTextu'+'re2'],this['transformM'+'otionTextu'+'re']],[this['transformL'+'ifecycleTe'+'xture'],this['transformL'+'ifecycleTe'+'xture2']]=[this['transformL'+'ifecycleTe'+'xture2'],this['transformL'+'ifecycleTe'+'xture']]),[this['sh1to3Text'+'ure'],this['sh1to3Text'+'ure2']]=[this['sh1to3Text'+'ure2'],this['sh1to3Text'+'ure']],[this['sh4to7Text'+'ure'],this['sh4to7Text'+'ure2']]=[this['sh4to7Text'+'ure2'],this['sh4to7Text'+'ure']],[this['sh8to11Tex'+'ture'],this['sh8to11Tex'+'ture2']]=[this['sh8to11Tex'+'ture2'],this['sh8to11Tex'+'ture']],[this['sh12to15Te'+'xture'],this['sh12to15Te'+'xture2']]=[this['sh12to15Te'+'xture2'],this['sh12to15Te'+'xture']]);}['releaseGSp'+'latResourc'+'e'](_0x2be31){this['appendQueu'+'e']['push']({'type':'release','taskId':new Date()['getTime'](),'data':{'index':_0x2be31}}),this['isProcessi'+'ngQueue']||Promise['resolve']()['then'](()=>this['processQue'+'ue']());}async['releaseAll'+'GSplatReso'+'urce'](){this['isDestroye'+'d']||(this['appendQueu'+'e']=[],await this['gsplatData']['releaseAll'+'SeqData']());}['appendGSpl'+'atResource'](_0x33dd3d,_0x4a705c,_0x37fb0c,_0x1db925,_0xe0037e,_0x3268ce){this['appendQueu'+'e']['push']({'type':'append','taskId':new Date()['getTime'](),'data':{'gsplatData':_0x33dd3d,'timeOption':_0x4a705c,'loadedTime':_0x37fb0c,'asset':_0x1db925,'events':_0xe0037e,'seekCB':_0x3268ce}}),this['isProcessi'+'ngQueue']||Promise['resolve']()['then'](()=>this['processQue'+'ue']());}async['processQue'+'ue'](){if(!this['isProcessi'+'ngQueue']){this['isProcessi'+'ngQueue']=!(-0x3b*0x1a+0x2dd*-0x1+-0x8db*-0x1);try{for(;this['appendQueu'+'e']['length']>0x737*-0x1+-0x139*-0x19+-0x175a;){const _0x368bc5=this['appendQueu'+'e']['shift']();_0x368bc5['type']==='append'?await this['processApp'+'endTask'](_0x368bc5['data']):_0x368bc5['type']==='release'&&await this['processRel'+'easeTask'](_0x368bc5['data']);}}finally{this['isProcessi'+'ngQueue']=!(-0x2*0x1c9+-0x1765+0x1af8);}}}async['processRel'+'easeTask'](_0x4bea6f){const {index:_0x9d205d}=_0x4bea6f;this['isDestroye'+'d']||await this['gsplatData']['releaseSeq'+'Data'](_0x9d205d);}async['processApp'+'endTask'](_0x24e2ba){var _0x27a249;const {gsplatData:_0x5cf1e5,timeOption:_0xe514f2,loadedTime:_0x8bf4fc,asset:_0xb45e53,events:_0x2e8c27,seekCB:_0x344d82}=_0x24e2ba;!this['gsplatData']||this['isDestroye'+'d']||(globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),console['log']('loadTime__'+'__','----------'+'----------'+'---'),this['timeOption']=_0xe514f2,this['asset']=_0xb45e53,this['assetsMana'+'gerLoadedT'+'ime']=_0x8bf4fc,this['events']=_0x2e8c27,await this['gsplatData']['appendGSpl'+'atData'](_0x5cf1e5,_0x8bf4fc,_0xe514f2),console['log']('loadTime__'+'__','gsplatDeco'+'dedResourc'+'e\x20gsplatDa'+'ta.appendG'+'SplatData',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](0x2*-0x3d7+-0x1dce+0x257e*0x1),_0x5cf1e5['numSplats'],((performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])/_0x5cf1e5['numSplats'])['toFixed'](0x1*-0x24b7+0x2480+0x3a)),globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),await this['updateData'](),console['log']('loadTime__'+'__','GSplatDeco'+'dedResourc'+'e\x20this.upd'+'ateData',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](0x173*0x1+-0x1e52+0x1*0x1ce1),_0x5cf1e5['numSplats']),globalThis['appendGSpl'+'atResource'+'StartTime']=performance['now'](),await((_0x27a249=this['gsplatInst'+'ance'])==null?void(0x1739+-0xe*0x21+0x1*-0x156b):_0x27a249['updateInst'+'anceData'](this,_0x8bf4fc,_0x344d82)),console['log']('loadTime__'+'__','GSplatDeco'+'dedResourc'+'e\x20updateIn'+'stanceData',(performance['now']()-globalThis['appendGSpl'+'atResource'+'StartTime'])['toFixed'](0x6fc+-0x156a+0x1*0xe70),_0x5cf1e5['numSplats']));}['fireAssets'+'ManagerTim'+'eIndex'](_0x50ca6a,_0x30e1ed){var _0x30d5da;const _0x50cb50=_0x50ca6a||this['assetsMana'+'gerLoadedT'+'ime'];(_0x30d5da=this['asset'])==null||_0x30d5da['fire']('setAssetsL'+'oaded',_0x50cb50,_0x30e1ed);}['destroy'](){var _0x17647f,_0x2e227a,_0x31f3b4,_0x3aa0e8,_0x4b1503,_0x4d3d4a,_0xa049e8,_0x569b14,_0x361a0d,_0x3de26f,_0x32b7a1,_0x54d959,_0x7589de,_0x2679ed,_0x2823f8,_0x5d05be,_0x8e0709,_0x254e79,_0x401f10,_0x534a59,_0x4ee256;(_0x17647f=this['updateData'+'Worker'])==null||_0x17647f['destroy'](),this['updateData'+'Worker']=void(-0x12ad+0xd4d+0x1*0x560),(_0x2e227a=this['colorTextu'+'re'])==null||_0x2e227a['destroy'](),(_0x31f3b4=this['transformA'+'Texture'])==null||_0x31f3b4['destroy'](),(_0x3aa0e8=this['transformB'+'Texture'])==null||_0x3aa0e8['destroy'](),(_0x4b1503=this['transformR'+'Texture'])==null||_0x4b1503['destroy'](),(_0x4d3d4a=this['transformM'+'otionTextu'+'re'])==null||_0x4d3d4a['destroy'](),(_0xa049e8=this['transformL'+'ifecycleTe'+'xture'])==null||_0xa049e8['destroy'](),(_0x569b14=this['sh1to3Text'+'ure'])==null||_0x569b14['destroy'](),(_0x361a0d=this['sh4to7Text'+'ure'])==null||_0x361a0d['destroy'](),(_0x3de26f=this['sh8to11Tex'+'ture'])==null||_0x3de26f['destroy'](),(_0x32b7a1=this['sh12to15Te'+'xture'])==null||_0x32b7a1['destroy'](),(_0x54d959=this['colorTextu'+'re2'])==null||_0x54d959['destroy'](),(_0x7589de=this['transformA'+'Texture2'])==null||_0x7589de['destroy'](),(_0x2679ed=this['transformB'+'Texture2'])==null||_0x2679ed['destroy'](),(_0x2823f8=this['transformR'+'Texture2'])==null||_0x2823f8['destroy'](),(_0x5d05be=this['transformM'+'otionTextu'+'re2'])==null||_0x5d05be['destroy'](),(_0x8e0709=this['transformL'+'ifecycleTe'+'xture2'])==null||_0x8e0709['destroy'](),(_0x254e79=this['sh1to3Text'+'ure2'])==null||_0x254e79['destroy'](),(_0x401f10=this['sh4to7Text'+'ure2'])==null||_0x401f10['destroy'](),(_0x534a59=this['sh8to11Tex'+'ture2'])==null||_0x534a59['destroy'](),(_0x4ee256=this['sh12to15Te'+'xture2'])==null||_0x4ee256['destroy'](),this['releaseAll'+'GSplatReso'+'urce'](),super['destroy'](),this['aabb']=null,this['centers']=null,this['motion']=null,this['tScale']=null,this['muT']=null,this['timeIndex']=null,this['shBands']=null;}['configureM'+'aterial'](_0xafa87e){var _0x129db2,_0x40de9f,_0x181705,_0x518ff6,_0x4a660b,_0x542986,_0x51bdfb,_0x413cd7,_0x501e25,_0x3e9faa,_0x244136,_0x32ab30,_0x3b8d9b;if(console['log']('======\x20ENG'+'INE\x20IVAN','GSplat.con'+'figureMate'+'rial'),this['isDestroye'+'d'])return;const _0x445b5b=((_0x129db2=_0xafa87e['getParamet'+'er']('pointCloud'+'ModeEnable'+'d'))==null?void(-0x22d*-0x6+-0x4*-0x896+0x17b3*-0x2):_0x129db2['data'])??-0x2b*0x35+-0xeb7+-0x2*-0xbcf,_0x4f412e=((_0x40de9f=_0xafa87e['getParamet'+'er']('uSplatScal'+'e'))==null?void(0x18e5+-0x67*-0x59+0x2e4*-0x15):_0x40de9f['data'])??0x1b*-0xe+0x1f13+-0x1d98,_0xd41a49=((_0x181705=_0xafa87e['getParamet'+'er']('uSaturatio'+'n'))==null?void(-0x893+-0xdff*0x1+0x6*0x3c3):_0x181705['data'])??-0x219a+0x1*0x1922+0x879,_0xefa89d=((_0x518ff6=_0xafa87e['getParamet'+'er']('uHueOffset'))==null?void(0x808+0x24a9+-0x2cb1):_0x518ff6['data'])??0xb61+0x1351+0xf59*-0x2,_0x259b5e=((_0x4a660b=_0xafa87e['getParamet'+'er']('uInvertOpa'+'city'))==null?void(-0x1*0x20bc+0x1da1+-0x35*-0xf):_0x4a660b['data'])??-0xd35+0xa13+0x322,_0x5f2718=((_0x542986=_0xafa87e['getParamet'+'er']('uOpacity'))==null?void(-0x1*0x1b55+0x10f*0x1+0x3b*0x72):_0x542986['data'])??0x1648+0x1169*0x2+-0x137*0x2f,_0x234617=((_0x51bdfb=_0xafa87e['getParamet'+'er']('clrOffset'))==null?void(0x1331+-0x1b69+-0x20e*-0x4):_0x51bdfb['data'])??[0x1229+0xa2*0x1f+0x25c7*-0x1,-0x294+0x14be+-0x122a,-0x576+0x446+0x4c*0x4,-0x145c+-0x1*0xeed+0x234a],_0x34527e=((_0x413cd7=_0xafa87e['getParamet'+'er']('clrScale'))==null?void(-0x5*-0x6df+0x42a+-0x2685):_0x413cd7['data'])??[-0x57+0x13a9+-0x1351,-0x2350+-0x19dc*-0x1+0x975,0x22d3+0x1*-0x8cb+-0x1a07,0x13e1+0x1*-0x85f+0x13*-0x9b],_0x16c5ff=((_0x501e25=_0xafa87e['getParamet'+'er']('uShapeN'))==null?void(-0x31e+0xf33+-0xc15):_0x501e25['data'])??0x6*0x5f2+-0x347*-0x7+-0x3a9d,_0x42bae7=((_0x3e9faa=_0xafa87e['getParamet'+'er']('mode'))==null?void(-0x3*0x4+0x206f*-0x1+0x207b):_0x3e9faa['data'])??0x3e*0x70+-0xbbf+-0xf61*0x1,_0x2baf80=((_0x244136=_0xafa87e['getParamet'+'er']('ringSize'))==null?void(0x12*0x13a+0x236b+-0x397f):_0x244136['data'])??0x427+-0x15ef*-0x1+-0x1a16,_0x2e293a=((_0x32ab30=_0xafa87e['defines'])==null?void(-0x1a5a+-0x1*0x493+0x1eed):_0x32ab30['get']('uOpenAnim'))??'0',_0x139306=((_0x3b8d9b=_0xafa87e['defines'])==null?void(-0x481+0x1bff*0x1+0x3e*-0x61):_0x3b8d9b['get']('uControlCo'+'lorMode'))??'0';_0xafa87e['setParamet'+'er']('splatColor',this['colorTextu'+'re']),_0xafa87e['setParamet'+'er']('transformA',this['transformA'+'Texture']),_0xafa87e['setParamet'+'er']('transformB',this['transformB'+'Texture']),_0xafa87e['setParamet'+'er']('transformR',this['transformR'+'Texture']),_0xafa87e['setParamet'+'er']('uSplatScal'+'e',_0x4f412e),_0xafa87e['setParamet'+'er']('pointCloud'+'ModeEnable'+'d',_0x445b5b),_0xafa87e['setParamet'+'er']('uSaturatio'+'n',_0xd41a49),_0xafa87e['setParamet'+'er']('uHueOffset',_0xefa89d),_0xafa87e['setParamet'+'er']('uInvertOpa'+'city',_0x259b5e),_0xafa87e['setParamet'+'er']('uOpacity',_0x5f2718),_0xafa87e['setParamet'+'er']('clrOffset',_0x234617),_0xafa87e['setParamet'+'er']('clrScale',_0x34527e),_0xafa87e['setParamet'+'er']('uShapeN',_0x16c5ff),_0xafa87e['setParamet'+'er']('mode',_0x42bae7),_0xafa87e['setParamet'+'er']('ringSize',_0x2baf80),_0xafa87e['setParamet'+'er']('prerenderC'+'Time',0x1d7f+-0x1f2b+0x1ac),_0xafa87e['setParamet'+'er']('renderSpac'+'e',-0x2316+0x10ca+0x1256),_0xafa87e['setParamet'+'er']('endSpace',0xc38+-0x1d5*0x2+-0x884),_0xafa87e['setDefine']('uOpenAnim',_0x2e293a),_0xafa87e['setDefine']('uControlCo'+'lorMode',_0x139306),this['transformM'+'otionTextu'+'re']&&_0xafa87e['setParamet'+'er']('transformM'+'otion',this['transformM'+'otionTextu'+'re']),this['transformL'+'ifecycleTe'+'xture']&&_0xafa87e['setParamet'+'er']('transformL'+'ifecycle',this['transformL'+'ifecycleTe'+'xture']),_0xafa87e['setDefine']('SH_BANDS',this['shBands']),_0xafa87e['setDefine']('IS_4D',this['is4D']),this['sh1to3Text'+'ure']&&_0xafa87e['setParamet'+'er']('splatSH_1t'+'o3',this['sh1to3Text'+'ure']),this['sh4to7Text'+'ure']&&_0xafa87e['setParamet'+'er']('splatSH_4t'+'o7',this['sh4to7Text'+'ure']),this['sh8to11Tex'+'ture']&&_0xafa87e['setParamet'+'er']('splatSH_8t'+'o11',this['sh8to11Tex'+'ture']),this['sh12to15Te'+'xture']&&_0xafa87e['setParamet'+'er']('splatSH_12'+'to15',this['sh12to15Te'+'xture']);}['evalTextur'+'eSize'](_0x4fbfd6){const _0x37c9e2=Math['ceil'](Math['sqrt'](_0x4fbfd6)),_0x33c0fa=Math['ceil'](_0x4fbfd6/_0x37c9e2);return new J(_0x37c9e2,_0x33c0fa);}async['updateColo'+'rData'](_0x2da233){var _0x432b5f;console['log']('____\x20ENGIN'+'E\x20IVAN','updateColo'+'rData');const _0xddef01=this['colorTextu'+'re2'];if(!_0xddef01||this['isDestroye'+'d'])return;let _0x29820c=(_0x432b5f=_0x2da233['transformD'+'ata'])==null?void(-0x16a+0x1*0x241d+-0x3db*0x9):_0x432b5f['dataColor'];if(!_0x29820c){const _0x5a7a57=_0x2da233['getProp']('color_opac'+'ity');_0x29820c=new Uint16Array(_0x5a7a57['buffer']['slice']());}await this['idleUpdate'+'TexturePro'+'mise'](_0xddef01,_0x29820c);}async['getTransfo'+'rmDataByWo'+'rker'](_0x25d876){var _0x118c07;if(console['log']('____\x20ENGIN'+'E\x20IVAN','getTransfo'+'rmDataByWo'+'rker'),(_0x118c07=_0x25d876['transformD'+'ata'])!=null&&_0x118c07['dataCenter'+'s'])return{'centers':_0x25d876['transformD'+'ata']['dataCenter'+'s'],'dataPosition':_0x25d876['transformD'+'ata']['dataPositi'+'on'],'dataScale':_0x25d876['transformD'+'ata']['dataScale'],'dataRotation':_0x25d876['transformD'+'ata']['dataRotati'+'on'],'dataMotion':_0x25d876['transformD'+'ata']['dataMotion'],'dataTime':_0x25d876['transformD'+'ata']['dataTime'],'motion':_0x25d876['transformD'+'ata']['motion'],'tScaleArray':_0x25d876['transformD'+'ata']['tScaleArra'+'y']};const _0x2b195f=_0x25d876['getProp']('position'),_0x585dd9=_0x25d876['getProp']('motion'),_0x1e8c03=_0x25d876['getProp']('rotation'),_0x2faf75=_0x25d876['getProp']('scale'),_0x4380b4=_0x25d876['getProp']('t'),_0x579444=_0x25d876['getProp']('t_scale');return await this['updateData'+'Worker']['updateTran'+'sData'](_0x25d876['numSplats'],this['is4D'],_0x2b195f,_0x1e8c03,_0x585dd9,_0x2faf75,_0x4380b4,_0x579444);}async['updateTran'+'sformFromD'+'ata'](_0x5d716c){console['log']('____\x20ENGIN'+'E\x20IVAN','updateTran'+'sformFromD'+'ata'),this['transformA'+'Texture2']&&(await this['idleUpdate'+'TexturePro'+'mise'](this['transformA'+'Texture2'],_0x5d716c['dataPositi'+'on']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformR'+'Texture2'],_0x5d716c['dataRotati'+'on']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformB'+'Texture2'],_0x5d716c['dataScale']),this['is4D']&&(await this['idleUpdate'+'TexturePro'+'mise'](this['transformM'+'otionTextu'+'re2'],_0x5d716c['dataMotion']),await this['idleUpdate'+'TexturePro'+'mise'](this['transformL'+'ifecycleTe'+'xture2'],_0x5d716c['dataTime'])));}async['idleUpdate'+'TexturePro'+'mise'](_0x19e3d4,_0x3a16c4){if(!this['isDestroye'+'d'])return new Promise(_0x3c777c=>{requestIdleCallback(()=>{const _0x5d09c7=_0x19e3d4['lock']();_0x5d09c7==null||_0x5d09c7['set'](_0x3a16c4),_0x19e3d4['unlock'](),_0x3c777c(!(-0x1b45+0x253c+-0x9f7));},{'timeout':0x12c});});}async['updateSHDa'+'ta'](_0x36e37b){var _0x125816,_0xb90b0d,_0x8c4ee4,_0x189110,_0x23c3e8,_0x2b34e7,_0x74cc6c,_0x33bb7d;if(console['log']('____\x20ENGIN'+'E\x20IVAN','updateSHDa'+'ta'),this['isDestroye'+'d'])return;const _0x5f4406=(_0x125816=this['sh1to3Text'+'ure2'])==null?void(-0xb1d*0x1+-0x1*-0x22a3+-0x1786):_0x125816['lock'](),_0x55a827=(_0xb90b0d=this['sh4to7Text'+'ure2'])==null?void(0xeed*0x2+-0x68f+0x59*-0x43):_0xb90b0d['lock'](),_0x4a1c8f=(_0x8c4ee4=this['sh8to11Tex'+'ture2'])==null?void(-0x1002+0x54f*-0x1+-0x11*-0x141):_0x8c4ee4['lock'](),_0x5df97c=(_0x189110=this['sh12to15Te'+'xture2'])==null?void(0x26b*-0xa+0xbfe+0xc30):_0x189110['lock'](),_0x31bb0={0x1:0x3,0x2:0x8,0x3:0xf}[this['shBands']],_0x5dce03=xg(_0x36e37b,_0x31bb0*(-0x1*-0x16b8+0x2502+-0x1*0x3bb7)),_0x338132=-0x166*-0xe+0xb34+-0x16c9,_0x4b5d9d=0x176b+-0x5d*0x2b+-0x1*0x3cd,_0xb34338=new Float32Array(-0x78d*0x3+-0x143*0x1+-0xd*-0x1d7),_0x57d113=new Uint32Array(_0xb34338['buffer']),_0x1b9b48=new Array(_0x31bb0*(0x7*-0x191+-0x198d+0x2487))['fill'](-0x1*-0x179c+-0x93*-0x1b+-0x271d);for(let _0x40328c=-0x1f*0x2b+-0x1262+0x1797;_0x40328c<_0x36e37b['numSplats'];++_0x40328c){for(let _0xcca714=-0xb31+0xe84+-0x1*0x353;_0xcca714<_0x31bb0;++_0xcca714)_0x1b9b48[_0xcca714*(-0x2*0x1358+0xdf*0x2+0x1*0x24f5)]=_0x5dce03[_0xcca714][_0x40328c],_0x1b9b48[_0xcca714*(0x1c7e+-0x1519+-0x762)+(-0x2c*0xb0+-0x23da+0x421b)]=_0x5dce03[_0xcca714+_0x31bb0][_0x40328c],_0x1b9b48[_0xcca714*(0x2*-0x104+-0x1a*0x62+-0x25*-0x53)+(0x1343*0x1+0x6ef+-0x1a30)]=_0x5dce03[_0xcca714+_0x31bb0*(-0x1*0x1e11+-0x174a+-0x1*-0x355d)][_0x40328c];let _0x2834bf=_0x1b9b48[0x1a2b+0x1662+-0x308d];for(let _0x1bb14b=-0x15ba+0xe9*0x11+0x642;_0x1bb14b<_0x31bb0*(-0x2488+-0x46f*0x8+0x4803);++_0x1bb14b)_0x2834bf=Math['max'](_0x2834bf,Math['abs'](_0x1b9b48[_0x1bb14b]));if(_0x2834bf!==-0x11*0x53+-0x20c6+0x2649){for(let _0x4b45d2=0xabb+0x189+-0xc44;_0x4b45d2<_0x31bb0;++_0x4b45d2)_0x1b9b48[_0x4b45d2*(0x1d8+0x73f+-0x48a*0x2)+(-0xa*0x135+0x1d2e+0x1*-0x111c)]=Math['max'](-0x1*-0x1f27+-0x131f+-0xc08*0x1,Math['min'](_0x338132,Math['floor']((_0x1b9b48[_0x4b45d2*(-0x1fd7+-0xbbe+0x2b98)+(-0x1*-0x1db+0x1ada+-0x1cb5)]/_0x2834bf*(-0x44+-0x1*-0xa86+-0xa42+0.5)+(-0x2320+0x1*0xa79+0x18a7+0.5))*_0x338132+(-0x1*-0xdc9+-0x1*0x5b9+0x3*-0x2b0+0.5)))),_0x1b9b48[_0x4b45d2*(0x1b2e+-0x6f2+0x1f*-0xa7)+(-0x2380+0x23d5+-0x54)]=Math['max'](-0x265b+0x100f+0x1*0x164c,Math['min'](_0x4b5d9d,Math['floor']((_0x1b9b48[_0x4b45d2*(-0x18fc+0xbc9+0xd36)+(0xa1+-0x12d1+0x1231)]/_0x2834bf*(-0x4aa*-0x1+0x6*0x2bd+-0x1518+0.5)+(0x199a+0x51e+-0x1eb8*0x1+0.5))*_0x4b5d9d+(-0x11*-0x1c9+-0xde4+-0x1075+0.5)))),_0x1b9b48[_0x4b45d2*(-0x1*-0x1a7b+0x2577+-0x3fef)+(-0x1096+0x2*0xd64+-0xa3*0x10)]=Math['max'](-0x2e7*0x3+-0x9ca+0x127f,Math['min'](_0x338132,Math['floor']((_0x1b9b48[_0x4b45d2*(-0x2e*-0x10+-0x2200+0x1f23)+(0xf81+-0x1*-0xc39+-0x1bb8)]/_0x2834bf*(0x1ac*0x7+0x12f*-0x11+0x1af*0x5+0.5)+(-0x1444+-0x2589+-0x1*-0x39cd+0.5))*_0x338132+(-0x2157+-0x232b+-0x6*-0xb6b+0.5))));_0xb34338[-0xa8e*-0x2+0xead+-0x1*0x23c9]=_0x2834bf,_0x5f4406[_0x40328c*(0x1*0x5bc+0x15b+-0x1*0x713)+(0x2481+-0x1e1f+-0x662)]=_0x57d113[0x1cee+0x161*-0x3+-0x18cb],_0x5f4406[_0x40328c*(-0x1*0x212f+-0x6b+-0x219e*-0x1)+(0x2*0xe5d+0x4*0x213+-0x2505)]=_0x1b9b48[0x1091*0x2+-0xb83+-0x159f]<<-0x23*0x5f+0xa39+0x1b*0x1b|_0x1b9b48[0x244a+0x1066+-0x34af]<<0x53*-0x3+-0x16fd+-0x4cd*-0x5|_0x1b9b48[0x12cc*0x1+-0x505+0x4b*-0x2f],_0x5f4406[_0x40328c*(0x1161*0x2+-0x1*0x4fd+-0x1dc1)+(-0x213a+-0x229c+0x10f6*0x4)]=_0x1b9b48[-0x1095+0x166c+0x2ea*-0x2]<<-0x566+-0x3*-0x821+-0x37*0x58|_0x1b9b48[0x2*-0xd1d+-0x26ad+0x40eb]<<-0x104*0xc+0xb3*-0x1f+0x21e8|_0x1b9b48[-0x18d1+-0x1e79+-0x374f*-0x1],_0x5f4406[_0x40328c*(-0x2347+0x1*-0x2207+0x4552)+(0x2*0xfad+-0x19cb+-0x11c*0x5)]=_0x1b9b48[0x1e12+0xb7+-0x1ec3]<<-0x3*-0x124+-0xba0+0x849|_0x1b9b48[-0x1f49+-0x61*-0x39+-0x9b7*-0x1]<<-0x2572*0x1+0x1efd+-0x34*-0x20|_0x1b9b48[-0x1*0xdf+0x1b20+-0x1a39],this['shBands']>0x1966+0x48c+-0x49*0x69&&(_0x55a827[_0x40328c*(0x14*0x172+-0xc72+-0x1072)+(-0x2131+-0x1*0x16b5+-0x6a*-0x87)]=_0x1b9b48[-0x7dc*-0x3+-0x15*0x10+-0x163b]<<0x1897*0x1+0x1fad*0x1+0x1*-0x382f|_0x1b9b48[-0x15cd*-0x1+0x651+-0x1c14]<<-0x102b+-0x17de+-0x474*-0x9|_0x1b9b48[0xe61+-0xf14+0xbe],_0x55a827[_0x40328c*(-0x9a8+0x2*0x7cc+0x4*-0x17b)+(-0xf9a*-0x2+0xca5*0x2+-0x387d)]=_0x1b9b48[0x43*-0x7f+-0x115*0xe+0x306f]<<0x1b93+0xc7*-0x16+-0xa64|_0x1b9b48[-0x794+0x12*-0x12d+-0x3*-0x999]<<0xdb5+0x1*-0x77c+-0x317*0x2|_0x1b9b48[-0x5*0x31b+-0x11a4+-0x7*-0x4bf],_0x55a827[_0x40328c*(-0x691+-0x1dc1+0x2456)+(-0x1faa+-0x283*0x1+0xb65*0x3)]=_0x1b9b48[-0x7*-0x4df+-0x1c9*0x11+-0x3b1]<<-0x25fb+-0x1570+0x3b80|_0x1b9b48[0x197d+-0x151f+-0x1*0x44e]<<0x1eaf+-0xd63+0x1*-0x1141|_0x1b9b48[0x25d6+0x44*0x6d+-0x1d*0x24d],_0x55a827[_0x40328c*(0xa89+0x132b+-0xa*0x2f8)+(0x1*-0xad3+0x18e1*-0x1+0x29*0xdf)]=_0x1b9b48[-0x23bd+0xbbb+0x1814]<<-0x31c+-0x1b24+0x1*0x1e55|_0x1b9b48[0x1e58+0x28+-0x1e6d]<<-0x31b*0x4+-0x1de*-0x9+-0x1*0x457|_0x1b9b48[0x22ed+0x8f3+-0x15e6*0x2],this['shBands']>0x172*0x2+-0x2f0*0x1+-0x1*-0xe?(_0x4a1c8f[_0x40328c*(-0x502*-0x1+-0x310+-0x1ee)+(0xe79+0x24ca+-0x3343)]=_0x1b9b48[-0xbd8*-0x2+-0x1a79+0x2de]<<0x2217+-0xdc*-0xd+-0x1*0x2d2e|_0x1b9b48[0x194*-0xc+0x8a9+-0x1*-0xa5d]<<0x812*0x1+0x172d+-0x1*0x1f34|_0x1b9b48[0x1f*0x71+-0x23de+0x1646],_0x4a1c8f[_0x40328c*(-0x24bb+0x19f*0x10+-0xacf*-0x1)+(0x58e+0x2a5*-0x8+0xf9b)]=_0x1b9b48[0x147*0x10+0x1*-0x246+-0x9*0x202]<<0x1ef7+0x1*-0x4f1+0x19f1*-0x1|_0x1b9b48[-0x24f*-0x3+-0xa15+0x341]<<0x15d*0x1a+0x8b*-0x1+0x8b7*-0x4|_0x1b9b48[0x1b62*0x1+-0x266c+0x2*0x592],_0x4a1c8f[_0x40328c*(0x2*-0x10a5+0xb5*-0x26+0x1*0x3c2c)+(-0xfd*-0xa+-0x2307*0x1+0x2f*0x89)]=_0x1b9b48[-0xee7+-0x2*0x8c1+-0x1042*-0x2]<<0x2*0x929+-0x26f3+0x14b6|_0x1b9b48[0x71b+0xbc8+0x12c7*-0x1]<<-0x8e5+-0x1fd2+0x28c2|_0x1b9b48[-0x299+0x2c3*0xa+0xc74*-0x2],_0x4a1c8f[_0x40328c*(-0x150e*0x1+0xcd8+-0x1*-0x83a)+(0xb*-0x169+0x1812+-0x88c)]=_0x1b9b48[-0x2*0xcc7+0x518*0x7+-0x9fc]<<-0x22a9+0x248d+-0x1cf|_0x1b9b48[-0x17b1+0x6bc+-0x2*-0x88a]<<-0xc4d+0x513*0x6+-0x7*0x296|_0x1b9b48[-0x8c2+0x1c18+0x99b*-0x2],_0x5df97c[_0x40328c*(0x3*-0x546+-0x1735+-0x5*-0x7cf)+(0x38f*0x1+-0xa80+0x6f1*0x1)]=_0x1b9b48[0x21ed+-0x4a*0x1f+-0x2*0xc6b]<<-0x20e0+0x3eb+-0x9*-0x33a|_0x1b9b48[-0x344+0x3*0xb+0x345*0x1]<<0x226d+0x19c3+-0x1*0x3c25|_0x1b9b48[-0x7*0x36d+-0x19f5+0x3*0x10b1],_0x5df97c[_0x40328c*(-0x6*-0x623+-0x1*0x933+0x1b9b*-0x1)+(-0x1*0x4a+0xb*-0xc5+0x26*0x3b)]=_0x1b9b48[0x653+-0xddb+0x3d6*0x2]<<-0x3*0xc65+-0x1*-0x464+-0x107*-0x20|_0x1b9b48[0x23e*-0x1+0xaaa+-0x847]<<-0x9cd+-0x494+0x34*0x47|_0x1b9b48[0x262f+-0xa8c+-0x1f*0xe3],_0x5df97c[_0x40328c*(0x1e36+-0x43*-0x48+-0x310a)+(-0x12bd*-0x2+0x305*0xb+-0xa19*0x7)]=_0x1b9b48[0x89e*0x1+0xdc+-0x953]<<0x11*0x31+0x1d2*0x14+-0x4*0x9e5|_0x1b9b48[0xa7*-0x10+0x1dfc+-0x1364]<<0x1d3b*0x1+-0xe4e+-0xfe*0xf|_0x1b9b48[-0x1d*-0xa7+0x61*-0x44+0x702],_0x5df97c[_0x40328c*(0x22f0+-0x60c+0x30*-0x9a)+(-0x1339+0x1bcf+0x1*-0x893)]=_0x1b9b48[-0x13*0x16f+0x35*0xa4+-0x68d]<<-0xe*-0xb+0x14eb+-0x62*0x38|_0x1b9b48[0x246d+0x1d8f+0x245*-0x1d]<<-0x76e*-0x1+-0x6de*0x1+0x1*-0x85|_0x1b9b48[0xbb5+-0x240c+-0x4e7*-0x5]):_0x4a1c8f[_0x40328c]=_0x1b9b48[0x395*-0x9+0x218b+-0x139*0x1]<<0x888+-0x687*0x4+0x11a9|_0x1b9b48[-0x14de+0x1dc3+-0x8cf]<<0x17*-0x33+0x1d1d+-0x187d|_0x1b9b48[0x1cce+-0xa06*0x1+0x1d*-0xa5]);}}(_0x23c3e8=this['sh1to3Text'+'ure2'])==null||_0x23c3e8['unlock'](),(_0x2b34e7=this['sh4to7Text'+'ure2'])==null||_0x2b34e7['unlock'](),(_0x74cc6c=this['sh8to11Tex'+'ture2'])==null||_0x74cc6c['unlock'](),(_0x33bb7d=this['sh12to15Te'+'xture2'])==null||_0x33bb7d['unlock']();}async['updateSHDa'+'taByWorker'](_0x610a4c){var _0x3443d7,_0x1dcd93,_0x1a4f37,_0x1d7c08,_0x2de5e8;if(console['log']('____\x20ENGIN'+'E\x20IVAN','updateSHDa'+'taByWorker'),this['isDestroye'+'d'])return;const _0x285c14={0x1:0x3,0x2:0x8,0x3:0xf}[this['shBands']];let _0x2f2ed1,_0x57a641,_0x334aec,_0x46311a;if((_0x3443d7=_0x610a4c['transformD'+'ata'])!=null&&_0x3443d7['sh1to3Data'])_0x2f2ed1=(_0x1dcd93=_0x610a4c['transformD'+'ata'])==null?void(-0x23dd+-0x26b+0x2648):_0x1dcd93['sh1to3Data'],_0x57a641=(_0x1a4f37=_0x610a4c['transformD'+'ata'])==null?void(0x1*0x15e3+-0x209d+-0xaba*-0x1):_0x1a4f37['sh4to7Data'],_0x334aec=(_0x1d7c08=_0x610a4c['transformD'+'ata'])==null?void(0xd*-0x9d+-0x1410+0x1c09):_0x1d7c08['sh8to11Dat'+'a'],_0x46311a=(_0x2de5e8=_0x610a4c['transformD'+'ata'])==null?void(-0x3d*0x9f+-0xa8f+0x3072):_0x2de5e8['sh12to15Da'+'ta'];else{const _0x540f19=xg(_0x610a4c,_0x285c14*(0x1733+0x1a02+-0x3132)),_0x24a6ba=await this['updateData'+'Worker']['updateSHDa'+'ta1'](_0x610a4c['numSplats'],this['shBands'],_0x540f19);_0x2f2ed1=_0x24a6ba['sh1to3Data'],_0x57a641=_0x24a6ba['sh4to7Data'],_0x334aec=_0x24a6ba['sh8to11Dat'+'a'],_0x46311a=_0x24a6ba['sh12to15Da'+'ta'];}await this['idleUpdate'+'TexturePro'+'mise'](this['sh1to3Text'+'ure2'],_0x2f2ed1),this['shBands']>0x17f7+0x1003+-0xd53*0x3&&(await this['idleUpdate'+'TexturePro'+'mise'](this['sh4to7Text'+'ure2'],_0x57a641),this['shBands']>0x1726+-0x6dc*0x1+-0x1048?(await this['idleUpdate'+'TexturePro'+'mise'](this['sh8to11Tex'+'ture2'],_0x334aec),await this['idleUpdate'+'TexturePro'+'mise'](this['sh12to15Te'+'xture2'],_0x46311a)):await this['idleUpdate'+'TexturePro'+'mise'](this['sh8to11Tex'+'ture2'],_0x334aec));}}const PC='FILL_WINDO'+'W',Tg='KEEP_ASPEC'+'T',wg='AUTO',MC='FIXED';let Ov;function Ms(){return Ov;}function _u(_0x1b8547){Ov=_0x1b8547;}class DC{constructor(){h(this,'renderPass'+'es',[]),h(this,'renderTarg'+'etMap',new Map());}['addRenderP'+'ass'](_0x3e8b00){w['assert'](_0x3e8b00),_0x3e8b00['frameUpdat'+'e']();const _0x335172=_0x3e8b00['beforePass'+'es'];for(let _0x157b92=0x5*-0x2c4+-0x19c5+-0x6d*-0x5d;_0x157b92<_0x335172['length'];_0x157b92++){const _0x1a22ef=_0x335172[_0x157b92];_0x1a22ef['enabled']&&this['addRenderP'+'ass'](_0x1a22ef);}_0x3e8b00['enabled']&&this['renderPass'+'es']['push'](_0x3e8b00);const _0x1facf5=_0x3e8b00['afterPasse'+'s'];for(let _0x178596=-0xa28+-0xeb5+0x18dd;_0x178596<_0x1facf5['length'];_0x178596++){const _0x4030d2=_0x1facf5[_0x178596];_0x4030d2['enabled']&&this['addRenderP'+'ass'](_0x4030d2);}}['reset'](){this['renderPass'+'es']['length']=-0xa4a+-0x419*0x4+0x1aae;}['compile'](){const _0x45326a=this['renderTarg'+'etMap'],_0x3e4af9=this['renderPass'+'es'];for(let _0x586c26=-0x1d7b+-0x1954+0x36cf;_0x586c26<_0x3e4af9['length'];_0x586c26++){const _0x105804=_0x3e4af9[_0x586c26],_0x15fd53=_0x105804['renderTarg'+'et'];if(_0x15fd53!==void(-0xc59+-0xa6+0xcff)){const _0x936a47=_0x45326a['get'](_0x15fd53);if(_0x936a47){const _0x16f43e=_0x105804['colorArray'+'Ops']['length'];for(let _0x115045=-0x1109+-0x3cd+0x14d6;_0x115045<_0x16f43e;_0x115045++)_0x105804['colorArray'+'Ops'][_0x115045]['clear']||(_0x936a47['colorArray'+'Ops'][_0x115045]['store']=!(0x1*-0xa4b+0xccf+0x284*-0x1));_0x105804['depthStenc'+'ilOps']['clearDepth']||(_0x936a47['depthStenc'+'ilOps']['storeDepth']=!(-0x774+0x3*-0x111+0xaa7)),_0x105804['depthStenc'+'ilOps']['clearStenc'+'il']||(_0x936a47['depthStenc'+'ilOps']['storeStenc'+'il']=!(-0x2*-0x22a+0x53*-0x33+0xc35));}_0x45326a['set'](_0x15fd53,_0x105804);}}for(let _0x3ebc39=-0x7*0x47f+-0x1403+0x337c;_0x3ebc39<_0x3e4af9['length']-(0xbbc*0x3+0xad*-0x25+0x3*-0x366);_0x3ebc39++){const _0x165cf6=_0x3e4af9[_0x3ebc39],_0x557497=_0x165cf6['renderTarg'+'et'],_0x315844=_0x3e4af9[_0x3ebc39+(0x236b+-0x245d*0x1+0xf3)],_0x1e78a1=_0x315844['renderTarg'+'et'];_0x557497!==_0x1e78a1||_0x557497===void(0x61*0x1+-0x156f+0x4d*0x46)||_0x315844['depthStenc'+'ilOps']['clearDepth']||_0x315844['depthStenc'+'ilOps']['clearStenc'+'il']||_0x315844['colorArray'+'Ops']['some'](_0x3566b0=>_0x3566b0['clear'])||_0x165cf6['afterPasse'+'s']['length']>0x111e*-0x2+0x1*-0xe93+0x30cf||_0x315844['beforePass'+'es']['length']>0xc*-0xff+-0x380+0xf74||(_0x165cf6['_skipEnd']=!(0x2023+0x1*-0x231d+-0x1*-0x2fa),_0x315844['_skipStart']=!(0x24+-0xa9f*-0x1+-0xac3));}let _0x43c8ad=null,_0x102eaa=null;for(let _0x197f78=0x1725+0x1*0x1c12+0x3337*-0x1;_0x197f78<_0x3e4af9['length'];_0x197f78++){const _0x1be1ec=_0x3e4af9[_0x197f78],_0x5a28cd=_0x1be1ec['renderTarg'+'et'],_0x1aad91=_0x5a28cd==null?void(-0x1489+0x1bdb+-0x752):_0x5a28cd['colorBuffe'+'r'];if(_0x1aad91!=null&&_0x1aad91['cubemap']){if(_0x43c8ad===_0x1aad91){const _0x2ed7b3=_0x102eaa['colorArray'+'Ops']['length'];for(let _0x40c28b=-0x8f4+-0x1c1e+0x2512;_0x40c28b<_0x2ed7b3;_0x40c28b++)_0x102eaa['colorArray'+'Ops'][_0x40c28b]['mipmaps']=!(-0x79*0x52+-0x9b7*-0x3+-0x1*-0x99e);}_0x43c8ad=_0x5a28cd['colorBuffe'+'r'],_0x102eaa=_0x1be1ec;}else _0x1be1ec['requiresCu'+'bemaps']&&(_0x43c8ad=null,_0x102eaa=null);}_0x45326a['clear']();}['render'](_0x2d6de7){this['compile']();const _0x574c08=this['renderPass'+'es'];for(let _0x134a29=0x1d8*-0xd+0x1849+-0x3*0x1b;_0x134a29<_0x574c08['length'];_0x134a29++)_0x574c08[_0x134a29]['render']();}}class IC{constructor(_0x2f2c21,_0x78b797){this['texture0']=_0x2f2c21,this['texture1']=_0x78b797;}['destroy'](){var _0x4f67f0,_0x2dee7f;(_0x4f67f0=this['texture0'])==null||_0x4f67f0['destroy'](),(_0x2dee7f=this['texture1'])==null||_0x2dee7f['destroy']();}}const Eg=new Kt();class ia{static['createText'+'ure'](_0x294622,_0x335c85,_0x1113bf,_0x5b574e=''){return new _e(_0x294622,{'name':'AreaLightL'+'UT'+_0x5b574e,'width':_0x1113bf,'height':_0x1113bf,'format':_0x335c85,'addressU':ue,'addressV':ue,'type':Ds,'magFilter':vt,'minFilter':Te,'anisotropy':0x1,'mipmaps':!(-0x115e+-0x61d*0x2+0x1d99)});}static['applyTextu'+'res'](_0xa7d5e,_0x4d4b86,_0x38dd05){Eg['remove'](_0xa7d5e),Eg['get'](_0xa7d5e,()=>new IC(_0x4d4b86,_0x4d4b86===_0x38dd05?null:_0x38dd05)),_0xa7d5e['scope']['resolve']('areaLights'+'LutTex1')['setValue'](_0x4d4b86),_0xa7d5e['scope']['resolve']('areaLights'+'LutTex2')['setValue'](_0x38dd05);}static['createPlac'+'eholder'](_0x135105){const _0x165551=ia['createText'+'ure'](_0x135105,nt,-0x295*0x3+-0x1bc7+0x5ec*0x6,'placeholde'+'r');_0x165551['lock']()['fill'](-0x5*0x1f+0x1d82+-0x1ce7),_0x165551['unlock'](),ia['applyTextu'+'res'](_0x135105,_0x165551,_0x165551);}static['set'](_0x17cafb,_0x338a3d,_0x8fbd8e){function _0x745b72(_0x380ca5,_0x173ffb,_0x7bcbe5){const _0x31869c=ia['createText'+'ure'](_0x380ca5,_0x7bcbe5,-0x3d3*-0x1+-0x14*0x170+0x192d);return _0x31869c['lock']()['set'](_0x173ffb),_0x31869c['unlock'](),_0x31869c;}function _0x189a99(_0x3c09f9){const _0x4821e5=_0x3c09f9['length'],_0x5f3d40=new Uint16Array(_0x4821e5),_0x4fbded=Mn['float2Half'];for(let _0x543826=0x12a2+-0x57*-0x20+-0x1d82;_0x543826<_0x4821e5;_0x543826++)_0x5f3d40[_0x543826]=_0x4fbded(_0x3c09f9[_0x543826]);return _0x5f3d40;}const _0xc33f2b=_0x338a3d,_0x36bb1b=_0x8fbd8e,_0x2655e5=_0x189a99(_0xc33f2b),_0x192a71=_0x189a99(_0x36bb1b),_0x482f16=_0x745b72(_0x17cafb,_0x2655e5,nt),_0x120eac=_0x745b72(_0x17cafb,_0x192a71,nt);ia['applyTextu'+'res'](_0x17cafb,_0x482f16,_0x120eac);}}const Ph='en-US',Mh={'en':'en-US','es':'en-ES','zh':'zh-CN','zh-HK':'zh-TW','zh-TW':'zh-HK','zh-MO':'zh-HK','fr':'fr-FR','de':'de-DE','it':'it-IT','ru':'ru-RU','ja':'ja-JP'},Sm={};function Dr(_0xc638b7,_0x211e72){for(let _0x3fc1bf=-0x49d*0x5+-0x20e7+0x37f8,_0x468538=_0xc638b7['length'];_0x3fc1bf<_0x468538;_0x3fc1bf++)Sm[_0xc638b7[_0x3fc1bf]]=_0x211e72;}function Oi(_0x485a2a){const _0x31caf6=_0x485a2a['indexOf']('-');return _0x31caf6!==-(0xaa5+-0x6*-0x49d+0x6d*-0x5a)?_0x485a2a['substring'](-0x1cf*-0x11+0x1d4a+-0x3c09,_0x31caf6):_0x485a2a;}function LC(_0x42f326,_0x480eee){const _0x214d01=_0x42f326['indexOf']('-');return _0x214d01!==-(0x243*-0x8+-0x109*-0x20+-0xf07)?_0x480eee+_0x42f326['substring'](_0x214d01):_0x480eee;}function Fv(_0x5d3961,_0x380213){if(_0x380213[_0x5d3961])return _0x5d3961;let _0x364728=Mh[_0x5d3961];if(_0x364728&&_0x380213[_0x364728])return _0x364728;const _0x3cc2d0=Oi(_0x5d3961);return _0x364728=Mh[_0x3cc2d0],_0x380213[_0x364728]?_0x364728:_0x380213[_0x3cc2d0]?_0x3cc2d0:Ph;}Dr(['ja','ko','th','vi','zh','id'],_0x1ddfe7=>0x1df*0x1+0x163c+-0x181b),Dr(['fa','hi'],_0x37f4ea=>_0x37f4ea>=0x231+-0x1*0x8c9+0x8*0xd3&&_0x37f4ea<=-0xe*-0x194+-0x1d1*-0x13+0x1c4d*-0x2?-0x24c1*0x1+0xc73+0x184e:-0x1bc6+-0x816+0x23dd),Dr(['fr','pt'],_0x2b7085=>_0x2b7085>=0x5*0xb8+0xcb0+-0x1048&&_0x2b7085<0x1*-0x885+0x22ed+-0x1a66?-0x2*-0x4b6+0xef1+-0x185d:0x3*0xc43+0xb7a*-0x1+-0x194e),Dr(['da'],_0x1db540=>_0x1db540===-0x1*0x1237+0x177d+0x13*-0x47||!Number['isInteger'](_0x1db540)&&_0x1db540>=-0xdd8+-0xd32*0x1+0x1b0a&&_0x1db540<=0x1b51+0x884+-0x23d4?-0xf23+0x1414+-0x4f1:0x201d+0x107d+-0x3099),Dr(['de','en','it','el','es','tr','fi','sv','nb','no','ur'],_0x5a1645=>_0x5a1645===0x2f5+-0x1b9b+0x18a7?0x15dc+0x73*0x3a+0x17f5*-0x2:0xb0f+0x1512+-0x2020),Dr(['ru','uk'],_0x4b7abb=>{if(Number['isInteger'](_0x4b7abb)){const _0x35de8b=_0x4b7abb%(-0xd*0x2af+-0x16*0x145+0x3edb),_0xd039d0=_0x4b7abb%(0x2*0x71f+0x1*0xd+-0xde7*0x1);if(_0x35de8b===0x1fdd+-0x51e+0x8ea*-0x3&&_0xd039d0!==0x1*-0x1b05+0xc5*-0x10+0x5*0x7e0)return 0x1920*-0x1+-0xc*-0x3b+0x6a*0x36;if(_0x35de8b>=-0x12e9+0x1636*-0x1+0x2921&&_0x35de8b<=-0x1*-0x2605+-0x1*0x1bbf+-0xa42&&(_0xd039d0<0x2511+0x3cb+-0x28d0||_0xd039d0>-0x3cd*0x2+0x1d30+-0x1588))return-0x1d+0x19e8+-0x19ca;if(_0x35de8b===0xbfb*-0x1+-0x1f49+-0x736*-0x6||_0x35de8b>=-0x919+-0x6*0x574+-0x14eb*-0x2&&_0x35de8b<=0x10ed+-0x13*0xc2+-0x16*0x1d||_0xd039d0>=0x2024+0x5f4+0x260d*-0x1&&_0xd039d0<=-0x45*-0xc+-0x1563+-0x4f*-0x3b)return 0x5e*0x16+-0xf7*0x13+0x1*0xa43;}return 0x1496+0x4*-0x895+0xdc1*0x1;}),Dr(['pl'],_0x5e09e6=>{if(Number['isInteger'](_0x5e09e6)){if(_0x5e09e6===0x225f*0x1+-0x3*0xa0d+-0x437)return-0x87c+-0x2*0xd04+-0x2f*-0xbc;const _0x1629a4=_0x5e09e6%(-0x1fe5+0xf85+-0x16*-0xbf),_0x2d75e6=_0x5e09e6%(-0x150e+0x1a6b*-0x1+0x1*0x2fdd);if(_0x1629a4>=0x1*0x6aa+-0x8dd*0x2+0xb12*0x1&&_0x1629a4<=-0x1f8*0xc+-0x65*-0x3+0x1675&&(_0x2d75e6<0x107*0x20+0x3*-0x4bd+-0x3b9*0x5||_0x2d75e6>0x843+-0x1385*0x1+0x2*0x5a8))return-0x5*0x425+-0x1*-0xebb+0x5ff;if(_0x1629a4>=-0x1*0x2627+0x191e+0x2f*0x47&&_0x1629a4<=-0x19ef+-0xfe6+-0x253*-0x12||_0x1629a4>=0x1*-0x1f9d+-0x1c9*-0x3+0x1a47&&_0x1629a4<=0x97b+-0xcf1+0x37f*0x1||_0x2d75e6>=0x1*-0x6ad+0x1141+-0x544*0x2&&_0x2d75e6<=0x15d*-0xd+-0x17e2*-0x1+0x209*-0x3)return 0xacb+-0x1943+0x2*0x73d;}return 0x1*-0xe60+-0xd5a+0x1bbd;}),Dr(['ar'],_0x3be563=>{if(_0x3be563===0x24c1+0x22fc+-0x47bd)return-0x2c4+-0xa*-0x266+-0x1538;if(_0x3be563===-0x1f4b*-0x1+0x8*0x49+-0x2192)return 0xbe1+0x254a*0x1+-0x312a;if(_0x3be563===0x1e66+0xcca*-0x2+-0x4d0)return-0x5*0x26b+-0x1*-0x1db7+-0x6e*0x29;if(Number['isInteger'](_0x3be563)){const _0x29cfc6=_0x3be563%(0x1aad+-0x2201+0x7b8);if(_0x29cfc6>=0x26c7+-0x1cf2+-0x9d2&&_0x29cfc6<=0x1fb7*-0x1+-0x28*-0x35+-0x1*-0x1779)return-0x22d1*-0x1+-0x931+-0x199d*0x1;if(_0x29cfc6>=-0xb79+-0x1dda+-0x2*-0x14af&&_0x29cfc6<=-0x1*0x158c+-0x99b+0x2de*0xb)return 0x1*-0x224e+0x3ef*0x1+0x1e63;}return-0x1d89+-0x1ebd*0x1+0x3c4b;});const RC=Sm[Oi(Ph)];function Tf(_0x962532){return Sm[_0x962532]||RC;}const jn=new RegExp('^\x5cs*(?:(?:'+'[a-z]+[a-z'+'0-9\x5c-+.]*:'+')?//|data:'+'|blob:)','i');class OC{constructor(_0x545619='',_0xaca585='',_0x8e0c88=null,_0x668318=null,_0x2eb036=null,_0x246435=null){this['url']=_0x545619,this['filename']=_0xaca585,this['hash']=_0x8e0c88,this['size']=_0x668318,this['opt']=_0x2eb036,this['contents']=_0x246435;}['equals'](_0x4b5f9d){return this['url']===_0x4b5f9d['url']&&this['filename']===_0x4b5f9d['filename']&&this['hash']===_0x4b5f9d['hash']&&this['size']===_0x4b5f9d['size']&&this['opt']===_0x4b5f9d['opt']&&this['contents']===_0x4b5f9d['contents'];}}let FC=-(0x187f*-0x1+-0x2*0xe16+0x34ac);const NC={'pvr':'extCompres'+'sedTexture'+'PVRTC','dxt':'extCompres'+'sedTexture'+'S3TC','etc2':'extCompres'+'sedTexture'+'ETC','etc1':'extCompres'+'sedTexture'+'ETC1','basis':'canvas'},bg=['pvr','dxt','etc2','etc1','basis'];class pe extends me{constructor(_0x16516c,_0x207998,_0x5db182,_0xef5b60={},_0x36fc0b={}){super(),h(this,'_file',null),h(this,'_i18n',{}),h(this,'_preload',!(-0x24*0x87+0x25f9+0x9*-0x21c)),h(this,'_resources',[]),h(this,'id',FC--),h(this,'loaded',!(0xd99+0x1b28+-0x28c0)),h(this,'loading',!(-0x265b*0x1+-0x1f*0x3b+0x2d81)),h(this,'options',{}),h(this,'registry',null),h(this,'tags',new Oo(this)),h(this,'type'),h(this,'urlObject',null),(this['_name']=_0x16516c||'',this['type']=_0x207998,this['_data']=_0xef5b60||{},this['options']=_0x36fc0b||{},_0x5db182&&(this['file']=_0x5db182));}set['name'](_0x215835){if(this['_name']===_0x215835)return;const _0x26c73b=this['_name'];this['_name']=_0x215835,this['fire']('name',this,this['_name'],_0x26c73b);}get['name'](){return this['_name'];}set['file'](_0x33fbe6){var _0x560f8e,_0x38daba;if(_0x33fbe6&&_0x33fbe6['variants']&&['texture','textureatl'+'as','bundle']['indexOf'](this['type'])!==-(-0x109b+0x6de+-0x2b*-0x3a)){const _0x4d5273=((_0x38daba=(_0x560f8e=this['registry'])==null?void(-0x772+-0x1*0x1f9b+0x270d):_0x560f8e['_loader'])==null?void(0x2*0x3fe+0xd31+-0x1a1*0xd):_0x38daba['_app'])||Ms(),_0x35594c=_0x4d5273==null?void(0xd*0x16+-0xdc3+0xca5):_0x4d5273['graphicsDe'+'vice'];if(_0x35594c)for(let _0x47fcb8=-0x1830+-0x16ae+0x359*0xe,_0x51ba26=bg['length'];_0x47fcb8<_0x51ba26;_0x47fcb8++){const _0x273577=bg[_0x47fcb8];if(_0x33fbe6['variants'][_0x273577]&&_0x35594c[NC[_0x273577]]){_0x33fbe6=_0x33fbe6['variants'][_0x273577];break;}if(_0x4d5273['enableBund'+'les']){const _0x1a72bf=_0x4d5273['bundles']['listBundle'+'sForAsset'](this);if(_0x1a72bf&&_0x1a72bf['find'](_0x471a86=>{var _0x23b9cb;return(_0x23b9cb=_0x471a86==null?void(-0x1a49+0x1868+0x1e1):_0x471a86['file'])==null?void(-0x53d+0x7*-0x13a+0xdd3):_0x23b9cb['variants'][_0x273577];}))break;}}}const _0x1c85b7=this['_file'],_0x16b879=_0x33fbe6?new OC(_0x33fbe6['url'],_0x33fbe6['filename'],_0x33fbe6['hash'],_0x33fbe6['size'],_0x33fbe6['opt'],_0x33fbe6['contents']):null;(!!_0x16b879!=!!_0x1c85b7||_0x16b879&&!_0x16b879['equals'](_0x1c85b7))&&(this['_file']=_0x16b879,this['fire']('change',this,'file',_0x16b879,_0x1c85b7),this['reload']());}get['file'](){return this['_file'];}set['data'](_0x15e0ad){const _0x3af3ca=this['_data'];this['_data']=_0x15e0ad,_0x15e0ad!==_0x3af3ca&&(this['fire']('change',this,'data',_0x15e0ad,_0x3af3ca),this['loaded']&&this['registry']['_loader']['patch'](this,this['registry']));}get['data'](){return this['_data'];}set['resource'](_0x53bfe2){const _0x50972b=this['_resources'][-0x1043+0x2444+-0x1401];this['_resources'][0xaaf+0x1dde+-0x288d]=_0x53bfe2,this['fire']('change',this,'resource',_0x53bfe2,_0x50972b);}get['resource'](){return this['_resources'][-0x4f*-0x5e+-0x178b+0x1*-0x577];}set['resources'](_0x4eacec){const _0x5492ec=this['_resources'];this['_resources']=_0x4eacec,this['fire']('change',this,'resources',_0x4eacec,_0x5492ec);}get['resources'](){return this['_resources'];}set['preload'](_0x5efc37){_0x5efc37=!!_0x5efc37,this['_preload']!==_0x5efc37&&(this['_preload']=_0x5efc37,this['_preload']&&!this['loaded']&&!this['loading']&&this['registry']&&this['registry']['load'](this));}get['preload'](){return this['_preload'];}set['loadFaces'](_0x40cbf7){_0x40cbf7=!!_0x40cbf7,(!this['hasOwnProp'+'erty']('_loadFaces')||_0x40cbf7!==this['_loadFaces'])&&(this['_loadFaces']=_0x40cbf7,this['loaded']&&this['registry']['_loader']['patch'](this,this['registry']));}get['loadFaces'](){return this['_loadFaces'];}['getFileUrl'](){const _0x45b23e=this['file'];if(!_0x45b23e||!_0x45b23e['url'])return null;let _0x294b1f=_0x45b23e['url'];if(this['registry']&&this['registry']['prefix']&&!jn['test'](_0x294b1f)&&(_0x294b1f=this['registry']['prefix']+_0x294b1f),this['type']!=='script'&&_0x45b23e['hash']){const _0x150756=_0x294b1f['indexOf']('?')!==-(-0xa76+0x1827+-0xdb0)?'&':'?';_0x294b1f+=_0x150756+'t='+_0x45b23e['hash'];}return _0x294b1f;}['getAbsolut'+'eUrl'](_0x6e77d){if(_0x6e77d['startsWith']('blob:')||_0x6e77d['startsWith']('data:'))return _0x6e77d;const _0x2eb7aa=xe['getDirecto'+'ry'](this['file']['url']);return xe['join'](_0x2eb7aa,_0x6e77d);}['getLocaliz'+'edAssetId'](_0x350014){return _0x350014=Fv(_0x350014,this['_i18n']),this['_i18n'][_0x350014]||null;}['addLocaliz'+'edAssetId'](_0x2b3889,_0x2a9073){this['_i18n'][_0x2b3889]=_0x2a9073,this['fire']('add:locali'+'zed',_0x2b3889,_0x2a9073);}['removeLoca'+'lizedAsset'+'Id'](_0x228982){const _0x29aae8=this['_i18n'][_0x228982];_0x29aae8&&(delete this['_i18n'][_0x228982],this['fire']('remove:loc'+'alized',_0x228982,_0x29aae8));}['ready'](_0x6818c8,_0x4066de){_0x4066de=_0x4066de||this,this['loaded']?_0x6818c8['call'](_0x4066de,this):this['once']('load',_0x1c007b=>{_0x6818c8['call'](_0x4066de,_0x1c007b);});}['reload'](){this['loaded']&&(this['loaded']=!(0x2*-0xd64+0x93a+0x118f),this['registry']['load'](this));}['unload'](){if(!this['loaded']&&this['_resources']['length']===-0x267d+-0x925*-0x1+0x1d58)return;this['fire']('unload',this),this['registry']['fire']('unload:'+this['id'],this);const _0x2607d9=this['_resources'];this['urlObject']&&(URL['revokeObje'+'ctURL'](this['urlObject']),this['urlObject']=null),this['resources']=[],this['loaded']=!(0x11af+-0x14fb+0x41*0xd),this['file']&&this['registry']['_loader']['clearCache'](this['getFileUrl'](),this['type']);for(let _0x4b9afd=0x7a4+-0x2*0xaff+0xe5a;_0x4b9afd<_0x2607d9['length'];++_0x4b9afd){const _0x280240=_0x2607d9[_0x4b9afd];_0x280240&&_0x280240['destroy']&&_0x280240['destroy']();}}static['fetchArray'+'Buffer'](_0x213855,_0x4a50dd,_0x5a055c,_0x4b46dd=0x24b*0xa+-0x1*0x1612+0xdc*-0x1){var _0xb414b9;(_0xb414b9=_0x5a055c==null?void(0x35*0x2f+-0x2e1*-0x4+-0x153f):_0x5a055c['file'])!=null&&_0xb414b9['contents']?setTimeout(()=>{_0x4a50dd(null,_0x5a055c['file']['contents']);}):ot['get'](_0x213855,{'cache':!(-0x3*0xc99+0x133b+0x1290),'responseType':'arraybuffe'+'r','retry':_0x4b46dd>0x2142+-0x936+0x180c*-0x1,'maxRetries':_0x4b46dd},_0x4a50dd);}}h(pe,'EVENT_LOAD','load'),h(pe,'EVENT_UNLO'+'AD','unload'),h(pe,'EVENT_REMO'+'VE','remove'),h(pe,'EVENT_ERRO'+'R','error'),h(pe,'EVENT_CHAN'+'GE','change'),h(pe,'EVENT_PROG'+'RESS','progress'),h(pe,'EVENT_ADDL'+'OCALIZED','add:locali'+'zed'),h(pe,'EVENT_REMO'+'VELOCALIZE'+'D','remove:loc'+'alized');class kC{constructor(_0x5dce9f=null){h(this,'_index',{}),h(this,'_key'),this['_key']=_0x5dce9f;}['addItem'](_0x20d673){const _0x174c70=_0x20d673['tags']['_list'];for(const _0x381a8f of _0x174c70)this['add'](_0x381a8f,_0x20d673);}['removeItem'](_0xdfabf5){const _0x2dd144=_0xdfabf5['tags']['_list'];for(const _0x7131a3 of _0x2dd144)this['remove'](_0x7131a3,_0xdfabf5);}['add'](_0x5c12fd,_0x2e876a){this['_index'][_0x5c12fd]&&this['_index'][_0x5c12fd]['list']['indexOf'](_0x2e876a)!==-(0xcd5+0xaab+-0x177f)||(this['_index'][_0x5c12fd]||(this['_index'][_0x5c12fd]={'list':[]},this['_key']&&(this['_index'][_0x5c12fd]['keys']={})),this['_index'][_0x5c12fd]['list']['push'](_0x2e876a),this['_key']&&(this['_index'][_0x5c12fd]['keys'][_0x2e876a[this['_key']]]=_0x2e876a));}['remove'](_0x1c2983,_0x4104b4){if(!this['_index'][_0x1c2983]||this['_key']&&!this['_index'][_0x1c2983]['keys'][_0x4104b4[this['_key']]])return;const _0x6e4278=this['_index'][_0x1c2983]['list']['indexOf'](_0x4104b4);_0x6e4278!==-(0x163a+0x1dfb+-0x3434*0x1)&&(this['_index'][_0x1c2983]['list']['splice'](_0x6e4278,-0x328*0x4+0x1628+-0x987),this['_key']&&delete this['_index'][_0x1c2983]['keys'][_0x4104b4[this['_key']]],this['_index'][_0x1c2983]['list']['length']===0x14ec+0x14*0x35+-0x644*0x4&&delete this['_index'][_0x1c2983]);}['find'](_0x323862){const _0x1576c4={},_0x1cbae6=[];let _0xce4849,_0x22ad42,_0x131868,_0x55100f,_0x193a10;const _0xbb81e6=(_0x42039d,_0x3deca8)=>this['_index'][_0x42039d]['list']['length']-this['_index'][_0x3deca8]['list']['length'];for(let _0x2dbbf1=0x5*-0x218+-0x41e+0x2*0x74b;_0x2dbbf1<_0x323862['length'];_0x2dbbf1++){if(_0x22ad42=_0x323862[_0x2dbbf1],_0x22ad42 instanceof Array){if(_0x22ad42['length']===0x2c*0x5f+-0x296*0x7+0x1c6)continue;if(_0x22ad42['length']===0x268c+0xfad+0x28*-0x15b)_0x22ad42=_0x22ad42[0x3*0x65f+-0x2a*-0xb3+-0x307b];else{_0x193a10=!(0x1d1e+-0x1*0x44f+0x18ce*-0x1);for(let _0x3557b1=-0x1def+-0x1*0x252b+0x431a;_0x3557b1<_0x22ad42['length'];_0x3557b1++)if(!this['_index'][_0x22ad42[_0x3557b1]]){_0x193a10=!(-0x3*0x617+-0x1*0x1137+0x237c);break;}if(_0x193a10)continue;_0x131868=_0x22ad42['slice'](0xb7f+-0x2459*-0x1+-0x1*0x2fd8)['sort'](_0xbb81e6),_0x55100f=_0x131868['slice'](0x20c4+0x21e*-0xf+-0x101),_0x55100f['length']===-0x1aa1*-0x1+-0x220e+0x76e&&(_0x55100f=_0x55100f[0x2f*-0x1+0x2*-0xbc+0x3*0x8d]);for(let _0x448f9f=-0x2*0x224+0x1*-0x2672+0x2aba;_0x448f9f<this['_index'][_0x131868[-0x1f16*-0x1+0x50f+-0x1e7*0x13]]['list']['length'];_0x448f9f++)_0xce4849=this['_index'][_0x131868[0x1d27*-0x1+-0x1206+0x2f2d]]['list'][_0x448f9f],(this['_key']?!_0x1576c4[_0xce4849[this['_key']]]:_0x1cbae6['indexOf'](_0xce4849)===-(0xb76*-0x1+-0x1246*0x1+-0x17*-0x14b))&&_0xce4849['tags']['has'](_0x55100f)&&(this['_key']&&(_0x1576c4[_0xce4849[this['_key']]]=!(-0x358+-0x2665+-0x29bd*-0x1)),_0x1cbae6['push'](_0xce4849));continue;}}if(_0x22ad42&&typeof _0x22ad42=='string'&&this['_index'][_0x22ad42]){for(let _0x2b784b=-0xdc4+-0x1*-0x268f+-0x18cb;_0x2b784b<this['_index'][_0x22ad42]['list']['length'];_0x2b784b++)_0xce4849=this['_index'][_0x22ad42]['list'][_0x2b784b],this['_key']?_0x1576c4[_0xce4849[this['_key']]]||(_0x1576c4[_0xce4849[this['_key']]]=!(0x32+0x1*-0x205f+-0x1*-0x202d),_0x1cbae6['push'](_0xce4849)):_0x1cbae6['indexOf'](_0xce4849)===-(-0x2*-0x736+-0xb16+-0x355*0x1)&&_0x1cbae6['push'](_0xce4849);}}return _0x1cbae6;}}class mn extends me{constructor(_0x586546){super(),h(this,'_assets',new Set()),h(this,'_loader'),h(this,'_idToAsset',new Map()),h(this,'_urlToAsse'+'t',new Map()),h(this,'_nameToAss'+'et',new Map()),h(this,'_tags',new kC('id')),h(this,'prefix',null),h(this,'bundles',null),this['_loader']=_0x586546;}['list'](_0x5cb507={}){const _0x7bcede=Array['from'](this['_assets']);return _0x5cb507['preload']!==void(0x10fd+-0x435*-0x5+-0x2606)?_0x7bcede['filter'](_0x5ae09b=>_0x5ae09b['preload']===_0x5cb507['preload']):_0x7bcede;}['add'](_0x33da59){var _0x3beb9c,_0x5caaad;this['_assets']['has'](_0x33da59)||(this['_assets']['add'](_0x33da59),this['_idToAsset']['set'](_0x33da59['id'],_0x33da59),(_0x3beb9c=_0x33da59['file'])!=null&&_0x3beb9c['url']&&this['_urlToAsse'+'t']['set'](_0x33da59['file']['url'],_0x33da59),this['_nameToAss'+'et']['has'](_0x33da59['name'])||this['_nameToAss'+'et']['set'](_0x33da59['name'],new Set()),this['_nameToAss'+'et']['get'](_0x33da59['name'])['add'](_0x33da59),_0x33da59['on']('name',this['_onNameCha'+'nge'],this),_0x33da59['registry']=this,this['_tags']['addItem'](_0x33da59),_0x33da59['tags']['on']('add',this['_onTagAdd'],this),_0x33da59['tags']['on']('remove',this['_onTagRemo'+'ve'],this),this['fire']('add',_0x33da59),this['fire']('add:'+_0x33da59['id'],_0x33da59),(_0x5caaad=_0x33da59['file'])!=null&&_0x5caaad['url']&&this['fire']('add:url:'+_0x33da59['file']['url'],_0x33da59),_0x33da59['preload']&&this['load'](_0x33da59));}['remove'](_0x27ad80){var _0x1d8a49,_0x5d0310;if(!this['_assets']['has'](_0x27ad80))return!(0xc76+-0x266c*0x1+0x19f7*0x1);if(this['_assets']['delete'](_0x27ad80),this['_idToAsset']['delete'](_0x27ad80['id']),(_0x1d8a49=_0x27ad80['file'])!=null&&_0x1d8a49['url']&&this['_urlToAsse'+'t']['delete'](_0x27ad80['file']['url']),_0x27ad80['off']('name',this['_onNameCha'+'nge'],this),this['_nameToAss'+'et']['has'](_0x27ad80['name'])){const _0x358347=this['_nameToAss'+'et']['get'](_0x27ad80['name']);_0x358347['delete'](_0x27ad80),_0x358347['size']===0x6d*0x3b+0x913*-0x1+-0x100c&&this['_nameToAss'+'et']['delete'](_0x27ad80['name']);}return this['_tags']['removeItem'](_0x27ad80),_0x27ad80['tags']['off']('add',this['_onTagAdd'],this),_0x27ad80['tags']['off']('remove',this['_onTagRemo'+'ve'],this),_0x27ad80['fire']('remove',_0x27ad80),this['fire']('remove',_0x27ad80),this['fire']('remove:'+_0x27ad80['id'],_0x27ad80),(_0x5d0310=_0x27ad80['file'])!=null&&_0x5d0310['url']&&this['fire']('remove:url'+':'+_0x27ad80['file']['url'],_0x27ad80),!(-0x1b2f+0x6*-0x5b5+0x3d6d);}['get'](_0x5c4863){return this['_idToAsset']['get'](Number(_0x5c4863));}['getByUrl'](_0x87fcef){return this['_urlToAsse'+'t']['get'](_0x87fcef);}['load'](_0x7eb46e,_0x497ab9){if((_0x7eb46e['loading']||_0x7eb46e['loaded'])&&!(_0x497ab9!=null&&_0x497ab9['force']))return;const _0xf29f31=_0x7eb46e['file'],_0x55d280=()=>{this['fire']('load',_0x7eb46e),this['fire']('load:'+_0x7eb46e['id'],_0x7eb46e),_0xf29f31&&_0xf29f31['url']&&this['fire']('load:url:'+_0xf29f31['url'],_0x7eb46e),_0x7eb46e['fire']('load',_0x7eb46e);},_0x1fc622=_0x2a2269=>{if(_0x2a2269 instanceof Array?_0x7eb46e['resources']=_0x2a2269:_0x7eb46e['resource']=_0x2a2269,this['_loader']['patch'](_0x7eb46e,this),_0x7eb46e['type']==='bundle'){const _0x2d2a58=_0x7eb46e['data']['assets'];for(let _0x35e276=0x6*-0x3d+-0x18dc+0x2a1*0xa;_0x35e276<_0x2d2a58['length'];_0x35e276++){const _0x5066ca=this['_idToAsset']['get'](_0x2d2a58[_0x35e276]);_0x5066ca&&!_0x5066ca['loaded']&&this['load'](_0x5066ca,{'force':!(-0x453*0x7+-0x5b3*-0x3+-0xd2c*-0x1)});}_0x7eb46e['resource']['loaded']?_0x55d280():(this['fire']('load:start',_0x7eb46e),this['fire']('load:start'+':'+_0x7eb46e['id'],_0x7eb46e),_0xf29f31&&_0xf29f31['url']&&this['fire']('load:start'+':url:'+_0xf29f31['url'],_0x7eb46e),_0x7eb46e['fire']('load:start',_0x7eb46e),_0x7eb46e['resource']['on']('load',_0x55d280));}else _0x55d280();},_0x145c0a=(_0x9d1a77,_0x549719,_0xef3150)=>{if(_0x7eb46e['loaded']=!(-0xc*0x65+0x1281+0xf*-0xeb),_0x7eb46e['loading']=!(0x1919+0xd*0x27a+0x1*-0x394a),_0x9d1a77)this['fire']('error',_0x9d1a77,_0x7eb46e),this['fire']('error:'+_0x7eb46e['id'],_0x9d1a77,_0x7eb46e),_0x7eb46e['fire']('error',_0x9d1a77,_0x7eb46e);else{if(_0x7eb46e['type']==='script'){const _0x4e88d9=this['_loader']['getHandler']('script');_0x4e88d9['_cache'][_0x7eb46e['id']]&&_0x4e88d9['_cache'][_0x7eb46e['id']]['parentNode']===document['head']&&document['head']['removeChil'+'d'](_0x4e88d9['_cache'][_0x7eb46e['id']]),_0x4e88d9['_cache'][_0x7eb46e['id']]=_0xef3150;}_0x1fc622(_0x549719);}};if(_0xf29f31||_0x7eb46e['type']==='cubemap'){this['fire']('load:start',_0x7eb46e),this['fire']('load:'+_0x7eb46e['id']+':start',_0x7eb46e),_0x7eb46e['loading']=!(-0x21a7+-0x4b2+-0x1*-0x2659);const _0x259e4=_0x7eb46e['getFileUrl']();if(_0x7eb46e['type']==='bundle'){const _0xc0ed0=_0x7eb46e['data']['assets'];for(let _0x39b923=0x834+0x2b*0xc+-0xa38;_0x39b923<_0xc0ed0['length'];_0x39b923++){const _0x20f5b1=this['_idToAsset']['get'](_0xc0ed0[_0x39b923]);_0x20f5b1&&(_0x20f5b1['loaded']||_0x20f5b1['resource']||_0x20f5b1['loading']||(_0x20f5b1['loading']=!(0x1*-0xc41+-0x17*-0xd4+-0x6cb)));}}this['_loader']['load'](_0x259e4,_0x7eb46e['type'],_0x145c0a,_0x7eb46e,_0x497ab9);}else{const _0x164df3=this['_loader']['open'](_0x7eb46e['type'],_0x7eb46e['data']);_0x7eb46e['loaded']=!(-0x1ad3+0xcb3+0xe20),_0x1fc622(_0x164df3);}}['reloadInde'+'x'](_0x2d4ae5,_0x3c9fde,_0x535a43){const _0x25b3b5=(_0x1bcdd0,_0x5c47ec,_0x41f196)=>{_0x3c9fde['loaded']=!(-0x1e2c+0x119f*0x2+-0x2*0x289),_0x3c9fde['loading']=!(0x41*0xe+0xdd*0x21+-0x200a);};return this['_loader']['load'](_0x2d4ae5,_0x3c9fde['type'],_0x25b3b5,_0x3c9fde,_0x535a43),_0x3c9fde;}['loadFromUr'+'l'](_0xe27cf3,_0x931da6,_0x4e8440){this['loadFromUr'+'lAndFilena'+'me'](_0xe27cf3,null,_0x931da6,_0x4e8440);}['loadFromUr'+'lAndFilena'+'me'](_0x1ac064,_0x34fbeb,_0x592218,_0x10a50f){const _0x535c50=xe['getBasenam'+'e'](_0x34fbeb||_0x1ac064),_0x474dda={'filename':_0x34fbeb||_0x535c50,'url':_0x1ac064};let _0x28cd67=this['getByUrl'](_0x1ac064);if(!_0x28cd67)_0x28cd67=new pe(_0x535c50,_0x592218,_0x474dda),this['add'](_0x28cd67);else{if(_0x28cd67['loaded']){_0x10a50f(_0x28cd67['loadFromUr'+'lError']||null,_0x28cd67);return;}}const _0x51bfe7=_0x317571=>{_0x317571['once']('load',_0xd1713d=>{_0x592218==='material'?this['_loadTextu'+'res'](_0xd1713d,(_0x554a07,_0x48aaef)=>{_0x10a50f(_0x554a07,_0xd1713d);}):_0x10a50f(null,_0xd1713d);}),_0x317571['once']('error',_0x529fc6=>{_0x529fc6&&(this['loadFromUr'+'lError']=_0x529fc6),_0x10a50f(_0x529fc6,_0x317571);}),this['load'](_0x317571);};_0x28cd67['resource']?_0x10a50f(null,_0x28cd67):_0x592218==='model'?this['_loadModel'](_0x28cd67,_0x51bfe7):_0x51bfe7(_0x28cd67);}['_loadModel'](_0x33c3db,_0x4f3aef){const _0x1d99f7=_0x33c3db['getFileUrl'](),_0x1660b5=xe['getExtensi'+'on'](_0x1d99f7);if(_0x1660b5==='.json'||_0x1660b5==='.glb'){const _0x2533a5=xe['getDirecto'+'ry'](_0x1d99f7),_0x3da95f=xe['getBasenam'+'e'](_0x1d99f7),_0x55cdc3=xe['join'](_0x2533a5,_0x3da95f['replace'](_0x1660b5,'.mapping.j'+'son'));this['_loader']['load'](_0x55cdc3,'json',(_0x5ef43a,_0x53ad43)=>{_0x5ef43a?(_0x33c3db['data']={'mapping':[]},_0x4f3aef(_0x33c3db)):this['_loadMater'+'ials'](_0x33c3db,_0x53ad43,(_0x122fe6,_0x49b6a2)=>{_0x33c3db['data']=_0x53ad43,_0x4f3aef(_0x33c3db);});});}else _0x4f3aef(_0x33c3db);}['_loadMater'+'ials'](_0x214c58,_0x6f2fea,_0xb8507e){const _0x17e99b=[];let _0x3d7a07=0x1*-0x445+0x1909+0xa62*-0x2;const _0x51a93e=(_0x45c8c7,_0x1773d2)=>{this['_loadTextu'+'res'](_0x1773d2,(_0x20f221,_0x4d5d19)=>{_0x17e99b['push'](_0x1773d2),_0x17e99b['length']===_0x3d7a07&&_0xb8507e(null,_0x17e99b);});};for(let _0x4b37f4=0x948*-0x3+0x3*-0xb3+-0x49*-0x69;_0x4b37f4<_0x6f2fea['mapping']['length'];_0x4b37f4++){const _0x3e27f2=_0x6f2fea['mapping'][_0x4b37f4]['path'];if(_0x3e27f2){_0x3d7a07++;const _0x271ea3=_0x214c58['getAbsolut'+'eUrl'](_0x3e27f2);this['loadFromUr'+'l'](_0x271ea3,'material',_0x51a93e);}}_0x3d7a07===-0x747+-0xc21+0x17*0xd8&&_0xb8507e(null,_0x17e99b);}['_loadTextu'+'res'](_0x4233fc,_0x5b6311){const _0x1d58c1=[];let _0x27866a=-0xf1c+-0x5*-0x78b+-0x169b*0x1;const _0x210722=_0x4233fc['data'];if(_0x210722['mappingFor'+'mat']!=='path'){w['warn']('Skipping:\x20'+_0x4233fc['name']+(',\x20material'+'\x20files\x20mus'+'t\x20be\x20mappi'+'ngFormat:\x20'+'\x22path\x22\x20to\x20'+'be\x20loaded\x20'+'from\x20URL')),_0x5b6311(null,_0x1d58c1);return;}const _0x575170=(_0x323c34,_0x2f4ecb)=>{_0x323c34&&console['error'](_0x323c34),_0x1d58c1['push'](_0x2f4ecb),_0x1d58c1['length']===_0x27866a&&_0x5b6311(null,_0x1d58c1);},_0x1e0959=Cd;for(let _0xb9814c=0x3*0x1f7+-0x17f*0x7+0x494;_0xb9814c<_0x1e0959['length'];_0xb9814c++){const _0x37e8f6=_0x210722[_0x1e0959[_0xb9814c]];if(_0x37e8f6&&typeof _0x37e8f6=='string'){_0x27866a++;const _0x268585=_0x4233fc['getAbsolut'+'eUrl'](_0x37e8f6);this['loadFromUr'+'l'](_0x268585,'texture',_0x575170);}}_0x27866a===-0xdb1+0xce6+-0x1d*-0x7&&_0x5b6311(null,_0x1d58c1);}['_onTagAdd'](_0xeca5a7,_0x4993fa){this['_tags']['add'](_0xeca5a7,_0x4993fa);}['_onTagRemo'+'ve'](_0x22ac1a,_0x1da54d){this['_tags']['remove'](_0x22ac1a,_0x1da54d);}['_onNameCha'+'nge'](_0x4ca844,_0x3c05a5,_0x3f83e6){if(this['_nameToAss'+'et']['has'](_0x3f83e6)){const _0x42ac0d=this['_nameToAss'+'et']['get'](_0x3f83e6);_0x42ac0d['delete'](_0x4ca844),_0x42ac0d['size']===0x62a+0x15c8*0x1+-0x1bf2&&this['_nameToAss'+'et']['delete'](_0x3f83e6);}this['_nameToAss'+'et']['has'](_0x4ca844['name'])||this['_nameToAss'+'et']['set'](_0x4ca844['name'],new Set()),this['_nameToAss'+'et']['get'](_0x4ca844['name'])['add'](_0x4ca844);}['findByTag'](..._0x3780c0){return this['_tags']['find'](_0x3780c0);}['filter'](_0x5992ff){return Array['from'](this['_assets'])['filter'](_0x36b90b=>_0x5992ff(_0x36b90b));}['find'](_0x15f91a,_0x36914e){const _0x21f1e4=this['_nameToAss'+'et']['get'](_0x15f91a);if(!_0x21f1e4)return null;for(const _0x2bffc5 of _0x21f1e4)if(!_0x36914e||_0x2bffc5['type']===_0x36914e)return _0x2bffc5;return null;}['findAll'](_0x3d8b6c,_0x20db92){const _0x32c1b2=this['_nameToAss'+'et']['get'](_0x3d8b6c);if(!_0x32c1b2)return[];const _0x1e9696=Array['from'](_0x32c1b2);return _0x20db92?_0x1e9696['filter'](_0x45be75=>_0x45be75['type']===_0x20db92):_0x1e9696;}}h(mn,'EVENT_LOAD','load'),h(mn,'EVENT_ADD','add'),h(mn,'EVENT_REMO'+'VE','remove'),h(mn,'EVENT_ERRO'+'R','error');class UC{constructor(_0x393c4f){h(this,'_idToBundl'+'e',new Map()),h(this,'_assetToBu'+'ndles',new Map()),h(this,'_urlsToBun'+'dles',new Map()),h(this,'_fileReque'+'sts',new Map()),(this['_assets']=_0x393c4f,this['_assets']['bundles']=this,this['_assets']['on']('add',this['_onAssetAd'+'d'],this),this['_assets']['on']('remove',this['_onAssetRe'+'move'],this));}['_onAssetAd'+'d'](_0x293477){if(_0x293477['type']==='bundle'){this['_idToBundl'+'e']['set'](_0x293477['id'],_0x293477),this['_assets']['on']('load:start'+':'+_0x293477['id'],this['_onBundleL'+'oadStart'],this),this['_assets']['on']('load:'+_0x293477['id'],this['_onBundleL'+'oad'],this),this['_assets']['on']('error:'+_0x293477['id'],this['_onBundleE'+'rror'],this);const _0x22389b=_0x293477['data']['assets'];for(let _0x2ec7af=-0x1ce7+0x1*-0x1373+0x305a*0x1;_0x2ec7af<_0x22389b['length'];_0x2ec7af++)this['_indexAsse'+'tInBundle'](_0x22389b[_0x2ec7af],_0x293477);}else this['_assetToBu'+'ndles']['has'](_0x293477['id'])&&this['_indexAsse'+'tFileUrls'](_0x293477);}['_unbindAss'+'etEvents'](_0x42b379){this['_assets']['off']('load:start'+':'+_0x42b379,this['_onBundleL'+'oadStart'],this),this['_assets']['off']('load:'+_0x42b379,this['_onBundleL'+'oad'],this),this['_assets']['off']('error:'+_0x42b379,this['_onBundleE'+'rror'],this);}['_indexAsse'+'tInBundle'](_0x46a3ad,_0x3a0642){let _0x13c9be=this['_assetToBu'+'ndles']['get'](_0x46a3ad);_0x13c9be||(_0x13c9be=new Set(),this['_assetToBu'+'ndles']['set'](_0x46a3ad,_0x13c9be)),_0x13c9be['add'](_0x3a0642);const _0x10d53a=this['_assets']['get'](_0x46a3ad);_0x10d53a&&this['_indexAsse'+'tFileUrls'](_0x10d53a);}['_indexAsse'+'tFileUrls'](_0x2b51e0){const _0x9ded22=this['_getAssetF'+'ileUrls'](_0x2b51e0);if(_0x9ded22)for(let _0x3cfe83=0x12c6+0x1751+0x1*-0x2a17;_0x3cfe83<_0x9ded22['length'];_0x3cfe83++){const _0x3f53d4=this['_assetToBu'+'ndles']['get'](_0x2b51e0['id']);_0x3f53d4&&this['_urlsToBun'+'dles']['set'](_0x9ded22[_0x3cfe83],_0x3f53d4);}}['_getAssetF'+'ileUrls'](_0x3f9c15){let _0xe60621=_0x3f9c15['getFileUrl']();if(!_0xe60621)return null;_0xe60621=_0xe60621['split']('?')[-0x1*-0x244a+0x4*0x37d+-0x2*0x191f];const _0x5509a9=[_0xe60621];if(_0x3f9c15['type']==='font'){const _0x38fd77=_0x3f9c15['data']['info']['maps']['length'];for(let _0x348ef2=0x1*-0x349+-0xd9a*0x2+0x1e7e;_0x348ef2<_0x38fd77;_0x348ef2++)_0x5509a9['push'](_0xe60621['replace']('.png',_0x348ef2+'.png'));}return _0x5509a9;}['_onAssetRe'+'move'](_0x1d33f6){if(_0x1d33f6['type']==='bundle'){this['_idToBundl'+'e']['delete'](_0x1d33f6['id']),this['_unbindAss'+'etEvents'](_0x1d33f6['id']);const _0x172d2d=_0x1d33f6['data']['assets'];for(let _0x18e6b9=-0x3*0x429+-0x2073+-0x6*-0x77d;_0x18e6b9<_0x172d2d['length'];_0x18e6b9++){const _0x44ff33=this['_assetToBu'+'ndles']['get'](_0x172d2d[_0x18e6b9]);if(_0x44ff33&&(_0x44ff33['delete'](_0x1d33f6),_0x44ff33['size']===0x2154+0x1ce8+0x7*-0x8e4)){this['_assetToBu'+'ndles']['delete'](_0x172d2d[_0x18e6b9]);for(const [_0x1d64b0,_0x4d956f]of this['_urlsToBun'+'dles'])_0x4d956f===_0x44ff33&&this['_urlsToBun'+'dles']['delete'](_0x1d64b0);}}this['_onBundleE'+'rror']('Bundle\x20'+_0x1d33f6['id']+('\x20was\x20remov'+'ed'));}else{if(!this['_assetToBu'+'ndles']['get'](_0x1d33f6['id']))return;this['_assetToBu'+'ndles']['delete'](_0x1d33f6['id']);const _0x49a550=this['_getAssetF'+'ileUrls'](_0x1d33f6);if(!_0x49a550)return;for(let _0x4349e9=-0x163+0x144d*-0x1+-0x10*-0x15b;_0x4349e9<_0x49a550['length'];_0x4349e9++)this['_urlsToBun'+'dles']['delete'](_0x49a550[_0x4349e9]);}}['_onBundleL'+'oadStart'](_0x8a0cc6){_0x8a0cc6['resource']['on']('add',(_0x32d8cc,_0x2806a7)=>{const _0x2d6b7b=this['_fileReque'+'sts']['get'](_0x32d8cc);if(_0x2d6b7b){for(let _0x7aa795=-0xd51+0x3f7*-0x9+0x3100;_0x7aa795<_0x2d6b7b['length'];_0x7aa795++)_0x2d6b7b[_0x7aa795](null,_0x2806a7);this['_fileReque'+'sts']['delete'](_0x32d8cc);}});}['_onBundleL'+'oad'](_0x4670ab){if(!_0x4670ab['resource']){this['_onBundleE'+'rror']('Bundle\x20'+_0x4670ab['id']+('\x20failed\x20to'+'\x20load'));return;}if(this['_fileReque'+'sts'])for(const [_0x2e327e,_0x2eef14]of this['_fileReque'+'sts']){const _0x33a3b2=this['_urlsToBun'+'dles']['get'](_0x2e327e);if(!_0x33a3b2||!_0x33a3b2['has'](_0x4670ab))continue;const _0x5f3527=decodeURIComponent(_0x2e327e);let _0x405c8a,_0x4f0c1d;if(_0x4670ab['resource']['has'](_0x5f3527))_0x4f0c1d=_0x4670ab['resource']['get'](_0x5f3527);else{if(_0x4670ab['resource']['loaded'])_0x405c8a='Bundle\x20'+_0x4670ab['id']+('\x20does\x20not\x20'+'contain\x20UR'+'L\x20')+_0x2e327e;else continue;}for(let _0x3688fe=-0x1a3f+-0x1*0x548+0x1f87;_0x3688fe<_0x2eef14['length'];_0x3688fe++)_0x2eef14[_0x3688fe](_0x405c8a,_0x405c8a||_0x4f0c1d);this['_fileReque'+'sts']['delete'](_0x2e327e);}}['_onBundleE'+'rror'](_0x496d03){for(const [_0x207dad,_0x27cde1]of this['_fileReque'+'sts'])if(!this['_findLoade'+'dOrLoading'+'BundleForU'+'rl'](_0x207dad)){for(let _0x3cb191=-0x2708+-0x37d*-0x8+-0xb2*-0x10;_0x3cb191<_0x27cde1['length'];_0x3cb191++)_0x27cde1[_0x3cb191](_0x496d03);this['_fileReque'+'sts']['delete'](_0x207dad);}}['_findLoade'+'dOrLoading'+'BundleForU'+'rl'](_0x3dbe24){const _0x2f93a5=this['_urlsToBun'+'dles']['get'](_0x3dbe24);if(!_0x2f93a5)return null;let _0x1f2745=null;for(const _0x4c2eb7 of _0x2f93a5){if(_0x4c2eb7['loaded']&&_0x4c2eb7['resource'])return _0x4c2eb7;_0x4c2eb7['loading']&&(_0x1f2745=_0x4c2eb7);}return _0x1f2745;}['listBundle'+'sForAsset'](_0x5ab432){const _0xdf6c0=this['_assetToBu'+'ndles']['get'](_0x5ab432['id']);return _0xdf6c0?Array['from'](_0xdf6c0):null;}['list'](){return Array['from'](this['_idToBundl'+'e']['values']());}['hasUrl'](_0x2a5cff){return this['_urlsToBun'+'dles']['has'](_0x2a5cff);}['urlIsLoade'+'dOrLoading'](_0x3cd9fa){return!!this['_findLoade'+'dOrLoading'+'BundleForU'+'rl'](_0x3cd9fa);}['loadUrl'](_0x4a9f87,_0x3f48f4){const _0x1e398d=this['_findLoade'+'dOrLoading'+'BundleForU'+'rl'](_0x4a9f87);if(!_0x1e398d){_0x3f48f4('URL\x20'+_0x4a9f87+('\x20not\x20found'+'\x20in\x20any\x20bu'+'ndles'));return;}if(_0x1e398d['loaded']){const _0x2dd038=decodeURIComponent(_0x4a9f87);if(_0x1e398d['resource']['has'](_0x2dd038)){_0x3f48f4(null,_0x1e398d['resource']['get'](_0x2dd038));return;}else{if(_0x1e398d['resource']['loaded']){_0x3f48f4('Bundle\x20'+_0x1e398d['id']+('\x20does\x20not\x20'+'contain\x20UR'+'L\x20')+_0x4a9f87);return;}}}let _0x225e5b=this['_fileReque'+'sts']['get'](_0x4a9f87);_0x225e5b||(_0x225e5b=[],this['_fileReque'+'sts']['set'](_0x4a9f87,_0x225e5b)),_0x225e5b['push'](_0x3f48f4);}['destroy'](){this['_assets']['off']('add',this['_onAssetAd'+'d'],this),this['_assets']['off']('remove',this['_onAssetRe'+'move'],this);for(const _0x22ed2a of this['_idToBundl'+'e']['keys']())this['_unbindAss'+'etEvents'](_0x22ed2a);this['_assets']=null,this['_idToBundl'+'e']['clear'](),this['_idToBundl'+'e']=null,this['_assetToBu'+'ndles']['clear'](),this['_assetToBu'+'ndles']=null,this['_urlsToBun'+'dles']['clear'](),this['_urlsToBun'+'dles']=null,this['_fileReque'+'sts']['clear'](),this['_fileReque'+'sts']=null;}}class BC extends me{constructor(){super(),h(this,'anim'),h(this,'animation'),h(this,'audioliste'+'ner'),h(this,'button'),h(this,'camera'),h(this,'collision'),h(this,'element'),h(this,'joint'),h(this,'layoutchil'+'d'),h(this,'layoutgrou'+'p'),h(this,'light'),h(this,'model'),h(this,'particlesy'+'stem'),h(this,'render'),h(this,'rigidbody'),h(this,'screen'),h(this,'script'),h(this,'scrollbar'),h(this,'scrollview'),h(this,'sound'),h(this,'sprite'),h(this,'zone'),this['list']=[];}['add'](_0x2c4e2e){const _0x4101e6=_0x2c4e2e['id'];if(this[_0x4101e6])throw new Error('ComponentS'+'ystem\x20name'+'\x20\x27'+_0x4101e6+('\x27\x20already\x20'+'registered'+'\x20or\x20not\x20al'+'lowed'));this[_0x4101e6]=_0x2c4e2e,this['list']['push'](_0x2c4e2e);}['remove'](_0xeb3f4){const _0x1fc0b3=_0xeb3f4['id'];if(!this[_0x1fc0b3])throw new Error('No\x20Compone'+'ntSystem\x20n'+'amed\x20\x27'+_0x1fc0b3+('\x27\x20register'+'ed'));delete this[_0x1fc0b3];const _0x112110=this['list']['indexOf'](this[_0x1fc0b3]);_0x112110!==-(0x5a*-0x20+-0x66+0xba7)&&this['list']['splice'](_0x112110,0xd72+-0xa99*-0x3+-0x2d3c);}['destroy'](){this['off']();for(let _0x30bb75=-0xb6f*-0x3+0x948+-0x2b95;_0x30bb75<this['list']['length'];_0x30bb75++)this['list'][_0x30bb75]['destroy']();}}class gu extends me{constructor(){super(...arguments),h(this,'_index',new Map()),h(this,'_loaded',!(-0x1766*0x1+-0x6e*-0x51+0x7*-0x1a1));}['addFile'](_0x474d54,_0x346bb1){this['_index']['has'](_0x474d54)||(this['_index']['set'](_0x474d54,_0x346bb1),this['fire']('add',_0x474d54,_0x346bb1));}['has'](_0x54ab85){return this['_index']['has'](_0x54ab85);}['get'](_0x2e2353){return this['_index']['get'](_0x2e2353)||null;}['destroy'](){this['_index']['clear']();}set['loaded'](_0x164b3a){!_0x164b3a||this['_loaded']||(this['_loaded']=!(0x1*-0xb90+0x57d*-0x1+0x123*0xf),this['fire']('load'));}get['loaded'](){return this['_loaded'];}}h(gu,'EVENT_ADD','add'),h(gu,'EVENT_LOAD','load');class zC extends me{constructor(_0x344291,_0x2a2732=''){super(),h(this,'headerSize',-0x112*0x6+0xb*0xf7+-0xbb*0x3),h(this,'paddingSiz'+'e',0x826+-0x1*0x218b+0x1b65*0x1),h(this,'bytesRead',-0x1bd6+0xb93*-0x1+0x2769),h(this,'bytesRecei'+'ved',-0x11*0xbe+0xf10+0x2*-0x139),h(this,'headerRead',!(0x127c+-0x93c+-0x93f)),h(this,'reader',null),h(this,'data',new Uint8Array(0x1ab7+-0x438+0x1bb*-0xd)),h(this,'decoder',null),h(this,'prefix',''),h(this,'fileName',''),h(this,'fileSize',-0x2c9*-0x3+-0x58c+0x1*-0x2cf),h(this,'fileType',''),h(this,'ustarForma'+'t',''),(this['prefix']=_0x2a2732||'',this['reader']=_0x344291['body']['getReader'](),this['reader']['read']()['then'](_0x405831=>{this['pump'](_0x405831['done'],_0x405831['value']);})['catch'](_0x4ac615=>{this['fire']('error',_0x4ac615);}));}['pump'](_0x3065fd,_0x5f53ed){if(_0x3065fd)return this['fire']('done'),null;this['bytesRecei'+'ved']+=_0x5f53ed['byteLength'];const _0x50ad94=new Uint8Array(this['data']['length']+_0x5f53ed['length']);for(_0x50ad94['set'](this['data']),_0x50ad94['set'](_0x5f53ed,this['data']['length']),this['data']=_0x50ad94;this['readFile'](););return this['reader']['read']()['then'](_0x513af1=>{this['pump'](_0x513af1['done'],_0x513af1['value']);})['catch'](_0x1135b2=>{this['fire']('error',_0x1135b2);});}['readFile'](){if(!this['headerRead']&&this['bytesRecei'+'ved']>this['bytesRead']+this['headerSize']){this['headerRead']=!(0xaba+0x1f6d+0xb*-0x3d5);const _0x2ce499=new DataView(this['data']['buffer'],this['bytesRead'],this['headerSize']);this['decoder']??(this['decoder']=new TextDecoder('windows-12'+'52'));const _0x25c1e0=this['decoder']['decode'](_0x2ce499);if(this['fileName']=_0x25c1e0['substring'](0x1fb*0x7+0x2684+-0x3461,-0x10c+0xd3e+-0xbce)['replace'](/\0/g,''),this['fileSize']=parseInt(_0x25c1e0['substring'](0x53e+0x987+-0xe49,-0x1ea9+-0x1*-0x349+0x1be8),0x16d*0x19+-0x75b*-0x1+-0x157c*0x2),this['fileType']=_0x25c1e0['substring'](-0x182*0x3+0x104d+-0xb2b,0x1f80+0x1*0x1bca+0x138f*-0x3),this['ustarForma'+'t']=_0x25c1e0['substring'](-0xd1d+0x108e+-0x34*0xc,-0x551+0x15d*0x1a+-0x1d1a),this['ustarForma'+'t']['indexOf']('ustar')!==-(-0x1*-0x1a1e+0x2d4*-0x5+-0xbf9)){const _0x363f6f=_0x25c1e0['substring'](0x4*0x868+-0x4b*0x43+-0xca6,0x188*-0x8+0x1502+-0x6ce)['replace'](/\0/g,'');_0x363f6f['length']>-0x114a+-0x2*-0xee7+0xb2*-0x12&&(this['fileName']=_0x363f6f['trim']()+this['fileName']['trim']());}this['bytesRead']+=0x2455*-0x1+0xd6b+0x18ea;}if(this['headerRead']){if(this['bytesRecei'+'ved']<this['bytesRead']+this['fileSize'])return!(-0x169a+0x1*0x1015+0x343*0x2);if(this['fileType']===''||this['fileType']==='0'){const _0x14a647=new DataView(this['data']['buffer'],this['bytesRead'],this['fileSize']),_0x6972f0={'name':this['prefix']+this['fileName'],'size':this['fileSize'],'data':_0x14a647};this['fire']('file',_0x6972f0);}this['bytesRead']+=this['fileSize'],this['headerRead']=!(0x2*0xe13+-0xb2c+-0x10f9);const _0x4d3818=this['bytesRead']%this['paddingSiz'+'e'];return _0x4d3818!==0x1c59+0x37*0x3b+0x3b*-0xb2&&(this['bytesRead']+=this['paddingSiz'+'e']-_0x4d3818),!(-0x23a0+-0x17fe+-0x3b9e*-0x1);}return!(-0x32d*-0x1+0x1df3+-0x1*0x211f);}}class Qe{constructor(_0x4644c5,_0x9ac9e){h(this,'handlerTyp'+'e',''),h(this,'_app'),h(this,'_maxRetrie'+'s',0x311*-0x7+-0x17cf*-0x1+0x96*-0x4),(this['_app']=_0x4644c5,this['handlerTyp'+'e']=_0x9ac9e);}set['maxRetries'](_0x115f37){this['_maxRetrie'+'s']=_0x115f37;}get['maxRetries'](){return this['_maxRetrie'+'s'];}['load'](_0x5cd630,_0x571433,_0x233116){}['open'](_0x2bb8ac,_0x496e6c,_0x3cbd79){return _0x496e6c;}['patch'](_0x49d594,_0x2b2269){}}class VC extends Qe{constructor(_0x32bee3){super(_0x32bee3,'bundle'),this['_assets']=_0x32bee3['assets'];}['_fetchRetr'+'ies'](_0x13ceb8,_0x5f28a2,_0x57cf51=0x959+-0x4ee*-0x5+-0x1*0x21ff){return new Promise((_0xa13286,_0x476235)=>{const _0x2fd241=()=>{fetch(_0x13ceb8,_0x5f28a2)['then'](_0xa13286)['catch'](_0x2a98a4=>{_0x57cf51++,_0x57cf51<this['maxRetries']?(w['error']('Bundle\x20fai'+'led\x20to\x20loa'+'d\x20retrying'+'\x20(attempt\x20'+_0x57cf51),_0x2fd241()):_0x476235(_0x2a98a4);});};_0x2fd241();});}['load'](_0x40c0ee,_0x1d1fb7){typeof _0x40c0ee=='string'&&(_0x40c0ee={'load':_0x40c0ee,'original':_0x40c0ee}),this['_fetchRetr'+'ies'](_0x40c0ee['load'],{'mode':'cors'},this['maxRetries'])['then'](_0x5a1a99=>{const _0x55a1aa=new gu();_0x1d1fb7(null,_0x55a1aa);const _0x138d9c=new zC(_0x5a1a99,this['_assets']['prefix']);_0x138d9c['on']('file',_0xd91085=>{_0x55a1aa['addFile'](_0xd91085['name'],_0xd91085['data']);}),_0x138d9c['on']('done',()=>{_0x55a1aa['loaded']=!(-0xdcd+-0x1073*-0x1+-0x2a6);}),_0x138d9c['on']('error',_0x419b0c=>{w['error'](_0x419b0c),_0x1d1fb7(_0x419b0c);});})['catch'](_0xe85697=>{w['error'](_0xe85697),_0x1d1fb7(_0xe85697);});}['open'](_0x4ddb66,_0x527db0){return _0x527db0;}}class Cn{constructor(_0x39d5cf){this['_handlers']={},this['_requests']={},this['_cache']={},this['_app']=_0x39d5cf;}['addHandler'](_0x3cebf1,_0x3dfe19){this['_handlers'][_0x3cebf1]=_0x3dfe19,_0x3dfe19['_loader']=this;}['removeHand'+'ler'](_0x38dac6){delete this['_handlers'][_0x38dac6];}['getHandler'](_0x3f3578){return this['_handlers'][_0x3f3578];}static['makeKey'](_0x37dcff,_0x3e9a4d){return _0x37dcff+'-'+_0x3e9a4d;}['load'](_0x344200,_0x1dfcc8,_0x24b2ad,_0x2aec13,_0x2496fc){var _0x12e3f6;const _0x6e7de5=this['_handlers'][_0x1dfcc8];if(!_0x6e7de5){const _0x5f5008='No\x20resourc'+'e\x20handler\x20'+'for\x20asset\x20'+'type:\x20\x27'+_0x1dfcc8+('\x27\x20when\x20loa'+'ding\x20[')+_0x344200+']';w['errorOnce'](_0x5f5008),_0x24b2ad(_0x5f5008);return;}if(!_0x344200){this['_loadNull'](_0x6e7de5,_0x24b2ad,_0x2aec13);return;}const _0x1df2aa=Cn['makeKey'](_0x344200,_0x1dfcc8);if(this['_requests'][_0x1df2aa])this['_requests'][_0x1df2aa]['push'](_0x24b2ad);else{this['_requests'][_0x1df2aa]=[_0x24b2ad];const _0x2eae58=this,_0x2820d1=function(_0x51a5d3,_0x3bb590){if(_0x51a5d3){_0x2eae58['_onFailure'](_0x1df2aa,_0x51a5d3);return;}if(_0x3bb590['load']instanceof DataView){if(_0x6e7de5['openBinary']){if(!_0x2eae58['_requests'][_0x1df2aa])return;try{const _0x1d7b3d=_0x6e7de5['openBinary'](_0x3bb590['load']);_0x2eae58['_onSuccess'](_0x1df2aa,_0x1d7b3d);}catch(_0x11d6f7){_0x2eae58['_onFailure'](_0x1df2aa,_0x11d6f7);}return;}_0x3bb590['load']=URL['createObje'+'ctURL'](new Blob([_0x3bb590['load']])),_0x2aec13&&(_0x2aec13['urlObject']&&URL['revokeObje'+'ctURL'](_0x2aec13['urlObject']),_0x2aec13['urlObject']=_0x3bb590['load']);}_0x6e7de5['load'](_0x3bb590,(_0x398cc8,_0x444dea,_0xd9bb22)=>{if(_0x2eae58['_requests'][_0x1df2aa]){if(_0x398cc8){_0x2eae58['_onFailure'](_0x1df2aa,_0x398cc8);return;}try{_0x2eae58['_onSuccess'](_0x1df2aa,_0x6e7de5['open'](_0x3bb590['original'],_0x444dea,_0x2aec13),_0xd9bb22);}catch(_0x5e3832){_0x2eae58['_onFailure'](_0x1df2aa,_0x5e3832);}}},_0x2aec13);},_0x17af8c=_0x344200['split']('?')[0x340+-0xa4a+0x70a];if(this['_app']['enableBund'+'les']&&this['_app']['bundles']['hasUrl'](_0x17af8c)&&!(_0x2496fc&&_0x2496fc['bundlesIgn'+'ore'])){if(!this['_app']['bundles']['urlIsLoade'+'dOrLoading'](_0x17af8c)){const _0x361415=this['_app']['bundles']['listBundle'+'sForAsset'](_0x2aec13);let _0x272cd2;_0x2496fc&&_0x2496fc['bundlesFil'+'ter']&&(_0x272cd2=_0x2496fc['bundlesFil'+'ter'](_0x361415)),_0x272cd2||(_0x361415==null||_0x361415['sort']((_0x4d5edb,_0x25baa3)=>_0x4d5edb['file']['size']-_0x25baa3['file']['size']),_0x272cd2=_0x361415==null?void(0x1*-0x1537+-0x31*-0x3e+-0x959*-0x1):_0x361415[-0x1377+0xa70+0x907]),_0x272cd2&&((_0x12e3f6=this['_app']['assets'])==null||_0x12e3f6['load'](_0x272cd2));}this['_app']['bundles']['loadUrl'](_0x17af8c,(_0x581953,_0x4d31a1)=>{_0x2820d1(_0x581953,{'load':_0x4d31a1,'original':_0x17af8c});});}else _0x2820d1(null,{'load':_0x344200,'original':_0x2aec13&&_0x2aec13['file']['filename']||_0x344200});}}['_loadNull'](_0x6eb46e,_0x4c72ca,_0x2da2f7){const _0x26d824=function(_0x2a9fda,_0x8af89f,_0x4492d2){if(_0x2a9fda)_0x4c72ca(_0x2a9fda);else try{_0x4c72ca(null,_0x6eb46e['open'](null,_0x8af89f,_0x2da2f7),_0x4492d2);}catch(_0x48404c){_0x4c72ca(_0x48404c);}};_0x6eb46e['load'](null,_0x26d824,_0x2da2f7);}['_onSuccess'](_0x531ce6,_0x11ab4c,_0x40da0c){for(let _0x12f84b=0x17+0x5f*-0x11+0x1*0x638;_0x12f84b<this['_requests'][_0x531ce6]['length'];_0x12f84b++)this['_requests'][_0x531ce6][_0x12f84b](null,_0x11ab4c,_0x40da0c);delete this['_requests'][_0x531ce6];}['_onFailure'](_0x11247f,_0x421464){if(console['error'](_0x421464),this['_requests'][_0x11247f]){for(let _0x53f78f=0x68*-0x22+-0xa5d+0x182d;_0x53f78f<this['_requests'][_0x11247f]['length'];_0x53f78f++)this['_requests'][_0x11247f][_0x53f78f](_0x421464);delete this['_requests'][_0x11247f];}}['open'](_0x5eaa76,_0x471d69){const _0x4e9e48=this['_handlers'][_0x5eaa76];return _0x4e9e48?_0x4e9e48['open'](null,_0x471d69):(console['warn']('No\x20resourc'+'e\x20handler\x20'+'found\x20for:'+'\x20'+_0x5eaa76),_0x471d69);}['patch'](_0x80d0f8,_0x2b51af){const _0x3ba8b0=this['_handlers'][_0x80d0f8['type']];if(!_0x3ba8b0){console['warn']('No\x20resourc'+'e\x20handler\x20'+'found\x20for:'+'\x20'+_0x80d0f8['type']);return;}_0x3ba8b0['patch']&&_0x3ba8b0['patch'](_0x80d0f8,_0x2b51af);}['clearCache'](_0x231696,_0x449f1e){const _0x7778dc=Cn['makeKey'](_0x231696,_0x449f1e);delete this['_cache'][_0x7778dc];}['getFromCac'+'he'](_0x2e6465,_0x27e80a){const _0x492e47=Cn['makeKey'](_0x2e6465,_0x27e80a);if(this['_cache'][_0x492e47])return this['_cache'][_0x492e47];}['enableRetr'+'y'](_0x584a58=-0x26d*-0xe+-0x477*0x5+-0xb9e){_0x584a58=Math['max'](-0x4*0x4c3+-0x2170+0x347c*0x1,_0x584a58)||0x75*-0x29+0x19cf*-0x1+0x2c8c;for(const _0x4b3af0 in this['_handlers'])this['_handlers'][_0x4b3af0]['maxRetries']=_0x584a58;}['disableRet'+'ry'](){for(const _0x5b28a0 in this['_handlers'])this['_handlers'][_0x5b28a0]['maxRetries']=-0x15b*-0x1+0x1*-0xbcf+0x1be*0x6;}['destroyReq'+'uests'](){this['_requests']={};}['destroy'](){this['_handlers']={},this['_requests']={},this['_cache']={};}}class GC{['_validate'](_0x2aa087){if(!_0x2aa087['header'])throw new Error('pc.I18n#ad'+'dData:\x20Mis'+'sing\x20\x22head'+'er\x22\x20field');if(!_0x2aa087['header']['version'])throw new Error('pc.I18n#ad'+'dData:\x20Mis'+'sing\x20\x22head'+'er.version'+'\x22\x20field');if(_0x2aa087['header']['version']!==0x1117+0xa24+0x55*-0x52)throw new Error('pc.I18n#ad'+'dData:\x20Inv'+'alid\x20\x22head'+'er.version'+'\x22\x20field');if(_0x2aa087['data']){if(!Array['isArray'](_0x2aa087['data']))throw new Error('pc.I18n#ad'+'dData:\x20\x22da'+'ta\x22\x20field\x20'+'must\x20be\x20an'+'\x20array');}else throw new Error('pc.I18n#ad'+'dData:\x20Mis'+'sing\x20\x22data'+'\x22\x20field');for(let _0x332409=-0x24a9+-0x226*-0x1+0x24d*0xf,_0x3f66c2=_0x2aa087['data']['length'];_0x332409<_0x3f66c2;_0x332409++){const _0x11ef97=_0x2aa087['data'][_0x332409];if(!_0x11ef97['info'])throw new Error('pc.I18n#ad'+'dData:\x20mis'+'sing\x20\x22data'+'['+_0x332409+('].info\x22\x20fi'+'eld'));if(!_0x11ef97['info']['locale'])throw new Error('pc.I18n#ad'+'dData:\x20mis'+'sing\x20\x22data'+'['+_0x332409+('].info.loc'+'ale\x22\x20field'));if(typeof _0x11ef97['info']['locale']!='string')throw new Error('pc.I18n#ad'+'dData:\x20\x22da'+'ta['+_0x332409+('].info.loc'+'ale\x22\x20must\x20'+'be\x20a\x20strin'+'g'));if(!_0x11ef97['messages'])throw new Error('pc.I18n#ad'+'dData:\x20mis'+'sing\x20\x22data'+'['+_0x332409+('].messages'+'\x22\x20field'));}}['parse'](_0x581b66){return this['_validate'](_0x581b66),_0x581b66['data'];}}const Gh=class Gh extends me{constructor(_0x2a98ab){super(),this['locale']=Ph,this['_translati'+'ons']={},this['_available'+'Langs']={},this['_app']=_0x2a98ab,this['_assets']=[],this['_parser']=new GC();}set['assets'](_0x2335ed){const _0x4a9959={};for(let _0x4edaea=-0x1462+-0x1e1c+0x327e,_0x5a4b99=_0x2335ed['length'];_0x4edaea<_0x5a4b99;_0x4edaea++){const _0x16ec37=_0x2335ed[_0x4edaea]instanceof pe?_0x2335ed[_0x4edaea]['id']:_0x2335ed[_0x4edaea];_0x4a9959[_0x16ec37]=!(-0x8aa+0x5f0+0x2ba);}let _0x4731a0=this['_assets']['length'];for(;_0x4731a0--;){const _0x2460bf=this['_assets'][_0x4731a0];if(!_0x4a9959[_0x2460bf]){this['_app']['assets']['off']('add:'+_0x2460bf,this['_onAssetAd'+'d'],this);const _0x17fecf=this['_app']['assets']['get'](_0x2460bf);_0x17fecf&&this['_onAssetRe'+'move'](_0x17fecf),this['_assets']['splice'](_0x4731a0,-0x5*-0x5bc+0x23fc+-0x1b*0x265);}}for(const _0x5a62dc in _0x4a9959){const _0x1a22ff=parseInt(_0x5a62dc,-0x13c7+0xb8d*-0x1+0x1f5e);if(this['_assets']['indexOf'](_0x1a22ff)!==-(0x1f0f+0x26c7+-0x12f*0x3b))continue;this['_assets']['push'](_0x1a22ff);const _0x5998f6=this['_app']['assets']['get'](_0x1a22ff);_0x5998f6?this['_onAssetAd'+'d'](_0x5998f6):this['_app']['assets']['once']('add:'+_0x1a22ff,this['_onAssetAd'+'d'],this);}}get['assets'](){return this['_assets'];}set['locale'](_0x412770){if(this['_locale']===_0x412770)return;let _0x5bb267=Oi(_0x412770);if(_0x5bb267==='in'&&(_0x5bb267='id',_0x412770=LC(_0x412770,_0x5bb267),this['_locale']===_0x412770))return;const _0x4db45a=this['_locale'];this['_locale']=_0x412770,this['_lang']=_0x5bb267,this['_pluralFn']=Tf(this['_lang']),this['fire'](Gh['EVENT_CHAN'+'GE'],_0x412770,_0x4db45a);}get['locale'](){return this['_locale'];}static['findAvaila'+'bleLocale'](_0x3dbaa5,_0x2e9103){return Fv(_0x3dbaa5,_0x2e9103);}['findAvaila'+'bleLocale'](_0x479f45){if(this['_translati'+'ons'][_0x479f45])return _0x479f45;const _0x1cf50e=Oi(_0x479f45);return this['_findFallb'+'ackLocale'](_0x479f45,_0x1cf50e);}['getText'](_0x5f1d63,_0x97623f){let _0x41e496=_0x5f1d63,_0x4cbf56;_0x97623f||(_0x97623f=this['_locale'],_0x4cbf56=this['_lang']);let _0x18b063=this['_translati'+'ons'][_0x97623f];return _0x18b063||(_0x4cbf56||(_0x4cbf56=Oi(_0x97623f)),_0x97623f=this['_findFallb'+'ackLocale'](_0x97623f,_0x4cbf56),_0x18b063=this['_translati'+'ons'][_0x97623f]),_0x18b063&&_0x18b063['hasOwnProp'+'erty'](_0x5f1d63)&&(_0x41e496=_0x18b063[_0x5f1d63],Array['isArray'](_0x41e496)&&(_0x41e496=_0x41e496[0x58e*0x5+-0x1*-0x1f7b+-0x3b41]),_0x41e496==null&&(_0x41e496=_0x5f1d63)),_0x41e496;}['getPluralT'+'ext'](_0x243659,_0x98ea86,_0x24d421){let _0x41e898=_0x243659,_0x2c151e,_0x488ad5;_0x24d421?(_0x2c151e=Oi(_0x24d421),_0x488ad5=Tf(_0x2c151e)):(_0x24d421=this['_locale'],_0x2c151e=this['_lang'],_0x488ad5=this['_pluralFn']);let _0x17447f=this['_translati'+'ons'][_0x24d421];if(_0x17447f||(_0x24d421=this['_findFallb'+'ackLocale'](_0x24d421,_0x2c151e),_0x2c151e=Oi(_0x24d421),_0x488ad5=Tf(_0x2c151e),_0x17447f=this['_translati'+'ons'][_0x24d421]),_0x17447f&&_0x17447f[_0x243659]&&_0x488ad5){const _0x4d9530=_0x488ad5(_0x98ea86);_0x41e898=_0x17447f[_0x243659][_0x4d9530],_0x41e898==null&&(_0x41e898=_0x243659);}return _0x41e898;}['addData'](_0x1b5b27){let _0x13db7c;try{_0x13db7c=this['_parser']['parse'](_0x1b5b27);}catch(_0x962519){console['error'](_0x962519);return;}for(let _0x56ba95=0x111d+0x196*-0xf+-0x1*-0x6ad,_0x3ece20=_0x13db7c['length'];_0x56ba95<_0x3ece20;_0x56ba95++){const _0x493742=_0x13db7c[_0x56ba95],_0x44d806=_0x493742['info']['locale'],_0x50252d=_0x493742['messages'];if(!this['_translati'+'ons'][_0x44d806]){this['_translati'+'ons'][_0x44d806]={};const _0x3c7acf=Oi(_0x44d806);this['_available'+'Langs'][_0x3c7acf]||(this['_available'+'Langs'][_0x3c7acf]=_0x44d806);}Object['assign'](this['_translati'+'ons'][_0x44d806],_0x50252d),this['fire']('data:add',_0x44d806,_0x50252d);}}['removeData'](_0x4c5802){let _0x15bcd9;try{_0x15bcd9=this['_parser']['parse'](_0x4c5802);}catch(_0x503b7f){console['error'](_0x503b7f);return;}for(let _0x3b8180=0x1a11+-0x97*-0x25+-0x994*0x5,_0x266cf8=_0x15bcd9['length'];_0x3b8180<_0x266cf8;_0x3b8180++){const _0x3d0a3a=_0x15bcd9[_0x3b8180],_0x3e9859=_0x3d0a3a['info']['locale'],_0x52839f=this['_translati'+'ons'][_0x3e9859];if(!_0x52839f)continue;const _0x41e35c=_0x3d0a3a['messages'];for(const _0x1a6fe5 in _0x41e35c)delete _0x52839f[_0x1a6fe5];Object['keys'](_0x52839f)['length']===0x52*0x27+-0x242e+0x17b0&&(delete this['_translati'+'ons'][_0x3e9859],delete this['_available'+'Langs'][Oi(_0x3e9859)]),this['fire']('data:remov'+'e',_0x3e9859,_0x41e35c);}}['destroy'](){this['_translati'+'ons']=null,this['_available'+'Langs']=null,this['_assets']=null,this['_parser']=null,this['off']();}['_findFallb'+'ackLocale'](_0x5d94f5,_0x3fe14e){let _0xc25fbb=Mh[_0x5d94f5];return _0xc25fbb&&this['_translati'+'ons'][_0xc25fbb]||(_0xc25fbb=Mh[_0x3fe14e],_0xc25fbb&&this['_translati'+'ons'][_0xc25fbb])||(_0xc25fbb=this['_available'+'Langs'][_0x3fe14e],_0xc25fbb&&this['_translati'+'ons'][_0xc25fbb])?_0xc25fbb:Ph;}['_onAssetAd'+'d'](_0x11ffc8){_0x11ffc8['on']('load',this['_onAssetLo'+'ad'],this),_0x11ffc8['on']('change',this['_onAssetCh'+'ange'],this),_0x11ffc8['on']('remove',this['_onAssetRe'+'move'],this),_0x11ffc8['on']('unload',this['_onAssetUn'+'load'],this),_0x11ffc8['resource']&&this['_onAssetLo'+'ad'](_0x11ffc8);}['_onAssetLo'+'ad'](_0x49aab4){this['addData'](_0x49aab4['resource']);}['_onAssetCh'+'ange'](_0x4f0ab8){_0x4f0ab8['resource']&&this['addData'](_0x4f0ab8['resource']);}['_onAssetRe'+'move'](_0x5120c1){_0x5120c1['off']('load',this['_onAssetLo'+'ad'],this),_0x5120c1['off']('change',this['_onAssetCh'+'ange'],this),_0x5120c1['off']('remove',this['_onAssetRe'+'move'],this),_0x5120c1['off']('unload',this['_onAssetUn'+'load'],this),_0x5120c1['resource']&&this['removeData'](_0x5120c1['resource']),this['_app']['assets']['once']('add:'+_0x5120c1['id'],this['_onAssetAd'+'d'],this);}['_onAssetUn'+'load'](_0x54e38f){_0x54e38f['resource']&&this['removeData'](_0x54e38f['resource']);}};h(Gh,'EVENT_CHAN'+'GE','change');let wa=Gh;class HC extends me{constructor(_0x40aa6b){super(),h(this,'_scripts',{}),h(this,'_list',[]),h(this,'_scriptSch'+'emas',new Map()),this['app']=_0x40aa6b;}['destroy'](){this['app']=null,this['off']();}['addSchema'](_0x5181d3,_0x551e2a){_0x551e2a&&this['_scriptSch'+'emas']['set'](_0x5181d3,_0x551e2a);}['getSchema'](_0x517d74){return this['_scriptSch'+'emas']['get'](_0x517d74);}['add'](_0x44397a){const _0x348d0e=_0x44397a['__name'];return this['_scripts']['hasOwnProp'+'erty'](_0x348d0e)?(setTimeout(()=>{if(_0x44397a['prototype']['swap']){const _0x43759b=this['_scripts'][_0x348d0e],_0x45655e=this['_list']['indexOf'](_0x43759b);this['_list'][_0x45655e]=_0x44397a,this['_scripts'][_0x348d0e]=_0x44397a,this['fire']('swap',_0x348d0e,_0x44397a),this['fire']('swap:'+_0x348d0e,_0x44397a);}else console['warn']('script\x20reg'+'istry\x20alre'+'ady\x20has\x20\x27'+_0x348d0e+('\x27\x20script,\x20'+'define\x20\x27sw'+'ap\x27\x20method'+'\x20for\x20new\x20s'+'cript\x20type'+'\x20to\x20enable'+'\x20code\x20hot\x20'+'swapping'));}),!(-0x2*-0x634+-0xa13+0x2*-0x12a)):(this['_scripts'][_0x348d0e]=_0x44397a,this['_list']['push'](_0x44397a),this['fire']('add',_0x348d0e,_0x44397a),this['fire']('add:'+_0x348d0e,_0x44397a),setTimeout(()=>{if(!this['_scripts']['hasOwnProp'+'erty'](_0x348d0e)||!this['app']||!this['app']['systems']||!this['app']['systems']['script'])return;const _0x33a42b=this['app']['systems']['script']['_component'+'s'];let _0x165380;const _0x26ecff=[],_0x78d80a=[];for(_0x33a42b['loopIndex']=-0x1*0xc9d+-0x5*-0x17e+-0x1*-0x527;_0x33a42b['loopIndex']<_0x33a42b['length'];_0x33a42b['loopIndex']++){const _0x748f4d=_0x33a42b['items'][_0x33a42b['loopIndex']];if(_0x748f4d['_scriptsIn'+'dex'][_0x348d0e]&&_0x748f4d['_scriptsIn'+'dex'][_0x348d0e]['awaiting']){_0x748f4d['_scriptsDa'+'ta']&&_0x748f4d['_scriptsDa'+'ta'][_0x348d0e]&&(_0x165380=_0x748f4d['_scriptsDa'+'ta'][_0x348d0e]['attributes']);const _0x43ce8f=_0x748f4d['create'](_0x348d0e,{'preloading':!(-0xda3*-0x1+0x19*0xa5+-0xe0*0x22),'ind':_0x748f4d['_scriptsIn'+'dex'][_0x348d0e]['ind'],'attributes':_0x165380});_0x43ce8f&&_0x26ecff['push'](_0x43ce8f);for(const _0x190bb4 of _0x748f4d['scripts'])_0x748f4d['initialize'+'Attributes'](_0x190bb4);}}for(let _0x40f466=0x311*0x2+-0x41*-0x40+-0x1662;_0x40f466<_0x26ecff['length'];_0x40f466++)_0x26ecff[_0x40f466]['enabled']&&(_0x26ecff[_0x40f466]['_initializ'+'ed']=!(-0xf75+-0x67*-0x17+-0x2*-0x31a),_0x78d80a['push'](_0x26ecff[_0x40f466]),_0x26ecff[_0x40f466]['initialize']&&_0x26ecff[_0x40f466]['initialize']());for(let _0x5a72e8=-0x183b+0x197b+-0x140;_0x5a72e8<_0x78d80a['length'];_0x5a72e8++)!_0x78d80a[_0x5a72e8]['enabled']||_0x78d80a[_0x5a72e8]['_postIniti'+'alized']||(_0x78d80a[_0x5a72e8]['_postIniti'+'alized']=!(-0x2482+-0x1*0x13c1+0x1*0x3843),_0x78d80a[_0x5a72e8]['postInitia'+'lize']&&_0x78d80a[_0x5a72e8]['postInitia'+'lize']());}),!(-0x1d*-0x5b+0x1e71+-0x28c0));}['remove'](_0x50d311){let _0x4a29fe=_0x50d311,_0x3efa44=_0x50d311;if(typeof _0x3efa44!='string'?_0x3efa44=_0x4a29fe['__name']:_0x4a29fe=this['get'](_0x3efa44),this['get'](_0x3efa44)!==_0x4a29fe)return!(-0x1d*-0xf7+0x2*-0xb93+-0x4*0x135);delete this['_scripts'][_0x3efa44];const _0x4f4ef9=this['_list']['indexOf'](_0x4a29fe);return this['_list']['splice'](_0x4f4ef9,-0x8*0x206+-0x218c+0x31bd),this['fire']('remove',_0x3efa44,_0x4a29fe),this['fire']('remove:'+_0x3efa44,_0x4a29fe),!(-0x3dc+0x17c9+-0x1*0x13ed);}['get'](_0xfb0430){return this['_scripts'][_0xfb0430]||null;}['has'](_0x523aef){if(typeof _0x523aef=='string')return this['_scripts']['hasOwnProp'+'erty'](_0x523aef);if(!_0x523aef)return!(-0x2b*0xb+0x1d*0x2e+0xa*-0x56);const _0x10681e=_0x523aef['__name'];return this['_scripts'][_0x10681e]===_0x523aef;}['list'](){return this['_list'];}}const WC=(_0x494458,_0x5747dd)=>_0x494458['constructo'+'r']['order']-_0x5747dd['constructo'+'r']['order'],$C=_0x14ebc1=>_0x14ebc1['sort'](WC),po=[],Nv=[],XC=()=>Nv['pop']()??[],Ag=_0x752d66=>{_0x752d66['length']=0x1161+-0x16ce+0x1cf*0x3,Nv['push'](_0x752d66);},Hh=class Hh extends Ie{constructor(_0xac598e,_0x3acbc4=Ms()){super(_0xac598e),h(this,'anim'),h(this,'animation'),h(this,'audioliste'+'ner'),h(this,'button'),h(this,'camera'),h(this,'collision'),h(this,'element'),h(this,'gsplat'),h(this,'layoutchil'+'d'),h(this,'layoutgrou'+'p'),h(this,'light'),h(this,'model'),h(this,'particlesy'+'stem'),h(this,'render'),h(this,'rigidbody'),h(this,'screen'),h(this,'script'),h(this,'scrollbar'),h(this,'scrollview'),h(this,'sound'),h(this,'sprite'),h(this,'c',{}),h(this,'_app'),h(this,'_destroyin'+'g',!(0x3f6*-0x1+-0x5*0x50b+0x12*0x19f)),h(this,'_guid',null),h(this,'_template',!(-0x11da*0x1+-0x1ccd+-0x8*-0x5d5)),(w['assert'](_0x3acbc4,'Could\x20not\x20'+'find\x20curre'+'nt\x20applica'+'tion'),this['_app']=_0x3acbc4);}['addCompone'+'nt'](_0x554537,_0xf71268){const _0x38a447=this['_app']['systems'][_0x554537];return _0x38a447?this['c'][_0x554537]?(w['warn']('addCompone'+'nt:\x20Entity'+'\x20already\x20h'+'as\x20\x27'+_0x554537+('\x27\x20componen'+'t')),null):_0x38a447['addCompone'+'nt'](this,_0xf71268):(w['error']('addCompone'+'nt:\x20System'+'\x20\x27'+_0x554537+('\x27\x20doesn\x27t\x20'+'exist')),null);}['removeComp'+'onent'](_0x441c3b){const _0xf73bf7=this['_app']['systems'][_0x441c3b];if(!_0xf73bf7){w['error']('removeComp'+'onent:\x20Sys'+'tem\x20\x27'+_0x441c3b+('\x27\x20doesn\x27t\x20'+'exist'));return;}if(!this['c'][_0x441c3b]){w['warn']('removeComp'+'onent:\x20Ent'+'ity\x20doesn\x27'+'t\x20have\x20\x27'+_0x441c3b+('\x27\x20componen'+'t'));return;}_0xf73bf7['removeComp'+'onent'](this);}['findCompon'+'ent'](_0x3e11a7){const _0x28e361=this['findOne'](_0x2829b0=>{var _0x15c33c;return(_0x15c33c=_0x2829b0['c'])==null?void(-0x4fc*-0x4+0xc*0x11+-0x14bc):_0x15c33c[_0x3e11a7];});return _0x28e361&&_0x28e361['c'][_0x3e11a7];}['findCompon'+'ents'](_0x2417d2){return this['find'](_0x190e38=>{var _0x313c6e;return(_0x313c6e=_0x190e38['c'])==null?void(0x82c*-0x4+0x2526+-0x476):_0x313c6e[_0x2417d2];})['map'](_0x48fdf2=>_0x48fdf2['c'][_0x2417d2]);}['findScript'](_0x11a69a){const _0x46b242=this['findOne'](_0x29845e=>{var _0x2c4ee9,_0x3553a7;return(_0x3553a7=(_0x2c4ee9=_0x29845e['c'])==null?void(-0x1*0x1ebe+-0x608+0x24c6):_0x2c4ee9['script'])==null?void(0xdb*-0x14+0x1734+0xc3*-0x8):_0x3553a7['has'](_0x11a69a);});return _0x46b242==null?void(0x2115+0x3af*0x1+-0x24c4):_0x46b242['c']['script']['get'](_0x11a69a);}['findScript'+'s'](_0x5b5597){return this['find'](_0xd634d2=>{var _0xe7adfe,_0x2b8fba;return(_0x2b8fba=(_0xe7adfe=_0xd634d2['c'])==null?void(-0x1c88+0x45b*-0x5+0x35*0xf3):_0xe7adfe['script'])==null?void(0xd36*0x1+0x493*-0x5+0x9a9):_0x2b8fba['has'](_0x5b5597);})['map'](_0x586419=>_0x586419['c']['script']['get'](_0x5b5597));}['getGuid'](){return this['_guid']||this['setGuid'](Q0['create']()),this['_guid'];}['setGuid'](_0x5a7a3c){const _0x3ec661=this['_app']['_entityInd'+'ex'];this['_guid']&&delete _0x3ec661[this['_guid']],this['_guid']=_0x5a7a3c,_0x3ec661[this['_guid']]=this;}['_notifyHie'+'rarchyStat'+'eChanged'](_0x4a8bbb,_0x18b4c7){let _0x32cfab=!(-0x1*0x26cb+-0x5cd+0x1*0x2c99);_0x4a8bbb===this&&po['length']===-0x1306*0x1+-0x1f1c+-0x19e*-0x1f&&(_0x32cfab=!(-0x5f7*0x5+-0x2647+-0x17*-0x2f6)),_0x4a8bbb['_beingEnab'+'led']=!(0x1178+0x4f5*-0x3+0x85*-0x5),_0x4a8bbb['_onHierarc'+'hyStateCha'+'nged'](_0x18b4c7),_0x4a8bbb['_onHierarc'+'hyStatePos'+'tChanged']&&po['push'](_0x4a8bbb);const _0x45fc2d=_0x4a8bbb['_children'];for(let _0x4ef1e2=0x79e+0x1b31+-0x22cf,_0x272fe9=_0x45fc2d['length'];_0x4ef1e2<_0x272fe9;_0x4ef1e2++)_0x45fc2d[_0x4ef1e2]['_enabled']&&this['_notifyHie'+'rarchyStat'+'eChanged'](_0x45fc2d[_0x4ef1e2],_0x18b4c7);if(_0x4a8bbb['_beingEnab'+'led']=!(-0x1ed*0x4+0x1f52+0xd*-0x1d1),_0x32cfab){for(let _0x3e55c0=-0x1*-0x1aae+0x10d*-0x1d+-0x1*-0x3cb;_0x3e55c0<po['length'];_0x3e55c0++)po[_0x3e55c0]['_onHierarc'+'hyStatePos'+'tChanged']();po['length']=-0x5*-0x57d+-0x1195+-0x9dc;}}['_onHierarc'+'hyStateCha'+'nged'](_0x41fae7){super['_onHierarc'+'hyStateCha'+'nged'](_0x41fae7);const _0x1b5ff0=this['_getSorted'+'Components']();for(let _0x5bb7bc=0x1*0x52d+0xc*0x298+-0x244d;_0x5bb7bc<_0x1b5ff0['length'];_0x5bb7bc++){const _0x4a937b=_0x1b5ff0[_0x5bb7bc];_0x4a937b['enabled']&&(_0x41fae7?_0x4a937b['onEnable']():_0x4a937b['onDisable']());}Ag(_0x1b5ff0);}['_onHierarc'+'hyStatePos'+'tChanged'](){const _0x3bec30=this['_getSorted'+'Components']();for(let _0x5cc77e=0x1*0x2353+0x17b*0x7+-0x2*0x16d8;_0x5cc77e<_0x3bec30['length'];_0x5cc77e++)_0x3bec30[_0x5cc77e]['onPostStat'+'eChange']();Ag(_0x3bec30);}['findByGuid'](_0x53d2dc){if(this['_guid']===_0x53d2dc)return this;const _0xbdfa94=this['_app']['_entityInd'+'ex'][_0x53d2dc];return _0xbdfa94&&(_0xbdfa94===this||_0xbdfa94['isDescenda'+'ntOf'](this))?_0xbdfa94:null;}['destroy'](){this['_destroyin'+'g']=!(-0x15e2+0x54f+0x1093);for(const _0x35d249 in this['c'])this['c'][_0x35d249]['enabled']=!(0x1*0x60a+0xc84+-0x128d);for(const _0x408c36 in this['c'])this['c'][_0x408c36]['system']['removeComp'+'onent'](this);super['destroy'](),this['_guid']&&delete this['_app']['_entityInd'+'ex'][this['_guid']],this['_destroyin'+'g']=!(0x5ef+-0xc44+0x656);}['clone'](){const _0xd2b001={},_0x306264=this['_cloneRecu'+'rsively'](_0xd2b001);return _0xd2b001[this['getGuid']()]=_0x306264,kv(this,this,_0x306264,_0xd2b001),_0x306264;}['_getSorted'+'Components'](){const _0x3de906=this['c'],_0x353a13=XC();let _0x4333c5=0x2495+-0x1063*-0x1+0x54c*-0xa;for(const _0x319c63 in _0x3de906)if(_0x3de906['hasOwnProp'+'erty'](_0x319c63)){const _0x1e8003=_0x3de906[_0x319c63];_0x4333c5|=_0x1e8003['constructo'+'r']['order']!==-0x26b3*-0x1+-0x1d*0x127+0x152*-0x4,_0x353a13['push'](_0x1e8003);}return _0x4333c5&&_0x353a13['length']>0x25e*0x7+0xc33+-0x1cc4&&$C(_0x353a13),_0x353a13;}['_cloneRecu'+'rsively'](_0x10d5de){const _0x430229=new this['constructo'+'r'](void(0x401*0x3+-0x316+-0x8ed),this['_app']);super['_cloneInte'+'rnal'](_0x430229);for(const _0x256a1c in this['c'])this['c'][_0x256a1c]['system']['cloneCompo'+'nent'](this,_0x430229);for(let _0x2e43e0=0xac2*0x2+0x151f+0x5*-0x887;_0x2e43e0<this['_children']['length'];_0x2e43e0++){const _0x5b2c2f=this['_children'][_0x2e43e0];if(_0x5b2c2f instanceof Hh){const _0x6b1fd8=_0x5b2c2f['_cloneRecu'+'rsively'](_0x10d5de);_0x430229['addChild'](_0x6b1fd8),_0x10d5de[_0x5b2c2f['getGuid']()]=_0x6b1fd8;}}return _0x430229;}};h(Hh,'EVENT_DEST'+'ROY','destroy');let lt=Hh;function kv(_0x3c41f5,_0x287f61,_0x372565,_0x5407d8){if(_0x287f61 instanceof lt){const _0x44dee9=_0x287f61['c'];for(const _0x35fc5e in _0x44dee9){const _0x4749e4=_0x44dee9[_0x35fc5e],_0x19aa6b=_0x4749e4['system']['getPropert'+'iesOfType']('entity');for(let _0x393b90=-0xa4f+-0x1*-0x2612+-0x1bc3,_0x1bf800=_0x19aa6b['length'];_0x393b90<_0x1bf800;_0x393b90++){const _0x8e170f=_0x19aa6b[_0x393b90]['name'],_0x6f153e=_0x4749e4[_0x8e170f];if(!!_0x3c41f5['findByGuid'](_0x6f153e)){const _0x18b329=_0x5407d8[_0x6f153e]['getGuid']();_0x18b329?_0x372565['c'][_0x35fc5e][_0x8e170f]=_0x18b329:w['warn']('Could\x20not\x20'+'find\x20corre'+'sponding\x20e'+'ntity\x20id\x20w'+'hen\x20resolv'+'ing\x20duplic'+'ated\x20entit'+'y\x20referenc'+'es');}}}_0x44dee9['script']&&_0x372565['script']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x44dee9['script'],_0x5407d8),_0x44dee9['render']&&_0x372565['render']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x44dee9['render'],_0x5407d8),_0x44dee9['button']&&_0x372565['button']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x44dee9['button'],_0x5407d8),_0x44dee9['scrollview']&&_0x372565['scrollview']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x44dee9['scrollview'],_0x5407d8),_0x44dee9['scrollbar']&&_0x372565['scrollbar']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x44dee9['scrollbar'],_0x5407d8),_0x44dee9['anim']&&_0x372565['anim']['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x44dee9['anim'],_0x5407d8);const _0xb14c21=_0x287f61['children']['filter'](_0x14e07e=>_0x14e07e instanceof lt),_0x581257=_0x372565['children']['filter'](_0x329afb=>_0x329afb instanceof lt);for(let _0x1061e9=0x1356+-0xda5+-0x5b1*0x1,_0x3b4d4d=_0xb14c21['length'];_0x1061e9<_0x3b4d4d;_0x1061e9++)kv(_0x3c41f5,_0xb14c21[_0x1061e9],_0x581257[_0x1061e9],_0x5407d8);}}class Cg{constructor(_0x2eb90c,_0x481873){h(this,'name'),h(this,'url'),h(this,'data',null),h(this,'_loading',!(0x1b5e+0x15e*0x5+-0x2233)),h(this,'_onLoadedC'+'allbacks',[]),(this['name']=_0x2eb90c,this['url']=_0x481873);}get['loaded'](){return!!this['data'];}get['loading'](){return this['_loading'];}}class qC{constructor(_0x202b55){h(this,'_app'),h(this,'_list',[]),h(this,'_index',{}),h(this,'_urlIndex',{}),this['_app']=_0x202b55;}['destroy'](){this['_app']=null;}['list'](){return this['_list'];}['add'](_0xb742f0,_0x212653){if(this['_index']['hasOwnProp'+'erty'](_0xb742f0))return w['warn']('pc.SceneRe'+'gistry:\x20tr'+'ying\x20to\x20ad'+'d\x20more\x20tha'+'n\x20one\x20scen'+'e\x20called:\x20'+_0xb742f0),!(-0x1167*-0x1+0x1*0x1a05+-0x5*0x8af);const _0x292574=new Cg(_0xb742f0,_0x212653),_0x480fe6=this['_list']['push'](_0x292574);return this['_index'][_0x292574['name']]=_0x480fe6-(-0x56*-0x51+0x2691*0x1+0x2*-0x20e3),this['_urlIndex'][_0x292574['url']]=_0x480fe6-(0x1a03*0x1+-0x20f8*0x1+0x12*0x63),!(0x674+0x16f*0x4+-0xf0*0xd);}['find'](_0x346446){return this['_index']['hasOwnProp'+'erty'](_0x346446)?this['_list'][this['_index'][_0x346446]]:null;}['findByUrl'](_0x5e9e35){return this['_urlIndex']['hasOwnProp'+'erty'](_0x5e9e35)?this['_list'][this['_urlIndex'][_0x5e9e35]]:null;}['remove'](_0x281ff3){if(this['_index']['hasOwnProp'+'erty'](_0x281ff3)){const _0x2effd1=this['_index'][_0x281ff3];let _0x43f7af=this['_list'][_0x2effd1];delete this['_urlIndex'][_0x43f7af['url']],delete this['_index'][_0x281ff3],this['_list']['splice'](_0x2effd1,0x187d+-0x112b+-0x1*0x751);for(let _0x7e4096=-0x1*-0xc61+-0xfe*-0x15+-0x2137;_0x7e4096<this['_list']['length'];_0x7e4096++)_0x43f7af=this['_list'][_0x7e4096],this['_index'][_0x43f7af['name']]=_0x7e4096,this['_urlIndex'][_0x43f7af['url']]=_0x7e4096;}}['_loadScene'+'Data'](_0x4076c5,_0x2dae46,_0x564e91){const _0x379975=this['_app'];let _0x783916=_0x4076c5;if(typeof _0x4076c5=='string'&&(_0x4076c5=this['findByUrl'](_0x783916)||this['find'](_0x783916)||new Cg('Untitled',_0x783916)),_0x783916=_0x4076c5['url'],!_0x783916){_0x564e91('Cannot\x20fin'+'d\x20scene\x20to'+'\x20load');return;}if(_0x4076c5['loaded']){_0x564e91(null,_0x4076c5);return;}_0x379975['assets']&&_0x379975['assets']['prefix']&&!jn['test'](_0x783916)&&(_0x783916=xe['join'](_0x379975['assets']['prefix'],_0x783916)),_0x4076c5['_onLoadedC'+'allbacks']['push'](_0x564e91),_0x4076c5['_loading']||_0x379975['loader']['getHandler']('hierarchy')['load'](_0x783916,(_0x5fb71c,_0x3cd5b4)=>{_0x4076c5['data']=_0x3cd5b4,_0x4076c5['_loading']=!(-0x1a0c+-0x31+0x1a3e);for(let _0x2f9581=-0x1b9b+0x1559+0x642;_0x2f9581<_0x4076c5['_onLoadedC'+'allbacks']['length'];_0x2f9581++)_0x4076c5['_onLoadedC'+'allbacks'][_0x2f9581](_0x5fb71c,_0x4076c5);_0x2dae46||(_0x4076c5['data']=null),_0x4076c5['_onLoadedC'+'allbacks']['length']=0x1417+0xb*0x315+0x2*-0x1aff;}),_0x4076c5['_loading']=!(0xb*-0x243+0x43*0x5f+-0x1*-0x4);}['loadSceneD'+'ata'](_0x4cfc81,_0x81b991){this['_loadScene'+'Data'](_0x4cfc81,!(-0x1*0x53a+-0x1591+0x169*0x13),_0x81b991);}['unloadScen'+'eData'](_0x5b65a){typeof _0x5b65a=='string'&&(_0x5b65a=this['findByUrl'](_0x5b65a)),_0x5b65a&&(_0x5b65a['data']=null);}['_loadScene'+'Hierarchy'](_0x63f26b,_0x2b2844,_0x5f1074){this['_loadScene'+'Data'](_0x63f26b,!(-0x2*-0xa34+-0x4*0x19f+-0x7*0x1fd),(_0x2ea1ca,_0x27e422)=>{if(_0x2ea1ca){_0x5f1074&&_0x5f1074(_0x2ea1ca);return;}_0x2b2844&&_0x2b2844(_0x27e422);const _0x17371e=this['_app'],_0x2328cb=()=>{const _0xf9cbc9=_0x17371e['loader']['getHandler']('hierarchy');_0x17371e['systems']['script']['preloading']=!(-0x1374+-0x19b3+0x2d27);const _0xc49c61=_0xf9cbc9['open'](_0x27e422['url'],_0x27e422['data']);_0x17371e['systems']['script']['preloading']=!(0x1a23+-0x16*-0x9b+-0x2774),_0x17371e['loader']['clearCache'](_0x27e422['url'],'hierarchy'),_0x17371e['root']['addChild'](_0xc49c61),_0x17371e['systems']['fire']('initialize',_0xc49c61),_0x17371e['systems']['fire']('postInitia'+'lize',_0xc49c61),_0x17371e['systems']['fire']('postPostIn'+'itialize',_0xc49c61),_0x5f1074&&_0x5f1074(null,_0xc49c61);};_0x17371e['_preloadSc'+'ripts'](_0x27e422['data'],_0x2328cb);});}['loadSceneH'+'ierarchy'](_0x63b912,_0x1451f6){this['_loadScene'+'Hierarchy'](_0x63b912,null,_0x1451f6);}['loadSceneS'+'ettings'](_0x45b48b,_0x13f471){this['_loadScene'+'Data'](_0x45b48b,!(0x101c+0x18fc+0x43*-0x9d),(_0x2db440,_0x5804d1)=>{_0x2db440?_0x13f471&&_0x13f471(_0x2db440):(this['_app']['applyScene'+'Settings'](_0x5804d1['data']['settings']),_0x13f471&&_0x13f471(null));});}['changeScen'+'e'](_0x558dc8,_0x503a02){const _0x38954c=this['_app'],_0x5eb626=_0x45dc6c=>{const {children:_0xd8d15f}=_0x38954c['root'];for(;_0xd8d15f['length'];)_0xd8d15f[-0x1c6a+0x24e4+-0x87a]['destroy']();_0x38954c['applyScene'+'Settings'](_0x45dc6c['data']['settings']);};this['_loadScene'+'Hierarchy'](_0x558dc8,_0x5eb626,_0x503a02);}['loadScene'](_0x53c875,_0x3b111c){const _0x5f28ea=this['_app'],_0xd6126e=_0x5f28ea['loader']['getHandler']('scene');_0x5f28ea['assets']&&_0x5f28ea['assets']['prefix']&&!jn['test'](_0x53c875)&&(_0x53c875=xe['join'](_0x5f28ea['assets']['prefix'],_0x53c875)),_0xd6126e['load'](_0x53c875,(_0x3d78f7,_0x5ec79c)=>{if(_0x3d78f7)_0x3b111c&&_0x3b111c(_0x3d78f7);else{const _0x26cf08=()=>{_0x5f28ea['systems']['script']['preloading']=!(0x2637+-0x1668+-0xfcf);const _0x5d1c5b=_0xd6126e['open'](_0x53c875,_0x5ec79c),_0x542608=this['findByUrl'](_0x53c875);_0x542608&&!_0x542608['loaded']&&(_0x542608['data']=_0x5ec79c),_0x5f28ea['systems']['script']['preloading']=!(-0x151e+-0xf63+0x1*0x2482),_0x5f28ea['loader']['clearCache'](_0x53c875,'scene'),_0x5f28ea['loader']['patch']({'resource':_0x5d1c5b,'type':'scene'},_0x5f28ea['assets']),_0x5f28ea['root']['addChild'](_0x5d1c5b['root']),_0x5f28ea['systems']['rigidbody']&&typeof Ammo<'u'&&_0x5f28ea['systems']['rigidbody']['gravity']['set'](_0x5d1c5b['_gravity']['x'],_0x5d1c5b['_gravity']['y'],_0x5d1c5b['_gravity']['z']),_0x3b111c&&_0x3b111c(null,_0x5d1c5b);};_0x5f28ea['_preloadSc'+'ripts'](_0x5ec79c,_0x26cf08);}});}}class jC{constructor(_0x409f73){this['frame']={'fps':0x0,'ms':0x0,'dt':0x0,'updateStart':0x0,'updateTime':0x0,'renderStart':0x0,'renderTime':0x0,'physicsStart':0x0,'physicsTime':0x0,'cullTime':0x0,'sortTime':0x0,'skinTime':0x0,'morphTime':0x0,'instancingTime':0x0,'triangles':0x0,'otherPrimitives':0x0,'shaders':0x0,'materials':0x0,'cameras':0x0,'shadowMapUpdates':0x0,'shadowMapTime':0x0,'depthMapTime':0x0,'forwardTime':0x0,'lightClustersTime':0x0,'lightClusters':0x0,'_timeToCountFrames':0x0,'_fpsAccum':0x0},this['drawCalls']={'forward':0x0,'depth':0x0,'shadow':0x0,'immediate':0x0,'misc':0x0,'total':0x0,'skinned':0x0,'instanced':0x0,'removedByInstancing':0x0},this['misc']={'renderTargetCreationTime':0x0},this['particles']={'updatesPerFrame':0x0,'_updatesPerFrame':0x0,'frameTime':0x0,'_frameTime':0x0},this['shaders']=_0x409f73['_shaderSta'+'ts'],this['vram']=_0x409f73['_vram'],Object['defineProp'+'erty'](this['vram'],'totalUsed',{'get':function(){return this['tex']+this['vb']+this['ib'];}}),Object['defineProp'+'erty'](this['vram'],'geom',{'get':function(){return this['vb']+this['ib'];}});}get['scene'](){return Ms()['scene']['_stats'];}get['lightmappe'+'r'](){var _0xea5c41;return(_0xea5c41=Ms()['lightmappe'+'r'])==null?void(-0x223f+-0x2266+-0x1*-0x44a5):_0xea5c41['stats'];}get['batcher'](){const _0x37f260=Ms()['_batcher'];return _0x37f260?_0x37f260['_stats']:null;}}const YC='\x0auniform\x20f'+'loat\x20alpha'+'_ref;\x0a\x0avoi'+'d\x20alphaTes'+'t(float\x20a)'+'\x20{\x0a\x20\x20\x20\x20if\x20'+'(a\x20<\x20alpha'+'_ref)\x20disc'+'ard;\x0a}\x0a',KC='\x0a\x0a#ifdef\x20L'+'IT_AMBIENT'+'_SOURCE\x20=='+'\x20AMBIENTSH'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20vec3\x20am'+'bientSH[9]'+';\x0a#endif\x0a\x0a'+'#if\x20LIT_AM'+'BIENT_SOUR'+'CE\x20==\x20ENVA'+'LATLAS\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22envAtlasP'+'S\x22\x0a\x0a\x20\x20\x20\x20#i'+'fndef\x20ENV_'+'ATLAS\x0a\x20\x20\x20\x20'+'#define\x20EN'+'V_ATLAS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20textur'+'e_envAtlas'+';\x0a\x20\x20\x20\x20#end'+'if\x0a#endif\x0a'+'\x0avoid\x20addA'+'mbient(vec'+'3\x20worldNor'+'mal)\x20{\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_AMBIENT_'+'SOURCE\x20==\x20'+'AMBIENTSH\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20n\x20=\x20cu'+'beMapRotat'+'e(worldNor'+'mal);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20c'+'olor\x20=\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'mbientSH[0'+']\x20+\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ambi'+'entSH[1]\x20*'+'\x20n.x\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'mbientSH[2'+']\x20*\x20n.y\x20+\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ambientS'+'H[3]\x20*\x20n.z'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20ambie'+'ntSH[4]\x20*\x20'+'n.x\x20*\x20n.z\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ambien'+'tSH[5]\x20*\x20n'+'.z\x20*\x20n.y\x20+'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20ambient'+'SH[6]\x20*\x20n.'+'y\x20*\x20n.x\x20+\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ambientS'+'H[7]\x20*\x20(3.'+'0\x20*\x20n.z\x20*\x20'+'n.z\x20-\x201.0)'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20ambie'+'ntSH[8]\x20*\x20'+'(n.x\x20*\x20n.x'+'\x20-\x20n.y\x20*\x20n'+'.y);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dDiffu'+'seLight\x20+='+'\x20processEn'+'vironment('+'max(color,'+'\x20vec3(0.0)'+'));\x0a\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20LIT_A'+'MBIENT_SOU'+'RCE\x20==\x20ENV'+'ALATLAS\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3\x20dir\x20=\x20no'+'rmalize(cu'+'beMapRotat'+'e(worldNor'+'mal)\x20*\x20vec'+'3(-1.0,\x201.'+'0,\x201.0));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20uv\x20=\x20ma'+'pUv(toSphe'+'ricalUv(di'+'r),\x20vec4(1'+('28.0,\x20256.'+'0\x20+\x20128.0,'+'\x2064.0,\x2032.'+'0)\x20/\x20atlas'+'Size);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'\x20raw\x20=\x20tex'+'ture2D(tex'+'ture_envAt'+'las,\x20uv);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20linear\x20'+'=\x20{ambient'+'Decode}(ra'+'w);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dDiffuse'+'Light\x20+=\x20p'+'rocessEnvi'+'ronment(li'+'near);\x0a\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#if\x20LI'+'T_AMBIENT_'+'SOURCE\x20==\x20'+'CONSTANT\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20dD'+'iffuseLigh'+'t\x20+=\x20light'+'_globalAmb'+'ient;\x0a\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'),ZC='\x0a\x0a#ifdef\x20L'+'IT_GGX_SPE'+'CULAR\x0a\x20\x20\x20\x20'+'uniform\x20fl'+'oat\x20materi'+'al_anisotr'+'opyIntensi'+'ty;\x0a\x20\x20\x20\x20un'+'iform\x20vec2'+'\x20material_'+'anisotropy'+'Rotation;\x0a'+'#endif\x0a\x0avo'+'id\x20getAnis'+'otropy()\x20{'+'\x0a\x20\x20\x20\x20dAnis'+'otropy\x20=\x200'+'.0;\x0a\x20\x20\x20\x20dA'+'nisotropyR'+'otation\x20=\x20'+'vec2(1.0,\x20'+'0.0);\x0a\x0a#if'+'def\x20LIT_GG'+'X_SPECULAR'+'\x0a\x20\x20\x20\x20dAnis'+'otropy\x20=\x20m'+'aterial_an'+'isotropyIn'+'tensity;\x0a\x20'+'\x20\x20\x20dAnisot'+'ropyRotati'+'on\x20=\x20mater'+'ial_anisot'+'ropyRotati'+'on;\x0a#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_ANI'+'SOTROPY_TE'+'XTURE\x0a\x20\x20\x20\x20'+'vec3\x20aniso'+'tropyTex\x20='+'\x20texture2D'+'Bias({STD_'+'ANISOTROPY'+'_TEXTURE_N'+'AME},\x20{STD'+'_ANISOTROP'+'Y_TEXTURE_'+'UV},\x20textu'+'reBias).rg'+'b;\x0a\x20\x20\x20\x20dAn'+'isotropy\x20*'+'=\x20anisotro'+'pyTex.b;\x0a\x0a'+'\x20\x20\x20\x20vec2\x20a'+'nisotropyR'+'otationFro'+'mTex\x20=\x20ani'+'sotropyTex'+'.rg\x20*\x202.0\x20'+'-\x20vec2(1.0'+');\x0a\x20\x20\x20\x20mat'+'2\x20rotation'+'Matrix\x20=\x20m'+'at2(dAniso'+'tropyRotat'+'ion.x,\x20dAn'+'isotropyRo'+'tation.y,\x20'+'-dAnisotro'+'pyRotation'+'.y,\x20dAniso'+'tropyRotat'+'ion.x);\x0a\x20\x20'+'\x20\x20dAnisotr'+'opyRotatio'+'n\x20=\x20rotati'+'onMatrix\x20*'+'\x20anisotrop'+'yRotationF'+'romTex;\x0a\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x0a\x20\x20\x20\x20dA'+'nisotropy\x20'+'=\x20clamp(dA'+'nisotropy,'+'\x200.0,\x201.0)'+';\x0a}\x0a',QC='\x0a\x0a#if\x20defi'+'ned(STD_AO'+'_TEXTURE)\x20'+'||\x20defined'+'(STD_AO_VE'+'RTEX)\x0a\x20\x20\x20\x20'+'uniform\x20fl'+'oat\x20materi'+'al_aoInten'+'sity;\x0a#end'+'if\x0a\x0a#ifdef'+'\x20STD_AODET'+'AIL_TEXTUR'+'E\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22deta'+'ilModesPS\x22'+'\x0a#endif\x0a\x0av'+'oid\x20getAO('+')\x20{\x0a\x20\x20\x20\x20dA'+'o\x20=\x201.0;\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_AO_TE'+'XTURE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'aoBase\x20=\x20t'+'exture2DBi'+'as({STD_AO'+'_TEXTURE_N'+'AME},\x20{STD'+'_AO_TEXTUR'+'E_UV},\x20tex'+'tureBias).'+'{STD_AO_TE'+'XTURE_CHAN'+'NEL};\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_AODE'+'TAIL_TEXTU'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20aoDetail\x20'+'=\x20texture2'+'DBias({STD'+'_AODETAIL_'+'TEXTURE_NA'+'ME},\x20{STD_'+'AODETAIL_T'+'EXTURE_UV}'+',\x20textureB'+'ias).{STD_'+'AODETAIL_T'+'EXTURE_CHA'+'NNEL};\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'oBase\x20=\x20de'+'tailMode_{'+'STD_AODETA'+'IL_DETAILM'+'ODE}(vec3('+'aoBase),\x20v'+'ec3(aoDeta'+'il)).r;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dAo\x20*=\x20a'+'oBase;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_AO_VER'+'TEX\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dAo\x20*=\x20s'+'aturate(vV'+'ertexColor'+'.{STD_AO_V'+'ERTEX_CHAN'+'NEL});\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#if\x20def'+'ined(STD_A'+'O_TEXTURE)'+'\x20||\x20define'+'d(STD_AO_V'+'ERTEX)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dAo\x20='+'\x20mix(1.0,\x20'+'dAo,\x20mater'+'ial_aoInte'+'nsity);\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a',JC='\x0avoid\x20occl'+'udeDiffuse'+'(float\x20ao)'+'\x20{\x0a\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20*=\x20ao;\x0a}\x0a',e1='\x0a\x0a#if\x20LIT_'+'OCCLUDE_SP'+'ECULAR\x20!=\x20'+'NONE\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'OCCLUDE_SP'+'ECULAR_FLO'+'AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20mater'+'ial_occlud'+'eSpecularI'+'ntensity;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a#endif\x0a\x0av'+'oid\x20occlud'+'eSpecular('+'float\x20glos'+'s,\x20float\x20a'+'o,\x20vec3\x20wo'+'rldNormal,'+'\x20vec3\x20view'+'Dir)\x20{\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIT_'+'OCCLUDE_SP'+'ECULAR\x20==\x20'+'AO\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_OCCLUDE_'+'SPECULAR_F'+'LOAT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20specOcc'+'\x20=\x20mix(1.0'+',\x20ao,\x20mate'+'rial_occlu'+'deSpecular'+'Intensity)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20specOc'+'c\x20=\x20ao;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20LIT_OCC'+'LUDE_SPECU'+'LAR\x20==\x20GLO'+'SSDEPENDEN'+'T\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20approx'+'imated\x20spe'+'cular\x20occl'+'usion\x20from'+'\x20AO\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20http:'+'//research'+'.tri-ace.c'+'om/Data/ce'+'dec2011_Re'+'altimePBR_'+'Implementa'+'tion_e.ppt'+'x\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20spec'+'Pow\x20=\x20exp2'+'(gloss\x20*\x201'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'specOcc\x20=\x20'+'saturate(p'+'ow(dot(wor'+'ldNormal,\x20'+'viewDir)\x20+'+'\x20ao,\x200.01\x20'+'*\x20specPow)'+'\x20-\x201.0\x20+\x20a'+'o);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_OCCLUD'+'E_SPECULAR'+'_FLOAT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'pecOcc\x20=\x20m'+'ix(1.0,\x20sp'+'ecOcc,\x20mat'+'erial_occl'+'udeSpecula'+'rIntensity'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#if\x20LI'+'T_OCCLUDE_'+'SPECULAR\x20!'+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dSpec'+'ularLight\x20'+'*=\x20specOcc'+(';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'dReflectio'+'n\x20*=\x20specO'+'cc;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SHEEN\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20sSpecula'+'rLight\x20*=\x20'+'specOcc;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sReflecti'+'on\x20*=\x20spec'+'Occ;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a}\x0a'),t1='\x0a\x20\x20\x20\x20vec4\x20'+'dirLm\x20=\x20te'+'xture2D(te'+'xture_dirL'+'ightMap,\x20v'+'Uv1);\x0a\x0a\x20\x20\x20'+'\x20if\x20(bakeD'+'ir\x20>\x200.5)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(dAtten'+'\x20>\x200.00001'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dirL'+'m.xyz\x20=\x20di'+'rLm.xyz\x20*\x20'+'2.0\x20-\x20vec3'+'(1.0);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'Atten\x20=\x20sa'+'turate(dAt'+'ten);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_FragColor'+'.rgb\x20=\x20nor'+'malize(dLi'+'ghtDirNorm'+'W.xyz*dAtt'+'en\x20+\x20dirLm'+'.xyz*dirLm'+'.w)\x20*\x200.5\x20'+'+\x20vec3(0.5'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Fr'+'agColor.a\x20'+'=\x20dirLm.w\x20'+'+\x20dAtten;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20gl_FragC'+'olor.a\x20=\x20m'+'ax(gl_Frag'+'Color.a,\x201'+'.0\x20/\x20255.0'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x20else\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20gl_FragC'+'olor\x20=\x20dir'+'Lm;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Fr'+'agColor.rg'+'b\x20=\x20dirLm.'+'xyz;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20gl_Frag'+'Color.a\x20=\x20'+'max(dirLm.'+'w,\x20dAtten\x20'+'>\x200.00001\x20'+'?\x20(1.0/255'+'.0)\x20:\x200.0)'+';\x0a\x20\x20\x20\x20}\x0a',s1='\x0a\x0a#ifdef\x20L'+'IT_LIGHTMA'+'P_BAKING_A'+'DD_AMBIENT'+'\x0a\x20\x20\x20\x20//\x20di'+'ffuse\x20ligh'+'t\x20stores\x20a'+'ccumulated'+'\x20AO,\x20apply'+'\x20contrast\x20'+'and\x20bright'+'ness\x20to\x20it'+'\x0a\x20\x20\x20\x20//\x20an'+'d\x20multiply'+'\x20ambient\x20l'+'ight\x20color'+'\x20by\x20the\x20AO'+'\x0a\x20\x20\x20\x20dDiff'+'useLight\x20='+'\x20((dDiffus'+'eLight\x20-\x200'+'.5)\x20*\x20max('+'ambientBak'+'eOcclusion'+'Contrast\x20+'+'\x201.0,\x200.0)'+')\x20+\x200.5;\x0a\x20'+'\x20\x20\x20dDiffus'+'eLight\x20+=\x20'+'vec3(ambie'+'ntBakeOccl'+'usionBrigh'+'tness);\x0a\x20\x20'+'\x20\x20dDiffuse'+'Light\x20=\x20sa'+'turate(dDi'+'ffuseLight'+');\x0a\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20*=\x20dAmbie'+'ntLight;\x0a#'+'endif\x0a\x0a#if'+'def\x20LIGHTM'+'AP_RGBM\x0a\x20\x20'+'\x20\x20//\x20encod'+'e\x20to\x20RGBM\x0a'+'\x20\x20\x20\x20gl_Fra'+'gColor.rgb'+'\x20=\x20dDiffus'+'eLight;\x0a\x20\x20'+'\x20\x20gl_FragC'+'olor.rgb\x20='+'\x20pow(gl_Fr'+'agColor.rg'+'b,\x20vec3(0.'+'5));\x0a\x20\x20\x20\x20g'+'l_FragColo'+'r.rgb\x20/=\x208'+'.0;\x0a\x20\x20\x20\x20gl'+'_FragColor'+'.a\x20=\x20clamp'+'(\x20max(\x20max'+'(\x20gl_FragC'+'olor.r,\x20gl'+'_FragColor'+'.g\x20),\x20max('+'\x20gl_FragCo'+'lor.b,\x201.0'+'\x20/\x20255.0\x20)'+'\x20),\x200.0,1.'+'0\x20);\x0a\x20\x20\x20\x20g'+'l_FragColo'+'r.a\x20=\x20ceil'+'(gl_FragCo'+'lor.a\x20*\x2025'+'5.0)\x20/\x20255'+'.0;\x0a\x20\x20\x20\x20gl'+'_FragColor'+'.rgb\x20/=\x20gl'+'_FragColor'+'.a;\x0a#else\x0a'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20v'+'ec4(dDiffu'+'seLight,\x201'+'.0);\x0a#endi'+'f\x0a',i1='\x0auniform\x20v'+'ec3\x20view_p'+'osition;\x0a\x0a'+'uniform\x20ve'+'c3\x20light_g'+'lobalAmbie'+'nt;\x0a\x0afloat'+'\x20square(fl'+'oat\x20x)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'x*x;\x0a}\x0a\x0afl'+'oat\x20satura'+'te(float\x20x'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20clamp'+'(x,\x200.0,\x201'+'.0);\x0a}\x0a\x0ave'+'c3\x20saturat'+'e(vec3\x20x)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20clamp(x'+',\x20vec3(0.0'+'),\x20vec3(1.'+'0));\x0a}\x0a',r1='\x0a#define\x20N'+'INESLICED\x0a'+'\x0avarying\x20v'+'ec2\x20vMask;'+'\x0avarying\x20v'+'ec2\x20vTiled'+'Uv;\x0a\x0aunifo'+'rm\x20mediump'+'\x20vec4\x20inne'+'rOffset;\x0au'+'niform\x20med'+'iump\x20vec2\x20'+'outerScale'+';\x0auniform\x20'+'mediump\x20ve'+'c4\x20atlasRe'+'ct;\x0a\x0avec2\x20'+'nineSliced'+'Uv;\x0a',a1='\x0a#define\x20N'+'INESLICED\x0a'+'#define\x20NI'+'NESLICETIL'+'ED\x0a\x0avaryin'+'g\x20vec2\x20vMa'+'sk;\x0avaryin'+'g\x20vec2\x20vTi'+'ledUv;\x0a\x0aun'+'iform\x20medi'+'ump\x20vec4\x20i'+'nnerOffset'+';\x0auniform\x20'+'mediump\x20ve'+'c2\x20outerSc'+'ale;\x0aunifo'+'rm\x20mediump'+'\x20vec4\x20atla'+'sRect;\x0a\x0ave'+'c2\x20nineSli'+'cedUv;\x0a',n1='\x0a//\x202x2\x20ba'+'yer\x20matrix'+'\x20[1\x202][3\x200'+'],\x20p\x20in\x20[0'+',1]\x0afloat\x20'+'bayer2(vec'+'2\x20p)\x20{\x0a\x20\x20\x20'+'\x20return\x20mo'+'d(2.0\x20*\x20p.'+'y\x20+\x20p.x\x20+\x20'+'1.0,\x204.0);'+'\x0a}\x0a\x0a//\x204x4'+'\x20matrix,\x20p'+'\x20-\x20pixel\x20c'+'oordinate\x0a'+'float\x20baye'+'r4(vec2\x20p)'+'\x20{\x0a\x20\x20\x20\x20vec'+'2\x20p1\x20=\x20mod'+'(p,\x202.0);\x0a'+'\x20\x20\x20\x20vec2\x20p'+'2\x20=\x20floor('+'0.5\x20*\x20mod('+'p,\x204.0));\x0a'+'\x20\x20\x20\x20return'+'\x204.0\x20*\x20bay'+'er2(p1)\x20+\x20'+'bayer2(p2)'+';\x0a}\x0a\x0a//\x208x'+'8\x20matrix,\x20'+'p\x20-\x20pixel\x20'+'coordinate'+'\x0afloat\x20bay'+'er8(vec2\x20p'+')\x20{\x0a\x20\x20\x20\x20ve'+'c2\x20p1\x20=\x20mo'+'d(p,\x202.0);'+'\x0a\x20\x20\x20\x20vec2\x20'+'p2\x20=\x20floor'+'(0.5\x20*\x20mod'+'(p,\x204.0));'+'\x0a\x20\x20\x20\x20vec2\x20'+'p4\x20=\x20floor'+'(0.25\x20*\x20mo'+'d(p,\x208.0))'+';\x0a\x20\x20\x20\x20retu'+'rn\x204.0\x20*\x20('+'4.0\x20*\x20baye'+'r2(p1)\x20+\x20b'+'ayer2(p2))'+'\x20+\x20bayer2('+'p4);\x0a}\x0a',o1='\x0avarying\x20v'+'ec2\x20vUv0;\x0a'+'\x0auniform\x20s'+'ampler2D\x20s'+'ource;\x0auni'+'form\x20vec2\x20'+'pixelOffse'+'t;\x0a\x0a#ifdef'+'\x20GAUSS\x0a\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20weigh'+'t[{SAMPLES'+'}];\x0a#endif'+'\x0a\x0avoid\x20mai'+'n(void)\x20{\x0a'+'\x20\x20\x20\x20vec3\x20m'+'oments\x20=\x20v'+'ec3(0.0);\x0a'+'\x20\x20\x20\x20vec2\x20u'+'v\x20=\x20vUv0\x20-'+'\x20pixelOffs'+'et\x20*\x20(floa'+'t({SAMPLES'+'})\x20*\x200.5);'+'\x0a\x20\x20\x20\x20for\x20('+'int\x20i\x20=\x200;'+'\x20i\x20<\x20{SAMP'+'LES};\x20i++)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec4\x20c\x20=\x20'+'texture2D('+'source,\x20uv'+'\x20+\x20pixelOf'+'fset\x20*\x20flo'+'at(i));\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20GAUSS\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20moments\x20'+'+=\x20c.xyz\x20*'+'\x20weight[i]'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20mo'+'ments\x20+=\x20c'+'.xyz;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20#ifndef\x20'+'GAUSS\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20moment'+'s\x20*=\x201.0\x20/'+'\x20float({SA'+'MPLES});\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20gl_Fr'+'agColor\x20=\x20'+'vec4(momen'+'ts.x,\x20mome'+'nts.y,\x20mom'+'ents.z,\x201.'+'0);\x0a}\x0a',l1='\x0auniform\x20f'+'loat\x20mater'+'ial_clearC'+'oat;\x0a\x0avoid'+'\x20getClearC'+'oat()\x20{\x0a\x20\x20'+'\x20\x20ccSpecul'+'arity\x20=\x20ma'+'terial_cle'+'arCoat;\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_CLEARC'+'OAT_TEXTUR'+'E\x0a\x20\x20\x20\x20ccSp'+'ecularity\x20'+'*=\x20texture'+'2DBias({ST'+'D_CLEARCOA'+'T_TEXTURE_'+'NAME},\x20{ST'+'D_CLEARCOA'+'T_TEXTURE_'+'UV},\x20textu'+'reBias).{S'+'TD_CLEARCO'+'AT_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_CL'+'EARCOAT_VE'+'RTEX\x0a\x20\x20\x20\x20c'+'cSpeculari'+'ty\x20*=\x20satu'+'rate(vVert'+'exColor.{S'+'TD_CLEARCO'+'AT_VERTEX_'+'CHANNEL});'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a}\x0a',c1='\x0auniform\x20f'+'loat\x20mater'+'ial_clearC'+'oatGloss;\x0a'+'\x0avoid\x20getC'+'learCoatGl'+'ossiness()'+'\x20{\x0a\x20\x20\x20\x20ccG'+'lossiness\x20'+'=\x20material'+'_clearCoat'+'Gloss;\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_CLEARCO'+'ATGLOSS_TE'+'XTURE\x0a\x20\x20\x20\x20'+'ccGlossine'+'ss\x20*=\x20text'+'ure2DBias('+'{STD_CLEAR'+'COATGLOSS_'+'TEXTURE_NA'+'ME},\x20{STD_'+'CLEARCOATG'+'LOSS_TEXTU'+'RE_UV},\x20te'+'xtureBias)'+'.{STD_CLEA'+'RCOATGLOSS'+'_TEXTURE_C'+'HANNEL};\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_CLEA'+'RCOATGLOSS'+'_VERTEX\x0a\x20\x20'+'\x20\x20ccGlossi'+'ness\x20*=\x20sa'+'turate(vVe'+'rtexColor.'+'{STD_CLEAR'+'COATGLOSS_'+'VERTEX_CHA'+'NNEL});\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_CLEAR'+'COATGLOSS_'+'INVERT\x0a\x20\x20\x20'+'\x20ccGlossin'+'ess\x20=\x201.0\x20'+'-\x20ccGlossi'+'ness;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20ccGlossi'+'ness\x20+=\x200.'+'0000001;\x0a}'+'\x0a',h1='\x0a#ifdef\x20ST'+'D_CLEARCOA'+'TNORMAL_TE'+'XTURE\x0aunif'+'orm\x20float\x20'+'material_c'+'learCoatBu'+'mpiness;\x0a#'+'endif\x0a\x0avoi'+'d\x20getClear'+'CoatNormal'+'()\x20{\x0a#ifde'+'f\x20STD_CLEA'+'RCOATNORMA'+'L_TEXTURE\x0a'+'\x20\x20\x20\x20vec3\x20n'+'ormalMap\x20='+'\x20{STD_CLEA'+'RCOATNORMA'+'L_TEXTURE_'+'DECODE}(te'+'xture2DBia'+'s({STD_CLE'+'ARCOATNORM'+'AL_TEXTURE'+'_NAME},\x20{S'+'TD_CLEARCO'+'ATNORMAL_T'+'EXTURE_UV}'+',\x20textureB'+'ias));\x0a\x20\x20\x20'+'\x20normalMap'+'\x20=\x20mix(vec'+'3(0.0,\x200.0'+',\x201.0),\x20no'+'rmalMap,\x20m'+'aterial_cl'+'earCoatBum'+'piness);\x0a\x20'+'\x20\x20\x20ccNorma'+'lW\x20=\x20norma'+'lize(dTBN\x20'+'*\x20normalMa'+'p);\x0a#else\x0a'+'\x20\x20\x20\x20ccNorm'+'alW\x20=\x20dVer'+'texNormalW'+';\x0a#endif\x0a}'+'\x0a',d1='\x0a//\x20Conver'+'ts\x20unnorma'+'lized\x20dire'+'ction\x20vect'+'or\x20to\x20a\x20cu'+'bemap\x20face'+'\x20index\x20[0.'+'.5]\x20and\x20uv'+'\x20coordinat'+'es\x20within\x20'+'the\x20face\x20i'+'n\x20[0..1]\x20r'+'ange.\x0a//\x20A'+'dditionall'+'y\x20offset\x20t'+'o\x20a\x20tile\x20i'+'n\x20atlas\x20wi'+'thin\x203x3\x20s'+'ubdivision'+'\x20is\x20provid'+'ed\x0avec2\x20ge'+'tCubemapFa'+'ceCoordina'+'tes(const\x20'+'vec3\x20dir,\x20'+'out\x20float\x20'+'faceIndex,'+'\x20out\x20vec2\x20'+'tileOffset'+')\x0a{\x0a\x20\x20\x20\x20ve'+'c3\x20vAbs\x20=\x20'+'abs(dir);\x0a'+'\x20\x20\x20\x20float\x20'+'ma;\x0a\x20\x20\x20\x20ve'+'c2\x20uv;\x0a\x20\x20\x20'+'\x20if\x20(vAbs.'+'z\x20>=\x20vAbs.'+'x\x20&&\x20vAbs.'+'z\x20>=\x20vAbs.'+'y)\x20{\x20\x20\x20//\x20'+'front\x20/\x20ba'+'ck\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20faceInde'+'x\x20=\x20dir.z\x20'+'<\x200.0\x20?\x205.'+'0\x20:\x204.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ma\x20'+'=\x200.5\x20/\x20vA'+'bs.z;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uv\x20=\x20v'+'ec2(dir.z\x20'+'<\x200.0\x20?\x20-d'+'ir.x\x20:\x20dir'+'.x,\x20-dir.y'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20tileOffse'+'t.x\x20=\x202.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20t'+'ileOffset.'+'y\x20=\x20dir.z\x20'+'<\x200.0\x20?\x201.'+'0\x20:\x200.0;\x0a\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20if(vAbs.y'+'\x20>=\x20vAbs.x'+')\x20{\x20\x20//\x20to'+'p\x20index\x202,'+'\x20bottom\x20in'+'dex\x203\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20faceI'+'ndex\x20=\x20dir'+'.y\x20<\x200.0\x20?'+'\x203.0\x20:\x202.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'ma\x20=\x200.5\x20/'+'\x20vAbs.y;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uv\x20'+'=\x20vec2(dir'+'.x,\x20dir.y\x20'+'<\x200.0\x20?\x20-d'+'ir.z\x20:\x20dir'+'.z);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20tileOff'+'set.x\x20=\x201.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20tileOffse'+'t.y\x20=\x20dir.'+'y\x20<\x200.0\x20?\x20'+'1.0\x20:\x200.0;'+'\x0a\x0a\x20\x20\x20\x20}\x20el'+'se\x20{\x20\x20\x20\x20//'+'\x20left\x20/\x20ri'+'ght\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20faceInd'+'ex\x20=\x20dir.x'+'\x20<\x200.0\x20?\x201'+'.0\x20:\x200.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ma'+'\x20=\x200.5\x20/\x20v'+'Abs.x;\x0a\x20\x20\x20'+('\x20\x20\x20\x20\x20uv\x20=\x20'+'vec2(dir.x'+'\x20<\x200.0\x20?\x20d'+'ir.z\x20:\x20-di'+'r.z,\x20-dir.'+'y);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20tileOffs'+'et.x\x20=\x200.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'tileOffset'+'.y\x20=\x20dir.x'+'\x20<\x200.0\x20?\x201'+'.0\x20:\x200.0;\x0a'+'\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20return\x20uv'+'\x20*\x20ma\x20+\x200.'+'5;\x0a}\x0a\x0a//\x20c'+'onverts\x20un'+'normalized'+'\x20direction'+'\x20vector\x20to'+'\x20a\x20texture'+'\x20coordinat'+'e\x20for\x20a\x20cu'+'bemap\x20face'+'\x20stored\x20wi'+'thin\x20textu'+'re\x20atlas\x20d'+'escribed\x20b'+'y\x20the\x20view'+'port\x0avec2\x20'+'getCubemap'+'AtlasCoord'+'inates(con'+'st\x20vec3\x20om'+'niAtlasVie'+'wport,\x20flo'+'at\x20shadowE'+'dgePixels,'+'\x20float\x20sha'+'dowTexture'+'Resolution'+',\x20const\x20ve'+'c3\x20dir)\x20{\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20faceIndex'+';\x0a\x20\x20\x20\x20vec2'+'\x20tileOffse'+'t;\x0a\x20\x20\x20\x20vec'+'2\x20uv\x20=\x20get'+'CubemapFac'+'eCoordinat'+'es(dir,\x20fa'+'ceIndex,\x20t'+'ileOffset)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'move\x20uv\x20co'+'ordinates\x20'+'inwards\x20in'+'side\x20to\x20co'+'mpensate\x20f'+'or\x20larger\x20'+'fov\x20when\x20r'+'endering\x20s'+'hadow\x20into'+'\x20atlas\x0a\x20\x20\x20'+'\x20float\x20atl'+'asFaceSize'+'\x20=\x20omniAtl'+'asViewport'+'.z;\x0a\x20\x20\x20\x20fl'+'oat\x20tileSi'+'ze\x20=\x20shado'+'wTextureRe'+'solution\x20*'+'\x20atlasFace'+'Size;\x0a\x20\x20\x20\x20'+'float\x20offs'+'et\x20=\x20shado'+'wEdgePixel'+'s\x20/\x20tileSi'+'ze;\x0a\x20\x20\x20\x20uv'+'\x20=\x20uv\x20*\x20ve'+'c2(1.0\x20-\x20o'+'ffset\x20*\x202.'+'0)\x20+\x20vec2('+'offset\x20*\x201'+'.0);\x0a\x0a\x20\x20\x20\x20'+'//\x20scale\x20u'+'v\x20coordina'+'tes\x20to\x20cub'+'e\x20face\x20are'+'a\x20within\x20t'+'he\x20viewpor'+'t\x0a\x20\x20\x20\x20uv\x20*'+'=\x20atlasFac'+'eSize;\x0a\x0a\x20\x20'+'\x20\x20//\x20offse'+'t\x20into\x20fac'+'e\x20of\x20the\x20a')+('tlas\x20(3x3\x20'+'grid)\x0a\x20\x20\x20\x20'+'uv\x20+=\x20tile'+'Offset\x20*\x20a'+'tlasFaceSi'+'ze;\x0a\x0a\x20\x20\x20\x20/'+'/\x20offset\x20i'+'nto\x20the\x20at'+'las\x20viewpo'+'rt\x0a\x20\x20\x20\x20uv\x20'+'+=\x20omniAtl'+'asViewport'+'.xy;\x0a\x0a\x20\x20\x20\x20'+'return\x20uv;'+'\x0a}\x0a'),f1='\x0avec3\x20_get'+'CookieClus'+'tered(TEXT'+'URE_ACCEPT'+'(tex),\x20vec'+'2\x20uv,\x20floa'+'t\x20intensit'+'y,\x20vec4\x20co'+'okieChanne'+'l)\x20{\x0a\x20\x20\x20\x20v'+'ec4\x20pixel\x20'+'=\x20mix(vec4'+'(1.0),\x20tex'+'ture2DLod('+'tex,\x20uv,\x200'+'.0),\x20inten'+'sity);\x0a\x20\x20\x20'+'\x20bool\x20isRg'+'b\x20=\x20dot(co'+'okieChanne'+'l.rgb,\x20vec'+'3(1.0))\x20=='+'\x203.0;\x0a\x20\x20\x20\x20'+'return\x20isR'+'gb\x20?\x20pixel'+'.rgb\x20:\x20vec'+'3(dot(pixe'+'l,\x20cookieC'+'hannel));\x0a'+'}\x0a\x0a//\x20getC'+'ookie2D\x20fo'+'r\x20clustere'+'d\x20lighting'+'\x20including'+'\x20channel\x20s'+'elector\x0ave'+'c3\x20getCook'+'ie2DCluste'+'red(TEXTUR'+'E_ACCEPT(t'+'ex),\x20mat4\x20'+'transform,'+'\x20vec3\x20worl'+'dPosition,'+'\x20float\x20int'+'ensity,\x20ve'+'c4\x20cookieC'+'hannel)\x20{\x0a'+'\x20\x20\x20\x20vec4\x20p'+'rojPos\x20=\x20t'+'ransform\x20*'+'\x20vec4(worl'+'dPosition,'+'\x201.0);\x0a\x20\x20\x20'+'\x20return\x20_g'+'etCookieCl'+'ustered(TE'+'XTURE_PASS'+'(tex),\x20pro'+'jPos.xy\x20/\x20'+'projPos.w,'+'\x20intensity'+',\x20cookieCh'+'annel);\x0a}\x0a'+'\x0a//\x20getCoo'+'kie\x20for\x20cl'+'ustered\x20om'+'ni\x20light\x20w'+'ith\x20the\x20co'+'okie\x20textu'+'re\x20being\x20s'+'tored\x20in\x20t'+'he\x20cookie\x20'+'atlas\x0avec3'+'\x20getCookie'+'CubeCluste'+'red(TEXTUR'+'E_ACCEPT(t'+'ex),\x20vec3\x20'+'dir,\x20float'+'\x20intensity'+',\x20vec4\x20coo'+'kieChannel'+',\x20float\x20sh'+'adowTextur'+'eResolutio'+'n,\x20float\x20s'+'hadowEdgeP'+'ixels,\x20vec'+'3\x20omniAtla'+'sViewport)'+'\x20{\x0a\x20\x20\x20\x20vec'+'2\x20uv\x20=\x20get'+'CubemapAtl'+'asCoordina'+'tes(omniAt'+'lasViewpor'+'t,\x20shadowE'+'dgePixels,'+'\x20shadowTex'+('tureResolu'+'tion,\x20dir)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20_getCoo'+'kieCluster'+'ed(TEXTURE'+'_PASS(tex)'+',\x20uv,\x20inte'+'nsity,\x20coo'+'kieChannel'+');\x0a}\x0a'),u1='\x0a\x0avec3\x20_ge'+'tShadowCoo'+'rdPerspZbu'+'ffer(mat4\x20'+'shadowMatr'+'ix,\x20vec4\x20s'+'hadowParam'+'s,\x20vec3\x20wP'+'os)\x20{\x0a\x20\x20\x20\x20'+'vec4\x20projP'+'os\x20=\x20shado'+'wMatrix\x20*\x20'+'vec4(wPos,'+'\x201.0);\x0a\x20\x20\x20'+'\x20projPos.x'+'yz\x20/=\x20proj'+'Pos.w;\x0a\x20\x20\x20'+'\x20return\x20pr'+'ojPos.xyz;'+'\x0a\x20\x20\x20\x20//\x20de'+'pth\x20bias\x20i'+'s\x20already\x20'+'applied\x20on'+'\x20render\x0a}\x0a'+'\x0avec3\x20getS'+'hadowCoord'+'PerspZbuff'+'erNormalOf'+'fset(mat4\x20'+'shadowMatr'+'ix,\x20vec4\x20s'+'hadowParam'+'s,\x20vec3\x20no'+'rmal)\x20{\x0a\x20\x20'+'\x20\x20vec3\x20wPo'+'s\x20=\x20vPosit'+'ionW\x20+\x20nor'+'mal\x20*\x20shad'+'owParams.y'+';\x0a\x20\x20\x20\x20retu'+'rn\x20_getSha'+'dowCoordPe'+'rspZbuffer'+'(shadowMat'+'rix,\x20shado'+'wParams,\x20w'+'Pos);\x0a}\x0a\x0av'+'ec3\x20normal'+'OffsetPoin'+'tShadow(ve'+'c4\x20shadowP'+'arams,\x20vec'+'3\x20lightPos'+',\x20vec3\x20lig'+'htDir,\x20vec'+'3\x20lightDir'+'Norm,\x20vec3'+'\x20normal)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20distScale'+'\x20=\x20length('+'lightDir);'+'\x0a\x20\x20\x20\x20vec3\x20'+'wPos\x20=\x20vPo'+'sitionW\x20+\x20'+'normal\x20*\x20s'+'hadowParam'+'s.y\x20*\x20clam'+'p(1.0\x20-\x20do'+'t(normal,\x20'+'-lightDirN'+'orm),\x200.0,'+'\x201.0)\x20*\x20di'+'stScale;\x20/'+'/0.02\x0a\x20\x20\x20\x20'+'vec3\x20dir\x20='+'\x20wPos\x20-\x20li'+'ghtPos;\x0a\x20\x20'+'\x20\x20return\x20d'+'ir;\x0a}\x0a\x0a#if'+'\x20defined(C'+'LUSTER_SHA'+'DOW_TYPE_P'+'CF1)\x0a\x0afloa'+'t\x20getShado'+'wOmniClust'+'eredPCF1(S'+'HADOWMAP_A'+'CCEPT(shad'+'owMap),\x20ve'+'c4\x20shadowP'+'arams,\x20vec'+'3\x20omniAtla'+'sViewport,'+'\x20float\x20sha'+'dowEdgePix'+'els,\x20vec3\x20'+'lightDir)\x20'+'{\x0a\x0a\x20\x20\x20\x20flo'+'at\x20shadowT'+('extureReso'+'lution\x20=\x20s'+'hadowParam'+'s.x;\x0a\x20\x20\x20\x20v'+'ec2\x20uv\x20=\x20g'+'etCubemapA'+'tlasCoordi'+'nates(omni'+'AtlasViewp'+'ort,\x20shado'+'wEdgePixel'+'s,\x20shadowT'+'extureReso'+'lution,\x20li'+'ghtDir);\x0a\x0a'+'\x20\x20\x20\x20float\x20'+'shadowZ\x20=\x20'+'length(lig'+'htDir)\x20*\x20s'+'hadowParam'+'s.w\x20+\x20shad'+'owParams.z'+';\x0a\x20\x20\x20\x20retu'+'rn\x20texture'+'Shadow(sha'+'dowMap,\x20ve'+'c3(uv,\x20sha'+'dowZ));\x0a}\x0a'+'\x0a#endif\x0a\x0a#'+'if\x20defined'+'(CLUSTER_S'+'HADOW_TYPE'+'_PCF3)\x0a\x0afl'+'oat\x20getSha'+'dowOmniClu'+'steredPCF3'+'(SHADOWMAP'+'_ACCEPT(sh'+'adowMap),\x20'+'vec4\x20shado'+'wParams,\x20v'+'ec3\x20omniAt'+'lasViewpor'+'t,\x20float\x20s'+'hadowEdgeP'+'ixels,\x20vec'+'3\x20lightDir'+')\x20{\x0a\x0a\x20\x20\x20\x20f'+'loat\x20shado'+'wTextureRe'+'solution\x20='+'\x20shadowPar'+'ams.x;\x0a\x20\x20\x20'+'\x20vec2\x20uv\x20='+'\x20getCubema'+'pAtlasCoor'+'dinates(om'+'niAtlasVie'+'wport,\x20sha'+'dowEdgePix'+'els,\x20shado'+'wTextureRe'+'solution,\x20'+'lightDir);'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20shadowZ\x20'+'=\x20length(l'+'ightDir)\x20*'+'\x20shadowPar'+'ams.w\x20+\x20sh'+'adowParams'+'.z;\x0a\x20\x20\x20\x20ve'+'c3\x20shadowC'+'oord\x20=\x20vec'+'3(uv,\x20shad'+'owZ);\x0a\x20\x20\x20\x20'+'return\x20get'+'ShadowPCF3'+'x3(SHADOWM'+'AP_PASS(sh'+'adowMap),\x20'+'shadowCoor'+'d,\x20shadowP'+'arams);\x0a}\x0a'+'\x0a#endif\x0a\x0a#'+'if\x20defined'+'(CLUSTER_S'+'HADOW_TYPE'+'_PCF5)\x0a\x0afl'+'oat\x20getSha'+'dowOmniClu'+'steredPCF5'+'(SHADOWMAP'+'_ACCEPT(sh'+'adowMap),\x20'+'vec4\x20shado'+'wParams,\x20v'+'ec3\x20omniAt'+'lasViewpor'+'t,\x20float\x20s')+('hadowEdgeP'+'ixels,\x20vec'+'3\x20lightDir'+')\x20{\x0a\x0a\x20\x20\x20\x20f'+'loat\x20shado'+'wTextureRe'+'solution\x20='+'\x20shadowPar'+'ams.x;\x0a\x20\x20\x20'+'\x20vec2\x20uv\x20='+'\x20getCubema'+'pAtlasCoor'+'dinates(om'+'niAtlasVie'+'wport,\x20sha'+'dowEdgePix'+'els,\x20shado'+'wTextureRe'+'solution,\x20'+'lightDir);'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20shadowZ\x20'+'=\x20length(l'+'ightDir)\x20*'+'\x20shadowPar'+'ams.w\x20+\x20sh'+'adowParams'+'.z;\x0a\x20\x20\x20\x20ve'+'c3\x20shadowC'+'oord\x20=\x20vec'+'3(uv,\x20shad'+'owZ);\x0a\x20\x20\x20\x20'+'return\x20get'+'ShadowPCF5'+'x5(SHADOWM'+'AP_PASS(sh'+'adowMap),\x20'+'shadowCoor'+'d,\x20shadowP'+'arams);\x0a}\x0a'+'\x0a#endif\x0a\x0a/'+'/\x20Clustere'+'d\x20Spot\x20Sam'+'pling\x20usin'+'g\x20atlas\x0a\x0a#'+'if\x20defined'+'(CLUSTER_S'+'HADOW_TYPE'+'_PCF1)\x0a\x0afl'+'oat\x20getSha'+'dowSpotClu'+'steredPCF1'+'(SHADOWMAP'+'_ACCEPT(sh'+'adowMap),\x20'+'vec3\x20shado'+'wCoord,\x20ve'+'c4\x20shadowP'+'arams)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'textureSha'+'dow(shadow'+'Map,\x20shado'+'wCoord);\x0a}'+'\x0a\x0a#endif\x0a\x0a'+'#if\x20define'+'d(CLUSTER_'+'SHADOW_TYP'+'E_PCF3)\x0a\x0af'+'loat\x20getSh'+'adowSpotCl'+'usteredPCF'+'3(SHADOWMA'+'P_ACCEPT(s'+'hadowMap),'+'\x20vec3\x20shad'+'owCoord,\x20v'+'ec4\x20shadow'+'Params)\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20getShadow'+'SpotPCF3x3'+'(SHADOWMAP'+'_PASS(shad'+'owMap),\x20sh'+'adowCoord,'+'\x20shadowPar'+'ams);\x0a}\x0a\x0a#'+'endif\x0a\x0a#if'+'\x20defined(C'+'LUSTER_SHA'+'DOW_TYPE_P'+'CF5)\x0a\x0afloa'+'t\x20getShado'+'wSpotClust'+'eredPCF5(S'+'HADOWMAP_A'+'CCEPT(shad'+'owMap),\x20ve'+'c3\x20shadowC')+('oord,\x20vec4'+'\x20shadowPar'+'ams)\x20{\x0a\x20\x20\x20'+'\x20return\x20ge'+'tShadowPCF'+'5x5(SHADOW'+'MAP_PASS(s'+'hadowMap),'+'\x20shadowCoo'+'rd,\x20shadow'+'Params);\x0a}'+'\x0a#endif\x0a'),p1='\x0a\x0a#include'+'\x20\x22lightBuf'+'ferDefines'+'PS\x22\x0a\x0a//\x20in'+'clude\x20this'+'\x20before\x20sh'+'adow\x20/\x20coo'+'kie\x20code\x0a#'+'include\x20\x22c'+'lusteredLi'+'ghtUtilsPS'+'\x22\x0a\x0a#ifdef\x20'+'CLUSTER_CO'+'OKIES\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'clusteredL'+'ightCookie'+'sPS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'CLUSTER_SH'+'ADOWS\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'clusteredL'+'ightShadow'+'sPS\x22\x0a#endi'+'f\x0a\x0auniform'+'\x20highp\x20sam'+'pler2D\x20clu'+'sterWorldT'+'exture;\x0aun'+'iform\x20high'+'p\x20sampler2'+'D\x20lightsTe'+'xture;\x0a\x0a#i'+'fdef\x20CLUST'+'ER_SHADOWS'+'\x0a\x20\x20\x20\x20//\x20TO'+'DO:\x20when\x20V'+'SM\x20shadow\x20'+'is\x20support'+'ed,\x20it\x20nee'+'ds\x20to\x20use\x20'+'sampler2D\x20'+'in\x20webgl2\x0a'+'\x20\x20\x20\x20unifor'+'m\x20sampler2'+'DShadow\x20sh'+'adowAtlasT'+'exture;\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20CLUSTER'+'_COOKIES\x0a\x20'+'\x20\x20\x20uniform'+'\x20sampler2D'+'\x20cookieAtl'+'asTexture;'+'\x0a#endif\x0a\x0au'+'niform\x20int'+'\x20clusterMa'+'xCells;\x0a\x0a/'+'/\x201.0\x20if\x20c'+'lustered\x20l'+'ighting\x20ca'+'n\x20be\x20skipp'+'ed\x20(0\x20ligh'+'ts\x20in\x20the\x20'+'clusters)\x0a'+'uniform\x20fl'+'oat\x20cluste'+'rSkip;\x0a\x0aun'+'iform\x20vec3'+'\x20clusterCe'+'llsCountBy'+'BoundsSize'+';\x0auniform\x20'+'vec3\x20clust'+'erTextureS'+'ize;\x0aunifo'+'rm\x20vec3\x20cl'+'usterBound'+'sMin;\x0aunif'+'orm\x20vec3\x20c'+'lusterBoun'+'dsDelta;\x0au'+'niform\x20vec'+'3\x20clusterC'+'ellsDot;\x0au'+'niform\x20vec'+'3\x20clusterC'+'ellsMax;\x0au'+'niform\x20vec'+'2\x20shadowAt'+'lasParams;'+'\x0a\x0a//\x20struc'+'ture\x20stori'+'ng\x20light\x20p'+'roperties\x20'+'of\x20a\x20clust'+'ered\x20light'+'\x0a//\x20it\x27s\x20s'+('orted\x20to\x20h'+'ave\x20all\x20ve'+'ctors\x20alig'+'ned\x20to\x204\x20f'+'loats\x20to\x20l'+'imit\x20paddi'+'ng\x0astruct\x20'+'ClusterLig'+'htData\x20{\x0a\x0a'+'\x20\x20\x20\x20//\x2032b'+'it\x20of\x20flag'+'s\x0a\x20\x20\x20\x20uint'+'\x20flags;\x0a\x0a\x20'+'\x20\x20\x20//\x20area'+'\x20light\x20siz'+'es\x20/\x20orien'+'tation\x0a\x20\x20\x20'+'\x20vec3\x20half'+'Width;\x0a\x0a\x20\x20'+'\x20\x20bool\x20isS'+'pot;\x0a\x0a\x20\x20\x20\x20'+'//\x20area\x20li'+'ght\x20sizes\x20'+'/\x20orientat'+'ion\x0a\x20\x20\x20\x20ve'+'c3\x20halfHei'+'ght;\x0a\x0a\x20\x20\x20\x20'+'//\x20light\x20i'+'ndex\x0a\x20\x20\x20\x20i'+'nt\x20lightIn'+'dex;\x0a\x0a\x20\x20\x20\x20'+'//\x20world\x20s'+'pace\x20posit'+'ion\x0a\x20\x20\x20\x20ve'+'c3\x20positio'+'n;\x0a\x0a\x20\x20\x20\x20//'+'\x20area\x20ligh'+'t\x20shape\x0a\x20\x20'+'\x20\x20uint\x20sha'+'pe;\x0a\x0a\x20\x20\x20\x20/'+'/\x20world\x20sp'+'ace\x20direct'+'ion\x20(spot\x20'+'light\x20only'+')\x0a\x20\x20\x20\x20vec3'+'\x20direction'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'light\x20foll'+'ow\x20mode\x0a\x20\x20'+'\x20\x20bool\x20fal'+'loffModeLi'+'near;\x0a\x0a\x20\x20\x20'+'\x20//\x20color\x0a'+'\x20\x20\x20\x20vec3\x20c'+'olor;\x0a\x0a\x20\x20\x20'+'\x20//\x200.0\x20if'+'\x20the\x20light'+'\x20doesn\x27t\x20c'+'ast\x20shadow'+'s\x0a\x20\x20\x20\x20floa'+'t\x20shadowIn'+'tensity;\x0a\x0a'+'\x20\x20\x20\x20//\x20atl'+'as\x20viewpor'+'t\x20for\x20omni'+'\x20light\x20sha'+'dow\x20and\x20co'+'okie\x20(.xy\x20'+'is\x20offset\x20'+'to\x20the\x20vie'+'wport\x20slot'+',\x20.z\x20is\x20si'+'ze\x20of\x20the\x20'+'face\x20in\x20th'+'e\x20atlas)\x0a\x20'+'\x20\x20\x20vec3\x20om'+'niAtlasVie'+'wport;\x0a\x0a\x20\x20'+'\x20\x20//\x20range'+'\x20of\x20the\x20li'+'ght\x0a\x20\x20\x20\x20fl'+'oat\x20range;'+'\x0a\x0a\x20\x20\x20\x20//\x20c'+'hannel\x20mas'+'k\x20-\x20one\x20of'+'\x20the\x20chann'+'els\x20has\x201,'+'\x20the\x20other'+'s\x20are\x200\x0a\x20\x20'+'\x20\x20vec4\x20coo'+'kieChannel'+'Mask;\x0a\x0a\x20\x20\x20'+'\x20//\x20compre'+'ssed\x20biase'+'s,\x20two\x20haf'+'-floats\x20st'+'ored\x20in\x20a\x20'+'float\x0a\x20\x20\x20\x20'+'float\x20bias'+'esData;\x0a\x0a\x20')+('\x20\x20\x20//\x20shad'+'ow\x20bias\x20va'+'lues\x0a\x20\x20\x20\x20f'+'loat\x20shado'+'wBias;\x0a\x20\x20\x20'+'\x20float\x20sha'+'dowNormalB'+'ias;\x0a\x0a\x20\x20\x20\x20'+'//\x20compres'+'sed\x20angles'+',\x20two\x20haf-'+'floats\x20sto'+'red\x20in\x20a\x20f'+'loat\x0a\x20\x20\x20\x20f'+'loat\x20angle'+'sData;\x0a\x0a\x20\x20'+'\x20\x20//\x20spot\x20'+'light\x20inne'+'r\x20and\x20oute'+'r\x20angle\x20co'+'sine\x0a\x20\x20\x20\x20f'+'loat\x20inner'+'ConeAngleC'+'os;\x0a\x20\x20\x20\x20fl'+'oat\x20outerC'+'oneAngleCo'+'s;\x0a\x0a\x20\x20\x20\x20//'+'\x20intensity'+'\x20of\x20the\x20co'+'okie\x0a\x20\x20\x20\x20f'+'loat\x20cooki'+'eIntensity'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'light\x20mask'+'\x0a\x20\x20\x20\x20//flo'+'at\x20mask;\x0a\x20'+'\x20\x20\x20bool\x20is'+'Dynamic;\x0a\x20'+'\x20\x20\x20bool\x20is'+'Lightmappe'+'d;\x0a};\x0a\x0a//\x20'+'Note:\x20on\x20s'+'ome\x20device'+'s\x20(tested\x20'+'on\x20Pixel\x203'+'A\x20XL),\x20thi'+'s\x20matrix\x20w'+'hen\x20stored'+'\x20inside\x20th'+'e\x20light\x20st'+'ruct\x20has\x20l'+'ower\x20preci'+'sion\x20compa'+'red\x20to\x0a//\x20'+'when\x20store'+'d\x20outside,'+'\x20so\x20we\x20sto'+'re\x20it\x20outs'+'ide\x20to\x20avo'+'id\x20spot\x20sh'+'adow\x20flick'+'ering.\x20Thi'+'s\x20might\x20ne'+'ed\x20to\x20be\x20d'+'one\x20to\x20oth'+'er\x20/\x20all\x20m'+'embers\x0a//\x20'+'of\x20the\x20str'+'ucture\x20if\x20'+'further\x20si'+'milar\x20issu'+'es\x20are\x20obs'+'erved.\x0a\x0a//'+'\x20shadow\x20(s'+'pot\x20light\x20'+'only)\x20/\x20co'+'okie\x20proje'+'ction\x20matr'+'ix\x0amat4\x20li'+'ghtProject'+'ionMatrix;'+'\x0a\x0avec4\x20sam'+'pleLightTe'+'xtureF(con'+'st\x20Cluster'+'LightData\x20'+'clusterLig'+'htData,\x20in'+'t\x20index)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20texelFet'+'ch(lightsT'+'exture,\x20iv'+'ec2(index,'+'\x20clusterLi'+'ghtData.li'+'ghtIndex),'+'\x200);\x0a}\x0a\x0avo'+'id\x20decodeC'+'lusterLigh')+('tCore(inou'+'t\x20ClusterL'+'ightData\x20c'+'lusterLigh'+'tData,\x20flo'+'at\x20lightIn'+'dex)\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x20light'+'\x20index\x0a\x20\x20\x20'+'\x20clusterLi'+'ghtData.li'+'ghtIndex\x20='+'\x20int(light'+'Index);\x0a\x0a\x20'+'\x20\x20\x20//\x20samp'+'le\x20data\x20en'+'coding\x20hal'+'f-float\x20va'+'lues\x20into\x20'+'32bit\x20uint'+'s\x0a\x20\x20\x20\x20vec4'+'\x20halfData\x20'+'=\x20sampleLi'+'ghtTexture'+'F(clusterL'+'ightData,\x20'+'{CLUSTER_T'+'EXTURE_COL'+'OR_ANGLES_'+'BIAS});\x0a\x0a\x20'+'\x20\x20\x20//\x20stor'+'e\x20floats\x20w'+'e\x20decode\x20l'+'ater\x20as\x20ne'+'eded\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.angl'+'esData\x20=\x20h'+'alfData.z;'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.biasesDa'+'ta\x20=\x20halfD'+'ata.w;\x0a\x0a\x20\x20'+'\x20\x20//\x20decom'+'press\x20colo'+'r\x20half-flo'+'ats\x0a\x20\x20\x20\x20ve'+'c2\x20colorRG'+'\x20=\x20unpackH'+'alf2x16(fl'+'oatBitsToU'+'int(halfDa'+'ta.x));\x0a\x20\x20'+'\x20\x20vec2\x20col'+'orB_\x20=\x20unp'+'ackHalf2x1'+'6(floatBit'+'sToUint(ha'+'lfData.y))'+';\x0a\x20\x20\x20\x20clus'+'terLightDa'+'ta.color\x20='+'\x20vec3(colo'+'rRG,\x20color'+'B_.x)\x20*\x20{L'+'IGHT_COLOR'+'_DIVIDER};'+'\x0a\x0a\x20\x20\x20\x20//\x20p'+'osition\x20an'+'d\x20range,\x20f'+'ull\x20floats'+'\x0a\x20\x20\x20\x20vec4\x20'+'lightPosRa'+'nge\x20=\x20samp'+'leLightTex'+'tureF(clus'+'terLightDa'+'ta,\x20{CLUST'+'ER_TEXTURE'+'_POSITION_'+'RANGE});\x0a\x20'+'\x20\x20\x20cluster'+'LightData.'+'position\x20='+'\x20lightPosR'+'ange.xyz;\x0a'+'\x20\x20\x20\x20cluste'+'rLightData'+'.range\x20=\x20l'+'ightPosRan'+'ge.w;\x0a\x0a\x20\x20\x20'+'\x20//\x20spot\x20d'+'irection\x20&'+'\x20flags\x20dat'+'a\x0a\x20\x20\x20\x20vec4'+'\x20lightDir_'+'Flags\x20=\x20sa'+'mpleLightT'+'extureF(cl')+('usterLight'+'Data,\x20{CLU'+'STER_TEXTU'+'RE_DIRECTI'+'ON_FLAGS})'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'spot\x20light'+'\x20direction'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.directio'+'n\x20=\x20lightD'+'ir_Flags.x'+'yz;\x0a\x0a\x20\x20\x20\x20/'+'/\x2032bit\x20fl'+'ags\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.flags'+'\x20=\x20floatBi'+'tsToUint(l'+'ightDir_Fl'+'ags.w);\x0a\x20\x20'+'\x20\x20clusterL'+'ightData.i'+'sSpot\x20=\x20(c'+'lusterLigh'+'tData.flag'+'s\x20&\x20(1u\x20<<'+'\x2030u))\x20!=\x20'+'0u;\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.shape'+'\x20=\x20(cluste'+'rLightData'+'.flags\x20>>\x20'+'28u)\x20&\x200x3'+'u;\x0a\x20\x20\x20\x20clu'+'sterLightD'+'ata.fallof'+'fModeLinea'+'r\x20=\x20(clust'+'erLightDat'+'a.flags\x20&\x20'+'(1u\x20<<\x2027u'+'))\x20==\x200u;\x0a'+'\x20\x20\x20\x20cluste'+'rLightData'+'.shadowInt'+'ensity\x20=\x20f'+'loat((clus'+'terLightDa'+'ta.flags\x20>'+'>\x200u)\x20&\x200x'+'FFu)\x20/\x20255'+'.0;\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.cooki'+'eIntensity'+'\x20=\x20float(('+'clusterLig'+'htData.fla'+'gs\x20>>\x208u)\x20'+'&\x200xFFu)\x20/'+'\x20255.0;\x0a\x20\x20'+'\x20\x20clusterL'+'ightData.i'+'sDynamic\x20='+'\x20(clusterL'+'ightData.f'+'lags\x20&\x20(1u'+'\x20<<\x2022u))\x20'+'!=\x200u;\x0a\x20\x20\x20'+'\x20clusterLi'+'ghtData.is'+'Lightmappe'+'d\x20=\x20(clust'+'erLightDat'+'a.flags\x20&\x20'+'(1u\x20<<\x2021u'+'))\x20!=\x200u;\x0a'+'}\x0a\x0avoid\x20de'+'codeCluste'+'rLightSpot'+'(inout\x20Clu'+'sterLightD'+'ata\x20cluste'+'rLightData'+')\x20{\x0a\x0a\x20\x20\x20\x20/'+'/\x20spot\x20lig'+'ht\x20cos\x20ang'+'les\x0a\x20\x20\x20\x20ve'+'c2\x20angles\x20'+'=\x20unpackHa'+'lf2x16(flo'+'atBitsToUi'+'nt(cluster'+'LightData.'+'anglesData'+'));\x0a\x20\x20\x20\x20cl'+'usterLight')+('Data.inner'+'ConeAngleC'+'os\x20=\x20angle'+'s.x;\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.oute'+'rConeAngle'+'Cos\x20=\x20angl'+'es.y;\x0a}\x0a\x0av'+'oid\x20decode'+'ClusterLig'+'htOmniAtla'+'sViewport('+'inout\x20Clus'+'terLightDa'+'ta\x20cluster'+'LightData)'+'\x20{\x0a\x20\x20\x20\x20clu'+'sterLightD'+'ata.omniAt'+'lasViewpor'+'t\x20=\x20sample'+'LightTextu'+'reF(cluste'+'rLightData'+',\x20{CLUSTER'+'_TEXTURE_P'+'ROJ_MAT_0}'+').xyz;\x0a}\x0a\x0a'+'void\x20decod'+'eClusterLi'+'ghtAreaDat'+'a(inout\x20Cl'+'usterLight'+'Data\x20clust'+'erLightDat'+'a)\x20{\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.half'+'Width\x20=\x20sa'+'mpleLightT'+'extureF(cl'+'usterLight'+'Data,\x20{CLU'+'STER_TEXTU'+'RE_AREA_DA'+'TA_WIDTH})'+'.xyz;\x0a\x20\x20\x20\x20'+'clusterLig'+'htData.hal'+'fHeight\x20=\x20'+'sampleLigh'+'tTextureF('+'clusterLig'+'htData,\x20{C'+'LUSTER_TEX'+'TURE_AREA_'+'DATA_HEIGH'+'T}).xyz;\x0a}'+'\x0a\x0avoid\x20dec'+'odeCluster'+'LightProje'+'ctionMatri'+'xData(inou'+'t\x20ClusterL'+'ightData\x20c'+'lusterLigh'+'tData)\x20{\x0a\x20'+'\x20\x20\x20\x0a\x20\x20\x20\x20//'+'\x20shadow\x20ma'+'trix\x0a\x20\x20\x20\x20v'+'ec4\x20m0\x20=\x20s'+'ampleLight'+'TextureF(c'+'lusterLigh'+'tData,\x20{CL'+'USTER_TEXT'+'URE_PROJ_M'+'AT_0});\x0a\x20\x20'+'\x20\x20vec4\x20m1\x20'+'=\x20sampleLi'+'ghtTexture'+'F(clusterL'+'ightData,\x20'+'{CLUSTER_T'+'EXTURE_PRO'+'J_MAT_1});'+'\x0a\x20\x20\x20\x20vec4\x20'+'m2\x20=\x20sampl'+'eLightText'+'ureF(clust'+'erLightDat'+'a,\x20{CLUSTE'+'R_TEXTURE_'+'PROJ_MAT_2'+'});\x0a\x20\x20\x20\x20ve'+'c4\x20m3\x20=\x20sa'+'mpleLightT'+'extureF(cl'+'usterLight')+('Data,\x20{CLU'+'STER_TEXTU'+'RE_PROJ_MA'+'T_3});\x0a\x20\x20\x20'+'\x20lightProj'+'ectionMatr'+'ix\x20=\x20mat4('+'m0,\x20m1,\x20m2'+',\x20m3);\x0a}\x0a\x0a'+'void\x20decod'+'eClusterLi'+'ghtShadowD'+'ata(inout\x20'+'ClusterLig'+'htData\x20clu'+'sterLightD'+'ata)\x20{\x0a\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20//\x20s'+'hadow\x20bias'+'es\x0a\x20\x20\x20\x20vec'+'2\x20biases\x20='+'\x20unpackHal'+'f2x16(floa'+'tBitsToUin'+'t(clusterL'+'ightData.b'+'iasesData)'+');\x0a\x20\x20\x20\x20clu'+'sterLightD'+'ata.shadow'+'Bias\x20=\x20bia'+'ses.x;\x0a\x20\x20\x20'+'\x20clusterLi'+'ghtData.sh'+'adowNormal'+'Bias\x20=\x20bia'+'ses.y;\x0a}\x0a\x0a'+'void\x20decod'+'eClusterLi'+'ghtCookieD'+'ata(inout\x20'+'ClusterLig'+'htData\x20clu'+'sterLightD'+'ata)\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x20extra'+'ct\x20channel'+'\x20mask\x20from'+'\x20flags\x0a\x20\x20\x20'+'\x20uint\x20cook'+'ieFlags\x20=\x20'+'(clusterLi'+'ghtData.fl'+'ags\x20>>\x2023u'+')\x20&\x200x0Fu;'+'\x20\x20//\x204bits'+',\x20each\x20bit'+'\x20enables\x20a'+'\x20channel\x0a\x20'+'\x20\x20\x20cluster'+'LightData.'+'cookieChan'+'nelMask\x20=\x20'+'vec4(uvec4'+'(cookieFla'+'gs)\x20&\x20uvec'+'4(1u,\x202u,\x20'+'4u,\x208u));\x0a'+'\x20\x20\x20\x20cluste'+'rLightData'+'.cookieCha'+'nnelMask\x20='+'\x20step(1.0,'+'\x20clusterLi'+'ghtData.co'+'okieChanne'+'lMask);\x20\x20/'+'/\x20Normaliz'+'e\x20to\x200.0\x20o'+'r\x201.0\x0a}\x0a\x0av'+'oid\x20evalua'+'teLight(\x0a\x20'+'\x20\x20\x20Cluster'+'LightData\x20'+'light,\x20\x0a\x20\x20'+'\x20\x20vec3\x20wor'+'ldNormal,\x20'+'\x0a\x20\x20\x20\x20vec3\x20'+'viewDir,\x20\x0a'+'\x20\x20\x20\x20vec3\x20r'+'eflectionD'+'ir,\x0a#if\x20de'+'fined(LIT_'+'CLEARCOAT)'+'\x0a\x20\x20\x20\x20vec3\x20'+'clearcoatR'+'eflectionD'+'ir,\x0a#endif'+'\x0a\x20\x20\x20\x20float'+'\x20gloss,\x20\x0a\x20')+('\x20\x20\x20vec3\x20sp'+'ecularity,'+'\x20\x0a\x20\x20\x20\x20vec3'+'\x20geometric'+'Normal,\x20\x0a\x20'+'\x20\x20\x20mat3\x20tb'+'n,\x20\x0a#if\x20de'+'fined(LIT_'+'IRIDESCENC'+'E)\x0a\x20\x20\x20\x20vec'+'3\x20iridesce'+'nceFresnel'+',\x0a#endif\x0a\x20'+'\x20\x20\x20vec3\x20cl'+'earcoat_wo'+'rldNormal,'+'\x0a\x20\x20\x20\x20float'+'\x20clearcoat'+'_gloss,\x0a\x20\x20'+'\x20\x20float\x20sh'+'een_gloss,'+'\x0a\x20\x20\x20\x20float'+'\x20iridescen'+'ce_intensi'+'ty\x0a)\x20{\x0a\x0a\x20\x20'+'\x20\x20vec3\x20coo'+'kieAttenua'+'tion\x20=\x20vec'+'3(1.0);\x0a\x20\x20'+'\x20\x20float\x20di'+'ffuseAtten'+'uation\x20=\x201'+'.0;\x0a\x20\x20\x20\x20fl'+'oat\x20fallof'+'fAttenuati'+'on\x20=\x201.0;\x0a'+'\x0a\x20\x20\x20\x20//\x20ev'+'aluate\x20omn'+'i\x20part\x20of\x20'+'the\x20light\x0a'+'\x20\x20\x20\x20vec3\x20l'+'ightDirW\x20='+'\x20evalOmniL'+'ight(light'+'.position)'+';\x0a\x20\x20\x20\x20vec3'+'\x20lightDirN'+'ormW\x20=\x20nor'+'malize(lig'+'htDirW);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20CLUSTER_A'+'REALIGHTS\x0a'+'\x0a\x20\x20\x20\x20//\x20di'+'stance\x20att'+'enuation\x0a\x20'+'\x20\x20\x20if\x20(lig'+'ht.shape\x20!'+'=\x20{LIGHTSH'+'APE_PUNCTU'+'AL})\x20{\x20//\x20'+'area\x20light'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20area\x20li'+'ghts\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20decodeC'+'lusterLigh'+'tAreaData('+'light);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'handle\x20lig'+'ht\x20shape\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(light.sha'+'pe\x20==\x20{LIG'+'HTSHAPE_RE'+'CT})\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'alcRectLig'+'htValues(l'+'ight.posit'+'ion,\x20light'+'.halfWidth'+',\x20light.ha'+'lfHeight);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20if\x20('+'light.shap'+'e\x20==\x20{LIGH'+'TSHAPE_DIS'+'K})\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ca'+'lcDiskLigh'+'tValues(li'+'ght.positi'+'on,\x20light.'+'halfWidth,'+'\x20light.hal'+'fHeight);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20')+('else\x20{\x20//\x20'+'sphere\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'alcSphereL'+'ightValues'+'(light.pos'+'ition,\x20lig'+'ht.halfWid'+'th,\x20light.'+'halfHeight'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20falloffA'+'ttenuation'+'\x20=\x20getFall'+'offWindow('+'light.rang'+'e,\x20lightDi'+'rW);\x0a\x0a\x20\x20\x20\x20'+'}\x20else\x0a\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20{\x20\x20\x20//'+'\x20punctual\x20'+'light\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20if\x20(l'+'ight.fallo'+'ffModeLine'+'ar)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20fall'+'offAttenua'+'tion\x20=\x20get'+'FalloffLin'+'ear(light.'+'range,\x20lig'+'htDirW);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20fallof'+'fAttenuati'+'on\x20=\x20getFa'+'lloffInvSq'+'uared(ligh'+'t.range,\x20l'+'ightDirW);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20if\x20(fall'+'offAttenua'+'tion\x20>\x200.0'+'0001)\x20{\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20CLUSTE'+'R_AREALIGH'+'TS\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(ligh'+'t.shape\x20!='+'\x20{LIGHTSHA'+'PE_PUNCTUA'+'L})\x20{\x20//\x20a'+'rea\x20light\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20hand'+'le\x20light\x20s'+'hape\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(light.sha'+'pe\x20==\x20{LIG'+'HTSHAPE_RE'+'CT})\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20diffuse'+'Attenuatio'+'n\x20=\x20getRec'+'tLightDiff'+'use(worldN'+'ormal,\x20vie'+'wDir,\x20ligh'+'tDirW,\x20lig'+'htDirNormW'+')\x20*\x2016.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x20else\x20i'+'f\x20(light.s'+'hape\x20==\x20{L'+'IGHTSHAPE_'+'DISK})\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20diffu'+'seAttenuat'+'ion\x20=\x20getD'+'iskLightDi'+'ffuse(worl'+'dNormal,\x20v'+'iewDir,\x20li'+'ghtDirW,\x20l'+'ightDirNor'+'mW)\x20*\x2016.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x20else'+'\x20{\x20//\x20sphe'+'re\x0a\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'iffuseAtte'+'nuation\x20=\x20'+'getSphereL'+'ightDiffus'+'e(worldNor'+'mal,\x20viewD'+'ir,\x20lightD'+'irW,\x20light'+'DirNormW)\x20'+'*\x2016.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x20else\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20fal'+'loffAttenu'+'ation\x20*=\x20g'+'etLightDif'+'fuse(world'+'Normal,\x20vi'+'ewDir,\x20lig'+'htDirNormW'+');\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20spot'+'\x20light\x20fal'+'loff\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(lig'+'ht.isSpot)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20decod'+'eClusterLi'+'ghtSpot(li'+'ght);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fa'+'lloffAtten'+'uation\x20*=\x20'+'getSpotEff'+'ect(light.'+'direction,'+'\x20light.inn'+'erConeAngl'+'eCos,\x20ligh'+'t.outerCon'+'eAngleCos,'+'\x20lightDirN'+'ormW);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(CL'+'USTER_COOK'+'IES)\x20||\x20de'+'fined(CLUS'+'TER_SHADOW'+'S)\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(fall'+'offAttenua'+'tion\x20>\x200.0'+'0001)\x20{\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20shadow'+'\x20/\x20cookie\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(ligh'+'t.shadowIn'+'tensity\x20>\x20'+'0.0\x20||\x20lig'+'ht.cookieI'+'ntensity\x20>'+'\x200.0)\x20{\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20sh'+'ared\x20shado'+'w\x20/\x20cookie'+'\x20data\x20depe'+'nds\x20on\x20lig'+'ht\x20type\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(li'+'ght.isSpot'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20decode'+'ClusterLig'+'htProjecti'+'onMatrixDa'+'ta(light);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x20e'+'lse\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20deco'+'deClusterL'+'ightOmniAt'+'lasViewpor'+'t(light);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20shadowTex'+'tureResolu'+'tion\x20=\x20sha'+'dowAtlasPa'+'rams.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'shadowEdge'+'Pixels\x20=\x20s'+'hadowAtlas'+'Params.y;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20CLUSTE'+'R_COOKIES\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'cookie\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(lig'+'ht.cookieI'+'ntensity\x20>'+'\x200.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20de'+'codeCluste'+'rLightCook'+'ieData(lig'+'ht);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'light.isSp'+'ot)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'cookieAtte'+'nuation\x20=\x20'+'getCookie2'+'DClustered'+'(TEXTURE_P'+'ASS(cookie'+'AtlasTextu'+'re),\x20light'+'Projection'+'Matrix,\x20vP'+'ositionW,\x20'+'light.cook'+'ieIntensit'+'y,\x20light.c'+'ookieChann'+'elMask);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20cookieAt'+'tenuation\x20'+'=\x20getCooki'+'eCubeClust'+'ered(TEXTU'+'RE_PASS(co'+'okieAtlasT'+'exture),\x20l'+'ightDirW,\x20'+'light.cook'+'ieIntensit'+'y,\x20light.c'+'ookieChann'+'elMask,\x20sh'+'adowTextur'+'eResolutio'+'n,\x20shadowE'+'dgePixels,'+'\x20light.omn'+'iAtlasView'+'port);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20CLUST'+'ER_SHADOWS'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20shadow\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(li'+'ght.shadow'+'Intensity\x20'+'>\x200.0)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d')+('ecodeClust'+'erLightSha'+'dowData(li'+'ght);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'4\x20shadowPa'+'rams\x20=\x20vec'+'4(shadowTe'+'xtureResol'+'ution,\x20lig'+'ht.shadowN'+'ormalBias,'+'\x20light.sha'+'dowBias,\x201'+'.0\x20/\x20light'+'.range);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(light.'+'isSpot)\x20{\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20sp'+'ot\x20shadow\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20s'+'hadowCoord'+'\x20=\x20getShad'+'owCoordPer'+'spZbufferN'+'ormalOffse'+'t(lightPro'+'jectionMat'+'rix,\x20shado'+'wParams,\x20g'+'eometricNo'+'rmal);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(CL'+'USTER_SHAD'+'OW_TYPE_PC'+'F1)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20sh'+'adow\x20=\x20get'+'ShadowSpot'+'ClusteredP'+'CF1(SHADOW'+'MAP_PASS(s'+'hadowAtlas'+'Texture),\x20'+'shadowCoor'+'d,\x20shadowP'+'arams);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#elif\x20de'+'fined(CLUS'+'TER_SHADOW'+'_TYPE_PCF3'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20shad'+'ow\x20=\x20getSh'+'adowSpotCl'+'usteredPCF'+'3(SHADOWMA'+'P_PASS(sha'+'dowAtlasTe'+'xture),\x20sh'+'adowCoord,'+'\x20shadowPar'+'ams);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#elif\x20defi'+'ned(CLUSTE'+'R_SHADOW_T'+'YPE_PCF5)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20shadow'+'\x20=\x20getShad'+'owSpotClus'+'teredPCF5('+'SHADOWMAP_'+'PASS(shado'+'wAtlasText'+'ure),\x20shad'+'owCoord,\x20s'+'hadowParam')+('s);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lif\x20define'+'d(CLUSTER_'+'SHADOW_TYP'+'E_PCSS)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20shadow\x20='+'\x20getShadow'+'SpotCluste'+'redPCSS(SH'+'ADOWMAP_PA'+'SS(shadowA'+'tlasTextur'+'e),\x20shadow'+'Coord,\x20sha'+'dowParams)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20fal'+'loffAttenu'+'ation\x20*=\x20m'+'ix(1.0,\x20sh'+'adow,\x20ligh'+'t.shadowIn'+'tensity);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x20else\x20{\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20om'+'ni\x20shadow\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20d'+'ir\x20=\x20norma'+'lOffsetPoi'+'ntShadow(s'+'hadowParam'+'s,\x20light.p'+'osition,\x20l'+'ightDirW,\x20'+'lightDirNo'+'rmW,\x20geome'+'tricNormal'+');\x20\x20//\x20nor'+'malBias\x20ad'+'justed\x20for'+'\x20distance\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(CLU'+'STER_SHADO'+'W_TYPE_PCF'+'1)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20sha'+'dow\x20=\x20getS'+'hadowOmniC'+'lusteredPC'+'F1(SHADOWM'+'AP_PASS(sh'+'adowAtlasT'+'exture),\x20s'+'hadowParam'+'s,\x20light.o'+'mniAtlasVi'+'ewport,\x20sh'+'adowEdgePi'+'xels,\x20dir)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#eli'+'f\x20defined('+'CLUSTER_SH'+'ADOW_TYPE_'+'PCF3)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'shadow\x20=\x20g'+'etShadowOm'+'niClustere'+'dPCF3(SHAD'+'OWMAP_PASS'+'(shadowAtl'+'asTexture)'+',\x20shadowPa'+'rams,\x20ligh'+'t.omniAtla'+'sViewport,')+('\x20shadowEdg'+'ePixels,\x20d'+'ir);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'elif\x20defin'+'ed(CLUSTER'+'_SHADOW_TY'+'PE_PCF5)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20shadow\x20'+'=\x20getShado'+'wOmniClust'+'eredPCF5(S'+'HADOWMAP_P'+'ASS(shadow'+'AtlasTextu'+'re),\x20shado'+'wParams,\x20l'+'ight.omniA'+'tlasViewpo'+'rt,\x20shadow'+'EdgePixels'+',\x20dir);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20falloff'+'Attenuatio'+'n\x20*=\x20mix(1'+'.0,\x20shadow'+',\x20light.sh'+'adowIntens'+'ity);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20diffuse\x20'+'/\x20specular'+'\x20/\x20clearco'+'at\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20CL'+'USTER_AREA'+'LIGHTS\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'light.shap'+'e\x20!=\x20{LIGH'+'TSHAPE_PUN'+'CTUAL})\x20{\x20'+'//\x20area\x20li'+'ght\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'area\x20light'+'\x20diffuse\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20areaDi'+'ffuse\x20=\x20(d'+'iffuseAtte'+'nuation\x20*\x20'+'falloffAtt'+'enuation)\x20'+'*\x20light.co'+'lor\x20*\x20cook'+'ieAttenuat'+'ion;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20defi'+'ned(LIT_SP'+'ECULAR)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ar'+'eaDiffuse\x20'+'=\x20mix(area'+'Diffuse,\x20v'+'ec3(0),\x20dL'+'TCSpecFres'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20area'+'\x20light\x20dif'+'fuse\x20-\x20it\x20'+'does\x20not\x20m'+'ix\x20diffuse'+'\x20lighting\x20')+('into\x20specu'+'lar\x20attenu'+'ation\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dDiffuse'+'Light\x20+=\x20a'+'reaDiffuse'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20specular'+'\x20and\x20clear'+'\x20coat\x20are\x20'+'material\x20s'+'ettings\x20an'+'d\x20get\x20incl'+'uded\x20by\x20a\x20'+'define\x20bas'+'ed\x20on\x20the\x20'+'material\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20area\x20ligh'+'t\x20specular'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20areaLig'+'htSpecular'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20i'+'f\x20(light.s'+'hape\x20==\x20{L'+'IGHTSHAPE_'+'RECT})\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'reaLightSp'+'ecular\x20=\x20g'+'etRectLigh'+'tSpecular('+'worldNorma'+'l,\x20viewDir'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20if\x20('+'light.shap'+'e\x20==\x20{LIGH'+'TSHAPE_DIS'+'K})\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20area'+'LightSpecu'+'lar\x20=\x20getD'+'iskLightSp'+'ecular(wor'+'ldNormal,\x20'+'viewDir);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x20el'+'se\x20{\x20//\x20sp'+'here\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20areaL'+'ightSpecul'+'ar\x20=\x20getSp'+'hereLightS'+'pecular(wo'+'rldNormal,'+'\x20viewDir);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dSpe'+'cularLight'+'\x20+=\x20dLTCSp'+'ecFres\x20*\x20a'+'reaLightSp'+'ecular\x20*\x20f'+'alloffAtte'+'nuation\x20*\x20'+'light.colo'+'r\x20*\x20cookie'+'Attenuatio'+'n;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_CLEARCOAT'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20area\x20'+'light\x20spec'+'ular\x20clear'+'\x20coat\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20areaLigh'+'tSpecularC')+('C;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(li'+'ght.shape\x20'+'==\x20{LIGHTS'+'HAPE_RECT}'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ar'+'eaLightSpe'+'cularCC\x20=\x20'+'getRectLig'+'htSpecular'+'(clearcoat'+'_worldNorm'+'al,\x20viewDi'+'r);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x20else'+'\x20if\x20(light'+'.shape\x20==\x20'+'{LIGHTSHAP'+'E_DISK})\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20areaL'+'ightSpecul'+'arCC\x20=\x20get'+'DiskLightS'+'pecular(cl'+'earcoat_wo'+'rldNormal,'+'\x20viewDir);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x20else\x20{\x20'+'//\x20sphere\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20areaLi'+'ghtSpecula'+'rCC\x20=\x20getS'+'phereLight'+'Specular(c'+'learcoat_w'+'orldNormal'+',\x20viewDir)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20ccSpe'+'cularLight'+'\x20+=\x20ccLTCS'+'pecFres\x20*\x20'+'areaLightS'+'pecularCC\x20'+'*\x20falloffA'+'ttenuation'+'\x20*\x20light.c'+'olor\x20\x20*\x20co'+'okieAttenu'+'ation;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x20else\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20{\x20\x20\x20\x20//\x20'+'punctual\x20l'+'ight\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20punctual\x20'+'light\x20diff'+'use\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20p'+'unctualDif'+'fuse\x20=\x20fal'+'loffAttenu'+'ation\x20*\x20li'+'ght.color\x20'+'*\x20cookieAt'+'tenuation;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20defined('+'CLUSTER_AR'+'EALIGHTS)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(LI'+'T_SPECULAR'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20punctual')+('Diffuse\x20=\x20'+'mix(punctu'+'alDiffuse,'+'\x20vec3(0),\x20'+'specularit'+'y);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20+=\x20punctu'+'alDiffuse;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20specul'+'ar\x20and\x20cle'+'ar\x20coat\x20ar'+'e\x20material'+'\x20settings\x20'+'and\x20get\x20in'+'cluded\x20by\x20'+'a\x20define\x20b'+'ased\x20on\x20th'+'e\x20material'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SPECUL'+'AR\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20halfD'+'ir\x20=\x20norma'+'lize(-ligh'+'tDirNormW\x20'+'+\x20viewDir)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20sp'+'ecular\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SPECUL'+'AR_FRESNEL'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dSpecular'+'Light\x20+=\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getLig'+'htSpecular'+'(halfDir,\x20'+'reflection'+'Dir,\x20world'+'Normal,\x20vi'+'ewDir,\x20lig'+'htDirNormW'+',\x20gloss,\x20t'+'bn)\x20*\x20fall'+'offAttenua'+'tion\x20*\x20lig'+'ht.color\x20*'+'\x20cookieAtt'+'enuation\x20*'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20getF'+'resnel(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dot('+'viewDir,\x20h'+'alfDir),\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'oss,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20specul'+'arity\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_IRID'+'ESCENCE)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20,\x20i'+'ridescence'+'Fresnel,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20iri'+'descence_i'+'ntensity\x0a\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dSpecul'+'arLight\x20+='+'\x20getLightS'+'pecular(ha'+'lfDir,\x20ref'+'lectionDir'+',\x20worldNor'+'mal,\x20viewD'+'ir,\x20lightD'+'irNormW,\x20g'+'loss,\x20tbn)'+'\x20*\x20falloff'+'Attenuatio'+'n\x20*\x20light.'+'color\x20*\x20co'+'okieAttenu'+'ation\x20*\x20sp'+'ecularity;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SPECULA'+'R_FRESNEL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccSpec'+'ularLight\x20'+'+=\x20getLigh'+'tSpecular('+'halfDir,\x20c'+'learcoatRe'+'flectionDi'+'r,\x20clearco'+'at_worldNo'+'rmal,\x20view'+'Dir,\x20light'+'DirNormW,\x20'+'clearcoat_'+'gloss,\x20tbn'+')\x20*\x20fallof'+'fAttenuati'+'on\x20*\x20light'+'.color\x20*\x20c'+'ookieAtten'+'uation\x20*\x20g'+'etFresnelC'+'C(dot(view'+'Dir,\x20halfD'+'ir));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ccSp'+'ecularLigh'+'t\x20+=\x20getLi'+'ghtSpecula'+'r(halfDir,'+'\x20clearcoat'+'Reflection'+'Dir,\x20clear'+'coat_world'+'Normal,\x20vi'+'ewDir,\x20lig'+'htDirNormW'+',\x20clearcoa'+'t_gloss,\x20t'+'bn)\x20*\x20fall'+'offAttenua'+'tion\x20*\x20lig'+'ht.color\x20*'+'\x20cookieAtt'+'enuation;\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'HEEN\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20sSpec')+('ularLight\x20'+'+=\x20getLigh'+'tSpecularS'+'heen(halfD'+'ir,\x20worldN'+'ormal,\x20vie'+'wDir,\x20ligh'+'tDirNormW,'+'\x20sheen_glo'+'ss)\x20*\x20fall'+'offAttenua'+'tion\x20*\x20lig'+'ht.color\x20*'+'\x20cookieAtt'+'enuation;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20Wri'+'te\x20to\x20glob'+'al\x20attenua'+'tion\x20value'+'s\x20(for\x20lig'+'htmapper)\x0a'+'\x20\x20\x20\x20dAtten'+'\x20=\x20falloff'+'Attenuatio'+'n;\x0a\x20\x20\x20\x20dLi'+'ghtDirNorm'+'W\x20=\x20lightD'+'irNormW;\x0a}'+'\x0a\x0avoid\x20eva'+'luateClust'+'erLight(\x0a\x20'+'\x20\x20\x20float\x20l'+'ightIndex,'+'\x20\x0a\x20\x20\x20\x20vec3'+'\x20worldNorm'+'al,\x20\x0a\x20\x20\x20\x20v'+'ec3\x20viewDi'+'r,\x20\x0a\x20\x20\x20\x20ve'+'c3\x20reflect'+'ionDir,\x20\x0a#'+'if\x20defined'+'(LIT_CLEAR'+'COAT)\x0a\x20\x20\x20\x20'+'vec3\x20clear'+'coatReflec'+'tionDir,\x0a#'+'endif\x0a\x20\x20\x20\x20'+'float\x20glos'+'s,\x20\x0a\x20\x20\x20\x20ve'+'c3\x20specula'+'rity,\x20\x0a\x20\x20\x20'+'\x20vec3\x20geom'+'etricNorma'+'l,\x20\x0a\x20\x20\x20\x20ma'+'t3\x20tbn,\x20\x0a#'+'if\x20defined'+'(LIT_IRIDE'+'SCENCE)\x0a\x20\x20'+'\x20\x20vec3\x20iri'+'descenceFr'+'esnel,\x0a#en'+'dif\x0a\x20\x20\x20\x20ve'+'c3\x20clearco'+'at_worldNo'+'rmal,\x0a\x20\x20\x20\x20'+'float\x20clea'+'rcoat_glos'+'s,\x0a\x20\x20\x20\x20flo'+'at\x20sheen_g'+'loss,\x0a\x20\x20\x20\x20'+'float\x20irid'+'escence_in'+'tensity\x0a)\x20'+'{\x0a\x0a\x20\x20\x20\x20//\x20'+'decode\x20cor'+'e\x20light\x20da'+'ta\x20from\x20te'+'xtures\x0a\x20\x20\x20'+'\x20ClusterLi'+'ghtData\x20cl'+'usterLight'+'Data;\x0a\x20\x20\x20\x20'+'decodeClus'+'terLightCo'+'re(cluster'+'LightData,'+'\x20lightInde'+'x);\x0a\x0a\x20\x20\x20\x20/'+'/\x20evaluate'+'\x20light\x20if\x20'+'it\x20uses\x20ac'+'cepted\x20lig'+'ht\x20mask\x0a\x20\x20'+'\x20\x20#ifdef\x20C')+('LUSTER_MES'+'H_DYNAMIC_'+'LIGHTS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20bool\x20'+'acceptLigh'+'tMask\x20=\x20cl'+'usterLight'+'Data.isDyn'+'amic;\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20bool\x20a'+'cceptLight'+'Mask\x20=\x20clu'+'sterLightD'+'ata.isLigh'+'tmapped;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20if\x20(a'+'cceptLight'+'Mask)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20evalua'+'teLight(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20clusterLi'+'ghtData,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20worldNor'+'mal,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20vi'+'ewDir,\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'reflection'+'Dir,\x20\x0a#if\x20'+'defined(LI'+'T_CLEARCOA'+'T)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20clear'+'coatReflec'+'tionDir,\x20\x0a'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'loss,\x20\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'pecularity'+',\x20\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20geome'+'tricNormal'+',\x20\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20tbn,\x20'+'\x0a#if\x20defin'+'ed(LIT_IRI'+'DESCENCE)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20iridesce'+'nceFresnel'+',\x0a#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20clearcoat'+'_worldNorm'+'al,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20clea'+'rcoat_glos'+'s,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20sheen'+'_gloss,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'iridescenc'+'e_intensit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+');\x0a}\x0a\x0avoid'+'\x20addCluste'+'redLights('+'\x0a\x20\x20\x20\x20vec3\x20'+'worldNorma'+'l,\x20\x0a\x20\x20\x20\x20ve'+'c3\x20viewDir'+',\x20\x0a\x20\x20\x20\x20vec'+'3\x20reflecti'+'onDir,\x20\x0a#i'+'f\x20defined('+'LIT_CLEARC'+'OAT)\x0a\x20\x20\x20\x20v'+'ec3\x20clearc'+'oatReflect'+'ionDir,\x0a#e'+'ndif\x0a\x20\x20\x20\x20f'+'loat\x20gloss'+',\x20\x0a\x20\x20\x20\x20vec'+'3\x20specular'+'ity,\x20\x0a\x20\x20\x20\x20'+'vec3\x20geome'+'tricNormal'+',\x20\x0a\x20\x20\x20\x20mat'+'3\x20tbn,\x20\x0a#i'+'f\x20defined('+'LIT_IRIDES'+'CENCE)\x0a\x20\x20\x20'+'\x20vec3\x20irid'+'escenceFre'+'snel,\x0a#end')+('if\x0a\x20\x20\x20\x20vec'+'3\x20clearcoa'+'t_worldNor'+'mal,\x0a\x20\x20\x20\x20f'+'loat\x20clear'+'coat_gloss'+',\x0a\x20\x20\x20\x20floa'+'t\x20sheen_gl'+'oss,\x0a\x20\x20\x20\x20f'+'loat\x20iride'+'scence_int'+'ensity\x0a)\x20{'+'\x0a\x0a\x20\x20\x20\x20//\x20s'+'kip\x20lights'+'\x20if\x20no\x20lig'+'hts\x20at\x20all'+'\x0a\x20\x20\x20\x20if\x20(c'+'lusterSkip'+'\x20>\x200.5)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn;\x0a\x0a\x20\x20\x20\x20/'+'/\x20world\x20sp'+'ace\x20positi'+'on\x20to\x203d\x20i'+'nteger\x20cel'+'l\x20cordinat'+'es\x20in\x20the\x20'+'cluster\x20st'+'ructure\x0a\x20\x20'+'\x20\x20vec3\x20cel'+'lCoords\x20=\x20'+'floor((vPo'+'sitionW\x20-\x20'+'clusterBou'+'ndsMin)\x20*\x20'+'clusterCel'+'lsCountByB'+'oundsSize)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'no\x20lightin'+'g\x20when\x20cel'+'l\x20coordina'+'te\x20is\x20out\x20'+'of\x20range\x0a\x20'+'\x20\x20\x20if\x20(!(a'+'ny(lessTha'+'n(cellCoor'+'ds,\x20vec3(0'+'.0)))\x20||\x20a'+'ny(greater'+'ThanEqual('+'cellCoords'+',\x20clusterC'+'ellsMax)))'+')\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20cell'+'\x20index\x20(ma'+'pping\x20from'+'\x203d\x20cell\x20c'+'oordinates'+'\x20to\x20linear'+'\x20memory)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20cellInd'+'ex\x20=\x20dot(c'+'lusterCell'+'sDot,\x20cell'+'Coords);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20convert\x20c'+'ell\x20index\x20'+'to\x20uv\x20coor'+'dinates\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20clusterV'+'\x20=\x20floor(c'+'ellIndex\x20*'+'\x20clusterTe'+'xtureSize.'+'y);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20cl'+'usterU\x20=\x20c'+'ellIndex\x20-'+'\x20(clusterV'+'\x20*\x20cluster'+'TextureSiz'+'e.x);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20lo'+'op\x20over\x20ma'+'ximum\x20numb'+'er\x20of\x20ligh'+'t\x20cells\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20for\x20'+'(int\x20light'+'CellIndex\x20'+'=\x200;\x20light'+'CellIndex\x20'+'<\x20clusterM'+'axCells;\x20l'+'ightCellIn')+('dex++)\x20{\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20using'+'\x20a\x20single\x20'+'channel\x20te'+'xture\x20with'+'\x20data\x20in\x20r'+'ed\x20channel'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20l'+'ightIndex\x20'+'=\x20texelFet'+'ch(cluster'+'WorldTextu'+'re,\x20ivec2('+'int(cluste'+'rU)\x20+\x20ligh'+'tCellIndex'+',\x20clusterV'+'),\x200).x;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(ligh'+'tIndex\x20<=\x20'+'0.0)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20break;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20evaluateC'+'lusterLigh'+'t(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'ightIndex\x20'+'*\x20255.0,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20worl'+'dNormal,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20view'+'Dir,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20reflecti'+'onDir,\x0a#if'+'\x20defined(L'+'IT_CLEARCO'+'AT)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'clearcoatR'+'eflectionD'+'ir,\x0a#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20glo'+'ss,\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20speculari'+'ty,\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20geometric'+'Normal,\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20tbn,\x20'+'\x0a#if\x20defin'+'ed(LIT_IRI'+'DESCENCE)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20irid'+'escenceFre'+'snel,\x0a#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'learcoat_w'+'orldNormal'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20cl'+'earcoat_gl'+'oss,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sheen_glo'+'ss,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'iridescenc'+'e_intensit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20);\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20}\x0a}\x0a'),m1='\x0avec3\x20comb'+'ineColor(v'+'ec3\x20albedo'+',\x20vec3\x20she'+'enSpecular'+'ity,\x20float'+'\x20clearcoat'+'Specularit'+'y)\x20{\x0a\x20\x20\x20\x20v'+'ec3\x20ret\x20=\x20'+'vec3(0);\x0a#'+'ifdef\x20LIT_'+'OLD_AMBIEN'+'T\x0a\x20\x20\x20\x20ret\x20'+'+=\x20(dDiffu'+'seLight\x20-\x20'+'light_glob'+'alAmbient)'+'\x20*\x20albedo\x20'+'+\x20material'+'_ambient\x20*'+'\x20light_glo'+'balAmbient'+';\x0a#else\x0a\x20\x20'+'\x20\x20ret\x20+=\x20a'+'lbedo\x20*\x20dD'+'iffuseLigh'+'t;\x0a#endif\x0a'+'#ifdef\x20LIT'+'_SPECULAR\x0a'+'\x20\x20\x20\x20ret\x20+='+'\x20dSpecular'+'Light;\x0a#en'+'dif\x0a#ifdef'+'\x20LIT_REFLE'+'CTIONS\x0a\x20\x20\x20'+'\x20ret\x20+=\x20dR'+'eflection.'+'rgb\x20*\x20dRef'+'lection.a;'+'\x0a#endif\x0a\x0a#'+'ifdef\x20LIT_'+'SHEEN\x0a\x20\x20\x20\x20'+'float\x20shee'+'nScaling\x20='+'\x201.0\x20-\x20max'+'(max(sheen'+'Specularit'+'y.r,\x20sheen'+'Specularit'+'y.g),\x20shee'+'nSpeculari'+'ty.b)\x20*\x200.'+'157;\x0a\x20\x20\x20\x20r'+'et\x20=\x20ret\x20*'+'\x20sheenScal'+'ing\x20+\x20(sSp'+'ecularLigh'+'t\x20+\x20sRefle'+'ction.rgb)'+'\x20*\x20sheenSp'+'ecularity;'+'\x0a#endif\x0a#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20float\x20c'+'learCoatSc'+'aling\x20=\x201.'+'0\x20-\x20ccFres'+'nel\x20*\x20clea'+'rcoatSpecu'+'larity;\x0a\x20\x20'+'\x20\x20ret\x20=\x20re'+'t\x20*\x20clearC'+'oatScaling'+'\x20+\x20(ccSpec'+'ularLight\x20'+'+\x20ccReflec'+'tion)\x20*\x20cl'+'earcoatSpe'+'cularity;\x0a'+'#endif\x0a\x0a\x20\x20'+'\x20\x20return\x20r'+'et;\x0a}\x0a',_1='\x0a\x20\x20\x20\x20varyi'+'ng\x20vec2\x20uv'+'0;\x0a\x20\x20\x20\x20uni'+'form\x20sampl'+'er2D\x20blitT'+'exture;\x0a\x20\x20'+'\x20\x20void\x20mai'+'n(void)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_FragColor'+'\x20=\x20texture'+'2D(blitTex'+'ture,\x20uv0)'+';\x0a\x20\x20\x20\x20}\x0a',g1='\x0a\x20\x20\x20\x20varyi'+'ng\x20vec2\x20uv'+'0;\x0a\x20\x20\x20\x20uni'+'form\x20sampl'+'erCube\x20bli'+'tTexture;\x0a'+'\x20\x20\x20\x20unifor'+'m\x20mat4\x20inv'+'ViewProj;\x0a'+'\x20\x20\x20\x20void\x20m'+'ain(void)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec4\x20projP'+'os\x20=\x20vec4('+'uv0\x20*\x202.0\x20'+'-\x201.0,\x200.5'+',\x201.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec4'+'\x20worldPos\x20'+'=\x20invViewP'+'roj\x20*\x20proj'+'Pos;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20gl_Frag'+'Color\x20=\x20te'+'xtureCube('+'blitTextur'+'e,\x20worldPo'+'s.xyz);\x0a\x20\x20'+'\x20\x20}\x0a',S1='\x0a\x20\x20\x20\x20attri'+'bute\x20vec2\x20'+'vertex_pos'+'ition;\x0a\x20\x20\x20'+'\x20varying\x20v'+'ec2\x20uv0;\x0a\x20'+'\x20\x20\x20void\x20ma'+'in(void)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_Position'+'\x20=\x20vec4(ve'+'rtex_posit'+'ion,\x200.5,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uv0\x20=\x20'+'vertex_pos'+'ition.xy\x20*'+'\x200.5\x20+\x200.5'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifndef\x20WE'+'BGPU\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uv0'+'.y\x20=\x201.0\x20-'+'\x20uv0.y;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20}\x0a',y1='\x0a//\x20light\x20'+'cookie\x20fun'+'ctionality'+'\x20for\x20non-c'+'lustered\x20l'+'ights\x0avec4'+'\x20getCookie'+'2D(sampler'+'2D\x20tex,\x20ma'+'t4\x20transfo'+'rm,\x20float\x20'+'intensity)'+'\x20{\x0a\x20\x20\x20\x20vec'+'4\x20projPos\x20'+'=\x20transfor'+'m\x20*\x20vec4(v'+'PositionW,'+'\x201.0);\x0a\x20\x20\x20'+'\x20projPos.x'+'y\x20/=\x20projP'+'os.w;\x0a\x20\x20\x20\x20'+'return\x20mix'+'(vec4(1.0)'+',\x20texture2'+'D(tex,\x20pro'+'jPos.xy),\x20'+'intensity)'+';\x0a}\x0a\x0avec4\x20'+'getCookie2'+'DClip(samp'+'ler2D\x20tex,'+'\x20mat4\x20tran'+'sform,\x20flo'+'at\x20intensi'+'ty)\x20{\x0a\x20\x20\x20\x20'+'vec4\x20projP'+'os\x20=\x20trans'+'form\x20*\x20vec'+'4(vPositio'+'nW,\x201.0);\x0a'+'\x20\x20\x20\x20projPo'+'s.xy\x20/=\x20pr'+'ojPos.w;\x0a\x20'+'\x20\x20\x20if\x20(pro'+'jPos.x\x20<\x200'+'.0\x20||\x20proj'+'Pos.x\x20>\x201.'+'0\x20||\x20projP'+'os.y\x20<\x200.0'+'\x20||\x20projPo'+'s.y\x20>\x201.0\x20'+'||\x20projPos'+'.z\x20<\x200.0)\x20'+'return\x20vec'+'4(0.0);\x0a\x20\x20'+'\x20\x20return\x20m'+'ix(vec4(1.'+'0),\x20textur'+'e2D(tex,\x20p'+'rojPos.xy)'+',\x20intensit'+'y);\x0a}\x0a\x0avec'+'4\x20getCooki'+'e2DXform(s'+'ampler2D\x20t'+'ex,\x20mat4\x20t'+'ransform,\x20'+'float\x20inte'+'nsity,\x20vec'+'4\x20cookieMa'+'trix,\x20vec2'+'\x20cookieOff'+'set)\x20{\x0a\x20\x20\x20'+'\x20vec4\x20proj'+'Pos\x20=\x20tran'+'sform\x20*\x20ve'+'c4(vPositi'+'onW,\x201.0);'+'\x0a\x20\x20\x20\x20projP'+'os.xy\x20/=\x20p'+'rojPos.w;\x0a'+'\x20\x20\x20\x20projPo'+'s.xy\x20+=\x20co'+'okieOffset'+';\x0a\x20\x20\x20\x20vec2'+'\x20uv\x20=\x20mat2'+'(cookieMat'+'rix)\x20*\x20(pr'+'ojPos.xy-v'+'ec2(0.5))\x20'+'+\x20vec2(0.5'+');\x0a\x20\x20\x20\x20ret'+'urn\x20mix(ve'+'c4(1.0),\x20t'+'exture2D(t'+'ex,\x20uv),\x20i'+'ntensity);'+'\x0a}\x0a\x0avec4\x20g'+'etCookie2D'+'ClipXform('+('sampler2D\x20'+'tex,\x20mat4\x20'+'transform,'+'\x20float\x20int'+'ensity,\x20ve'+'c4\x20cookieM'+'atrix,\x20vec'+'2\x20cookieOf'+'fset)\x20{\x0a\x20\x20'+'\x20\x20vec4\x20pro'+'jPos\x20=\x20tra'+'nsform\x20*\x20v'+'ec4(vPosit'+'ionW,\x201.0)'+';\x0a\x20\x20\x20\x20proj'+'Pos.xy\x20/=\x20'+'projPos.w;'+'\x0a\x20\x20\x20\x20projP'+'os.xy\x20+=\x20c'+'ookieOffse'+'t;\x0a\x20\x20\x20\x20if\x20'+'(projPos.x'+'\x20<\x200.0\x20||\x20'+'projPos.x\x20'+'>\x201.0\x20||\x20p'+'rojPos.y\x20<'+'\x200.0\x20||\x20pr'+'ojPos.y\x20>\x20'+'1.0\x20||\x20pro'+'jPos.z\x20<\x200'+'.0)\x20return'+'\x20vec4(0.0)'+';\x0a\x20\x20\x20\x20vec2'+'\x20uv\x20=\x20mat2'+'(cookieMat'+'rix)\x20*\x20(pr'+'ojPos.xy-v'+'ec2(0.5))\x20'+'+\x20vec2(0.5'+');\x0a\x20\x20\x20\x20ret'+'urn\x20mix(ve'+'c4(1.0),\x20t'+'exture2D(t'+'ex,\x20uv),\x20i'+'ntensity);'+'\x0a}\x0a\x0avec4\x20g'+'etCookieCu'+'be(sampler'+'Cube\x20tex,\x20'+'mat4\x20trans'+'form,\x20floa'+'t\x20intensit'+'y)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20mix('+'vec4(1.0),'+'\x20textureCu'+'be(tex,\x20dL'+'ightDirNor'+'mW\x20*\x20mat3('+'transform)'+'),\x20intensi'+'ty);\x0a}\x0a'),v1='\x0a\x0a#if\x20LIT_'+'CUBEMAP_PR'+'OJECTION\x20='+'=\x20BOX\x0a\x20\x20\x20\x20'+'uniform\x20ve'+'c3\x20envBoxM'+'in;\x0a\x20\x20\x20\x20un'+'iform\x20vec3'+'\x20envBoxMax'+';\x0a#endif\x0a\x0a'+'vec3\x20cubeM'+'apProject('+'vec3\x20nrdir'+')\x20{\x0a\x0a\x20\x20\x20\x20#'+'if\x20LIT_CUB'+'EMAP_PROJE'+'CTION\x20==\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20c'+'ubeMapRota'+'te(nrdir);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'\x20LIT_CUBEM'+'AP_PROJECT'+'ION\x20==\x20BOX'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'nrdir\x20=\x20cu'+'beMapRotat'+'e(nrdir);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20rbmax\x20'+'=\x20(envBoxM'+'ax\x20-\x20vPosi'+'tionW)\x20/\x20n'+'rdir;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20r'+'bmin\x20=\x20(en'+'vBoxMin\x20-\x20'+'vPositionW'+')\x20/\x20nrdir;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20rbmin'+'max\x20=\x20mix('+'rbmin,\x20rbm'+'ax,\x20vec3(g'+'reaterThan'+'(nrdir,\x20ve'+'c3(0.0))))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20fa\x20='+'\x20min(min(r'+'bminmax.x,'+'\x20rbminmax.'+'y),\x20rbminm'+'ax.z);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20posonbox\x20'+'=\x20vPositio'+'nW\x20+\x20nrdir'+'\x20*\x20fa;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'envBoxPos\x20'+'=\x20(envBoxM'+'in\x20+\x20envBo'+'xMax)\x20*\x200.'+'5;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20no'+'rmalize(po'+'sonbox\x20-\x20e'+'nvBoxPos);'+'\x0a\x0a\x20\x20\x20\x20#end'+'if\x0a}\x0a',x1='\x0a#ifdef\x20CU'+'BEMAP_ROTA'+'TION\x0aunifo'+'rm\x20mat3\x20cu'+'beMapRotat'+'ionMatrix;'+'\x0a#endif\x0a\x0av'+'ec3\x20cubeMa'+'pRotate(ve'+'c3\x20refDir)'+'\x20{\x0a#ifdef\x20'+'CUBEMAP_RO'+'TATION\x0a\x20\x20\x20'+'\x20return\x20re'+'fDir\x20*\x20cub'+'eMapRotati'+'onMatrix;\x0a'+'#else\x0a\x20\x20\x20\x20'+'return\x20ref'+'Dir;\x0a#endi'+'f\x0a}\x0a',T1='\x0a#ifdef\x20DE'+'BUG_ALBEDO'+'_PASS\x0agl_F'+'ragColor\x20='+'\x20vec4(gamm'+'aCorrectOu'+'tput(dAlbe'+'do),\x201.0);'+'\x0a#endif\x0a\x0a#'+'ifdef\x20DEBU'+'G_UV0_PASS'+'\x0agl_FragCo'+'lor\x20=\x20vec4'+'(litArgs_a'+'lbedo\x20,\x201.'+'0);\x0a#endif'+'\x0a\x0a#ifdef\x20D'+'EBUG_WORLD'+'_NORMAL_PA'+'SS\x0agl_Frag'+'Color\x20=\x20ve'+'c4(litArgs'+'_worldNorm'+'al\x20*\x200.5\x20+'+'\x200.5,\x201.0)'+';\x0a#endif\x0a\x0a'+'#ifdef\x20DEB'+'UG_OPACITY'+'_PASS\x0agl_F'+'ragColor\x20='+'\x20vec4(vec3'+'(litArgs_o'+'pacity)\x20,\x20'+'1.0);\x0a#end'+'if\x0a\x0a#ifdef'+'\x20DEBUG_SPE'+'CULARITY_P'+'ASS\x0agl_Fra'+'gColor\x20=\x20v'+'ec4(litArg'+'s_specular'+'ity,\x201.0);'+'\x0a#endif\x0a\x0a#'+'ifdef\x20DEBU'+'G_GLOSS_PA'+'SS\x0agl_Frag'+'Color\x20=\x20ve'+'c4(vec3(li'+'tArgs_glos'+'s)\x20,\x201.0);'+'\x0a#endif\x0a\x0a#'+'ifdef\x20DEBU'+'G_METALNES'+'S_PASS\x0agl_'+'FragColor\x20'+'=\x20vec4(vec'+'3(litArgs_'+'metalness)'+'\x20,\x201.0);\x0a#'+'endif\x0a\x0a#if'+'def\x20DEBUG_'+'AO_PASS\x0agl'+'_FragColor'+'\x20=\x20vec4(ve'+'c3(litArgs'+'_ao)\x20,\x201.0'+');\x0a#endif\x0a'+'\x0a#ifdef\x20DE'+'BUG_EMISSI'+'ON_PASS\x0agl'+'_FragColor'+'\x20=\x20vec4(ga'+'mmaCorrect'+'Output(lit'+'Args_emiss'+'ion),\x201.0)'+';\x0a#endif\x0a',w1='\x0a#ifdef\x20DE'+'BUG_LIGHTI'+'NG_PASS\x0ali'+'tArgs_albe'+'do\x20=\x20vec3('+'0.5);\x0a#end'+'if\x0a\x0a#ifdef'+'\x20DEBUG_UV0'+'_PASS\x0a#ifd'+'ef\x20VARYING'+'_VUV0\x0alitA'+'rgs_albedo'+'\x20=\x20vec3(vU'+'v0,\x200);\x0a#e'+'lse\x0alitArg'+'s_albedo\x20='+'\x20vec3(0);\x0a'+'#endif\x0a#en'+'dif\x0a',E1='\x0a\x0a#ifndef\x20'+'_DECODE_IN'+'CLUDED_\x0a#d'+'efine\x20_DEC'+'ODE_INCLUD'+'ED_\x0a\x0avec3\x20'+'decodeLine'+'ar(vec4\x20ra'+'w)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20raw.'+'rgb;\x0a}\x0a\x0afl'+'oat\x20decode'+'Gamma(floa'+'t\x20raw)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'pow(raw,\x202'+'.2);\x0a}\x0a\x0ave'+'c3\x20decodeG'+'amma(vec3\x20'+'raw)\x20{\x0a\x20\x20\x20'+'\x20return\x20po'+'w(raw,\x20vec'+'3(2.2));\x0a}'+'\x0a\x0avec3\x20dec'+'odeGamma(v'+'ec4\x20raw)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20pow(raw.'+'xyz,\x20vec3('+'2.2));\x0a}\x0a\x0a'+'vec3\x20decod'+'eRGBM(vec4'+'\x20raw)\x20{\x0a\x20\x20'+'\x20\x20vec3\x20col'+'or\x20=\x20(8.0\x20'+'*\x20raw.a)\x20*'+'\x20raw.rgb;\x0a'+'\x20\x20\x20\x20return'+'\x20color\x20*\x20c'+'olor;\x0a}\x0a\x0av'+'ec3\x20decode'+'RGBP(vec4\x20'+'raw)\x20{\x0a\x20\x20\x20'+'\x20vec3\x20colo'+'r\x20=\x20raw.rg'+'b\x20*\x20(-raw.'+'a\x20*\x207.0\x20+\x20'+'8.0);\x0a\x20\x20\x20\x20'+'return\x20col'+'or\x20*\x20color'+';\x0a}\x0a\x0avec3\x20'+'decodeRGBE'+'(vec4\x20raw)'+'\x20{\x0a\x20\x20\x20\x20if\x20'+'(raw.a\x20==\x20'+'0.0)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20vec3(0.0'+',\x200.0,\x200.0'+');\x0a\x20\x20\x20\x20}\x20e'+'lse\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20raw.xyz\x20*'+'\x20pow(2.0,\x20'+'raw.w\x20*\x2025'+'5.0\x20-\x20128.'+'0);\x0a\x20\x20\x20\x20}\x0a'+'}\x0a\x0avec4\x20pa'+'ssThrough('+'vec4\x20raw)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20raw;\x0a}\x0a'+'\x0avec3\x20unpa'+'ckNormalXY'+'Z(vec4\x20nma'+'p)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20nmap'+'.xyz\x20*\x202.0'+'\x20-\x201.0;\x0a}\x0a'+'\x0avec3\x20unpa'+'ckNormalXY'+'(vec4\x20nmap'+')\x20{\x0a\x20\x20\x20\x20ve'+'c3\x20normal;'+'\x0a\x20\x20\x20\x20norma'+'l.xy\x20=\x20nma'+'p.wy\x20*\x202.0'+'\x20-\x201.0;\x0a\x20\x20'+'\x20\x20normal.z'+'\x20=\x20sqrt(1.'+'0\x20-\x20clamp('+'dot(normal'+'.xy,\x20norma'+'l.xy),\x200.0'+',\x201.0));\x0a\x20'+'\x20\x20\x20return\x20'+'normal;\x0a}\x0a'+'\x0a#endif\x0a',b1='\x0a\x0a#ifndef\x20'+'_DETAILMOD'+'ES_INCLUDE'+'D_\x0a#define'+'\x20_DETAILMO'+'DES_INCLUD'+'ED_\x0a\x0avec3\x20'+'detailMode'+'_mul(vec3\x20'+'c1,\x20vec3\x20c'+'2)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20c1\x20*'+'\x20c2;\x0a}\x0a\x0ave'+'c3\x20detailM'+'ode_add(ve'+'c3\x20c1,\x20vec'+'3\x20c2)\x20{\x0a\x20\x20'+'\x20\x20return\x20c'+'1\x20+\x20c2;\x0a}\x0a'+'\x0a//\x20https:'+'//en.wikip'+'edia.org/w'+'iki/Blend_'+'modes#Scre'+'en\x0avec3\x20de'+'tailMode_s'+'creen(vec3'+'\x20c1,\x20vec3\x20'+'c2)\x20{\x0a\x20\x20\x20\x20'+'return\x201.0'+'\x20-\x20(1.0\x20-\x20'+'c1)*(1.0\x20-'+'\x20c2);\x0a}\x0a\x0a/'+'/\x20https://'+'en.wikiped'+'ia.org/wik'+'i/Blend_mo'+'des#Overla'+'y\x0avec3\x20det'+'ailMode_ov'+'erlay(vec3'+'\x20c1,\x20vec3\x20'+'c2)\x20{\x0a\x20\x20\x20\x20'+'return\x20mix'+'(1.0\x20-\x202.0'+'\x20*\x20(1.0\x20-\x20'+'c1)*(1.0\x20-'+'\x20c2),\x202.0\x20'+'*\x20c1\x20*\x20c2,'+'\x20step(c1,\x20'+'vec3(0.5))'+');\x0a}\x0a\x0avec3'+'\x20detailMod'+'e_min(vec3'+'\x20c1,\x20vec3\x20'+'c2)\x20{\x0a\x20\x20\x20\x20'+'return\x20min'+'(c1,\x20c2);\x0a'+'}\x0a\x0avec3\x20de'+'tailMode_m'+'ax(vec3\x20c1'+',\x20vec3\x20c2)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20max(c1'+',\x20c2);\x0a}\x0a\x0a'+'#endif\x0a',A1='\x0auniform\x20v'+'ec3\x20materi'+'al_diffuse'+';\x0a\x0a#ifdef\x20'+'STD_DIFFUS'+'EDETAIL_TE'+'XTURE\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'detailMode'+'sPS\x22\x0a#endi'+'f\x0a\x0avoid\x20ge'+'tAlbedo()\x20'+'{\x0a\x20\x20\x20\x20dAlb'+'edo\x20=\x20mate'+'rial_diffu'+'se.rgb;\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_DIFFUS'+'E_TEXTURE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20albedoT'+'exture\x20=\x20{'+'STD_DIFFUS'+'E_TEXTURE_'+'DECODE}(te'+'xture2DBia'+'s({STD_DIF'+'FUSE_TEXTU'+'RE_NAME},\x20'+'{STD_DIFFU'+'SE_TEXTURE'+'_UV},\x20text'+'ureBias)).'+'{STD_DIFFU'+'SE_TEXTURE'+'_CHANNEL};'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_DIFFUSEDE'+'TAIL_TEXTU'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'albedoDeta'+'il\x20=\x20{STD_'+'DIFFUSEDET'+'AIL_TEXTUR'+'E_DECODE}('+'texture2DB'+'ias({STD_D'+'IFFUSEDETA'+'IL_TEXTURE'+'_NAME},\x20{S'+'TD_DIFFUSE'+'DETAIL_TEX'+'TURE_UV},\x20'+'textureBia'+'s)).{STD_D'+'IFFUSEDETA'+'IL_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20albedoT'+'exture\x20=\x20d'+'etailMode_'+'{STD_DIFFU'+'SEDETAIL_D'+'ETAILMODE}'+'(albedoTex'+'ture,\x20albe'+'doDetail);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dAlbe'+'do\x20*=\x20albe'+'doTexture;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_DI'+'FFUSE_VERT'+'EX\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20dAlbedo\x20*'+'=\x20gammaCor'+'rectInput('+'saturate(v'+'VertexColo'+'r.{STD_DIF'+'FUSE_VERTE'+'X_CHANNEL}'+'));\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a',C1='\x0auniform\x20v'+'ec3\x20materi'+'al_emissiv'+'e;\x0auniform'+'\x20float\x20mat'+'erial_emis'+'siveIntens'+'ity;\x0a\x0avoid'+'\x20getEmissi'+'on()\x20{\x0a\x20\x20\x20'+'\x20dEmission'+'\x20=\x20materia'+'l_emissive'+'\x20*\x20materia'+'l_emissive'+'Intensity;'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_EMI'+'SSIVE_TEXT'+'URE\x0a\x20\x20\x20\x20dE'+'mission\x20*='+'\x20{STD_EMIS'+'SIVE_TEXTU'+'RE_DECODE}'+'(texture2D'+'Bias({STD_'+'EMISSIVE_T'+'EXTURE_NAM'+'E},\x20{STD_E'+'MISSIVE_TE'+'XTURE_UV},'+'\x20textureBi'+'as)).{STD_'+'EMISSIVE_T'+'EXTURE_CHA'+'NNEL};\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_EMISSI'+'VE_VERTEX\x0a'+'\x20\x20\x20\x20dEmiss'+'ion\x20*=\x20gam'+'maCorrectI'+'nput(satur'+'ate(vVerte'+'xColor.{ST'+'D_EMISSIVE'+'_VERTEX_CH'+'ANNEL}));\x0a'+'\x20\x20\x20\x20#endif'+'\x0a}\x0a',P1='\x0avec4\x20enco'+'deLinear(v'+'ec3\x20source'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20vec4('+'source,\x201.'+'0);\x0a}\x0a\x0avec'+'4\x20encodeGa'+'mma(vec3\x20s'+'ource)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'vec4(pow(s'+'ource\x20+\x200.'+'0000001,\x20v'+'ec3(1.0\x20/\x20'+'2.2)),\x201.0'+');\x0a}\x0a\x0avec4'+'\x20encodeRGB'+'M(vec3\x20sou'+'rce)\x20{\x20//\x20'+'modified\x20R'+'GBM\x0a\x20\x20\x20\x20ve'+'c4\x20result;'+'\x0a\x20\x20\x20\x20resul'+'t.rgb\x20=\x20po'+'w(source.r'+'gb,\x20vec3(0'+'.5));\x0a\x20\x20\x20\x20'+'result.rgb'+'\x20*=\x201.0\x20/\x20'+'8.0;\x0a\x0a\x20\x20\x20\x20'+'result.a\x20='+'\x20saturate('+'\x20max(\x20max('+'\x20result.r,'+'\x20result.g\x20'+'),\x20max(\x20re'+'sult.b,\x201.'+'0\x20/\x20255.0\x20'+')\x20)\x20);\x0a\x20\x20\x20'+'\x20result.a\x20'+'=\x20ceil(res'+'ult.a\x20*\x2025'+'5.0)\x20/\x20255'+'.0;\x0a\x0a\x20\x20\x20\x20r'+'esult.rgb\x20'+'/=\x20result.'+'a;\x0a\x20\x20\x20\x20ret'+'urn\x20result'+';\x0a}\x0a\x0avec4\x20'+'encodeRGBP'+'(vec3\x20sour'+'ce)\x20{\x0a\x20\x20\x20\x20'+'//\x20convert'+'\x20incoming\x20'+'linear\x20to\x20'+'gamma(ish)'+'\x0a\x20\x20\x20\x20vec3\x20'+'gamma\x20=\x20po'+'w(source,\x20'+'vec3(0.5))'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'calculate\x20'+'the\x20maximu'+'m\x20componen'+'t\x20clamped\x20'+'to\x201..8\x0a\x20\x20'+'\x20\x20float\x20ma'+'xVal\x20=\x20min'+'(8.0,\x20max('+'1.0,\x20max(g'+'amma.x,\x20ma'+'x(gamma.y,'+'\x20gamma.z))'+'));\x0a\x0a\x20\x20\x20\x20/'+'/\x20calculat'+'e\x20storage\x20'+'factor\x0a\x20\x20\x20'+'\x20float\x20v\x20='+'\x201.0\x20-\x20((m'+'axVal\x20-\x201.'+'0)\x20/\x207.0);'+'\x0a\x0a\x20\x20\x20\x20//\x20r'+'ound\x20the\x20v'+'alue\x20for\x20s'+'torage\x20in\x20'+'8bit\x20chann'+'el\x0a\x20\x20\x20\x20v\x20='+'\x20ceil(v\x20*\x20'+'255.0)\x20/\x202'+'55.0;\x0a\x0a\x20\x20\x20'+'\x20return\x20ve'+'c4(gamma\x20/'+'\x20(-v\x20*\x207.0'+'\x20+\x208.0),\x20v'+');\x20\x20\x20\x20\x0a}\x0a\x0a'+'vec4\x20encod'+'eRGBE(vec3'+'\x20source)\x20{'+'\x0a\x20\x20\x20\x20float'+('\x20maxVal\x20=\x20'+'max(source'+'.x,\x20max(so'+'urce.y,\x20so'+'urce.z));\x0a'+'\x20\x20\x20\x20if\x20(ma'+'xVal\x20<\x201e-'+'32)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20vec4(0,\x200'+',\x200,\x200);\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20e\x20=\x20'+'ceil(log2('+'maxVal));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20vec4('+'source\x20/\x20p'+'ow(2.0,\x20e)'+',\x20(e\x20+\x20128'+'.0)\x20/\x20255.'+'0);\x0a\x20\x20\x20\x20}\x0a'+'}\x0a'),M1='\x0a\x20\x20\x20\x20gl_Fr'+'agColor.rg'+'b\x20=\x20combin'+'eColor(lit'+'Args_albed'+'o,\x20litArgs'+'_sheen_spe'+'cularity,\x20'+'litArgs_cl'+'earcoat_sp'+'ecularity)'+';\x0a\x0a\x20\x20\x20\x20gl_'+'FragColor.'+'rgb\x20+=\x20lit'+'Args_emiss'+'ion;\x0a\x20\x20\x20\x20g'+'l_FragColo'+'r.rgb\x20=\x20ad'+'dFog(gl_Fr'+'agColor.rg'+'b);\x0a\x20\x20\x20\x20gl'+'_FragColor'+'.rgb\x20=\x20ton'+'eMap(gl_Fr'+'agColor.rg'+'b);\x0a\x20\x20\x20\x20gl'+'_FragColor'+'.rgb\x20=\x20gam'+'maCorrectO'+'utput(gl_F'+'ragColor.r'+'gb);\x0a',D1='\x0a\x0a#ifndef\x20'+'_ENVATLAS_'+'INCLUDED_\x0a'+'#define\x20_E'+'NVATLAS_IN'+'CLUDED_\x0a\x0a/'+'/\x20the\x20envA'+'tlas\x20is\x20fi'+'xed\x20at\x20512'+'\x20pixels.\x20e'+'very\x20equir'+'ect\x20is\x20gen'+'erated\x20wit'+'h\x201\x20pixel\x20'+'boundary.\x0a'+'const\x20floa'+'t\x20atlasSiz'+'e\x20=\x20512.0;'+'\x0aconst\x20flo'+'at\x20seamSiz'+'e\x20=\x201.0\x20/\x20'+'atlasSize;'+'\x0a\x0a//\x20map\x20a'+'\x20normalize'+'d\x20equirect'+'\x20UV\x20to\x20the'+'\x20given\x20rec'+'tangle\x20(ta'+'king\x201\x20pix'+'el\x20seam\x20in'+'to\x20account'+').\x0avec2\x20ma'+'pUv(vec2\x20u'+'v,\x20vec4\x20re'+'ct)\x20{\x0a\x20\x20\x20\x20'+'return\x20vec'+'2(mix(rect'+'.x\x20+\x20seamS'+'ize,\x20rect.'+'x\x20+\x20rect.z'+'\x20-\x20seamSiz'+'e,\x20uv.x),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20mix('+'rect.y\x20+\x20s'+'eamSize,\x20r'+'ect.y\x20+\x20re'+'ct.w\x20-\x20sea'+'mSize,\x20uv.'+'y));\x0a}\x0a\x0a//'+'\x20map\x20a\x20nor'+'malized\x20eq'+'uirect\x20UV\x20'+'and\x20roughn'+'ess\x20level\x20'+'to\x20the\x20cor'+'rect\x20atlas'+'\x20rect.\x0avec'+'2\x20mapRough'+'nessUv(vec'+'2\x20uv,\x20floa'+'t\x20level)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20t\x20=\x201.0\x20/'+'\x20exp2(leve'+'l);\x0a\x20\x20\x20\x20re'+'turn\x20mapUv'+'(uv,\x20vec4('+'0,\x201.0\x20-\x20t'+',\x20t,\x20t\x20*\x200'+'.5));\x0a}\x0a\x0a/'+'/\x20map\x20shin'+'y\x20level\x20UV'+'\x0avec2\x20mapS'+'hinyUv(vec'+'2\x20uv,\x20floa'+'t\x20level)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20t\x20=\x201.0\x20/'+'\x20exp2(leve'+'l);\x0a\x20\x20\x20\x20re'+'turn\x20mapUv'+'(uv,\x20vec4('+'1.0\x20-\x20t,\x201'+'.0\x20-\x20t,\x20t,'+'\x20t\x20*\x200.5))'+';\x0a}\x0a\x0a#endi'+'f\x0a',I1='\x0a#ifdef\x20LI'+'T_SKYBOX_I'+'NTENSITY\x0a\x20'+'\x20\x20\x20uniform'+'\x20float\x20sky'+'boxIntensi'+'ty;\x0a#endif'+'\x0a\x0avec3\x20pro'+'cessEnviro'+'nment(vec3'+'\x20color)\x20{\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SKYBO'+'X_INTENSIT'+'Y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20col'+'or\x20*\x20skybo'+'xIntensity'+';\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20col'+'or;\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a',L1='\x0afloat\x20get'+'FalloffWin'+'dow(float\x20'+'lightRadiu'+'s,\x20vec3\x20li'+'ghtDir)\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'sqrDist\x20=\x20'+'dot(lightD'+'ir,\x20lightD'+'ir);\x0a\x20\x20\x20\x20f'+'loat\x20invRa'+'dius\x20=\x201.0'+'\x20/\x20lightRa'+'dius;\x0a\x20\x20\x20\x20'+'return\x20squ'+'are(satura'+'te(1.0\x20-\x20s'+'quare(sqrD'+'ist\x20*\x20squa'+'re(invRadi'+'us))));\x0a}\x0a'+'\x0afloat\x20get'+'FalloffInv'+'Squared(fl'+'oat\x20lightR'+'adius,\x20vec'+'3\x20lightDir'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20sqrDis'+'t\x20=\x20dot(li'+'ghtDir,\x20li'+'ghtDir);\x0a\x20'+'\x20\x20\x20float\x20f'+'alloff\x20=\x201'+'.0\x20/\x20(sqrD'+'ist\x20+\x201.0)'+';\x0a\x20\x20\x20\x20floa'+'t\x20invRadiu'+'s\x20=\x201.0\x20/\x20'+'lightRadiu'+'s;\x0a\x0a\x20\x20\x20\x20fa'+'lloff\x20*=\x201'+'6.0;\x0a\x20\x20\x20\x20f'+'alloff\x20*=\x20'+'square(sat'+'urate(1.0\x20'+'-\x20square(s'+'qrDist\x20*\x20s'+'quare(invR'+'adius))));'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20falloff'+';\x0a}\x0a',R1='\x0afloat\x20get'+'FalloffLin'+'ear(float\x20'+'lightRadiu'+'s,\x20vec3\x20li'+'ghtDir)\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'d\x20=\x20length'+'(lightDir)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20max(((l'+'ightRadius'+'\x20-\x20d)\x20/\x20li'+'ghtRadius)'+',\x200.0);\x0a}\x0a',O1='\x0a\x0a#ifndef\x20'+'FLOAT_AS_U'+'INT\x0a#defin'+'e\x20FLOAT_AS'+'_UINT\x0a\x0a//\x20'+'encode\x20flo'+'at\x20value\x20t'+'o\x20RGBA8\x0ave'+'c4\x20float2u'+'int(float\x20'+'value)\x20{\x0a\x20'+'\x20\x20\x20uint\x20in'+'tBits\x20=\x20fl'+'oatBitsToU'+'int(value)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20vec4(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at((intBit'+'s\x20>>\x2024u)\x20'+'&\x200xFFu)\x20/'+'\x20255.0,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t((intBits'+'\x20>>\x2016u)\x20&'+'\x200xFFu)\x20/\x20'+'255.0,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'((intBits\x20'+'>>\x208u)\x20&\x200'+'xFFu)\x20/\x2025'+'5.0,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float(i'+'ntBits\x20&\x200'+'xFFu)\x20/\x2025'+'5.0\x0a\x20\x20\x20\x20);'+'\x0a}\x0a\x0a//\x20dec'+'ode\x20RGBA8\x20'+'value\x20to\x20f'+'loat\x0afloat'+'\x20uint2floa'+'t(vec4\x20val'+'ue)\x20{\x0a\x20\x20\x20\x20'+'uint\x20intBi'+'ts\x20=\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20(uint('+'value.r\x20*\x20'+'255.0)\x20<<\x20'+'24u)\x20|\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20(uint'+'(value.g\x20*'+'\x20255.0)\x20<<'+'\x2016u)\x20|\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20(uin'+'t(value.b\x20'+'*\x20255.0)\x20<'+'<\x208u)\x20|\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20uint'+'(value.a\x20*'+'\x20255.0);\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20uintBitsT'+'oFloat(int'+'Bits);\x0a}\x0a\x0a'+'//\x20store\x20a'+'\x20single\x20fl'+'oat\x20value\x20'+'in\x20vec4,\x20a'+'ssuming\x20ei'+'ther\x20RGBA8'+'\x20or\x20float\x20'+'renderable'+'\x20texture\x0av'+'ec4\x20float2'+'vec4(float'+'\x20value)\x20{\x0a'+'\x20\x20\x20\x20#if\x20de'+'fined(CAPS'+'_TEXTURE_F'+'LOAT_RENDE'+'RABLE)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20vec4(val'+'ue,\x201.0,\x201'+'.0,\x201.0);\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20float'+'2uint(valu'+'e);\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a\x0a#e'+'ndif\x20//\x20FL'+'OAT_AS_UIN'+'T\x0a',F1='\x0a\x0afloat\x20dB'+'lendModeFo'+'gFactor\x20=\x20'+'1.0;\x0a\x0a#if\x20'+'(FOG\x20!=\x20NO'+'NE)\x0a\x20\x20\x20\x20un'+'iform\x20vec3'+'\x20fog_color'+';\x0a\x0a\x20\x20\x20\x20#if'+'\x20(FOG\x20==\x20L'+'INEAR)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20float\x20f'+'og_start;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20floa'+'t\x20fog_end;'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20fog_den'+'sity;\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0afloat'+'\x20getFogFac'+'tor()\x20{\x0a\x0a\x20'+'\x20\x20\x20float\x20d'+'epth\x20=\x20gl_'+'FragCoord.'+'z\x20/\x20gl_Fra'+'gCoord.w;\x0a'+'\x20\x20\x20\x20float\x20'+'fogFactor\x20'+'=\x200.0;\x0a\x0a\x20\x20'+'\x20\x20#if\x20(FOG'+'\x20==\x20LINEAR'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'fogFactor\x20'+'=\x20(fog_end'+'\x20-\x20depth)\x20'+'/\x20(fog_end'+'\x20-\x20fog_sta'+'rt);\x0a\x20\x20\x20\x20#'+'elif\x20(FOG\x20'+'==\x20EXP)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20fogF'+'actor\x20=\x20ex'+'p(-depth\x20*'+'\x20fog_densi'+'ty);\x0a\x20\x20\x20\x20#'+'elif\x20(FOG\x20'+'==\x20EXP2)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20fog'+'Factor\x20=\x20e'+'xp(-depth\x20'+'*\x20depth\x20*\x20'+'fog_densit'+'y\x20*\x20fog_de'+'nsity);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20clamp(fog'+'Factor,\x200.'+'0,\x201.0);\x0a}'+'\x0a\x0avec3\x20add'+'Fog(vec3\x20c'+'olor)\x20{\x0a\x0a\x20'+'\x20\x20\x20#if\x20(FO'+'G\x20!=\x20NONE)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20mix('+'fog_color\x20'+'*\x20dBlendMo'+'deFogFacto'+'r,\x20color,\x20'+'getFogFact'+'or());\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'color;\x0a}\x0a',N1='\x0a//\x20Schlic'+'k\x27s\x20approx'+'imation\x0ave'+'c3\x20getFres'+'nel(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20c'+'osTheta,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20gloss,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20specu'+'larity\x0a#if'+'\x20defined(L'+'IT_IRIDESC'+'ENCE)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20,\x20vec3'+'\x20iridescen'+'ceFresnel,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20irid'+'escenceInt'+'ensity\x0a#en'+'dif\x0a\x20\x20\x20\x20)\x20'+'{\x0a\x20\x20\x20\x20floa'+'t\x20fresnel\x20'+'=\x20pow(1.0\x20'+'-\x20saturate'+'(cosTheta)'+',\x205.0);\x0a\x20\x20'+'\x20\x20float\x20gl'+'ossSq\x20=\x20gl'+'oss\x20*\x20glos'+'s;\x0a\x20\x20\x20\x20vec'+'3\x20ret\x20=\x20sp'+'ecularity\x20'+'+\x20(max(vec'+'3(glossSq)'+',\x20specular'+'ity)\x20-\x20spe'+'cularity)\x20'+'*\x20fresnel;'+'\x0a#if\x20defin'+'ed(LIT_IRI'+'DESCENCE)\x0a'+'\x20\x20\x20\x20return'+'\x20mix(ret,\x20'+'iridescenc'+'eFresnel,\x20'+'iridescenc'+'eIntensity'+');\x0a#else\x0a\x20'+'\x20\x20\x20return\x20'+'ret;\x0a#endi'+'f\x20\x20\x20\x20\x0a}\x0a\x0af'+'loat\x20getFr'+'esnelCC(fl'+'oat\x20cosThe'+'ta)\x20{\x0a\x20\x20\x20\x20'+'float\x20fres'+'nel\x20=\x20pow('+'1.0\x20-\x20satu'+'rate(cosTh'+'eta),\x205.0)'+';\x0a\x20\x20\x20\x20retu'+'rn\x200.04\x20+\x20'+'(1.0\x20-\x200.0'+'4)\x20*\x20fresn'+'el;\x0a}\x0a',k1='\x0aattribute'+'\x20vec2\x20vert'+'ex_positio'+'n;\x0a\x0avaryin'+'g\x20vec2\x20vUv'+'0;\x0a\x0avoid\x20m'+'ain(void)\x0a'+'{\x0a\x20\x20\x20\x20gl_P'+'osition\x20=\x20'+'vec4(verte'+'x_position'+',\x200.5,\x201.0'+');\x0a\x20\x20\x20\x20vUv'+'0\x20=\x20vertex'+'_position.'+'xy\x20*\x200.5\x20+'+'\x200.5;\x0a}\x0a',U1='\x0a\x0a#include'+'\x20\x22decodePS'+'\x22\x0a\x0a#if\x20(GA'+'MMA\x20==\x20SRG'+'B)\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20gammaC'+'orrectInpu'+'t(float\x20co'+'lor)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20decodeGa'+'mma(color)'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20vec3\x20ga'+'mmaCorrect'+'Input(vec3'+'\x20color)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20decod'+'eGamma(col'+'or);\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20vec4'+'\x20gammaCorr'+'ectInput(v'+'ec4\x20color)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ve'+'c4(decodeG'+'amma(color'+'.xyz),\x20col'+'or.w);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20ve'+'c3\x20gammaCo'+'rrectOutpu'+'t(vec3\x20col'+'or)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20pow(color'+'\x20+\x200.00000'+'01,\x20vec3(1'+'.0\x20/\x202.2))'+';\x0a\x20\x20\x20\x20}\x0a\x0a#'+'else\x20//\x20NO'+'NE\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20gammaC'+'orrectInpu'+'t(float\x20co'+'lor)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20color;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'vec3\x20gamma'+'CorrectInp'+'ut(vec3\x20co'+'lor)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20color;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'vec4\x20gamma'+'CorrectInp'+'ut(vec4\x20co'+'lor)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20color;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'vec3\x20gamma'+'CorrectOut'+'put(vec3\x20c'+'olor)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20color;\x0a'+'\x20\x20\x20\x20}\x0a\x0a#en'+'dif\x0a',B1='\x0a#ifdef\x20ST'+'D_GLOSS_CO'+'NSTANT\x0auni'+'form\x20float'+'\x20material_'+'gloss;\x0a#en'+'dif\x0a\x0avoid\x20'+'getGlossin'+'ess()\x20{\x0a\x20\x20'+'\x20\x20dGlossin'+'ess\x20=\x201.0;'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_GLO'+'SS_CONSTAN'+'T\x0a\x20\x20\x20\x20dGlo'+'ssiness\x20*='+'\x20material_'+'gloss;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_GLOSS_'+'TEXTURE\x0a\x20\x20'+'\x20\x20dGlossin'+'ess\x20*=\x20tex'+'ture2DBias'+'({STD_GLOS'+'S_TEXTURE_'+'NAME},\x20{ST'+'D_GLOSS_TE'+'XTURE_UV},'+'\x20textureBi'+'as).{STD_G'+'LOSS_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'GLOSS_VERT'+'EX\x0a\x20\x20\x20\x20dGl'+'ossiness\x20*'+'=\x20saturate'+'(vVertexCo'+'lor.{STD_G'+'LOSS_VERTE'+'X_CHANNEL}'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'GLOSS_INVE'+'RT\x0a\x20\x20\x20\x20dGl'+'ossiness\x20='+'\x201.0\x20-\x20dGl'+'ossiness;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20dGlo'+'ssiness\x20+='+'\x200.0000001'+';\x0a}\x0a',z1='\x0auniform\x20m'+'at4\x20matrix'+'_model;\x0aun'+'iform\x20mat4'+'\x20matrix_vi'+'ew;\x0aunifor'+'m\x20mat4\x20mat'+'rix_projec'+'tion;\x0a\x0a//\x20'+'project\x20th'+'e\x20model\x20sp'+'ace\x20gaussi'+'an\x20center\x20'+'to\x20view\x20an'+'d\x20clip\x20spa'+'ce\x0abool\x20in'+'itCenter(v'+'ec3\x20modelC'+'enter,\x20out'+'\x20SplatCent'+'er\x20center)'+'\x20{\x0a\x20\x20\x20\x20mat'+'4\x20modelVie'+'w\x20=\x20matrix'+'_view\x20*\x20ma'+'trix_model'+';\x0a\x20\x20\x20\x20vec4'+'\x20centerVie'+'w\x20=\x20modelV'+'iew\x20*\x20vec4'+'(modelCent'+'er,\x201.0);\x0a'+'\x0a\x20\x20\x20\x20//\x20ea'+'rly\x20out\x20if'+'\x20splat\x20is\x20'+'behind\x20the'+'\x20camera\x0a\x20\x20'+'\x20\x20if\x20(cent'+'erView.z\x20>'+'\x200.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20false;\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20vec4\x20cent'+'erProj\x20=\x20m'+'atrix_proj'+'ection\x20*\x20c'+'enterView;'+'\x0a\x0a\x20\x20\x20\x20//\x20e'+'nsure\x20gaus'+'sians\x20are\x20'+'not\x20clippe'+'d\x20by\x20camer'+'a\x20near\x20and'+'\x20far\x0a\x20\x20\x20\x20#'+'if\x20WEBGPU\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ce'+'nterProj.z'+'\x20=\x20clamp(c'+'enterProj.'+'z,\x200,\x20abs('+'centerProj'+'.w));\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20center'+'Proj.z\x20=\x20c'+'lamp(cente'+'rProj.z,\x20-'+'abs(center'+'Proj.w),\x20a'+'bs(centerP'+'roj.w));\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20cente'+'r.view\x20=\x20c'+'enterView.'+'xyz\x20/\x20cent'+'erView.w;\x0a'+'\x20\x20\x20\x20center'+'.proj\x20=\x20ce'+'nterProj;\x0a'+'\x20\x20\x20\x20center'+'.projMat00'+'\x20=\x20matrix_'+'projection'+'[0][0];\x0a\x20\x20'+'\x20\x20center.m'+'odelView\x20='+'\x20modelView'+';\x0a\x20\x20\x20\x20retu'+'rn\x20true;\x0a}'+'\x0a',V1='\x0a\x0auniform\x20'+'mediump\x20sa'+'mpler2D\x20sp'+'latColor;\x0a'+'\x0a//\x20:\x200'+'.0\x20~\x201.0\x20'+'\x0afl'+'oat\x20comput'+'eAlpha(flo'+'at\x20muT,\x20fl'+'oat\x20uTime,'+'\x20float\x20uFa'+'deSpeed,\x20f'+'loat\x20life)'+'\x20{\x0a\x20\x20\x20\x20flo'+'at\x20age\x20=\x20('+'uTime\x20-\x20mu'+'T)\x20*\x202.0;\x20'+'//\x20'+'\x0a\x0a\x20\x20\x20\x20if\x20('+'muT\x20>\x20uTim'+'e)\x20return\x20'+'0.0;\x0a\x0a\x20\x20\x20\x20'+'//\x20---\x20'+'\x20life\x20'+'---\x0a\x20\x20\x20\x20fl'+'oat\x20linear'+'Fade\x20=\x201.0'+'\x20-\x20age\x20/\x20l'+'ife;\x0a\x20\x20\x20\x20/'+'/\x20---\x20'+'\x20uFadeS'+'peed\x20---\x0a\x20'+'\x20\x20\x20float\x20e'+'xpFade\x20=\x20e'+'xp(-age\x20*\x20'+'uFadeSpeed'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20return\x20cl'+'amp(linear'+'Fade,\x200.0,'+'\x201.0);\x20\x0a\x20\x20'+'\x20\x20return\x20c'+'lamp(expFa'+'de,\x200.0,\x201'+'.0);\x0a}\x0a\x0a\x0av'+'ec4\x20readCo'+'lor(in\x20Spl'+'atSource\x20s'+'ource,\x20flo'+'at\x20uTime,\x20'+'bool\x20plusA'+',\x20int\x20poin'+'tCloudMode'+'Enabled)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'color\x20=\x20te'+'xelFetch(s'+'platColor,'+'\x20source.uv'+',\x200);\x0a\x20\x20\x20\x20'+'#ifdef\x20IS_'+'4D\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec2\x20tDat'+'a\x20=\x20texelF'+'etch(trans'+'formLifecy'+'cle,\x20sourc'+'e.uv,\x200).x'+'y;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20muT'+'\x20=\x20tData.x'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20saveA'+'\x20=\x20pointCl'+'oudModeEna'+'bled\x20==\x201\x20'+'?\x201.0\x20:\x20co'+'lor.a;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20alpha\x20=\x20s'+'aveA;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(uOp'+'enAnim\x20==\x20'+'1)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20alp'+'ha\x20=\x20alpha'+'\x20*\x20(muT\x20-\x20'+'uTime\x20+\x200.'+'05);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20age\x20=\x20u'+'Time\x20-\x20muT'+';\x20\x20\x20\x20//\x20'+'\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20uFad'+'eSpeed\x20=\x202'+('.0;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20life\x20=\x200'+'.1;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20alph'+'a\x20=\x20comput'+'eAlpha(muT'+',\x20uTime,\x20u'+'FadeSpeed,'+'\x20life);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'alpha\x20*=\x20a'+'lpha;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20c'+'olor.a\x20=\x20p'+'lusA\x20?\x20alp'+'ha\x20:\x20saveA'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20ret'+'urn\x20color;'+'\x0a}\x0a\x0a'),G1='\x0a\x0a//\x20store'+'s\x20the\x20sour'+'ce\x20UV\x20and\x20'+'order\x20of\x20t'+'he\x20splat\x0as'+'truct\x20Spla'+'tSource\x20{\x0a'+'\x20\x20\x20\x20uint\x20o'+'rder;\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ren'+'der\x20order\x0a'+'\x20\x20\x20\x20uint\x20i'+'d;\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20spl'+'at\x20id\x0a\x20\x20\x20\x20'+'ivec2\x20uv;\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20splat\x20u'+'v\x0a\x20\x20\x20\x20vec2'+'\x20cornerUV;'+'\x20\x20\x20\x20\x20\x20//\x20c'+'orner\x20coor'+'dinates\x20fo'+'r\x20this\x20ver'+'tex\x20of\x20the'+'\x20gaussian\x20'+'(-1,\x20-1)..'+'(1,\x201)\x0a};\x0a'+'\x0a//\x20stores'+'\x20the\x20camer'+'a\x20and\x20clip'+'\x20space\x20pos'+'ition\x20of\x20t'+'he\x20gaussia'+'n\x20center\x0as'+'truct\x20Spla'+'tCenter\x20{\x0a'+'\x20\x20\x20\x20vec3\x20v'+'iew;\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20cen'+'ter\x20in\x20vie'+'w\x20space\x0a\x20\x20'+'\x20\x20vec4\x20pro'+'j;\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20cente'+'r\x20in\x20clip\x20'+'space\x0a\x20\x20\x20\x20'+'mat4\x20model'+'View;\x20\x20\x20\x20\x20'+'//\x20model-v'+'iew\x20matrix'+'\x0a\x20\x20\x20\x20float'+'\x20projMat00'+';\x20\x20\x20\x20//\x20el'+'ement\x20[0]['+'0]\x20of\x20the\x20'+'projection'+'\x20matrix\x0a};'+'\x0a\x0a//\x20store'+'s\x20the\x20offs'+'et\x20from\x20ce'+'nter\x20for\x20t'+'he\x20current'+'\x20gaussian\x0a'+'struct\x20Spl'+'atCorner\x20{'+'\x0a\x20\x20\x20\x20vec2\x20'+'offset;\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20co'+'rner\x20offse'+'t\x20from\x20cen'+'ter\x20in\x20cli'+'p\x20space\x0a\x20\x20'+'\x20\x20vec2\x20uv;'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20corne'+'r\x20uv\x0a\x20\x20\x20\x20#'+'if\x20GSPLAT_'+'AA\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20aaF'+'actor;\x20//\x20'+'for\x20scenes'+'\x20generated'+'\x20with\x20anti'+'aliasing\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20vec2\x20'+'v;\x0a\x20\x20\x20\x20flo'+'at\x20dlen;\x0a\x20'+'\x20\x20\x20vec2\x20cS'+'ize;\x0a\x20\x20\x20\x20v'+'ec2\x20cUV;\x0a}'+';\x0a\x0a#includ'+'e\x20\x22gsplatE'+'valSHVS\x22\x0a#'+'include\x20\x22g'+'splatQuatT'+'oMat3VS\x22\x0a\x0a'+'#if\x20GSPLAT'+'_COMPRESSE'+('D_DATA\x20==\x20'+'true\x0a\x20\x20\x20\x20#'+'include\x20\x22g'+'splatCompr'+'essedDataV'+'S\x22\x0a\x20\x20\x20\x20#if'+'\x20SH_COEFFS'+'\x20>\x200\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22gsplatC'+'ompressedS'+'HVS\x22\x0a\x20\x20\x20\x20#'+'endif\x0a#eli'+'f\x20GSPLAT_S'+'OGS_DATA\x20='+'=\x20true\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22gsplatSog'+'sDataVS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22gsplatS'+'ogsColorVS'+'\x22\x0a\x20\x20\x20\x20#if\x20'+'SH_COEFFS\x20'+'>\x200\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22gsplatSo'+'gsSHVS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a#'+'else\x0a\x20\x20\x20\x20#'+'include\x20\x22g'+'splatDataV'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22gsp'+'latColorVS'+'\x22\x0a\x20\x20\x20\x20#if\x20'+'SH_COEFFS\x20'+'>\x200\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22gsplatSH'+'VS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a#endi'+'f\x0a\x0a#includ'+'e\x20\x22gsplatS'+'ourceVS\x22\x0a#'+'include\x20\x22g'+'splatCente'+'rVS\x22\x0a#incl'+'ude\x20\x22gspla'+'tCornerVS\x22'+'\x0a#include\x20'+'\x22gsplatOut'+'putVS\x22\x0a\x0a//'+'\x20modify\x20th'+'e\x20gaussian'+'\x20corner\x20so'+'\x20it\x20exclud'+'es\x20gaussia'+'n\x20regions\x20'+'with\x20alpha'+'\x20less\x20than'+'\x201/255\x0avoi'+'d\x20clipCorn'+'er(inout\x20S'+'platCorner'+'\x20corner,\x20f'+'loat\x20alpha'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20clip\x20='+'\x20min(1.0,\x20'+'sqrt(-log('+'1.0\x20/\x20255.'+'0\x20/\x20alpha)'+')\x20/\x202.0);\x0a'+'\x20\x20\x20\x20corner'+'.offset\x20*='+'\x20clip;\x0a\x20\x20\x20'+'\x20corner.uv'+'\x20*=\x20clip;\x0a'+'}\x0a'),H1='\x0auniform\x20h'+'ighp\x20usamp'+'ler2D\x20pack'+'edTexture;'+'\x0auniform\x20h'+'ighp\x20usamp'+'ler2D\x20pack'+'edTimeText'+'ure;\x0aunifo'+'rm\x20highp\x20s'+'ampler2D\x20c'+'hunkTextur'+'e;\x0a\x0a//\x20wor'+'k\x20values\x0av'+'ec4\x20chunkD'+'ataA;\x20\x20\x20\x20/'+'/\x20x:\x20min_x'+',\x20y:\x20min_y'+',\x20z:\x20min_z'+',\x20w:\x20max_x'+'\x0avec4\x20chun'+'kDataB;\x20\x20\x20'+'\x20//\x20x:\x20max'+'_y,\x20y:\x20max'+'_z,\x20z:\x20sca'+'le_min_x,\x20'+'w:\x20scale_m'+'in_y\x0avec4\x20'+'chunkDataC'+';\x20\x20\x20\x20//\x20x:'+'\x20scale_min'+'_z,\x20y:\x20sca'+'le_max_x,\x20'+'z:\x20scale_m'+'ax_y,\x20w:\x20s'+'cale_max_z'+'\x0avec4\x20chun'+'kDataD;\x20\x20\x20'+'\x20//\x20x:\x20min'+'_r,\x20y:\x20min'+'_g,\x20z:\x20min'+'_b,\x20w:\x20max'+'_r\x0avec4\x20ch'+'unkDataE;\x20'+'\x20\x20\x20//\x20x:\x20m'+'ax_g,\x20y:\x20m'+'ax_b,\x20z:\x20m'+'in_motion_'+'x,\x20w:\x20min_'+'motion_y\x0av'+'ec4\x20chunkD'+'ataF;\x20\x20\x20\x20/'+'/\x20x:\x20min_m'+'otion_z,\x20y'+':\x20max_moti'+'on_x,\x20z:\x20m'+'ax_motion_'+'y,\x20w:\x20max_'+'motion_z\x0av'+'ec4\x20chunkD'+'ataT;\x20\x20\x20\x20/'+'/\x20x:\x20min_t'+'ime,\x20y:\x20ma'+'x_time,\x20z:'+'\x20min_time_'+'scale,\x20w:\x20'+'max_time_s'+'cale\x0auvec4'+'\x20packedDat'+'a;\x20\x20\x20//\x20x:'+'\x20position\x20'+'bits,\x20y:\x20r'+'otation\x20bi'+'ts,\x20z:\x20sca'+'le\x20bits,\x20w'+':\x20color\x20bi'+'ts\x0auvec2\x20p'+'ackedT;\x20\x20\x20'+'//\x20x:\x20moti'+'on\x20bits(x,'+'\x20y,\x20z),\x20y:'+'\x20time\x20bits'+'(t_scale,\x20'+'t,\x20unused)'+'\x0a\x0a//\x20tool\x20'+'for\x20comput'+'e\x20Marginal'+'\x20time\x0afloa'+'t\x20computeM'+'arginalT(f'+'loat\x20time,'+'\x20float\x20muT'+',\x20float\x20si'+'gmaT)\x20{\x0a\x20\x20'+'\x20\x20if\x20(muT\x20'+'<=\x20-10.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x201.0'+';\x0a\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20float\x20re'+('sult\x20=\x20exp'+'(-0.5\x20*\x20(p'+'ow((time\x20-'+'\x20muT),\x202.0'+')\x20/\x20pow(si'+'gmaT,\x202.0)'+'));\x0a\x20\x20\x20\x20re'+'turn\x20resul'+'t;\x0a}\x0a\x0avec3'+'\x20unpack111'+'011(uint\x20b'+'its)\x20{\x0a\x20\x20\x20'+'\x20return\x20ve'+'c3(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float(bi'+'ts\x20>>\x2021u)'+'\x20/\x202047.0,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat((bits'+'\x20>>\x2011u)\x20&'+'\x200x3ffu)\x20/'+'\x201023.0,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at(bits\x20&\x20'+'0x7ffu)\x20/\x20'+'2047.0\x0a\x20\x20\x20'+'\x20);\x0a}\x0a\x0avec'+'4\x20unpack88'+'88(uint\x20bi'+'ts)\x20{\x0a\x20\x20\x20\x20'+'return\x20vec'+'4(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float(bit'+'s\x20>>\x2024u)\x20'+'/\x20255.0,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at((bits\x20>'+'>\x2016u)\x20&\x200'+'xffu)\x20/\x2025'+'5.0,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float(('+'bits\x20>>\x208u'+')\x20&\x200xffu)'+'\x20/\x20255.0,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat(bits\x20&'+'\x200xffu)\x20/\x20'+'255.0\x0a\x20\x20\x20\x20'+');\x0a}\x0a\x0acons'+'t\x20float\x20no'+'rm\x20=\x201.0\x20/'+'\x20(sqrt(2.0'+')\x20*\x200.5);\x0a'+'\x0avec4\x20unpa'+'ckRotation'+'(uint\x20bits'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20a\x20=\x20(f'+'loat((bits'+'\x20>>\x2020u)\x20&'+'\x200x3ffu)\x20/'+'\x201023.0\x20-\x20'+'0.5)\x20*\x20nor'+'m;\x0a\x20\x20\x20\x20flo'+'at\x20b\x20=\x20(fl'+'oat((bits\x20'+'>>\x2010u)\x20&\x20'+'0x3ffu)\x20/\x20'+'1023.0\x20-\x200'+'.5)\x20*\x20norm'+';\x0a\x20\x20\x20\x20floa'+'t\x20c\x20=\x20(flo'+'at(bits\x20&\x20'+'0x3ffu)\x20/\x20'+'1023.0\x20-\x200'+'.5)\x20*\x20norm'+';\x0a\x20\x20\x20\x20floa'+'t\x20m\x20=\x20sqrt'+'(1.0\x20-\x20(a\x20'+'*\x20a\x20+\x20b\x20*\x20'+'b\x20+\x20c\x20*\x20c)'+');\x0a\x0a\x20\x20\x20\x20ui'+'nt\x20mode\x20=\x20'+'bits\x20>>\x2030'+'u;\x0a\x20\x20\x20\x20if\x20'+'(mode\x20==\x200'+'u)\x20return\x20'+'vec4(m,\x20a,'+'\x20b,\x20c);\x0a\x20\x20'+'\x20\x20if\x20(mode'+'\x20==\x201u)\x20re'+'turn\x20vec4('+'a,\x20m,\x20b,\x20c'+');\x0a\x20\x20\x20\x20if\x20'+'(mode\x20==\x202'+'u)\x20return\x20'+'vec4(a,\x20b,'+'\x20m,\x20c);\x0a\x20\x20'+'\x20\x20return\x20v'+'ec4(a,\x20b,\x20')+('c,\x20m);\x0a}\x0a\x0a'+'\x0a//\x20read\x20c'+'enter\x0avec3'+'\x20readCente'+'r(SplatSou'+'rce\x20source'+')\x20{\x0a\x20\x20\x20\x20ui'+'nt\x20w\x20=\x20uin'+'t(textureS'+'ize(chunkT'+'exture,\x200)'+'.x)\x20/\x205u;\x0a'+'\x20\x20\x20\x20uint\x20c'+'hunkId\x20=\x20s'+'ource.id\x20/'+'\x20256u;\x0a\x20\x20\x20'+'\x20ivec2\x20chu'+'nkUV\x20=\x20ive'+'c2((chunkI'+'d\x20%\x20w)\x20*\x205'+'u,\x20chunkId'+'\x20/\x20w);\x0a\x0a\x20\x20'+'\x20\x20//\x20read\x20'+'chunk\x20and\x20'+'packed\x20com'+'pressed\x20da'+'ta\x0a\x20\x20\x20\x20chu'+'nkDataA\x20=\x20'+'texelFetch'+'(chunkText'+'ure,\x20chunk'+'UV,\x200);\x0a\x20\x20'+'\x20\x20chunkDat'+'aB\x20=\x20texel'+'Fetch(chun'+'kTexture,\x20'+'chunkUV\x20+\x20'+'ivec2(1,\x200'+'),\x200);\x0a\x20\x20\x20'+'\x20chunkData'+'C\x20=\x20texelF'+'etch(chunk'+'Texture,\x20c'+'hunkUV\x20+\x20i'+'vec2(2,\x200)'+',\x200);\x0a\x20\x20\x20\x20'+'chunkDataD'+'\x20=\x20texelFe'+'tch(chunkT'+'exture,\x20ch'+'unkUV\x20+\x20iv'+'ec2(3,\x200),'+'\x200);\x0a\x20\x20\x20\x20c'+'hunkDataE\x20'+'=\x20texelFet'+'ch(chunkTe'+'xture,\x20chu'+'nkUV\x20+\x20ive'+'c2(4,\x200),\x20'+'0);\x0a\x20\x20\x20\x20pa'+'ckedData\x20='+'\x20texelFetc'+'h(packedTe'+'xture,\x20sou'+'rce.uv,\x200)'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20mix(ch'+'unkDataA.x'+'yz,\x20vec3(c'+'hunkDataA.'+'w,\x20chunkDa'+'taB.xy),\x20u'+'npack11101'+'1(packedDa'+'ta.x));\x0a}\x0a'+'\x0avec4\x20read'+'Color(in\x20S'+'platSource'+'\x20source)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'r\x20=\x20unpack'+'8888(packe'+'dData.w);\x0a'+'\x20\x20\x20\x20return'+'\x20vec4(mix('+'chunkDataD'+'.xyz,\x20vec3'+'(chunkData'+'D.w,\x20chunk'+'DataE.xy),'+'\x20r.rgb),\x20r'+'.w);\x0a}\x0a\x0ave'+'c4\x20getRota'+'tion()\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'unpackRota'+'tion(packe'+'dData.y);\x0a'+'}\x0a\x0avec3\x20ge'+'tScale()\x20{')+('\x0a\x20\x20\x20\x20retur'+'n\x20exp(mix('+'vec3(chunk'+'DataB.zw,\x20'+'chunkDataC'+'.x),\x20chunk'+'DataC.yzw,'+'\x20unpack111'+'011(packed'+'Data.z)));'+'\x0a}\x0a\x0a//\x20giv'+'en\x20a\x20rotat'+'ion\x20matrix'+'\x20and\x20scale'+'\x20vector,\x20c'+'ompute\x203d\x20'+'covariance'+'\x20A\x20and\x20B\x0av'+'oid\x20readCo'+'variance(i'+'n\x20SplatSou'+'rce\x20source'+',\x20out\x20vec3'+'\x20covA,\x20out'+'\x20vec3\x20covB'+')\x20{\x0a\x20\x20\x20\x20ma'+'t3\x20rot\x20=\x20q'+'uatToMat3('+'getRotatio'+'n());\x0a\x20\x20\x20\x20'+'vec3\x20scale'+'\x20=\x20getScal'+'e();\x0a\x0a\x20\x20\x20\x20'+'//\x20M\x20=\x20S\x20*'+'\x20R\x0a\x20\x20\x20\x20mat'+'3\x20M\x20=\x20tran'+'spose(mat3'+'(\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'scale.x\x20*\x20'+'rot[0],\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20scal'+'e.y\x20*\x20rot['+'1],\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20scale.z\x20'+'*\x20rot[2]\x0a\x20'+'\x20\x20\x20));\x0a\x0a\x20\x20'+'\x20\x20covA\x20=\x20v'+'ec3(dot(M['+'0],\x20M[0]),'+'\x20dot(M[0],'+'\x20M[1]),\x20do'+'t(M[0],\x20M['+'2]));\x0a\x20\x20\x20\x20'+'covB\x20=\x20vec'+'3(dot(M[1]'+',\x20M[1]),\x20d'+'ot(M[1],\x20M'+'[2]),\x20dot('+'M[2],\x20M[2]'+'));\x0a}\x0a\x0aflo'+'at\x20getMarg'+'inalT(in\x20S'+'platSource'+'\x20source,\x20i'+'n\x20float\x20ti'+'me)\x20{\x0a\x20\x20\x20\x20'+'float\x20marg'+'inal\x20=\x201.0'+';\x0a\x20\x20\x20\x20#ifd'+'ef\x20IS_4D\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20chu'+'nkDataT\x20=\x20'+'texelFetch'+'(chunkText'+'ure,\x20chunk'+'UV\x20+\x20ivec2'+'(6,\x200),\x200)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'packedT\x20=\x20'+'texelFetch'+'(packedTim'+'eTexture,\x20'+'source.uv,'+'\x200).xy;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20timeData\x20'+'=\x20mix(vec3'+'(chunkData'+'T.z,\x20chunk'+'DataT.x,\x200'+'),\x20vec3(ch'+'unkDataT.w'+',\x20chunkDat'+'aT.y,\x201),\x20'+'unpack1110'+'11(packedT'+'.y));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'tScale\x20=\x20e'+'xp(timeDat')+('a.x);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'muT\x20=\x20time'+'Data.y;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20marg'+'inal\x20=\x20com'+'puteMargin'+'alT(time,\x20'+'muT,\x20tScal'+'e);\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20r'+'eturn\x20marg'+'inal;\x0a}\x0a\x0av'+'ec3\x20readCe'+'nter4D(Spl'+'atSource\x20s'+'ource,\x20flo'+'at\x20time)\x20{'+'\x0a\x20\x20\x20\x20uint\x20'+'w\x20=\x20uint(t'+'extureSize'+'(chunkText'+'ure,\x200).x)'+'\x20/\x207u;\x0a\x20\x20\x20'+'\x20uint\x20chun'+'kId\x20=\x20sour'+'ce.id\x20/\x2025'+'6u;\x0a\x20\x20\x20\x20iv'+'ec2\x20chunkU'+'V\x20=\x20ivec2('+'(chunkId\x20%'+'\x20w)\x20*\x207u,\x20'+'chunkId\x20/\x20'+'w);\x0a\x0a\x20\x20\x20\x20/'+'/\x20read\x20chu'+'nk\x20and\x20pac'+'ked\x20compre'+'ssed\x20data\x0a'+'\x20\x20\x20\x20chunkD'+'ataA\x20=\x20tex'+'elFetch(ch'+'unkTexture'+',\x20chunkUV,'+'\x200);\x0a\x20\x20\x20\x20c'+'hunkDataB\x20'+'=\x20texelFet'+'ch(chunkTe'+'xture,\x20chu'+'nkUV\x20+\x20ive'+'c2(1,\x200),\x20'+'0);\x0a\x20\x20\x20\x20ch'+'unkDataC\x20='+'\x20texelFetc'+'h(chunkTex'+'ture,\x20chun'+'kUV\x20+\x20ivec'+'2(2,\x200),\x200'+');\x0a\x20\x20\x20\x20chu'+'nkDataD\x20=\x20'+'texelFetch'+'(chunkText'+'ure,\x20chunk'+'UV\x20+\x20ivec2'+'(3,\x200),\x200)'+';\x0a\x20\x20\x20\x20chun'+'kDataE\x20=\x20t'+'exelFetch('+'chunkTextu'+'re,\x20chunkU'+'V\x20+\x20ivec2('+'4,\x200),\x200);'+'\x0a\x20\x20\x20\x20chunk'+'DataF\x20=\x20te'+'xelFetch(c'+'hunkTextur'+'e,\x20chunkUV'+'\x20+\x20ivec2(5'+',\x200),\x200);\x0a'+'\x20\x20\x20\x20chunkD'+'ataT\x20=\x20tex'+'elFetch(ch'+'unkTexture'+',\x20chunkUV\x20'+'+\x20ivec2(6,'+'\x200),\x200);\x0a\x20'+'\x20\x20\x20packedD'+'ata\x20=\x20texe'+'lFetch(pac'+'kedTexture'+',\x20source.u'+'v,\x200);\x0a\x20\x20\x20'+'\x20packedT\x20='+'\x20texelFetc'+'h(packedTi'+'meTexture,'+'\x20source.uv'+',\x200).xy;\x0a\x0a'+'\x20\x20\x20\x20vec3\x20s'+'platCenter'+'\x20=\x20mix(chu')+('nkDataA.xy'+'z,\x20vec3(ch'+'unkDataA.w'+',\x20chunkDat'+'aB.xy),\x20un'+'pack111011'+'(packedDat'+'a.x));\x0a\x20\x20\x20'+'\x20#ifdef\x20IS'+'_4D\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20tim'+'e\x20=\x20mix(ve'+'c3(chunkDa'+'taT.z,\x20chu'+'nkDataT.x,'+'\x200),\x20vec3('+'chunkDataT'+'.w,\x20chunkD'+'ataT.y,\x201)'+',\x20unpack11'+'1011(packe'+'dT.y));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20muT\x20=\x20ti'+'me.y;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20m'+'ovingSpeed'+'\x20=\x20mix(vec'+'3(chunkDat'+'aE.zw,\x20chu'+'nkDataF.x)'+',\x20chunkDat'+'aF.yzw,\x20un'+'pack111011'+'(packedT.x'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20spl'+'atOffset\x20='+'\x20movingSpe'+'ed\x20*\x20(time'+'\x20-\x20muT);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20spl'+'atCenter\x20+'+'=\x20splatOff'+'set;\x0a\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'return\x20spl'+'atCenter;\x0a'+'}\x0a'),W1='\x0a#if\x20SH_BA'+'NDS\x20>\x200\x0a\x0au'+'niform\x20hig'+'hp\x20usample'+'r2D\x20shText'+'ure0;\x0aunif'+'orm\x20highp\x20'+'usampler2D'+'\x20shTexture'+'1;\x0auniform'+'\x20highp\x20usa'+'mpler2D\x20sh'+'Texture2;\x0a'+'\x0avec4\x20unpa'+'ck8888s(in'+'\x20uint\x20bits'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20vec4('+'(uvec4(bit'+'s)\x20>>\x20uvec'+'4(0u,\x208u,\x20'+'16u,\x2024u))'+'\x20&\x200xffu)\x20'+'*\x20(8.0\x20/\x202'+'55.0)\x20-\x204.'+'0;\x0a}\x0a\x0avoid'+'\x20readSHDat'+'a(in\x20Splat'+'Source\x20sou'+'rce,\x20out\x20v'+'ec3\x20sh[15]'+',\x20out\x20floa'+'t\x20scale)\x20{'+'\x0a\x20\x20\x20\x20//\x20re'+'ad\x20the\x20sh\x20'+'coefficien'+'ts\x0a\x20\x20\x20\x20uve'+'c4\x20shData0'+'\x20=\x20texelFe'+'tch(shText'+'ure0,\x20sour'+'ce.uv,\x200);'+'\x0a\x20\x20\x20\x20uvec4'+'\x20shData1\x20='+'\x20texelFetc'+'h(shTextur'+'e1,\x20source'+'.uv,\x200);\x0a\x20'+'\x20\x20\x20uvec4\x20s'+'hData2\x20=\x20t'+'exelFetch('+'shTexture2'+',\x20source.u'+'v,\x200);\x0a\x0a\x20\x20'+'\x20\x20vec4\x20r0\x20'+'=\x20unpack88'+'88s(shData'+'0.x);\x0a\x20\x20\x20\x20'+'vec4\x20r1\x20=\x20'+'unpack8888'+'s(shData0.'+'y);\x0a\x20\x20\x20\x20ve'+'c4\x20r2\x20=\x20un'+'pack8888s('+'shData0.z)'+';\x0a\x20\x20\x20\x20vec4'+'\x20r3\x20=\x20unpa'+'ck8888s(sh'+'Data0.w);\x0a'+'\x0a\x20\x20\x20\x20vec4\x20'+'g0\x20=\x20unpac'+'k8888s(shD'+'ata1.x);\x0a\x20'+'\x20\x20\x20vec4\x20g1'+'\x20=\x20unpack8'+'888s(shDat'+'a1.y);\x0a\x20\x20\x20'+'\x20vec4\x20g2\x20='+'\x20unpack888'+'8s(shData1'+'.z);\x0a\x20\x20\x20\x20v'+'ec4\x20g3\x20=\x20u'+'npack8888s'+'(shData1.w'+');\x0a\x0a\x20\x20\x20\x20ve'+'c4\x20b0\x20=\x20un'+'pack8888s('+'shData2.x)'+';\x0a\x20\x20\x20\x20vec4'+'\x20b1\x20=\x20unpa'+'ck8888s(sh'+'Data2.y);\x0a'+'\x20\x20\x20\x20vec4\x20b'+'2\x20=\x20unpack'+'8888s(shDa'+'ta2.z);\x0a\x20\x20'+'\x20\x20vec4\x20b3\x20'+'=\x20unpack88'+'88s(shData'+'2.w);\x0a\x0a\x20\x20\x20'+('\x20sh[0]\x20=\x20\x20'+'vec3(r0.x,'+'\x20g0.x,\x20b0.'+'x);\x0a\x20\x20\x20\x20sh'+'[1]\x20=\x20\x20vec'+'3(r0.y,\x20g0'+'.y,\x20b0.y);'+'\x0a\x20\x20\x20\x20sh[2]'+'\x20=\x20\x20vec3(r'+'0.z,\x20g0.z,'+'\x20b0.z);\x0a\x20\x20'+'\x20\x20sh[3]\x20=\x20'+'\x20vec3(r0.w'+',\x20g0.w,\x20b0'+'.w);\x0a\x20\x20\x20\x20s'+'h[4]\x20=\x20\x20ve'+'c3(r1.x,\x20g'+'1.x,\x20b1.x)'+';\x0a\x20\x20\x20\x20sh[5'+']\x20=\x20\x20vec3('+'r1.y,\x20g1.y'+',\x20b1.y);\x0a\x20'+'\x20\x20\x20sh[6]\x20='+'\x20\x20vec3(r1.'+'z,\x20g1.z,\x20b'+'1.z);\x0a\x20\x20\x20\x20'+'sh[7]\x20=\x20\x20v'+'ec3(r1.w,\x20'+'g1.w,\x20b1.w'+');\x0a\x20\x20\x20\x20sh['+'8]\x20=\x20\x20vec3'+'(r2.x,\x20g2.'+'x,\x20b2.x);\x0a'+'\x20\x20\x20\x20sh[9]\x20'+'=\x20\x20vec3(r2'+'.y,\x20g2.y,\x20'+'b2.y);\x0a\x20\x20\x20'+'\x20sh[10]\x20=\x20'+'vec3(r2.z,'+'\x20g2.z,\x20b2.'+'z);\x0a\x20\x20\x20\x20sh'+'[11]\x20=\x20vec'+'3(r2.w,\x20g2'+'.w,\x20b2.w);'+'\x0a\x20\x20\x20\x20sh[12'+']\x20=\x20vec3(r'+'3.x,\x20g3.x,'+'\x20b3.x);\x0a\x20\x20'+'\x20\x20sh[13]\x20='+'\x20vec3(r3.y'+',\x20g3.y,\x20b3'+'.y);\x0a\x20\x20\x20\x20s'+'h[14]\x20=\x20ve'+'c3(r3.z,\x20g'+'3.z,\x20b3.z)'+';\x0a\x0a\x20\x20\x20\x20sca'+'le\x20=\x201.0;\x0a'+'}\x0a\x0a#endif\x0a'),$1='\x0a\x20\x20\x20\x20#if\x20S'+'H_BANDS\x20=='+'\x201\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#define\x20S'+'H_COEFFS\x203'+'\x0a\x20\x20\x20\x20#elif'+'\x20SH_BANDS\x20'+'==\x202\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#define'+'\x20SH_COEFFS'+'\x208\x0a\x20\x20\x20\x20#el'+'if\x20SH_BAND'+'S\x20==\x203\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#defi'+'ne\x20SH_COEF'+'FS\x2015\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#defin'+'e\x20SH_COEFF'+'S\x200\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20SH_BAN'+'DS\x20>\x200\x0a\x0a\x20\x20'+'\x20\x20const\x20fl'+'oat\x20SH_C1\x20'+'=\x200.488602'+'5119029199'+'f;\x0a\x0a\x20\x20\x20\x20#i'+'f\x20SH_BANDS'+'\x20>\x201\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20const\x20f'+'loat\x20SH_C2'+'_0\x20=\x201.092'+'5484305920'+'792f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'float\x20SH_C'+'2_1\x20=\x20-1.0'+'9254843059'+'20792f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20float\x20SH'+'_C2_2\x20=\x200.'+'3153915652'+'5252005f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20co'+'nst\x20float\x20'+'SH_C2_3\x20=\x20'+'-1.0925484'+'305920792f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'const\x20floa'+'t\x20SH_C2_4\x20'+'=\x200.546274'+'2152960396'+'f;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20SH_BAND'+'S\x20>\x202\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'float\x20SH_C'+'3_0\x20=\x20-0.5'+'9004358992'+'66435f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20float\x20SH'+'_C3_1\x20=\x202.'+'8906114426'+'40554f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20float\x20SH'+'_C3_2\x20=\x20-0'+'.457045799'+'4644658f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20co'+'nst\x20float\x20'+'SH_C3_3\x20=\x20'+'0.37317633'+'25901154f;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20c'+'onst\x20float'+'\x20SH_C3_4\x20='+'\x20-0.457045'+'7994644658'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20const\x20flo'+'at\x20SH_C3_5'+'\x20=\x201.44530'+'5721320277'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20const\x20flo'+'at\x20SH_C3_6'+'\x20=\x20-0.5900'+'4358992664'+'35f;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20//\x20see\x20ht'+'tps://gith'+'ub.com/gra'+'phdeco-inr'+('ia/gaussia'+'n-splattin'+'g/blob/mai'+'n/utils/sh'+'_utils.py\x0a'+'\x20\x20\x20\x20vec3\x20e'+'valSH(in\x20v'+'ec3\x20sh[SH_'+'COEFFS],\x20i'+'n\x20vec3\x20dir'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20x\x20'+'=\x20dir.x;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20y\x20=\x20dir'+'.y;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20z\x20'+'=\x20dir.z;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x201st\x20degre'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20resul'+'t\x20=\x20SH_C1\x20'+'*\x20(-sh[0]\x20'+'*\x20y\x20+\x20sh[1'+']\x20*\x20z\x20-\x20sh'+'[2]\x20*\x20x);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20SH_BAND'+'S\x20>\x201\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x202nd\x20degre'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'xx\x20=\x20x\x20*\x20x'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'yy\x20=\x20y\x20*\x20y'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'zz\x20=\x20z\x20*\x20z'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'xy\x20=\x20x\x20*\x20y'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'yz\x20=\x20y\x20*\x20z'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'xz\x20=\x20x\x20*\x20z'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20resul'+'t\x20+=\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sh[3]\x20*\x20('+'SH_C2_0\x20*\x20'+'xy)\x20+\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20sh[4]\x20*\x20'+'(SH_C2_1\x20*'+'\x20yz)\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[5]\x20*'+'\x20(SH_C2_2\x20'+'*\x20(2.0\x20*\x20z'+'z\x20-\x20xx\x20-\x20y'+'y))\x20+\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20sh[6]\x20*\x20'+'(SH_C2_3\x20*'+'\x20xz)\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[7]\x20*'+'\x20(SH_C2_4\x20'+'*\x20(xx\x20-\x20yy'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20SH_BANDS'+'\x20>\x202\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'3rd\x20degree'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20result\x20'+'+=\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'h[8]\x20\x20*\x20(S'+'H_C3_0\x20*\x20y'+'\x20*\x20(3.0\x20*\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[9]\x20\x20*\x20(SH'+'_C3_1\x20*\x20xy'+'\x20*\x20z)\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20sh[10]'+'\x20*\x20(SH_C3_'+'2\x20*\x20y\x20*\x20(4'+'.0\x20*\x20zz\x20-\x20')+('xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[11]\x20*\x20(SH'+'_C3_3\x20*\x20z\x20'+'*\x20(2.0\x20*\x20z'+'z\x20-\x203.0\x20*\x20'+'xx\x20-\x203.0\x20*'+'\x20yy))\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20sh[12]'+'\x20*\x20(SH_C3_'+'4\x20*\x20x\x20*\x20(4'+'.0\x20*\x20zz\x20-\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[13]\x20*\x20(SH'+'_C3_5\x20*\x20z\x20'+'*\x20(xx\x20-\x20yy'+'))\x20+\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sh[14]\x20*\x20'+'(SH_C3_6\x20*'+'\x20x\x20*\x20(xx\x20-'+'\x203.0\x20*\x20yy)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20result'+';\x0a\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20#endif\x0a'),X1='\x0amat3\x20quat'+'ToMat3(vec'+'4\x20R)\x20{\x0a\x20\x20\x20'+'\x20vec4\x20R2\x20='+'\x20R\x20+\x20R;\x0a\x20\x20'+'\x20\x20float\x20X\x20'+'=\x20R2.x\x20*\x20R'+'.w;\x0a\x20\x20\x20\x20ve'+'c4\x20Y\x20\x20=\x20R2'+'.y\x20*\x20R;\x0a\x20\x20'+'\x20\x20vec4\x20Z\x20\x20'+'=\x20R2.z\x20*\x20R'+';\x0a\x20\x20\x20\x20floa'+'t\x20W\x20=\x20R2.w'+'\x20*\x20R.w;\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'mat3(\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x201.0\x20-\x20'+'Z.z\x20-\x20W,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20Y.z\x20+\x20X'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20Y.w\x20'+'-\x20Z.x,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20Y.z\x20-\x20X,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x201.'+'0\x20-\x20Y.y\x20-\x20'+'W,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20Z.w'+'\x20+\x20Y.x,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20Y.w\x20+\x20Z.'+'x,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20Z.w'+'\x20-\x20Y.x,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x201.0\x20'+'-\x20Y.y\x20-\x20Z.'+'z\x0a\x20\x20\x20\x20);\x0a}'+'\x0a',q1='\x0auniform\x20m'+'ediump\x20sam'+'pler2D\x20sh0'+';\x0a\x0auniform'+'\x20vec4\x20sh0_'+'mins;\x0aunif'+'orm\x20vec4\x20s'+'h0_maxs;\x0a\x0a'+'float\x20SH_C'+'0\x20=\x200.2820'+'9479177387'+'814;\x0a\x0avec4'+'\x20readColor'+'(in\x20SplatS'+'ource\x20sour'+'ce)\x20{\x0a\x20\x20\x20\x20'+'vec4\x20clr\x20='+'\x20mix(sh0_m'+'ins,\x20sh0_m'+'axs,\x20texel'+'Fetch(sh0,'+'\x20source.uv'+',\x200));\x0a\x20\x20\x20'+'\x20return\x20ve'+'c4(vec3(0.'+'5)\x20+\x20clr.x'+'yz\x20*\x20SH_C0'+',\x201.0\x20/\x20(1'+'.0\x20+\x20exp(-'+'clr.w)));\x0a'+'}\x0a',j1='\x0auniform\x20h'+'ighp\x20usamp'+'ler2D\x20pack'+'edTexture;'+'\x0a\x0auniform\x20'+'vec3\x20means'+'_mins;\x0auni'+'form\x20vec3\x20'+'means_maxs'+';\x0a\x0auniform'+'\x20vec3\x20scal'+'es_mins;\x0au'+'niform\x20vec'+'3\x20scales_m'+'axs;\x0a\x0avec4'+'\x20unpackU32'+'(uint\x20v)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20vec4(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t((v\x20>>\x2024'+'u)\x20&\x200xFFu'+')\x20/\x20255.0,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat((v\x20>>'+'\x2016u)\x20&\x200x'+'FFu)\x20/\x20255'+'.0,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float((v'+'\x20>>\x208u)\x20&\x20'+'0xFFu)\x20/\x202'+'55.0,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float('+'v\x20&\x200xFFu)'+'\x20/\x20255.0\x0a\x20'+'\x20\x20\x20);\x0a}\x0a\x0au'+'vec4\x20packe'+'dSample;\x0a\x0a'+'//\x20read\x20th'+'e\x20model-sp'+'ace\x20center'+'\x20of\x20the\x20ga'+'ussian\x0avec'+'3\x20readCent'+'er(SplatSo'+'urce\x20sourc'+'e)\x20{\x0a\x0a\x20\x20\x20\x20'+'//\x20read\x20th'+'e\x20packed\x20t'+'exture\x20sam'+'ple\x0a\x20\x20\x20\x20pa'+'ckedSample'+'\x20=\x20texelFe'+'tch(packed'+'Texture,\x20s'+'ource.uv,\x20'+'0);\x0a\x0a\x20\x20\x20\x20v'+'ec3\x20l\x20=\x20un'+'packU32(pa'+'ckedSample'+'.x).xyz;\x0a\x20'+'\x20\x20\x20vec3\x20u\x20'+'=\x20unpackU3'+'2(packedSa'+'mple.y).xy'+'z;\x0a\x20\x20\x20\x20vec'+'3\x20n\x20=\x20(l\x20*'+'\x20255.0\x20+\x20u'+'\x20*\x20255.0\x20*'+'\x20256.0)\x20/\x20'+'65535.0;\x0a\x20'+'\x20\x20\x20vec3\x20v\x20'+'=\x20mix(mean'+'s_mins,\x20me'+'ans_maxs,\x20'+'n);\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20sign'+'(v)\x20*\x20(exp'+'(abs(v))\x20-'+'\x201.0);\x0a}\x0a\x0a'+'const\x20floa'+'t\x20norm\x20=\x202'+'.0\x20/\x20sqrt('+'2.0);\x0a\x0a//\x20'+'sample\x20cov'+'ariance\x20ve'+'ctors\x0avoid'+'\x20readCovar'+'iance(in\x20S'+'platSource'+'\x20source,\x20o'+'ut\x20vec3\x20co'+'vA,\x20out\x20ve'+'c3\x20covB)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'qdata\x20=\x20un'+'packU32(pa'+'ckedSample'+'.z);\x0a\x20\x20\x20\x20v'+'ec3\x20sdata\x20'+('=\x20unpackU3'+'2(packedSa'+'mple.w).xy'+'z;\x0a\x0a\x20\x20\x20\x20ve'+'c3\x20abc\x20=\x20('+'qdata.xyz\x20'+'-\x200.5)\x20*\x20n'+'orm;\x0a\x20\x20\x20\x20f'+'loat\x20d\x20=\x20s'+'qrt(max(0.'+'0,\x201.0\x20-\x20d'+'ot(abc,\x20ab'+'c)));\x0a\x0a\x20\x20\x20'+'\x20uint\x20mode'+'\x20=\x20uint(qd'+'ata.w\x20*\x2025'+'5.0\x20+\x200.5)'+'\x20-\x20252u;\x0a\x0a'+'\x20\x20\x20\x20vec4\x20q'+'uat\x20=\x20(mod'+'e\x20==\x200u)\x20?'+'\x20vec4(d,\x20a'+'bc)\x20:\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20((mode\x20='+'=\x201u)\x20?\x20ve'+'c4(abc.x,\x20'+'d,\x20abc.yz)'+'\x20:\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20('+'(mode\x20==\x202'+'u)\x20?\x20vec4('+'abc.xy,\x20d,'+'\x20abc.z)\x20:\x20'+'vec4(abc,\x20'+'d)));\x0a\x0a\x20\x20\x20'+'\x20mat3\x20rot\x20'+'=\x20quatToMa'+'t3(quat);\x0a'+'\x20\x20\x20\x20vec3\x20s'+'cale\x20=\x20exp'+'(mix(scale'+'s_mins,\x20sc'+'ales_maxs,'+'\x20sdata));\x0a'+'\x0a\x20\x20\x20\x20//\x20M\x20'+'=\x20S\x20*\x20R\x0a\x20\x20'+'\x20\x20mat3\x20M\x20='+'\x20transpose'+'(mat3(\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20scale'+'.x\x20*\x20rot[0'+'],\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20scale.y\x20*'+'\x20rot[1],\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le.z\x20*\x20rot'+'[2]\x0a\x20\x20\x20\x20))'+';\x0a\x0a\x20\x20\x20\x20cov'+'A\x20=\x20vec3(d'+'ot(M[0],\x20M'+'[0]),\x20dot('+'M[0],\x20M[1]'+'),\x20dot(M[0'+'],\x20M[2]));'+'\x0a\x20\x20\x20\x20covB\x20'+'=\x20vec3(dot'+'(M[1],\x20M[1'+']),\x20dot(M['+'1],\x20M[2]),'+'\x20dot(M[2],'+'\x20M[2]));\x0a}'+'\x0a'),Y1='\x0auniform\x20h'+'ighp\x20sampl'+'er2D\x20sh_ce'+'ntroids;\x0a\x0a'+'uniform\x20fl'+'oat\x20shN_mi'+'ns;\x0aunifor'+'m\x20float\x20sh'+'N_maxs;\x0a\x0a/'+'/\x20To\x20suppo'+'rt\x20each\x20SH'+'\x20degree,\x20r'+'eadSHData\x20'+'is\x20overloa'+'ded\x20based\x20'+'on\x20the\x20SH\x20'+'vector\x20dep'+'th\x20\x0a\x0avoid\x20'+'readSHData'+'(in\x20SplatS'+'ource\x20sour'+'ce,\x20out\x20ve'+'c3\x20sh[SH_C'+'OEFFS],\x20ou'+'t\x20float\x20sc'+'ale)\x20{\x0a\x20\x20\x20'+'\x20//\x20extrac'+'t\x20spherica'+'l\x20harmonic'+'s\x20palette\x20'+'index\x0a\x20\x20\x20\x20'+'ivec2\x20t\x20=\x20'+'ivec2(pack'+'edSample.x'+'\x20&\x20255u,\x20p'+'ackedSampl'+'e.y\x20&\x20255u'+');\x0a\x20\x20\x20\x20int'+'\x20n\x20=\x20t.x\x20+'+'\x20t.y\x20*\x20256'+';\x0a\x20\x20\x20\x20int\x20'+'u\x20=\x20(n\x20%\x206'+'4)\x20*\x20SH_CO'+'EFFS;\x0a\x20\x20\x20\x20'+'int\x20v\x20=\x20n\x20'+'/\x2064;\x0a\x0a\x20\x20\x20'+'\x20//\x20calcul'+'ate\x20offset'+'\x20into\x20the\x20'+'centroids\x20'+'texture\x20an'+'d\x20read\x20con'+'secutive\x20t'+'exels\x0a\x20\x20\x20\x20'+'for\x20(int\x20i'+'\x20=\x200;\x20i\x20<\x20'+'SH_COEFFS;'+'\x20i++)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20sh[i'+']\x20=\x20mix(ve'+'c3(shN_min'+'s),\x20vec3(s'+'hN_maxs),\x20'+'texelFetch'+'(sh_centro'+'ids,\x20ivec2'+'(u\x20+\x20i,\x20v)'+',\x200).xyz);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20scale\x20=\x20'+'1.0;\x0a}\x0a',K1='\x0auniform\x20v'+'ec2\x20viewpo'+'rt;\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20viewpo'+'rt\x20dimensi'+'ons\x0aunifor'+'m\x20vec4\x20cam'+'era_params'+';\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x201\x20/'+'\x20far,\x20far,'+'\x20near,\x20isO'+'rtho\x0aunifo'+'rm\x20float\x20u'+'SplatScale'+';\x0auniform\x20'+'float\x20rend'+'erSpace;\x0au'+'niform\x20flo'+'at\x20endSpac'+'e;\x0auniform'+'\x20int\x20uShap'+'eN;\x0a\x0a//\x20ca'+'lculate\x20th'+'e\x20clip-spa'+'ce\x20offset\x20'+'from\x20the\x20c'+'enter\x20for\x20'+'this\x20gauss'+'ian\x0abool\x20i'+'nitCorner('+'SplatSourc'+'e\x20source,\x20'+'SplatCente'+'r\x20center,\x20'+'out\x20SplatC'+'orner\x20corn'+'er,\x20int\x20po'+'intCloudMo'+'deEnabled)'+'\x20{\x0a\x20\x20\x20\x20//\x20'+'get\x20covari'+'ance\x0a\x20\x20\x20\x20v'+'ec3\x20covA,\x20'+'covB;\x0a\x20\x20\x20\x20'+'readCovari'+'ance(sourc'+'e,\x20covA,\x20c'+'ovB);\x0a\x0a\x20\x20\x20'+'\x20mat3\x20Vrk\x20'+'=\x20mat3(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20covA'+'.x,\x20covA.y'+',\x20covA.z,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20co'+'vA.y,\x20covB'+'.x,\x20covB.y'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'covA.z,\x20co'+'vB.y,\x20covB'+'.z\x0a\x20\x20\x20\x20);\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20focal\x20=\x20v'+'iewport.x\x20'+'*\x20center.p'+'rojMat00;\x0a'+'\x0a\x20\x20\x20\x20vec3\x20'+'v\x20=\x20camera'+'_params.w\x20'+'==\x201.0\x20?\x20v'+'ec3(0.0,\x200'+'.0,\x201.0)\x20:'+'\x20center.vi'+'ew.xyz;\x0a\x20\x20'+'\x20\x20float\x20J1'+'\x20=\x20focal\x20/'+'\x20v.z;\x0a\x20\x20\x20\x20'+'vec2\x20J2\x20=\x20'+'-J1\x20/\x20v.z\x20'+'*\x20v.xy;\x0a\x20\x20'+'\x20\x20mat3\x20J\x20='+'\x20mat3(\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20J1,\x200'+'.0,\x20J2.x,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x200.'+'0,\x20J1,\x20J2.'+'y,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x200.0,\x200.0,'+'\x200.0\x0a\x20\x20\x20\x20)'+';\x0a\x0a\x20\x20\x20\x20mat'+'3\x20W\x20=\x20tran'+'spose(mat3'+'(center.mo'+'delView));'+'\x0a\x20\x20\x20\x20mat3\x20'+'T\x20=\x20W\x20*\x20J;'+'\x0a\x20\x20\x20\x20mat3\x20'+'cov\x20=\x20tran'+'spose(T)\x20*'+('\x20Vrk\x20*\x20T;\x0a'+'\x0a\x20\x20\x20\x20#if\x20G'+'SPLAT_AA\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'calculate\x20'+'AA\x20factor\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20detOri'+'g\x20=\x20cov[0]'+'[0]\x20*\x20cov['+'1][1]\x20-\x20co'+'v[0][1]\x20*\x20'+'cov[0][1];'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20detBl'+'ur\x20=\x20(cov['+'0][0]\x20+\x200.'+'3)\x20*\x20(cov['+'1][1]\x20+\x200.'+'3)\x20-\x20cov[0'+'][1]\x20*\x20cov'+'[0][1];\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20corn'+'er.aaFacto'+'r\x20=\x20sqrt(m'+'ax(detOrig'+'\x20/\x20detBlur'+',\x200.0));\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20diagonal1'+'\x20=\x20cov[0]['+'0]\x20+\x200.3;\x0a'+'\x20\x20\x20\x20float\x20'+'offDiagona'+'l\x20=\x20cov[0]'+'[1];\x0a\x20\x20\x20\x20f'+'loat\x20diago'+'nal2\x20=\x20cov'+'[1][1]\x20+\x200'+'.3;\x0a\x0a\x20\x20\x20\x20f'+'loat\x20mid\x20='+'\x200.5\x20*\x20(di'+'agonal1\x20+\x20'+'diagonal2)'+';\x0a\x20\x20\x20\x20floa'+'t\x20radius\x20='+'\x20length(ve'+'c2((diagon'+'al1\x20-\x20diag'+'onal2)\x20/\x202'+'.0,\x20offDia'+'gonal));\x0a\x20'+'\x20\x20\x20float\x20l'+'ambda1\x20=\x20m'+'id\x20+\x20radiu'+'s;\x0a\x20\x20\x20\x20flo'+'at\x20lambda2'+'\x20=\x20max(mid'+'\x20-\x20radius,'+'\x200.1);\x0a\x20\x20\x20'+'\x20if\x20(point'+'CloudModeE'+'nabled\x20==\x20'+'1)\x20{\x0a\x20\x20\x20\x20l'+'ambda1\x20=\x20l'+'ambda2\x20=\x202'+'.0;\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20//\x20Us'+'e\x20the\x20smal'+'ler\x20viewpo'+'rt\x20dimensi'+'on\x20to\x20limi'+'t\x20the\x20kern'+'el\x20size\x20re'+'lative\x20to\x20'+'the\x20screen'+'\x20resolutio'+'n.\x0a\x20\x20\x20\x20flo'+'at\x20vmin\x20=\x20'+'min(1024.0'+',\x20min(view'+'port.x,\x20vi'+'ewport.y))'+';\x0a\x0a\x20\x20\x20\x20flo'+'at\x20l1\x20=\x202.'+'0\x20*\x20min(sq'+'rt(2.0\x20*\x20l'+'ambda1),\x20v'+'min);\x0a\x20\x20\x20\x20'+'float\x20l2\x20='+'\x202.0\x20*\x20min'+'(sqrt(2.0\x20'+'*\x20lambda2)'+',\x20vmin);\x0a\x0a'+'\x20\x20\x20\x20//\x20ear'+'ly-out\x20gau'+'ssians\x20sma'+'ller\x20than\x20'+'2\x20pixels\x0a\x20')+('\x20\x20\x20if\x20(l1\x20'+'<\x202.0\x20&&\x20l'+'2\x20<\x202.0)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20fals'+'e;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20vec2\x20c'+'\x20=\x20center.'+'proj.ww\x20/\x20'+'viewport;\x0a'+'\x0a\x20\x20\x20\x20//\x20cu'+'ll\x20against'+'\x20frustum\x20x'+'/y\x20axes\x0a\x20\x20'+'\x20\x20if\x20(any('+'greaterTha'+'n(abs(cent'+'er.proj.xy'+')\x20-\x20vec2(m'+'ax(l1,\x20l2)'+')\x20*\x20c,\x20cen'+'ter.proj.w'+'w)))\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20false;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'vec2\x20diago'+'nalVector\x20'+'=\x20normaliz'+'e(vec2(off'+'Diagonal,\x20'+'lambda1\x20-\x20'+'diagonal1)'+');\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20scale\x20'+'=\x200.0;\x0a\x20\x20\x20'+'\x20bool\x20inRe'+'nderSpace\x20'+'=\x20(center.'+'view.x\x20>=\x20'+'-renderSpa'+'ce\x20&&\x20cent'+'er.view.x\x20'+'<=\x20renderS'+'pace)\x20&&\x20('+'center.vie'+'w.y\x20>=\x20-re'+'nderSpace\x20'+'&&\x20center.'+'view.y\x20<=\x20'+'renderSpac'+'e);\x0a\x20\x20\x20\x20bo'+'ol\x20openRen'+'derAnim\x20=\x20'+'renderSpac'+'e\x20<\x20endSpa'+'ce;\x0a\x20\x20\x20\x20bo'+'ol\x20inRende'+'r\x20=\x20render'+'Space\x20>=\x20e'+'ndSpace\x20||'+'\x20inRenderS'+'pace\x20||\x20po'+'intCloudMo'+'deEnabled\x20'+'==\x201;\x0a\x20\x20\x20\x20'+'if(!openRe'+'nderAnim\x20&'+'&\x20uSplatSc'+'ale\x20>\x200.0\x20'+'&&\x20uSplatS'+'cale\x20<=\x205.'+'0){\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20scale\x20=\x20'+'uSplatScal'+'e;\x0a\x20\x20\x20\x20}\x20e'+'lse\x20if\x20(in'+'Render){\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le\x20=\x201.0;\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20if\x20(openR'+'enderAnim)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'scale\x20=\x20in'+'RenderSpac'+'e\x20?\x20uSplat'+'Scale\x20:\x200.'+'1;\x0a\x20\x20\x20\x20}\x0a\x20'+'\x20\x20\x20vec2\x20v1'+'\x20=\x20scale\x20*'+'\x20l1\x20*\x20diag'+'onalVector'+';\x0a\x20\x20\x20\x20vec2'+'\x20v2\x20=\x20scal'+'e\x20*\x20l2\x20*\x20v'+'ec2(diagon'+'alVector.y'+',\x20-diagona'+'lVector.x)')+(';\x0a\x0a\x20\x20\x20\x20cor'+'ner.offset'+'\x20=\x20(source'+'.cornerUV.'+'x\x20*\x20v1\x20+\x20s'+'ource.corn'+'erUV.y\x20*\x20v'+'2)\x20*\x20c;\x0a\x20\x20'+'\x20\x20//\x20corne'+'r.uv\x20=\x20sou'+'rce.corner'+'UV;\x0a\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20if\x20(uSh'+'apeN\x20<\x203)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'corner.uv\x20'+'=\x20source.c'+'ornerUV;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'corner.cSi'+'ze\x20=\x20(v1\x20+'+'\x20v2)\x20*\x20c;\x0a'+'\x20\x20\x20\x20corner'+'.cUV\x20=\x20sou'+'rce.corner'+'UV;\x0a\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20return\x20'+'true;\x0a}\x0a'),Z1='\x0a\x0auniform\x20'+'highp\x20samp'+'ler2D\x20tran'+'sformA;\x0aun'+'iform\x20high'+'p\x20sampler2'+'D\x20transfor'+'mB;\x0aunifor'+'m\x20highp\x20sa'+'mpler2D\x20tr'+'ansformR;\x0a'+'\x0a#ifdef\x20IS'+'_4D\x0aunifor'+'m\x20highp\x20sa'+'mpler2D\x20tr'+'ansformMot'+'ion;\x0aunifo'+'rm\x20highp\x20s'+'ampler2D\x20t'+'ransformLi'+'fecycle;\x0a#'+'endif\x0a\x0a//\x20'+'work\x20value'+'s\x0a//\x20uint\x20'+'tAw;\x0avec2\x20'+'sampledCov'+'4D;\x0afloat\x20'+'muT;\x0a\x0a//\x20t'+'ool\x20for\x20co'+'mpute\x20Marg'+'inal\x20time\x0a'+'float\x20comp'+'uteMargina'+'lT(float\x20t'+'ime,\x20float'+'\x20muT,\x20floa'+'t\x20sigmaT)\x20'+'{\x0a\x20\x20\x20\x20if\x20('+'muT\x20<=\x20-10'+'.0)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x201.0;\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20floa'+'t\x20result\x20='+'\x20exp(-0.5\x20'+'*\x20(pow((ti'+'me\x20-\x20muT),'+'\x202.0)\x20/\x20po'+'w(sigmaT,\x20'+'2.0)));\x0a\x20\x20'+'\x20\x20return\x20r'+'esult;\x0a}\x0a\x0a'+'//\x20read\x20th'+'e\x20model-sp'+'ace\x20center'+'\x20of\x20the\x20ga'+'ussian\x0avec'+'3\x20readCent'+'er(SplatSo'+'urce\x20sourc'+'e)\x20{\x0a\x20\x20\x20\x20/'+'/\x20read\x20tra'+'nsform\x20dat'+'a\x0a\x20\x20\x20\x20retu'+'rn\x20texelFe'+'tch(transf'+'ormA,\x20sour'+'ce.uv,\x200).'+'xyz;\x0a}\x0a\x0ama'+'t3\x20quatToM'+'at3v2(vec4'+'\x20R)\x20{\x0a\x20\x20\x20\x20'+'float\x20x\x20=\x20'+'R.w;\x0a\x20\x20\x20\x20f'+'loat\x20y\x20=\x20R'+'.x;\x0a\x20\x20\x20\x20fl'+'oat\x20z\x20=\x20R.'+'y;\x0a\x20\x20\x20\x20flo'+'at\x20w\x20=\x20R.z'+';\x0a\x20\x20\x20\x20retu'+'rn\x20mat3(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x201.0'+'\x20-\x202.0\x20*\x20('+'z\x20*\x20z\x20+\x20w\x20'+'*\x20w),\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'2.0\x20*\x20(y\x20*'+'\x20z\x20+\x20x\x20*\x20w'+'),\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x202.0'+'\x20*\x20(y\x20*\x20w\x20'+'-\x20x\x20*\x20z),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x202.0\x20*\x20'+'(y\x20*\x20z\x20-\x20x'+'\x20*\x20w),\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x201.0\x20-'+'\x202.0\x20*\x20(y\x20'+'*\x20y\x20+\x20w\x20*\x20'+'w),\x0a\x20\x20\x20\x20\x20\x20'+('\x20\x20\x20\x20\x20\x20\x20\x202.'+'0\x20*\x20(z\x20*\x20w'+'\x20+\x20x\x20*\x20y),'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x202.0\x20*'+'\x20(y\x20*\x20w\x20+\x20'+'x\x20*\x20z),\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x202.0\x20*\x20(z'+'\x20*\x20w\x20-\x20x\x20*'+'\x20y),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x201.0\x20-\x202'+'.0\x20*\x20(y\x20*\x20'+'y\x20+\x20z\x20*\x20z)'+'\x0a\x20\x20\x20\x20);\x0a}\x0a'+'\x0avec4\x20unpa'+'ckRotation'+'(vec3\x20pack'+'ed)\x20{\x0a\x20\x20\x20\x20'+'return\x20vec'+'4(packed.x'+'yz,\x20sqrt(m'+'ax(0.0,\x201.'+'0\x20-\x20dot(pa'+'cked,\x20pack'+'ed))));\x0a}\x0a'+'\x0a//\x20sample'+'\x20covarianc'+'e\x20vectors\x0a'+'void\x20readC'+'ovariance('+'in\x20SplatSo'+'urce\x20sourc'+'e,\x20out\x20vec'+'3\x20covA,\x20ou'+'t\x20vec3\x20cov'+'B)\x20{\x0a\x20\x20\x20\x20v'+'ec4\x20tB\x20=\x20t'+'exelFetch('+'transformB'+',\x20source.u'+'v,\x200);\x0a\x0a\x20\x20'+'\x20\x20vec3\x20tR\x20'+'=\x20texelFet'+'ch(transfo'+'rmR,\x20sourc'+'e.uv,\x200).x'+'yz;\x0a\x20\x20\x20\x20ma'+'t3\x20rot\x20=\x20q'+'uatToMat3v'+'2(unpackRo'+'tation(tR)'+');\x0a\x20\x20\x20\x20vec'+'3\x20scale\x20=\x20'+'tB.xyz;\x0a\x0a\x20'+'\x20\x20\x20//\x20M\x20=\x20'+'S\x20*\x20R\x0a\x20\x20\x20\x20'+'mat3\x20M\x20=\x20t'+'ranspose(m'+'at3(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20scale.x'+'\x20*\x20rot[0],'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'cale.y\x20*\x20r'+'ot[1],\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20scale'+'.z\x20*\x20rot[2'+']\x0a\x20\x20\x20\x20));\x0a'+'\x0a\x20\x20\x20\x20covA\x20'+'=\x20vec3(dot'+'(M[0],\x20M[0'+']),\x20dot(M['+'0],\x20M[1]),'+'\x20dot(M[0],'+'\x20M[2]));\x0a\x20'+'\x20\x20\x20covB\x20=\x20'+'vec3(dot(M'+'[1],\x20M[1])'+',\x20dot(M[1]'+',\x20M[2]),\x20d'+'ot(M[2],\x20M'+'[2]));\x0a}\x0a\x0a'+'//\x20sample\x20'+'4D\x20covaria'+'nce\x20vector'+'s\x0avoid\x20rea'+'dFTGSCovar'+'iance(in\x20S'+'platSource'+'\x20source,\x20o'+'ut\x20vec3\x20co'+'vA,\x20out\x20ve'+'c3\x20covB,ou'+'t\x20vec4\x20cov'+'ariance4D)'+'\x20{\x0a\x20\x20\x20\x20vec'+'4\x20tB\x20=\x20tex'+'elFetch(tr'+'ansformB,\x20'+'source.uv,')+('\x200);\x0a\x0a\x20\x20\x20\x20'+'vec3\x20tR\x20=\x20'+'texelFetch'+'(transform'+'R,\x20source.'+'uv,\x200).xyz'+';\x0a\x20\x20\x20\x20mat3'+'\x20rot\x20=\x20qua'+'tToMat3v2('+'unpackRota'+'tion(tR));'+'\x0a\x20\x20\x20\x20vec3\x20'+'scale\x20=\x20tB'+'.xyz;\x0a\x0a\x20\x20\x20'+'\x20//\x20M\x20=\x20S\x20'+'*\x20R\x0a\x20\x20\x20\x20ma'+'t3\x20M\x20=\x20tra'+'nspose(mat'+'3(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20scale.x\x20*'+'\x20rot[0],\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le.y\x20*\x20rot'+'[1],\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20scale.z'+'\x20*\x20rot[2]\x0a'+'\x20\x20\x20\x20));\x0a\x0a\x20'+'\x20\x20\x20covA\x20=\x20'+'vec3(dot(M'+'[0],\x20M[0])'+',\x20dot(M[0]'+',\x20M[1]),\x20d'+'ot(M[0],\x20M'+'[2]));\x0a\x20\x20\x20'+'\x20covB\x20=\x20ve'+'c3(dot(M[1'+'],\x20M[1]),\x20'+'dot(M[1],\x20'+'M[2]),\x20dot'+'(M[2],\x20M[2'+']));\x0a\x0a}\x0a\x0a\x0a'+'float\x20getM'+'arginalT(i'+'n\x20SplatSou'+'rce\x20source'+',\x20in\x20float'+'\x20time)\x20{\x0a\x20'+'\x20\x20\x20float\x20m'+'arginal\x20=\x20'+'1.0;\x0a\x20\x20\x20\x20#'+'ifdef\x20IS_4'+'D\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20filter\x20'+'out\x20splats'+'\x20that\x20have'+'\x20too\x20littl'+'e\x20influenc'+'e\x20to\x20now\x20i'+'n\x20the\x20time'+'\x20dimension'+'.\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec2\x20tData'+'\x20=\x20texelFe'+'tch(transf'+'ormLifecyc'+'le,\x20source'+'.uv,\x200).xy'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'muT\x20=\x20tDat'+'a.x;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20t'+'Scale\x20=\x20tD'+'ata.y;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20margi'+'nal\x20=\x20comp'+'uteMargina'+'lT(time,\x20m'+'uT,\x20tScale'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20re'+'turn\x20margi'+'nal;\x0a}\x0a\x0ave'+'c3\x20readCen'+'ter4D(Spla'+'tSource\x20so'+'urce,\x20floa'+'t\x20time)\x20{\x0a'+'\x20\x20\x20\x20vec3\x20s'+'platCenter'+'\x20=\x20texelFe'+'tch(transf'+'ormA,\x20sour'+'ce.uv,\x200).'+'xyz;\x0a\x20\x20\x20\x20#'+'ifdef\x20IS_4'+'D\x0a\x20\x20\x20\x20if(m'+'uT\x20>\x20-5.0)'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20movin'+'gSpeed\x20=\x20t')+('exelFetch('+'transformM'+'otion,\x20sou'+'rce.uv,\x200)'+'.xyz;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20s'+'platOffset'+'\x20=\x20movingS'+'peed\x20*\x20(ti'+'me\x20-\x20muT);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'platCenter'+'\x20+=\x20splatO'+'ffset;\x0a\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20spla'+'tCenter;\x0a}'+'\x0a'),Q1='\x0a\x0a#include'+'\x20\x22tonemapp'+'ingPS\x22\x0a#in'+'clude\x20\x22dec'+'odePS\x22\x0a#in'+'clude\x20\x22gam'+'maPS\x22\x0a\x0a//\x20'+'prepare\x20th'+'e\x20output\x20c'+'olor\x20for\x20t'+'he\x20given\x20g'+'amma-space'+'\x20color\x0avec'+'3\x20prepareO'+'utputFromG'+'amma(vec3\x20'+'gammaColor'+')\x20{\x0a\x20\x20\x20\x20#i'+'f\x20TONEMAP\x20'+'==\x20NONE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'GAMMA\x20==\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20c'+'onvert\x20to\x20'+'linear\x20spa'+'ce\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20decodeGa'+'mma(gammaC'+'olor);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20outp'+'ut\x20gamma\x20s'+'pace\x20color'+'\x20directly\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'ammaColor;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20app'+'ly\x20tonemap'+'ping\x20in\x20li'+'near\x20space'+'\x20and\x20outpu'+'t\x20to\x20linea'+'r\x20or\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20gamm'+'a\x20(which\x20i'+'s\x20handled\x20'+'by\x20gammaCo'+'rrectOutpu'+'t)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ga'+'mmaCorrect'+'Output(ton'+'eMap(decod'+'eGamma(gam'+'maColor)))'+';\x0a\x20\x20\x20\x20#end'+'if\x0a}\x0a',J1='\x0auniform\x20i'+'nt\x20mode;\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x200:\x20c'+'enters,\x201:'+'\x20rings\x0auni'+'form\x20float'+'\x20ringSize;'+'\x0auniform\x20i'+'nt\x20uShapeN'+';\x0a\x0a#ifndef'+'\x20DITHER_NO'+'NE\x0a\x20\x20\x20\x20#in'+'clude\x20\x22bay'+'erPS\x22\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'opacityDit'+'herPS\x22\x0a\x20\x20\x20'+'\x20varying\x20f'+'loat\x20id;\x0a#'+'endif\x0a\x0a#if'+'def\x20PICK_P'+'ASS\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22pi'+'ckPS\x22\x0a#end'+'if\x0a\x0a#if\x20de'+'fined(SHAD'+'OW_PASS)\x20|'+'|\x20defined('+'PICK_PASS)'+'\x20||\x20define'+'d(PREPASS_'+'PASS)\x0a\x20\x20\x20\x20'+'uniform\x20fl'+'oat\x20alphaC'+'lip;\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'PREPASS_PA'+'SS\x0a\x20\x20\x20\x20var'+'ying\x20float'+'\x20vLinearDe'+'pth;\x0a\x20\x20\x20\x20#'+'include\x20\x22f'+'loatAsUint'+'PS\x22\x0a#endif'+'\x0a\x0a//\x20Fast\x20'+'approximat'+'e\x20e^x\x20base'+'d\x20on\x20https'+'://nic.sch'+'raudolph.o'+'rg/pubs/Sc'+'hraudolph9'+'9.pdf\x0acons'+'t\x20float\x20\x20E'+'XP_A\x20\x20\x20\x20\x20\x20'+'=\x2012102203'+'.0;\x20\x20\x20//\x20'+'\x202^23\x20/\x20ln'+'(2)\x0aconst\x20'+'int\x20\x20\x20\x20EXP'+'_BC_RMS\x20=\x20'+'1064866808'+';\x20\x20\x20//\x20(12'+'7\x20<<\x2023)\x20-'+'\x2060801\x20*\x208'+'\x0afloat\x20fas'+'tExp(float'+'\x20x)\x20{\x0a\x20\x20\x20\x20'+'int\x20i\x20=\x20in'+'t(EXP_A\x20*\x20'+'x)\x20+\x20EXP_B'+'C_RMS;\x0a\x20\x20\x20'+'\x20return\x20in'+'tBitsToFlo'+'at(i);\x0a}\x0a\x0a'+'varying\x20me'+'diump\x20vec2'+'\x20gaussianU'+'V;\x0avarying'+'\x20mediump\x20v'+'ec4\x20gaussi'+'anColor;\x0av'+'arying\x20med'+'iump\x20vec2\x20'+'gaussianSi'+'ze;\x0avaryin'+'g\x20mediump\x20'+'vec2\x20gauss'+'ianCUV;\x0ava'+'rying\x20medi'+'ump\x20float\x20'+'saveMargin'+'al;\x0a\x0a//\x20'+'\x20p\x20\x20N'+'\x20\x0a//\x20p:'+'\x20\x20(UV\x20'+')\x0a//'+'\x20N:\x20\x0a//\x20'+'r:\x20'+('1\x0a/'+'/\x20center:\x20'+'\x0abool\x20'+'insideRegu'+'larPolygon'+'(vec2\x20p,\x20i'+'nt\x20N,\x20floa'+'t\x20r,\x20vec2\x20'+'center)\x20{\x0a'+'\x20\x20\x20\x20//\x20'+'\x0a\x20'+'\x20\x20\x20vec2\x20d\x20'+'=\x20p\x20-\x20cent'+'er;\x0a\x20\x20\x20\x20fl'+'oat\x20theta\x20'+'=\x20atan(d.y'+',\x20d.x);\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20'+'\x0a\x20\x20\x20\x20flo'+'at\x20len\x20=\x20l'+'ength(d);\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20'+'\x0a\x20\x20\x20\x20float'+'\x20anglePerS'+'ide\x20=\x202.0\x20'+'*\x203.141592'+'65\x20/\x20float'+'(N);\x0a\x0a\x20\x20\x20\x20'+'//\x20\x200\x20~'+'\x20anglePerS'+'ide\x20\x0a\x20\x20\x20'+'\x20float\x20loc'+'alAngle\x20=\x20'+'mod(theta,'+'\x20anglePerS'+'ide);\x0a\x0a\x20\x20\x20'+'\x20//\x20'+'\x20'+'N\x20\x0a\x20\x20'+'\x20\x20float\x20ma'+'xR\x20=\x20r\x20*\x20c'+'os(anglePe'+'rSide\x20/\x202.'+'0)\x20/\x20cos(l'+'ocalAngle\x20'+'-\x20anglePer'+'Side\x20/\x202.0'+');\x0a\x0a\x20\x20\x20\x20re'+'turn\x20len\x20<'+'=\x20maxR;\x0a}\x0a'+'\x0a//\x20'+'N\x20soft\x20'+'mask\x0afloat'+'\x20polygonSo'+'ftMask(vec'+'2\x20p,\x20int\x20N'+',\x20float\x20ra'+'dius,\x20floa'+'t\x20edgeSoft'+'ness)\x20{\x0a\x20\x20'+'\x20\x20float\x20an'+'gle\x20=\x20atan'+'(p.y,\x20p.x)'+';\x0a\x20\x20\x20\x20floa'+'t\x20sector\x20='+'\x206.2831853'+'\x20/\x20float(N'+');\x20\x20//\x20'+'\x0a\x20\x20\x20\x20//'+'\x20\x20['+'-sector/2,'+'\x20sector/2]'+'\x0a\x20\x20\x20\x20float'+'\x20halfSecto'+'r\x20=\x20sector'+'\x20*\x200.5;\x0a\x20\x20'+'\x20\x20float\x20lo'+'calAngle\x20='+'\x20mod(angle'+'\x20+\x20halfSec'+'tor,\x20secto'+'r)\x20-\x20halfS'+'ector;\x0a\x0a\x20\x20'+'\x20\x20//\x20'+'\x0a'+'\x20\x20\x20\x20float\x20'+'boundary\x20='+'\x20radius\x20*\x20'+'cos(halfSe'+'ctor)\x20/\x20co'+'s(localAng'+'le);\x0a\x0a\x20\x20\x20\x20'+'//\x20\x20=\x20'+'\x0a\x20\x20\x20\x20'+'float\x20dist'+'\x20=\x20boundar'+'y\x20-\x20length'+'(p);\x0a\x0a\x20\x20\x20\x20'+'//\x20\x20smoot')+('hstep\x20'+'\x20(edgeSof'+'tness\x20'+')\x0a\x20\x20\x20\x20'+'float\x20alph'+'a\x20=\x20smooth'+'step(0.0,\x20'+'edgeSoftne'+'ss,\x20dist);'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20alpha;\x20'+'//\x200~1\x0a}\x0a\x0a'+'void\x20main('+'void)\x20{\x0a\x20\x20'+'\x20\x20mediump\x20'+'float\x20A\x20=\x20'+'dot(gaussi'+'anUV,\x20gaus'+'sianUV);\x0a\x20'+'\x20\x20\x20if\x20(A\x20>'+'\x201.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20disc'+'ard;\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20//\x20e'+'valuate\x20al'+'pha\x0a\x20\x20\x20\x20me'+'diump\x20floa'+'t\x20alpha\x20=\x20'+'fastExp(-A'+'\x20*\x204.0)\x20*\x20'+'gaussianCo'+'lor.a;\x0a\x20\x20\x20'+'\x20//\x20TODO\x20u'+'ShapeN\x20alp'+'ha\x0a\x20\x20\x20\x20//\x20'+'float\x20dx\x20='+'\x20abs(gauss'+'ianCUV.x)\x20'+'/\x20gaussian'+'Size.x;\x0a\x20\x20'+'\x20\x20//\x20float'+'\x20dy\x20=\x20abs('+'gaussianCU'+'V.y)\x20/\x20gau'+'ssianSize.'+'y;\x0a\x20\x20\x20\x20//\x20'+'float\x20B\x20=\x20'+'max(dx,\x20dy'+');\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20'+'\x0a\x20\x20\x20\x20//\x20'+'mediump\x20fl'+'oat\x20alpha\x20'+'=\x20exp(-pow'+'(B,\x202.0)\x20*'+'\x204.0)\x20*\x20ga'+'ussianColo'+'r.a;\x0a\x0a\x20\x20\x20\x20'+'bool\x20openR'+'ingMode\x20=\x20'+'ringSize\x20>'+'\x200.0\x20&&\x20mo'+'de\x20==\x201;\x20/'+'/\x20&&\x20uCont'+'rolMode\x20=='+'\x201;\x20\x0a\x20\x20\x20\x20i'+'f\x20(openRin'+'gMode\x20&&\x20s'+'aveMargina'+'l\x20>=\x200.05)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20if\x20(A\x20<\x201'+'.0\x20-\x20ringS'+'ize)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'lpha\x20=\x20max'+'(0.05,\x20alp'+'ha);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x20else\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20alpha\x20'+'=\x200.6;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20'+'\x20\x20bool\x20ope'+'nShapeMode'+'\x20=\x20uShapeN'+'\x20>\x202;\x20//\x20&'+'&\x20uControl'+'Mode\x20==\x201;'+'\x0a\x20\x20\x20\x20if\x20(o'+'penShapeMo'+'de)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec2\x20u'+'v\x20=\x20gaussi'+'anCUV\x20*\x202.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20rad'+'ius\x20=\x201.0;')+('\x20//\x201.0\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20edgeSoft'+'ness\x20=\x200.0'+'5;\x20//\x200.05'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'v\x20*=\x201.0;/'+'/0.9;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec2\x20c'+'enter\x20=\x20ve'+'c2(0.0,\x200.'+'0);\x20\x20\x20//\x20'+''+'\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20alpha\x20'+'=\x20polygonS'+'oftMask(uv'+',\x20uShapeN,'+'\x20radius,\x20e'+'dgeSoftnes'+'s);\x20//\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(!insideR'+'egularPoly'+'gon(uv,\x20uS'+'hapeN,\x20rad'+'ius,\x20cente'+'r))\x20{\x20//'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20discard'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x0a\x20\x20\x20\x20#if'+'\x20defined(S'+'HADOW_PASS'+')\x20||\x20defin'+'ed(PICK_PA'+'SS)\x20||\x20def'+'ined(PREPA'+'SS_PASS)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(alpha\x20<\x20a'+'lphaClip)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20discar'+'d;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20PICK'+'_PASS\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Fr'+'agColor\x20=\x20'+'getPickOut'+'put();\x0a\x0a\x20\x20'+'\x20\x20#elif\x20SH'+'ADOW_PASS\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_FragColo'+'r\x20=\x20vec4(0'+'.0,\x200.0,\x200'+'.0,\x201.0);\x0a'+'\x0a\x20\x20\x20\x20#elif'+'\x20PREPASS_P'+'ASS\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20gl_Frag'+'Color\x20=\x20fl'+'oat2vec4(v'+'LinearDept'+'h);\x0a\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(alp'+'ha\x20<\x201.0\x20/'+'\x20255.0)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20discard;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifndef\x20DI'+'THER_NONE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20opacityD'+'ither(alph'+'a,\x20id\x20*\x200.'+'013);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'gl_FragCol'+'or\x20=\x20vec4('+'gaussianCo'+'lor.xyz,\x20a'+'lpha);\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'),eP='\x0a\x0a#if\x20SH_B'+'ANDS\x20>\x200\x0a\x0a'+'//\x20unpack\x20'+'signed\x2011\x20'+'10\x2011\x20bits'+'\x0avec3\x20unpa'+'ck111011s('+'uint\x20bits)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20vec3(('+'uvec3(bits'+')\x20>>\x20uvec3'+'(21u,\x2011u,'+'\x200u))\x20&\x20uv'+'ec3(0x7ffu'+',\x200x3ffu,\x20'+'0x7ffu))\x20/'+'\x20vec3(2047'+'.0,\x201023.0'+',\x202047.0)\x20'+'*\x202.0\x20-\x201.'+'0;\x0a}\x0a\x0a//\x20f'+'etch\x20quant'+'ized\x20spher'+'ical\x20harmo'+'nic\x20coeffi'+'cients\x0avoi'+'d\x20fetchSca'+'le(in\x20uvec'+'4\x20t,\x20out\x20f'+'loat\x20scale'+',\x20out\x20vec3'+'\x20a,\x20out\x20ve'+'c3\x20b,\x20out\x20'+'vec3\x20c)\x20{\x0a'+'\x20\x20\x20\x20scale\x20'+'=\x20uintBits'+'ToFloat(t.'+'x);\x0a\x20\x20\x20\x20a\x20'+'=\x20unpack11'+'1011s(t.y)'+';\x0a\x20\x20\x20\x20b\x20=\x20'+'unpack1110'+'11s(t.z);\x0a'+'\x20\x20\x20\x20c\x20=\x20un'+'pack111011'+'s(t.w);\x0a}\x0a'+'\x0a//\x20fetch\x20'+'quantized\x20'+'spherical\x20'+'harmonic\x20c'+'oefficient'+'s\x0avoid\x20fet'+'ch(in\x20uvec'+'4\x20t,\x20out\x20v'+'ec3\x20a,\x20out'+'\x20vec3\x20b,\x20o'+'ut\x20vec3\x20c,'+'\x20out\x20vec3\x20'+'d)\x20{\x0a\x20\x20\x20\x20a'+'\x20=\x20unpack1'+'11011s(t.x'+');\x0a\x20\x20\x20\x20b\x20='+'\x20unpack111'+'011s(t.y);'+'\x0a\x20\x20\x20\x20c\x20=\x20u'+'npack11101'+'1s(t.z);\x0a\x20'+'\x20\x20\x20d\x20=\x20unp'+'ack111011s'+'(t.w);\x0a}\x0a\x0a'+'void\x20fetch'+'(in\x20uint\x20t'+',\x20out\x20vec3'+'\x20a)\x20{\x0a\x20\x20\x20\x20'+'a\x20=\x20unpack'+'111011s(t)'+';\x0a}\x0a\x0a#if\x20S'+'H_BANDS\x20=='+'\x201\x0a\x20\x20\x20\x20uni'+'form\x20highp'+'\x20usampler2'+'D\x20splatSH_'+'1to3;\x0a\x20\x20\x20\x20'+'void\x20readS'+'HData(in\x20S'+'platSource'+'\x20source,\x20o'+'ut\x20vec3\x20sh'+'[3],\x20out\x20f'+'loat\x20scale'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20fetchSca'+'le(texelFe'+'tch(splatS'+'H_1to3,\x20so'+'urce.uv,\x200'+'),\x20scale,\x20'+'sh[0],\x20sh['+'1],\x20sh[2])'+(';\x0a\x20\x20\x20\x20}\x0a#e'+'lif\x20SH_BAN'+'DS\x20==\x202\x0a\x20\x20'+'\x20\x20uniform\x20'+'highp\x20usam'+'pler2D\x20spl'+'atSH_1to3;'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20highp\x20u'+'sampler2D\x20'+'splatSH_4t'+'o7;\x0a\x20\x20\x20\x20un'+'iform\x20high'+'p\x20usampler'+'2D\x20splatSH'+'_8to11;\x0a\x20\x20'+'\x20\x20void\x20rea'+'dSHData(in'+'\x20SplatSour'+'ce\x20source,'+'\x20out\x20vec3\x20'+'sh[8],\x20out'+'\x20float\x20sca'+'le)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20fetchS'+'cale(texel'+'Fetch(spla'+'tSH_1to3,\x20'+'source.uv,'+'\x200),\x20scale'+',\x20sh[0],\x20s'+'h[1],\x20sh[2'+']);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20fetch(te'+'xelFetch(s'+'platSH_4to'+'7,\x20source.'+'uv,\x200),\x20sh'+'[3],\x20sh[4]'+',\x20sh[5],\x20s'+'h[6]);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20fetch'+'(texelFetc'+'h(splatSH_'+'8to11,\x20sou'+'rce.uv,\x200)'+'.x,\x20sh[7])'+';\x0a\x20\x20\x20\x20}\x0a#e'+'lse\x0a\x20\x20\x20\x20un'+'iform\x20high'+'p\x20usampler'+'2D\x20splatSH'+'_1to3;\x0a\x20\x20\x20'+'\x20uniform\x20h'+'ighp\x20usamp'+'ler2D\x20spla'+'tSH_4to7;\x0a'+'\x20\x20\x20\x20unifor'+'m\x20highp\x20us'+'ampler2D\x20s'+'platSH_8to'+'11;\x0a\x20\x20\x20\x20un'+'iform\x20high'+'p\x20usampler'+'2D\x20splatSH'+'_12to15;\x0a\x20'+'\x20\x20\x20void\x20re'+'adSHData(i'+'n\x20SplatSou'+'rce\x20source'+',\x20out\x20vec3'+'\x20sh[15],\x20o'+'ut\x20float\x20s'+'cale)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20fetc'+'hScale(tex'+'elFetch(sp'+'latSH_1to3'+',\x20source.u'+'v,\x200),\x20sca'+'le,\x20sh[0],'+'\x20sh[1],\x20sh'+'[2]);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20fetch('+'texelFetch'+'(splatSH_4'+'to7,\x20sourc'+'e.uv,\x200),\x20'+'sh[3],\x20sh['+'4],\x20sh[5],'+'\x20sh[6]);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20fet'+'ch(texelFe'+'tch(splatS'+'H_8to11,\x20s'+'ource.uv,\x20'+'0),\x20sh[7],'+'\x20sh[8],\x20sh'+'[9],\x20sh[10'+']);\x0a\x20\x20\x20\x20\x20\x20')+('\x20\x20fetch(te'+'xelFetch(s'+'platSH_12t'+'o15,\x20sourc'+'e.uv,\x200),\x20'+'sh[11],\x20sh'+'[12],\x20sh[1'+'3],\x20sh[14]'+');\x0a\x20\x20\x20\x20}\x0a#'+'endif\x0a\x0a#en'+'dif\x0a'),tP='\x0aattribute'+'\x20vec3\x20vert'+'ex_positio'+'n;\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20xy:\x20co'+'rnerUV,\x20z:'+'\x20render\x20or'+'der\x20offset'+'\x0aattribute'+'\x20uint\x20vert'+'ex_id_attr'+'ib;\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20render'+'\x20order\x20bas'+'e\x0a\x0auniform'+'\x20uint\x20numS'+'plats;\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20tota'+'l\x20number\x20o'+'f\x20splats\x0au'+'niform\x20hig'+'hp\x20usample'+'r2D\x20splatO'+'rder;\x20\x20\x20\x20/'+'/\x20per-spla'+'t\x20index\x20to'+'\x20source\x20ga'+'ussian\x0a\x0a//'+'\x20initializ'+'e\x20the\x20spla'+'t\x20source\x20s'+'tructure\x0ab'+'ool\x20initSo'+'urce(out\x20S'+'platSource'+'\x20source)\x20{'+'\x0a\x20\x20\x20\x20uint\x20'+'w\x20=\x20uint(t'+'extureSize'+'(splatOrde'+'r,\x200).x);\x0a'+'\x0a\x20\x20\x20\x20//\x20ca'+'lculate\x20sp'+'lat\x20order\x0a'+'\x20\x20\x20\x20source'+'.order\x20=\x20v'+'ertex_id_a'+'ttrib\x20+\x20ui'+'nt(vertex_'+'position.z'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20return\x20if'+'\x20out\x20of\x20ra'+'nge\x20(since'+'\x20the\x20last\x20'+'block\x20of\x20s'+'plats\x20may\x20'+'be\x20partial'+'ly\x20full)\x0a\x20'+'\x20\x20\x20if\x20(sou'+'rce.order\x20'+'>=\x20numSpla'+'ts)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20false;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20i'+'vec2\x20order'+'UV\x20=\x20ivec2'+'(source.or'+'der\x20%\x20w,\x20s'+'ource.orde'+'r\x20/\x20w);\x0a\x0a\x20'+'\x20\x20\x20//\x20read'+'\x20splat\x20id\x0a'+'\x20\x20\x20\x20source'+'.id\x20=\x20texe'+'lFetch(spl'+'atOrder,\x20o'+'rderUV,\x200)'+'.r;\x0a\x0a\x20\x20\x20\x20/'+'/\x20map\x20id\x20t'+'o\x20uv\x0a\x20\x20\x20\x20s'+'ource.uv\x20='+'\x20ivec2(sou'+'rce.id\x20%\x20w'+',\x20source.i'+'d\x20/\x20w);\x0a\x0a\x20'+'\x20\x20\x20//\x20get\x20'+'the\x20corner'+'\x0a\x20\x20\x20\x20sourc'+'e.cornerUV'+'\x20=\x20vertex_'+'position.x'+'y;\x0a\x0a\x20\x20\x20\x20re'+'turn\x20true;'+'\x0a}\x0a',sP='\x0a#include\x20'+'\x22gsplatCom'+'monVS\x22\x0a\x0aun'+'iform\x20int\x20'+'pointCloud'+'ModeEnable'+'d;\x0auniform'+'\x20float\x20uTi'+'me;\x0aunifor'+'m\x20float\x20pr'+'erenderCTi'+'me;\x0aunifor'+'m\x20float\x20uS'+'aturation;'+'\x20//\x200.0-2.'+'01.0\x20'+'\x0auniform'+'\x20float\x20uHu'+'eOffset;\x20\x20'+'//\x20'+'360'+'\x0auniform\x20v'+'ec3\x20clrOff'+'set;\x0aunifo'+'rm\x20vec4\x20cl'+'rScale;\x0aun'+'iform\x20floa'+'t\x20uOpacity'+';\x0auniform\x20'+'int\x20uInver'+'tOpacity;\x0a'+'\x0avarying\x20m'+'ediump\x20vec'+'2\x20gaussian'+'UV;\x0avaryin'+'g\x20mediump\x20'+'vec4\x20gauss'+'ianColor;\x0a'+'varying\x20me'+'diump\x20vec2'+'\x20gaussianS'+'ize;\x0avaryi'+'ng\x20mediump'+'\x20vec2\x20gaus'+'sianCUV;\x0av'+'arying\x20med'+'iump\x20float'+'\x20saveMargi'+'nal;\x0a\x0a//\x20='+'====\x20\x20H'+'SV/RGB\x20\x20'+'=====\x0ahigh'+'p\x20vec3\x20rgb'+'2hsv(highp'+'\x20vec3\x20c)\x20{'+'\x0a\x20\x20\x20\x20highp'+'\x20float\x20cMa'+'x\x20=\x20max(ma'+'x(c.r,\x20c.g'+'),\x20c.b);\x0a\x20'+'\x20\x20\x20highp\x20f'+'loat\x20cMin\x20'+'=\x20min(min('+'c.r,\x20c.g),'+'\x20c.b);\x0a\x20\x20\x20'+'\x20highp\x20flo'+'at\x20delta\x20='+'\x20cMax\x20-\x20cM'+'in\x20+\x201e-10'+';\x20//\x200\x0a'+'\x0a\x20\x20\x20\x20highp'+'\x20float\x20h\x20='+'\x200.0;\x0a\x20\x20\x20\x20'+'if\x20(delta\x20'+'>\x201e-6)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(cMax\x20==\x20'+'c.r)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20h'+'\x20=\x20mod((c.'+'g\x20-\x20c.b)\x20/'+'\x20delta,\x206.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x20else\x20i'+'f\x20(cMax\x20=='+'\x20c.g)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'h\x20=\x20(c.b\x20-'+'\x20c.r)\x20/\x20de'+'lta\x20+\x202.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'h\x20=\x20(c.r\x20-'+'\x20c.g)\x20/\x20de'+'lta\x20+\x204.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20h'+'\x20/=\x206.0;\x20/'+'/\x20\x20[0,1]'+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+'f\x20(h\x20<\x200.0'+')\x20h\x20+=\x201.0'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20highp\x20f'+'loat\x20s\x20=\x20('+'cMax\x20<\x201e-'+'6)\x20?\x200.0\x20:'+'\x20delta\x20/\x20c'+'Max;\x0a\x20\x20\x20\x20h'+'ighp\x20float'+'\x20v\x20=\x20cMax;'+'\x0a\x20\x20\x20\x20retur'+'n\x20vec3(h,\x20'+'s,\x20v);\x0a}\x0a\x0a'+'highp\x20vec3'+'\x20hsv2rgb(h'+'ighp\x20vec3\x20'+'c)\x20{\x0a\x20\x20\x20\x20h'+'ighp\x20float'+'\x20h\x20=\x20c.x\x20*'+'\x206.0;\x20//\x200'+'-6\x0a\x20\x20\x20\x20hig'+'hp\x20float\x20s'+'\x20=\x20c.y;\x0a\x20\x20'+'\x20\x20highp\x20fl'+'oat\x20v\x20=\x20c.'+'z;\x0a\x0a\x20\x20\x20\x20hi'+'ghp\x20int\x20i\x20'+'=\x20int(floo'+'r(h));\x0a\x20\x20\x20'+'\x20highp\x20flo'+'at\x20f\x20=\x20h\x20-'+'\x20float(i);'+'\x0a\x20\x20\x20\x20highp'+'\x20float\x20p\x20='+'\x20v\x20*\x20(1.0\x20'+'-\x20s);\x0a\x20\x20\x20\x20'+'highp\x20floa'+'t\x20q\x20=\x20v\x20*\x20'+'(1.0\x20-\x20s\x20*'+'\x20f);\x0a\x20\x20\x20\x20h'+'ighp\x20float'+'\x20t\x20=\x20v\x20*\x20('+'1.0\x20-\x20s\x20*\x20'+'(1.0\x20-\x20f))'+';\x0a\x0a\x20\x20\x20\x20if\x20'+'(i\x20==\x200)\x20r'+'eturn\x20vec3'+'(v,\x20t,\x20p);'+'\x0a\x20\x20\x20\x20else\x20'+'if\x20(i\x20==\x201'+')\x20return\x20v'+'ec3(q,\x20v,\x20'+'p);\x0a\x20\x20\x20\x20el'+'se\x20if\x20(i\x20='+'=\x202)\x20retur'+'n\x20vec3(p,\x20'+'v,\x20t);\x0a\x20\x20\x20'+'\x20else\x20if\x20('+'i\x20==\x203)\x20re'+'turn\x20vec3('+'p,\x20q,\x20v);\x0a'+'\x20\x20\x20\x20else\x20i'+'f\x20(i\x20==\x204)'+'\x20return\x20ve'+'c3(t,\x20p,\x20v'+');\x0a\x20\x20\x20\x20els'+'e\x20return\x20v'+'ec3(v,\x20p,\x20'+'q);\x20//\x20i=='+'5\x0a}\x0a\x0a#ifnd'+'ef\x20DITHER_'+'NONE\x0a\x20\x20\x20\x20v'+'arying\x20flo'+'at\x20id;\x0a#en'+'dif\x0a\x0amediu'+'mp\x20vec4\x20di'+'scardVec\x20='+'\x20vec4(0.0,'+'\x200.0,\x202.0,'+'\x201.0);\x0a\x0a#i'+'fdef\x20PREPA'+'SS_PASS\x0a\x20\x20'+'\x20\x20varying\x20'+'float\x20vLin'+'earDepth;\x0a'+'#endif\x0a\x0avo'+'id\x20main(vo'+'id)\x20{\x0a\x20\x20\x20\x20'+'//\x20read\x20ga'+'ussian\x20det'+'ails\x0a\x20\x20\x20\x20S'+'platSource'+'\x20source;\x0a\x20'+'\x20\x20\x20if\x20(!in'+'itSource(s'+'ource))\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_Position\x20')+('=\x20discardV'+'ec;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return;\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20saveMargi'+'nal\x20=\x20getM'+'arginalT(s'+'ource,\x20uTi'+'me);\x0a\x20\x20\x20\x20\x0a'+'\x20\x20\x20\x20float\x20'+'marginal\x20='+'\x20uOpenAnim'+'\x20==\x201\x20?\x201.'+'0\x20:\x20saveMa'+'rginal;\x0a\x20\x20'+'\x20\x20if\x20(marg'+'inal\x20<\x200.0'+'5)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20gl_Posi'+'tion\x20=\x20dis'+'cardVec;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn;\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20vec3'+'\x20modelCent'+'er;\x0a\x20\x20\x20\x20bo'+'ol\x20isCente'+'r4D\x20=\x20save'+'Marginal\x20>'+'=\x200.05;\x0a\x20\x20'+'\x20\x20if\x20(isCe'+'nter4D)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20mo'+'delCenter\x20'+'=\x20readCent'+'er4D(sourc'+'e,\x20uTime);'+'\x0a\x20\x20\x20\x20}\x20els'+'e\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20modelCen'+'ter\x20=\x20read'+'Center(sou'+'rce);\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20Spl'+'atCenter\x20c'+'enter;\x0a\x20\x20\x20'+'\x20if\x20(!init'+'Center(mod'+'elCenter,\x20'+'center))\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_Position'+'\x20=\x20discard'+'Vec;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return;'+'\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20int\x20'+'showCloud\x20'+'=\x20pointClo'+'udModeEnab'+'led;\x0a\x20\x20\x20\x20i'+'f\x20(prerend'+'erCTime\x20=='+'\x200.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20show'+'Cloud\x20=\x20po'+'intCloudMo'+'deEnabled;'+'\x0a\x20\x20\x20\x20}\x20els'+'e\x20if\x20(prer'+'enderCTime'+'\x20>=\x201.0\x20&&'+'\x20prerender'+'CTime\x20<\x202.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20showClo'+'ud\x20=\x201;\x0a\x20\x20'+'\x20\x20}\x20else\x20i'+'f\x20(prerend'+'erCTime\x20>='+'\x202.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20show'+'Cloud\x20=\x20po'+'intCloudMo'+'deEnabled;'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20//\x20proje'+'ct\x20center\x20'+'to\x20screen\x20'+'space\x0a\x20\x20\x20\x20'+'SplatCorne'+'r\x20corner;\x0a'+'\x20\x20\x20\x20if\x20(!i'+'nitCorner('+'source,\x20ce'+'nter,\x20corn'+'er,\x20showCl'+'oud))\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20gl_P'+'osition\x20=\x20')+('discardVec'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20/'+'/\x20read\x20col'+'or\x0a\x20\x20\x20\x20vec'+'4\x20clr\x20=\x20re'+'adColor(so'+'urce,\x20uTim'+'e,\x20!isCent'+'er4D,\x20poin'+'tCloudMode'+'Enabled);\x0a'+'\x0a\x20\x20\x20\x20#if\x20G'+'SPLAT_AA\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'apply\x20AA\x20c'+'ompensatio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'clr.a\x20*=\x20c'+'orner.aaFa'+'ctor;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20if(margi'+'nal\x20>\x200.0)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20clr.w\x20*=\x20'+'marginal;\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20//\x20\x0a\x20'+'\x20\x20\x20if\x20(uCo'+'ntrolColor'+'Mode\x20==\x201)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20apply\x20'+'tint/brigh'+'tness\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20clr\x20=\x20'+'clr\x20*\x20clrS'+'cale\x20+\x20vec'+'4(clrOffse'+'t,\x200.0);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(uInvertO'+'pacity\x20==\x20'+'1)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20clr'+'.a\x20=\x201.0\x20-'+'\x20clr.a;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20don\x27t\x20'+'allow\x20out-'+'of-range\x20a'+'lpha\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20clr\x20=\x20c'+'lamp(clr,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20//\x20evalu'+'ate\x20spheri'+'cal\x20harmon'+'ics\x0a\x20\x20\x20\x20#i'+'f\x20SH_BANDS'+'\x20>\x200\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20calc'+'ulate\x20the\x20'+'model-spac'+'e\x20view\x20dir'+'ection\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'dir\x20=\x20norm'+'alize(cent'+'er.view\x20*\x20'+'mat3(cente'+'r.modelVie'+'w));\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20rea'+'d\x20sh\x20coeff'+'icients\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20sh[SH_COE'+'FFS];\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'scale;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20readS'+'HData(sour'+'ce,\x20sh,\x20sc'+'ale);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ev'+'aluate\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20clr.x'+'yz\x20+=\x20eval'+'SH(sh,\x20dir'+')\x20*\x20scale;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20cli'+'pCorner(co'+'rner,\x20clr.'+'w);\x0a\x0a\x20\x20\x20\x20/')+('/\x20pointClo'+'udMode\x0a\x20\x20\x20'+'\x20//\x20if\x20(po'+'intCloudMo'+'deEnabled\x20'+'==\x201)\x20{\x0a\x20\x20'+'\x20\x20//\x20\x20\x20\x20\x20c'+'lr.a\x20=\x201.0'+';\x0a\x20\x20\x20\x20//\x20}'+'\x0a\x20\x20\x20\x20highp'+'\x20vec3\x20colo'+'r\x20=\x20max(cl'+'r.xyz,\x200.0'+');\x0a\x20\x20\x20\x20\x0a\x20\x20'+'\x20\x20//\x20\x0a'+'\x20\x20\x20\x20if\x20(uC'+'ontrolColo'+'rMode\x20==\x201'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20\x20HSV'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20h'+'ighp\x20vec3\x20'+'hsv\x20=\x20rgb2'+'hsv(color)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20hsv.'+'y\x20*=\x20uSatu'+'ration;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20hsv.x\x20=\x20f'+'ract(hsv.x'+'\x20+\x20uHueOff'+'set\x20/\x20360.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20\x20RGB'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20c'+'olor\x20=\x20hsv'+'2rgb(hsv);'+'\x20\x20\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20wri'+'te\x20output\x0a'+'\x20\x20\x20\x20gl_Pos'+'ition\x20=\x20ce'+'nter.proj\x20'+'+\x20vec4(cor'+'ner.offset'+',\x200,\x200);\x0a\x20'+'\x20\x20\x20gaussia'+'nUV\x20=\x20corn'+'er.uv;\x0a\x20\x20\x20'+'\x20gaussianC'+'UV\x20=\x20corne'+'r.cUV;\x0a\x20\x20\x20'+'\x20gaussianS'+'ize\x20=\x20corn'+'er.cSize;\x0a'+'\x20\x20\x20\x20gaussi'+'anColor\x20=\x20'+'vec4(prepa'+'reOutputFr'+'omGamma(co'+'lor),\x20clr.'+'w);\x0a\x20\x20\x20\x20ga'+'ussianColo'+'r\x20=\x20clamp('+'gaussianCo'+'lor,\x200.0,\x20'+'1.0);\x0a\x0a\x20\x20\x20'+'\x20#ifndef\x20D'+'ITHER_NONE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+'d\x20=\x20float('+'source.id)'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20PREPA'+'SS_PASS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vLin'+'earDepth\x20='+'\x20-center.v'+'iew.z;\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'),iP='\x0a\x20\x20\x20\x20attri'+'bute\x20vec2\x20'+'aPosition;'+'\x0a\x20\x20\x20\x20varyi'+'ng\x20vec2\x20uv'+'0;\x0a\x20\x20\x20\x20voi'+'d\x20main(voi'+'d)\x0a\x20\x20\x20\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20gl_'+'Position\x20='+'\x20vec4(aPos'+'ition,\x200.0'+',\x201.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20uv0\x20'+'=\x20getImage'+'EffectUV(('+'aPosition.'+'xy\x20+\x201.0)\x20'+'*\x200.5);\x0a\x20\x20'+'\x20\x20}\x0a',rP='\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22g'+'ammaPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vary'+'ing\x20vec4\x20c'+'olor;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20void\x20m'+'ain(void)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20v'+'ec4(gammaC'+'orrectOutp'+'ut(decodeG'+'amma(color'+'.rgb)),\x20co'+'lor.a);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a',aP='\x0a\x20\x20\x20\x20attri'+'bute\x20vec4\x20'+'vertex_pos'+'ition;\x0a\x20\x20\x20'+'\x20attribute'+'\x20vec4\x20vert'+'ex_color;\x0a'+'\x20\x20\x20\x20unifor'+'m\x20mat4\x20mat'+'rix_model;'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20mat4\x20ma'+'trix_viewP'+'rojection;'+'\x0a\x20\x20\x20\x20varyi'+'ng\x20vec4\x20co'+'lor;\x0a\x20\x20\x20\x20v'+'oid\x20main(v'+'oid)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20color'+'\x20=\x20vertex_'+'color;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Po'+'sition\x20=\x20m'+'atrix_view'+'Projection'+'\x20*\x20matrix_'+'model\x20*\x20ve'+'rtex_posit'+'ion;\x0a\x20\x20\x20\x20}'+'\x0a',nP='\x0auniform\x20f'+'loat\x20mater'+'ial_irides'+'cenceRefra'+'ctionIndex'+';\x0a\x0afloat\x20i'+'ridescence'+'_iorToFres'+'nel(float\x20'+'transmitte'+'dIor,\x20floa'+'t\x20incident'+'Ior)\x20{\x0a\x20\x20\x20'+'\x20return\x20po'+'w((transmi'+'ttedIor\x20-\x20'+'incidentIo'+'r)\x20/\x20(tran'+'smittedIor'+'\x20+\x20inciden'+'tIor),\x202.0'+');\x0a}\x0a\x0avec3'+'\x20iridescen'+'ce_iorToFr'+'esnel(vec3'+'\x20transmitt'+'edIor,\x20flo'+'at\x20inciden'+'tIor)\x20{\x0a\x20\x20'+'\x20\x20return\x20p'+'ow((transm'+'ittedIor\x20-'+'\x20vec3(inci'+'dentIor))\x20'+'/\x20(transmi'+'ttedIor\x20+\x20'+'vec3(incid'+'entIor)),\x20'+'vec3(2.0))'+';\x0a}\x0a\x0avec3\x20'+'iridescenc'+'e_fresnelT'+'oIor(vec3\x20'+'f0)\x20{\x0a\x20\x20\x20\x20'+'vec3\x20sqrtF'+'0\x20=\x20sqrt(f'+'0);\x0a\x20\x20\x20\x20re'+'turn\x20(vec3'+'(1.0)\x20+\x20sq'+'rtF0)\x20/\x20(v'+'ec3(1.0)\x20-'+'\x20sqrtF0);\x0a'+'}\x0a\x0avec3\x20ir'+'idescence_'+'sensitivit'+'y(float\x20op'+'d,\x20vec3\x20sh'+'ift)\x20{\x0a\x20\x20\x20'+'\x20float\x20PI\x20'+'=\x203.141592'+'653589793;'+'\x0a\x20\x20\x20\x20float'+'\x20phase\x20=\x202'+'.0\x20*\x20PI\x20*\x20'+'opd\x20*\x201.0e'+'-9;\x0a\x20\x20\x20\x20co'+'nst\x20vec3\x20v'+'al\x20=\x20vec3('+'5.4856e-13'+',\x204.4201e-'+'13,\x205.2481'+'e-13);\x0a\x20\x20\x20'+'\x20const\x20vec'+'3\x20pos\x20=\x20ve'+'c3(1.6810e'+'+06,\x201.795'+'3e+06,\x202.2'+'084e+06);\x0a'+'\x20\x20\x20\x20const\x20'+'vec3\x20var\x20='+'\x20vec3(4.32'+'78e+09,\x209.'+'3046e+09,\x20'+'6.6121e+09'+');\x0a\x0a\x20\x20\x20\x20ve'+'c3\x20xyz\x20=\x20v'+'al\x20*\x20sqrt('+'2.0\x20*\x20PI\x20*'+'\x20var)\x20*\x20co'+'s(pos\x20*\x20ph'+'ase\x20+\x20shif'+'t)\x20*\x20exp(-'+'pow(phase,'+'\x202.0)\x20*\x20va'+'r);\x0a\x20\x20\x20\x20xy'+'z.x\x20+=\x209.7'+'470e-14\x20*\x20'+'sqrt(2.0\x20*'+'\x20PI\x20*\x204.52'+'82e+09)\x20*\x20'+('cos(2.2399'+'e+06\x20*\x20pha'+'se\x20+\x20shift'+'[0])\x20*\x20exp'+'(-4.5282e+'+'09\x20*\x20pow(p'+'hase,\x202.0)'+');\x0a\x20\x20\x20\x20xyz'+'\x20/=\x20vec3(1'+'.0685e-07)'+';\x0a\x0a\x20\x20\x20\x20con'+'st\x20mat3\x20XY'+'Z_TO_REC70'+'9\x20=\x20mat3(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x203.'+'2404542,\x20-'+'0.9692660,'+'\x20\x200.055643'+'4,\x0a\x20\x20\x20\x20\x20\x20\x20'+'-1.5371385'+',\x20\x201.87601'+'08,\x20-0.204'+'0259,\x0a\x20\x20\x20\x20'+'\x20\x20\x20-0.4985'+'314,\x20\x200.04'+'15560,\x20\x201.'+'0572252\x0a\x20\x20'+'\x20\x20);\x0a\x0a\x20\x20\x20\x20'+'return\x20XYZ'+'_TO_REC709'+'\x20*\x20xyz;\x0a}\x0a'+'\x0afloat\x20iri'+'descence_f'+'resnel(flo'+'at\x20cosThet'+'a,\x20float\x20f'+'0)\x20{\x0a\x20\x20\x20\x20f'+'loat\x20x\x20=\x20c'+'lamp(1.0\x20-'+'\x20cosTheta,'+'\x200.0,\x201.0)'+';\x0a\x20\x20\x20\x20floa'+'t\x20x2\x20=\x20x\x20*'+'\x20x;\x0a\x20\x20\x20\x20fl'+'oat\x20x5\x20=\x20x'+'\x20*\x20x2\x20*\x20x2'+';\x0a\x20\x20\x20\x20retu'+'rn\x20f0\x20+\x20(1'+'.0\x20-\x20f0)\x20*'+'\x20x5;\x0a}\x20\x0a\x0av'+'ec3\x20irides'+'cence_fres'+'nel(float\x20'+'cosTheta,\x20'+'vec3\x20f0)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20x\x20=\x20clamp'+'(1.0\x20-\x20cos'+'Theta,\x200.0'+',\x201.0);\x0a\x20\x20'+'\x20\x20float\x20x2'+'\x20=\x20x\x20*\x20x;\x0a'+'\x20\x20\x20\x20float\x20'+'x5\x20=\x20x\x20*\x20x'+'2\x20*\x20x2;\x20\x0a\x20'+'\x20\x20\x20return\x20'+'f0\x20+\x20(vec3'+'(1.0)\x20-\x20f0'+')\x20*\x20x5;\x0a}\x0a'+'\x0avec3\x20calc'+'Iridescenc'+'e(float\x20ou'+'tsideIor,\x20'+'float\x20cosT'+'heta,\x20vec3'+'\x20base_f0,\x20'+'float\x20irid'+'escenceThi'+'ckness)\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'PI\x20=\x203.141'+'5926535897'+'93;\x0a\x0a\x20\x20\x20\x20f'+'loat\x20iride'+'scenceIor\x20'+'=\x20mix(outs'+'ideIor,\x20ma'+'terial_iri'+'descenceRe'+'fractionIn'+'dex,\x20smoot'+'hstep(0.0,'+'\x200.03,\x20iri'+'descenceTh'+'ickness));'+'\x0a\x20\x20\x20\x20float'+'\x20sinTheta2'+'Sq\x20=\x20pow(o'+'utsideIor\x20'+'/\x20iridesce')+('nceIor,\x202.'+'0)\x20*\x20(1.0\x20'+'-\x20pow(cosT'+'heta,\x202.0)'+');\x0a\x20\x20\x20\x20flo'+'at\x20cosThet'+'a2Sq\x20=\x201.0'+'\x20-\x20sinThet'+'a2Sq;\x0a\x0a\x20\x20\x20'+'\x20if\x20(cosTh'+'eta2Sq\x20<\x200'+'.0)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20vec3(1.0)'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20float\x20c'+'osTheta2\x20='+'\x20sqrt(cosT'+'heta2Sq);\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20r0\x20=\x20irid'+'escence_io'+'rToFresnel'+'(iridescen'+'ceIor,\x20out'+'sideIor);\x0a'+'\x20\x20\x20\x20float\x20'+'r12\x20=\x20irid'+'escence_fr'+'esnel(cosT'+'heta,\x20r0);'+'\x0a\x20\x20\x20\x20float'+'\x20r21\x20=\x20r12'+';\x0a\x20\x20\x20\x20floa'+'t\x20t121\x20=\x201'+'.0\x20-\x20r12;\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20phi12\x20=\x20i'+'ridescence'+'Ior\x20<\x20outs'+'ideIor\x20?\x20P'+'I\x20:\x200.0;\x0a\x20'+'\x20\x20\x20float\x20p'+'hi21\x20=\x20PI\x20'+'-\x20phi12;\x0a\x0a'+'\x20\x20\x20\x20vec3\x20b'+'aseIor\x20=\x20i'+'ridescence'+'_fresnelTo'+'Ior(base_f'+'0\x20+\x20vec3(0'+'.0001));\x0a\x20'+'\x20\x20\x20vec3\x20r1'+'\x20=\x20iridesc'+'ence_iorTo'+'Fresnel(ba'+'seIor,\x20iri'+'descenceIo'+'r);\x0a\x20\x20\x20\x20ve'+'c3\x20r23\x20=\x20i'+'ridescence'+'_fresnel(c'+'osTheta2,\x20'+'r1);\x0a\x0a\x20\x20\x20\x20'+'vec3\x20phi23'+'\x20=\x20vec3(0.'+'0);\x0a\x20\x20\x20\x20if'+'\x20(baseIor['+'0]\x20<\x20iride'+'scenceIor)'+'\x20phi23[0]\x20'+'=\x20PI;\x0a\x20\x20\x20\x20'+'if\x20(baseIo'+'r[1]\x20<\x20iri'+'descenceIo'+'r)\x20phi23[1'+']\x20=\x20PI;\x0a\x20\x20'+'\x20\x20if\x20(base'+'Ior[2]\x20<\x20i'+'ridescence'+'Ior)\x20phi23'+'[2]\x20=\x20PI;\x0a'+'\x20\x20\x20\x20float\x20'+'opd\x20=\x202.0\x20'+'*\x20iridesce'+'nceIor\x20*\x20i'+'ridescence'+'Thickness\x20'+'*\x20cosTheta'+'2;\x0a\x20\x20\x20\x20vec'+'3\x20phi\x20=\x20ve'+'c3(phi21)\x20'+'+\x20phi23;\x20\x0a'+'\x0a\x20\x20\x20\x20vec3\x20'+'r123Sq\x20=\x20c'+'lamp(r12\x20*'+'\x20r23,\x201e-5'+',\x200.9999);'+'\x0a\x20\x20\x20\x20vec3\x20'+'r123\x20=\x20sqr')+('t(r123Sq);'+'\x0a\x20\x20\x20\x20vec3\x20'+'rs\x20=\x20pow(t'+'121,\x202.0)\x20'+'*\x20r23\x20/\x20(1'+'.0\x20-\x20r123S'+'q);\x0a\x0a\x20\x20\x20\x20v'+'ec3\x20c0\x20=\x20r'+'12\x20+\x20rs;\x0a\x20'+'\x20\x20\x20vec3\x20i\x20'+'=\x20c0;\x0a\x0a\x20\x20\x20'+'\x20vec3\x20cm\x20='+'\x20rs\x20-\x20t121'+';\x0a\x20\x20\x20\x20for\x20'+'(int\x20m\x20=\x201'+';\x20m\x20<=\x202;\x20'+'m++)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20cm\x20*='+'\x20r123;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'sm\x20=\x202.0\x20*'+'\x20iridescen'+'ce_sensiti'+'vity(float'+'(m)\x20*\x20opd,'+'\x20float(m)\x20'+'*\x20phi);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20i\x20+='+'\x20cm\x20*\x20sm;\x0a'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'return\x20max'+'(i,\x20vec3(0'+'.0));\x0a}\x0a\x0av'+'ec3\x20getIri'+'descence(f'+'loat\x20cosTh'+'eta,\x20vec3\x20'+'specularit'+'y,\x20float\x20i'+'ridescence'+'Thickness)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20calcIr'+'idescence('+'1.0,\x20cosTh'+'eta,\x20specu'+'larity,\x20ir'+'idescenceT'+'hickness);'+'\x0a}\x0a'),oP='\x0a#ifdef\x20ST'+'D_IRIDESCE'+'NCE_CONSTA'+'NT\x0auniform'+'\x20float\x20mat'+'erial_irid'+'escence;\x0a#'+'endif\x0a\x0avoi'+'d\x20getIride'+'scence()\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20iridescen'+'ce\x20=\x201.0;\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_IRID'+'ESCENCE_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20iridescen'+'ce\x20*=\x20mate'+'rial_iride'+'scence;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCE_TEX'+'TURE\x0a\x20\x20\x20\x20i'+'ridescence'+'\x20*=\x20textur'+'e2DBias({S'+'TD_IRIDESC'+'ENCE_TEXTU'+'RE_NAME},\x20'+'{STD_IRIDE'+'SCENCE_TEX'+'TURE_UV},\x20'+'textureBia'+'s).{STD_IR'+'IDESCENCE_'+'TEXTURE_CH'+'ANNEL};\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20dIride'+'scence\x20=\x20i'+'ridescence'+';\x20\x0a}\x0a',lP='\x0auniform\x20f'+'loat\x20mater'+'ial_irides'+'cenceThick'+'nessMax;\x0a\x0a'+'#ifdef\x20STD'+'_IRIDESCEN'+'CETHICKNES'+'S_TEXTURE\x0a'+'uniform\x20fl'+'oat\x20materi'+'al_iridesc'+'enceThickn'+'essMin;\x0a#e'+'ndif\x0a\x0avoid'+'\x20getIrides'+'cenceThick'+'ness()\x20{\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCETHIC'+'KNESS_TEXT'+'URE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20bl'+'end\x20=\x20text'+'ure2DBias('+'{STD_IRIDE'+'SCENCETHIC'+'KNESS_TEXT'+'URE_NAME},'+'\x20{STD_IRID'+'ESCENCETHI'+'CKNESS_TEX'+'TURE_UV},\x20'+'textureBia'+'s).{STD_IR'+'IDESCENCET'+'HICKNESS_T'+'EXTURE_CHA'+'NNEL};\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20iridescen'+'ceThicknes'+'s\x20=\x20mix(ma'+'terial_iri'+'descenceTh'+'icknessMin'+',\x20material'+'_iridescen'+'ceThicknes'+'sMax,\x20blen'+'d);\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20ir'+'idescenceT'+'hickness\x20='+'\x20material_'+'iridescenc'+'eThickness'+'Max;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20dIridesce'+'nceThickne'+'ss\x20=\x20iride'+'scenceThic'+'kness;\x20\x0a}\x0a',cP='\x0a#ifdef\x20ST'+'D_IOR_CONS'+'TANT\x0aunifo'+'rm\x20float\x20m'+'aterial_re'+'fractionIn'+'dex;\x0a#endi'+'f\x0a\x0avoid\x20ge'+'tIor()\x20{\x0a#'+'ifdef\x20STD_'+'IOR_CONSTA'+'NT\x0a\x20\x20\x20\x20dIo'+'r\x20=\x20materi'+'al_refract'+'ionIndex;\x0a'+'#else\x0a\x20\x20\x20\x20'+'dIor\x20=\x201.0'+'\x20/\x201.5;\x0a#e'+'ndif\x0a}\x0a',hP='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x0a\x20\x20\x20\x20un'+'iform\x20vec3'+'\x20light{i}_'+'color;\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20DIRECTIO'+'NAL\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'vec3\x20light'+'{i}_direct'+'ion;\x0a\x20\x20\x20\x20#'+'else\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#defin'+'e\x20LIT_CODE'+'_LIGHTS_PO'+'INT\x20//\x20inc'+'lude\x20funct'+'ionality\x20f'+'or\x20point\x20l'+'ights\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec3\x20li'+'ght{i}_pos'+'ition;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20float\x20l'+'ight{i}_ra'+'dius;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20SPOT\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#define'+'\x20LIT_CODE_'+'LIGHTS_SPO'+'T\x20//\x20inclu'+'de\x20functio'+'nality\x20for'+'\x20spot\x20ligh'+'ts\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20vec3\x20l'+'ight{i}_di'+'rection;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20light'+'{i}_innerC'+'oneAngle;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'float\x20ligh'+'t{i}_outer'+'ConeAngle;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20//\x20area\x20'+'lights\x0a\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHAPE\x20!'+'=\x20PUNCTUAL'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#define\x20LI'+'T_CODE_FAL'+'LOFF_SQUAR'+'ED\x20//\x20incl'+'ude\x20functi'+'onality\x20fo'+'r\x20inverse\x20'+'squared\x20fa'+'lloff\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20DIREC'+'TIONAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20vec'+'3\x20light{i}'+'_position;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20vec3\x20lig'+'ht{i}_half'+'Width;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec3\x20li'+'ght{i}_hal'+'fHeight;\x0a\x20'+'\x20\x20\x20#else\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'FALLOFF\x20=='+'\x20LINEAR\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#define\x20LI'+('T_CODE_FAL'+'LOFF_LINEA'+'R\x20//\x20inclu'+'de\x20functio'+'nality\x20for'+'\x20linear\x20fa'+'lloff\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}FALLOFF\x20'+'==\x20INVERSE'+'SQUARED\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#define\x20LI'+'T_CODE_FAL'+'LOFF_SQUAR'+'ED\x20//\x20incl'+'ude\x20functi'+'onality\x20fo'+'r\x20inverse\x20'+'squared\x20fa'+'lloff\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20//'+'\x20shadow\x20ca'+'sting\x0a\x20\x20\x20\x20'+'#if\x20define'+'d(LIGHT{i}'+'CASTSHADOW'+')\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20m'+'at4\x20light{'+'i}_shadowM'+'atrix;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20float\x20l'+'ight{i}_sh'+'adowIntens'+'ity;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20vec4\x20ligh'+'t{i}_shado'+'wParams;\x20/'+'/\x20width,\x20h'+'eight,\x20bia'+'s,\x20radius\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCSS_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20float\x20'+'light{i}_s'+'hadowSearc'+'hArea;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20vec'+'4\x20light{i}'+'_cameraPar'+'ams;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}T'+'YPE\x20==\x20DIR'+'ECTIONAL\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec4\x20li'+'ght{i}_sof'+'tShadowPar'+'ams;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20direction'+'al\x20(cascad'+'ed)\x20shadow'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20mat4\x20lig'+'ht{i}_shad'+'owMatrixPa'+'lette[4];\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'vec4\x20light'+'{i}_shadow'+'CascadeDis'+'tances;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20in'+'t\x20light{i}'+'_shadowCas')+('cadeCount;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20float\x20lig'+'ht{i}_shad'+'owCascadeB'+'lend;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'OMNI\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(L'+'IGHT{i}SHA'+'DOW_PCF)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'CubeShadow'+'\x20light{i}_'+'shadowMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'Cube\x20light'+'{i}_shadow'+'Map;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIGHT{i}'+'SHADOW_PCF'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20samp'+'ler2DShado'+'w\x20light{i}'+'_shadowMap'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20light{'+'i}_shadowM'+'ap;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20//\x20co'+'okie\x0a\x20\x20\x20\x20#'+'if\x20defined'+'(LIGHT{i}C'+'OOKIE)\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#def'+'ine\x20LIT_CO'+'DE_COOKIE\x20'+'//\x20include'+'\x20functiona'+'lity\x20for\x20c'+'ookies\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}TY'+'PE\x20==\x20OMNI'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20samplerCu'+'be\x20light{i'+'}_cookie;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'float\x20ligh'+'t{i}_cooki'+'eIntensity'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20!d'+'efined(LIG'+'HT{i}CASTS'+'HADOW)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20mat4\x20ligh'+'t{i}_shado'+'wMatrix;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20SPOT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20sam'+'pler2D\x20lig')+('ht{i}_cook'+'ie;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20float\x20'+'light{i}_c'+'ookieInten'+'sity;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20!defined'+'(LIGHT{i}C'+'ASTSHADOW)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20mat4\x20'+'light{i}_s'+'hadowMatri'+'x;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20de'+'fined(LIGH'+'T{i}COOKIE'+'_TRANSFORM'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20vec4'+'\x20light{i}_'+'cookieMatr'+'ix;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20ve'+'c2\x20light{i'+'}_cookieOf'+'fset;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a#endif\x0a'),dP='\x0afloat\x20get'+'LightDiffu'+'se(vec3\x20wo'+'rldNormal,'+'\x20vec3\x20view'+'Dir,\x20vec3\x20'+'lightDirNo'+'rm)\x20{\x0a\x20\x20\x20\x20'+'return\x20max'+'(dot(world'+'Normal,\x20-l'+'ightDirNor'+'m),\x200.0);\x0a'+'}\x0a',fP='\x0avec3\x20eval'+'OmniLight('+'vec3\x20light'+'PosW)\x20{\x0a\x20\x20'+'\x20\x20return\x20v'+'PositionW\x20'+'-\x20lightPos'+'W;\x0a}\x0a',uP='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x20\x20\x20\x20eva'+'luateLight'+'{i}(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_I'+'RIDESCENCE'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20irides'+'cenceFresn'+'el\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20);\x0a#endi'+'f\x0a',pP='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x0avoid\x20e'+'valuateLig'+'ht{i}(\x0a\x20\x20\x20'+'\x20#if\x20defin'+'ed(LIT_IRI'+'DESCENCE)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20iridesc'+'enceFresne'+'l\x0a\x20\x20\x20\x20#end'+'if\x0a)\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x20light'+'\x20color\x0a\x20\x20\x20'+'\x20vec3\x20ligh'+'tColor\x20=\x20l'+'ight{i}_co'+'lor;\x0a\x0a\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'DIRECTIONA'+'L\x20&&\x20!defi'+'ned(LIT_SH'+'ADOW_CATCH'+'ER)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20early'+'\x20return\x20if'+'\x20the\x20light'+'\x20color\x20is\x20'+'black\x20(use'+'d\x20by\x20shado'+'w\x20catcher\x20'+'-\x20this\x20way'+'\x20this\x20ligh'+'t\x20is\x20very\x20'+'cheap)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20if\x20(a'+'ll(equal(l'+'ightColor,'+'\x20vec3(0.0)'+')))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20DIRECTIO'+'NAL\x20//\x20dir'+'ectional\x20l'+'ight\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dLight'+'DirNormW\x20='+'\x20light{i}_'+'direction;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20d'+'Atten\x20=\x201.'+'0;\x0a\x0a\x20\x20\x20\x20#e'+'lse\x20//\x20omn'+'i\x20or\x20spot\x20'+'light\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20li'+'ghtDirW\x20=\x20'+'evalOmniLi'+'ght(light{'+'i}_positio'+'n);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dLightDi'+'rNormW\x20=\x20n'+'ormalize(l'+'ightDirW);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20cookie\x20'+'attenuatio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIGHT{i}'+'COOKIE)\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}TYPE\x20=='+'\x20SPOT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IGHT{i}COO'+'KIE_FALLOF'+'F\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IGHT{i}COO'+'KIE_TRANSF'+'ORM\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20cookieA'+'ttenuation'+'\x20=\x20getCook'+'ie2DXform('+('light{i}_c'+'ookie,\x20lig'+'ht{i}_shad'+'owMatrix,\x20'+'light{i}_c'+'ookieInten'+'sity,\x20ligh'+'t{i}_cooki'+'eMatrix,\x20l'+'ight{i}_co'+'okieOffset'+').{LIGHT{i'+'}COOKIE_CH'+'ANNEL};\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20cookieA'+'ttenuation'+'\x20=\x20getCook'+'ie2D(light'+'{i}_cookie'+',\x20light{i}'+'_shadowMat'+'rix,\x20light'+'{i}_cookie'+'Intensity)'+'.{LIGHT{i}'+'COOKIE_CHA'+'NNEL};\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIGHT{i'+'}COOKIE_TR'+'ANSFORM\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20coo'+'kieAttenua'+'tion\x20=\x20get'+'Cookie2DCl'+'ipXform(li'+'ght{i}_coo'+'kie,\x20light'+'{i}_shadow'+'Matrix,\x20li'+'ght{i}_coo'+'kieIntensi'+'ty,\x20light{'+'i}_cookieM'+'atrix,\x20lig'+'ht{i}_cook'+'ieOffset).'+'{LIGHT{i}C'+'OOKIE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20cookieAtt'+'enuation\x20='+'\x20getCookie'+'2DClip(lig'+'ht{i}_cook'+'ie,\x20light{'+'i}_shadowM'+'atrix,\x20lig'+'ht{i}_cook'+'ieIntensit'+'y).{LIGHT{'+'i}COOKIE_C'+'HANNEL};\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}TYPE\x20=='+'\x20OMNI\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20coo'+'kieAttenua'+'tion\x20=\x20get'+'CookieCube'+'(light{i}_'+'cookie,\x20li'+'ght{i}_sha')+('dowMatrix,'+'\x20light{i}_'+'cookieInte'+'nsity).{LI'+'GHT{i}COOK'+'IE_CHANNEL'+'};\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20mu'+'ltiply\x20lig'+'ht\x20color\x20b'+'y\x20the\x20cook'+'ie\x20attenua'+'tion\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lig'+'htColor\x20*='+'\x20cookieAtt'+'enuation;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20di'+'stance\x20fal'+'loff\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHAPE'+'\x20==\x20PUNCTU'+'AL\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}FAL'+'LOFF\x20==\x20LI'+'NEAR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dAtten\x20=\x20'+'getFalloff'+'Linear(lig'+'ht{i}_radi'+'us,\x20lightD'+'irW);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dAtten\x20=\x20g'+'etFalloffI'+'nvSquared('+'light{i}_r'+'adius,\x20lig'+'htDirW);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20non'+'\x20punctual\x20'+'lights\x20onl'+'y\x20gets\x20the'+'\x20range\x20win'+'dow\x20here\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dAtten\x20=\x20'+'getFalloff'+'Window(lig'+'ht{i}_radi'+'us,\x20lightD'+'irW);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20spot\x20li'+'ght\x20angle\x20'+'falloff\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}TY'+'PE\x20==\x20SPOT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20!de'+'fined(LIGH'+'T{i}COOKIE'+')\x20||\x20defin'+'ed(LIGHT{i'+'}COOKIE_FA'+'LLOFF)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dAtten\x20'+'*=\x20getSpot'+'Effect(lig'+'ht{i}_dire'+'ction,\x20lig'+'ht{i}_inne'+'rConeAngle'+',\x20light{i}'+'_outerCone'+'Angle,\x20dLi'+'ghtDirNorm'+'W);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20if\x20(dA'+'tten\x20<\x200.0')+('0001)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn;\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20//\x20ev'+'aluate\x20are'+'a\x20light\x20va'+'lues\x0a\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHAPE\x20!=\x20'+'PUNCTUAL\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}S'+'HAPE\x20==\x20RE'+'CT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20calcR'+'ectLightVa'+'lues(light'+'{i}_positi'+'on,\x20light{'+'i}_halfWid'+'th,\x20light{'+'i}_halfHei'+'ght);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#elif\x20'+'LIGHT{i}SH'+'APE\x20==\x20DIS'+'K\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20calcDi'+'skLightVal'+'ues(light{'+'i}_positio'+'n,\x20light{i'+'}_halfWidt'+'h,\x20light{i'+'}_halfHeig'+'ht);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#elif\x20L'+'IGHT{i}SHA'+'PE\x20==\x20SPHE'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20calcS'+'phereLight'+'Values(lig'+'ht{i}_posi'+'tion,\x20ligh'+'t{i}_halfW'+'idth,\x20ligh'+'t{i}_halfH'+'eight);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20diffuse\x20'+'lighting\x20-'+'\x20LTC\x20light'+'s\x20do\x20not\x20m'+'ix\x20diffuse'+'\x20lighting\x20'+'into\x20atten'+'uation\x20tha'+'t\x20affects\x20'+'specular\x0a\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHAPE'+'\x20!=\x20PUNCTU'+'AL\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20atten'+'Diffuse\x20-\x20'+'separate\x20d'+'iffuse\x20att'+'enuation\x20f'+'or\x20non-pun'+'ctual\x20ligh'+'t\x20sources\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}TYPE\x20==\x20D'+'IRECTIONAL'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20NB:\x20'+'A\x20better\x20a'+'pproximati'+'on\x20perhaps'+'\x20using\x20wra'+'p\x20lighting'+'\x20could\x20be\x20'+'implemente'+'d\x20here\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20atten'+'Diffuse\x20=\x20'+'getLightDi'+'ffuse(litA'+'rgs_worldN'+'ormal,\x20dVi'+'ewDirW,\x20dL'+'ightDirNor'+'mW);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20//\x2016.0\x20i'+'s\x20a\x20consta'+'nt\x20that\x20is'+'\x20in\x20getFal'+'loffInvSqu'+'ared()\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHAPE\x20==\x20'+'RECT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20att'+'enDiffuse\x20'+'=\x20getRectL'+'ightDiffus'+'e(litArgs_'+'worldNorma'+'l,\x20dViewDi'+'rW,\x20lightD'+'irW,\x20dLigh'+'tDirNormW)'+'\x20*\x2016.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#elif\x20LIG'+'HT{i}SHAPE'+'\x20==\x20DISK\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20attenDiff'+'use\x20=\x20getD'+'iskLightDi'+'ffuse(litA'+'rgs_worldN'+'ormal,\x20dVi'+'ewDirW,\x20li'+'ghtDirW,\x20d'+'LightDirNo'+'rmW)\x20*\x2016.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#elif'+'\x20LIGHT{i}S'+'HAPE\x20==\x20SP'+'HERE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20att'+'enDiffuse\x20'+'=\x20getSpher'+'eLightDiff'+'use(litArg'+'s_worldNor'+'mal,\x20dView'+'DirW,\x20ligh'+'tDirW,\x20dLi'+'ghtDirNorm'+'W)\x20*\x2016.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20one\x20'+'parameter\x20'+'is\x20unused\x20'+'for\x20punctu'+'al\x20lights\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20dA'+'tten\x20*=\x20ge'+'tLightDiff'+'use(litArg'+'s_worldNor'+'mal,\x20vec3('+'0.0),\x20dLig'+'htDirNormW'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20apply\x20th'+'e\x20shadow\x20a'+'ttenuation'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'CASTSHADOW'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'shadow\x20=\x20g'+'etShadow{i'+'}(vec3(0.0'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20shad'+'ow\x20=\x20getSh'+'adow{i}(li'+'ghtDirW);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20App')+('ly\x20shadow\x20'+'intensity\x20'+'to\x20the\x20sha'+'dow\x20value\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'adow\x20=\x20mix'+'(1.0,\x20shad'+'ow,\x20light{'+'i}_shadowI'+'ntensity);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'dAtten\x20*=\x20'+'shadow;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_SHADOW_'+'CATCHER)\x20&'+'&\x20LIGHT{i}'+'TYPE\x20==\x20DI'+'RECTIONAL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20accum'+'ulate\x20shad'+'ows\x20for\x20di'+'rectional\x20'+'lights\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'ShadowCatc'+'her\x20*=\x20sha'+'dow;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x0a\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHAPE\x20!=\x20'+'PUNCTUAL\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'area\x20light'+'\x20-\x20they\x20do'+'\x20not\x20mix\x20d'+'iffuse\x20lig'+'hting\x20into'+'\x20specular\x20'+'attenuatio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULAR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dDiffuse'+'Light\x20+=\x20('+'(attenDiff'+'use\x20*\x20dAtt'+'en)\x20*\x20ligh'+'tColor)\x20*\x20'+'(1.0\x20-\x20dLT'+'CSpecFres)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dD'+'iffuseLigh'+'t\x20+=\x20(atte'+'nDiffuse\x20*'+'\x20dAtten)\x20*'+'\x20lightColo'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20punctua'+'l\x20light\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(AR'+'EA_LIGHTS)'+'\x20&&\x20define'+'d(LIT_SPEC'+'ULAR)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dD'+'iffuseLigh'+'t\x20+=\x20(dAtt'+'en\x20*\x20light'+'Color)\x20*\x20('+'1.0\x20-\x20litA'+'rgs_specul'+'arity);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dDiffu'+'seLight\x20+='+'\x20dAtten\x20*\x20'+'lightColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20//\x20spec'+'ular\x20light'+'ing\x0a\x20\x20\x20\x20#i'+'fdef\x20LIGHT')+('{i}AFFECT_'+'SPECULARIT'+'Y\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHAPE\x20!'+'=\x20PUNCTUAL'+'\x20//\x20area\x20l'+'ight\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'PE\x20==\x20RECT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20ccSpecula'+'rLight\x20+=\x20'+'ccLTCSpecF'+'res\x20*\x20getR'+'ectLightSp'+'ecular(lit'+'Args_clear'+'coat_world'+'Normal,\x20dV'+'iewDirW)\x20*'+'\x20dAtten\x20*\x20'+'lightColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lif\x20LIGHT{'+'i}SHAPE\x20=='+'\x20DISK\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ccSp'+'ecularLigh'+'t\x20+=\x20ccLTC'+'SpecFres\x20*'+'\x20getDiskLi'+'ghtSpecula'+'r(litArgs_'+'clearcoat_'+'worldNorma'+'l,\x20dViewDi'+'rW)\x20*\x20dAtt'+'en\x20*\x20light'+'Color;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#elif\x20L'+'IGHT{i}SHA'+'PE\x20==\x20SPHE'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20ccSpecu'+'larLight\x20+'+'=\x20ccLTCSpe'+'cFres\x20*\x20ge'+'tSphereLig'+'htSpecular'+'(litArgs_c'+'learcoat_w'+'orldNormal'+',\x20dViewDir'+'W)\x20*\x20dAtte'+'n\x20*\x20lightC'+'olor;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}S'+'HAPE\x20==\x20RE'+'CT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dSpecul'+'arLight\x20+='+'\x20dLTCSpecF'+'res\x20*\x20getR'+'ectLightSp'+'ecular(lit'+'Args_world'+'Normal,\x20dV'+'iewDirW)\x20*'+'\x20dAtten\x20*\x20'+'lightColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lif\x20LIGHT{'+'i}SHAPE\x20=='+'\x20DISK\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dSpe'+'cularLight'+'\x20+=\x20dLTCSp')+('ecFres\x20*\x20g'+'etDiskLigh'+'tSpecular('+'litArgs_wo'+'rldNormal,'+'\x20dViewDirW'+')\x20*\x20dAtten'+'\x20*\x20lightCo'+'lor;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#elif\x20LIG'+'HT{i}SHAPE'+'\x20==\x20SPHERE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dSpecular'+'Light\x20+=\x20d'+'LTCSpecFre'+'s\x20*\x20getSph'+'ereLightSp'+'ecular(lit'+'Args_world'+'Normal,\x20dV'+'iewDirW)\x20*'+'\x20dAtten\x20*\x20'+'lightColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x20/'+'/\x20punctual'+'\x20light\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20is\x20fres'+'nel\x20needed'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}TYPE\x20'+'==\x20DIRECTI'+'ONAL\x20&&\x20LI'+'T_FRESNEL_'+'MODEL\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#define\x20LI'+'GHT{i}FRES'+'NEL\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_SPE'+'CULAR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20hal'+'fDirW\x20=\x20no'+'rmalize(-d'+'LightDirNo'+'rmW\x20+\x20dVie'+'wDirW);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20if\x20LTC\x20'+'lights\x20are'+'\x20present,\x20'+'specular\x20m'+'ust\x20be\x20acc'+'umulated\x20w'+'ith\x20specul'+'arity\x20(spe'+'cularity\x20i'+'s\x20pre\x20mult'+'iplied\x20by\x20'+'punctual\x20l'+'ight\x20fresn'+'el)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_CLE'+'ARCOAT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20li'+'ghtspecula'+'rCC\x20=\x20getL'+'ightSpecul'+'ar(halfDir'+'W,\x20ccReflD'+'irW,\x20litAr'+'gs_clearco'+'at_worldNo'+'rmal,\x20dVie'+'wDirW,\x20dLi'+'ghtDirNorm'+'W,\x20litArgs'+'_clearcoat'+'_gloss,\x20dT'+'BN)\x20*\x20dAtt'+'en\x20*\x20light'+'Color;\x0a\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIGHT{i}FR'+'ESNEL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ligh'+'tspecularC'+'C\x20*=\x20getFr'+'esnelCC(do'+'t(dViewDir'+'W,\x20halfDir'+'W));\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccSpec'+'ularLight\x20'+'+=\x20lightsp'+'ecularCC;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SHEEN\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20sSpec'+'ularLight\x20'+'+=\x20getLigh'+'tSpecularS'+'heen(halfD'+'irW,\x20litAr'+'gs_worldNo'+'rmal,\x20dVie'+'wDirW,\x20dLi'+'ghtDirNorm'+'W,\x20litArgs'+'_sheen_glo'+'ss)\x20*\x20dAtt'+'en\x20*\x20light'+'Color;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'SPECULAR\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20lightSpec'+'ular\x20=\x20get'+'LightSpecu'+'lar(halfDi'+'rW,\x20dReflD'+'irW,\x20litAr'+'gs_worldNo'+'rmal,\x20dVie'+'wDirW,\x20dLi'+'ghtDirNorm'+'W,\x20litArgs'+'_gloss,\x20dT'+'BN)\x20*\x20dAtt'+'en\x20*\x20light'+'Color;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIGHT{i}FR'+'ESNEL\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_IRIDESC'+'ENCE)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'lightSpecu'+'lar\x20*=\x20get'+'Fresnel(do'+'t(dViewDir'+'W,\x20halfDir'+'W),\x20litArg'+'s_gloss,\x20l'+'itArgs_spe'+'cularity,\x20'+'iridescenc'+'eFresnel,\x20'+'litArgs_ir'+'idescence_'+'intensity)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20lightSpe'+'cular\x20*=\x20g'+'etFresnel('+'dot(dViewD'+'irW,\x20halfD'+'irW),\x20litA'+'rgs_gloss,'+'\x20litArgs_s')+('pecularity'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20lightSp'+'ecular\x20*=\x20'+'litArgs_sp'+'ecularity;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dSp'+'ecularLigh'+'t\x20+=\x20light'+'Specular;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a#en'+'dif\x0a'),mP='\x0a\x0a//\x20shado'+'w\x20casting\x20'+'functional'+'ity\x0a#ifdef'+'\x20LIGHT{i}C'+'ASTSHADOW\x0a'+'\x0a\x20\x20\x20\x20//\x20ge'+'nerate\x20sha'+'dow\x20coordi'+'nates\x20func'+'tion,\x20base'+'d\x20on\x20per\x20l'+'ight\x20defin'+'es:\x0a\x20\x20\x20\x20//'+'\x20-\x20_SHADOW'+'_SAMPLE_NO'+'RMAL_OFFSE'+'T\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_ORTH'+'O\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_POIN'+'T\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_SOUR'+'CE_ZBUFFER'+'\x0a\x20\x20\x20\x20vec3\x20'+'getShadowS'+'ampleCoord'+'{i}(mat4\x20s'+'hadowTrans'+'form,\x20vec4'+'\x20shadowPar'+'ams,\x20vec3\x20'+'worldPosit'+'ion,\x20vec3\x20'+'lightPos,\x20'+'inout\x20vec3'+'\x20lightDir,'+'\x20vec3\x20ligh'+'tDirNorm,\x20'+'vec3\x20norma'+'l)\x20{\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20s'+'urfacePosi'+'tion\x20=\x20wor'+'ldPosition'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'GHT{i}_SHA'+'DOW_SAMPLE'+'_POINT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIGH'+'T{i}_SHADO'+'W_SAMPLE_N'+'ORMAL_OFFS'+'ET\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20distS'+'cale\x20=\x20len'+'gth(lightD'+'ir);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20surfacePo'+'sition\x20=\x20s'+'urfacePosi'+'tion\x20+\x20nor'+'mal\x20*\x20shad'+'owParams.y'+'\x20*\x20clamp(1'+'.0\x20-\x20dot(n'+'ormal,\x20-li'+'ghtDirNorm'+'),\x200.0,\x201.'+'0)\x20*\x20distS'+'cale;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20lightDir'+'\x20=\x20surface'+'Position\x20-'+'\x20lightPos;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20lightD'+'ir;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIGH'+'T{i}_SHADO'+'W_SAMPLE_S'+'OURCE_ZBUF'+'FER\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIG'+'HT{i}_SHAD'+'OW_SAMPLE_'+('NORMAL_OFF'+'SET\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20surfac'+'ePosition\x20'+'=\x20surfaceP'+'osition\x20+\x20'+'normal\x20*\x20s'+'hadowParam'+'s.y;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IGHT{i}_SH'+'ADOW_SAMPL'+'E_NORMAL_O'+'FFSET\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIGHT{i'+'}_SHADOW_S'+'AMPLE_ORTH'+'O\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20distScal'+'e\x20=\x201.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20distS'+'cale\x20=\x20abs'+'(dot(vPosi'+'tionW\x20-\x20li'+'ghtPos,\x20li'+'ghtDirNorm'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20surfacePo'+'sition\x20=\x20s'+'urfacePosi'+'tion\x20+\x20nor'+'mal\x20*\x20shad'+'owParams.y'+'\x20*\x20clamp(1'+'.0\x20-\x20dot(n'+'ormal,\x20-li'+'ghtDirNorm'+'),\x200.0,\x201.'+'0)\x20*\x20distS'+'cale;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20vec4\x20posi'+'tionInShad'+'owSpace\x20=\x20'+'shadowTran'+'sform\x20*\x20ve'+'c4(surface'+'Position,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIGHT'+'{i}_SHADOW'+'_SAMPLE_OR'+'THO\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'positionIn'+'ShadowSpac'+'e.z\x20=\x20satu'+'rate(posit'+'ionInShado'+'wSpace.z)\x20'+'-\x200.0001;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIGHT{i}_'+'SHADOW_SAM'+'PLE_SOURCE'+'_ZBUFFER\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20p'+'ositionInS'+'hadowSpace'+'.xyz\x20/=\x20po'+'sitionInSh'+'adowSpace.')+('w;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20posit'+'ionInShado'+'wSpace.xy\x20'+'/=\x20positio'+'nInShadowS'+'pace.w;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20po'+'sitionInSh'+'adowSpace.'+'z\x20=\x20length'+'(lightDir)'+'\x20*\x20shadowP'+'arams.w;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20thi'+'s\x20is\x20curre'+'ntly\x20unuse'+'d\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20SHADOW_SA'+'MPLE_Z_BIA'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20positionI'+'nShadowSpa'+'ce.z\x20+=\x20ge'+'tShadowBia'+'s(shadowPa'+'rams.x,\x20sh'+'adowParams'+'.z);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20surf'+'acePositio'+'n\x20=\x20positi'+'onInShadow'+'Space.xyz;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20surfaceP'+'osition;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'//\x20shadow\x20'+'evaluation'+'\x20function\x0a'+'\x20\x20\x20\x20float\x20'+'getShadow{'+'i}(vec3\x20li'+'ghtDirW)\x20{'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20directi'+'onal\x20shado'+'w\x20cascades'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIGH'+'T{i}_SHADO'+'W_CASCADES'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20sel'+'ect\x20shadow'+'\x20cascade\x20m'+'atrix\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20in'+'t\x20cascadeI'+'ndex\x20=\x20get'+'ShadowCasc'+'adeIndex(l'+'ight{i}_sh'+'adowCascad'+'eDistances'+',\x20light{i}'+'_shadowCas'+'cadeCount)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'_SHADOW_CA'+'SCADE_BLEN'+'D\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ca'+'scadeIndex'+'\x20=\x20ditherS'+'hadowCasca'+'deIndex(ca'+'scadeIndex'+',\x20light{i}'+'_shadowCas'+'cadeDistan'+'ces,\x20light')+('{i}_shadow'+'CascadeCou'+'nt,\x20light{'+'i}_shadowC'+'ascadeBlen'+'d);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20mat4'+'\x20shadowMat'+'rix\x20=\x20ligh'+'t{i}_shado'+'wMatrixPal'+'ette[casca'+'deIndex];\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ma'+'t4\x20shadowM'+'atrix\x20=\x20li'+'ght{i}_sha'+'dowMatrix;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}TY'+'PE\x20==\x20DIRE'+'CTIONAL\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20directi'+'onal\x20light'+'\x20does\x20not\x20'+'have\x20a\x20pos'+'ition\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20shadowC'+'oord\x20=\x20get'+'ShadowSamp'+'leCoord{i}'+'(shadowMat'+'rix,\x20light'+'{i}_shadow'+'Params,\x20vP'+'ositionW,\x20'+'vec3(0.0),'+'\x20lightDirW'+',\x20dLightDi'+'rNormW,\x20dV'+'ertexNorma'+'lW);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20vec3\x20shad'+'owCoord\x20=\x20'+'getShadowS'+'ampleCoord'+'{i}(shadow'+'Matrix,\x20li'+'ght{i}_sha'+'dowParams,'+'\x20vPosition'+'W,\x20light{i'+'}_position'+',\x20lightDir'+'W,\x20dLightD'+'irNormW,\x20d'+'VertexNorm'+'alW);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20Fade\x20di'+'rectional\x20'+'shadow\x20at\x20'+'the\x20far\x20di'+'stance\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20DIREC'+'TIONAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'hadowCoord'+'\x20=\x20fadeSha'+'dow(shadow'+'Coord,\x20lig'+'ht{i}_shad'+'owCascadeD'+'istances);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20--'+'---\x20sample'+'\x20the\x20shado'+'w\x20-----\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}T'+'YPE\x20==\x20DIR'+'ECTIONAL\x20/'+'/\x20-----\x20di'+'rectional\x20'+'light\x20----')+('-\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20VSM_16F\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wVSM16(SHA'+'DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams,\x205'+'.54);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'SHADOWTYPE'+'\x20==\x20VSM_32'+'F\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20getSh'+'adowVSM32('+'SHADOWMAP_'+'PASS(light'+'{i}_shadow'+'Map),\x20shad'+'owCoord,\x20l'+'ight{i}_sh'+'adowParams'+',\x2015.0);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHADOWT'+'YPE\x20==\x20PCS'+'S_32F\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHAPE'+'\x20!=\x20PUNCTU'+'AL\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec2\x20sh'+'adowSearch'+'Area\x20=\x20vec'+'2(length(l'+'ight{i}_ha'+'lfWidth),\x20'+'length(lig'+'ht{i}_half'+'Height))\x20*'+'\x20light{i}_'+'shadowSear'+'chArea;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20getSh'+'adowPCSS(S'+'HADOWMAP_P'+'ASS(light{'+'i}_shadowM'+'ap),\x20shado'+'wCoord,\x20li'+'ght{i}_sha'+'dowParams,'+'\x20light{i}_'+'cameraPara'+'ms,\x20shadow'+'SearchArea'+',\x20lightDir'+'W);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20getShad'+'owPCSS(SHA'+'DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams,\x20l'+'ight{i}_ca'+'meraParams'+',\x20light{i}'+'_softShado'+'wParams,\x20l'+'ightDirW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en')+('dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}S'+'HADOWTYPE\x20'+'==\x20PCF1_16'+'F\x20||\x20LIGHT'+'{i}SHADOWT'+'YPE\x20==\x20PCF'+'1_32F\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'etShadowPC'+'F1x1(SHADO'+'WMAP_PASS('+'light{i}_s'+'hadowMap),'+'\x20shadowCoo'+'rd,\x20light{'+'i}_shadowP'+'arams);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}SHADOWTY'+'PE\x20==\x20PCF3'+'_16F\x20||\x20LI'+'GHT{i}SHAD'+'OWTYPE\x20==\x20'+'PCF3_32F\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wPCF3x3(SH'+'ADOWMAP_PA'+'SS(light{i'+'}_shadowMa'+'p),\x20shadow'+'Coord,\x20lig'+'ht{i}_shad'+'owParams);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHADO'+'WTYPE\x20==\x20P'+'CF5_16F\x20||'+'\x20LIGHT{i}S'+'HADOWTYPE\x20'+'==\x20PCF5_32'+'F\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20getSh'+'adowPCF5x5'+'(SHADOWMAP'+'_PASS(ligh'+'t{i}_shado'+'wMap),\x20sha'+'dowCoord,\x20'+'light{i}_s'+'hadowParam'+'s);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}TYPE\x20==\x20S'+'POT\x20//\x20---'+'--\x20spot\x20li'+'ght\x20-----\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHADO'+'WTYPE\x20==\x20V'+'SM_16F\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'getShadowS'+'potVSM16(S'+'HADOWMAP_P'+'ASS(light{'+'i}_shadowM'+'ap),\x20shado'+'wCoord,\x20li'+'ght{i}_sha'+'dowParams,'+'\x205.54,\x20lig'+'htDirW);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHADOWT'+'YPE\x20==\x20VSM'+'_32F\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ge'+'tShadowSpo')+('tVSM32(SHA'+'DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams,\x201'+'5.0,\x20light'+'DirW);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCSS_'+'32F\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHAPE\x20!'+'=\x20PUNCTUAL'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20vec2\x20shad'+'owSearchAr'+'ea\x20=\x20vec2('+'length(lig'+'ht{i}_half'+'Width),\x20le'+'ngth(light'+'{i}_halfHe'+'ight))\x20*\x20l'+'ight{i}_sh'+'adowSearch'+'Area;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20shadowS'+'earchArea\x20'+'=\x20vec2(lig'+'ht{i}_shad'+'owSearchAr'+'ea);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wSpotPCSS('+'SHADOWMAP_'+'PASS(light'+'{i}_shadow'+'Map),\x20shad'+'owCoord,\x20l'+'ight{i}_sh'+'adowParams'+',\x20light{i}'+'_cameraPar'+'ams,\x20shado'+'wSearchAre'+'a,\x20lightDi'+'rW);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'SHADOWTYPE'+'\x20==\x20PCF1_1'+'6F\x20||\x20LIGH'+'T{i}SHADOW'+'TYPE\x20==\x20PC'+'F1_32F\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'getShadowS'+'potPCF1x1('+'SHADOWMAP_'+'PASS(light'+'{i}_shadow'+'Map),\x20shad'+'owCoord,\x20l'+'ight{i}_sh'+'adowParams'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF3_16F\x20'+'||\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF3_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowSpot'+'PCF3x3(SHA')+('DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHADOW'+'TYPE\x20==\x20PC'+'F5_16F\x20||\x20'+'LIGHT{i}SH'+'ADOWTYPE\x20='+'=\x20PCF5_32F'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20getSha'+'dowSpotPCF'+'5x5(SHADOW'+'MAP_PASS(l'+'ight{i}_sh'+'adowMap),\x20'+'shadowCoor'+'d,\x20light{i'+'}_shadowPa'+'rams);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20OMNI\x20//\x20'+'-----\x20omni'+'\x20light\x20---'+'--\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}SH'+'ADOWTYPE\x20='+'=\x20PCSS_32F'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'SHAPE\x20!=\x20P'+'UNCTUAL\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20shadowS'+'earchArea\x20'+'=\x20vec2(len'+'gth(light{'+'i}_halfWid'+'th),\x20lengt'+'h(light{i}'+'_halfHeigh'+'t))\x20*\x20ligh'+'t{i}_shado'+'wSearchAre'+'a;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec2\x20'+'shadowSear'+'chArea\x20=\x20v'+'ec2(light{'+'i}_shadowS'+'earchArea)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'etShadowOm'+'niPCSS(SHA'+'DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams,\x20l'+'ight{i}_ca'+'meraParams'+',\x20shadowSe'+'archArea,\x20'+'lightDirW)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF1_16F\x20'+'||\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF1_')+('32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowOmni'+'PCF1x1(SHA'+'DOWMAP_PAS'+'S(light{i}'+'_shadowMap'+'),\x20shadowC'+'oord,\x20ligh'+'t{i}_shado'+'wParams,\x20l'+'ightDirW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}SHADO'+'WTYPE\x20==\x20P'+'CF3_16F\x20||'+'\x20LIGHT{i}S'+'HADOWTYPE\x20'+'==\x20PCF3_32'+'F\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20getSh'+'adowOmniPC'+'F3x3(SHADO'+'WMAP_PASS('+'light{i}_s'+'hadowMap),'+'\x20shadowCoo'+'rd,\x20light{'+'i}_shadowP'+'arams,\x20lig'+'htDirW);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20}\x0a'+'#endif\x0a'),_P='\x0a\x0a#ifdef\x20L'+'IT_CLUSTER'+'ED_LIGHTS\x0a'+'\x20\x20\x20\x20//\x20all'+'\x20this\x20func'+'tionality\x20'+'that\x20needs'+'\x20to\x20be\x20inc'+'luded\x20for\x20'+'clustered\x20'+'lighting\x0a\x20'+'\x20\x20\x20#define'+'\x20LIT_CODE_'+'FALLOFF_LI'+'NEAR\x0a\x20\x20\x20\x20#'+'define\x20LIT'+'_CODE_FALL'+'OFF_SQUARE'+'D\x0a\x20\x20\x20\x20#def'+'ine\x20LIT_CO'+'DE_LIGHTS_'+'POINT\x0a\x20\x20\x20\x20'+'#define\x20LI'+'T_CODE_LIG'+'HTS_SPOT\x0a#'+'endif\x0a\x0a#if'+'def\x20AREA_L'+'IGHTS\x0a\x20\x20\x20\x20'+'uniform\x20hi'+'ghp\x20sample'+'r2D\x20areaLi'+'ghtsLutTex'+'1;\x0a\x20\x20\x20\x20uni'+'form\x20highp'+'\x20sampler2D'+'\x20areaLight'+'sLutTex2;\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_L'+'IGHTING\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22lightDif'+'fuseLamber'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'//\x20area\x20li'+'ghts\x0a\x20\x20\x20\x20#'+'if\x20defined'+'(AREA_LIGH'+'TS)\x20||\x20def'+'ined(LIT_C'+'LUSTERED_A'+'REA_LIGHTS'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'ltcPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20SHADOW_'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owCascades'+'PS\x22\x0a#endif'+'\x0a\x0a#if\x20defi'+'ned(SHADOW'+'_KIND_PCF1'+')\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owPCF1PS\x22\x0a'+'#endif\x0a\x0a#i'+'f\x20defined('+'SHADOW_KIN'+'D_PCF3)\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22shadowPC'+'F3PS\x22\x0a#end'+'if\x0a\x0a#if\x20de'+'fined(SHAD'+'OW_KIND_PC'+'F5)\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22sh'+'adowPCF5PS'+'\x22\x0a#endif\x0a\x0a'+'#if\x20define'+'d(SHADOW_K'+'IND_PCSS)\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22linear'+'izeDepthPS'+'\x22\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owPCSSPS\x22\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22shadow'+'SoftPS\x22\x0a#e'+'ndif\x0a\x0a#if\x20'+'defined(SH'+'ADOW_KIND_'+'VSM)\x0a\x20\x20\x20\x20#'+'include\x20\x22s'+('hadowEVSMP'+'S\x22\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_CODE_FAL'+'LOFF_LINEA'+'R\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22fall'+'offLinearP'+'S\x22\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_CODE_FAL'+'LOFF_SQUAR'+'ED\x0a\x20\x20\x20\x20#in'+'clude\x20\x22fal'+'loffInvSqu'+'aredPS\x22\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20LIT_COD'+'E_LIGHTS_P'+'OINT\x0a\x20\x20\x20\x20#'+'include\x20\x22l'+'ightDirPoi'+'ntPS\x22\x0a#end'+'if\x0a\x0a#ifdef'+'\x20LIT_CODE_'+'LIGHTS_SPO'+'T\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22spot'+'PS\x22\x0a#endif'+'\x0a\x0a#ifdef\x20L'+'IT_CODE_CO'+'OKIE\x0a\x20\x20\x20\x20#'+'include\x20\x22c'+'ookiePS\x22\x0a#'+'endif\x0a\x0a//\x20'+'clustered\x20'+'lighting\x0a#'+'ifdef\x20LIT_'+'CLUSTERED_'+'LIGHTS\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22clustered'+'LightPS\x22\x0a#'+'endif\x0a\x0a#if'+'def\x20LIGHT_'+'COUNT\x20>\x200\x0a'+'\x20\x20\x20\x20//\x20LOO'+'P\x20-\x20genera'+'te\x20shadow\x20'+'evaluation'+'\x20functions'+'\x20for\x20all\x20n'+'on-cluster'+'ed\x20lights\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22lightF'+'unctionSha'+'dowPS,\x20LIG'+'HT_COUNT\x22\x0a'+'\x0a\x20\x20\x20\x20//\x20LO'+'OP\x20-\x20gener'+'ate\x20light\x20'+'evaluation'+'\x20functions'+'\x20for\x20all\x20n'+'on-cluster'+'ed\x20lights\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22lightF'+'unctionLig'+'htPS,\x20LIGH'+'T_COUNT\x22\x0a#'+'endif\x0a'),gP='\x0avoid\x20addL'+'ightMap(\x0a\x20'+'\x20\x20\x20vec3\x20li'+'ghtmap,\x20\x0a\x20'+'\x20\x20\x20vec3\x20di'+'r,\x20\x0a\x20\x20\x20\x20ve'+'c3\x20worldNo'+'rmal,\x20\x0a\x20\x20\x20'+'\x20vec3\x20view'+'Dir,\x20\x0a\x20\x20\x20\x20'+'vec3\x20refle'+'ctionDir,\x20'+'\x0a\x20\x20\x20\x20float'+'\x20gloss,\x20\x0a\x20'+'\x20\x20\x20vec3\x20sp'+'ecularity,'+'\x20\x0a\x20\x20\x20\x20vec3'+'\x20vertexNor'+'mal,\x20\x0a\x20\x20\x20\x20'+'mat3\x20tbn\x0a#'+'if\x20defined'+'(LIT_IRIDE'+'SCENCE)\x0a\x20\x20'+'\x20\x20vec3\x20iri'+'descenceFr'+'esnel,\x20\x0a\x20\x20'+'\x20\x20float\x20ir'+'idescenceI'+'ntensity\x0a#'+'endif\x0a)\x20{\x0a'+'\x0a\x20\x20\x20\x20//\x20di'+'rectional\x20'+'lightmap\x0a\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_S'+'PECULAR)\x20&'+'&\x20defined('+'LIT_DIR_LI'+'GHTMAP)\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(dot(dir,\x20'+'dir)\x20<\x200.0'+'001)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dDiffus'+'eLight\x20+=\x20'+'lightmap;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20vligh'+'t\x20=\x20satura'+'te(dot(dir'+',\x20-vertexN'+'ormal));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20fli'+'ght\x20=\x20satu'+'rate(dot(d'+'ir,\x20-world'+'Normal));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20nl'+'ight\x20=\x20(fl'+'ight\x20/\x20max'+'(vlight,\x200'+'.01))\x20*\x200.'+'5;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dDif'+'fuseLight\x20'+'+=\x20lightma'+'p\x20*\x20nlight'+'\x20*\x202.0;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20vec3\x20half'+'Dir\x20=\x20norm'+'alize(-dir'+'\x20+\x20viewDir'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'specularLi'+'ght\x20=\x20ligh'+'tmap\x20*\x20get'+'LightSpecu'+'lar(halfDi'+'r,\x20reflect'+'ionDir,\x20wo'+'rldNormal,'+'\x20viewDir,\x20'+'dir,\x20gloss'+',\x20tbn);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'_FRESNEL\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20spec'+'ularLight\x20'+'*=\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+('\x20\x20\x20\x20getFre'+'snel(dot(v'+'iewDir,\x20ha'+'lfDir),\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'loss,\x20\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20spe'+'cularity\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_IRIDESCEN'+'CE)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20,\x20irid'+'escenceFre'+'snel,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20irid'+'escenceInt'+'ensity\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dSpec'+'ularLight\x20'+'+=\x20specula'+'rLight;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20#else\x20/'+'/\x20non-dire'+'ctional\x20li'+'ghtmap\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20dDif'+'fuseLight\x20'+'+=\x20lightma'+'p;\x0a\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a'),SP='\x0a\x0a#ifdef\x20S'+'TD_LIGHTMA'+'P_DIR\x0a\x20\x20\x20\x20'+'vec3\x20dLigh'+'tmapDir;\x0a\x20'+'\x20\x20\x20uniform'+'\x20sampler2D'+'\x20texture_d'+'irLightMap'+';\x0a#endif\x0a\x0a'+'void\x20getLi'+'ghtMap()\x20{'+'\x0a\x0a\x20\x20\x20\x20dLig'+'htmap\x20=\x20ve'+'c3(1.0);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_LIGHT'+'_TEXTURE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dLi'+'ghtmap\x20*=\x20'+'{STD_LIGHT'+'_TEXTURE_D'+'ECODE}(tex'+'ture2DBias'+'({STD_LIGH'+'T_TEXTURE_'+'NAME},\x20{ST'+'D_LIGHT_TE'+'XTURE_UV},'+'\x20textureBi'+'as)).{STD_'+'LIGHT_TEXT'+'URE_CHANNE'+'L};\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_LIGHTM'+'AP_DIR\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20dir\x20=\x20'+'texture2DB'+'ias(textur'+'e_dirLight'+'Map,\x20{STD_'+'LIGHT_TEXT'+'URE_UV},\x20t'+'extureBias'+').xyz\x20*\x202.'+'0\x20-\x201.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20dir'+'Dot\x20=\x20dot('+'dir,\x20dir);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dLightm'+'apDir\x20=\x20(d'+'irDot\x20>\x200.'+'001)\x20?\x20dir'+'\x20/\x20sqrt(di'+'rDot)\x20:\x20ve'+'c3(0.0);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_LIGHT_VER'+'TEX\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dLightma'+'p\x20*=\x20satur'+'ate(vVerte'+'xColor.{ST'+'D_LIGHT_VE'+'RTEX_CHANN'+'EL});\x0a\x20\x20\x20\x20'+'#endif\x0a}\x0a',yP='\x0a//\x20Anisot'+'ropic\x20GGX\x0a'+'float\x20calc'+'LightSpecu'+'lar(float\x20'+'gloss,\x20vec'+'3\x20worldNor'+'mal,\x20vec3\x20'+'viewDir,\x20v'+'ec3\x20h,\x20vec'+'3\x20lightDir'+'Norm,\x20mat3'+'\x20tbn)\x20{\x0a\x20\x20'+'\x20\x20float\x20PI'+'\x20=\x203.14159'+'2653589793'+';\x0a\x20\x20\x20\x20floa'+'t\x20roughnes'+'s\x20=\x20max((1'+'.0\x20-\x20gloss'+')\x20*\x20(1.0\x20-'+'\x20gloss),\x200'+'.001);\x0a\x20\x20\x20'+'\x20float\x20alp'+'haRoughnes'+'s\x20=\x20roughn'+'ess\x20*\x20roug'+'hness;\x0a\x20\x20\x20'+'\x20float\x20ani'+'sotropy\x20=\x20'+'dAnisotrop'+'y;\x0a\x20\x20\x20\x20vec'+'2\x20directio'+'n\x20=\x20dAniso'+'tropyRotat'+'ion;\x0a\x0a\x20\x20\x20\x20'+'float\x20at\x20='+'\x20mix(alpha'+'Roughness,'+'\x201.0,\x20anis'+'otropy\x20*\x20a'+'nisotropy)'+';\x0a\x20\x20\x20\x20floa'+'t\x20ab\x20=\x20cla'+'mp(alphaRo'+'ughness,\x200'+'.001,\x201.0)'+';\x0a\x0a\x20\x20\x20\x20vec'+'3\x20anisotro'+'picT\x20=\x20nor'+'malize(tbn'+'\x20*\x20vec3(di'+'rection,\x200'+'.0));\x0a\x20\x20\x20\x20'+'vec3\x20aniso'+'tropicB\x20=\x20'+'normalize('+'cross(tbn['+'2],\x20anisot'+'ropicT));\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20NoH\x20=\x20dot'+'(worldNorm'+'al,\x20h);\x0a\x20\x20'+'\x20\x20float\x20To'+'H\x20=\x20dot(an'+'isotropicT'+',\x20h);\x0a\x20\x20\x20\x20'+'float\x20BoH\x20'+'=\x20dot(anis'+'otropicB,\x20'+'h);\x0a\x0a\x20\x20\x20\x20f'+'loat\x20a2\x20=\x20'+'at\x20*\x20ab;\x0a\x20'+'\x20\x20\x20vec3\x20v\x20'+'=\x20vec3(ab\x20'+'*\x20ToH,\x20at\x20'+'*\x20BoH,\x20a2\x20'+'*\x20NoH);\x0a\x20\x20'+'\x20\x20float\x20v2'+'\x20=\x20dot(v,\x20'+'v);\x0a\x20\x20\x20\x20fl'+'oat\x20w2\x20=\x20a'+'2\x20/\x20v2;\x0a\x20\x20'+'\x20\x20float\x20D\x20'+'=\x20a2\x20*\x20w2\x20'+'*\x20w2\x20*\x20(1.'+'0\x20/\x20PI);\x0a\x0a'+'\x20\x20\x20\x20float\x20'+'ToV\x20=\x20dot('+'anisotropi'+'cT,\x20viewDi'+'r);\x0a\x20\x20\x20\x20fl'+'oat\x20BoV\x20=\x20'+'dot(anisot'+'ropicB,\x20vi'+'ewDir);\x0a\x20\x20'+'\x20\x20float\x20To'+'L\x20=\x20dot(an'+'isotropicT'+(',\x20-lightDi'+'rNorm);\x0a\x20\x20'+'\x20\x20float\x20Bo'+'L\x20=\x20dot(an'+'isotropicB'+',\x20-lightDi'+'rNorm);\x0a\x20\x20'+'\x20\x20float\x20No'+'V\x20=\x20dot(wo'+'rldNormal,'+'\x20viewDir);'+'\x0a\x20\x20\x20\x20float'+'\x20NoL\x20=\x20dot'+'(worldNorm'+'al,\x20-light'+'DirNorm);\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20lambdaV\x20='+'\x20NoL\x20*\x20len'+'gth(vec3(a'+'t\x20*\x20ToV,\x20a'+'b\x20*\x20BoV,\x20N'+'oV));\x0a\x20\x20\x20\x20'+'float\x20lamb'+'daL\x20=\x20NoV\x20'+'*\x20length(v'+'ec3(at\x20*\x20T'+'oL,\x20ab\x20*\x20B'+'oL,\x20NoL));'+'\x0a\x20\x20\x20\x20float'+'\x20G\x20=\x200.5\x20/'+'\x20(lambdaV\x20'+'+\x20lambdaL)'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20D\x20*\x20G;'+'\x0a}\x0a\x0afloat\x20'+'getLightSp'+'ecular(vec'+'3\x20h,\x20vec3\x20'+'reflDir,\x20v'+'ec3\x20worldN'+'ormal,\x20vec'+'3\x20viewDir,'+'\x20vec3\x20ligh'+'tDirNorm,\x20'+'float\x20glos'+'s,\x20mat3\x20tb'+'n)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20calc'+'LightSpecu'+'lar(gloss,'+'\x20worldNorm'+'al,\x20viewDi'+'r,\x20h,\x20ligh'+'tDirNorm,\x20'+'tbn);\x0a}\x0a'),vP='\x0a//\x20Energy'+'-conservin'+'g\x20(hopeful'+'ly)\x20Blinn-'+'Phong\x0afloa'+'t\x20calcLigh'+'tSpecular('+'float\x20glos'+'s,\x20vec3\x20wo'+'rldNormal,'+'\x20vec3\x20h)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20nh\x20=\x20max('+'\x20dot(\x20h,\x20w'+'orldNormal'+'\x20),\x200.0\x20);'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20specPow\x20'+'=\x20exp2(glo'+'ss\x20*\x2011.0)'+';\x20//\x20gloss'+'iness\x20is\x20l'+'inear,\x20pow'+'er\x20is\x20not;'+'\x200\x20-\x202048\x0a'+'\x0a\x20\x20\x20\x20//\x20Ha'+'ck:\x20On\x20Mac'+'\x20OS\x20X,\x20cal'+'ling\x20pow\x20w'+'ith\x20zero\x20f'+'or\x20the\x20exp'+'onent\x20gene'+'rates\x20hide'+'ous\x20artifa'+'cts\x20so\x20bia'+'s\x20up\x20a\x20lit'+'tle\x0a\x20\x20\x20\x20sp'+'ecPow\x20=\x20ma'+'x(specPow,'+'\x200.0001);\x0a'+'\x0a\x20\x20\x20\x20retur'+'n\x20pow(nh,\x20'+'specPow)\x20*'+'\x20(specPow\x20'+'+\x202.0)\x20/\x208'+'.0;\x0a}\x0a\x0aflo'+'at\x20getLigh'+'tSpecular('+'vec3\x20h,\x20ve'+'c3\x20reflDir'+',\x20vec3\x20wor'+'ldNormal,\x20'+'vec3\x20viewD'+'ir,\x20vec3\x20l'+'ightDirNor'+'m,\x20float\x20g'+'loss,\x20mat3'+'\x20tbn)\x20{\x0a\x20\x20'+'\x20\x20return\x20c'+'alcLightSp'+'ecular(glo'+'ss,\x20worldN'+'ormal,\x20h);'+'\x0a}\x0a',xP='\x0a\x0afloat\x20sh'+'eenD(vec3\x20'+'normal,\x20ve'+'c3\x20h,\x20floa'+'t\x20roughnes'+'s)\x20{\x0a\x20\x20\x20\x20c'+'onst\x20float'+'\x20PI\x20=\x203.14'+'1592653589'+'793;\x0a\x20\x20\x20\x20f'+'loat\x20invR\x20'+'=\x201.0\x20/\x20(r'+'oughness\x20*'+'\x20roughness'+');\x0a\x20\x20\x20\x20flo'+'at\x20cos2h\x20='+'\x20max(dot(n'+'ormal,\x20h),'+'\x200.0);\x0a\x20\x20\x20'+'\x20cos2h\x20*=\x20'+'cos2h;\x0a\x20\x20\x20'+'\x20float\x20sin'+'2h\x20=\x20max(1'+'.0\x20-\x20cos2h'+',\x200.007812'+'5);\x0a\x20\x20\x20\x20re'+'turn\x20(2.0\x20'+'+\x20invR)\x20*\x20'+'pow(sin2h,'+'\x20invR\x20*\x200.'+'5)\x20/\x20(2.0\x20'+'*\x20PI);\x0a}\x0a\x0a'+'float\x20shee'+'nV(vec3\x20no'+'rmal,\x20vec3'+'\x20viewDir,\x20'+'vec3\x20light'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20NoV\x20=\x20'+'max(dot(no'+'rmal,\x20view'+'Dir),\x200.00'+'0001);\x0a\x20\x20\x20'+'\x20float\x20NoL'+'\x20=\x20max(dot'+'(normal,\x20l'+'ight),\x200.0'+'00001);\x0a\x20\x20'+'\x20\x20return\x201'+'.0\x20/\x20(4.0\x20'+'*\x20(NoL\x20+\x20N'+'oV\x20-\x20NoL\x20*'+'\x20NoV));\x0a}\x0a'+'\x0afloat\x20get'+'LightSpecu'+'larSheen(v'+'ec3\x20h,\x20vec'+'3\x20worldNor'+'mal,\x20vec3\x20'+'viewDir,\x20v'+'ec3\x20lightD'+'irNorm,\x20fl'+'oat\x20sheenG'+'loss)\x20{\x0a\x20\x20'+'\x20\x20float\x20D\x20'+'=\x20sheenD(w'+'orldNormal'+',\x20h,\x20sheen'+'Gloss);\x0a\x20\x20'+'\x20\x20float\x20V\x20'+'=\x20sheenV(w'+'orldNormal'+',\x20viewDir,'+'\x20-lightDir'+'Norm);\x0a\x20\x20\x20'+'\x20return\x20D\x20'+'*\x20V;\x0a}\x0a',TP='\x0a\x0a#ifndef\x20'+'LINEARIZE_'+'DEPTH\x0a#def'+'ine\x20LINEAR'+'IZE_DEPTH\x0a'+'\x0afloat\x20lin'+'earizeDept'+'hWithParam'+'s(float\x20z,'+'\x20vec4\x20came'+'raParams)\x20'+'{\x0a\x20\x20\x20\x20if\x20('+'cameraPara'+'ms.w\x20==\x200.'+'0)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20(c'+'ameraParam'+'s.z\x20*\x20came'+'raParams.y'+')\x20/\x20(camer'+'aParams.y\x20'+'+\x20z\x20*\x20(cam'+'eraParams.'+'z\x20-\x20camera'+'Params.y))'+';\x0a\x20\x20\x20\x20else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20came'+'raParams.z'+'\x20+\x20z\x20*\x20(ca'+'meraParams'+'.y\x20-\x20camer'+'aParams.z)'+';\x0a}\x0a\x0a#ifnd'+'ef\x20CAMERAP'+'LANES\x0a\x20\x20\x20\x20'+'#define\x20CA'+'MERAPLANES'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20vec4\x20ca'+'mera_param'+'s;\x20//\x20x:\x201'+'\x20/\x20camera_'+'far,\x20\x20\x20\x20\x20\x20'+'y:\x20camera_'+'far,\x20\x20\x20\x20\x20z'+':\x20camera_n'+'ear,\x20\x20\x20\x20\x20\x20'+'\x20\x20w:\x20is_or'+'tho\x0a#endif'+'\x0a\x0afloat\x20li'+'nearizeDep'+'th(float\x20z'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20linea'+'rizeDepthW'+'ithParams('+'z,\x20camera_'+'params);\x0a}'+'\x0a#endif\x0a',wP='\x0avoid\x20eval'+'uateBacken'+'d()\x20{\x0a\x0a\x20\x20\x20'+'\x20//\x20apply\x20'+'SSAO\x20durin'+'g\x20lighting'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIT_SSAO'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_ao\x20'+'*=\x20texture'+'2DLod(ssao'+'Texture,\x20g'+'l_FragCoor'+'d.xy\x20*\x20ssa'+'oTextureSi'+'zeInv,\x200.0'+').r;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20//\x20transf'+'orm\x20tangen'+'t\x20space\x20no'+'rmals\x20to\x20w'+'orld\x20space'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIT_NEED'+'S_NORMAL\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SP'+'ECULAR\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'etReflDir('+'litArgs_wo'+'rldNormal,'+'\x20dViewDirW'+',\x20litArgs_'+'gloss,\x20dTB'+'N);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20ccReflDir'+'W\x20=\x20normal'+'ize(-refle'+'ct(dViewDi'+'rW,\x20litArg'+'s_clearcoa'+'t_worldNor'+'mal));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'PECULAR_OR'+'_REFLECTIO'+'N\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_METALNESS'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20f'+'0\x20=\x201.0\x20/\x20'+'litArgs_io'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20f0\x20=\x20'+'(f0\x20-\x201.0)'+'\x20/\x20(f0\x20+\x201'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20f0\x20'+'*=\x20f0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_spe'+'cularity\x20='+'\x20getSpecul'+'arModulate'+'(litArgs_s'+'pecularity'+',\x20litArgs_'+'albedo,\x20li'+'tArgs_meta'+'lness,\x20f0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_albedo\x20='+'\x20getAlbedo'+'Modulate(l'+'itArgs_alb'+'edo,\x20litAr'+'gs_metalne'+'ss);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'IRIDESCENC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20i'+'ridescence'+'Fresnel\x20=\x20'+'getIridesc'+('ence(satur'+'ate(dot(dV'+'iewDirW,\x20l'+'itArgs_wor'+'ldNormal))'+',\x20litArgs_'+'specularit'+'y,\x20litArgs'+'_iridescen'+'ce_thickne'+'ss);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20//\x20a'+'mbient\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_ADD_AMBI'+'ENT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20addAmbie'+'nt(litArgs'+'_worldNorm'+'al);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LAR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dDif'+'fuseLight\x20'+'=\x20dDiffuse'+'Light\x20*\x20(1'+'.0\x20-\x20litAr'+'gs_specula'+'rity);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20move\x20a'+'mbient\x20col'+'or\x20out\x20of\x20'+'diffuse\x20(u'+'sed\x20by\x20Lig'+'htmapper,\x20'+'to\x20multipl'+'y\x20ambient\x20'+'color\x20by\x20a'+'ccumulated'+'\x20AO)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SEPARA'+'TE_AMBIENT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20dA'+'mbientLigh'+'t\x20=\x20dDiffu'+'seLight;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dDiffuseL'+'ight\x20=\x20vec'+'3(0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'ndef\x20LIT_O'+'LD_AMBIENT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20d'+'DiffuseLig'+'ht\x20*=\x20mate'+'rial_ambie'+'nt;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_AO\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifndef\x20'+'LIT_OCCLUD'+'E_DIRECT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20occludeDi'+'ffuse(litA'+'rgs_ao);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_LIGHTMAP\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ad'+'dLightMap('+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs'+'_lightmap,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_lightmap'+'Dir,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_worl'+'dNormal,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dViewDir'+'W,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dRef'+'lDirW,\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('litArgs_gl'+'oss,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_spec'+'ularity,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dVertexN'+'ormalW,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dTBN\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_I'+'RIDESCENCE'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20,\x20irid'+'escenceFre'+'snel,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_irid'+'escence_in'+'tensity\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20);\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_LIGHTING\x20'+'||\x20LIT_REF'+'LECTIONS\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_R'+'EFLECTIONS'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_CLEAR'+'COAT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20addReflec'+'tionCC(ccR'+'eflDirW,\x20l'+'itArgs_cle'+'arcoat_glo'+'ss);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LAR_FRESNE'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ccFresne'+'l\x20=\x20getFre'+'snelCC(dot'+'(dViewDirW'+',\x20litArgs_'+'clearcoat_'+'worldNorma'+'l));\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20ccRef'+'lection\x20*='+'\x20ccFresnel'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccFres'+'nel\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_SPE'+'CULARITY_F'+'ACTOR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ccReflec'+'tion\x20*=\x20li'+'tArgs_spec'+'ularityFac'+'tor;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SH'+'EEN\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'addReflect'+'ionSheen(l'+'itArgs_wor'+'ldNormal,\x20'+'dViewDirW,'+'\x20litArgs_s'+'heen_gloss'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20Fr')+('esnel\x20has\x20'+'to\x20be\x20appl'+'ied\x20to\x20ref'+'lections\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20addReflec'+'tion(dRefl'+'DirW,\x20litA'+'rgs_gloss)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_FRES'+'NEL_MODEL\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dRe'+'flection.r'+'gb\x20*=\x20getF'+'resnel(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20do'+'t(dViewDir'+'W,\x20litArgs'+'_worldNorm'+'al),\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_gloss,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'specularit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20defined('+'LIT_IRIDES'+'CENCE)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20,\x20i'+'ridescence'+'Fresnel,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_iri'+'descence_i'+'ntensity\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dReflecti'+'on.rgb\x20*=\x20'+'litArgs_sp'+'ecularity;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LARITY_FAC'+'TOR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dReflectio'+'n.rgb\x20*=\x20l'+'itArgs_spe'+'cularityFa'+'ctor;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20ARE'+'A_LIGHTS\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20specul'+'ar\x20has\x20to\x20'+'be\x20accumul'+'ated\x20diffe'+'rently\x20if\x20'+'we\x20want\x20ar'+'ea\x20lights\x20'+'to\x20look\x20co'+'rrect\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dS'+'pecularLig'+'ht\x20*=\x20litA'+'rgs_specul'+'arity;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULAR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20e'+'valuate\x20ma'+'terial\x20bas'+'ed\x20area\x20li'+'ghts\x20data,')+('\x20shared\x20by'+'\x20all\x20area\x20'+'lights\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20calcLTC'+'LightValue'+'s(litArgs_'+'gloss,\x20lit'+'Args_world'+'Normal,\x20dV'+'iewDirW,\x20l'+'itArgs_spe'+'cularity,\x20'+'litArgs_cl'+'earcoat_gl'+'oss,\x20litAr'+'gs_clearco'+'at_worldNo'+'rmal,\x20litA'+'rgs_clearc'+'oat_specul'+'arity);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20LOOP\x20-\x20e'+'valuate\x20al'+'l\x20non-clus'+'tered\x20ligh'+'ts\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'GHT_COUNT\x20'+'>\x200\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22ligh'+'tEvaluatio'+'nPS,\x20LIGHT'+'_COUNT\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20clust'+'ered\x20light'+'ing\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLUSTER'+'ED_LIGHTS\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20addClust'+'eredLights'+'(litArgs_w'+'orldNormal'+',\x20dViewDir'+'W,\x20dReflDi'+'rW,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_CLEA'+'RCOAT)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20ccReflDir'+'W,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_gl'+'oss,\x20litAr'+'gs_specula'+'rity,\x20dVer'+'texNormalW'+',\x20dTBN,\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_IRIDESCEN'+'CE)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ir'+'idescenceF'+'resnel,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_clearco'+'at_worldNo'+'rmal,\x20litA'+'rgs_clearc'+'oat_gloss,'+'\x20litArgs_s'+'heen_gloss'+',\x20litArgs_'+'iridescenc'+'e_intensit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20);\x0a\x20\x20\x20')+('\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20AR'+'EA_LIGHTS\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_CLEARC'+'OAT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20specula'+'r\x20has\x20to\x20b'+'e\x20accumula'+'ted\x20differ'+'ently\x20if\x20w'+'e\x20want\x20are'+'a\x20lights\x20t'+'o\x20look\x20cor'+'rect\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_c'+'learcoat_s'+'pecularity'+'\x20=\x201.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULAR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_specul'+'arity\x20=\x20ve'+'c3(1);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_REFRACTI'+'ON\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20addRe'+'fraction(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_worldN'+'ormal,\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dViewD'+'irW,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'thickness,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_glos'+'s,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_sp'+'ecularity,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_albe'+'do,\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_t'+'ransmissio'+'n,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_ior'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_disp'+'ersion\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_I'+'RIDESCENCE'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20,\x20irides'+'cenceFresn'+'el,\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_iridesc'+'ence_inten'+'sity\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20app'+'ly\x20ambient'+'\x20occlusion'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIT_AO\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_OC')+('CLUDE_DIRE'+'CT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20occlu'+'deDiffuse('+'litArgs_ao'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIT_OCCLU'+'DE_SPECULA'+'R\x20!=\x20NONE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20occludeS'+'pecular(li'+'tArgs_glos'+'s,\x20litArgs'+'_ao,\x20litAr'+'gs_worldNo'+'rmal,\x20dVie'+'wDirW);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'SPECULARIT'+'Y_FACTOR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dSp'+'ecularLigh'+'t\x20*=\x20litAr'+'gs_specula'+'rityFactor'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'f\x20!defined'+'(LIT_OPACI'+'TY_FADES_S'+'PECULAR)\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIT_BLEN'+'D_TYPE\x20==\x20'+'NORMAL\x20||\x20'+'LIT_BLEND_'+'TYPE\x20==\x20PR'+'EMULTIPLIE'+'D\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20specLum\x20='+'\x20dot((dSpe'+'cularLight'+'\x20+\x20dReflec'+'tion.rgb\x20*'+'\x20dReflecti'+'on.a),\x20vec'+'3(\x200.2126,'+'\x200.7152,\x200'+'.0722\x20));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLEARCO'+'AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'pecLum\x20+=\x20'+'dot(ccSpec'+'ularLight\x20'+'*\x20litArgs_'+'clearcoat_'+'specularit'+'y\x20+\x20ccRefl'+'ection\x20*\x20l'+'itArgs_cle'+'arcoat_spe'+'cularity,\x20'+'vec3(\x200.21'+'26,\x200.7152'+',\x200.0722\x20)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_opacity\x20'+'=\x20clamp(li'+'tArgs_opac'+'ity\x20+\x20gamm'+'aCorrectIn'+'put(specLu'+'m),\x200.0,\x201'+'.0);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_op'+'acity\x20*=\x20m'+'aterial_al'+'phaFade;\x0a\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20//\x20e'+'nd\x20chunks\x20'+'-\x20when\x20bak'+'ing\x20lightm'+'ap\x0a\x20\x20\x20\x20#if'+'def\x20LIT_LI')+('GHTMAP_BAK'+'ING\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_LIGHTMA'+'P_BAKING_C'+'OLOR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22bak'+'eLmEndPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_LIGHTM'+'AP_BAKING_'+'DIR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22bake'+'DirLmEndPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20en'+'d\x20chunks\x20-'+'\x20in\x20all\x20ot'+'her\x20cases\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22en'+'dPS\x22\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22outputA'+'lphaPS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_MSDF\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_FragColor'+'\x20=\x20applyMs'+'df(gl_Frag'+'Color);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22output'+'PS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22de'+'bugOutputP'+'S\x22\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'HADOW_CATC'+'HER\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20outpu'+'t\x20when\x20the'+'\x20shadow\x20ca'+'tcher\x20is\x20e'+'nabled\x20-\x20a'+'ccumulated'+'\x20shadows\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20gl_'+'FragColor.'+'rgb\x20=\x20vec3'+'(dShadowCa'+'tcher);\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a'),EP='\x0a\x0a//\x20globa'+'ls\x0avec3\x20sR'+'eflection;'+'\x0avec3\x20dVer'+'texNormalW'+';\x0avec3\x20dTa'+'ngentW;\x0ave'+'c3\x20dBinorm'+'alW;\x0avec3\x20'+'dViewDirW;'+'\x0avec3\x20dRef'+'lDirW;\x0avec'+'3\x20ccReflDi'+'rW;\x0a\x0a//\x20Pe'+'r-light\x20te'+'mporaries\x0a'+'vec3\x20dLigh'+'tDirNormW;'+'\x0afloat\x20dAt'+'ten;\x0a\x0a//\x20O'+'utputs\x0amat'+'3\x20dTBN;\x0ave'+'c4\x20dReflec'+'tion;\x0avec3'+'\x20dDiffuseL'+'ight;\x0avec3'+'\x20dSpecular'+'Light;\x0aflo'+'at\x20ccFresn'+'el;\x0avec3\x20c'+'cReflectio'+'n;\x0avec3\x20cc'+'SpecularLi'+'ght;\x0afloat'+'\x20ccSpecula'+'rityNoFres'+';\x0avec3\x20sSp'+'ecularLigh'+'t;\x0a\x0a//\x20FRA'+'GMENT\x20SHAD'+'ER\x20INPUTS:'+'\x20UNIFORMS\x0a'+'\x0a#ifdef\x20LI'+'T_DISPERSI'+'ON\x0a\x20\x20\x20\x20uni'+'form\x20float'+'\x20material_'+'dispersion'+';\x0a#endif\x0a\x0a'+'#ifndef\x20LI'+'T_OPACITY_'+'FADES_SPEC'+'ULAR\x0a\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20materia'+'l_alphaFad'+'e;\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_SSAO\x0a\x20\x20\x20'+'\x20uniform\x20s'+'ampler2D\x20s'+'saoTexture'+';\x0a\x20\x20\x20\x20unif'+'orm\x20vec2\x20s'+'saoTexture'+'SizeInv;\x0a#'+'endif\x0a\x0a//\x20'+'lighting\x20a'+'nd\x20shadowi'+'ng\x20declara'+'tions\x0a\x0a#if'+'def\x20LIT_SH'+'ADOW_CATCH'+'ER\x0a\x20\x20\x20\x20//\x20'+'a\x20variable'+'\x20to\x20accumu'+'late\x20shado'+'ws\x20for\x20sha'+'dow\x20catche'+'r\x20material'+'s\x0a\x20\x20\x20\x20floa'+'t\x20dShadowC'+'atcher\x20=\x201'+'.0;\x0a#endif'+'\x0a\x0a//\x20LOOP\x20'+'-\x20uniform\x20'+'declaratio'+'ns\x20for\x20all'+'\x20non-clust'+'ered\x20light'+'s\x0a#if\x20LIGH'+'T_COUNT\x20>\x20'+'0\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22ligh'+'tDeclarati'+'onPS,\x20LIGH'+'T_COUNT\x22\x0a#'+'endif\x0a\x0a#if'+'def\x20LIT_SP'+'ECULAR\x0a\x20\x20\x20'+('\x20#if\x20LIT_F'+'RESNEL_MOD'+'EL\x20==\x20NONE'+'\x20&&\x20!defin'+'ed(LIT_REF'+'LECTIONS)\x20'+'&&\x20!define'+'d(LIT_DIFF'+'USE_MAP)\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#d'+'efine\x20LIT_'+'OLD_AMBIEN'+'T\x0a\x20\x20\x20\x20#end'+'if\x0a#endif\x0a'+'\x0a//\x20lightm'+'ap\x20baking\x0a'+'#ifdef\x20STD'+'_LIGHTMAP_'+'DIR\x0a\x20\x20\x20\x20un'+'iform\x20floa'+'t\x20bakeDir;'+'\x0a#endif\x0a#i'+'fdef\x20LIT_L'+'IGHTMAP_BA'+'KING_ADD_A'+'MBIENT\x0a\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20ambie'+'ntBakeOccl'+'usionContr'+'ast;\x0a\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20ambient'+'BakeOcclus'+'ionBrightn'+'ess;\x0a#endi'+'f\x0a'),bP='\x0a\x0avoid\x20mai'+'n(void)\x20{\x0a'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litUs'+'erMainStar'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'dReflectio'+'n\x20=\x20vec4(0'+');\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ccS'+'pecularLig'+'ht\x20=\x20vec3('+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20ccReflec'+'tion\x20=\x20vec'+'3(0);\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIT_'+'NONE_SLICE'+'_MODE\x20==\x20S'+'LICED\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22startN'+'ineSlicedP'+'S\x22\x0a\x20\x20\x20\x20#el'+'if\x20LIT_NON'+'E_SLICE_MO'+'DE\x20==\x20TILE'+'D\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'startNineS'+'licedTiled'+'PS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_NEEDS_NOR'+'MAL\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dVertexN'+'ormalW\x20=\x20n'+'ormalize(v'+'NormalW);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'TANGENTS\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20defin'+'ed(LIT_HEI'+'GHTS)\x20||\x20d'+'efined(LIT'+'_USE_NORMA'+'LS)\x20||\x20def'+'ined(LIT_U'+'SE_CLEARCO'+'AT_NORMALS'+')\x20||\x20defin'+'ed(LIT_GGX'+'_SPECULAR)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dTa'+'ngentW\x20=\x20v'+'TangentW;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dBin'+'ormalW\x20=\x20v'+'BinormalW;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20getVie'+'wDir();\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_TB'+'N\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getTBN'+'(dTangentW'+',\x20dBinorma'+'lW,\x20dVerte'+'xNormalW);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_TWO_S'+'IDED_LIGHT'+'ING\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'handleTwoS'+'idedLighti'+'ng();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20//\x20i'+'nvoke\x20fron'+'tend\x20funct'+'ions\x0a\x20\x20\x20\x20e'+'valuateFro'+'ntend();\x0a\x0a'+('\x20\x20\x20\x20#inclu'+'de\x20\x22debugP'+'rocessFron'+'tendPS\x22\x0a\x0a\x20'+'\x20\x20\x20evaluat'+'eBackend()'+';\x0a\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lit'+'UserMainEn'+'dPS\x22\x0a}\x0a'),AP='\x0a\x0a#ifdef\x20L'+'IT_NEEDS_N'+'ORMAL\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'cubeMapRot'+'atePS\x22\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22cubeMapPr'+'ojectPS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22envProc'+'PS\x22\x0a#endif'+'\x0a\x0a//\x20-----'+'\x20specular\x20'+'or\x20reflect'+'ions\x20-----'+'\x0a#ifdef\x20LI'+'T_SPECULAR'+'_OR_REFLEC'+'TION\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'METALNESS\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22me'+'talnessMod'+'ulatePS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#if\x20L'+'IT_FRESNEL'+'_MODEL\x20==\x20'+'SCHLICK\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22fres'+'nelSchlick'+'PS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_IRIDESCEN'+'CE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22iridescen'+'ceDiffract'+'ionPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0a//\x20-'+'----\x20ambie'+'nt\x20occlusi'+'on\x20-----\x0a#'+'ifdef\x20LIT_'+'AO\x0a\x20\x20\x20\x20#in'+'clude\x20\x22aoD'+'iffuseOccP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22aoS'+'pecOccPS\x22\x0a'+'#endif\x0a\x0a#i'+'f\x20LIT_REFL'+'ECTION_SOU'+'RCE\x20==\x20ENV'+'ATLASHQ\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22envAtlas'+'PS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22re'+'flectionEn'+'vHQPS\x22\x0a#el'+'if\x20LIT_REF'+'LECTION_SO'+'URCE\x20==\x20EN'+'VATLAS\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22envAtlasP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ref'+'lectionEnv'+'PS\x22\x0a#elif\x20'+'LIT_REFLEC'+'TION_SOURC'+'E\x20==\x20CUBEM'+'AP\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ref'+'lectionCub'+'ePS\x22\x0a#elif'+'\x20LIT_REFLE'+'CTION_SOUR'+'CE\x20==\x20SPHE'+'REMAP\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'reflection'+'SpherePS\x22\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_R'+'EFLECTIONS'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIT_CLEA'+'RCOAT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22reflec'+'tionCCPS\x22\x0a'+'\x20\x20\x20\x20#endif'+('\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_SHE'+'EN\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22reflectio'+'nSheenPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a#endif\x0a\x0a#'+'ifdef\x20LIT_'+'REFRACTION'+'\x0a\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_DYNAMIC_R'+'EFRACTION)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22r'+'efractionD'+'ynamicPS\x22\x0a'+'\x20\x20\x20\x20#elif\x20'+'defined(LI'+'T_REFLECTI'+'ONS)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22refract'+'ionCubePS\x22'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a'+'#ifdef\x20LIT'+'_SHEEN\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22lightShee'+'nPS\x22\x0a#endi'+'f\x0a\x0auniform'+'\x20vec3\x20mate'+'rial_ambie'+'nt;\x0a\x0a#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'LIGHTING\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_GG'+'X_SPECULAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22lightSp'+'ecularAnis'+'oGGXPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22lightS'+'pecularBli'+'nnPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a'+'#include\x20\x22'+'combinePS\x22'+'\x0a\x0a#ifdef\x20L'+'IT_LIGHTMA'+'P\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22ligh'+'tmapAddPS\x22'+'\x0a#endif\x0a\x0a#'+'ifdef\x20LIT_'+'ADD_AMBIEN'+'T\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22ambi'+'entPS\x22\x0a#en'+'dif\x0a\x0a#ifde'+'f\x20LIT_MSDF'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22msdfP'+'S\x22\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_NEEDS_NO'+'RMAL\x0a\x20\x20\x20\x20#'+'include\x20\x22v'+'iewDirPS\x22\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LAR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_GGX_SPE'+'CULAR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22re'+'flDirAniso'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'reflDirPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0a//\x20li'+'ghting\x20fun'+'ctionality')+('\x0a#include\x20'+'\x22lightingP'+'S\x22\x0a\x0a'),CP='\x0a\x0a#include'+'\x20\x22basePS\x22\x0a'+'#include\x20\x22'+'sphericalP'+'S\x22\x0a#includ'+'e\x20\x22decodeP'+'S\x22\x0a#includ'+'e\x20\x22gammaPS'+'\x22\x0a#include'+'\x20\x22tonemapp'+'ingPS\x22\x0a#in'+'clude\x20\x22fog'+'PS\x22\x0a\x0a//\x209-'+'slice\x20supp'+'ort\x20code\x0a#'+'if\x20LIT_NON'+'E_SLICE_MO'+'DE\x20==\x20SLIC'+'ED\x0a\x20\x20\x20\x20#in'+'clude\x20\x22bas'+'eNineSlice'+'dPS\x22\x0a#elif'+'\x20LIT_NONE_'+'SLICE_MODE'+'\x20==\x20TILED\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22baseNi'+'neSlicedTi'+'ledPS\x22\x0a#en'+'dif\x0a\x0a//\x20TB'+'N\x0a#ifdef\x20L'+'IT_TBN\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22TBNPS\x22\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_TWO_SI'+'DED_LIGHTI'+'NG\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22twoSidedL'+'ightingPS\x22'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a',PP='\x0a\x0a#include'+'\x20\x22varyings'+'PS\x22\x0a#inclu'+'de\x20\x22litUse'+'rDeclarati'+'onPS\x22\x0a#inc'+'lude\x20\x22fron'+'tendDeclPS'+'\x22\x0a\x0a#if\x20def'+'ined(PICK_'+'PASS)\x20||\x20d'+'efined(PRE'+'PASS_PASS)'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22fron'+'tendCodePS'+'\x22\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22litU'+'serCodePS\x22'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litOt'+'herMainPS\x22'+'\x0a\x0a#elif\x20de'+'fined(SHAD'+'OW_PASS)\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22fronte'+'ndCodePS\x22\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22litUse'+'rCodePS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22litShad'+'owMainPS\x22\x0a'+'\x0a#else\x20//\x20'+'FORWARD_PA'+'SS\x0a\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'tForwardDe'+'clarationP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lit'+'ForwardPre'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22frontend'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litForwa'+'rdPostCode'+'PS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'tForwardBa'+'ckendPS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22litUser'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litForwa'+'rdMainPS\x22\x0a'+'\x0a#endif\x0a\x0a',MP='\x0a\x0a#include'+'\x20\x22varyings'+'VS\x22\x0a\x0a#incl'+'ude\x20\x20\x22litU'+'serDeclara'+'tionVS\x22\x0a\x0a#'+'ifdef\x20VERT'+'EX_COLOR\x0a\x20'+'\x20\x20\x20attribu'+'te\x20vec4\x20ve'+'rtex_color'+';\x0a#endif\x0a\x0a'+'#ifdef\x20NIN'+'ESLICED\x0a\x0a\x20'+'\x20\x20\x20varying'+'\x20vec2\x20vMas'+'k;\x0a\x20\x20\x20\x20var'+'ying\x20vec2\x20'+'vTiledUv;\x0a'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20mediump'+'\x20vec4\x20inne'+'rOffset;\x0a\x20'+'\x20\x20\x20uniform'+'\x20mediump\x20v'+'ec2\x20outerS'+'cale;\x0a\x20\x20\x20\x20'+'uniform\x20me'+'diump\x20vec4'+'\x20atlasRect'+';\x0a\x0a#endif\x0a'+'\x0avec3\x20dPos'+'itionW;\x0ama'+'t4\x20dModelM'+'atrix;\x0a\x0a#i'+'nclude\x20\x22tr'+'ansformCor'+'eVS\x22\x0a\x0a#ifd'+'ef\x20UV0\x0a\x20\x20\x20'+'\x20attribute'+'\x20vec2\x20vert'+'ex_texCoor'+'d0;\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22uv'+'0VS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'UV1\x0a\x20\x20\x20\x20at'+'tribute\x20ve'+'c2\x20vertex_'+'texCoord1;'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22uv1VS'+'\x22\x0a#endif\x0a\x0a'+'\x0a#ifdef\x20LI'+'NEAR_DEPTH'+'\x0a\x20\x20\x20\x20#ifnd'+'ef\x20VIEWMAT'+'RIX\x0a\x20\x20\x20\x20#d'+'efine\x20VIEW'+'MATRIX\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20mat4\x20ma'+'trix_view;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a'+'#include\x20\x22'+'transformV'+'S\x22\x0a\x0a#ifdef'+'\x20NORMALS\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22normalC'+'oreVS\x22\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22normalVS\x22'+'\x0a#endif\x0a\x0a#'+'ifdef\x20TANG'+'ENTS\x0a\x20\x20\x20\x20a'+'ttribute\x20v'+'ec4\x20vertex'+'_tangent;\x0a'+'#endif\x0a\x0a//'+'\x20expand\x20un'+'iforms\x20for'+'\x20uv\x20transf'+'orms\x0a#incl'+'ude\x20\x22uvTra'+'nsformUnif'+'ormsPS,\x20UV'+'_TRANSFORM'+'S_COUNT\x22\x0a\x0a'+'#ifdef\x20MSD'+'F\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22msdf'+'VS\x22\x0a#endif'+'\x0a\x0a#include'+'\x20\x20\x22litUser'+'CodeVS\x22\x0a\x0av'+'oid\x20main(v'+'oid)\x20{\x0a\x0a\x20\x20'+'\x20\x20#include'+('\x20\x22litUserM'+'ainStartVS'+'\x22\x0a\x0a\x20\x20\x20\x20//\x20'+'default\x20po'+'int\x20size\x20t'+'o\x201\x20in\x20cas'+'e\x20the\x20shad'+'er\x20is\x20used'+'\x20with\x20poin'+'ts\x0a\x20\x20\x20\x20gl_'+'PointSize\x20'+'=\x201.0;\x0a\x0a\x20\x20'+'\x20\x20gl_Posit'+'ion\x20=\x20getP'+'osition();'+'\x0a\x20\x20\x20\x20vPosi'+'tionW\x20=\x20ge'+'tWorldPosi'+'tion();\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'NORMALS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vNor'+'malW\x20=\x20get'+'Normal();\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20TANGENT'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vTangentW\x20'+'=\x20normaliz'+'e(dNormalM'+'atrix\x20*\x20ve'+'rtex_tange'+'nt.xyz);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vBi'+'normalW\x20=\x20'+'cross(vNor'+'malW,\x20vTan'+'gentW)\x20*\x20v'+'ertex_tang'+'ent.w;\x0a\x20\x20\x20'+'\x20#elif\x20def'+'ined(GGX_S'+'PECULAR)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vOb'+'jectSpaceU'+'pW\x20=\x20norma'+'lize(dNorm'+'alMatrix\x20*'+'\x20vec3(0,\x201'+',\x200));\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'UV0\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec2\x20uv0'+'\x20=\x20getUv0('+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20UV'+'0_UNMODIFI'+'ED\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vUv0\x20'+'=\x20uv0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20UV1\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20uv1\x20=\x20ge'+'tUv1();\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20UV1_UNM'+'ODIFIED\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'vUv1\x20=\x20uv1'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20//\x20expa'+'nd\x20code\x20fo'+'r\x20uv\x20trans'+'forms\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'uvTransfor'+'mVS,\x20UV_TR'+'ANSFORMS_C'+'OUNT\x22\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20VE'+'RTEX_COLOR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'VertexColo'+'r\x20=\x20vertex'+'_color;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LINEAR_DE'+'PTH\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20linea'+'r\x20depth\x20fr'+'om\x20the\x20wor'+'ldPosition')+(',\x20see\x20getL'+'inearDepth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'LinearDept'+'h\x20=\x20-(matr'+'ix_view\x20*\x20'+'vec4(vPosi'+'tionW,\x201.0'+')).z;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20M'+'SDF\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20unpackMs'+'dfParams()'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'tUserMainE'+'ndVS\x22\x0a}\x0a'),DP='\x0a\x0a#ifdef\x20P'+'ICK_PASS\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22pickPS\x22'+'\x0a#endif\x0a\x0a#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22floatAs'+'UintPS\x22\x0a#e'+'ndif\x0a\x0avoid'+'\x20main(void'+')\x20{\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22l'+'itUserMain'+'StartPS\x22\x0a\x0a'+'\x20\x20\x20\x20evalua'+'teFrontend'+'();\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20PICK'+'_PASS\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20g'+'etPickOutp'+'ut();\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20P'+'REPASS_PAS'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'gl_FragCol'+'or\x20=\x20float'+'2vec4(vLin'+'earDepth);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lit'+'UserMainEn'+'dPS\x22\x0a}\x0a',IP='\x0a\x0a//\x20Surfa'+'ce\x20albedo\x20'+'absorbance'+'\x0avec3\x20litA'+'rgs_albedo'+';\x0a\x0a//\x20Tran'+'sparency\x0af'+'loat\x20litAr'+'gs_opacity'+';\x0a\x0a//\x20Emis'+'sion\x20color'+'\x0avec3\x20litA'+'rgs_emissi'+'on;\x0a\x0a//\x20No'+'rmal\x20direc'+'tion\x20in\x20wo'+'rld\x20space\x0a'+'vec3\x20litAr'+'gs_worldNo'+'rmal;\x0a\x0a//\x20'+'Ambient\x20oc'+'clusion\x20am'+'ount,\x20rang'+'e\x20[0..1]\x0af'+'loat\x20litAr'+'gs_ao;\x0a\x0a//'+'\x20Light\x20map'+'\x20color\x0avec'+'3\x20litArgs_'+'lightmap;\x0a'+'\x0a//\x20Light\x20'+'map\x20direct'+'ion\x0avec3\x20l'+'itArgs_lig'+'htmapDir;\x0a'+'\x0a//\x20Surfac'+'e\x20metalnes'+'s\x20factor,\x20'+'range\x20[0..'+'1]\x0afloat\x20l'+'itArgs_met'+'alness;\x0a\x0a/'+'/\x20The\x20f0\x20s'+'pecularity'+'\x20factor\x0ave'+'c3\x20litArgs'+'_speculari'+'ty;\x0a\x0a//\x20Sp'+'ecularity\x20'+'intensity\x20'+'factor,\x20ra'+'nge\x20[0..1]'+'\x0afloat\x20lit'+'Args_specu'+'larityFact'+'or;\x0a\x0a//\x20Th'+'e\x20microfac'+'et\x20glossin'+'ess\x20factor'+',\x20range\x20[0'+'..1]\x0afloat'+'\x20litArgs_g'+'loss;\x0a\x0a//\x20'+'Glossiness'+'\x20of\x20the\x20sh'+'een\x20layer,'+'\x20range\x20[0.'+'.1]\x0afloat\x20'+'litArgs_sh'+'een_gloss;'+'\x0a\x0a//\x20The\x20c'+'olor\x20of\x20th'+'e\x20f0\x20specu'+'larity\x20fac'+'tor\x20for\x20th'+'e\x20sheen\x20la'+'yer\x0avec3\x20l'+'itArgs_she'+'en_specula'+'rity;\x0a\x0a//\x20'+'Transmissi'+'on\x20factor\x20'+'(refractio'+'n),\x20range\x20'+'[0..1]\x0aflo'+'at\x20litArgs'+'_transmiss'+'ion;\x0a\x0a//\x20U'+'niform\x20thi'+'ckness\x20of\x20'+'medium,\x20us'+'ed\x20by\x20tran'+'smission,\x20'+'range\x20[0..'+'inf]\x0afloat'+'\x20litArgs_t'+'hickness;\x0a'+'\x0a//\x20Index\x20'+'of\x20refract'+'ion\x0afloat\x20'+('litArgs_io'+'r;\x0a\x0a//\x20Dis'+'persion,\x20r'+'ange\x20[0..1'+']\x20typicall'+'y,\x20but\x20can'+'\x20be\x20higher'+'\x0afloat\x20lit'+'Args_dispe'+'rsion;\x0a\x0a//'+'\x20Iridescen'+'ce\x20effect\x20'+'intensity,'+'\x20range\x20[0.'+'.1]\x0afloat\x20'+'litArgs_ir'+'idescence_'+'intensity;'+'\x0a\x0a//\x20Thick'+'ness\x20of\x20th'+'e\x20iridesce'+'nt\x20microfi'+'lm\x20layer,\x20'+'value\x20is\x20i'+'n\x20nanomete'+'rs,\x20range\x20'+'[0..1000]\x0a'+'float\x20litA'+'rgs_irides'+'cence_thic'+'kness;\x0a\x0a//'+'\x20The\x20norma'+'l\x20used\x20for'+'\x20the\x20clear'+'coat\x20layer'+'\x0avec3\x20litA'+'rgs_clearc'+'oat_worldN'+'ormal;\x0a\x0a//'+'\x20Intensity'+'\x20of\x20the\x20cl'+'earcoat\x20la'+'yer,\x20range'+'\x20[0..1]\x0afl'+'oat\x20litArg'+'s_clearcoa'+'t_specular'+'ity;\x0a\x0a//\x20G'+'lossiness\x20'+'of\x20clearco'+'at\x20layer,\x20'+'range\x20[0..'+'1]\x0afloat\x20l'+'itArgs_cle'+'arcoat_glo'+'ss;\x0a\x0a'),LP='\x0a\x0a\x20\x20\x20\x20//\x20g'+'lobal\x20text'+'ure\x20bias\x20f'+'or\x20standar'+'d\x20textures'+'\x0a\x20\x20\x20\x20#if\x20L'+'IT_NONE_SL'+'ICE_MODE\x20='+'=\x20TILED\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20float\x20te'+'xtureBias\x20'+'=\x20-1000.0;'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20texture'+'Bias;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litShade'+'rArgsPS\x22\x0a',RP='\x0a\x0a#if\x20LIGH'+'T_TYPE\x20!=\x20'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20unif'+'orm\x20vec3\x20v'+'iew_positi'+'on;\x0a\x20\x20\x20\x20un'+'iform\x20floa'+'t\x20light_ra'+'dius;\x0a#end'+'if\x0a\x0a#if\x20SH'+'ADOW_TYPE\x20'+'==\x20PCSS_32'+'F\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22line'+'arizeDepth'+'PS\x22\x0a#endif'+'\x0a\x0avoid\x20mai'+'n(void)\x20{\x0a'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litUs'+'erMainStar'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'evaluateFr'+'ontend();\x0a'+'\x0a\x20\x20\x20\x20//\x20us'+'ing\x20non-st'+'andard\x20dep'+'th,\x20i.e\x20gl'+'_FragCoord'+'.z\x0a\x20\x20\x20\x20#if'+'def\x20PERSPE'+'CTIVE_DEPT'+'H\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20dept'+'h\x20=\x20gl_Fra'+'gCoord.z;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20SHADOW_'+'TYPE\x20==\x20PC'+'SS_32F\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20spot/omn'+'i\x20shadows\x20'+'currently\x20'+'use\x20linear'+'\x20depth.\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20TODO:\x20u'+'se\x20perspec'+'tive\x20depth'+'\x20for\x20spot/'+'omni\x20the\x20s'+'ame\x20way\x20as'+'\x20direction'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT_TYPE\x20'+'!=\x20DIRECTI'+'ONAL\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20depth\x20=\x20l'+'inearizeDe'+'pthWithPar'+'ams(depth,'+'\x20camera_pa'+'rams);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20dept'+'h\x20=\x20min(di'+'stance(vie'+'w_position'+',\x20vPositio'+'nW)\x20/\x20ligh'+'t_radius,\x20'+'0.99999);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#d'+'efine\x20MODI'+'FIED_DEPTH'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'\x20SHADOW_TY'+'PE\x20==\x20VSM_'+'16F\x20||\x20SHA'+'DOW_TYPE\x20='+'=\x20VSM_32F\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20SHADOW_T'+'YPE\x20==\x20VSM'+'_32F\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20exponen'+'t\x20=\x2015.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+('t\x20exponent'+'\x20=\x205.54;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20depth\x20=\x20'+'2.0\x20*\x20dept'+'h\x20-\x201.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dep'+'th\x20=\x20\x20exp('+'exponent\x20*'+'\x20depth);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20gl_'+'FragColor\x20'+'=\x20vec4(dep'+'th,\x20depth*'+'depth,\x201.0'+',\x201.0);\x0a\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'SHADOW_TYP'+'E\x20==\x20PCSS_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'tore\x20depth'+'\x20into\x20R32\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20gl_FragC'+'olor.r\x20=\x20d'+'epth;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20M'+'ODIFIED_DE'+'PTH\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20If\x20we\x20e'+'nd\x20up\x20usin'+'g\x20modified'+'\x20depth,\x20it'+'\x20needs\x20to\x20'+'be\x20explici'+'tly\x20writte'+'n\x20to\x20gl_Fr'+'agDepth\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gDepth\x20=\x20d'+'epth;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20just\x20the\x20'+'simplest\x20c'+'ode,\x20color'+'\x20is\x20not\x20wr'+'itten\x20anyw'+'ay\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Fr'+'agColor\x20=\x20'+'vec4(1.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litUserM'+'ainEndPS\x22\x0a'+'}\x0a'),OP='\x0a//\x20Real-T'+'ime\x20Polygo'+'nal-Light\x20'+'Shading\x20wi'+'th\x20Linearl'+'y\x20Transfor'+'med\x20Cosine'+'s\x0a//\x20by\x20Er'+'ic\x20Heitz,\x20'+'Jonathan\x20D'+'upuy,\x20Step'+'hen\x20Hill\x20a'+'nd\x20David\x20N'+'eubelt\x0a//\x20'+'code:\x20http'+'s://github'+'.com/selfs'+'hadow/ltc_'+'code/\x0a\x0amat'+'3\x20transpos'+'eMat3(\x20con'+'st\x20in\x20mat3'+'\x20m\x20)\x20{\x0a\x20\x20\x20'+'\x20mat3\x20tmp;'+'\x0a\x20\x20\x20\x20tmp[\x20'+'0\x20]\x20=\x20vec3'+'(\x20m[\x200\x20].x'+',\x20m[\x201\x20].x'+',\x20m[\x202\x20].x'+'\x20);\x0a\x20\x20\x20\x20tm'+'p[\x201\x20]\x20=\x20v'+'ec3(\x20m[\x200\x20'+'].y,\x20m[\x201\x20'+'].y,\x20m[\x202\x20'+'].y\x20);\x0a\x20\x20\x20'+'\x20tmp[\x202\x20]\x20'+'=\x20vec3(\x20m['+'\x200\x20].z,\x20m['+'\x201\x20].z,\x20m['+'\x202\x20].z\x20);\x0a'+'\x20\x20\x20\x20return'+'\x20tmp;\x0a}\x0a\x0av'+'ec2\x20LTC_Uv'+'(\x20const\x20in'+'\x20vec3\x20N,\x20c'+'onst\x20in\x20ve'+'c3\x20V,\x20cons'+'t\x20in\x20float'+'\x20roughness'+'\x20)\x20{\x0a\x20\x20\x20\x20c'+'onst\x20float'+'\x20LUT_SIZE\x20'+'=\x2064.0;\x0a\x20\x20'+'\x20\x20const\x20fl'+'oat\x20LUT_SC'+'ALE\x20=\x20(\x20LU'+'T_SIZE\x20-\x201'+'.0\x20)\x20/\x20LUT'+'_SIZE;\x0a\x20\x20\x20'+'\x20const\x20flo'+'at\x20LUT_BIA'+'S\x20=\x200.5\x20/\x20'+'LUT_SIZE;\x0a'+'\x20\x20\x20\x20float\x20'+'dotNV\x20=\x20sa'+'turate(\x20do'+'t(\x20N,\x20V\x20)\x20'+');\x0a\x20\x20\x20\x20//\x20'+'texture\x20pa'+'rameterize'+'d\x20by\x20sqrt('+'\x20GGX\x20alpha'+'\x20)\x20and\x20sqr'+'t(\x201\x20-\x20cos'+'(\x20theta\x20)\x20'+')\x0a\x20\x20\x20\x20vec2'+'\x20uv\x20=\x20vec2'+'(\x20roughnes'+'s,\x20sqrt(\x201'+'.0\x20-\x20dotNV'+'\x20)\x20);\x0a\x20\x20\x20\x20'+'uv\x20=\x20uv\x20*\x20'+'LUT_SCALE\x20'+'+\x20LUT_BIAS'+';\x0a\x20\x20\x20\x20retu'+'rn\x20uv;\x0a}\x0a\x0a'+'float\x20LTC_'+'ClippedSph'+'ereFormFac'+'tor(\x20const'+'\x20in\x20vec3\x20f'+'\x20)\x20{\x0a\x20\x20\x20\x20/'+'/\x20Real-Tim'+'e\x20Area\x20Lig'+'hting:\x20a\x20J'+'ourney\x20fro'+'m\x20Research'+'\x20to\x20Produc'+'tion\x20(p.10'+'2)\x0a\x20\x20\x20\x20//\x20'+('An\x20approxi'+'mation\x20of\x20'+'the\x20form\x20f'+'actor\x20of\x20a'+'\x20horizon-c'+'lipped\x20rec'+'tangle.\x0a\x20\x20'+'\x20\x20float\x20l\x20'+'=\x20length(\x20'+'f\x20);\x0a\x20\x20\x20\x20r'+'eturn\x20max('+'\x20(\x20l\x20*\x20l\x20+'+'\x20f.z\x20)\x20/\x20('+'\x20l\x20+\x201.0\x20)'+',\x200.0\x20);\x0a}'+'\x0a\x0avec3\x20LTC'+'_EdgeVecto'+'rFormFacto'+'r(\x20const\x20i'+'n\x20vec3\x20v1,'+'\x20const\x20in\x20'+'vec3\x20v2\x20)\x20'+'{\x0a\x20\x20\x20\x20floa'+'t\x20x\x20=\x20dot('+'\x20v1,\x20v2\x20);'+'\x0a\x20\x20\x20\x20float'+'\x20y\x20=\x20abs(\x20'+'x\x20);\x0a\x20\x20\x20\x20/'+'/\x20rational'+'\x20polynomia'+'l\x20approxim'+'ation\x20to\x20t'+'heta\x20/\x20sin'+'(\x20theta\x20)\x20'+'/\x202PI\x0a\x20\x20\x20\x20'+'float\x20a\x20=\x20'+'0.8543985\x20'+'+\x20(\x200.4965'+'155\x20+\x200.01'+'45206\x20*\x20y\x20'+')\x20*\x20y;\x0a\x20\x20\x20'+'\x20float\x20b\x20='+'\x203.4175940'+'\x20+\x20(\x204.161'+'6724\x20+\x20y\x20)'+'\x20*\x20y;\x0a\x20\x20\x20\x20'+'float\x20v\x20=\x20'+'a\x20/\x20b;\x0a\x20\x20\x20'+'\x20float\x20the'+'ta_sinthet'+'a\x20=\x20(\x20x\x20>\x20'+'0.0\x20)\x20?\x20v\x20'+':\x200.5\x20*\x20in'+'versesqrt('+'\x20max(\x201.0\x20'+'-\x20x\x20*\x20x,\x201'+'e-7\x20)\x20)\x20-\x20'+'v;\x0a\x20\x20\x20\x20ret'+'urn\x20cross('+'\x20v1,\x20v2\x20)\x20'+'*\x20theta_si'+'ntheta;\x0a}\x0a'+'\x0astruct\x20Co'+'ords\x20{\x0a\x20\x20\x20'+'\x20vec3\x20coor'+'d0;\x0a\x20\x20\x20\x20ve'+'c3\x20coord1;'+'\x0a\x20\x20\x20\x20vec3\x20'+'coord2;\x0a\x20\x20'+'\x20\x20vec3\x20coo'+'rd3;\x0a};\x0a\x0af'+'loat\x20LTC_E'+'valuateRec'+'t(\x20const\x20i'+'n\x20vec3\x20N,\x20'+'const\x20in\x20v'+'ec3\x20V,\x20con'+'st\x20in\x20vec3'+'\x20P,\x20const\x20'+'in\x20mat3\x20mI'+'nv,\x20const\x20'+'in\x20Coords\x20'+'rectCoords'+')\x20{\x0a\x20\x20\x20\x20//'+'\x20bail\x20if\x20p'+'oint\x20is\x20on'+'\x20back\x20side'+'\x20of\x20plane\x20'+'of\x20light\x0a\x20'+'\x20\x20\x20//\x20assu'+'mes\x20ccw\x20wi'+'nding\x20orde'+'r\x20of\x20light'+'\x20vertices\x0a'+'\x20\x20\x20\x20vec3\x20v'+'1\x20=\x20rectCo'+'ords.coord'+'1\x20-\x20rectCo'+'ords.coord'+'0;\x0a\x20\x20\x20\x20vec')+('3\x20v2\x20=\x20rec'+'tCoords.co'+'ord3\x20-\x20rec'+'tCoords.co'+'ord0;\x0a\x20\x20\x20\x20'+'\x0a\x20\x20\x20\x20vec3\x20'+'lightNorma'+'l\x20=\x20cross('+'\x20v1,\x20v2\x20);'+'\x0a\x20\x20\x20\x20//\x20if'+'(\x20dot(\x20lig'+'htNormal,\x20'+'P\x20-\x20rectCo'+'ords.coord'+'0\x20)\x20<\x200.0\x20'+')\x20return\x200'+'.0;\x0a\x20\x20\x20\x20fl'+'oat\x20factor'+'\x20=\x20sign(-d'+'ot(\x20lightN'+'ormal,\x20P\x20-'+'\x20rectCoord'+'s.coord0\x20)'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20construct'+'\x20orthonorm'+'al\x20basis\x20a'+'round\x20N\x0a\x20\x20'+'\x20\x20vec3\x20T1,'+'\x20T2;\x0a\x20\x20\x20\x20T'+'1\x20=\x20normal'+'ize(\x20V\x20-\x20N'+'\x20*\x20dot(\x20V,'+'\x20N\x20)\x20);\x0a\x20\x20'+'\x20\x20T2\x20=\x20\x20fa'+'ctor\x20*\x20cro'+'ss(\x20N,\x20T1\x20'+');\x20//\x20nega'+'ted\x20from\x20p'+'aper;\x20poss'+'ibly\x20due\x20t'+'o\x20a\x20differ'+'ent\x20handed'+'ness\x20of\x20wo'+'rld\x20coordi'+'nate\x20syste'+'m\x0a\x20\x20\x20\x20//\x20c'+'ompute\x20tra'+'nsform\x0a\x20\x20\x20'+'\x20mat3\x20mat\x20'+'=\x20mInv\x20*\x20t'+'ransposeMa'+'t3(\x20mat3(\x20'+'T1,\x20T2,\x20N\x20'+')\x20);\x0a\x20\x20\x20\x20/'+'/\x20transfor'+'m\x20rect\x0a\x20\x20\x20'+'\x20vec3\x20coor'+'ds[\x204\x20];\x0a\x20'+'\x20\x20\x20coords['+'\x200\x20]\x20=\x20mat'+'\x20*\x20(\x20rectC'+'oords.coor'+'d0\x20-\x20P\x20);\x0a'+'\x20\x20\x20\x20coords'+'[\x201\x20]\x20=\x20ma'+'t\x20*\x20(\x20rect'+'Coords.coo'+'rd1\x20-\x20P\x20);'+'\x0a\x20\x20\x20\x20coord'+'s[\x202\x20]\x20=\x20m'+'at\x20*\x20(\x20rec'+'tCoords.co'+'ord2\x20-\x20P\x20)'+';\x0a\x20\x20\x20\x20coor'+'ds[\x203\x20]\x20=\x20'+'mat\x20*\x20(\x20re'+'ctCoords.c'+'oord3\x20-\x20P\x20'+');\x0a\x20\x20\x20\x20//\x20'+'project\x20re'+'ct\x20onto\x20sp'+'here\x0a\x20\x20\x20\x20c'+'oords[\x200\x20]'+'\x20=\x20normali'+'ze(\x20coords'+'[\x200\x20]\x20);\x0a\x20'+'\x20\x20\x20coords['+'\x201\x20]\x20=\x20nor'+'malize(\x20co'+'ords[\x201\x20]\x20'+');\x0a\x20\x20\x20\x20coo'+'rds[\x202\x20]\x20='+'\x20normalize'+'(\x20coords[\x20'+'2\x20]\x20);\x0a\x20\x20\x20'+'\x20coords[\x203'+'\x20]\x20=\x20norma'+'lize(\x20coor'+'ds[\x203\x20]\x20);')+('\x0a\x20\x20\x20\x20//\x20ca'+'lculate\x20ve'+'ctor\x20form\x20'+'factor\x0a\x20\x20\x20'+'\x20vec3\x20vect'+'orFormFact'+'or\x20=\x20vec3('+'\x200.0\x20);\x0a\x20\x20'+'\x20\x20vectorFo'+'rmFactor\x20+'+'=\x20LTC_Edge'+'VectorForm'+'Factor(\x20co'+'ords[\x200\x20],'+'\x20coords[\x201'+'\x20]\x20);\x0a\x20\x20\x20\x20'+'vectorForm'+'Factor\x20+=\x20'+'LTC_EdgeVe'+'ctorFormFa'+'ctor(\x20coor'+'ds[\x201\x20],\x20c'+'oords[\x202\x20]'+'\x20);\x0a\x20\x20\x20\x20ve'+'ctorFormFa'+'ctor\x20+=\x20LT'+'C_EdgeVect'+'orFormFact'+'or(\x20coords'+'[\x202\x20],\x20coo'+'rds[\x203\x20]\x20)'+';\x0a\x20\x20\x20\x20vect'+'orFormFact'+'or\x20+=\x20LTC_'+'EdgeVector'+'FormFactor'+'(\x20coords[\x20'+'3\x20],\x20coord'+'s[\x200\x20]\x20);\x0a'+'\x20\x20\x20\x20//\x20adj'+'ust\x20for\x20ho'+'rizon\x20clip'+'ping\x0a\x20\x20\x20\x20f'+'loat\x20resul'+'t\x20=\x20LTC_Cl'+'ippedSpher'+'eFormFacto'+'r(\x20vectorF'+'ormFactor\x20'+');\x0a\x0a\x20\x20\x20\x20re'+'turn\x20resul'+'t;\x0a}\x0a\x0aCoor'+'ds\x20dLTCCoo'+'rds;\x0aCoord'+'s\x20getLTCLi'+'ghtCoords('+'vec3\x20light'+'Pos,\x20vec3\x20'+'halfWidth,'+'\x20vec3\x20half'+'Height){\x0a\x20'+'\x20\x20\x20Coords\x20'+'coords;\x0a\x20\x20'+'\x20\x20coords.c'+'oord0\x20=\x20li'+'ghtPos\x20+\x20h'+'alfWidth\x20-'+'\x20halfHeigh'+'t;\x0a\x20\x20\x20\x20coo'+'rds.coord1'+'\x20=\x20lightPo'+'s\x20-\x20halfWi'+'dth\x20-\x20half'+'Height;\x0a\x20\x20'+'\x20\x20coords.c'+'oord2\x20=\x20li'+'ghtPos\x20-\x20h'+'alfWidth\x20+'+'\x20halfHeigh'+'t;\x0a\x20\x20\x20\x20coo'+'rds.coord3'+'\x20=\x20lightPo'+'s\x20+\x20halfWi'+'dth\x20+\x20half'+'Height;\x0a\x20\x20'+'\x20\x20return\x20c'+'oords;\x0a}\x0a\x0a'+'float\x20dSph'+'ereRadius;'+'\x0aCoords\x20ge'+'tSphereLig'+'htCoords(v'+'ec3\x20lightP'+'os,\x20vec3\x20h'+'alfWidth,\x20'+'vec3\x20halfH'+'eight){\x0a\x20\x20'+'\x20\x20//\x20used\x20'+'for\x20simple'+'\x20sphere\x20li')+('ght\x20fallof'+'f\x0a\x20\x20\x20\x20//\x20a'+'lso,\x20the\x20c'+'ode\x20only\x20h'+'andles\x20a\x20s'+'pherical\x20l'+'ight,\x20it\x20c'+'annot\x20be\x20n'+'on-uniform'+'ly\x20scaled\x20'+'in\x20world\x20s'+'pace,\x20and\x20'+'so\x20we\x20enfo'+'rce\x20it\x20her'+'e\x0a\x20\x20\x20\x20dSph'+'ereRadius\x20'+'=\x20max(leng'+'th(halfWid'+'th),\x20lengt'+'h(halfHeig'+'ht));\x0a\x0a\x20\x20\x20'+'\x20//\x20Billbo'+'ard\x20the\x202d'+'\x20light\x20qua'+'d\x20to\x20refle'+'ction\x20vect'+'or,\x20as\x20it\x27'+'s\x20used\x20for'+'\x20specular.'+'\x20This\x20allo'+'ws\x20us\x20to\x20u'+'se\x20disk\x20ma'+'th\x20for\x20the'+'\x20sphere.\x0a\x20'+'\x20\x20\x20vec3\x20f\x20'+'=\x20reflect('+'normalize('+'lightPos\x20-'+'\x20view_posi'+'tion),\x20vNo'+'rmalW);\x0a\x20\x20'+'\x20\x20vec3\x20w\x20='+'\x20normalize'+'(cross(f,\x20'+'halfHeight'+'));\x0a\x20\x20\x20\x20ve'+'c3\x20h\x20=\x20nor'+'malize(cro'+'ss(f,\x20w));'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20getLTCL'+'ightCoords'+'(lightPos,'+'\x20w\x20*\x20dSphe'+'reRadius,\x20'+'h\x20*\x20dSpher'+'eRadius);\x0a'+'}\x0a\x0a//\x20used'+'\x20for\x20LTC\x20L'+'UT\x20texture'+'\x20lookup\x0ave'+'c2\x20dLTCUV;'+'\x0a#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20vec2'+'\x20ccLTCUV;\x0a'+'#endif\x0a\x0ave'+'c2\x20getLTCL'+'ightUV(flo'+'at\x20gloss,\x20'+'vec3\x20world'+'Normal,\x20ve'+'c3\x20viewDir'+')\x0a{\x0a\x20\x20\x20\x20fl'+'oat\x20roughn'+'ess\x20=\x20max('+'(1.0\x20-\x20glo'+'ss)\x20*\x20(1.0'+'\x20-\x20gloss),'+'\x200.001);\x0a\x20'+'\x20\x20\x20return\x20'+'LTC_Uv(\x20wo'+'rldNormal,'+'\x20viewDir,\x20'+'roughness\x20'+');\x0a}\x0a\x0a//\x20u'+'sed\x20for\x20en'+'ergy\x20conse'+'rvation\x20an'+'d\x20to\x20modul'+'ate\x20specul'+'ar\x0avec3\x20dL'+'TCSpecFres'+';\x0a#ifdef\x20L'+'IT_CLEARCO'+'AT\x0a\x20\x20\x20\x20vec'+'3\x20ccLTCSpe'+'cFres;\x0a#en'+'dif\x0a\x0avec3\x20'+'getLTCLigh')+('tSpecFres('+'vec2\x20uv,\x20v'+'ec3\x20specul'+'arity)\x0a{\x0a\x20'+'\x20\x20\x20vec4\x20t2'+'\x20=\x20texture'+'2DLod(area'+'LightsLutT'+'ex2,\x20uv,\x200'+'.0);\x0a\x20\x20\x20\x20r'+'eturn\x20spec'+'ularity\x20*\x20'+'t2.x\x20+\x20(\x20v'+'ec3(\x201.0\x20)'+'\x20-\x20specula'+'rity)\x20*\x20t2'+'.y;\x0a}\x0a\x0avoi'+'d\x20calcLTCL'+'ightValues'+'(float\x20glo'+'ss,\x20vec3\x20w'+'orldNormal'+',\x20vec3\x20vie'+'wDir,\x20vec3'+'\x20speculari'+'ty,\x20float\x20'+'clearcoatG'+'loss,\x20vec3'+'\x20clearcoat'+'WorldNorma'+'l,\x20float\x20c'+'learcoatSp'+'ecularity)'+'\x0a{\x0a\x20\x20\x20\x20dLT'+'CUV\x20=\x20getL'+'TCLightUV('+'gloss,\x20wor'+'ldNormal,\x20'+'viewDir);\x0a'+'\x20\x20\x20\x20dLTCSp'+'ecFres\x20=\x20g'+'etLTCLight'+'SpecFres(d'+'LTCUV,\x20spe'+'cularity);'+'\x20\x0a\x0a#ifdef\x20'+'LIT_CLEARC'+'OAT\x0a\x20\x20\x20\x20cc'+'LTCUV\x20=\x20ge'+'tLTCLightU'+'V(clearcoa'+'tGloss,\x20cl'+'earcoatWor'+'ldNormal,\x20'+'viewDir);\x0a'+'\x20\x20\x20\x20ccLTCS'+'pecFres\x20=\x20'+'getLTCLigh'+'tSpecFres('+'ccLTCUV,\x20v'+'ec3(clearc'+'oatSpecula'+'rity));\x0a#e'+'ndif\x0a}\x0a\x0avo'+'id\x20calcRec'+'tLightValu'+'es(vec3\x20li'+'ghtPos,\x20ve'+'c3\x20halfWid'+'th,\x20vec3\x20h'+'alfHeight)'+'\x20{\x0a\x20\x20\x20\x20dLT'+'CCoords\x20=\x20'+'getLTCLigh'+'tCoords(li'+'ghtPos,\x20ha'+'lfWidth,\x20h'+'alfHeight)'+';\x0a}\x0avoid\x20c'+'alcDiskLig'+'htValues(v'+'ec3\x20lightP'+'os,\x20vec3\x20h'+'alfWidth,\x20'+'vec3\x20halfH'+'eight)\x20{\x0a\x20'+'\x20\x20\x20calcRec'+'tLightValu'+'es(lightPo'+'s,\x20halfWid'+'th,\x20halfHe'+'ight);\x0a}\x0av'+'oid\x20calcSp'+'hereLightV'+'alues(vec3'+'\x20lightPos,'+'\x20vec3\x20half'+'Width,\x20vec'+'3\x20halfHeig'+'ht)\x20{\x0a\x20\x20\x20\x20')+('dLTCCoords'+'\x20=\x20getSphe'+'reLightCoo'+'rds(lightP'+'os,\x20halfWi'+'dth,\x20halfH'+'eight);\x0a}\x0a'+'\x0a//\x20An\x20ext'+'ended\x20vers'+'ion\x20of\x20the'+'\x20implement'+'ation\x20from'+'\x20\x22How\x20to\x20s'+'olve\x20a\x20cub'+'ic\x20equatio'+'n,\x20revisit'+'ed\x22\x0a//\x20htt'+'p://moment'+'singraphic'+'s.de/?p=10'+'5\x0avec3\x20Sol'+'veCubic(ve'+'c4\x20Coeffic'+'ient)\x0a{\x0a\x20\x20'+'\x20\x20float\x20pi'+'\x20=\x203.14159'+';\x0a\x20\x20\x20\x20//\x20N'+'ormalize\x20t'+'he\x20polynom'+'ial\x0a\x20\x20\x20\x20Co'+'efficient.'+'xyz\x20/=\x20Coe'+'fficient.w'+';\x0a\x20\x20\x20\x20//\x20D'+'ivide\x20midd'+'le\x20coeffic'+'ients\x20by\x20t'+'hree\x0a\x20\x20\x20\x20C'+'oefficient'+'.yz\x20/=\x203.0'+';\x0a\x0a\x20\x20\x20\x20flo'+'at\x20A\x20=\x20Coe'+'fficient.w'+';\x0a\x20\x20\x20\x20floa'+'t\x20B\x20=\x20Coef'+'ficient.z;'+'\x0a\x20\x20\x20\x20float'+'\x20C\x20=\x20Coeff'+'icient.y;\x0a'+'\x20\x20\x20\x20float\x20'+'D\x20=\x20Coeffi'+'cient.x;\x0a\x0a'+'\x20\x20\x20\x20//\x20Com'+'pute\x20the\x20H'+'essian\x20and'+'\x20the\x20discr'+'iminant\x0a\x20\x20'+'\x20\x20vec3\x20Del'+'ta\x20=\x20vec3('+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-'+'Coefficien'+'t.z\x20*\x20Coef'+'ficient.z\x20'+'+\x20Coeffici'+'ent.y,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20-Coef'+'ficient.y\x20'+'*\x20Coeffici'+'ent.z\x20+\x20Co'+'efficient.'+'x,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20dot(vec2('+'Coefficien'+'t.z,\x20-Coef'+'ficient.y)'+',\x20Coeffici'+'ent.xy)\x0a\x20\x20'+'\x20\x20);\x0a\x0a\x20\x20\x20\x20'+'float\x20Disc'+'riminant\x20='+'\x20dot(vec2('+'4.0\x20*\x20Delt'+'a.x,\x20-Delt'+'a.y),\x20Delt'+'a.zy);\x0a\x0a\x20\x20'+'\x20\x20vec2\x20xlc'+',\x20xsc;\x0a\x0a\x20\x20'+'\x20\x20//\x20Algor'+'ithm\x20A\x0a\x20\x20\x20'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20A_a'+'\x20=\x201.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20C_a\x20=\x20De'+'lta.x;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20D_a\x20=\x20-2.'+'0\x20*\x20B\x20*\x20De'+'lta.x\x20+\x20De'+'lta.y;\x0a\x0a\x20\x20')+('\x20\x20\x20\x20\x20\x20//\x20T'+'ake\x20the\x20cu'+'bic\x20root\x20o'+'f\x20a\x20normal'+'ized\x20compl'+'ex\x20number\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20Theta\x20'+'=\x20atan(sqr'+'t(Discrimi'+'nant),\x20-D_'+'a)\x20/\x203.0;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20x_1a\x20'+'=\x202.0\x20*\x20sq'+'rt(-C_a)\x20*'+'\x20cos(Theta'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20x_3'+'a\x20=\x202.0\x20*\x20'+'sqrt(-C_a)'+'\x20*\x20cos(The'+'ta\x20+\x20(2.0\x20'+'/\x203.0)\x20*\x20p'+'i);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20x'+'l;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20if\x20((x_1a'+'\x20+\x20x_3a)\x20>'+'\x202.0\x20*\x20B)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20xl\x20=\x20x_1'+'a;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20xl'+'\x20=\x20x_3a;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20xl'+'c\x20=\x20vec2(x'+'l\x20-\x20B,\x20A);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20//\x20Algor'+'ithm\x20D\x0a\x20\x20\x20'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20A_d'+'\x20=\x20D;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'C_d\x20=\x20Delt'+'a.z;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20D'+'_d\x20=\x20-D\x20*\x20'+'Delta.y\x20+\x20'+'2.0\x20*\x20C\x20*\x20'+'Delta.z;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20Take\x20the\x20'+'cubic\x20root'+'\x20of\x20a\x20norm'+'alized\x20com'+'plex\x20numbe'+'r\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20Thet'+'a\x20=\x20atan(D'+'\x20*\x20sqrt(Di'+'scriminant'+'),\x20-D_d)\x20/'+'\x203.0;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20x_1d\x20=\x202.'+'0\x20*\x20sqrt(-'+'C_d)\x20*\x20cos'+'(Theta);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20x_3d\x20=\x20'+'2.0\x20*\x20sqrt'+'(-C_d)\x20*\x20c'+'os(Theta\x20+'+'\x20(2.0\x20/\x203.'+'0)\x20*\x20pi);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20xs;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(x_1d\x20+\x20x_'+'3d\x20<\x202.0\x20*'+'\x20C)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20xs\x20='+'\x20x_1d;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20xs\x20=\x20x_3'+'d;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20xsc\x20=\x20ve'+'c2(-D,\x20xs\x20'+'+\x20C);\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20flo'+'at\x20E\x20=\x20\x20xl'+'c.y\x20*\x20xsc.'+'y;\x0a\x20\x20\x20\x20flo'+'at\x20F\x20=\x20-xl'+'c.x\x20*\x20xsc.'+'y\x20-\x20xlc.y\x20')+('*\x20xsc.x;\x0a\x20'+'\x20\x20\x20float\x20G'+'\x20=\x20\x20xlc.x\x20'+'*\x20xsc.x;\x0a\x0a'+'\x20\x20\x20\x20vec2\x20x'+'mc\x20=\x20vec2('+'C\x20*\x20F\x20-\x20B\x20'+'*\x20G,\x20-B\x20*\x20'+'F\x20+\x20C\x20*\x20E)'+';\x0a\x0a\x20\x20\x20\x20vec'+'3\x20Root\x20=\x20v'+'ec3(xsc.x\x20'+'/\x20xsc.y,\x20x'+'mc.x\x20/\x20xmc'+'.y,\x20xlc.x\x20'+'/\x20xlc.y);\x0a'+'\x0a\x20\x20\x20\x20if\x20(R'+'oot.x\x20<\x20Ro'+'ot.y\x20&&\x20Ro'+'ot.x\x20<\x20Roo'+'t.z)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20Root.xy'+'z\x20=\x20Root.y'+'xz;\x0a\x20\x20\x20\x20el'+'se\x20if\x20(Roo'+'t.z\x20<\x20Root'+'.x\x20&&\x20Root'+'.z\x20<\x20Root.'+'y)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20Root.xyz\x20'+'=\x20Root.xzy'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20Root;\x0a'+'}\x0a\x0afloat\x20L'+'TC_Evaluat'+'eDisk(vec3'+'\x20N,\x20vec3\x20V'+',\x20vec3\x20P,\x20'+'mat3\x20Minv,'+'\x20Coords\x20po'+'ints)\x0a{\x0a\x20\x20'+'\x20\x20//\x20const'+'ruct\x20ortho'+'normal\x20bas'+'is\x20around\x20'+'N\x0a\x20\x20\x20\x20vec3'+'\x20T1\x20=\x20norm'+'alize(V\x20-\x20'+'N\x20*\x20dot(V,'+'\x20N));\x0a\x20\x20\x20\x20'+'vec3\x20T2\x20=\x20'+'cross(N,\x20T'+'1);\x0a\x0a\x20\x20\x20\x20/'+'/\x20rotate\x20a'+'rea\x20light\x20'+'in\x20(T1,\x20T2'+',\x20N)\x20basis'+'\x0a\x20\x20\x20\x20//mat'+'3\x20R\x20=\x20tran'+'spose(mat3'+'(T1,\x20T2,\x20N'+'));\x0a\x20\x20\x20\x20ma'+'t3\x20R\x20=\x20tra'+'nsposeMat3'+'(\x20mat3(\x20T1'+',\x20T2,\x20N\x20)\x20'+');\x0a\x20\x20\x20\x20//\x20'+'polygon\x20(a'+'llocate\x205\x20'+'vertices\x20f'+'or\x20clippin'+'g)\x0a\x20\x20\x20\x20vec'+'3\x20L_[\x203\x20];'+'\x0a\x20\x20\x20\x20L_[\x200'+'\x20]\x20=\x20R\x20*\x20('+'\x20points.co'+'ord0\x20-\x20P\x20)'+';\x0a\x20\x20\x20\x20L_[\x20'+'1\x20]\x20=\x20R\x20*\x20'+'(\x20points.c'+'oord1\x20-\x20P\x20'+');\x0a\x20\x20\x20\x20L_['+'\x202\x20]\x20=\x20R\x20*'+'\x20(\x20points.'+'coord2\x20-\x20P'+'\x20);\x0a\x0a\x20\x20\x20\x20/'+'/\x20init\x20ell'+'ipse\x0a\x20\x20\x20\x20v'+'ec3\x20C\x20\x20=\x200'+'.5\x20*\x20(L_[0'+']\x20+\x20L_[2])'+';\x0a\x20\x20\x20\x20vec3'+'\x20V1\x20=\x200.5\x20'+'*\x20(L_[1]\x20-'+'\x20L_[2]);\x0a\x20'+'\x20\x20\x20vec3\x20V2'+'\x20=\x200.5\x20*\x20('+'L_[1]\x20-\x20L_'+'[0]);\x0a\x0a\x20\x20\x20'+'\x20C\x20\x20=\x20Minv')+('\x20*\x20C;\x0a\x20\x20\x20\x20'+'V1\x20=\x20Minv\x20'+'*\x20V1;\x0a\x20\x20\x20\x20'+'V2\x20=\x20Minv\x20'+'*\x20V2;\x0a\x0a\x20\x20\x20'+'\x20//if(dot('+'cross(V1,\x20'+'V2),\x20C)\x20>\x20'+'0.0)\x0a\x20\x20\x20\x20/'+'/\x20\x20\x20\x20retur'+'n\x200.0;\x0a\x0a\x20\x20'+'\x20\x20//\x20compu'+'te\x20eigenve'+'ctors\x20of\x20e'+'llipse\x0a\x20\x20\x20'+'\x20float\x20a,\x20'+'b;\x0a\x20\x20\x20\x20flo'+'at\x20d11\x20=\x20d'+'ot(V1,\x20V1)'+';\x0a\x20\x20\x20\x20floa'+'t\x20d22\x20=\x20do'+'t(V2,\x20V2);'+'\x0a\x20\x20\x20\x20float'+'\x20d12\x20=\x20dot'+'(V1,\x20V2);\x0a'+'\x20\x20\x20\x20if\x20(ab'+'s(d12)\x20/\x20s'+'qrt(d11\x20*\x20'+'d22)\x20>\x200.0'+'001)\x0a\x20\x20\x20\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20tr\x20=\x20'+'d11\x20+\x20d22;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20det\x20='+'\x20-d12\x20*\x20d1'+'2\x20+\x20d11\x20*\x20'+'d22;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20use'+'\x20sqrt\x20matr'+'ix\x20to\x20solv'+'e\x20for\x20eige'+'nvalues\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20det\x20'+'=\x20sqrt(det'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20u\x20='+'\x200.5\x20*\x20sqr'+'t(tr\x20-\x202.0'+'\x20*\x20det);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20v\x20=\x200.5'+'\x20*\x20sqrt(tr'+'\x20+\x202.0\x20*\x20d'+'et);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20e'+'_max\x20=\x20(u\x20'+'+\x20v)\x20*\x20(u\x20'+'+\x20v);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'e_min\x20=\x20(u'+'\x20-\x20v)\x20*\x20(u'+'\x20-\x20v);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20V1_,\x20V2_;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(d11\x20>\x20'+'d22)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20V1_'+'\x20=\x20d12\x20*\x20V'+'1\x20+\x20(e_max'+'\x20-\x20d11)\x20*\x20'+'V2;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20V2_\x20'+'=\x20d12\x20*\x20V1'+'\x20+\x20(e_min\x20'+'-\x20d11)\x20*\x20V'+'2;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20V1'+'_\x20=\x20d12*V2'+'\x20+\x20(e_max\x20'+'-\x20d22)*V1;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20V2_\x20=\x20d'+'12*V2\x20+\x20(e'+'_min\x20-\x20d22'+')*V1;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20a\x20=\x201'+'.0\x20/\x20e_max'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'b\x20=\x201.0\x20/\x20'+'e_min;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20V1\x20=\x20'+'normalize('+'V1_);\x0a\x20\x20\x20\x20')+('\x20\x20\x20\x20V2\x20=\x20n'+'ormalize(V'+'2_);\x0a\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20else\x0a'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20a\x20=\x201.'+'0\x20/\x20dot(V1'+',\x20V1);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20b\x20=\x201'+'.0\x20/\x20dot(V'+'2,\x20V2);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20V1\x20*'+'=\x20sqrt(a);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20V'+'2\x20*=\x20sqrt('+'b);\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20vec3\x20'+'V3\x20=\x20norma'+'lize(cross'+'(V1,\x20V2));'+'\x0a\x20\x20\x20\x20if\x20(d'+'ot(C,\x20V3)\x20'+'<\x200.0)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20V3\x20*='+'\x20-1.0;\x0a\x0a\x20\x20'+'\x20\x20float\x20L\x20'+'\x20=\x20dot(V3,'+'\x20C);\x0a\x20\x20\x20\x20f'+'loat\x20x0\x20=\x20'+'dot(V1,\x20C)'+'\x20/\x20L;\x0a\x20\x20\x20\x20'+'float\x20y0\x20='+'\x20dot(V2,\x20C'+')\x20/\x20L;\x0a\x0a\x20\x20'+'\x20\x20float\x20E1'+'\x20=\x20inverse'+'sqrt(a);\x0a\x20'+'\x20\x20\x20float\x20E'+'2\x20=\x20invers'+'esqrt(b);\x0a'+'\x0a\x20\x20\x20\x20a\x20*=\x20'+'L\x20*\x20L;\x0a\x20\x20\x20'+'\x20b\x20*=\x20L\x20*\x20'+'L;\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20c0\x20=\x20a'+'\x20*\x20b;\x0a\x20\x20\x20\x20'+'float\x20c1\x20='+'\x20a\x20*\x20b\x20*\x20('+'1.0\x20+\x20x0\x20*'+'\x20x0\x20+\x20y0\x20*'+'\x20y0)\x20-\x20a\x20-'+'\x20b;\x0a\x20\x20\x20\x20fl'+'oat\x20c2\x20=\x201'+'.0\x20-\x20a\x20*\x20('+'1.0\x20+\x20x0\x20*'+'\x20x0)\x20-\x20b\x20*'+'\x20(1.0\x20+\x20y0'+'\x20*\x20y0);\x0a\x20\x20'+'\x20\x20float\x20c3'+'\x20=\x201.0;\x0a\x0a\x20'+'\x20\x20\x20vec3\x20ro'+'ots\x20=\x20Solv'+'eCubic(vec'+'4(c0,\x20c1,\x20'+'c2,\x20c3));\x0a'+'\x20\x20\x20\x20float\x20'+'e1\x20=\x20roots'+'.x;\x0a\x20\x20\x20\x20fl'+'oat\x20e2\x20=\x20r'+'oots.y;\x0a\x20\x20'+'\x20\x20float\x20e3'+'\x20=\x20roots.z'+';\x0a\x0a\x20\x20\x20\x20vec'+'3\x20avgDir\x20='+'\x20vec3(a\x20*\x20'+'x0\x20/\x20(a\x20-\x20'+'e2),\x20b\x20*\x20y'+'0\x20/\x20(b\x20-\x20e'+'2),\x201.0);\x0a'+'\x0a\x20\x20\x20\x20mat3\x20'+'rotate\x20=\x20m'+'at3(V1,\x20V2'+',\x20V3);\x0a\x0a\x20\x20'+'\x20\x20avgDir\x20='+'\x20rotate\x20*\x20'+'avgDir;\x0a\x20\x20'+'\x20\x20avgDir\x20='+'\x20normalize'+'(avgDir);\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20L1\x20=\x20sqrt'+'(-e2\x20/\x20e3)'+';\x0a\x20\x20\x20\x20floa'+'t\x20L2\x20=\x20sqr'+'t(-e2\x20/\x20e1'+');\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20formFa'+'ctor\x20=\x20max'+'(0.0,\x20L1\x20*'+'\x20L2\x20*\x20inve')+('rsesqrt((1'+'.0\x20+\x20L1\x20*\x20'+'L1)\x20*\x20(1.0'+'\x20+\x20L2\x20*\x20L2'+')));\x0a\x20\x20\x20\x20\x0a'+'\x20\x20\x20\x20const\x20'+'float\x20LUT_'+'SIZE\x20=\x2064.'+'0;\x0a\x20\x20\x20\x20con'+'st\x20float\x20L'+'UT_SCALE\x20='+'\x20(\x20LUT_SIZ'+'E\x20-\x201.0\x20)\x20'+'/\x20LUT_SIZE'+';\x0a\x20\x20\x20\x20cons'+'t\x20float\x20LU'+'T_BIAS\x20=\x200'+'.5\x20/\x20LUT_S'+'IZE;\x0a\x0a\x20\x20\x20\x20'+'//\x20use\x20tab'+'ulated\x20hor'+'izon-clipp'+'ed\x20sphere\x0a'+'\x20\x20\x20\x20vec2\x20u'+'v\x20=\x20vec2(a'+'vgDir.z\x20*\x20'+'0.5\x20+\x200.5,'+'\x20formFacto'+'r);\x0a\x20\x20\x20\x20uv'+'\x20=\x20uv*LUT_'+'SCALE\x20+\x20LU'+'T_BIAS;\x0a\x0a\x20'+'\x20\x20\x20float\x20s'+'cale\x20=\x20tex'+'ture2DLod('+'areaLights'+'LutTex2,\x20u'+'v,\x200.0).w;'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20formFac'+'tor*scale;'+'\x0a}\x0a\x0a//\x20LTC'+'_EvaluateD'+'isk\x20in\x20som'+'e\x20rare\x20cas'+'es\x20generea'+'tes\x20NaN\x20va'+'lues\x20in\x20a\x20'+'or\x20b,\x20just'+'\x20before\x20\x27f'+'loat\x20c0\x20=\x20'+'a\x20*\x20b;\x27\x0a//'+'\x20Get\x20rid\x20o'+'f\x20those\x20Na'+'n\x20values\x20b'+'efore\x20they'+'\x20propagate'+'\x20further,\x20'+'as\x20in\x20case'+'\x20of\x20bloom\x20'+'/\x20DOF\x20blur'+'s\x20they\x0a//\x20'+'propagate\x20'+'to\x20large\x20a'+'reas.\x20I\x20di'+'dn\x27t\x20find\x20'+'the\x20actual'+'\x20reason\x20wh'+'ere\x20those\x20'+'come\x20from,'+'\x20so\x20that\x20i'+'s\x20still\x20TO'+'DO.\x0a//\x20Not'+'e\x20that\x20onl'+'y\x20disk/sph'+'ere\x20lights'+'\x20are\x20causi'+'ng\x20it,\x20so\x20'+'only\x20handl'+'e\x20those.\x0af'+'loat\x20FixNa'+'n(float\x20va'+'lue)\x20{\x0a\x20\x20\x20'+'\x20#ifdef\x20WE'+'BGPU\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'value\x20!=\x20v'+'alue\x20?\x200.0'+'\x20:\x20value;\x20'+'\x20//\x20isnan\x20'+'does\x20not\x20t'+'ranspile\x20c'+'orrectly,\x20'+'use\x20a\x20work'+'around\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20isnan(va'+'lue)\x20?\x200.0'+'\x20:\x20value;\x0a')+('\x20\x20\x20\x20#endif'+'\x0a}\x0a\x0afloat\x20'+'getRectLig'+'htDiffuse('+'vec3\x20world'+'Normal,\x20ve'+'c3\x20viewDir'+',\x20vec3\x20lig'+'htDir,\x20vec'+'3\x20lightDir'+'Norm)\x20{\x0a\x20\x20'+'\x20\x20return\x20L'+'TC_Evaluat'+'eRect(\x20wor'+'ldNormal,\x20'+'viewDir,\x20v'+'PositionW,'+'\x20mat3(\x201.0'+'\x20),\x20dLTCCo'+'ords\x20);\x0a}\x0a'+'\x0afloat\x20get'+'DiskLightD'+'iffuse(vec'+'3\x20worldNor'+'mal,\x20vec3\x20'+'viewDir,\x20v'+'ec3\x20lightD'+'ir,\x20vec3\x20l'+'ightDirNor'+'m)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20FixN'+'an(LTC_Eva'+'luateDisk('+'\x20worldNorm'+'al,\x20viewDi'+'r,\x20vPositi'+'onW,\x20mat3('+'\x201.0\x20),\x20dL'+'TCCoords\x20)'+');\x0a}\x0a\x0afloa'+'t\x20getSpher'+'eLightDiff'+'use(vec3\x20w'+'orldNormal'+',\x20vec3\x20vie'+'wDir,\x20vec3'+'\x20lightDir,'+'\x20vec3\x20ligh'+'tDirNorm)\x20'+'{\x0a\x20\x20\x20\x20//\x20N'+'B:\x20this\x20co'+'uld\x20be\x20imp'+'roved\x20furt'+'her\x20with\x20d'+'istance\x20ba'+'sed\x20wrap\x20l'+'ighting\x0a\x20\x20'+'\x20\x20float\x20fa'+'lloff\x20=\x20dS'+'phereRadiu'+'s\x20/\x20(dot(l'+'ightDir,\x20l'+'ightDir)\x20+'+'\x20dSphereRa'+'dius);\x0a\x20\x20\x20'+'\x20return\x20Fi'+'xNan(getLi'+'ghtDiffuse'+'(worldNorm'+'al,\x20viewDi'+'r,\x20lightDi'+'rNorm)\x20*\x20f'+'alloff);\x0a}'+'\x0a\x0amat3\x20get'+'LTCLightIn'+'vMat(vec2\x20'+'uv)\x0a{\x0a\x20\x20\x20\x20'+'vec4\x20t1\x20=\x20'+'texture2DL'+'od(areaLig'+'htsLutTex1'+',\x20uv,\x200.0)'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20mat3(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3(\x20t1.x,\x20'+'0,\x20t1.y\x20),'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3(\x20\x20\x20\x200,'+'\x201,\x20\x20\x20\x200\x20)'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3(\x20t1.z'+',\x200,\x20t1.w\x20'+')\x0a\x20\x20\x20\x20);\x0a}'+'\x0a\x0afloat\x20ca'+'lcRectLigh'+'tSpecular('+'vec3\x20world'+'Normal,\x20ve'+'c3\x20viewDir')+(',\x20vec2\x20uv)'+'\x20{\x0a\x20\x20\x20\x20mat'+'3\x20mInv\x20=\x20g'+'etLTCLight'+'InvMat(uv)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20LTC_Eva'+'luateRect('+'\x20worldNorm'+'al,\x20viewDi'+'r,\x20vPositi'+'onW,\x20mInv,'+'\x20dLTCCoord'+'s\x20);\x0a}\x0a\x0afl'+'oat\x20getRec'+'tLightSpec'+'ular(vec3\x20'+'worldNorma'+'l,\x20vec3\x20vi'+'ewDir)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'calcRectLi'+'ghtSpecula'+'r(worldNor'+'mal,\x20viewD'+'ir,\x20dLTCUV'+');\x0a}\x0a\x0afloa'+'t\x20calcDisk'+'LightSpecu'+'lar(vec3\x20w'+'orldNormal'+',\x20vec3\x20vie'+'wDir,\x20vec2'+'\x20uv)\x20{\x0a\x20\x20\x20'+'\x20mat3\x20mInv'+'\x20=\x20getLTCL'+'ightInvMat'+'(uv);\x0a\x20\x20\x20\x20'+'return\x20LTC'+'_EvaluateD'+'isk(\x20world'+'Normal,\x20vi'+'ewDir,\x20vPo'+'sitionW,\x20m'+'Inv,\x20dLTCC'+'oords\x20);\x0a}'+'\x0a\x0afloat\x20ge'+'tDiskLight'+'Specular(v'+'ec3\x20worldN'+'ormal,\x20vec'+'3\x20viewDir)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20calcDi'+'skLightSpe'+'cular(worl'+'dNormal,\x20v'+'iewDir,\x20dL'+'TCUV);\x0a}\x0a\x0a'+'float\x20getS'+'phereLight'+'Specular(v'+'ec3\x20worldN'+'ormal,\x20vec'+'3\x20viewDir)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20calcDi'+'skLightSpe'+'cular(worl'+'dNormal,\x20v'+'iewDir,\x20dL'+'TCUV);\x0a}\x0a'),FP='\x0a#ifdef\x20ST'+'D_METALNES'+'S_CONSTANT'+'\x0auniform\x20f'+'loat\x20mater'+'ial_metaln'+'ess;\x0a#endi'+'f\x0a\x0avoid\x20ge'+'tMetalness'+'()\x20{\x0a\x20\x20\x20\x20f'+'loat\x20metal'+'ness\x20=\x201.0'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_ME'+'TALNESS_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20metalness'+'\x20*=\x20materi'+'al_metalne'+'ss;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_METALNESS'+'_TEXTURE\x0a\x20'+'\x20\x20\x20metalne'+'ss\x20*=\x20text'+'ure2DBias('+'{STD_METAL'+'NESS_TEXTU'+'RE_NAME},\x20'+'{STD_METAL'+'NESS_TEXTU'+'RE_UV},\x20te'+'xtureBias)'+'.{STD_META'+'LNESS_TEXT'+'URE_CHANNE'+'L};\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_METALNESS'+'_VERTEX\x0a\x20\x20'+'\x20\x20metalnes'+'s\x20*=\x20satur'+'ate(vVerte'+'xColor.{ST'+'D_METALNES'+'S_VERTEX_C'+'HANNEL});\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20dMet'+'alness\x20=\x20m'+'etalness;\x0a'+'}\x0a',NP='\x0auniform\x20s'+'ampler2D\x20t'+'exture_msd'+'fMap;\x0a\x0aflo'+'at\x20median('+'float\x20r,\x20f'+'loat\x20g,\x20fl'+'oat\x20b)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'max(min(r,'+'\x20g),\x20min(m'+'ax(r,\x20g),\x20'+'b));\x0a}\x0a\x0afl'+'oat\x20map\x20(f'+'loat\x20min,\x20'+'float\x20max,'+'\x20float\x20v)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20(v\x20-\x20mi'+'n)\x20/\x20(max\x20'+'-\x20min);\x0a}\x0a'+'\x0auniform\x20f'+'loat\x20font_'+'sdfIntensi'+'ty;\x20//\x20int'+'ensity\x20is\x20'+'used\x20to\x20bo'+'ost\x20the\x20va'+'lue\x20read\x20f'+'rom\x20the\x20SD'+'F,\x200\x20is\x20no'+'\x20boost,\x201.'+'0\x20is\x20max\x20b'+'oost\x0aunifo'+'rm\x20float\x20f'+'ont_pxrang'+'e;\x20\x20\x20\x20\x20\x20//'+'\x20the\x20numbe'+'r\x20of\x20pixel'+'s\x20between\x20'+'inside\x20and'+'\x20outside\x20t'+'he\x20font\x20in'+'\x20SDF\x0aunifo'+'rm\x20float\x20f'+'ont_textur'+'eWidth;\x20//'+'\x20the\x20width'+'\x20of\x20the\x20te'+'xture\x20atla'+'s\x0a\x0a#ifndef'+'\x20LIT_MSDF_'+'TEXT_ATTRI'+'BUTE\x0a\x20\x20\x20\x20u'+'niform\x20vec'+'4\x20outline_'+'color;\x0a\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20outli'+'ne_thickne'+'ss;\x0a\x20\x20\x20\x20un'+'iform\x20vec4'+'\x20shadow_co'+'lor;\x0a\x20\x20\x20\x20u'+'niform\x20vec'+'2\x20shadow_o'+'ffset;\x0a#el'+'se\x0a\x20\x20\x20\x20var'+'ying\x20vec4\x20'+'outline_co'+'lor;\x0a\x20\x20\x20\x20v'+'arying\x20flo'+'at\x20outline'+'_thickness'+';\x0a\x20\x20\x20\x20vary'+'ing\x20vec4\x20s'+'hadow_colo'+'r;\x0a\x20\x20\x20\x20var'+'ying\x20vec2\x20'+'shadow_off'+'set;\x0a#endi'+'f\x0a\x0avec4\x20ap'+'plyMsdf(ve'+'c4\x20color)\x20'+'{\x0a\x0a\x20\x20\x20\x20//\x20'+'Convert\x20to'+'\x20linear\x20sp'+'ace\x20before'+'\x20processin'+'g\x0a\x20\x20\x20\x20//\x20T'+'ODO:\x20ideal'+'ly\x20this\x20wo'+'uld\x20receiv'+'e\x20the\x20colo'+'r\x20in\x20linea'+'r\x20space,\x20b'+'ut\x20that\x20wo'+'uld\x20requir'+'e\x20larger\x20c'+'hanges\x0a\x20\x20\x20'+('\x20//\x20on\x20the'+'\x20engine\x20si'+'de,\x20with\x20t'+'he\x20way\x20pre'+'multiplied'+'\x20alpha\x20is\x20'+'handled\x20as'+'\x20well.\x0a\x20\x20\x20'+'\x20color.rgb'+'\x20=\x20gammaCo'+'rrectInput'+'(color.rgb'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20sample\x20th'+'e\x20field\x0a\x20\x20'+'\x20\x20vec3\x20tsa'+'mple\x20=\x20tex'+'ture2D(tex'+'ture_msdfM'+'ap,\x20vUv0).'+'rgb;\x0a\x20\x20\x20\x20v'+'ec2\x20uvShdw'+'\x20=\x20vUv0\x20-\x20'+'shadow_off'+'set;\x0a\x20\x20\x20\x20v'+'ec3\x20ssampl'+'e\x20=\x20textur'+'e2D(textur'+'e_msdfMap,'+'\x20uvShdw).r'+'gb;\x0a\x0a\x20\x20\x20\x20/'+'/\x20get\x20the\x20'+'signed\x20dis'+'tance\x20valu'+'e\x0a\x20\x20\x20\x20floa'+'t\x20sigDist\x20'+'=\x20median(t'+'sample.r,\x20'+'tsample.g,'+'\x20tsample.b'+');\x0a\x20\x20\x20\x20flo'+'at\x20sigDist'+'Shdw\x20=\x20med'+'ian(ssampl'+'e.r,\x20ssamp'+'le.g,\x20ssam'+'ple.b);\x0a\x0a\x20'+'\x20\x20\x20//\x20smoo'+'thing\x20limi'+'t\x20-\x20smalle'+'r\x20value\x20ma'+'kes\x20for\x20sh'+'arper\x20but\x20'+'more\x20alias'+'ed\x20text,\x20e'+'specially\x20'+'on\x20angles\x0a'+'\x20\x20\x20\x20//\x20too'+'\x20large\x20val'+'ue\x20(0.5)\x20c'+'reates\x20a\x20d'+'ark\x20glow\x20a'+'round\x20the\x20'+'letters\x0a\x20\x20'+'\x20\x20float\x20sm'+'oothingMax'+'\x20=\x200.2;\x0a\x0a\x20'+'\x20\x20\x20//\x20smoo'+'thing\x20depe'+'nds\x20on\x20siz'+'e\x20of\x20textu'+'re\x20on\x20scre'+'en\x0a\x20\x20\x20\x20vec'+'2\x20w\x20=\x20fwid'+'th(vUv0);\x0a'+'\x20\x20\x20\x20float\x20'+'smoothing\x20'+'=\x20clamp(w.'+'x\x20*\x20font_t'+'extureWidt'+'h\x20/\x20font_p'+'xrange,\x200.'+'0,\x20smoothi'+'ngMax);\x0a\x0a\x20'+'\x20\x20\x20float\x20m'+'apMin\x20=\x200.'+'05;\x0a\x20\x20\x20\x20fl'+'oat\x20mapMax'+'\x20=\x20clamp(1'+'.0\x20-\x20font_'+'sdfIntensi'+'ty,\x20mapMin'+',\x201.0);\x0a\x0a\x20'+'\x20\x20\x20//\x20rema'+'p\x20to\x20a\x20sma'+'ller\x20range'+'\x20(used\x20on\x20'+'smaller\x20fo'+'nt\x20sizes)\x0a'+'\x20\x20\x20\x20float\x20')+('sigDistInn'+'er\x20=\x20map(m'+'apMin,\x20map'+'Max,\x20sigDi'+'st);\x0a\x20\x20\x20\x20f'+'loat\x20sigDi'+'stOutline\x20'+'=\x20map(mapM'+'in,\x20mapMax'+',\x20sigDist\x20'+'+\x20outline_'+'thickness)'+';\x0a\x20\x20\x20\x20sigD'+'istShdw\x20=\x20'+'map(mapMin'+',\x20mapMax,\x20'+'sigDistShd'+'w\x20+\x20outlin'+'e_thicknes'+'s);\x0a\x0a\x20\x20\x20\x20f'+'loat\x20cente'+'r\x20=\x200.5;\x0a\x20'+'\x20\x20\x20//\x20calc'+'ulate\x20smoo'+'thing\x20and\x20'+'use\x20to\x20gen'+'erate\x20opac'+'ity\x0a\x20\x20\x20\x20fl'+'oat\x20inside'+'\x20=\x20smooths'+'tep(center'+'-smoothing'+',\x20center+s'+'moothing,\x20'+'sigDistInn'+'er);\x0a\x20\x20\x20\x20f'+'loat\x20outli'+'ne\x20=\x20smoot'+'hstep(cent'+'er-smoothi'+'ng,\x20center'+'+smoothing'+',\x20sigDistO'+'utline);\x0a\x20'+'\x20\x20\x20float\x20s'+'hadow\x20=\x20sm'+'oothstep(c'+'enter-smoo'+'thing,\x20cen'+'ter+smooth'+'ing,\x20sigDi'+'stShdw);\x0a\x0a'+'\x20\x20\x20\x20vec4\x20t'+'color\x20=\x20(o'+'utline\x20>\x20i'+'nside)\x20?\x20o'+'utline\x20*\x20v'+'ec4(outlin'+'e_color.a\x20'+'*\x20outline_'+'color.rgb,'+'\x20outline_c'+'olor.a)\x20:\x20'+'vec4(0.0);'+'\x0a\x20\x20\x20\x20tcolo'+'r\x20=\x20mix(tc'+'olor,\x20colo'+'r,\x20inside)'+';\x0a\x0a\x20\x20\x20\x20vec'+'4\x20scolor\x20='+'\x20(shadow\x20>'+'\x20outline)\x20'+'?\x20shadow\x20*'+'\x20vec4(shad'+'ow_color.a'+'\x20*\x20shadow_'+'color.rgb,'+'\x20shadow_co'+'lor.a)\x20:\x20t'+'color;\x0a\x20\x20\x20'+'\x20tcolor\x20=\x20'+'mix(scolor'+',\x20tcolor,\x20'+'outline);\x0a'+'\x0a\x20\x20\x20\x20//\x20Co'+'nvert\x20back'+'\x20to\x20gamma\x20'+'space\x20befo'+'re\x20returni'+'ng\x0a\x20\x20\x20\x20tco'+'lor.rgb\x20=\x20'+'gammaCorre'+'ctOutput(t'+'color.rgb)'+';\x0a\x20\x20\x20\x20\x0a\x20\x20\x20'+'\x20return\x20tc'+'olor;\x0a}\x0a'),kP='\x0a\x0avec3\x20get'+'SpecularMo'+'dulate(in\x20'+'vec3\x20specu'+'larity,\x20in'+'\x20vec3\x20albe'+'do,\x20in\x20flo'+'at\x20metalne'+'ss,\x20in\x20flo'+'at\x20f0)\x20{\x0a\x20'+'\x20\x20\x20vec3\x20di'+'electricF0'+'\x20=\x20f0\x20*\x20sp'+'ecularity;'+'\x0a\x20\x20\x20\x20retur'+'n\x20mix(diel'+'ectricF0,\x20'+'albedo,\x20me'+'talness);\x0a'+'}\x0a\x0avec3\x20ge'+'tAlbedoMod'+'ulate(in\x20v'+'ec3\x20albedo'+',\x20in\x20float'+'\x20metalness'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20albed'+'o\x20*\x20(1.0\x20-'+'\x20metalness'+');\x0a}\x0a',UP='\x0a\x0a\x20\x20\x20\x20vary'+'ing\x20vec2\x20u'+'v0;\x0a\x0a\x20\x20\x20\x20u'+'niform\x20sam'+'pler2DArra'+'y\x20morphTex'+'ture;\x0a\x20\x20\x20\x20'+'uniform\x20hi'+'ghp\x20float\x20'+'morphFacto'+'r[{MORPH_T'+'EXTURE_MAX'+'_COUNT}];\x0a'+'\x20\x20\x20\x20unifor'+'m\x20highp\x20ui'+'nt\x20morphIn'+'dex[{MORPH'+'_TEXTURE_M'+'AX_COUNT}]'+';\x0a\x20\x20\x20\x20unif'+'orm\x20int\x20co'+'unt;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20MOR'+'PH_INT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec3\x20aa'+'bbSize;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20vec3\x20a'+'abbMin;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20void\x20m'+'ain\x20(void)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20highp\x20vec'+'3\x20color\x20=\x20'+'vec3(0,\x200,'+'\x200);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20ivec2\x20'+'pixelCoord'+'s\x20=\x20ivec2('+'uv0\x20*\x20vec2'+'(textureSi'+'ze(morphTe'+'xture,\x200).'+'xy));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20for\x20(in'+'t\x20i\x20=\x200;\x20i'+'\x20<\x20count;\x20'+'i++)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'int\x20textur'+'eIndex\x20=\x20m'+'orphIndex['+'i];\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20delta\x20=\x20t'+'exelFetch('+'morphTextu'+'re,\x20ivec3('+'pixelCoord'+'s,\x20int(tex'+'tureIndex)'+'),\x200).xyz;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20color\x20+'+'=\x20morphFac'+'tor[i]\x20*\x20d'+'elta;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20MORPH_IN'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20color\x20'+'=\x20(color\x20-'+'\x20aabbMin)\x20'+'/\x20aabbSize'+'\x20*\x2065535.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20u'+'vec4(color'+',\x201u);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20gl_Frag'+'Color\x20=\x20ve'+'c4(color,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20}\x0a',BP='\x0a\x20\x20\x20\x20attri'+'bute\x20vec2\x20'+'vertex_pos'+'ition;\x0a\x20\x20\x20'+'\x20varying\x20v'+'ec2\x20uv0;\x0a\x20'+'\x20\x20\x20void\x20ma'+'in(void)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_Position'+'\x20=\x20vec4(ve'+'rtex_posit'+'ion,\x200.5,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uv0\x20=\x20'+'vertex_pos'+'ition.xy\x20*'+'\x200.5\x20+\x200.5'+';\x0a\x20\x20\x20\x20}\x0a',zP='\x0aattribute'+'\x20vec3\x20vert'+'ex_outline'+'Parameters'+';\x0aattribut'+'e\x20vec3\x20ver'+'tex_shadow'+'Parameters'+';\x0a\x0avarying'+'\x20vec4\x20outl'+'ine_color;'+'\x0avarying\x20f'+'loat\x20outli'+'ne_thickne'+'ss;\x0avaryin'+'g\x20vec4\x20sha'+'dow_color;'+'\x0avarying\x20v'+'ec2\x20shadow'+'_offset;\x0a\x0a'+'void\x20unpac'+'kMsdfParam'+'s()\x20{\x0a\x20\x20\x20\x20'+'vec3\x20littl'+'e\x20=\x20mod(ve'+'rtex_outli'+'neParamete'+'rs,\x20256.);'+'\x0a\x20\x20\x20\x20vec3\x20'+'big\x20=\x20(ver'+'tex_outlin'+'eParameter'+'s\x20-\x20little'+')\x20/\x20256.;\x0a'+'\x0a\x20\x20\x20\x20outli'+'ne_color.r'+'b\x20=\x20little'+'.xy\x20/\x20255.'+';\x0a\x20\x20\x20\x20outl'+'ine_color.'+'ga\x20=\x20big.x'+'y\x20/\x20255.;\x0a'+'\x0a\x20\x20\x20\x20//\x20_o'+'utlineThic'+'knessScale'+'\x20===\x200.2\x0a\x20'+'\x20\x20\x20outline'+'_thickness'+'\x20=\x20little.'+'z\x20/\x20255.\x20*'+'\x200.2;\x0a\x0a\x20\x20\x20'+'\x20little\x20=\x20'+'mod(vertex'+'_shadowPar'+'ameters,\x202'+'56.);\x0a\x20\x20\x20\x20'+'big\x20=\x20(ver'+'tex_shadow'+'Parameters'+'\x20-\x20little)'+'\x20/\x20256.;\x0a\x0a'+'\x20\x20\x20\x20shadow'+'_color.rb\x20'+'=\x20little.x'+'y\x20/\x20255.;\x0a'+'\x20\x20\x20\x20shadow'+'_color.ga\x20'+'=\x20big.xy\x20/'+'\x20255.;\x0a\x0a\x20\x20'+'\x20\x20//\x20vec2('+'little.z,\x20'+'big.z)\x20/\x201'+'27.\x20-\x201.\x20r'+'emaps\x20shad'+'ow\x20offset\x20'+'from\x20[0,\x202'+'54]\x20to\x20[-1'+',\x201]\x0a\x20\x20\x20\x20/'+'/\x20_shadowO'+'ffsetScale'+'\x20===\x200.005'+'\x0a\x20\x20\x20\x20shado'+'w_offset\x20='+'\x20(vec2(lit'+'tle.z,\x20big'+'.z)\x20/\x20127.'+'\x20-\x201.)\x20*\x200'+'.005;\x0a}\x0a',VP='\x0amat3\x20dNor'+'malMatrix;'+'\x0a\x0avec3\x20get'+'Normal()\x20{'+'\x0a\x20\x20\x20\x20dNorm'+'alMatrix\x20='+'\x20getNormal'+'Matrix(dMo'+'delMatrix)'+';\x0a\x20\x20\x20\x20vec3'+'\x20localNorm'+'al\x20=\x20getLo'+'calNormal('+'vertex_nor'+'mal);\x0a\x20\x20\x20\x20'+'return\x20nor'+'malize(dNo'+'rmalMatrix'+'\x20*\x20localNo'+'rmal);\x0a}\x0a',GP='\x0a\x0aattribut'+'e\x20vec3\x20ver'+'tex_normal'+';\x0a\x0auniform'+'\x20mat3\x20matr'+'ix_normal;'+'\x0a\x0a#ifdef\x20M'+'ORPHING_NO'+'RMAL\x0a\x20\x20\x20\x20#'+'ifdef\x20MORP'+'HING_INT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20highp'+'\x20usampler2'+'D\x20morphNor'+'malTex;\x0a\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20highp\x20'+'sampler2D\x20'+'morphNorma'+'lTex;\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0avec3\x20'+'getLocalNo'+'rmal(vec3\x20'+'vertexNorm'+'al)\x20{\x0a\x0a\x20\x20\x20'+'\x20vec3\x20loca'+'lNormal\x20=\x20'+'vertex_nor'+'mal;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20MOR'+'PHING_NORM'+'AL\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20ivec2\x20mo'+'rphUV\x20=\x20ge'+'tTextureMo'+'rphCoords('+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20M'+'ORPHING_IN'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20m'+'orphNormal'+'\x20=\x20vec3(te'+'xelFetch(m'+'orphNormal'+'Tex,\x20ivec2'+'(morphUV),'+'\x200).xyz)\x20/'+'\x2065535.0\x20*'+'\x202.0\x20-\x201.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20morphNo'+'rmal\x20=\x20tex'+'elFetch(mo'+'rphNormalT'+'ex,\x20ivec2('+'morphUV),\x20'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20localNor'+'mal\x20+=\x20mor'+'phNormal;\x0a'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20localN'+'ormal;\x0a}\x0a\x0a'+'#if\x20define'+'d(SKIN)\x20||'+'\x20defined(B'+'ATCH)\x0a\x20\x20\x20\x20'+'mat3\x20getNo'+'rmalMatrix'+'(mat4\x20mode'+'lMatrix)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20mat3'+'(modelMatr'+'ix[0].xyz,'+'\x20modelMatr'+'ix[1].xyz,'+'\x20modelMatr'+'ix[2].xyz)'+';\x0a\x20\x20\x20\x20}\x0a#e'+'lif\x20define'+'d(INSTANCI'+'NG)\x0a\x20\x20\x20\x20ma'+'t3\x20getNorm'+'alMatrix(m'+'at4\x20modelM'+'atrix)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20mat3(m'+'odelMatrix'+'[0].xyz,\x20m'+('odelMatrix'+'[1].xyz,\x20m'+'odelMatrix'+'[2].xyz);\x0a'+'\x20\x20\x20\x20}\x0a#els'+'e\x0a\x20\x20\x20\x20mat3'+'\x20getNormal'+'Matrix(mat'+'4\x20modelMat'+'rix)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20matrix_n'+'ormal;\x0a\x20\x20\x20'+'\x20}\x0a#endif\x0a'),HP='\x0a#ifdef\x20ST'+'D_NORMAL_T'+'EXTURE\x0a\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20mater'+'ial_bumpin'+'ess;\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'STD_NORMAL'+'DETAIL_TEX'+'TURE\x0a\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20materia'+'l_normalDe'+'tailMapBum'+'piness;\x0a\x0a\x20'+'\x20\x20\x20vec3\x20bl'+'endNormals'+'(vec3\x20n1,\x20'+'vec3\x20n2)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20https://'+'blog.selfs'+'hadow.com/'+'publicatio'+'ns/blendin'+'g-in-detai'+'l/#detail-'+'oriented\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20n1\x20'+'+=\x20vec3(0,'+'\x200,\x201);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20n2\x20*'+'=\x20vec3(-1,'+'\x20-1,\x201);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20n1\x20*\x20d'+'ot(n1,\x20n2)'+'\x20/\x20n1.z\x20-\x20'+'n2;\x0a\x20\x20\x20\x20}\x0a'+'#endif\x0a\x0avo'+'id\x20getNorm'+'al()\x20{\x0a#if'+'def\x20STD_NO'+'RMAL_TEXTU'+'RE\x0a\x20\x20\x20\x20vec'+'3\x20normalMa'+'p\x20=\x20{STD_N'+'ORMAL_TEXT'+'URE_DECODE'+'}(texture2'+'DBias({STD'+'_NORMAL_TE'+'XTURE_NAME'+'},\x20{STD_NO'+'RMAL_TEXTU'+'RE_UV},\x20te'+'xtureBias)'+');\x0a\x20\x20\x20\x20nor'+'malMap\x20=\x20m'+'ix(vec3(0.'+'0,\x200.0,\x201.'+'0),\x20normal'+'Map,\x20mater'+'ial_bumpin'+'ess);\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_NORMALDE'+'TAIL_TEXTU'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec3\x20norm'+'alDetailMa'+'p\x20=\x20{STD_N'+'ORMALDETAI'+'L_TEXTURE_'+'DECODE}(te'+'xture2DBia'+'s({STD_NOR'+'MALDETAIL_'+'TEXTURE_NA'+'ME},\x20{STD_'+'NORMALDETA'+'IL_TEXTURE'+'_UV},\x20text'+'ureBias));'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20n'+'ormalDetai'+'lMap\x20=\x20mix'+'(vec3(0.0,'+'\x200.0,\x201.0)'+',\x20normalDe'+'tailMap,\x20m'+'aterial_no'+'rmalDetail'+'MapBumpine'+'ss);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20normalM'+'ap\x20=\x20blend'+'Normals(no'+'rmalMap,\x20n'+('ormalDetai'+'lMap);\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20dNormal'+'W\x20=\x20normal'+'ize(dTBN\x20*'+'\x20normalMap'+');\x0a#else\x0a\x20'+'\x20\x20\x20dNormal'+'W\x20=\x20dVerte'+'xNormalW;\x0a'+'#endif\x0a}\x0a'),WP='\x0auniform\x20f'+'loat\x20mater'+'ial_opacit'+'y;\x0a\x0avoid\x20g'+'etOpacity('+')\x20{\x0a\x20\x20\x20\x20dA'+'lpha\x20=\x20mat'+'erial_opac'+'ity;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_OPACITY_T'+'EXTURE\x0a\x20\x20\x20'+'\x20dAlpha\x20*='+'\x20texture2D'+'Bias({STD_'+'OPACITY_TE'+'XTURE_NAME'+'},\x20{STD_OP'+'ACITY_TEXT'+'URE_UV},\x20t'+'extureBias'+').{STD_OPA'+'CITY_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'OPACITY_VE'+'RTEX\x0a\x20\x20\x20\x20d'+'Alpha\x20*=\x20c'+'lamp(vVert'+'exColor.{S'+'TD_OPACITY'+'_VERTEX_CH'+'ANNEL},\x200.'+'0,\x201.0);\x0a\x20'+'\x20\x20\x20#endif\x0a'+'}\x0a',$P='\x0a\x0a#if\x20STD_'+'OPACITY_DI'+'THER\x20==\x20BA'+'YER8\x0a\x20\x20\x20\x20#'+'include\x20\x22b'+'ayerPS\x22\x0a#e'+'ndif\x0a\x0aunif'+'orm\x20vec4\x20b'+'lueNoiseJi'+'tter;\x0a\x0a#if'+'\x20STD_OPACI'+'TY_DITHER\x20'+'==\x20BLUENOI'+'SE\x0a\x20\x20\x20\x20uni'+'form\x20sampl'+'er2D\x20blueN'+'oiseTex32;'+'\x0a#endif\x0a\x0av'+'oid\x20opacit'+'yDither(fl'+'oat\x20alpha,'+'\x20float\x20id)'+'\x20{\x0a\x20\x20\x20\x20#if'+'\x20STD_OPACI'+'TY_DITHER\x20'+'==\x20BAYER8\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'loat\x20noise'+'\x20=\x20bayer8('+'floor(mod('+'gl_FragCoo'+'rd.xy\x20+\x20bl'+'ueNoiseJit'+'ter.xy\x20+\x20i'+'d,\x208.0)))\x20'+'/\x2064.0;\x0a\x0a\x20'+'\x20\x20\x20#else\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20STD_OPAC'+'ITY_DITHER'+'\x20==\x20BLUENO'+'ISE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec2'+'\x20uv\x20=\x20frac'+'t(gl_FragC'+'oord.xy\x20/\x20'+'32.0\x20+\x20blu'+'eNoiseJitt'+'er.xy\x20+\x20id'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20noise\x20=\x20t'+'exture2DLo'+'d(blueNois'+'eTex32,\x20uv'+',\x200.0).y;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20ST'+'D_OPACITY_'+'DITHER\x20==\x20'+'IGNNOISE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20based\x20'+'on\x20https:/'+'/www.iryok'+'u.com/next'+'-generatio'+'n-post-pro'+'cessing-in'+'-call-of-d'+'uty-advanc'+'ed-warfare'+'/\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20m'+'agic\x20=\x20vec'+'3(0.067110'+'56,\x200.0058'+'3715,\x2052.9'+'829189);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20noi'+'se\x20=\x20fract'+'(magic.z\x20*'+'\x20fract(dot'+'(gl_FragCo'+'ord.xy\x20+\x20b'+'lueNoiseJi'+'tter.xy\x20+\x20'+'id,\x20magic.'+'xy)));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20convert\x20'+'the\x20noise\x20'+'to\x20linear\x20'+'space,\x20as\x20'+'that\x20is\x20sp'+'ecified\x20in'+('\x20sRGB\x20spac'+'e\x20(stores\x20'+'perceptual'+'\x20values)\x0a\x20'+'\x20\x20\x20noise\x20='+'\x20pow(noise'+',\x202.2);\x0a\x0a\x20'+'\x20\x20\x20if\x20(alp'+'ha\x20<\x20noise'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'discard;\x0a}'+'\x0a'),XP='\x0a',qP='\x0a\x0a#if\x20LIT_'+'BLEND_TYPE'+'\x20==\x20NORMAL'+'\x20||\x20LIT_BL'+'END_TYPE\x20='+'=\x20ADDITIVE'+'ALPHA\x20||\x20d'+'efined(LIT'+'_ALPHA_TO_'+'COVERAGE)\x0a'+'\x0a\x20\x20\x20\x20gl_Fr'+'agColor.a\x20'+'=\x20litArgs_'+'opacity;\x0a\x0a'+'#elif\x20LIT_'+'BLEND_TYPE'+'\x20==\x20PREMUL'+'TIPLIED\x0a\x0a\x20'+'\x20\x20\x20gl_Frag'+'Color.rgb\x20'+'*=\x20litArgs'+'_opacity;\x0a'+'\x20\x20\x20\x20gl_Fra'+'gColor.a\x20='+'\x20litArgs_o'+'pacity;\x0a\x0a#'+'else\x0a\x0a\x20\x20\x20\x20'+'gl_FragCol'+'or.a\x20=\x201.0'+';\x0a\x0a#endif\x0a',jP='\x0avarying\x20v'+'ec2\x20vUv0;\x0a'+'\x0auniform\x20s'+'ampler2D\x20s'+'ource;\x0a\x0avo'+'id\x20main(vo'+'id)\x20{\x0a\x20\x20\x20\x20'+'gl_FragCol'+'or\x20=\x20textu'+'re2D(sourc'+'e,\x20vUv0);\x0a'+'}\x0a',YP='\x0a\x0auniform\x20'+'vec3\x20mater'+'ial_sheen;'+'\x0a\x0avoid\x20get'+'Sheen()\x20{\x0a'+'\x20\x20\x20\x20vec3\x20s'+'heenColor\x20'+'=\x20material'+'_sheen;\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_SHEEN_'+'TEXTURE\x0a\x20\x20'+'\x20\x20sheenCol'+'or\x20*=\x20{STD'+'_SHEEN_TEX'+'TURE_DECOD'+'E}(texture'+'2DBias({ST'+'D_SHEEN_TE'+'XTURE_NAME'+'},\x20{STD_SH'+'EEN_TEXTUR'+'E_UV},\x20tex'+'tureBias))'+'.{STD_SHEE'+'N_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_SHE'+'EN_VERTEX\x0a'+'\x20\x20\x20\x20sheenC'+'olor\x20*=\x20sa'+'turate(vVe'+'rtexColor.'+'{STD_SHEEN'+'_VERTEX_CH'+'ANNEL});\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20sSpec'+'ularity\x20=\x20'+'sheenColor'+';\x0a}\x0a',KP='\x0auniform\x20f'+'loat\x20mater'+'ial_sheenG'+'loss;\x0a\x0avoi'+'d\x20getSheen'+'Glossiness'+'()\x20{\x0a\x20\x20\x20\x20f'+'loat\x20sheen'+'Glossiness'+'\x20=\x20materia'+'l_sheenGlo'+'ss;\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SHEENGLOSS'+'_TEXTURE\x0a\x20'+'\x20\x20\x20sheenGl'+'ossiness\x20*'+'=\x20texture2'+'DBias({STD'+'_SHEENGLOS'+'S_TEXTURE_'+'NAME},\x20{ST'+'D_SHEENGLO'+'SS_TEXTURE'+'_UV},\x20text'+'ureBias).{'+'STD_SHEENG'+'LOSS_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SHEENGLOSS'+'_VERTEX\x0a\x20\x20'+'\x20\x20sheenGlo'+'ssiness\x20*='+'\x20saturate('+'vVertexCol'+'or.{STD_SH'+'EENGLOSS_V'+'ERTEX_CHAN'+'NEL});\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_SHEENG'+'LOSS_INVER'+'T\x0a\x20\x20\x20\x20shee'+'nGlossines'+'s\x20=\x201.0\x20-\x20'+'sheenGloss'+'iness;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20sGlossi'+'ness\x20=\x20she'+'enGlossine'+'ss\x20+\x200.000'+'0001;\x0a}\x0a',ZP='\x0auniform\x20f'+'loat\x20mater'+'ial_height'+'MapFactor;'+'\x0a\x0avoid\x20get'+'Parallax()'+'\x20{\x0a\x20\x20\x20\x20flo'+'at\x20paralla'+'xScale\x20=\x20m'+'aterial_he'+'ightMapFac'+'tor;\x0a\x0a\x20\x20\x20\x20'+'float\x20heig'+'ht\x20=\x20textu'+'re2DBias({'+'STD_HEIGHT'+'_TEXTURE_N'+'AME},\x20{STD'+'_HEIGHT_TE'+'XTURE_UV},'+'\x20textureBi'+'as).{STD_H'+'EIGHT_TEXT'+'URE_CHANNE'+'L};\x0a\x20\x20\x20\x20he'+'ight\x20=\x20hei'+'ght\x20*\x20para'+'llaxScale\x20'+'-\x20parallax'+'Scale\x20*\x200.'+'5;\x0a\x20\x20\x20\x20vec'+'3\x20viewDirT'+'\x20=\x20dViewDi'+'rW\x20*\x20dTBN;'+'\x0a\x0a\x20\x20\x20\x20view'+'DirT.z\x20+=\x20'+'0.42;\x0a\x20\x20\x20\x20'+'dUvOffset\x20'+'=\x20height\x20*'+'\x20(viewDirT'+'.xy\x20/\x20view'+'DirT.z);\x0a}'+'\x0a',QP='\x0auniform\x20u'+'int\x20meshIn'+'stanceId;\x0a'+'\x0avec4\x20getP'+'ickOutput('+')\x20{\x0a\x20\x20\x20\x20co'+'nst\x20vec4\x20i'+'nv\x20=\x20vec4('+'1.0\x20/\x20255.'+'0);\x0a\x20\x20\x20\x20co'+'nst\x20uvec4\x20'+'shifts\x20=\x20u'+'vec4(16,\x208'+',\x200,\x2024);\x0a'+'\x20\x20\x20\x20uvec4\x20'+'col\x20=\x20(uve'+'c4(meshIns'+'tanceId)\x20>'+'>\x20shifts)\x20'+'&\x20uvec4(0x'+'ff);\x0a\x20\x20\x20\x20r'+'eturn\x20vec4'+'(col)\x20*\x20in'+'v;\x0a}\x0a',JP='\x0avoid\x20getR'+'eflDir(vec'+'3\x20worldNor'+'mal,\x20vec3\x20'+'viewDir,\x20f'+'loat\x20gloss'+',\x20mat3\x20tbn'+')\x20{\x0a\x20\x20\x20\x20dR'+'eflDirW\x20=\x20'+'normalize('+'-reflect(v'+'iewDir,\x20wo'+'rldNormal)'+');\x0a}\x0a',e2='\x0avoid\x20getR'+'eflDir(vec'+'3\x20worldNor'+'mal,\x20vec3\x20'+'viewDir,\x20f'+'loat\x20gloss'+',\x20mat3\x20tbn'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20roughn'+'ess\x20=\x20sqrt'+'(1.0\x20-\x20min'+'(gloss,\x201.'+'0));\x0a\x0a\x20\x20\x20\x20'+'vec2\x20direc'+'tion\x20=\x20dAn'+'isotropyRo'+'tation;\x0a\x20\x20'+'\x20\x20vec3\x20ani'+'sotropicT\x20'+'=\x20normaliz'+'e(tbn\x20*\x20ve'+'c3(directi'+'on,\x200.0));'+'\x0a\x20\x20\x20\x20vec3\x20'+'anisotropi'+'cB\x20=\x20norma'+'lize(cross'+'(tbn[2],\x20a'+'nisotropic'+'T));\x0a\x0a\x20\x20\x20\x20'+'float\x20anis'+'otropy\x20=\x20d'+'Anisotropy'+';\x0a\x20\x20\x20\x20vec3'+'\x20anisotrop'+'icDirectio'+'n\x20=\x20anisot'+'ropicB;\x0a\x20\x20'+'\x20\x20vec3\x20ani'+'sotropicTa'+'ngent\x20=\x20cr'+'oss(anisot'+'ropicDirec'+'tion,\x20view'+'Dir);\x0a\x20\x20\x20\x20'+'vec3\x20aniso'+'tropicNorm'+'al\x20=\x20cross'+'(anisotrop'+'icTangent,'+'\x20anisotrop'+'icDirectio'+'n);\x0a\x20\x20\x20\x20fl'+'oat\x20bendFa'+'ctor\x20=\x201.0'+'\x20-\x20anisotr'+'opy\x20*\x20(1.0'+'\x20-\x20roughne'+'ss);\x0a\x20\x20\x20\x20f'+'loat\x20bendF'+'actor4\x20=\x20b'+'endFactor\x20'+'*\x20bendFact'+'or\x20*\x20bendF'+'actor\x20*\x20be'+'ndFactor;\x0a'+'\x20\x20\x20\x20vec3\x20b'+'entNormal\x20'+'=\x20normaliz'+'e(mix(norm'+'alize(anis'+'otropicNor'+'mal),\x20norm'+'alize(worl'+'dNormal),\x20'+'bendFactor'+'4));\x0a\x20\x20\x20\x20d'+'ReflDirW\x20='+'\x20reflect(-'+'viewDir,\x20b'+'entNormal)'+';\x0a}\x0a',t2='\x0a#ifdef\x20LI'+'T_CLEARCOA'+'T\x0avoid\x20add'+'Reflection'+'CC(vec3\x20re'+'flDir,\x20flo'+'at\x20gloss)\x20'+'{\x0a\x20\x20\x20\x20ccRe'+'flection\x20+'+'=\x20calcRefl'+'ection(ref'+'lDir,\x20glos'+'s);\x0a}\x0a#end'+'if\x0a',s2='\x0auniform\x20s'+'amplerCube'+'\x20texture_c'+'ubeMap;\x0aun'+'iform\x20floa'+'t\x20material'+'_reflectiv'+'ity;\x0a\x0avec3'+'\x20calcRefle'+'ction(vec3'+'\x20reflDir,\x20'+'float\x20glos'+'s)\x20{\x0a\x20\x20\x20\x20v'+'ec3\x20lookup'+'Vec\x20=\x20cube'+'MapProject'+'(reflDir);'+'\x0a\x20\x20\x20\x20looku'+'pVec.x\x20*=\x20'+'-1.0;\x0a\x20\x20\x20\x20'+'return\x20{re'+'flectionDe'+'code}(text'+'ureCube(te'+'xture_cube'+'Map,\x20looku'+'pVec));\x0a}\x0a'+'\x0avoid\x20addR'+'eflection('+'vec3\x20reflD'+'ir,\x20float\x20'+'gloss)\x20{\x20\x20'+'\x20\x0a\x20\x20\x20\x20dRef'+'lection\x20+='+'\x20vec4(calc'+'Reflection'+'(reflDir,\x20'+'gloss),\x20ma'+'terial_ref'+'lectivity)'+';\x0a}\x0a',i2='\x0a#ifndef\x20E'+'NV_ATLAS\x0a\x20'+'\x20\x20\x20#define'+'\x20ENV_ATLAS'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20texture'+'_envAtlas;'+'\x0a#endif\x0aun'+'iform\x20samp'+'lerCube\x20te'+'xture_cube'+'Map;\x0aunifo'+'rm\x20float\x20m'+'aterial_re'+'flectivity'+';\x0a\x0avec3\x20ca'+'lcReflecti'+'on(vec3\x20re'+'flDir,\x20flo'+'at\x20gloss)\x20'+'{\x0a\x20\x20\x20\x20vec3'+'\x20dir\x20=\x20cub'+'eMapProjec'+'t(reflDir)'+'\x20*\x20vec3(-1'+'.0,\x201.0,\x201'+'.0);\x0a\x20\x20\x20\x20v'+'ec2\x20uv\x20=\x20t'+'oSpherical'+'Uv(dir);\x0a\x0a'+'\x20\x20\x20\x20//\x20cal'+'culate\x20rou'+'ghness\x20lev'+'el\x0a\x20\x20\x20\x20flo'+'at\x20level\x20='+'\x20saturate('+'1.0\x20-\x20glos'+'s)\x20*\x205.0;\x0a'+'\x20\x20\x20\x20float\x20'+'ilevel\x20=\x20f'+'loor(level'+');\x0a\x20\x20\x20\x20flo'+'at\x20flevel\x20'+'=\x20level\x20-\x20'+'ilevel;\x0a\x0a\x20'+'\x20\x20\x20vec3\x20sh'+'arp\x20=\x20{ref'+'lectionCub'+'emapDecode'+'}(textureC'+'ube(textur'+'e_cubeMap,'+'\x20dir));\x0a\x20\x20'+'\x20\x20vec3\x20rou'+'ghA\x20=\x20{ref'+'lectionDec'+'ode}(textu'+'re2D(textu'+'re_envAtla'+'s,\x20mapRoug'+'hnessUv(uv'+',\x20ilevel))'+');\x0a\x20\x20\x20\x20vec'+'3\x20roughB\x20='+'\x20{reflecti'+'onDecode}('+'texture2D('+'texture_en'+'vAtlas,\x20ma'+'pRoughness'+'Uv(uv,\x20ile'+'vel\x20+\x201.0)'+'));\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20proc'+'essEnviron'+'ment(mix(s'+'harp,\x20mix('+'roughA,\x20ro'+'ughB,\x20flev'+'el),\x20min(l'+'evel,\x201.0)'+'));\x0a}\x0a\x0avoi'+'d\x20addRefle'+'ction(vec3'+'\x20reflDir,\x20'+'float\x20glos'+'s)\x20{\x20\x20\x20\x0a\x20\x20'+'\x20\x20dReflect'+'ion\x20+=\x20vec'+'4(calcRefl'+'ection(ref'+'lDir,\x20glos'+'s),\x20materi'+'al_reflect'+'ivity);\x0a}\x0a',r2='\x0a#ifndef\x20E'+'NV_ATLAS\x0a#'+'define\x20ENV'+'_ATLAS\x0a\x20\x20\x20'+'\x20uniform\x20s'+'ampler2D\x20t'+'exture_env'+'Atlas;\x0a#en'+'dif\x0aunifor'+'m\x20float\x20ma'+'terial_ref'+'lectivity;'+'\x0a\x0a//\x20calcu'+'late\x20mip\x20l'+'evel\x20for\x20s'+'hiny\x20refle'+'ction\x20give'+'n\x20equirect'+'\x20coords\x20uv'+'.\x0afloat\x20sh'+'inyMipLeve'+'l(vec2\x20uv)'+'\x20{\x0a\x20\x20\x20\x20vec'+'2\x20dx\x20=\x20dFd'+'x(uv);\x0a\x20\x20\x20'+'\x20vec2\x20dy\x20='+'\x20dFdy(uv);'+'\x0a\x0a\x20\x20\x20\x20//\x20c'+'alculate\x20s'+'econd\x20dF\x20a'+'t\x20180\x20degr'+'ees\x0a\x20\x20\x20\x20ve'+'c2\x20uv2\x20=\x20v'+'ec2(fract('+'uv.x\x20+\x200.5'+'),\x20uv.y);\x0a'+'\x20\x20\x20\x20vec2\x20d'+'x2\x20=\x20dFdx('+'uv2);\x0a\x20\x20\x20\x20'+'vec2\x20dy2\x20='+'\x20dFdy(uv2)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'calculate\x20'+'min\x20of\x20bot'+'h\x20sets\x20of\x20'+'dF\x20to\x20hand'+'le\x20discont'+'inuity\x20at\x20'+'the\x20azim\x20e'+'dge\x0a\x20\x20\x20\x20fl'+'oat\x20maxd\x20='+'\x20min(max(d'+'ot(dx,\x20dx)'+',\x20dot(dy,\x20'+'dy)),\x20max('+'dot(dx2,\x20d'+'x2),\x20dot(d'+'y2,\x20dy2)))'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20clamp('+'0.5\x20*\x20log2'+'(maxd)\x20-\x201'+'.0\x20+\x20textu'+'reBias,\x200.'+'0,\x205.0);\x0a}'+'\x0a\x0avec3\x20cal'+'cReflectio'+'n(vec3\x20ref'+'lDir,\x20floa'+'t\x20gloss)\x20{'+'\x0a\x20\x20\x20\x20vec3\x20'+'dir\x20=\x20cube'+'MapProject'+'(reflDir)\x20'+'*\x20vec3(-1.'+'0,\x201.0,\x201.'+'0);\x0a\x20\x20\x20\x20ve'+'c2\x20uv\x20=\x20to'+'SphericalU'+'v(dir);\x0a\x0a\x20'+'\x20\x20\x20//\x20calc'+'ulate\x20roug'+'hness\x20leve'+'l\x0a\x20\x20\x20\x20floa'+'t\x20level\x20=\x20'+'saturate(1'+'.0\x20-\x20gloss'+')\x20*\x205.0;\x0a\x20'+'\x20\x20\x20float\x20i'+'level\x20=\x20fl'+'oor(level)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'accessing\x20'+'the\x20shiny\x20'+'(top\x20level'+')\x20reflecti'+'on\x20-\x20perfo'+'rm\x20manual\x20'+'mipmap\x20loo'+'kup\x0a\x20\x20\x20\x20fl'+('oat\x20level2'+'\x20=\x20shinyMi'+'pLevel(uv\x20'+'*\x20atlasSiz'+'e);\x0a\x20\x20\x20\x20fl'+'oat\x20ilevel'+'2\x20=\x20floor('+'level2);\x0a\x0a'+'\x20\x20\x20\x20vec2\x20u'+'v0,\x20uv1;\x0a\x20'+'\x20\x20\x20float\x20w'+'eight;\x0a\x20\x20\x20'+'\x20if\x20(ileve'+'l\x20==\x200.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'uv0\x20=\x20mapS'+'hinyUv(uv,'+'\x20ilevel2);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'v1\x20=\x20mapSh'+'inyUv(uv,\x20'+'ilevel2\x20+\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20weight'+'\x20=\x20level2\x20'+'-\x20ilevel2;'+'\x0a\x20\x20\x20\x20}\x20els'+'e\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20acces'+'sing\x20rough'+'\x20reflectio'+'n\x20-\x20just\x20s'+'ample\x20the\x20'+'same\x20part\x20'+'twice\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uv0\x20=\x20'+'uv1\x20=\x20mapR'+'oughnessUv'+'(uv,\x20ileve'+'l);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20weight\x20='+'\x200.0;\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20vec'+'3\x20linearA\x20'+'=\x20{reflect'+'ionDecode}'+'(texture2D'+'(texture_e'+'nvAtlas,\x20u'+'v0));\x0a\x20\x20\x20\x20'+'vec3\x20linea'+'rB\x20=\x20{refl'+'ectionDeco'+'de}(textur'+'e2D(textur'+'e_envAtlas'+',\x20uv1));\x0a\x20'+'\x20\x20\x20vec3\x20li'+'near0\x20=\x20mi'+'x(linearA,'+'\x20linearB,\x20'+'weight);\x0a\x20'+'\x20\x20\x20vec3\x20li'+'near1\x20=\x20{r'+'eflectionD'+'ecode}(tex'+'ture2D(tex'+'ture_envAt'+'las,\x20mapRo'+'ughnessUv('+'uv,\x20ilevel'+'\x20+\x201.0)));'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20process'+'Environmen'+'t(mix(line'+'ar0,\x20linea'+'r1,\x20level\x20'+'-\x20ilevel))'+';\x0a}\x0a\x0avoid\x20'+'addReflect'+'ion(vec3\x20r'+'eflDir,\x20fl'+'oat\x20gloss)'+'\x20{\x20\x20\x20\x0a\x20\x20\x20\x20'+'dReflectio'+'n\x20+=\x20vec4('+'calcReflec'+'tion(reflD'+'ir,\x20gloss)'+',\x20material'+'_reflectiv'+'ity);\x0a}\x0a'),a2='\x0a#ifndef\x20V'+'IEWMATRIX\x0a'+'\x20\x20\x20\x20#defin'+'e\x20VIEWMATR'+'IX\x0a\x20\x20\x20\x20uni'+'form\x20mat4\x20'+'matrix_vie'+'w;\x0a#endif\x0a'+'uniform\x20sa'+'mpler2D\x20te'+'xture_sphe'+'reMap;\x0auni'+'form\x20float'+'\x20material_'+'reflectivi'+'ty;\x0a\x0avec3\x20'+'calcReflec'+'tion(vec3\x20'+'reflDir,\x20f'+'loat\x20gloss'+')\x20{\x0a\x20\x20\x20\x20ve'+'c3\x20reflDir'+'V\x20=\x20(mat3('+'matrix_vie'+'w)\x20*\x20reflD'+'ir);\x0a\x0a\x20\x20\x20\x20'+'float\x20m\x20=\x20'+'2.0\x20*\x20sqrt'+'(dot(reflD'+'irV.xy,\x20re'+'flDirV.xy)'+'\x20+\x20(reflDi'+'rV.z\x20+\x201.0'+')\x20*\x20(reflD'+'irV.z\x20+\x201.'+'0));\x0a\x20\x20\x20\x20v'+'ec2\x20sphere'+'MapUv\x20=\x20re'+'flDirV.xy\x20'+'/\x20m\x20+\x200.5;'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20{reflec'+'tionDecode'+'}(texture2'+'D(texture_'+'sphereMap,'+'\x20sphereMap'+'Uv));\x0a}\x0a\x0av'+'oid\x20addRef'+'lection(ve'+'c3\x20reflDir'+',\x20float\x20gl'+'oss)\x20{\x20\x20\x20\x0a'+'\x20\x20\x20\x20dRefle'+'ction\x20+=\x20v'+'ec4(calcRe'+'flection(r'+'eflDir,\x20gl'+'oss),\x20mate'+'rial_refle'+'ctivity);\x0a'+'}\x0a',n2='\x0a\x0avoid\x20add'+'Reflection'+'Sheen(vec3'+'\x20worldNorm'+'al,\x20vec3\x20v'+'iewDir,\x20fl'+'oat\x20gloss)'+'\x20{\x0a\x20\x20\x20\x20flo'+'at\x20NoV\x20=\x20d'+'ot(worldNo'+'rmal,\x20view'+'Dir);\x0a\x20\x20\x20\x20'+'float\x20alph'+'aG\x20=\x20gloss'+'\x20*\x20gloss;\x0a'+'\x0a\x20\x20\x20\x20//\x20Av'+'oid\x20using\x20'+'a\x20LUT\x20and\x20'+'approximat'+'e\x20the\x20valu'+'es\x20analyti'+'cally\x0a\x20\x20\x20\x20'+'float\x20a\x20=\x20'+'gloss\x20<\x200.'+'25\x20?\x20-339.'+'2\x20*\x20alphaG'+'\x20+\x20161.4\x20*'+'\x20gloss\x20-\x202'+'5.9\x20:\x20-8.4'+'8\x20*\x20alphaG'+'\x20+\x2014.3\x20*\x20'+'gloss\x20-\x209.'+'95;\x0a\x20\x20\x20\x20fl'+'oat\x20b\x20=\x20gl'+'oss\x20<\x200.25'+'\x20?\x2044.0\x20*\x20'+'alphaG\x20-\x202'+'3.7\x20*\x20glos'+'s\x20+\x203.26\x20:'+'\x201.97\x20*\x20al'+'phaG\x20-\x203.2'+'7\x20*\x20gloss\x20'+'+\x200.72;\x0a\x20\x20'+'\x20\x20float\x20DG'+'\x20=\x20exp(\x20a\x20'+'*\x20NoV\x20+\x20b\x20'+')\x20+\x20(\x20glos'+'s\x20<\x200.25\x20?'+'\x200.0\x20:\x200.1'+'\x20*\x20(\x20gloss'+'\x20-\x200.25\x20)\x20'+');\x0a\x20\x20\x20\x20sRe'+'flection\x20+'+'=\x20calcRefl'+'ection(wor'+'ldNormal,\x20'+'0.0)\x20*\x20sat'+'urate(DG);'+'\x0a}\x0a',o2='\x0avec3\x20refr'+'act2(vec3\x20'+'viewVec,\x20v'+'ec3\x20normal'+',\x20float\x20IO'+'R)\x20{\x0a\x20\x20\x20\x20f'+'loat\x20vn\x20=\x20'+'dot(viewVe'+'c,\x20normal)'+';\x0a\x20\x20\x20\x20floa'+'t\x20k\x20=\x201.0\x20'+'-\x20IOR\x20*\x20IO'+'R\x20*\x20(1.0\x20-'+'\x20vn\x20*\x20vn);'+'\x0a\x20\x20\x20\x20vec3\x20'+'refrVec\x20=\x20'+'IOR\x20*\x20view'+'Vec\x20-\x20(IOR'+'\x20*\x20vn\x20+\x20sq'+'rt(k))\x20*\x20n'+'ormal;\x0a\x20\x20\x20'+'\x20return\x20re'+'frVec;\x0a}\x0a\x0a'+'void\x20addRe'+'fraction(\x0a'+'\x20\x20\x20\x20vec3\x20w'+'orldNormal'+',\x20\x0a\x20\x20\x20\x20vec'+'3\x20viewDir,'+'\x20\x0a\x20\x20\x20\x20floa'+'t\x20thicknes'+'s,\x20\x0a\x20\x20\x20\x20fl'+'oat\x20gloss,'+'\x20\x0a\x20\x20\x20\x20vec3'+'\x20speculari'+'ty,\x20\x0a\x20\x20\x20\x20v'+'ec3\x20albedo'+',\x20\x0a\x20\x20\x20\x20flo'+'at\x20transmi'+'ssion,\x0a\x20\x20\x20'+'\x20float\x20ref'+'ractionInd'+'ex,\x0a\x20\x20\x20\x20fl'+'oat\x20disper'+'sion\x0a#if\x20d'+'efined(LIT'+'_IRIDESCEN'+'CE)\x0a\x20\x20\x20\x20,\x20'+'vec3\x20iride'+'scenceFres'+'nel,\x0a\x20\x20\x20\x20f'+'loat\x20iride'+'scenceInte'+'nsity\x0a#end'+'if\x20\x0a)\x20{\x0a\x20\x20'+'\x20\x20//\x20use\x20s'+'ame\x20reflec'+'tion\x20code\x20'+'with\x20refra'+'ction\x20vect'+'or\x0a\x20\x20\x20\x20vec'+'4\x20tmpRefl\x20'+'=\x20dReflect'+'ion;\x0a\x20\x20\x20\x20v'+'ec3\x20reflec'+'tionDir\x20=\x20'+'refract2(-'+'viewDir,\x20w'+'orldNormal'+',\x20refracti'+'onIndex);\x0a'+'\x20\x20\x20\x20dRefle'+'ction\x20=\x20ve'+'c4(0);\x0a\x20\x20\x20'+'\x20addReflec'+'tion(refle'+'ctionDir,\x20'+'gloss);\x0a\x20\x20'+'\x20\x20dDiffuse'+'Light\x20=\x20mi'+'x(dDiffuse'+'Light,\x20dRe'+'flection.r'+'gb\x20*\x20albed'+'o,\x20transmi'+'ssion);\x0a\x20\x20'+'\x20\x20dReflect'+'ion\x20=\x20tmpR'+'efl;\x0a}\x0a',l2='\x0auniform\x20f'+'loat\x20mater'+'ial_invAtt'+'enuationDi'+'stance;\x0aun'+'iform\x20vec3'+'\x20material_'+'attenuatio'+'n;\x0a\x0avec3\x20e'+'valRefract'+'ionColor(v'+'ec3\x20refrac'+'tionVector'+',\x20float\x20gl'+'oss,\x20float'+'\x20refractio'+'nIndex)\x20{\x0a'+'\x0a\x20\x20\x20\x20//\x20Th'+'e\x20refracti'+'on\x20point\x20i'+'s\x20the\x20entr'+'y\x20point\x20+\x20'+'vector\x20to\x20'+'exit\x20point'+'\x0a\x20\x20\x20\x20vec4\x20'+'pointOfRef'+'raction\x20=\x20'+'vec4(vPosi'+'tionW\x20+\x20re'+'fractionVe'+'ctor,\x201.0)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'Project\x20to'+'\x20texture\x20s'+'pace\x20so\x20we'+'\x20can\x20sampl'+'e\x20it\x0a\x20\x20\x20\x20v'+'ec4\x20projec'+'tionPoint\x20'+'=\x20matrix_v'+'iewProject'+'ion\x20*\x20poin'+'tOfRefract'+'ion;\x0a\x0a\x20\x20\x20\x20'+'//\x20use\x20bui'+'lt-in\x20getG'+'rabScreenP'+'os\x20functio'+'n\x20to\x20conve'+'rt\x20screen\x20'+'position\x20t'+'o\x20grab\x20tex'+'ture\x20uv\x20co'+'ords\x0a\x20\x20\x20\x20v'+'ec2\x20uv\x20=\x20g'+'etGrabScre'+'enPos(proj'+'ectionPoin'+'t);\x0a\x0a\x20\x20\x20\x20/'+'/\x20Use\x20IOR\x20'+'and\x20roughn'+'ess\x20to\x20sel'+'ect\x20mip\x0a\x20\x20'+'\x20\x20float\x20io'+'rToRoughne'+'ss\x20=\x20(1.0\x20'+'-\x20gloss)\x20*'+'\x20clamp((1.'+'0\x20/\x20refrac'+'tionIndex)'+'\x20*\x202.0\x20-\x202'+'.0,\x200.0,\x201'+'.0);\x0a\x20\x20\x20\x20f'+'loat\x20refra'+'ctionLod\x20='+'\x20log2(uScr'+'eenSize.x)'+'\x20*\x20iorToRo'+'ughness;\x0a\x20'+'\x20\x20\x20vec3\x20re'+'fraction\x20='+'\x20texture2D'+'Lod(uScene'+'ColorMap,\x20'+'uv,\x20refrac'+'tionLod).r'+'gb;\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20refr'+'action;\x0a}\x0a'+'\x0avoid\x20addR'+'efraction('+'\x0a\x20\x20\x20\x20vec3\x20'+'worldNorma'+'l,\x20\x0a\x20\x20\x20\x20ve'+'c3\x20viewDir'+',\x20\x0a\x20\x20\x20\x20flo'+'at\x20thickne'+'ss,\x20\x0a\x20\x20\x20\x20f'+'loat\x20gloss'+',\x20\x0a\x20\x20\x20\x20vec'+('3\x20specular'+'ity,\x20\x0a\x20\x20\x20\x20'+'vec3\x20albed'+'o,\x20\x0a\x20\x20\x20\x20fl'+'oat\x20transm'+'ission,\x0a\x20\x20'+'\x20\x20float\x20re'+'fractionIn'+'dex,\x0a\x20\x20\x20\x20f'+'loat\x20dispe'+'rsion\x0a#if\x20'+'defined(LI'+'T_IRIDESCE'+'NCE)\x0a\x20\x20\x20\x20,'+'\x20vec3\x20irid'+'escenceFre'+'snel,\x0a\x20\x20\x20\x20'+'float\x20irid'+'escenceInt'+'ensity\x0a#en'+'dif\x0a)\x20{\x0a\x0a\x20'+'\x20\x20\x20//\x20Extr'+'act\x20scale\x20'+'from\x20the\x20m'+'odel\x20trans'+'form\x0a\x20\x20\x20\x20v'+'ec3\x20modelS'+'cale;\x0a\x20\x20\x20\x20'+'modelScale'+'.x\x20=\x20lengt'+'h(vec3(mat'+'rix_model['+'0].xyz));\x0a'+'\x20\x20\x20\x20modelS'+'cale.y\x20=\x20l'+'ength(vec3'+'(matrix_mo'+'del[1].xyz'+'));\x0a\x20\x20\x20\x20mo'+'delScale.z'+'\x20=\x20length('+'vec3(matri'+'x_model[2]'+'.xyz));\x0a\x0a\x20'+'\x20\x20\x20//\x20Calc'+'ulate\x20the\x20'+'refraction'+'\x20vector,\x20s'+'caled\x20by\x20t'+'he\x20thickne'+'ss\x20and\x20sca'+'le\x20of\x20the\x20'+'object\x0a\x20\x20\x20'+'\x20vec3\x20scal'+'e\x20=\x20thickn'+'ess\x20*\x20mode'+'lScale;\x0a\x20\x20'+'\x20\x20vec3\x20ref'+'ractionVec'+'tor\x20=\x20norm'+'alize(refr'+'act(-viewD'+'ir,\x20worldN'+'ormal,\x20ref'+'ractionInd'+'ex))\x20*\x20sca'+'le;\x0a\x20\x20\x20\x20ve'+'c3\x20refract'+'ion\x20=\x20eval'+'Refraction'+'Color(refr'+'actionVect'+'or,\x20gloss,'+'\x20refractio'+'nIndex);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_DISPE'+'RSION\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20bas'+'ed\x20on\x20the\x20'+'dispersion'+'\x20material\x20'+'property,\x20'+'calculate\x20'+'modified\x20r'+'efraction\x20'+'index\x20valu'+'es\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20for\x20R\x20'+'and\x20B\x20chan'+'nels\x20and\x20e'+'valuate\x20th'+'e\x20refracti'+'on\x20color\x20f'+'or\x20them.\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20halfSpr'+'ead\x20=\x20(1.0'+'\x20/\x20refract'+'ionIndex\x20-')+('\x201.0)\x20*\x200.'+'025\x20*\x20disp'+'ersion;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20refract'+'ionIndexR\x20'+'=\x20refracti'+'onIndex\x20-\x20'+'halfSpread'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'refraction'+'Vector\x20=\x20n'+'ormalize(r'+'efract(-vi'+'ewDir,\x20wor'+'ldNormal,\x20'+'refraction'+'IndexR))\x20*'+'\x20scale;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20refr'+'action.r\x20='+'\x20evalRefra'+'ctionColor'+'(refractio'+'nVector,\x20g'+'loss,\x20refr'+'actionInde'+'xR).r;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20refracti'+'onIndexB\x20='+'\x20refractio'+'nIndex\x20+\x20h'+'alfSpread;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'efractionV'+'ector\x20=\x20no'+'rmalize(re'+'fract(-vie'+'wDir,\x20worl'+'dNormal,\x20r'+'efractionI'+'ndexB))\x20*\x20'+'scale;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20refra'+'ction.b\x20=\x20'+'evalRefrac'+'tionColor('+'refraction'+'Vector,\x20gl'+'oss,\x20refra'+'ctionIndex'+'B).b;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20//\x20Trans'+'mittance\x20i'+'s\x20our\x20fina'+'l\x20refracti'+'on\x20color\x0a\x20'+'\x20\x20\x20vec3\x20tr'+'ansmittanc'+'e;\x0a\x20\x20\x20\x20if\x20'+'(material_'+'invAttenua'+'tionDistan'+'ce\x20!=\x200.0)'+'\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'attenuatio'+'n\x20=\x20-log(m'+'aterial_at'+'tenuation)'+'\x20*\x20materia'+'l_invAtten'+'uationDist'+'ance;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20transm'+'ittance\x20=\x20'+'exp(-atten'+'uation\x20*\x20l'+'ength(refr'+'actionVect'+'or));\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20else'+'\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20trans'+'mittance\x20='+'\x20refractio'+'n;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20App'+'ly\x20fresnel'+'\x20effect\x20on'+'\x20refractio'+'n\x0a\x20\x20\x20\x20vec3'+'\x20fresnel\x20='+'\x20vec3(1.0)'+'\x20-\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20getFresn'+'el(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dot(')+('viewDir,\x20w'+'orldNormal'+'),\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20glos'+'s,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20spec'+'ularity\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(LI'+'T_IRIDESCE'+'NCE)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20,\x20i'+'ridescence'+'Fresnel,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20iridescen'+'ceIntensit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20);\x0a\x20\x20'+'\x20\x20dDiffuse'+'Light\x20=\x20mi'+'x(dDiffuse'+'Light,\x20ref'+'raction\x20*\x20'+'transmitta'+'nce\x20*\x20fres'+'nel,\x20trans'+'mission);\x0a'+'}\x0a'),c2='\x0a\x0avarying\x20'+'vec2\x20vUv0;'+'\x0a\x0a//\x20sourc'+'e\x0a#ifdef\x20C'+'UBEMAP_SOU'+'RCE\x0a\x20\x20\x20\x20un'+'iform\x20samp'+'lerCube\x20so'+'urceCube;\x0a'+'#else\x0a\x20\x20\x20\x20'+'uniform\x20sa'+'mpler2D\x20so'+'urceTex;\x0a#'+'endif\x0a\x0a#if'+'def\x20USE_SA'+'MPLES_TEX\x0a'+'\x20\x20\x20\x20//\x20sam'+'ples\x0a\x20\x20\x20\x20u'+'niform\x20sam'+'pler2D\x20sam'+'plesTex;\x0a\x20'+'\x20\x20\x20uniform'+'\x20vec2\x20samp'+'lesTexInve'+'rseSize;\x0a#'+'endif\x0a\x0a//\x20'+'params:\x0a//'+'\x20x\x20-\x20targe'+'t\x20cubemap\x20'+'face\x200..6\x0a'+'//\x20y\x20-\x20tar'+'get\x20image\x20'+'total\x20pixe'+'ls\x0a//\x20z\x20-\x20'+'source\x20cub'+'emap\x20size\x0a'+'uniform\x20ve'+'c3\x20params;'+'\x0a\x0afloat\x20ta'+'rgetFace()'+'\x20{\x20return\x20'+'params.x;\x20'+'}\x0afloat\x20ta'+'rgetTotalP'+'ixels()\x20{\x20'+'return\x20par'+'ams.y;\x20}\x0af'+'loat\x20sourc'+'eTotalPixe'+'ls()\x20{\x20ret'+'urn\x20params'+'.z;\x20}\x0a\x0aflo'+'at\x20PI\x20=\x203.'+'1415926535'+'89793;\x0a\x0afl'+'oat\x20satura'+'te(float\x20x'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20clamp'+'(x,\x200.0,\x201'+'.0);\x0a}\x0a\x0a#i'+'nclude\x20\x22de'+'codePS\x22\x0a#i'+'nclude\x20\x22en'+'codePS\x22\x0a\x0a/'+'/--\x20suppor'+'ted\x20projec'+'tions\x0a\x0avec'+'3\x20modifySe'+'ams(vec3\x20d'+'ir,\x20float\x20'+'scale)\x20{\x0a\x20'+'\x20\x20\x20vec3\x20ad'+'ir\x20=\x20abs(d'+'ir);\x0a\x20\x20\x20\x20f'+'loat\x20M\x20=\x20m'+'ax(max(adi'+'r.x,\x20adir.'+'y),\x20adir.z'+');\x0a\x20\x20\x20\x20ret'+'urn\x20dir\x20/\x20'+'M\x20*\x20vec3(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ad'+'ir.x\x20==\x20M\x20'+'?\x201.0\x20:\x20sc'+'ale,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20adir.y\x20'+'==\x20M\x20?\x201.0'+'\x20:\x20scale,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ad'+'ir.z\x20==\x20M\x20'+'?\x201.0\x20:\x20sc'+'ale\x0a\x20\x20\x20\x20);'+'\x0a}\x0a\x0avec2\x20t'+'oSpherical'+'(vec3\x20dir)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20vec2(d'+'ir.xz\x20==\x20v'+'ec2(0.0)\x20?'+('\x200.0\x20:\x20ata'+'n(dir.x,\x20d'+'ir.z),\x20asi'+'n(dir.y));'+'\x0a}\x0a\x0avec3\x20f'+'romSpheric'+'al(vec2\x20uv'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20vec3('+'cos(uv.y)\x20'+'*\x20sin(uv.x'+'),\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'in(uv.y),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20cos('+'uv.y)\x20*\x20co'+'s(uv.x));\x0a'+'}\x0a\x0avec3\x20ge'+'tDirection'+'Equirect()'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20fromSp'+'herical((v'+'ec2(vUv0.x'+',\x201.0\x20-\x20vU'+'v0.y)\x20*\x202.'+'0\x20-\x201.0)\x20*'+'\x20vec2(PI,\x20'+'PI\x20*\x200.5))'+';\x0a}\x0a\x0a//\x20oc'+'tahedral\x20c'+'ode,\x20based'+'\x20on\x20https:'+'//jcgt.org'+'/published'+'/0003/02/0'+'1/\x0a//\x20\x22Sur'+'vey\x20of\x20Eff'+'icient\x20Rep'+'resentatio'+'ns\x20for\x20Ind'+'ependent\x20U'+'nit\x20Vector'+'s\x22\x20by\x20Cigo'+'lle,\x20Donow'+',\x20Evangela'+'kos,\x20Mara,'+'\x20McGuire,\x20'+'Meyer\x0a\x0aflo'+'at\x20signNot'+'Zero(float'+'\x20k){\x0a\x20\x20\x20\x20r'+'eturn(k\x20>='+'\x200.0)\x20?\x201.'+'0\x20:\x20-1.0;\x0a'+'}\x0a\x0avec2\x20si'+'gnNotZero('+'vec2\x20v)\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20vec2(sign'+'NotZero(v.'+'x),\x20signNo'+'tZero(v.y)'+');\x0a}\x0a\x0a//\x20R'+'eturns\x20a\x20u'+'nit\x20vector'+'.\x20Argument'+'\x20o\x20is\x20an\x20o'+'ctahedral\x20'+'vector\x20pac'+'ked\x20via\x20oc'+'tEncode,\x20o'+'n\x20the\x20[-1,'+'\x20+1]\x20squar'+'e\x0avec3\x20oct'+'Decode(vec'+'2\x20o)\x20{\x0a\x20\x20\x20'+'\x20vec3\x20v\x20=\x20'+'vec3(o.x,\x20'+'1.0\x20-\x20abs('+'o.x)\x20-\x20abs'+'(o.y),\x20o.y'+');\x0a\x20\x20\x20\x20if\x20'+'(v.y\x20<\x200.0'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20v.xz\x20=\x20('+'1.0\x20-\x20abs('+'v.zx))\x20*\x20s'+'ignNotZero'+'(v.xz);\x0a\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20re'+'turn\x20norma'+'lize(v);\x0a}'+'\x0a\x0avec3\x20get'+'DirectionO'+'ctahedral('+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20octDe'+'code(vec2(')+('vUv0.x,\x201.'+'0\x20-\x20vUv0.y'+')\x20*\x202.0\x20-\x20'+'1.0);\x0a}\x0a\x0a/'+'/\x20Assumes\x20'+'that\x20v\x20is\x20'+'a\x20unit\x20vec'+'tor.\x20The\x20r'+'esult\x20is\x20a'+'n\x20octahedr'+'al\x20vector\x20'+'on\x20the\x20[-1'+',\x20+1]\x20squa'+'re\x0avec2\x20oc'+'tEncode(in'+'\x20vec3\x20v)\x20{'+'\x0a\x20\x20\x20\x20float'+'\x20l1norm\x20=\x20'+'abs(v.x)\x20+'+'\x20abs(v.y)\x20'+'+\x20abs(v.z)'+';\x0a\x20\x20\x20\x20vec2'+'\x20result\x20=\x20'+'v.xz\x20*\x20(1.'+'0\x20/\x20l1norm'+');\x0a\x20\x20\x20\x20if\x20'+'(v.y\x20<\x200.0'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20result\x20='+'\x20(1.0\x20-\x20ab'+'s(result.y'+'x))\x20*\x20sign'+'NotZero(re'+'sult.xy);\x0a'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'return\x20res'+'ult;\x0a}\x0a\x0a//'+'//////////'+'//////////'+'//////////'+'//////////'+'//////////'+'//////////'+'///////\x0a\x0a#'+'ifdef\x20CUBE'+'MAP_SOURCE'+'\x0a\x20\x20\x20\x20vec4\x20'+'sampleCube'+'map(vec3\x20d'+'ir)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20textureCu'+'be(sourceC'+'ube,\x20modif'+'ySeams(dir'+',\x201.0));\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'vec4\x20sampl'+'eCubemap(v'+'ec2\x20sph)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20samp'+'leCubemap('+'fromSpheri'+'cal(sph));'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20vec4\x20sam'+'pleCubemap'+'(vec3\x20dir,'+'\x20float\x20mip'+'Level)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20textur'+'eCubeLod(s'+'ourceCube,'+'\x20modifySea'+'ms(dir,\x201.'+'0),\x20mipLev'+'el);\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20vec4'+'\x20sampleCub'+'emap(vec2\x20'+'sph,\x20float'+'\x20mipLevel)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20sa'+'mpleCubema'+'p(fromSphe'+'rical(sph)'+',\x20mipLevel'+');\x0a\x20\x20\x20\x20}\x0a#'+'else\x0a\x0a\x20\x20\x20\x20'+'vec4\x20sampl'+'eEquirect('+'vec2\x20sph)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec2\x20uv\x20=\x20'+'sph\x20/\x20vec2'+'(PI\x20*\x202.0,'+'\x20PI)\x20+\x200.5')+(';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20tex'+'ture2D(sou'+'rceTex,\x20ve'+'c2(uv.x,\x201'+'.0\x20-\x20uv.y)'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20vec4\x20s'+'ampleEquir'+'ect(vec3\x20d'+'ir)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20sampleEqu'+'irect(toSp'+'herical(di'+'r));\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20vec4'+'\x20sampleEqu'+'irect(vec2'+'\x20sph,\x20floa'+'t\x20mipLevel'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec2\x20uv\x20'+'=\x20sph\x20/\x20ve'+'c2(PI\x20*\x202.'+'0,\x20PI)\x20+\x200'+'.5;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20t'+'exture2DLo'+'d(sourceTe'+'x,\x20vec2(uv'+'.x,\x201.0\x20-\x20'+'uv.y),\x20mip'+'Level);\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20v'+'ec4\x20sample'+'Equirect(v'+'ec3\x20dir,\x20f'+'loat\x20mipLe'+'vel)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20sampleEq'+'uirect(toS'+'pherical(d'+'ir),\x20mipLe'+'vel);\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20vec'+'4\x20sampleOc'+'tahedral(v'+'ec3\x20dir)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec2\x20uv\x20=\x20o'+'ctEncode(d'+'ir)\x20*\x200.5\x20'+'+\x200.5;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20texture2'+'D(sourceTe'+'x,\x20vec2(uv'+'.x,\x201.0\x20-\x20'+'uv.y));\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20v'+'ec4\x20sample'+'Octahedral'+'(vec2\x20sph)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20sa'+'mpleOctahe'+'dral(fromS'+'pherical(s'+'ph));\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20vec'+'4\x20sampleOc'+'tahedral(v'+'ec3\x20dir,\x20f'+'loat\x20mipLe'+'vel)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec2\x20'+'uv\x20=\x20octEn'+'code(dir)\x20'+'*\x200.5\x20+\x200.'+'5;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20te'+'xture2DLod'+'(sourceTex'+',\x20vec2(uv.'+'x,\x201.0\x20-\x20u'+'v.y),\x20mipL'+'evel);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20ve'+'c4\x20sampleO'+'ctahedral('+'vec2\x20sph,\x20'+'float\x20mipL'+'evel)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20sampleO'+'ctahedral('+'fromSpheri'+'cal(sph),\x20')+('mipLevel);'+'\x0a\x20\x20\x20\x20}\x0a\x0a#e'+'ndif\x0a\x0avec3'+'\x20getDirect'+'ionCubemap'+'()\x20{\x0a\x20\x20\x20\x20v'+'ec2\x20st\x20=\x20v'+'Uv0\x20*\x202.0\x20'+'-\x201.0;\x0a\x20\x20\x20'+'\x20float\x20fac'+'e\x20=\x20target'+'Face();\x0a\x0a\x20'+'\x20\x20\x20vec3\x20ve'+'c;\x0a\x20\x20\x20\x20if\x20'+'(face\x20==\x200'+'.0)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec\x20=\x20'+'vec3(1,\x20-s'+'t.y,\x20-st.x'+');\x0a\x20\x20\x20\x20}\x20e'+'lse\x20if\x20(fa'+'ce\x20==\x201.0)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec\x20=\x20vec'+'3(-1,\x20-st.'+'y,\x20st.x);\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20if\x20(face\x20'+'==\x202.0)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c\x20=\x20vec3(s'+'t.x,\x201,\x20st'+'.y);\x0a\x20\x20\x20\x20}'+'\x20else\x20if\x20('+'face\x20==\x203.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec\x20=\x20v'+'ec3(st.x,\x20'+'-1,\x20-st.y)'+';\x0a\x20\x20\x20\x20}\x20el'+'se\x20if\x20(fac'+'e\x20==\x204.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec\x20=\x20vec3'+'(st.x,\x20-st'+'.y,\x201);\x0a\x20\x20'+'\x20\x20}\x20else\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec\x20=\x20vec3('+'-st.x,\x20-st'+'.y,\x20-1);\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'return\x20nor'+'malize(mod'+'ifySeams(v'+'ec,\x201.0));'+'\x0a}\x0a\x0amat3\x20m'+'atrixFromV'+'ector(vec3'+'\x20n)\x20{\x20//\x20f'+'risvad\x0a\x20\x20\x20'+'\x20float\x20a\x20='+'\x201.0\x20/\x20(1.'+'0\x20+\x20n.z);\x0a'+'\x20\x20\x20\x20float\x20'+'b\x20=\x20-n.x\x20*'+'\x20n.y\x20*\x20a;\x0a'+'\x20\x20\x20\x20vec3\x20b'+'1\x20=\x20vec3(1'+'.0\x20-\x20n.x\x20*'+'\x20n.x\x20*\x20a,\x20'+'b,\x20-n.x);\x0a'+'\x20\x20\x20\x20vec3\x20b'+'2\x20=\x20vec3(b'+',\x201.0\x20-\x20n.'+'y\x20*\x20n.y\x20*\x20'+'a,\x20-n.y);\x0a'+'\x20\x20\x20\x20return'+'\x20mat3(b1,\x20'+'b2,\x20n);\x0a}\x0a'+'\x0amat3\x20matr'+'ixFromVect'+'orSlow(vec'+'3\x20n)\x20{\x0a\x20\x20\x20'+'\x20vec3\x20up\x20='+'\x20(1.0\x20-\x20ab'+'s(n.y)\x20<=\x20'+'0.0000001)'+'\x20?\x20vec3(0.'+'0,\x200.0,\x20n.'+'y\x20>\x200.0\x20?\x20'+'1.0\x20:\x20-1.0'+')\x20:\x20vec3(0'+'.0,\x201.0,\x200'+'.0);\x0a\x20\x20\x20\x20v'+'ec3\x20x\x20=\x20no'+'rmalize(cr'+'oss(up,\x20n)'+');\x0a\x20\x20\x20\x20vec'+'3\x20y\x20=\x20cros')+('s(n,\x20x);\x0a\x20'+'\x20\x20\x20return\x20'+'mat3(x,\x20y,'+'\x20n);\x0a}\x0a\x0ave'+'c4\x20reproje'+'ct()\x20{\x0a\x20\x20\x20'+'\x20if\x20({NUM_'+'SAMPLES}\x20<'+'=\x201)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20si'+'ngle\x20sampl'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20{EN'+'CODE_FUNC}'+'({DECODE_F'+'UNC}({SOUR'+'CE_FUNC}({'+'TARGET_FUN'+'C}())));\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20multi\x20s'+'ample\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20t'+'\x20=\x20{TARGET'+'_FUNC}();\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20tu\x20=\x20dF'+'dx(t);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'tv\x20=\x20dFdy('+'t);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20re'+'sult\x20=\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20for\x20'+'(float\x20u\x20='+'\x200.0;\x20u\x20<\x20'+'{NUM_SAMPL'+'ES_SQRT};\x20'+'++u)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20f'+'or\x20(float\x20'+'v\x20=\x200.0;\x20v'+'\x20<\x20{NUM_SA'+'MPLES_SQRT'+'};\x20++v)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20resu'+'lt\x20+=\x20{DEC'+'ODE_FUNC}('+'{SOURCE_FU'+'NC}(normal'+'ize(t\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20tu'+'\x20*\x20(u\x20/\x20{N'+'UM_SAMPLES'+'_SQRT}\x20-\x200'+'.5)\x20+\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20tv\x20*'+'\x20(v\x20/\x20{NUM'+'_SAMPLES_S'+'QRT}\x20-\x200.5'+'))));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20{ENCO'+'DE_FUNC}(r'+'esult\x20/\x20({'+'NUM_SAMPLE'+'S_SQRT}\x20*\x20'+'{NUM_SAMPL'+'ES_SQRT}))'+';\x0a\x20\x20\x20\x20}\x0a}\x0a'+'\x0avec4\x20unpa'+'ckFloat\x20=\x20'+'vec4(1.0,\x20'+'1.0\x20/\x20255.'+'0,\x201.0\x20/\x206'+'5025.0,\x201.'+'0\x20/\x20165813'+'75.0);\x0a\x0a#i'+'fdef\x20USE_S'+'AMPLES_TEX'+'\x0a\x20\x20\x20\x20void\x20'+'unpackSamp'+'le(int\x20i,\x20'+'out\x20vec3\x20L'+',\x20out\x20floa')+('t\x20mipLevel'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20u\x20'+'=\x20(float(i'+'\x20*\x204)\x20+\x200.'+'5)\x20*\x20sampl'+'esTexInver'+'seSize.x;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20v\x20=\x20(f'+'loor(u)\x20+\x20'+'0.5)\x20*\x20sam'+'plesTexInv'+'erseSize.y'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec4\x20raw;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'aw.x\x20=\x20dot'+'(texture2D'+'(samplesTe'+'x,\x20vec2(u,'+'\x20v)),\x20unpa'+'ckFloat);\x20'+'u\x20+=\x20sampl'+'esTexInver'+'seSize.x;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ra'+'w.y\x20=\x20dot('+'texture2D('+'samplesTex'+',\x20vec2(u,\x20'+'v)),\x20unpac'+'kFloat);\x20u'+'\x20+=\x20sample'+'sTexInvers'+'eSize.x;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20raw'+'.z\x20=\x20dot(t'+'exture2D(s'+'amplesTex,'+'\x20vec2(u,\x20v'+')),\x20unpack'+'Float);\x20u\x20'+'+=\x20samples'+'TexInverse'+'Size.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20raw.'+'w\x20=\x20dot(te'+'xture2D(sa'+'mplesTex,\x20'+'vec2(u,\x20v)'+'),\x20unpackF'+'loat);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20L.xy'+'z\x20=\x20raw.xy'+'z\x20*\x202.0\x20-\x20'+'1.0;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20mipLeve'+'l\x20=\x20raw.w\x20'+'*\x208.0;\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20//'+'\x20convolve\x20'+'an\x20environ'+'ment\x20given'+'\x20pre-gener'+'ated\x20sampl'+'es\x0a\x20\x20\x20\x20vec'+'4\x20prefilte'+'rSamples()'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20constr'+'uct\x20vector'+'\x20space\x20giv'+'en\x20target\x20'+'direction\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ma'+'t3\x20vecSpac'+'e\x20=\x20matrix'+'FromVector'+'Slow({TARG'+'ET_FUNC}()'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20L;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20mipLev'+'el;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20re'+'sult\x20=\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20totalWei'+'ght\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'or\x20(int\x20i\x20'+'=\x200;\x20i\x20<\x20{'+'NUM_SAMPLE'+'S};\x20++i)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20unpackS'+'ample(i,\x20L')+(',\x20mipLevel'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20resul'+'t\x20+=\x20{DECO'+'DE_FUNC}({'+'SOURCE_FUN'+'C}(vecSpac'+'e\x20*\x20L,\x20mip'+'Level))\x20*\x20'+'L.z;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20tot'+'alWeight\x20+'+'=\x20L.z;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20{ENCODE'+'_FUNC}(res'+'ult\x20/\x20tota'+'lWeight);\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20//\x20unweig'+'hted\x20versi'+'on\x20of\x20pref'+'ilterSampl'+'es\x0a\x20\x20\x20\x20vec'+'4\x20prefilte'+'rSamplesUn'+'weighted()'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20constr'+'uct\x20vector'+'\x20space\x20giv'+'en\x20target\x20'+'direction\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ma'+'t3\x20vecSpac'+'e\x20=\x20matrix'+'FromVector'+'Slow({TARG'+'ET_FUNC}()'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20L;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20mipLev'+'el;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20re'+'sult\x20=\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20totalWei'+'ght\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'or\x20(int\x20i\x20'+'=\x200;\x20i\x20<\x20{'+'NUM_SAMPLE'+'S};\x20++i)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20unpackS'+'ample(i,\x20L'+',\x20mipLevel'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20resul'+'t\x20+=\x20{DECO'+'DE_FUNC}({'+'SOURCE_FUN'+'C}(vecSpac'+'e\x20*\x20L,\x20mip'+'Level));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20{ENCO'+'DE_FUNC}(r'+'esult\x20/\x20fl'+'oat({NUM_S'+'AMPLES}));'+'\x0a\x20\x20\x20\x20}\x0a#en'+'dif\x0a\x0avoid\x20'+'main(void)'+'\x20{\x0a\x20\x20\x20\x20gl_'+'FragColor\x20'+'=\x20{PROCESS'+'_FUNC}();\x0a'+'}\x0a'),h2='\x0aattribute'+'\x20vec2\x20vert'+'ex_positio'+'n;\x0auniform'+'\x20vec4\x20uvMo'+'d;\x0avarying'+'\x20vec2\x20vUv0'+';\x0a\x0avoid\x20ma'+'in(void)\x20{'+'\x0a\x20\x20\x20\x20gl_Po'+'sition\x20=\x20v'+'ec4(vertex'+'_position,'+'\x200.5,\x201.0)'+';\x0a\x20\x20\x20\x20vUv0'+'\x20=\x20getImag'+'eEffectUV('+'(vertex_po'+'sition.xy\x20'+'*\x200.5\x20+\x200.'+'5)\x20*\x20uvMod'+'.xy\x20+\x20uvMo'+'d.zw);\x0a}\x0a',d2='\x0auniform\x20h'+'ighp\x20sampl'+'er2D\x20uScen'+'eDepthMap;'+'\x0a\x0a#ifndef\x20'+'SCREENSIZE'+'\x0a\x20\x20\x20\x20#defi'+'ne\x20SCREENS'+'IZE\x0a\x20\x20\x20\x20un'+'iform\x20vec4'+'\x20uScreenSi'+'ze;\x0a#endif'+'\x0a\x0a#ifndef\x20'+'VIEWMATRIX'+'\x0a\x20\x20\x20\x20#defi'+'ne\x20VIEWMAT'+'RIX\x0a\x20\x20\x20\x20un'+'iform\x20mat4'+'\x20matrix_vi'+'ew;\x0a#endif'+'\x0a\x0a#ifndef\x20'+'LINEARIZE_'+'DEPTH\x0a\x20\x20\x20\x20'+'#define\x20LI'+'NEARIZE_DE'+'PTH\x0a\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20#ifndef'+'\x20CAMERAPLA'+'NES\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#define\x20'+'CAMERAPLAN'+'ES\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20v'+'ec4\x20camera'+'_params;\x20/'+'/\x20x:\x201\x20/\x20c'+'amera_far,'+'\x20\x20\x20\x20\x20\x20y:\x20c'+'amera_far,'+'\x20\x20\x20\x20\x20z:\x20ca'+'mera_near,'+'\x20\x20\x20\x20\x20\x20\x20\x20w:'+'\x20is_ortho\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20lineariz'+'eDepth(flo'+'at\x20z)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'camera_par'+'ams.w\x20==\x200'+'.0)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20(camera'+'_params.z\x20'+'*\x20camera_p'+'arams.y)\x20/'+'\x20(camera_p'+'arams.y\x20+\x20'+'z\x20*\x20(camer'+'a_params.z'+'\x20-\x20camera_'+'params.y))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20camera'+'_params.z\x20'+'+\x20z\x20*\x20(cam'+'era_params'+'.y\x20-\x20camer'+'a_params.z'+');\x0a\x20\x20\x20\x20}\x0a#'+'endif\x0a\x0aflo'+'at\x20delinea'+'rizeDepth('+'float\x20line'+'arDepth)\x20{'+'\x0a\x20\x20\x20\x20if\x20(c'+'amera_para'+'ms.w\x20==\x200.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'(camera_pa'+'rams.y\x20*\x20('+'camera_par'+'ams.z\x20-\x20li'+'nearDepth)'+')\x20/\x20(linea'+'rDepth\x20*\x20('+'camera_par'+'ams.z\x20-\x20ca'+'mera_param'+'s.y));\x0a\x20\x20\x20'+'\x20}\x20else\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20(line'+'arDepth\x20-\x20'+'camera_par'+'ams.z)\x20/\x20('+('camera_par'+'ams.y\x20-\x20ca'+'mera_param'+'s.z);\x0a\x20\x20\x20\x20'+'}\x0a}\x0a\x0a//\x20Re'+'trieves\x20re'+'ndered\x20lin'+'ear\x20camera'+'\x20depth\x20by\x20'+'UV\x0afloat\x20g'+'etLinearSc'+'reenDepth('+'vec2\x20uv)\x20{'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20SCENE_DE'+'PTHMAP_LIN'+'EAR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'CENE_DEPTH'+'MAP_FLOAT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20t'+'exture2D(u'+'SceneDepth'+'Map,\x20uv).r'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20i'+'vec2\x20textu'+'reSize\x20=\x20t'+'extureSize'+'(uSceneDep'+'thMap,\x200);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20ivec2\x20t'+'exel\x20=\x20ive'+'c2(uv\x20*\x20ve'+'c2(texture'+'Size));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'vec4\x20data\x20'+'=\x20texelFet'+'ch(uSceneD'+'epthMap,\x20t'+'exel,\x200);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uint\x20in'+'tBits\x20=\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20(uint'+'(data.r\x20*\x20'+'255.0)\x20<<\x20'+'24u)\x20|\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20(uint(d'+'ata.g\x20*\x2025'+'5.0)\x20<<\x2016'+'u)\x20|\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20(uint(dat'+'a.b\x20*\x20255.'+'0)\x20<<\x208u)\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ui'+'nt(data.a\x20'+'*\x20255.0);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'uintBitsTo'+'Float(intB'+'its);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20line'+'arizeDepth'+'(texture2D'+'(uSceneDep'+'thMap,\x20uv)'+'.r);\x0a\x20\x20\x20\x20#'+'endif\x0a}\x0a\x0a#'+'ifndef\x20VER'+'TEXSHADER\x0a'+'\x20\x20\x20\x20//\x20Ret'+'rieves\x20ren'+'dered\x20line'+'ar\x20camera\x20'+'depth\x20unde'+'r\x20the\x20curr'+'ent\x20pixel\x0a'+'\x20\x20\x20\x20float\x20'+'getLinearS'+'creenDepth'+'()\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec2\x20uv'+'\x20=\x20gl_Frag'+'Coord.xy\x20*'+'\x20uScreenSi'+'ze.zw;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur')+('n\x20getLinea'+'rScreenDep'+'th(uv);\x0a\x20\x20'+'\x20\x20}\x0a#endif'+'\x0a\x0a//\x20Gener'+'ates\x20linea'+'r\x20camera\x20d'+'epth\x20for\x20t'+'he\x20given\x20w'+'orld\x20posit'+'ion\x0afloat\x20'+'getLinearD'+'epth(vec3\x20'+'pos)\x20{\x0a\x20\x20\x20'+'\x20return\x20-('+'matrix_vie'+'w\x20*\x20vec4(p'+'os,\x201.0)).'+'z;\x0a}\x0a'),f2='\x0a\x0a//\x20funct'+'ion\x20which\x20'+'selects\x20a\x20'+'shadow\x20pro'+'jection\x20ma'+'trix\x20index'+'\x20based\x20on\x20'+'cascade\x20di'+'stances\x20\x0ai'+'nt\x20getShad'+'owCascadeI'+'ndex(vec4\x20'+'shadowCasc'+'adeDistanc'+'es,\x20int\x20sh'+'adowCascad'+'eCount)\x20{\x0a'+'\x0a\x20\x20\x20\x20//\x20de'+'pth\x20in\x200\x20.'+'.\x20far\x20plan'+'e\x20range\x0a\x20\x20'+'\x20\x20float\x20de'+'pth\x20=\x201.0\x20'+'/\x20gl_FragC'+'oord.w;\x0a\x0a\x20'+'\x20\x20\x20//\x201.0\x20'+'if\x20depth\x20>'+'=\x20distance'+',\x200.0\x20othe'+'rwise\x0a\x20\x20\x20\x20'+'vec4\x20compa'+'risons\x20=\x20s'+'tep(shadow'+'CascadeDis'+'tances,\x20ve'+'c4(depth))'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'sum\x20is\x20the'+'\x20index\x0a\x20\x20\x20'+'\x20int\x20casca'+'deIndex\x20=\x20'+'int(dot(co'+'mparisons,'+'\x20vec4(1.0)'+'));\x0a\x0a\x20\x20\x20\x20/'+'/\x20limit\x20to'+'\x20actual\x20nu'+'mber\x20of\x20us'+'ed\x20cascade'+'s\x0a\x20\x20\x20\x20retu'+'rn\x20min(cas'+'cadeIndex,'+'\x20shadowCas'+'cadeCount\x20'+'-\x201);\x0a}\x0a\x0a/'+'/\x20function'+'\x20which\x20mod'+'ifies\x20casc'+'ade\x20index\x20'+'to\x20dither\x20'+'between\x20ca'+'scades\x0aint'+'\x20ditherSha'+'dowCascade'+'Index(int\x20'+'cascadeInd'+'ex,\x20vec4\x20s'+'hadowCasca'+'deDistance'+'s,\x20int\x20sha'+'dowCascade'+'Count,\x20flo'+'at\x20blendFa'+'ctor)\x20{\x0a\x20\x0a'+'\x20\x20\x20\x20if\x20(ca'+'scadeIndex'+'\x20<\x20shadowC'+'ascadeCoun'+'t\x20-\x201)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20current'+'RangeEnd\x20='+'\x20shadowCas'+'cadeDistan'+'ces[cascad'+'eIndex];\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20transit'+'ionStart\x20='+'\x20blendFact'+'or\x20*\x20curre'+'ntRangeEnd'+';\x20//\x20Start'+'\x20overlap\x20f'+'actor\x20away'+'\x20from\x20the\x20'+'end\x20distan'+'ce\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20dep'+'th\x20=\x201.0\x20/'+('\x20gl_FragCo'+'ord.w;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'depth\x20>\x20tr'+'ansitionSt'+'art)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20Calculat'+'e\x20a\x20transi'+'tion\x20facto'+'r\x20(0.0\x20to\x20'+'1.0)\x20withi'+'n\x20the\x20over'+'lap\x20range\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20tr'+'ansitionFa'+'ctor\x20=\x20smo'+'othstep(tr'+'ansitionSt'+'art,\x20curre'+'ntRangeEnd'+',\x20depth);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20Add\x20'+'pseudo-ran'+'dom\x20dither'+'ing\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20T'+'ODO:\x20repla'+'ce\x20by\x20user'+'\x20selectabl'+'e\x20ditherin'+'g\x20method\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20dit'+'her\x20=\x20frac'+'t(sin(dot('+'gl_FragCoo'+'rd.xy,\x20vec'+'2(12.9898,'+'\x2078.233)))'+'\x20*\x2043758.5'+'453);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(dither\x20<'+'\x20transitio'+'nFactor)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20cas'+'cadeIndex\x20'+'+=\x201;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20return\x20ca'+'scadeIndex'+';\x0a}\x0a\x0avec3\x20'+'fadeShadow'+'(vec3\x20shad'+'owCoord,\x20v'+'ec4\x20shadow'+'CascadeDis'+'tances)\x20{\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20'+'\x20\x20//\x20if\x20th'+'e\x20pixel\x20is'+'\x20past\x20the\x20'+'shadow\x20dis'+'tance,\x20rem'+'ove\x20shadow'+'\x0a\x20\x20\x20\x20//\x20th'+'is\x20enforce'+'s\x20straight'+'\x20line\x20inst'+'ead\x20of\x20cor'+'ner\x20of\x20sha'+'dow\x20which\x20'+'moves\x20when'+'\x20camera\x20ro'+'tates\x20\x20\x0a\x20\x20'+'\x20\x20float\x20de'+'pth\x20=\x201.0\x20'+'/\x20gl_FragC'+'oord.w;\x0a\x20\x20'+'\x20\x20if\x20(dept'+'h\x20>\x20shadow'+'CascadeDis'+'tances.w)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'shadowCoor'+'d.z\x20=\x20-999'+'9999.0;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20shad'+'owCoord;\x0a}'+'\x0a'),u2='\x0a\x0a//\x20-----'+'-\x20VSM\x20Shar'+'ed\x20------\x0a'+'\x0afloat\x20lin'+'step(float'+'\x20a,\x20float\x20'+'b,\x20float\x20v'+')\x20{\x0a\x20\x20\x20\x20re'+'turn\x20satur'+'ate((v\x20-\x20a'+')\x20/\x20(b\x20-\x20a'+'));\x0a}\x0a\x0aflo'+'at\x20reduceL'+'ightBleedi'+'ng(float\x20p'+'Max,\x20float'+'\x20amount)\x20{'+'\x0a\x20\x20\x20//\x20Rem'+'ove\x20the\x20[0'+',\x20amount]\x20'+'tail\x20and\x20l'+'inearly\x20re'+'scale\x20(amo'+'unt,\x201].\x0a\x20'+'\x20\x20return\x20l'+'instep(amo'+'unt,\x201.0,\x20'+'pMax);\x0a}\x0a\x0a'+'float\x20cheb'+'yshevUpper'+'Bound(vec2'+'\x20moments,\x20'+'float\x20mean'+',\x20float\x20mi'+'nVariance,'+'\x20float\x20lig'+'htBleeding'+'Reduction)'+'\x20{\x0a\x20\x20\x20\x20//\x20'+'Compute\x20va'+'riance\x0a\x20\x20\x20'+'\x20float\x20var'+'iance\x20=\x20mo'+'ments.y\x20-\x20'+'(moments.x'+'\x20*\x20moments'+'.x);\x0a\x20\x20\x20\x20v'+'ariance\x20=\x20'+'max(varian'+'ce,\x20minVar'+'iance);\x0a\x0a\x20'+'\x20\x20\x20//\x20Comp'+'ute\x20probab'+'ilistic\x20up'+'per\x20bound\x0a'+'\x20\x20\x20\x20float\x20'+'d\x20=\x20mean\x20-'+'\x20moments.x'+';\x0a\x20\x20\x20\x20floa'+'t\x20pMax\x20=\x20v'+'ariance\x20/\x20'+'(variance\x20'+'+\x20(d\x20*\x20d))'+';\x0a\x0a\x20\x20\x20\x20pMa'+'x\x20=\x20reduce'+'LightBleed'+'ing(pMax,\x20'+'lightBleed'+'ingReducti'+'on);\x0a\x0a\x20\x20\x20\x20'+'//\x20One-tai'+'led\x20Chebys'+'hev\x0a\x20\x20\x20\x20re'+'turn\x20(mean'+'\x20<=\x20moment'+'s.x\x20?\x201.0\x20'+':\x20pMax);\x0a}'+'\x0a\x0afloat\x20ca'+'lculateEVS'+'M(vec3\x20mom'+'ents,\x20floa'+'t\x20Z,\x20float'+'\x20vsmBias,\x20'+'float\x20expo'+'nent)\x20{\x0a\x20\x20'+'\x20\x20Z\x20=\x202.0\x20'+'*\x20Z\x20-\x201.0;'+'\x0a\x20\x20\x20\x20float'+'\x20warpedDep'+'th\x20=\x20exp(e'+'xponent\x20*\x20'+'Z);\x0a\x0a\x20\x20\x20\x20m'+'oments.xy\x20'+'+=\x20vec2(wa'+'rpedDepth,'+'\x20warpedDep'+'th*warpedD'+'epth)\x20*\x20(1'+'.0\x20-\x20momen'+'ts.z);\x0a\x0a\x20\x20'+('\x20\x20float\x20VS'+'MBias\x20=\x20vs'+'mBias;//0.'+'01\x20*\x200.25;'+'\x0a\x20\x20\x20\x20float'+'\x20depthScal'+'e\x20=\x20VSMBia'+'s\x20*\x20expone'+'nt\x20*\x20warpe'+'dDepth;\x0a\x20\x20'+'\x20\x20float\x20mi'+'nVariance1'+'\x20=\x20depthSc'+'ale\x20*\x20dept'+'hScale;\x0a\x20\x20'+'\x20\x20return\x20c'+'hebyshevUp'+'perBound(m'+'oments.xy,'+'\x20warpedDep'+'th,\x20minVar'+'iance1,\x200.'+'1);\x0a}\x0a\x0a//\x20'+'------\x20VSM'+'\x2016\x20------'+'\x0a\x0afloat\x20VS'+'M16(TEXTUR'+'E_ACCEPT(t'+'ex),\x20vec2\x20'+'texCoords,'+'\x20float\x20res'+'olution,\x20f'+'loat\x20Z,\x20fl'+'oat\x20vsmBia'+'s,\x20float\x20e'+'xponent)\x20{'+'\x0a\x20\x20\x20\x20vec3\x20'+'moments\x20=\x20'+'texture2DL'+'od(tex,\x20te'+'xCoords,\x200'+'.0).xyz;\x0a\x20'+'\x20\x20\x20return\x20'+'calculateE'+'VSM(moment'+'s,\x20Z,\x20vsmB'+'ias,\x20expon'+'ent);\x0a}\x0a\x0af'+'loat\x20getSh'+'adowVSM16('+'TEXTURE_AC'+'CEPT(shado'+'wMap),\x20vec'+'3\x20shadowCo'+'ord,\x20vec4\x20'+'shadowPara'+'ms,\x20float\x20'+'exponent)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20VSM16(T'+'EXTURE_PAS'+'S(shadowMa'+'p),\x20shadow'+'Coord.xy,\x20'+'shadowPara'+'ms.x,\x20shad'+'owCoord.z,'+'\x20shadowPar'+'ams.y,\x20exp'+'onent);\x0a}\x0a'+'\x0afloat\x20get'+'ShadowSpot'+'VSM16(TEXT'+'URE_ACCEPT'+'(shadowMap'+'),\x20vec3\x20sh'+'adowCoord,'+'\x20vec4\x20shad'+'owParams,\x20'+'float\x20expo'+'nent,\x20vec3'+'\x20lightDir)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20VSM16('+'TEXTURE_PA'+'SS(shadowM'+'ap),\x20shado'+'wCoord.xy,'+'\x20shadowPar'+'ams.x,\x20len'+'gth(lightD'+'ir)\x20*\x20shad'+'owParams.w'+'\x20+\x20shadowP'+'arams.z,\x20s'+'hadowParam'+'s.y,\x20expon'+'ent);\x0a}\x0a\x0a/'+'/\x20------\x20V'+'SM\x2032\x20----')+('--\x0a\x0afloat\x20'+'VSM32(TEXT'+'URE_ACCEPT'+'(tex),\x20vec'+'2\x20texCoord'+'s,\x20float\x20r'+'esolution,'+'\x20float\x20Z,\x20'+'float\x20vsmB'+'ias,\x20float'+'\x20exponent)'+'\x20{\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20CAPS_'+'TEXTURE_FL'+'OAT_FILTER'+'ABLE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20mo'+'ments\x20=\x20te'+'xture2DLod'+'(tex,\x20texC'+'oords,\x200.0'+').xyz;\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ma'+'nual\x20bilin'+'ear\x20filter'+'ing\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20pi'+'xelSize\x20=\x20'+'1.0\x20/\x20reso'+'lution;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20texC'+'oords\x20-=\x20v'+'ec2(pixelS'+'ize);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20s'+'00\x20=\x20textu'+'re2DLod(te'+'x,\x20texCoor'+'ds,\x200.0).x'+'yz;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20s10'+'\x20=\x20texture'+'2DLod(tex,'+'\x20texCoords'+'\x20+\x20vec2(pi'+'xelSize,\x200'+'),\x200.0).xy'+'z;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec3\x20s01\x20'+'=\x20texture2'+'DLod(tex,\x20'+'texCoords\x20'+'+\x20vec2(0,\x20'+'pixelSize)'+',\x200.0).xyz'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20s11\x20='+'\x20texture2D'+'Lod(tex,\x20t'+'exCoords\x20+'+'\x20vec2(pixe'+'lSize),\x200.'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec2'+'\x20fr\x20=\x20frac'+'t(texCoord'+'s\x20*\x20resolu'+'tion);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'h0\x20=\x20mix(s'+'00,\x20s10,\x20f'+'r.x);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20h'+'1\x20=\x20mix(s0'+'1,\x20s11,\x20fr'+'.x);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20mo'+'ments\x20=\x20mi'+'x(h0,\x20h1,\x20'+'fr.y);\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'calculateE'+'VSM(moment'+'s,\x20Z,\x20vsmB'+'ias,\x20expon'+'ent);\x0a}\x0a\x0af'+'loat\x20getSh'+'adowVSM32('+'TEXTURE_AC'+'CEPT(shado'+'wMap),\x20vec'+'3\x20shadowCo'+'ord,\x20vec4\x20'+'shadowPara'+'ms,\x20float\x20'+'exponent)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20VSM32(T')+('EXTURE_PAS'+'S(shadowMa'+'p),\x20shadow'+'Coord.xy,\x20'+'shadowPara'+'ms.x,\x20shad'+'owCoord.z,'+'\x20shadowPar'+'ams.y,\x20exp'+'onent);\x0a}\x0a'+'\x0afloat\x20get'+'ShadowSpot'+'VSM32(TEXT'+'URE_ACCEPT'+'(shadowMap'+'),\x20vec3\x20sh'+'adowCoord,'+'\x20vec4\x20shad'+'owParams,\x20'+'float\x20expo'+'nent,\x20vec3'+'\x20lightDir)'+'\x20{\x0a\x20\x20\x20\x20flo'+'at\x20Z\x20=\x20len'+'gth(lightD'+'ir)\x20*\x20shad'+'owParams.w'+'\x20+\x20shadowP'+'arams.z;\x0a\x20'+'\x20\x20\x20return\x20'+'VSM32(TEXT'+'URE_PASS(s'+'hadowMap),'+'\x20shadowCoo'+'rd.xy,\x20sha'+'dowParams.'+'x,\x20Z,\x20shad'+'owParams.y'+',\x20exponent'+');\x0a}\x0a'),p2='\x0a//\x20-----\x20'+'Directiona'+'l/Spot\x20Sam'+'pling\x20----'+'-\x0a\x0afloat\x20g'+'etShadowPC'+'F1x1(SHADO'+'WMAP_ACCEP'+'T(shadowMa'+'p),\x20vec3\x20s'+'hadowCoord'+',\x20vec4\x20sha'+'dowParams)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20textur'+'eShadow(sh'+'adowMap,\x20s'+'hadowCoord'+');\x0a}\x0a\x0afloa'+'t\x20getShado'+'wSpotPCF1x'+'1(SHADOWMA'+'P_ACCEPT(s'+'hadowMap),'+'\x20vec3\x20shad'+'owCoord,\x20v'+'ec4\x20shadow'+'Params)\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20textureSh'+'adow(shado'+'wMap,\x20shad'+'owCoord);\x0a'+'}\x0a\x0a//\x20----'+'-\x20Omni\x20Sam'+'pling\x20----'+'-\x0a\x0a#ifndef'+'\x20WEBGPU\x0a\x0af'+'loat\x20getSh'+'adowOmniPC'+'F1x1(sampl'+'erCubeShad'+'ow\x20shadowM'+'ap,\x20vec3\x20s'+'hadowCoord'+',\x20vec4\x20sha'+'dowParams,'+'\x20vec3\x20ligh'+'tDir)\x20{\x0a\x20\x20'+'\x20\x20float\x20sh'+'adowZ\x20=\x20le'+'ngth(light'+'Dir)\x20*\x20sha'+'dowParams.'+'w\x20+\x20shadow'+'Params.z;\x0a'+'\x20\x20\x20\x20return'+'\x20texture(s'+'hadowMap,\x20'+'vec4(light'+'Dir,\x20shado'+'wZ));\x0a}\x0a\x0a#'+'endif\x0a',m2='\x0a//\x20-----\x20'+'Directiona'+'l/Spot\x20Sam'+'pling\x20----'+'-\x0a\x0afloat\x20_'+'getShadowP'+'CF3x3(SHAD'+'OWMAP_ACCE'+'PT(shadowM'+'ap),\x20vec3\x20'+'shadowCoor'+'d,\x20vec3\x20sh'+'adowParams'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20z\x20=\x20sh'+'adowCoord.'+'z;\x0a\x20\x20\x20\x20vec'+'2\x20uv\x20=\x20sha'+'dowCoord.x'+'y\x20*\x20shadow'+'Params.x;\x20'+'//\x201\x20unit\x20'+'-\x201\x20texel\x0a'+'\x20\x20\x20\x20float\x20'+'shadowMapS'+'izeInv\x20=\x201'+'.0\x20/\x20shado'+'wParams.x;'+'\x0a\x20\x20\x20\x20vec2\x20'+'base_uv\x20=\x20'+'floor(uv\x20+'+'\x200.5);\x0a\x20\x20\x20'+'\x20float\x20s\x20='+'\x20(uv.x\x20+\x200'+'.5\x20-\x20base_'+'uv.x);\x0a\x20\x20\x20'+'\x20float\x20t\x20='+'\x20(uv.y\x20+\x200'+'.5\x20-\x20base_'+'uv.y);\x20\x0a\x20\x20'+'\x20\x20base_uv\x20'+'-=\x20vec2(0.'+'5);\x0a\x20\x20\x20\x20ba'+'se_uv\x20*=\x20s'+'hadowMapSi'+'zeInv;\x0a\x0a\x20\x20'+'\x20\x20float\x20su'+'m\x20=\x200.0;\x0a\x0a'+'\x20\x20\x20\x20float\x20'+'uw0\x20=\x20(3.0'+'\x20-\x202.0\x20*\x20s'+');\x0a\x20\x20\x20\x20flo'+'at\x20uw1\x20=\x20('+'1.0\x20+\x202.0\x20'+'*\x20s);\x0a\x0a\x20\x20\x20'+'\x20float\x20u0\x20'+'=\x20(2.0\x20-\x20s'+')\x20/\x20uw0\x20-\x20'+'1.0;\x0a\x20\x20\x20\x20f'+'loat\x20u1\x20=\x20'+'s\x20/\x20uw1\x20+\x20'+'1.0;\x0a\x0a\x20\x20\x20\x20'+'float\x20vw0\x20'+'=\x20(3.0\x20-\x202'+'.0\x20*\x20t);\x0a\x20'+'\x20\x20\x20float\x20v'+'w1\x20=\x20(1.0\x20'+'+\x202.0\x20*\x20t)'+';\x0a\x0a\x20\x20\x20\x20flo'+'at\x20v0\x20=\x20(2'+'.0\x20-\x20t)\x20/\x20'+'vw0\x20-\x201.0;'+'\x0a\x20\x20\x20\x20float'+'\x20v1\x20=\x20t\x20/\x20'+'vw1\x20+\x201.0;'+'\x0a\x0a\x20\x20\x20\x20u0\x20='+'\x20u0\x20*\x20shad'+'owMapSizeI'+'nv\x20+\x20base_'+'uv.x;\x0a\x20\x20\x20\x20'+'v0\x20=\x20v0\x20*\x20'+'shadowMapS'+'izeInv\x20+\x20b'+'ase_uv.y;\x0a'+'\x0a\x20\x20\x20\x20u1\x20=\x20'+'u1\x20*\x20shado'+'wMapSizeIn'+'v\x20+\x20base_u'+'v.x;\x0a\x20\x20\x20\x20v'+'1\x20=\x20v1\x20*\x20s'+'hadowMapSi'+'zeInv\x20+\x20ba'+'se_uv.y;\x0a\x0a'+'\x20\x20\x20\x20sum\x20+='+'\x20uw0\x20*\x20vw0'+'\x20*\x20texture'+'Shadow(sha'+'dowMap,\x20ve'+'c3(u0,\x20v0,'+'\x20z));\x0a\x20\x20\x20\x20'+('sum\x20+=\x20uw1'+'\x20*\x20vw0\x20*\x20t'+'extureShad'+'ow(shadowM'+'ap,\x20vec3(u'+'1,\x20v0,\x20z))'+';\x0a\x20\x20\x20\x20sum\x20'+'+=\x20uw0\x20*\x20v'+'w1\x20*\x20textu'+'reShadow(s'+'hadowMap,\x20'+'vec3(u0,\x20v'+'1,\x20z));\x0a\x20\x20'+'\x20\x20sum\x20+=\x20u'+'w1\x20*\x20vw1\x20*'+'\x20textureSh'+'adow(shado'+'wMap,\x20vec3'+'(u1,\x20v1,\x20z'+'));\x0a\x0a\x20\x20\x20\x20s'+'um\x20*=\x201.0f'+'\x20/\x2016.0;\x0a\x20'+'\x20\x20\x20return\x20'+'sum;\x0a}\x0a\x0afl'+'oat\x20getSha'+'dowPCF3x3('+'SHADOWMAP_'+'ACCEPT(sha'+'dowMap),\x20v'+'ec3\x20shadow'+'Coord,\x20vec'+'4\x20shadowPa'+'rams)\x20{\x0a\x20\x20'+'\x20\x20return\x20_'+'getShadowP'+'CF3x3(SHAD'+'OWMAP_PASS'+'(shadowMap'+'),\x20shadowC'+'oord,\x20shad'+'owParams.x'+'yz);\x0a}\x0a\x0afl'+'oat\x20getSha'+'dowSpotPCF'+'3x3(SHADOW'+'MAP_ACCEPT'+'(shadowMap'+'),\x20vec3\x20sh'+'adowCoord,'+'\x20vec4\x20shad'+'owParams)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20_getSha'+'dowPCF3x3('+'SHADOWMAP_'+'PASS(shado'+'wMap),\x20sha'+'dowCoord,\x20'+'shadowPara'+'ms.xyz);\x0a}'+'\x0a\x0a//\x20-----'+'\x20Omni\x20Samp'+'ling\x20-----'+'\x0a\x0a#ifndef\x20'+'WEBGPU\x0a\x0afl'+'oat\x20getSha'+'dowOmniPCF'+'3x3(sample'+'rCubeShado'+'w\x20shadowMa'+'p,\x20vec4\x20sh'+'adowParams'+',\x20vec3\x20dir'+')\x20{\x0a\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20//\x20Calc'+'ulate\x20shad'+'ow\x20depth\x20f'+'rom\x20the\x20li'+'ght\x20direct'+'ion\x0a\x20\x20\x20\x20fl'+'oat\x20shadow'+'Z\x20=\x20length'+'(dir)\x20*\x20sh'+'adowParams'+'.w\x20+\x20shado'+'wParams.z;'+'\x0a\x0a\x20\x20\x20\x20//\x20o'+'ffset\x0a\x20\x20\x20\x20'+'float\x20z\x20=\x20'+'1.0\x20/\x20floa'+'t(textureS'+'ize(shadow'+'Map,\x200));\x0a'+'\x20\x20\x20\x20vec3\x20t'+'c\x20=\x20normal'+'ize(dir);\x0a'+'\x0a\x20\x20\x20\x20//\x20av'+'erage\x204\x20sa'+'mples\x20-\x20no'+'t\x20a\x20strict')+('\x203x3\x20PCF\x20b'+'ut\x20that\x27s\x20'+'tricky\x20wit'+'h\x20cubemaps'+'\x0a\x20\x20\x20\x20mediu'+'mp\x20vec4\x20sh'+'adows;\x0a\x20\x20\x20'+'\x20shadows.x'+'\x20=\x20texture'+'(shadowMap'+',\x20vec4(tc\x20'+'+\x20vec3(\x20z,'+'\x20z,\x20z),\x20sh'+'adowZ));\x0a\x20'+'\x20\x20\x20shadows'+'.y\x20=\x20textu'+'re(shadowM'+'ap,\x20vec4(t'+'c\x20+\x20vec3(-'+'z,-z,\x20z),\x20'+'shadowZ));'+'\x0a\x20\x20\x20\x20shado'+'ws.z\x20=\x20tex'+'ture(shado'+'wMap,\x20vec4'+'(tc\x20+\x20vec3'+'(-z,\x20z,-z)'+',\x20shadowZ)'+');\x0a\x20\x20\x20\x20sha'+'dows.w\x20=\x20t'+'exture(sha'+'dowMap,\x20ve'+'c4(tc\x20+\x20ve'+'c3(\x20z,-z,-'+'z),\x20shadow'+'Z));\x0a\x0a\x20\x20\x20\x20'+'return\x20dot'+'(shadows,\x20'+'vec4(0.25)'+');\x0a}\x0a\x0afloa'+'t\x20getShado'+'wOmniPCF3x'+'3(samplerC'+'ubeShadow\x20'+'shadowMap,'+'\x20vec3\x20shad'+'owCoord,\x20v'+'ec4\x20shadow'+'Params,\x20ve'+'c3\x20lightDi'+'r)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20getS'+'hadowOmniP'+'CF3x3(shad'+'owMap,\x20sha'+'dowParams,'+'\x20lightDir)'+';\x0a}\x0a\x0a#endi'+'f\x0a'),_2='\x0afloat\x20_ge'+'tShadowPCF'+'5x5(SHADOW'+'MAP_ACCEPT'+'(shadowMap'+'),\x20vec3\x20sh'+'adowCoord,'+'\x20vec3\x20shad'+'owParams)\x20'+'{\x0a\x20\x20\x20\x20//\x20h'+'ttp://the-'+'witness.ne'+'t/news/201'+'3/09/shado'+'w-mapping-'+'summary-pa'+'rt-1/\x0a\x0a\x20\x20\x20'+'\x20float\x20z\x20='+'\x20shadowCoo'+'rd.z;\x0a\x20\x20\x20\x20'+'vec2\x20uv\x20=\x20'+'shadowCoor'+'d.xy\x20*\x20sha'+'dowParams.'+'x;\x20//\x201\x20un'+'it\x20-\x201\x20tex'+'el\x0a\x20\x20\x20\x20flo'+'at\x20shadowM'+'apSizeInv\x20'+'=\x201.0\x20/\x20sh'+'adowParams'+'.x;\x0a\x20\x20\x20\x20ve'+'c2\x20base_uv'+'\x20=\x20floor(u'+'v\x20+\x200.5);\x0a'+'\x20\x20\x20\x20float\x20'+'s\x20=\x20(uv.x\x20'+'+\x200.5\x20-\x20ba'+'se_uv.x);\x0a'+'\x20\x20\x20\x20float\x20'+'t\x20=\x20(uv.y\x20'+'+\x200.5\x20-\x20ba'+'se_uv.y);\x0a'+'\x20\x20\x20\x20base_u'+'v\x20-=\x20vec2('+'0.5);\x0a\x20\x20\x20\x20'+'base_uv\x20*='+'\x20shadowMap'+'SizeInv;\x0a\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20uw0\x20=\x20(4.'+'0\x20-\x203.0\x20*\x20'+'s);\x0a\x20\x20\x20\x20fl'+'oat\x20uw1\x20=\x20'+'7.0;\x0a\x20\x20\x20\x20f'+'loat\x20uw2\x20='+'\x20(1.0\x20+\x203.'+'0\x20*\x20s);\x0a\x0a\x20'+'\x20\x20\x20float\x20u'+'0\x20=\x20(3.0\x20-'+'\x202.0\x20*\x20s)\x20'+'/\x20uw0\x20-\x202.'+'0;\x0a\x20\x20\x20\x20flo'+'at\x20u1\x20=\x20(3'+'.0\x20+\x20s)\x20/\x20'+'uw1;\x0a\x20\x20\x20\x20f'+'loat\x20u2\x20=\x20'+'s\x20/\x20uw2\x20+\x20'+'2.0;\x0a\x0a\x20\x20\x20\x20'+'float\x20vw0\x20'+'=\x20(4.0\x20-\x203'+'.0\x20*\x20t);\x0a\x20'+'\x20\x20\x20float\x20v'+'w1\x20=\x207.0;\x0a'+'\x20\x20\x20\x20float\x20'+'vw2\x20=\x20(1.0'+'\x20+\x203.0\x20*\x20t'+');\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20v0\x20=\x20('+'3.0\x20-\x202.0\x20'+'*\x20t)\x20/\x20vw0'+'\x20-\x202.0;\x0a\x20\x20'+'\x20\x20float\x20v1'+'\x20=\x20(3.0\x20+\x20'+'t)\x20/\x20vw1;\x0a'+'\x20\x20\x20\x20float\x20'+'v2\x20=\x20t\x20/\x20v'+'w2\x20+\x202.0;\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20sum\x20=\x200.0'+';\x0a\x0a\x20\x20\x20\x20u0\x20'+'=\x20u0\x20*\x20sha'+'dowMapSize'+'Inv\x20+\x20base'+'_uv.x;\x0a\x20\x20\x20'+'\x20v0\x20=\x20v0\x20*'+'\x20shadowMap'+'SizeInv\x20+\x20'+'base_uv.y;'+'\x0a\x0a\x20\x20\x20\x20u1\x20='+('\x20u1\x20*\x20shad'+'owMapSizeI'+'nv\x20+\x20base_'+'uv.x;\x0a\x20\x20\x20\x20'+'v1\x20=\x20v1\x20*\x20'+'shadowMapS'+'izeInv\x20+\x20b'+'ase_uv.y;\x0a'+'\x0a\x20\x20\x20\x20u2\x20=\x20'+'u2\x20*\x20shado'+'wMapSizeIn'+'v\x20+\x20base_u'+'v.x;\x0a\x20\x20\x20\x20v'+'2\x20=\x20v2\x20*\x20s'+'hadowMapSi'+'zeInv\x20+\x20ba'+'se_uv.y;\x0a\x0a'+'\x20\x20\x20\x20sum\x20+='+'\x20uw0\x20*\x20vw0'+'\x20*\x20texture'+'Shadow(sha'+'dowMap,\x20ve'+'c3(u0,\x20v0,'+'\x20z));\x0a\x20\x20\x20\x20'+'sum\x20+=\x20uw1'+'\x20*\x20vw0\x20*\x20t'+'extureShad'+'ow(shadowM'+'ap,\x20vec3(u'+'1,\x20v0,\x20z))'+';\x0a\x20\x20\x20\x20sum\x20'+'+=\x20uw2\x20*\x20v'+'w0\x20*\x20textu'+'reShadow(s'+'hadowMap,\x20'+'vec3(u2,\x20v'+'0,\x20z));\x0a\x0a\x20'+'\x20\x20\x20sum\x20+=\x20'+'uw0\x20*\x20vw1\x20'+'*\x20textureS'+'hadow(shad'+'owMap,\x20vec'+'3(u0,\x20v1,\x20'+'z));\x0a\x20\x20\x20\x20s'+'um\x20+=\x20uw1\x20'+'*\x20vw1\x20*\x20te'+'xtureShado'+'w(shadowMa'+'p,\x20vec3(u1'+',\x20v1,\x20z));'+'\x0a\x20\x20\x20\x20sum\x20+'+'=\x20uw2\x20*\x20vw'+'1\x20*\x20textur'+'eShadow(sh'+'adowMap,\x20v'+'ec3(u2,\x20v1'+',\x20z));\x0a\x0a\x20\x20'+'\x20\x20sum\x20+=\x20u'+'w0\x20*\x20vw2\x20*'+'\x20textureSh'+'adow(shado'+'wMap,\x20vec3'+'(u0,\x20v2,\x20z'+'));\x0a\x20\x20\x20\x20su'+'m\x20+=\x20uw1\x20*'+'\x20vw2\x20*\x20tex'+'tureShadow'+'(shadowMap'+',\x20vec3(u1,'+'\x20v2,\x20z));\x0a'+'\x20\x20\x20\x20sum\x20+='+'\x20uw2\x20*\x20vw2'+'\x20*\x20texture'+'Shadow(sha'+'dowMap,\x20ve'+'c3(u2,\x20v2,'+'\x20z));\x0a\x0a\x20\x20\x20'+'\x20sum\x20*=\x201.'+'0f\x20/\x20144.0'+';\x0a\x20\x20\x20\x20sum\x20'+'=\x20saturate'+'(sum);\x0a\x0a\x20\x20'+'\x20\x20return\x20s'+'um;\x0a}\x0a\x0aflo'+'at\x20getShad'+'owPCF5x5(S'+'HADOWMAP_A'+'CCEPT(shad'+'owMap),\x20ve'+'c3\x20shadowC'+'oord,\x20vec4'+'\x20shadowPar'+'ams)\x20{\x0a\x20\x20\x20'+'\x20return\x20_g'+'etShadowPC'+'F5x5(SHADO'+'WMAP_PASS('+'shadowMap)'+',\x20shadowCo'+'ord,\x20shado')+('wParams.xy'+'z);\x0a}\x0a\x0aflo'+'at\x20getShad'+'owSpotPCF5'+'x5(SHADOWM'+'AP_ACCEPT('+'shadowMap)'+',\x20vec3\x20sha'+'dowCoord,\x20'+'vec4\x20shado'+'wParams)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20_getShad'+'owPCF5x5(S'+'HADOWMAP_P'+'ASS(shadow'+'Map),\x20shad'+'owCoord,\x20s'+'hadowParam'+'s.xyz);\x0a}\x0a'),g2='\x0a\x0a/**\x0a\x20*\x20P'+'CSS\x20is\x20a\x20s'+'hadow\x20samp'+'ling\x20metho'+'d\x20that\x20pro'+'vides\x20cont'+'act\x20harden'+'ing\x20soft\x20s'+'hadows,\x20us'+'ed\x20for\x20omn'+'i\x20and\x20spot'+'\x20lights.\x0a\x20'+'*\x20Based\x20on'+':\x20\x0a\x20*\x20-\x20ht'+'tps://www.'+'gamedev.ne'+'t/tutorial'+'s/programm'+'ing/graphi'+'cs/effect-'+'area-light'+'-shadows-p'+'art-1-pcss'+'-r4971/\x0a\x20*'+'\x20-\x20https:/'+'/github.co'+'m/pboechat'+'/PCSS\x20\x0a\x20*/'+'\x0a\x0a#define\x20'+'PCSS_SAMPL'+'E_COUNT\x2016'+'\x0a\x0auniform\x20'+'float\x20pcss'+'DiskSample'+'s[PCSS_SAM'+'PLE_COUNT]'+';\x0auniform\x20'+'float\x20pcss'+'SphereSamp'+'les[PCSS_S'+'AMPLE_COUN'+'T];\x0a\x0avec2\x20'+'vogelDisk('+'int\x20sample'+'Index,\x20flo'+'at\x20count,\x20'+'float\x20phi,'+'\x20float\x20r)\x20'+'{\x0a\x20\x20\x20\x20cons'+'t\x20float\x20Go'+'ldenAngle\x20'+'=\x202.4;\x0a\x20\x20\x20'+'\x20float\x20the'+'ta\x20=\x20float'+'(sampleInd'+'ex)\x20*\x20Gold'+'enAngle\x20+\x20'+'phi;\x0a\x0a\x20\x20\x20\x20'+'float\x20sine'+'\x20=\x20sin(the'+'ta);\x0a\x20\x20\x20\x20f'+'loat\x20cosin'+'e\x20=\x20cos(th'+'eta);\x0a\x20\x20\x20\x20'+'return\x20vec'+'2(r\x20*\x20cosi'+'ne,\x20r\x20*\x20si'+'ne);\x0a}\x0a\x0ave'+'c3\x20vogelSp'+'here(int\x20s'+'ampleIndex'+',\x20float\x20co'+'unt,\x20float'+'\x20phi,\x20floa'+'t\x20r)\x20{\x0a\x20\x20\x20'+'\x20const\x20flo'+'at\x20GoldenA'+'ngle\x20=\x202.4'+';\x0a\x20\x20\x20\x20floa'+'t\x20theta\x20=\x20'+'float(samp'+'leIndex)\x20*'+'\x20GoldenAng'+'le\x20+\x20phi;\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20weight\x20=\x20'+'float(samp'+'leIndex)\x20/'+'\x20count;\x0a\x20\x20'+'\x20\x20return\x20v'+'ec3(cos(th'+'eta)\x20*\x20r,\x20'+'weight,\x20si'+'n(theta)\x20*'+'\x20r);\x0a}\x0a\x0afl'+'oat\x20noise('+'vec2\x20scree'+'nPos)\x20{\x0a\x20\x20'+'\x20\x20const\x20fl'+'oat\x20PHI\x20=\x20'+('1.61803398'+'8749894848'+'20459;\x20\x20//'+'\x20\x20=\x20Golde'+'n\x20Ratio\x20\x20\x20'+'\x0a\x20\x20\x20\x20retur'+'n\x20fract(si'+'n(dot(scre'+'enPos\x20*\x20PH'+'I,\x20screenP'+'os))\x20*\x20scr'+'eenPos.x);'+'\x0a}\x0a\x0afloat\x20'+'viewSpaceD'+'epth(float'+'\x20depth,\x20ma'+'t4\x20invProj'+'ection)\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'z\x20=\x20depth\x20'+'*\x202.0\x20-\x201.'+'0;\x0a\x20\x20\x20\x20vec'+'4\x20clipSpac'+'e\x20=\x20vec4(0'+'.0,\x200.0,\x20z'+',\x201.0);\x0a\x20\x20'+'\x20\x20vec4\x20vie'+'wSpace\x20=\x20i'+'nvProjecti'+'on\x20*\x20clipS'+'pace;\x0a\x20\x20\x20\x20'+'return\x20vie'+'wSpace.z;\x0a'+'}\x0a\x0afloat\x20P'+'CSSBlocker'+'Distance(T'+'EXTURE_ACC'+'EPT(shadow'+'Map),\x20vec2'+'\x20sampleCoo'+'rds[PCSS_S'+'AMPLE_COUN'+'T],\x20vec2\x20s'+'hadowCoord'+'s,\x20vec2\x20se'+'archSize,\x20'+'float\x20z,\x20v'+'ec4\x20camera'+'Params)\x20{\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20blockers\x20'+'=\x200.0;\x0a\x20\x20\x20'+'\x20float\x20ave'+'rageBlocke'+'r\x20=\x200.0;\x0a\x20'+'\x20\x20\x20for\x20(in'+'t\x20i\x20=\x200;\x20i'+'\x20<\x20PCSS_SA'+'MPLE_COUNT'+';\x20i++)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20offset\x20='+'\x20sampleCoo'+'rds[i]\x20*\x20s'+'earchSize;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec2\x20sample'+'UV\x20=\x20shado'+'wCoords\x20+\x20'+'offset;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20blocker'+'\x20=\x20texture'+'2DLod(shad'+'owMap,\x20sam'+'pleUV,\x200.0'+').r;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20float\x20i'+'sBlocking\x20'+'=\x20step(blo'+'cker,\x20z);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20bl'+'ockers\x20+=\x20'+'isBlocking'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'averageBlo'+'cker\x20+=\x20bl'+'ocker\x20*\x20is'+'Blocking;\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20if\x20(block'+'ers\x20>\x200.0)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20aver'+'ageBlocker'+'\x20/\x20blocker'+'s;\x0a\x20\x20\x20\x20ret'+'urn\x20-1.0;\x0a'+'}\x0a\x0afloat\x20P'+'CSS(TEXTUR')+('E_ACCEPT(s'+'hadowMap),'+'\x20vec3\x20shad'+'owCoords,\x20'+'vec4\x20camer'+'aParams,\x20v'+'ec2\x20shadow'+'SearchArea'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20receiv'+'erDepth\x20=\x20'+'linearizeD'+'epthWithPa'+'rams(shado'+'wCoords.z,'+'\x20cameraPar'+'ams);\x0a\x0a\x20\x20\x20'+'\x20vec2\x20samp'+'lePoints[P'+'CSS_SAMPLE'+'_COUNT];\x0a\x20'+'\x20\x20\x20const\x20f'+'loat\x20PI\x20=\x20'+'3.14159265'+'3589793;\x0a\x20'+'\x20\x20\x20float\x20n'+'oise\x20=\x20noi'+'se(\x20gl_Fra'+'gCoord.xy\x20'+')\x20*\x202.0\x20*\x20'+'PI;\x0a\x20\x20\x20\x20fo'+'r\x20(int\x20i\x20='+'\x200;\x20i\x20<\x20PC'+'SS_SAMPLE_'+'COUNT;\x20i++'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20pc'+'ssPresampl'+'e\x20=\x20pcssDi'+'skSamples['+'i];\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20samplePo'+'ints[i]\x20=\x20'+'vogelDisk('+'i,\x20float(P'+'CSS_SAMPLE'+'_COUNT),\x20n'+'oise,\x20pcss'+'Presample)'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20float\x20a'+'verageBloc'+'ker\x20=\x20PCSS'+'BlockerDis'+'tance(TEXT'+'URE_PASS(s'+'hadowMap),'+'\x20samplePoi'+'nts,\x20shado'+'wCoords.xy'+',\x20shadowSe'+'archArea,\x20'+'receiverDe'+'pth,\x20camer'+'aParams);\x0a'+'\x20\x20\x20\x20if\x20(av'+'erageBlock'+'er\x20==\x20-1.0'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x201'+'.0;\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20depthDiff'+'erence\x20=\x20('+'receiverDe'+'pth\x20-\x20aver'+'ageBlocker'+')\x20/\x203.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20filterRa'+'dius\x20=\x20dep'+'thDifferen'+'ce\x20*\x20shado'+'wSearchAre'+'a;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20sh'+'adow\x20=\x200.0'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20for\x20(int\x20'+'i\x20=\x200;\x20i\x20<'+'\x20PCSS_SAMP'+'LE_COUNT;\x20'+'i\x20++)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20sampleU'+'V\x20=\x20sample'+'Points[i]\x20'+'*\x20filterRa')+('dius;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sa'+'mpleUV\x20=\x20s'+'hadowCoord'+'s.xy\x20+\x20sam'+'pleUV;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20dept'+'h\x20=\x20textur'+'e2DLod(sha'+'dowMap,\x20sa'+'mpleUV,\x200.'+'0).r;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'adow\x20+=\x20st'+'ep(receive'+'rDepth,\x20de'+'pth);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20shadow\x20/\x20'+'float(PCSS'+'_SAMPLE_CO'+'UNT);\x0a\x20\x20\x20\x20'+'}\x20\x0a}\x0a\x0a#ifn'+'def\x20WEBGPU'+'\x0a\x0afloat\x20PC'+'SSCubeBloc'+'kerDistanc'+'e(samplerC'+'ube\x20shadow'+'Map,\x20vec3\x20'+'lightDirNo'+'rm,\x20vec3\x20s'+'amplePoint'+'s[PCSS_SAM'+'PLE_COUNT]'+',\x20float\x20z,'+'\x20float\x20sha'+'dowSearchA'+'rea)\x20{\x0a\x20\x20\x20'+'\x20float\x20blo'+'ckers\x20=\x200.'+'0;\x0a\x20\x20\x20\x20flo'+'at\x20average'+'Blocker\x20=\x20'+'0.0;\x0a\x20\x20\x20\x20f'+'or\x20(int\x20i\x20'+'=\x200;\x20i\x20<\x20P'+'CSS_SAMPLE'+'_COUNT;\x20i+'+'+)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20sa'+'mpleDir\x20=\x20'+'lightDirNo'+'rm\x20+\x20sampl'+'ePoints[i]'+'\x20*\x20shadowS'+'earchArea;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'ampleDir\x20='+'\x20normalize'+'(sampleDir'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20bl'+'ocker\x20=\x20te'+'xtureCubeL'+'od(shadowM'+'ap,\x20sample'+'Dir,\x200.0).'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20isB'+'locking\x20=\x20'+'step(block'+'er,\x20z);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20bloc'+'kers\x20+=\x20is'+'Blocking;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20av'+'erageBlock'+'er\x20+=\x20bloc'+'ker\x20*\x20isBl'+'ocking;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20i'+'f\x20(blocker'+'s\x20>\x200.0)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20averag'+'eBlocker\x20/'+'\x20blockers;'+'\x0a\x20\x20\x20\x20retur'+'n\x20-1.0;\x0a}\x0a'+'\x0afloat\x20PCS'+'SCube(samp'+'lerCube\x20sh'+'adowMap,\x20v'+'ec4\x20shadow'+'Params,\x20ve'+'c3\x20shadowC'+'oords,\x20vec')+('4\x20cameraPa'+'rams,\x20floa'+'t\x20shadowSe'+'archArea,\x20'+'vec3\x20light'+'Dir)\x20{\x0a\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20vec3'+'\x20samplePoi'+'nts[PCSS_S'+'AMPLE_COUN'+'T];\x0a\x20\x20\x20\x20co'+'nst\x20float\x20'+'PI\x20=\x203.141'+'5926535897'+'93;\x0a\x20\x20\x20\x20fl'+'oat\x20noise\x20'+'=\x20noise(\x20g'+'l_FragCoor'+'d.xy\x20)\x20*\x202'+'.0\x20*\x20PI;\x0a\x20'+'\x20\x20\x20for\x20(in'+'t\x20i\x20=\x200;\x20i'+'\x20<\x20PCSS_SA'+'MPLE_COUNT'+';\x20i++)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20r\x20=\x20pcs'+'sSphereSam'+'ples[i];\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sam'+'plePoints['+'i]\x20=\x20vogel'+'Sphere(i,\x20'+'float(PCSS'+'_SAMPLE_CO'+'UNT),\x20nois'+'e,\x20r);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20fl'+'oat\x20receiv'+'erDepth\x20=\x20'+'length(lig'+'htDir)\x20*\x20s'+'hadowParam'+'s.w\x20+\x20shad'+'owParams.z'+';\x0a\x20\x20\x20\x20vec3'+'\x20lightDirN'+'orm\x20=\x20norm'+'alize(ligh'+'tDir);\x0a\x20\x20\x20'+'\x20\x0a\x20\x20\x20\x20floa'+'t\x20averageB'+'locker\x20=\x20P'+'CSSCubeBlo'+'ckerDistan'+'ce(shadowM'+'ap,\x20lightD'+'irNorm,\x20sa'+'mplePoints'+',\x20receiver'+'Depth,\x20sha'+'dowSearchA'+'rea);\x0a\x20\x20\x20\x20'+'if\x20(averag'+'eBlocker\x20='+'=\x20-1.0)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x201.0;\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20fi'+'lterRadius'+'\x20=\x20((recei'+'verDepth\x20-'+'\x20averageBl'+'ocker)\x20/\x20a'+'verageBloc'+'ker)\x20*\x20sha'+'dowSearchA'+'rea;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'shadow\x20=\x200'+'.0;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20for\x20(int'+'\x20i\x20=\x200;\x20i\x20'+'<\x20PCSS_SAM'+'PLE_COUNT;'+'\x20i++)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20offset\x20'+'=\x20samplePo'+'ints[i]\x20*\x20'+'filterRadi'+'us;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20sampleDir'+'\x20=\x20lightDi'+'rNorm\x20+\x20of'+'fset;\x0a\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20sa'+'mpleDir\x20=\x20'+'normalize('+'sampleDir)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20depth\x20=\x20t'+'extureCube'+'Lod(shadow'+'Map,\x20sampl'+'eDir,\x200.0)'+'.r;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20shad'+'ow\x20+=\x20step'+'(receiverD'+'epth,\x20dept'+'h);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20s'+'hadow\x20/\x20fl'+'oat(PCSS_S'+'AMPLE_COUN'+'T);\x0a\x20\x20\x20\x20}\x0a'+'}\x0a\x0afloat\x20g'+'etShadowOm'+'niPCSS(sam'+'plerCube\x20s'+'hadowMap,\x20'+'vec3\x20shado'+'wCoord,\x20ve'+'c4\x20shadowP'+'arams,\x20vec'+'4\x20cameraPa'+'rams,\x20vec2'+'\x20shadowSea'+'rchArea,\x20v'+'ec3\x20lightD'+'ir)\x20{\x0a\x20\x20\x20\x20'+'return\x20PCS'+'SCube(shad'+'owMap,\x20sha'+'dowParams,'+'\x20shadowCoo'+'rd,\x20camera'+'Params,\x20sh'+'adowSearch'+'Area.x,\x20li'+'ghtDir);\x0a}'+'\x0a\x0a#endif\x0a\x0a'+'float\x20getS'+'hadowSpotP'+'CSS(TEXTUR'+'E_ACCEPT(s'+'hadowMap),'+'\x20vec3\x20shad'+'owCoord,\x20v'+'ec4\x20shadow'+'Params,\x20ve'+'c4\x20cameraP'+'arams,\x20vec'+'2\x20shadowSe'+'archArea,\x20'+'vec3\x20light'+'Dir)\x20{\x0a\x20\x20\x20'+'\x20return\x20PC'+'SS(TEXTURE'+'_PASS(shad'+'owMap),\x20sh'+'adowCoord,'+'\x20cameraPar'+'ams,\x20shado'+'wSearchAre'+'a);\x0a}\x0a\x0a'),S2='\x0a\x0ahighp\x20fl'+'oat\x20fractS'+'inRand(con'+'st\x20in\x20vec2'+'\x20uv)\x20{\x0a\x20\x20\x20'+'\x20const\x20flo'+'at\x20PI\x20=\x203.'+'1415926535'+'89793;\x0a\x20\x20\x20'+'\x20const\x20hig'+'hp\x20float\x20a'+'\x20=\x2012.9898'+',\x20b\x20=\x2078.2'+'33,\x20c\x20=\x2043'+'758.5453;\x0a'+'\x20\x20\x20\x20highp\x20'+'float\x20dt\x20='+'\x20dot(uv.xy'+',\x20vec2(a,\x20'+'b)),\x20sn\x20=\x20'+'mod(dt,\x20PI'+');\x0a\x20\x20\x20\x20ret'+'urn\x20fract('+'sin(sn)\x20*\x20'+'c);\x0a}\x0a\x0a//\x20'+'struct\x20to\x20'+'hold\x20preco'+'mputed\x20con'+'stants\x20and'+'\x20current\x20s'+'tate\x0astruc'+'t\x20VogelDis'+'kData\x20{\x0a\x20\x20'+'\x20\x20float\x20in'+'vNumSample'+'s;\x0a\x20\x20\x20\x20flo'+'at\x20initial'+'Angle;\x0a\x20\x20\x20'+'\x20float\x20cur'+'rentPointI'+'d;\x0a};\x0a\x0a//\x20'+'prepare\x20th'+'e\x20Vogel\x20di'+'sk\x20constan'+'ts\x20and\x20ini'+'tialize\x20th'+'e\x20current\x20'+'state\x20in\x20t'+'he\x20struct\x0a'+'void\x20prepa'+'reDiskCons'+'tants(out\x20'+'VogelDiskD'+'ata\x20data,\x20'+'int\x20sample'+'Count,\x20flo'+'at\x20randomS'+'eed)\x20{\x0a\x20\x20\x20'+'\x20const\x20flo'+'at\x20pi2\x20=\x206'+'.283185307'+'18;\x0a\x20\x20\x20\x20da'+'ta.invNumS'+'amples\x20=\x201'+'.0\x20/\x20float'+'(sampleCou'+'nt);\x0a\x20\x20\x20\x20d'+'ata.initia'+'lAngle\x20=\x20r'+'andomSeed\x20'+'*\x20pi2;\x0a\x20\x20\x20'+'\x20data.curr'+'entPointId'+'\x20=\x200.0;\x0a}\x0a'+'\x0a\x0avec2\x20gen'+'erateDiskS'+'ample(inou'+'t\x20VogelDis'+'kData\x20data'+')\x20{\x0a\x20\x20\x20\x20co'+'nst\x20float\x20'+'GOLDEN_ANG'+'LE\x20=\x202.399'+'963;\x0a\x20\x20\x20\x20f'+'loat\x20r\x20=\x20s'+'qrt((data.'+'currentPoi'+'ntId\x20+\x200.5'+')\x20*\x20data.i'+'nvNumSampl'+'es);\x0a\x20\x20\x20\x20f'+'loat\x20theta'+'\x20=\x20data.cu'+'rrentPoint'+'Id\x20*\x20GOLDE'+'N_ANGLE\x20+\x20'+'data.initi'+'alAngle;\x0a\x0a'+'\x20\x20\x20\x20vec2\x20o'+'ffset\x20=\x20ve'+('c2(cos(the'+'ta),\x20sin(t'+'heta))\x20*\x20p'+'ow(r,\x201.33'+');\x0a\x0a\x20\x20\x20\x20da'+'ta.current'+'PointId\x20+='+'\x201.0;\x0a\x20\x20\x20\x20'+'return\x20off'+'set;\x0a}\x0a\x0avo'+'id\x20PCSSFin'+'dBlocker(T'+'EXTURE_ACC'+'EPT(shadow'+'Map),\x20out\x20'+'float\x20avgB'+'lockerDept'+'h,\x20out\x20int'+'\x20numBlocke'+'rs,\x0a\x20\x20\x20\x20ve'+'c2\x20shadowC'+'oords,\x20flo'+'at\x20z,\x20int\x20'+'shadowBloc'+'kerSamples'+',\x20float\x20pe'+'numbraSize'+',\x20float\x20in'+'vShadowMap'+'Size,\x20floa'+'t\x20randomSe'+'ed)\x20{\x0a\x0a\x20\x20\x20'+'\x20VogelDisk'+'Data\x20diskD'+'ata;\x0a\x20\x20\x20\x20p'+'repareDisk'+'Constants('+'diskData,\x20'+'shadowBloc'+'kerSamples'+',\x20randomSe'+'ed);\x0a\x0a\x20\x20\x20\x20'+'float\x20sear'+'chWidth\x20=\x20'+'penumbraSi'+'ze\x20*\x20invSh'+'adowMapSiz'+'e;\x0a\x20\x20\x20\x20flo'+'at\x20blocker'+'Sum\x20=\x200.0;'+'\x0a\x20\x20\x20\x20numBl'+'ockers\x20=\x200'+';\x0a\x0a\x20\x20\x20\x20for'+'(\x20int\x20i\x20=\x20'+'0;\x20i\x20<\x20sha'+'dowBlocker'+'Samples;\x20+'+'+i\x20)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec2\x20'+'diskUV\x20=\x20g'+'enerateDis'+'kSample(di'+'skData);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20sampleUV'+'\x20=\x20shadowC'+'oords\x20+\x20di'+'skUV\x20*\x20sea'+'rchWidth;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20shadow'+'MapDepth\x20='+'\x20texture2D'+'Lod(shadow'+'Map,\x20sampl'+'eUV,\x200.0).'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20if\x20(\x20shad'+'owMapDepth'+'\x20<\x20z\x20)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20blockerSu'+'m\x20+=\x20shado'+'wMapDepth;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20numBloc'+'kers++;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20av'+'gBlockerDe'+'pth\x20=\x20bloc'+'kerSum\x20/\x20f'+'loat(numBl'+'ockers);\x0a}'+'\x0a\x0afloat\x20PC'+'SSFilter(T'+'EXTURE_ACC'+'EPT(shadow'+'Map),\x20vec2'+'\x20uv,\x20float')+('\x20receiverD'+'epth,\x20int\x20'+'shadowSamp'+'les,\x20float'+'\x20filterRad'+'ius,\x20float'+'\x20randomSee'+'d)\x20{\x0a\x0a\x20\x20\x20\x20'+'VogelDiskD'+'ata\x20diskDa'+'ta;\x0a\x20\x20\x20\x20pr'+'epareDiskC'+'onstants(d'+'iskData,\x20s'+'hadowSampl'+'es,\x20random'+'Seed);\x0a\x0a\x20\x20'+'\x20\x20float\x20su'+'m\x20=\x200.0;\x0a\x20'+'\x20\x20\x20for\x20(in'+'t\x20i\x20=\x200;\x20i'+'\x20<\x20shadowS'+'amples;\x20i+'+'+)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec2\x20of'+'fsetUV\x20=\x20g'+'enerateDis'+'kSample(di'+'skData)\x20*\x20'+'filterRadi'+'us;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20de'+'pth\x20=\x20text'+'ure2DLod(s'+'hadowMap,\x20'+'uv\x20+\x20offse'+'tUV,\x200.0).'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20sum\x20+=\x20st'+'ep(receive'+'rDepth,\x20de'+'pth);\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20retu'+'rn\x20sum\x20/\x20f'+'loat(shado'+'wSamples);'+'\x0a}\x0a\x0afloat\x20'+'getPenumbr'+'a(float\x20db'+'locker,\x20fl'+'oat\x20drecei'+'ver,\x20float'+'\x20penumbraS'+'ize,\x20float'+'\x20penumbraF'+'alloff)\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'dist\x20=\x20dre'+'ceiver\x20-\x20d'+'blocker;\x0a\x20'+'\x20\x20\x20float\x20p'+'enumbra\x20=\x20'+'1.0\x20-\x20pow('+'1.0\x20-\x20dist'+',\x20penumbra'+'Falloff);\x0a'+'\x20\x20\x20\x20return'+'\x20penumbra\x20'+'*\x20penumbra'+'Size;\x0a}\x0a\x0af'+'loat\x20PCSSD'+'irectional'+'(TEXTURE_A'+'CCEPT(shad'+'owMap),\x20ve'+'c3\x20shadowC'+'oords,\x20vec'+'4\x20cameraPa'+'rams,\x20vec4'+'\x20softShado'+'wParams)\x20{'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20receiver'+'Depth\x20=\x20sh'+'adowCoords'+'.z;\x0a\x20\x20\x20\x20fl'+'oat\x20random'+'Seed\x20=\x20fra'+'ctSinRand('+'gl_FragCoo'+'rd.xy);\x0a\x20\x20'+'\x20\x20int\x20shad'+'owSamples\x20'+'=\x20int(soft'+'ShadowPara'+'ms.x);\x0a\x20\x20\x20'+'\x20int\x20shado'+'wBlockerSa'+'mples\x20=\x20in'+'t(softShad')+('owParams.y'+');\x0a\x20\x20\x20\x20flo'+'at\x20penumbr'+'aSize\x20=\x20so'+'ftShadowPa'+'rams.z;\x0a\x20\x20'+'\x20\x20float\x20pe'+'numbraFall'+'off\x20=\x20soft'+'ShadowPara'+'ms.w;\x0a\x0a\x20\x20\x20'+'\x20//\x20normal'+'ized\x20inver'+'se\x20shadow\x20'+'map\x20size\x20t'+'o\x20preserve'+'\x20the\x20shado'+'w\x20softness'+'\x20regardles'+'s\x20of\x20the\x20s'+'hadow\x20reso'+'lution\x0a\x20\x20\x20'+'\x20int\x20shado'+'wMapSize\x20='+'\x20textureSi'+'ze(shadowM'+'ap,\x200).x;\x0a'+'\x20\x20\x20\x20float\x20'+'invShadowM'+'apSize\x20=\x201'+'.0\x20/\x20float'+'(shadowMap'+'Size);\x0a\x20\x20\x20'+'\x20invShadow'+'MapSize\x20*='+'\x20float(sha'+'dowMapSize'+')\x20/\x202048.0'+';\x0a\x0a\x20\x20\x20\x20flo'+'at\x20penumbr'+'a;\x0a\x0a\x20\x20\x20\x20//'+'\x20contact\x20h'+'ardening\x20p'+'ath\x0a\x20\x20\x20\x20if'+'\x20(shadowBl'+'ockerSampl'+'es\x20>\x200)\x20{\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20find\x20ave'+'rage\x20block'+'er\x20depth\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20avgBloc'+'kerDepth\x20='+'\x200.0;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20int\x20nu'+'mBlockers\x20'+'=\x200;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20PCSSFin'+'dBlocker(T'+'EXTURE_PAS'+'S(shadowMa'+'p),\x20avgBlo'+'ckerDepth,'+'\x20numBlocke'+'rs,\x20shadow'+'Coords.xy,'+'\x20receiverD'+'epth,\x20shad'+'owBlockerS'+'amples,\x20pe'+'numbraSize'+',\x20invShado'+'wMapSize,\x20'+'randomSeed'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20early'+'\x20out\x20when\x20'+'no\x20blocker'+'s\x20are\x20pres'+'ent\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(numB'+'lockers\x20<\x20'+'1)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x201.0f;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'penumbra\x20s'+'ize\x20is\x20bas'+'ed\x20on\x20the\x20'+'blocker\x20de'+'pth\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20penumbra'+'\x20=\x20getPenu'+'mbra(avgBl'+'ockerDepth'+',\x20shadowCo'+'ords.z,\x20pe'+'numbraSize'+',\x20penumbra')+('Falloff);\x0a'+'\x0a\x20\x20\x20\x20}\x20els'+'e\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20cons'+'tant\x20filte'+'r\x20size,\x20no'+'\x20contact\x20h'+'ardening\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20pen'+'umbra\x20=\x20pe'+'numbraSize'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20float\x20f'+'ilterRadiu'+'s\x20=\x20penumb'+'ra\x20*\x20invSh'+'adowMapSiz'+'e;\x0a\x0a\x20\x20\x20\x20//'+'\x20filtering'+'\x0a\x20\x20\x20\x20retur'+'n\x20PCSSFilt'+'er(TEXTURE'+'_PASS(shad'+'owMap),\x20sh'+'adowCoords'+'.xy,\x20recei'+'verDepth,\x20'+'shadowSamp'+'les,\x20filte'+'rRadius,\x20r'+'andomSeed)'+';\x0a}\x0a\x0afloat'+'\x20getShadow'+'PCSS(TEXTU'+'RE_ACCEPT('+'shadowMap)'+',\x20vec3\x20sha'+'dowCoord,\x20'+'vec4\x20shado'+'wParams,\x20v'+'ec4\x20camera'+'Params,\x20ve'+'c4\x20softSha'+'dowParams,'+'\x20vec3\x20ligh'+'tDir)\x20{\x0a\x20\x20'+'\x20\x20return\x20P'+'CSSDirecti'+'onal(TEXTU'+'RE_PASS(sh'+'adowMap),\x20'+'shadowCoor'+'d,\x20cameraP'+'arams,\x20sof'+'tShadowPar'+'ams);\x0a}\x0a\x0a'),y2='\x0aattribute'+'\x20float\x20ver'+'tex_boneIn'+'dices;\x0a\x0aun'+'iform\x20high'+'p\x20sampler2'+'D\x20texture_'+'poseMap;\x0a\x0a'+'mat4\x20getBo'+'neMatrix(c'+'onst\x20in\x20fl'+'oat\x20indexF'+'loat)\x20{\x0a\x0a\x20'+'\x20\x20\x20int\x20wid'+'th\x20=\x20textu'+'reSize(tex'+'ture_poseM'+'ap,\x200).x;\x0a'+'\x20\x20\x20\x20int\x20in'+'dex\x20=\x20int('+'indexFloat'+'\x20+\x200.5)\x20*\x20'+'3;\x0a\x20\x20\x20\x20int'+'\x20iy\x20=\x20inde'+'x\x20/\x20width;'+'\x0a\x20\x20\x20\x20int\x20i'+'x\x20=\x20index\x20'+'%\x20width;\x0a\x0a'+'\x20\x20\x20\x20//\x20rea'+'d\x20elements'+'\x20of\x204x3\x20ma'+'trix\x0a\x20\x20\x20\x20v'+'ec4\x20v1\x20=\x20t'+'exelFetch('+'texture_po'+'seMap,\x20ive'+'c2(ix\x20+\x200,'+'\x20iy),\x200);\x0a'+'\x20\x20\x20\x20vec4\x20v'+'2\x20=\x20texelF'+'etch(textu'+'re_poseMap'+',\x20ivec2(ix'+'\x20+\x201,\x20iy),'+'\x200);\x0a\x20\x20\x20\x20v'+'ec4\x20v3\x20=\x20t'+'exelFetch('+'texture_po'+'seMap,\x20ive'+'c2(ix\x20+\x202,'+'\x20iy),\x200);\x0a'+'\x0a\x20\x20\x20\x20//\x20tr'+'anspose\x20to'+'\x204x4\x20matri'+'x\x0a\x20\x20\x20\x20retu'+'rn\x20mat4(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20v1.'+'x,\x20v2.x,\x20v'+'3.x,\x200,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20v1.y'+',\x20v2.y,\x20v3'+'.y,\x200,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20v1.z,'+'\x20v2.z,\x20v3.'+'z,\x200,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20v1.w,\x20'+'v2.w,\x20v3.w'+',\x201\x0a\x20\x20\x20\x20);'+'\x0a}\x0a',v2='\x0a\x0aattribut'+'e\x20vec4\x20ver'+'tex_boneWe'+'ights;\x0aatt'+'ribute\x20vec'+'4\x20vertex_b'+'oneIndices'+';\x0a\x0auniform'+'\x20highp\x20sam'+'pler2D\x20tex'+'ture_poseM'+'ap;\x0a\x0avoid\x20'+'getBoneMat'+'rix(const\x20'+'in\x20int\x20wid'+'th,\x20const\x20'+'in\x20int\x20ind'+'ex,\x20out\x20ve'+'c4\x20v1,\x20out'+'\x20vec4\x20v2,\x20'+'out\x20vec4\x20v'+'3)\x20{\x0a\x0a\x20\x20\x20\x20'+'int\x20v\x20=\x20in'+'dex\x20/\x20widt'+'h;\x0a\x20\x20\x20\x20int'+'\x20u\x20=\x20index'+'\x20%\x20width;\x0a'+'\x0a\x20\x20\x20\x20v1\x20=\x20'+'texelFetch'+'(texture_p'+'oseMap,\x20iv'+'ec2(u\x20+\x200,'+'\x20v),\x200);\x0a\x20'+'\x20\x20\x20v2\x20=\x20te'+'xelFetch(t'+'exture_pos'+'eMap,\x20ivec'+'2(u\x20+\x201,\x20v'+'),\x200);\x0a\x20\x20\x20'+'\x20v3\x20=\x20texe'+'lFetch(tex'+'ture_poseM'+'ap,\x20ivec2('+'u\x20+\x202,\x20v),'+'\x200);\x0a}\x0a\x0ama'+'t4\x20getSkin'+'Matrix(con'+'st\x20in\x20vec4'+'\x20indicesFl'+'oat,\x20const'+'\x20in\x20vec4\x20w'+'eights)\x20{\x0a'+'\x0a\x20\x20\x20\x20int\x20w'+'idth\x20=\x20tex'+'tureSize(t'+'exture_pos'+'eMap,\x200).x'+';\x0a\x20\x20\x20\x20ivec'+'4\x20indices\x20'+'=\x20ivec4(in'+'dicesFloat'+'\x20+\x200.5)\x20*\x20'+'3;\x0a\x0a\x20\x20\x20\x20//'+'\x20get\x204\x20bon'+'e\x20matrices'+'\x0a\x20\x20\x20\x20vec4\x20'+'a1,\x20a2,\x20a3'+';\x0a\x20\x20\x20\x20getB'+'oneMatrix('+'width,\x20ind'+'ices.x,\x20a1'+',\x20a2,\x20a3);'+'\x0a\x0a\x20\x20\x20\x20vec4'+'\x20b1,\x20b2,\x20b'+'3;\x0a\x20\x20\x20\x20get'+'BoneMatrix'+'(width,\x20in'+'dices.y,\x20b'+'1,\x20b2,\x20b3)'+';\x0a\x0a\x20\x20\x20\x20vec'+'4\x20c1,\x20c2,\x20'+'c3;\x0a\x20\x20\x20\x20ge'+'tBoneMatri'+'x(width,\x20i'+'ndices.z,\x20'+'c1,\x20c2,\x20c3'+');\x0a\x0a\x20\x20\x20\x20ve'+'c4\x20d1,\x20d2,'+'\x20d3;\x0a\x20\x20\x20\x20g'+'etBoneMatr'+'ix(width,\x20'+'indices.w,'+'\x20d1,\x20d2,\x20d'+'3);\x0a\x0a\x20\x20\x20\x20/'+'/\x20multiply'+'\x20them\x20by\x20w'+'eights\x20and'+'\x20add\x20up\x20to'+'\x20get\x20final'+'\x204x3\x20matri'+('x\x0a\x20\x20\x20\x20vec4'+'\x20v1\x20=\x20a1\x20*'+'\x20weights.x'+'\x20+\x20b1\x20*\x20we'+'ights.y\x20+\x20'+'c1\x20*\x20weigh'+'ts.z\x20+\x20d1\x20'+'*\x20weights.'+'w;\x0a\x20\x20\x20\x20vec'+'4\x20v2\x20=\x20a2\x20'+'*\x20weights.'+'x\x20+\x20b2\x20*\x20w'+'eights.y\x20+'+'\x20c2\x20*\x20weig'+'hts.z\x20+\x20d2'+'\x20*\x20weights'+'.w;\x0a\x20\x20\x20\x20ve'+'c4\x20v3\x20=\x20a3'+'\x20*\x20weights'+'.x\x20+\x20b3\x20*\x20'+'weights.y\x20'+'+\x20c3\x20*\x20wei'+'ghts.z\x20+\x20d'+'3\x20*\x20weight'+'s.w;\x0a\x0a\x20\x20\x20\x20'+'//\x20add\x20up\x20'+'weights\x0a\x20\x20'+'\x20\x20float\x20on'+'e\x20=\x20dot(we'+'ights,\x20vec'+'4(1.0));\x0a\x0a'+'\x20\x20\x20\x20//\x20tra'+'nspose\x20to\x20'+'4x4\x20matrix'+'\x0a\x20\x20\x20\x20retur'+'n\x20mat4(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20v1.x'+',\x20v2.x,\x20v3'+'.x,\x200,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20v1.y,'+'\x20v2.y,\x20v3.'+'y,\x200,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20v1.z,\x20'+'v2.z,\x20v3.z'+',\x200,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20v1.w,\x20v'+'2.w,\x20v3.w,'+'\x20one\x0a\x20\x20\x20\x20)'+';\x0a}\x0a'),x2='\x0a\x20\x20\x20\x20#defi'+'ne\x20LIT_SKY'+'BOX_INTENS'+'ITY\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22e'+'nvProcPS\x22\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22gammaP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ton'+'emappingPS'+'\x22\x0a\x0a\x20\x20\x20\x20#if'+'def\x20PREPAS'+'S_PASS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20varyi'+'ng\x20float\x20v'+'LinearDept'+'h;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22floatAsUi'+'ntPS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20varying\x20'+'vec3\x20vView'+'Dir;\x0a\x20\x20\x20\x20u'+'niform\x20flo'+'at\x20skyboxH'+'ighlightMu'+'ltiplier;\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20SKY_CUBE'+'MAP\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20samplerCu'+'be\x20texture'+'_cubeMap;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20SKYM'+'ESH\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vary'+'ing\x20vec3\x20v'+'WorldPos;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'mat3\x20cubeM'+'apRotation'+'Matrix;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20ve'+'c3\x20project'+'edSkydomeC'+'enter;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#el'+'se\x20//\x20env-'+'atlas\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22spher'+'icalPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22envA'+'tlasPS\x22\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20sampl'+'er2D\x20textu'+'re_envAtla'+'s;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20f'+'loat\x20mipLe'+'vel;\x0a\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20void\x20mai'+'n(void)\x20{\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20outpu'+'t\x20linear\x20d'+'epth\x20durin'+'g\x20prepass\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20gl_FragC'+'olor\x20=\x20flo'+'at2vec4(vL'+'inearDepth'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20SK'+'Y_CUBEMAP\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20SKYMES'+'H\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20get\x20'+'vector\x20fro'+'m\x20world\x20sp'+'ace\x20pos\x20to'+('\x20tripod\x20or'+'igin\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'envDir\x20=\x20n'+'ormalize(v'+'WorldPos\x20-'+'\x20projected'+'SkydomeCen'+'ter);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20dir\x20=\x20env'+'Dir\x20*\x20cube'+'MapRotatio'+'nMatrix;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20di'+'r\x20=\x20vViewD'+'ir;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dir.x'+'\x20*=\x20-1.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20linear\x20=\x20'+'{SKYBOX_DE'+'CODE_FNC}('+'textureCub'+'e(texture_'+'cubeMap,\x20d'+'ir));\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x20//\x20en'+'v-atlas\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'dir\x20=\x20vVie'+'wDir\x20*\x20vec'+'3(-1.0,\x201.'+'0,\x201.0);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec2\x20'+'uv\x20=\x20toSph'+'ericalUv(n'+'ormalize(d'+'ir));\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20li'+'near\x20=\x20{SK'+'YBOX_DECOD'+'E_FNC}(tex'+'ture2D(tex'+'ture_envAt'+'las,\x20mapRo'+'ughnessUv('+'uv,\x20mipLev'+'el)));\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20our\x20HDR'+'\x20encodes\x20v'+'alues\x20up\x20t'+'o\x2064,\x20so\x20a'+'llow\x20extra'+'\x20brightnes'+'s\x20for\x20the\x20'+'clipped\x20va'+'lues\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(any(great'+'erThanEqua'+'l(linear,\x20'+'vec3(64.0)'+')))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20linear\x20*'+'=\x20skyboxHi'+'ghlightMul'+'tiplier;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20gl_F'+'ragColor\x20='+'\x20vec4(gamm'+'aCorrectOu'+'tput(toneM'+'ap(process'+'Environmen'+'t(linear))'+'),\x201.0);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20}'+'\x0a'),T2='\x0aattribute'+'\x20vec4\x20aPos'+'ition;\x0a\x0aun'+'iform\x20mat4'+'\x20matrix_vi'+'ew;\x0aunifor'+'m\x20mat4\x20mat'+'rix_projec'+'tionSkybox'+';\x0auniform\x20'+'mat3\x20cubeM'+'apRotation'+'Matrix;\x0a\x0av'+'arying\x20vec'+'3\x20vViewDir'+';\x0a\x0a#ifdef\x20'+'PREPASS_PA'+'SS\x0a\x20\x20\x20\x20//\x20'+'when\x20skydo'+'me\x20renders'+'\x20depth\x20dur'+'ing\x20prepas'+'s,\x20generat'+'e\x20linear\x20d'+'epth\x0a\x20\x20\x20\x20v'+'arying\x20flo'+'at\x20vLinear'+'Depth;\x0a#en'+'dif\x0a\x0a#ifde'+'f\x20SKYMESH\x0a'+'\x20\x20\x20\x20unifor'+'m\x20mat4\x20mat'+'rix_model;'+'\x0a\x20\x20\x20\x20varyi'+'ng\x20vec3\x20vW'+'orldPos;\x0a#'+'endif\x0a\x0avoi'+'d\x20main(voi'+'d)\x20{\x0a\x0a\x20\x20\x20\x20'+'mat4\x20view\x20'+'=\x20matrix_v'+'iew;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20SKY'+'MESH\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec4\x20w'+'orldPos\x20=\x20'+'matrix_mod'+'el\x20*\x20aPosi'+'tion;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vWorld'+'Pos\x20=\x20worl'+'dPos.xyz;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'_Position\x20'+'=\x20matrix_p'+'rojectionS'+'kybox\x20*\x20(v'+'iew\x20*\x20worl'+'dPos);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20PREPASS'+'_PASS\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20linear\x20de'+'pth\x20from\x20t'+'he\x20worldPo'+'sition,\x20se'+'e\x20getLinea'+'rDepth\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'LinearDept'+'h\x20=\x20-(matr'+'ix_view\x20*\x20'+'vec4(vWorl'+'dPos,\x201.0)'+').z;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'view[3][0]'+'\x20=\x20view[3]'+'[1]\x20=\x20view'+'[3][2]\x20=\x200'+'.0;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20gl_Posit'+'ion\x20=\x20matr'+'ix_project'+'ionSkybox\x20'+'*\x20(view\x20*\x20'+'aPosition)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vViewDir\x20='+'\x20aPosition'+'.xyz\x20*\x20cub'+'eMapRotati'+'onMatrix;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+('\x20//\x20for\x20in'+'finite\x20sky'+'box,\x20use\x20n'+'egative\x20gl'+'_Position.'+'w\x20to\x20get\x20p'+'ositive\x20li'+'near\x20depth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vLinear'+'Depth\x20=\x20-g'+'l_Position'+'.w;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20//\x20Fo'+'rce\x20skybox'+'\x20to\x20far\x20Z,'+'\x20regardles'+'s\x20of\x20the\x20c'+'lip\x20planes'+'\x20on\x20the\x20ca'+'mera\x0a\x20\x20\x20\x20/'+'/\x20Subtract'+'\x20a\x20tiny\x20fu'+'dge\x20factor'+'\x20to\x20ensure'+'\x20floating\x20'+'point\x20erro'+'rs\x20don\x27t\x0a\x20'+'\x20\x20\x20//\x20stil'+'l\x20push\x20pix'+'els\x20beyond'+'\x20far\x20Z.\x20Se'+'e:\x0a\x20\x20\x20\x20//\x20'+'https://co'+'mmunity.kh'+'ronos.org/'+'t/skybox-p'+'roblem/618'+'57\x0a\x0a\x20\x20\x20\x20gl'+'_Position.'+'z\x20=\x20gl_Pos'+'ition.w\x20-\x20'+'1.0e-7;\x0a}\x0a'),w2='\x0a\x0a#ifdef\x20S'+'TD_SPECULA'+'R_CONSTANT'+'\x0auniform\x20v'+'ec3\x20materi'+'al_specula'+'r;\x0a#endif\x0a'+'\x0avoid\x20getS'+'pecularity'+'()\x20{\x0a\x20\x20\x20\x20v'+'ec3\x20specul'+'arColor\x20=\x20'+'vec3(1,1,1'+');\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20STD_S'+'PECULAR_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20specularC'+'olor\x20*=\x20ma'+'terial_spe'+'cular;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_SPECUL'+'AR_TEXTURE'+'\x0a\x20\x20\x20\x20specu'+'larColor\x20*'+'=\x20{STD_SPE'+'CULAR_TEXT'+'URE_DECODE'+'}(texture2'+'DBias({STD'+'_SPECULAR_'+'TEXTURE_NA'+'ME},\x20{STD_'+'SPECULAR_T'+'EXTURE_UV}'+',\x20textureB'+'ias)).{STD'+'_SPECULAR_'+'TEXTURE_CH'+'ANNEL};\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_SPECU'+'LAR_VERTEX'+'\x0a\x20\x20\x20\x20specu'+'larColor\x20*'+'=\x20saturate'+'(vVertexCo'+'lor.{STD_S'+'PECULAR_VE'+'RTEX_CHANN'+'EL});\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20dSpecula'+'rity\x20=\x20spe'+'cularColor'+';\x0a}\x0a',E2='\x0a//\x20equire'+'ctangular\x20'+'helper\x20fun'+'ctions\x0avec'+'2\x20toSpheri'+'cal(vec3\x20d'+'ir)\x20{\x0a\x20\x20\x20\x20'+'return\x20vec'+'2(dir.xz\x20='+'=\x20vec2(0.0'+')\x20?\x200.0\x20:\x20'+'atan(dir.x'+',\x20dir.z),\x20'+'asin(dir.y'+'));\x0a}\x0a\x0avec'+'2\x20toSpheri'+'calUv(vec3'+'\x20dir)\x20{\x0a\x20\x20'+'\x20\x20const\x20fl'+'oat\x20PI\x20=\x203'+'.141592653'+'589793;\x0a\x20\x20'+'\x20\x20vec2\x20uv\x20'+'=\x20toSpheri'+'cal(dir)\x20/'+'\x20vec2(PI\x20*'+'\x202.0,\x20PI)\x20'+'+\x200.5;\x0a\x20\x20\x20'+'\x20return\x20ve'+'c2(uv.x,\x201'+'.0\x20-\x20uv.y)'+';\x0a}\x0a',b2='\x0a\x0a#ifdef\x20S'+'TD_SPECULA'+'RITYFACTOR'+'_CONSTANT\x0a'+'uniform\x20fl'+'oat\x20materi'+'al_specula'+'rityFactor'+';\x0a#endif\x0a\x0a'+'void\x20getSp'+'ecularityF'+'actor()\x20{\x0a'+'\x20\x20\x20\x20float\x20'+'specularit'+'yFactor\x20=\x20'+'1.0;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SPECULARI'+'TYFACTOR_C'+'ONSTANT\x0a\x20\x20'+'\x20\x20specular'+'ityFactor\x20'+'*=\x20materia'+'l_specular'+'ityFactor;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_SP'+'ECULARITYF'+'ACTOR_TEXT'+'URE\x0a\x20\x20\x20\x20sp'+'ecularityF'+'actor\x20*=\x20t'+'exture2DBi'+'as({STD_SP'+'ECULARITYF'+'ACTOR_TEXT'+'URE_NAME},'+'\x20{STD_SPEC'+'ULARITYFAC'+'TOR_TEXTUR'+'E_UV},\x20tex'+'tureBias).'+'{STD_SPECU'+'LARITYFACT'+'OR_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_SP'+'ECULARITYF'+'ACTOR_VERT'+'EX\x0a\x20\x20\x20\x20spe'+'cularityFa'+'ctor\x20*=\x20sa'+'turate(vVe'+'rtexColor.'+'{STD_SPECU'+'LARITYFACT'+'OR_VERTEX_'+'CHANNEL});'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20dSp'+'ecularityF'+'actor\x20=\x20sp'+'ecularityF'+'actor;\x0a}\x0a',A2='\x0afloat\x20get'+'SpotEffect'+'(vec3\x20ligh'+'tSpotDir,\x20'+'float\x20ligh'+'tInnerCone'+'Angle,\x20flo'+'at\x20lightOu'+'terConeAng'+'le,\x20vec3\x20l'+'ightDirNor'+'m)\x20{\x0a\x20\x20\x20\x20f'+'loat\x20cosAn'+'gle\x20=\x20dot('+'lightDirNo'+'rm,\x20lightS'+'potDir);\x0a\x20'+'\x20\x20\x20return\x20'+'smoothstep'+'(lightOute'+'rConeAngle'+',\x20lightInn'+'erConeAngl'+'e,\x20cosAngl'+'e);\x0a}\x0a',C2='\x0a\x20\x20\x20\x20nineS'+'licedUv\x20=\x20'+'vec2(vUv0.'+'x,\x201.0\x20-\x20v'+'Uv0.y);\x0a',P2='\x0a\x20\x20\x20\x20vec2\x20'+'tileMask\x20='+'\x20step(vMas'+'k,\x20vec2(0.'+'99999));\x0a\x20'+'\x20\x20\x20vec2\x20ti'+'leSize\x20=\x200'+'.5\x20*\x20(inne'+'rOffset.xy'+'\x20+\x20innerOf'+'fset.zw);\x0a'+'\x20\x20\x20\x20vec2\x20t'+'ileScale\x20='+'\x20vec2(1.0)'+'\x20/\x20(vec2(1'+'.0)\x20-\x20tile'+'Size);\x0a\x20\x20\x20'+'\x20vec2\x20clam'+'pedUv\x20=\x20mi'+'x(innerOff'+'set.xy\x20*\x200'+'.5,\x20vec2(1'+'.0)\x20-\x20inne'+'rOffset.zw'+'\x20*\x200.5,\x20fr'+'act((vTile'+'dUv\x20-\x20tile'+'Size)\x20*\x20ti'+'leScale));'+'\x0a\x20\x20\x20\x20clamp'+'edUv\x20=\x20cla'+'mpedUv\x20*\x20a'+'tlasRect.z'+'w\x20+\x20atlasR'+'ect.xy;\x0a\x20\x20'+'\x20\x20nineSlic'+'edUv\x20=\x20vUv'+'0\x20*\x20tileMa'+'sk\x20+\x20clamp'+'edUv\x20*\x20(ve'+'c2(1.0)\x20-\x20'+'tileMask);'+'\x0a\x20\x20\x20\x20nineS'+'licedUv.y\x20'+'=\x201.0\x20-\x20ni'+'neSlicedUv'+'.y;\x0a\x20\x20\x20\x20\x0a',M2='\x0a\x0a\x20\x20\x20\x20//\x20g'+'lobals\x0a\x20\x20\x20'+'\x20float\x20dAl'+'pha\x20=\x201.0;'+'\x0a\x0a\x20\x20\x20\x20//\x20a'+'ll\x20passes\x20'+'handle\x20opa'+'city\x0a\x20\x20\x20\x20#'+'if\x20LIT_BLE'+'ND_TYPE\x20!='+'\x20NONE\x20||\x20d'+'efined(LIT'+'_ALPHA_TES'+'T)\x20||\x20defi'+'ned(LIT_AL'+'PHA_TO_COV'+'ERAGE)\x20||\x20'+'STD_OPACIT'+'Y_DITHER\x20!'+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_OPAC'+'ITY_TEXTUR'+'E_ALLOCATE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20sampler2D'+'\x20texture_o'+'pacityMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20F'+'ORWARD_PAS'+'S\x20//\x20-----'+'----------'+'-\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20global'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20dAlbe'+'do;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20dNo'+'rmalW;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec3\x20'+'dSpeculari'+'ty\x20=\x20vec3('+'0.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'dGlossines'+'s\x20=\x200.0;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_R'+'EFRACTION\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20dT'+'ransmissio'+'n;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20dThicknes'+'s;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SC'+'ENE_COLOR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'sampler2D\x20'+'uSceneColo'+'rMap;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SCREEN_SI'+'ZE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec4\x20uS'+'creenSize;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_TRAN'+'SFORMS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20mat'+'4\x20matrix_v'+'iewProject'+'ion;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20mat4\x20'+'matrix_mod'+'el;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20parallax\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_H'+'EIGHT_MAP\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20vec2\x20dUv'+'Offset;\x0a\x20\x20'+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_DIFFUSE_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'sampler2D\x20'+'texture_he'+'ightMap;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20diffu'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_DIFFUSE_'+'TEXTURE_AL'+'LOCATE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20sam'+'pler2D\x20tex'+'ture_diffu'+'seMap;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_DIFFUSED'+'ETAIL_TEXT'+'URE_ALLOCA'+'TE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20texture'+'_diffuseDe'+'tailMap;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20norm'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_NORMAL_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20samp'+'ler2D\x20text'+'ure_normal'+'Map;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'NORMALDETA'+'IL_TEXTURE'+'_ALLOCATE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'sampler2D\x20'+'texture_no'+'rmalDetail'+'Map;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20refracti'+'on\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_THICKNES'+'S_TEXTURE_'+'ALLOCATE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20s'+'ampler2D\x20t'+'exture_thi'+'cknessMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_REFRA'+'CTION_TEXT'+'URE_ALLOCA'+'TE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20texture'+'_refractio'+'nMap;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20iridesc'+'ence\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_IRIDES'+'CENCE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20dIride'+'scence;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20dIri'+'descenceTh')+('ickness;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_IRIDESC'+'ENCE_THICK'+'NESS_TEXTU'+'RE_ALLOCAT'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20samp'+'ler2D\x20text'+'ure_irides'+'cenceThick'+'nessMap;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_IRIDESCEN'+'CE_TEXTURE'+'_ALLOCATE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20textur'+'e_iridesce'+'nceMap;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'ccSpecular'+'ity;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20flo'+'at\x20ccGloss'+'iness;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20ccNorm'+'alW;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'GGX_SPECUL'+'AR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20dAnisotro'+'py;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec2'+'\x20dAnisotro'+'pyRotation'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'pecularity'+'\x20&\x20glossin'+'ess\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SPECULA'+'R_OR_REFLE'+'CTION\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20sheen\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SHEEN\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20sS'+'pecularity'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fl'+'oat\x20sGloss'+'iness;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_SHEEN'+'_TEXTURE_A'+'LLOCATE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20samp'+'ler2D\x20text'+'ure_sheenM'+'ap;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_SHEENG'+'LOSS_TEXTU'+'RE_ALLOCAT'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'sampler2D\x20'+'texture_sh'+'eenGlossMa')+('p;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20metalness'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_METALN'+'ESS\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'float\x20dMet'+'alness;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20float\x20'+'dIor;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_METALN'+'ESS_TEXTUR'+'E_ALLOCATE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20s'+'ampler2D\x20t'+'exture_met'+'alnessMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'pecularity'+'\x20factor\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULARI'+'TY_FACTOR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20dSpecula'+'rityFactor'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULARIT'+'YFACTOR_TE'+'XTURE_ALLO'+'CATE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20texture'+'_speculari'+'tyFactorMa'+'p;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20specular\x20'+'color\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_S'+'PECULAR_CO'+'LOR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SPECULAR_'+'TEXTURE_AL'+'LOCATE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20sampl'+'er2D\x20textu'+'re_specula'+'rMap;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20gloss\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_GLOSS_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'sampler2D\x20'+'texture_gl'+'ossMap;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20')+('\x20//\x20ao\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_AO\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20dAo'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_AO_TE'+'XTURE_ALLO'+'CATE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20s'+'ampler2D\x20t'+'exture_aoM'+'ap;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_AODE'+'TAIL_TEXTU'+'RE_ALLOCAT'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20samp'+'ler2D\x20text'+'ure_aoDeta'+'ilMap;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20emissio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20dEmis'+'sion;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_EMISS'+'IVE_TEXTUR'+'E_ALLOCATE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20sampler2D'+'\x20texture_e'+'missiveMap'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20c'+'learcoat\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_CL'+'EARCOAT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_CLEARCOAT'+'_TEXTURE_A'+'LLOCATE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20sampler2'+'D\x20texture_'+'clearCoatM'+'ap;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_CLEA'+'RCOATGLOSS'+'_TEXTURE_A'+'LLOCATE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20sampler2'+'D\x20texture_'+'clearCoatG'+'lossMap;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_CLEARCOAT'+'NORMAL_TEX'+'TURE_ALLOC'+'ATE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20sa'+'mpler2D\x20te'+'xture_clea'+'rCoatNorma'+'lMap;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'anisotropy'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'GGX_SPECUL'+'AR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde')+('f\x20STD_ANIS'+'OTROPY_TEX'+'TURE_ALLOC'+'ATE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20sa'+'mpler2D\x20te'+'xture_anis'+'otropyMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20lig'+'htmap\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20de'+'fined(STD_'+'LIGHTMAP)\x20'+'||\x20defined'+'(STD_LIGHT'+'_VERTEX_CO'+'LOR)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3\x20dLightma'+'p;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_LIGH'+'T_TEXTURE_'+'ALLOCATE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'2D\x20texture'+'_lightMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20//\x20front\x20'+'end\x20output'+'s\x20to\x20lit\x20s'+'hader\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'litShaderC'+'orePS\x22\x0a'),D2='\x0a\x0a\x20\x20\x20\x20//\x20a'+'ll\x20passes\x20'+'handle\x20opa'+'city\x0a\x20\x20\x20\x20#'+'if\x20LIT_BLE'+'ND_TYPE\x20!='+'\x20NONE\x20||\x20d'+'efined(LIT'+'_ALPHA_TES'+'T)\x20||\x20defi'+'ned(LIT_AL'+'PHA_TO_COV'+'ERAGE)\x20||\x20'+'STD_OPACIT'+'Y_DITHER\x20!'+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22opaci'+'tyPS\x22\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_ALPHA_TES'+'T)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22alpha'+'TestPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20dithe'+'ring\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20STD'+'_OPACITY_D'+'ITHER\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22opac'+'ityDitherP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20FORWARD_P'+'ASS\x20//\x20---'+'----------'+'---\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20para'+'llax\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_HEIGHT'+'_MAP\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'allaxPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20diff'+'use\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x20\x22diffuse'+'PS\x22\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20norm'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_NEEDS_NO'+'RMAL\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22nor'+'malMapPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ref'+'raction\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_REF'+'RACTION\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'transmissi'+'onPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22th'+'icknessPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ir'+'idescence\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_I'+'RIDESCENCE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22iridesc'+'encePS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'iridescenc'+'eThickness'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+('\x20speculari'+'ty\x20&\x20gloss'+'iness\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LAR_OR_REF'+'LECTION\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20sheen\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SHEEN\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22sheen'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'sheenGloss'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20m'+'etalness\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_METALNES'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22me'+'talnessPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22ior'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'pecularity'+'\x20factor\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULARI'+'TY_FACTOR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22spec'+'ularityFac'+'torPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20specular'+'\x20color\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULAR_C'+'OLOR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22specularP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20voi'+'d\x20getSpecu'+'larity()\x20{'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dSpecula'+'rity\x20=\x20vec'+'3(1);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20g'+'loss\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22glo'+'ssPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20ao\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_AO\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'aoPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20emissio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'emissivePS'+'\x22\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20clearc'+'oat\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLEARCO')+('AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22clear'+'CoatPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'clearCoatG'+'lossPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'clearCoatN'+'ormalPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20anis'+'otropy\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_SPECULAR)'+'\x20&&\x20define'+'d(LIT_LIGH'+'TING)\x20&&\x20d'+'efined(LIT'+'_GGX_SPECU'+'LAR)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22ani'+'sotropyPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20li'+'ghtmap\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(STD'+'_LIGHTMAP)'+'\x20||\x20define'+'d(STD_LIGH'+'T_VERTEX_C'+'OLOR)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'ghtmapPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20void\x20eval'+'uateFronte'+'nd()\x20{\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20a'+'ll\x20passes\x20'+'handle\x20opa'+'city\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20LIT'+'_BLEND_TYP'+'E\x20!=\x20NONE\x20'+'||\x20defined'+'(LIT_ALPHA'+'_TEST)\x20||\x20'+'defined(LI'+'T_ALPHA_TO'+'_COVERAGE)'+'\x20||\x20STD_OP'+'ACITY_DITH'+'ER\x20!=\x20NONE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20getOpac'+'ity();\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_ALPH'+'A_TEST)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20alphaT'+'est(dAlpha'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20S'+'TD_OPACITY'+'_DITHER\x20!='+'\x20NONE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20opacityD'+'ither(dAlp'+'ha,\x200.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'opacity\x20=\x20'+'dAlpha;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20F'+'ORWARD_PAS'+'S\x20//\x20-----'+'----------'+'-\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20pa'+'rallax\x0a\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'HEIGHT_MAP'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Parallax()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20dif'+'fuse\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Albedo();\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'albedo\x20=\x20d'+'Albedo;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20normal'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_NEEDS_'+'NORMAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20getNorm'+'al();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'worldNorma'+'l\x20=\x20dNorma'+'lW;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20r'+'efraction\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_REFRACT'+'ION\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'getRefract'+'ion();\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs'+'_transmiss'+'ion\x20=\x20dTra'+'nsmission;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ge'+'tThickness'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_th'+'ickness\x20=\x20'+'dThickness'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'DISPERSION'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_d'+'ispersion\x20'+'=\x20material'+'_dispersio'+'n;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20iridescen'+'ce\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_IRID'+'ESCENCE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getIri'+'descence()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ge'+'tIridescen'+'ceThicknes'+'s();\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_i'+'ridescence'+'_intensity'+'\x20=\x20dIrides'+'cence;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs'+'_iridescen'+'ce_thickne'+'ss\x20=\x20dIrid'+'escenceThi'+'ckness;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('//\x20specula'+'rity\x20&\x20glo'+'ssiness\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULAR_'+'OR_REFLECT'+'ION\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20sheen\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_SHE'+'EN\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20getShee'+'n();\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_sheen_s'+'pecularity'+'\x20=\x20sSpecul'+'arity;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'SheenGloss'+'iness();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_she'+'en_gloss\x20='+'\x20sGlossine'+'ss;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20met'+'alness\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_METALN'+'ESS\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getMet'+'alness();\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_me'+'talness\x20=\x20'+'dMetalness'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getIor()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'ior\x20=\x20dIor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20specu'+'larity\x20fac'+'tor\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULARI'+'TY_FACTOR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'getSpecula'+'rityFactor'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_specular'+'ityFactor\x20'+'=\x20dSpecula'+'rityFactor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20gloss'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Glossiness'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'getSpecula'+'rity();\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_specular'+'ity\x20=\x20dSpe'+'cularity;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_gloss\x20'+'=\x20dGlossin')+('ess;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'ao\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_AO\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20getAO'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_ao'+'\x20=\x20dAo;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20emissio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getEmi'+'ssion();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_e'+'mission\x20=\x20'+'dEmission;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20cle'+'arcoat\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'CLEARCOAT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20getC'+'learCoat()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ge'+'tClearCoat'+'Glossiness'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'getClearCo'+'atNormal()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_clea'+'rcoat_spec'+'ularity\x20=\x20'+'ccSpecular'+'ity;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_c'+'learcoat_g'+'loss\x20=\x20ccG'+'lossiness;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_clear'+'coat_world'+'Normal\x20=\x20c'+'cNormalW;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20aniso'+'tropy\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20defined('+'LIT_SPECUL'+'AR)\x20&&\x20def'+'ined(LIT_L'+'IGHTING)\x20&'+'&\x20defined('+'LIT_GGX_SP'+'ECULAR)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getAni'+'sotropy();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20ligh'+'tmap\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(S'+'TD_LIGHTMA'+'P)\x20||\x20defi'+'ned(STD_LI'+'GHT_VERTEX'+'_COLOR)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getLig'+'htMap();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_lightma'+'p\x20=\x20dLight'+'map;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_LIGHTMA'+'P_DIR\x0a\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_lightm'+'apDir\x20=\x20dL'+'ightmapDir'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20}\x0a'),I2='\x0a\x0a#ifdef\x20L'+'IT_TANGENT'+'S\x0a\x20\x20\x20\x20#def'+'ine\x20TBN_TA'+'NGENTS\x0a#el'+'se\x0a\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_USE_NOR'+'MALS)\x20||\x20d'+'efined(LIT'+'_USE_CLEAR'+'COAT_NORMA'+'LS)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#define\x20'+'TBN_DERIVA'+'TIVES\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0a#if\x20d'+'efined(TBN'+'_DERIVATIV'+'ES)\x0a\x20\x20\x20\x20un'+'iform\x20floa'+'t\x20tbnBasis'+';\x0a#endif\x0a\x0a'+'void\x20getTB'+'N(vec3\x20tan'+'gent,\x20vec3'+'\x20binormal,'+'\x20vec3\x20norm'+'al)\x20{\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20TB'+'N_TANGENTS'+'\x20//\x20tangen'+'ts\x20/\x20binor'+'mals\x20based'+'\x20TBN\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dTBN\x20='+'\x20mat3(norm'+'alize(tang'+'ent),\x20norm'+'alize(bino'+'rmal),\x20nor'+'malize(nor'+'mal));\x0a\x0a\x20\x20'+'\x20\x20#elif\x20de'+'fined(TBN_'+'DERIVATIVE'+'S)\x20//\x20deri'+'vatives\x20ba'+'sed\x20TBN\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20uv\x20=\x20{li'+'ghtingUv};'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20get\x20edg'+'e\x20vectors\x20'+'of\x20the\x20pix'+'el\x20triangl'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20dp1\x20='+'\x20dFdx(\x20vPo'+'sitionW\x20);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20dp2\x20=\x20'+'dFdy(\x20vPos'+'itionW\x20);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c2\x20duv1\x20=\x20'+'dFdx(\x20uv\x20)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec2\x20duv2\x20'+'=\x20dFdy(\x20uv'+'\x20);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20solv'+'e\x20the\x20line'+'ar\x20system\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20dp2perp'+'\x20=\x20cross(\x20'+'dp2,\x20norma'+'l\x20);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3\x20dp'+'1perp\x20=\x20cr'+'oss(\x20norma'+'l,\x20dp1\x20);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20T\x20=\x20dp2'+'perp\x20*\x20duv'+'1.x\x20+\x20dp1p'+'erp\x20*\x20duv2'+'.x;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec3\x20B\x20='+'\x20dp2perp\x20*'+'\x20duv1.y\x20+\x20'+'dp1perp\x20*\x20'+'duv2.y;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'construct\x20'+'a\x20scale-in'+'variant\x20fr'+('ame\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20float\x20de'+'nom\x20=\x20max('+'\x20dot(T,T),'+'\x20dot(B,B)\x20'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20float\x20inv'+'max\x20=\x20(den'+'om\x20==\x200.0)'+'\x20?\x200.0\x20:\x20t'+'bnBasis\x20/\x20'+'sqrt(\x20deno'+'m\x20);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20dTBN\x20=\x20'+'mat3(T\x20*\x20i'+'nvmax,\x20-B\x20'+'*\x20invmax,\x20'+'normal\x20);\x0a'+'\x0a\x20\x20\x20\x20#else'+'\x20//\x20object'+'\x20space\x20TBN'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec3\x20B\x20=\x20c'+'ross(norma'+'l,\x20vObject'+'SpaceUpW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3\x20T\x20=\x20cr'+'oss(normal'+',\x20B);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20if\x20(d'+'ot(B,B)==0'+'.0)\x20//\x20dea'+'l\x20with\x20cas'+'e\x20when\x20vOb'+'jectSpaceU'+'pW\x20normal\x20'+'are\x20parall'+'el\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20float'+'\x20major=max'+'(max(norma'+'l.x,\x20norma'+'l.y),\x20norm'+'al.z);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(normal'+'.x\x20==\x20majo'+'r)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20B\x20=\x20cro'+'ss(normal,'+'\x20vec3(0,1,'+'0));\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20T\x20=\x20cross'+'(normal,\x20B'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20e'+'lse\x20if\x20(no'+'rmal.y\x20==\x20'+'major)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20B\x20='+'\x20cross(nor'+'mal,\x20vec3('+'0,0,1));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20T\x20=\x20c'+'ross(norma'+'l,\x20B);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20else\x20if'+'\x20(normal.z'+'\x20==\x20major)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20B\x20=\x20cross'+'(normal,\x20v'+'ec3(1,0,0)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20T'+'\x20=\x20cross(n'+'ormal,\x20B);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dTBN\x20='+'\x20mat3(norm'+'alize(T),\x20'+'normalize('+'B),\x20normal'+'ize(normal'+'));\x0a\x0a\x20\x20\x20\x20#')+'endif\x0a}\x0a',L2='\x0a#ifdef\x20ST'+'D_THICKNES'+'S_CONSTANT'+'\x0auniform\x20f'+'loat\x20mater'+'ial_thickn'+'ess;\x0a#endi'+'f\x0a\x0avoid\x20ge'+'tThickness'+'()\x20{\x0a\x20\x20\x20\x20d'+'Thickness\x20'+'=\x201.0;\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_THICKNE'+'SS_CONSTAN'+'T\x0a\x20\x20\x20\x20dThi'+'ckness\x20*=\x20'+'material_t'+'hickness;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_THI'+'CKNESS_TEX'+'TURE\x0a\x20\x20\x20\x20d'+'Thickness\x20'+'*=\x20texture'+'2DBias({ST'+'D_THICKNES'+'S_TEXTURE_'+'NAME},\x20{ST'+'D_THICKNES'+'S_TEXTURE_'+'UV},\x20textu'+'reBias).{S'+'TD_THICKNE'+'SS_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_TH'+'ICKNESS_VE'+'RTEX\x0a\x20\x20\x20\x20d'+'Thickness\x20'+'*=\x20saturat'+'e(vVertexC'+'olor.{STD_'+'THICKNESS_'+'VERTEX_CHA'+'NNEL});\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a',R2='\x0a\x0a#if\x20(TON'+'EMAP\x20==\x20NO'+'NE)\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22to'+'nemappingN'+'onePS\x22\x0a#el'+'if\x20TONEMAP'+'\x20==\x20FILMIC'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22tonem'+'appingFilm'+'icPS\x22\x0a#eli'+'f\x20TONEMAP\x20'+'==\x20LINEAR\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22tonema'+'ppingLinea'+'rPS\x22\x0a#elif'+'\x20TONEMAP\x20='+'=\x20HEJL\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22tonemappi'+'ngHejlPS\x22\x0a'+'#elif\x20TONE'+'MAP\x20==\x20ACE'+'S\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22tone'+'mappingAce'+'sPS\x22\x0a#elif'+'\x20TONEMAP\x20='+'=\x20ACES2\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22tonemapp'+'ingAces2PS'+'\x22\x0a#elif\x20TO'+'NEMAP\x20==\x20N'+'EUTRAL\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22tonemappi'+'ngNeutralP'+'S\x22\x0a#endif\x0a'+'\x0a',O2='\x0auniform\x20f'+'loat\x20expos'+'ure;\x0a\x0avec3'+'\x20toneMap(v'+'ec3\x20color)'+'\x20{\x0a\x20\x20\x20\x20flo'+'at\x20tA\x20=\x202.'+'51;\x0a\x20\x20\x20\x20fl'+'oat\x20tB\x20=\x200'+'.03;\x0a\x20\x20\x20\x20f'+'loat\x20tC\x20=\x20'+'2.43;\x0a\x20\x20\x20\x20'+'float\x20tD\x20='+'\x200.59;\x0a\x20\x20\x20'+'\x20float\x20tE\x20'+'=\x200.14;\x0a\x20\x20'+'\x20\x20vec3\x20x\x20='+'\x20color\x20*\x20e'+'xposure;\x0a\x20'+'\x20\x20\x20return\x20'+'(x*(tA*x+t'+'B))/(x*(tC'+'*x+tD)+tE)'+';\x0a}\x0a',F2='\x0auniform\x20f'+'loat\x20expos'+'ure;\x0a\x0a//\x20A'+'CES\x20approx'+'imation\x20by'+'\x20Stephen\x20H'+'ill\x0a\x0a//\x20sR'+'GB\x20=>\x20XYZ\x20'+'=>\x20D65_2_D'+'60\x20=>\x20AP1\x20'+'=>\x20RRT_SAT'+'\x0aconst\x20mat'+'3\x20ACESInpu'+'tMat\x20=\x20mat'+'3(\x0a\x20\x20\x20\x200.5'+'9719,\x200.35'+'458,\x200.048'+'23,\x0a\x20\x20\x20\x200.'+'07600,\x200.9'+'0834,\x200.01'+'566,\x0a\x20\x20\x20\x200'+'.02840,\x200.'+'13383,\x200.8'+'3777\x0a);\x0a\x0a/'+'/\x20ODT_SAT\x20'+'=>\x20XYZ\x20=>\x20'+'D60_2_D65\x20'+'=>\x20sRGB\x0aco'+'nst\x20mat3\x20A'+'CESOutputM'+'at\x20=\x20mat3('+'\x0a\x20\x20\x20\x20\x201.60'+'475,\x20-0.53'+'108,\x20-0.07'+'367,\x0a\x20\x20\x20\x20-'+'0.10208,\x20\x20'+'1.10813,\x20-'+'0.00605,\x0a\x20'+'\x20\x20\x20-0.0032'+'7,\x20-0.0727'+'6,\x20\x201.0760'+'2\x0a);\x0a\x0avec3'+'\x20RRTAndODT'+'Fit(vec3\x20v'+')\x20{\x0a\x20\x20\x20\x20ve'+'c3\x20a\x20=\x20v\x20*'+'\x20(v\x20+\x200.02'+'45786)\x20-\x200'+'.000090537'+';\x0a\x20\x20\x20\x20vec3'+'\x20b\x20=\x20v\x20*\x20('+'0.983729\x20*'+'\x20v\x20+\x200.432'+'9510)\x20+\x200.'+'238081;\x0a\x20\x20'+'\x20\x20return\x20a'+'\x20/\x20b;\x0a}\x0a\x0av'+'ec3\x20toneMa'+'p(vec3\x20col'+'or)\x20{\x0a\x20\x20\x20\x20'+'color\x20*=\x20e'+'xposure\x20/\x20'+'0.6;\x0a\x20\x20\x20\x20c'+'olor\x20=\x20col'+'or\x20*\x20ACESI'+'nputMat;\x0a\x0a'+'\x20\x20\x20\x20//\x20App'+'ly\x20RRT\x20and'+'\x20ODT\x0a\x20\x20\x20\x20c'+'olor\x20=\x20RRT'+'AndODTFit('+'color);\x0a\x20\x20'+'\x20\x20color\x20=\x20'+'color\x20*\x20AC'+'ESOutputMa'+'t;\x0a\x0a\x20\x20\x20\x20//'+'\x20Clamp\x20to\x20'+'[0,\x201]\x0a\x20\x20\x20'+'\x20color\x20=\x20c'+'lamp(color'+',\x200.0,\x201.0'+');\x0a\x0a\x20\x20\x20\x20re'+'turn\x20color'+';\x0a}\x0a',N2='\x0aconst\x20flo'+'at\x20A\x20=\x20\x200.'+'15;\x0aconst\x20'+'float\x20B\x20=\x20'+'\x200.50;\x0acon'+'st\x20float\x20C'+'\x20=\x20\x200.10;\x0a'+'const\x20floa'+'t\x20D\x20=\x20\x200.2'+'0;\x0aconst\x20f'+'loat\x20E\x20=\x20\x20'+'0.02;\x0acons'+'t\x20float\x20F\x20'+'=\x20\x200.30;\x0ac'+'onst\x20float'+'\x20W\x20=\x20\x2011.2'+';\x0a\x0auniform'+'\x20float\x20exp'+'osure;\x0a\x0ave'+'c3\x20unchart'+'ed2Tonemap'+'(vec3\x20x)\x20{'+'\x0a\x20\x20\x20return'+'\x20((x*(A*x+'+'C*B)+D*E)/'+'(x*(A*x+B)'+'+D*F))-E/F'+';\x0a}\x0a\x0avec3\x20'+'toneMap(ve'+'c3\x20color)\x20'+'{\x0a\x20\x20\x20\x20colo'+'r\x20=\x20unchar'+'ted2Tonema'+'p(color\x20*\x20'+'exposure);'+'\x0a\x20\x20\x20\x20vec3\x20'+'whiteScale'+'\x20=\x201.0\x20/\x20u'+'ncharted2T'+'onemap(vec'+'3(W,W,W));'+'\x0a\x20\x20\x20\x20color'+'\x20=\x20color\x20*'+'\x20whiteScal'+'e;\x0a\x0a\x20\x20\x20\x20re'+'turn\x20color'+';\x0a}\x0a',k2='\x0auniform\x20f'+'loat\x20expos'+'ure;\x0a\x0avec3'+'\x20toneMap(v'+'ec3\x20color)'+'\x20{\x0a\x20\x20\x20\x20col'+'or\x20*=\x20expo'+'sure;\x0a\x20\x20\x20\x20'+'const\x20floa'+'t\x20\x20A\x20=\x200.2'+'2,\x20B\x20=\x200.3'+',\x20C\x20=\x20.1,\x20'+'D\x20=\x200.2,\x20E'+'\x20=\x20.01,\x20F\x20'+'=\x200.3;\x0a\x20\x20\x20'+'\x20const\x20flo'+'at\x20Scl\x20=\x201'+'.25;\x0a\x0a\x20\x20\x20\x20'+'vec3\x20h\x20=\x20m'+'ax(\x20vec3(0'+'.0),\x20color'+'\x20-\x20vec3(0.'+'004)\x20);\x0a\x20\x20'+'\x20\x20return\x20('+'h*((Scl*A)'+'*h+Scl*vec'+'3(C*B,C*B,'+'C*B))+Scl*'+'vec3(D*E,D'+'*E,D*E))\x20/'+'\x20(h*(A*h+v'+'ec3(B,B,B)'+')+vec3(D*F'+',D*F,D*F))'+'\x20-\x20Scl*vec'+'3(E/F,E/F,'+'E/F);\x0a}\x0a',U2='\x0auniform\x20f'+'loat\x20expos'+'ure;\x0a\x0avec3'+'\x20toneMap(v'+'ec3\x20color)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20color\x20'+'*\x20exposure'+';\x0a}\x0a',B2='\x0auniform\x20f'+'loat\x20expos'+'ure;\x0a\x0avec3'+'\x20toneMap(v'+'ec3\x20color)'+'\x20{\x0a\x0a\x20\x20\x20\x20co'+'lor\x20*=\x20exp'+'osure;\x0a\x0a\x20\x20'+'\x20\x20float\x20st'+'artCompres'+'sion\x20=\x200.8'+'\x20-\x200.04;\x0a\x20'+'\x20\x20\x20float\x20d'+'esaturatio'+'n\x20=\x200.15;\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20x\x20=\x20min(c'+'olor.r,\x20mi'+'n(color.g,'+'\x20color.b))'+';\x0a\x20\x20\x20\x20floa'+'t\x20offset\x20='+'\x20x\x20<\x200.08\x20'+'?\x20x\x20-\x206.25'+'\x20*\x20x\x20*\x20x\x20:'+'\x200.04;\x0a\x20\x20\x20'+'\x20color\x20-=\x20'+'offset;\x0a\x0a\x20'+'\x20\x20\x20float\x20p'+'eak\x20=\x20max('+'color.r,\x20m'+'ax(color.g'+',\x20color.b)'+');\x0a\x20\x20\x20\x20if\x20'+'(peak\x20<\x20st'+'artCompres'+'sion)\x20retu'+'rn\x20color;\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20d\x20=\x201.\x20-\x20'+'startCompr'+'ession;\x0a\x20\x20'+'\x20\x20float\x20ne'+'wPeak\x20=\x201.'+'\x20-\x20d\x20*\x20d\x20/'+'\x20(peak\x20+\x20d'+'\x20-\x20startCo'+'mpression)'+';\x0a\x20\x20\x20\x20colo'+'r\x20*=\x20newPe'+'ak\x20/\x20peak;'+'\x0a\x0a\x20\x20\x20\x20floa'+'t\x20g\x20=\x201.\x20-'+'\x201.\x20/\x20(des'+'aturation\x20'+'*\x20(peak\x20-\x20'+'newPeak)\x20+'+'\x201.);\x0a\x20\x20\x20\x20'+'return\x20mix'+'(color,\x20ne'+'wPeak\x20*\x20ve'+'c3(1,\x201,\x201'+'),\x20g);\x0a}\x0a',z2='\x0avec3\x20tone'+'Map(vec3\x20c'+'olor)\x20{\x0a\x20\x20'+'\x20\x20return\x20c'+'olor;\x0a}\x0a',V2='\x0a#ifdef\x20PI'+'XELSNAP\x0aun'+'iform\x20vec4'+'\x20uScreenSi'+'ze;\x0a#endif'+'\x0a\x0a#ifdef\x20S'+'CREENSPACE'+'\x0auniform\x20f'+'loat\x20proje'+'ctionFlipY'+';\x0a#endif\x0a\x0a'+'vec4\x20evalW'+'orldPositi'+'on(vec3\x20ve'+'rtexPositi'+'on,\x20mat4\x20m'+'odelMatrix'+')\x20{\x0a\x0a\x20\x20\x20\x20v'+'ec3\x20localP'+'os\x20=\x20getLo'+'calPositio'+'n(vertexPo'+'sition);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20NINESLICE'+'D\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20outer\x20a'+'nd\x20inner\x20v'+'ertices\x20ar'+'e\x20at\x20the\x20s'+'ame\x20positi'+'on,\x20scale\x20'+'both\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20localPo'+'s.xz\x20*=\x20ou'+'terScale;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20offset\x20i'+'nner\x20verti'+'ces\x20inside'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20(origina'+'l\x20vertices'+'\x20must\x20be\x20i'+'n\x20[-1;1]\x20r'+'ange)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec2\x20p'+'ositiveUni'+'tOffset\x20=\x20'+'clamp(vert'+'exPosition'+'.xz,\x20vec2('+'0.0),\x20vec2'+'(1.0));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vec2'+'\x20negativeU'+'nitOffset\x20'+'=\x20clamp(-v'+'ertexPosit'+'ion.xz,\x20ve'+'c2(0.0),\x20v'+'ec2(1.0));'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'ocalPos.xz'+'\x20+=\x20(-posi'+'tiveUnitOf'+'fset\x20*\x20inn'+'erOffset.x'+'y\x20+\x20negati'+'veUnitOffs'+'et\x20*\x20inner'+'Offset.zw)'+'\x20*\x20vertex_'+'texCoord0.'+'xy;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vTiledU'+'v\x20=\x20(local'+'Pos.xz\x20-\x20o'+'uterScale\x20'+'+\x20innerOff'+'set.xy)\x20*\x20'+'-0.5\x20+\x201.0'+';\x20//\x20uv\x20=\x20'+'local\x20pos\x20'+'-\x20inner\x20co'+'rner\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20localP'+'os.xz\x20*=\x20-'+'0.5;\x20//\x20mo'+'ve\x20from\x20-1'+';1\x20to\x20-0.5'+';0.5\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20localPo'+'s\x20=\x20localP'+'os.xzy;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20vec4\x20p'+'osW\x20=\x20mode'+'lMatrix\x20*\x20'+'vec4(local'+('Pos,\x201.0);'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20SCREENS'+'PACE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20posW.zw'+'\x20=\x20vec2(0.'+'0,\x201.0);\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20retur'+'n\x20posW;\x0a}\x0a'+'\x0avec4\x20getP'+'osition()\x20'+'{\x0a\x0a\x20\x20\x20\x20dMo'+'delMatrix\x20'+'=\x20getModel'+'Matrix();\x0a'+'\x0a\x20\x20\x20\x20vec4\x20'+'posW\x20=\x20eva'+'lWorldPosi'+'tion(verte'+'x_position'+'.xyz,\x20dMod'+'elMatrix);'+'\x0a\x20\x20\x20\x20dPosi'+'tionW\x20=\x20po'+'sW.xyz;\x0a\x0a\x20'+'\x20\x20\x20vec4\x20sc'+'reenPos;\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'UV1LAYOUT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sc'+'reenPos\x20=\x20'+'vec4(verte'+'x_texCoord'+'1.xy\x20*\x202.0'+'\x20-\x201.0,\x200.'+'5,\x201);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20WEBGPU\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'.y\x20*=\x20-1.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20SCREENSP'+'ACE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20scre'+'enPos\x20=\x20po'+'sW;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20scre'+'enPos.y\x20*='+'\x20projectio'+'nFlipY;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20screen'+'Pos\x20=\x20matr'+'ix_viewPro'+'jection\x20*\x20'+'posW;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20PIX'+'ELSNAP\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20snap\x20ver'+'tex\x20to\x20a\x20p'+'ixel\x20bound'+'ary\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20scre'+'enPos.xy\x20='+'\x20(screenPo'+'s.xy\x20*\x200.5'+')\x20+\x200.5;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'.xy\x20*=\x20uSc'+'reenSize.x'+'y;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20scree'+'nPos.xy\x20=\x20'+'floor(scre'+'enPos.xy);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20screenP'+'os.xy\x20*=\x20u'+'ScreenSize'+'.zw;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20scr'+'eenPos.xy\x20'+'=\x20(screenP'+'os.xy\x20*\x202.'+'0)\x20-\x201.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20return\x20sc'+'reenPos;\x0a}')+('\x0a\x0avec3\x20get'+'WorldPosit'+'ion()\x20{\x0a\x20\x20'+'\x20\x20return\x20d'+'PositionW;'+'\x0a}\x0a'),G2='\x0a\x0aattribut'+'e\x20vec4\x20ver'+'tex_positi'+'on;\x0a\x0aunifo'+'rm\x20mat4\x20ma'+'trix_viewP'+'rojection;'+'\x0auniform\x20m'+'at4\x20matrix'+'_model;\x0a\x0a#'+'ifdef\x20MORP'+'HING\x0a\x20\x20\x20\x20u'+'niform\x20vec'+'2\x20morph_te'+'x_params;\x0a'+'\x20\x20\x20\x20attrib'+'ute\x20uint\x20m'+'orph_verte'+'x_id;\x0a\x0a\x20\x20\x20'+'\x20ivec2\x20get'+'TextureMor'+'phCoords()'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20turn\x20'+'morph_vert'+'ex_id\x20into'+'\x20int\x20grid\x20'+'coordinate'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'ivec2\x20text'+'ureSize\x20=\x20'+'ivec2(morp'+'h_tex_para'+'ms);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20int\x20mor'+'phGridV\x20=\x20'+'int(morph_'+'vertex_id)'+'\x20/\x20texture'+'Size.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20int\x20'+'morphGridU'+'\x20=\x20int(mor'+'ph_vertex_'+'id)\x20-\x20(mor'+'phGridV\x20*\x20'+'textureSiz'+'e.x);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20WEBGPU\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20flipY\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20morphGrid'+'V\x20=\x20textur'+'eSize.y\x20-\x20'+'morphGridV'+'\x20-\x201;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20ivec'+'2(morphGri'+'dU,\x20morphG'+'ridV);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20MORPH'+'ING_POSITI'+'ON\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20MO'+'RPHING_INT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20vec3\x20aabb'+'Size;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20vec3'+'\x20aabbMin;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'usampler2D'+'\x20morphPosi'+'tionTex;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20highp\x20s'+'ampler2D\x20m'+'orphPositi'+'onTex;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a#endif\x0a'+'\x0a#ifdef\x20de'+'fined(BATC'+'H)\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ski'+'nBatchVS\x22\x0a'+'\x0a\x20\x20\x20\x20mat4\x20'+'getModelMa'+'trix()\x20{\x0a\x20'+('\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20getBon'+'eMatrix(ve'+'rtex_boneI'+'ndices);\x0a\x20'+'\x20\x20\x20}\x0a\x0a#eli'+'f\x20defined('+'SKIN)\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'skinVS\x22\x0a\x0a\x20'+'\x20\x20\x20mat4\x20ge'+'tModelMatr'+'ix()\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20matrix_m'+'odel\x20*\x20get'+'SkinMatrix'+'(vertex_bo'+'neIndices,'+'\x20vertex_bo'+'neWeights)'+';\x0a\x20\x20\x20\x20}\x0a\x0a#'+'elif\x20defin'+'ed(INSTANC'+'ING)\x0a\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'transformI'+'nstancingV'+'S\x22\x0a\x0a#else\x0a'+'\x0a\x20\x20\x20\x20mat4\x20'+'getModelMa'+'trix()\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20matrix'+'_model;\x0a\x20\x20'+'\x20\x20}\x0a\x0a#endi'+'f\x0a\x0avec3\x20ge'+'tLocalPosi'+'tion(vec3\x20'+'vertexPosi'+'tion)\x20{\x0a\x0a\x20'+'\x20\x20\x20vec3\x20lo'+'calPos\x20=\x20v'+'ertexPosit'+'ion;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20MOR'+'PHING_POSI'+'TION\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20ivec2\x20'+'morphUV\x20=\x20'+'getTexture'+'MorphCoord'+'s();\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20MORPHING_'+'INT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20vec3'+'\x20morphPos\x20'+'=\x20vec3(tex'+'elFetch(mo'+'rphPositio'+'nTex,\x20ivec'+'2(morphUV)'+',\x200).xyz)\x20'+'/\x2065535.0\x20'+'*\x20aabbSize'+'\x20+\x20aabbMin'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20morphPo'+'s\x20=\x20texelF'+'etch(morph'+'PositionTe'+'x,\x20ivec2(m'+'orphUV),\x200'+').xyz;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20localPos\x20'+'+=\x20morphPo'+'s;\x0a\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'return\x20loc'+'alPos;\x0a}\x0a\x0a'),H2='\x0a\x0aattribut'+'e\x20vec4\x20ins'+'tance_line'+'1;\x0aattribu'+'te\x20vec4\x20in'+'stance_lin'+'e2;\x0aattrib'+'ute\x20vec4\x20i'+'nstance_li'+'ne3;\x0aattri'+'bute\x20vec4\x20'+'instance_l'+'ine4;\x0a\x0amat'+'4\x20getModel'+'Matrix()\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20matrix_m'+'odel\x20*\x20mat'+'4(instance'+'_line1,\x20in'+'stance_lin'+'e2,\x20instan'+'ce_line3,\x20'+'instance_l'+'ine4);\x0a}\x0a',W2='\x0a\x0a#ifdef\x20S'+'TD_REFRACT'+'ION_CONSTA'+'NT\x0auniform'+'\x20float\x20mat'+'erial_refr'+'action;\x0a#e'+'ndif\x0a\x0avoid'+'\x20getRefrac'+'tion()\x20{\x0a\x20'+'\x20\x20\x20float\x20r'+'efraction\x20'+'=\x201.0;\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_REFRACT'+'ION_CONSTA'+'NT\x0a\x20\x20\x20\x20ref'+'raction\x20=\x20'+'material_r'+'efraction;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_RE'+'FRACTION_T'+'EXTURE\x0a\x20\x20\x20'+'\x20refractio'+'n\x20*=\x20textu'+'re2DBias({'+'STD_REFRAC'+'TION_TEXTU'+'RE_NAME},\x20'+'{STD_REFRA'+'CTION_TEXT'+'URE_UV},\x20t'+'extureBias'+').{STD_REF'+'RACTION_TE'+'XTURE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_REFRACT'+'ION_VERTEX'+'\x0a\x20\x20\x20\x20refra'+'ction\x20*=\x20s'+'aturate(vV'+'ertexColor'+'.{STD_REFR'+'ACTION_VER'+'TEX_CHANNE'+'L});\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20dTransmis'+'sion\x20=\x20ref'+'raction;\x0a}'+'\x0a',$2='\x0auniform\x20f'+'loat\x20twoSi'+'dedLightin'+'gNegScaleF'+'actor;\x0avoi'+'d\x20handleTw'+'oSidedLigh'+'ting()\x20{\x0a\x20'+'\x20\x20\x20dTBN[2]'+'\x20*=\x20gl_Fro'+'ntFacing\x20?'+'\x20twoSidedL'+'ightingNeg'+'ScaleFacto'+'r\x20:\x20-twoSi'+'dedLightin'+'gNegScaleF'+'actor;\x0a}\x0a',X2='\x0a#ifdef\x20NI'+'NESLICED\x0a\x20'+'\x20\x20\x20vec2\x20ge'+'tUv0()\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'2\x20uv\x20=\x20ver'+'tex_positi'+'on.xz;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20o'+'ffset\x20inne'+'r\x20vertices'+'\x20inside\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20('+'original\x20v'+'ertices\x20mu'+'st\x20be\x20in\x20['+'-1;1]\x20rang'+'e)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec2\x20posi'+'tiveUnitOf'+'fset\x20=\x20cla'+'mp(vertex_'+'position.x'+'z,\x20vec2(0.'+'0),\x20vec2(1'+'.0));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec2\x20n'+'egativeUni'+'tOffset\x20=\x20'+'clamp(-ver'+'tex_positi'+'on.xz,\x20vec'+'2(0.0),\x20ve'+'c2(1.0));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20uv'+'\x20+=\x20(-posi'+'tiveUnitOf'+'fset\x20*\x20inn'+'erOffset.x'+'y\x20+\x20negati'+'veUnitOffs'+'et\x20*\x20inner'+'Offset.zw)'+'\x20*\x20vertex_'+'texCoord0.'+'xy;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uv\x20=\x20uv'+'\x20*\x20-0.5\x20+\x20'+'0.5;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uv\x20=\x20uv'+'\x20*\x20atlasRe'+'ct.zw\x20+\x20at'+'lasRect.xy'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vMask\x20=\x20v'+'ertex_texC'+'oord0.xy;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20uv;\x0a'+'\x20\x20\x20\x20}\x0a#els'+'e\x0a\x20\x20\x20\x20vec2'+'\x20getUv0()\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20ver'+'tex_texCoo'+'rd0;\x0a\x20\x20\x20\x20}'+'\x0a#endif\x0a',q2='\x0avec2\x20getU'+'v1()\x20{\x0a\x20\x20\x20'+'\x20return\x20ve'+'rtex_texCo'+'ord1;\x0a}\x0a',j2='\x0avUV{TRANS'+'FORM_UV_{i'+'}}_{TRANSF'+'ORM_ID_{i}'+'}\x20=\x20vec2(\x0a'+'\x20\x20\x20\x20dot(ve'+'c3(uv{TRAN'+'SFORM_UV_{'+'i}},\x201),\x20{'+'TRANSFORM_'+'NAME_{i}}0'+'),\x0a\x20\x20\x20\x20dot'+'(vec3(uv{T'+'RANSFORM_U'+'V_{i}},\x201)'+',\x20{TRANSFO'+'RM_NAME_{i'+'}}1)\x0a);\x0a',Y2='\x0a\x20\x20\x20\x20unifo'+'rm\x20vec3\x20{T'+'RANSFORM_N'+'AME_{i}}0;'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20vec3\x20{T'+'RANSFORM_N'+'AME_{i}}1;'+'\x0a',K2='\x0avoid\x20getV'+'iewDir()\x20{'+'\x0a\x20\x20\x20\x20dView'+'DirW\x20=\x20nor'+'malize(vie'+'w_position'+'\x20-\x20vPositi'+'onW);\x0a}\x0a',Z2={'alphaTestPS':YC,'ambientPS':KC,'anisotropyPS':ZC,'aoPS':QC,'aoDiffuseOccPS':JC,'aoSpecOccPS':e1,'bakeDirLmEndPS':t1,'bakeLmEndPS':s1,'basePS':i1,'baseNineSlicedPS':r1,'baseNineSlicedTiledPS':a1,'bayerPS':n1,'blurVSMPS':o1,'clearCoatPS':l1,'clearCoatGlossPS':c1,'clearCoatNormalPS':h1,'clusteredLightCookiesPS':f1,'clusteredLightShadowsPS':u1,'clusteredLightUtilsPS':d1,'clusteredLightPS':p1,'combinePS':m1,'cookieBlit2DPS':_1,'cookieBlitCubePS':g1,'cookieBlitVS':S1,'cookiePS':y1,'cubeMapProjectPS':v1,'cubeMapRotatePS':x1,'debugOutputPS':T1,'debugProcessFrontendPS':w1,'detailModesPS':b1,'diffusePS':A1,'decodePS':E1,'emissivePS':C1,'encodePS':P1,'endPS':M1,'envAtlasPS':D1,'envProcPS':I1,'falloffInvSquaredPS':L1,'falloffLinearPS':R1,'floatAsUintPS':O1,'fogPS':F1,'fresnelSchlickPS':N1,'frontendCodePS':'','frontendDeclPS':'','fullscreenQuadVS':k1,'gammaPS':U1,'gles3PS':Vy,'gles3VS':Gy,'glossPS':B1,'gsplatCenterVS':z1,'gsplatCornerVS':K1,'gsplatColorVS':V1,'gsplatCommonVS':G1,'gsplatCompressedDataVS':H1,'gsplatCompressedSHVS':W1,'gsplatEvalSHVS':$1,'gsplatQuatToMat3VS':X1,'gsplatSogsColorVS':q1,'gsplatSogsDataVS':j1,'gsplatSogsSHVS':Y1,'gsplatDataVS':Z1,'gsplatOutputVS':Q1,'gsplatPS':J1,'gsplatSHVS':eP,'gsplatSourceVS':tP,'gsplatVS':sP,'quadVS':iP,'immediateLinePS':rP,'immediateLineVS':aP,'iridescenceDiffractionPS':nP,'iridescencePS':oP,'iridescenceThicknessPS':lP,'iorPS':cP,'lightDeclarationPS':hP,'lightDiffuseLambertPS':dP,'lightDirPointPS':fP,'lightEvaluationPS':uP,'lightFunctionLightPS':pP,'lightFunctionShadowPS':mP,'lightingPS':_P,'lightmapAddPS':gP,'lightmapPS':SP,'lightSpecularAnisoGGXPS':yP,'lightSpecularBlinnPS':vP,'lightSheenPS':xP,'linearizeDepthPS':TP,'litForwardBackendPS':wP,'litForwardDeclarationPS':EP,'litForwardMainPS':bP,'litForwardPostCodePS':AP,'litForwardPreCodePS':CP,'litMainPS':PP,'litMainVS':MP,'litOtherMainPS':DP,'litShaderArgsPS':IP,'litShaderCorePS':LP,'litShadowMainPS':RP,'litUserDeclarationPS':'','litUserDeclarationVS':'','litUserCodePS':'','litUserCodeVS':'','litUserMainStartPS':'','litUserMainStartVS':'','litUserMainEndPS':'','litUserMainEndVS':'','ltcPS':OP,'metalnessPS':FP,'metalnessModulatePS':kP,'morphPS':UP,'morphVS':BP,'msdfPS':NP,'msdfVS':zP,'normalVS':VP,'normalCoreVS':GP,'normalMapPS':HP,'opacityPS':WP,'opacityDitherPS':$P,'outputPS':XP,'outputAlphaPS':qP,'outputTex2DPS':jP,'sheenPS':YP,'sheenGlossPS':KP,'parallaxPS':ZP,'pickPS':QP,'reflDirPS':JP,'reflDirAnisoPS':e2,'reflectionCCPS':t2,'reflectionCubePS':s2,'reflectionEnvHQPS':i2,'reflectionEnvPS':r2,'reflectionSpherePS':a2,'reflectionSheenPS':n2,'refractionCubePS':o2,'refractionDynamicPS':l2,'reprojectPS':c2,'reprojectVS':h2,'screenDepthPS':d2,'shadowCascadesPS':f2,'shadowEVSMPS':u2,'shadowPCF1PS':p2,'shadowPCF3PS':m2,'shadowPCF5PS':_2,'shadowPCSSPS':g2,'shadowSoftPS':S2,'skinBatchVS':y2,'skinVS':v2,'skyboxPS':x2,'skyboxVS':T2,'specularPS':w2,'sphericalPS':E2,'specularityFactorPS':b2,'spotPS':A2,'startNineSlicedPS':C2,'startNineSlicedTiledPS':P2,'stdDeclarationPS':M2,'stdFrontEndPS':D2,'TBNPS':I2,'thicknessPS':L2,'tonemappingPS':R2,'tonemappingAcesPS':O2,'tonemappingAces2PS':F2,'tonemappingFilmicPS':N2,'tonemappingHejlPS':k2,'tonemappingLinearPS':U2,'tonemappingNeutralPS':B2,'tonemappingNonePS':z2,'transformVS':V2,'transformCoreVS':G2,'transformInstancingVS':H2,'transmissionPS':W2,'twoSidedLightingPS':$2,'uv0VS':X2,'uv1VS':q2,'uvTransformVS':j2,'uvTransformUniformsPS':Y2,'viewDirPS':K2,'webgpuPS':Hy,'webgpuVS':Wy},Q2='\x0auniform\x20a'+'lpha_ref:\x20'+'f32;\x0a\x0afn\x20a'+'lphaTest(a'+':\x20f32)\x20{\x0a\x20'+'\x20\x20\x20if\x20(a\x20<'+'\x20uniform.a'+'lpha_ref)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'discard;\x0a\x20'+'\x20\x20\x20}\x0a}\x0a',J2='\x0a\x0a#if\x20LIT_'+'AMBIENT_SO'+'URCE\x20==\x20AM'+'BIENTSH\x0a\x20\x20'+'\x20\x20uniform\x20'+'ambientSH:'+'\x20array<vec'+'3f,\x209>;\x0a#e'+'ndif\x0a\x0a#if\x20'+'LIT_AMBIEN'+'T_SOURCE\x20='+'=\x20ENVALATL'+'AS\x0a\x20\x20\x20\x20#in'+'clude\x20\x22env'+'AtlasPS\x22\x0a\x0a'+'\x20\x20\x20\x20#ifnde'+'f\x20ENV_ATLA'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#define\x20EN'+'V_ATLAS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'texture_en'+'vAtlas:\x20te'+'xture_2d<f'+'32>;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_envAt'+'lasSampler'+':\x20sampler;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a'+'fn\x20addAmbi'+'ent(worldN'+'ormal:\x20vec'+'3f)\x20{\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_AMBIENT_S'+'OURCE\x20==\x20A'+'MBIENTSH\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20n:\x20vec3f'+'\x20=\x20cubeMap'+'Rotate(wor'+'ldNormal);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20color:\x20'+'vec3f\x20=\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform.am'+'bientSH[0]'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm.ambient'+'SH[1]\x20*\x20n.'+'x\x20+\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm.ambien'+'tSH[2]\x20*\x20n'+'.y\x20+\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form.ambie'+'ntSH[3]\x20*\x20'+'n.z\x20+\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform.ambi'+'entSH[4]\x20*'+'\x20n.x\x20*\x20n.z'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm.ambient'+'SH[5]\x20*\x20n.'+'z\x20*\x20n.y\x20+\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform.'+'ambientSH['+'6]\x20*\x20n.y\x20*'+'\x20n.x\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform.amb'+'ientSH[7]\x20'+'*\x20(3.0\x20*\x20n'+'.z\x20*\x20n.z\x20-'+'\x201.0)\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform.am'+'bientSH[8]'+'\x20*\x20(n.x\x20*\x20'+'n.x\x20-\x20n.y\x20'+'*\x20n.y);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20+=\x20proces'+'sEnvironme'+'nt(max(col'+'or,\x20vec3f('+'0.0)));\x0a\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#if\x20L'+'IT_AMBIENT'+'_SOURCE\x20=='+('\x20ENVALATLA'+'S\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20dir:\x20'+'vec3f\x20=\x20no'+'rmalize(cu'+'beMapRotat'+'e(worldNor'+'mal)\x20*\x20vec'+'3f(-1.0,\x201'+'.0,\x201.0));'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20uv:\x20vec'+'2f\x20=\x20mapUv'+'(toSpheric'+'alUv(dir),'+'\x20vec4f(128'+'.0,\x20256.0\x20'+'+\x20128.0,\x206'+'4.0,\x2032.0)'+'\x20/\x20atlasSi'+'ze);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20ra'+'w:\x20vec4f\x20='+'\x20textureSa'+'mple(textu'+'re_envAtla'+'s,\x20texture'+'_envAtlasS'+'ampler,\x20uv'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20linea'+'r:\x20vec3f\x20='+'\x20{ambientD'+'ecode}(raw'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20dDiffuseL'+'ight\x20+=\x20pr'+'ocessEnvir'+'onment(lin'+'ear);\x0a\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#if\x20LIT'+'_AMBIENT_S'+'OURCE\x20==\x20C'+'ONSTANT\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20+=\x20unifor'+'m.light_gl'+'obalAmbien'+'t;\x0a\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a'),eM='\x0a#ifdef\x20LI'+'T_GGX_SPEC'+'ULAR\x0a\x20\x20\x20\x20u'+'niform\x20mat'+'erial_anis'+'otropyInte'+'nsity:\x20f32'+';\x0a\x20\x20\x20\x20unif'+'orm\x20materi'+'al_anisotr'+'opyRotatio'+'n:\x20vec2f;\x0a'+'#endif\x0a\x0afn'+'\x20getAnisot'+'ropy()\x20{\x0a\x20'+'\x20\x20\x20dAnisot'+'ropy\x20=\x200.0'+';\x0a\x20\x20\x20\x20dAni'+'sotropyRot'+'ation\x20=\x20ve'+'c2f(1.0,\x200'+'.0);\x0a\x0a#ifd'+'ef\x20LIT_GGX'+'_SPECULAR\x0a'+'\x20\x20\x20\x20dAniso'+'tropy\x20=\x20un'+'iform.mate'+'rial_aniso'+'tropyInten'+'sity;\x0a\x20\x20\x20\x20'+'dAnisotrop'+'yRotation\x20'+'=\x20uniform.'+'material_a'+'nisotropyR'+'otation;\x0a#'+'endif\x0a\x0a#if'+'def\x20STD_AN'+'ISOTROPY_T'+'EXTURE\x0a\x20\x20\x20'+'\x20let\x20aniso'+'tropyTex:\x20'+'vec3f\x20=\x20te'+'xtureSampl'+'eBias({STD'+'_ANISOTROP'+'Y_TEXTURE_'+'NAME},\x20{ST'+'D_ANISOTRO'+'PY_TEXTURE'+'_NAME}Samp'+'ler,\x20{STD_'+'ANISOTROPY'+'_TEXTURE_U'+'V},\x20unifor'+'m.textureB'+'ias).rgb;\x0a'+'\x20\x20\x20\x20dAniso'+'tropy\x20*=\x20a'+'nisotropyT'+'ex.b;\x0a\x0a\x20\x20\x20'+'\x20let\x20aniso'+'tropyRotat'+'ionFromTex'+':\x20vec2f\x20=\x20'+'anisotropy'+'Tex.rg\x20*\x202'+'.0\x20-\x20vec2f'+'(1.0);\x0a\x20\x20\x20'+'\x20let\x20rotat'+'ionMatrix:'+'\x20mat2x2f\x20='+'\x20mat2x2f(d'+'Anisotropy'+'Rotation.x'+',\x20dAnisotr'+'opyRotatio'+'n.y,\x20-dAni'+'sotropyRot'+'ation.y,\x20d'+'Anisotropy'+'Rotation.x'+');\x0a\x20\x20\x20\x20dAn'+'isotropyRo'+'tation\x20=\x20r'+'otationMat'+'rix\x20*\x20anis'+'otropyRota'+'tionFromTe'+'x;\x0a#endif\x0a'+'\x0a\x20\x20\x20\x20dAnis'+'otropy\x20=\x20c'+'lamp(dAnis'+'otropy,\x200.'+'0,\x201.0);\x0a}'+'\x0a',tM='\x0a\x0a#if\x20defi'+'ned(STD_AO'+'_TEXTURE)\x20'+'||\x20defined'+'(STD_AO_VE'+'RTEX)\x0a\x20\x20\x20\x20'+'uniform\x20ma'+'terial_aoI'+'ntensity:\x20'+'f32;\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'STD_AODETA'+'IL_TEXTURE'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22detai'+'lModesPS\x22\x0a'+'#endif\x0a\x0afn'+'\x20getAO()\x20{'+'\x0a\x20\x20\x20\x20dAo\x20='+'\x201.0;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_AO_TEXTU'+'RE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20aoBas'+'e:\x20f32\x20=\x20t'+'extureSamp'+'leBias({ST'+'D_AO_TEXTU'+'RE_NAME},\x20'+'{STD_AO_TE'+'XTURE_NAME'+'}Sampler,\x20'+'{STD_AO_TE'+'XTURE_UV},'+'\x20uniform.t'+'extureBias'+').{STD_AO_'+'TEXTURE_CH'+'ANNEL};\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20STD_AO'+'DETAIL_TEX'+'TURE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20aoDetail:'+'\x20f32\x20=\x20tex'+'tureSample'+'Bias({STD_'+'AODETAIL_T'+'EXTURE_NAM'+'E},\x20{STD_A'+'ODETAIL_TE'+'XTURE_NAME'+'}Sampler,\x20'+'{STD_AODET'+'AIL_TEXTUR'+'E_UV},\x20uni'+'form.textu'+'reBias).{S'+'TD_AODETAI'+'L_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20aoBase\x20='+'\x20detailMod'+'e_{STD_AOD'+'ETAIL_DETA'+'ILMODE}(ve'+'c3f(aoBase'+'),\x20vec3f(a'+'oDetail)).'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dAo'+'\x20=\x20dAo\x20*\x20a'+'oBase;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_AO_VER'+'TEX\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20dAo\x20=\x20dA'+'o\x20*\x20satura'+'te(vVertex'+'Color.{STD'+'_AO_VERTEX'+'_CHANNEL})'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'f\x20defined('+'STD_AO_TEX'+'TURE)\x20||\x20d'+'efined(STD'+'_AO_VERTEX'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'dAo\x20=\x20mix('+'1.0,\x20dAo,\x20'+'uniform.ma'+'terial_aoI'+'ntensity);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a}\x0a',sM='\x0afn\x20occlud'+'eDiffuse(a'+'o:\x20f32)\x20{\x0a'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'dDiffuseLi'+'ght\x20*\x20ao;\x0a'+'}\x0a',iM='\x0a\x0a#if\x20LIT_'+'OCCLUDE_SP'+'ECULAR\x20!=\x20'+'NONE\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'OCCLUDE_SP'+'ECULAR_FLO'+'AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20m'+'aterial_oc'+'cludeSpecu'+'larIntensi'+'ty:\x20f32;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'#endif\x0a\x0afn'+'\x20occludeSp'+'ecular(glo'+'ss:\x20f32,\x20a'+'o:\x20f32,\x20wo'+'rldNormal:'+'\x20vec3f,\x20vi'+'ewDir:\x20vec'+'3f)\x20{\x0a\x0a\x20\x20\x20'+'\x20#if\x20LIT_O'+'CCLUDE_SPE'+'CULAR\x20==\x20A'+'O\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_OCCLUDE_S'+'PECULAR_FL'+'OAT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'specOcc:\x20f'+'32\x20=\x20mix(1'+'.0,\x20ao,\x20un'+'iform.mate'+'rial_occlu'+'deSpecular'+'Intensity)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20specOcc:'+'\x20f32\x20=\x20ao;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIT_'+'OCCLUDE_SP'+'ECULAR\x20==\x20'+'GLOSSDEPEN'+'DENT\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20app'+'roximated\x20'+'specular\x20o'+'cclusion\x20f'+'rom\x20AO\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ht'+'tp://resea'+'rch.tri-ac'+'e.com/Data'+'/cedec2011'+'_RealtimeP'+'BR_Impleme'+'ntation_e.'+'pptx\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20spe'+'cPow:\x20f32\x20'+'=\x20exp2(glo'+'ss\x20*\x2011.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20specOc'+'c:\x20f32\x20=\x20s'+'aturate(po'+'w(dot(worl'+'dNormal,\x20v'+'iewDir)\x20+\x20'+'ao,\x200.01\x20*'+'\x20specPow)\x20'+'-\x201.0\x20+\x20ao'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_OCCLUDE'+'_SPECULAR_'+'FLOAT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sp'+'ecOcc\x20=\x20mi'+'x(1.0,\x20spe'+'cOcc,\x20unif'+'orm.materi'+'al_occlude'+'SpecularIn'+'tensity);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20LIT_O'+'CCLUDE_SPE'+'CULAR\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+('\x20\x20dSpecula'+'rLight\x20=\x20d'+'SpecularLi'+'ght\x20*\x20spec'+'Occ;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20dReflec'+'tion\x20=\x20dRe'+'flection\x20*'+'\x20specOcc;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'SHEEN\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sS'+'pecularLig'+'ht\x20=\x20sSpec'+'ularLight\x20'+'*\x20specOcc;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20sReflec'+'tion\x20=\x20sRe'+'flection\x20*'+'\x20specOcc;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a}\x0a'),rM='\x0a\x20\x20\x20\x20let\x20d'+'irLm\x20=\x20tex'+'tureSample'+'(texture_d'+'irLightMap'+',\x20texture_'+'dirLightMa'+'pSampler,\x20'+'vUv1);\x0a\x0a\x20\x20'+'\x20\x20if\x20(unif'+'orm.bakeDi'+'r\x20>\x200.5)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+'f\x20(dAtten\x20'+'>\x200.00001)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20u'+'npacked_di'+'r\x20=\x20dirLm.'+'xyz\x20*\x202.0\x20'+'-\x20vec3f(1.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dAtt'+'en\x20=\x20clamp'+'(dAtten,\x200'+'.0,\x201.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20comb'+'ined_dir\x20='+'\x20dLightDir'+'NormW.xyz\x20'+'*\x20dAtten\x20+'+'\x20unpacked_'+'dir\x20*\x20dirL'+'m.w;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20finalRgb\x20'+'=\x20normaliz'+'e(combined'+'_dir)\x20*\x200.'+'5\x20+\x20vec3f('+'0.5);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20finalA\x20='+'\x20max(dirLm'+'.w\x20+\x20dAtte'+'n,\x201.0\x20/\x202'+'55.0);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20vec4f('+'finalRgb,\x20'+'finalA);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x20e'+'lse\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.color'+'\x20=\x20dirLm;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20alpha'+'_min\x20=\x20sel'+'ect(0.0,\x201'+'.0\x20/\x20255.0'+',\x20dAtten\x20>'+'\x200.00001);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20finalA\x20'+'=\x20max(dirL'+'m.w,\x20alpha'+'_min);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20outpu'+'t.color\x20=\x20'+'vec4f(dirL'+'m.rgb,\x20fin'+'alA);\x0a\x20\x20\x20\x20'+'}\x0a',aM='\x0a\x0a#ifdef\x20L'+'IT_LIGHTMA'+'P_BAKING_A'+'DD_AMBIENT'+'\x0a\x20\x20\x20\x20//\x20di'+'ffuse\x20ligh'+'t\x20stores\x20a'+'ccumulated'+'\x20AO,\x20apply'+'\x20contrast\x20'+'and\x20bright'+'ness\x20to\x20it'+'\x0a\x20\x20\x20\x20//\x20an'+'d\x20multiply'+'\x20ambient\x20l'+'ight\x20color'+'\x20by\x20the\x20AO'+'\x0a\x20\x20\x20\x20dDiff'+'useLight\x20='+'\x20((dDiffus'+'eLight\x20-\x200'+'.5)\x20*\x20max('+'uniform.am'+'bientBakeO'+'cclusionCo'+'ntrast\x20+\x201'+'.0,\x200.0))\x20'+'+\x200.5;\x0a\x20\x20\x20'+'\x20dDiffuseL'+'ight\x20=\x20dDi'+'ffuseLight'+'\x20+\x20vec3f(u'+'niform.amb'+'ientBakeOc'+'clusionBri'+'ghtness);\x0a'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'saturate3('+'dDiffuseLi'+'ght);\x0a\x20\x20\x20\x20'+'dDiffuseLi'+'ght\x20=\x20dDif'+'fuseLight\x20'+'*\x20dAmbient'+'Light;\x0a#en'+'dif\x0a\x0a#ifde'+'f\x20LIGHTMAP'+'_RGBM\x0a\x20\x20\x20\x20'+'//\x20encode\x20'+'to\x20RGBM\x0a\x20\x20'+'\x20\x20var\x20temp'+'_color_rgb'+'m\x20=\x20vec4f('+'dDiffuseLi'+'ght,\x201.0);'+'\x0a\x20\x20\x20\x20temp_'+'color_rgbm'+'\x20=\x20vec4f(p'+'ow(temp_co'+'lor_rgbm.r'+'gb,\x20vec3f('+'0.5)),\x20tem'+'p_color_rg'+'bm.a);\x0a\x20\x20\x20'+'\x20temp_colo'+'r_rgbm\x20=\x20v'+'ec4f(temp_'+'color_rgbm'+'.rgb\x20/\x208.0'+',\x20temp_col'+'or_rgbm.a)'+';\x0a\x20\x20\x20\x20let\x20'+'max_g_b\x20=\x20'+'max(temp_c'+'olor_rgbm.'+'g,\x20max(tem'+'p_color_rg'+'bm.b,\x201.0\x20'+'/\x20255.0));'+'\x0a\x20\x20\x20\x20let\x20m'+'ax_rgb\x20=\x20m'+'ax(temp_co'+'lor_rgbm.r'+',\x20max_g_b)'+';\x0a\x20\x20\x20\x20temp'+'_color_rgb'+'m.a\x20=\x20clam'+'p(max_rgb,'+'\x200.0,\x201.0)'+';\x0a\x20\x20\x20\x20temp'+'_color_rgb'+'m.a\x20=\x20ceil'+'(temp_colo'+'r_rgbm.a\x20*'+'\x20255.0)\x20/\x20'+'255.0;\x0a\x20\x20\x20'+'\x20temp_colo'+'r_rgbm\x20=\x20v'+'ec4f(temp_'+('color_rgbm'+'.rgb\x20/\x20tem'+'p_color_rg'+'bm.a,\x20temp'+'_color_rgb'+'m.a);\x0a\x20\x20\x20\x20'+'output.col'+'or\x20=\x20temp_'+'color_rgbm'+';\x0a#else\x0a\x20\x20'+'\x20\x20output.c'+'olor\x20=\x20vec'+'4f(dDiffus'+'eLight,\x201.'+'0);\x0a#endif'+'\x0a'),nM='\x0auniform\x20v'+'iew_positi'+'on:\x20vec3f;'+'\x0a\x0auniform\x20'+'light_glob'+'alAmbient:'+'\x20vec3f;\x0a\x0af'+'n\x20square(x'+':\x20f32)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'return\x20x*x'+';\x0a}\x0a\x0afn\x20sa'+'turate(x:\x20'+'f32)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20re'+'turn\x20clamp'+'(x,\x200.0,\x201'+'.0);\x0a}\x0a\x0afn'+'\x20saturate3'+'(x:\x20vec3f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20clamp(x'+',\x20vec3f(0.'+'0),\x20vec3f('+'1.0));\x0a}\x0a',oM='\x0a#define\x20N'+'INESLICED\x0a'+'\x0avarying\x20v'+'Mask:\x20vec2'+'f;\x0avarying'+'\x20vTiledUv:'+'\x20vec2f;\x0a\x0au'+'niform\x20inn'+'erOffset:\x20'+'vec4f;\x0auni'+'form\x20outer'+'Scale:\x20vec'+'2f;\x0aunifor'+'m\x20atlasRec'+'t:\x20vec4f;\x0a'+'\x0avar<priva'+'te>\x20nineSl'+'icedUv:\x20ve'+'c2f;\x0a',lM='\x0a#define\x20N'+'INESLICED\x0a'+'#define\x20NI'+'NESLICETIL'+'ED\x0a\x0avaryin'+'g\x20vMask:\x20v'+'ec2f;\x0avary'+'ing\x20vTiled'+'Uv:\x20vec2f;'+'\x0a\x0auniform\x20'+'innerOffse'+'t:\x20vec4f;\x0a'+'uniform\x20ou'+'terScale:\x20'+'vec2f;\x0auni'+'form\x20atlas'+'Rect:\x20vec4'+'f;\x0a\x0avar<pr'+'ivate>\x20nin'+'eSlicedUv:'+'\x20vec2f;\x0a',cM='\x0a//\x202x2\x20ba'+'yer\x20matrix'+'\x20[1\x202][3\x200'+'],\x20p\x20in\x20[0'+',1]\x0afn\x20bay'+'er2(p:\x20vec'+'2f)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20(2.0\x20*'+'\x20p.y\x20+\x20p.x'+'\x20+\x201.0)\x20%\x20'+'4.0;\x0a}\x0a\x0a//'+'\x204x4\x20matri'+'x,\x20p\x20-\x20pix'+'el\x20coordin'+'ate\x0afn\x20bay'+'er4(p:\x20vec'+'2f)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20p1:\x20vec2f'+'\x20=\x20p\x20%\x20vec'+'2f(2.0);\x0a\x20'+'\x20\x20\x20let\x20p2:'+'\x20vec2f\x20=\x20f'+'loor(0.5\x20*'+'\x20(p\x20%\x20vec2'+'f(4.0)));\x0a'+'\x20\x20\x20\x20return'+'\x204.0\x20*\x20bay'+'er2(p1)\x20+\x20'+'bayer2(p2)'+';\x0a}\x0a\x0a//\x208x'+'8\x20matrix,\x20'+'p\x20-\x20pixel\x20'+'coordinate'+'\x0afn\x20bayer8'+'(p:\x20vec2f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20let\x20p1'+':\x20vec2f\x20=\x20'+'p\x20%\x20vec2f('+'2.0);\x0a\x20\x20\x20\x20'+'let\x20p2:\x20ve'+'c2f\x20=\x20floo'+'r(0.5\x20*\x20(p'+'\x20%\x20vec2f(4'+'.0)));\x0a\x20\x20\x20'+'\x20let\x20p4:\x20v'+'ec2f\x20=\x20flo'+'or(0.25\x20*\x20'+'(p\x20%\x20vec2f'+'(8.0)));\x0a\x20'+'\x20\x20\x20return\x20'+'4.0\x20*\x20(4.0'+'\x20*\x20bayer2('+'p1)\x20+\x20baye'+'r2(p2))\x20+\x20'+'bayer2(p4)'+';\x0a}\x0a',hM='\x0avarying\x20v'+'Uv0:\x20vec2f'+';\x0a\x0avar\x20sou'+'rce:\x20textu'+'re_2d<f32>'+';\x0avar\x20sour'+'ceSampler:'+'\x20sampler;\x0a'+'\x0a#ifdef\x20GA'+'USS\x0a\x20\x20\x20\x20un'+'iform\x20weig'+'ht:\x20array<'+'f32,\x20{SAMP'+'LES}>;\x0a#en'+'dif\x0aunifor'+'m\x20pixelOff'+'set:\x20vec2f'+';\x0a\x0a@fragme'+'nt\x0afn\x20frag'+'mentMain(i'+'nput:\x20Frag'+'mentInput)'+'\x20->\x20Fragme'+'ntOutput\x20{'+'\x0a\x20\x20\x20\x20var\x20o'+'utput:\x20Fra'+'gmentOutpu'+'t;\x0a\x20\x20\x20\x20var'+'\x20moments:\x20'+'vec3f\x20=\x20ve'+'c3f(0.0);\x0a'+'\x20\x20\x20\x20let\x20uv'+':\x20vec2f\x20=\x20'+'input.vUv0'+'\x20-\x20uniform'+'.pixelOffs'+'et\x20*\x20(f32('+'{SAMPLES})'+'\x20*\x200.5);\x0a\x0a'+'\x20\x20\x20\x20for\x20(v'+'ar\x20i:\x20i32\x20'+'=\x200;\x20i\x20<\x20{'+'SAMPLES};\x20'+'i\x20=\x20i\x20+\x201)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20c:\x20ve'+'c4f\x20=\x20text'+'ureSample('+'source,\x20so'+'urceSample'+'r,\x20uv\x20+\x20un'+'iform.pixe'+'lOffset\x20*\x20'+'f32(i));\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20GAUSS'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20moments'+'\x20=\x20moments'+'\x20+\x20c.xyz\x20*'+'\x20uniform.w'+'eight[i].e'+'lement;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20moment'+'s\x20=\x20moment'+'s\x20+\x20c.xyz;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20#if'+'ndef\x20GAUSS'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20m'+'oments\x20=\x20m'+'oments\x20*\x20('+'1.0\x20/\x20f32('+'{SAMPLES})'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20vec4f('+'moments,\x201'+'.0);\x0a\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a}\x0a',dM='\x0auniform\x20m'+'aterial_cl'+'earCoat:\x20f'+'32;\x0a\x0afn\x20ge'+'tClearCoat'+'()\x20{\x0a\x20\x20\x20\x20c'+'cSpeculari'+'ty\x20=\x20unifo'+'rm.materia'+'l_clearCoa'+'t;\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20STD_C'+'LEARCOAT_T'+'EXTURE\x0a\x20\x20\x20'+'\x20ccSpecula'+'rity\x20=\x20ccS'+'pecularity'+'\x20*\x20texture'+'SampleBias'+'({STD_CLEA'+'RCOAT_TEXT'+'URE_NAME},'+'\x20{STD_CLEA'+'RCOAT_TEXT'+'URE_NAME}S'+'ampler,\x20{S'+'TD_CLEARCO'+'AT_TEXTURE'+'_UV},\x20unif'+'orm.textur'+'eBias).{ST'+'D_CLEARCOA'+'T_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_CLE'+'ARCOAT_VER'+'TEX\x0a\x20\x20\x20\x20cc'+'Specularit'+'y\x20=\x20ccSpec'+'ularity\x20*\x20'+'saturate(v'+'VertexColo'+'r.{STD_CLE'+'ARCOAT_VER'+'TEX_CHANNE'+'L});\x0a\x20\x20\x20\x20#'+'endif\x0a}\x0a',fM='\x0a\x20\x20\x20\x20unifo'+'rm\x20materia'+'l_clearCoa'+'tGloss:\x20f3'+'2;\x0a\x0afn\x20get'+'ClearCoatG'+'lossiness('+')\x20{\x0a\x20\x20\x20\x20cc'+'Glossiness'+'\x20=\x20uniform'+'.material_'+'clearCoatG'+'loss;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_CLEARCOA'+'TGLOSS_TEX'+'TURE\x0a\x20\x20\x20\x20c'+'cGlossines'+'s\x20=\x20ccGlos'+'siness\x20*\x20t'+'extureSamp'+'leBias({ST'+'D_CLEARCOA'+'TGLOSS_TEX'+'TURE_NAME}'+',\x20{STD_CLE'+'ARCOATGLOS'+'S_TEXTURE_'+'NAME}Sampl'+'er,\x20{STD_C'+'LEARCOATGL'+'OSS_TEXTUR'+'E_UV},\x20uni'+'form.textu'+'reBias).{S'+'TD_CLEARCO'+'ATGLOSS_TE'+'XTURE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_CLEARCO'+'ATGLOSS_VE'+'RTEX\x0a\x20\x20\x20\x20c'+'cGlossines'+'s\x20=\x20ccGlos'+'siness\x20*\x20s'+'aturate(vV'+'ertexColor'+'.{STD_CLEA'+'RCOATGLOSS'+'_VERTEX_CH'+'ANNEL});\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_CLEA'+'RCOATGLOSS'+'_INVERT\x0a\x20\x20'+'\x20\x20ccGlossi'+'ness\x20=\x201.0'+'\x20-\x20ccGloss'+'iness;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20ccGloss'+'iness\x20+=\x200'+'.0000001;\x0a'+'}\x0a',uM='\x0a#ifdef\x20ST'+'D_CLEARCOA'+'TNORMAL_TE'+'XTURE\x0a\x20\x20\x20\x20'+'uniform\x20ma'+'terial_cle'+'arCoatBump'+'iness:\x20f32'+';\x0a#endif\x0a\x0a'+'fn\x20getClea'+'rCoatNorma'+'l()\x20{\x0a#ifd'+'ef\x20STD_CLE'+'ARCOATNORM'+'AL_TEXTURE'+'\x0a\x20\x20\x20\x20var\x20n'+'ormalMap:\x20'+'vec3f\x20=\x20{S'+'TD_CLEARCO'+'ATNORMAL_T'+'EXTURE_DEC'+'ODE}(textu'+'reSampleBi'+'as({STD_CL'+'EARCOATNOR'+'MAL_TEXTUR'+'E_NAME},\x20{'+'STD_CLEARC'+'OATNORMAL_'+'TEXTURE_NA'+'ME}Sampler'+',\x20{STD_CLE'+'ARCOATNORM'+'AL_TEXTURE'+'_UV},\x20unif'+'orm.textur'+'eBias));\x0a\x20'+'\x20\x20\x20normalM'+'ap\x20=\x20mix(v'+'ec3f(0.0,\x20'+'0.0,\x201.0),'+'\x20normalMap'+',\x20uniform.'+'material_c'+'learCoatBu'+'mpiness);\x0a'+'\x20\x20\x20\x20ccNorm'+'alW\x20=\x20norm'+'alize(dTBN'+'\x20*\x20normalM'+'ap);\x0a#else'+'\x0a\x20\x20\x20\x20ccNor'+'malW\x20=\x20dVe'+'rtexNormal'+'W;\x0a#endif\x0a'+'}\x0a',pM='\x0astruct\x20Fa'+'ceCoords\x20{'+'\x0a\x20\x20\x20\x20uv:\x20v'+'ec2f,\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20Or'+'iginal\x20ret'+'urn\x20value\x0a'+'\x20\x20\x20\x20faceIn'+'dex:\x20f32,\x20'+'\x20\x20\x20//\x20Was\x20'+'out\x20parame'+'ter\x0a\x20\x20\x20\x20ti'+'leOffset:\x20'+'vec2f,\x20//\x20'+'Was\x20out\x20pa'+'rameter\x0a}\x0a'+'\x0a//\x20Conver'+'ts\x20unnorma'+'lized\x20dire'+'ction\x20vect'+'or\x20to\x20a\x20cu'+'bemap\x20face'+'\x20index\x20[0.'+'.5]\x20and\x20uv'+'\x20coordinat'+'es\x20within\x20'+'the\x20face\x20i'+'n\x20[0..1]\x20r'+'ange.\x0a//\x20A'+'dditionall'+'y\x20offset\x20t'+'o\x20a\x20tile\x20i'+'n\x20atlas\x20wi'+'thin\x203x3\x20s'+'ubdivision'+'\x20is\x20provid'+'ed\x0afn\x20getC'+'ubemapFace'+'Coordinate'+'s(dir:\x20vec'+'3f)\x20->\x20Fac'+'eCoords\x20{\x0a'+'\x20\x20\x20\x20var\x20fa'+'ceIndex:\x20f'+'32;\x0a\x20\x20\x20\x20va'+'r\x20tileOffs'+'et:\x20vec2f;'+'\x0a\x20\x20\x20\x20var\x20u'+'v:\x20vec2f;\x20'+'//\x20This\x20is'+'\x20the\x20face\x20'+'UV\x20[0..1]\x0a'+'\x20\x20\x20\x20let\x20vA'+'bs:\x20vec3f\x20'+'=\x20abs(dir)'+';\x0a\x20\x20\x20\x20var\x20'+'ma:\x20f32;\x0a\x0a'+'\x20\x20\x20\x20if\x20(vA'+'bs.z\x20>=\x20vA'+'bs.x\x20&&\x20vA'+'bs.z\x20>=\x20vA'+'bs.y)\x20{\x20\x20\x20'+'//\x20front\x20/'+'\x20back\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20i'+'s_neg_z\x20=\x20'+'dir.z\x20<\x200.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20faceIndex'+'\x20=\x20select('+'4.0,\x205.0,\x20'+'is_neg_z);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20m'+'a\x20=\x200.5\x20/\x20'+'vAbs.z;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20uv\x20='+'\x20vec2f(sel'+'ect(dir.x,'+'\x20-dir.x,\x20i'+'s_neg_z),\x20'+'-dir.y);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20til'+'eOffset\x20=\x20'+'vec2f(2.0,'+'\x20select(0.'+'0,\x201.0,\x20is'+'_neg_z));\x0a'+'\x0a\x20\x20\x20\x20}\x20els'+'e\x20if\x20(vAbs'+'.y\x20>=\x20vAbs'+'.x)\x20{\x20\x20//\x20'+'top\x20index\x20'+'2,\x20bottom\x20'+'index\x203\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20is_neg_y\x20'+'=\x20dir.y\x20<\x20'+'0.0;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20faceInd'+'ex\x20=\x20selec'+('t(2.0,\x203.0'+',\x20is_neg_y'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20ma\x20=\x200.5\x20'+'/\x20vAbs.y;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20uv'+'\x20=\x20vec2f(d'+'ir.x,\x20sele'+'ct(dir.z,\x20'+'-dir.z,\x20is'+'_neg_y));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ti'+'leOffset\x20='+'\x20vec2f(1.0'+',\x20select(0'+'.0,\x201.0,\x20i'+'s_neg_y));'+'\x0a\x0a\x20\x20\x20\x20}\x20el'+'se\x20{\x20\x20\x20\x20//'+'\x20left\x20/\x20ri'+'ght\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20is_'+'neg_x\x20=\x20di'+'r.x\x20<\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'aceIndex\x20='+'\x20select(0.'+'0,\x201.0,\x20is'+'_neg_x);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ma\x20'+'=\x200.5\x20/\x20vA'+'bs.x;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20uv\x20=\x20v'+'ec2f(selec'+'t(-dir.z,\x20'+'dir.z,\x20is_'+'neg_x),\x20-d'+'ir.y);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20tileO'+'ffset\x20=\x20ve'+'c2f(0.0,\x20s'+'elect(0.0,'+'\x201.0,\x20is_n'+'eg_x));\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20u'+'v\x20=\x20uv\x20*\x20m'+'a\x20+\x200.5;\x0a\x20'+'\x20\x20\x20return\x20'+'FaceCoords'+'(uv,\x20faceI'+'ndex,\x20tile'+'Offset);\x0a}'+'\x0a\x0a//\x20conve'+'rts\x20unnorm'+'alized\x20dir'+'ection\x20vec'+'tor\x20to\x20a\x20t'+'exture\x20coo'+'rdinate\x20fo'+'r\x20a\x20cubema'+'p\x20face\x20sto'+'red\x20within'+'\x20texture\x20a'+'tlas\x20descr'+'ibed\x20by\x20th'+'e\x20viewport'+'\x0afn\x20getCub'+'emapAtlasC'+'oordinates'+'(omniAtlas'+'Viewport:\x20'+'vec3f,\x20sha'+'dowEdgePix'+'els:\x20f32,\x20'+'shadowText'+'ureResolut'+'ion:\x20f32,\x20'+'dir:\x20vec3f'+')\x20->\x20vec2f'+'\x20{\x0a\x0a\x20\x20\x20\x20le'+'t\x20faceData'+':\x20FaceCoor'+'ds\x20=\x20getCu'+'bemapFaceC'+'oordinates'+'(dir);\x0a\x20\x20\x20'+'\x20var\x20uv:\x20v'+'ec2f\x20=\x20fac'+'eData.uv;\x0a'+'\x20\x20\x20\x20let\x20ti'+'leOffset:\x20'+'vec2f\x20=\x20fa'+'ceData.til'+'eOffset;\x0a\x0a'+'\x20\x20\x20\x20//\x20mov'+'e\x20uv\x20coord'+'inates\x20inw'+'ards\x20insid'+'e\x20to\x20compe'+'nsate\x20for\x20')+('larger\x20fov'+'\x20when\x20rend'+'ering\x20shad'+'ow\x20into\x20at'+'las\x0a\x20\x20\x20\x20le'+'t\x20atlasFac'+'eSize:\x20f32'+'\x20=\x20omniAtl'+'asViewport'+'.z;\x0a\x20\x20\x20\x20le'+'t\x20tileSize'+':\x20f32\x20=\x20sh'+'adowTextur'+'eResolutio'+'n\x20*\x20atlasF'+'aceSize;\x0a\x20'+'\x20\x20\x20var\x20off'+'set:\x20f32\x20='+'\x20shadowEdg'+'ePixels\x20/\x20'+'tileSize;\x0a'+'\x20\x20\x20\x20uv\x20=\x20u'+'v\x20*\x20(1.0\x20-'+'\x20offset\x20*\x20'+'2.0)\x20+\x20off'+'set;\x0a\x0a\x20\x20\x20\x20'+'//\x20scale\x20u'+'v\x20coordina'+'tes\x20to\x20cub'+'e\x20face\x20are'+'a\x20within\x20t'+'he\x20viewpor'+'t\x0a\x20\x20\x20\x20uv\x20='+'\x20uv\x20*\x20atla'+'sFaceSize;'+'\x0a\x0a\x20\x20\x20\x20//\x20o'+'ffset\x20into'+'\x20face\x20of\x20t'+'he\x20atlas\x20('+'3x3\x20grid)\x0a'+'\x20\x20\x20\x20uv\x20=\x20u'+'v\x20+\x20tileOf'+'fset\x20*\x20atl'+'asFaceSize'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'offset\x20int'+'o\x20the\x20atla'+'s\x20viewport'+'\x0a\x20\x20\x20\x20uv\x20=\x20'+'uv\x20+\x20omniA'+'tlasViewpo'+'rt.xy;\x0a\x0a\x20\x20'+'\x20\x20return\x20u'+'v;\x0a}\x0a'),mM='\x0afn\x20_getCo'+'okieCluste'+'red(tex:\x20t'+'exture_2d<'+'f32>,\x20texS'+'ampler:\x20sa'+'mpler,\x20uv:'+'\x20vec2f,\x20in'+'tensity:\x20f'+'32,\x20cookie'+'Channel:\x20v'+'ec4f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20let\x20pixel'+':\x20vec4f\x20=\x20'+'mix(vec4f('+'1.0),\x20text'+'ureSampleL'+'evel(tex,\x20'+'texSampler'+',\x20uv,\x200.0)'+',\x20intensit'+'y);\x0a\x20\x20\x20\x20le'+'t\x20isRgb:\x20b'+'ool\x20=\x20dot('+'cookieChan'+'nel.rgb,\x20v'+'ec3f(1.0))'+'\x20==\x203.0;\x0a\x20'+'\x20\x20\x20return\x20'+'select(vec'+'3f(dot(pix'+'el,\x20cookie'+'Channel)),'+'\x20pixel.rgb'+',\x20isRgb);\x0a'+'}\x0a\x0a//\x20getC'+'ookie2D\x20fo'+'r\x20clustere'+'d\x20lighting'+'\x20including'+'\x20channel\x20s'+'elector\x0afn'+'\x20getCookie'+'2DClustere'+'d(tex:\x20tex'+'ture_2d<f3'+'2>,\x20texSam'+'pler:\x20samp'+'ler,\x20trans'+'form:\x20mat4'+'x4f,\x20world'+'Position:\x20'+'vec3f,\x20int'+'ensity:\x20f3'+'2,\x20cookieC'+'hannel:\x20ve'+'c4f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20projPo'+'s:\x20vec4f\x20='+'\x20transform'+'\x20*\x20vec4f(w'+'orldPositi'+'on,\x201.0);\x0a'+'\x20\x20\x20\x20return'+'\x20_getCooki'+'eClustered'+'(tex,\x20texS'+'ampler,\x20pr'+'ojPos.xy\x20/'+'\x20projPos.w'+',\x20intensit'+'y,\x20cookieC'+'hannel);\x0a}'+'\x0a\x0a//\x20getCo'+'okie\x20for\x20c'+'lustered\x20o'+'mni\x20light\x20'+'with\x20the\x20c'+'ookie\x20text'+'ure\x20being\x20'+'stored\x20in\x20'+'the\x20cookie'+'\x20atlas\x0afn\x20'+'getCookieC'+'ubeCluster'+'ed(tex:\x20te'+'xture_2d<f'+'32>,\x20texSa'+'mpler:\x20sam'+'pler,\x20dir:'+'\x20vec3f,\x20in'+'tensity:\x20f'+'32,\x20cookie'+'Channel:\x20v'+'ec4f,\x20shad'+'owTextureR'+'esolution:'+'\x20f32,\x20shad'+('owEdgePixe'+'ls:\x20f32,\x20o'+'mniAtlasVi'+'ewport:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20uv:\x20ve'+'c2f\x20=\x20getC'+'ubemapAtla'+'sCoordinat'+'es(omniAtl'+'asViewport'+',\x20shadowEd'+'gePixels,\x20'+'shadowText'+'ureResolut'+'ion,\x20dir);'+'\x0a\x20\x20\x20\x20retur'+'n\x20_getCook'+'ieClustere'+'d(tex,\x20tex'+'Sampler,\x20u'+'v,\x20intensi'+'ty,\x20cookie'+'Channel);\x0a'+'}\x0a'),_M='\x0a\x0afn\x20_getS'+'hadowCoord'+'PerspZbuff'+'er(shadowM'+'atrix:\x20mat'+'4x4f,\x20shad'+'owParams:\x20'+'vec4f,\x20wPo'+'s:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20var\x20p'+'rojPos\x20=\x20s'+'hadowMatri'+'x\x20*\x20vec4f('+'wPos,\x201.0)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20projPos'+'.xyz\x20/\x20pro'+'jPos.w;\x0a\x20\x20'+'\x20\x20//\x20depth'+'\x20bias\x20is\x20a'+'lready\x20app'+'lied\x20on\x20re'+'nder\x0a}\x0a\x0afn'+'\x20getShadow'+'CoordPersp'+'ZbufferNor'+'malOffset('+'shadowMatr'+'ix:\x20mat4x4'+'f,\x20shadowP'+'arams:\x20vec'+'4f,\x20normal'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20let\x20wP'+'os:\x20vec3f\x20'+'=\x20vPositio'+'nW\x20+\x20norma'+'l\x20*\x20shadow'+'Params.y;\x0a'+'\x20\x20\x20\x20return'+'\x20_getShado'+'wCoordPers'+'pZbuffer(s'+'hadowMatri'+'x,\x20shadowP'+'arams,\x20wPo'+'s);\x0a}\x0a\x0afn\x20'+'normalOffs'+'etPointSha'+'dow(shadow'+'Params:\x20ve'+'c4f,\x20light'+'Pos:\x20vec3f'+',\x20lightDir'+':\x20vec3f,\x20l'+'ightDirNor'+'m:\x20vec3f,\x20'+'normal:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20distSc'+'ale:\x20f32\x20='+'\x20length(li'+'ghtDir);\x0a\x20'+'\x20\x20\x20let\x20wPo'+'s:\x20vec3f\x20='+'\x20vPosition'+'W\x20+\x20normal'+'\x20*\x20shadowP'+'arams.y\x20*\x20'+'clamp(1.0\x20'+'-\x20dot(norm'+'al,\x20-light'+'DirNorm),\x20'+'0.0,\x201.0)\x20'+'*\x20distScal'+'e;\x20//0.02\x0a'+'\x20\x20\x20\x20let\x20di'+'r:\x20vec3f\x20='+'\x20wPos\x20-\x20li'+'ghtPos;\x0a\x20\x20'+'\x20\x20return\x20d'+'ir;\x0a}\x0a\x0a#if'+'\x20defined(C'+'LUSTER_SHA'+'DOW_TYPE_P'+'CF1)\x0a\x0a\x20\x20\x20\x20'+'fn\x20getShad'+'owOmniClus'+'teredPCF1('+'shadowMap:'+'\x20texture_d'+'epth_2d,\x20s'+'hadowMapSa'+'mpler:\x20sam'+'pler_compa'+'rison,\x20sha'+'dowParams:'+('\x20vec4f,\x20om'+'niAtlasVie'+'wport:\x20vec'+'3f,\x20shadow'+'EdgePixels'+':\x20f32,\x20lig'+'htDir:\x20vec'+'3f)\x20->\x20f32'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20shad'+'owTextureR'+'esolution:'+'\x20f32\x20=\x20sha'+'dowParams.'+'x;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20uv:\x20v'+'ec2f\x20=\x20get'+'CubemapAtl'+'asCoordina'+'tes(omniAt'+'lasViewpor'+'t,\x20shadowE'+'dgePixels,'+'\x20shadowTex'+'tureResolu'+'tion,\x20ligh'+'tDir);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'shadowZ:\x20f'+'32\x20=\x20lengt'+'h(lightDir'+')\x20*\x20shadow'+'Params.w\x20+'+'\x20shadowPar'+'ams.z;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20textureS'+'ampleCompa'+'reLevel(sh'+'adowMap,\x20s'+'hadowMapSa'+'mpler,\x20uv,'+'\x20shadowZ);'+'\x0a\x20\x20\x20\x20}\x0a\x0a#e'+'ndif\x0a\x0a#if\x20'+'defined(CL'+'USTER_SHAD'+'OW_TYPE_PC'+'F3)\x0a\x0a\x20\x20\x20\x20f'+'n\x20getShado'+'wOmniClust'+'eredPCF3(s'+'hadowMap:\x20'+'texture_de'+'pth_2d,\x20sh'+'adowMapSam'+'pler:\x20samp'+'ler_compar'+'ison,\x20shad'+'owParams:\x20'+'vec4f,\x20omn'+'iAtlasView'+'port:\x20vec3'+'f,\x20shadowE'+'dgePixels:'+'\x20f32,\x20ligh'+'tDir:\x20vec3'+'f)\x20->\x20f32\x20'+'{\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20shado'+'wTextureRe'+'solution:\x20'+'f32\x20=\x20shad'+'owParams.x'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20uv:\x20ve'+'c2f\x20=\x20getC'+'ubemapAtla'+'sCoordinat'+'es(omniAtl'+'asViewport'+',\x20shadowEd'+'gePixels,\x20'+'shadowText'+'ureResolut'+'ion,\x20light'+'Dir);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20s'+'hadowZ:\x20f3'+'2\x20=\x20length'+'(lightDir)'+'\x20*\x20shadowP'+'arams.w\x20+\x20'+'shadowPara'+'ms.z;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20sh'+'adowCoord:'+'\x20vec3f\x20=\x20v'+'ec3f(uv,\x20s'+'hadowZ);\x0a\x20')+('\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20getSha'+'dowPCF3x3('+'shadowMap,'+'\x20shadowMap'+'Sampler,\x20s'+'hadowCoord'+',\x20shadowPa'+'rams);\x0a\x20\x20\x20'+'\x20}\x0a\x0a#endif'+'\x0a\x0a#if\x20defi'+'ned(CLUSTE'+'R_SHADOW_T'+'YPE_PCF5)\x0a'+'\x0a\x20\x20\x20\x20fn\x20ge'+'tShadowOmn'+'iClustered'+'PCF5(shado'+'wMap:\x20text'+'ure_depth_'+'2d,\x20shadow'+'MapSampler'+':\x20sampler_'+'comparison'+',\x20shadowPa'+'rams:\x20vec4'+'f,\x20omniAtl'+'asViewport'+':\x20vec3f,\x20s'+'hadowEdgeP'+'ixels:\x20f32'+',\x20lightDir'+':\x20vec3f)\x20-'+'>\x20f32\x20{\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20shadowTex'+'tureResolu'+'tion:\x20f32\x20'+'=\x20shadowPa'+'rams.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'uv:\x20vec2f\x20'+'=\x20getCubem'+'apAtlasCoo'+'rdinates(o'+'mniAtlasVi'+'ewport,\x20sh'+'adowEdgePi'+'xels,\x20shad'+'owTextureR'+'esolution,'+'\x20lightDir)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20shado'+'wZ:\x20f32\x20=\x20'+'length(lig'+'htDir)\x20*\x20s'+'hadowParam'+'s.w\x20+\x20shad'+'owParams.z'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20shadow'+'Coord:\x20vec'+'3f\x20=\x20vec3f'+'(uv,\x20shado'+'wZ);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'getShadowP'+'CF5x5(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20shado'+'wCoord,\x20sh'+'adowParams'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'#endif\x0a\x0a//'+'\x20Clustered'+'\x20Spot\x20Samp'+'ling\x20using'+'\x20atlas\x0a\x0a#i'+'f\x20defined('+'CLUSTER_SH'+'ADOW_TYPE_'+'PCF1)\x0a\x0a\x20\x20\x20'+'\x20fn\x20getSha'+'dowSpotClu'+'steredPCF1'+'(shadowMap'+':\x20texture_'+'depth_2d,\x20'+'shadowMapS'+'ampler:\x20sa'+'mpler_comp'+'arison,\x20sh'+'adowCoord:'+'\x20vec3f,\x20sh'+'adowParams'+':\x20vec4f)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu')+('rn\x20texture'+'SampleComp'+'areLevel(s'+'hadowMap,\x20'+'shadowMapS'+'ampler,\x20sh'+'adowCoord.'+'xy,\x20shadow'+'Coord.z);\x0a'+'\x20\x20\x20\x20}\x0a\x0a#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20defined'+'(CLUSTER_S'+'HADOW_TYPE'+'_PCF3)\x0a\x0a\x20\x20'+'\x20\x20fn\x20getSh'+'adowSpotCl'+'usteredPCF'+'3(shadowMa'+'p:\x20texture'+'_depth_2d,'+'\x20shadowMap'+'Sampler:\x20s'+'ampler_com'+'parison,\x20s'+'hadowCoord'+':\x20vec3f,\x20s'+'hadowParam'+'s:\x20vec4f)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20getSha'+'dowSpotPCF'+'3x3(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20shadowC'+'oord,\x20shad'+'owParams);'+'\x0a\x20\x20\x20\x20}\x0a\x0a#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20define'+'d(CLUSTER_'+'SHADOW_TYP'+'E_PCF5)\x0a\x0a\x20'+'\x20\x20\x20fn\x20getS'+'hadowSpotC'+'lusteredPC'+'F5(shadowM'+'ap:\x20textur'+'e_depth_2d'+',\x20shadowMa'+'pSampler:\x20'+'sampler_co'+'mparison,\x20'+'shadowCoor'+'d:\x20vec3f,\x20'+'shadowPara'+'ms:\x20vec4f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20getSh'+'adowPCF5x5'+'(shadowMap'+',\x20shadowMa'+'pSampler,\x20'+'shadowCoor'+'d,\x20shadowP'+'arams);\x0a\x20\x20'+'\x20\x20}\x0a\x0a#endi'+'f\x0a'),gM='\x0a\x0a#include'+'\x20\x22lightBuf'+'ferDefines'+'PS\x22\x0a\x0a//\x20in'+'clude\x20this'+'\x20before\x20sh'+'adow\x20/\x20coo'+'kie\x20code\x0a#'+'include\x20\x22c'+'lusteredLi'+'ghtUtilsPS'+'\x22\x0a\x0a#ifdef\x20'+'CLUSTER_CO'+'OKIES\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'clusteredL'+'ightCookie'+'sPS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'CLUSTER_SH'+'ADOWS\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'clusteredL'+'ightShadow'+'sPS\x22\x0a#endi'+'f\x0a\x0avar\x20clu'+'sterWorldT'+'exture:\x20te'+'xture_2d<f'+'32>;\x0avar\x20l'+'ightsTextu'+'re:\x20textur'+'e_2d<f32>;'+'\x0a\x0a#ifdef\x20C'+'LUSTER_SHA'+'DOWS\x0a\x20\x20\x20\x20/'+'/\x20TODO:\x20wh'+'en\x20VSM\x20sha'+'dow\x20is\x20sup'+'ported,\x20it'+'\x20needs\x20to\x20'+'use\x20sample'+'r2D\x20in\x20web'+'gl2\x0a\x20\x20\x20\x20va'+'r\x20shadowAt'+'lasTexture'+':\x20texture_'+'depth_2d;\x0a'+'\x20\x20\x20\x20var\x20sh'+'adowAtlasT'+'extureSamp'+'ler:\x20sampl'+'er_compari'+'son;\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'CLUSTER_CO'+'OKIES\x0a\x20\x20\x20\x20'+'var\x20cookie'+'AtlasTextu'+'re:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20var\x20c'+'ookieAtlas'+'TextureSam'+'pler:\x20samp'+'ler;\x0a#endi'+'f\x0a\x0auniform'+'\x20clusterMa'+'xCells:\x20i3'+'2;\x0a\x0a//\x201.0'+'\x20if\x20cluste'+'red\x20lighti'+'ng\x20can\x20be\x20'+'skipped\x20(0'+'\x20lights\x20in'+'\x20the\x20clust'+'ers)\x0aunifo'+'rm\x20cluster'+'Skip:\x20f32;'+'\x0a\x0auniform\x20'+'clusterCel'+'lsCountByB'+'oundsSize:'+'\x20vec3f;\x0aun'+'iform\x20clus'+'terTexture'+'Size:\x20vec3'+'f;\x0auniform'+'\x20clusterBo'+'undsMin:\x20v'+'ec3f;\x0aunif'+'orm\x20cluste'+'rBoundsDel'+'ta:\x20vec3f;'+'\x0auniform\x20c'+'lusterCell'+'sDot:\x20vec3'+'f;\x0auniform'+'\x20clusterCe'+'llsMax:\x20ve'+('c3f;\x0aunifo'+'rm\x20shadowA'+'tlasParams'+':\x20vec2f;\x0a\x0a'+'//\x20structu'+'re\x20storing'+'\x20light\x20pro'+'perties\x20of'+'\x20a\x20cluster'+'ed\x20light\x0a/'+'/\x20it\x27s\x20sor'+'ted\x20to\x20hav'+'e\x20all\x20vect'+'ors\x20aligne'+'d\x20to\x204\x20flo'+'ats\x20to\x20lim'+'it\x20padding'+'\x0astruct\x20Cl'+'usterLight'+'Data\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x2032bit'+'\x20of\x20flags\x0a'+'\x20\x20\x20\x20flags:'+'\x20u32,\x0a\x0a\x20\x20\x20'+'\x20//\x20area\x20l'+'ight\x20sizes'+'\x20/\x20orienta'+'tion\x0a\x20\x20\x20\x20h'+'alfWidth:\x20'+'vec3f,\x0a\x0a\x20\x20'+'\x20\x20isSpot:\x20'+'bool,\x0a\x0a\x20\x20\x20'+'\x20//\x20area\x20l'+'ight\x20sizes'+'\x20/\x20orienta'+'tion\x0a\x20\x20\x20\x20h'+'alfHeight:'+'\x20vec3f,\x0a\x0a\x20'+'\x20\x20\x20//\x20ligh'+'t\x20index\x0a\x20\x20'+'\x20\x20lightInd'+'ex:\x20i32,\x0a\x0a'+'\x20\x20\x20\x20//\x20wor'+'ld\x20space\x20p'+'osition\x0a\x20\x20'+'\x20\x20position'+':\x20vec3f,\x0a\x0a'+'\x20\x20\x20\x20//\x20are'+'a\x20light\x20sh'+'ape\x0a\x20\x20\x20\x20sh'+'ape:\x20u32,\x0a'+'\x0a\x20\x20\x20\x20//\x20wo'+'rld\x20space\x20'+'direction\x20'+'(spot\x20ligh'+'t\x20only)\x0a\x20\x20'+'\x20\x20directio'+'n:\x20vec3f,\x0a'+'\x0a\x20\x20\x20\x20//\x20li'+'ght\x20follow'+'\x20mode\x0a\x20\x20\x20\x20'+'falloffMod'+'eLinear:\x20b'+'ool,\x0a\x0a\x20\x20\x20\x20'+'//\x20color\x0a\x20'+'\x20\x20\x20color:\x20'+'vec3f,\x0a\x0a\x20\x20'+'\x20\x20//\x200.0\x20i'+'f\x20the\x20ligh'+'t\x20doesn\x27t\x20'+'cast\x20shado'+'ws\x0a\x20\x20\x20\x20sha'+'dowIntensi'+'ty:\x20f32,\x0a\x0a'+'\x20\x20\x20\x20//\x20atl'+'as\x20viewpor'+'t\x20for\x20omni'+'\x20light\x20sha'+'dow\x20and\x20co'+'okie\x20(.xy\x20'+'is\x20offset\x20'+'to\x20the\x20vie'+'wport\x20slot'+',\x20.z\x20is\x20si'+'ze\x20of\x20the\x20'+'face\x20in\x20th'+'e\x20atlas)\x0a\x20'+'\x20\x20\x20omniAtl'+'asViewport'+':\x20vec3f,\x0a\x0a'+'\x20\x20\x20\x20//\x20ran'+'ge\x20of\x20the\x20'+'light\x0a\x20\x20\x20\x20'+'range:\x20f32'+',\x0a\x0a\x20\x20\x20\x20//\x20'+'channel\x20ma'+'sk\x20-\x20one\x20o'+'f\x20the\x20chan'+'nels\x20has\x201'+',\x20the\x20othe')+('rs\x20are\x200\x0a\x20'+'\x20\x20\x20cookieC'+'hannelMask'+':\x20vec4f,\x0a\x0a'+'\x20\x20\x20\x20//\x20com'+'pressed\x20bi'+'ases,\x20two\x20'+'haf-floats'+'\x20stored\x20in'+'\x20a\x20float\x0a\x20'+'\x20\x20\x20biasesD'+'ata:\x20f32,\x0a'+'\x0a\x20\x20\x20\x20//\x20sh'+'adow\x20bias\x20'+'values\x0a\x20\x20\x20'+'\x20shadowBia'+'s:\x20f32,\x0a\x20\x20'+'\x20\x20shadowNo'+'rmalBias:\x20'+'f32,\x0a\x0a\x20\x20\x20\x20'+'//\x20compres'+'sed\x20angles'+',\x20two\x20haf-'+'floats\x20sto'+'red\x20in\x20a\x20f'+'loat\x0a\x20\x20\x20\x20a'+'nglesData:'+'\x20f32,\x0a\x0a\x20\x20\x20'+'\x20//\x20spot\x20l'+'ight\x20inner'+'\x20and\x20outer'+'\x20angle\x20cos'+'ine\x0a\x20\x20\x20\x20in'+'nerConeAng'+'leCos:\x20f32'+',\x0a\x20\x20\x20\x20oute'+'rConeAngle'+'Cos:\x20f32,\x0a'+'\x0a\x20\x20\x20\x20//\x20in'+'tensity\x20of'+'\x20the\x20cooki'+'e\x0a\x20\x20\x20\x20cook'+'ieIntensit'+'y:\x20f32,\x0a\x0a\x20'+'\x20\x20\x20//\x20ligh'+'t\x20mask\x0a\x20\x20\x20'+'\x20//float\x20m'+'ask;\x0a\x20\x20\x20\x20i'+'sDynamic:\x20'+'bool,\x0a\x20\x20\x20\x20'+'isLightmap'+'ped:\x20bool\x0a'+'}\x0a\x0a//\x20Note'+':\x20on\x20some\x20'+'devices\x20(t'+'ested\x20on\x20P'+'ixel\x203A\x20XL'+'),\x20this\x20ma'+'trix\x20when\x20'+'stored\x20ins'+'ide\x20the\x20li'+'ght\x20struct'+'\x20has\x20lower'+'\x20precision'+'\x20compared\x20'+'to\x0a//\x20when'+'\x20stored\x20ou'+'tside,\x20so\x20'+'we\x20store\x20i'+'t\x20outside\x20'+'to\x20avoid\x20s'+'pot\x20shadow'+'\x20flickerin'+'g.\x20This\x20mi'+'ght\x20need\x20t'+'o\x20be\x20done\x20'+'to\x20other\x20/'+'\x20all\x20membe'+'rs\x0a//\x20of\x20t'+'he\x20structu'+'re\x20if\x20furt'+'her\x20simila'+'r\x20issues\x20a'+'re\x20observe'+'d.\x0a\x0a//\x20sha'+'dow\x20(spot\x20'+'light\x20only'+')\x20/\x20cookie'+'\x20projectio'+'n\x20matrix\x0av'+'ar<private'+'>\x20lightPro'+'jectionMat'+'rix:\x20mat4x'+'4f;\x0a\x0afn\x20sa'+'mpleLightT'+'extureF(li'+'ghtIndex:\x20'+'i32,\x20index'+':\x20i32)\x20->\x20')+('vec4f\x20{\x0a\x20\x20'+'\x20\x20return\x20t'+'extureLoad'+'(lightsTex'+'ture,\x20vec2'+'<i32>(inde'+'x,\x20lightIn'+'dex),\x200);\x0a'+'}\x0a\x0afn\x20deco'+'deClusterL'+'ightCore(c'+'lusterLigh'+'tData:\x20ptr'+'<function,'+'\x20ClusterLi'+'ghtData>,\x20'+'lightIndex'+':\x20f32)\x20{\x0a\x0a'+'\x20\x20\x20\x20//\x20lig'+'ht\x20index\x0a\x20'+'\x20\x20\x20cluster'+'LightData.'+'lightIndex'+'\x20=\x20i32(lig'+'htIndex);\x0a'+'\x0a\x20\x20\x20\x20//\x20sa'+'mple\x20data\x20'+'encoding\x20h'+'alf-float\x20'+'values\x20int'+'o\x2032bit\x20ui'+'nts\x0a\x20\x20\x20\x20le'+'t\x20halfData'+':\x20vec4f\x20=\x20'+'sampleLigh'+'tTextureF('+'clusterLig'+'htData.lig'+'htIndex,\x20{'+'CLUSTER_TE'+'XTURE_COLO'+'R_ANGLES_B'+'IAS});\x0a\x0a\x20\x20'+'\x20\x20//\x20store'+'\x20floats\x20we'+'\x20decode\x20la'+'ter\x20as\x20nee'+'ded\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.angle'+'sData\x20=\x20ha'+'lfData.z;\x0a'+'\x20\x20\x20\x20cluste'+'rLightData'+'.biasesDat'+'a\x20=\x20halfDa'+'ta.w;\x0a\x0a\x20\x20\x20'+'\x20//\x20decomp'+'ress\x20color'+'\x20half-floa'+'ts\x0a\x20\x20\x20\x20let'+'\x20colorRG:\x20'+'vec2f\x20=\x20un'+'pack2x16fl'+'oat(bitcas'+'t<u32>(hal'+'fData.x));'+'\x0a\x20\x20\x20\x20let\x20c'+'olorB_:\x20ve'+'c2f\x20=\x20unpa'+'ck2x16floa'+'t(bitcast<'+'u32>(halfD'+'ata.y));\x0a\x20'+'\x20\x20\x20cluster'+'LightData.'+'color\x20=\x20ve'+'c3f(colorR'+'G,\x20colorB_'+'.x)\x20*\x20{LIG'+'HT_COLOR_D'+'IVIDER};\x0a\x0a'+'\x20\x20\x20\x20//\x20pos'+'ition\x20and\x20'+'range,\x20ful'+'l\x20floats\x0a\x20'+'\x20\x20\x20let\x20lig'+'htPosRange'+':\x20vec4f\x20=\x20'+'sampleLigh'+'tTextureF('+'clusterLig'+'htData.lig'+'htIndex,\x20{'+'CLUSTER_TE'+'XTURE_POSI'+'TION_RANGE'+'});\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.posit')+('ion\x20=\x20ligh'+'tPosRange.'+'xyz;\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.rang'+'e\x20=\x20lightP'+'osRange.w;'+'\x0a\x0a\x20\x20\x20\x20//\x20s'+'pot\x20direct'+'ion\x20&\x20flag'+'s\x20data\x0a\x20\x20\x20'+'\x20let\x20light'+'Dir_Flags:'+'\x20vec4f\x20=\x20s'+'ampleLight'+'TextureF(c'+'lusterLigh'+'tData.ligh'+'tIndex,\x20{C'+'LUSTER_TEX'+'TURE_DIREC'+'TION_FLAGS'+'});\x0a\x0a\x20\x20\x20\x20/'+'/\x20spot\x20lig'+'ht\x20directi'+'on\x0a\x20\x20\x20\x20clu'+'sterLightD'+'ata.direct'+'ion\x20=\x20ligh'+'tDir_Flags'+'.xyz;\x0a\x0a\x20\x20\x20'+'\x20//\x2032bit\x20'+'flags\x0a\x20\x20\x20\x20'+'let\x20flags_'+'uint:\x20u32\x20'+'=\x20bitcast<'+'u32>(light'+'Dir_Flags.'+'w);\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.flags'+'\x20=\x20flags_u'+'int;\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.isSp'+'ot\x20=\x20(flag'+'s_uint\x20&\x20('+'1u\x20<<\x2030u)'+')\x20!=\x200u;\x0a\x20'+'\x20\x20\x20cluster'+'LightData.'+'shape\x20=\x20(f'+'lags_uint\x20'+'>>\x2028u)\x20&\x20'+'0x3u;\x0a\x20\x20\x20\x20'+'clusterLig'+'htData.fal'+'loffModeLi'+'near\x20=\x20(fl'+'ags_uint\x20&'+'\x20(1u\x20<<\x2027'+'u))\x20==\x200u;'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.shadowIn'+'tensity\x20=\x20'+'f32((flags'+'_uint\x20>>\x200'+'u)\x20&\x200xFFu'+')\x20/\x20255.0;'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.cookieIn'+'tensity\x20=\x20'+'f32((flags'+'_uint\x20>>\x208'+'u)\x20&\x200xFFu'+')\x20/\x20255.0;'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.isDynami'+'c\x20=\x20(flags'+'_uint\x20&\x20(1'+'u\x20<<\x2022u))'+'\x20!=\x200u;\x0a\x20\x20'+'\x20\x20clusterL'+'ightData.i'+'sLightmapp'+'ed\x20=\x20(flag'+'s_uint\x20&\x20('+'1u\x20<<\x2021u)'+')\x20!=\x200u;\x0a}'+'\x0a\x0afn\x20decod'+'eClusterLi'+'ghtSpot(cl'+'usterLight'+'Data:\x20ptr<'+'function,\x20'+'ClusterLig'+'htData>)\x20{')+('\x0a\x20\x20\x20\x20//\x20sp'+'ot\x20light\x20c'+'os\x20angles\x0a'+'\x20\x20\x20\x20let\x20an'+'gles:\x20vec2'+'f\x20=\x20unpack'+'2x16float('+'bitcast<u3'+'2>(cluster'+'LightData.'+'anglesData'+'));\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.inner'+'ConeAngleC'+'os\x20=\x20angle'+'s.x;\x0a\x20\x20\x20\x20c'+'lusterLigh'+'tData.oute'+'rConeAngle'+'Cos\x20=\x20angl'+'es.y;\x0a}\x0a\x0af'+'n\x20decodeCl'+'usterLight'+'OmniAtlasV'+'iewport(cl'+'usterLight'+'Data:\x20ptr<'+'function,\x20'+'ClusterLig'+'htData>)\x20{'+'\x0a\x20\x20\x20\x20clust'+'erLightDat'+'a.omniAtla'+'sViewport\x20'+'=\x20sampleLi'+'ghtTexture'+'F(clusterL'+'ightData.l'+'ightIndex,'+'\x20{CLUSTER_'+'TEXTURE_PR'+'OJ_MAT_0})'+'.xyz;\x0a}\x0a\x0af'+'n\x20decodeCl'+'usterLight'+'AreaData(c'+'lusterLigh'+'tData:\x20ptr'+'<function,'+'\x20ClusterLi'+'ghtData>)\x20'+'{\x0a\x20\x20\x20\x20clus'+'terLightDa'+'ta.halfWid'+'th\x20=\x20sampl'+'eLightText'+'ureF(clust'+'erLightDat'+'a.lightInd'+'ex,\x20{CLUST'+'ER_TEXTURE'+'_AREA_DATA'+'_WIDTH}).x'+'yz;\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.halfH'+'eight\x20=\x20sa'+'mpleLightT'+'extureF(cl'+'usterLight'+'Data.light'+'Index,\x20{CL'+'USTER_TEXT'+'URE_AREA_D'+'ATA_HEIGHT'+'}).xyz;\x0a}\x0a'+'\x0afn\x20decode'+'ClusterLig'+'htProjecti'+'onMatrixDa'+'ta(cluster'+'LightData:'+'\x20ptr<funct'+'ion,\x20Clust'+'erLightDat'+'a>)\x20{\x0a\x20\x20\x20\x20'+'//\x20shadow\x20'+'matrix\x0a\x20\x20\x20'+'\x20let\x20m0:\x20v'+'ec4f\x20=\x20sam'+'pleLightTe'+'xtureF(clu'+'sterLightD'+'ata.lightI'+'ndex,\x20{CLU'+'STER_TEXTU'+'RE_PROJ_MA'+'T_0});\x0a\x20\x20\x20'+'\x20let\x20m1:\x20v')+('ec4f\x20=\x20sam'+'pleLightTe'+'xtureF(clu'+'sterLightD'+'ata.lightI'+'ndex,\x20{CLU'+'STER_TEXTU'+'RE_PROJ_MA'+'T_1});\x0a\x20\x20\x20'+'\x20let\x20m2:\x20v'+'ec4f\x20=\x20sam'+'pleLightTe'+'xtureF(clu'+'sterLightD'+'ata.lightI'+'ndex,\x20{CLU'+'STER_TEXTU'+'RE_PROJ_MA'+'T_2});\x0a\x20\x20\x20'+'\x20let\x20m3:\x20v'+'ec4f\x20=\x20sam'+'pleLightTe'+'xtureF(clu'+'sterLightD'+'ata.lightI'+'ndex,\x20{CLU'+'STER_TEXTU'+'RE_PROJ_MA'+'T_3});\x0a\x20\x20\x20'+'\x20lightProj'+'ectionMatr'+'ix\x20=\x20mat4x'+'4f(m0,\x20m1,'+'\x20m2,\x20m3);\x0a'+'}\x0a\x0afn\x20deco'+'deClusterL'+'ightShadow'+'Data(clust'+'erLightDat'+'a:\x20ptr<fun'+'ction,\x20Clu'+'sterLightD'+'ata>)\x20{\x0a\x20\x20'+'\x20\x20//\x20shado'+'w\x20biases\x0a\x20'+'\x20\x20\x20let\x20bia'+'ses:\x20vec2f'+'\x20=\x20unpack2'+'x16float(b'+'itcast<u32'+'>(clusterL'+'ightData.b'+'iasesData)'+');\x0a\x20\x20\x20\x20clu'+'sterLightD'+'ata.shadow'+'Bias\x20=\x20bia'+'ses.x;\x0a\x20\x20\x20'+'\x20clusterLi'+'ghtData.sh'+'adowNormal'+'Bias\x20=\x20bia'+'ses.y;\x0a}\x0a\x0a'+'fn\x20decodeC'+'lusterLigh'+'tCookieDat'+'a(clusterL'+'ightData:\x20'+'ptr<functi'+'on,\x20Cluste'+'rLightData'+'>)\x20{\x0a\x0a\x20\x20\x20\x20'+'//\x20extract'+'\x20channel\x20m'+'ask\x20from\x20f'+'lags\x0a\x20\x20\x20\x20l'+'et\x20cookieF'+'lags:\x20u32\x20'+'=\x20(cluster'+'LightData.'+'flags\x20>>\x202'+'3u)\x20&\x200x0F'+'u;\x20\x20//\x204bi'+'ts,\x20each\x20b'+'it\x20enables'+'\x20a\x20channel'+'\x0a\x20\x20\x20\x20let\x20m'+'ask_uvec:\x20'+'vec4<u32>\x20'+'=\x20vec4<u32'+'>(cookieFl'+'ags)\x20&\x20vec'+'4<u32>(1u,'+'\x202u,\x204u,\x208'+'u);\x0a\x20\x20\x20\x20cl'+'usterLight'+'Data.cooki'+'eChannelMa'+'sk\x20=\x20step('+'vec4f(1.0)')+(',\x20vec4f(ma'+'sk_uvec));'+'\x20//\x20Normal'+'ize\x20to\x200.0'+'\x20or\x201.0\x0a}\x0a'+'\x0afn\x20evalua'+'teLight(\x0a\x20'+'\x20\x20\x20light:\x20'+'ptr<functi'+'on,\x20Cluste'+'rLightData'+'>,\x0a\x20\x20\x20\x20wor'+'ldNormal:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20viewDir:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20reflectio'+'nDir:\x20vec3'+'f,\x0a#if\x20def'+'ined(LIT_C'+'LEARCOAT)\x0a'+'\x20\x20\x20\x20clearc'+'oatReflect'+'ionDir:\x20ve'+'c3f,\x0a#endi'+'f\x0a\x20\x20\x20\x20glos'+'s:\x20f32,\x0a\x20\x20'+'\x20\x20specular'+'ity:\x20vec3f'+',\x0a\x20\x20\x20\x20geom'+'etricNorma'+'l:\x20vec3f,\x0a'+'\x20\x20\x20\x20tbn:\x20m'+'at3x3f,\x0a#i'+'f\x20defined('+'LIT_IRIDES'+'CENCE)\x0a\x20\x20\x20'+'\x20iridescen'+'ceFresnel:'+'\x20vec3f,\x0a#e'+'ndif\x0a\x20\x20\x20\x20c'+'learcoat_w'+'orldNormal'+':\x20vec3f,\x0a\x20'+'\x20\x20\x20clearco'+'at_gloss:\x20'+'f32,\x0a\x20\x20\x20\x20s'+'heen_gloss'+':\x20f32,\x0a\x20\x20\x20'+'\x20iridescen'+'ce_intensi'+'ty:\x20f32\x0a)\x20'+'{\x0a\x0a\x20\x20\x20\x20var'+'\x20cookieAtt'+'enuation:\x20'+'vec3f\x20=\x20ve'+'c3f(1.0);\x0a'+'\x20\x20\x20\x20var\x20di'+'ffuseAtten'+'uation:\x20f3'+'2\x20=\x201.0;\x0a\x20'+'\x20\x20\x20var\x20fal'+'loffAttenu'+'ation:\x20f32'+'\x20=\x201.0;\x0a\x0a\x20'+'\x20\x20\x20//\x20eval'+'uate\x20omni\x20'+'part\x20of\x20th'+'e\x20light\x0a\x20\x20'+'\x20\x20let\x20ligh'+'tDirW:\x20vec'+'3f\x20=\x20evalO'+'mniLight(l'+'ight.posit'+'ion);\x0a\x20\x20\x20\x20'+'let\x20lightD'+'irNormW:\x20v'+'ec3f\x20=\x20nor'+'malize(lig'+'htDirW);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20CLUSTER_A'+'REALIGHTS\x0a'+'\x0a\x20\x20\x20\x20//\x20di'+'stance\x20att'+'enuation\x0a\x20'+'\x20\x20\x20if\x20(lig'+'ht.shape\x20!'+'=\x20{LIGHTSH'+'APE_PUNCTU'+'AL})\x20{\x20//\x20'+'area\x20light'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20area\x20li'+'ghts\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20decodeC'+'lusterLigh'+'tAreaData('+'light);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20')+('handle\x20lig'+'ht\x20shape\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(light.sha'+'pe\x20==\x20{LIG'+'HTSHAPE_RE'+'CT})\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'alcRectLig'+'htValues(l'+'ight.posit'+'ion,\x20light'+'.halfWidth'+',\x20light.ha'+'lfHeight);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20if\x20('+'light.shap'+'e\x20==\x20{LIGH'+'TSHAPE_DIS'+'K})\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ca'+'lcDiskLigh'+'tValues(li'+'ght.positi'+'on,\x20light.'+'halfWidth,'+'\x20light.hal'+'fHeight);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20{\x20//\x20'+'sphere\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'alcSphereL'+'ightValues'+'(light.pos'+'ition,\x20lig'+'ht.halfWid'+'th,\x20light.'+'halfHeight'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20falloffA'+'ttenuation'+'\x20=\x20getFall'+'offWindow('+'light.rang'+'e,\x20lightDi'+'rW);\x0a\x0a\x20\x20\x20\x20'+'}\x20else\x0a\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20{\x20\x20\x20//'+'\x20punctual\x20'+'light\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20if\x20(l'+'ight.fallo'+'ffModeLine'+'ar)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20fa'+'lloffAtten'+'uation\x20=\x20g'+'etFalloffL'+'inear(ligh'+'t.range,\x20l'+'ightDirW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x20else\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'falloffAtt'+'enuation\x20='+'\x20getFallof'+'fInvSquare'+'d(light.ra'+'nge,\x20light'+'DirW);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20if'+'\x20(falloffA'+'ttenuation'+'\x20>\x200.00001'+')\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'CLUSTER_AR'+'EALIGHTS\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(light.sh'+'ape\x20!=\x20{LI'+'GHTSHAPE_P'+'UNCTUAL})\x20'+'{\x20//\x20area\x20'+'light\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20handle\x20l'+'ight\x20shape'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(lig'+'ht.shape\x20='+'=\x20{LIGHTSH'+'APE_RECT})'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'iffuseAtte'+'nuation\x20=\x20'+'getRectLig'+'htDiffuse('+'worldNorma'+'l,\x20viewDir'+',\x20lightDir'+'W,\x20lightDi'+'rNormW)\x20*\x20'+'16.0;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20if\x20(l'+'ight.shape'+'\x20==\x20{LIGHT'+'SHAPE_DISK'+'})\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20diffuseAt'+'tenuation\x20'+'=\x20getDiskL'+'ightDiffus'+'e(worldNor'+'mal,\x20viewD'+'ir,\x20lightD'+'irW,\x20light'+'DirNormW)\x20'+'*\x2016.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x20else\x20{\x20/'+'/\x20sphere\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20diffu'+'seAttenuat'+'ion\x20=\x20getS'+'phereLight'+'Diffuse(wo'+'rldNormal,'+'\x20viewDir,\x20'+'lightDirW,'+'\x20lightDirN'+'ormW)\x20*\x2016'+'.0;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x20e'+'lse\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20falloff'+'Attenuatio'+'n\x20=\x20fallof'+'fAttenuati'+'on\x20*\x20getLi'+'ghtDiffuse'+'(worldNorm'+'al,\x20viewDi'+'r,\x20lightDi'+'rNormW);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20spot\x20ligh'+'t\x20falloff\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(light.is'+'Spot)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'decodeClus'+'terLightSp'+'ot(light);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20falloff'+'Attenuatio'+'n\x20=\x20fallof'+'fAttenuati'+'on\x20*\x20getSp'+'otEffect(l'+'ight.direc'+'tion,\x20ligh'+'t.innerCon'+'eAngleCos,'+'\x20light.out'+'erConeAngl'+'eCos,\x20ligh'+'tDirNormW)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20defin'+'ed(CLUSTER'+'_COOKIES)\x20'+'||\x20defined'+'(CLUSTER_S'+'HADOWS)\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(falloffAt'+'tenuation\x20'+'>\x200.00001)'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'hadow\x20/\x20co')+('okie\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(light.sha'+'dowIntensi'+'ty\x20>\x200.0\x20|'+'|\x20light.co'+'okieIntens'+'ity\x20>\x200.0)'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20shared\x20'+'shadow\x20/\x20c'+'ookie\x20data'+'\x20depends\x20o'+'n\x20light\x20ty'+'pe\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20i'+'f\x20(light.i'+'sSpot)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'ecodeClust'+'erLightPro'+'jectionMat'+'rixData(li'+'ght);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x20else\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20decodeClu'+'sterLightO'+'mniAtlasVi'+'ewport(lig'+'ht);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20shadow'+'TextureRes'+'olution:\x20f'+'32\x20=\x20unifo'+'rm.shadowA'+'tlasParams'+'.x;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20shadow'+'EdgePixels'+':\x20f32\x20=\x20un'+'iform.shad'+'owAtlasPar'+'ams.y;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20CLUSTER_C'+'OOKIES\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20coo'+'kie\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(light.'+'cookieInte'+'nsity\x20>\x200.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20decod'+'eClusterLi'+'ghtCookieD'+'ata(light)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(lig'+'ht.isSpot)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'!!!!!!!!!!'+'!\x20TEXTURE_'+'PASS\x20likel'+'y\x20needs\x20sa'+'mpler.\x20Ass'+'uming\x20cook'+'ieAtlasTex'+'tureSample'+'r\x20exists.\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20cookie'+'Attenuatio'+'n\x20=\x20getCoo'+'kie2DClust'+'ered(cooki'+'eAtlasText'+'ure,\x20cooki'+'eAtlasText'+'ureSampler'+',\x20lightPro'+'jectionMat'+'rix,\x20vPosi'+'tionW,\x20lig')+('ht.cookieI'+'ntensity,\x20'+'light.cook'+'ieChannelM'+'ask);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x20el'+'se\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20!!!!!!!!'+'!!!\x20TEXTUR'+'E_PASS\x20lik'+'ely\x20needs\x20'+'sampler.\x20A'+'ssuming\x20co'+'okieAtlasT'+'extureSamp'+'ler\x20exists'+'.\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20cook'+'ieAttenuat'+'ion\x20=\x20getC'+'ookieCubeC'+'lustered(c'+'ookieAtlas'+'Texture,\x20c'+'ookieAtlas'+'TextureSam'+'pler,\x20ligh'+'tDirW,\x20lig'+'ht.cookieI'+'ntensity,\x20'+'light.cook'+'ieChannelM'+'ask,\x20shado'+'wTextureRe'+'solution,\x20'+'shadowEdge'+'Pixels,\x20li'+'ght.omniAt'+'lasViewpor'+'t);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20CLUSTER_'+'SHADOWS\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20sh'+'adow\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20if\x20(light'+'.shadowInt'+'ensity\x20>\x200'+'.0)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20deco'+'deClusterL'+'ightShadow'+'Data(light'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20sh'+'adowParams'+':\x20vec4f\x20=\x20'+'vec4f(shad'+'owTextureR'+'esolution,'+'\x20light.sha'+'dowNormalB'+'ias,\x20light'+'.shadowBia'+'s,\x201.0\x20/\x20l'+'ight.range'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(li'+'ght.isSpot'+')\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20spot\x20sha'+'dow\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20shadowCo'+'ord:\x20vec3f'+'\x20=\x20getShad'+'owCoordPer'+'spZbufferN'+'ormalOffse'+'t(lightPro'+'jectionMat')+('rix,\x20shado'+'wParams,\x20g'+'eometricNo'+'rmal);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20!!!!!'+'!!!!!!\x20SHA'+'DOWMAP_PAS'+'S\x20needs\x20te'+'xture\x20and\x20'+'sampler_co'+'mparison.\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20!!!'+'!!!!!!!!\x20S'+'hadow\x20func'+'tions\x20need'+'\x20update\x20fo'+'r\x20WGSL\x20tex'+'tureSample'+'Compare\x20et'+'c.\x20Assumin'+'g\x20these\x20ar'+'e\x20handled\x20'+'in\x20include'+'s.\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(C'+'LUSTER_SHA'+'DOW_TYPE_P'+'CF1)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20sha'+'dow:\x20f32\x20='+'\x20getShadow'+'SpotCluste'+'redPCF1(sh'+'adowAtlasT'+'exture,\x20sh'+'adowAtlasT'+'extureSamp'+'ler,\x20shado'+'wCoord,\x20sh'+'adowParams'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'if\x20defined'+'(CLUSTER_S'+'HADOW_TYPE'+'_PCF3)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20s'+'hadow:\x20f32'+'\x20=\x20getShad'+'owSpotClus'+'teredPCF3('+'shadowAtla'+'sTexture,\x20'+'shadowAtla'+'sTextureSa'+'mpler,\x20sha'+'dowCoord,\x20'+'shadowPara'+'ms);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'elif\x20defin'+'ed(CLUSTER'+'_SHADOW_TY'+'PE_PCF5)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20shadow:\x20f'+'32\x20=\x20getSh'+'adowSpotCl'+'usteredPCF'+'5(shadowAt'+'lasTexture'+',\x20shadowAt'+'lasTexture'+'Sampler,\x20s'+'hadowCoord'+',\x20shadowPa'+'rams);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#elif\x20def'+'ined(CLUST'+'ER_SHADOW_'+'TYPE_PCSS)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l')+('et\x20shadow:'+'\x20f32\x20=\x20get'+'ShadowSpot'+'ClusteredP'+'CSS(shadow'+'AtlasTextu'+'re,\x20shadow'+'AtlasTextu'+'reSampler,'+'\x20shadowCoo'+'rd,\x20shadow'+'Params);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20fallof'+'fAttenuati'+'on\x20=\x20fallo'+'ffAttenuat'+'ion\x20*\x20mix('+'1.0,\x20shado'+'w,\x20light.s'+'hadowInten'+'sity);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20omni\x20'+'shadow\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20dir:\x20'+'vec3f\x20=\x20no'+'rmalOffset'+'PointShado'+'w(shadowPa'+'rams,\x20ligh'+'t.position'+',\x20lightDir'+'W,\x20lightDi'+'rNormW,\x20ge'+'ometricNor'+'mal);\x20\x20//\x20'+'normalBias'+'\x20adjusted\x20'+'for\x20distan'+'ce\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20!!!!!!!!!'+'!!\x20SHADOWM'+'AP_PASS\x20ne'+'eds\x20textur'+'e\x20and\x20samp'+'ler_compar'+'ison.\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20!!!!!!!'+'!!!!\x20Shado'+'w\x20function'+'s\x20need\x20upd'+'ate\x20for\x20WG'+'SL\x20texture'+'SampleComp'+'are\x20etc.\x20A'+'ssuming\x20th'+'ese\x20are\x20ha'+'ndled\x20in\x20i'+'ncludes.\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(CLUST'+'ER_SHADOW_'+'TYPE_PCF1)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20shadow:'+'\x20f32\x20=\x20get'+'ShadowOmni'+'ClusteredP'+'CF1(shadow'+'AtlasTextu'+'re,\x20shadow'+'AtlasTextu'+'reSampler,'+'\x20shadowPar'+'ams,\x20light'+'.omniAtlas'+'Viewport,\x20'+'shadowEdge'+'Pixels,\x20di'+'r);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lif\x20define'+'d(CLUSTER_'+'SHADOW_TYP'+'E_PCF3)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'shadow:\x20f3'+'2\x20=\x20getSha'+'dowOmniClu'+'steredPCF3'+'(shadowAtl'+'asTexture,'+'\x20shadowAtl'+'asTextureS'+'ampler,\x20sh'+'adowParams'+',\x20light.om'+'niAtlasVie'+'wport,\x20sha'+'dowEdgePix'+'els,\x20dir);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#elif'+'\x20defined(C'+'LUSTER_SHA'+'DOW_TYPE_P'+'CF5)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20sha'+'dow:\x20f32\x20='+'\x20getShadow'+'OmniCluste'+'redPCF5(sh'+'adowAtlasT'+'exture,\x20sh'+'adowAtlasT'+'extureSamp'+'ler,\x20shado'+'wParams,\x20l'+'ight.omniA'+'tlasViewpo'+'rt,\x20shadow'+'EdgePixels'+',\x20dir);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20falloff'+'Attenuatio'+'n\x20=\x20fallof'+'fAttenuati'+'on\x20*\x20mix(1'+'.0,\x20shadow'+',\x20light.sh'+'adowIntens'+'ity);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20diffuse\x20'+'/\x20specular'+'\x20/\x20clearco'+'at\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20CL'+'USTER_AREA'+'LIGHTS\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'light.shap'+'e\x20!=\x20{LIGH'+'TSHAPE_PUN'+'CTUAL})\x20{\x20'+'//\x20area\x20li'+'ght\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'area\x20light'+'\x20diffuse\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20areaDif'+'fuse:\x20vec3'+'f\x20=\x20(diffu'+'seAttenuat'+'ion\x20*\x20fall'+'offAttenua'+'tion)\x20*\x20li')+('ght.color\x20'+'*\x20cookieAt'+'tenuation;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20defined('+'LIT_SPECUL'+'AR)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20areaDi'+'ffuse\x20=\x20mi'+'x(areaDiff'+'use,\x20vec3f'+'(0.0),\x20dLT'+'CSpecFres)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20area\x20'+'light\x20diff'+'use\x20-\x20it\x20d'+'oes\x20not\x20mi'+'x\x20diffuse\x20'+'lighting\x20i'+'nto\x20specul'+'ar\x20attenua'+'tion\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dDiffuseL'+'ight\x20=\x20dDi'+'ffuseLight'+'\x20+\x20areaDif'+'fuse;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20spec'+'ular\x20and\x20c'+'lear\x20coat\x20'+'are\x20materi'+'al\x20setting'+'s\x20and\x20get\x20'+'included\x20b'+'y\x20a\x20define'+'\x20based\x20on\x20'+'the\x20materi'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20area\x20'+'light\x20spec'+'ular\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20areaL'+'ightSpecul'+'ar:\x20f32;\x20/'+'/\x20Use\x20var\x20'+'because\x20as'+'signed\x20in\x20'+'if/else\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20if\x20(l'+'ight.shape'+'\x20==\x20{LIGHT'+'SHAPE_RECT'+'})\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20areaL'+'ightSpecul'+'ar\x20=\x20getRe'+'ctLightSpe'+'cular(worl'+'dNormal,\x20v'+'iewDir);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x20els'+'e\x20if\x20(ligh'+'t.shape\x20=='+'\x20{LIGHTSHA'+'PE_DISK})\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20areaLigh'+'tSpecular\x20'+'=\x20getDiskL'+'ightSpecul'+'ar(worldNo'+'rmal,\x20view'+'Dir);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x20else\x20{'+'\x20//\x20sphere'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20areaLight'+'Specular\x20='+'\x20getSphere'+'LightSpecu')+('lar(worldN'+'ormal,\x20vie'+'wDir);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dSpecula'+'rLight\x20=\x20d'+'SpecularLi'+'ght\x20+\x20dLTC'+'SpecFres\x20*'+'\x20areaLight'+'Specular\x20*'+'\x20falloffAt'+'tenuation\x20'+'*\x20light.co'+'lor\x20*\x20cook'+'ieAttenuat'+'ion;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLEARCO'+'AT\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20are'+'a\x20light\x20sp'+'ecular\x20cle'+'ar\x20coat\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20areaLigh'+'tSpecularC'+'C:\x20f32;\x20//'+'\x20Use\x20var\x20b'+'ecause\x20ass'+'igned\x20in\x20i'+'f/else\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(light.sh'+'ape\x20==\x20{LI'+'GHTSHAPE_R'+'ECT})\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20areaLigh'+'tSpecularC'+'C\x20=\x20getRec'+'tLightSpec'+'ular(clear'+'coat_world'+'Normal,\x20vi'+'ewDir);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20if\x20(l'+'ight.shape'+'\x20==\x20{LIGHT'+'SHAPE_DISK'+'})\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'reaLightSp'+'ecularCC\x20='+'\x20getDiskLi'+'ghtSpecula'+'r(clearcoa'+'t_worldNor'+'mal,\x20viewD'+'ir);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x20els'+'e\x20{\x20//\x20sph'+'ere\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ar'+'eaLightSpe'+'cularCC\x20=\x20'+'getSphereL'+'ightSpecul'+'ar(clearco'+'at_worldNo'+'rmal,\x20view'+'Dir);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20c'+'cSpecularL'+'ight\x20=\x20ccS'+'pecularLig'+'ht\x20+\x20ccLTC'+'SpecFres\x20*'+'\x20areaLight'+'SpecularCC'+'\x20*\x20falloff'+'Attenuatio'+'n\x20*\x20light.'+'color\x20\x20*\x20c'+'ookieAtten')+('uation;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x20else\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20{\x20\x20\x20\x20//'+'\x20punctual\x20'+'light\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20punctual'+'\x20light\x20dif'+'fuse\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20p'+'unctualDif'+'fuse:\x20vec3'+'f\x20=\x20fallof'+'fAttenuati'+'on\x20*\x20light'+'.color\x20*\x20c'+'ookieAtten'+'uation;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(CLU'+'STER_AREAL'+'IGHTS)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_S'+'PECULAR)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20p'+'unctualDif'+'fuse\x20=\x20mix'+'(punctualD'+'iffuse,\x20ve'+'c3f(0.0),\x20'+'specularit'+'y);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dDi'+'ffuseLight'+'\x20=\x20dDiffus'+'eLight\x20+\x20p'+'unctualDif'+'fuse;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20spec'+'ular\x20and\x20c'+'lear\x20coat\x20'+'are\x20materi'+'al\x20setting'+'s\x20and\x20get\x20'+'included\x20b'+'y\x20a\x20define'+'\x20based\x20on\x20'+'the\x20materi'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20half'+'Dir:\x20vec3f'+'\x20=\x20normali'+'ze(-lightD'+'irNormW\x20+\x20'+'viewDir);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'specular\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR_FRESN'+'EL\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dSpecul'+'arLight\x20=\x20'+'dSpecularL'+'ight\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getLightS'+'pecular(ha'+'lfDir,\x20ref'+'lectionDir'+',\x20worldNor'+'mal,\x20viewD')+('ir,\x20lightD'+'irNormW,\x20g'+'loss,\x20tbn)'+'\x20*\x20falloff'+'Attenuatio'+'n\x20*\x20light.'+'color\x20*\x20co'+'okieAttenu'+'ation\x20*\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getFresn'+'el(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dot(view'+'Dir,\x20halfD'+'ir),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20gloss,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sp'+'ecularity\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20de'+'fined(LIT_'+'IRIDESCENC'+'E)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20,\x20iridesc'+'enceFresne'+'l,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20iridescen'+'ce_intensi'+'ty\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dSp'+'ecularLigh'+'t\x20=\x20dSpecu'+'larLight\x20+'+'\x20getLightS'+'pecular(ha'+'lfDir,\x20ref'+'lectionDir'+',\x20worldNor'+'mal,\x20viewD'+'ir,\x20lightD'+'irNormW,\x20g'+'loss,\x20tbn)'+'\x20*\x20falloff'+'Attenuatio'+'n\x20*\x20light.'+'color\x20*\x20co'+'okieAttenu'+'ation\x20*\x20sp'+'ecularity;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SPECULA'+'R_FRESNEL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccSpec'+'ularLight\x20'+'=\x20ccSpecul'+'arLight\x20+\x20'+'getLightSp'+'ecular(hal'+'fDir,\x20clea'+'rcoatRefle'+'ctionDir,\x20'+'clearcoat_'+'worldNorma'+'l,\x20viewDir'+',\x20lightDir'+'NormW,\x20cle'+'arcoat_glo'+'ss,\x20tbn)\x20*'+'\x20falloffAt')+('tenuation\x20'+'*\x20light.co'+'lor\x20*\x20cook'+'ieAttenuat'+'ion\x20*\x20getF'+'resnelCC(d'+'ot(viewDir'+',\x20halfDir)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20ccSpecu'+'larLight\x20='+'\x20ccSpecula'+'rLight\x20+\x20g'+'etLightSpe'+'cular(half'+'Dir,\x20clear'+'coatReflec'+'tionDir,\x20c'+'learcoat_w'+'orldNormal'+',\x20viewDir,'+'\x20lightDirN'+'ormW,\x20clea'+'rcoat_glos'+'s,\x20tbn)\x20*\x20'+'falloffAtt'+'enuation\x20*'+'\x20light.col'+'or\x20*\x20cooki'+'eAttenuati'+'on;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SHEEN\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sS'+'pecularLig'+'ht\x20=\x20sSpec'+'ularLight\x20'+'+\x20getLight'+'SpecularSh'+'een(halfDi'+'r,\x20worldNo'+'rmal,\x20view'+'Dir,\x20light'+'DirNormW,\x20'+'sheen_glos'+'s)\x20*\x20fallo'+'ffAttenuat'+'ion\x20*\x20ligh'+'t.color\x20*\x20'+'cookieAtte'+'nuation;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20//\x20Writ'+'e\x20to\x20globa'+'l\x20attenuat'+'ion\x20values'+'\x20(for\x20ligh'+'tmapper)\x0a\x20'+'\x20\x20\x20dAtten\x20'+'=\x20falloffA'+'ttenuation'+';\x0a\x20\x20\x20\x20dLig'+'htDirNormW'+'\x20=\x20lightDi'+'rNormW;\x0a}\x0a'+'\x0a\x0afn\x20evalu'+'ateCluster'+'Light(\x0a\x20\x20\x20'+'\x20lightInde'+'x:\x20f32,\x0a\x20\x20'+'\x20\x20worldNor'+'mal:\x20vec3f'+',\x0a\x20\x20\x20\x20view'+'Dir:\x20vec3f'+',\x0a\x20\x20\x20\x20refl'+'ectionDir:'+'\x20vec3f,\x0a#i'+'f\x20defined('+'LIT_CLEARC'+'OAT)\x0a\x20\x20\x20\x20c'+'learcoatRe'+'flectionDi'+'r:\x20vec3f,\x0a'+'#endif\x0a\x20\x20\x20')+('\x20gloss:\x20f3'+'2,\x0a\x20\x20\x20\x20spe'+'cularity:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20geometric'+'Normal:\x20ve'+'c3f,\x0a\x20\x20\x20\x20t'+'bn:\x20mat3x3'+'f,\x0a#if\x20def'+'ined(LIT_I'+'RIDESCENCE'+')\x0a\x20\x20\x20\x20irid'+'escenceFre'+'snel:\x20vec3'+'f,\x0a#endif\x0a'+'\x20\x20\x20\x20clearc'+'oat_worldN'+'ormal:\x20vec'+'3f,\x0a\x20\x20\x20\x20cl'+'earcoat_gl'+'oss:\x20f32,\x0a'+'\x20\x20\x20\x20sheen_'+'gloss:\x20f32'+',\x0a\x20\x20\x20\x20irid'+'escence_in'+'tensity:\x20f'+'32\x0a)\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x20decod'+'e\x20core\x20lig'+'ht\x20data\x20fr'+'om\x20texture'+'s\x0a\x20\x20\x20\x20var\x20'+'clusterLig'+'htData:\x20Cl'+'usterLight'+'Data;\x0a\x20\x20\x20\x20'+'decodeClus'+'terLightCo'+'re(&cluste'+'rLightData'+',\x20lightInd'+'ex);\x0a\x0a\x20\x20\x20\x20'+'//\x20evaluat'+'e\x20light\x20if'+'\x20it\x20uses\x20a'+'ccepted\x20li'+'ght\x20mask\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'CLUSTER_ME'+'SH_DYNAMIC'+'_LIGHTS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'acceptLigh'+'tMask:\x20boo'+'l\x20=\x20cluste'+'rLightData'+'.isDynamic'+';\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20accept'+'LightMask:'+'\x20bool\x20=\x20cl'+'usterLight'+'Data.isLig'+'htmapped;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20if\x20('+'acceptLigh'+'tMask)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20eva'+'luateLight'+'(\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20&clust'+'erLightDat'+'a,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20world'+'Normal,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'viewDir,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20reflectio'+'nDir,\x0a#if\x20'+'defined(LI'+'T_CLEARCOA'+'T)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20clear'+'coatReflec'+'tionDir,\x0a#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20gl'+'oss,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20spe'+'cularity,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20geometri'+'cNormal,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20tbn,\x0a#if\x20'+'defined(LI'+'T_IRIDESCE')+('NCE)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20iri'+'descenceFr'+'esnel,\x0a#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20clea'+'rcoat_worl'+'dNormal,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20clearcoat'+'_gloss,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'sheen_glos'+'s,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20iride'+'scence_int'+'ensity\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20);\x0a\x20\x20'+'\x20\x20}\x0a}\x0a\x0a\x0afn'+'\x20addCluste'+'redLights('+'\x0a\x20\x20\x20\x20world'+'Normal:\x20ve'+'c3f,\x0a\x20\x20\x20\x20v'+'iewDir:\x20ve'+'c3f,\x0a\x20\x20\x20\x20r'+'eflectionD'+'ir:\x20vec3f,'+'\x0a#if\x20defin'+'ed(LIT_CLE'+'ARCOAT)\x0a\x20\x20'+'\x20\x20clearcoa'+'tReflectio'+'nDir:\x20vec3'+'f,\x0a#endif\x0a'+'\x20\x20\x20\x20gloss:'+'\x20f32,\x0a\x20\x20\x20\x20'+'specularit'+'y:\x20vec3f,\x0a'+'\x20\x20\x20\x20geomet'+'ricNormal:'+'\x20vec3f,\x0a\x20\x20'+'\x20\x20tbn:\x20mat'+'3x3f,\x0a#if\x20'+'defined(LI'+'T_IRIDESCE'+'NCE)\x0a\x20\x20\x20\x20i'+'ridescence'+'Fresnel:\x20v'+'ec3f,\x0a#end'+'if\x0a\x20\x20\x20\x20cle'+'arcoat_wor'+'ldNormal:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20clearcoat'+'_gloss:\x20f3'+'2,\x0a\x20\x20\x20\x20she'+'en_gloss:\x20'+'f32,\x0a\x20\x20\x20\x20i'+'ridescence'+'_intensity'+':\x20f32\x0a)\x20{\x0a'+'\x0a\x20\x20\x20\x20//\x20sk'+'ip\x20lights\x20'+'if\x20no\x20ligh'+'ts\x20at\x20all\x0a'+'\x20\x20\x20\x20if\x20(un'+'iform.clus'+'terSkip\x20>\x20'+'0.5)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20wor'+'ld\x20space\x20p'+'osition\x20to'+'\x203d\x20intege'+'r\x20cell\x20cor'+'dinates\x20in'+'\x20the\x20clust'+'er\x20structu'+'re\x0a\x20\x20\x20\x20let'+'\x20cellCoord'+'s:\x20vec3f\x20='+'\x20floor((vP'+'ositionW\x20-'+'\x20uniform.c'+'lusterBoun'+'dsMin)\x20*\x20u'+'niform.clu'+'sterCellsC'+'ountByBoun'+'dsSize);\x0a\x0a'+'\x20\x20\x20\x20//\x20no\x20'+'lighting\x20w'+'hen\x20cell\x20c'+'oordinate\x20'+'is\x20out\x20of\x20'+'range\x0a\x20\x20\x20\x20'+'if\x20(!(any('+'cellCoords')+('\x20<\x20vec3f(0'+'.0))\x20||\x20an'+'y(cellCoor'+'ds\x20>=\x20unif'+'orm.cluste'+'rCellsMax)'+'))\x20{\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20cel'+'l\x20index\x20(m'+'apping\x20fro'+'m\x203d\x20cell\x20'+'coordinate'+'s\x20to\x20linea'+'r\x20memory)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20cellInde'+'x:\x20f32\x20=\x20d'+'ot(uniform'+'.clusterCe'+'llsDot,\x20ce'+'llCoords);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20convert'+'\x20cell\x20inde'+'x\x20to\x20uv\x20co'+'ordinates\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20clusterV'+':\x20f32\x20=\x20fl'+'oor(cellIn'+'dex\x20*\x20unif'+'orm.cluste'+'rTextureSi'+'ze.y);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20c'+'lusterU:\x20f'+'32\x20=\x20cellI'+'ndex\x20-\x20(cl'+'usterV\x20*\x20u'+'niform.clu'+'sterTextur'+'eSize.x);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20loop\x20ove'+'r\x20maximum\x20'+'number\x20of\x20'+'light\x20cell'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'for\x20(var\x20l'+'ightCellIn'+'dex:\x20i32\x20='+'\x200;\x20lightC'+'ellIndex\x20<'+'\x20uniform.c'+'lusterMaxC'+'ells;\x20ligh'+'tCellIndex'+'\x20=\x20lightCe'+'llIndex\x20+\x20'+'1)\x20{\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20using\x20a\x20s'+'ingle\x20chan'+'nel\x20textur'+'e\x20with\x20dat'+'a\x20in\x20red\x20c'+'hannel\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20lightIn'+'dexPacked:'+'\x20f32\x20=\x20tex'+'tureLoad(c'+'lusterWorl'+'dTexture,\x20'+'vec2<i32>('+'i32(cluste'+'rU)\x20+\x20ligh'+'tCellIndex'+',\x20i32(clus'+'terV)),\x200)'+'.r;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(lightInde'+'xPacked\x20<='+'\x200.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20break;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ev'+'aluateClus'+'terLight(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ligh'+'tIndexPack'+'ed\x20*\x20255.0'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20wo'+'rldNormal,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20vie'+'wDir,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20reflecti'+'onDir,\x0a#if'+'\x20defined(L'+'IT_CLEARCO'+'AT)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'clearcoatR'+'eflectionD'+'ir,\x0a#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20glo'+'ss,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'specularit'+'y,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'eometricNo'+'rmal,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20tbn,\x0a#if'+'\x20defined(L'+'IT_IRIDESC'+'ENCE)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20iridesce'+'nceFresnel'+',\x0a#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20clear'+'coat_world'+'Normal,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20clearc'+'oat_gloss,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20she'+'en_gloss,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20irid'+'escence_in'+'tensity\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20}\x0a}'),SM='\x0afn\x20combin'+'eColor(alb'+'edo:\x20vec3f'+',\x20sheenSpe'+'cularity:\x20'+'vec3f,\x20cle'+'arcoatSpec'+'ularity:\x20f'+'32)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20v'+'ar\x20ret:\x20ve'+'c3f\x20=\x20vec3'+'f(0.0);\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_OLD_AM'+'BIENT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20ret\x20=\x20'+'ret\x20+\x20((dD'+'iffuseLigh'+'t\x20-\x20unifor'+'m.light_gl'+'obalAmbien'+'t)\x20*\x20albed'+'o\x20+\x20unifor'+'m.material'+'_ambient\x20*'+'\x20uniform.l'+'ight_globa'+'lAmbient);'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'et\x20=\x20ret\x20+'+'\x20(albedo\x20*'+'\x20dDiffuseL'+'ight);\x0a\x20\x20\x20'+'\x20#endif\x20//'+'\x20LIT_OLD_A'+'MBIENT\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'et\x20=\x20ret\x20+'+'\x20dSpecular'+'Light;\x0a\x20\x20\x20'+'\x20#endif\x20//'+'\x20LIT_SPECU'+'LAR\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_R'+'EFLECTIONS'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'et\x20=\x20ret\x20+'+'\x20(dReflect'+'ion.rgb\x20*\x20'+'dReflectio'+'n.a);\x0a\x20\x20\x20\x20'+'#endif\x20//\x20'+'LIT_REFLEC'+'TIONS\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SHEEN\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'sheenScali'+'ng:\x20f32\x20=\x20'+'1.0\x20-\x20max('+'max(sheenS'+'pecularity'+'.r,\x20sheenS'+'pecularity'+'.g),\x20sheen'+'Specularit'+'y.b)\x20*\x200.1'+'57;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20ret\x20=\x20re'+'t\x20*\x20sheenS'+'caling\x20+\x20('+'sSpecularL'+'ight\x20+\x20sRe'+'flection.r'+'gb)\x20*\x20shee'+'nSpeculari'+'ty;\x0a\x20\x20\x20\x20#e'+'ndif\x20//\x20LI'+'T_SHEEN\x0a\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLEARCO'+'AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20clear'+'CoatScalin'+'g:\x20f32\x20=\x201'+'.0\x20-\x20ccFre'+'snel\x20*\x20cle'+'arcoatSpec'+'ularity;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'\x20=\x20ret\x20*\x20c'+'learCoatSc'+'aling\x20+\x20(c'+'cSpecularL'+'ight\x20+\x20ccR'+'eflection)'+('\x20*\x20clearco'+'atSpecular'+'ity;\x0a\x20\x20\x20\x20#'+'endif\x20//\x20L'+'IT_CLEARCO'+'AT\x0a\x0a\x20\x20\x20\x20re'+'turn\x20ret;\x0a'+'}\x0a'),yM='\x0a\x20\x20\x20\x20varyi'+'ng\x20uv0:\x20ve'+'c2f;\x0a\x0a\x20\x20\x20\x20'+'var\x20blitTe'+'xture:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20blitText'+'ureSampler'+'\x20:\x20sampler'+';\x0a\x0a\x20\x20\x20\x20@fr'+'agment\x0a\x20\x20\x20'+'\x20fn\x20fragme'+'ntMain(inp'+'ut\x20:\x20Fragm'+'entInput)\x20'+'->\x20Fragmen'+'tOutput\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20output:\x20'+'FragmentOu'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.color\x20=\x20t'+'extureSamp'+'le(blitTex'+'ture,\x20blit'+'TextureSam'+'pler,\x20inpu'+'t.uv0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20output;'+'\x0a\x20\x20\x20\x20}\x0a',vM='\x0a\x20\x20\x20\x20varyi'+'ng\x20uv0:\x20ve'+'c2f;\x0a\x20\x20\x20\x20u'+'niform\x20inv'+'ViewProj:\x20'+'mat4x4<f32'+'>;\x0a\x20\x20\x20\x20var'+'\x20blitTextu'+'re:\x20textur'+'e_cube<f32'+'>;\x0a\x20\x20\x20\x20var'+'\x20blitTextu'+'reSampler\x20'+':\x20sampler;'+'\x0a\x0a\x20\x20\x20\x20@fra'+'gment\x0a\x20\x20\x20\x20'+'fn\x20fragmen'+'tMain(inpu'+'t\x20:\x20Fragme'+'ntInput)\x20-'+'>\x20Fragment'+'Output\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20output:\x20F'+'ragmentOut'+'put;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20pro'+'jPos\x20=\x20vec'+'4f(input.u'+'v0\x20*\x202.0\x20-'+'\x201.0,\x200.5,'+'\x201.0);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20w'+'orldPos\x20=\x20'+'uniform.in'+'vViewProj\x20'+'*\x20projPos;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20textur'+'eSample(bl'+'itTexture,'+'\x20blitTextu'+'reSampler,'+'\x20worldPos.'+'xyz);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20output;\x0a\x20'+'\x20\x20\x20}\x0a',xM='\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_position'+':\x20vec2f;\x0a\x20'+'\x20\x20\x20varying'+'\x20uv0:\x20vec2'+'f;\x0a\x0a\x20\x20\x20\x20@v'+'ertex\x0a\x20\x20\x20\x20'+'fn\x20vertexM'+'ain(input:'+'\x20VertexInp'+'ut)\x20->\x20Ver'+'texOutput\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20output'+':\x20VertexOu'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.position\x20'+'=\x20vec4f(in'+'put.vertex'+'_position,'+'\x200.5,\x201.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.uv0'+'\x20=\x20input.v'+'ertex_posi'+'tion\x20*\x200.5'+'\x20+\x20vec2f(0'+'.5,\x200.5);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.uv0.y'+'\x20=\x201.0\x20-\x20o'+'utput.uv0.'+'y;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a\x20\x20\x20\x20'+'}\x0a',TM='\x0a\x0a#if\x20LIT_'+'CUBEMAP_PR'+'OJECTION\x20='+'=\x20BOX\x0a\x20\x20\x20\x20'+'uniform\x20en'+'vBoxMin:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'uniform\x20en'+'vBoxMax:\x20v'+'ec3f;\x0a#end'+'if\x0a\x0afn\x20cub'+'eMapProjec'+'t(nrdir:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIT_'+'CUBEMAP_PR'+'OJECTION\x20='+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20cubeMapR'+'otate(nrdi'+'r);\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20LIT_CU'+'BEMAP_PROJ'+'ECTION\x20==\x20'+'BOX\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20nrd'+'ir_rotated'+':\x20vec3f\x20=\x20'+'cubeMapRot'+'ate(nrdir)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20rbmax'+':\x20vec3f\x20=\x20'+'(uniform.e'+'nvBoxMax\x20-'+'\x20vPosition'+'W)\x20/\x20nrdir'+'_rotated;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20rbmin:\x20v'+'ec3f\x20=\x20(un'+'iform.envB'+'oxMin\x20-\x20vP'+'ositionW)\x20'+'/\x20nrdir_ro'+'tated;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'rbminmax:\x20'+'vec3f\x20=\x20se'+'lect(rbmin'+',\x20rbmax,\x20n'+'rdir_rotat'+'ed\x20>\x20vec3f'+'(0.0));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'fa:\x20f32\x20=\x20'+'min(min(rb'+'minmax.x,\x20'+'rbminmax.y'+'),\x20rbminma'+'x.z);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20p'+'osonbox:\x20v'+'ec3f\x20=\x20vPo'+'sitionW\x20+\x20'+'nrdir_rota'+'ted\x20*\x20fa;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20envBoxPo'+'s:\x20vec3f\x20='+'\x20(uniform.'+'envBoxMin\x20'+'+\x20uniform.'+'envBoxMax)'+'\x20*\x200.5;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20normali'+'ze(posonbo'+'x\x20-\x20envBox'+'Pos);\x0a\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a',wM='\x0a#ifdef\x20CU'+'BEMAP_ROTA'+'TION\x0aunifo'+'rm\x20cubeMap'+'RotationMa'+'trix:\x20mat3'+'x3f;\x0a#endi'+'f\x0a\x0afn\x20cube'+'MapRotate('+'refDir:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a#ifd'+'ef\x20CUBEMAP'+'_ROTATION\x0a'+'\x20\x20\x20\x20return'+'\x20refDir\x20*\x20'+'uniform.cu'+'beMapRotat'+'ionMatrix;'+'\x0a#else\x0a\x20\x20\x20'+'\x20return\x20re'+'fDir;\x0a#end'+'if\x0a}\x0a',EM='\x0a#ifdef\x20DE'+'BUG_ALBEDO'+'_PASS\x0aoutp'+'ut.color\x20='+'\x20vec4(gamm'+'aCorrectOu'+'tput(dAlbe'+'do),\x201.0);'+'\x0a#endif\x0a\x0a#'+'ifdef\x20DEBU'+'G_UV0_PASS'+'\x0aoutput.co'+'lor\x20=\x20vec4'+'f(litArgs_'+'albedo\x20,\x201'+'.0);\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'DEBUG_WORL'+'D_NORMAL_P'+'ASS\x0aoutput'+'.color\x20=\x20v'+'ec4f(litAr'+'gs_worldNo'+'rmal\x20*\x200.5'+'\x20+\x200.5,\x201.'+'0);\x0a#endif'+'\x0a\x0a#ifdef\x20D'+'EBUG_OPACI'+'TY_PASS\x0aou'+'tput.color'+'\x20=\x20vec4f(v'+'ec3f(litAr'+'gs_opacity'+')\x20,\x201.0);\x0a'+'#endif\x0a\x0a#i'+'fdef\x20DEBUG'+'_SPECULARI'+'TY_PASS\x0aou'+'tput.color'+'\x20=\x20vec4f(l'+'itArgs_spe'+'cularity,\x20'+'1.0);\x0a#end'+'if\x0a\x0a#ifdef'+'\x20DEBUG_GLO'+'SS_PASS\x0aou'+'tput.color'+'\x20=\x20vec4f(v'+'ec3f(litAr'+'gs_gloss)\x20'+',\x201.0);\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20DEBUG_M'+'ETALNESS_P'+'ASS\x0aoutput'+'.color\x20=\x20v'+'ec4f(vec3f'+'(litArgs_m'+'etalness)\x20'+',\x201.0);\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20DEBUG_A'+'O_PASS\x0aout'+'put.color\x20'+'=\x20vec4f(ve'+'c3f(litArg'+'s_ao)\x20,\x201.'+'0);\x0a#endif'+'\x0a\x0a#ifdef\x20D'+'EBUG_EMISS'+'ION_PASS\x0ao'+'utput.colo'+'r\x20=\x20vec4f('+'gammaCorre'+'ctOutput(l'+'itArgs_emi'+'ssion),\x201.'+'0);\x0a#endif'+'\x0a',bM='\x0a#ifdef\x20DE'+'BUG_LIGHTI'+'NG_PASS\x0a\x20\x20'+'\x20\x20litArgs_'+'albedo\x20=\x20v'+'ec3f(0.5);'+'\x0a#endif\x0a\x0a#'+'ifdef\x20DEBU'+'G_UV0_PASS'+'\x0a#ifdef\x20VA'+'RYING_VUV0'+'\x0a\x20\x20\x20\x20litAr'+'gs_albedo\x20'+'=\x20vec3f(vU'+'v0,\x200.0);\x0a'+'#else\x0a\x20\x20\x20\x20'+'litArgs_al'+'bedo\x20=\x20vec'+'3f(0.0);\x0a#'+'endif\x0a#end'+'if\x0a',AM='\x0a\x0a#ifndef\x20'+'_DECODE_IN'+'CLUDED_\x0a#d'+'efine\x20_DEC'+'ODE_INCLUD'+'ED_\x0a\x0afn\x20de'+'codeLinear'+'(raw:\x20vec4'+'f)\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20re'+'turn\x20raw.r'+'gb;\x0a}\x0a\x0afn\x20'+'decodeGamm'+'aFloat(raw'+':\x20f32)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'return\x20pow'+'(raw,\x202.2)'+';\x0a}\x0a\x0afn\x20de'+'codeGamma3'+'(raw:\x20vec3'+'f)\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20re'+'turn\x20pow(r'+'aw,\x20vec3f('+'2.2));\x0a}\x0a\x0a'+'fn\x20decodeG'+'amma(raw:\x20'+'vec4f)\x20->\x20'+'vec3f\x20{\x0a\x20\x20'+'\x20\x20return\x20p'+'ow(raw.xyz'+',\x20vec3f(2.'+'2));\x0a}\x0a\x0afn'+'\x20decodeRGB'+'M(raw:\x20vec'+'4f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20l'+'et\x20color\x20='+'\x20(8.0\x20*\x20ra'+'w.a)\x20*\x20raw'+'.rgb;\x0a\x20\x20\x20\x20'+'return\x20col'+'or\x20*\x20color'+';\x0a}\x0a\x0afn\x20de'+'codeRGBP(r'+'aw:\x20vec4f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'color\x20=\x20ra'+'w.rgb\x20*\x20(-'+'raw.a\x20*\x207.'+'0\x20+\x208.0);\x0a'+'\x20\x20\x20\x20return'+'\x20color\x20*\x20c'+'olor;\x0a}\x0a\x0af'+'n\x20decodeRG'+'BE(raw:\x20ve'+'c4f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'return\x20sel'+'ect(vec3f('+'0.0),\x20raw.'+'xyz\x20*\x20pow('+'2.0,\x20raw.w'+'\x20*\x20255.0\x20-'+'\x20128.0),\x20r'+'aw.a\x20!=\x200.'+'0);\x0a}\x0a\x0afn\x20'+'passThroug'+'h(raw:\x20vec'+'4f)\x20->\x20vec'+'4f\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20raw;'+'\x0a}\x0a\x0afn\x20unp'+'ackNormalX'+'YZ(nmap:\x20v'+'ec4f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20return\x20nm'+'ap.xyz\x20*\x202'+'.0\x20-\x201.0;\x0a'+'}\x0a\x0afn\x20unpa'+'ckNormalXY'+'(nmap:\x20vec'+'4f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20v'+'ar\x20xy\x20=\x20nm'+'ap.wy\x20*\x202.'+'0\x20-\x201.0;\x0a\x20'+'\x20\x20\x20return\x20'+'vec3f(xy,\x20'+'sqrt(1.0\x20-'+'\x20clamp(dot'+'(xy,\x20xy),\x20'+'0.0,\x201.0))'+');\x0a}\x0a\x0a#end'+'if\x0a',CM='\x0a\x0a#ifndef\x20'+'_DETAILMOD'+'ES_INCLUDE'+'D_\x0a#define'+'\x20_DETAILMO'+'DES_INCLUD'+'ED_\x0a\x0afn\x20de'+'tailMode_m'+'ul(c1:\x20vec'+'3f,\x20c2:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'return\x20c1\x20'+'*\x20c2;\x0a}\x0a\x0af'+'n\x20detailMo'+'de_add(c1:'+'\x20vec3f,\x20c2'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20c1\x20+\x20c2;\x0a'+'}\x0a\x0a//\x20http'+'s://en.wik'+'ipedia.org'+'/wiki/Blen'+'d_modes#Sc'+'reen\x0afn\x20de'+'tailMode_s'+'creen(c1:\x20'+'vec3f,\x20c2:'+'\x20vec3f)\x20->'+'\x20vec3f\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'1.0\x20-\x20(1.0'+'\x20-\x20c1)*(1.'+'0\x20-\x20c2);\x0a}'+'\x0a\x0a//\x20https'+'://en.wiki'+'pedia.org/'+'wiki/Blend'+'_modes#Ove'+'rlay\x0afn\x20de'+'tailMode_o'+'verlay(c1:'+'\x20vec3f,\x20c2'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20mix(1.0\x20-'+'\x202.0\x20*\x20(1.'+'0\x20-\x20c1)*(1'+'.0\x20-\x20c2),\x20'+'2.0\x20*\x20c1\x20*'+'\x20c2,\x20step('+'c1,\x20vec3f('+'0.5)));\x0a}\x0a'+'\x0afn\x20detail'+'Mode_min(c'+'1:\x20vec3f,\x20'+'c2:\x20vec3f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20min(c1,'+'\x20c2);\x0a}\x0a\x0af'+'n\x20detailMo'+'de_max(c1:'+'\x20vec3f,\x20c2'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20max(c1,\x20c'+'2);\x0a}\x0a\x0a#en'+'dif\x0a',PM='\x0auniform\x20m'+'aterial_di'+'ffuse:\x20vec'+'3f;\x0a\x0a#ifde'+'f\x20STD_DIFF'+'USEDETAIL_'+'TEXTURE\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22detailMo'+'desPS\x22\x0a#en'+'dif\x0a\x0afn\x20ge'+'tAlbedo()\x20'+'{\x0a\x20\x20\x20\x20dAlb'+'edo\x20=\x20unif'+'orm.materi'+'al_diffuse'+'.rgb;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_DIFFUSE_'+'TEXTURE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'albedoText'+'ure:\x20vec3f'+'\x20=\x20{STD_DI'+'FFUSE_TEXT'+'URE_DECODE'+'}(textureS'+'ampleBias('+'{STD_DIFFU'+'SE_TEXTURE'+'_NAME},\x20{S'+'TD_DIFFUSE'+'_TEXTURE_N'+'AME}Sample'+'r,\x20{STD_DI'+'FFUSE_TEXT'+'URE_UV},\x20u'+'niform.tex'+'tureBias))'+'.{STD_DIFF'+'USE_TEXTUR'+'E_CHANNEL}'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_DIFFUSED'+'ETAIL_TEXT'+'URE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'albedoDeta'+'il:\x20vec3f\x20'+'=\x20{STD_DIF'+'FUSEDETAIL'+'_TEXTURE_D'+'ECODE}(tex'+'tureSample'+'Bias({STD_'+'DIFFUSEDET'+'AIL_TEXTUR'+'E_NAME},\x20{'+'STD_DIFFUS'+'EDETAIL_TE'+'XTURE_NAME'+'}Sampler,\x20'+'{STD_DIFFU'+'SEDETAIL_T'+'EXTURE_UV}'+',\x20uniform.'+'textureBia'+'s)).{STD_D'+'IFFUSEDETA'+'IL_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20albedoT'+'exture\x20=\x20d'+'etailMode_'+'{STD_DIFFU'+'SEDETAIL_D'+'ETAILMODE}'+'(albedoTex'+'ture,\x20albe'+'doDetail);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dAlbe'+'do\x20=\x20dAlbe'+'do\x20*\x20albed'+'oTexture;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_DIF'+'FUSE_VERTE'+'X\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'dAlbedo\x20=\x20'+'dAlbedo\x20*\x20'+'gammaCorre'+'ctInputVec'+'3(saturate'+'3(vVertexC'+'olor.{STD_'+('DIFFUSE_VE'+'RTEX_CHANN'+'EL}));\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'),MM='\x0auniform\x20m'+'aterial_em'+'issive:\x20ve'+'c3f;\x0aunifo'+'rm\x20materia'+'l_emissive'+'Intensity:'+'\x20f32;\x0a\x0afn\x20'+'getEmissio'+'n()\x20{\x0a\x20\x20\x20\x20'+'dEmission\x20'+'=\x20uniform.'+'material_e'+'missive\x20*\x20'+'uniform.ma'+'terial_emi'+'ssiveInten'+'sity;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_EMISSIVE'+'_TEXTURE\x0a\x20'+'\x20\x20\x20dEmissi'+'on\x20*=\x20{STD'+'_EMISSIVE_'+'TEXTURE_DE'+'CODE}(text'+'ureSampleB'+'ias({STD_E'+'MISSIVE_TE'+'XTURE_NAME'+'},\x20{STD_EM'+'ISSIVE_TEX'+'TURE_NAME}'+'Sampler,\x20{'+'STD_EMISSI'+'VE_TEXTURE'+'_UV},\x20unif'+'orm.textur'+'eBias)).{S'+'TD_EMISSIV'+'E_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_EMI'+'SSIVE_VERT'+'EX\x0a\x20\x20\x20\x20dEm'+'ission\x20=\x20d'+'Emission\x20*'+'\x20gammaCorr'+'ectInputVe'+'c3(saturat'+'e3(vVertex'+'Color.{STD'+'_EMISSIVE_'+'VERTEX_CHA'+'NNEL}));\x0a\x20'+'\x20\x20\x20#endif\x0a'+'}\x0a',DM='\x0afn\x20encode'+'Linear(sou'+'rce:\x20vec3f'+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20vec4f('+'source,\x201.'+'0);\x0a}\x0a\x0afn\x20'+'encodeGamm'+'a(source:\x20'+'vec3f)\x20->\x20'+'vec4f\x20{\x0a\x20\x20'+'\x20\x20return\x20v'+'ec4f(pow(s'+'ource\x20+\x20ve'+'c3f(0.0000'+'001),\x20vec3'+'f(1.0\x20/\x202.'+'2)),\x201.0);'+'\x0a}\x0a\x0afn\x20enc'+'odeRGBM(so'+'urce:\x20vec3'+'f)\x20->\x20vec4'+'f\x20{\x0a\x20\x20\x20\x20va'+'r\x20color:\x20v'+'ec3f\x20=\x20pow'+'(source,\x20v'+'ec3f(0.5))'+';\x0a\x20\x20\x20\x20colo'+'r\x20*=\x201.0\x20/'+'\x208.0;\x0a\x0a\x20\x20\x20'+'\x20var\x20a:\x20f3'+'2\x20=\x20satura'+'te(max(max'+'(color.r,\x20'+'color.g),\x20'+'max(color.'+'b,\x201.0\x20/\x202'+'55.0)));\x0a\x20'+'\x20\x20\x20a\x20=\x20cei'+'l(a\x20*\x20255.'+'0)\x20/\x20255.0'+';\x0a\x0a\x20\x20\x20\x20col'+'or\x20/=\x20a;\x0a\x20'+'\x20\x20\x20return\x20'+'vec4f(colo'+'r,\x20a);\x0a}\x0a\x0a'+'fn\x20encodeR'+'GBP(source'+':\x20vec3f)\x20-'+'>\x20vec4f\x20{\x0a'+'\x20\x20\x20\x20//\x20con'+'vert\x20incom'+'ing\x20linear'+'\x20to\x20gamma('+'ish)\x0a\x20\x20\x20\x20v'+'ar\x20gamma:\x20'+'vec3f\x20=\x20po'+'w(source,\x20'+'vec3f(0.5)'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20calculate'+'\x20the\x20maxim'+'um\x20compone'+'nt\x20clamped'+'\x20to\x201..8\x0a\x20'+'\x20\x20\x20var\x20max'+'Val:\x20f32\x20='+'\x20min(8.0,\x20'+'max(1.0,\x20m'+'ax(gamma.x'+',\x20max(gamm'+'a.y,\x20gamma'+'.z))));\x0a\x0a\x20'+'\x20\x20\x20//\x20calc'+'ulate\x20stor'+'age\x20factor'+'\x0a\x20\x20\x20\x20var\x20v'+':\x20f32\x20=\x201.'+'0\x20-\x20((maxV'+'al\x20-\x201.0)\x20'+'/\x207.0);\x0a\x0a\x20'+'\x20\x20\x20//\x20roun'+'d\x20the\x20valu'+'e\x20for\x20stor'+'age\x20in\x208bi'+'t\x20channel\x0a'+'\x20\x20\x20\x20v\x20=\x20ce'+'il(v\x20*\x20255'+'.0)\x20/\x20255.'+'0;\x0a\x0a\x20\x20\x20\x20re'+'turn\x20vec4f'+'(gamma\x20/\x20('+'-v\x20*\x207.0\x20+'+'\x208.0),\x20v);'+'\x0a}\x0a\x0afn\x20enc'+'odeRGBE(so'+'urce:\x20vec3'+'f)\x20->\x20vec4'+'f\x20{\x0a\x20\x20\x20\x20va'+('r\x20maxVal:\x20'+'f32\x20=\x20max('+'source.x,\x20'+'max(source'+'.y,\x20source'+'.z));\x0a\x20\x20\x20\x20'+'if\x20(maxVal'+'\x20<\x201e-32)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20vec'+'4f(0.0,\x200.'+'0,\x200.0,\x200.'+'0);\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20e'+':\x20f32\x20=\x20ce'+'il(log2(ma'+'xVal));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20vec4f(s'+'ource\x20/\x20po'+'w(2.0,\x20e),'+'\x20(e\x20+\x20128.'+'0)\x20/\x20255.0'+');\x0a\x20\x20\x20\x20}\x0a}'+'\x0a'),IM='\x0a\x20\x20\x20\x20var\x20f'+'inalRgb:\x20v'+'ec3f\x20=\x20com'+'bineColor('+'litArgs_al'+'bedo,\x20litA'+'rgs_sheen_'+'specularit'+'y,\x20litArgs'+'_clearcoat'+'_speculari'+'ty);\x0a\x0a\x20\x20\x20\x20'+'finalRgb\x20='+'\x20finalRgb\x20'+'+\x20litArgs_'+'emission;\x0a'+'\x20\x20\x20\x20finalR'+'gb\x20=\x20addFo'+'g(finalRgb'+');\x0a\x20\x20\x20\x20fin'+'alRgb\x20=\x20to'+'neMap(fina'+'lRgb);\x0a\x20\x20\x20'+'\x20finalRgb\x20'+'=\x20gammaCor'+'rectOutput'+'(finalRgb)'+';\x0a\x20\x20\x20\x20outp'+'ut.color\x20='+'\x20vec4f(fin'+'alRgb,\x20out'+'put.color.'+'a);\x0a',LM='\x0a\x0a#ifndef\x20'+'_ENVATLAS_'+'INCLUDED_\x0a'+'#define\x20_E'+'NVATLAS_IN'+'CLUDED_\x0a\x0a/'+'/\x20the\x20envA'+'tlas\x20is\x20fi'+'xed\x20at\x20512'+'\x20pixels.\x20e'+'very\x20equir'+'ect\x20is\x20gen'+'erated\x20wit'+'h\x201\x20pixel\x20'+'boundary.\x0a'+'const\x20atla'+'sSize\x20:\x20f3'+'2\x20=\x20512.0;'+'\x0aconst\x20sea'+'mSize\x20:\x20f3'+'2\x20=\x201.0\x20/\x20'+'atlasSize;'+'\x0a\x0a//\x20map\x20a'+'\x20normalize'+'d\x20equirect'+'\x20UV\x20to\x20the'+'\x20given\x20rec'+'tangle\x20(ta'+'king\x201\x20pix'+'el\x20seam\x20in'+'to\x20account'+').\x0afn\x20mapU'+'v(uv\x20:\x20vec'+'2f,\x20rect\x20:'+'\x20vec4f)\x20->'+'\x20vec2f\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'vec2f(mix('+'rect.x\x20+\x20s'+'eamSize,\x20r'+'ect.x\x20+\x20re'+'ct.z\x20-\x20sea'+'mSize,\x20uv.'+'x),\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20mix(rect.'+'y\x20+\x20seamSi'+'ze,\x20rect.y'+'\x20+\x20rect.w\x20'+'-\x20seamSize'+',\x20uv.y));\x0a'+'}\x0a\x0a//\x20map\x20'+'a\x20normaliz'+'ed\x20equirec'+'t\x20UV\x20and\x20r'+'oughness\x20l'+'evel\x20to\x20th'+'e\x20correct\x20'+'atlas\x20rect'+'.\x0afn\x20mapRo'+'ughnessUv('+'uv\x20:\x20vec2f'+',\x20level\x20:\x20'+'f32)\x20->\x20ve'+'c2f\x20{\x0a\x20\x20\x20\x20'+'let\x20t\x20:\x20f3'+'2\x20=\x201.0\x20/\x20'+'exp2(level'+');\x0a\x20\x20\x20\x20ret'+'urn\x20mapUv('+'uv,\x20vec4f('+'0.0,\x201.0\x20-'+'\x20t,\x20t,\x20t\x20*'+'\x200.5));\x0a}\x0a'+'\x0a//\x20map\x20sh'+'iny\x20level\x20'+'UV\x0afn\x20mapS'+'hinyUv(uv\x20'+':\x20vec2f,\x20l'+'evel\x20:\x20f32'+')\x20->\x20vec2f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20t\x20:\x20f32\x20='+'\x201.0\x20/\x20exp'+'2(level);\x0a'+'\x20\x20\x20\x20return'+'\x20mapUv(uv,'+'\x20vec4f(1.0'+'\x20-\x20t,\x201.0\x20'+'-\x20t,\x20t,\x20t\x20'+'*\x200.5));\x0a}'+'\x0a\x0a#endif\x0a',RM='\x0a#ifdef\x20LI'+'T_SKYBOX_I'+'NTENSITY\x0a\x20'+'\x20\x20\x20uniform'+'\x20skyboxInt'+'ensity\x20:\x20f'+'32;\x0a#endif'+'\x0a\x0afn\x20proce'+'ssEnvironm'+'ent(color\x20'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SKYBO'+'X_INTENSIT'+'Y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20col'+'or\x20*\x20unifo'+'rm.skyboxI'+'ntensity;\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20color'+';\x0a\x20\x20\x20\x20#end'+'if\x0a}\x0a',OM='\x0afn\x20getFal'+'loffWindow'+'(lightRadi'+'us:\x20f32,\x20l'+'ightDir:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20l'+'et\x20sqrDist'+':\x20f32\x20=\x20do'+'t(lightDir'+',\x20lightDir'+');\x0a\x20\x20\x20\x20let'+'\x20invRadius'+':\x20f32\x20=\x201.'+'0\x20/\x20lightR'+'adius;\x0a\x20\x20\x20'+'\x20return\x20sq'+'uare(satur'+'ate(1.0\x20-\x20'+'square(sqr'+'Dist\x20*\x20squ'+'are(invRad'+'ius))));\x0a}'+'\x0a\x0afn\x20getFa'+'lloffInvSq'+'uared(ligh'+'tRadius:\x20f'+'32,\x20lightD'+'ir:\x20vec3f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20let\x20sq'+'rDist:\x20f32'+'\x20=\x20dot(lig'+'htDir,\x20lig'+'htDir);\x0a\x20\x20'+'\x20\x20var\x20fall'+'off:\x20f32\x20='+'\x201.0\x20/\x20(sq'+'rDist\x20+\x201.'+'0);\x0a\x20\x20\x20\x20le'+'t\x20invRadiu'+'s:\x20f32\x20=\x201'+'.0\x20/\x20light'+'Radius;\x0a\x0a\x20'+'\x20\x20\x20falloff'+'\x20=\x20falloff'+'\x20*\x2016.0;\x0a\x20'+'\x20\x20\x20falloff'+'\x20=\x20falloff'+'\x20*\x20square('+'saturate(1'+'.0\x20-\x20squar'+'e(sqrDist\x20'+'*\x20square(i'+'nvRadius))'+'));\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20fall'+'off;\x0a}\x0a',FM='\x0afn\x20getFal'+'loffLinear'+'(lightRadi'+'us:\x20f32,\x20l'+'ightDir:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20l'+'et\x20d:\x20f32\x20'+'=\x20length(l'+'ightDir);\x0a'+'\x20\x20\x20\x20return'+'\x20max(((lig'+'htRadius\x20-'+'\x20d)\x20/\x20ligh'+'tRadius),\x20'+'0.0);\x0a}\x0a',NM='\x0a\x0a#ifndef\x20'+'FLOAT_AS_U'+'INT\x0a#defin'+'e\x20FLOAT_AS'+'_UINT\x0a\x0a//\x20'+'encode\x20flo'+'at\x20value\x20t'+'o\x20RGBA8\x20re'+'presentati'+'on\x20(0.0-1.'+'0\x20range)\x0af'+'n\x20float2ui'+'nt(value:\x20'+'f32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'let\x20intBit'+'s\x20=\x20bitcas'+'t<u32>(val'+'ue);\x0a\x20\x20\x20\x20r'+'eturn\x20vec4'+'f(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20f32((intB'+'its\x20>>\x2024u'+')\x20&\x200xffu)'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'f32((intBi'+'ts\x20>>\x2016u)'+'\x20&\x200xffu),'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'32((intBit'+'s\x20>>\x208u)\x20&'+'\x200xffu),\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20f32'+'(intBits\x20&'+'\x200xffu)\x0a\x20\x20'+'\x20\x20)\x20/\x20255.'+'0;\x0a}\x0a\x0a//\x20d'+'ecode\x20RGBA'+'8\x20value\x20to'+'\x20float\x0afn\x20'+'uint2float'+'(value:\x20ve'+'c4f)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20le'+'t\x20rgba_u32'+'\x20=\x20vec4<u3'+'2>(value\x20*'+'\x20255.0);\x0a\x20'+'\x20\x20\x20let\x20int'+'Bits:\x20u32\x20'+'=\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'(rgba_u32.'+'r\x20<<\x2024u)\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'(rgba_u32.'+'g\x20<<\x2016u)\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'(rgba_u32.'+'b\x20<<\x208u)\x20\x20'+'|\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20rgba_u32.'+'a;\x0a\x20\x20\x20\x20ret'+'urn\x20bitcas'+'t<f32>(int'+'Bits);\x0a}\x0a\x0a'+'//\x20store\x20a'+'\x20single\x20fl'+'oat\x20value\x20'+'in\x20vec4,\x20a'+'ssuming\x20ei'+'ther\x20RGBA8'+'\x20or\x20float\x20'+'renderable'+'\x20texture\x0af'+'n\x20float2ve'+'c4(value:\x20'+'f32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'#if\x20define'+'d(CAPS_TEX'+'TURE_FLOAT'+'_RENDERABL'+'E)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ve'+'c4f(value,'+'\x201.0,\x201.0,'+'\x201.0);\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20float2ui'+'nt(value);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a}\x0a\x0a#endi'+'f\x20//\x20FLOAT'+'_AS_UINT\x0a',kM='\x0a\x0avar<priv'+'ate>\x20dBlen'+'dModeFogFa'+'ctor\x20:\x20f32'+'\x20=\x201.0;\x0a\x0a#'+'if\x20(FOG\x20!='+'\x20NONE)\x0a\x20\x20\x20'+'\x20uniform\x20f'+'og_color\x20:'+'\x20vec3f;\x0a\x20\x20'+'\x20\x20\x0a\x20\x20\x20\x20#if'+'\x20(FOG\x20==\x20L'+'INEAR)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20fog_sta'+'rt\x20:\x20f32;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20fog_'+'end\x20:\x20f32;'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20fog'+'_density\x20:'+'\x20f32;\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0afn\x20ge'+'tFogFactor'+'()\x20->\x20f32\x20'+'{\x0a\x0a\x20\x20\x20\x20let'+'\x20depth\x20=\x20p'+'cPosition.'+'z\x20/\x20pcPosi'+'tion.w;\x0a\x0a\x20'+'\x20\x20\x20var\x20fog'+'Factor\x20:\x20f'+'32\x20=\x200.0;\x0a'+'\x0a\x20\x20\x20\x20#if\x20('+'FOG\x20==\x20LIN'+'EAR)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20fogFact'+'or\x20=\x20(unif'+'orm.fog_en'+'d\x20-\x20depth)'+'\x20/\x20(unifor'+'m.fog_end\x20'+'-\x20uniform.'+'fog_start)'+';\x0a\x20\x20\x20\x20#eli'+'f\x20(FOG\x20==\x20'+'EXP)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20fogFact'+'or\x20=\x20exp(-'+'depth\x20*\x20un'+'iform.fog_'+'density);\x0a'+'\x20\x20\x20\x20#elif\x20'+'(FOG\x20==\x20EX'+'P2)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20fogFacto'+'r\x20=\x20exp(-d'+'epth\x20*\x20dep'+'th\x20*\x20unifo'+'rm.fog_den'+'sity\x20*\x20uni'+'form.fog_d'+'ensity);\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20retur'+'n\x20clamp(fo'+'gFactor,\x200'+'.0,\x201.0);\x0a'+'}\x0a\x0afn\x20addF'+'og(color\x20:'+'\x20vec3f)\x20->'+'\x20vec3f\x20{\x0a\x20'+'\x20\x20\x20#if\x20(FO'+'G\x20!=\x20NONE)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20mix('+'uniform.fo'+'g_color\x20*\x20'+'dBlendMode'+'FogFactor,'+'\x20color,\x20ge'+'tFogFactor'+'());\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'color;\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a',UM='\x0a//\x20Schlic'+'k\x27s\x20approx'+'imation\x0afn'+'\x20getFresne'+'l(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20cosTheta:'+'\x20f32,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20gloss:'+'\x20f32,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20specul'+'arity:\x20vec'+'3f\x0a\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_IRIDESC'+'ENCE)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20,\x20irid'+'escenceFre'+'snel:\x20vec3'+'f,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20iridescen'+'ceIntensit'+'y:\x20f32\x0a\x20\x20\x20'+'\x20#endif\x0a)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20let\x20f'+'resnel:\x20f3'+'2\x20=\x20pow(1.'+'0\x20-\x20satura'+'te(cosThet'+'a),\x205.0);\x0a'+'\x20\x20\x20\x20let\x20gl'+'ossSq:\x20f32'+'\x20=\x20gloss\x20*'+'\x20gloss;\x0a\x20\x20'+'\x20\x20let\x20ret:'+'\x20vec3f\x20=\x20s'+'pecularity'+'\x20+\x20(max(ve'+'c3f(glossS'+'q),\x20specul'+'arity)\x20-\x20s'+'pecularity'+')\x20*\x20fresne'+'l;\x0a\x0a\x20\x20\x20\x20#i'+'f\x20defined('+'LIT_IRIDES'+'CENCE)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20mix(ret,'+'\x20iridescen'+'ceFresnel,'+'\x20iridescen'+'ceIntensit'+'y);\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20r'+'et;\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a\x0afn'+'\x20getFresne'+'lCC(cosThe'+'ta:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20let\x20fres'+'nel:\x20f32\x20='+'\x20pow(1.0\x20-'+'\x20saturate('+'cosTheta),'+'\x205.0);\x0a\x20\x20\x20'+'\x20return\x200.'+'04\x20+\x20(1.0\x20'+'-\x200.04)\x20*\x20'+'fresnel;\x0a}',BM='\x0aattribute'+'\x20vertex_po'+'sition:\x20ve'+'c2f;\x0a\x0avary'+'ing\x20vUv0:\x20'+'vec2f;\x0a\x0a@v'+'ertex\x0afn\x20v'+'ertexMain('+'input:\x20Ver'+'texInput)\x20'+'->\x20VertexO'+'utput\x20{\x0a\x20\x20'+'\x20\x20var\x20outp'+'ut:\x20Vertex'+'Output;\x0a\x20\x20'+'\x20\x20output.p'+'osition\x20=\x20'+'vec4f(inpu'+'t.vertex_p'+'osition,\x200'+'.5,\x201.0);\x0a'+'\x20\x20\x20\x20output'+'.vUv0\x20=\x20in'+'put.vertex'+'_position.'+'xy\x20*\x200.5\x20+'+'\x20vec2f(0.5'+');\x0a\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a}\x0a',zM='\x0a\x0a#include'+'\x20\x22decodePS'+'\x22\x0a\x0a#if\x20(GA'+'MMA\x20==\x20SRG'+'B)\x0a\x0a\x20\x20\x20\x20fn'+'\x20gammaCorr'+'ectInput(c'+'olor:\x20f32)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20decod'+'eGammaFloa'+'t(color);\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20fn\x20gammaC'+'orrectInpu'+'tVec3(colo'+'r:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20deco'+'deGamma3(c'+'olor);\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20fn'+'\x20gammaCorr'+'ectInputVe'+'c4(color:\x20'+'vec4f)\x20->\x20'+'vec4f\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20vec4f(d'+'ecodeGamma'+'3(color.xy'+'z),\x20color.'+'w);\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20fn\x20ga'+'mmaCorrect'+'Output(col'+'or:\x20vec3f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20pow'+'(color\x20+\x200'+'.0000001,\x20'+'vec3f(1.0\x20'+'/\x202.2));\x0a\x20'+'\x20\x20\x20}\x0a\x0a#els'+'e\x20//\x20NONE\x0a'+'\x0a\x20\x20\x20\x20fn\x20ga'+'mmaCorrect'+'Input(colo'+'r:\x20f32)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20color;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'fn\x20gammaCo'+'rrectInput'+'Vec3(color'+':\x20vec3f)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20color'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20fn\x20gamm'+'aCorrectIn'+'putVec4(co'+'lor:\x20vec4f'+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20co'+'lor;\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20fn\x20g'+'ammaCorrec'+'tOutput(co'+'lor:\x20vec3f'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20co'+'lor;\x0a\x20\x20\x20\x20}'+'\x0a\x0a#endif\x0a',VM='\x0a#ifdef\x20ST'+'D_GLOSS_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20uniform\x20m'+'aterial_gl'+'oss:\x20f32;\x0a'+'#endif\x0a\x0afn'+'\x20getGlossi'+'ness()\x20{\x0a\x20'+'\x20\x20\x20dGlossi'+'ness\x20=\x201.0'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_GL'+'OSS_CONSTA'+'NT\x0a\x20\x20\x20\x20dGl'+'ossiness\x20='+'\x20dGlossine'+'ss\x20*\x20unifo'+'rm.materia'+'l_gloss;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_GLOS'+'S_TEXTURE\x0a'+'\x20\x20\x20\x20dGloss'+'iness\x20=\x20dG'+'lossiness\x20'+'*\x20textureS'+'ampleBias('+'{STD_GLOSS'+'_TEXTURE_N'+'AME},\x20{STD'+'_GLOSS_TEX'+'TURE_NAME}'+'Sampler,\x20{'+'STD_GLOSS_'+'TEXTURE_UV'+'},\x20uniform'+'.textureBi'+'as).{STD_G'+'LOSS_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'GLOSS_VERT'+'EX\x0a\x20\x20\x20\x20dGl'+'ossiness\x20='+'\x20dGlossine'+'ss\x20*\x20satur'+'ate(vVerte'+'xColor.{ST'+'D_GLOSS_VE'+'RTEX_CHANN'+'EL});\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_GLOSS_I'+'NVERT\x0a\x20\x20\x20\x20'+'dGlossines'+'s\x20=\x201.0\x20-\x20'+'dGlossines'+'s;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20d'+'Glossiness'+'\x20=\x20dGlossi'+'ness\x20+\x200.0'+'000001;\x0a}\x0a',GM='\x0auniform\x20m'+'atrix_mode'+'l:\x20mat4x4f'+';\x0auniform\x20'+'matrix_vie'+'w:\x20mat4x4f'+';\x0auniform\x20'+'matrix_pro'+'jection:\x20m'+'at4x4f;\x0a\x0a/'+'/\x20project\x20'+'the\x20model\x20'+'space\x20gaus'+'sian\x20cente'+'r\x20to\x20view\x20'+'and\x20clip\x20s'+'pace\x0afn\x20in'+'itCenter(m'+'odelCenter'+':\x20vec3f,\x20c'+'enter:\x20ptr'+'<function,'+'\x20SplatCent'+'er>)\x20->\x20bo'+'ol\x20{\x0a\x20\x20\x20\x20l'+'et\x20modelVi'+'ew:\x20mat4x4'+'f\x20=\x20unifor'+'m.matrix_v'+'iew\x20*\x20unif'+'orm.matrix'+'_model;\x0a\x20\x20'+'\x20\x20let\x20cent'+'erView:\x20ve'+'c4f\x20=\x20mode'+'lView\x20*\x20ve'+'c4f(modelC'+'enter,\x201.0'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20early\x20out'+'\x20if\x20splat\x20'+'is\x20behind\x20'+'the\x20camera'+'\x0a\x20\x20\x20\x20if\x20(c'+'enterView.'+'z\x20>\x200.0)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20fals'+'e;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20var\x20ce'+'nterProj:\x20'+'vec4f\x20=\x20un'+'iform.matr'+'ix_project'+'ion\x20*\x20cent'+'erView;\x0a\x0a\x20'+'\x20\x20\x20//\x20ensu'+'re\x20gaussia'+'ns\x20are\x20not'+'\x20clipped\x20b'+'y\x20camera\x20n'+'ear\x20and\x20fa'+'r\x0a\x20\x20\x20\x20cent'+'erProj.z\x20='+'\x20clamp(cen'+'terProj.z,'+'\x200.0,\x20abs('+'centerProj'+'.w));\x0a\x0a\x20\x20\x20'+'\x20center.vi'+'ew\x20=\x20cente'+'rView.xyz\x20'+'/\x20centerVi'+'ew.w;\x0a\x20\x20\x20\x20'+'center.pro'+'j\x20=\x20center'+'Proj;\x0a\x20\x20\x20\x20'+'center.pro'+'jMat00\x20=\x20u'+'niform.mat'+'rix_projec'+'tion[0][0]'+';\x0a\x20\x20\x20\x20cent'+'er.modelVi'+'ew\x20=\x20model'+'View;\x0a\x20\x20\x20\x20'+'return\x20tru'+'e;\x0a}\x0a',HM='\x0a\x0avar\x20spla'+'tColor:\x20te'+'xture_2d<f'+'32>;\x0a\x0afn\x20r'+'eadColor(s'+'ource:\x20ptr'+'<function,'+'\x20SplatSour'+'ce>)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'return\x20tex'+'tureLoad(s'+'platColor,'+'\x20source.uv'+',\x200);\x0a}\x0a',WM='\x0a\x0a//\x20store'+'s\x20the\x20sour'+'ce\x20UV\x20and\x20'+'order\x20of\x20t'+'he\x20splat\x0as'+'truct\x20Spla'+'tSource\x20{\x0a'+'\x20\x20\x20\x20order:'+'\x20u32,\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ren'+'der\x20order\x0a'+'\x20\x20\x20\x20id:\x20u3'+'2,\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20spl'+'at\x20id\x0a\x20\x20\x20\x20'+'uv:\x20vec2<i'+'32>,\x20\x20\x20\x20\x20\x20'+'//\x20splat\x20u'+'v\x0a\x20\x20\x20\x20corn'+'erUV:\x20vec2'+'f,\x20\x20\x20\x20//\x20c'+'orner\x20coor'+'dinates\x20fo'+'r\x20this\x20ver'+'tex\x20of\x20the'+'\x20gaussian\x20'+'(-1,\x20-1)..'+'(1,\x201)\x0a}\x0a\x0a'+'//\x20stores\x20'+'the\x20camera'+'\x20and\x20clip\x20'+'space\x20posi'+'tion\x20of\x20th'+'e\x20gaussian'+'\x20center\x0ast'+'ruct\x20Splat'+'Center\x20{\x0a\x20'+'\x20\x20\x20view:\x20v'+'ec3f,\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ce'+'nter\x20in\x20vi'+'ew\x20space\x0a\x20'+'\x20\x20\x20proj:\x20v'+'ec4f,\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ce'+'nter\x20in\x20cl'+'ip\x20space\x0a\x20'+'\x20\x20\x20modelVi'+'ew:\x20mat4x4'+'f,\x20\x20\x20//\x20mo'+'del-view\x20m'+'atrix\x0a\x20\x20\x20\x20'+'projMat00:'+'\x20f32,\x20\x20\x20\x20\x20'+'\x20\x20//\x20eleme'+'mt\x20[0][0]\x20'+'of\x20the\x20pro'+'jection\x20ma'+'trix\x0a}\x0a\x0a//'+'\x20stores\x20th'+'e\x20offset\x20f'+'rom\x20center'+'\x20for\x20the\x20c'+'urrent\x20gau'+'ssian\x0astru'+'ct\x20SplatCo'+'rner\x20{\x0a\x20\x20\x20'+'\x20offset:\x20v'+'ec2f,\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20corn'+'er\x20offset\x20'+'from\x20cente'+'r\x20in\x20clip\x20'+'space\x0a\x20\x20\x20\x20'+'uv:\x20vec2f,'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20corne'+'r\x20uv\x0a\x20\x20\x20\x20#'+'if\x20GSPLAT_'+'AA\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20aaFactor:'+'\x20f32,\x20//\x20f'+'or\x20scenes\x20'+'generated\x20'+'with\x20antia'+'liasing\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a\x0a#include'+'\x20\x22gsplatEv'+'alSHVS\x22\x0a#i'+'nclude\x20\x22gs'+'platQuatTo'+'Mat3VS\x22\x0a\x0a#'+'if\x20GSPLAT_'+'COMPRESSED'+'_DATA\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'gsplatComp'+'ressedData'+'VS\x22\x0a\x20\x20\x20\x20#i'+('f\x20SH_BANDS'+'\x20>\x200\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22gsplatC'+'ompressedS'+'HVS\x22\x0a\x20\x20\x20\x20#'+'endif\x0a#eli'+'f\x20GSPLAT_S'+'OGS_DATA\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22gsplatS'+'ogsDataVS\x22'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22gspla'+'tSogsColor'+'VS\x22\x0a\x20\x20\x20\x20#i'+'f\x20SH_BANDS'+'\x20>\x200\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22gsplatS'+'ogsSHVS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'#else\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'gsplatData'+'VS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22gs'+'platColorV'+'S\x22\x0a\x20\x20\x20\x20#if'+'\x20SH_BANDS\x20'+'>\x200\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22gsplatSH'+'VS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a#endi'+'f\x0a\x0a#includ'+'e\x20\x22gsplatS'+'ourceVS\x22\x0a#'+'include\x20\x22g'+'splatCente'+'rVS\x22\x0a#incl'+'ude\x20\x22gspla'+'tCornerVS\x22'+'\x0a#include\x20'+'\x22gsplatOut'+'putVS\x22\x0a\x0a//'+'\x20modify\x20th'+'e\x20gaussian'+'\x20corner\x20so'+'\x20it\x20exclud'+'es\x20gaussia'+'n\x20regions\x20'+'with\x20alpha'+'\x20less\x20than'+'\x201/255\x0afn\x20'+'clipCorner'+'(corner:\x20p'+'tr<functio'+'n,\x20SplatCo'+'rner>,\x20alp'+'ha:\x20f32)\x20{'+'\x0a\x20\x20\x20\x20let\x20c'+'lip:\x20f32\x20='+'\x20min(1.0,\x20'+'sqrt(-log('+'1.0\x20/\x20(255'+'.0\x20*\x20alpha'+')))\x20/\x202.0)'+';\x0a\x20\x20\x20\x20corn'+'er.offset\x20'+'=\x20corner.o'+'ffset\x20*\x20cl'+'ip;\x0a\x20\x20\x20\x20co'+'rner.uv\x20=\x20'+'corner.uv\x20'+'*\x20clip;\x0a}\x0a'+'\x0a'),$M='\x0avar\x20packe'+'dTexture:\x20'+'texture_2d'+'<u32>;\x0avar'+'\x20chunkText'+'ure:\x20textu'+'re_2d<f32>'+';\x0a\x0a//\x20work'+'\x20values\x0ava'+'r<private>'+'\x20chunkData'+'A:\x20vec4f;\x20'+'\x20\x20\x20//\x20x:\x20m'+'in_x,\x20y:\x20m'+'in_y,\x20z:\x20m'+'in_z,\x20w:\x20m'+'ax_x\x0avar<p'+'rivate>\x20ch'+'unkDataB:\x20'+'vec4f;\x20\x20\x20\x20'+'//\x20x:\x20max_'+'y,\x20y:\x20max_'+'z,\x20z:\x20scal'+'e_min_x,\x20w'+':\x20scale_mi'+'n_y\x0avar<pr'+'ivate>\x20chu'+'nkDataC:\x20v'+'ec4f;\x20\x20\x20\x20/'+'/\x20x:\x20scale'+'_min_z,\x20y:'+'\x20scale_max'+'_x,\x20z:\x20sca'+'le_max_y,\x20'+'w:\x20scale_m'+'ax_z\x0avar<p'+'rivate>\x20ch'+'unkDataD:\x20'+'vec4f;\x20\x20\x20\x20'+'//\x20x:\x20min_'+'r,\x20y:\x20min_'+'g,\x20z:\x20min_'+'b,\x20w:\x20max_'+'r\x0avar<priv'+'ate>\x20chunk'+'DataE:\x20vec'+'4f;\x20\x20\x20\x20//\x20'+'x:\x20max_g,\x20'+'y:\x20max_b,\x20'+'z:\x20unused,'+'\x20w:\x20unused'+'\x0avar<priva'+'te>\x20packed'+'Data:\x20vec4'+'u;\x20\x20\x20\x20//\x20x'+':\x20position'+'\x20bits,\x20y:\x20'+'rotation\x20b'+'its,\x20z:\x20sc'+'ale\x20bits,\x20'+'w:\x20color\x20b'+'its\x0a\x0afn\x20un'+'pack111011'+'(bits:\x20u32'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20(vec3f'+'((vec3<u32'+'>(bits)\x20>>'+'\x20vec3<u32>'+'(21u,\x2011u,'+'\x200u))\x20&\x20ve'+'c3<u32>(0x'+'7ffu,\x200x3f'+'fu,\x200x7ffu'+')))\x20/\x20vec3'+'f(2047.0,\x20'+'1023.0,\x2020'+'47.0);\x0a}\x0a\x0a'+'fn\x20unpack8'+'888(bits:\x20'+'u32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'return\x20vec'+'4f(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20f32((bit'+'s\x20>>\x2024u)\x20'+'&\x200xffu),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20f3'+'2((bits\x20>>'+'\x2016u)\x20&\x200x'+'ffu),\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20f32((b'+'its\x20>>\x208u)'+'\x20\x20&\x200xffu)'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'f32(bits\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20&\x200'+'xffu)\x0a\x20\x20\x20\x20'+')\x20/\x20255.0;'+('\x0a}\x0a\x0aconst\x20'+'norm_const'+':\x20f32\x20=\x201.'+'0\x20/\x20(sqrt('+'2.0)\x20*\x200.5'+');\x0a\x0afn\x20unp'+'ackRotatio'+'n(bits:\x20u3'+'2)\x20->\x20vec4'+'f\x20{\x0a\x20\x20\x20\x20le'+'t\x20a\x20=\x20(f32'+'((bits\x20>>\x20'+'20u)\x20&\x200x3'+'ffu)\x20/\x20102'+'3.0\x20-\x200.5)'+'\x20*\x20norm_co'+'nst;\x0a\x20\x20\x20\x20l'+'et\x20b\x20=\x20(f3'+'2((bits\x20>>'+'\x2010u)\x20&\x200x'+'3ffu)\x20/\x2010'+'23.0\x20-\x200.5'+')\x20*\x20norm_c'+'onst;\x0a\x20\x20\x20\x20'+'let\x20c\x20=\x20(f'+'32(bits\x20&\x20'+'0x3ffu)\x20/\x20'+'1023.0\x20-\x200'+'.5)\x20*\x20norm'+'_const;\x0a\x20\x20'+'\x20\x20let\x20m\x20=\x20'+'sqrt(1.0\x20-'+'\x20(a\x20*\x20a\x20+\x20'+'b\x20*\x20b\x20+\x20c\x20'+'*\x20c));\x0a\x0a\x20\x20'+'\x20\x20let\x20mode'+'\x20=\x20bits\x20>>'+'\x2030u;\x0a\x20\x20\x20\x20'+'if\x20(mode\x20='+'=\x200u)\x20{\x20re'+'turn\x20vec4f'+'(m,\x20a,\x20b,\x20'+'c);\x20}\x0a\x20\x20\x20\x20'+'if\x20(mode\x20='+'=\x201u)\x20{\x20re'+'turn\x20vec4f'+'(a,\x20m,\x20b,\x20'+'c);\x20}\x0a\x20\x20\x20\x20'+'if\x20(mode\x20='+'=\x202u)\x20{\x20re'+'turn\x20vec4f'+'(a,\x20b,\x20m,\x20'+'c);\x20}\x0a\x20\x20\x20\x20'+'return\x20vec'+'4f(a,\x20b,\x20c'+',\x20m);\x0a}\x0a\x0a/'+'/\x20read\x20cen'+'ter\x0afn\x20rea'+'dCenter(so'+'urce:\x20ptr<'+'function,\x20'+'SplatSourc'+'e>)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20l'+'et\x20tex_siz'+'e_u\x20=\x20text'+'ureDimensi'+'ons(chunkT'+'exture,\x200)'+';\x0a\x20\x20\x20\x20let\x20'+'w:\x20u32\x20=\x20t'+'ex_size_u.'+'x\x20/\x205u;\x0a\x20\x20'+'\x20\x20let\x20chun'+'kId:\x20u32\x20='+'\x20source.id'+'\x20/\x20256u;\x0a\x20'+'\x20\x20\x20let\x20chu'+'nkUV:\x20vec2'+'<i32>\x20=\x20ve'+'c2<i32>(i3'+'2((chunkId'+'\x20%\x20w)\x20*\x205u'+'),\x20i32(chu'+'nkId\x20/\x20w))'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'read\x20chunk'+'\x20and\x20packe'+'d\x20compress'+'ed\x20data\x0a\x20\x20'+'\x20\x20chunkDat'+'aA\x20=\x20textu'+'reLoad(chu'+'nkTexture,'+'\x20chunkUV\x20+'+'\x20vec2<i32>'+'(0,\x200),\x200)'+';\x0a\x20\x20\x20\x20chun'+'kDataB\x20=\x20t'+'extureLoad')+('(chunkText'+'ure,\x20chunk'+'UV\x20+\x20vec2<'+'i32>(1,\x200)'+',\x200);\x0a\x20\x20\x20\x20'+'chunkDataC'+'\x20=\x20texture'+'Load(chunk'+'Texture,\x20c'+'hunkUV\x20+\x20v'+'ec2<i32>(2'+',\x200),\x200);\x0a'+'\x20\x20\x20\x20chunkD'+'ataD\x20=\x20tex'+'tureLoad(c'+'hunkTextur'+'e,\x20chunkUV'+'\x20+\x20vec2<i3'+'2>(3,\x200),\x20'+'0);\x0a\x20\x20\x20\x20ch'+'unkDataE\x20='+'\x20textureLo'+'ad(chunkTe'+'xture,\x20chu'+'nkUV\x20+\x20vec'+'2<i32>(4,\x20'+'0),\x200);\x0a\x20\x20'+'\x20\x20packedDa'+'ta\x20=\x20textu'+'reLoad(pac'+'kedTexture'+',\x20source.u'+'v,\x200);\x0a\x0a\x20\x20'+'\x20\x20return\x20m'+'ix(chunkDa'+'taA.xyz,\x20v'+'ec3f(chunk'+'DataA.w,\x20c'+'hunkDataB.'+'xy),\x20unpac'+'k111011(pa'+'ckedData.x'+'));\x0a}\x0a\x0afn\x20'+'readColor('+'source:\x20pt'+'r<function'+',\x20SplatSou'+'rce>)\x20->\x20v'+'ec4f\x20{\x0a\x20\x20\x20'+'\x20let\x20r\x20=\x20u'+'npack8888('+'packedData'+'.w);\x0a\x20\x20\x20\x20r'+'eturn\x20vec4'+'f(mix(chun'+'kDataD.xyz'+',\x20vec3f(ch'+'unkDataD.w'+',\x20chunkDat'+'aE.xy),\x20r.'+'rgb),\x20r.w)'+';\x0a}\x0a\x0afn\x20ge'+'tRotation('+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20unpack'+'Rotation(p'+'ackedData.'+'y);\x0a}\x0a\x0afn\x20'+'getScale()'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20exp(mix'+'(vec3f(chu'+'nkDataB.zw'+',\x20chunkDat'+'aC.x),\x20chu'+'nkDataC.yz'+'w,\x20unpack1'+'11011(pack'+'edData.z))'+');\x0a}\x0a\x0a//\x20g'+'iven\x20a\x20rot'+'ation\x20matr'+'ix\x20and\x20sca'+'le\x20vector,'+'\x20compute\x203'+'d\x20covarian'+'ce\x20A\x20and\x20B'+'\x0afn\x20readCo'+'variance(s'+'ource:\x20ptr'+'<function,'+'\x20SplatSour'+'ce>,\x20covA_'+'ptr:\x20ptr<f'+'unction,\x20v'+'ec3f>,\x20cov'+'B_ptr:\x20ptr'+'<function,')+('\x20vec3f>)\x20{'+'\x0a\x20\x20\x20\x20let\x20r'+'ot\x20=\x20quatT'+'oMat3(getR'+'otation())'+';\x0a\x20\x20\x20\x20let\x20'+'scale\x20=\x20ge'+'tScale();\x0a'+'\x0a\x20\x20\x20\x20//\x20M\x20'+'=\x20S\x20*\x20R\x0a\x20\x20'+'\x20\x20let\x20M\x20=\x20'+'transpose('+'mat3x3f(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le.x\x20*\x20rot'+'[0],\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20scale.y'+'\x20*\x20rot[1],'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'cale.z\x20*\x20r'+'ot[2]\x0a\x20\x20\x20\x20'+'));\x0a\x0a\x20\x20\x20\x20*'+'covA_ptr\x20='+'\x20vec3f(dot'+'(M[0],\x20M[0'+']),\x20dot(M['+'0],\x20M[1]),'+'\x20dot(M[0],'+'\x20M[2]));\x0a\x20'+'\x20\x20\x20*covB_p'+'tr\x20=\x20vec3f'+'(dot(M[1],'+'\x20M[1]),\x20do'+'t(M[1],\x20M['+'2]),\x20dot(M'+'[2],\x20M[2])'+');\x0a}\x0a'),XM='\x0a#if\x20SH_BA'+'NDS\x20>\x200\x0a\x0av'+'ar\x20shTextu'+'re0:\x20textu'+'re_2d<u32>'+';\x0avar\x20shTe'+'xture1:\x20te'+'xture_2d<u'+'32>;\x0avar\x20s'+'hTexture2:'+'\x20texture_2'+'d<u32>;\x0a\x0af'+'n\x20unpack88'+'88s(bits:\x20'+'u32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'let\x20unpack'+'ed_u\x20=\x20(ve'+'c4<u32>(bi'+'ts)\x20>>\x20vec'+'4<u32>(0u,'+'\x208u,\x2016u,\x20'+'24u))\x20&\x20ve'+'c4<u32>(0x'+'ffu);\x0a\x20\x20\x20\x20'+'return\x20vec'+'4f(unpacke'+'d_u)\x20*\x20(8.'+'0\x20/\x20255.0)'+'\x20-\x204.0;\x0a}\x0a'+'\x0afn\x20readSH'+'Data(sourc'+'e:\x20ptr<fun'+'ction,\x20Spl'+'atSource>,'+'\x20sh:\x20ptr<f'+'unction,\x20a'+'rray<vec3f'+',\x2015>>,\x20sc'+'ale:\x20ptr<f'+'unction,\x20f'+'32>)\x20{\x0a\x20\x20\x20'+'\x20//\x20read\x20t'+'he\x20sh\x20coef'+'ficients\x0a\x20'+'\x20\x20\x20let\x20shD'+'ata0:\x20vec4'+'<u32>\x20=\x20te'+'xtureLoad('+'shTexture0'+',\x20source.u'+'v,\x200);\x0a\x20\x20\x20'+'\x20let\x20shDat'+'a1:\x20vec4<u'+'32>\x20=\x20text'+'ureLoad(sh'+'Texture1,\x20'+'source.uv,'+'\x200);\x0a\x20\x20\x20\x20l'+'et\x20shData2'+':\x20vec4<u32'+'>\x20=\x20textur'+'eLoad(shTe'+'xture2,\x20so'+'urce.uv,\x200'+');\x0a\x0a\x20\x20\x20\x20le'+'t\x20r0\x20=\x20unp'+'ack8888s(s'+'hData0.x);'+'\x0a\x20\x20\x20\x20let\x20r'+'1\x20=\x20unpack'+'8888s(shDa'+'ta0.y);\x0a\x20\x20'+'\x20\x20let\x20r2\x20='+'\x20unpack888'+'8s(shData0'+'.z);\x0a\x20\x20\x20\x20l'+'et\x20r3\x20=\x20un'+'pack8888s('+'shData0.w)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20g0\x20=\x20unpa'+'ck8888s(sh'+'Data1.x);\x0a'+'\x20\x20\x20\x20let\x20g1'+'\x20=\x20unpack8'+'888s(shDat'+'a1.y);\x0a\x20\x20\x20'+'\x20let\x20g2\x20=\x20'+'unpack8888'+'s(shData1.'+'z);\x0a\x20\x20\x20\x20le'+'t\x20g3\x20=\x20unp'+'ack8888s(s'+'hData1.w);'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'b0\x20=\x20unpac'+'k8888s(shD'+'ata2.x);\x0a\x20'+'\x20\x20\x20let\x20b1\x20'+('=\x20unpack88'+'88s(shData'+'2.y);\x0a\x20\x20\x20\x20'+'let\x20b2\x20=\x20u'+'npack8888s'+'(shData2.z'+');\x0a\x20\x20\x20\x20let'+'\x20b3\x20=\x20unpa'+'ck8888s(sh'+'Data2.w);\x0a'+'\x0a\x20\x20\x20\x20sh[0]'+'\x20=\x20\x20vec3f('+'r0.x,\x20g0.x'+',\x20b0.x);\x0a\x20'+'\x20\x20\x20sh[1]\x20='+'\x20\x20vec3f(r0'+'.y,\x20g0.y,\x20'+'b0.y);\x0a\x20\x20\x20'+'\x20sh[2]\x20=\x20\x20'+'vec3f(r0.z'+',\x20g0.z,\x20b0'+'.z);\x0a\x20\x20\x20\x20s'+'h[3]\x20=\x20\x20ve'+'c3f(r0.w,\x20'+'g0.w,\x20b0.w'+');\x0a\x20\x20\x20\x20sh['+'4]\x20=\x20\x20vec3'+'f(r1.x,\x20g1'+'.x,\x20b1.x);'+'\x0a\x20\x20\x20\x20sh[5]'+'\x20=\x20\x20vec3f('+'r1.y,\x20g1.y'+',\x20b1.y);\x0a\x20'+'\x20\x20\x20sh[6]\x20='+'\x20\x20vec3f(r1'+'.z,\x20g1.z,\x20'+'b1.z);\x0a\x20\x20\x20'+'\x20sh[7]\x20=\x20\x20'+'vec3f(r1.w'+',\x20g1.w,\x20b1'+'.w);\x0a\x20\x20\x20\x20s'+'h[8]\x20=\x20\x20ve'+'c3f(r2.x,\x20'+'g2.x,\x20b2.x'+');\x0a\x20\x20\x20\x20sh['+'9]\x20=\x20\x20vec3'+'f(r2.y,\x20g2'+'.y,\x20b2.y);'+'\x0a\x20\x20\x20\x20sh[10'+']\x20=\x20vec3f('+'r2.z,\x20g2.z'+',\x20b2.z);\x0a\x20'+'\x20\x20\x20sh[11]\x20'+'=\x20vec3f(r2'+'.w,\x20g2.w,\x20'+'b2.w);\x0a\x20\x20\x20'+'\x20sh[12]\x20=\x20'+'vec3f(r3.x'+',\x20g3.x,\x20b3'+'.x);\x0a\x20\x20\x20\x20s'+'h[13]\x20=\x20ve'+'c3f(r3.y,\x20'+'g3.y,\x20b3.y'+');\x0a\x20\x20\x20\x20sh['+'14]\x20=\x20vec3'+'f(r3.z,\x20g3'+'.z,\x20b3.z);'+'\x0a\x0a\x20\x20\x20\x20*sca'+'le\x20=\x201.0;\x0a'+'}\x0a\x0a#endif\x0a'),qM='\x0a\x20\x20\x20\x20#if\x20S'+'H_BANDS\x20=='+'\x201\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20const\x20SH_'+'COEFFS:\x20i3'+'2\x20=\x203;\x0a\x20\x20\x20'+'\x20#elif\x20SH_'+'BANDS\x20==\x202'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20c'+'onst\x20SH_CO'+'EFFS:\x20i32\x20'+'=\x208;\x0a\x20\x20\x20\x20#'+'elif\x20SH_BA'+'NDS\x20==\x203\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20con'+'st\x20SH_COEF'+'FS:\x20i32\x20=\x20'+'15;\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20const\x20SH'+'_COEFFS:\x20i'+'32\x20=\x200;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#if\x20SH'+'_BANDS\x20>\x200'+'\x0a\x0a\x20\x20\x20\x20cons'+'t\x20SH_C1:\x20f'+'32\x20=\x200.488'+'6025119029'+'199;\x0a\x0a\x20\x20\x20\x20'+'#if\x20SH_BAN'+'DS\x20>\x201\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20const'+'\x20SH_C2_0:\x20'+'f32\x20=\x201.09'+'2548430592'+'0792;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C2_1:\x20f'+'32\x20=\x20-1.09'+'2548430592'+'0792;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C2_2:\x20f'+'32\x20=\x200.315'+'3915652525'+'2005;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C2_3:\x20f'+'32\x20=\x20-1.09'+'2548430592'+'0792;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C2_4:\x20f'+'32\x20=\x200.546'+'2742152960'+'396;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20SH_BA'+'NDS\x20>\x202\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20SH_C3_0:'+'\x20f32\x20=\x20-0.'+'5900435899'+'266435;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20cons'+'t\x20SH_C3_1:'+'\x20f32\x20=\x202.8'+'9061144264'+'0554;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C3_2:\x20f'+'32\x20=\x20-0.45'+'7045799464'+'4658;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20const\x20'+'SH_C3_3:\x20f'+'32\x20=\x200.373'+'1763325901'+'154;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20const\x20S'+'H_C3_4:\x20f3'+'2\x20=\x20-0.457'+'0457994644'+'658;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20const\x20S'+'H_C3_5:\x20f3'+'2\x20=\x201.4453'+'0572132027'+'7;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20const\x20SH_'+'C3_6:\x20f32\x20'+'=\x20-0.59004'+'3589926643'+'5;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20see\x20http'+'s://github'+'.com/graph'+'deco-inria'+('/gaussian-'+'splatting/'+'blob/main/'+'utils/sh_u'+'tils.py\x0a\x20\x20'+'\x20\x20fn\x20evalS'+'H(sh:\x20ptr<'+'function,\x20'+'array<vec3'+'f,\x20SH_COEF'+'FS>>,\x20dir:'+'\x20vec3f)\x20->'+'\x20vec3f\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20x\x20=\x20dir.x'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20y\x20=\x20di'+'r.y;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20z\x20='+'\x20dir.z;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'1st\x20degree'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20result\x20'+'=\x20SH_C1\x20*\x20'+'(-sh[0]\x20*\x20'+'y\x20+\x20sh[1]\x20'+'*\x20z\x20-\x20sh[2'+']\x20*\x20x);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20SH_BANDS\x20'+'>\x201\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x202'+'nd\x20degree\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20xx\x20='+'\x20x\x20*\x20x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20yy\x20=\x20y'+'\x20*\x20y;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20zz\x20=\x20z\x20*'+'\x20z;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'xy\x20=\x20x\x20*\x20y'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20yz'+'\x20=\x20y\x20*\x20z;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20xz\x20='+'\x20x\x20*\x20z;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20result\x20=\x20'+'result\x20+\x20('+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20sh['+'3]\x20*\x20(SH_C'+'2_0\x20*\x20xy)\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[4]\x20*\x20(SH_'+'C2_1\x20*\x20yz)'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'h[5]\x20*\x20(SH'+'_C2_2\x20*\x20(2'+'.0\x20*\x20zz\x20-\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[6]\x20*\x20(SH_'+'C2_3\x20*\x20xz)'+'\x20+\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'h[7]\x20*\x20(SH'+'_C2_4\x20*\x20(x'+'x\x20-\x20yy))\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20SH_BANDS'+'\x20>\x202\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'3rd\x20degree'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20result\x20'+'=\x20result\x20+'+'\x20(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'h[8]\x20\x20*\x20(S'+'H_C3_0\x20*\x20y'+'\x20*\x20(3.0\x20*\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[9]\x20\x20*\x20(SH'+'_C3_1\x20*\x20xy'+'\x20*\x20z)\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20sh[10]'+'\x20*\x20(SH_C3_'+'2\x20*\x20y\x20*\x20(4'+'.0\x20*\x20zz\x20-\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[11]\x20*\x20(SH'+'_C3_3\x20*\x20z\x20'+'*\x20(2.0\x20*\x20z'+'z\x20-\x203.0\x20*\x20'+'xx\x20-\x203.0\x20*'+'\x20yy))\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20sh[12]'+'\x20*\x20(SH_C3_'+'4\x20*\x20x\x20*\x20(4'+'.0\x20*\x20zz\x20-\x20'+'xx\x20-\x20yy))\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[13]\x20*\x20(SH'+'_C3_5\x20*\x20z\x20'+'*\x20(xx\x20-\x20yy'+'))\x20+\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sh[14]\x20*\x20'+'(SH_C3_6\x20*'+'\x20x\x20*\x20(xx\x20-'+'\x203.0\x20*\x20yy)'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20re'+'sult;\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20#end'+'if\x0a'),jM='\x0afn\x20quatTo'+'Mat3(R:\x20ve'+'c4<f32>)\x20-'+'>\x20mat3x3<f'+'32>\x20{\x0a\x20\x20\x20\x20'+'let\x20R2:\x20ve'+'c4<f32>\x20=\x20'+'R\x20+\x20R;\x0a\x20\x20\x20'+'\x20let\x20X:\x20f3'+'2\x20\x20\x20\x20\x20\x20\x20=\x20'+'R2.x\x20*\x20R.w'+';\x0a\x20\x20\x20\x20let\x20'+'Y:\x20vec4<f3'+'2>\x20=\x20R2.y\x20'+'*\x20R;\x0a\x20\x20\x20\x20l'+'et\x20Z:\x20vec4'+'<f32>\x20=\x20R2'+'.z\x20*\x20R;\x0a\x20\x20'+'\x20\x20let\x20W:\x20f'+'32\x20\x20\x20\x20\x20\x20\x20='+'\x20R2.w\x20*\x20R.'+'w;\x0a\x0a\x20\x20\x20\x20re'+'turn\x20mat3x'+'3<f32>(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x201.0\x20'+'-\x20Z.z\x20-\x20W,'+'\x20\x20Y.z\x20+\x20X,'+'\x20\x20\x20\x20\x20\x20Y.w\x20'+'-\x20Z.x,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20Y.z\x20-'+'\x20X,\x20\x20\x20\x20\x20\x20\x20'+'\x201.0\x20-\x20Y.y'+'\x20-\x20W,\x20Z.w\x20'+'+\x20Y.x,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20Y.w\x20+'+'\x20Z.x,\x20\x20\x20\x20\x20'+'\x20Z.w\x20-\x20Y.x'+',\x20\x20\x20\x20\x201.0\x20'+'-\x20Y.y\x20-\x20Z.'+'z\x0a\x20\x20\x20\x20);\x0a}'+'\x0a',YM='\x0avar\x20sh0:\x20'+'texture_2d'+'<f32>;\x0a\x0aun'+'iform\x20sh0_'+'mins:\x20vec4'+'f;\x0auniform'+'\x20sh0_maxs:'+'\x20vec4f;\x0a\x0ac'+'onst\x20SH_C0'+':\x20f32\x20=\x200.'+'2820947917'+'7387814;\x0a\x0a'+'fn\x20readCol'+'or(source:'+'\x20ptr<funct'+'ion,\x20Splat'+'Source>)\x20-'+'>\x20vec4f\x20{\x0a'+'\x20\x20\x20\x20let\x20cl'+'r:\x20vec4f\x20='+'\x20mix(unifo'+'rm.sh0_min'+'s,\x20uniform'+'.sh0_maxs,'+'\x20textureLo'+'ad(sh0,\x20so'+'urce.uv,\x200'+'));\x0a\x20\x20\x20\x20re'+'turn\x20vec4f'+'(vec3f(0.5'+')\x20+\x20clr.xy'+'z\x20*\x20SH_C0,'+'\x201.0\x20/\x20(1.'+'0\x20+\x20exp(-c'+'lr.w)));\x0a}'+'\x0a',KM='\x0avar\x20packe'+'dTexture:\x20'+'texture_2d'+'<u32>;\x0a\x0aun'+'iform\x20mean'+'s_mins:\x20ve'+'c3f;\x0aunifo'+'rm\x20means_m'+'axs:\x20vec3f'+';\x0a\x0auniform'+'\x20scales_mi'+'ns:\x20vec3f;'+'\x0auniform\x20s'+'cales_maxs'+':\x20vec3f;\x0a\x0a'+'fn\x20unpackU'+'32(u:\x20u32)'+'\x20->\x20vec4f\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20vec4f(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20f3'+'2((u\x20>>\x2024'+'u)\x20&\x200xFFu'+')\x20/\x20255.0,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'32((u\x20>>\x201'+'6u)\x20&\x200xFF'+'u)\x20/\x20255.0'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'f32((u\x20>>\x20'+'8u)\x20&\x200xFF'+'u)\x20/\x20255.0'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'f32(u\x20&\x200x'+'FFu)\x20/\x20255'+'.0\x0a\x20\x20\x20\x20);\x0a'+'}\x0a\x0avar<pri'+'vate>\x20pack'+'edSample:\x20'+'vec4<u32>;'+'\x0a\x0a//\x20read\x20'+'the\x20model-'+'space\x20cent'+'er\x20of\x20the\x20'+'gaussian\x0af'+'n\x20readCent'+'er(source:'+'\x20ptr<funct'+'ion,\x20Splat'+'Source>)\x20-'+'>\x20vec3f\x20{\x0a'+'\x0a\x20\x20\x20\x20packe'+'dSample\x20=\x20'+'textureLoa'+'d(packedTe'+'xture,\x20sou'+'rce.uv,\x200)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20l:\x20vec3f\x20'+'=\x20unpackU3'+'2(packedSa'+'mple.x).xy'+'z;\x0a\x20\x20\x20\x20let'+'\x20u:\x20vec3f\x20'+'=\x20unpackU3'+'2(packedSa'+'mple.y).xy'+'z;\x0a\x20\x20\x20\x20let'+'\x20n:\x20vec3f\x20'+'=\x20(l\x20*\x20255'+'.0\x20+\x20u\x20*\x202'+'55.0\x20*\x20256'+'.0)\x20/\x206553'+'5.0;\x0a\x20\x20\x20\x20l'+'et\x20v:\x20vec3'+'f\x20=\x20mix(un'+'iform.mean'+'s_mins,\x20un'+'iform.mean'+'s_maxs,\x20n)'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20sign(v'+')\x20*\x20(exp(a'+'bs(v))\x20-\x201'+'.0);\x0a}\x0a\x0aco'+'nst\x20norm:\x20'+'f32\x20=\x202.0\x20'+'/\x20sqrt(2.0'+');\x0a\x0a//\x20sam'+'ple\x20covari'+'ance\x20vecto'+'rs\x0afn\x20read'+'Covariance'+'(source:\x20p'+'tr<functio'+'n,\x20SplatSo'+'urce>,\x20cov'+'A_ptr:\x20ptr'+'<function,'+'\x20vec3f>,\x20c'+('ovB_ptr:\x20p'+'tr<functio'+'n,\x20vec3f>)'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20qdata:\x20ve'+'c4f\x20=\x20unpa'+'ckU32(pack'+'edSample.z'+');\x0a\x20\x20\x20\x20let'+'\x20sdata:\x20ve'+'c3f\x20=\x20unpa'+'ckU32(pack'+'edSample.w'+').xyz;\x0a\x0a\x20\x20'+'\x20\x20let\x20abc:'+'\x20vec3f\x20=\x20('+'qdata.xyz\x20'+'-\x200.5)\x20*\x20n'+'orm;\x0a\x20\x20\x20\x20l'+'et\x20d:\x20f32\x20'+'=\x20sqrt(max'+'(0.0,\x201.0\x20'+'-\x20dot(abc,'+'\x20abc)));\x0a\x0a'+'\x20\x20\x20\x20let\x20mo'+'de:\x20u32\x20=\x20'+'u32(qdata.'+'w\x20*\x20255.0\x20'+'+\x200.5)\x20-\x202'+'52u;\x0a\x0a\x20\x20\x20\x20'+'var\x20quat:\x20'+'vec4f;\x0a\x20\x20\x20'+'\x20if\x20(mode\x20'+'==\x200u)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20qua'+'t\x20=\x20vec4f('+'d,\x20abc);\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'if\x20(mode\x20='+'=\x201u)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20quat'+'\x20=\x20vec4f(a'+'bc.x,\x20d,\x20a'+'bc.y,\x20abc.'+'z);\x0a\x20\x20\x20\x20}\x20'+'else\x20if\x20(m'+'ode\x20==\x202u)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20quat\x20=\x20ve'+'c4f(abc.x,'+'\x20abc.y,\x20d,'+'\x20abc.z);\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'quat\x20=\x20vec'+'4f(abc.x,\x20'+'abc.y,\x20abc'+'.z,\x20d);\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x0a\x20\x20\x20\x20'+'let\x20rot:\x20m'+'at3x3f\x20=\x20q'+'uatToMat3('+'quat);\x0a\x20\x20\x20'+'\x20let\x20scale'+':\x20vec3f\x20=\x20'+'exp(mix(un'+'iform.scal'+'es_mins,\x20u'+'niform.sca'+'les_maxs,\x20'+'sdata));\x0a\x0a'+'\x20\x20\x20\x20//\x20M\x20='+'\x20S\x20*\x20R\x0a\x20\x20\x20'+'\x20let\x20M:\x20ma'+'t3x3f\x20=\x20tr'+'anspose(ma'+'t3x3f(\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20scale'+'.x\x20*\x20rot[0'+'],\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20scale.y\x20*'+'\x20rot[1],\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le.z\x20*\x20rot'+'[2]\x0a\x20\x20\x20\x20))'+';\x0a\x0a\x20\x20\x20\x20*co'+'vA_ptr\x20=\x20v'+'ec3f(dot(M'+'[0],\x20M[0])'+',\x20dot(M[0]'+',\x20M[1]),\x20d'+'ot(M[0],\x20M'+'[2]));\x0a\x20\x20\x20'+'\x20*covB_ptr'+'\x20=\x20vec3f(d'+'ot(M[1],\x20M'+'[1]),\x20dot('+'M[1],\x20M[2]'+'),\x20dot(M[2'+'],\x20M[2]));')+'\x0a}\x0a',ZM='\x0avar\x20sh_ce'+'ntroids:\x20t'+'exture_2d<'+'f32>;\x0a\x0auni'+'form\x20shN_m'+'ins:\x20f32;\x0a'+'uniform\x20sh'+'N_maxs:\x20f3'+'2;\x0a\x0afn\x20rea'+'dSHData(so'+'urce:\x20ptr<'+'function,\x20'+'SplatSourc'+'e>,\x20sh:\x20pt'+'r<function'+',\x20array<ve'+'c3f,\x20SH_CO'+'EFFS>>,\x20sc'+'ale:\x20ptr<f'+'unction,\x20f'+'32>)\x20{\x0a\x20\x20\x20'+'\x20//\x20extrac'+'t\x20spherica'+'l\x20harmonic'+'s\x20palette\x20'+'index\x0a\x20\x20\x20\x20'+'let\x20t:\x20vec'+'2<i32>\x20=\x20v'+'ec2<i32>(i'+'32(packedS'+'ample.x\x20&\x20'+'255u),\x20i32'+'(packedSam'+'ple.y\x20&\x2025'+'5u));\x0a\x20\x20\x20\x20'+'let\x20n:\x20i32'+'\x20=\x20t.x\x20+\x20t'+'.y\x20*\x20256;\x0a'+'\x20\x20\x20\x20let\x20u:'+'\x20i32\x20=\x20(n\x20'+'%\x2064)\x20*\x20SH'+'_COEFFS;\x0a\x20'+'\x20\x20\x20let\x20v:\x20'+'i32\x20=\x20n\x20/\x20'+'64;\x0a\x0a\x20\x20\x20\x20/'+'/\x20calculat'+'e\x20offset\x20i'+'nto\x20the\x20ce'+'ntroids\x20te'+'xture\x20and\x20'+'read\x20conse'+'cutive\x20tex'+'els\x0a\x20\x20\x20\x20fo'+'r\x20(var\x20i:\x20'+'i32\x20=\x200;\x20i'+'\x20<\x20SH_COEF'+'FS;\x20i\x20=\x20i\x20'+'+\x201)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20sh[i]'+'\x20=\x20mix(vec'+'3f(uniform'+'.shN_mins)'+',\x20vec3f(un'+'iform.shN_'+'maxs),\x20tex'+'tureLoad(s'+'h_centroid'+'s,\x20vec2<i3'+'2>(u\x20+\x20i,\x20'+'v),\x200).xyz'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20*scale'+'\x20=\x201.0;\x0a}\x0a',QM='\x0auniform\x20v'+'iewport:\x20v'+'ec2f;\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20view'+'port\x20dimen'+'sions\x0aunif'+'orm\x20camera'+'_params:\x20v'+'ec4f;\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x201\x20/\x20far,\x20'+'far,\x20near,'+'\x20isOrtho\x0a\x0a'+'//\x20calcula'+'te\x20the\x20cli'+'p-space\x20of'+'fset\x20from\x20'+'the\x20center'+'\x20for\x20this\x20'+'gaussian\x0af'+'n\x20initCorn'+'er(source:'+'\x20ptr<funct'+'ion,\x20Splat'+'Source>,\x20c'+'enter:\x20ptr'+'<function,'+'\x20SplatCent'+'er>,\x20corne'+'r:\x20ptr<fun'+'ction,\x20Spl'+'atCorner>)'+'\x20->\x20bool\x20{'+'\x0a\x20\x20\x20\x20//\x20ge'+'t\x20covarian'+'ce\x0a\x20\x20\x20\x20var'+'\x20covA:\x20vec'+'3f;\x0a\x20\x20\x20\x20va'+'r\x20covB:\x20ve'+'c3f;\x0a\x20\x20\x20\x20r'+'eadCovaria'+'nce(source'+',\x20&covA,\x20&'+'covB);\x0a\x0a\x20\x20'+'\x20\x20let\x20Vrk\x20'+'=\x20mat3x3f('+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3f(covA.'+'x,\x20covA.y,'+'\x20covA.z),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3f(covA.y'+',\x20covB.x,\x20'+'covB.y),\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3f(covA.z,'+'\x20covB.y,\x20c'+'ovB.z)\x0a\x20\x20\x20'+'\x20);\x0a\x0a\x20\x20\x20\x20l'+'et\x20focal\x20='+'\x20uniform.v'+'iewport.x\x20'+'*\x20center.p'+'rojMat00;\x0a'+'\x0a\x20\x20\x20\x20let\x20v'+'\x20=\x20select('+'center.vie'+'w.xyz,\x20vec'+'3f(0.0,\x200.'+'0,\x201.0),\x20u'+'niform.cam'+'era_params'+'.w\x20==\x201.0)'+';\x0a\x20\x20\x20\x20let\x20'+'J1\x20=\x20focal'+'\x20/\x20v.z;\x0a\x20\x20'+'\x20\x20let\x20J2\x20='+'\x20-J1\x20/\x20v.z'+'\x20*\x20v.xy;\x0a\x20'+'\x20\x20\x20let\x20J\x20='+'\x20mat3x3f(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3f(J1,\x200.'+'0,\x20J2.x),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3f(0.0,\x20J'+'1,\x20J2.y),\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3f(0.0,\x200'+'.0,\x200.0)\x0a\x20'+'\x20\x20\x20);\x0a\x0a\x20\x20\x20'+'\x20let\x20W\x20=\x20t'+'ranspose(m'+'at3x3f(cen'+'ter.modelV'+'iew[0].xyz'+',\x20center.m'+'odelView[1'+'].xyz,\x20cen'+('ter.modelV'+'iew[2].xyz'+'));\x0a\x20\x20\x20\x20le'+'t\x20T\x20=\x20W\x20*\x20'+'J;\x0a\x20\x20\x20\x20let'+'\x20cov\x20=\x20tra'+'nspose(T)\x20'+'*\x20Vrk\x20*\x20T;'+'\x0a\x0a\x20\x20\x20\x20#if\x20'+'GSPLAT_AA\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20calculate'+'\x20AA\x20factor'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20detOrig'+'\x20=\x20cov[0]['+'0]\x20*\x20cov[1'+'][1]\x20-\x20cov'+'[0][1]\x20*\x20c'+'ov[1][0];\x20'+'//\x20Using\x20['+'0][1]\x20*\x20[1'+'][0]\x20as\x20ma'+'trix\x20might'+'\x20not\x20be\x20pe'+'rfectly\x20sy'+'mmetric\x20nu'+'merically\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20detBlur\x20'+'=\x20(cov[0]['+'0]\x20+\x200.3)\x20'+'*\x20(cov[1]['+'1]\x20+\x200.3)\x20'+'-\x20cov[0][1'+']\x20*\x20cov[1]'+'[0];\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20corner.'+'aaFactor\x20='+'\x20sqrt(detO'+'rig\x20/\x20detB'+'lur);\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20let\x20diag'+'onal1\x20=\x20co'+'v[0][0]\x20+\x20'+'0.3;\x0a\x20\x20\x20\x20l'+'et\x20offDiag'+'onal\x20=\x20cov'+'[0][1];\x0a\x20\x20'+'\x20\x20let\x20diag'+'onal2\x20=\x20co'+'v[1][1]\x20+\x20'+'0.3;\x0a\x0a\x20\x20\x20\x20'+'let\x20mid\x20=\x20'+'0.5\x20*\x20(dia'+'gonal1\x20+\x20d'+'iagonal2);'+'\x0a\x20\x20\x20\x20let\x20r'+'adius\x20=\x20le'+'ngth(vec2f'+'((diagonal'+'1\x20-\x20diagon'+'al2)\x20/\x202.0'+',\x20offDiago'+'nal));\x0a\x20\x20\x20'+'\x20let\x20lambd'+'a1\x20=\x20mid\x20+'+'\x20radius;\x0a\x20'+'\x20\x20\x20let\x20lam'+'bda2\x20=\x20max'+'(mid\x20-\x20rad'+'ius,\x200.1);'+'\x0a\x0a\x20\x20\x20\x20//\x20U'+'se\x20the\x20sma'+'ller\x20viewp'+'ort\x20dimens'+'ion\x20to\x20lim'+'it\x20the\x20ker'+'nel\x20size\x20r'+'elative\x20to'+'\x20the\x20scree'+'n\x20resoluti'+'on.\x0a\x20\x20\x20\x20le'+'t\x20vmin\x20=\x20m'+'in(1024.0,'+'\x20min(unifo'+'rm.viewpor'+'t.x,\x20unifo'+'rm.viewpor'+'t.y));\x0a\x0a\x20\x20'+'\x20\x20let\x20l1\x20='+'\x202.0\x20*\x20min'+'(sqrt(2.0\x20'+'*\x20lambda1)'+',\x20vmin);\x0a\x20'+'\x20\x20\x20let\x20l2\x20'+'=\x202.0\x20*\x20mi'+'n(sqrt(2.0'+'\x20*\x20lambda2')+('),\x20vmin);\x0a'+'\x0a\x20\x20\x20\x20//\x20ea'+'rly-out\x20ga'+'ussians\x20sm'+'aller\x20than'+'\x202\x20pixels\x0a'+'\x20\x20\x20\x20if\x20(l1'+'\x20<\x202.0\x20&&\x20'+'l2\x20<\x202.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20fal'+'se;\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20let\x20c'+'\x20=\x20center.'+'proj.ww\x20/\x20'+'uniform.vi'+'ewport;\x0a\x0a\x20'+'\x20\x20\x20//\x20cull'+'\x20against\x20f'+'rustum\x20x/y'+'\x20axes\x0a\x20\x20\x20\x20'+'if\x20(any((a'+'bs(center.'+'proj.xy)\x20-'+'\x20vec2f(max'+'(l1,\x20l2))\x20'+'*\x20c)\x20>\x20cen'+'ter.proj.w'+'w))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20false;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20l'+'et\x20diagona'+'lVector\x20=\x20'+'normalize('+'vec2f(offD'+'iagonal,\x20l'+'ambda1\x20-\x20d'+'iagonal1))'+';\x0a\x20\x20\x20\x20let\x20'+'v1\x20=\x20l1\x20*\x20'+'diagonalVe'+'ctor;\x0a\x20\x20\x20\x20'+'let\x20v2\x20=\x20l'+'2\x20*\x20vec2f('+'diagonalVe'+'ctor.y,\x20-d'+'iagonalVec'+'tor.x);\x20//'+'\x20Swizzle\x0a\x0a'+'\x20\x20\x20\x20corner'+'.offset\x20=\x20'+'(source.co'+'rnerUV.x\x20*'+'\x20v1\x20+\x20sour'+'ce.cornerU'+'V.y\x20*\x20v2)\x20'+'*\x20c;\x0a\x20\x20\x20\x20c'+'orner.uv\x20='+'\x20source.co'+'rnerUV;\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'true;\x0a}\x0a'),JM='\x0avar\x20trans'+'formA:\x20tex'+'ture_2d<u3'+'2>;\x0avar\x20tr'+'ansformB:\x20'+'texture_2d'+'<f32>;\x0a\x0a//'+'\x20work\x20valu'+'es\x0avar<pri'+'vate>\x20tAw:'+'\x20u32;\x0a\x0a//\x20'+'read\x20the\x20m'+'odel-space'+'\x20center\x20of'+'\x20the\x20gauss'+'ian\x0afn\x20rea'+'dCenter(so'+'urce:\x20ptr<'+'function,\x20'+'SplatSourc'+'e>)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20/'+'/\x20read\x20tra'+'nsform\x20dat'+'a\x0a\x20\x20\x20\x20let\x20'+'tA:\x20vec4<u'+'32>\x20=\x20text'+'ureLoad(tr'+'ansformA,\x20'+'source.uv,'+'\x200);\x0a\x20\x20\x20\x20t'+'Aw\x20=\x20tA.w;'+'\x0a\x20\x20\x20\x20retur'+'n\x20bitcast<'+'vec3f>(tA.'+'xyz);\x0a}\x0a\x0af'+'n\x20unpackRo'+'tation(pac'+'ked:\x20vec3f'+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20vec4f('+'packed.xyz'+',\x20sqrt(max'+'(0.0,\x201.0\x20'+'-\x20dot(pack'+'ed,\x20packed'+'))));\x0a}\x0a\x0a/'+'/\x20sample\x20c'+'ovariance\x20'+'vectors\x0afn'+'\x20readCovar'+'iance(sour'+'ce:\x20ptr<fu'+'nction,\x20Sp'+'latSource>'+',\x20covA_ptr'+':\x20ptr<func'+'tion,\x20vec3'+'f>,\x20covB_p'+'tr:\x20ptr<fu'+'nction,\x20ve'+'c3f>)\x20{\x0a\x20\x20'+'\x20\x20let\x20tB:\x20'+'vec4f\x20=\x20te'+'xtureLoad('+'transformB'+',\x20source.u'+'v,\x200);\x0a\x0a\x20\x20'+'\x20\x20let\x20rot:'+'\x20mat3x3f\x20='+'\x20quatToMat'+'3(unpackRo'+'tation(vec'+'3f(unpack2'+'x16float(b'+'itcast<u32'+'>(tAw)),\x20t'+'B.w)).wxyz'+');\x0a\x20\x20\x20\x20let'+'\x20scale:\x20ve'+'c3f\x20=\x20tB.x'+'yz;\x0a\x0a\x20\x20\x20\x20/'+'/\x20M\x20=\x20S\x20*\x20'+'R\x0a\x20\x20\x20\x20let\x20'+'M\x20=\x20transp'+'ose(mat3x3'+'f(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20scale.x\x20*'+'\x20rot[0],\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sca'+'le.y\x20*\x20rot'+'[1],\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20scale.z'+'\x20*\x20rot[2]\x0a'+'\x20\x20\x20\x20));\x0a\x0a\x20'+'\x20\x20\x20*covA_p'+'tr\x20=\x20vec3f'+'(dot(M[0],'+'\x20M[0]),\x20do'+('t(M[0],\x20M['+'1]),\x20dot(M'+'[0],\x20M[2])'+');\x0a\x20\x20\x20\x20*co'+'vB_ptr\x20=\x20v'+'ec3f(dot(M'+'[1],\x20M[1])'+',\x20dot(M[1]'+',\x20M[2]),\x20d'+'ot(M[2],\x20M'+'[2]));\x0a}\x0a'),eD='\x0a\x0a#include'+'\x20\x22tonemapp'+'ingPS\x22\x0a#in'+'clude\x20\x22dec'+'odePS\x22\x0a#in'+'clude\x20\x22gam'+'maPS\x22\x0a\x0a//\x20'+'prepare\x20th'+'e\x20output\x20c'+'olor\x20for\x20t'+'he\x20given\x20g'+'amma-space'+'\x20color\x0afn\x20'+'prepareOut'+'putFromGam'+'ma(gammaCo'+'lor:\x20vec3f'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20#if'+'\x20TONEMAP\x20='+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20G'+'AMMA\x20==\x20NO'+'NE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20co'+'nvert\x20to\x20l'+'inear\x20spac'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20decodeGam'+'ma3(gammaC'+'olor);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20out'+'put\x20gamma\x20'+'space\x20colo'+'r\x20directly'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'gammaColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ap'+'ply\x20tonema'+'pping\x20in\x20l'+'inear\x20spac'+'e\x20and\x20outp'+'ut\x20to\x20line'+'ar\x20or\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20gam'+'ma\x20(which\x20'+'is\x20handled'+'\x20by\x20gammaC'+'orrectOutp'+'ut)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'ammaCorrec'+'tOutput(to'+'neMap(deco'+'deGamma3(g'+'ammaColor)'+'));\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a',tD='\x0a\x0a#ifndef\x20'+'DITHER_NON'+'E\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22baye'+'rPS\x22\x0a\x20\x20\x20\x20#'+'include\x20\x22o'+'pacityDith'+'erPS\x22\x0a\x20\x20\x20\x20'+'varying\x20id'+':\x20f32;\x0a#en'+'dif\x0a\x0a#ifde'+'f\x20PICK_PAS'+'S\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22pick'+'PS\x22\x0a#endif'+'\x0a\x0a#if\x20defi'+'ned(SHADOW'+'_PASS)\x20||\x20'+'defined(PI'+'CK_PASS)\x20|'+'|\x20defined('+'PREPASS_PA'+'SS)\x0a\x20\x20\x20\x20un'+'iform\x20alph'+'aClip:\x20f32'+';\x0a#endif\x0a\x0a'+'#ifdef\x20PRE'+'PASS_PASS\x0a'+'\x20\x20\x20\x20varyin'+'g\x20vLinearD'+'epth:\x20f32;'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22float'+'AsUintPS\x22\x0a'+'#endif\x0a\x0a//'+'\x20Fast\x20appr'+'oximate\x20e^'+'x\x20based\x20on'+'\x20https://n'+'ic.schraud'+'olph.org/p'+'ubs/Schrau'+'dolph99.pd'+'f\x0aconst\x20EX'+'P_A:\x20f32\x20\x20'+'\x20\x20\x20\x20=\x201210'+'2203.0;\x20\x20\x20'+'//\x20\x202^23\x20'+'/\x20ln(2)\x0aco'+'nst\x20EXP_BC'+'_RMS:\x20i32\x20'+'=\x2010648668'+'08;\x20\x20\x20//\x20('+'127\x20<<\x2023)'+'\x20-\x2060801\x20*'+'\x208\x0afn\x20fast'+'Exp(x:\x20f32'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20var\x20i'+':\x20i32\x20=\x20i3'+'2(EXP_A\x20*\x20'+'x)\x20+\x20EXP_B'+'C_RMS;\x0a\x20\x20\x20'+'\x20return\x20bi'+'tcast<f32>'+'(i);\x0a}\x0a\x0ava'+'rying\x20gaus'+'sianUV:\x20ve'+'c2f;\x0avaryi'+'ng\x20gaussia'+'nColor:\x20ve'+'c4f;\x0a\x0a@fra'+'gment\x0afn\x20f'+'ragmentMai'+'n(input:\x20F'+'ragmentInp'+'ut)\x20->\x20Fra'+'gmentOutpu'+'t\x20{\x0a\x20\x20\x20\x20va'+'r\x20output:\x20'+'FragmentOu'+'tput;\x0a\x0a\x20\x20\x20'+'\x20let\x20A:\x20f3'+'2\x20=\x20dot(ga'+'ussianUV,\x20'+'gaussianUV'+');\x0a\x20\x20\x20\x20if\x20'+'(A\x20>\x201.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'discard;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20//\x20eval'+'uate\x20alpha'+'\x0a\x20\x20\x20\x20var\x20a'+'lpha:\x20f32\x20'+'=\x20fastExp('+'-A\x20*\x204.0)\x20'+'*\x20gaussian'+('Color.a;\x0a\x0a'+'\x20\x20\x20\x20#if\x20de'+'fined(SHAD'+'OW_PASS)\x20|'+'|\x20defined('+'PICK_PASS)'+'\x20||\x20define'+'d(PREPASS_'+'PASS)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20if\x20(al'+'pha\x20<\x20unif'+'orm.alphaC'+'lip)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'iscard;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20out'+'put;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20PI'+'CK_PASS\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.color\x20'+'=\x20getPickO'+'utput();\x0a\x0a'+'\x20\x20\x20\x20#elif\x20'+'SHADOW_PAS'+'S\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20vec4'+'f(0.0,\x200.0'+',\x200.0,\x201.0'+');\x0a\x0a\x20\x20\x20\x20#e'+'lif\x20PREPAS'+'S_PASS\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20outp'+'ut.color\x20='+'\x20float2vec'+'4(vLinearD'+'epth);\x0a\x0a\x20\x20'+'\x20\x20#else\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(alpha\x20<\x20('+'1.0\x20/\x20255.'+'0))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20di'+'scard;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifndef'+'\x20DITHER_NO'+'NE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20opaci'+'tyDither(&'+'alpha,\x20id\x20'+'*\x200.013);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.color\x20=\x20v'+'ec4f(input'+'.gaussianC'+'olor.xyz,\x20'+'alpha);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20output;\x0a}'),sD='\x0a\x0a#if\x20SH_B'+'ANDS\x20>\x200\x0a\x0a'+'//\x20unpack\x20'+'signed\x2011\x20'+'10\x2011\x20bits'+'\x0afn\x20unpack'+'111011s(bi'+'ts:\x20u32)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20(vec3f((v'+'ec3<u32>(b'+'its)\x20>>\x20ve'+'c3<u32>(21'+'u,\x2011u,\x200u'+'))\x20&\x20vec3<'+'u32>(0x7ff'+'u,\x200x3ffu,'+'\x200x7ffu))\x20'+'/\x20vec3f(20'+'47.0,\x201023'+'.0,\x202047.0'+'))\x20*\x202.0\x20-'+'\x201.0;\x0a}\x0a\x0as'+'truct\x20Scal'+'eAndSH\x20{\x0a\x20'+'\x20\x20\x20scale:\x20'+'f32,\x0a\x20\x20\x20\x20a'+':\x20vec3f,\x0a\x20'+'\x20\x20\x20b:\x20vec3'+'f,\x0a\x20\x20\x20\x20c:\x20'+'vec3f\x0a};\x0a\x0a'+'//\x20fetch\x20q'+'uantized\x20s'+'pherical\x20h'+'armonic\x20co'+'efficients'+'\x0afn\x20fetchS'+'cale(t_in:'+'\x20vec4<u32>'+')\x20->\x20Scale'+'AndSH\x20{\x0a\x20\x20'+'\x20\x20var\x20resu'+'lt:\x20ScaleA'+'ndSH;\x0a\x20\x20\x20\x20'+'result.sca'+'le\x20=\x20bitca'+'st<f32>(t_'+'in.x);\x0a\x20\x20\x20'+'\x20result.a\x20'+'=\x20unpack11'+'1011s(t_in'+'.y);\x0a\x20\x20\x20\x20r'+'esult.b\x20=\x20'+'unpack1110'+'11s(t_in.z'+');\x0a\x20\x20\x20\x20res'+'ult.c\x20=\x20un'+'pack111011'+'s(t_in.w);'+'\x0a\x20\x20\x20\x20retur'+'n\x20result;\x0a'+'}\x0a\x0astruct\x20'+'SH\x20{\x0a\x20\x20\x20\x20a'+':\x20vec3f,\x0a\x20'+'\x20\x20\x20b:\x20vec3'+'f,\x0a\x20\x20\x20\x20c:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20d:\x20vec3f\x0a'+'};\x0a\x0a//\x20fet'+'ch\x20quantiz'+'ed\x20spheric'+'al\x20harmoni'+'c\x20coeffici'+'ents\x0afn\x20fe'+'tch4(t_in:'+'\x20vec4<u32>'+')\x20->\x20SH\x20{\x0a'+'\x20\x20\x20\x20var\x20re'+'sult:\x20SH;\x0a'+'\x20\x20\x20\x20result'+'.a\x20=\x20unpac'+'k111011s(t'+'_in.x);\x0a\x20\x20'+'\x20\x20result.b'+'\x20=\x20unpack1'+'11011s(t_i'+'n.y);\x0a\x20\x20\x20\x20'+'result.c\x20='+'\x20unpack111'+'011s(t_in.'+'z);\x0a\x20\x20\x20\x20re'+'sult.d\x20=\x20u'+'npack11101'+'1s(t_in.w)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20result;'+'\x0a}\x0a\x0afn\x20fet'+'ch1(t_in:\x20'+'u32)\x20->\x20ve'+('c3f\x20{\x0a\x20\x20\x20\x20'+'return\x20unp'+'ack111011s'+'(t_in);\x0a}\x0a'+'\x0a#if\x20SH_BA'+'NDS\x20==\x201\x0a\x20'+'\x20\x20\x20var\x20spl'+'atSH_1to3:'+'\x20texture_2'+'d<u32>;\x0a\x0a\x20'+'\x20\x20\x20fn\x20read'+'SHData(sou'+'rce:\x20ptr<f'+'unction,\x20S'+'platSource'+'>,\x20sh:\x20ptr'+'<function,'+'\x20array<vec'+'3f,\x203>>,\x20s'+'cale:\x20ptr<'+'function,\x20'+'f32>)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'result\x20=\x20f'+'etchScale('+'textureLoa'+'d(splatSH_'+'1to3,\x20sour'+'ce.uv,\x200))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'*scale\x20=\x20r'+'esult.scal'+'e;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20sh[0]\x20=\x20r'+'esult.a;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sh['+'1]\x20=\x20resul'+'t.b;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[2]\x20='+'\x20result.c;'+'\x0a\x20\x20\x20\x20}\x0a#el'+'if\x20SH_BAND'+'S\x20==\x202\x0a\x20\x20\x20'+'\x20var\x20splat'+'SH_1to3:\x20t'+'exture_2d<'+'u32>;\x0a\x20\x20\x20\x20'+'var\x20splatS'+'H_4to7:\x20te'+'xture_2d<u'+'32>;\x0a\x20\x20\x20\x20v'+'ar\x20splatSH'+'_8to11:\x20te'+'xture_2d<u'+'32>;\x0a\x0a\x20\x20\x20\x20'+'fn\x20readSHD'+'ata(source'+':\x20ptr<func'+'tion,\x20Spla'+'tSource>,\x20'+'sh:\x20ptr<fu'+'nction,\x20ar'+'ray<vec3f,'+'\x208>>,\x20scal'+'e:\x20ptr<fun'+'ction,\x20f32'+'>)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20fir'+'st:\x20ScaleA'+'ndSH\x20=\x20fet'+'chScale(te'+'xtureLoad('+'splatSH_1t'+'o3,\x20source'+'.uv,\x200));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20*s'+'cale\x20=\x20fir'+'st.scale;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[0]\x20=\x20firs'+'t.a;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[1]\x20='+'\x20first.b;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[2]\x20=\x20firs'+'t.c;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20se'+'cond:\x20SH\x20='+'\x20fetch4(te'+'xtureLoad('+'splatSH_4t'+'o7,\x20source'+'.uv,\x200));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[3]\x20=\x20seco'+'nd.a;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20sh[4]\x20'+'=\x20second.b'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'sh[5]\x20=\x20se')+('cond.c;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20sh[6'+']\x20=\x20second'+'.d;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[7]\x20='+'\x20fetch1(te'+'xtureLoad('+'splatSH_8t'+'o11,\x20sourc'+'e.uv,\x200).x'+');\x0a\x20\x20\x20\x20}\x0a#'+'else\x0a\x20\x20\x20\x20v'+'ar\x20splatSH'+'_1to3:\x20tex'+'ture_2d<u3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20splatSH_'+'4to7:\x20text'+'ure_2d<u32'+'>;\x0a\x20\x20\x20\x20var'+'\x20splatSH_8'+'to11:\x20text'+'ure_2d<u32'+'>;\x0a\x20\x20\x20\x20var'+'\x20splatSH_1'+'2to15:\x20tex'+'ture_2d<u3'+'2>;\x0a\x0a\x20\x20\x20\x20f'+'n\x20readSHDa'+'ta(source:'+'\x20ptr<funct'+'ion,\x20Splat'+'Source>,\x20s'+'h:\x20ptr<fun'+'ction,\x20arr'+'ay<vec3f,\x20'+'15>>,\x20scal'+'e:\x20ptr<fun'+'ction,\x20f32'+'>)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20fir'+'st:\x20ScaleA'+'ndSH\x20=\x20fet'+'chScale(te'+'xtureLoad('+'splatSH_1t'+'o3,\x20source'+'.uv,\x200));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20*s'+'cale\x20=\x20fir'+'st.scale;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[0]\x20=\x20firs'+'t.a;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20sh[1]\x20='+'\x20first.b;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[2]\x20=\x20firs'+'t.c;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20se'+'cond:\x20SH\x20='+'\x20fetch4(te'+'xtureLoad('+'splatSH_4t'+'o7,\x20source'+'.uv,\x200));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20sh'+'[3]\x20=\x20seco'+'nd.a;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20sh[4]\x20'+'=\x20second.b'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'sh[5]\x20=\x20se'+'cond.c;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20sh[6'+']\x20=\x20second'+'.d;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20thi'+'rd:\x20SH\x20=\x20f'+'etch4(text'+'ureLoad(sp'+'latSH_8to1'+'1,\x20source.'+'uv,\x200));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sh['+'7]\x20=\x20third'+'.a;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20sh[8]\x20=\x20'+'third.b;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20sh['+'9]\x20=\x20third'+'.c;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20sh[10]\x20='+'\x20third.d;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20fourth:'+'\x20SH\x20=\x20fetc'+'h4(texture'+'Load(splat'+'SH_12to15,')+('\x20source.uv'+',\x200));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20sh[11'+']\x20=\x20fourth'+'.a;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20sh[12]\x20='+'\x20fourth.b;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'h[13]\x20=\x20fo'+'urth.c;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20sh[1'+'4]\x20=\x20fourt'+'h.d;\x0a\x20\x20\x20\x20}'+'\x0a#endif\x0a\x0a#'+'endif\x0a'),iD='\x0aattribute'+'\x20vertex_po'+'sition:\x20ve'+'c3f;\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20xy:\x20'+'cornerUV,\x20'+'z:\x20render\x20'+'order\x20offs'+'et\x0aattribu'+'te\x20vertex_'+'id_attrib:'+'\x20u32;\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20re'+'nder\x20order'+'\x20base\x0a\x0auni'+'form\x20numSp'+'lats:\x20u32;'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20total\x20nu'+'mber\x20of\x20sp'+'lats\x0avar\x20s'+'platOrder:'+'\x20texture_2'+'d<u32>;\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'per-splat\x20'+'index\x20to\x20s'+'ource\x20gaus'+'sian\x0a\x0a//\x20i'+'nitialize\x20'+'the\x20splat\x20'+'source\x20str'+'ucture\x0afn\x20'+'initSource'+'(source:\x20p'+'tr<functio'+'n,\x20SplatSo'+'urce>)\x20->\x20'+'bool\x20{\x0a\x20\x20\x20'+'\x20let\x20w:\x20u3'+'2\x20=\x20textur'+'eDimension'+'s(splatOrd'+'er,\x200).x;\x0a'+'\x0a\x20\x20\x20\x20//\x20ca'+'lculate\x20sp'+'lat\x20order\x0a'+'\x20\x20\x20\x20source'+'.order\x20=\x20v'+'ertex_id_a'+'ttrib\x20+\x20u3'+'2(vertex_p'+'osition.z)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'return\x20if\x20'+'out\x20of\x20ran'+'ge\x20(since\x20'+'the\x20last\x20b'+'lock\x20of\x20sp'+'lats\x20may\x20b'+'e\x20partiall'+'y\x20full)\x0a\x20\x20'+'\x20\x20if\x20(sour'+'ce.order\x20>'+'=\x20uniform.'+'numSplats)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20fa'+'lse;\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'orderUV\x20=\x20'+'vec2i(vec2'+'u(source.o'+'rder\x20%\x20w,\x20'+'source.ord'+'er\x20/\x20w));\x0a'+'\x0a\x20\x20\x20\x20//\x20re'+'ad\x20splat\x20i'+'d\x0a\x20\x20\x20\x20sour'+'ce.id\x20=\x20te'+'xtureLoad('+'splatOrder'+',\x20orderUV,'+'\x200).r;\x0a\x0a\x20\x20'+'\x20\x20//\x20map\x20i'+'d\x20to\x20uv\x0a\x20\x20'+'\x20\x20source.u'+'v\x20=\x20vec2i('+'vec2u(sour'+'ce.id\x20%\x20w,'+'\x20source.id'+'\x20/\x20w));\x0a\x0a\x20'+'\x20\x20\x20//\x20get\x20'+'the\x20corner'+'\x0a\x20\x20\x20\x20sourc'+'e.cornerUV'+'\x20=\x20vertex_'+'position.x'+'y;\x0a\x0a\x20\x20\x20\x20re'+('turn\x20true;'+'\x0a}\x0a'),rD='\x0a#include\x20'+'\x22gsplatCom'+'monVS\x22\x0a\x0ava'+'rying\x20gaus'+'sianUV:\x20ve'+'c2f;\x0avaryi'+'ng\x20gaussia'+'nColor:\x20ve'+'c4f;\x0a\x0a#ifn'+'def\x20DITHER'+'_NONE\x0a\x20\x20\x20\x20'+'varying\x20id'+':\x20f32;\x0a#en'+'dif\x0a\x0aconst'+'\x20discardVe'+'c:\x20vec4f\x20='+'\x20vec4f(0.0'+',\x200.0,\x202.0'+',\x201.0);\x0a\x0a#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x20'+'\x20\x20\x20varying'+'\x20vLinearDe'+'pth:\x20f32;\x0a'+'#endif\x0a\x0a@v'+'ertex\x0afn\x20v'+'ertexMain('+'input:\x20Ver'+'texInput)\x20'+'->\x20VertexO'+'utput\x20{\x0a\x20\x20'+'\x20\x20var\x20outp'+'ut:\x20Vertex'+'Output;\x0a\x0a\x20'+'\x20\x20\x20//\x20read'+'\x20gaussian\x20'+'details\x0a\x20\x20'+'\x20\x20var\x20sour'+'ce:\x20SplatS'+'ource;\x0a\x20\x20\x20'+'\x20if\x20(!init'+'Source(&so'+'urce))\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.positi'+'on\x20=\x20disca'+'rdVec;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20output;\x0a'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20let\x20model'+'Center:\x20ve'+'c3f\x20=\x20read'+'Center(&so'+'urce);\x0a\x0a\x20\x20'+'\x20\x20var\x20cent'+'er:\x20SplatC'+'enter;\x0a\x20\x20\x20'+'\x20if\x20(!init'+'Center(mod'+'elCenter,\x20'+'&center))\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.pos'+'ition\x20=\x20di'+'scardVec;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20pro'+'ject\x20cente'+'r\x20to\x20scree'+'n\x20space\x0a\x20\x20'+'\x20\x20var\x20corn'+'er:\x20SplatC'+'orner;\x0a\x20\x20\x20'+'\x20if\x20(!init'+'Corner(&so'+'urce,\x20&cen'+'ter,\x20&corn'+'er))\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20outpu'+'t.position'+'\x20=\x20discard'+'Vec;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'output;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20/'+'/\x20read\x20col'+'or\x0a\x20\x20\x20\x20var'+'\x20clr:\x20vec4'+'f\x20=\x20readCo'+'lor(&sourc'+'e);\x0a\x0a\x20\x20\x20\x20#'+'if\x20GSPLAT_'+'AA\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20apply\x20'+'AA\x20compens'+'ation\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20clr.a\x20'+('=\x20clr.a\x20*\x20'+'corner.aaF'+'actor;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20//\x20eval'+'uate\x20spher'+'ical\x20harmo'+'nics\x0a\x20\x20\x20\x20#'+'if\x20SH_BAND'+'S\x20>\x200\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20cal'+'culate\x20the'+'\x20model-spa'+'ce\x20view\x20di'+'rection\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'modelView3'+'x3\x20=\x20mat3x'+'3f(center.'+'modelView['+'0].xyz,\x20ce'+'nter.model'+'View[1].xy'+'z,\x20center.'+'modelView['+'2].xyz);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20dir\x20=\x20nor'+'malize(mod'+'elView3x3\x20'+'*\x20center.v'+'iew);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20re'+'ad\x20sh\x20coef'+'ficients\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20sh:\x20array'+'<vec3f,\x20SH'+'_COEFFS>;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20scale:\x20f'+'32;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20readSHDa'+'ta(&source'+',\x20&sh,\x20&sc'+'ale);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ev'+'aluate\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20clr\x20='+'\x20vec4f(clr'+'.xyz\x20+\x20eva'+'lSH(&sh,\x20d'+'ir)\x20*\x20scal'+'e,\x20clr.a);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20cli'+'pCorner(&c'+'orner,\x20clr'+'.w);\x0a\x0a\x20\x20\x20\x20'+'//\x20write\x20o'+'utput\x0a\x20\x20\x20\x20'+'output.pos'+'ition\x20=\x20ce'+'nter.proj\x20'+'+\x20vec4f(co'+'rner.offse'+'t,\x200.0,\x200.'+'0);\x0a\x20\x20\x20\x20ou'+'tput.gauss'+'ianUV\x20=\x20co'+'rner.uv;\x0a\x20'+'\x20\x20\x20output.'+'gaussianCo'+'lor\x20=\x20vec4'+'f(prepareO'+'utputFromG'+'amma(max(c'+'lr.xyz,\x20ve'+'c3f(0.0)))'+',\x20clr.w);\x0a'+'\x0a\x20\x20\x20\x20#ifnd'+'ef\x20DITHER_'+'NONE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'id\x20=\x20f32(s'+'ource.id);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20PREPAS'+'S_PASS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20outpu'+'t.vLinearD'+'epth\x20=\x20-ce'+'nter.view.'+'z;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a}\x0a'),aD='\x0a\x20\x20\x20\x20attri'+'bute\x20aPosi'+'tion:\x20vec2'+'f;\x0a\x20\x20\x20\x20var'+'ying\x20uv0:\x20'+'vec2f;\x0a\x20\x20\x20'+'\x20@vertex\x20f'+'n\x20vertexMa'+'in(input:\x20'+'VertexInpu'+'t)\x20->\x20Vert'+'exOutput\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20output:'+'\x20VertexOut'+'put;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'position\x20='+'\x20vec4f(inp'+'ut.aPositi'+'on,\x200.0,\x201'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'uv0\x20=\x20getI'+'mageEffect'+'UV((input.'+'aPosition\x20'+'+\x201.0)\x20*\x200'+'.5);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'output;\x0a\x20\x20'+'\x20\x20}\x0a',nD='\x0a//\x20Indire'+'ct\x20indexed'+'\x20draw\x20call'+'\x20parameter'+'s\x0astruct\x20D'+'rawIndexed'+'IndirectAr'+'gs\x20{\x0a\x20\x20\x20\x20i'+'ndexCount:'+'\x20u32,\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20Numb'+'er\x20of\x20indi'+'ces\x20to\x20dra'+'w\x0a\x20\x20\x20\x20inst'+'anceCount:'+'\x20u32,\x20\x20\x20\x20\x20'+'//\x20Number\x20'+'of\x20instanc'+'es\x20to\x20draw'+'\x0a\x20\x20\x20\x20first'+'Index:\x20u32'+',\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20Index\x20of'+'\x20the\x20first'+'\x20index\x20in\x20'+'the\x20index\x20'+'buffer\x0a\x20\x20\x20'+'\x20baseVerte'+'x:\x20i32,\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20Of'+'fset\x20added'+'\x20to\x20each\x20i'+'ndex\x20befor'+'e\x20fetching'+'\x20vertex\x0a\x20\x20'+'\x20\x20firstIns'+'tance:\x20u32'+'\x20\x20\x20\x20\x20\x20//\x20F'+'irst\x20insta'+'nce\x20ID\x0a};\x0a'+'\x0a//\x20Indire'+'ct\x20non-ind'+'exed\x20draw\x20'+'call\x20param'+'eters\x0astru'+'ct\x20DrawInd'+'irectArgs\x20'+'{\x0a\x20\x20\x20\x20vert'+'exCount:\x20u'+'32,\x20\x20\x20\x20\x20\x20\x20'+'//\x20Number\x20'+'of\x20vertice'+'s\x20to\x20draw\x0a'+'\x20\x20\x20\x20instan'+'ceCount:\x20u'+'32,\x20\x20\x20\x20\x20//'+'\x20Number\x20of'+'\x20instances'+'\x20to\x20draw\x0a\x20'+'\x20\x20\x20firstVe'+'rtex:\x20u32,'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'Index\x20of\x20t'+'he\x20first\x20v'+'ertex\x0a\x20\x20\x20\x20'+'firstInsta'+'nce:\x20u32,\x20'+'\x20\x20\x20\x20//\x20Fir'+'st\x20instanc'+'e\x20ID\x0a\x20\x20\x20\x20_'+'pad:\x20u32\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20Padd'+'ing\x20to\x20mat'+'ch\x20indexed'+'\x20size\x20(unu'+'sed)\x0a};\x0a',oD='\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22gamma'+'PS\x22\x0a\x20\x20\x20\x20va'+'rying\x20colo'+'r:\x20vec4f;\x0a'+'\x20\x20\x20\x20@fragm'+'ent\x0a\x20\x20\x20\x20fn'+'\x20fragmentM'+'ain(input\x20'+':\x20Fragment'+'Input)\x20->\x20'+'FragmentOu'+'tput\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20o'+'utput:\x20Fra'+'gmentOutpu'+'t;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20vec4'+'f(gammaCor'+'rectOutput'+'(decodeGam'+'ma3(input.'+'color.rgb)'+'),\x20input.c'+'olor.a);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a\x20\x20\x20\x20}\x0a',lD='\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_position'+':\x20vec4f;\x0a\x20'+'\x20\x20\x20attribu'+'te\x20vertex_'+'color:\x20vec'+'4f;\x0a\x20\x20\x20\x20un'+'iform\x20matr'+'ix_model:\x20'+'mat4x4f;\x0a\x20'+'\x20\x20\x20uniform'+'\x20matrix_vi'+'ewProjecti'+'on:\x20mat4x4'+'f;\x0a\x20\x20\x20\x20var'+'ying\x20color'+':\x20vec4f;\x0a\x20'+'\x20\x20\x20@vertex'+'\x0a\x20\x20\x20\x20fn\x20ve'+'rtexMain(i'+'nput\x20:\x20Ver'+'texInput)\x20'+'->\x20VertexO'+'utput\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'output\x20:\x20V'+'ertexOutpu'+'t;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20inpu'+'t.vertex_c'+'olor;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.position\x20'+'=\x20uniform.'+'matrix_vie'+'wProjectio'+'n\x20*\x20unifor'+'m.matrix_m'+'odel\x20*\x20inp'+'ut.vertex_'+'position;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a\x20\x20\x20\x20}\x0a',cD='\x0auniform\x20m'+'aterial_ir'+'idescenceR'+'efractionI'+'ndex:\x20f32;'+'\x0a\x0afn\x20iride'+'scence_ior'+'ToFresnelS'+'calar(tran'+'smittedIor'+':\x20f32,\x20inc'+'identIor:\x20'+'f32)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20re'+'turn\x20pow(('+'transmitte'+'dIor\x20-\x20inc'+'identIor)\x20'+'/\x20(transmi'+'ttedIor\x20+\x20'+'incidentIo'+'r),\x202.0);\x0a'+'}\x0a\x0afn\x20irid'+'escence_io'+'rToFresnel'+'Vec3(trans'+'mittedIor:'+'\x20vec3f,\x20in'+'cidentIor:'+'\x20f32)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20return\x20po'+'w((transmi'+'ttedIor\x20-\x20'+'vec3f(inci'+'dentIor))\x20'+'/\x20(transmi'+'ttedIor\x20+\x20'+'vec3f(inci'+'dentIor)),'+'\x20vec3f(2.0'+'));\x0a}\x0a\x0afn\x20'+'iridescenc'+'e_fresnelT'+'oIor(f0:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20let\x20sqrtF'+'0:\x20vec3f\x20='+'\x20sqrt(f0);'+'\x0a\x20\x20\x20\x20retur'+'n\x20(vec3f(1'+'.0)\x20+\x20sqrt'+'F0)\x20/\x20(vec'+'3f(1.0)\x20-\x20'+'sqrtF0);\x0a}'+'\x0a\x0aconst\x20XY'+'Z_TO_REC70'+'9:\x20mat3x3f'+'\x20=\x20mat3x3f'+'(\x0a\x20\x20\x20\x20vec3'+'f(3.240454'+'2,\x20-1.5371'+'385,\x20-0.49'+'85314),\x0a\x20\x20'+'\x20\x20vec3f(-0'+'.9692660,\x20'+'\x201.8760108'+',\x20\x200.04155'+'60),\x0a\x20\x20\x20\x20v'+'ec3f(0.055'+'6434,\x20-0.2'+'040259,\x20\x201'+'.0572252)\x0a'+');\x0a\x0afn\x20iri'+'descence_s'+'ensitivity'+'(opd:\x20f32,'+'\x20shift:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20PI:\x20f3'+'2\x20=\x203.1415'+'9265358979'+'3;\x0a\x20\x20\x20\x20let'+'\x20phase:\x20f3'+'2\x20=\x202.0\x20*\x20'+'PI\x20*\x20opd\x20*'+'\x201.0e-9;\x0a\x20'+'\x20\x20\x20const\x20v'+'al:\x20vec3f\x20'+'=\x20vec3f(5.'+'4856e-13,\x20'+'4.4201e-13'+',\x205.2481e-'+'13);\x0a\x20\x20\x20\x20c'+'onst\x20pos:\x20'+'vec3f\x20=\x20ve'+'c3f(1.6810'+'e+06,\x201.79'+('53e+06,\x202.'+'2084e+06);'+'\x0a\x20\x20\x20\x20const'+'\x20var_:\x20vec'+'3f\x20=\x20vec3f'+'(4.3278e+0'+'9,\x209.3046e'+'+09,\x206.612'+'1e+09);\x0a\x0a\x20'+'\x20\x20\x20var\x20xyz'+':\x20vec3f\x20=\x20'+'val\x20*\x20sqrt'+'(2.0\x20*\x20PI\x20'+'*\x20var_)\x20*\x20'+'cos(pos\x20*\x20'+'phase\x20+\x20sh'+'ift)\x20*\x20exp'+'(-pow(phas'+'e,\x202.0)\x20*\x20'+'var_);\x0a\x20\x20\x20'+'\x20xyz.x\x20=\x20x'+'yz.x\x20+\x209.7'+'470e-14\x20*\x20'+'sqrt(2.0\x20*'+'\x20PI\x20*\x204.52'+'82e+09)\x20*\x20'+'cos(2.2399'+'e+06\x20*\x20pha'+'se\x20+\x20shift'+'[0])\x20*\x20exp'+'(-4.5282e+'+'09\x20*\x20pow(p'+'hase,\x202.0)'+');\x0a\x20\x20\x20\x20xyz'+'\x20=\x20xyz\x20/\x20v'+'ec3f(1.068'+'5e-07);\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'XYZ_TO_REC'+'709\x20*\x20xyz;'+'\x0a}\x0a\x0afn\x20iri'+'descence_f'+'resnelScal'+'ar(cosThet'+'a:\x20f32,\x20f0'+':\x20f32)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'let\x20x:\x20f32'+'\x20=\x20clamp(1'+'.0\x20-\x20cosTh'+'eta,\x200.0,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'let\x20x2:\x20f3'+'2\x20=\x20x\x20*\x20x;'+'\x0a\x20\x20\x20\x20let\x20x'+'5:\x20f32\x20=\x20x'+'\x20*\x20x2\x20*\x20x2'+';\x0a\x20\x20\x20\x20retu'+'rn\x20f0\x20+\x20(1'+'.0\x20-\x20f0)\x20*'+'\x20x5;\x0a}\x0a\x0afn'+'\x20iridescen'+'ce_fresnel'+'Vec3(cosTh'+'eta:\x20f32,\x20'+'f0:\x20vec3f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'x:\x20f32\x20=\x20c'+'lamp(1.0\x20-'+'\x20cosTheta,'+'\x200.0,\x201.0)'+';\x0a\x20\x20\x20\x20let\x20'+'x2:\x20f32\x20=\x20'+'x\x20*\x20x;\x0a\x20\x20\x20'+'\x20let\x20x5:\x20f'+'32\x20=\x20x\x20*\x20x'+'2\x20*\x20x2;\x0a\x20\x20'+'\x20\x20return\x20f'+'0\x20+\x20(vec3f'+'(1.0)\x20-\x20f0'+')\x20*\x20x5;\x0a}\x0a'+'\x0afn\x20calcIr'+'idescence('+'outsideIor'+':\x20f32,\x20cos'+'Theta:\x20f32'+',\x20base_f0:'+'\x20vec3f,\x20ir'+'idescenceT'+'hickness:\x20'+'f32)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20PI:\x20f3'+'2\x20=\x203.1415'+'9265358979'+'3;\x0a\x0a\x20\x20\x20\x20le'+'t\x20iridesce'+'nceIor:\x20f3'+'2\x20=\x20mix(ou')+('tsideIor,\x20'+'uniform.ma'+'terial_iri'+'descenceRe'+'fractionIn'+'dex,\x20smoot'+'hstep(0.0,'+'\x200.03,\x20iri'+'descenceTh'+'ickness));'+'\x0a\x20\x20\x20\x20let\x20s'+'inTheta2Sq'+':\x20f32\x20=\x20po'+'w(outsideI'+'or\x20/\x20iride'+'scenceIor,'+'\x202.0)\x20*\x20(1'+'.0\x20-\x20pow(c'+'osTheta,\x202'+'.0));\x0a\x20\x20\x20\x20'+'let\x20cosThe'+'ta2Sq:\x20f32'+'\x20=\x201.0\x20-\x20s'+'inTheta2Sq'+';\x0a\x0a\x20\x20\x20\x20if\x20'+'(cosTheta2'+'Sq\x20<\x200.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20vec'+'3f(1.0);\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'let\x20cosThe'+'ta2:\x20f32\x20='+'\x20sqrt(cosT'+'heta2Sq);\x0a'+'\x0a\x20\x20\x20\x20let\x20r'+'0:\x20f32\x20=\x20i'+'ridescence'+'_iorToFres'+'nelScalar('+'iridescenc'+'eIor,\x20outs'+'ideIor);\x0a\x20'+'\x20\x20\x20let\x20r12'+':\x20f32\x20=\x20ir'+'idescence_'+'fresnelSca'+'lar(cosThe'+'ta,\x20r0);\x0a\x20'+'\x20\x20\x20let\x20r21'+':\x20f32\x20=\x20r1'+'2;\x0a\x20\x20\x20\x20let'+'\x20t121:\x20f32'+'\x20=\x201.0\x20-\x20r'+'12;\x0a\x0a\x20\x20\x20\x20l'+'et\x20phi12:\x20'+'f32\x20=\x20sele'+'ct(0.0,\x20PI'+',\x20iridesce'+'nceIor\x20<\x20o'+'utsideIor)'+';\x0a\x20\x20\x20\x20let\x20'+'phi21:\x20f32'+'\x20=\x20PI\x20-\x20ph'+'i12;\x0a\x0a\x20\x20\x20\x20'+'let\x20baseIo'+'r:\x20vec3f\x20='+'\x20iridescen'+'ce_fresnel'+'ToIor(base'+'_f0\x20+\x20vec3'+'f(0.0001))'+';\x0a\x20\x20\x20\x20let\x20'+'r1:\x20vec3f\x20'+'=\x20iridesce'+'nce_iorToF'+'resnelVec3'+'(baseIor,\x20'+'iridescenc'+'eIor);\x0a\x20\x20\x20'+'\x20let\x20r23:\x20'+'vec3f\x20=\x20ir'+'idescence_'+'fresnelVec'+'3(cosTheta'+'2,\x20r1);\x0a\x0a\x20'+'\x20\x20\x20let\x20phi'+'23:\x20vec3f\x20'+'=\x20select(v'+'ec3f(0.0),'+'\x20vec3f(PI)'+',\x20baseIor\x20'+'<\x20vec3f(ir'+'idescenceI'+'or));\x0a\x20\x20\x20\x20'+'let\x20opd:\x20f'+'32\x20=\x202.0\x20*'+'\x20iridescen'+'ceIor\x20*\x20ir'+'idescenceT')+('hickness\x20*'+'\x20cosTheta2'+';\x0a\x20\x20\x20\x20let\x20'+'phi:\x20vec3f'+'\x20=\x20vec3f(p'+'hi21)\x20+\x20ph'+'i23;\x20//\x20Pr'+'omote\x20scal'+'ar\x20phi21\x20t'+'o\x20vec3f\x0a\x0a\x20'+'\x20\x20\x20let\x20r12'+'3Sq:\x20vec3f'+'\x20=\x20clamp(v'+'ec3f(r12)\x20'+'*\x20r23,\x20vec'+'3f(1e-5),\x20'+'vec3f(0.99'+'99));\x0a\x20\x20\x20\x20'+'let\x20r123:\x20'+'vec3f\x20=\x20sq'+'rt(r123Sq)'+';\x0a\x20\x20\x20\x20let\x20'+'rs:\x20vec3f\x20'+'=\x20pow(vec3'+'f(t121),\x20v'+'ec3f(2.0))'+'\x20*\x20r23\x20/\x20('+'vec3f(1.0)'+'\x20-\x20r123Sq)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20c0:\x20vec3f'+'\x20=\x20vec3f(r'+'12)\x20+\x20rs;\x0a'+'\x20\x20\x20\x20var\x20i_'+'irid:\x20vec3'+'f\x20=\x20c0;\x0a\x0a\x20'+'\x20\x20\x20var\x20cm:'+'\x20vec3f\x20=\x20r'+'s\x20-\x20vec3f('+'t121);\x0a\x0a\x20\x20'+'\x20\x20cm\x20=\x20cm\x20'+'*\x20r123;\x0a\x20\x20'+'\x20\x20let\x20sm1:'+'\x20vec3f\x20=\x202'+'.0\x20*\x20iride'+'scence_sen'+'sitivity(1'+'.0\x20*\x20opd,\x20'+'1.0\x20*\x20phi)'+';\x0a\x20\x20\x20\x20i_ir'+'id\x20=\x20i_iri'+'d\x20+\x20cm\x20*\x20s'+'m1;\x0a\x0a\x20\x20\x20\x20c'+'m\x20=\x20cm\x20*\x20r'+'123;\x0a\x20\x20\x20\x20l'+'et\x20sm2:\x20ve'+'c3f\x20=\x202.0\x20'+'*\x20iridesce'+'nce_sensit'+'ivity(2.0\x20'+'*\x20opd,\x202.0'+'\x20*\x20phi);\x0a\x20'+'\x20\x20\x20i_irid\x20'+'=\x20i_irid\x20+'+'\x20cm\x20*\x20sm2;'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20max(i_i'+'rid,\x20vec3f'+'(0.0));\x0a}\x0a'+'\x0afn\x20getIri'+'descenceDi'+'ffraction('+'cosTheta:\x20'+'f32,\x20specu'+'larity:\x20ve'+'c3f,\x20iride'+'scenceThic'+'kness:\x20f32'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20calcIr'+'idescence('+'1.0,\x20cosTh'+'eta,\x20specu'+'larity,\x20ir'+'idescenceT'+'hickness);'+'\x0a}\x0a'),hD='\x0a#ifdef\x20ST'+'D_IRIDESCE'+'NCE_CONSTA'+'NT\x0a\x20\x20\x20\x20uni'+'form\x20mater'+'ial_irides'+'cence:\x20f32'+';\x0a#endif\x0a\x0a'+'fn\x20getIrid'+'escence()\x20'+'{\x0a\x20\x20\x20\x20var\x20'+'iridescenc'+'e\x20=\x201.0;\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCE_CON'+'STANT\x0a\x20\x20\x20\x20'+'iridescenc'+'e\x20=\x20irides'+'cence\x20*\x20un'+'iform.mate'+'rial_iride'+'scence;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCE_TEX'+'TURE\x0a\x20\x20\x20\x20i'+'ridescence'+'\x20=\x20iridesc'+'ence\x20*\x20tex'+'tureSample'+'Bias({STD_'+'IRIDESCENC'+'E_TEXTURE_'+'NAME},\x20{ST'+'D_IRIDESCE'+'NCE_TEXTUR'+'E_NAME}Sam'+'pler,\x20{STD'+'_IRIDESCEN'+'CE_TEXTURE'+'_UV},\x20unif'+'orm.textur'+'eBias).{ST'+'D_IRIDESCE'+'NCE_TEXTUR'+'E_CHANNEL}'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20dI'+'ridescence'+'\x20=\x20iridesc'+'ence;\x20\x0a}\x0a',dD='\x0auniform\x20m'+'aterial_ir'+'idescenceT'+'hicknessMa'+'x:\x20f32;\x0a\x0a#'+'ifdef\x20STD_'+'IRIDESCENC'+'ETHICKNESS'+'_TEXTURE\x0a\x20'+'\x20\x20\x20uniform'+'\x20material_'+'iridescenc'+'eThickness'+'Min:\x20f32;\x0a'+'#endif\x0a\x0afn'+'\x20getIrides'+'cenceThick'+'ness()\x20{\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCETHIC'+'KNESS_TEXT'+'URE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20blen'+'d:\x20f32\x20=\x20t'+'extureSamp'+'leBias({ST'+'D_IRIDESCE'+'NCETHICKNE'+'SS_TEXTURE'+'_NAME},\x20{S'+'TD_IRIDESC'+'ENCETHICKN'+'ESS_TEXTUR'+'E_NAME}Sam'+'pler,\x20{STD'+'_IRIDESCEN'+'CETHICKNES'+'S_TEXTURE_'+'UV},\x20unifo'+'rm.texture'+'Bias).{STD'+'_IRIDESCEN'+'CETHICKNES'+'S_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20iridesce'+'nceThickne'+'ss:\x20f32\x20=\x20'+'mix(unifor'+'m.material'+'_iridescen'+'ceThicknes'+'sMin,\x20unif'+'orm.materi'+'al_iridesc'+'enceThickn'+'essMax,\x20bl'+'end);\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20ir'+'idescenceT'+'hickness:\x20'+'f32\x20=\x20unif'+'orm.materi'+'al_iridesc'+'enceThickn'+'essMax;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20dIride'+'scenceThic'+'kness\x20=\x20ir'+'idescenceT'+'hickness;\x20'+'\x0a}\x0a',fD='\x0a#ifdef\x20ST'+'D_IOR_CONS'+'TANT\x0a\x20\x20\x20\x20u'+'niform\x20mat'+'erial_refr'+'actionInde'+'x:\x20f32;\x0a#e'+'ndif\x0a\x0afn\x20g'+'etIor()\x20{\x0a'+'#ifdef\x20STD'+'_IOR_CONST'+'ANT\x0a\x20\x20\x20\x20dI'+'or\x20=\x20unifo'+'rm.materia'+'l_refracti'+'onIndex;\x0a#'+'else\x0a\x20\x20\x20\x20d'+'Ior\x20=\x201.0\x20'+'/\x201.5;\x0a#en'+'dif\x0a}\x0a',uD='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x0a\x20\x20\x20\x20un'+'iform\x20ligh'+'t{i}_color'+':\x20vec3f;\x0a\x0a'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}TYPE'+'\x20==\x20DIRECT'+'IONAL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20light{i}'+'_direction'+':\x20vec3f;\x0a\x20'+'\x20\x20\x20#else\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#d'+'efine\x20LIT_'+'CODE_LIGHT'+'S_POINT\x20//'+'\x20include\x20f'+'unctionali'+'ty\x20for\x20poi'+'nt\x20lights\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20lig'+'ht{i}_posi'+'tion:\x20vec3'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20l'+'ight{i}_ra'+'dius:\x20f32;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'SPOT\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#d'+'efine\x20LIT_'+'CODE_LIGHT'+'S_SPOT\x20//\x20'+'include\x20fu'+'nctionalit'+'y\x20for\x20spot'+'\x20lights\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20l'+'ight{i}_di'+'rection:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20ligh'+'t{i}_inner'+'ConeAngle:'+'\x20f32;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20ligh'+'t{i}_outer'+'ConeAngle:'+'\x20f32;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20//\x20'+'area\x20light'+'s\x0a\x20\x20\x20\x20#if\x20'+'LIGHT{i}SH'+'APE\x20!=\x20PUN'+'CTUAL\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#defi'+'ne\x20LIT_COD'+'E_FALLOFF_'+'SQUARED\x20//'+'\x20include\x20f'+'unctionali'+'ty\x20for\x20inv'+'erse\x20squar'+'ed\x20falloff'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20light{i}'+'_position:'+'\x20vec3f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20l'+'ight{i}_ha'+'lfWidth:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20light{i}'+'_halfHeigh'+'t:\x20vec3f;\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}FALLOFF\x20='+'=\x20LINEAR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+('\x20#define\x20L'+'IT_CODE_FA'+'LLOFF_LINE'+'AR\x20//\x20incl'+'ude\x20functi'+'onality\x20fo'+'r\x20linear\x20f'+'alloff\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}FALLOFF'+'\x20==\x20INVERS'+'ESQUARED\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#define\x20L'+'IT_CODE_FA'+'LLOFF_SQUA'+'RED\x20//\x20inc'+'lude\x20funct'+'ionality\x20f'+'or\x20inverse'+'\x20squared\x20f'+'alloff\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20shadow\x20c'+'asting\x0a\x20\x20\x20'+'\x20#if\x20defin'+'ed(LIGHT{i'+'}CASTSHADO'+'W)\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'light{i}_s'+'hadowMatri'+'x:\x20mat4x4f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20li'+'ght{i}_sha'+'dowIntensi'+'ty:\x20f32;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20light'+'{i}_shadow'+'Params:\x20ve'+'c4f;\x20//\x20wi'+'dth,\x20heigh'+'t,\x20bias,\x20r'+'adius\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCSS_32F\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'light{i}_s'+'hadowSearc'+'hArea:\x20f32'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20light{i}'+'_cameraPar'+'ams:\x20vec4f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}TYPE'+'\x20==\x20DIRECT'+'IONAL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'light{i}_s'+'oftShadowP'+'arams:\x20vec'+'4f;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'directiona'+'l\x20(cascade'+'d)\x20shadows'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}TYPE\x20==\x20D'+'IRECTIONAL'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20light{i}_'+'shadowMatr'+'ixPalette:'+'\x20array<mat'+'4x4f,\x204>;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20uniform\x20'+'light{i}_s'+'hadowCasca'+'deDistance'+'s:\x20vec4f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20uniform\x20'+'light{i}_s'+'hadowCasca'+'deCount:\x20i'+'32;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20light{'+'i}_shadowC'+'ascadeBlen'+'d:\x20f32;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20OMNI\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20N'+'OT\x20SUPPORT'+'ED\x0a/*\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(L'+'IGHT{i}SHA'+'DOW_PCF)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'CubeShadow'+'\x20light{i}_'+'shadowMap;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20sampler'+'Cube\x20light'+'{i}_shadow'+'Map;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a*/\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIG'+'HT{i}SHADO'+'W_PCF)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20lig'+'ht{i}_shad'+'owMap:\x20tex'+'ture_depth'+'_2d;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20light'+'{i}_shadow'+'MapSampler'+':\x20sampler_'+'comparison'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'light{i}_s'+'hadowMap:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20lig'+'ht{i}_shad'+'owMapSampl'+'er:\x20sample'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20coo'+'kie\x0a\x20\x20\x20\x20#i'+'f\x20defined('+'LIGHT{i}CO'+'OKIE)\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#defi'+'ne\x20LIT_COD'+'E_COOKIE\x20/'+'/\x20include\x20'+'functional'+'ity\x20for\x20co'+'okies\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20OMNI\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20NOT\x20SUPP'+'ORTED\x0a/*\x20\x20'+'\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20sam'+'plerCube\x20l'+'ight{i}_co'+'okie;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un')+('iform\x20floa'+'t\x20light{i}'+'_cookieInt'+'ensity;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20!defin'+'ed(LIGHT{i'+'}CASTSHADO'+'W)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20mat'+'4\x20light{i}'+'_shadowMat'+'rix;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a*/\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}TYPE\x20=='+'\x20SPOT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20NO'+'T\x20SUPPORTE'+'D\x0a/*\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20sample'+'r2D\x20light{'+'i}_cookie;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20uniform'+'\x20float\x20lig'+'ht{i}_cook'+'ieIntensit'+'y;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20!'+'defined(LI'+'GHT{i}CAST'+'SHADOW)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20mat4\x20lig'+'ht{i}_shad'+'owMatrix;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20defin'+'ed(LIGHT{i'+'}COOKIE_TR'+'ANSFORM)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec4\x20li'+'ght{i}_coo'+'kieMatrix;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20vec2\x20'+'light{i}_c'+'ookieOffse'+'t;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a*/\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a#endif\x0a'),pD='\x0afn\x20getLig'+'htDiffuse('+'worldNorma'+'l:\x20vec3f,\x20'+'viewDir:\x20v'+'ec3f,\x20ligh'+'tDirNorm:\x20'+'vec3f)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'return\x20max'+'(dot(world'+'Normal,\x20-l'+'ightDirNor'+'m),\x200.0);\x0a'+'}\x0a',mD='\x0afn\x20evalOm'+'niLight(li'+'ghtPosW:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20return\x20vP'+'ositionW\x20-'+'\x20lightPosW'+';\x0a}\x0a',_D='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x20\x20\x20\x20eva'+'luateLight'+'{i}(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIT_I'+'RIDESCENCE'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20irides'+'cenceFresn'+'el\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20);\x0a#endi'+'f\x0a',gD='\x0a#if\x20defin'+'ed(LIGHT{i'+'})\x0a\x0afn\x20eva'+'luateLight'+'{i}(\x0a\x20\x20\x20\x20#'+'if\x20defined'+'(LIT_IRIDE'+'SCENCE)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20irid'+'escenceFre'+'snel:\x20vec3'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a)\x20{\x0a\x20\x20\x20'+'\x20//\x20light\x20'+'color\x0a\x20\x20\x20\x20'+'var\x20lightC'+'olor:\x20vec3'+'f\x20=\x20unifor'+'m.light{i}'+'_color;\x0a\x0a\x20'+'\x20\x20\x20#if\x20LIG'+'HT{i}TYPE\x20'+'==\x20DIRECTI'+'ONAL\x20&&\x20!d'+'efined(LIT'+'_SHADOW_CA'+'TCHER)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ea'+'rly\x20return'+'\x20if\x20the\x20li'+'ght\x20color\x20'+'is\x20black\x20('+'used\x20by\x20sh'+'adow\x20catch'+'er\x20-\x20this\x20'+'way\x20this\x20l'+'ight\x20is\x20ve'+'ry\x20cheap)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(all(ligh'+'tColor\x20==\x20'+'vec3f(0.0,'+'\x200.0,\x200.0)'+'))\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}TYPE\x20=='+'\x20DIRECTION'+'AL\x20//\x20dire'+'ctional\x20li'+'ght\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20dLightD'+'irNormW\x20=\x20'+'uniform.li'+'ght{i}_dir'+'ection;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20dAtt'+'en\x20=\x201.0;\x0a'+'\x0a\x20\x20\x20\x20#else'+'\x20//\x20omni\x20o'+'r\x20spot\x20lig'+'ht\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20ligh'+'tDirW:\x20vec'+'3f\x20=\x20evalO'+'mniLight(u'+'niform.lig'+'ht{i}_posi'+'tion);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dLigh'+'tDirNormW\x20'+'=\x20normaliz'+'e(lightDir'+'W);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20cook'+'ie\x20attenua'+'tion\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(LIGHT'+'{i}COOKIE)'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}TYPE'+'\x20==\x20SPOT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'COOKIE_FAL'+'LOFF\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'COOKIE_TRA'+'NSFORM\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20cooki'+('eAttenuati'+'on:\x20vec3f\x20'+'=\x20getCooki'+'e2DXform(u'+'niform.lig'+'ht{i}_cook'+'ie,\x20unifor'+'m.light{i}'+'_shadowMat'+'rix,\x20unifo'+'rm.light{i'+'}_cookieIn'+'tensity,\x20u'+'niform.lig'+'ht{i}_cook'+'ieMatrix,\x20'+'uniform.li'+'ght{i}_coo'+'kieOffset)'+'.{LIGHT{i}'+'COOKIE_CHA'+'NNEL};\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20cookieAtt'+'enuation:\x20'+'vec3f\x20=\x20ge'+'tCookie2D('+'uniform.li'+'ght{i}_coo'+'kie,\x20unifo'+'rm.light{i'+'}_shadowMa'+'trix,\x20unif'+'orm.light{'+'i}_cookieI'+'ntensity).'+'{LIGHT{i}C'+'OOKIE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'COOKIE_TRA'+'NSFORM\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20cooki'+'eAttenuati'+'on:\x20vec3f\x20'+'=\x20getCooki'+'e2DClipXfo'+'rm(uniform'+'.light{i}_'+'cookie,\x20un'+'iform.ligh'+'t{i}_shado'+'wMatrix,\x20u'+'niform.lig'+'ht{i}_cook'+'ieIntensit'+'y,\x20uniform'+'.light{i}_'+'cookieMatr'+'ix,\x20unifor'+'m.light{i}'+'_cookieOff'+'set).{LIGH'+'T{i}COOKIE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20cooki'+'eAttenuati'+'on:\x20vec3f\x20'+'=\x20getCooki'+'e2DClip(un'+'iform.ligh'+'t{i}_cooki'+'e,\x20uniform'+'.light{i}_'+'shadowMatr'+'ix,\x20unifor'+'m.light{i}'+'_cookieInt'+'ensity).{L'+'IGHT{i}COO'+'KIE_CHANNE'+'L};\x0a\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}TY'+'PE\x20==\x20OMNI'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20cookieAtt'+'enuation:\x20'+'vec3f\x20=\x20ge'+'tCookieCub'+'e(uniform.'+'light{i}_c'+'ookie,\x20uni'+'form.light'+'{i}_shadow'+'Matrix,\x20un'+'iform.ligh'+'t{i}_cooki'+'eIntensity'+').{LIGHT{i'+'}COOKIE_CH'+'ANNEL};\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20multipl'+'y\x20light\x20co'+'lor\x20by\x20the'+'\x20cookie\x20at'+'tenuation\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20lightCol'+'or\x20=\x20light'+'Color\x20*\x20co'+'okieAttenu'+'ation;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20dista'+'nce\x20fallof'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}SHAPE\x20=='+'\x20PUNCTUAL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}FALLOF'+'F\x20==\x20LINEA'+'R\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dA'+'tten\x20=\x20get'+'FalloffLin'+'ear(unifor'+'m.light{i}'+'_radius,\x20l'+'ightDirW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dAtte'+'n\x20=\x20getFal'+'loffInvSqu'+'ared(unifo'+'rm.light{i'+'}_radius,\x20'+'lightDirW)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'non\x20punctu'+'al\x20lights\x20'+'only\x20gets\x20'+'the\x20range\x20'+'window\x20her'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dAtten'+'\x20=\x20getFall'+'offWindow('+'uniform.li'+'ght{i}_rad'+'ius,\x20light'+'DirW);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20spot\x20l'+'ight\x20angle'+'\x20falloff\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}T'+'YPE\x20==\x20SPO'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20!d')+('efined(LIG'+'HT{i}COOKI'+'E)\x20||\x20defi'+'ned(LIGHT{'+'i}COOKIE_F'+'ALLOFF)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dAtten'+'\x20=\x20dAtten\x20'+'*\x20getSpotE'+'ffect(unif'+'orm.light{'+'i}_directi'+'on,\x20unifor'+'m.light{i}'+'_innerCone'+'Angle,\x20uni'+'form.light'+'{i}_outerC'+'oneAngle,\x20'+'dLightDirN'+'ormW);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20if\x20'+'(dAtten\x20<\x20'+'0.00001)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn;\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20//'+'\x20evaluate\x20'+'area\x20light'+'\x20values\x0a\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHAPE\x20'+'!=\x20PUNCTUA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}SHAPE\x20=='+'\x20RECT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ca'+'lcRectLigh'+'tValues(un'+'iform.ligh'+'t{i}_posit'+'ion,\x20unifo'+'rm.light{i'+'}_halfWidt'+'h,\x20uniform'+'.light{i}_'+'halfHeight'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#elif\x20LIG'+'HT{i}SHAPE'+'\x20==\x20DISK\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20calcDiskL'+'ightValues'+'(uniform.l'+'ight{i}_po'+'sition,\x20un'+'iform.ligh'+'t{i}_halfW'+'idth,\x20unif'+'orm.light{'+'i}_halfHei'+'ght);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#elif\x20'+'LIGHT{i}SH'+'APE\x20==\x20SPH'+'ERE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20calc'+'SphereLigh'+'tValues(un'+'iform.ligh'+'t{i}_posit'+'ion,\x20unifo'+'rm.light{i'+'}_halfWidt'+'h,\x20uniform'+'.light{i}_'+'halfHeight'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20dif'+'fuse\x20light'+'ing\x20-\x20LTC\x20'+'lights\x20do\x20'+'not\x20mix\x20di'+'ffuse\x20ligh'+'ting\x20into\x20'+'attenuatio'+'n\x20that\x20aff'+'ects\x20specu'+'lar\x0a\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'SHAPE\x20!=\x20P')+('UNCTUAL\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'attenDiffu'+'se\x20-\x20separ'+'ate\x20diffus'+'e\x20attenuat'+'ion\x20for\x20no'+'n-punctual'+'\x20light\x20sou'+'rces\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}TYPE'+'\x20==\x20DIRECT'+'IONAL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20NB:\x20A\x20bet'+'ter\x20approx'+'imation\x20pe'+'rhaps\x20usin'+'g\x20wrap\x20lig'+'hting\x20coul'+'d\x20be\x20imple'+'mented\x20her'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20at'+'tenDiffuse'+':\x20f32\x20=\x20ge'+'tLightDiff'+'use(litArg'+'s_worldNor'+'mal,\x20dView'+'DirW,\x20dLig'+'htDirNormW'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x2016.0\x20is\x20'+'a\x20constant'+'\x20that\x20is\x20i'+'n\x20getFallo'+'ffInvSquar'+'ed()\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}S'+'HAPE\x20==\x20RE'+'CT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20attenDi'+'ffuse:\x20f32'+'\x20=\x20getRect'+'LightDiffu'+'se(litArgs'+'_worldNorm'+'al,\x20dViewD'+'irW,\x20light'+'DirW,\x20dLig'+'htDirNormW'+')\x20*\x2016.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#elif\x20LI'+'GHT{i}SHAP'+'E\x20==\x20DISK\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'attenDiffu'+'se:\x20f32\x20=\x20'+'getDiskLig'+'htDiffuse('+'litArgs_wo'+'rldNormal,'+'\x20dViewDirW'+',\x20lightDir'+'W,\x20dLightD'+'irNormW)\x20*'+'\x2016.0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'elif\x20LIGHT'+'{i}SHAPE\x20='+'=\x20SPHERE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20a'+'ttenDiffus'+'e:\x20f32\x20=\x20g'+'etSphereLi'+'ghtDiffuse'+'(litArgs_w'+'orldNormal'+',\x20dViewDir'+'W,\x20lightDi'+'rW,\x20dLight'+'DirNormW)\x20'+'*\x2016.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20one\x20par'+'ameter\x20is\x20'+'unused\x20for')+('\x20punctual\x20'+'lights\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20dAtte'+'n\x20=\x20dAtten'+'\x20*\x20getLigh'+'tDiffuse(l'+'itArgs_wor'+'ldNormal,\x20'+'vec3(0.0),'+'\x20dLightDir'+'NormW);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20app'+'ly\x20the\x20sha'+'dow\x20attenu'+'ation\x0a\x20\x20\x20\x20'+'#ifdef\x20LIG'+'HT{i}CASTS'+'HADOW\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20DIREC'+'TIONAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20shadow:'+'\x20f32\x20=\x20get'+'Shadow{i}('+'vec3(0.0))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20shadow:\x20'+'f32\x20=\x20getS'+'hadow{i}(l'+'ightDirW);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20Ap'+'ply\x20shadow'+'\x20intensity'+'\x20to\x20the\x20sh'+'adow\x20value'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20s'+'hadow\x20=\x20mi'+'x(1.0,\x20sha'+'dow,\x20unifo'+'rm.light{i'+'}_shadowIn'+'tensity);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20d'+'Atten\x20=\x20dA'+'tten\x20*\x20sha'+'dow;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20de'+'fined(LIT_'+'SHADOW_CAT'+'CHER)\x20&&\x20L'+'IGHT{i}TYP'+'E\x20==\x20DIREC'+'TIONAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20accumula'+'te\x20shadows'+'\x20for\x20direc'+'tional\x20lig'+'hts\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dSha'+'dowCatcher'+'\x20=\x20dShadow'+'Catcher\x20*\x20'+'shadow;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x0a\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHAPE\x20'+'!=\x20PUNCTUA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20area\x20li'+'ght\x20-\x20they'+'\x20do\x20not\x20mi'+'x\x20diffuse\x20'+'lighting\x20i'+'nto\x20specul'+'ar\x20attenua'+'tion\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SPECUL'+'AR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dDiff'+'useLight\x20='+'\x20dDiffuseL'+'ight\x20+\x20((('+'attenDiffu'+'se\x20*\x20dAtte'+'n)\x20*\x20light'+'Color)\x20*\x20('+'1.0\x20-\x20dLTC'+'SpecFres))')+(';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dD'+'iffuseLigh'+'t\x20=\x20dDiffu'+'seLight\x20+\x20'+'((attenDif'+'fuse\x20*\x20dAt'+'ten)\x20*\x20lig'+'htColor);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'punctual\x20l'+'ight\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20def'+'ined(AREA_'+'LIGHTS)\x20&&'+'\x20defined(L'+'IT_SPECULA'+'R)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dDiff'+'useLight\x20='+'\x20dDiffuseL'+'ight\x20+\x20((d'+'Atten\x20*\x20li'+'ghtColor)\x20'+'*\x20(1.0\x20-\x20l'+'itArgs_spe'+'cularity))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dD'+'iffuseLigh'+'t\x20=\x20dDiffu'+'seLight\x20+\x20'+'(dAtten\x20*\x20'+'lightColor'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20spe'+'cular\x20ligh'+'ting\x0a\x20\x20\x20\x20#'+'ifdef\x20LIGH'+'T{i}AFFECT'+'_SPECULARI'+'TY\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHAPE\x20'+'!=\x20PUNCTUA'+'L\x20//\x20area\x20'+'light\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'CLEARCOAT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}SH'+'APE\x20==\x20REC'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ccSpecul'+'arLight\x20=\x20'+'ccSpecular'+'Light\x20+\x20(c'+'cLTCSpecFr'+'es\x20*\x20getRe'+'ctLightSpe'+'cular(litA'+'rgs_clearc'+'oat_worldN'+'ormal,\x20dVi'+'ewDirW)\x20*\x20'+'dAtten\x20*\x20l'+'ightColor)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lif\x20LIGHT{'+'i}SHAPE\x20=='+'\x20DISK\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ccSp'+'ecularLigh'+'t\x20=\x20ccSpec'+'ularLight\x20'+'+\x20(ccLTCSp'+'ecFres\x20*\x20g'+'etDiskLigh'+'tSpecular('+'litArgs_cl'+'earcoat_wo'+'rldNormal,'+'\x20dViewDirW'+')\x20*\x20dAtten'+'\x20*\x20lightCo'+'lor);\x0a\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#elif\x20LI'+'GHT{i}SHAP'+'E\x20==\x20SPHER'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20ccSpecul'+'arLight\x20=\x20'+'ccSpecular'+'Light\x20+\x20(c'+'cLTCSpecFr'+'es\x20*\x20getSp'+'hereLightS'+'pecular(li'+'tArgs_clea'+'rcoat_worl'+'dNormal,\x20d'+'ViewDirW)\x20'+'*\x20dAtten\x20*'+'\x20lightColo'+'r);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'SPECULAR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'PE\x20==\x20RECT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dSpecular'+'Light\x20=\x20dS'+'pecularLig'+'ht\x20+\x20(dLTC'+'SpecFres\x20*'+'\x20getRectLi'+'ghtSpecula'+'r(litArgs_'+'worldNorma'+'l,\x20dViewDi'+'rW)\x20*\x20dAtt'+'en\x20*\x20light'+'Color);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#elif\x20'+'LIGHT{i}SH'+'APE\x20==\x20DIS'+'K\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dSpecula'+'rLight\x20=\x20d'+'SpecularLi'+'ght\x20+\x20(dLT'+'CSpecFres\x20'+'*\x20getDiskL'+'ightSpecul'+'ar(litArgs'+'_worldNorm'+'al,\x20dViewD'+'irW)\x20*\x20dAt'+'ten\x20*\x20ligh'+'tColor);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#elif'+'\x20LIGHT{i}S'+'HAPE\x20==\x20SP'+'HERE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dSpec'+'ularLight\x20'+'=\x20dSpecula'+'rLight\x20+\x20('+'dLTCSpecFr'+'es\x20*\x20getSp'+'hereLightS'+'pecular(li'+'tArgs_worl'+'dNormal,\x20d'+'ViewDirW)\x20'+'*\x20dAtten\x20*'+'\x20lightColo'+'r);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x20//\x20punctu'+'al\x20light\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20is\x20fr'+'esnel\x20need'+'ed\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}TYP'+'E\x20==\x20DIREC')+('TIONAL\x20&&\x20'+'LIT_FRESNE'+'L_MODEL\x20!='+'\x20NONE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#define\x20'+'LIGHT{i}FR'+'ESNEL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'PECULAR\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20ha'+'lfDirW:\x20ve'+'c3f\x20=\x20norm'+'alize(-dLi'+'ghtDirNorm'+'W\x20+\x20dViewD'+'irW);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20if\x20LTC\x20li'+'ghts\x20are\x20p'+'resent,\x20sp'+'ecular\x20mus'+'t\x20be\x20accum'+'ulated\x20wit'+'h\x20specular'+'ity\x20(specu'+'larity\x20is\x20'+'pre\x20multip'+'lied\x20by\x20pu'+'nctual\x20lig'+'ht\x20fresnel'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_CLEAR'+'COAT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20light'+'specularCC'+':\x20vec3f\x20=\x20'+'getLightSp'+'ecular(hal'+'fDirW,\x20ccR'+'eflDirW,\x20l'+'itArgs_cle'+'arcoat_wor'+'ldNormal,\x20'+'dViewDirW,'+'\x20dLightDir'+'NormW,\x20lit'+'Args_clear'+'coat_gloss'+',\x20dTBN)\x20*\x20'+'dAtten\x20*\x20l'+'ightColor;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIGHT{'+'i}FRESNEL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'lightspecu'+'larCC\x20=\x20li'+'ghtspecula'+'rCC\x20*\x20getF'+'resnelCC(d'+'ot(dViewDi'+'rW,\x20halfDi'+'rW));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20ccSpe'+'cularLight'+'\x20=\x20ccSpecu'+'larLight\x20+'+'\x20lightspec'+'ularCC;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SHEEN\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20sSpecul'+'arLight\x20=\x20'+'sSpecularL'+'ight\x20+\x20(ge'+'tLightSpec'+'ularSheen('+'halfDirW,\x20'+'litArgs_wo'+'rldNormal,'+'\x20dViewDirW'+',\x20dLightDi')+('rNormW,\x20li'+'tArgs_shee'+'n_gloss)\x20*'+'\x20dAtten\x20*\x20'+'lightColor'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20ligh'+'tSpecular:'+'\x20vec3f\x20=\x20g'+'etLightSpe'+'cular(half'+'DirW,\x20dRef'+'lDirW,\x20lit'+'Args_world'+'Normal,\x20dV'+'iewDirW,\x20d'+'LightDirNo'+'rmW,\x20litAr'+'gs_gloss,\x20'+'dTBN)\x20*\x20dA'+'tten\x20*\x20lig'+'htColor;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIGHT{i}'+'FRESNEL\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20defined'+'(LIT_IRIDE'+'SCENCE)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20lightSpe'+'cular\x20=\x20li'+'ghtSpecula'+'r\x20*\x20getFre'+'snel(dot(d'+'ViewDirW,\x20'+'halfDirW),'+'\x20litArgs_g'+'loss,\x20litA'+'rgs_specul'+'arity,\x20iri'+'descenceFr'+'esnel,\x20lit'+'Args_iride'+'scence_int'+'ensity);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'ightSpecul'+'ar\x20=\x20light'+'Specular\x20*'+'\x20getFresne'+'l(dot(dVie'+'wDirW,\x20hal'+'fDirW),\x20li'+'tArgs_glos'+'s,\x20litArgs'+'_speculari'+'ty);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20light'+'Specular\x20='+'\x20lightSpec'+'ular\x20*\x20lit'+'Args_specu'+'larity;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dSpecu'+'larLight\x20='+'\x20dSpecular'+'Light\x20+\x20li'+'ghtSpecula'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'+'#endif\x0a'),SD='\x0a\x0a//\x20shado'+'w\x20casting\x20'+'functional'+'ity\x0a#ifdef'+'\x20LIGHT{i}C'+'ASTSHADOW\x0a'+'\x0a\x20\x20\x20\x20//\x20ge'+'nerate\x20sha'+'dow\x20coordi'+'nates\x20func'+'tion,\x20base'+'d\x20on\x20per\x20l'+'ight\x20defin'+'es:\x0a\x20\x20\x20\x20//'+'\x20-\x20_SHADOW'+'_SAMPLE_NO'+'RMAL_OFFSE'+'T\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_ORTH'+'O\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_POIN'+'T\x0a\x20\x20\x20\x20//\x20-'+'\x20_SHADOW_S'+'AMPLE_SOUR'+'CE_ZBUFFER'+'\x0a\x20\x20\x20\x20fn\x20ge'+'tShadowSam'+'pleCoord{i'+'}(shadowTr'+'ansform:\x20m'+'at4x4f,\x20sh'+'adowParams'+':\x20vec4f,\x20w'+'orldPositi'+'on:\x20vec3f,'+'\x20lightPos:'+'\x20vec3f,\x20li'+'ghtDir:\x20pt'+'r<function'+',\x20vec3f>,\x20'+'lightDirNo'+'rm:\x20vec3f,'+'\x20normal:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'surfacePos'+'ition\x20=\x20wo'+'rldPositio'+'n;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IGHT{i}_SH'+'ADOW_SAMPL'+'E_POINT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIG'+'HT{i}_SHAD'+'OW_SAMPLE_'+'NORMAL_OFF'+'SET\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20distSc'+'ale:\x20f32\x20='+'\x20length(*l'+'ightDir);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20surf'+'acePositio'+'n\x20=\x20surfac'+'ePosition\x20'+'+\x20normal\x20*'+'\x20shadowPar'+'ams.y\x20*\x20cl'+'amp(1.0\x20-\x20'+'dot(normal'+',\x20-lightDi'+'rNorm),\x200.'+'0,\x201.0)\x20*\x20'+'distScale;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20*li'+'ghtDir\x20=\x20s'+'urfacePosi'+'tion\x20-\x20lig'+'htPos;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'*lightDir;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIGHT{i'+'}_SHADOW_S'+'AMPLE_SOUR'+'CE_ZBUFFER'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+('\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIGHT{'+'i}_SHADOW_'+'SAMPLE_NOR'+'MAL_OFFSET'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20surfacePo'+'sition\x20=\x20s'+'urfacePosi'+'tion\x20+\x20nor'+'mal\x20*\x20shad'+'owParams.y'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIGH'+'T{i}_SHADO'+'W_SAMPLE_N'+'ORMAL_OFFS'+'ET\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIGHT{i}_S'+'HADOW_SAMP'+'LE_ORTHO\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20dis'+'tScale:\x20f3'+'2\x20=\x201.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20distSca'+'le:\x20f32\x20=\x20'+'abs(dot(vP'+'ositionW\x20-'+'\x20lightPos,'+'\x20lightDirN'+'orm));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20surfac'+'ePosition\x20'+'=\x20surfaceP'+'osition\x20+\x20'+'normal\x20*\x20s'+'hadowParam'+'s.y\x20*\x20clam'+'p(1.0\x20-\x20do'+'t(normal,\x20'+'-lightDirN'+'orm),\x200.0,'+'\x201.0)\x20*\x20di'+'stScale;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20Use'+'\x20var\x20for\x20m'+'odificatio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20po'+'sitionInSh'+'adowSpace:'+'\x20vec4f\x20=\x20s'+'hadowTrans'+'form\x20*\x20vec'+'4f(surface'+'Position,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIGHT'+'{i}_SHADOW'+'_SAMPLE_OR'+'THO\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'positionIn'+'ShadowSpac'+'e.z\x20=\x20satu'+'rate(posit'+'ionInShado'+'wSpace.z)\x20'+'-\x200.0001;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIGHT{i}_'+'SHADOW_SAM')+('PLE_SOURCE'+'_ZBUFFER\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20p'+'ositionInS'+'hadowSpace'+'.xyz\x20=\x20pos'+'itionInSha'+'dowSpace.x'+'yz\x20/\x20posit'+'ionInShado'+'wSpace.w;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20position'+'InShadowSp'+'ace.xy\x20=\x20p'+'ositionInS'+'hadowSpace'+'.xy\x20/\x20posi'+'tionInShad'+'owSpace.w;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20positionI'+'nShadowSpa'+'ce.z\x20=\x20len'+'gth(*light'+'Dir)\x20*\x20sha'+'dowParams.'+'w;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20this\x20is\x20c'+'urrently\x20u'+'nused\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20SHADO'+'W_SAMPLE_Z'+'_BIAS\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20posit'+'ionInShado'+'wSpace.z\x20+'+'=\x20getShado'+'wBias(shad'+'owParams.x'+',\x20shadowPa'+'rams.z);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20surfacePo'+'sition\x20=\x20p'+'ositionInS'+'hadowSpace'+'.xyz;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20sur'+'facePositi'+'on;\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20//\x20sh'+'adow\x20evalu'+'ation\x20func'+'tion\x0a\x20\x20\x20\x20f'+'n\x20getShado'+'w{i}(light'+'DirW_in:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20dir'+'ectional\x20s'+'hadow\x20casc'+'ades\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIGHT{i}_S'+'HADOW_CASC'+'ADES\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20select\x20sh'+'adow\x20casca'+'de\x20matrix\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20casc'+'adeIndex:\x20'+'i32\x20=\x20getS'+'hadowCasca'+'deIndex(un'+'iform.ligh'+'t{i}_shado'+'wCascadeDi'+'stances,\x20u'+'niform.lig'+'ht{i}_shad')+('owCascadeC'+'ount);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIG'+'HT{i}_SHAD'+'OW_CASCADE'+'_BLEND\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20cascade'+'Index\x20=\x20di'+'therShadow'+'CascadeInd'+'ex(cascade'+'Index,\x20uni'+'form.light'+'{i}_shadow'+'CascadeDis'+'tances,\x20un'+'iform.ligh'+'t{i}_shado'+'wCascadeCo'+'unt,\x20unifo'+'rm.light{i'+'}_shadowCa'+'scadeBlend'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20s'+'hadowMatri'+'x:\x20mat4x4f'+'\x20=\x20uniform'+'.light{i}_'+'shadowMatr'+'ixPalette['+'cascadeInd'+'ex];\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20sha'+'dowMatrix:'+'\x20mat4x4f\x20='+'\x20uniform.l'+'ight{i}_sh'+'adowMatrix'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20lightDirA'+'rg\x20=\x20light'+'DirW_in;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20LIGHT{i}'+'TYPE\x20==\x20DI'+'RECTIONAL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20direc'+'tional\x20lig'+'ht\x20does\x20no'+'t\x20have\x20a\x20p'+'osition\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20shadow'+'Coord:\x20vec'+'3f\x20=\x20getSh'+'adowSample'+'Coord{i}(s'+'hadowMatri'+'x,\x20uniform'+'.light{i}_'+'shadowPara'+'ms,\x20vPosit'+'ionW,\x20vec3'+'f(0.0),\x20&l'+'ightDirArg'+',\x20dLightDi'+'rNormW,\x20dV'+'ertexNorma'+'lW);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20shad'+'owCoord:\x20v'+'ec3f\x20=\x20get'+'ShadowSamp'+'leCoord{i}'+'(shadowMat'+'rix,\x20unifo'+'rm.light{i'+'}_shadowPa'+'rams,\x20vPos'+'itionW,\x20un'+'iform.ligh'+'t{i}_posit'+'ion,\x20&ligh'+'tDirArg,\x20d'+'LightDirNo'+'rmW,\x20dVert'+'exNormalW)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20')+('#endif\x0a\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'Fade\x20direc'+'tional\x20sha'+'dow\x20at\x20the'+'\x20far\x20dista'+'nce\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20DIRECTIO'+'NAL\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20shad'+'owCoord\x20=\x20'+'fadeShadow'+'(shadowCoo'+'rd,\x20unifor'+'m.light{i}'+'_shadowCas'+'cadeDistan'+'ces);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20-----\x20s'+'ample\x20the\x20'+'shadow\x20---'+'--\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}TYPE\x20='+'=\x20DIRECTIO'+'NAL\x20//\x20---'+'--\x20directi'+'onal\x20light'+'\x20-----\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}SHADOWTY'+'PE\x20==\x20VSM_'+'16F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowVSM1'+'6(light{i}'+'_shadowMap'+',\x20light{i}'+'_shadowMap'+'Sampler,\x20s'+'hadowCoord'+',\x20uniform.'+'light{i}_s'+'hadowParam'+'s,\x205.54);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHADOW'+'TYPE\x20==\x20VS'+'M_32F\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'etShadowVS'+'M32(light{'+'i}_shadowM'+'ap,\x20light{'+'i}_shadowM'+'apSampler,'+'\x20shadowCoo'+'rd,\x20unifor'+'m.light{i}'+'_shadowPar'+'ams,\x2015.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}SHAD'+'OWTYPE\x20==\x20'+'PCSS_32F\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}SH'+'APE\x20!=\x20PUN'+'CTUAL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'shadowSear'+'chArea\x20=\x20v'+'ec2f(lengt'+'h(uniform.'+'light{i}_h'+'alfWidth),'+'\x20length(un'+'iform.ligh'+'t{i}_halfH'+'eight))\x20*\x20'+'uniform.li'+'ght{i}_sha'+'dowSearchA'+'rea;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wPCSS(ligh'+'t{i}_shado'+'wMap,\x20ligh'+'t{i}_shado'+'wMapSample'+'r,\x20shadowC'+'oord,\x20unif'+'orm.light{'+'i}_shadowP'+'arams,\x20uni'+'form.light'+'{i}_camera'+'Params,\x20sh'+'adowSearch'+'Area,\x20ligh'+'tDirW_in);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'getShadowP'+'CSS(light{'+'i}_shadowM'+'ap,\x20light{'+'i}_shadowM'+'apSampler,'+'\x20shadowCoo'+'rd,\x20unifor'+'m.light{i}'+'_shadowPar'+'ams,\x20unifo'+'rm.light{i'+'}_cameraPa'+'rams,\x20unif'+'orm.light{'+'i}_softSha'+'dowParams,'+'\x20lightDirW'+'_in);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHADOW'+'TYPE\x20==\x20PC'+'F1_16F\x20||\x20'+'LIGHT{i}SH'+'ADOWTYPE\x20='+'=\x20PCF1_32F'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20getSha'+'dowPCF1x1('+'light{i}_s'+'hadowMap,\x20'+'light{i}_s'+'hadowMapSa'+'mpler,\x20sha'+'dowCoord,\x20'+'uniform.li'+'ght{i}_sha'+'dowParams)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}SHAD'+'OWTYPE\x20==\x20'+'PCF3_16F\x20|'+'|\x20LIGHT{i}'+'SHADOWTYPE'+'\x20==\x20PCF3_3'+'2F\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20getS'+'hadowPCF3x'+'3(light{i}'+'_shadowMap'+',\x20light{i}'+'_shadowMap'+'Sampler,\x20s'+'hadowCoord'+',\x20uniform.'+'light{i}_s'+'hadowParam'+'s);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'LIGHT{i}SH'+'ADOWTYPE\x20='+'=\x20PCF5_16F'+'\x20||\x20LIGHT{'+'i}SHADOWTY'+'PE\x20==\x20PCF5')+('_32F\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ge'+'tShadowPCF'+'5x5(light{'+'i}_shadowM'+'ap,\x20light{'+'i}_shadowM'+'apSampler,'+'\x20shadowCoo'+'rd,\x20unifor'+'m.light{i}'+'_shadowPar'+'ams);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}TYPE\x20=='+'\x20SPOT\x20//\x20-'+'----\x20spot\x20'+'light\x20----'+'-\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20VSM_16F\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wSpotVSM16'+'(light{i}_'+'shadowMap,'+'\x20light{i}_'+'shadowMapS'+'ampler,\x20sh'+'adowCoord,'+'\x20uniform.l'+'ight{i}_sh'+'adowParams'+',\x205.54,\x20li'+'ghtDirW_in'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20VSM_32F\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getShado'+'wSpotVSM32'+'(light{i}_'+'shadowMap,'+'\x20light{i}_'+'shadowMapS'+'ampler,\x20sh'+'adowCoord,'+'\x20uniform.l'+'ight{i}_sh'+'adowParams'+',\x2015.0,\x20li'+'ghtDirW_in'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCSS_32F\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20LIGHT{i}S'+'HAPE\x20!=\x20PU'+'NCTUAL\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20shadowSea'+'rchArea:\x20v'+'ec2f\x20=\x20vec'+'2f(length('+'uniform.li'+'ght{i}_hal'+'fWidth),\x20l'+'ength(unif'+'orm.light{'+'i}_halfHei'+'ght))\x20*\x20un'+'iform.ligh'+'t{i}_shado'+'wSearchAre'+'a;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20s'+'hadowSearc'+'hArea:\x20vec')+('2f\x20=\x20vec2f'+'(uniform.l'+'ight{i}_sh'+'adowSearch'+'Area);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20getShad'+'owSpotPCSS'+'(light{i}_'+'shadowMap,'+'\x20light{i}_'+'shadowMapS'+'ampler,\x20sh'+'adowCoord,'+'\x20uniform.l'+'ight{i}_sh'+'adowParams'+',\x20uniform.'+'light{i}_c'+'ameraParam'+'s,\x20shadowS'+'earchArea,'+'\x20lightDirW'+'_in);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF1_'+'16F\x20||\x20LIG'+'HT{i}SHADO'+'WTYPE\x20==\x20P'+'CF1_32F\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20getShadow'+'SpotPCF1x1'+'(light{i}_'+'shadowMap,'+'\x20light{i}_'+'shadowMapS'+'ampler,\x20sh'+'adowCoord,'+'\x20uniform.l'+'ight{i}_sh'+'adowParams'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF3_16F\x20'+'||\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF3_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowSpot'+'PCF3x3(lig'+'ht{i}_shad'+'owMap,\x20lig'+'ht{i}_shad'+'owMapSampl'+'er,\x20shadow'+'Coord,\x20uni'+'form.light'+'{i}_shadow'+'Params);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIGHT'+'{i}SHADOWT'+'YPE\x20==\x20PCF'+'5_16F\x20||\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF5_32F\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20getShad'+'owSpotPCF5'+'x5(light{i'+'}_shadowMa'+'p,\x20light{i'+'}_shadowMa'+'pSampler,\x20'+'shadowCoor'+'d,\x20uniform'+'.light{i}_'+'shadowPara'+'ms);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20')+('\x20\x20\x20#endif\x0a'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20LIGHT{'+'i}TYPE\x20==\x20'+'OMNI\x20//\x20--'+'---\x20omni\x20l'+'ight\x20-----'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT{i}SHAD'+'OWTYPE\x20==\x20'+'PCSS_32F\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20shadowSea'+'rchArea:\x20v'+'ec2f;\x20//\x20U'+'se\x20var\x20bec'+'ause\x20assig'+'ned\x20in\x20if/'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIGH'+'T{i}SHAPE\x20'+'!=\x20PUNCTUA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20shad'+'owSearchAr'+'ea:\x20vec2f\x20'+'=\x20vec2f(le'+'ngth(unifo'+'rm.light{i'+'}_halfWidt'+'h),\x20length'+'(uniform.l'+'ight{i}_ha'+'lfHeight))'+'\x20*\x20uniform'+'.light{i}_'+'shadowSear'+'chArea;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20shadow'+'SearchArea'+':\x20vec2f\x20=\x20'+'vec2f(unif'+'orm.light{'+'i}_shadowS'+'earchArea)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20g'+'etShadowOm'+'niPCSS(lig'+'ht{i}_shad'+'owMap,\x20lig'+'ht{i}_shad'+'owMapSampl'+'er,\x20shadow'+'Coord,\x20uni'+'form.light'+'{i}_shadow'+'Params,\x20un'+'iform.ligh'+'t{i}_camer'+'aParams,\x20s'+'hadowSearc'+'hArea,\x20lig'+'htDirW_in)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF1_16F\x20'+'||\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF1_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowOmni'+'PCF1x1(lig'+'ht{i}_shad'+'owMap,\x20lig'+'ht{i}_shad'+'owMapSampl'+'er,\x20shadow'+'Coord,\x20uni'+'form.light'+'{i}_shadow'+'Params,\x20li'+'ghtDirW_in')+(');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20L'+'IGHT{i}SHA'+'DOWTYPE\x20=='+'\x20PCF3_16F\x20'+'||\x20LIGHT{i'+'}SHADOWTYP'+'E\x20==\x20PCF3_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20get'+'ShadowOmni'+'PCF3x3(lig'+'ht{i}_shad'+'owMap,\x20lig'+'ht{i}_shad'+'owMapSampl'+'er,\x20shadow'+'Coord,\x20uni'+'form.light'+'{i}_shadow'+'Params,\x20li'+'ghtDirW_in'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20}\x0a\x0a#endi'+'f\x0a'),yD='\x0a\x0a#ifdef\x20L'+'IT_CLUSTER'+'ED_LIGHTS\x0a'+'\x20\x20\x20\x20//\x20all'+'\x20this\x20func'+'tionality\x20'+'that\x20needs'+'\x20to\x20be\x20inc'+'luded\x20for\x20'+'clustered\x20'+'lighting\x0a\x20'+'\x20\x20\x20#define'+'\x20LIT_CODE_'+'FALLOFF_LI'+'NEAR\x0a\x20\x20\x20\x20#'+'define\x20LIT'+'_CODE_FALL'+'OFF_SQUARE'+'D\x0a\x20\x20\x20\x20#def'+'ine\x20LIT_CO'+'DE_LIGHTS_'+'POINT\x0a\x20\x20\x20\x20'+'#define\x20LI'+'T_CODE_LIG'+'HTS_SPOT\x0a#'+'endif\x0a\x0a#if'+'def\x20AREA_L'+'IGHTS\x0a\x20\x20\x20\x20'+'var\x20areaLi'+'ghtsLutTex'+'1:\x20texture'+'_2d<f32>;\x0a'+'\x20\x20\x20\x20var\x20ar'+'eaLightsLu'+'tTex1Sampl'+'er:\x20sample'+'r;\x0a\x20\x20\x20\x20var'+'\x20areaLight'+'sLutTex2:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20var\x20areaL'+'ightsLutTe'+'x2Sampler:'+'\x20sampler;\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_L'+'IGHTING\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22lightDif'+'fuseLamber'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'//\x20area\x20li'+'ghts\x0a\x20\x20\x20\x20#'+'if\x20defined'+'(AREA_LIGH'+'TS)\x20||\x20def'+'ined(LIT_C'+'LUSTERED_A'+'REA_LIGHTS'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'ltcPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0a#ifd'+'ef\x20SHADOW_'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owCascades'+'PS\x22\x0a#endif'+'\x0a\x0a#if\x20defi'+'ned(SHADOW'+'_KIND_PCF1'+')\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owPCF1PS\x22\x0a'+'#endif\x0a\x0a#i'+'f\x20defined('+'SHADOW_KIN'+'D_PCF3)\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22shadowPC'+'F3PS\x22\x0a#end'+'if\x0a\x0a#if\x20de'+'fined(SHAD'+'OW_KIND_PC'+'F5)\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22sh'+'adowPCF5PS'+'\x22\x0a#endif\x0a\x0a'+'#if\x20define'+'d(SHADOW_K'+'IND_PCSS)\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22linear'+'izeDepthPS'+'\x22\x0a\x0a\x20\x20\x20\x20//\x20'+'omni\x20/\x20spo'+'t\x20PCSS\x20is\x20'+('not\x20suppor'+'ted\x20on\x20Web'+'GPU\x20curren'+'tly,\x20as\x20th'+'is\x20is\x20only'+'\x20for\x20non-c'+'lustered\x20l'+'ights\x0a\x20\x20\x20\x20'+'//\x20#includ'+'e\x20\x22shadowP'+'CSSPS\x22\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22shadowSof'+'tPS\x22\x0a#endi'+'f\x0a\x0a#if\x20def'+'ined(SHADO'+'W_KIND_VSM'+')\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22shad'+'owEVSMPS\x22\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_C'+'ODE_FALLOF'+'F_LINEAR\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22falloff'+'LinearPS\x22\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_C'+'ODE_FALLOF'+'F_SQUARED\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22fallof'+'fInvSquare'+'dPS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'LIT_CODE_L'+'IGHTS_POIN'+'T\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22ligh'+'tDirPointP'+'S\x22\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_CODE_LIG'+'HTS_SPOT\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22spotPS\x22'+'\x0a#endif\x0a\x0a#'+'ifdef\x20LIT_'+'CODE_COOKI'+'E\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22cook'+'iePS\x22\x0a#end'+'if\x0a\x0a//\x20clu'+'stered\x20lig'+'hting\x0a#ifd'+'ef\x20LIT_CLU'+'STERED_LIG'+'HTS\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22cl'+'usteredLig'+'htPS\x22\x0a#end'+'if\x0a\x0a#ifdef'+'\x20LIGHT_COU'+'NT\x20>\x200\x0a\x20\x20\x20'+'\x20//\x20LOOP\x20-'+'\x20generate\x20'+'shadow\x20eva'+'luation\x20fu'+'nctions\x20fo'+'r\x20all\x20non-'+'clustered\x20'+'lights\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22lightFunc'+'tionShadow'+'PS,\x20LIGHT_'+'COUNT\x22\x0a\x0a\x20\x20'+'\x20\x20//\x20LOOP\x20'+'-\x20generate'+'\x20light\x20eva'+'luation\x20fu'+'nctions\x20fo'+'r\x20all\x20non-'+'clustered\x20'+'lights\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22lightFunc'+'tionLightP'+'S,\x20LIGHT_C'+'OUNT\x22\x0a#end'+'if\x0a'),vD='\x0afn\x20addLig'+'htMap(\x0a\x20\x20\x20'+'\x20lightmap:'+'\x20vec3f,\x0a\x20\x20'+'\x20\x20dir:\x20vec'+'3f,\x0a\x20\x20\x20\x20wo'+'rldNormal:'+'\x20vec3f,\x0a\x20\x20'+'\x20\x20viewDir:'+'\x20vec3f,\x0a\x20\x20'+'\x20\x20reflecti'+'onDir:\x20vec'+'3f,\x0a\x20\x20\x20\x20gl'+'oss:\x20f32,\x0a'+'\x20\x20\x20\x20specul'+'arity:\x20vec'+'3f,\x0a\x20\x20\x20\x20ve'+'rtexNormal'+':\x20vec3f,\x0a\x20'+'\x20\x20\x20tbn:\x20ma'+'t3x3f\x0a#if\x20'+'defined(LI'+'T_IRIDESCE'+'NCE)\x0a\x20\x20\x20\x20,'+'\x20iridescen'+'ceFresnel:'+'\x20vec3f,\x0a\x20\x20'+'\x20\x20iridesce'+'nceIntensi'+'ty:\x20f32\x0a#e'+'ndif\x0a)\x20{\x0a\x0a'+'\x20\x20\x20\x20//\x20dir'+'ectional\x20l'+'ightmap\x0a\x20\x20'+'\x20\x20#if\x20defi'+'ned(LIT_SP'+'ECULAR)\x20&&'+'\x20defined(L'+'IT_DIR_LIG'+'HTMAP)\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20if\x20('+'dot(dir,\x20d'+'ir)\x20<\x200.00'+'01)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dDiffuse'+'Light\x20=\x20dD'+'iffuseLigh'+'t\x20+\x20lightm'+'ap;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x20else\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20vli'+'ght:\x20f32\x20='+'\x20saturate('+'dot(dir,\x20-'+'vertexNorm'+'al));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20flight:\x20'+'f32\x20=\x20satu'+'rate(dot(d'+'ir,\x20-world'+'Normal));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20nlig'+'ht:\x20f32\x20=\x20'+'(flight\x20/\x20'+'max(vlight'+',\x200.01))\x20*'+'\x200.5;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'DiffuseLig'+'ht\x20=\x20dDiff'+'useLight\x20+'+'\x20lightmap\x20'+'*\x20nlight\x20*'+'\x202.0;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20halfDir'+':\x20vec3f\x20=\x20'+'normalize('+'-dir\x20+\x20vie'+'wDir);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20specula'+'rLight:\x20ve'+'c3f\x20=\x20ligh'+'tmap\x20*\x20get'+'LightSpecu'+'lar(halfDi'+'r,\x20reflect'+'ionDir,\x20wo'+'rldNormal,'+'\x20viewDir,\x20'+'dir,\x20gloss'+',\x20tbn);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+('_FRESNEL\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20spec'+'ularLight\x20'+'=\x20specular'+'Light\x20*\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ge'+'tFresnel(d'+'ot(viewDir'+',\x20halfDir)'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20gloss,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20s'+'pecularity'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_IRIDESC'+'ENCE)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20,\x20ir'+'idescenceF'+'resnel,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ir'+'idescenceI'+'ntensity\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dSp'+'ecularLigh'+'t\x20=\x20dSpecu'+'larLight\x20+'+'\x20specularL'+'ight;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20#else\x20//\x20'+'non-direct'+'ional\x20ligh'+'tmap\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'dDiffuseLi'+'ght\x20+\x20ligh'+'tmap;\x0a\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'),xD='\x0a\x0a#ifdef\x20S'+'TD_LIGHTMA'+'P_DIR\x0a\x20\x20\x20\x20'+'var<privat'+'e>\x20dLightm'+'apDir:\x20vec'+'3f;\x0a\x20\x20\x20\x20va'+'r\x20texture_'+'dirLightMa'+'p:\x20texture'+'_2d<f32>;\x0a'+'\x20\x20\x20\x20var\x20te'+'xture_dirL'+'ightMapSam'+'pler:\x20samp'+'ler;\x0a#endi'+'f\x0a\x0afn\x20getL'+'ightMap()\x20'+'{\x0a\x0a\x20\x20\x20\x20dLi'+'ghtmap\x20=\x20v'+'ec3f(1.0);'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_LIG'+'HT_TEXTURE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20d'+'Lightmap\x20='+'\x20dLightmap'+'\x20*\x20{STD_LI'+'GHT_TEXTUR'+'E_DECODE}('+'textureSam'+'pleBias({S'+'TD_LIGHT_T'+'EXTURE_NAM'+'E},\x20{STD_L'+'IGHT_TEXTU'+'RE_NAME}Sa'+'mpler,\x20{ST'+'D_LIGHT_TE'+'XTURE_UV},'+'\x20uniform.t'+'extureBias'+')).{STD_LI'+'GHT_TEXTUR'+'E_CHANNEL}'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_LIGHTMAP'+'_DIR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20dir:\x20vec3'+'f\x20=\x20textur'+'eSampleBia'+'s(texture_'+'dirLightMa'+'p,\x20texture'+'_dirLightM'+'apSampler,'+'\x20{STD_LIGH'+'T_TEXTURE_'+'UV},\x20unifo'+'rm.texture'+'Bias).xyz\x20'+'*\x202.0\x20-\x201.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20d'+'irDot\x20=\x20do'+'t(dir,\x20dir'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dLigh'+'tmapDir\x20=\x20'+'select(vec'+'3(0.0),\x20di'+'r\x20/\x20sqrt(d'+'irDot),\x20di'+'rDot\x20>\x200.0'+'01);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_LIG'+'HT_VERTEX\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20dL'+'ightmap\x20=\x20'+'dLightmap\x20'+'*\x20saturate'+'(vVertexCo'+'lor.{STD_L'+'IGHT_VERTE'+'X_CHANNEL}'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a}\x0a',TD='\x0a//\x20Anisot'+'ropic\x20GGX\x0a'+'fn\x20calcLig'+'htSpecular'+'(gloss:\x20f3'+'2,\x20worldNo'+'rmal:\x20vec3'+'f,\x20viewDir'+':\x20vec3f,\x20h'+':\x20vec3f,\x20l'+'ightDirNor'+'m:\x20vec3f,\x20'+'tbn:\x20mat3x'+'3f)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20PI:\x20f32\x20='+'\x203.1415926'+'53589793;\x0a'+'\x20\x20\x20\x20let\x20ro'+'ughness:\x20f'+'32\x20=\x20max(('+'1.0\x20-\x20glos'+'s)\x20*\x20(1.0\x20'+'-\x20gloss),\x20'+'0.001);\x0a\x20\x20'+'\x20\x20let\x20alph'+'aRoughness'+':\x20f32\x20=\x20ro'+'ughness\x20*\x20'+'roughness;'+'\x0a\x20\x20\x20\x20let\x20a'+'nisotropy:'+'\x20f32\x20=\x20dAn'+'isotropy;\x0a'+'\x20\x20\x20\x20let\x20di'+'rection:\x20v'+'ec2f\x20=\x20dAn'+'isotropyRo'+'tation;\x0a\x0a\x20'+'\x20\x20\x20let\x20at:'+'\x20f32\x20=\x20mix'+'(alphaRoug'+'hness,\x201.0'+',\x20anisotro'+'py\x20*\x20aniso'+'tropy);\x0a\x20\x20'+'\x20\x20let\x20ab:\x20'+'f32\x20=\x20clam'+'p(alphaRou'+'ghness,\x200.'+'001,\x201.0);'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'anisotropi'+'cT:\x20vec3f\x20'+'=\x20normaliz'+'e(tbn\x20*\x20ve'+'c3f(direct'+'ion,\x200.0))'+';\x0a\x20\x20\x20\x20let\x20'+'anisotropi'+'cB:\x20vec3f\x20'+'=\x20normaliz'+'e(cross(tb'+'n[2],\x20anis'+'otropicT))'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20NoH:\x20f32\x20'+'=\x20dot(worl'+'dNormal,\x20h'+');\x0a\x20\x20\x20\x20let'+'\x20ToH:\x20f32\x20'+'=\x20dot(anis'+'otropicT,\x20'+'h);\x0a\x20\x20\x20\x20le'+'t\x20BoH:\x20f32'+'\x20=\x20dot(ani'+'sotropicB,'+'\x20h);\x0a\x0a\x20\x20\x20\x20'+'let\x20a2:\x20f3'+'2\x20=\x20at\x20*\x20a'+'b;\x0a\x20\x20\x20\x20let'+'\x20v:\x20vec3f\x20'+'=\x20vec3f(ab'+'\x20*\x20ToH,\x20at'+'\x20*\x20BoH,\x20a2'+'\x20*\x20NoH);\x0a\x20'+'\x20\x20\x20let\x20v2:'+'\x20f32\x20=\x20dot'+'(v,\x20v);\x0a\x20\x20'+'\x20\x20let\x20w2:\x20'+'f32\x20=\x20a2\x20/'+'\x20v2;\x0a\x20\x20\x20\x20l'+'et\x20D:\x20f32\x20'+'=\x20a2\x20*\x20w2\x20'+'*\x20w2\x20*\x20(1.'+'0\x20/\x20PI);\x0a\x0a'+'\x20\x20\x20\x20let\x20To'+'V:\x20f32\x20=\x20d'+'ot(anisotr'+'opicT,\x20vie'+('wDir);\x0a\x20\x20\x20'+'\x20let\x20BoV:\x20'+'f32\x20=\x20dot('+'anisotropi'+'cB,\x20viewDi'+'r);\x0a\x20\x20\x20\x20le'+'t\x20ToL:\x20f32'+'\x20=\x20dot(ani'+'sotropicT,'+'\x20-lightDir'+'Norm);\x0a\x20\x20\x20'+'\x20let\x20BoL:\x20'+'f32\x20=\x20dot('+'anisotropi'+'cB,\x20-light'+'DirNorm);\x0a'+'\x20\x20\x20\x20let\x20No'+'V:\x20f32\x20=\x20d'+'ot(worldNo'+'rmal,\x20view'+'Dir);\x0a\x20\x20\x20\x20'+'let\x20NoL:\x20f'+'32\x20=\x20dot(w'+'orldNormal'+',\x20-lightDi'+'rNorm);\x0a\x0a\x20'+'\x20\x20\x20let\x20lam'+'bdaV:\x20f32\x20'+'=\x20NoL\x20*\x20le'+'ngth(vec3f'+'(at\x20*\x20ToV,'+'\x20ab\x20*\x20BoV,'+'\x20NoV));\x0a\x20\x20'+'\x20\x20let\x20lamb'+'daL:\x20f32\x20='+'\x20NoV\x20*\x20len'+'gth(vec3f('+'at\x20*\x20ToL,\x20'+'ab\x20*\x20BoL,\x20'+'NoL));\x0a\x20\x20\x20'+'\x20let\x20G:\x20f3'+'2\x20=\x200.5\x20/\x20'+'(lambdaV\x20+'+'\x20lambdaL);'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20D\x20*\x20G;\x0a'+'}\x0a\x0afn\x20getL'+'ightSpecul'+'ar(h:\x20vec3'+'f,\x20reflDir'+':\x20vec3f,\x20w'+'orldNormal'+':\x20vec3f,\x20v'+'iewDir:\x20ve'+'c3f,\x20light'+'DirNorm:\x20v'+'ec3f,\x20glos'+'s:\x20f32,\x20tb'+'n:\x20mat3x3f'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20calcLigh'+'tSpecular('+'gloss,\x20wor'+'ldNormal,\x20'+'viewDir,\x20h'+',\x20lightDir'+'Norm,\x20tbn)'+';\x0a}\x0a'),wD='\x0a//\x20Energy'+'-conservin'+'g\x20(hopeful'+'ly)\x20Blinn-'+'Phong\x0afn\x20c'+'alcLightSp'+'ecular(glo'+'ss:\x20f32,\x20w'+'orldNormal'+':\x20vec3f,\x20h'+':\x20vec3f)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20let\x20nh:\x20'+'f32\x20=\x20max('+'\x20dot(\x20h,\x20w'+'orldNormal'+'\x20),\x200.0\x20);'+'\x0a\x0a\x20\x20\x20\x20var\x20'+'specPow:\x20f'+'32\x20=\x20exp2('+'gloss\x20*\x2011'+'.0);\x20//\x20gl'+'ossiness\x20i'+'s\x20linear,\x20'+'power\x20is\x20n'+'ot;\x200\x20-\x2020'+'48\x0a\x0a\x20\x20\x20\x20//'+'\x20Hack:\x20On\x20'+'Mac\x20OS\x20X,\x20'+'calling\x20po'+'w\x20with\x20zer'+'o\x20for\x20the\x20'+'exponent\x20g'+'enerates\x20h'+'ideous\x20art'+'ifacts\x20so\x20'+'bias\x20up\x20a\x20'+'little\x0a\x20\x20\x20'+'\x20specPow\x20='+'\x20max(specP'+'ow,\x200.0001'+');\x0a\x0a\x20\x20\x20\x20re'+'turn\x20pow(n'+'h,\x20specPow'+')\x20*\x20(specP'+'ow\x20+\x202.0)\x20'+'/\x208.0;\x0a}\x0a\x0a'+'fn\x20getLigh'+'tSpecular('+'h:\x20vec3f,\x20'+'reflDir:\x20v'+'ec3f,\x20worl'+'dNormal:\x20v'+'ec3f,\x20view'+'Dir:\x20vec3f'+',\x20lightDir'+'Norm:\x20vec3'+'f,\x20gloss:\x20'+'f32,\x20tbn:\x20'+'mat3x3f)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20return\x20c'+'alcLightSp'+'ecular(glo'+'ss,\x20worldN'+'ormal,\x20h);'+'\x0a}\x0a',ED='\x0a\x0afn\x20sheen'+'D(normal:\x20'+'vec3f,\x20h:\x20'+'vec3f,\x20rou'+'ghness:\x20f3'+'2)\x20->\x20f32\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'PI:\x20f32\x20=\x20'+'3.14159265'+'3589793;\x0a\x20'+'\x20\x20\x20let\x20inv'+'R:\x20f32\x20=\x201'+'.0\x20/\x20(roug'+'hness\x20*\x20ro'+'ughness);\x0a'+'\x20\x20\x20\x20var\x20co'+'s2h:\x20f32\x20='+'\x20max(dot(n'+'ormal,\x20h),'+'\x200.0);\x0a\x20\x20\x20'+'\x20cos2h\x20=\x20c'+'os2h\x20*\x20cos'+'2h;\x0a\x20\x20\x20\x20le'+'t\x20sin2h:\x20f'+'32\x20=\x20max(1'+'.0\x20-\x20cos2h'+',\x200.007812'+'5);\x0a\x20\x20\x20\x20re'+'turn\x20(2.0\x20'+'+\x20invR)\x20*\x20'+'pow(sin2h,'+'\x20invR\x20*\x200.'+'5)\x20/\x20(2.0\x20'+'*\x20PI);\x0a}\x0a\x0a'+'fn\x20sheenV('+'normal:\x20ve'+'c3f,\x20viewD'+'ir:\x20vec3f,'+'\x20light:\x20ve'+'c3f)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20le'+'t\x20NoV:\x20f32'+'\x20=\x20max(dot'+'(normal,\x20v'+'iewDir),\x200'+'.000001);\x0a'+'\x20\x20\x20\x20let\x20No'+'L:\x20f32\x20=\x20m'+'ax(dot(nor'+'mal,\x20light'+'),\x200.00000'+'1);\x0a\x20\x20\x20\x20re'+'turn\x201.0\x20/'+'\x20(4.0\x20*\x20(N'+'oL\x20+\x20NoV\x20-'+'\x20NoL\x20*\x20NoV'+'));\x0a}\x0a\x0afn\x20'+'getLightSp'+'ecularShee'+'n(h:\x20vec3f'+',\x20worldNor'+'mal:\x20vec3f'+',\x20viewDir:'+'\x20vec3f,\x20li'+'ghtDirNorm'+':\x20vec3f,\x20s'+'heenGloss:'+'\x20f32)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20l'+'et\x20D:\x20f32\x20'+'=\x20sheenD(w'+'orldNormal'+',\x20h,\x20sheen'+'Gloss);\x0a\x20\x20'+'\x20\x20let\x20V:\x20f'+'32\x20=\x20sheen'+'V(worldNor'+'mal,\x20viewD'+'ir,\x20-light'+'DirNorm);\x0a'+'\x20\x20\x20\x20return'+'\x20D\x20*\x20V;\x0a}',bD='\x0a\x0a#ifndef\x20'+'LINEARIZE_'+'DEPTH\x0a#def'+'ine\x20LINEAR'+'IZE_DEPTH\x0a'+'\x0afn\x20linear'+'izeDepthWi'+'thParams(z'+':\x20f32,\x20cam'+'eraParams:'+'\x20vec4f)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20if\x20(camer'+'aParams.w\x20'+'==\x200.0)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20(came'+'raParams.z'+'\x20*\x20cameraP'+'arams.y)\x20/'+'\x20(cameraPa'+'rams.y\x20+\x20z'+'\x20*\x20(camera'+'Params.z\x20-'+'\x20cameraPar'+'ams.y));\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20cam'+'eraParams.'+'z\x20+\x20z\x20*\x20(c'+'ameraParam'+'s.y\x20-\x20came'+'raParams.z'+');\x0a\x20\x20\x20\x20}\x0a}'+'\x0a\x0a#ifndef\x20'+'CAMERAPLAN'+'ES\x0a\x20\x20\x20\x20#de'+'fine\x20CAMER'+'APLANES\x0a\x20\x20'+'\x20\x20uniform\x20'+'camera_par'+'ams:\x20vec4f'+';\x20\x20\x20//\x20x:\x20'+'1\x20/\x20camera'+'_far,\x20\x20\x20\x20\x20'+'\x20y:\x20camera'+'_far,\x20\x20\x20\x20\x20'+'z:\x20camera_'+'near,\x20\x20\x20\x20\x20'+'\x20\x20\x20w:\x20is_o'+'rtho\x0a#endi'+'f\x0a\x0afn\x20line'+'arizeDepth'+'(z:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20return\x20l'+'inearizeDe'+'pthWithPar'+'ams(z,\x20uni'+'form.camer'+'a_params);'+'\x0a}\x0a#endif\x20'+'//\x20LINEARI'+'ZE_DEPTH\x0a',AD='\x0afn\x20evalua'+'teBackend('+')\x20->\x20Fragm'+'entOutput\x20'+'{\x0a\x0a\x20\x20\x20\x20var'+'\x20output:\x20F'+'ragmentOut'+'put;\x0a\x0a\x20\x20\x20\x20'+'//\x20apply\x20S'+'SAO\x20during'+'\x20lighting\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SSAO\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_ao\x20='+'\x20litArgs_a'+'o\x20*\x20textur'+'eSampleLev'+'el(ssaoTex'+'ture,\x20ssao'+'TextureSam'+'pler,\x20pcPo'+'sition.xy\x20'+'*\x20uniform.'+'ssaoTextur'+'eSizeInv,\x20'+'0.0).r;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20//\x20tra'+'nsform\x20tan'+'gent\x20space'+'\x20normals\x20t'+'o\x20world\x20sp'+'ace\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_N'+'EEDS_NORMA'+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULAR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getReflD'+'ir(litArgs'+'_worldNorm'+'al,\x20dViewD'+'irW,\x20litAr'+'gs_gloss,\x20'+'dTBN);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccRefl'+'DirW\x20=\x20nor'+'malize(-re'+'flect(dVie'+'wDirW,\x20lit'+'Args_clear'+'coat_world'+'Normal));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'_OR_REFLEC'+'TION\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_METALN'+'ESS\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'f0:\x20f32\x20=\x20'+'1.0\x20/\x20litA'+'rgs_ior;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20f0\x20=\x20(f0\x20'+'-\x201.0)\x20/\x20('+'f0\x20+\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20f0\x20=\x20f0'+'\x20*\x20f0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_spe'+'cularity\x20='+'\x20getSpecul'+'arModulate'+'(litArgs_s'+'pecularity'+',\x20litArgs_'+'albedo,\x20li'+'tArgs_meta'+'lness,\x20f0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_albedo\x20='+'\x20getAlbedo'+'Modulate(l'+'itArgs_alb'+'edo,\x20litAr'+'gs_metalne'+('ss);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'IRIDESCENC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20ir'+'idescenceF'+'resnel:\x20ve'+'c3f\x20=\x20getI'+'ridescence'+'Diffractio'+'n(saturate'+'(dot(dView'+'DirW,\x20litA'+'rgs_worldN'+'ormal)),\x20l'+'itArgs_spe'+'cularity,\x20'+'litArgs_ir'+'idescence_'+'thickness)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20//\x20ambi'+'ent\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_A'+'DD_AMBIENT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20a'+'ddAmbient('+'litArgs_wo'+'rldNormal)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_SPECULAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dDiffus'+'eLight\x20=\x20d'+'DiffuseLig'+'ht\x20*\x20(1.0\x20'+'-\x20litArgs_'+'specularit'+'y);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20move\x20ambi'+'ent\x20color\x20'+'out\x20of\x20dif'+'fuse\x20(used'+'\x20by\x20Lightm'+'apper,\x20to\x20'+'multiply\x20a'+'mbient\x20col'+'or\x20by\x20accu'+'mulated\x20AO'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SEPARATE_'+'AMBIENT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20dAmbie'+'ntLight:\x20v'+'ec3f\x20=\x20dDi'+'ffuseLight'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'vec3(0.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifndef\x20'+'LIT_OLD_AM'+'BIENT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'dDiffuseLi'+'ght\x20*\x20unif'+'orm.materi'+'al_ambient'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_A'+'O\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifndef\x20LI'+'T_OCCLUDE_'+'DIRECT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20o'+'ccludeDiff'+'use(litArg'+'s_ao);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_L'+'IGHTMAP\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20addL'+'ightMap(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20litArgs_l'+'ightmap,\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'lightmapDi'+'r,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_worldN'+'ormal,\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dViewDirW,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dReflD'+'irW,\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_glos'+'s,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_specul'+'arity,\x20\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dVertexNor'+'malW,\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20dT'+'BN\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20defin'+'ed(LIT_IRI'+'DESCENCE)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20,\x20irides'+'cenceFresn'+'el,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_irides'+'cence_inte'+'nsity\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20)'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20LIT_L'+'IGHTING\x20||'+'\x20LIT_REFLE'+'CTIONS\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_REF'+'LECTIONS\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_CLEARCO'+'AT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20a'+'ddReflecti'+'onCC(ccRef'+'lDirW,\x20lit'+'Args_clear'+'coat_gloss'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SPECULA'+'R_FRESNEL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'ccFresnel\x20'+'=\x20getFresn'+'elCC(dot(d'+'ViewDirW,\x20'+'litArgs_cl'+'earcoat_wo'+'rldNormal)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20ccRefle'+'ction\x20=\x20cc'+'Reflection'+'\x20*\x20ccFresn'+'el;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20ccFr'+'esnel\x20=\x200.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'PECULARITY'+'_FACTOR\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20ccRefl'+'ection\x20=\x20c'+'cReflectio'+'n\x20*\x20litArg'+'s_specular'+'ityFactor;')+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SHEEN\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20addR'+'eflectionS'+'heen(litAr'+'gs_worldNo'+'rmal,\x20dVie'+'wDirW,\x20lit'+'Args_sheen'+'_gloss);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20Fresne'+'l\x20has\x20to\x20b'+'e\x20applied\x20'+'to\x20reflect'+'ions\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20add'+'Reflection'+'(dReflDirW'+',\x20litArgs_'+'gloss);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_FRESNEL_'+'MODEL\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20dReflec'+'tion\x20=\x20vec'+'4f(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dRefle'+'ction.rgb\x20'+'*\x20getFresn'+'el(\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20do'+'t(dViewDir'+'W,\x20litArgs'+'_worldNorm'+'al),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_glo'+'ss,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_spec'+'ularity\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20defined('+'LIT_IRIDES'+'CENCE)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20,\x20iridesc'+'enceFresne'+'l,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_iride'+'scence_int'+'ensity\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20),'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dReflecti'+'on.a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dReflectio'+'n\x20=\x20vec4f('+'dReflectio'+'n.rgb\x20*\x20li'+'tArgs_spec'+'ularity,\x20d'+'Reflection'+'.a);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'PECULARITY'+'_FACTOR\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20dRefle'+'ction\x20=\x20ve')+('c4f(dRefle'+'ction.rgb\x20'+'*\x20litArgs_'+'specularit'+'yFactor,\x20d'+'Reflection'+'.a);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20AREA'+'_LIGHTS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20specula'+'r\x20has\x20to\x20b'+'e\x20accumula'+'ted\x20differ'+'ently\x20if\x20w'+'e\x20want\x20are'+'a\x20lights\x20t'+'o\x20look\x20cor'+'rect\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dSp'+'ecularLigh'+'t\x20=\x20dSpecu'+'larLight\x20*'+'\x20litArgs_s'+'pecularity'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20evalua'+'te\x20materia'+'l\x20based\x20ar'+'ea\x20lights\x20'+'data,\x20shar'+'ed\x20by\x20all\x20'+'area\x20light'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ca'+'lcLTCLight'+'Values(lit'+'Args_gloss'+',\x20litArgs_'+'worldNorma'+'l,\x20dViewDi'+'rW,\x20litArg'+'s_specular'+'ity,\x20litAr'+'gs_clearco'+'at_gloss,\x20'+'litArgs_cl'+'earcoat_wo'+'rldNormal,'+'\x20litArgs_c'+'learcoat_s'+'pecularity'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20LOO'+'P\x20-\x20evalua'+'te\x20all\x20non'+'-clustered'+'\x20lights\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIGHT_C'+'OUNT\x20>\x200\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22lightEval'+'uationPS,\x20'+'LIGHT_COUN'+'T\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'clustered\x20'+'lighting\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_CL'+'USTERED_LI'+'GHTS\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20add'+'ClusteredL'+'ights(litA'+'rgs_worldN'+'ormal,\x20dVi'+'ewDirW,\x20dR'+'eflDirW,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_CLEARCOAT'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20ccRe'+'flDirW,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_gloss,\x20'+'litArgs_sp'+'ecularity,'+'\x20dVertexNo'+'rmalW,\x20dTB'+'N,\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_IRID'+'ESCENCE)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20iridesc'+'enceFresne'+'l,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_cl'+'earcoat_wo'+'rldNormal,'+'\x20litArgs_c'+'learcoat_g'+'loss,\x20litA'+'rgs_sheen_'+'gloss,\x20lit'+'Args_iride'+'scence_int'+'ensity\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20AREA_LI'+'GHTS\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20sp'+'ecular\x20has'+'\x20to\x20be\x20acc'+'umulated\x20d'+'ifferently'+'\x20if\x20we\x20wan'+'t\x20area\x20lig'+'hts\x20to\x20loo'+'k\x20correct\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_clearc'+'oat_specul'+'arity\x20=\x201.'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SPEC'+'ULAR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_s'+'pecularity'+'\x20=\x20vec3(1.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_R'+'EFRACTION\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20addRefra'+'ction(\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs'+'_worldNorm'+'al,\x20\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20dViewDirW'+',\x20\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_thi'+'ckness,\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_gloss,\x20'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_specu'+'larity,\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr')+('gs_albedo,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_tran'+'smission,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_ior,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_dispers'+'ion\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_IRID'+'ESCENCE)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20,'+'\x20iridescen'+'ceFresnel,'+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'iridescenc'+'e_intensit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20//\x20apply\x20'+'ambient\x20oc'+'clusion\x0a\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_AO\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_OCCLU'+'DE_DIRECT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20occludeD'+'iffuse(lit'+'Args_ao);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'T_OCCLUDE_'+'SPECULAR\x20!'+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20o'+'ccludeSpec'+'ular(litAr'+'gs_gloss,\x20'+'litArgs_ao'+',\x20litArgs_'+'worldNorma'+'l,\x20dViewDi'+'rW);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_SPE'+'CULARITY_F'+'ACTOR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dSpecu'+'larLight\x20='+'\x20dSpecular'+'Light\x20*\x20li'+'tArgs_spec'+'ularityFac'+'tor;\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20!defi'+'ned(LIT_OP'+'ACITY_FADE'+'S_SPECULAR'+')\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20LIT_B'+'LEND_TYPE\x20'+'==\x20NORMAL\x20'+'||\x20LIT_BLE'+'ND_TYPE\x20=='+'\x20PREMULTIP'+'LIED\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20specLum:'+'\x20f32\x20=\x20dot'+'((dSpecula'+'rLight\x20+\x20d'+'Reflection'+'.rgb\x20*\x20dRe'+'flection.a'+'),\x20vec3f(\x20'+'0.2126,\x200.'+'7152,\x200.07'+'22\x20));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'CLEARCOAT\x0a')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20spec'+'Lum\x20=\x20spec'+'Lum\x20+\x20dot('+'ccSpecular'+'Light\x20*\x20li'+'tArgs_clea'+'rcoat_spec'+'ularity\x20+\x20'+'ccReflecti'+'on\x20*\x20litAr'+'gs_clearco'+'at_specula'+'rity,\x20vec3'+'f(\x200.2126,'+'\x200.7152,\x200'+'.0722\x20));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_o'+'pacity\x20=\x20c'+'lamp(litAr'+'gs_opacity'+'\x20+\x20gammaCo'+'rrectInput'+'(specLum),'+'\x200.0,\x201.0)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_opaci'+'ty\x20=\x20litAr'+'gs_opacity'+'\x20*\x20uniform'+'.material_'+'alphaFade;'+'\x0a\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20//'+'\x20end\x20chunk'+'s\x20-\x20when\x20b'+'aking\x20ligh'+'tmap\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'LIGHTMAP_B'+'AKING\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_LIGHT'+'MAP_BAKING'+'_COLOR\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22b'+'akeLmEndPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_LIGH'+'TMAP_BAKIN'+'G_DIR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22ba'+'keDirLmEnd'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'end\x20chunks'+'\x20-\x20in\x20all\x20'+'other\x20case'+'s\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'endPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22outpu'+'tAlphaPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_MSD'+'F\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.col'+'or\x20=\x20apply'+'Msdf(outpu'+'t.color);\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22outp'+'utPS\x22\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'debugOutpu'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SHADOW_CA'+'TCHER\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20out'+'put\x20when\x20t'+'he\x20shadow\x20'+'catcher\x20is'+'\x20enabled\x20-'+'\x20accumulat'+'ed\x20shadows')+('\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20vec4f('+'vec3f(dSha'+'dowCatcher'+'),\x20output.'+'color.a);\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20output;'+'\x0a}\x0a'),CD='\x0a\x0a//\x20globa'+'ls\x0avar<pri'+'vate>\x20sRef'+'lection:\x20v'+'ec3f;\x0avar<'+'private>\x20d'+'VertexNorm'+'alW:\x20vec3f'+';\x0avar<priv'+'ate>\x20dTang'+'entW:\x20vec3'+'f;\x0avar<pri'+'vate>\x20dBin'+'ormalW:\x20ve'+'c3f;\x0avar<p'+'rivate>\x20dV'+'iewDirW:\x20v'+'ec3f;\x0avar<'+'private>\x20d'+'ReflDirW:\x20'+'vec3f;\x0avar'+'<private>\x20'+'ccReflDirW'+':\x20vec3f;\x0a\x0a'+'//\x20Per-lig'+'ht\x20tempora'+'ries\x0avar<p'+'rivate>\x20dL'+'ightDirNor'+'mW:\x20vec3f;'+'\x0avar<priva'+'te>\x20dAtten'+':\x20f32;\x0a\x0a//'+'\x20Outputs\x0av'+'ar<private'+'>\x20dTBN:\x20ma'+'t3x3f;\x0avar'+'<private>\x20'+'dReflectio'+'n:\x20vec4f;\x0a'+'var<privat'+'e>\x20dDiffus'+'eLight:\x20ve'+'c3f;\x0avar<p'+'rivate>\x20dS'+'pecularLig'+'ht:\x20vec3f;'+'\x0avar<priva'+'te>\x20ccFres'+'nel:\x20f32;\x0a'+'var<privat'+'e>\x20ccRefle'+'ction:\x20vec'+'3f;\x0avar<pr'+'ivate>\x20ccS'+'pecularLig'+'ht:\x20vec3f;'+'\x0avar<priva'+'te>\x20ccSpec'+'ularityNoF'+'res:\x20f32;\x0a'+'var<privat'+'e>\x20sSpecul'+'arLight:\x20v'+'ec3f;\x0a\x0a//\x20'+'FRAGMENT\x20S'+'HADER\x20INPU'+'TS:\x20UNIFOR'+'MS\x0a\x0a#ifdef'+'\x20LIT_DISPE'+'RSION\x0a\x20\x20\x20\x20'+'uniform\x20ma'+'terial_dis'+'persion:\x20f'+'32;\x0a#endif'+'\x0a\x0a#ifndef\x20'+'LIT_OPACIT'+'Y_FADES_SP'+'ECULAR\x0a\x20\x20\x20'+'\x20uniform\x20m'+'aterial_al'+'phaFade:\x20f'+'32;\x0a#endif'+'\x0a\x0a#ifdef\x20L'+'IT_SSAO\x0a\x20\x20'+'\x20\x20var\x20ssao'+'Texture\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20var\x20ssaoT'+'extureSamp'+'ler\x20:\x20samp'+'ler;\x0a\x20\x20\x20\x20u'+'niform\x20ssa'+'oTextureSi'+'zeInv:\x20vec'+'2f;\x0a#endif'+'\x0a\x0a//\x20light'+'ing\x20and\x20sh'+'adowing\x20de'+('clarations'+'\x0a\x0a#ifdef\x20L'+'IT_SHADOW_'+'CATCHER\x0a\x20\x20'+'\x20\x20//\x20a\x20var'+'iable\x20to\x20a'+'ccumulate\x20'+'shadows\x20fo'+'r\x20shadow\x20c'+'atcher\x20mat'+'erials\x0a\x20\x20\x20'+'\x20var<priva'+'te>\x20dShado'+'wCatcher:\x20'+'f32\x20=\x201.0;'+'\x0a#endif\x0a\x0a/'+'/\x20LOOP\x20-\x20u'+'niform\x20dec'+'larations\x20'+'for\x20all\x20no'+'n-clustere'+'d\x20lights\x0a#'+'if\x20LIGHT_C'+'OUNT\x20>\x200\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22lightDe'+'clarationP'+'S,\x20LIGHT_C'+'OUNT\x22\x0a#end'+'if\x0a\x0a#ifdef'+'\x20LIT_SPECU'+'LAR\x0a\x20\x20\x20\x20#i'+'f\x20LIT_FRES'+'NEL_MODEL\x20'+'==\x20NONE\x20&&'+'\x20!defined('+'LIT_REFLEC'+'TIONS)\x20&&\x20'+'!defined(L'+'IT_DIFFUSE'+'_MAP)\x20\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#defi'+'ne\x20LIT_OLD'+'_AMBIENT\x0a\x20'+'\x20\x20\x20#endif\x0a'+'#endif\x0a\x0a//'+'\x20lightmap\x20'+'baking\x0a#if'+'def\x20STD_LI'+'GHTMAP_DIR'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20bakeDir'+':\x20f32;\x0a#en'+'dif\x0a#ifdef'+'\x20LIT_LIGHT'+'MAP_BAKING'+'_ADD_AMBIE'+'NT\x0a\x20\x20\x20\x20uni'+'form\x20ambie'+'ntBakeOccl'+'usionContr'+'ast:\x20f32;\x0a'+'\x20\x20\x20\x20unifor'+'m\x20ambientB'+'akeOcclusi'+'onBrightne'+'ss:\x20f32;\x0a#'+'endif\x0a'),PD='\x0a\x0a@fragmen'+'t\x0afn\x20fragm'+'entMain(in'+'put:\x20Fragm'+'entInput)\x20'+'->\x20Fragmen'+'tOutput\x20{\x0a'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litUs'+'erMainStar'+'tPS\x22\x0a\x0a\x20\x20\x20\x20'+'dReflectio'+'n\x20=\x20vec4f('+'0.0);\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_CLEARCOA'+'T\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'ccSpecular'+'Light\x20=\x20ve'+'c3f(0.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20cc'+'Reflection'+'\x20=\x20vec3f(0'+'.0);\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20LIT_N'+'ONE_SLICE_'+'MODE\x20==\x20SL'+'ICED\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22startNi'+'neSlicedPS'+'\x22\x0a\x20\x20\x20\x20#eli'+'f\x20LIT_NONE'+'_SLICE_MOD'+'E\x20==\x20TILED'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22s'+'tartNineSl'+'icedTiledP'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'NEEDS_NORM'+'AL\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20dVertexNo'+'rmalW\x20=\x20no'+'rmalize(vN'+'ormalW);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_T'+'ANGENTS\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_HEIG'+'HTS)\x20||\x20de'+'fined(LIT_'+'USE_NORMAL'+'S)\x20||\x20defi'+'ned(LIT_US'+'E_CLEARCOA'+'T_NORMALS)'+'\x20||\x20define'+'d(LIT_GGX_'+'SPECULAR)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20dTan'+'gentW\x20=\x20vT'+'angentW;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dBino'+'rmalW\x20=\x20vB'+'inormalW;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20getView'+'Dir();\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_TBN'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20getTBN('+'dTangentW,'+'\x20dBinormal'+'W,\x20dVertex'+'NormalW);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_TWO_SI'+'DED_LIGHTI'+'NG\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20h'+'andleTwoSi'+'dedLightin'+'g();\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20#endif\x0a'+('\x0a\x20\x20\x20\x20//\x20in'+'voke\x20front'+'end\x20functi'+'ons\x0a\x20\x20\x20\x20ev'+'aluateFron'+'tend();\x0a\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22debugPr'+'ocessFront'+'endPS\x22\x0a\x0a\x20\x20'+'\x20\x20var\x20outp'+'ut:\x20Fragme'+'ntOutput\x20='+'\x20evaluateB'+'ackend();\x0a'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litUs'+'erMainEndP'+'S\x22\x0a\x0a\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a}\x0a'),MD='\x0a\x0a#ifdef\x20L'+'IT_NEEDS_N'+'ORMAL\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'cubeMapRot'+'atePS\x22\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22cubeMapPr'+'ojectPS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22envProc'+'PS\x22\x0a#endif'+'\x0a\x0a//\x20-----'+'\x20specular\x20'+'or\x20reflect'+'ions\x20-----'+'\x0a#ifdef\x20LI'+'T_SPECULAR'+'_OR_REFLEC'+'TION\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'METALNESS\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22me'+'talnessMod'+'ulatePS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#if\x20L'+'IT_FRESNEL'+'_MODEL\x20==\x20'+'SCHLICK\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22fres'+'nelSchlick'+'PS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_IRIDESCEN'+'CE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22iridescen'+'ceDiffract'+'ionPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0a//\x20-'+'----\x20ambie'+'nt\x20occlusi'+'on\x20-----\x0a#'+'ifdef\x20LIT_'+'AO\x0a\x20\x20\x20\x20#in'+'clude\x20\x22aoD'+'iffuseOccP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22aoS'+'pecOccPS\x22\x0a'+'#endif\x0a\x0a#i'+'f\x20LIT_REFL'+'ECTION_SOU'+'RCE\x20==\x20ENV'+'ATLASHQ\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22envAtlas'+'PS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22re'+'flectionEn'+'vHQPS\x22\x0a#el'+'if\x20LIT_REF'+'LECTION_SO'+'URCE\x20==\x20EN'+'VATLAS\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22envAtlasP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ref'+'lectionEnv'+'PS\x22\x0a#elif\x20'+'LIT_REFLEC'+'TION_SOURC'+'E\x20==\x20CUBEM'+'AP\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ref'+'lectionCub'+'ePS\x22\x0a#elif'+'\x20LIT_REFLE'+'CTION_SOUR'+'CE\x20==\x20SPHE'+'REMAP\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'reflection'+'SpherePS\x22\x0a'+'#endif\x0a\x0a#i'+'fdef\x20LIT_R'+'EFLECTIONS'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20LIT_CLEA'+'RCOAT\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22reflec'+'tionCCPS\x22\x0a'+'\x20\x20\x20\x20#endif'+('\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_SHE'+'EN\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22reflectio'+'nSheenPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a#endif\x0a\x0a#'+'ifdef\x20LIT_'+'REFRACTION'+'\x0a\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_DYNAMIC_R'+'EFRACTION)'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22r'+'efractionD'+'ynamicPS\x22\x0a'+'\x20\x20\x20\x20#elif\x20'+'defined(LI'+'T_REFLECTI'+'ONS)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22refract'+'ionCubePS\x22'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a'+'#ifdef\x20LIT'+'_SHEEN\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22lightShee'+'nPS\x22\x0a#endi'+'f\x0a\x0auniform'+'\x20material_'+'ambient:\x20v'+'ec3f;\x0a\x0a#if'+'def\x20LIT_SP'+'ECULAR\x0a\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_LIGHTING'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'GGX_SPECUL'+'AR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22light'+'SpecularAn'+'isoGGXPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22ligh'+'tSpecularB'+'linnPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20#en'+'dif\x0a#endif'+'\x0a\x0a#include'+'\x20\x22combineP'+'S\x22\x0a\x0a#ifdef'+'\x20LIT_LIGHT'+'MAP\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'ghtmapAddP'+'S\x22\x0a#endif\x0a'+'\x0a#ifdef\x20LI'+'T_ADD_AMBI'+'ENT\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22am'+'bientPS\x22\x0a#'+'endif\x0a\x0a#if'+'def\x20LIT_MS'+'DF\x0a\x20\x20\x20\x20#in'+'clude\x20\x22msd'+'fPS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'LIT_NEEDS_'+'NORMAL\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22viewDirPS'+'\x22\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_SPE'+'CULAR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_GGX_S'+'PECULAR\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'reflDirAni'+'soPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22reflDirP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a#'+'endif\x0a\x0a//\x20'+'lighting\x20f'+'unctionali')+('ty\x0a#includ'+'e\x20\x22lightin'+'gPS\x22\x0a\x0a'),DD='\x0a\x0a#include'+'\x20\x22basePS\x22\x0a'+'#include\x20\x22'+'sphericalP'+'S\x22\x0a#includ'+'e\x20\x22decodeP'+'S\x22\x0a#includ'+'e\x20\x22gammaPS'+'\x22\x0a#include'+'\x20\x22tonemapp'+'ingPS\x22\x0a#in'+'clude\x20\x22fog'+'PS\x22\x0a\x0a//\x209-'+'slice\x20supp'+'ort\x20code\x0a#'+'if\x20LIT_NON'+'E_SLICE_MO'+'DE\x20==\x20SLIC'+'ED\x0a\x20\x20\x20\x20#in'+'clude\x20\x22bas'+'eNineSlice'+'dPS\x22\x0a#elif'+'\x20LIT_NONE_'+'SLICE_MODE'+'\x20==\x20TILED\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22baseNi'+'neSlicedTi'+'ledPS\x22\x0a#en'+'dif\x0a\x0a//\x20TB'+'N\x0a#ifdef\x20L'+'IT_TBN\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22TBNPS\x22\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_TWO_SI'+'DED_LIGHTI'+'NG\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22twoSidedL'+'ightingPS\x22'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a#endif\x0a\x0a',ID='\x0a\x0a#include'+'\x20\x22varyings'+'PS\x22\x0a#inclu'+'de\x20\x22litUse'+'rDeclarati'+'onPS\x22\x0a#inc'+'lude\x20\x22fron'+'tendDeclPS'+'\x22\x0a\x0a#if\x20def'+'ined(PICK_'+'PASS)\x20||\x20d'+'efined(PRE'+'PASS_PASS)'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22fron'+'tendCodePS'+'\x22\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22litU'+'serCodePS\x22'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22litOt'+'herMainPS\x22'+'\x0a\x0a#elif\x20de'+'fined(SHAD'+'OW_PASS)\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22fronte'+'ndCodePS\x22\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22litUse'+'rCodePS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22litShad'+'owMainPS\x22\x0a'+'\x0a#else\x20//\x20'+'FORWARD_PA'+'SS\x0a\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'tForwardDe'+'clarationP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lit'+'ForwardPre'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22frontend'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litForwa'+'rdPostCode'+'PS\x22\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22li'+'tForwardBa'+'ckendPS\x22\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22litUser'+'CodePS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litForwa'+'rdMainPS\x22\x0a'+'\x0a#endif\x0a\x0a',LD='\x0a\x0a#include'+'\x20\x22varyings'+'VS\x22\x0a\x0a#incl'+'ude\x20\x20\x22litU'+'serDeclara'+'tionVS\x22\x0a\x0a#'+'ifdef\x20VERT'+'EX_COLOR\x0a\x20'+'\x20\x20\x20attribu'+'te\x20vertex_'+'color:\x20vec'+'4f;\x0a#endif'+'\x0a\x0a#ifdef\x20N'+'INESLICED\x0a'+'\x0a\x20\x20\x20\x20varyi'+'ng\x20vMask:\x20'+'vec2f;\x0a\x20\x20\x20'+'\x20varying\x20v'+'TiledUv:\x20v'+'ec2f;\x0a\x0a\x20\x20\x20'+'\x20var<priva'+'te>\x20dMaskG'+'lobal:\x20vec'+'2f;\x0a\x20\x20\x20\x20va'+'r<private>'+'\x20dTiledUvG'+'lobal:\x20vec'+'2f;\x0a\x0a\x20\x20\x20\x20u'+'niform\x20inn'+'erOffset:\x20'+'vec4f;\x0a\x20\x20\x20'+'\x20uniform\x20o'+'uterScale:'+'\x20vec2f;\x0a\x20\x20'+'\x20\x20uniform\x20'+'atlasRect:'+'\x20vec4f;\x0a\x0a#'+'endif\x0a\x0avar'+'<private>\x20'+'dPositionW'+':\x20vec3f;\x0av'+'ar<private'+'>\x20dModelMa'+'trix:\x20mat4'+'x4f;\x0a\x0a#inc'+'lude\x20\x22tran'+'sformCoreV'+'S\x22\x0a\x0a#ifdef'+'\x20UV0\x0a\x20\x20\x20\x20a'+'ttribute\x20v'+'ertex_texC'+'oord0:\x20vec'+'2f;\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22uv'+'0VS\x22\x0a#endi'+'f\x0a\x0a#ifdef\x20'+'UV1\x0a\x20\x20\x20\x20at'+'tribute\x20ve'+'rtex_texCo'+'ord1:\x20vec2'+'f;\x0a\x20\x20\x20\x20#in'+'clude\x20\x22uv1'+'VS\x22\x0a#endif'+'\x0a\x0a\x0a#ifdef\x20'+'LINEAR_DEP'+'TH\x0a\x20\x20\x20\x20#if'+'ndef\x20VIEWM'+'ATRIX\x0a\x20\x20\x20\x20'+'#define\x20VI'+'EWMATRIX\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20matri'+'x_view:\x20ma'+'t4x4f;\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0a#inc'+'lude\x20\x22tran'+'sformVS\x22\x0a\x0a'+'#ifdef\x20NOR'+'MALS\x0a\x20\x20\x20\x20#'+'include\x20\x22n'+'ormalCoreV'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22nor'+'malVS\x22\x0a#en'+'dif\x0a\x0a#ifde'+'f\x20TANGENTS'+'\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_tangent:'+'\x20vec4f;\x0a#e'+'ndif\x0a\x0a//\x20e'+'xpand\x20unif'+'orms\x20for\x20u'+'v\x20transfor'+'ms\x0a#includ'+'e\x20\x22uvTrans'+'formUnifor'+'msPS,\x20UV_T'+'RANSFORMS_'+('COUNT\x22\x0a\x0a#i'+'fdef\x20MSDF\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22msdfVS'+'\x22\x0a#endif\x0a\x0a'+'#include\x20\x20'+'\x22litUserCo'+'deVS\x22\x0a\x0a@ve'+'rtex\x0afn\x20ve'+'rtexMain(i'+'nput\x20:\x20Ver'+'texInput)\x20'+'->\x20VertexO'+'utput\x20{\x0a\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22litUser'+'MainStartV'+'S\x22\x0a\x0a\x20\x20\x20\x20va'+'r\x20output\x20:'+'\x20VertexOut'+'put;\x0a\x20\x20\x20\x20o'+'utput.posi'+'tion\x20=\x20get'+'Position()'+';\x0a\x20\x20\x20\x20outp'+'ut.vPositi'+'onW\x20=\x20getW'+'orldPositi'+'on();\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20NO'+'RMALS\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.vNormalW\x20'+'=\x20getNorma'+'l();\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20TA'+'NGENTS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20outpu'+'t.vTangent'+'W\x20=\x20normal'+'ize(dNorma'+'lMatrix\x20*\x20'+'vertex_tan'+'gent.xyz);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.vBin'+'ormalW\x20=\x20c'+'ross(outpu'+'t.vNormalW'+',\x20output.v'+'TangentW)\x20'+'*\x20vertex_t'+'angent.w;\x0a'+'\x20\x20\x20\x20#elif\x20'+'defined(GG'+'X_SPECULAR'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.vOb'+'jectSpaceU'+'pW\x20=\x20norma'+'lize(dNorm'+'alMatrix\x20*'+'\x20vec3f(0.0'+',\x201.0,\x200.0'+'));\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20UV0'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20uv0:\x20ve'+'c2f\x20=\x20getU'+'v0();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20UV0_UNMOD'+'IFIED\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.vUv0\x20'+'=\x20uv0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20UV1\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20uv1:\x20vec2'+'f\x20=\x20getUv1'+'();\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20U'+'V1_UNMODIF'+'IED\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20outp'+'ut.vUv1\x20=\x20'+'uv1;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20//\x20e'+'xpand\x20code'+'\x20for\x20uv\x20tr'+'ansforms\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22uvTrans')+('formVS,\x20UV'+'_TRANSFORM'+'S_COUNT\x22\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20VERTEX_CO'+'LOR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20output.v'+'VertexColo'+'r\x20=\x20vertex'+'_color;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LINEAR_DE'+'PTH\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20linea'+'r\x20depth\x20fr'+'om\x20the\x20wor'+'ldPosition'+',\x20see\x20getL'+'inearDepth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.vLin'+'earDepth\x20='+'\x20-(uniform'+'.matrix_vi'+'ew\x20*\x20vec4f'+'(output.vP'+'ositionW,\x20'+'1.0)).z;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20MSDF\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unpac'+'kMsdfParam'+'s();\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.outline_c'+'olor\x20=\x20dOu'+'tlineColor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.out'+'line_thick'+'ness\x20=\x20dOu'+'tlineThick'+'ness;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.shadow_co'+'lor\x20=\x20dSha'+'dowColor;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.shado'+'w_offset\x20='+'\x20dShadowOf'+'fset;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20N'+'INESLICED\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.vMask'+'\x20=\x20dMaskGl'+'obal;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.vTiledUv\x20'+'=\x20dTiledUv'+'Global;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22litUse'+'rMainEndVS'+'\x22\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a}\x0a'),RD='\x0a\x0a#ifdef\x20P'+'ICK_PASS\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22pickPS\x22'+'\x0a#endif\x0a\x0a#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22floatAs'+'UintPS\x22\x0a#e'+'ndif\x0a\x0a@fra'+'gment\x0afn\x20f'+'ragmentMai'+'n(input:\x20F'+'ragmentInp'+'ut)\x20->\x20Fra'+'gmentOutpu'+'t\x20{\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22l'+'itUserMain'+'StartPS\x22\x0a\x0a'+'\x20\x20\x20\x20var\x20ou'+'tput:\x20Frag'+'mentOutput'+';\x0a\x20\x20\x20\x20\x0a\x20\x20\x20'+'\x20evaluateF'+'rontend();'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20PICK_PA'+'SS\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20getP'+'ickOutput('+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20PREP'+'ASS_PASS\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.color\x20'+'=\x20float2ve'+'c4(vLinear'+'Depth);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22litUse'+'rMainEndPS'+'\x22\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a}\x0a',OD='\x0a\x0a//\x20Surfa'+'ce\x20albedo\x20'+'absorbance'+'\x0avar<priva'+'te>\x20litArg'+'s_albedo:\x20'+'vec3f;\x0a\x0a//'+'\x20Transpare'+'ncy\x0avar<pr'+'ivate>\x20lit'+'Args_opaci'+'ty:\x20f32;\x0a\x0a'+'//\x20Emissio'+'n\x20color\x0ava'+'r<private>'+'\x20litArgs_e'+'mission:\x20v'+'ec3f;\x0a\x0a//\x20'+'Normal\x20dir'+'ection\x20in\x20'+'world\x20spac'+'e\x0avar<priv'+'ate>\x20litAr'+'gs_worldNo'+'rmal:\x20vec3'+'f;\x0a\x0a//\x20Amb'+'ient\x20occlu'+'sion\x20amoun'+'t,\x20range\x20['+'0..1]\x0avar<'+'private>\x20l'+'itArgs_ao:'+'\x20f32;\x0a\x0a//\x20'+'Light\x20map\x20'+'color\x0avar<'+'private>\x20l'+'itArgs_lig'+'htmap:\x20vec'+'3f;\x0a\x0a//\x20Li'+'ght\x20map\x20di'+'rection\x0ava'+'r<private>'+'\x20litArgs_l'+'ightmapDir'+':\x20vec3f;\x0a\x0a'+'//\x20Surface'+'\x20metalness'+'\x20factor,\x20r'+'ange\x20[0..1'+']\x0avar<priv'+'ate>\x20litAr'+'gs_metalne'+'ss:\x20f32;\x0a\x0a'+'//\x20The\x20f0\x20'+'specularit'+'y\x20factor\x0av'+'ar<private'+'>\x20litArgs_'+'specularit'+'y:\x20vec3f;\x0a'+'\x0a//\x20Specul'+'arity\x20inte'+'nsity\x20fact'+'or,\x20range\x20'+'[0..1]\x0avar'+'<private>\x20'+'litArgs_sp'+'ecularityF'+'actor:\x20f32'+';\x0a\x0a//\x20The\x20'+'microfacet'+'\x20glossines'+'s\x20factor,\x20'+'range\x20[0..'+'1]\x0avar<pri'+'vate>\x20litA'+'rgs_gloss:'+'\x20f32;\x0a\x0a//\x20'+'Glossiness'+'\x20of\x20the\x20sh'+'een\x20layer,'+'\x20range\x20[0.'+'.1]\x0avar<pr'+'ivate>\x20lit'+'Args_sheen'+'_gloss:\x20f3'+'2;\x0a\x0a//\x20The'+'\x20color\x20of\x20'+'the\x20f0\x20spe'+'cularity\x20f'+'actor\x20for\x20'+'the\x20sheen\x20'+'layer\x0avar<'+'private>\x20l'+'itArgs_she'+'en_specula'+'rity:\x20vec3'+'f;\x0a\x0a//\x20Tra'+'nsmission\x20'+'factor\x20(re'+('fraction),'+'\x20range\x20[0.'+'.1]\x0avar<pr'+'ivate>\x20lit'+'Args_trans'+'mission:\x20f'+'32;\x0a\x0a//\x20Un'+'iform\x20thic'+'kness\x20of\x20m'+'edium,\x20use'+'d\x20by\x20trans'+'mission,\x20r'+'ange\x20[0..i'+'nf]\x0avar<pr'+'ivate>\x20lit'+'Args_thick'+'ness:\x20f32;'+'\x0a\x0a//\x20Index'+'\x20of\x20refrac'+'tion\x0avar<p'+'rivate>\x20li'+'tArgs_ior:'+'\x20f32;\x0a\x0a//\x20'+'Dispersion'+',\x20range\x20[0'+'..1]\x20typic'+'ally,\x20but\x20'+'can\x20be\x20hig'+'her\x0avar<pr'+'ivate>\x20lit'+'Args_dispe'+'rsion:\x20f32'+';\x0a\x0a//\x20Irid'+'escence\x20ef'+'fect\x20inten'+'sity,\x20rang'+'e\x20[0..1]\x0av'+'ar<private'+'>\x20litArgs_'+'iridescenc'+'e_intensit'+'y:\x20f32;\x0a\x0a/'+'/\x20Thicknes'+'s\x20of\x20the\x20i'+'ridescent\x20'+'microfilm\x20'+'layer,\x20val'+'ue\x20is\x20in\x20n'+'anometers,'+'\x20range\x20[0.'+'.1000]\x0avar'+'<private>\x20'+'litArgs_ir'+'idescence_'+'thickness:'+'\x20f32;\x0a\x0a//\x20'+'The\x20normal'+'\x20used\x20for\x20'+'the\x20clearc'+'oat\x20layer\x0a'+'var<privat'+'e>\x20litArgs'+'_clearcoat'+'_worldNorm'+'al:\x20vec3f;'+'\x0a\x0a//\x20Inten'+'sity\x20of\x20th'+'e\x20clearcoa'+'t\x20layer,\x20r'+'ange\x20[0..1'+']\x0avar<priv'+'ate>\x20litAr'+'gs_clearco'+'at_specula'+'rity:\x20f32;'+'\x0a\x0a//\x20Gloss'+'iness\x20of\x20c'+'learcoat\x20l'+'ayer,\x20rang'+'e\x20[0..1]\x0av'+'ar<private'+'>\x20litArgs_'+'clearcoat_'+'gloss:\x20f32'+';\x0a\x0a'),FD='\x0a\x0a\x20\x20\x20\x20//\x20g'+'lobal\x20text'+'ure\x20bias\x20f'+'or\x20standar'+'d\x20textures'+'\x0a\x20\x20\x20\x20#if\x20L'+'IT_NONE_SL'+'ICE_MODE\x20='+'=\x20TILED\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var<'+'private>\x20t'+'extureBias'+':\x20f32\x20=\x20-1'+'000.0;\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20texture'+'Bias:\x20f32;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lit'+'ShaderArgs'+'PS\x22\x0a',ND='\x0a\x0a#if\x20LIGH'+'T_TYPE\x20!=\x20'+'DIRECTIONA'+'L\x0a\x20\x20\x20\x20unif'+'orm\x20view_p'+'osition:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'uniform\x20li'+'ght_radius'+':\x20f32;\x0a#en'+'dif\x0a\x0a#if\x20S'+'HADOW_TYPE'+'\x20==\x20PCSS_3'+'2F\x0a\x20\x20\x20\x20#in'+'clude\x20\x22lin'+'earizeDept'+'hPS\x22\x0a#endi'+'f\x0a\x0a@fragme'+'nt\x0afn\x20frag'+'mentMain(i'+'nput:\x20Frag'+'mentInput)'+'\x20->\x20Fragme'+'ntOutput\x20{'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22litU'+'serMainSta'+'rtPS\x22\x0a\x0a\x20\x20\x20'+'\x20var\x20outpu'+'t:\x20Fragmen'+'tOutput;\x0a\x0a'+'\x20\x20\x20\x20evalua'+'teFrontend'+'();\x0a\x0a\x20\x20\x20\x20/'+'/\x20using\x20no'+'n-standard'+'\x20depth,\x20i.'+'e\x20gl_FragC'+'oord.z\x0a\x20\x20\x20'+'\x20#ifdef\x20PE'+'RSPECTIVE_'+'DEPTH\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20de'+'pth:\x20f32\x20='+'\x20input.pos'+'ition.z;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20SHADOW_T'+'YPE\x20==\x20PCS'+'S_32F\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20spot/omni'+'\x20shadows\x20c'+'urrently\x20u'+'se\x20linear\x20'+'depth.\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20TODO:\x20us'+'e\x20perspect'+'ive\x20depth\x20'+'for\x20spot/o'+'mni\x20the\x20sa'+'me\x20way\x20as\x20'+'directiona'+'l\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20LI'+'GHT_TYPE\x20!'+'=\x20DIRECTIO'+'NAL\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'depth\x20=\x20li'+'nearizeDep'+'thWithPara'+'ms(depth,\x20'+'camera_par'+'ams);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20depth:\x20'+'f32\x20=\x20min('+'distance(u'+'niform.vie'+'w_position'+',\x20input.vP'+'ositionW)\x20'+'/\x20uniform.'+'light_radi'+'us,\x200.9999'+'9);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#define\x20'+'MODIFIED_D'+'EPTH\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20SHADO'+'W_TYPE\x20==\x20'+'VSM_16F\x20||'+'\x20SHADOW_TY'+('PE\x20==\x20VSM_'+'32F\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20SHAD'+'OW_TYPE\x20=='+'\x20VSM_32F\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20expon'+'ent:\x20f32\x20='+'\x2015.0;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20exp'+'onent:\x20f32'+'\x20=\x205.54;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20dep'+'th_vsm\x20=\x202'+'.0\x20*\x20depth'+'\x20-\x201.0;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20dept'+'h_vsm\x20=\x20ex'+'p(exponent'+'\x20*\x20depth_v'+'sm);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'color\x20=\x20ve'+'c4f(depth_'+'vsm,\x20depth'+'_vsm\x20*\x20dep'+'th_vsm,\x201.'+'0,\x201.0);\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'\x20SHADOW_TY'+'PE\x20==\x20PCSS'+'_32F\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.color\x20'+'=\x20vec4f(de'+'pth,\x200.0,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20MODIFI'+'ED_DEPTH\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20If'+'\x20we\x20end\x20up'+'\x20using\x20mod'+'ified\x20dept'+'h,\x20it\x20need'+'s\x20to\x20be\x20ex'+'plicitly\x20w'+'ritten\x20to\x20'+'gl_FragDep'+'th\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.frag'+'Depth\x20=\x20de'+'pth;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'just\x20the\x20s'+'implest\x20co'+'de,\x20color\x20'+'is\x20not\x20wri'+'tten\x20anywa'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.color\x20=\x20v'+'ec4f(1.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22litUserM'+'ainEndPS\x22\x0a'+'\x20\x20\x20\x20\x0a\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a}\x0a'),kD='\x0a//\x20Real-T'+'ime\x20Polygo'+'nal-Light\x20'+'Shading\x20wi'+'th\x20Linearl'+'y\x20Transfor'+'med\x20Cosine'+'s\x0a//\x20by\x20Er'+'ic\x20Heitz,\x20'+'Jonathan\x20D'+'upuy,\x20Step'+'hen\x20Hill\x20a'+'nd\x20David\x20N'+'eubelt\x0a//\x20'+'code:\x20http'+'s://github'+'.com/selfs'+'hadow/ltc_'+'code/\x0a\x0afn\x20'+'LTC_Uv(N:\x20'+'vec3f,\x20V:\x20'+'vec3f,\x20rou'+'ghness:\x20f3'+'2)\x20->\x20vec2'+'f\x20{\x0a\x20\x20\x20\x20co'+'nst\x20LUT_SI'+'ZE:\x20f32\x20=\x20'+'64.0;\x0a\x20\x20\x20\x20'+'const\x20LUT_'+'SCALE:\x20f32'+'\x20=\x20(LUT_SI'+'ZE\x20-\x201.0)\x20'+'/\x20LUT_SIZE'+';\x0a\x20\x20\x20\x20cons'+'t\x20LUT_BIAS'+':\x20f32\x20=\x200.'+'5\x20/\x20LUT_SI'+'ZE;\x0a\x20\x20\x20\x20le'+'t\x20dotNV:\x20f'+'32\x20=\x20satur'+'ate(dot(\x20N'+',\x20V\x20));\x0a\x20\x20'+'\x20\x20//\x20textu'+'re\x20paramet'+'erized\x20by\x20'+'sqrt(\x20GGX\x20'+'alpha\x20)\x20an'+'d\x20sqrt(\x201\x20'+'-\x20cos(\x20the'+'ta\x20)\x20)\x0a\x20\x20\x20'+'\x20let\x20uv:\x20v'+'ec2f\x20=\x20vec'+'2f(\x20roughn'+'ess,\x20sqrt('+'\x201.0\x20-\x20dot'+'NV\x20)\x20);\x0a\x20\x20'+'\x20\x20return\x20u'+'v\x20*\x20LUT_SC'+'ALE\x20+\x20LUT_'+'BIAS;\x0a}\x0a\x0af'+'n\x20LTC_Clip'+'pedSphereF'+'ormFactor('+'\x20f:\x20vec3f\x20'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20//\x20Re'+'al-Time\x20Ar'+'ea\x20Lightin'+'g:\x20a\x20Journ'+'ey\x20from\x20Re'+'search\x20to\x20'+'Production'+'\x20(p.102)\x0a\x20'+'\x20\x20\x20//\x20An\x20a'+'pproximati'+'on\x20of\x20the\x20'+'form\x20facto'+'r\x20of\x20a\x20hor'+'izon-clipp'+'ed\x20rectang'+'le.\x0a\x20\x20\x20\x20le'+'t\x20l:\x20f32\x20='+'\x20length(\x20f'+'\x20);\x0a\x20\x20\x20\x20re'+'turn\x20max(\x20'+'(\x20l\x20*\x20l\x20+\x20'+'f.z\x20)\x20/\x20(\x20'+'l\x20+\x201.0\x20),'+'\x200.0\x20);\x0a}\x0a'+'\x0afn\x20LTC_Ed'+'geVectorFo'+'rmFactor(\x20'+'v1:\x20vec3f,'+'\x20v2:\x20vec3f'+'\x20)\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20le'+'t\x20x:\x20f32\x20='+'\x20dot(\x20v1,\x20'+'v2\x20);\x0a\x20\x20\x20\x20'+'let\x20y:\x20f32'+('\x20=\x20abs(\x20x\x20'+');\x0a\x20\x20\x20\x20//\x20'+'rational\x20p'+'olynomial\x20'+'approximat'+'ion\x20to\x20the'+'ta\x20/\x20sin(\x20'+'theta\x20)\x20/\x20'+'2PI\x0a\x20\x20\x20\x20le'+'t\x20a:\x20f32\x20='+'\x200.8543985'+'\x20+\x20(\x200.496'+'5155\x20+\x200.0'+'145206\x20*\x20y'+'\x20)\x20*\x20y;\x0a\x20\x20'+'\x20\x20let\x20b:\x20f'+'32\x20=\x203.417'+'5940\x20+\x20(\x204'+'.1616724\x20+'+'\x20y\x20)\x20*\x20y;\x0a'+'\x20\x20\x20\x20let\x20v:'+'\x20f32\x20=\x20a\x20/'+'\x20b;\x0a\x20\x20\x20\x20le'+'t\x20inv_sqrt'+'_term\x20=\x20in'+'verseSqrt('+'\x20max(\x201.0\x20'+'-\x20x\x20*\x20x,\x201'+'e-7f\x20)\x20);\x0a'+'\x20\x20\x20\x20let\x20th'+'eta_sinthe'+'ta:\x20f32\x20=\x20'+'select(\x20(0'+'.5\x20*\x20inv_s'+'qrt_term\x20-'+'\x20v),\x20v,\x20x\x20'+'>\x200.0\x20);\x0a\x20'+'\x20\x20\x20return\x20'+'cross(\x20v1,'+'\x20v2\x20)\x20*\x20th'+'eta_sinthe'+'ta;\x0a}\x0a\x0astr'+'uct\x20Coords'+'\x20{\x0a\x20\x20\x20\x20coo'+'rd0:\x20vec3f'+',\x0a\x20\x20\x20\x20coor'+'d1:\x20vec3f,'+'\x0a\x20\x20\x20\x20coord'+'2:\x20vec3f,\x0a'+'\x20\x20\x20\x20coord3'+':\x20vec3f,\x0a}'+'\x0a\x0afn\x20LTC_E'+'valuateRec'+'t(\x20N:\x20vec3'+'f,\x20V:\x20vec3'+'f,\x20P:\x20vec3'+'f,\x20mInv:\x20m'+'at3x3f,\x20re'+'ctCoords:\x20'+'Coords)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20//\x20bail\x20i'+'f\x20point\x20is'+'\x20on\x20back\x20s'+'ide\x20of\x20pla'+'ne\x20of\x20ligh'+'t\x0a\x20\x20\x20\x20//\x20a'+'ssumes\x20ccw'+'\x20winding\x20o'+'rder\x20of\x20li'+'ght\x20vertic'+'es\x0a\x20\x20\x20\x20let'+'\x20v1:\x20vec3f'+'\x20=\x20rectCoo'+'rds.coord1'+'\x20-\x20rectCoo'+'rds.coord0'+';\x0a\x20\x20\x20\x20let\x20'+'v2:\x20vec3f\x20'+'=\x20rectCoor'+'ds.coord3\x20'+'-\x20rectCoor'+'ds.coord0;'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'lightNorma'+'l:\x20vec3f\x20='+'\x20cross(\x20v1'+',\x20v2\x20);\x0a\x20\x20'+'\x20\x20let\x20fact'+'or:\x20f32\x20=\x20'+'sign(-dot('+'\x20lightNorm'+'al,\x20P\x20-\x20re'+'ctCoords.c'+'oord0\x20));\x0a'+'\x0a\x20\x20\x20\x20//\x20co'+'nstruct\x20or'+'thonormal\x20'+'basis\x20arou'+'nd\x20N\x0a\x20\x20\x20\x20l')+('et\x20T1:\x20vec'+'3f\x20=\x20norma'+'lize(\x20V\x20-\x20'+'N\x20*\x20dot(\x20V'+',\x20N\x20)\x20);\x0a\x20'+'\x20\x20\x20let\x20T2:'+'\x20vec3f\x20=\x20f'+'actor\x20*\x20cr'+'oss(\x20N,\x20T1'+'\x20);\x20//\x20neg'+'ated\x20from\x20'+'paper;\x20pos'+'sibly\x20due\x20'+'to\x20a\x20diffe'+'rent\x20hande'+'dness\x20of\x20w'+'orld\x20coord'+'inate\x20syst'+'em\x0a\x20\x20\x20\x20//\x20'+'compute\x20tr'+'ansform\x0a\x20\x20'+'\x20\x20let\x20mat:'+'\x20mat3x3f\x20='+'\x20mInv\x20*\x20tr'+'anspose(\x20m'+'at3x3f(\x20T1'+',\x20T2,\x20N\x20)\x20'+');\x0a\x20\x20\x20\x20//\x20'+'transform\x20'+'rect\x0a\x20\x20\x20\x20v'+'ar\x20coords:'+'\x20array<vec'+'3f,\x204>;\x0a\x20\x20'+'\x20\x20coords[0'+']\x20=\x20mat\x20*\x20'+'(\x20rectCoor'+'ds.coord0\x20'+'-\x20P\x20);\x0a\x20\x20\x20'+'\x20coords[1]'+'\x20=\x20mat\x20*\x20('+'\x20rectCoord'+'s.coord1\x20-'+'\x20P\x20);\x0a\x20\x20\x20\x20'+'coords[2]\x20'+'=\x20mat\x20*\x20(\x20'+'rectCoords'+'.coord2\x20-\x20'+'P\x20);\x0a\x20\x20\x20\x20c'+'oords[3]\x20='+'\x20mat\x20*\x20(\x20r'+'ectCoords.'+'coord3\x20-\x20P'+'\x20);\x0a\x20\x20\x20\x20//'+'\x20project\x20r'+'ect\x20onto\x20s'+'phere\x0a\x20\x20\x20\x20'+'coords[0]\x20'+'=\x20normaliz'+'e(\x20coords['+'0]\x20);\x0a\x20\x20\x20\x20'+'coords[1]\x20'+'=\x20normaliz'+'e(\x20coords['+'1]\x20);\x0a\x20\x20\x20\x20'+'coords[2]\x20'+'=\x20normaliz'+'e(\x20coords['+'2]\x20);\x0a\x20\x20\x20\x20'+'coords[3]\x20'+'=\x20normaliz'+'e(\x20coords['+'3]\x20);\x0a\x20\x20\x20\x20'+'//\x20calcula'+'te\x20vector\x20'+'form\x20facto'+'r\x0a\x20\x20\x20\x20var\x20'+'vectorForm'+'Factor:\x20ve'+'c3f\x20=\x20vec3'+'f(\x200.0\x20);\x0a'+'\x20\x20\x20\x20vector'+'FormFactor'+'\x20=\x20vectorF'+'ormFactor\x20'+'+\x20LTC_Edge'+'VectorForm'+'Factor(\x20co'+'ords[0],\x20c'+'oords[1]\x20)'+';\x0a\x20\x20\x20\x20vect'+'orFormFact'+'or\x20=\x20vecto'+'rFormFacto'+'r\x20+\x20LTC_Ed'+'geVectorFo'+'rmFactor(\x20'+'coords[1],'+'\x20coords[2]'+'\x20);\x0a\x20\x20\x20\x20ve'+'ctorFormFa')+('ctor\x20=\x20vec'+'torFormFac'+'tor\x20+\x20LTC_'+'EdgeVector'+'FormFactor'+'(\x20coords[2'+'],\x20coords['+'3]\x20);\x0a\x20\x20\x20\x20'+'vectorForm'+'Factor\x20=\x20v'+'ectorFormF'+'actor\x20+\x20LT'+'C_EdgeVect'+'orFormFact'+'or(\x20coords'+'[3],\x20coord'+'s[0]\x20);\x0a\x20\x20'+'\x20\x20//\x20adjus'+'t\x20for\x20hori'+'zon\x20clippi'+'ng\x0a\x20\x20\x20\x20let'+'\x20result:\x20f'+'32\x20=\x20LTC_C'+'lippedSphe'+'reFormFact'+'or(\x20vector'+'FormFactor'+'\x20);\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20resu'+'lt;\x0a}\x0a\x0avar'+'<private>\x20'+'dLTCCoords'+':\x20Coords;\x0a'+'fn\x20getLTCL'+'ightCoords'+'(lightPos:'+'\x20vec3f,\x20ha'+'lfWidth:\x20v'+'ec3f,\x20half'+'Height:\x20ve'+'c3f)\x20->\x20Co'+'ords\x20{\x0a\x20\x20\x20'+'\x20var\x20coord'+'s:\x20Coords;'+'\x0a\x20\x20\x20\x20coord'+'s.coord0\x20='+'\x20lightPos\x20'+'+\x20halfWidt'+'h\x20-\x20halfHe'+'ight;\x0a\x20\x20\x20\x20'+'coords.coo'+'rd1\x20=\x20ligh'+'tPos\x20-\x20hal'+'fWidth\x20-\x20h'+'alfHeight;'+'\x0a\x20\x20\x20\x20coord'+'s.coord2\x20='+'\x20lightPos\x20'+'-\x20halfWidt'+'h\x20+\x20halfHe'+'ight;\x0a\x20\x20\x20\x20'+'coords.coo'+'rd3\x20=\x20ligh'+'tPos\x20+\x20hal'+'fWidth\x20+\x20h'+'alfHeight;'+'\x0a\x20\x20\x20\x20retur'+'n\x20coords;\x0a'+'}\x0a\x0avar<pri'+'vate>\x20dSph'+'ereRadius:'+'\x20f32;\x0afn\x20g'+'etSphereLi'+'ghtCoords('+'lightPos:\x20'+'vec3f,\x20hal'+'fWidth:\x20ve'+'c3f,\x20halfH'+'eight:\x20vec'+'3f)\x20->\x20Coo'+'rds\x20{\x0a\x20\x20\x20\x20'+'//\x20used\x20fo'+'r\x20simple\x20s'+'phere\x20ligh'+'t\x20falloff\x0a'+'\x20\x20\x20\x20//\x20als'+'o,\x20the\x20cod'+'e\x20only\x20han'+'dles\x20a\x20sph'+'erical\x20lig'+'ht,\x20it\x20can'+'not\x20be\x20non'+'-uniformly'+'\x20scaled\x20in'+'\x20world\x20spa'+'ce,\x20and\x20so'+'\x20we\x20enforc'+'e\x20it\x20here\x0a'+'\x20\x20\x20\x20dSpher'+'eRadius\x20=\x20')+('max(length'+'(halfWidth'+'),\x20length('+'halfHeight'+'));\x0a\x0a\x20\x20\x20\x20/'+'/\x20Billboar'+'d\x20the\x202d\x20l'+'ight\x20quad\x20'+'to\x20reflect'+'ion\x20vector'+',\x20as\x20it\x27s\x20'+'used\x20for\x20s'+'pecular.\x20T'+'his\x20allows'+'\x20us\x20to\x20use'+'\x20disk\x20math'+'\x20for\x20the\x20s'+'phere.\x0a\x20\x20\x20'+'\x20let\x20f:\x20ve'+'c3f\x20=\x20refl'+'ect(normal'+'ize(lightP'+'os\x20-\x20unifo'+'rm.view_po'+'sition),\x20v'+'NormalW);\x0a'+'\x20\x20\x20\x20let\x20w:'+'\x20vec3f\x20=\x20n'+'ormalize(c'+'ross(f,\x20ha'+'lfHeight))'+';\x0a\x20\x20\x20\x20let\x20'+'h:\x20vec3f\x20='+'\x20normalize'+'(cross(f,\x20'+'w));\x0a\x0a\x20\x20\x20\x20'+'return\x20get'+'LTCLightCo'+'ords(light'+'Pos,\x20w\x20*\x20d'+'SphereRadi'+'us,\x20h\x20*\x20dS'+'phereRadiu'+'s);\x0a}\x0a\x0a//\x20'+'used\x20for\x20L'+'TC\x20LUT\x20tex'+'ture\x20looku'+'p\x0avar<priv'+'ate>\x20dLTCU'+'V:\x20vec2f;\x0a'+'#ifdef\x20LIT'+'_CLEARCOAT'+'\x0a\x20\x20\x20\x20var<p'+'rivate>\x20cc'+'LTCUV:\x20vec'+'2f;\x0a#endif'+'\x0a\x0afn\x20getLT'+'CLightUV(g'+'loss:\x20f32,'+'\x20worldNorm'+'al:\x20vec3f,'+'\x20viewDir:\x20'+'vec3f)\x20->\x20'+'vec2f\x20{\x0a\x20\x20'+'\x20\x20let\x20roug'+'hness:\x20f32'+'\x20=\x20max((1.'+'0\x20-\x20gloss)'+'\x20*\x20(1.0\x20-\x20'+'gloss),\x200.'+'001);\x0a\x20\x20\x20\x20'+'return\x20LTC'+'_Uv(\x20world'+'Normal,\x20vi'+'ewDir,\x20rou'+'ghness\x20);\x0a'+'}\x0a\x0a//\x20used'+'\x20for\x20energ'+'y\x20conserva'+'tion\x20and\x20t'+'o\x20modulate'+'\x20specular\x0a'+'var<privat'+'e>\x20dLTCSpe'+'cFres:\x20vec'+'3f;\x0a#ifdef'+'\x20LIT_CLEAR'+'COAT\x0a\x20\x20\x20\x20v'+'ar<private'+'>\x20ccLTCSpe'+'cFres:\x20vec'+'3f;\x0a#endif'+'\x0a\x0afn\x20getLT'+'CLightSpec'+'Fres(uv:\x20v'+'ec2f,\x20spec'+'ularity:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20let\x20t2:\x20v')+('ec4f\x20=\x20tex'+'tureSample'+'Level(area'+'LightsLutT'+'ex2,\x20areaL'+'ightsLutTe'+'x2Sampler,'+'\x20uv,\x200.0);'+'\x0a\x20\x20\x20\x20retur'+'n\x20specular'+'ity\x20*\x20t2.x'+'\x20+\x20(\x20vec3f'+'(\x201.0\x20)\x20-\x20'+'specularit'+'y)\x20*\x20t2.y;'+'\x0a}\x0a\x0afn\x20cal'+'cLTCLightV'+'alues(glos'+'s:\x20f32,\x20wo'+'rldNormal:'+'\x20vec3f,\x20vi'+'ewDir:\x20vec'+'3f,\x20specul'+'arity:\x20vec'+'3f,\x20clearc'+'oatGloss:\x20'+'f32,\x20clear'+'coatWorldN'+'ormal:\x20vec'+'3f,\x20clearc'+'oatSpecula'+'rity:\x20f32)'+'\x20{\x0a\x20\x20\x20\x20dLT'+'CUV\x20=\x20getL'+'TCLightUV('+'gloss,\x20wor'+'ldNormal,\x20'+'viewDir);\x0a'+'\x20\x20\x20\x20dLTCSp'+'ecFres\x20=\x20g'+'etLTCLight'+'SpecFres(d'+'LTCUV,\x20spe'+'cularity);'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20LIT_CLE'+'ARCOAT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20ccLTC'+'UV\x20=\x20getLT'+'CLightUV(c'+'learcoatGl'+'oss,\x20clear'+'coatWorldN'+'ormal,\x20vie'+'wDir);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20ccLTC'+'SpecFres\x20='+'\x20getLTCLig'+'htSpecFres'+'(ccLTCUV,\x20'+'vec3f(clea'+'rcoatSpecu'+'larity));\x0a'+'\x20\x20\x20\x20#endif'+'\x0a}\x0a\x0afn\x20cal'+'cRectLight'+'Values(lig'+'htPos:\x20vec'+'3f,\x20halfWi'+'dth:\x20vec3f'+',\x20halfHeig'+'ht:\x20vec3f)'+'\x20{\x0a\x20\x20\x20\x20dLT'+'CCoords\x20=\x20'+'getLTCLigh'+'tCoords(li'+'ghtPos,\x20ha'+'lfWidth,\x20h'+'alfHeight)'+';\x0a}\x0afn\x20cal'+'cDiskLight'+'Values(lig'+'htPos:\x20vec'+'3f,\x20halfWi'+'dth:\x20vec3f'+',\x20halfHeig'+'ht:\x20vec3f)'+'\x20{\x0a\x20\x20\x20\x20cal'+'cRectLight'+'Values(lig'+'htPos,\x20hal'+'fWidth,\x20ha'+'lfHeight);'+'\x0a}\x0afn\x20calc'+'SphereLigh'+'tValues(li'+'ghtPos:\x20ve'+'c3f,\x20halfW'+'idth:\x20vec3'+'f,\x20halfHei')+('ght:\x20vec3f'+')\x20{\x0a\x20\x20\x20\x20dL'+'TCCoords\x20='+'\x20getSphere'+'LightCoord'+'s(lightPos'+',\x20halfWidt'+'h,\x20halfHei'+'ght);\x0a}\x0a\x0a/'+'/\x20An\x20exten'+'ded\x20versio'+'n\x20of\x20the\x20i'+'mplementat'+'ion\x20from\x20\x22'+'How\x20to\x20sol'+'ve\x20a\x20cubic'+'\x20equation,'+'\x20revisited'+'\x22\x0a//\x20http:'+'//momentsi'+'ngraphics.'+'de/?p=105\x0a'+'fn\x20SolveCu'+'bic(Coeffi'+'cient_in:\x20'+'vec4f)\x20->\x20'+'vec3f\x20{\x0a\x20\x20'+'\x20\x20let\x20pi:\x20'+'f32\x20=\x203.14'+'159;\x0a\x20\x20\x20\x20v'+'ar\x20Coeffic'+'ient\x20=\x20Coe'+'fficient_i'+'n;\x0a\x0a\x20\x20\x20\x20//'+'\x20Normalize'+'\x20the\x20polyn'+'omial\x0a\x20\x20\x20\x20'+'Coefficien'+'t\x20=\x20vec4f('+'Coefficien'+'t.xyz\x20/\x20Co'+'efficient.'+'w,\x20Coeffic'+'ient.w);\x0a\x0a'+'\x20\x20\x20\x20//\x20Div'+'ide\x20middle'+'\x20coefficie'+'nts\x20by\x20thr'+'ee\x0a\x20\x20\x20\x20let'+'\x20new_yz:\x20v'+'ec2f\x20=\x20Coe'+'fficient.y'+'z\x20/\x203.0;\x0a\x20'+'\x20\x20\x20Coeffic'+'ient\x20=\x20vec'+'4f(Coeffic'+'ient.x,\x20ne'+'w_yz.x,\x20ne'+'w_yz.y,\x20Co'+'efficient.'+'w);\x0a\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20let\x20A:\x20'+'f32\x20=\x20Coef'+'ficient.w;'+'\x0a\x20\x20\x20\x20let\x20B'+':\x20f32\x20=\x20Co'+'efficient.'+'z;\x0a\x20\x20\x20\x20let'+'\x20C:\x20f32\x20=\x20'+'Coefficien'+'t.y;\x0a\x20\x20\x20\x20l'+'et\x20D:\x20f32\x20'+'=\x20Coeffici'+'ent.x;\x0a\x0a\x20\x20'+'\x20\x20//\x20Compu'+'te\x20the\x20Hes'+'sian\x20and\x20t'+'he\x20discrim'+'inant\x0a\x20\x20\x20\x20'+'let\x20Delta:'+'\x20vec3f\x20=\x20v'+'ec3f(\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20-Coeff'+'icient.z\x20*'+'\x20Coefficie'+'nt.z\x20+\x20Coe'+'fficient.y'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'-Coefficie'+'nt.y\x20*\x20Coe'+'fficient.z'+'\x20+\x20Coeffic'+'ient.x,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20dot('+'vec2f(Coef'+'ficient.z,'+'\x20-Coeffici'+'ent.y),\x20Co'+'efficient.'+'xy)\x0a\x20\x20\x20\x20);')+('\x0a\x0a\x20\x20\x20\x20let\x20'+'Discrimina'+'nt:\x20f32\x20=\x20'+'dot(vec2f('+'4.0\x20*\x20Delt'+'a.x,\x20-Delt'+'a.y),\x20Delt'+'a.zy);\x0a\x0a\x20\x20'+'\x20\x20var\x20xlc:'+'\x20vec2f;\x0a\x20\x20'+'\x20\x20var\x20xsc:'+'\x20vec2f;\x0a\x0a\x20'+'\x20\x20\x20//\x20Algo'+'rithm\x20A\x0a\x20\x20'+'\x20\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20A_a:'+'\x20f32\x20=\x201.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20C_a:\x20f'+'32\x20=\x20Delta'+'.x;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20D_a:'+'\x20f32\x20=\x20-2.'+'0\x20*\x20B\x20*\x20De'+'lta.x\x20+\x20De'+'lta.y;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20T'+'ake\x20the\x20cu'+'bic\x20root\x20o'+'f\x20a\x20normal'+'ized\x20compl'+'ex\x20number\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20Theta:\x20f'+'32\x20=\x20atan2'+'(sqrt(Disc'+'riminant),'+'\x20-D_a)\x20/\x203'+'.0;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20sqr'+'t_neg_Ca\x20='+'\x20sqrt(-C_a'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20x_1a:'+'\x20f32\x20=\x202.0'+'\x20*\x20sqrt_ne'+'g_Ca\x20*\x20cos'+'(Theta);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20x_3a:\x20f32'+'\x20=\x202.0\x20*\x20s'+'qrt_neg_Ca'+'\x20*\x20cos(The'+'ta\x20+\x20(2.0\x20'+'/\x203.0)\x20*\x20p'+'i);\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20xl:'+'\x20f32\x20=\x20sel'+'ect(x_3a,\x20'+'x_1a,\x20(x_1'+'a\x20+\x20x_3a)\x20'+'>\x202.0\x20*\x20B)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'xlc\x20=\x20vec2'+'f(xl\x20-\x20B,\x20'+'A);\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20//\x20Al'+'gorithm\x20D\x0a'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20A_'+'d:\x20f32\x20=\x20D'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20C_d:\x20f'+'32\x20=\x20Delta'+'.z;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20D_d:'+'\x20f32\x20=\x20-D\x20'+'*\x20Delta.y\x20'+'+\x202.0\x20*\x20C\x20'+'*\x20Delta.z;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20Take\x20th'+'e\x20cubic\x20ro'+'ot\x20of\x20a\x20no'+'rmalized\x20c'+'omplex\x20num'+'ber\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20Thet'+'a:\x20f32\x20=\x20a'+'tan2(D\x20*\x20s'+'qrt(Discri'+'minant),\x20-'+'D_d)\x20/\x203.0'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20sqrt_'+'neg_Cd\x20=\x20s'+'qrt(-C_d);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20x_1d:\x20f'+'32\x20=\x202.0\x20*')+('\x20sqrt_neg_'+'Cd\x20*\x20cos(T'+'heta);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20x'+'_3d:\x20f32\x20='+'\x202.0\x20*\x20sqr'+'t_neg_Cd\x20*'+'\x20cos(Theta'+'\x20+\x20(2.0\x20/\x20'+'3.0)\x20*\x20pi)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20xs:\x20f'+'32\x20=\x20selec'+'t(x_3d,\x20x_'+'1d,\x20x_1d\x20+'+'\x20x_3d\x20<\x202.'+'0\x20*\x20C);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20xsc\x20'+'=\x20vec2f(-D'+',\x20xs\x20+\x20C);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20let\x20E:\x20f'+'32\x20=\x20\x20xlc.'+'y\x20*\x20xsc.y;'+'\x0a\x20\x20\x20\x20let\x20F'+':\x20f32\x20=\x20-x'+'lc.x\x20*\x20xsc'+'.y\x20-\x20xlc.y'+'\x20*\x20xsc.x;\x0a'+'\x20\x20\x20\x20let\x20G:'+'\x20f32\x20=\x20\x20xl'+'c.x\x20*\x20xsc.'+'x;\x0a\x0a\x20\x20\x20\x20le'+'t\x20xmc:\x20vec'+'2f\x20=\x20vec2f'+'(C\x20*\x20F\x20-\x20B'+'\x20*\x20G,\x20-B\x20*'+'\x20F\x20+\x20C\x20*\x20E'+');\x0a\x0a\x20\x20\x20\x20va'+'r\x20Root:\x20ve'+'c3f\x20=\x20vec3'+'f(xsc.x\x20/\x20'+'xsc.y,\x20xmc'+'.x\x20/\x20xmc.y'+',\x20xlc.x\x20/\x20'+'xlc.y);\x0a\x0a\x20'+'\x20\x20\x20if\x20(Roo'+'t.x\x20<\x20Root'+'.y\x20&&\x20Root'+'.x\x20<\x20Root.'+'z)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20Root\x20=\x20'+'Root.yxz;\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20if\x20(Root.'+'z\x20<\x20Root.x'+'\x20&&\x20Root.z'+'\x20<\x20Root.y)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20Root\x20=\x20Ro'+'ot.xzy;\x0a\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20re'+'turn\x20Root;'+'\x0a}\x0a\x0afn\x20LTC'+'_EvaluateD'+'isk(N:\x20vec'+'3f,\x20V:\x20vec'+'3f,\x20P:\x20vec'+'3f,\x20Minv:\x20'+'mat3x3f,\x20p'+'oints:\x20Coo'+'rds)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20//'+'\x20construct'+'\x20orthonorm'+'al\x20basis\x20a'+'round\x20N\x0a\x20\x20'+'\x20\x20let\x20T1:\x20'+'vec3f\x20=\x20no'+'rmalize(V\x20'+'-\x20N\x20*\x20dot('+'V,\x20N));\x0a\x20\x20'+'\x20\x20let\x20T2:\x20'+'vec3f\x20=\x20cr'+'oss(N,\x20T1)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'rotate\x20are'+'a\x20light\x20in'+'\x20(T1,\x20T2,\x20'+'N)\x20basis\x0a\x20'+'\x20\x20\x20let\x20R:\x20'+'mat3x3f\x20=\x20'+'transpose('+'\x20mat3x3f(\x20'+'T1,\x20T2,\x20N\x20'+')\x20);\x0a\x20\x20\x20\x20/'+'/\x20polygon\x20'+'(allocate\x20'+'5\x20vertices'+'\x20for\x20clipp')+('ing\x0a\x20\x20\x20\x20va'+'r\x20L_:\x20arra'+'y<vec3f,\x203'+'>;\x0a\x20\x20\x20\x20L_['+'0]\x20=\x20R\x20*\x20('+'\x20points.co'+'ord0\x20-\x20P\x20)'+';\x0a\x20\x20\x20\x20L_[1'+']\x20=\x20R\x20*\x20(\x20'+'points.coo'+'rd1\x20-\x20P\x20);'+'\x0a\x20\x20\x20\x20L_[2]'+'\x20=\x20R\x20*\x20(\x20p'+'oints.coor'+'d2\x20-\x20P\x20);\x0a'+'\x0a\x20\x20\x20\x20//\x20in'+'it\x20ellipse'+'\x0a\x20\x20\x20\x20let\x20C'+':\x20vec3f\x20\x20='+'\x200.5\x20*\x20(L_'+'[0]\x20+\x20L_[2'+']);\x0a\x20\x20\x20\x20va'+'r\x20V1:\x20vec3'+'f\x20=\x200.5\x20*\x20'+'(L_[1]\x20-\x20L'+'_[2]);\x0a\x20\x20\x20'+'\x20var\x20V2:\x20v'+'ec3f\x20=\x200.5'+'\x20*\x20(L_[1]\x20'+'-\x20L_[0]);\x0a'+'\x0a\x20\x20\x20\x20let\x20C'+'_Minv:\x20vec'+'3f\x20\x20=\x20Minv'+'\x20*\x20C;\x0a\x20\x20\x20\x20'+'let\x20V1_Min'+'v:\x20vec3f\x20='+'\x20Minv\x20*\x20V1'+';\x0a\x20\x20\x20\x20let\x20'+'V2_Minv:\x20v'+'ec3f\x20=\x20Min'+'v\x20*\x20V2;\x0a\x0a\x20'+'\x20\x20\x20//\x20comp'+'ute\x20eigenv'+'ectors\x20of\x20'+'ellipse\x0a\x20\x20'+'\x20\x20var\x20a:\x20f'+'32;\x0a\x20\x20\x20\x20va'+'r\x20b:\x20f32;\x0a'+'\x20\x20\x20\x20let\x20d1'+'1:\x20f32\x20=\x20d'+'ot(V1_Minv'+',\x20V1_Minv)'+';\x0a\x20\x20\x20\x20let\x20'+'d22:\x20f32\x20='+'\x20dot(V2_Mi'+'nv,\x20V2_Min'+'v);\x0a\x20\x20\x20\x20le'+'t\x20d12:\x20f32'+'\x20=\x20dot(V1_'+'Minv,\x20V2_M'+'inv);\x0a\x20\x20\x20\x20'+'if\x20(abs(d1'+'2)\x20/\x20sqrt('+'d11\x20*\x20d22)'+'\x20>\x200.0001)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20tr:\x20f'+'32\x20=\x20d11\x20+'+'\x20d22;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20de'+'t_inner:\x20f'+'32\x20=\x20-d12\x20'+'*\x20d12\x20+\x20d1'+'1\x20*\x20d22;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20det:\x20f32\x20'+'=\x20sqrt(det'+'_inner);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20u:\x20f32\x20=\x20'+'0.5\x20*\x20sqrt'+'(tr\x20-\x202.0\x20'+'*\x20det);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'v:\x20f32\x20=\x200'+'.5\x20*\x20sqrt('+'tr\x20+\x202.0\x20*'+'\x20det);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20e'+'_max:\x20f32\x20'+'=\x20(u\x20+\x20v)\x20'+'*\x20(u\x20+\x20v);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20e_min:\x20'+'f32\x20=\x20(u\x20-'+'\x20v)\x20*\x20(u\x20-'+'\x20v);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20V1'+'_:\x20vec3f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va')+('r\x20V2_:\x20vec'+'3f;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(d11'+'\x20>\x20d22)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20V1_\x20=\x20d1'+'2\x20*\x20V1_Min'+'v\x20+\x20(e_max'+'\x20-\x20d11)\x20*\x20'+'V2_Minv;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20V2_\x20=\x20d12'+'\x20*\x20V1_Minv'+'\x20+\x20(e_min\x20'+'-\x20d11)\x20*\x20V'+'2_Minv;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x20el'+'se\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20V1_'+'\x20=\x20d12*V2_'+'Minv\x20+\x20(e_'+'max\x20-\x20d22)'+'*V1_Minv;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20V2_\x20=\x20d1'+'2*V2_Minv\x20'+'+\x20(e_min\x20-'+'\x20d22)*V1_M'+'inv;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20a\x20=\x201.'+'0\x20/\x20e_max;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20b'+'\x20=\x201.0\x20/\x20e'+'_min;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20V1\x20=\x20n'+'ormalize(V'+'1_);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20V2\x20=\x20no'+'rmalize(V2'+'_);\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20a\x20=\x201'+'.0\x20/\x20dot(V'+'1_Minv,\x20V1'+'_Minv);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20b\x20=\x20'+'1.0\x20/\x20dot('+'V2_Minv,\x20V'+'2_Minv);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20V1\x20'+'=\x20V1_Minv\x20'+'*\x20sqrt(a);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20V'+'2\x20=\x20V2_Min'+'v\x20*\x20sqrt(b'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20var\x20V3'+':\x20vec3f\x20=\x20'+'normalize('+'cross(V1,\x20'+'V2));\x0a\x20\x20\x20\x20'+'if\x20(dot(C_'+'Minv,\x20V3)\x20'+'<\x200.0)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20V3\x20'+'=\x20V3\x20*\x20-1.'+'0;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20let\x20L:'+'\x20f32\x20\x20=\x20do'+'t(V3,\x20C_Mi'+'nv);\x0a\x20\x20\x20\x20l'+'et\x20x0:\x20f32'+'\x20=\x20dot(V1,'+'\x20C_Minv)\x20/'+'\x20L;\x0a\x20\x20\x20\x20le'+'t\x20y0:\x20f32\x20'+'=\x20dot(V2,\x20'+'C_Minv)\x20/\x20'+'L;\x0a\x0a\x20\x20\x20\x20le'+'t\x20E1:\x20f32\x20'+'=\x20inverseS'+'qrt(a);\x0a\x20\x20'+'\x20\x20let\x20E2:\x20'+'f32\x20=\x20inve'+'rseSqrt(b)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20a_scaled\x20'+'=\x20a\x20*\x20L\x20*\x20'+'L;\x0a\x20\x20\x20\x20let'+'\x20b_scaled\x20'+'=\x20b\x20*\x20L\x20*\x20'+'L;\x0a\x0a\x20\x20\x20\x20le'+'t\x20c0:\x20f32\x20'+'=\x20a_scaled'+'\x20*\x20b_scale'+'d;\x0a\x20\x20\x20\x20let'+'\x20c1:\x20f32\x20='+'\x20a_scaled\x20'+'*\x20b_scaled')+('\x20*\x20(1.0\x20+\x20'+'x0\x20*\x20x0\x20+\x20'+'y0\x20*\x20y0)\x20-'+'\x20a_scaled\x20'+'-\x20b_scaled'+';\x0a\x20\x20\x20\x20let\x20'+'c2:\x20f32\x20=\x20'+'1.0\x20-\x20a_sc'+'aled\x20*\x20(1.'+'0\x20+\x20x0\x20*\x20x'+'0)\x20-\x20b_sca'+'led\x20*\x20(1.0'+'\x20+\x20y0\x20*\x20y0'+');\x0a\x20\x20\x20\x20let'+'\x20c3:\x20f32\x20='+'\x201.0;\x0a\x0a\x20\x20\x20'+'\x20let\x20roots'+':\x20vec3f\x20=\x20'+'SolveCubic'+'(vec4f(c0,'+'\x20c1,\x20c2,\x20c'+'3));\x0a\x20\x20\x20\x20l'+'et\x20e1:\x20f32'+'\x20=\x20roots.x'+';\x0a\x20\x20\x20\x20let\x20'+'e2:\x20f32\x20=\x20'+'roots.y;\x0a\x20'+'\x20\x20\x20let\x20e3:'+'\x20f32\x20=\x20roo'+'ts.z;\x0a\x0a\x20\x20\x20'+'\x20var\x20avgDi'+'r:\x20vec3f\x20='+'\x20vec3f(a_s'+'caled\x20*\x20x0'+'\x20/\x20(a_scal'+'ed\x20-\x20e2),\x20'+'b_scaled\x20*'+'\x20y0\x20/\x20(b_s'+'caled\x20-\x20e2'+'),\x201.0);\x0a\x0a'+'\x20\x20\x20\x20let\x20ro'+'tate:\x20mat3'+'x3f\x20=\x20mat3'+'x3f(V1,\x20V2'+',\x20V3);\x0a\x0a\x20\x20'+'\x20\x20avgDir\x20='+'\x20rotate\x20*\x20'+'avgDir;\x0a\x20\x20'+'\x20\x20avgDir\x20='+'\x20normalize'+'(avgDir);\x0a'+'\x0a\x20\x20\x20\x20let\x20L'+'1:\x20f32\x20=\x20s'+'qrt(-e2\x20/\x20'+'e3);\x0a\x20\x20\x20\x20l'+'et\x20L2:\x20f32'+'\x20=\x20sqrt(-e'+'2\x20/\x20e1);\x0a\x0a'+'\x20\x20\x20\x20let\x20fo'+'rmFactor:\x20'+'f32\x20=\x20max('+'0.0,\x20L1\x20*\x20'+'L2\x20*\x20inver'+'seSqrt((1.'+'0\x20+\x20L1\x20*\x20L'+'1)\x20*\x20(1.0\x20'+'+\x20L2\x20*\x20L2)'+'));\x0a\x0a\x20\x20\x20\x20c'+'onst\x20LUT_S'+'IZE_disk:\x20'+'f32\x20=\x2064.0'+';\x0a\x20\x20\x20\x20cons'+'t\x20LUT_SCAL'+'E_disk:\x20f3'+'2\x20=\x20(\x20LUT_'+'SIZE_disk\x20'+'-\x201.0\x20)\x20/\x20'+'LUT_SIZE_d'+'isk;\x0a\x20\x20\x20\x20c'+'onst\x20LUT_B'+'IAS_disk:\x20'+'f32\x20=\x200.5\x20'+'/\x20LUT_SIZE'+'_disk;\x0a\x0a\x20\x20'+'\x20\x20//\x20use\x20t'+'abulated\x20h'+'orizon-cli'+'pped\x20spher'+'e\x0a\x20\x20\x20\x20var\x20'+'uv:\x20vec2f\x20'+'=\x20vec2f(av'+'gDir.z\x20*\x200'+'.5\x20+\x200.5,\x20'+'formFactor'+');\x0a\x20\x20\x20\x20uv\x20'+'=\x20uv\x20*\x20LUT'+'_SCALE_dis'+'k\x20+\x20LUT_BI'+'AS_disk;\x0a\x0a'+'\x20\x20\x20\x20let\x20sc')+('ale:\x20f32\x20='+'\x20textureSa'+'mpleLevel('+'areaLights'+'LutTex2,\x20a'+'reaLightsL'+'utTex2Samp'+'ler,\x20uv,\x200'+'.0).w;\x0a\x0a\x20\x20'+'\x20\x20return\x20f'+'ormFactor\x20'+'*\x20scale;\x0a}'+'\x0a\x0a//\x20LTC_E'+'valuateDis'+'k\x20in\x20some\x20'+'rare\x20cases'+'\x20genereate'+'s\x20NaN\x20valu'+'es\x20in\x20a\x20or'+'\x20b,\x20just\x20b'+'efore\x20\x27flo'+'at\x20c0\x20=\x20a\x20'+'*\x20b;\x27\x0a//\x20G'+'et\x20rid\x20of\x20'+'those\x20Nan\x20'+'values\x20bef'+'ore\x20they\x20p'+'ropagate\x20f'+'urther,\x20as'+'\x20in\x20case\x20o'+'f\x20bloom\x20/\x20'+'DOF\x20blurs\x20'+'they\x0a//\x20pr'+'opagate\x20to'+'\x20large\x20are'+'as.\x20I\x20didn'+'\x27t\x20find\x20th'+'e\x20actual\x20r'+'eason\x20wher'+'e\x20those\x20co'+'me\x20from,\x20s'+'o\x20that\x20is\x20'+'still\x20TODO'+'.\x0a//\x20Note\x20'+'that\x20only\x20'+'disk/spher'+'e\x20lights\x20a'+'re\x20causing'+'\x20it,\x20so\x20on'+'ly\x20handle\x20'+'those.\x0afn\x20'+'FixNan(val'+'ue:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20//\x20use\x20v'+'alue\x20!=\x20va'+'lue\x20check\x20'+'for\x20NaN\x20as'+'\x20isnan()\x20i'+'s\x20not\x20avai'+'lable\x20in\x20W'+'GSL\x0a\x20\x20\x20\x20re'+'turn\x20selec'+'t(value,\x200'+'.0,\x20value\x20'+'!=\x20value);'+'\x0a}\x0a\x0afn\x20get'+'RectLightD'+'iffuse(wor'+'ldNormal:\x20'+'vec3f,\x20vie'+'wDir:\x20vec3'+'f,\x20lightDi'+'r:\x20vec3f,\x20'+'lightDirNo'+'rm:\x20vec3f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20let\x20id'+'entityMat\x20'+'=\x20mat3x3f('+'vec3f(1.0,'+'\x200.0,\x200.0)'+',\x20vec3f(0.'+'0,\x201.0,\x200.'+'0),\x20vec3f('+'0.0,\x200.0,\x20'+'1.0));\x0a\x20\x20\x20'+'\x20return\x20LT'+'C_Evaluate'+'Rect(\x20worl'+'dNormal,\x20v'+'iewDir,\x20vP'+'ositionW,\x20'+'identityMa'+'t,\x20dLTCCoo'+'rds\x20);\x0a}\x0a\x0a'+'fn\x20getDisk'+'LightDiffu'+'se(worldNo'+'rmal:\x20vec3')+('f,\x20viewDir'+':\x20vec3f,\x20l'+'ightDir:\x20v'+'ec3f,\x20ligh'+'tDirNorm:\x20'+'vec3f)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'let\x20identi'+'tyMat\x20=\x20ma'+'t3x3f(vec3'+'f(1.0,\x200.0'+',\x200.0),\x20ve'+'c3f(0.0,\x201'+'.0,\x200.0),\x20'+'vec3f(0.0,'+'\x200.0,\x201.0)'+');\x0a\x20\x20\x20\x20ret'+'urn\x20FixNan'+'(LTC_Evalu'+'ateDisk(\x20w'+'orldNormal'+',\x20viewDir,'+'\x20vPosition'+'W,\x20identit'+'yMat,\x20dLTC'+'Coords\x20));'+'\x0a}\x0a\x0afn\x20get'+'SphereLigh'+'tDiffuse(w'+'orldNormal'+':\x20vec3f,\x20v'+'iewDir:\x20ve'+'c3f,\x20light'+'Dir:\x20vec3f'+',\x20lightDir'+'Norm:\x20vec3'+'f)\x20->\x20f32\x20'+'{\x0a\x20\x20\x20\x20//\x20N'+'B:\x20this\x20co'+'uld\x20be\x20imp'+'roved\x20furt'+'her\x20with\x20d'+'istance\x20ba'+'sed\x20wrap\x20l'+'ighting\x0a\x20\x20'+'\x20\x20let\x20fall'+'off:\x20f32\x20='+'\x20dSphereRa'+'dius\x20/\x20(do'+'t(lightDir'+',\x20lightDir'+')\x20+\x20dSpher'+'eRadius);\x0a'+'\x20\x20\x20\x20return'+'\x20FixNan(ge'+'tLightDiff'+'use(worldN'+'ormal,\x20vie'+'wDir,\x20ligh'+'tDirNorm)\x20'+'*\x20falloff)'+';\x0a}\x0a\x0afn\x20ge'+'tLTCLightI'+'nvMat(uv:\x20'+'vec2f)\x20->\x20'+'mat3x3f\x20{\x0a'+'\x20\x20\x20\x20let\x20t1'+':\x20vec4f\x20=\x20'+'textureSam'+'pleLevel(a'+'reaLightsL'+'utTex1,\x20ar'+'eaLightsLu'+'tTex1Sampl'+'er,\x20uv,\x200.'+'0);\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20mat3'+'x3f(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3f(\x20'+'t1.x,\x200.0,'+'\x20t1.y\x20),\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3f(\x200.0,\x201'+'.0,\x200.0\x20),'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ec3f(\x20t1.z'+',\x200.0,\x20t1.'+'w\x20)\x0a\x20\x20\x20\x20);'+'\x0a}\x0a\x0afn\x20cal'+'cRectLight'+'Specular(w'+'orldNormal'+':\x20vec3f,\x20v'+'iewDir:\x20ve'+'c3f,\x20uv:\x20v'+'ec2f)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20l'+'et\x20mInv:\x20m'+'at3x3f\x20=\x20g'+'etLTCLight')+('InvMat(uv)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20LTC_Eva'+'luateRect('+'\x20worldNorm'+'al,\x20viewDi'+'r,\x20vPositi'+'onW,\x20mInv,'+'\x20dLTCCoord'+'s\x20);\x0a}\x0a\x0afn'+'\x20getRectLi'+'ghtSpecula'+'r(worldNor'+'mal:\x20vec3f'+',\x20viewDir:'+'\x20vec3f)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20return\x20ca'+'lcRectLigh'+'tSpecular('+'worldNorma'+'l,\x20viewDir'+',\x20dLTCUV);'+'\x0a}\x0a\x0afn\x20cal'+'cDiskLight'+'Specular(w'+'orldNormal'+':\x20vec3f,\x20v'+'iewDir:\x20ve'+'c3f,\x20uv:\x20v'+'ec2f)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20l'+'et\x20mInv:\x20m'+'at3x3f\x20=\x20g'+'etLTCLight'+'InvMat(uv)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20LTC_Eva'+'luateDisk('+'\x20worldNorm'+'al,\x20viewDi'+'r,\x20vPositi'+'onW,\x20mInv,'+'\x20dLTCCoord'+'s\x20);\x0a}\x0a\x0afn'+'\x20getDiskLi'+'ghtSpecula'+'r(worldNor'+'mal:\x20vec3f'+',\x20viewDir:'+'\x20vec3f)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20return\x20ca'+'lcDiskLigh'+'tSpecular('+'worldNorma'+'l,\x20viewDir'+',\x20dLTCUV);'+'\x0a}\x0a\x0afn\x20get'+'SphereLigh'+'tSpecular('+'worldNorma'+'l:\x20vec3f,\x20'+'viewDir:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20calc'+'DiskLightS'+'pecular(wo'+'rldNormal,'+'\x20viewDir,\x20'+'dLTCUV);\x0a}'+'\x0a'),UD='\x0a#ifdef\x20ST'+'D_METALNES'+'S_CONSTANT'+'\x0auniform\x20m'+'aterial_me'+'talness:\x20f'+'32;\x0a#endif'+'\x0a\x0afn\x20getMe'+'talness()\x20'+'{\x0a\x20\x20\x20\x20var\x20'+'metalness:'+'\x20f32\x20=\x201.0'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_ME'+'TALNESS_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20metal'+'ness\x20=\x20met'+'alness\x20*\x20u'+'niform.mat'+'erial_meta'+'lness;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_METALN'+'ESS_TEXTUR'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'metalness\x20'+'=\x20metalnes'+'s\x20*\x20textur'+'eSampleBia'+'s({STD_MET'+'ALNESS_TEX'+'TURE_NAME}'+',\x20{STD_MET'+'ALNESS_TEX'+'TURE_NAME}'+'Sampler,\x20{'+'STD_METALN'+'ESS_TEXTUR'+'E_UV},\x20uni'+'form.textu'+'reBias).{S'+'TD_METALNE'+'SS_TEXTURE'+'_CHANNEL};'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_ME'+'TALNESS_VE'+'RTEX\x0a\x20\x20\x20\x20m'+'etalness\x20='+'\x20metalness'+'\x20*\x20saturat'+'e(vVertexC'+'olor.{STD_'+'METALNESS_'+'VERTEX_CHA'+'NNEL});\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20dMetal'+'ness\x20=\x20met'+'alness;\x0a}\x0a',BD='\x0avar\x20textu'+'re_msdfMap'+':\x20texture_'+'2d<f32>;\x0av'+'ar\x20texture'+'_msdfMapSa'+'mpler:\x20sam'+'pler;\x0a\x0afn\x20'+'median(r:\x20'+'f32,\x20g:\x20f3'+'2,\x20b:\x20f32)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20max(min(r'+',\x20g),\x20min('+'max(r,\x20g),'+'\x20b));\x0a}\x0a\x0af'+'n\x20map(min:'+'\x20f32,\x20max:'+'\x20f32,\x20v:\x20f'+'32)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20(v\x20-\x20m'+'in)\x20/\x20(max'+'\x20-\x20min);\x0a}'+'\x0a\x0auniform\x20'+'font_sdfIn'+'tensity:\x20f'+'32;\x20//\x20int'+'ensity\x20is\x20'+'used\x20to\x20bo'+'ost\x20the\x20va'+'lue\x20read\x20f'+'rom\x20the\x20SD'+'F,\x200\x20is\x20no'+'\x20boost,\x201.'+'0\x20is\x20max\x20b'+'oost\x0aunifo'+'rm\x20font_px'+'range:\x20f32'+';\x20\x20\x20\x20\x20\x20//\x20'+'the\x20number'+'\x20of\x20pixels'+'\x20between\x20i'+'nside\x20and\x20'+'outside\x20th'+'e\x20font\x20in\x20'+'SDF\x0aunifor'+'m\x20font_tex'+'tureWidth:'+'\x20f32;\x20//\x20t'+'he\x20width\x20o'+'f\x20the\x20text'+'ure\x20atlas\x0a'+'\x0a#ifndef\x20L'+'IT_MSDF_TE'+'XT_ATTRIBU'+'TE\x0a\x20\x20\x20\x20uni'+'form\x20outli'+'ne_color:\x20'+'vec4f;\x0a\x20\x20\x20'+'\x20uniform\x20o'+'utline_thi'+'ckness:\x20f3'+'2;\x0a\x20\x20\x20\x20uni'+'form\x20shado'+'w_color:\x20v'+'ec4f;\x0a\x20\x20\x20\x20'+'uniform\x20sh'+'adow_offse'+'t:\x20vec2f;\x0a'+'#else\x0a\x20\x20\x20\x20'+'varying\x20ou'+'tline_colo'+'r:\x20vec4f;\x0a'+'\x20\x20\x20\x20varyin'+'g\x20outline_'+'thickness:'+'\x20f32;\x0a\x20\x20\x20\x20'+'varying\x20sh'+'adow_color'+':\x20vec4f;\x0a\x20'+'\x20\x20\x20varying'+'\x20shadow_of'+'fset:\x20vec2'+'f;\x0a#endif\x0a'+'\x0afn\x20applyM'+'sdf(color_'+'in:\x20vec4f)'+'\x20->\x20vec4f\x20'+'{\x0a\x0a\x20\x20\x20\x20#if'+'ndef\x20LIT_M'+'SDF_TEXT_A'+'TTRIBUTE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20outline_c'+'olorValue\x20'+'=\x20uniform.'+'outline_co'+'lor;\x0a\x20\x20\x20\x20\x20'+('\x20\x20\x20var\x20out'+'line_thick'+'nessValue\x20'+'=\x20uniform.'+'outline_th'+'ickness;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20shadow_co'+'lorValue\x20='+'\x20uniform.s'+'hadow_colo'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20shado'+'w_offsetVa'+'lue\x20=\x20unif'+'orm.shadow'+'_offset;\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20outline_c'+'olorValue\x20'+'=\x20outline_'+'color;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20o'+'utline_thi'+'cknessValu'+'e\x20=\x20outlin'+'e_thicknes'+'s;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20shado'+'w_colorVal'+'ue\x20=\x20shado'+'w_color;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20shadow_of'+'fsetValue\x20'+'=\x20shadow_o'+'ffset;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20//\x20Conv'+'ert\x20to\x20lin'+'ear\x20space\x20'+'before\x20pro'+'cessing\x0a\x20\x20'+'\x20\x20//\x20TODO:'+'\x20ideally\x20t'+'his\x20would\x20'+'receive\x20th'+'e\x20color\x20in'+'\x20linear\x20sp'+'ace,\x20but\x20t'+'hat\x20would\x20'+'require\x20la'+'rger\x20chang'+'es\x0a\x20\x20\x20\x20//\x20'+'on\x20the\x20eng'+'ine\x20side,\x20'+'with\x20the\x20w'+'ay\x20premult'+'iplied\x20alp'+'ha\x20is\x20hand'+'led\x20as\x20wel'+'l.\x0a\x20\x20\x20\x20var'+'\x20color\x20=\x20v'+'ec4f(gamma'+'CorrectInp'+'utVec3(col'+'or_in.rgb)'+',\x20color_in'+'.a);\x0a\x0a\x20\x20\x20\x20'+'//\x20sample\x20'+'the\x20field\x0a'+'\x20\x20\x20\x20let\x20ts'+'ample:\x20vec'+'3f\x20=\x20textu'+'reSample(t'+'exture_msd'+'fMap,\x20text'+'ure_msdfMa'+'pSampler,\x20'+'vUv0).rgb;'+'\x0a\x20\x20\x20\x20let\x20u'+'vShdw:\x20vec'+'2f\x20=\x20vUv0\x20'+'-\x20shadow_o'+'ffsetValue'+';\x0a\x20\x20\x20\x20let\x20'+'ssample:\x20v'+'ec3f\x20=\x20tex'+'tureSample'+'(texture_m'+'sdfMap,\x20te'+'xture_msdf'+'MapSampler'+',\x20uvShdw).'+'rgb;\x0a\x0a\x20\x20\x20\x20'+'//\x20get\x20the'+'\x20signed\x20di'+'stance\x20val'+'ue\x0a\x20\x20\x20\x20let')+('\x20sigDist:\x20'+'f32\x20=\x20medi'+'an(tsample'+'.r,\x20tsampl'+'e.g,\x20tsamp'+'le.b);\x0a\x20\x20\x20'+'\x20var\x20sigDi'+'stShdw:\x20f3'+'2\x20=\x20median'+'(ssample.r'+',\x20ssample.'+'g,\x20ssample'+'.b);\x0a\x0a\x20\x20\x20\x20'+'//\x20smoothi'+'ng\x20limit\x20-'+'\x20smaller\x20v'+'alue\x20makes'+'\x20for\x20sharp'+'er\x20but\x20mor'+'e\x20aliased\x20'+'text,\x20espe'+'cially\x20on\x20'+'angles\x0a\x20\x20\x20'+'\x20//\x20too\x20la'+'rge\x20value\x20'+'(0.5)\x20crea'+'tes\x20a\x20dark'+'\x20glow\x20arou'+'nd\x20the\x20let'+'ters\x0a\x20\x20\x20\x20l'+'et\x20smoothi'+'ngMax:\x20f32'+'\x20=\x200.2;\x0a\x0a\x20'+'\x20\x20\x20//\x20smoo'+'thing\x20depe'+'nds\x20on\x20siz'+'e\x20of\x20textu'+'re\x20on\x20scre'+'en\x0a\x20\x20\x20\x20let'+'\x20w:\x20vec2f\x20'+'=\x20abs(dpdx'+'(vUv0))\x20+\x20'+'abs(dpdy(v'+'Uv0));\x0a\x20\x20\x20'+'\x20let\x20smoot'+'hing:\x20f32\x20'+'=\x20clamp(w.'+'x\x20*\x20unifor'+'m.font_tex'+'tureWidth\x20'+'/\x20uniform.'+'font_pxran'+'ge,\x200.0,\x20s'+'moothingMa'+'x);\x0a\x0a\x20\x20\x20\x20l'+'et\x20mapMin:'+'\x20f32\x20=\x200.0'+'5;\x0a\x20\x20\x20\x20let'+'\x20mapMax:\x20f'+'32\x20=\x20clamp'+'(1.0\x20-\x20uni'+'form.font_'+'sdfIntensi'+'ty,\x20mapMin'+',\x201.0);\x0a\x0a\x20'+'\x20\x20\x20//\x20rema'+'p\x20to\x20a\x20sma'+'ller\x20range'+'\x20(used\x20on\x20'+'smaller\x20fo'+'nt\x20sizes)\x0a'+'\x20\x20\x20\x20let\x20si'+'gDistInner'+':\x20f32\x20=\x20ma'+'p(mapMin,\x20'+'mapMax,\x20si'+'gDist);\x0a\x20\x20'+'\x20\x20let\x20sigD'+'istOutline'+':\x20f32\x20=\x20ma'+'p(mapMin,\x20'+'mapMax,\x20si'+'gDist\x20+\x20ou'+'tline_thic'+'knessValue'+');\x0a\x20\x20\x20\x20sig'+'DistShdw\x20='+'\x20map(mapMi'+'n,\x20mapMax,'+'\x20sigDistSh'+'dw\x20+\x20outli'+'ne_thickne'+'ssValue);\x0a'+'\x0a\x20\x20\x20\x20let\x20c'+'enter:\x20f32'+'\x20=\x200.5;\x0a\x20\x20'+'\x20\x20//\x20calcu'+'late\x20smoot'+'hing\x20and\x20u'+'se\x20to\x20gene')+('rate\x20opaci'+'ty\x0a\x20\x20\x20\x20let'+'\x20inside:\x20f'+'32\x20=\x20smoot'+'hstep(cent'+'er\x20-\x20smoot'+'hing,\x20cent'+'er\x20+\x20smoot'+'hing,\x20sigD'+'istInner);'+'\x0a\x20\x20\x20\x20let\x20o'+'utline:\x20f3'+'2\x20=\x20smooth'+'step(cente'+'r\x20-\x20smooth'+'ing,\x20cente'+'r\x20+\x20smooth'+'ing,\x20sigDi'+'stOutline)'+';\x0a\x20\x20\x20\x20let\x20'+'shadow:\x20f3'+'2\x20=\x20smooth'+'step(cente'+'r\x20-\x20smooth'+'ing,\x20cente'+'r\x20+\x20smooth'+'ing,\x20sigDi'+'stShdw);\x0a\x0a'+'\x20\x20\x20\x20let\x20tc'+'olor_outli'+'ne:\x20vec4f\x20'+'=\x20outline\x20'+'*\x20vec4f(ou'+'tline_colo'+'rValue.a\x20*'+'\x20outline_c'+'olorValue.'+'rgb,\x20outli'+'ne_colorVa'+'lue.a);\x0a\x20\x20'+'\x20\x20var\x20tcol'+'or:\x20vec4f\x20'+'=\x20select(v'+'ec4f(0.0),'+'\x20tcolor_ou'+'tline,\x20out'+'line\x20>\x20ins'+'ide);\x0a\x20\x20\x20\x20'+'tcolor\x20=\x20m'+'ix(tcolor,'+'\x20color,\x20in'+'side);\x0a\x0a\x20\x20'+'\x20\x20let\x20scol'+'or_shadow:'+'\x20vec4f\x20=\x20s'+'hadow\x20*\x20ve'+'c4f(shadow'+'_colorValu'+'e.a\x20*\x20shad'+'ow_colorVa'+'lue.rgb,\x20s'+'hadow_colo'+'rValue.a);'+'\x0a\x20\x20\x20\x20let\x20s'+'color:\x20vec'+'4f\x20=\x20selec'+'t(tcolor,\x20'+'scolor_sha'+'dow,\x20shado'+'w\x20>\x20outlin'+'e);\x0a\x20\x20\x20\x20tc'+'olor\x20=\x20mix'+'(scolor,\x20t'+'color,\x20out'+'line);\x0a\x0a\x20\x20'+'\x20\x20//\x20Conve'+'rt\x20back\x20to'+'\x20gamma\x20spa'+'ce\x20before\x20'+'returning\x0a'+'\x20\x20\x20\x20tcolor'+'\x20=\x20vec4f(g'+'ammaCorrec'+'tOutput(tc'+'olor.rgb),'+'\x20tcolor.a)'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20tcolor'+';\x0a}\x0a'),zD='\x0a\x0afn\x20getSp'+'ecularModu'+'late(specu'+'larity:\x20ve'+'c3f,\x20albed'+'o:\x20vec3f,\x20'+'metalness:'+'\x20f32,\x20f0:\x20'+'f32)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20dielec'+'tricF0:\x20ve'+'c3f\x20=\x20f0\x20*'+'\x20speculari'+'ty;\x0a\x20\x20\x20\x20re'+'turn\x20mix(d'+'ielectricF'+'0,\x20albedo,'+'\x20metalness'+');\x0a}\x0a\x0afn\x20g'+'etAlbedoMo'+'dulate(alb'+'edo:\x20vec3f'+',\x20metalnes'+'s:\x20f32)\x20->'+'\x20vec3f\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'albedo\x20*\x20('+'1.0\x20-\x20meta'+'lness);\x0a}\x0a',VD='\x0a\x0a\x20\x20\x20\x20vary'+'ing\x20uv0:\x20v'+'ec2f;\x0a\x0a\x20\x20\x20'+'\x20var\x20morph'+'Texture:\x20t'+'exture_2d_'+'array<f32>'+';\x0a\x20\x20\x20\x20unif'+'orm\x20morphF'+'actor:\x20arr'+'ay<f32,\x20{M'+'ORPH_TEXTU'+'RE_MAX_COU'+'NT}>;\x0a\x20\x20\x20\x20'+'uniform\x20mo'+'rphIndex:\x20'+'array<u32,'+'\x20{MORPH_TE'+'XTURE_MAX_'+'COUNT}>;\x0a\x20'+'\x20\x20\x20uniform'+'\x20count:\x20u3'+'2;\x0a\x0a\x20\x20\x20\x20@f'+'ragment\x0a\x20\x20'+'\x20\x20fn\x20fragm'+'entMain(in'+'put\x20:\x20Frag'+'mentInput)'+'\x20->\x20Fragme'+'ntOutput\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20color\x20='+'\x20vec3f(0,\x20'+'0,\x200);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20t'+'extureDims'+'\x20=\x20texture'+'Dimensions'+'(morphText'+'ure);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20pi'+'xelCoords\x20'+'=\x20vec2i(in'+'put.uv0\x20*\x20'+'vec2f(text'+'ureDims));'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fo'+'r\x20(var\x20i:\x20'+'u32\x20=\x200;\x20i'+'\x20<\x20uniform'+'.count;\x20i\x20'+'=\x20i\x20+\x201)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'tureIndex:'+'\x20u32\x20=\x20uni'+'form.morph'+'Index[i].e'+'lement;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20delta\x20'+'=\x20textureL'+'oad(morphT'+'exture,\x20pi'+'xelCoords,'+'\x20textureIn'+'dex,\x200).xy'+'z;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20color'+'\x20+=\x20unifor'+'m.morphFac'+'tor[i].ele'+'ment\x20*\x20del'+'ta;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20out'+'put:\x20Fragm'+'entOutput;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20vec4f('+'color,\x201.0'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a\x20\x20\x20\x20'+'}\x0a',GD='\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_position'+':\x20vec2f;\x0a\x20'+'\x20\x20\x20varying'+'\x20uv0:\x20vec2'+'f;\x0a\x0a\x20\x20\x20\x20@v'+'ertex\x0a\x20\x20\x20\x20'+'fn\x20vertexM'+'ain(input:'+'\x20VertexInp'+'ut)\x20->\x20Ver'+'texOutput\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20output'+':\x20VertexOu'+'tput;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.position\x20'+'=\x20vec4f(in'+'put.vertex'+'_position,'+'\x200.5,\x201.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.uv0'+'\x20=\x20input.v'+'ertex_posi'+'tion\x20*\x200.5'+'\x20+\x20vec2f(0'+'.5,\x200.5);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a\x20\x20\x20\x20}\x0a',HD='\x0aattribute'+'\x20vertex_ou'+'tlineParam'+'eters:\x20vec'+'3f;\x0aattrib'+'ute\x20vertex'+'_shadowPar'+'ameters:\x20v'+'ec3f;\x0a\x0avar'+'ying\x20outli'+'ne_color:\x20'+'vec4f;\x0avar'+'ying\x20outli'+'ne_thickne'+'ss:\x20f32;\x0av'+'arying\x20sha'+'dow_color:'+'\x20vec4f;\x0ava'+'rying\x20shad'+'ow_offset:'+'\x20vec2f;\x0a\x0av'+'ar<private'+'>\x20dOutline'+'Color:\x20vec'+'4f;\x0avar<pr'+'ivate>\x20dOu'+'tlineThick'+'ness:\x20f32;'+'\x0avar<priva'+'te>\x20dShado'+'wColor:\x20ve'+'c4f;\x0avar<p'+'rivate>\x20dS'+'hadowOffse'+'t:\x20vec2f;\x0a'+'\x0afn\x20unpack'+'MsdfParams'+'()\x20{\x0a\x20\x20\x20\x20l'+'et\x20little:'+'\x20vec3f\x20=\x20v'+'ertex_outl'+'ineParamet'+'ers\x20%\x20vec3'+'f(256.0);\x0a'+'\x20\x20\x20\x20let\x20bi'+'g:\x20vec3f\x20='+'\x20(vertex_o'+'utlinePara'+'meters\x20-\x20l'+'ittle)\x20/\x202'+'56.0;\x0a\x0a\x20\x20\x20'+'\x20dOutlineC'+'olor\x20=\x20vec'+'4f(little.'+'x,\x20big.x,\x20'+'little.y,\x20'+'big.y)\x20/\x202'+'55.0;\x0a\x0a\x20\x20\x20'+'\x20//\x20_outli'+'neThicknes'+'sScale\x20==='+'\x200.2\x0a\x20\x20\x20\x20d'+'OutlineThi'+'ckness\x20=\x20l'+'ittle.z\x20/\x20'+'255.0\x20*\x200.'+'2;\x0a\x0a\x20\x20\x20\x20le'+'t\x20little_s'+'hadow\x20=\x20ve'+'rtex_shado'+'wParameter'+'s\x20%\x20vec3f('+'256.0);\x0a\x20\x20'+'\x20\x20let\x20big_'+'shadow\x20=\x20('+'vertex_sha'+'dowParamet'+'ers\x20-\x20litt'+'le_shadow)'+'\x20/\x20256.0;\x0a'+'\x0a\x20\x20\x20\x20dShad'+'owColor\x20=\x20'+'vec4f(litt'+'le_shadow.'+'x,\x20big_sha'+'dow.x,\x20lit'+'tle_shadow'+'.y,\x20big_sh'+'adow.y)\x20/\x20'+'255.0;\x0a\x0a\x20\x20'+'\x20\x20//\x20vec2('+'little.z,\x20'+'big.z)\x20/\x201'+'27.\x20-\x201.\x20r'+'emaps\x20shad'+'ow\x20offset\x20'+'from\x20[0,\x202'+'54]\x20to\x20[-1'+',\x201]\x0a\x20\x20\x20\x20/'+'/\x20_shadowO'+('ffsetScale'+'\x20===\x200.005'+'\x0a\x20\x20\x20\x20dShad'+'owOffset\x20='+'\x20(vec2f(li'+'ttle_shado'+'w.z,\x20big_s'+'hadow.z)\x20/'+'\x20127.0\x20-\x201'+'.0)\x20*\x200.00'+'5;\x0a}\x0a'),WD='\x0avar<priva'+'te>\x20dNorma'+'lMatrix:\x20m'+'at3x3f;\x0a\x0af'+'n\x20getNorma'+'l()\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20d'+'NormalMatr'+'ix\x20=\x20getNo'+'rmalMatrix'+'(dModelMat'+'rix);\x0a\x20\x20\x20\x20'+'let\x20localN'+'ormal:\x20vec'+'3f\x20=\x20getLo'+'calNormal('+'vertex_nor'+'mal);\x0a\x20\x20\x20\x20'+'return\x20nor'+'malize(dNo'+'rmalMatrix'+'\x20*\x20localNo'+'rmal);\x0a}',$D='\x0a\x0aattribut'+'e\x20vertex_n'+'ormal:\x20vec'+'3f;\x0a\x0aunifo'+'rm\x20matrix_'+'normal:\x20ma'+'t3x3f;\x0a\x0a#i'+'fdef\x20MORPH'+'ING_NORMAL'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20MORPHING'+'_INT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20mor'+'phNormalTe'+'x:\x20texture'+'_2d<u32>;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20morphNor'+'malTexSamp'+'ler:\x20sampl'+'er;\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20morp'+'hNormalTex'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20morphNorm'+'alTexSampl'+'er:\x20sample'+'r;\x0a\x20\x20\x20\x20#en'+'dif\x0a#endif'+'\x0a\x0afn\x20getLo'+'calNormal('+'vertexNorm'+'al:\x20vec3f)'+'\x20->\x20vec3f\x20'+'{\x0a\x0a\x20\x20\x20\x20var'+'\x20localNorm'+'al:\x20vec3f\x20'+'=\x20vertexNo'+'rmal;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20MO'+'RPHING_NOR'+'MAL\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20mor'+'phUV:\x20vec2'+'i\x20=\x20getTex'+'tureMorphC'+'oords();\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20MORPH'+'ING_INT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20morphN'+'ormalInt:\x20'+'vec4u\x20=\x20te'+'xtureLoad('+'morphNorma'+'lTex,\x20morp'+'hUV,\x200);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20morph'+'NormalF:\x20v'+'ec3f\x20=\x20vec'+'3f(morphNo'+'rmalInt.xy'+'z)\x20/\x2065535'+'.0\x20*\x202.0\x20-'+'\x201.0;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20lo'+'calNormal\x20'+'=\x20localNor'+'mal\x20+\x20morp'+'hNormalF;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'morphNorma'+'l:\x20vec3f\x20='+'\x20textureLo'+'ad(morphNo'+'rmalTex,\x20m'+'orphUV,\x200)'+'.xyz;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20lo'+'calNormal\x20'+'=\x20localNor'+'mal\x20+\x20morp'+'hNormal;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20return\x20lo'+'calNormal;'+'\x0a}\x0a\x0a#if\x20de'+'fined(SKIN'+')\x20||\x20defin'+'ed(BATCH)\x0a'+'\x20\x20\x20\x20fn\x20get'+('NormalMatr'+'ix(modelMa'+'trix:\x20mat4'+'x4f)\x20->\x20ma'+'t3x3f\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20mat3x3f'+'(modelMatr'+'ix[0].xyz,'+'\x20modelMatr'+'ix[1].xyz,'+'\x20modelMatr'+'ix[2].xyz)'+';\x0a\x20\x20\x20\x20}\x0a#e'+'lif\x20define'+'d(INSTANCI'+'NG)\x0a\x20\x20\x20\x20fn'+'\x20getNormal'+'Matrix(mod'+'elMatrix:\x20'+'mat4x4f)\x20-'+'>\x20mat3x3f\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20mat'+'3x3f(model'+'Matrix[0].'+'xyz,\x20model'+'Matrix[1].'+'xyz,\x20model'+'Matrix[2].'+'xyz);\x0a\x20\x20\x20\x20'+'}\x0a#else\x0a\x20\x20'+'\x20\x20fn\x20getNo'+'rmalMatrix'+'(modelMatr'+'ix:\x20mat4x4'+'f)\x20->\x20mat3'+'x3f\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20uniform.m'+'atrix_norm'+'al;\x0a\x20\x20\x20\x20}\x0a'+'#endif\x0a'),XD='\x0a#ifdef\x20ST'+'D_NORMAL_T'+'EXTURE\x0a\x20\x20\x20'+'\x20uniform\x20m'+'aterial_bu'+'mpiness:\x20f'+'32;\x0a#endif'+'\x0a\x0a#ifdef\x20S'+'TD_NORMALD'+'ETAIL_TEXT'+'URE\x0a\x20\x20\x20\x20un'+'iform\x20mate'+'rial_norma'+'lDetailMap'+'Bumpiness:'+'\x20f32;\x0a\x0a\x20\x20\x20'+'\x20//\x20https:'+'//blog.sel'+'fshadow.co'+'m/publicat'+'ions/blend'+'ing-in-det'+'ail/#detai'+'l-oriented'+'\x0a\x20\x20\x20\x20fn\x20bl'+'endNormals'+'(inN1:\x20vec'+'3f,\x20inN2:\x20'+'vec3f)\x20->\x20'+'vec3f\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'n1:\x20vec3f\x20'+'=\x20inN1\x20+\x20v'+'ec3f(0.0,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20n2:\x20vec'+'3f\x20=\x20inN2\x20'+'*\x20vec3f(-1'+'.0,\x20-1.0,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20n1\x20*\x20dot('+'n1,\x20n2)\x20/\x20'+'n1.z\x20-\x20n2;'+'\x0a\x20\x20\x20\x20}\x0a#en'+'dif\x0a\x0afn\x20ge'+'tNormal()\x20'+'{\x0a#ifdef\x20S'+'TD_NORMAL_'+'TEXTURE\x0a\x20\x20'+'\x20\x20var\x20norm'+'alMap:\x20vec'+'3f\x20=\x20{STD_'+'NORMAL_TEX'+'TURE_DECOD'+'E}(texture'+'SampleBias'+'({STD_NORM'+'AL_TEXTURE'+'_NAME},\x20{S'+'TD_NORMAL_'+'TEXTURE_NA'+'ME}Sampler'+',\x20{STD_NOR'+'MAL_TEXTUR'+'E_UV},\x20uni'+'form.textu'+'reBias));\x0a'+'\x20\x20\x20\x20normal'+'Map\x20=\x20mix('+'vec3f(0.0,'+'\x200.0,\x201.0)'+',\x20normalMa'+'p,\x20uniform'+'.material_'+'bumpiness)'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20STD_NO'+'RMALDETAIL'+'_TEXTURE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20normalDet'+'ailMap:\x20ve'+'c3f\x20=\x20{STD'+'_NORMALDET'+'AIL_TEXTUR'+'E_DECODE}('+'textureSam'+'pleBias({S'+'TD_NORMALD'+'ETAIL_TEXT'+'URE_NAME},'+'\x20{STD_NORM'+'ALDETAIL_T'+'EXTURE_NAM'+'E}Sampler,'+'\x20{STD_NORM'+'ALDETAIL_T'+'EXTURE_UV}'+(',\x20uniform.'+'textureBia'+'s));\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20normalD'+'etailMap\x20='+'\x20mix(vec3f'+'(0.0,\x200.0,'+'\x201.0),\x20nor'+'malDetailM'+'ap,\x20unifor'+'m.material'+'_normalDet'+'ailMapBump'+'iness);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20norm'+'alMap\x20=\x20bl'+'endNormals'+'(normalMap'+',\x20normalDe'+'tailMap);\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20dNor'+'malW\x20=\x20nor'+'malize(dTB'+'N\x20*\x20normal'+'Map);\x0a#els'+'e\x0a\x20\x20\x20\x20dNor'+'malW\x20=\x20dVe'+'rtexNormal'+'W;\x0a#endif\x0a'+'}\x0a'),qD='\x0auniform\x20m'+'aterial_op'+'acity:\x20f32'+';\x0a\x0afn\x20getO'+'pacity()\x20{'+'\x0a\x20\x20\x20\x20dAlph'+'a\x20=\x20unifor'+'m.material'+'_opacity;\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_OPAC'+'ITY_TEXTUR'+'E\x0a\x20\x20\x20\x20dAlp'+'ha\x20=\x20dAlph'+'a\x20*\x20textur'+'eSampleBia'+'s({STD_OPA'+'CITY_TEXTU'+'RE_NAME},\x20'+'{STD_OPACI'+'TY_TEXTURE'+'_NAME}Samp'+'ler,\x20{STD_'+'OPACITY_TE'+'XTURE_UV},'+'\x20uniform.t'+'extureBias'+').{STD_OPA'+'CITY_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'OPACITY_VE'+'RTEX\x0a\x20\x20\x20\x20d'+'Alpha\x20=\x20dA'+'lpha\x20*\x20cla'+'mp(vVertex'+'Color.{STD'+'_OPACITY_V'+'ERTEX_CHAN'+'NEL},\x200.0,'+'\x201.0);\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a',jD='\x0a\x0a#if\x20STD_'+'OPACITY_DI'+'THER\x20==\x20BA'+'YER8\x0a\x20\x20\x20\x20#'+'include\x20\x22b'+'ayerPS\x22\x0a#e'+'ndif\x0a\x0aunif'+'orm\x20blueNo'+'iseJitter:'+'\x20vec4f;\x0a\x0a#'+'if\x20STD_OPA'+'CITY_DITHE'+'R\x20==\x20BLUEN'+'OISE\x0a\x20\x20\x20\x20v'+'ar\x20blueNoi'+'seTex32\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20var\x20blueN'+'oiseTex32S'+'ampler\x20:\x20s'+'ampler;\x0a#e'+'ndif\x0a\x0afn\x20o'+'pacityDith'+'er(alpha:\x20'+'f32,\x20id:\x20f'+'32)\x20{\x0a\x20\x20\x20\x20'+'#if\x20STD_OP'+'ACITY_DITH'+'ER\x20==\x20BAYE'+'R8\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20nois'+'e:\x20f32\x20=\x20b'+'ayer8(floo'+'r((pcPosit'+'ion.xy\x20+\x20u'+'niform.blu'+'eNoiseJitt'+'er.xy\x20+\x20id'+')\x20%\x20vec2f('+'8.0)))\x20/\x206'+'4.0;\x0a\x0a\x20\x20\x20\x20'+'#else\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20S'+'TD_OPACITY'+'_DITHER\x20=='+'\x20BLUENOISE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20uv\x20'+'=\x20fract(pc'+'Position.x'+'y\x20/\x2032.0\x20+'+'\x20uniform.b'+'lueNoiseJi'+'tter.xy\x20+\x20'+'id);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20noise:\x20f3'+'2\x20=\x20textur'+'eSampleLev'+'el(blueNoi'+'seTex32,\x20b'+'lueNoiseTe'+'x32Sampler'+',\x20uv,\x200.0)'+'.y;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'f\x20STD_OPAC'+'ITY_DITHER'+'\x20==\x20IGNNOI'+'SE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ba'+'sed\x20on\x20htt'+'ps://www.i'+'ryoku.com/'+'next-gener'+'ation-post'+'-processin'+'g-in-call-'+'of-duty-ad'+'vanced-war'+'fare/\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20magic\x20=\x20'+'vec3f(0.06'+'711056,\x200.'+'00583715,\x20'+'52.9829189'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20n'+'oise:\x20f32\x20'+'=\x20fract(ma'+'gic.z\x20*\x20fr'+'act(dot(pc'+'Position.x'+'y\x20+\x20unifor'+'m.blueNois'+'eJitter.xy'+'\x20+\x20id,\x20mag'+('ic.xy)));\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20//\x20conve'+'rt\x20the\x20noi'+'se\x20to\x20line'+'ar\x20space,\x20'+'as\x20that\x20is'+'\x20specified'+'\x20in\x20sRGB\x20s'+'pace\x20(stor'+'es\x20percept'+'ual\x20values'+')\x0a\x20\x20\x20\x20nois'+'e\x20=\x20pow(no'+'ise,\x202.2);'+'\x0a\x0a\x20\x20\x20\x20if\x20('+'alpha\x20<\x20no'+'ise)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20disca'+'rd;\x0a\x20\x20\x20\x20}\x0a'+'}\x0a'),YD='\x0a',KD='\x0a\x0a#if\x20LIT_'+'BLEND_TYPE'+'\x20==\x20NORMAL'+'\x20||\x20LIT_BL'+'END_TYPE\x20='+'=\x20ADDITIVE'+'ALPHA\x20||\x20d'+'efined(LIT'+'_ALPHA_TO_'+'COVERAGE)\x0a'+'\x0a\x20\x20\x20\x20outpu'+'t.color\x20=\x20'+'vec4f(outp'+'ut.color.r'+'gb,\x20litArg'+'s_opacity)'+';\x0a\x0a#elif\x20L'+'IT_BLEND_T'+'YPE\x20==\x20PRE'+'MULTIPLIED'+'\x0a\x0a\x20\x20\x20\x20outp'+'ut.color\x20='+'\x20vec4f(out'+'put.color.'+'rgb\x20*\x20litA'+'rgs_opacit'+'y,\x20litArgs'+'_opacity);'+'\x0a\x0a#else\x0a\x0a\x20'+'\x20\x20\x20output.'+'color\x20=\x20ve'+'c4f(output'+'.color.rgb'+',\x201.0);\x0a\x0a#'+'endif\x0a',ZD='\x0avarying\x20v'+'Uv0:\x20vec2f'+';\x0avar\x20sour'+'ce:\x20textur'+'e_2d<f32>;'+'\x0avar\x20sourc'+'eSampler:\x20'+'sampler;\x0a\x0a'+'@fragment\x20'+'fn\x20fragmen'+'tMain(inpu'+'t\x20:\x20Fragme'+'ntInput)\x20-'+'>\x20Fragment'+'Output\x20{\x0a\x20'+'\x20\x20\x20var\x20out'+'put:\x20Fragm'+'entOutput;'+'\x0a\x20\x20\x20\x20outpu'+'t.color\x20=\x20'+'textureSam'+'ple(source'+',\x20sourceSa'+'mpler,\x20inp'+'ut.vUv0);\x0a'+'\x20\x20\x20\x20return'+'\x20output;\x0a}'+'\x0a',QD='\x0a\x0auniform\x20'+'material_s'+'heen:\x20vec3'+'f;\x0a\x0afn\x20get'+'Sheen()\x20{\x0a'+'\x20\x20\x20\x20var\x20sh'+'eenColor\x20='+'\x20uniform.m'+'aterial_sh'+'een;\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SHEEN_TEX'+'TURE\x0a\x20\x20\x20\x20s'+'heenColor\x20'+'=\x20sheenCol'+'or\x20*\x20{STD_'+'SHEEN_TEXT'+'URE_DECODE'+'}(textureS'+'ampleBias('+'{STD_SHEEN'+'_TEXTURE_N'+'AME},\x20{STD'+'_SHEEN_TEX'+'TURE_NAME}'+'Sampler,\x20{'+'STD_SHEEN_'+'TEXTURE_UV'+'},\x20uniform'+'.textureBi'+'as)).{STD_'+'SHEEN_TEXT'+'URE_CHANNE'+'L};\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SHEEN_VER'+'TEX\x0a\x20\x20\x20\x20sh'+'eenColor\x20='+'\x20sheenColo'+'r\x20*\x20satura'+'te3(vVerte'+'xColor.{ST'+'D_SHEEN_VE'+'RTEX_CHANN'+'EL});\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20sSpecula'+'rity\x20=\x20she'+'enColor;\x0a}'+'\x0a',JD='\x0auniform\x20m'+'aterial_sh'+'eenGloss:\x20'+'f32;\x0a\x0afn\x20g'+'etSheenGlo'+'ssiness()\x20'+'{\x0a\x20\x20\x20\x20var\x20'+'sheenGloss'+'iness\x20=\x20un'+'iform.mate'+'rial_sheen'+'Gloss;\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_SHEENGL'+'OSS_TEXTUR'+'E\x0a\x20\x20\x20\x20shee'+'nGlossines'+'s\x20=\x20sheenG'+'lossiness\x20'+'*\x20textureS'+'ampleBias('+'{STD_SHEEN'+'GLOSS_TEXT'+'URE_NAME},'+'\x20{STD_SHEE'+'NGLOSS_TEX'+'TURE_NAME}'+'Sampler,\x20{'+'STD_SHEENG'+'LOSS_TEXTU'+'RE_UV},\x20un'+'iform.text'+'ureBias).{'+'STD_SHEENG'+'LOSS_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SHEENGLOSS'+'_VERTEX\x0a\x20\x20'+'\x20\x20sheenGlo'+'ssiness\x20=\x20'+'sheenGloss'+'iness\x20*\x20sa'+'turate(vVe'+'rtexColor.'+'{STD_SHEEN'+'GLOSS_VERT'+'EX_CHANNEL'+'});\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SHEENGLOS'+'S_INVERT\x0a\x20'+'\x20\x20\x20sheenGl'+'ossiness\x20='+'\x201.0\x20-\x20she'+'enGlossine'+'ss;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'sGlossines'+'s\x20=\x20sheenG'+'lossiness\x20'+'+\x200.000000'+'1;\x0a}\x0a',eI='\x0auniform\x20m'+'aterial_he'+'ightMapFac'+'tor:\x20f32;\x0a'+'\x0afn\x20getPar'+'allax()\x20{\x0a'+'\x20\x20\x20\x20var\x20pa'+'rallaxScal'+'e\x20=\x20unifor'+'m.material'+'_heightMap'+'Factor;\x0a\x0a\x20'+'\x20\x20\x20var\x20hei'+'ght:\x20f32\x20='+'\x20textureSa'+'mpleBias({'+'STD_HEIGHT'+'_TEXTURE_N'+'AME},\x20{STD'+'_HEIGHT_TE'+'XTURE_NAME'+'}Sampler,\x20'+'{STD_HEIGH'+'T_TEXTURE_'+'UV},\x20unifo'+'rm.texture'+'Bias).{STD'+'_HEIGHT_TE'+'XTURE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'height\x20=\x20h'+'eight\x20*\x20pa'+'rallaxScal'+'e\x20-\x20parall'+'axScale\x20*\x20'+'0.5;\x0a\x20\x20\x20\x20v'+'ar\x20viewDir'+'T:\x20vec3f\x20='+'\x20dViewDirW'+'\x20*\x20dTBN;\x0a\x0a'+'\x20\x20\x20\x20viewDi'+'rT.z\x20=\x20vie'+'wDirT.z\x20+\x20'+'0.42;\x0a\x20\x20\x20\x20'+'dUvOffset\x20'+'=\x20height\x20*'+'\x20(viewDirT'+'.xy\x20/\x20view'+'DirT.z);\x0a}'+'\x0a',tI='\x0auniform\x20m'+'eshInstanc'+'eId:\x20u32;\x0a'+'\x0afn\x20getPic'+'kOutput()\x20'+'->\x20vec4f\x20{'+'\x0a\x20\x20\x20\x20let\x20i'+'nv:\x20vec4f\x20'+'=\x20vec4f(1.'+'0\x20/\x20255.0)'+';\x0a\x20\x20\x20\x20let\x20'+'shifts:\x20ve'+'c4u\x20=\x20vec4'+'u(16u,\x208u,'+'\x200u,\x2024u);'+'\x0a\x20\x20\x20\x20let\x20c'+'ol:\x20vec4u\x20'+'=\x20(vec4u(u'+'niform.mes'+'hInstanceI'+'d)\x20>>\x20shif'+'ts)\x20&\x20vec4'+'u(0xffu);\x0a'+'\x20\x20\x20\x20return'+'\x20vec4f(col'+')\x20*\x20inv;\x0a}',sI='\x0afn\x20getRef'+'lDir(world'+'Normal:\x20ve'+'c3f,\x20viewD'+'ir:\x20vec3f,'+'\x20gloss:\x20f3'+'2,\x20tbn:\x20ma'+'t3x3f)\x20{\x0a\x20'+'\x20\x20\x20dReflDi'+'rW\x20=\x20norma'+'lize(-refl'+'ect(viewDi'+'r,\x20worldNo'+'rmal));\x0a}\x0a',iI='\x0afn\x20getRef'+'lDir(world'+'Normal:\x20ve'+'c3f,\x20viewD'+'ir:\x20vec3f,'+'\x20gloss:\x20f3'+'2,\x20tbn:\x20ma'+'t3x3f)\x20{\x0a\x20'+'\x20\x20\x20let\x20rou'+'ghness:\x20f3'+'2\x20=\x20sqrt(1'+'.0\x20-\x20min(g'+'loss,\x201.0)'+');\x0a\x0a\x20\x20\x20\x20le'+'t\x20directio'+'n:\x20vec2f\x20='+'\x20dAnisotro'+'pyRotation'+';\x0a\x20\x20\x20\x20let\x20'+'anisotropi'+'cT:\x20vec3f\x20'+'=\x20normaliz'+'e(tbn\x20*\x20ve'+'c3f(direct'+'ion,\x200.0))'+';\x0a\x20\x20\x20\x20let\x20'+'anisotropi'+'cB:\x20vec3f\x20'+'=\x20normaliz'+'e(cross(tb'+'n[2],\x20anis'+'otropicT))'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20anisotrop'+'y:\x20f32\x20=\x20d'+'Anisotropy'+';\x0a\x20\x20\x20\x20let\x20'+'anisotropi'+'cDirection'+':\x20vec3f\x20=\x20'+'anisotropi'+'cB;\x0a\x20\x20\x20\x20le'+'t\x20anisotro'+'picTangent'+':\x20vec3f\x20=\x20'+'cross(anis'+'otropicDir'+'ection,\x20vi'+'ewDir);\x0a\x20\x20'+'\x20\x20let\x20anis'+'otropicNor'+'mal:\x20vec3f'+'\x20=\x20cross(a'+'nisotropic'+'Tangent,\x20a'+'nisotropic'+'Direction)'+';\x0a\x20\x20\x20\x20let\x20'+'bendFactor'+':\x20f32\x20=\x201.'+'0\x20-\x20anisot'+'ropy\x20*\x20(1.'+'0\x20-\x20roughn'+'ess);\x0a\x20\x20\x20\x20'+'let\x20bendFa'+'ctor4:\x20f32'+'\x20=\x20bendFac'+'tor\x20*\x20bend'+'Factor\x20*\x20b'+'endFactor\x20'+'*\x20bendFact'+'or;\x0a\x20\x20\x20\x20le'+'t\x20bentNorm'+'al:\x20vec3f\x20'+'=\x20normaliz'+'e(mix(norm'+'alize(anis'+'otropicNor'+'mal),\x20norm'+'alize(worl'+'dNormal),\x20'+'bendFactor'+'4));\x0a\x20\x20\x20\x20d'+'ReflDirW\x20='+'\x20reflect(-'+'viewDir,\x20b'+'entNormal)'+';\x0a}',rI='\x0a#ifdef\x20LI'+'T_CLEARCOA'+'T\x0afn\x20addRe'+'flectionCC'+'(reflDir:\x20'+'vec3f,\x20glo'+'ss:\x20f32)\x20{'+'\x0a\x20\x20\x20\x20ccRef'+'lection\x20=\x20'+'ccReflecti'+'on\x20+\x20calcR'+'eflection('+'reflDir,\x20g'+'loss);\x0a}\x0a#'+'endif\x0a',aI='\x0avar\x20textu'+'re_cubeMap'+':\x20texture_'+'cube<f32>;'+'\x0avar\x20textu'+'re_cubeMap'+'Sampler:\x20s'+'ampler;\x0aun'+'iform\x20mate'+'rial_refle'+'ctivity:\x20f'+'32;\x0a\x0afn\x20ca'+'lcReflecti'+'on(reflDir'+':\x20vec3f,\x20g'+'loss:\x20f32)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20var\x20'+'lookupVec:'+'\x20vec3f\x20=\x20c'+'ubeMapProj'+'ect(reflDi'+'r);\x0a\x20\x20\x20\x20lo'+'okupVec.x\x20'+'=\x20lookupVe'+'c.x\x20*\x20-1.0'+';\x0a\x20\x20\x20\x20retu'+'rn\x20{reflec'+'tionDecode'+'}(textureS'+'ample(text'+'ure_cubeMa'+'p,\x20texture'+'_cubeMapSa'+'mpler,\x20loo'+'kupVec));\x0a'+'}\x0a\x0afn\x20addR'+'eflection('+'reflDir:\x20v'+'ec3f,\x20glos'+'s:\x20f32)\x20{\x0a'+'\x20\x20\x20\x20dRefle'+'ction\x20=\x20dR'+'eflection\x20'+'+\x20vec4f(ca'+'lcReflecti'+'on(reflDir'+',\x20gloss),\x20'+'uniform.ma'+'terial_ref'+'lectivity)'+';\x0a}\x0a',nI='\x0a#ifndef\x20E'+'NV_ATLAS\x0a\x20'+'\x20\x20\x20#define'+'\x20ENV_ATLAS'+'\x0a\x20\x20\x20\x20var\x20t'+'exture_env'+'Atlas:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20texture_'+'envAtlasSa'+'mpler:\x20sam'+'pler;\x0a#end'+'if\x0a\x0avar\x20te'+'xture_cube'+'Map:\x20textu'+'re_cube<f3'+'2>;\x0avar\x20te'+'xture_cube'+'MapSampler'+':\x20sampler;'+'\x0auniform\x20m'+'aterial_re'+'flectivity'+':\x20f32;\x0a\x0afn'+'\x20calcRefle'+'ction(refl'+'Dir:\x20vec3f'+',\x20gloss:\x20f'+'32)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20l'+'et\x20dir:\x20ve'+'c3f\x20=\x20cube'+'MapProject'+'(reflDir)\x20'+'*\x20vec3f(-1'+'.0,\x201.0,\x201'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20uv:\x20vec'+'2f\x20=\x20toSph'+'ericalUv(d'+'ir);\x0a\x0a\x20\x20\x20\x20'+'//\x20calcula'+'te\x20roughne'+'ss\x20level\x0a\x20'+'\x20\x20\x20let\x20lev'+'el:\x20f32\x20=\x20'+'saturate(1'+'.0\x20-\x20gloss'+')\x20*\x205.0;\x0a\x20'+'\x20\x20\x20let\x20ile'+'vel:\x20f32\x20='+'\x20floor(lev'+'el);\x0a\x20\x20\x20\x20l'+'et\x20flevel:'+'\x20f32\x20=\x20lev'+'el\x20-\x20ileve'+'l;\x0a\x0a\x20\x20\x20\x20le'+'t\x20sharp:\x20v'+'ec3f\x20=\x20{re'+'flectionCu'+'bemapDecod'+'e}(texture'+'Sample(tex'+'ture_cubeM'+'ap,\x20textur'+'e_cubeMapS'+'ampler,\x20di'+'r));\x0a\x20\x20\x20\x20l'+'et\x20roughA:'+'\x20vec3f\x20=\x20{'+'reflection'+'Decode}(te'+'xtureSampl'+'e(texture_'+'envAtlas,\x20'+'texture_en'+'vAtlasSamp'+'ler,\x20mapRo'+'ughnessUv('+'uv,\x20ilevel'+')));\x0a\x20\x20\x20\x20l'+'et\x20roughB:'+'\x20vec3f\x20=\x20{'+'reflection'+'Decode}(te'+'xtureSampl'+'e(texture_'+'envAtlas,\x20'+'texture_en'+'vAtlasSamp'+'ler,\x20mapRo'+'ughnessUv('+'uv,\x20ilevel'+'\x20+\x201.0)));'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20process'+'Environmen'+'t(mix(shar'+'p,\x20mix(rou'+('ghA,\x20rough'+'B,\x20flevel)'+',\x20min(leve'+'l,\x201.0)));'+'\x0a}\x0a\x0afn\x20add'+'Reflection'+'(reflDir:\x20'+'vec3f,\x20glo'+'ss:\x20f32)\x20{'+'\x0a\x20\x20\x20\x20dRefl'+'ection\x20=\x20d'+'Reflection'+'\x20+\x20vec4f(c'+'alcReflect'+'ion(reflDi'+'r,\x20gloss),'+'\x20uniform.m'+'aterial_re'+'flectivity'+');\x0a}\x0a'),oI='\x0a#ifndef\x20E'+'NV_ATLAS\x0a#'+'define\x20ENV'+'_ATLAS\x0a\x20\x20\x20'+'\x20var\x20textu'+'re_envAtla'+'s:\x20texture'+'_2d<f32>;\x0a'+'\x20\x20\x20\x20var\x20te'+'xture_envA'+'tlasSample'+'r:\x20sampler'+';\x0a#endif\x0au'+'niform\x20mat'+'erial_refl'+'ectivity:\x20'+'f32;\x0a\x0a//\x20c'+'alculate\x20m'+'ip\x20level\x20f'+'or\x20shiny\x20r'+'eflection\x20'+'given\x20equi'+'rect\x20coord'+'s\x20uv.\x0afn\x20s'+'hinyMipLev'+'el(uv:\x20vec'+'2f)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20dx:\x20vec2f'+'\x20=\x20dpdx(uv'+');\x0a\x20\x20\x20\x20let'+'\x20dy:\x20vec2f'+'\x20=\x20dpdy(uv'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20calculate'+'\x20second\x20dF'+'\x20at\x20180\x20de'+'grees\x0a\x20\x20\x20\x20'+'let\x20uv2:\x20v'+'ec2f\x20=\x20vec'+'2f(fract(u'+'v.x\x20+\x200.5)'+',\x20uv.y);\x0a\x20'+'\x20\x20\x20let\x20dx2'+':\x20vec2f\x20=\x20'+'dpdx(uv2);'+'\x0a\x20\x20\x20\x20let\x20d'+'y2:\x20vec2f\x20'+'=\x20dpdy(uv2'+');\x0a\x0a\x20\x20\x20\x20//'+'\x20calculate'+'\x20min\x20of\x20bo'+'th\x20sets\x20of'+'\x20dF\x20to\x20han'+'dle\x20discon'+'tinuity\x20at'+'\x20the\x20azim\x20'+'edge\x0a\x20\x20\x20\x20l'+'et\x20maxd:\x20f'+'32\x20=\x20min(m'+'ax(dot(dx,'+'\x20dx),\x20dot('+'dy,\x20dy)),\x20'+'max(dot(dx'+'2,\x20dx2),\x20d'+'ot(dy2,\x20dy'+'2)));\x0a\x0a\x20\x20\x20'+'\x20return\x20cl'+'amp(0.5\x20*\x20'+'log2(maxd)'+'\x20-\x201.0\x20+\x20u'+'niform.tex'+'tureBias,\x20'+'0.0,\x205.0);'+'\x0a}\x0a\x0afn\x20cal'+'cReflectio'+'n(reflDir:'+'\x20vec3f,\x20gl'+'oss:\x20f32)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20let\x20d'+'ir:\x20vec3f\x20'+'=\x20cubeMapP'+'roject(ref'+'lDir)\x20*\x20ve'+'c3f(-1.0,\x20'+'1.0,\x201.0);'+'\x0a\x20\x20\x20\x20let\x20u'+'v:\x20vec2f\x20='+'\x20toSpheric'+'alUv(dir);'+'\x0a\x0a\x20\x20\x20\x20//\x20c'+'alculate\x20r'+'oughness\x20l'+'evel\x0a\x20\x20\x20\x20l'+'et\x20level:\x20'+'f32\x20=\x20satu'+'rate(1.0\x20-'+'\x20gloss)\x20*\x20'+'5.0;\x0a\x20\x20\x20\x20l'+('et\x20ilevel:'+'\x20f32\x20=\x20flo'+'or(level);'+'\x0a\x0a\x20\x20\x20\x20//\x20a'+'ccessing\x20t'+'he\x20shiny\x20('+'top\x20level)'+'\x20reflectio'+'n\x20-\x20perfor'+'m\x20manual\x20m'+'ipmap\x20look'+'up\x0a\x20\x20\x20\x20let'+'\x20level2:\x20f'+'32\x20=\x20shiny'+'MipLevel(u'+'v\x20*\x20atlasS'+'ize);\x0a\x20\x20\x20\x20'+'let\x20ilevel'+'2:\x20f32\x20=\x20f'+'loor(level'+'2);\x0a\x0a\x20\x20\x20\x20v'+'ar\x20uv0:\x20ve'+'c2f;\x0a\x20\x20\x20\x20v'+'ar\x20uv1:\x20ve'+'c2f;\x0a\x20\x20\x20\x20v'+'ar\x20weight:'+'\x20f32;\x0a\x20\x20\x20\x20'+'if\x20(ilevel'+'\x20==\x200.0)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'v0\x20=\x20mapSh'+'inyUv(uv,\x20'+'ilevel2);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20uv'+'1\x20=\x20mapShi'+'nyUv(uv,\x20i'+'level2\x20+\x201'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20weight\x20'+'=\x20level2\x20-'+'\x20ilevel2;\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20access'+'ing\x20rough\x20'+'reflection'+'\x20-\x20just\x20sa'+'mple\x20the\x20s'+'ame\x20part\x20t'+'wice\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uv0\x20=\x20m'+'apRoughnes'+'sUv(uv,\x20il'+'evel);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20uv1\x20='+'\x20uv0;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20weight'+'\x20=\x200.0;\x0a\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20l'+'et\x20linearA'+':\x20vec3f\x20=\x20'+'{reflectio'+'nDecode}(t'+'extureSamp'+'le(texture'+'_envAtlas,'+'\x20texture_e'+'nvAtlasSam'+'pler,\x20uv0)'+');\x0a\x20\x20\x20\x20let'+'\x20linearB:\x20'+'vec3f\x20=\x20{r'+'eflectionD'+'ecode}(tex'+'tureSample'+'(texture_e'+'nvAtlas,\x20t'+'exture_env'+'AtlasSampl'+'er,\x20uv1));'+'\x0a\x20\x20\x20\x20let\x20l'+'inear0:\x20ve'+'c3f\x20=\x20mix('+'linearA,\x20l'+'inearB,\x20we'+'ight);\x0a\x20\x20\x20'+'\x20let\x20linea'+'r1:\x20vec3f\x20'+'=\x20{reflect'+'ionDecode}'+'(textureSa'+'mple(textu'+'re_envAtla'+'s,\x20texture'+'_envAtlasS'+'ampler,\x20ma'+'pRoughness'+'Uv(uv,\x20ile'+'vel\x20+\x201.0)'+'));\x0a\x0a\x20\x20\x20\x20r')+('eturn\x20proc'+'essEnviron'+'ment(mix(l'+'inear0,\x20li'+'near1,\x20lev'+'el\x20-\x20ileve'+'l));\x0a}\x0a\x0afn'+'\x20addReflec'+'tion(reflD'+'ir:\x20vec3f,'+'\x20gloss:\x20f3'+'2)\x20{\x0a\x20\x20\x20\x20d'+'Reflection'+'\x20=\x20dReflec'+'tion\x20+\x20vec'+'4f(calcRef'+'lection(re'+'flDir,\x20glo'+'ss),\x20unifo'+'rm.materia'+'l_reflecti'+'vity);\x0a}\x0a'),lI='\x0a#ifndef\x20V'+'IEWMATRIX\x0a'+'\x20\x20\x20\x20#defin'+'e\x20VIEWMATR'+'IX\x0a\x20\x20\x20\x20uni'+'form\x20matri'+'x_view:\x20ma'+'t4x4f;\x0a#en'+'dif\x0a\x0avar\x20t'+'exture_sph'+'ereMap:\x20te'+'xture_2d<f'+'32>;\x0avar\x20t'+'exture_sph'+'ereMapSamp'+'ler:\x20sampl'+'er;\x0aunifor'+'m\x20material'+'_reflectiv'+'ity:\x20f32;\x0a'+'\x0afn\x20calcRe'+'flection(r'+'eflDir:\x20ve'+'c3f,\x20gloss'+':\x20f32)\x20->\x20'+'vec3f\x20{\x0a\x20\x20'+'\x20\x20let\x20view'+'RotationMa'+'trix\x20=\x20mat'+'3x3f(unifo'+'rm.matrix_'+'view[0].xy'+'z,\x20uniform'+'.matrix_vi'+'ew[1].xyz,'+'\x20uniform.m'+'atrix_view'+'[2].xyz);\x0a'+'\x20\x20\x20\x20let\x20re'+'flDirV:\x20ve'+'c3f\x20=\x20view'+'RotationMa'+'trix\x20*\x20ref'+'lDir;\x0a\x0a\x20\x20\x20'+'\x20let\x20m:\x20f3'+'2\x20=\x202.0\x20*\x20'+'sqrt(dot(r'+'eflDirV.xy'+',\x20reflDirV'+'.xy)\x20+\x20(re'+'flDirV.z\x20+'+'\x201.0)\x20*\x20(r'+'eflDirV.z\x20'+'+\x201.0));\x0a\x20'+'\x20\x20\x20let\x20sph'+'ereMapUv:\x20'+'vec2f\x20=\x20re'+'flDirV.xy\x20'+'/\x20m\x20+\x200.5;'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20{reflec'+'tionDecode'+'}(textureS'+'ample(text'+'ure_sphere'+'Map,\x20textu'+'re_sphereM'+'apSampler,'+'\x20sphereMap'+'Uv));\x0a}\x0a\x0af'+'n\x20addRefle'+'ction(refl'+'Dir:\x20vec3f'+',\x20gloss:\x20f'+'32)\x20{\x0a\x20\x20\x20\x20'+'dReflectio'+'n\x20=\x20dRefle'+'ction\x20+\x20ve'+'c4f(calcRe'+'flection(r'+'eflDir,\x20gl'+'oss),\x20unif'+'orm.materi'+'al_reflect'+'ivity);\x0a}\x0a',cI='\x0a\x0afn\x20addRe'+'flectionSh'+'een(worldN'+'ormal:\x20vec'+'3f,\x20viewDi'+'r:\x20vec3f,\x20'+'gloss:\x20f32'+')\x20{\x0a\x20\x20\x20\x20le'+'t\x20NoV:\x20f32'+'\x20=\x20dot(wor'+'ldNormal,\x20'+'viewDir);\x0a'+'\x20\x20\x20\x20let\x20al'+'phaG:\x20f32\x20'+'=\x20gloss\x20*\x20'+'gloss;\x0a\x0a\x20\x20'+'\x20\x20//\x20Avoid'+'\x20using\x20a\x20L'+'UT\x20and\x20app'+'roximate\x20t'+'he\x20values\x20'+'analytical'+'ly\x0a\x20\x20\x20\x20let'+'\x20a:\x20f32\x20=\x20'+'select(\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20-8.4'+'8\x20*\x20alphaG'+'\x20+\x2014.3\x20*\x20'+'gloss\x20-\x209.'+'95,\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20-339.2\x20*'+'\x20alphaG\x20+\x20'+'161.4\x20*\x20gl'+'oss\x20-\x2025.9'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'gloss\x20<\x200.'+'25\x0a\x20\x20\x20\x20);\x0a'+'\x20\x20\x20\x20let\x20b:'+'\x20f32\x20=\x20sel'+'ect(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x201.97\x20*\x20'+'alphaG\x20-\x203'+'.27\x20*\x20glos'+'s\x20+\x200.72,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x2044'+'.0\x20*\x20alpha'+'G\x20-\x2023.7\x20*'+'\x20gloss\x20+\x203'+'.26,\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20gloss\x20<'+'\x200.25\x0a\x20\x20\x20\x20'+');\x0a\x20\x20\x20\x20let'+'\x20dg_add:\x20f'+'32\x20=\x20selec'+'t(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x200.1\x20*\x20(\x20g'+'loss\x20-\x200.2'+'5\x20),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x200.0,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20glos'+'s\x20<\x200.25\x0a\x20'+'\x20\x20\x20);\x0a\x20\x20\x20\x20'+'let\x20dg:\x20f3'+'2\x20=\x20exp(\x20a'+'\x20*\x20NoV\x20+\x20b'+'\x20)\x20+\x20dg_ad'+'d;\x0a\x20\x20\x20\x20sRe'+'flection\x20='+'\x20sReflecti'+'on\x20+\x20(calc'+'Reflection'+'(worldNorm'+'al,\x200.0)\x20*'+'\x20saturate('+'dg));\x0a}',hI='\x0afn\x20refrac'+'t2(viewVec'+':\x20vec3f,\x20n'+'ormal:\x20vec'+'3f,\x20IOR:\x20f'+'32)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20l'+'et\x20vn:\x20f32'+'\x20=\x20dot(vie'+'wVec,\x20norm'+'al);\x0a\x20\x20\x20\x20l'+'et\x20k:\x20f32\x20'+'=\x201.0\x20-\x20IO'+'R\x20*\x20IOR\x20*\x20'+'(1.0\x20-\x20vn\x20'+'*\x20vn);\x0a\x20\x20\x20'+'\x20let\x20refrV'+'ec:\x20vec3f\x20'+'=\x20IOR\x20*\x20vi'+'ewVec\x20-\x20(I'+'OR\x20*\x20vn\x20+\x20'+'sqrt(k))\x20*'+'\x20normal;\x0a\x20'+'\x20\x20\x20return\x20'+'refrVec;\x0a}'+'\x0a\x0afn\x20addRe'+'fraction(\x0a'+'\x20\x20\x20\x20worldN'+'ormal:\x20vec'+'3f,\x0a\x20\x20\x20\x20vi'+'ewDir:\x20vec'+'3f,\x0a\x20\x20\x20\x20th'+'ickness:\x20f'+'32,\x0a\x20\x20\x20\x20gl'+'oss:\x20f32,\x0a'+'\x20\x20\x20\x20specul'+'arity:\x20vec'+'3f,\x0a\x20\x20\x20\x20al'+'bedo:\x20vec3'+'f,\x0a\x20\x20\x20\x20tra'+'nsmission:'+'\x20f32,\x0a\x20\x20\x20\x20'+'refraction'+'Index:\x20f32'+',\x0a\x20\x20\x20\x20disp'+'ersion:\x20f3'+'2\x0a#if\x20defi'+'ned(LIT_IR'+'IDESCENCE)'+'\x0a\x20\x20\x20\x20,\x20iri'+'descenceFr'+'esnel:\x20vec'+'3f,\x0a\x20\x20\x20\x20ir'+'idescenceI'+'ntensity:\x20'+'f32\x0a#endif'+'\x0a)\x20{\x0a\x20\x20\x20\x20/'+'/\x20use\x20same'+'\x20reflectio'+'n\x20code\x20wit'+'h\x20refracti'+'on\x20vector\x0a'+'\x20\x20\x20\x20let\x20tm'+'pRefl:\x20vec'+'4f\x20=\x20dRefl'+'ection;\x0a\x20\x20'+'\x20\x20let\x20refl'+'ectionDir:'+'\x20vec3f\x20=\x20r'+'efract2(-v'+'iewDir,\x20wo'+'rldNormal,'+'\x20refractio'+'nIndex);\x0a\x20'+'\x20\x20\x20dReflec'+'tion\x20=\x20vec'+'4f(0.0);\x0a\x20'+'\x20\x20\x20addRefl'+'ection(ref'+'lectionDir'+',\x20gloss);\x0a'+'\x20\x20\x20\x20dDiffu'+'seLight\x20=\x20'+'mix(dDiffu'+'seLight,\x20d'+'Reflection'+'.rgb\x20*\x20alb'+'edo,\x20trans'+'mission);\x0a'+'\x20\x20\x20\x20dRefle'+'ction\x20=\x20tm'+'pRefl;\x0a}\x0a',dI='\x0auniform\x20m'+'aterial_in'+'vAttenuati'+'onDistance'+':\x20f32;\x0auni'+'form\x20mater'+'ial_attenu'+'ation:\x20vec'+'3f;\x0a\x0afn\x20ev'+'alRefracti'+'onColor(re'+'fractionVe'+'ctor:\x20vec3'+'f,\x20gloss:\x20'+'f32,\x20refra'+'ctionIndex'+':\x20f32)\x20->\x20'+'vec3f\x20{\x0a\x0a\x20'+'\x20\x20\x20//\x20The\x20'+'refraction'+'\x20point\x20is\x20'+'the\x20entry\x20'+'point\x20+\x20ve'+'ctor\x20to\x20ex'+'it\x20point\x0a\x20'+'\x20\x20\x20let\x20poi'+'ntOfRefrac'+'tion:\x20vec4'+'f\x20=\x20vec4f('+'vPositionW'+'\x20+\x20refract'+'ionVector,'+'\x201.0);\x0a\x0a\x20\x20'+'\x20\x20//\x20Proje'+'ct\x20to\x20text'+'ure\x20space\x20'+'so\x20we\x20can\x20'+'sample\x20it\x0a'+'\x20\x20\x20\x20let\x20pr'+'ojectionPo'+'int:\x20vec4f'+'\x20=\x20uniform'+'.matrix_vi'+'ewProjecti'+'on\x20*\x20point'+'OfRefracti'+'on;\x0a\x0a\x20\x20\x20\x20/'+'/\x20use\x20buil'+'t-in\x20getGr'+'abScreenPo'+'s\x20function'+'\x20to\x20conver'+'t\x20screen\x20p'+'osition\x20to'+'\x20grab\x20text'+'ure\x20uv\x20coo'+'rds\x0a\x20\x20\x20\x20le'+'t\x20uv:\x20vec2'+'f\x20=\x20getGra'+'bScreenPos'+'(projectio'+'nPoint);\x0a\x0a'+'\x20\x20\x20\x20//\x20Use'+'\x20IOR\x20and\x20r'+'oughness\x20t'+'o\x20select\x20m'+'ip\x0a\x20\x20\x20\x20let'+'\x20iorToRoug'+'hness:\x20f32'+'\x20=\x20(1.0\x20-\x20'+'gloss)\x20*\x20c'+'lamp((1.0\x20'+'/\x20refracti'+'onIndex)\x20*'+'\x202.0\x20-\x202.0'+',\x200.0,\x201.0'+');\x0a\x20\x20\x20\x20let'+'\x20refractio'+'nLod:\x20f32\x20'+'=\x20log2(uni'+'form.uScre'+'enSize.x)\x20'+'*\x20iorToRou'+'ghness;\x0a\x20\x20'+'\x20\x20let\x20refr'+'action:\x20ve'+'c3f\x20=\x20text'+'ureSampleL'+'evel(uScen'+'eColorMap,'+'\x20uSceneCol'+'orMapSampl'+'er,\x20uv,\x20re'+'fractionLo'+'d).rgb;\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'refraction'+';\x0a}\x0a\x0afn\x20ad'+'dRefractio'+'n(\x0a\x20\x20\x20\x20wor'+('ldNormal:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20viewDir:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20thickness'+':\x20f32,\x0a\x20\x20\x20'+'\x20gloss:\x20f3'+'2,\x0a\x20\x20\x20\x20spe'+'cularity:\x20'+'vec3f,\x0a\x20\x20\x20'+'\x20albedo:\x20v'+'ec3f,\x0a\x20\x20\x20\x20'+'transmissi'+'on:\x20f32,\x0a\x20'+'\x20\x20\x20refract'+'ionIndex:\x20'+'f32,\x0a\x20\x20\x20\x20d'+'ispersion:'+'\x20f32,\x0a#if\x20'+'defined(LI'+'T_IRIDESCE'+'NCE)\x0a\x20\x20\x20\x20i'+'ridescence'+'Fresnel:\x20v'+'ec3f,\x0a\x20\x20\x20\x20'+'iridescenc'+'eIntensity'+':\x20f32\x0a#end'+'if\x0a)\x20{\x0a\x0a\x20\x20'+'\x20\x20//\x20Extra'+'ct\x20scale\x20f'+'rom\x20the\x20mo'+'del\x20transf'+'orm\x0a\x20\x20\x20\x20va'+'r\x20modelSca'+'le:\x20vec3f;'+'\x0a\x20\x20\x20\x20model'+'Scale.x\x20=\x20'+'length(uni'+'form.matri'+'x_model[0]'+'.xyz);\x0a\x20\x20\x20'+'\x20modelScal'+'e.y\x20=\x20leng'+'th(uniform'+'.matrix_mo'+'del[1].xyz'+');\x0a\x20\x20\x20\x20mod'+'elScale.z\x20'+'=\x20length(u'+'niform.mat'+'rix_model['+'2].xyz);\x0a\x0a'+'\x20\x20\x20\x20//\x20Cal'+'culate\x20the'+'\x20refractio'+'n\x20vector,\x20'+'scaled\x20by\x20'+'the\x20thickn'+'ess\x20and\x20sc'+'ale\x20of\x20the'+'\x20object\x0a\x20\x20'+'\x20\x20let\x20scal'+'e:\x20vec3f\x20='+'\x20thickness'+'\x20*\x20modelSc'+'ale;\x0a\x20\x20\x20\x20v'+'ar\x20refract'+'ionVector\x20'+'=\x20normaliz'+'e(refract('+'-viewDir,\x20'+'worldNorma'+'l,\x20refract'+'ionIndex))'+'\x20*\x20scale;\x0a'+'\x20\x20\x20\x20var\x20re'+'fraction\x20='+'\x20evalRefra'+'ctionColor'+'(refractio'+'nVector,\x20g'+'loss,\x20refr'+'actionInde'+'x);\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'DISPERSION'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20based\x20on'+'\x20the\x20dispe'+'rsion\x20mate'+'rial\x20prope'+'rty,\x20calcu'+'late\x20modif'+'ied\x20refrac'+'tion\x20index'+'\x20values\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20f'+'or\x20R\x20and\x20B'+'\x20channels\x20')+('and\x20evalua'+'te\x20the\x20ref'+'raction\x20co'+'lor\x20for\x20th'+'em.\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20half'+'Spread:\x20f3'+'2\x20=\x20(1.0\x20/'+'\x20refractio'+'nIndex\x20-\x201'+'.0)\x20*\x200.02'+'5\x20*\x20disper'+'sion;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20r'+'efractionI'+'ndexR:\x20f32'+'\x20=\x20refract'+'ionIndex\x20-'+'\x20halfSprea'+'d;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20refractio'+'nVector\x20=\x20'+'normalize('+'refract(-v'+'iewDir,\x20wo'+'rldNormal,'+'\x20refractio'+'nIndexR))\x20'+'*\x20scale;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ref'+'raction.r\x20'+'=\x20evalRefr'+'actionColo'+'r(refracti'+'onVector,\x20'+'gloss,\x20ref'+'ractionInd'+'exR).r;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20refractio'+'nIndexB:\x20f'+'32\x20=\x20refra'+'ctionIndex'+'\x20+\x20halfSpr'+'ead;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20refract'+'ionVector\x20'+'=\x20normaliz'+'e(refract('+'-viewDir,\x20'+'worldNorma'+'l,\x20refract'+'ionIndexB)'+')\x20*\x20scale;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'efraction.'+'b\x20=\x20evalRe'+'fractionCo'+'lor(refrac'+'tionVector'+',\x20gloss,\x20r'+'efractionI'+'ndexB).b;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20//\x20T'+'ransmittan'+'ce\x20is\x20our\x20'+'final\x20refr'+'action\x20col'+'or\x0a\x20\x20\x20\x20var'+'\x20transmitt'+'ance:\x20vec3'+'f;\x0a\x20\x20\x20\x20if\x20'+'(uniform.m'+'aterial_in'+'vAttenuati'+'onDistance'+'\x20!=\x200.0)\x0a\x20'+'\x20\x20\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20att'+'enuation:\x20'+'vec3f\x20=\x20-l'+'og(uniform'+'.material_'+'attenuatio'+'n)\x20*\x20unifo'+'rm.materia'+'l_invAtten'+'uationDist'+'ance;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20transm'+'ittance\x20=\x20'+'exp(-atten'+'uation\x20*\x20l'+'ength(refr'+'actionVect'+'or));\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20else'+'\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20trans')+('mittance\x20='+'\x20refractio'+'n;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20App'+'ly\x20fresnel'+'\x20effect\x20on'+'\x20refractio'+'n\x0a\x20\x20\x20\x20let\x20'+'fresnel:\x20v'+'ec3f\x20=\x20vec'+'3f(1.0)\x20-\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ge'+'tFresnel(\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20dot(view'+'Dir,\x20world'+'Normal),\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20gloss,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'specularit'+'y\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20define'+'d(LIT_IRID'+'ESCENCE)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20,\x20iridesc'+'enceFresne'+'l,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20iride'+'scenceInte'+'nsity\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20)'+';\x0a\x20\x20\x20\x20dDif'+'fuseLight\x20'+'=\x20mix(dDif'+'fuseLight,'+'\x20refractio'+'n\x20*\x20transm'+'ittance\x20*\x20'+'fresnel,\x20t'+'ransmissio'+'n);\x0a}\x0a'),fI='\x0a\x0avarying\x20'+'vUv0:\x20vec2'+'f;\x0a\x0a#ifdef'+'\x20CUBEMAP_S'+'OURCE\x0a\x20\x20\x20\x20'+'var\x20source'+'Cube:\x20text'+'ure_cube<f'+'32>;\x0a\x20\x20\x20\x20v'+'ar\x20sourceC'+'ubeSampler'+'\x20:\x20sampler'+';\x0a#else\x0a\x20\x20'+'\x20\x20var\x20sour'+'ceTex:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20sourceTe'+'xSampler\x20:'+'\x20sampler;\x0a'+'#endif\x0a\x0a#i'+'fdef\x20USE_S'+'AMPLES_TEX'+'\x0a\x20\x20\x20\x20//\x20sa'+'mples\x0a\x20\x20\x20\x20'+'var\x20sample'+'sTex:\x20text'+'ure_2d<f32'+'>;\x0a\x20\x20\x20\x20var'+'\x20samplesTe'+'xSampler\x20:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20unifor'+'m\x20samplesT'+'exInverseS'+'ize:\x20vec2f'+';\x0a#endif\x0a\x0a'+'//\x20params:'+'\x0a//\x20x\x20-\x20ta'+'rget\x20cubem'+'ap\x20face\x200.'+'.6\x0a//\x20y\x20-\x20'+'target\x20ima'+'ge\x20total\x20p'+'ixels\x0a//\x20z'+'\x20-\x20source\x20'+'cubemap\x20si'+'ze\x0auniform'+'\x20params:\x20v'+'ec3f;\x0a\x0afn\x20'+'targetFace'+'()\x20->\x20f32\x20'+'{\x20return\x20u'+'niform.par'+'ams.x;\x20}\x0af'+'n\x20targetTo'+'talPixels('+')\x20->\x20f32\x20{'+'\x20return\x20un'+'iform.para'+'ms.y;\x20}\x0afn'+'\x20sourceTot'+'alPixels()'+'\x20->\x20f32\x20{\x20'+'return\x20uni'+'form.param'+'s.z;\x20}\x0a\x0aco'+'nst\x20PI:\x20f3'+'2\x20=\x203.1415'+'9265358979'+'3;\x0a\x0afn\x20sat'+'urate(x:\x20f'+'32)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20clamp('+'x,\x200.0,\x201.'+'0);\x0a}\x0a\x0a#in'+'clude\x20\x22dec'+'odePS\x22\x0a#in'+'clude\x20\x22enc'+'odePS\x22\x0a\x0a//'+'--\x20support'+'ed\x20project'+'ions\x0a\x0afn\x20m'+'odifySeams'+'(dir:\x20vec3'+'f,\x20scale:\x20'+'f32)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'let\x20adir\x20='+'\x20abs(dir);'+'\x0a\x20\x20\x20\x20let\x20M'+'\x20=\x20max(max'+'(adir.x,\x20a'+'dir.y),\x20ad'+'ir.z);\x0a\x20\x20\x20'+'\x20return\x20di'+'r\x20/\x20M\x20*\x20ve'+'c3f(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20select('+('scale,\x201.0'+',\x20adir.x\x20='+'=\x20M),\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20select'+'(scale,\x201.'+'0,\x20adir.y\x20'+'==\x20M),\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20selec'+'t(scale,\x201'+'.0,\x20adir.z'+'\x20==\x20M)\x0a\x20\x20\x20'+'\x20);\x0a}\x0a\x0afn\x20'+'toSpherica'+'l(dir:\x20vec'+'3f)\x20->\x20vec'+'2f\x20{\x0a\x20\x20\x20\x20l'+'et\x20nonZero'+'XZ\x20=\x20any(d'+'ir.xz\x20!=\x20v'+'ec2f(0.0,\x20'+'0.0));\x0a\x20\x20\x20'+'\x20return\x20ve'+'c2f(select'+'(0.0,\x20atan'+'2(dir.x,\x20d'+'ir.z),\x20non'+'ZeroXZ),\x20a'+'sin(dir.y)'+');\x0a}\x0a\x0afn\x20f'+'romSpheric'+'al(uv:\x20vec'+'2f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20vec3'+'f(cos(uv.y'+')\x20*\x20sin(uv'+'.x),\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20sin(uv.y)'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20co'+'s(uv.y)\x20*\x20'+'cos(uv.x))'+';\x0a}\x0a\x0afn\x20ge'+'tDirection'+'Equirect(u'+'v:\x20vec2f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20fromSphe'+'rical((vec'+'2f(uv.x,\x201'+'.0\x20-\x20uv.y)'+'\x20*\x202.0\x20-\x201'+'.0)\x20*\x20vec2'+'f(PI,\x20PI\x20*'+'\x200.5));\x0a}\x0a'+'\x0a//\x20octahe'+'dral\x20code,'+'\x20based\x20on\x20'+'https://jc'+'gt.org/pub'+'lished/000'+'3/02/01/\x0a/'+'/\x20\x22Survey\x20'+'of\x20Efficie'+'nt\x20Represe'+'ntations\x20f'+'or\x20Indepen'+'dent\x20Unit\x20'+'Vectors\x22\x20b'+'y\x20Cigolle,'+'\x20Donow,\x20Ev'+'angelakos,'+'\x20Mara,\x20McG'+'uire,\x20Meye'+'r\x0a\x0afn\x20sign'+'NotZero(k:'+'\x20f32)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20sele'+'ct(-1.0,\x201'+'.0,\x20k\x20>=\x200'+'.0);\x0a}\x0a\x0afn'+'\x20signNotZe'+'roVec2(v:\x20'+'vec2f)\x20->\x20'+'vec2f\x20{\x0a\x20\x20'+'\x20\x20return\x20v'+'ec2f(signN'+'otZero(v.x'+'),\x20signNot'+'Zero(v.y))'+';\x0a}\x0a\x0a//\x20Re'+'turns\x20a\x20un'+'it\x20vector.'+'\x20Argument\x20'+'o\x20is\x20an\x20oc'+'tahedral\x20v'+'ector\x20pack')+('ed\x20via\x20oct'+'Encode,\x20on'+'\x20the\x20[-1,\x20'+'+1]\x20square'+'\x0afn\x20octDec'+'ode(o:\x20vec'+'2f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20v'+'ar\x20v\x20=\x20vec'+'3f(o.x,\x201.'+'0\x20-\x20abs(o.'+'x)\x20-\x20abs(o'+'.y),\x20o.y);'+'\x0a\x20\x20\x20\x20if\x20(v'+'.y\x20<\x200.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20temp:\x20'+'vec2f\x20=\x20(1'+'.0\x20-\x20abs(v'+'.zx))\x20*\x20si'+'gnNotZeroV'+'ec2(v.xz);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'\x20=\x20vec3f(t'+'emp.x,\x20v.y'+',\x20temp.y);'+'\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20return\x20no'+'rmalize(v)'+';\x0a}\x0a\x0afn\x20ge'+'tDirection'+'Octahedral'+'(uv:\x20vec2f'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20octDec'+'ode(vec2f('+'uv.x,\x201.0\x20'+'-\x20uv.y)\x20*\x20'+'2.0\x20-\x201.0)'+';\x0a}\x0a\x0a//\x20As'+'sumes\x20that'+'\x20v\x20is\x20a\x20un'+'it\x20vector.'+'\x20The\x20resul'+'t\x20is\x20an\x20oc'+'tahedral\x20v'+'ector\x20on\x20t'+'he\x20[-1,\x20+1'+']\x20square\x0af'+'n\x20octEncod'+'e(v:\x20vec3f'+')\x20->\x20vec2f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20l1norm\x20=\x20'+'abs(v.x)\x20+'+'\x20abs(v.y)\x20'+'+\x20abs(v.z)'+';\x0a\x20\x20\x20\x20var\x20'+'result\x20=\x20v'+'.xz\x20*\x20(1.0'+'\x20/\x20l1norm)'+';\x0a\x20\x20\x20\x20if\x20('+'v.y\x20<\x200.0)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20result\x20=\x20'+'(1.0\x20-\x20abs'+'(result.yx'+'))\x20*\x20signN'+'otZeroVec2'+'(result.xy'+');\x0a\x20\x20\x20\x20}\x0a\x20'+'\x20\x20\x20return\x20'+'result;\x0a}\x0a'+'\x0a/////////'+'//////////'+'//////////'+'//////////'+'//////////'+'//////////'+'//////////'+'\x0a\x0a#ifdef\x20C'+'UBEMAP_SOU'+'RCE\x0a\x20\x20\x20\x20fn'+'\x20sampleCub'+'emapDir(di'+'r:\x20vec3f)\x20'+'->\x20vec4f\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20text'+'ureSample('+'sourceCube'+',\x20sourceCu'+'beSampler,'+'\x20modifySea'+'ms(dir,\x201.'+'0));\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20fn\x20s'+'ampleCubem'+'apSph(sph:')+('\x20vec2f)\x20->'+'\x20vec4f\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20sample'+'CubemapDir'+'(fromSpher'+'ical(sph))'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20fn\x20samp'+'leCubemapD'+'irLod(dir:'+'\x20vec3f,\x20mi'+'pLevel:\x20f3'+'2)\x20->\x20vec4'+'f\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20t'+'extureSamp'+'leLevel(so'+'urceCube,\x20'+'sourceCube'+'Sampler,\x20m'+'odifySeams'+'(dir,\x201.0)'+',\x20mipLevel'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20fn\x20sam'+'pleCubemap'+'SphLod(sph'+':\x20vec2f,\x20m'+'ipLevel:\x20f'+'32)\x20->\x20vec'+'4f\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'sampleCube'+'mapDirLod('+'fromSpheri'+'cal(sph),\x20'+'mipLevel);'+'\x0a\x20\x20\x20\x20}\x0a#el'+'se\x0a\x0a\x20\x20\x20\x20fn'+'\x20sampleEqu'+'irectSph(s'+'ph:\x20vec2f)'+'\x20->\x20vec4f\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20uv\x20=\x20s'+'ph\x20/\x20vec2f'+'(PI\x20*\x202.0,'+'\x20PI)\x20+\x200.5'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20tex'+'tureSample'+'(sourceTex'+',\x20sourceTe'+'xSampler,\x20'+'vec2f(uv.x'+',\x201.0\x20-\x20uv'+'.y));\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20fn\x20'+'sampleEqui'+'rectDir(di'+'r:\x20vec3f)\x20'+'->\x20vec4f\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20samp'+'leEquirect'+'Sph(toSphe'+'rical(dir)'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20fn\x20sam'+'pleEquirec'+'tSphLod(sp'+'h:\x20vec2f,\x20'+'mipLevel:\x20'+'f32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20uv'+'\x20=\x20sph\x20/\x20v'+'ec2f(PI\x20*\x20'+'2.0,\x20PI)\x20+'+'\x200.5;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20textureSa'+'mpleLevel('+'sourceTex,'+'\x20sourceTex'+'Sampler,\x20v'+'ec2f(uv.x,'+'\x201.0\x20-\x20uv.'+'y),\x20mipLev'+'el);\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20fn\x20s'+'ampleEquir'+'ectDirLod('+'dir:\x20vec3f'+',\x20mipLevel'+':\x20f32)\x20->\x20'+'vec4f\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20sampleE')+('quirectSph'+'Lod(toSphe'+'rical(dir)'+',\x20mipLevel'+');\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20fn\x20sam'+'pleOctahed'+'ralDir(dir'+':\x20vec3f)\x20-'+'>\x20vec4f\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20uv\x20=\x20oct'+'Encode(dir'+')\x20*\x200.5\x20+\x20'+'0.5;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'textureSam'+'ple(source'+'Tex,\x20sourc'+'eTexSample'+'r,\x20vec2f(u'+'v.x,\x201.0\x20-'+'\x20uv.y));\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'fn\x20sampleO'+'ctahedralS'+'ph(sph:\x20ve'+'c2f)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20sampleOct'+'ahedralDir'+'(fromSpher'+'ical(sph))'+';\x0a\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20fn\x20samp'+'leOctahedr'+'alDirLod(d'+'ir:\x20vec3f,'+'\x20mipLevel:'+'\x20f32)\x20->\x20v'+'ec4f\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20u'+'v\x20=\x20octEnc'+'ode(dir)\x20*'+'\x200.5\x20+\x200.5'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20tex'+'tureSample'+'Level(sour'+'ceTex,\x20sou'+'rceTexSamp'+'ler,\x20vec2f'+'(uv.x,\x201.0'+'\x20-\x20uv.y),\x20'+'mipLevel);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20fn\x20sampl'+'eOctahedra'+'lSphLod(sp'+'h:\x20vec2f,\x20'+'mipLevel:\x20'+'f32)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20sampleOct'+'ahedralDir'+'Lod(fromSp'+'herical(sp'+'h),\x20mipLev'+'el);\x0a\x20\x20\x20\x20}'+'\x0a\x0a#endif\x0a\x0a'+'fn\x20getDire'+'ctionCubem'+'ap(uv:\x20vec'+'2f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20l'+'et\x20st\x20=\x20uv'+'\x20*\x202.0\x20-\x201'+'.0;\x0a\x20\x20\x20\x20le'+'t\x20face\x20=\x20t'+'argetFace('+');\x0a\x0a\x20\x20\x20\x20va'+'r\x20vec:\x20vec'+'3f;\x0a\x20\x20\x20\x20if'+'\x20(face\x20==\x20'+'0.0)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec\x20='+'\x20vec3f(1,\x20'+'-st.y,\x20-st'+'.x);\x0a\x20\x20\x20\x20}'+'\x20else\x20if\x20('+'face\x20==\x201.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec\x20=\x20v'+'ec3f(-1,\x20-'+'st.y,\x20st.x'+');\x0a\x20\x20\x20\x20}\x20e'+'lse\x20if\x20(fa'+'ce\x20==\x202.0)')+('\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec\x20=\x20vec'+'3f(st.x,\x201'+',\x20st.y);\x0a\x20'+'\x20\x20\x20}\x20else\x20'+'if\x20(face\x20='+'=\x203.0)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'\x20=\x20vec3f(s'+'t.x,\x20-1,\x20-'+'st.y);\x0a\x20\x20\x20'+'\x20}\x20else\x20if'+'\x20(face\x20==\x20'+'4.0)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec\x20='+'\x20vec3f(st.'+'x,\x20-st.y,\x20'+'1);\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20vec\x20='+'\x20vec3f(-st'+'.x,\x20-st.y,'+'\x20-1);\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20normal'+'ize(modify'+'Seams(vec,'+'\x201.0));\x0a}\x0a'+'\x0afn\x20matrix'+'FromVector'+'(n:\x20vec3f)'+'\x20->\x20mat3x3'+'f\x20{\x0a\x20\x20\x20\x20le'+'t\x20a\x20=\x201.0\x20'+'/\x20(1.0\x20+\x20n'+'.z);\x0a\x20\x20\x20\x20l'+'et\x20b\x20=\x20-n.'+'x\x20*\x20n.y\x20*\x20'+'a;\x0a\x20\x20\x20\x20let'+'\x20b1\x20=\x20vec3'+'f(1.0\x20-\x20n.'+'x\x20*\x20n.x\x20*\x20'+'a,\x20b,\x20-n.x'+');\x0a\x20\x20\x20\x20let'+'\x20b2\x20=\x20vec3'+'f(b,\x201.0\x20-'+'\x20n.y\x20*\x20n.y'+'\x20*\x20a,\x20-n.y'+');\x0a\x20\x20\x20\x20ret'+'urn\x20mat3x3'+'f(b1,\x20b2,\x20'+'n);\x0a}\x0a\x0afn\x20'+'matrixFrom'+'VectorSlow'+'(n:\x20vec3f)'+'\x20->\x20mat3x3'+'f\x20{\x0a\x20\x20\x20\x20le'+'t\x20up\x20=\x20sel'+'ect(vec3f('+'0.0,\x200.0,\x20'+'select(-1.'+'0,\x201.0,\x20n.'+'y\x20>\x200.0)),'+'\x20vec3f(0.0'+',\x201.0,\x200.0'+'),\x20abs(n.y'+')\x20>\x200.0000'+'001);\x0a\x20\x20\x20\x20'+'let\x20x\x20=\x20no'+'rmalize(cr'+'oss(up,\x20n)'+');\x0a\x20\x20\x20\x20let'+'\x20y\x20=\x20cross'+'(n,\x20x);\x0a\x20\x20'+'\x20\x20return\x20m'+'at3x3f(x,\x20'+'y,\x20n);\x0a}\x0a\x0a'+'fn\x20reproje'+'ct(uv:\x20vec'+'2f)\x20->\x20vec'+'4f\x20{\x0a\x20\x20\x20\x20i'+'f\x20({NUM_SA'+'MPLES}\x20<=\x20'+'1)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20sing'+'le\x20sample\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20{ENCO'+'DE_FUNC}({'+'DECODE_FUN'+'C}({SOURCE'+'_FUNC}Dir('+'{TARGET_FU'+'NC}(uv))))'+';\x0a\x20\x20\x20\x20}\x20el'+'se\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20mult'+'i\x20sample\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20t\x20=\x20{TARG')+('ET_FUNC}(u'+'v);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20tu\x20='+'\x20dpdx(t);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20tv\x20=\x20dpd'+'y(t);\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20r'+'esult\x20=\x20ve'+'c3f(0.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20fo'+'r\x20(var\x20u\x20='+'\x200.0;\x20u\x20<\x20'+'{NUM_SAMPL'+'ES_SQRT};\x20'+'u\x20+=\x201.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20for\x20(v'+'ar\x20v\x20=\x200.0'+';\x20v\x20<\x20{NUM'+'_SAMPLES_S'+'QRT};\x20v\x20+='+'\x201.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20result'+'\x20+=\x20{DECOD'+'E_FUNC}({S'+'OURCE_FUNC'+'}Dir(norma'+'lize(t\x20+\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20t'+'u\x20*\x20(u\x20/\x20{'+'NUM_SAMPLE'+'S_SQRT}\x20-\x20'+'0.5)\x20+\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20tv\x20'+'*\x20(v\x20/\x20{NU'+'M_SAMPLES_'+'SQRT}\x20-\x200.'+'5))));\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20{ENC'+'ODE_FUNC}('+'result\x20/\x20('+'{NUM_SAMPL'+'ES_SQRT}\x20*'+'\x20{NUM_SAMP'+'LES_SQRT})'+');\x0a\x20\x20\x20\x20}\x0a}'+'\x0a\x0aconst\x20un'+'packFloat:'+'\x20vec4f\x20=\x20v'+'ec4f(1.0,\x20'+'1.0\x20/\x20255.'+'0,\x201.0\x20/\x206'+'5025.0,\x201.'+'0\x20/\x20165813'+'75.0);\x0a\x0a#i'+'fdef\x20USE_S'+'AMPLES_TEX'+'\x0a\x20\x20\x20\x20fn\x20un'+'packSample'+'(i:\x20i32,\x20L'+':\x20ptr<func'+'tion,\x20vec3'+'f>,\x20mipLev'+'el:\x20ptr<fu'+'nction,\x20f3'+'2>)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20u\x20'+'=\x20(f32(i\x20*'+'\x204)\x20+\x200.5)'+'\x20*\x20uniform'+'.samplesTe'+'xInverseSi'+'ze.x;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20v\x20'+'=\x20(floor(u'+')\x20+\x200.5)\x20*'+'\x20uniform.s'+'amplesTexI'+'nverseSize'+'.y;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20raw'+':\x20vec4f;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20raw'+'.x\x20=\x20dot(t'+'extureSamp')+('le(samples'+'Tex,\x20sampl'+'esTexSampl'+'er,\x20vec2f('+'u,\x20v)),\x20un'+'packFloat)'+';\x20u\x20+=\x20uni'+'form.sampl'+'esTexInver'+'seSize.x;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ra'+'w.y\x20=\x20dot('+'textureSam'+'ple(sample'+'sTex,\x20samp'+'lesTexSamp'+'ler,\x20vec2f'+'(u,\x20v)),\x20u'+'npackFloat'+');\x20u\x20+=\x20un'+'iform.samp'+'lesTexInve'+'rseSize.x;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'aw.z\x20=\x20dot'+'(textureSa'+'mple(sampl'+'esTex,\x20sam'+'plesTexSam'+'pler,\x20vec2'+'f(u,\x20v)),\x20'+'unpackFloa'+'t);\x20u\x20+=\x20u'+'niform.sam'+'plesTexInv'+'erseSize.x'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'raw.w\x20=\x20do'+'t(textureS'+'ample(samp'+'lesTex,\x20sa'+'mplesTexSa'+'mpler,\x20vec'+'2f(u,\x20v)),'+'\x20unpackFlo'+'at);\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20*L\x20=\x20r'+'aw.xyz\x20*\x202'+'.0\x20-\x201.0;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20*m'+'ipLevel\x20=\x20'+'raw.w\x20*\x208.'+'0;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20con'+'volve\x20an\x20e'+'nvironment'+'\x20given\x20pre'+'-generated'+'\x20samples\x0a\x20'+'\x20\x20\x20fn\x20pref'+'ilterSampl'+'es(uv:\x20vec'+'2f)\x20->\x20vec'+'4f\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20cons'+'truct\x20vect'+'or\x20space\x20g'+'iven\x20targe'+'t\x20directio'+'n\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20vecSpa'+'ce\x20=\x20matri'+'xFromVecto'+'rSlow({TAR'+'GET_FUNC}('+'uv));\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20L'+':\x20vec3f;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20mipLevel:'+'\x20f32;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20r'+'esult\x20=\x20ve'+'c3f(0.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20totalWei'+'ght\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'or\x20(var\x20i\x20'+'=\x200;\x20i\x20<\x20{'+'NUM_SAMPLE'+'S};\x20i\x20+=\x201'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unpa'+'ckSample(i'+',\x20&L,\x20&mip'+'Level);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'result\x20+=\x20'+'{DECODE_FU')+('NC}({SOURC'+'E_FUNC}Dir'+'Lod(vecSpa'+'ce\x20*\x20L,\x20mi'+'pLevel))\x20*'+'\x20L.z;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20to'+'talWeight\x20'+'+=\x20L.z;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20{ENCOD'+'E_FUNC}(re'+'sult\x20/\x20tot'+'alWeight);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20//\x20unwei'+'ghted\x20vers'+'ion\x20of\x20pre'+'filterSamp'+'les\x0a\x20\x20\x20\x20fn'+'\x20prefilter'+'SamplesUnw'+'eighted(uv'+':\x20vec2f)\x20-'+'>\x20vec4f\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20construct'+'\x20vector\x20sp'+'ace\x20given\x20'+'target\x20dir'+'ection\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20v'+'ecSpace\x20=\x20'+'matrixFrom'+'VectorSlow'+'({TARGET_F'+'UNC}(uv));'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20L:\x20vec'+'3f;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20mipL'+'evel:\x20f32;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20result'+'\x20=\x20vec3f(0'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20for\x20(va'+'r\x20i\x20=\x200;\x20i'+'\x20<\x20{NUM_SA'+'MPLES};\x20i\x20'+'+=\x201)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'unpackSamp'+'le(i,\x20&L,\x20'+'&mipLevel)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20result'+'\x20+=\x20{DECOD'+'E_FUNC}({S'+'OURCE_FUNC'+'}DirLod(ve'+'cSpace\x20*\x20L'+',\x20mipLevel'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'{ENCODE_FU'+'NC}(result'+'\x20/\x20f32({NU'+'M_SAMPLES}'+'));\x0a\x20\x20\x20\x20}\x0a'+'#endif\x0a\x0a@f'+'ragment\x0afn'+'\x20fragmentM'+'ain(input\x20'+':\x20Fragment'+'Input)\x20->\x20'+'FragmentOu'+'tput\x20{\x0a\x20\x20\x20'+'\x20var\x20outpu'+'t:\x20Fragmen'+'tOutput;\x0a\x20'+'\x20\x20\x20output.'+'color\x20=\x20{P'+'ROCESS_FUN'+'C}(input.v'+'Uv0);\x0a\x20\x20\x20\x20'+'return\x20out'+'put;\x0a}\x0a'),uI='\x0aattribute'+'\x20vertex_po'+'sition:\x20ve'+'c2f;\x0aunifo'+'rm\x20uvMod:\x20'+'vec4f;\x0avar'+'ying\x20vUv0:'+'\x20vec2f;\x0a\x0a@'+'vertex\x0afn\x20'+'vertexMain'+'(input:\x20Ve'+'rtexInput)'+'\x20->\x20Vertex'+'Output\x20{\x0a\x20'+'\x20var\x20outpu'+'t:\x20VertexO'+'utput;\x0a\x20\x20o'+'utput.posi'+'tion\x20=\x20vec'+'4f(input.v'+'ertex_posi'+'tion,\x200.5,'+'\x201.0);\x0a\x20\x20o'+'utput.vUv0'+'\x20=\x20getImag'+'eEffectUV('+'(input.ver'+'tex_positi'+'on\x20*\x200.5\x20+'+'\x20vec2f(0.5'+',\x200.5))\x20*\x20'+'uniform.uv'+'Mod.xy\x20+\x20u'+'niform.uvM'+'od.zw);\x0a\x20\x20'+'return\x20out'+'put;\x0a}\x0a',pI='\x0a\x0avar\x20uSce'+'neDepthMap'+':\x20texture_'+'2d<f32>;\x0av'+'ar\x20uSceneD'+'epthMapSam'+'pler:\x20samp'+'ler;\x0a\x0a#ifn'+'def\x20SCREEN'+'SIZE\x0a\x20\x20\x20\x20#'+'define\x20SCR'+'EENSIZE\x0a\x20\x20'+'\x20\x20uniform\x20'+'uScreenSiz'+'e:\x20vec4f;\x0a'+'#endif\x0a\x0a#i'+'fndef\x20VIEW'+'MATRIX\x0a\x20\x20\x20'+'\x20#define\x20V'+'IEWMATRIX\x0a'+'\x20\x20\x20\x20unifor'+'m\x20matrix_v'+'iew:\x20mat4x'+'4f;\x0a#endif'+'\x0a\x0a#ifndef\x20'+'LINEARIZE_'+'DEPTH\x0a\x20\x20\x20\x20'+'#define\x20LI'+'NEARIZE_DE'+'PTH\x0a\x0a\x20\x20\x20\x20#'+'ifndef\x20CAM'+'ERAPLANES\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#d'+'efine\x20CAME'+'RAPLANES\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20camer'+'a_params:\x20'+'vec4f;\x20//\x20'+'x:\x201\x20/\x20cam'+'era_far,\x20\x20'+'\x20\x20\x20\x20y:\x20cam'+'era_far,\x20\x20'+'\x20\x20\x20z:\x20came'+'ra_near,\x20\x20'+'\x20\x20\x20\x20\x20\x20w:\x20i'+'s_ortho\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20fn\x20lin'+'earizeDept'+'h(z:\x20f32)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(uniform.c'+'amera_para'+'ms.w\x20==\x200.'+'0)\x20{\x20//\x20Pe'+'rspective\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20('+'uniform.ca'+'mera_param'+'s.z\x20*\x20unif'+'orm.camera'+'_params.y)'+'\x20/\x20(unifor'+'m.camera_p'+'arams.y\x20+\x20'+'z\x20*\x20(unifo'+'rm.camera_'+'params.z\x20-'+'\x20uniform.c'+'amera_para'+'ms.y));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x20el'+'se\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20unifor'+'m.camera_p'+'arams.z\x20+\x20'+'z\x20*\x20(unifo'+'rm.camera_'+'params.y\x20-'+'\x20uniform.c'+'amera_para'+'ms.z);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20}\x0a#endif\x0a'+'\x0afn\x20deline'+'arizeDepth'+'(linearDep'+'th:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20if\x20(unif'+'orm.camera'+'_params.w\x20'+'==\x200.0)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20(unif'+'orm.camera'+('_params.y\x20'+'*\x20(uniform'+'.camera_pa'+'rams.z\x20-\x20l'+'inearDepth'+'))\x20/\x20(line'+'arDepth\x20*\x20'+'(uniform.c'+'amera_para'+'ms.z\x20-\x20uni'+'form.camer'+'a_params.y'+'));\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20(linearD'+'epth\x20-\x20uni'+'form.camer'+'a_params.z'+')\x20/\x20(unifo'+'rm.camera_'+'params.y\x20-'+'\x20uniform.c'+'amera_para'+'ms.z);\x0a\x20\x20\x20'+'\x20}\x0a}\x0a\x0a//\x20R'+'etrieves\x20r'+'endered\x20li'+'near\x20camer'+'a\x20depth\x20by'+'\x20UV\x0afn\x20get'+'LinearScre'+'enDepth(uv'+':\x20vec2f)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'CENE_DEPTH'+'MAP_LINEAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20SCEN'+'E_DEPTHMAP'+'_FLOAT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20text'+'ureSample('+'uSceneDept'+'hMap,\x20uSce'+'neDepthMap'+'Sampler,\x20u'+'v).r;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20tex'+'tureSize\x20='+'\x20textureDi'+'mensions(u'+'SceneDepth'+'Map,\x200);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20texel'+':\x20vec2i\x20=\x20'+'vec2i(uv\x20*'+'\x20vec2f(tex'+'tureSize))'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20da'+'ta:\x20vec4f\x20'+'=\x20textureL'+'oad(uScene'+'DepthMap,\x20'+'texel,\x200);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20da'+'ta_u32:\x20ve'+'c4u\x20=\x20vec4'+'u(data\x20*\x202'+'55.0);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20intBits'+':\x20u32\x20=\x20(d'+'ata_u32.r\x20'+'<<\x2024u)\x20|\x20'+'(data_u32.'+'g\x20<<\x2016u)\x20'+'|\x20(data_u3'+'2.b\x20<<\x208u)'+'\x20|\x20data_u3'+'2.a;\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20bitca'+'st<f32>(in'+'tBits);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20l'+'inearizeDe'+'pth(textur'+'eSample(uS'+'ceneDepthM')+('ap,\x20uScene'+'DepthMapSa'+'mpler,\x20uv)'+'.r);\x0a\x20\x20\x20\x20#'+'endif\x0a}\x0a\x0a#'+'ifndef\x20VER'+'TEXSHADER\x0a'+'\x20\x20\x20\x20//\x20Ret'+'rieves\x20ren'+'dered\x20line'+'ar\x20camera\x20'+'depth\x20unde'+'r\x20the\x20curr'+'ent\x20pixel\x0a'+'\x20\x20\x20\x20fn\x20get'+'LinearScre'+'enDepthFra'+'g()\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20uv:\x20v'+'ec2f\x20=\x20pcP'+'osition.xy'+'\x20*\x20uniform'+'.uScreenSi'+'ze.zw;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getLinea'+'rScreenDep'+'th(uv);\x0a\x20\x20'+'\x20\x20}\x0a#endif'+'\x0a\x0a//\x20Gener'+'ates\x20linea'+'r\x20camera\x20d'+'epth\x20for\x20t'+'he\x20given\x20w'+'orld\x20posit'+'ion\x0afn\x20get'+'LinearDept'+'h(pos:\x20vec'+'3f)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20-(unif'+'orm.matrix'+'_view\x20*\x20ve'+'c4f(pos,\x201'+'.0)).z;\x0a}\x0a'),mI='\x0a\x0a//\x20funct'+'ion\x20which\x20'+'selects\x20a\x20'+'shadow\x20pro'+'jection\x20ma'+'trix\x20index'+'\x20based\x20on\x20'+'cascade\x20di'+'stances\x0afn'+'\x20getShadow'+'CascadeInd'+'ex(shadowC'+'ascadeDist'+'ances:\x20vec'+'4f,\x20shadow'+'CascadeCou'+'nt:\x20i32)\x20-'+'>\x20i32\x20{\x0a\x0a\x20'+'\x20\x20\x20//\x20dept'+'h\x20in\x200\x20..\x20'+'far\x20plane\x20'+'range\x0a\x20\x20\x20\x20'+'let\x20depth:'+'\x20f32\x20=\x201.0'+'\x20/\x20pcPosit'+'ion.w;\x0a\x0a\x20\x20'+'\x20\x20//\x201.0\x20i'+'f\x20depth\x20>='+'\x20distance,'+'\x200.0\x20other'+'wise\x0a\x20\x20\x20\x20l'+'et\x20compari'+'sons:\x20vec4'+'f\x20=\x20step(s'+'hadowCasca'+'deDistance'+'s,\x20vec4f(d'+'epth));\x0a\x0a\x20'+'\x20\x20\x20//\x20sum\x20'+'is\x20the\x20ind'+'ex\x0a\x20\x20\x20\x20let'+'\x20cascadeIn'+'dex:\x20i32\x20='+'\x20i32(dot(c'+'omparisons'+',\x20vec4f(1.'+'0)));\x0a\x0a\x20\x20\x20'+'\x20//\x20limit\x20'+'to\x20actual\x20'+'number\x20of\x20'+'used\x20casca'+'des\x0a\x20\x20\x20\x20re'+'turn\x20min(c'+'ascadeInde'+'x,\x20shadowC'+'ascadeCoun'+'t\x20-\x201);\x0a}\x0a'+'\x0a//\x20functi'+'on\x20which\x20m'+'odifies\x20ca'+'scade\x20inde'+'x\x20to\x20dithe'+'r\x20between\x20'+'cascades\x0af'+'n\x20ditherSh'+'adowCascad'+'eIndex(cas'+'cadeIndex_'+'in:\x20i32,\x20s'+'hadowCasca'+'deDistance'+'s:\x20vec4f,\x20'+'shadowCasc'+'adeCount:\x20'+'i32,\x20blend'+'Factor:\x20f3'+'2)\x20->\x20i32\x20'+'{\x0a\x0a\x20\x20\x20\x20//\x20'+'Use\x20var\x20as'+'\x20cascadeIn'+'dex\x20might\x20'+'be\x20modifie'+'d\x0a\x20\x20\x20\x20var\x20'+'cascadeInd'+'ex:\x20i32\x20=\x20'+'cascadeInd'+'ex_in;\x0a\x20\x20\x20'+'\x20if\x20(casca'+'deIndex\x20<\x20'+'shadowCasc'+'adeCount\x20-'+'\x201)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20cu'+'rrentRange'+'End:\x20f32\x20='+'\x20shadowCas'+'cadeDistan'+'ces[cascad'+'eIndex];\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+('\x20transitio'+'nStart:\x20f3'+'2\x20=\x20blendF'+'actor\x20*\x20cu'+'rrentRange'+'End;\x20//\x20St'+'art\x20overla'+'p\x20factor\x20a'+'way\x20from\x20t'+'he\x20end\x20dis'+'tance\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20de'+'pth:\x20f32\x20='+'\x201.0\x20/\x20pcP'+'osition.w;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(depth\x20'+'>\x20transiti'+'onStart)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20Calc'+'ulate\x20a\x20tr'+'ansition\x20f'+'actor\x20(0.0'+'\x20to\x201.0)\x20w'+'ithin\x20the\x20'+'overlap\x20ra'+'nge\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'transition'+'Factor:\x20f3'+'2\x20=\x20smooth'+'step(trans'+'itionStart'+',\x20currentR'+'angeEnd,\x20d'+'epth);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20Add\x20pse'+'udo-random'+'\x20dithering'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20TODO'+':\x20replace\x20'+'by\x20user\x20se'+'lectable\x20d'+'ithering\x20m'+'ethod\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20dither:\x20'+'f32\x20=\x20frac'+'t(sin(dot('+'pcPosition'+'.xy,\x20vec2f'+'(12.9898,\x20'+'78.233)))\x20'+'*\x2043758.54'+'53);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(dither\x20<\x20'+'transition'+'Factor)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20casc'+'adeIndex\x20='+'\x20cascadeIn'+'dex\x20+\x201;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20cascadeIn'+'dex;\x0a}\x0a\x0afn'+'\x20fadeShado'+'w(shadowCo'+'ord_in:\x20ve'+'c3f,\x20shado'+'wCascadeDi'+'stances:\x20v'+'ec4f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20//\x20if\x20the'+'\x20pixel\x20is\x20'+'past\x20the\x20s'+'hadow\x20dist'+'ance,\x20remo'+'ve\x20shadow\x0a'+'\x20\x20\x20\x20//\x20thi'+'s\x20enforces'+'\x20straight\x20'+'line\x20inste'+'ad\x20of\x20corn'+'er\x20of\x20shad'+'ow\x20which\x20m'+'oves\x20when\x20'+'camera\x20rot'+'ates\x0a\x20\x20\x20\x20v'+'ar\x20shadowC'+'oord:\x20vec3'+'f\x20=\x20shadow')+('Coord_in;\x0a'+'\x20\x20\x20\x20let\x20de'+'pth:\x20f32\x20='+'\x201.0\x20/\x20pcP'+'osition.w;'+'\x0a\x20\x20\x20\x20if\x20(d'+'epth\x20>\x20sha'+'dowCascade'+'Distances.'+'w)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20shadowC'+'oord.z\x20=\x20-'+'9999999.0;'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20return\x20s'+'hadowCoord'+';\x0a}\x0a'),_I='\x0a\x0a//\x20-----'+'-\x20VSM\x20Shar'+'ed\x20------\x0a'+'\x0afn\x20linste'+'p(a:\x20f32,\x20'+'b:\x20f32,\x20v:'+'\x20f32)\x20->\x20f'+'32\x20{\x0a\x20\x20\x20\x20/'+'/\x20WGSL\x20sat'+'urate\x20->\x20c'+'lamp\x0a\x20\x20\x20\x20r'+'eturn\x20clam'+'p((v\x20-\x20a)\x20'+'/\x20(b\x20-\x20a),'+'\x200.0,\x201.0)'+';\x0a}\x0a\x0afn\x20re'+'duceLightB'+'leeding(pM'+'ax:\x20f32,\x20a'+'mount:\x20f32'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20//\x20Rem'+'ove\x20the\x20[0'+',\x20amount]\x20'+'tail\x20and\x20l'+'inearly\x20re'+'scale\x20(amo'+'unt,\x201].\x0a\x20'+'\x20\x20return\x20l'+'instep(amo'+'unt,\x201.0,\x20'+'pMax);\x0a}\x0a\x0a'+'fn\x20chebysh'+'evUpperBou'+'nd(moments'+':\x20vec2f,\x20m'+'ean:\x20f32,\x20'+'minVarianc'+'e:\x20f32,\x20li'+'ghtBleedin'+'gReduction'+':\x20f32)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'//\x20Compute'+'\x20variance\x0a'+'\x20\x20\x20\x20var\x20va'+'riance:\x20f3'+'2\x20=\x20moment'+'s.y\x20-\x20(mom'+'ents.x\x20*\x20m'+'oments.x);'+'\x0a\x20\x20\x20\x20varia'+'nce\x20=\x20max('+'variance,\x20'+'minVarianc'+'e);\x0a\x0a\x20\x20\x20\x20/'+'/\x20Compute\x20'+'probabilis'+'tic\x20upper\x20'+'bound\x0a\x20\x20\x20\x20'+'let\x20d:\x20f32'+'\x20=\x20mean\x20-\x20'+'moments.x;'+'\x0a\x20\x20\x20\x20var\x20p'+'Max:\x20f32\x20='+'\x20variance\x20'+'/\x20(varianc'+'e\x20+\x20(d\x20*\x20d'+'));\x0a\x0a\x20\x20\x20\x20p'+'Max\x20=\x20redu'+'ceLightBle'+'eding(pMax'+',\x20lightBle'+'edingReduc'+'tion);\x0a\x0a\x20\x20'+'\x20\x20//\x20One-t'+'ailed\x20Cheb'+'yshev\x0a\x20\x20\x20\x20'+'return\x20sel'+'ect(pMax,\x20'+'1.0,\x20mean\x20'+'<=\x20moments'+'.x);\x0a}\x0a\x0afn'+'\x20calculate'+'EVSM(momen'+'ts_in:\x20vec'+'3f,\x20Z_in:\x20'+'f32,\x20vsmBi'+'as:\x20f32,\x20e'+'xponent:\x20f'+'32)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20Z:\x20f32\x20=\x20'+'2.0\x20*\x20Z_in'+'\x20-\x201.0;\x0a\x20\x20'+'\x20\x20let\x20warp'+'edDepth:\x20f'+'32\x20=\x20exp(e'+'xponent\x20*\x20'+'Z);\x0a\x0a\x20\x20\x20\x20l'+('et\x20moments'+':\x20vec2f\x20=\x20'+'moments_in'+'.xy\x20+\x20vec2'+'f(warpedDe'+'pth,\x20warpe'+'dDepth*war'+'pedDepth)\x20'+'*\x20(1.0\x20-\x20m'+'oments_in.'+'z);\x0a\x0a\x20\x20\x20\x20l'+'et\x20VSMBias'+':\x20f32\x20=\x20vs'+'mBias;//0.'+'01\x20*\x200.25;'+'\x0a\x20\x20\x20\x20let\x20d'+'epthScale:'+'\x20f32\x20=\x20VSM'+'Bias\x20*\x20exp'+'onent\x20*\x20wa'+'rpedDepth;'+'\x0a\x20\x20\x20\x20let\x20m'+'inVariance'+'1:\x20f32\x20=\x20d'+'epthScale\x20'+'*\x20depthSca'+'le;\x0a\x20\x20\x20\x20re'+'turn\x20cheby'+'shevUpperB'+'ound(momen'+'ts,\x20warped'+'Depth,\x20min'+'Variance1,'+'\x200.1);\x0a}\x0a/'+'/\x20------\x20V'+'SM\x2016\x20----'+'--\x0a\x0afn\x20VSM'+'16(tex:\x20te'+'xture_2d<f'+'32>,\x20texSa'+'mpler:\x20sam'+'pler,\x20texC'+'oords:\x20vec'+'2f,\x20resolu'+'tion:\x20f32,'+'\x20Z:\x20f32,\x20v'+'smBias:\x20f3'+'2,\x20exponen'+'t:\x20f32)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20let\x20momen'+'ts:\x20vec3f\x20'+'=\x20textureS'+'ampleLevel'+'(tex,\x20texS'+'ampler,\x20te'+'xCoords,\x200'+'.0).xyz;\x0a\x20'+'\x20\x20\x20return\x20'+'calculateE'+'VSM(moment'+'s,\x20Z,\x20vsmB'+'ias,\x20expon'+'ent);\x0a}\x0a\x0af'+'n\x20getShado'+'wVSM16(sha'+'dowMap:\x20te'+'xture_2d<f'+'32>,\x20shado'+'wMapSample'+'r:\x20sampler'+',\x20shadowCo'+'ord:\x20vec3f'+',\x20shadowPa'+'rams:\x20vec4'+'f,\x20exponen'+'t:\x20f32)\x20->'+'\x20f32\x20{\x0a\x20\x20\x20'+'\x20return\x20VS'+'M16(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20shadowC'+'oord.xy,\x20s'+'hadowParam'+'s.x,\x20shado'+'wCoord.z,\x20'+'shadowPara'+'ms.y,\x20expo'+'nent);\x0a}\x0a\x0a'+'fn\x20getShad'+'owSpotVSM1'+'6(shadowMa'+'p:\x20texture'+'_2d<f32>,\x20'+'shadowMapS'+'ampler:\x20sa'+'mpler,\x20sha'+'dowCoord:\x20'+'vec3f,\x20sha')+('dowParams:'+'\x20vec4f,\x20ex'+'ponent:\x20f3'+'2,\x20lightDi'+'r:\x20vec3f)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20let\x20Z:\x20'+'f32\x20=\x20leng'+'th(lightDi'+'r)\x20*\x20shado'+'wParams.w\x20'+'+\x20shadowPa'+'rams.z;\x0a\x20\x20'+'\x20\x20return\x20V'+'SM16(shado'+'wMap,\x20shad'+'owMapSampl'+'er,\x20shadow'+'Coord.xy,\x20'+'shadowPara'+'ms.x,\x20Z,\x20s'+'hadowParam'+'s.y,\x20expon'+'ent);\x0a}\x0a\x0a/'+'/\x20------\x20V'+'SM\x2032\x20----'+'--\x0a\x0afn\x20VSM'+'32(tex:\x20te'+'xture_2d<f'+'32>,\x20texSa'+'mpler:\x20sam'+'pler,\x20texC'+'oords_in:\x20'+'vec2f,\x20res'+'olution:\x20f'+'32,\x20Z:\x20f32'+',\x20vsmBias:'+'\x20f32,\x20expo'+'nent:\x20f32)'+'\x20->\x20f32\x20{\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20CAPS_TEX'+'TURE_FLOAT'+'_FILTERABL'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20moment'+'s:\x20vec3f\x20='+'\x20textureSa'+'mpleLevel('+'tex,\x20texSa'+'mpler,\x20tex'+'Coords_in,'+'\x200.0).xyz;'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20manual\x20b'+'ilinear\x20fi'+'ltering\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'pixelSize\x20'+':\x20f32\x20=\x201.'+'0\x20/\x20resolu'+'tion;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20te'+'xCoords:\x20v'+'ec2f\x20=\x20tex'+'Coords_in\x20'+'-\x20vec2f(pi'+'xelSize);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20s00:\x20vec'+'3f\x20=\x20textu'+'reSampleLe'+'vel(tex,\x20t'+'exSampler,'+'\x20texCoords'+',\x200.0).xyz'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20s10:\x20v'+'ec3f\x20=\x20tex'+'tureSample'+'Level(tex,'+'\x20texSample'+'r,\x20texCoor'+'ds\x20+\x20vec2f'+'(pixelSize'+',\x200.0),\x200.'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'s01:\x20vec3f'+'\x20=\x20texture'+'SampleLeve'+'l(tex,\x20tex'+'Sampler,\x20t'+'exCoords\x20+'+'\x20vec2f(0.0'+',\x20pixelSiz'+'e),\x200.0).x'+'yz;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20s11:')+('\x20vec3f\x20=\x20t'+'extureSamp'+'leLevel(te'+'x,\x20texSamp'+'ler,\x20texCo'+'ords\x20+\x20vec'+'2f(pixelSi'+'ze),\x200.0).'+'xyz;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20fr:'+'\x20vec2f\x20=\x20f'+'ract(texCo'+'ords\x20*\x20res'+'olution);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20h0:\x20vec3'+'f\x20=\x20mix(s0'+'0,\x20s10,\x20fr'+'.x);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20h1:'+'\x20vec3f\x20=\x20m'+'ix(s01,\x20s1'+'1,\x20fr.x);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20moments:'+'\x20vec3f\x20=\x20m'+'ix(h0,\x20h1,'+'\x20fr.y);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20calculate'+'EVSM(momen'+'ts,\x20Z,\x20vsm'+'Bias,\x20expo'+'nent);\x0a}\x0a\x0a'+'fn\x20getShad'+'owVSM32(sh'+'adowMap:\x20t'+'exture_2d<'+'f32>,\x20shad'+'owMapSampl'+'er:\x20sample'+'r,\x20shadowC'+'oord:\x20vec3'+'f,\x20shadowP'+'arams:\x20vec'+'4f,\x20expone'+'nt:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20return\x20V'+'SM32(shado'+'wMap,\x20shad'+'owMapSampl'+'er,\x20shadow'+'Coord.xy,\x20'+'shadowPara'+'ms.x,\x20shad'+'owCoord.z,'+'\x20shadowPar'+'ams.y,\x20exp'+'onent);\x0a}\x0a'+'\x0afn\x20getSha'+'dowSpotVSM'+'32(shadowM'+'ap:\x20textur'+'e_2d<f32>,'+'\x20shadowMap'+'Sampler:\x20s'+'ampler,\x20sh'+'adowCoord:'+'\x20vec3f,\x20sh'+'adowParams'+':\x20vec4f,\x20e'+'xponent:\x20f'+'32,\x20lightD'+'ir:\x20vec3f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20let\x20Z:'+'\x20f32\x20=\x20len'+'gth(lightD'+'ir)\x20*\x20shad'+'owParams.w'+'\x20+\x20shadowP'+'arams.z;\x0a\x20'+'\x20\x20\x20return\x20'+'VSM32(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20shado'+'wCoord.xy,'+'\x20shadowPar'+'ams.x,\x20Z,\x20'+'shadowPara'+'ms.y,\x20expo'+'nent);\x0a}\x0a'),gI='\x0a//\x20-----\x20'+'Directiona'+'l/Spot\x20Sam'+'pling\x20----'+'-\x0a\x0afn\x20getS'+'hadowPCF1x'+'1(shadowMa'+'p:\x20texture'+'_depth_2d,'+'\x20shadowMap'+'Sampler:\x20s'+'ampler_com'+'parison,\x20s'+'hadowCoord'+':\x20vec3f,\x20s'+'hadowParam'+'s:\x20vec4f)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'textureSam'+'pleCompare'+'Level(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20shado'+'wCoord.xy,'+'\x20shadowCoo'+'rd.z);\x0a}\x0a\x0a'+'fn\x20getShad'+'owSpotPCF1'+'x1(shadowM'+'ap:\x20textur'+'e_depth_2d'+',\x20shadowMa'+'pSampler:\x20'+'sampler_co'+'mparison,\x20'+'shadowCoor'+'d:\x20vec3f,\x20'+'shadowPara'+'ms:\x20vec4f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20textureSa'+'mpleCompar'+'eLevel(sha'+'dowMap,\x20sh'+'adowMapSam'+'pler,\x20shad'+'owCoord.xy'+',\x20shadowCo'+'ord.z);\x0a}\x0a'+'\x0a//\x20-----\x20'+'Omni\x20Sampl'+'ing\x20-----\x0a'+'\x0a//\x20Not\x20su'+'pported\x20on'+'\x20WebGPU\x20de'+'vice\x0a//\x20fn'+'\x20getShadow'+'OmniPCF1x1'+'(shadowMap'+':\x20texture_'+'depth_cube'+',\x20shadowMa'+'pSampler:\x20'+'sampler_co'+'mparison,\x20'+'shadowCoor'+'d:\x20vec3f,\x20'+'shadowPara'+'ms:\x20vec4f,'+'\x20lightDir:'+'\x20vec3f)\x20->'+'\x20f32\x20{\x0a//\x20'+'\x20\x20\x20\x20let\x20sh'+'adowZ:\x20f32'+'\x20=\x20length('+'lightDir)\x20'+'*\x20shadowPa'+'rams.w\x20+\x20s'+'hadowParam'+'s.z;\x0a//\x20\x20\x20'+'\x20\x20return\x20t'+'extureSamp'+'leCompareL'+'evel(shado'+'wMap,\x20shad'+'owMapSampl'+'er,\x20lightD'+'ir,\x20shadow'+'Z);\x0a//\x20}\x0a',SI='\x0a//\x20-----\x20'+'Directiona'+'l/Spot\x20Sam'+'pling\x20----'+'-\x0afn\x20_getS'+'hadowPCF3x'+'3(shadowMa'+'p:\x20texture'+'_depth_2d,'+'\x20shadowMap'+'Sampler:\x20s'+'ampler_com'+'parison,\x20s'+'hadowCoord'+':\x20vec3f,\x20s'+'hadowParam'+'s:\x20vec3f)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20let\x20z:\x20'+'f32\x20=\x20shad'+'owCoord.z;'+'\x0a\x20\x20\x20\x20let\x20u'+'v:\x20vec2f\x20='+'\x20shadowCoo'+'rd.xy\x20*\x20sh'+'adowParams'+'.x;\x20//\x201\x20u'+'nit\x20-\x201\x20te'+'xel\x0a\x20\x20\x20\x20le'+'t\x20shadowMa'+'pSizeInv:\x20'+'f32\x20=\x201.0\x20'+'/\x20shadowPa'+'rams.x;\x0a\x20\x20'+'\x20\x20let\x20base'+'_uv_temp:\x20'+'vec2f\x20=\x20fl'+'oor(uv\x20+\x200'+'.5);\x0a\x20\x20\x20\x20l'+'et\x20s:\x20f32\x20'+'=\x20(uv.x\x20+\x20'+'0.5\x20-\x20base'+'_uv_temp.x'+');\x0a\x20\x20\x20\x20let'+'\x20t:\x20f32\x20=\x20'+'(uv.y\x20+\x200.'+'5\x20-\x20base_u'+'v_temp.y);'+'\x0a\x20\x20\x20\x20let\x20b'+'ase_uv:\x20ve'+'c2f\x20=\x20(bas'+'e_uv_temp\x20'+'-\x20vec2f(0.'+'5))\x20*\x20shad'+'owMapSizeI'+'nv;\x0a\x0a\x20\x20\x20\x20v'+'ar\x20sum:\x20f3'+'2\x20=\x200.0;\x0a\x0a'+'\x20\x20\x20\x20let\x20uw'+'0:\x20f32\x20=\x20('+'3.0\x20-\x202.0\x20'+'*\x20s);\x0a\x20\x20\x20\x20'+'let\x20uw1:\x20f'+'32\x20=\x20(1.0\x20'+'+\x202.0\x20*\x20s)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20u0_offset'+':\x20f32\x20=\x20(2'+'.0\x20-\x20s)\x20/\x20'+'uw0\x20-\x201.0;'+'\x0a\x20\x20\x20\x20let\x20u'+'1_offset:\x20'+'f32\x20=\x20s\x20/\x20'+'uw1\x20+\x201.0;'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'vw0:\x20f32\x20='+'\x20(3.0\x20-\x202.'+'0\x20*\x20t);\x0a\x20\x20'+'\x20\x20let\x20vw1:'+'\x20f32\x20=\x20(1.'+'0\x20+\x202.0\x20*\x20'+'t);\x0a\x0a\x20\x20\x20\x20l'+'et\x20v0_offs'+'et:\x20f32\x20=\x20'+'(2.0\x20-\x20t)\x20'+'/\x20vw0\x20-\x201.'+'0;\x0a\x20\x20\x20\x20let'+'\x20v1_offset'+':\x20f32\x20=\x20t\x20'+'/\x20vw1\x20+\x201.'+'0;\x0a\x0a\x20\x20\x20\x20le'+'t\x20u0:\x20f32\x20'+'=\x20u0_offse'+'t\x20*\x20shadow'+'MapSizeInv'+'\x20+\x20base_uv'+'.x;\x0a\x20\x20\x20\x20le'+'t\x20v0:\x20f32\x20'+'=\x20v0_offse'+'t\x20*\x20shadow'+('MapSizeInv'+'\x20+\x20base_uv'+'.y;\x0a\x0a\x20\x20\x20\x20l'+'et\x20u1:\x20f32'+'\x20=\x20u1_offs'+'et\x20*\x20shado'+'wMapSizeIn'+'v\x20+\x20base_u'+'v.x;\x0a\x20\x20\x20\x20l'+'et\x20v1:\x20f32'+'\x20=\x20v1_offs'+'et\x20*\x20shado'+'wMapSizeIn'+'v\x20+\x20base_u'+'v.y;\x0a\x0a\x20\x20\x20\x20'+'sum\x20=\x20sum\x20'+'+\x20uw0\x20*\x20vw'+'0\x20*\x20textur'+'eSampleCom'+'pareLevel('+'shadowMap,'+'\x20shadowMap'+'Sampler,\x20v'+'ec2f(u0,\x20v'+'0),\x20z);\x0a\x20\x20'+'\x20\x20sum\x20=\x20su'+'m\x20+\x20uw1\x20*\x20'+'vw0\x20*\x20text'+'ureSampleC'+'ompareLeve'+'l(shadowMa'+'p,\x20shadowM'+'apSampler,'+'\x20vec2f(u1,'+'\x20v0),\x20z);\x0a'+'\x20\x20\x20\x20sum\x20=\x20'+'sum\x20+\x20uw0\x20'+'*\x20vw1\x20*\x20te'+'xtureSampl'+'eCompareLe'+'vel(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20vec2f(u'+'0,\x20v1),\x20z)'+';\x0a\x20\x20\x20\x20sum\x20'+'=\x20sum\x20+\x20uw'+'1\x20*\x20vw1\x20*\x20'+'textureSam'+'pleCompare'+'Level(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20vec2f'+'(u1,\x20v1),\x20'+'z);\x0a\x0a\x20\x20\x20\x20s'+'um\x20=\x20sum\x20*'+'\x20(1.0\x20/\x2016'+'.0);\x0a\x20\x20\x20\x20r'+'eturn\x20sum;'+'\x0a}\x0a\x0afn\x20get'+'ShadowPCF3'+'x3(shadowM'+'ap:\x20textur'+'e_depth_2d'+',\x20shadowMa'+'pSampler:\x20'+'sampler_co'+'mparison,\x20'+'shadowCoor'+'d:\x20vec3f,\x20'+'shadowPara'+'ms:\x20vec4f)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20_getShado'+'wPCF3x3(sh'+'adowMap,\x20s'+'hadowMapSa'+'mpler,\x20sha'+'dowCoord,\x20'+'shadowPara'+'ms.xyz);\x0a}'+'\x0a\x0afn\x20getSh'+'adowSpotPC'+'F3x3(shado'+'wMap:\x20text'+'ure_depth_'+'2d,\x20shadow'+'MapSampler'+':\x20sampler_'+'comparison'+',\x20shadowCo'+'ord:\x20vec3f'+',\x20shadowPa'+'rams:\x20vec4'+'f)\x20->\x20f32\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20_getSha'+'dowPCF3x3(')+('shadowMap,'+'\x20shadowMap'+'Sampler,\x20s'+'hadowCoord'+',\x20shadowPa'+'rams.xyz);'+'\x0a}\x0a\x0a//\x20---'+'--\x20Omni\x20Sa'+'mpling\x20---'+'--\x0a\x0a//\x20Not'+'\x20currently'+'\x20supported'+'\x20on\x20WebGPU'+'\x20device\x0a//'+'\x20fn\x20getSha'+'dowOmniPCF'+'3x3(shadow'+'Map:\x20textu'+'re_depth_c'+'ube,\x20shado'+'wMapSample'+'r:\x20sampler'+'_compariso'+'n,\x20shadowP'+'arams:\x20vec'+'4f,\x20dir:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a\x0a//\x20\x20'+'\x20\x20\x20//\x20Calc'+'ulate\x20shad'+'ow\x20depth\x20f'+'rom\x20the\x20li'+'ght\x20direct'+'ion\x0a//\x20\x20\x20\x20'+'\x20let\x20shado'+'wZ:\x20f32\x20=\x20'+'length(dir'+')\x20*\x20shadow'+'Params.w\x20+'+'\x20shadowPar'+'ams.z;\x0a\x0a//'+'\x20\x20\x20\x20\x20//\x20of'+'fset\x0a//\x20\x20\x20'+'\x20\x20let\x20texS'+'ize_i\x20=\x20te'+'xtureDimen'+'sions(shad'+'owMap,\x200);'+'\x0a//\x20\x20\x20\x20\x20le'+'t\x20z:\x20f32\x20='+'\x201.0\x20/\x20f32'+'(texSize_i'+'.x);\x0a//\x20\x20\x20'+'\x20\x20let\x20tc:\x20'+'vec3f\x20=\x20no'+'rmalize(di'+'r);\x0a\x0a//\x20\x20\x20'+'\x20\x20//\x20avera'+'ge\x204\x20sampl'+'es\x20-\x20not\x20a'+'\x20strict\x203x'+'3\x20PCF\x20but\x20'+'that\x27s\x20tri'+'cky\x20with\x20c'+'ubemaps\x0a//'+'\x20\x20\x20\x20\x20var\x20s'+'hadows:\x20ve'+'c4f;\x0a//\x20\x20\x20'+'\x20\x20shadows.'+'x\x20=\x20textur'+'eSampleCom'+'pareLevel('+'shadowMap,'+'\x20shadowMap'+'Sampler,\x20t'+'c\x20+\x20vec3f('+'\x20z,\x20\x20z,\x20\x20z'+'),\x20shadowZ'+');\x0a//\x20\x20\x20\x20\x20'+'shadows.y\x20'+'=\x20textureS'+'ampleCompa'+'reLevel(sh'+'adowMap,\x20s'+'hadowMapSa'+'mpler,\x20tc\x20'+'+\x20vec3f(-z'+',\x20-z,\x20\x20z),'+'\x20shadowZ);'+'\x0a//\x20\x20\x20\x20\x20sh'+'adows.z\x20=\x20'+'textureSam'+'pleCompare'+'Level(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20tc\x20+\x20'+'vec3f(-z,\x20'+'\x20z,\x20-z),\x20s'+'hadowZ);\x0a/')+('/\x20\x20\x20\x20\x20shad'+'ows.w\x20=\x20te'+'xtureSampl'+'eCompareLe'+'vel(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20tc\x20+\x20ve'+'c3f(\x20z,\x20-z'+',\x20-z),\x20sha'+'dowZ);\x0a\x0a//'+'\x20\x20\x20\x20\x20retur'+'n\x20dot(shad'+'ows,\x20vec4f'+'(0.25));\x0a/'+'/\x20}\x0a\x0a//\x20fn'+'\x20getShadow'+'OmniPCF3x3'+'_Wrapper(s'+'hadowMap:\x20'+'texture_de'+'pth_cube,\x20'+'shadowMapS'+'ampler:\x20sa'+'mpler_comp'+'arison,\x20sh'+'adowCoord:'+'\x20vec3f,\x20sh'+'adowParams'+':\x20vec4f,\x20l'+'ightDir:\x20v'+'ec3f)\x20->\x20f'+'32\x20{\x0a//\x20\x20\x20'+'\x20\x20return\x20g'+'etShadowOm'+'niPCF3x3(s'+'hadowMap,\x20'+'shadowMapS'+'ampler,\x20sh'+'adowParams'+',\x20lightDir'+');\x0a//\x20}\x0a'),yI='\x0a//\x20http:/'+'/the-witne'+'ss.net/new'+'s/2013/09/'+'shadow-map'+'ping-summa'+'ry-part-1/'+'\x0afn\x20_getSh'+'adowPCF5x5'+'(shadowMap'+':\x20texture_'+'depth_2d,\x20'+'shadowMapS'+'ampler:\x20sa'+'mpler_comp'+'arison,\x20sh'+'adowCoord:'+'\x20vec3f,\x20sh'+'adowParams'+':\x20vec3f)\x20-'+'>\x20f32\x20{\x0a\x0a\x20'+'\x20\x20\x20let\x20z:\x20'+'f32\x20=\x20shad'+'owCoord.z;'+'\x0a\x20\x20\x20\x20let\x20u'+'v:\x20vec2f\x20='+'\x20shadowCoo'+'rd.xy\x20*\x20sh'+'adowParams'+'.x;\x20//\x201\x20u'+'nit\x20-\x201\x20te'+'xel\x0a\x20\x20\x20\x20le'+'t\x20shadowMa'+'pSizeInv:\x20'+'f32\x20=\x201.0\x20'+'/\x20shadowPa'+'rams.x;\x0a\x20\x20'+'\x20\x20let\x20base'+'_uv_temp:\x20'+'vec2f\x20=\x20fl'+'oor(uv\x20+\x200'+'.5);\x0a\x20\x20\x20\x20l'+'et\x20s:\x20f32\x20'+'=\x20(uv.x\x20+\x20'+'0.5\x20-\x20base'+'_uv_temp.x'+');\x0a\x20\x20\x20\x20let'+'\x20t:\x20f32\x20=\x20'+'(uv.y\x20+\x200.'+'5\x20-\x20base_u'+'v_temp.y);'+'\x0a\x20\x20\x20\x20let\x20b'+'ase_uv:\x20ve'+'c2f\x20=\x20(bas'+'e_uv_temp\x20'+'-\x20vec2f(0.'+'5))\x20*\x20shad'+'owMapSizeI'+'nv;\x0a\x0a\x20\x20\x20\x20l'+'et\x20uw0:\x20f3'+'2\x20=\x20(4.0\x20-'+'\x203.0\x20*\x20s);'+'\x0a\x20\x20\x20\x20let\x20u'+'w1:\x20f32\x20=\x20'+'7.0;\x0a\x20\x20\x20\x20l'+'et\x20uw2:\x20f3'+'2\x20=\x20(1.0\x20+'+'\x203.0\x20*\x20s);'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'u0_offset:'+'\x20f32\x20=\x20(3.'+'0\x20-\x202.0\x20*\x20'+'s)\x20/\x20uw0\x20-'+'\x202.0;\x0a\x20\x20\x20\x20'+'let\x20u1_off'+'set:\x20f32\x20='+'\x20(3.0\x20+\x20s)'+'\x20/\x20uw1;\x0a\x20\x20'+'\x20\x20let\x20u2_o'+'ffset:\x20f32'+'\x20=\x20s\x20/\x20uw2'+'\x20+\x202.0;\x0a\x0a\x20'+'\x20\x20\x20let\x20vw0'+':\x20f32\x20=\x20(4'+'.0\x20-\x203.0\x20*'+'\x20t);\x0a\x20\x20\x20\x20l'+'et\x20vw1:\x20f3'+'2\x20=\x207.0;\x0a\x20'+'\x20\x20\x20let\x20vw2'+':\x20f32\x20=\x20(1'+'.0\x20+\x203.0\x20*'+'\x20t);\x0a\x0a\x20\x20\x20\x20'+'let\x20v0_off'+'set:\x20f32\x20='+'\x20(3.0\x20-\x202.'+'0\x20*\x20t)\x20/\x20v'+'w0\x20-\x202.0;\x0a'+'\x20\x20\x20\x20let\x20v1'+'_offset:\x20f'+'32\x20=\x20(3.0\x20'+('+\x20t)\x20/\x20vw1'+';\x0a\x20\x20\x20\x20let\x20'+'v2_offset:'+'\x20f32\x20=\x20t\x20/'+'\x20vw2\x20+\x202.0'+';\x0a\x0a\x20\x20\x20\x20var'+'\x20sum:\x20f32\x20'+'=\x200.0;\x0a\x0a\x20\x20'+'\x20\x20let\x20u0:\x20'+'f32\x20=\x20u0_o'+'ffset\x20*\x20sh'+'adowMapSiz'+'eInv\x20+\x20bas'+'e_uv.x;\x0a\x20\x20'+'\x20\x20let\x20v0:\x20'+'f32\x20=\x20v0_o'+'ffset\x20*\x20sh'+'adowMapSiz'+'eInv\x20+\x20bas'+'e_uv.y;\x0a\x0a\x20'+'\x20\x20\x20let\x20u1:'+'\x20f32\x20=\x20u1_'+'offset\x20*\x20s'+'hadowMapSi'+'zeInv\x20+\x20ba'+'se_uv.x;\x0a\x20'+'\x20\x20\x20let\x20v1:'+'\x20f32\x20=\x20v1_'+'offset\x20*\x20s'+'hadowMapSi'+'zeInv\x20+\x20ba'+'se_uv.y;\x0a\x0a'+'\x20\x20\x20\x20let\x20u2'+':\x20f32\x20=\x20u2'+'_offset\x20*\x20'+'shadowMapS'+'izeInv\x20+\x20b'+'ase_uv.x;\x0a'+'\x20\x20\x20\x20let\x20v2'+':\x20f32\x20=\x20v2'+'_offset\x20*\x20'+'shadowMapS'+'izeInv\x20+\x20b'+'ase_uv.y;\x0a'+'\x0a\x20\x20\x20\x20sum\x20='+'\x20sum\x20+\x20uw0'+'\x20*\x20vw0\x20*\x20t'+'extureSamp'+'leCompareL'+'evel(shado'+'wMap,\x20shad'+'owMapSampl'+'er,\x20vec2f('+'u0,\x20v0),\x20z'+');\x0a\x20\x20\x20\x20sum'+'\x20=\x20sum\x20+\x20u'+'w1\x20*\x20vw0\x20*'+'\x20textureSa'+'mpleCompar'+'eLevel(sha'+'dowMap,\x20sh'+'adowMapSam'+'pler,\x20vec2'+'f(u1,\x20v0),'+'\x20z);\x0a\x20\x20\x20\x20s'+'um\x20=\x20sum\x20+'+'\x20uw2\x20*\x20vw0'+'\x20*\x20texture'+'SampleComp'+'areLevel(s'+'hadowMap,\x20'+'shadowMapS'+'ampler,\x20ve'+'c2f(u2,\x20v0'+'),\x20z);\x0a\x0a\x20\x20'+'\x20\x20sum\x20=\x20su'+'m\x20+\x20uw0\x20*\x20'+'vw1\x20*\x20text'+'ureSampleC'+'ompareLeve'+'l(shadowMa'+'p,\x20shadowM'+'apSampler,'+'\x20vec2f(u0,'+'\x20v1),\x20z);\x0a'+'\x20\x20\x20\x20sum\x20=\x20'+'sum\x20+\x20uw1\x20'+'*\x20vw1\x20*\x20te'+'xtureSampl'+'eCompareLe'+'vel(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20vec2f(u'+'1,\x20v1),\x20z)'+';\x0a\x20\x20\x20\x20sum\x20'+'=\x20sum\x20+\x20uw'+'2\x20*\x20vw1\x20*\x20'+'textureSam'+'pleCompare')+('Level(shad'+'owMap,\x20sha'+'dowMapSamp'+'ler,\x20vec2f'+'(u2,\x20v1),\x20'+'z);\x0a\x0a\x20\x20\x20\x20s'+'um\x20=\x20sum\x20+'+'\x20uw0\x20*\x20vw2'+'\x20*\x20texture'+'SampleComp'+'areLevel(s'+'hadowMap,\x20'+'shadowMapS'+'ampler,\x20ve'+'c2f(u0,\x20v2'+'),\x20z);\x0a\x20\x20\x20'+'\x20sum\x20=\x20sum'+'\x20+\x20uw1\x20*\x20v'+'w2\x20*\x20textu'+'reSampleCo'+'mpareLevel'+'(shadowMap'+',\x20shadowMa'+'pSampler,\x20'+'vec2f(u1,\x20'+'v2),\x20z);\x0a\x20'+'\x20\x20\x20sum\x20=\x20s'+'um\x20+\x20uw2\x20*'+'\x20vw2\x20*\x20tex'+'tureSample'+'CompareLev'+'el(shadowM'+'ap,\x20shadow'+'MapSampler'+',\x20vec2f(u2'+',\x20v2),\x20z);'+'\x0a\x0a\x20\x20\x20\x20sum\x20'+'=\x20sum\x20*\x20(1'+'.0\x20/\x20144.0'+');\x0a\x20\x20\x20\x20sum'+'\x20=\x20saturat'+'e(sum);\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'sum;\x0a}\x0a\x0afn'+'\x20getShadow'+'PCF5x5(sha'+'dowMap:\x20te'+'xture_dept'+'h_2d,\x20shad'+'owMapSampl'+'er:\x20sample'+'r_comparis'+'on,\x20shadow'+'Coord:\x20vec'+'3f,\x20shadow'+'Params:\x20ve'+'c4f)\x20->\x20f3'+'2\x20{\x0a\x20\x20\x20\x20re'+'turn\x20_getS'+'hadowPCF5x'+'5(shadowMa'+'p,\x20shadowM'+'apSampler,'+'\x20shadowCoo'+'rd,\x20shadow'+'Params.xyz'+');\x0a}\x0a\x0afn\x20g'+'etShadowSp'+'otPCF5x5(s'+'hadowMap:\x20'+'texture_de'+'pth_2d,\x20sh'+'adowMapSam'+'pler:\x20samp'+'ler_compar'+'ison,\x20shad'+'owCoord:\x20v'+'ec3f,\x20shad'+'owParams:\x20'+'vec4f)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'return\x20_ge'+'tShadowPCF'+'5x5(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20shadowC'+'oord,\x20shad'+'owParams.x'+'yz);\x0a}\x0a'),vI='\x0a\x0afn\x20fract'+'SinRand(uv'+':\x20vec2f)\x20-'+'>\x20f32\x20{\x0a\x20\x20'+'\x20\x20let\x20PI:\x20'+'f32\x20=\x203.14'+'1592653589'+'793;\x0a\x20\x20\x20\x20l'+'et\x20a:\x20f32\x20'+'=\x2012.9898;'+'\x20let\x20b:\x20f3'+'2\x20=\x2078.233'+';\x20let\x20c:\x20f'+'32\x20=\x2043758'+'.5453;\x0a\x20\x20\x20'+'\x20let\x20dt:\x20f'+'32\x20=\x20dot(u'+'v.xy,\x20vec2'+'f(a,\x20b));\x0a'+'\x20\x20\x20\x20let\x20sn'+':\x20f32\x20=\x20dt'+'\x20%\x20PI;\x0a\x20\x20\x20'+'\x20return\x20fr'+'act(sin(sn'+')\x20*\x20c);\x0a}\x0a'+'\x0a//\x20struct'+'\x20to\x20hold\x20p'+'recomputed'+'\x20constants'+'\x20and\x20curre'+'nt\x20state\x0as'+'truct\x20Voge'+'lDiskData\x20'+'{\x0a\x20\x20\x20\x20invN'+'umSamples:'+'\x20f32,\x0a\x20\x20\x20\x20'+'initialAng'+'le:\x20f32,\x0a\x20'+'\x20\x20\x20current'+'PointId:\x20f'+'32,\x0a}\x0a\x0a//\x20'+'prepare\x20th'+'e\x20Vogel\x20di'+'sk\x20constan'+'ts\x20and\x20ini'+'tialize\x20th'+'e\x20current\x20'+'state\x20in\x20t'+'he\x20struct\x0a'+'fn\x20prepare'+'DiskConsta'+'nts(data:\x20'+'ptr<functi'+'on,\x20VogelD'+'iskData>,\x20'+'sampleCoun'+'t:\x20i32,\x20ra'+'ndomSeed:\x20'+'f32)\x20{\x0a\x20\x20\x20'+'\x20let\x20pi2:\x20'+'f32\x20=\x206.28'+'318530718;'+'\x0a\x20\x20\x20\x20data.'+'invNumSamp'+'les\x20=\x201.0\x20'+'/\x20f32(samp'+'leCount);\x0a'+'\x20\x20\x20\x20data.i'+'nitialAngl'+'e\x20=\x20random'+'Seed\x20*\x20pi2'+';\x0a\x20\x20\x20\x20data'+'.currentPo'+'intId\x20=\x200.'+'0;\x0a}\x0a\x0a\x0afn\x20'+'generateDi'+'skSample(d'+'ata:\x20ptr<f'+'unction,\x20V'+'ogelDiskDa'+'ta>)\x20->\x20ve'+'c2f\x20{\x0a\x20\x20\x20\x20'+'let\x20GOLDEN'+'_ANGLE:\x20f3'+'2\x20=\x202.3999'+'63;\x0a\x20\x20\x20\x20le'+'t\x20r:\x20f32\x20='+'\x20sqrt((dat'+'a.currentP'+'ointId\x20+\x200'+'.5)\x20*\x20data'+'.invNumSam'+'ples);\x0a\x20\x20\x20'+'\x20let\x20theta'+':\x20f32\x20=\x20da'+'ta.current'+'PointId\x20*\x20'+'GOLDEN_ANG'+'LE\x20+\x20data.'+'initialAng'+('le;\x0a\x0a\x20\x20\x20\x20l'+'et\x20offset:'+'\x20vec2f\x20=\x20v'+'ec2f(cos(t'+'heta),\x20sin'+'(theta))\x20*'+'\x20pow(r,\x201.'+'33);\x0a\x0a\x20\x20\x20\x20'+'data.curre'+'ntPointId\x20'+'=\x20data.cur'+'rentPointI'+'d\x20+\x201.0;\x0a\x20'+'\x20\x20\x20return\x20'+'offset;\x0a}\x0a'+'\x0afn\x20PCSSFi'+'ndBlocker('+'shadowMap:'+'\x20texture_2'+'d<f32>,\x20sh'+'adowMapSam'+'pler:\x20samp'+'ler,\x20avgBl'+'ockerDepth'+':\x20ptr<func'+'tion,\x20f32>'+',\x20numBlock'+'ers:\x20ptr<f'+'unction,\x20i'+'32>,\x0a\x20\x20\x20\x20s'+'hadowCoord'+'s:\x20vec2f,\x20'+'z:\x20f32,\x20sh'+'adowBlocke'+'rSamples:\x20'+'i32,\x20penum'+'braSize:\x20f'+'32,\x20invSha'+'dowMapSize'+':\x20f32,\x20ran'+'domSeed:\x20f'+'32)\x20{\x0a\x0a\x20\x20\x20'+'\x20var\x20diskD'+'ata:\x20Vogel'+'DiskData;\x0a'+'\x20\x20\x20\x20prepar'+'eDiskConst'+'ants(&disk'+'Data,\x20shad'+'owBlockerS'+'amples,\x20ra'+'ndomSeed);'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'searchWidt'+'h:\x20f32\x20=\x20p'+'enumbraSiz'+'e\x20*\x20invSha'+'dowMapSize'+';\x0a\x20\x20\x20\x20var\x20'+'blockerSum'+':\x20f32\x20=\x200.'+'0;\x0a\x20\x20\x20\x20var'+'\x20numBlocke'+'rs_local:\x20'+'i32\x20=\x200;\x0a\x0a'+'\x20\x20\x20\x20for(\x20v'+'ar\x20i:\x20i32\x20'+'=\x200;\x20i\x20<\x20s'+'hadowBlock'+'erSamples;'+'\x20i\x20=\x20i\x20+\x201'+'\x20)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20dis'+'kUV:\x20vec2f'+'\x20=\x20generat'+'eDiskSampl'+'e(&diskDat'+'a);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20samp'+'leUV:\x20vec2'+'f\x20=\x20shadow'+'Coords\x20+\x20d'+'iskUV\x20*\x20se'+'archWidth;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20l'+'et\x20shadowM'+'apDepth:\x20f'+'32\x20=\x20textu'+'reSampleLe'+'vel(shadow'+'Map,\x20shado'+'wMapSample'+'r,\x20sampleU'+'V,\x200.0).r;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20i'+'f\x20(\x20shadow'+'MapDepth\x20<'+'\x20z\x20)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20b'+'lockerSum\x20')+('=\x20blockerS'+'um\x20+\x20shado'+'wMapDepth;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20numBloc'+'kers_local'+'\x20=\x20numBloc'+'kers_local'+'\x20+\x201;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20*avg'+'BlockerDep'+'th\x20=\x20block'+'erSum\x20/\x20f3'+'2(numBlock'+'ers_local)'+';\x0a\x20\x20\x20\x20*num'+'Blockers\x20='+'\x20numBlocke'+'rs_local;\x0a'+'}\x0a\x0afn\x20PCSS'+'Filter(sha'+'dowMap:\x20te'+'xture_2d<f'+'32>,\x20shado'+'wMapSample'+'r:\x20sampler'+',\x20uv:\x20vec2'+'f,\x20receive'+'rDepth:\x20f3'+'2,\x20shadowS'+'amples:\x20i3'+'2,\x20filterR'+'adius:\x20f32'+',\x20randomSe'+'ed:\x20f32)\x20-'+'>\x20f32\x20{\x0a\x0a\x20'+'\x20\x20\x20var\x20dis'+'kData:\x20Vog'+'elDiskData'+';\x0a\x20\x20\x20\x20prep'+'areDiskCon'+'stants(&di'+'skData,\x20sh'+'adowSample'+'s,\x20randomS'+'eed);\x0a\x0a\x20\x20\x20'+'\x20var\x20sum:\x20'+'f32\x20=\x200.0;'+'\x0a\x20\x20\x20\x20for\x20('+'var\x20i:\x20i32'+'\x20=\x200;\x20i\x20<\x20'+'shadowSamp'+'les;\x20i\x20=\x20i'+'\x20+\x201)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'offsetUV:\x20'+'vec2f\x20=\x20ge'+'nerateDisk'+'Sample(&di'+'skData)\x20*\x20'+'filterRadi'+'us;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20dept'+'h:\x20f32\x20=\x20t'+'extureSamp'+'leLevel(sh'+'adowMap,\x20s'+'hadowMapSa'+'mpler,\x20uv\x20'+'+\x20offsetUV'+',\x200.0).r;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20su'+'m\x20=\x20sum\x20+\x20'+'step(recei'+'verDepth,\x20'+'depth);\x0a\x20\x20'+'\x20\x20}\x0a\x20\x20\x20\x20re'+'turn\x20sum\x20/'+'\x20f32(shado'+'wSamples);'+'\x0a}\x0a\x0afn\x20get'+'Penumbra(d'+'blocker:\x20f'+'32,\x20drecei'+'ver:\x20f32,\x20'+'penumbraSi'+'ze:\x20f32,\x20p'+'enumbraFal'+'loff:\x20f32)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20let\x20di'+'st:\x20f32\x20=\x20'+'dreceiver\x20'+'-\x20dblocker'+';\x0a\x20\x20\x20\x20let\x20'+'penumbra:\x20'+'f32\x20=\x201.0\x20'+'-\x20pow(1.0\x20'+'-\x20dist,\x20pe')+('numbraFall'+'off);\x0a\x20\x20\x20\x20'+'return\x20pen'+'umbra\x20*\x20pe'+'numbraSize'+';\x0a}\x0a\x0afn\x20PC'+'SSDirectio'+'nal(shadow'+'Map:\x20textu'+'re_2d<f32>'+',\x20shadowMa'+'pSampler:\x20'+'sampler,\x20s'+'hadowCoord'+'s:\x20vec3f,\x20'+'cameraPara'+'ms:\x20vec4f,'+'\x20softShado'+'wParams:\x20v'+'ec4f)\x20->\x20f'+'32\x20{\x0a\x0a\x20\x20\x20\x20'+'let\x20receiv'+'erDepth:\x20f'+'32\x20=\x20shado'+'wCoords.z;'+'\x0a\x20\x20\x20\x20let\x20r'+'andomSeed:'+'\x20f32\x20=\x20fra'+'ctSinRand('+'pcPosition'+'.xy);\x0a\x20\x20\x20\x20'+'let\x20shadow'+'Samples:\x20i'+'32\x20=\x20i32(s'+'oftShadowP'+'arams.x);\x0a'+'\x20\x20\x20\x20let\x20sh'+'adowBlocke'+'rSamples:\x20'+'i32\x20=\x20i32('+'softShadow'+'Params.y);'+'\x0a\x20\x20\x20\x20let\x20p'+'enumbraSiz'+'e:\x20f32\x20=\x20s'+'oftShadowP'+'arams.z;\x0a\x20'+'\x20\x20\x20let\x20pen'+'umbraFallo'+'ff:\x20f32\x20=\x20'+'softShadow'+'Params.w;\x0a'+'\x0a\x20\x20\x20\x20let\x20s'+'hadowMapSi'+'ze:\x20i32\x20=\x20'+'i32(textur'+'eDimension'+'s(shadowMa'+'p,\x200).x);\x0a'+'\x20\x20\x20\x20var\x20in'+'vShadowMap'+'Size:\x20f32\x20'+'=\x201.0\x20/\x20f3'+'2(shadowMa'+'pSize);\x0a\x20\x20'+'\x20\x20invShado'+'wMapSize\x20='+'\x20invShadow'+'MapSize\x20*\x20'+'(f32(shado'+'wMapSize)\x20'+'/\x202048.0);'+'\x0a\x0a\x20\x20\x20\x20var\x20'+'penumbra:\x20'+'f32;\x0a\x0a\x20\x20\x20\x20'+'//\x20contact'+'\x20hardening'+'\x20path\x0a\x20\x20\x20\x20'+'if\x20(shadow'+'BlockerSam'+'ples\x20>\x200)\x20'+'{\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20find\x20a'+'verage\x20blo'+'cker\x20depth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20avgBloc'+'kerDepth:\x20'+'f32\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20numBloc'+'kers:\x20i32\x20'+'=\x200;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20PCSSFin'+'dBlocker(s'+'hadowMap,\x20'+'shadowMapS'+'ampler,\x20&a'+'vgBlockerD'+'epth,\x20&num')+('Blockers,\x20'+'shadowCoor'+'ds.xy,\x20rec'+'eiverDepth'+',\x20shadowBl'+'ockerSampl'+'es,\x20penumb'+'raSize,\x20in'+'vShadowMap'+'Size,\x20rand'+'omSeed);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20early\x20out'+'\x20when\x20no\x20b'+'lockers\x20ar'+'e\x20present\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20if'+'\x20(numBlock'+'ers\x20<\x201)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'1.0;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20pen'+'umbra\x20size'+'\x20is\x20based\x20'+'on\x20the\x20blo'+'cker\x20depth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20p'+'enumbra\x20=\x20'+'getPenumbr'+'a(avgBlock'+'erDepth,\x20s'+'hadowCoord'+'s.z,\x20penum'+'braSize,\x20p'+'enumbraFal'+'loff);\x0a\x0a\x20\x20'+'\x20\x20}\x20else\x20{'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20constan'+'t\x20filter\x20s'+'ize,\x20no\x20co'+'ntact\x20hard'+'ening\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20penumb'+'ra\x20=\x20penum'+'braSize;\x0a\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'let\x20filter'+'Radius:\x20f3'+'2\x20=\x20penumb'+'ra\x20*\x20invSh'+'adowMapSiz'+'e;\x0a\x0a\x20\x20\x20\x20//'+'\x20filtering'+'\x0a\x20\x20\x20\x20retur'+'n\x20PCSSFilt'+'er(shadowM'+'ap,\x20shadow'+'MapSampler'+',\x20shadowCo'+'ords.xy,\x20r'+'eceiverDep'+'th,\x20shadow'+'Samples,\x20f'+'ilterRadiu'+'s,\x20randomS'+'eed);\x0a}\x0a\x0af'+'n\x20getShado'+'wPCSS(shad'+'owMap:\x20tex'+'ture_2d<f3'+'2>,\x20shadow'+'MapSampler'+':\x20sampler,'+'\x20shadowCoo'+'rd:\x20vec3f,'+'\x20shadowPar'+'ams:\x20vec4f'+',\x20cameraPa'+'rams:\x20vec4'+'f,\x20softSha'+'dowParams:'+'\x20vec4f,\x20li'+'ghtDir:\x20ve'+'c3f)\x20->\x20f3'+'2\x20{\x20//\x20lig'+'htDir\x20unus'+'ed?\x20Kept\x20p'+'aram.\x0a\x20\x20\x20\x20'+'return\x20PCS'+'SDirection'+'al(shadowM'+'ap,\x20shadow'+'MapSampler'+',\x20shadowCo'+'ord,\x20camer'+'aParams,\x20s'+'oftShadowP')+'arams);\x0a}\x0a',xI='\x0aattribute'+'\x20vertex_bo'+'neIndices:'+'\x20f32;\x0a\x0avar'+'\x20texture_p'+'oseMap:\x20te'+'xture_2d<f'+'32>;\x0a\x0afn\x20g'+'etBoneMatr'+'ix(indexFl'+'oat:\x20f32)\x20'+'->\x20mat4x4f'+'\x20{\x0a\x0a\x20\x20\x20\x20le'+'t\x20width\x20=\x20'+'i32(textur'+'eDimension'+'s(texture_'+'poseMap).x'+');\x0a\x20\x20\x20\x20let'+'\x20index:\x20i3'+'2\x20=\x20i32(in'+'dexFloat\x20+'+'\x200.5)\x20*\x203;'+'\x0a\x20\x20\x20\x20let\x20i'+'y:\x20i32\x20=\x20i'+'ndex\x20/\x20wid'+'th;\x0a\x20\x20\x20\x20le'+'t\x20ix:\x20i32\x20'+'=\x20index\x20%\x20'+'width;\x0a\x0a\x20\x20'+'\x20\x20//\x20read\x20'+'elements\x20o'+'f\x204x3\x20matr'+'ix\x0a\x20\x20\x20\x20let'+'\x20v1:\x20vec4f'+'\x20=\x20texture'+'Load(textu'+'re_poseMap'+',\x20vec2i(ix'+'\x20+\x200,\x20iy),'+'\x200);\x0a\x20\x20\x20\x20l'+'et\x20v2:\x20vec'+'4f\x20=\x20textu'+'reLoad(tex'+'ture_poseM'+'ap,\x20vec2i('+'ix\x20+\x201,\x20iy'+'),\x200);\x0a\x20\x20\x20'+'\x20let\x20v3:\x20v'+'ec4f\x20=\x20tex'+'tureLoad(t'+'exture_pos'+'eMap,\x20vec2'+'i(ix\x20+\x202,\x20'+'iy),\x200);\x0a\x0a'+'\x20\x20\x20\x20//\x20tra'+'nspose\x20to\x20'+'4x4\x20matrix'+'\x0a\x20\x20\x20\x20retur'+'n\x20mat4x4f('+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'1.x,\x20v2.x,'+'\x20v3.x,\x200,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20v1'+'.y,\x20v2.y,\x20'+'v3.y,\x200,\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20v1.'+'z,\x20v2.z,\x20v'+'3.z,\x200,\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20v1.w'+',\x20v2.w,\x20v3'+'.w,\x201.0\x0a\x20\x20'+'\x20\x20);\x0a}\x0a',TI='\x0a\x0aattribut'+'e\x20vertex_b'+'oneWeights'+':\x20vec4f;\x0aa'+'ttribute\x20v'+'ertex_bone'+'Indices:\x20v'+'ec4f;\x0a\x0avar'+'\x20texture_p'+'oseMap:\x20te'+'xture_2d<f'+'32>;\x0a\x0astru'+'ct\x20BoneMat'+'rix\x20{\x0a\x20\x20\x20\x20'+'v1:\x20vec4f,'+'\x0a\x20\x20\x20\x20v2:\x20v'+'ec4f,\x0a\x20\x20\x20\x20'+'v3:\x20vec4f,'+'\x0a}\x0a\x0afn\x20get'+'BoneMatrix'+'(width:\x20i3'+'2,\x20index:\x20'+'i32)\x20->\x20Bo'+'neMatrix\x20{'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'v\x20=\x20index\x20'+'/\x20width;\x0a\x20'+'\x20\x20\x20let\x20u\x20='+'\x20index\x20%\x20w'+'idth;\x0a\x0a\x20\x20\x20'+'\x20var\x20resul'+'t:\x20BoneMat'+'rix;\x0a\x20\x20\x20\x20r'+'esult.v1\x20='+'\x20textureLo'+'ad(texture'+'_poseMap,\x20'+'vec2i(u\x20+\x20'+'0,\x20v),\x200);'+'\x0a\x20\x20\x20\x20resul'+'t.v2\x20=\x20tex'+'tureLoad(t'+'exture_pos'+'eMap,\x20vec2'+'i(u\x20+\x201,\x20v'+'),\x200);\x0a\x20\x20\x20'+'\x20result.v3'+'\x20=\x20texture'+'Load(textu'+'re_poseMap'+',\x20vec2i(u\x20'+'+\x202,\x20v),\x200'+');\x0a\x20\x20\x20\x20ret'+'urn\x20result'+';\x0a}\x0a\x0afn\x20ge'+'tSkinMatri'+'x(indicesF'+'loat:\x20vec4'+'f,\x20weights'+':\x20vec4f)\x20-'+'>\x20mat4x4f\x20'+'{\x0a\x0a\x20\x20\x20\x20let'+'\x20width\x20=\x20i'+'32(texture'+'Dimensions'+'(texture_p'+'oseMap).x)'+';\x0a\x20\x20\x20\x20var\x20'+'indices\x20=\x20'+'vec4i(indi'+'cesFloat\x20+'+'\x200.5)\x20*\x203;'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'boneA\x20=\x20ge'+'tBoneMatri'+'x(width,\x20i'+'ndices.x);'+'\x0a\x20\x20\x20\x20let\x20b'+'oneB\x20=\x20get'+'BoneMatrix'+'(width,\x20in'+'dices.y);\x0a'+'\x20\x20\x20\x20let\x20bo'+'neC\x20=\x20getB'+'oneMatrix('+'width,\x20ind'+'ices.z);\x0a\x20'+'\x20\x20\x20let\x20bon'+'eD\x20=\x20getBo'+'neMatrix(w'+'idth,\x20indi'+'ces.w);\x0a\x0a\x20'+'\x20\x20\x20//\x20...\x20'+'rest\x20of\x20ge'+'tSkinMatri'+'x\x20remains\x20'+'the\x20same\x20.'+'..\x0a\x20\x20\x20\x20let'+'\x20v1\x20=\x20bone'+'A.v1\x20*\x20wei'+('ghts.x\x20+\x20b'+'oneB.v1\x20*\x20'+'weights.y\x20'+'+\x20boneC.v1'+'\x20*\x20weights'+'.z\x20+\x20boneD'+'.v1\x20*\x20weig'+'hts.w;\x0a\x20\x20\x20'+'\x20let\x20v2\x20=\x20'+'boneA.v2\x20*'+'\x20weights.x'+'\x20+\x20boneB.v'+'2\x20*\x20weight'+'s.y\x20+\x20bone'+'C.v2\x20*\x20wei'+'ghts.z\x20+\x20b'+'oneD.v2\x20*\x20'+'weights.w;'+'\x0a\x20\x20\x20\x20let\x20v'+'3\x20=\x20boneA.'+'v3\x20*\x20weigh'+'ts.x\x20+\x20bon'+'eB.v3\x20*\x20we'+'ights.y\x20+\x20'+'boneC.v3\x20*'+'\x20weights.z'+'\x20+\x20boneD.v'+'3\x20*\x20weight'+'s.w;\x0a\x0a\x20\x20\x20\x20'+'let\x20one\x20=\x20'+'dot(weight'+'s,\x20vec4f(1'+'.0,\x201.0,\x201'+'.0,\x201.0));'+'\x0a\x0a\x20\x20\x20\x20//\x20t'+'ranspose\x20t'+'o\x204x4\x20matr'+'ix\x0a\x20\x20\x20\x20ret'+'urn\x20mat4x4'+'f(\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20v1.x,\x20v2.'+'x,\x20v3.x,\x200'+',\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'v1.y,\x20v2.y'+',\x20v3.y,\x200,'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'1.z,\x20v2.z,'+'\x20v3.z,\x200,\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20v1'+'.w,\x20v2.w,\x20'+'v3.w,\x20one\x0a'+'\x20\x20\x20\x20);\x0a}\x0a'),wI='\x0a\x20\x20\x20\x20#defi'+'ne\x20LIT_SKY'+'BOX_INTENS'+'ITY\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22e'+'nvProcPS\x22\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22gammaP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ton'+'emappingPS'+'\x22\x0a\x0a\x20\x20\x20\x20#if'+'def\x20PREPAS'+'S_PASS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20varyi'+'ng\x20vLinear'+'Depth:\x20f32'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'floatAsUin'+'tPS\x22\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20//\x20Varyin'+'g\x20and\x20unif'+'orm\x20declar'+'ations\x0a\x20\x20\x20'+'\x20varying\x20v'+'ViewDir\x20:\x20'+'vec3f;\x0a\x20\x20\x20'+'\x20uniform\x20s'+'kyboxHighl'+'ightMultip'+'lier\x20:\x20f32'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20SKY_CU'+'BEMAP\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20t'+'exture_cub'+'eMap\x20:\x20tex'+'ture_cube<'+'f32>;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20te'+'xture_cube'+'Map_sample'+'r\x20:\x20sample'+'r;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'KYMESH\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'arying\x20vWo'+'rldPos\x20:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20cube'+'MapRotatio'+'nMatrix\x20:\x20'+'mat3x3f;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20p'+'rojectedSk'+'ydomeCente'+'r\x20:\x20vec3f;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#else\x20//\x20'+'env-atlas\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22s'+'phericalPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'envAtlasPS'+'\x22\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_envAtla'+'s\x20:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20texture'+'_envAtlas_'+'sampler\x20:\x20'+'sampler;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20mipL'+'evel\x20:\x20f32'+';\x0a\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20@'+'fragment\x0a\x20'+'\x20\x20\x20fn\x20frag'+'mentMain(i'+'nput\x20:\x20Fra'+'gmentInput'+')\x20->\x20Fragm'+'entOutput\x20'+'{\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20outpu'+'t:\x20Fragmen'+'tOutput;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20PREPA'+('SS_PASS\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20output'+'\x20linear\x20de'+'pth\x20during'+'\x20prepass\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20floa'+'t2vec4(vLi'+'nearDepth)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20linear'+'\x20:\x20vec3f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20dir\x20'+':\x20vec3f;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'KY_CUBEMAP'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20SKYME'+'SH\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20get\x20'+'vector\x20fro'+'m\x20world\x20sp'+'ace\x20pos\x20to'+'\x20tripod\x20or'+'igin\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20e'+'nvDir\x20:\x20ve'+'c3f\x20=\x20norm'+'alize(inpu'+'t.vWorldPo'+'s\x20-\x20unifor'+'m.projecte'+'dSkydomeCe'+'nter);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dir'+'\x20=\x20envDir\x20'+'*\x20uniform.'+'cubeMapRot'+'ationMatri'+'x;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20dir\x20='+'\x20input.vVi'+'ewDir;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20dir'+'.x\x20*=\x20-1.0'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'near\x20=\x20{SK'+'YBOX_DECOD'+'E_FNC}(tex'+'tureSample'+'(texture_c'+'ubeMap,\x20te'+'xture_cube'+'Map_sample'+'r,\x20dir));\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x20/'+'/\x20env-atla'+'s\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20d'+'ir\x20=\x20input'+'.vViewDir\x20'+'*\x20vec3f(-1'+'.0,\x201.0,\x201'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20uv\x20:\x20'+'vec2f\x20=\x20to'+'SphericalU'+'v(normaliz'+'e(dir));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20linea'+'r\x20=\x20{SKYBO'+'X_DECODE_F'+'NC}(textur'+'eSample(te'+'xture_envA'+'tlas,\x20text'+'ure_envAtl'+'as_sampler'+',\x20mapRough'+'nessUv(uv,')+('\x20uniform.m'+'ipLevel)))'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ou'+'r\x20HDR\x20enco'+'des\x20values'+'\x20up\x20to\x2064,'+'\x20so\x20allow\x20'+'extra\x20brig'+'htness\x20for'+'\x20the\x20clipp'+'ed\x20values\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(any('+'linear\x20>=\x20'+'vec3f(64.0'+')))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20linear\x20*'+'=\x20uniform.'+'skyboxHigh'+'lightMulti'+'plier;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20outp'+'ut.color\x20='+'\x20vec4f(gam'+'maCorrectO'+'utput(tone'+'Map(proces'+'sEnvironme'+'nt(linear)'+')),\x201.0);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20output;\x0a'+'\x20\x20\x20\x20}\x0a'),EI='\x0a\x20\x20\x20\x20//\x20At'+'tribute\x0a\x20\x20'+'\x20\x20attribut'+'e\x20aPositio'+'n\x20:\x20vec4f;'+'\x0a\x0a\x20\x20\x20\x20unif'+'orm\x20matrix'+'_view\x20:\x20ma'+'t4x4f;\x0a\x20\x20\x20'+'\x20uniform\x20m'+'atrix_proj'+'ectionSkyb'+'ox\x20:\x20mat4x'+'4f;\x0a\x20\x20\x20\x20un'+'iform\x20cube'+'MapRotatio'+'nMatrix\x20:\x20'+'mat3x3f;\x0a\x0a'+'\x20\x20\x20\x20varyin'+'g\x20vViewDir'+'\x20:\x20vec3f;\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20PREPASS_'+'PASS\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20when'+'\x20skydome\x20r'+'enders\x20dep'+'th\x20during\x20'+'prepass,\x20g'+'enerate\x20li'+'near\x20depth'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'arying\x20vLi'+'nearDepth:'+'\x20f32;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'KYMESH\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20matrix_'+'model\x20:\x20ma'+'t4x4f;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20varyi'+'ng\x20vWorldP'+'os\x20:\x20vec3f'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20@v'+'ertex\x0a\x20\x20\x20\x20'+'fn\x20vertexM'+'ain(input\x20'+':\x20VertexIn'+'put)\x20->\x20Ve'+'rtexOutput'+'\x20{\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20outp'+'ut\x20:\x20Verte'+'xOutput;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20view\x20:\x20ma'+'t4x4f\x20=\x20un'+'iform.matr'+'ix_view;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20SKYME'+'SH\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'worldPos\x20:'+'\x20vec4f\x20=\x20u'+'niform.mat'+'rix_model\x20'+'*\x20input.aP'+'osition;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20output.vW'+'orldPos\x20=\x20'+'worldPos.x'+'yz;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20outp'+'ut.positio'+'n\x20=\x20unifor'+'m.matrix_p'+'rojectionS'+'kybox\x20*\x20(v'+'iew\x20*\x20worl'+'dPos);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20PRE'+'PASS_PASS\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20l'+'inear\x20dept'+'h\x20from\x20the'+'\x20worldPosi'+'tion,\x20see\x20'+'getLinearD'+'epth\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20output.vL'+'inearDepth'+'\x20=\x20-(unifo'+('rm.matrix_'+'view\x20*\x20vec'+'4f(worldPo'+'s.xyz,\x201.0'+')).z;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20view[3]'+'[0]\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20view[3]'+'[1]\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20view[3]'+'[2]\x20=\x200.0;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'position\x20='+'\x20uniform.m'+'atrix_proj'+'ectionSkyb'+'ox\x20*\x20(view'+'\x20*\x20input.a'+'Position);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'vViewDir\x20='+'\x20input.aPo'+'sition.xyz'+'\x20*\x20uniform'+'.cubeMapRo'+'tationMatr'+'ix;\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20PREPAS'+'S_PASS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20for\x20'+'infinite\x20s'+'kybox,\x20use'+'\x20negative\x20'+'gl_Positio'+'n.w\x20to\x20get'+'\x20positive\x20'+'linear\x20dep'+'th\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.vLin'+'earDepth\x20='+'\x20-pcPositi'+'on.w;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20Force\x20sk'+'ybox\x20to\x20fa'+'r\x20Z,\x20regar'+'dless\x20of\x20t'+'he\x20clip\x20pl'+'anes\x20on\x20th'+'e\x20camera\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'Subtract\x20a'+'\x20tiny\x20fudg'+'e\x20factor\x20t'+'o\x20ensure\x20f'+'loating\x20po'+'int\x20errors'+'\x20don\x27t\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20st'+'ill\x20push\x20p'+'ixels\x20beyo'+'nd\x20far\x20Z.\x20'+'See:\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20http'+'s://commun'+'ity.khrono'+'s.org/t/sk'+'ybox-probl'+'em/61857\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.posit'+'ion.z\x20=\x20ou'+'tput.posit'+'ion.w\x20-\x201.'+'0e-7;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20output;\x0a'+'\x20\x20\x20\x20}\x0a'),bI='\x0a\x0a#ifdef\x20S'+'TD_SPECULA'+'R_CONSTANT'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20materia'+'l_specular'+':\x20vec3f;\x0a#'+'endif\x0a\x0afn\x20'+'getSpecula'+'rity()\x20{\x0a\x20'+'\x20\x20\x20var\x20spe'+'cularColor'+'\x20=\x20vec3f(1'+'.0,\x201.0,\x201'+'.0);\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20STD'+'_SPECULAR_'+'CONSTANT\x0a\x20'+'\x20\x20\x20specula'+'rColor\x20=\x20s'+'pecularCol'+'or\x20*\x20unifo'+'rm.materia'+'l_specular'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20STD_S'+'PECULAR_TE'+'XTURE\x0a\x20\x20\x20\x20'+'specularCo'+'lor\x20=\x20spec'+'ularColor\x20'+'*\x20{STD_SPE'+'CULAR_TEXT'+'URE_DECODE'+'}(textureS'+'ampleBias('+'{STD_SPECU'+'LAR_TEXTUR'+'E_NAME},\x20{'+'STD_SPECUL'+'AR_TEXTURE'+'_NAME}Samp'+'ler,\x20{STD_'+'SPECULAR_T'+'EXTURE_UV}'+',\x20uniform.'+'textureBia'+'s)).{STD_S'+'PECULAR_TE'+'XTURE_CHAN'+'NEL};\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_SPECULA'+'R_VERTEX\x0a\x20'+'\x20\x20\x20specula'+'rColor\x20=\x20s'+'pecularCol'+'or\x20*\x20satur'+'ate3(vVert'+'exColor.{S'+'TD_SPECULA'+'R_VERTEX_C'+'HANNEL});\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20dSpe'+'cularity\x20='+'\x20specularC'+'olor;\x0a}\x0a',AI='\x0a\x0afn\x20toSph'+'erical(dir'+':\x20vec3f)\x20-'+'>\x20vec2f\x20{\x0a'+'\x20\x20\x20\x20let\x20an'+'gle_xz\x20=\x20s'+'elect(0.0,'+'\x20atan2(dir'+'.x,\x20dir.z)'+',\x20any(dir.'+'xz\x20!=\x20vec2'+'f(0.0)));\x0a'+'\x20\x20\x20\x20return'+'\x20vec2f(ang'+'le_xz,\x20asi'+'n(dir.y));'+'\x0a}\x0a\x0afn\x20toS'+'phericalUv'+'(dir\x20:\x20vec'+'3f)\x20->\x20vec'+'2f\x20{\x0a\x20\x20\x20\x20c'+'onst\x20PI\x20:\x20'+'f32\x20=\x203.14'+'1592653589'+'793;\x0a\x20\x20\x20\x20l'+'et\x20uv\x20:\x20ve'+'c2f\x20=\x20toSp'+'herical(di'+'r)\x20/\x20vec2f'+'(PI\x20*\x202.0,'+'\x20PI)\x20+\x20vec'+'2f(0.5,\x200.'+'5);\x0a\x20\x20\x20\x20re'+'turn\x20vec2f'+'(uv.x,\x201.0'+'\x20-\x20uv.y);\x0a'+'}\x0a',CI='\x0a\x0a#ifdef\x20S'+'TD_SPECULA'+'RITYFACTOR'+'_CONSTANT\x0a'+'\x20\x20\x20\x20unifor'+'m\x20material'+'_speculari'+'tyFactor:\x20'+'f32;\x0a#endi'+'f\x0a\x0afn\x20getS'+'pecularity'+'Factor()\x20{'+'\x0a\x20\x20\x20\x20var\x20s'+'pecularity'+'Factor\x20=\x201'+'.0;\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULARIT'+'YFACTOR_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20speculari'+'tyFactor\x20='+'\x20speculari'+'tyFactor\x20*'+'\x20uniform.m'+'aterial_sp'+'ecularityF'+'actor;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_SPECUL'+'ARITYFACTO'+'R_TEXTURE\x0a'+'\x20\x20\x20\x20specul'+'arityFacto'+'r\x20=\x20specul'+'arityFacto'+'r\x20*\x20textur'+'eSampleBia'+'s({STD_SPE'+'CULARITYFA'+'CTOR_TEXTU'+'RE_NAME},\x20'+'{STD_SPECU'+'LARITYFACT'+'OR_TEXTURE'+'_NAME}Samp'+'ler,\x20{STD_'+'SPECULARIT'+'YFACTOR_TE'+'XTURE_UV},'+'\x20uniform.t'+'extureBias'+').{STD_SPE'+'CULARITYFA'+'CTOR_TEXTU'+'RE_CHANNEL'+'};\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULARIT'+'YFACTOR_VE'+'RTEX\x0a\x20\x20\x20\x20s'+'pecularity'+'Factor\x20=\x20s'+'pecularity'+'Factor\x20*\x20s'+'aturate(vV'+'ertexColor'+'.{STD_SPEC'+'ULARITYFAC'+'TOR_VERTEX'+'_CHANNEL})'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20dS'+'pecularity'+'Factor\x20=\x20s'+'pecularity'+'Factor;\x0a}\x0a',PI='\x0afn\x20getSpo'+'tEffect(li'+'ghtSpotDir'+':\x20vec3f,\x20l'+'ightInnerC'+'oneAngle:\x20'+'f32,\x20light'+'OuterConeA'+'ngle:\x20f32,'+'\x20lightDirN'+'orm:\x20vec3f'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20let\x20c'+'osAngle:\x20f'+'32\x20=\x20dot(l'+'ightDirNor'+'m,\x20lightSp'+'otDir);\x0a\x20\x20'+'\x20\x20return\x20s'+'moothstep('+'lightOuter'+'ConeAngle,'+'\x20lightInne'+'rConeAngle'+',\x20cosAngle'+');\x0a}',MI='\x0a\x20\x20\x20\x20nineS'+'licedUv\x20=\x20'+'vec2f(vUv0'+'.x,\x201.0\x20-\x20'+'vUv0.y);\x0a',DI='\x0a\x20\x20\x20\x20let\x20t'+'ileMask:\x20v'+'ec2f\x20=\x20ste'+'p(vMask,\x20v'+'ec2f(0.999'+'99));\x0a\x20\x20\x20\x20'+'let\x20tileSi'+'ze:\x20vec2f\x20'+'=\x200.5\x20*\x20(i'+'nnerOffset'+'.xy\x20+\x20inne'+'rOffset.zw'+');\x0a\x20\x20\x20\x20let'+'\x20tileScale'+':\x20vec2f\x20=\x20'+'vec2f(1.0)'+'\x20/\x20(vec2f('+'1.0)\x20-\x20til'+'eSize);\x0a\x20\x20'+'\x20\x20var\x20clam'+'pedUv:\x20vec'+'2f\x20=\x20mix(i'+'nnerOffset'+'.xy\x20*\x200.5,'+'\x20vec2f(1.0'+')\x20-\x20innerO'+'ffset.zw\x20*'+'\x200.5,\x20frac'+'t((vTiledU'+'v\x20-\x20tileSi'+'ze)\x20*\x20tile'+'Scale));\x0a\x20'+'\x20\x20\x20clamped'+'Uv\x20=\x20clamp'+'edUv\x20*\x20atl'+'asRect.zw\x20'+'+\x20atlasRec'+'t.xy;\x0a\x20\x20\x20\x20'+'var\x20nineSl'+'icedUv:\x20ve'+'c2f\x20=\x20vUv0'+'\x20*\x20tileMas'+'k\x20+\x20clampe'+'dUv\x20*\x20(vec'+'2f(1.0)\x20-\x20'+'tileMask);'+'\x0a\x20\x20\x20\x20nineS'+'licedUv.y\x20'+'=\x201.0\x20-\x20ni'+'neSlicedUv'+'.y;\x0a\x0a',II='\x0a\x0a\x20\x20\x20\x20//\x20g'+'lobals\x0a\x20\x20\x20'+'\x20var<priva'+'te>\x20dAlpha'+':\x20f32\x20=\x201.'+'0;\x0a\x0a\x20\x20\x20\x20//'+'\x20all\x20passe'+'s\x20handle\x20o'+'pacity\x0a\x20\x20\x20'+'\x20#if\x20LIT_B'+'LEND_TYPE\x20'+'!=\x20NONE\x20||'+'\x20defined(L'+'IT_ALPHA_T'+'EST)\x20||\x20de'+'fined(LIT_'+'ALPHA_TO_C'+'OVERAGE)\x20|'+'|\x20STD_OPAC'+'ITY_DITHER'+'\x20!=\x20NONE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20STD_OP'+'ACITY_TEXT'+'URE_ALLOCA'+'TE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20t'+'exture_opa'+'cityMap\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20texture'+'_opacityMa'+'pSampler\x20:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20FO'+'RWARD_PASS'+'\x20//\x20------'+'----------'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20globals'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar<private'+'>\x20dAlbedo:'+'\x20vec3f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var<'+'private>\x20d'+'NormalW:\x20v'+'ec3f;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var<pr'+'ivate>\x20dSp'+'ecularity:'+'\x20vec3f\x20=\x20v'+'ec3f(0.0,\x20'+'0.0,\x200.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar<private'+'>\x20dGlossin'+'ess:\x20f32\x20='+'\x200.0;\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_REFR'+'ACTION\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar<private'+'>\x20dTransmi'+'ssion:\x20f32'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var<pr'+'ivate>\x20dTh'+'ickness:\x20f'+'32;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_S'+'CENE_COLOR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20uSc'+'eneColorMa'+'p\x20:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20uSc'+'eneColorMa'+'pSampler\x20:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SCREE'+'N_SIZE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20uSc'+'reenSize:\x20'+'vec4f;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+('f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_TRANSFOR'+'MS\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var<p'+'rivate>\x20ma'+'trix_viewP'+'rojection:'+'\x20mat4x4f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var<priv'+'ate>\x20matri'+'x_model:\x20m'+'at4x4f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20paral'+'lax\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_HEIGHT_'+'MAP\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var<'+'private>\x20d'+'UvOffset:\x20'+'vec2f;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'DIFFUSE_TE'+'XTURE_ALLO'+'CATE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_heightM'+'ap\x20:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'heightMapS'+'ampler\x20:\x20s'+'ampler;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20diffus'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_DIFFUSE_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'diffuseMap'+'\x20:\x20texture'+'_2d<f32>;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_diffus'+'eMapSample'+'r\x20:\x20sample'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20STD_DI'+'FFUSEDETAI'+'L_TEXTURE_'+'ALLOCATE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_diffuse'+'DetailMap\x20'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_diffuse'+'DetailMapS'+'ampler\x20:\x20s'+'ampler;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20norma'+'l\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_NORMAL_TE'+'XTURE_ALLO'+'CATE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20texture_n'+'ormalMap\x20:'+'\x20texture_2'+'d<f32>;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20textur'+'e_normalMa'+'pSampler\x20:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20')+('\x20\x20\x20\x20#ifdef'+'\x20STD_NORMA'+'LDETAIL_TE'+'XTURE_ALLO'+'CATE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20texture_n'+'ormalDetai'+'lMap\x20:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'texture_no'+'rmalDetail'+'MapSampler'+'\x20:\x20sampler'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20r'+'efraction\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_T'+'HICKNESS_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'thicknessM'+'ap\x20:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20te'+'xture_thic'+'knessMapSa'+'mpler\x20:\x20sa'+'mpler;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_REFRACTIO'+'N_TEXTURE_'+'ALLOCATE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_refract'+'ionMap\x20:\x20t'+'exture_2d<'+'f32>;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'refraction'+'MapSampler'+'\x20:\x20sampler'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20i'+'ridescence'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20LIT_'+'IRIDESCENC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var<pr'+'ivate>\x20dIr'+'idescence:'+'\x20f32;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r<private>'+'\x20dIridesce'+'nceThickne'+'ss:\x20f32;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_IRIDESC'+'ENCE_THICK'+'NESS_TEXTU'+'RE_ALLOCAT'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'iridescenc'+'eThickness'+'Map\x20:\x20text'+'ure_2d<f32'+'>;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20texture'+'_iridescen'+'ceThicknes'+'sMapSample'+'r\x20:\x20sample'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20STD_IRIDE'+'SCENCE_TEX'+'TURE_ALLOC'+'ATE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20textur')+('e_iridesce'+'nceMap\x20:\x20t'+'exture_2d<'+'f32>;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_irides'+'cenceMapSa'+'mpler\x20:\x20sa'+'mpler;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_CLEARCOAT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var<pri'+'vate>\x20ccSp'+'ecularity:'+'\x20f32;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r<private>'+'\x20ccGlossin'+'ess:\x20f32;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var<priv'+'ate>\x20ccNor'+'malW:\x20vec3'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_GG'+'X_SPECULAR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var<pri'+'vate>\x20dAni'+'sotropy:\x20f'+'32;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var<'+'private>\x20d'+'Anisotropy'+'Rotation:\x20'+'vec2f;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20specul'+'arity\x20&\x20gl'+'ossiness\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SP'+'ECULAR_OR_'+'REFLECTION'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20she'+'en\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20LIT_SHEE'+'N\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r<private>'+'\x20sSpecular'+'ity:\x20vec3f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r<private>'+'\x20sGlossine'+'ss:\x20f32;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20STD_SHE'+'EN_TEXTURE'+'_ALLOCATE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20textur'+'e_sheenMap'+'\x20:\x20texture'+'_2d<f32>;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20textur'+'e_sheenMap'+'Sampler\x20:\x20'+'sampler;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_S'+'HEENGLOSS_'+'TEXTURE_AL'+'LOCATE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20texture_s'+'heenGlossM'+'ap\x20:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_sheenG'+'lossMapSam'+'pler\x20:\x20sam'+'pler;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20metaln'+'ess\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_MET'+'ALNESS\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var<pri'+'vate>\x20dMet'+'alness:\x20f3'+'2;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar<private'+'>\x20dIor:\x20f3'+'2;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_METALNESS'+'_TEXTURE_A'+'LLOCATE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'metalnessM'+'ap\x20:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_metaln'+'essMapSamp'+'ler\x20:\x20samp'+'ler;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20specula'+'rity\x20facto'+'r\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LARITY_FAC'+'TOR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var<privat'+'e>\x20dSpecul'+'arityFacto'+'r:\x20f32;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_SPEC'+'ULARITYFAC'+'TOR_TEXTUR'+'E_ALLOCATE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_specula'+'rityFactor'+'Map\x20:\x20text'+'ure_2d<f32'+'>;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_specu'+'larityFact'+'orMapSampl'+'er\x20:\x20sampl'+'er;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20specular'+'\x20color\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULAR_C'+'OLOR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_SPECULAR'+'_TEXTURE_A'+'LLOCATE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_')+('specularMa'+'p\x20:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_specula'+'rMapSample'+'r\x20:\x20sample'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20gloss\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'GLOSS_TEXT'+'URE_ALLOCA'+'TE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20texture'+'_glossMap\x20'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20t'+'exture_glo'+'ssMapSampl'+'er\x20:\x20sampl'+'er;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'ao\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_AO\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20<private>'+'\x20dAo:\x20f32;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_AO_TEX'+'TURE_ALLOC'+'ATE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'var\x20textur'+'e_aoMap\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_aoMap'+'Sampler\x20:\x20'+'sampler;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20STD'+'_AODETAIL_'+'TEXTURE_AL'+'LOCATE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_aoDet'+'ailMap\x20:\x20t'+'exture_2d<'+'f32>;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_aoDeta'+'ilMapSampl'+'er\x20:\x20sampl'+'er;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'emission\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20<private>'+'\x20dEmission'+':\x20vec3f;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20STD_EM'+'ISSIVE_TEX'+'TURE_ALLOC'+'ATE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'texture_em'+'issiveMap\x20'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20textu'+'re_emissiv'+'eMapSample'+'r\x20:\x20sample')+('r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'clearcoat\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_C'+'LEARCOAT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20ST'+'D_CLEARCOA'+'T_TEXTURE_'+'ALLOCATE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20t'+'exture_cle'+'arCoatMap\x20'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20t'+'exture_cle'+'arCoatMapS'+'ampler\x20:\x20s'+'ampler;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'CLEARCOATG'+'LOSS_TEXTU'+'RE_ALLOCAT'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'clearCoatG'+'lossMap\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_clear'+'CoatGlossM'+'apSampler\x20'+':\x20sampler;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_CLEARCO'+'ATNORMAL_T'+'EXTURE_ALL'+'OCATE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20text'+'ure_clearC'+'oatNormalM'+'ap\x20:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20texture_'+'clearCoatN'+'ormalMapSa'+'mpler\x20:\x20sa'+'mpler;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20anisotr'+'opy\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_GGX_SPE'+'CULAR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_A'+'NISOTROPY_'+'TEXTURE_AL'+'LOCATE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_aniso'+'tropyMap\x20:'+'\x20texture_2'+'d<f32>;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20te'+'xture_anis'+'otropyMapS'+'ampler\x20:\x20s'+'ampler;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20lightm'+'ap\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#if\x20defin'+'ed(STD_LIG'+'HTMAP)\x20||\x20')+('defined(ST'+'D_LIGHT_VE'+'RTEX_COLOR'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var<pr'+'ivate>\x20dLi'+'ghtmap:\x20ve'+'c3f;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20STD_LI'+'GHT_TEXTUR'+'E_ALLOCATE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20texture_l'+'ightMap\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20tex'+'ture_light'+'MapSampler'+'\x20:\x20sampler'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20//\x20front'+'\x20end\x20outpu'+'ts\x20to\x20lit\x20'+'shader\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22litShader'+'CorePS\x22\x0a'),LI='\x0a\x0a\x20\x20\x20\x20//\x20a'+'ll\x20passes\x20'+'handle\x20opa'+'city\x0a\x20\x20\x20\x20#'+'if\x20LIT_BLE'+'ND_TYPE\x20!='+'\x20NONE\x20||\x20d'+'efined(LIT'+'_ALPHA_TES'+'T)\x20||\x20defi'+'ned(LIT_AL'+'PHA_TO_COV'+'ERAGE)\x20||\x20'+'STD_OPACIT'+'Y_DITHER\x20!'+'=\x20NONE\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22opaci'+'tyPS\x22\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_ALPHA_TES'+'T)\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22alpha'+'TestPS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20dithe'+'ring\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#if\x20STD'+'_OPACITY_D'+'ITHER\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22opac'+'ityDitherP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20FORWARD_P'+'ASS\x20//\x20---'+'----------'+'---\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20para'+'llax\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'STD_HEIGHT'+'_MAP\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'allaxPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20diff'+'use\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x20\x22diffuse'+'PS\x22\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20norm'+'al\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_NEEDS_NO'+'RMAL\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22nor'+'malMapPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ref'+'raction\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_REF'+'RACTION\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'transmissi'+'onPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22th'+'icknessPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ir'+'idescence\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_I'+'RIDESCENCE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22iridesc'+'encePS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'iridescenc'+'eThickness'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+('\x20speculari'+'ty\x20&\x20gloss'+'iness\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20LIT_SPECU'+'LAR_OR_REF'+'LECTION\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20sheen\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_SHEEN\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22sheen'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'sheenGloss'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20m'+'etalness\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_METALNES'+'S\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22me'+'talnessPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22ior'+'PS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20s'+'pecularity'+'\x20factor\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_SPECULARI'+'TY_FACTOR\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22spec'+'ularityFac'+'torPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20specular'+'\x20color\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_'+'SPECULAR_C'+'OLOR\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22specularP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20fn\x20'+'getSpecula'+'rity()\x20{\x20\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'dSpeculari'+'ty\x20=\x20vec3f'+'(1.0,\x201.0,'+'\x201.0);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'gloss\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22gl'+'ossPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20ao\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20STD_AO\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22aoPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20emissi'+'on\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22emissiveP'+'S\x22\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20clear'+'coat\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20')+('LIT_CLEARC'+'OAT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22clea'+'rCoatPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22clearCoat'+'GlossPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22clearCoat'+'NormalPS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ani'+'sotropy\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(LI'+'T_SPECULAR'+')\x20&&\x20defin'+'ed(LIT_LIG'+'HTING)\x20&&\x20'+'defined(LI'+'T_GGX_SPEC'+'ULAR)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22an'+'isotropyPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20l'+'ightmap\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#if\x20'+'defined(ST'+'D_LIGHTMAP'+')\x20||\x20defin'+'ed(STD_LIG'+'HT_VERTEX_'+'COLOR)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22l'+'ightmapPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20fn\x20evalu'+'ateFronten'+'d()\x20{\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20al'+'l\x20passes\x20h'+'andle\x20opac'+'ity\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20LIT_'+'BLEND_TYPE'+'\x20!=\x20NONE\x20|'+'|\x20defined('+'LIT_ALPHA_'+'TEST)\x20||\x20d'+'efined(LIT'+'_ALPHA_TO_'+'COVERAGE)\x20'+'||\x20STD_OPA'+'CITY_DITHE'+'R\x20!=\x20NONE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getOpaci'+'ty();\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'if\x20defined'+'(LIT_ALPHA'+'_TEST)\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20alphaTe'+'st(dAlpha)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20ST'+'D_OPACITY_'+'DITHER\x20!=\x20'+'NONE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20opacityDi'+'ther(dAlph'+'a,\x200.0);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_o'+'pacity\x20=\x20d'+'Alpha;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20FO'+'RWARD_PASS'+'\x20//\x20------'+'----------'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20par')+('allax\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20STD_H'+'EIGHT_MAP\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20getP'+'arallax();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20diff'+'use\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20getA'+'lbedo();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_a'+'lbedo\x20=\x20dA'+'lbedo;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20normal\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_NEEDS_N'+'ORMAL\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getNorma'+'l();\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_w'+'orldNormal'+'\x20=\x20dNormal'+'W;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20re'+'fraction\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20LI'+'T_REFRACTI'+'ON\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'etRefracti'+'on();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'transmissi'+'on\x20=\x20dTran'+'smission;\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Thickness('+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_thi'+'ckness\x20=\x20d'+'Thickness;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20LIT_D'+'ISPERSION\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_di'+'spersion\x20='+'\x20uniform.m'+'aterial_di'+'spersion;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20ir'+'idescence\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20L'+'IT_IRIDESC'+'ENCE\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getIrides'+'cence();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20getIr'+'idescenceT'+'hickness()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_irid'+'escence_in'+'tensity\x20=\x20'+'dIridescen'+'ce;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'litArgs_ir'+'idescence_'+'thickness\x20'+'=\x20dIridesc'+'enceThickn'+'ess;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en')+('dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'specularit'+'y\x20&\x20glossi'+'ness\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SP'+'ECULAR_OR_'+'REFLECTION'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20sheen\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'LIT_SHEEN\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'getSheen()'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'sheen_spec'+'ularity\x20=\x20'+'sSpeculari'+'ty;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getShe'+'enGlossine'+'ss();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20litA'+'rgs_sheen_'+'gloss\x20=\x20sG'+'lossiness;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20metaln'+'ess\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20LIT'+'_METALNESS'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getMetaln'+'ess();\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_metal'+'ness\x20=\x20dMe'+'talness;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'etIor();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20l'+'itArgs_ior'+'\x20=\x20dIor;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20specular'+'ity\x20factor'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20LIT_SP'+'ECULARITY_'+'FACTOR\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Specularit'+'yFactor();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_s'+'pecularity'+'Factor\x20=\x20d'+'Specularit'+'yFactor;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20gloss\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20getGlo'+'ssiness();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'Specularit'+'y();\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20litArgs_s'+'pecularity'+'\x20=\x20dSpecul'+'arity;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs')+('_gloss\x20=\x20d'+'Glossiness'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20ao\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'TD_AO\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20getAO();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20lit'+'Args_ao\x20=\x20'+'dAo;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'emission\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getEmissi'+'on();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_emis'+'sion\x20=\x20dEm'+'ission;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20clearc'+'oat\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20LIT_CLE'+'ARCOAT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20getClea'+'rCoat();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20getCl'+'earCoatGlo'+'ssiness();'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20get'+'ClearCoatN'+'ormal();\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20litAr'+'gs_clearco'+'at_specula'+'rity\x20=\x20ccS'+'pecularity'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20li'+'tArgs_clea'+'rcoat_glos'+'s\x20=\x20ccGlos'+'siness;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20litArg'+'s_clearcoa'+'t_worldNor'+'mal\x20=\x20ccNo'+'rmalW;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20anisotro'+'py\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#if\x20d'+'efined(LIT'+'_SPECULAR)'+'\x20&&\x20define'+'d(LIT_LIGH'+'TING)\x20&&\x20d'+'efined(LIT'+'_GGX_SPECU'+'LAR)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getAnisot'+'ropy();\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20lightma'+'p\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#if\x20de'+'fined(STD_'+'LIGHTMAP)\x20'+'||\x20defined'+'(STD_LIGHT'+'_VERTEX_CO'+'LOR)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20getLightM'+'ap();\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20litArgs_'+'lightmap\x20='+'\x20dLightmap'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20STD_')+('LIGHTMAP_D'+'IR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20litArgs'+'_lightmapD'+'ir\x20=\x20dLigh'+'tmapDir;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'}\x0a'),RI='\x0a\x0a#ifdef\x20L'+'IT_TANGENT'+'S\x0a\x20\x20\x20\x20#def'+'ine\x20TBN_TA'+'NGENTS\x0a#el'+'se\x0a\x20\x20\x20\x20#if'+'\x20defined(L'+'IT_USE_NOR'+'MALS)\x20||\x20d'+'efined(LIT'+'_USE_CLEAR'+'COAT_NORMA'+'LS)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#define\x20'+'TBN_DERIVA'+'TIVES\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0a#if\x20d'+'efined(TBN'+'_DERIVATIV'+'ES)\x0a\x20\x20\x20\x20un'+'iform\x20tbnB'+'asis:\x20f32;'+'\x0a#endif\x0a\x0af'+'n\x20getTBN(t'+'angent:\x20ve'+'c3f,\x20binor'+'mal:\x20vec3f'+',\x20normal:\x20'+'vec3f)\x20{\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20TBN_TANGE'+'NTS\x20//\x20tan'+'gents\x20/\x20bi'+'normals\x20ba'+'sed\x20TBN\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dTB'+'N\x20=\x20mat3x3'+'f(normaliz'+'e(tangent)'+',\x20normaliz'+'e(binormal'+'),\x20normali'+'ze(normal)'+');\x0a\x0a\x20\x20\x20\x20#e'+'lif\x20define'+'d(TBN_DERI'+'VATIVES)\x20/'+'/\x20derivati'+'ves\x20based\x20'+'TBN\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20let\x20uv:'+'\x20vec2f\x20=\x20{'+'lightingUv'+'};\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20get\x20e'+'dge\x20vector'+'s\x20of\x20the\x20p'+'ixel\x20trian'+'gle\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20dp1:'+'\x20vec3f\x20=\x20d'+'pdx(\x20vPosi'+'tionW\x20);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20dp2:\x20vec3'+'f\x20=\x20dpdy(\x20'+'vPositionW'+'\x20);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20duv1'+':\x20vec2f\x20=\x20'+'dpdx(\x20uv\x20)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'let\x20duv2:\x20'+'vec2f\x20=\x20dp'+'dy(\x20uv\x20);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20solve\x20th'+'e\x20linear\x20s'+'ystem\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20dp'+'2perp:\x20vec'+'3f\x20=\x20cross'+'(\x20dp2,\x20nor'+'mal\x20);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20let\x20d'+'p1perp:\x20ve'+'c3f\x20=\x20cros'+'s(\x20normal,'+'\x20dp1\x20);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'T:\x20vec3f\x20='+'\x20dp2perp\x20*'+'\x20duv1.x\x20+\x20'+'dp1perp\x20*\x20'+'duv2.x;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'B:\x20vec3f\x20='+'\x20dp2perp\x20*'+'\x20duv1.y\x20+\x20'+('dp1perp\x20*\x20'+'duv2.y;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'construct\x20'+'a\x20scale-in'+'variant\x20fr'+'ame\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20deno'+'m:\x20f32\x20=\x20m'+'ax(\x20dot(T,'+'\x20T),\x20dot(B'+',\x20B)\x20);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'invmax:\x20f3'+'2\x20=\x20select'+'(uniform.t'+'bnBasis\x20/\x20'+'sqrt(\x20deno'+'m\x20),\x200.0,\x20'+'denom\x20==\x200'+'.0);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20dTBN\x20=\x20'+'mat3x3f(T\x20'+'*\x20invmax,\x20'+'-B\x20*\x20invma'+'x,\x20normal\x20'+');\x0a\x0a\x20\x20\x20\x20#e'+'lse\x20//\x20obj'+'ect\x20space\x20'+'TBN\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20B:\x20'+'vec3f\x20=\x20cr'+'oss(normal'+',\x20vObjectS'+'paceUpW);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20T:\x20vec3f'+'\x20=\x20cross(n'+'ormal,\x20B);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'if\x20(dot(B,'+'B)\x20==\x200.0)'+'\x20//\x20deal\x20w'+'ith\x20case\x20w'+'hen\x20vObjec'+'tSpaceUpW\x20'+'normal\x20are'+'\x20parallel\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20majo'+'r:\x20f32\x20=\x20m'+'ax(max(nor'+'mal.x,\x20nor'+'mal.y),\x20no'+'rmal.z);\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(norm'+'al.x\x20==\x20ma'+'jor)\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20B\x20=\x20c'+'ross(norma'+'l,\x20vec3f(0'+'.0,\x201.0,\x200'+'.0));\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20T\x20=\x20cros'+'s(normal,\x20'+'B);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'else\x20if\x20(n'+'ormal.y\x20=='+'\x20major)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20B\x20'+'=\x20cross(no'+'rmal,\x20vec3'+'f(0.0,\x200.0'+',\x201.0));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20T\x20=\x20c'+'ross(norma'+'l,\x20B);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20}'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20else\x20//'+'\x20removed\x20\x22'+'if\x20(normal'+'.z\x20==\x20majo'+'r)\x22\x20assumi'+'ng\x20it\x27s\x20th'+'e\x20only\x20rem'+'aining\x20cas'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20B\x20=\x20cros'+'s(normal,\x20'+'vec3f(1.0,'+'\x200.0,\x200.0)'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20T'+'\x20=\x20cross(n'+'ormal,\x20B);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20dTBN\x20='+'\x20mat3x3f(n'+'ormalize(T'+'),\x20normali'+'ze(B),\x20nor'+'malize(nor'+'mal));\x0a\x0a\x20\x20'+'\x20\x20#endif\x0a}'),OI='\x0a#ifdef\x20ST'+'D_THICKNES'+'S_CONSTANT'+'\x0auniform\x20m'+'aterial_th'+'ickness:\x20f'+'32;\x0a#endif'+'\x0a\x0afn\x20getTh'+'ickness()\x20'+'{\x0a\x20\x20\x20\x20dThi'+'ckness\x20=\x201'+'.0;\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'THICKNESS_'+'CONSTANT\x0a\x20'+'\x20\x20\x20dThickn'+'ess\x20=\x20dThi'+'ckness\x20*\x20u'+'niform.mat'+'erial_thic'+'kness;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'STD_THICKN'+'ESS_TEXTUR'+'E\x0a\x20\x20\x20\x20dThi'+'ckness\x20=\x20d'+'Thickness\x20'+'*\x20textureS'+'ampleBias('+'{STD_THICK'+'NESS_TEXTU'+'RE_NAME},\x20'+'{STD_THICK'+'NESS_TEXTU'+'RE_NAME}Sa'+'mpler,\x20{ST'+'D_THICKNES'+'S_TEXTURE_'+'UV},\x20unifo'+'rm.texture'+'Bias).{STD'+'_THICKNESS'+'_TEXTURE_C'+'HANNEL};\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STD_THIC'+'KNESS_VERT'+'EX\x0a\x20\x20\x20\x20dTh'+'ickness\x20=\x20'+'dThickness'+'\x20*\x20saturat'+'e(vVertexC'+'olor.{STD_'+'THICKNESS_'+'VERTEX_CHA'+'NNEL});\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a',FI='\x0a#if\x20(TONE'+'MAP\x20==\x20NON'+'E)\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ton'+'emappingNo'+'nePS\x22\x0a#eli'+'f\x20TONEMAP\x20'+'==\x20FILMIC\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22tonema'+'ppingFilmi'+'cPS\x22\x0a#elif'+'\x20TONEMAP\x20='+'=\x20LINEAR\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22tonemap'+'pingLinear'+'PS\x22\x0a#elif\x20'+'TONEMAP\x20=='+'\x20HEJL\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'tonemappin'+'gHejlPS\x22\x0a#'+'elif\x20TONEM'+'AP\x20==\x20ACES'+'\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22tonem'+'appingAces'+'PS\x22\x0a#elif\x20'+'TONEMAP\x20=='+'\x20ACES2\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22tonemappi'+'ngAces2PS\x22'+'\x0a#elif\x20TON'+'EMAP\x20==\x20NE'+'UTRAL\x0a\x20\x20\x20\x20'+'#include\x20\x22'+'tonemappin'+'gNeutralPS'+'\x22\x0a#endif\x0a',NI='\x0auniform\x20e'+'xposure:\x20f'+'32;\x0a\x0afn\x20to'+'neMap(colo'+'r:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20let\x20t'+'A:\x20f32\x20=\x202'+'.51;\x0a\x20\x20\x20\x20l'+'et\x20tB:\x20f32'+'\x20=\x200.03;\x0a\x20'+'\x20\x20\x20let\x20tC:'+'\x20f32\x20=\x202.4'+'3;\x0a\x20\x20\x20\x20let'+'\x20tD:\x20f32\x20='+'\x200.59;\x0a\x20\x20\x20'+'\x20let\x20tE:\x20f'+'32\x20=\x200.14;'+'\x0a\x20\x20\x20\x20let\x20x'+':\x20vec3f\x20=\x20'+'color\x20*\x20un'+'iform.expo'+'sure;\x0a\x20\x20\x20\x20'+'return\x20(x\x20'+'*\x20(tA\x20*\x20x\x20'+'+\x20tB))\x20/\x20('+'x\x20*\x20(tC\x20*\x20'+'x\x20+\x20tD)\x20+\x20'+'tE);\x0a}\x0a',kI='\x0auniform\x20e'+'xposure:\x20f'+'32;\x0a\x0a//\x20AC'+'ES\x20approxi'+'mation\x20by\x20'+'Stephen\x20Hi'+'ll\x0a\x0a//\x20sRG'+'B\x20=>\x20XYZ\x20='+'>\x20D65_2_D6'+'0\x20=>\x20AP1\x20='+'>\x20RRT_SAT\x0a'+'const\x20ACES'+'InputMat:\x20'+'mat3x3f\x20=\x20'+'mat3x3f(\x0a\x20'+'\x20\x20\x20vec3f(0'+'.59719,\x200.'+'35458,\x200.0'+'4823),\x0a\x20\x20\x20'+'\x20vec3f(0.0'+'7600,\x200.90'+'834,\x200.015'+'66),\x0a\x20\x20\x20\x20v'+'ec3f(0.028'+'40,\x200.1338'+'3,\x200.83777'+')\x0a);\x0a\x0a//\x20O'+'DT_SAT\x20=>\x20'+'XYZ\x20=>\x20D60'+'_2_D65\x20=>\x20'+'sRGB\x0aconst'+'\x20ACESOutpu'+'tMat:\x20mat3'+'x3f\x20=\x20mat3'+'x3f(\x0a\x20\x20\x20\x20v'+'ec3f(\x201.60'+'475,\x20-0.53'+'108,\x20-0.07'+'367),\x0a\x20\x20\x20\x20'+'vec3f(-0.1'+'0208,\x20\x201.1'+'0813,\x20-0.0'+'0605),\x0a\x20\x20\x20'+'\x20vec3f(-0.'+'00327,\x20-0.'+'07276,\x20\x201.'+'07602)\x0a);\x0a'+'\x0afn\x20RRTAnd'+'ODTFit(v:\x20'+'vec3f)\x20->\x20'+'vec3f\x20{\x0a\x20\x20'+'\x20\x20let\x20a:\x20v'+'ec3f\x20=\x20v\x20*'+'\x20(v\x20+\x20vec3'+'f(0.024578'+'6))\x20-\x20vec3'+'f(0.000090'+'537);\x0a\x20\x20\x20\x20'+'let\x20b:\x20vec'+'3f\x20=\x20v\x20*\x20('+'vec3f(0.98'+'3729)\x20*\x20v\x20'+'+\x20vec3f(0.'+'4329510))\x20'+'+\x20vec3f(0.'+'238081);\x0a\x20'+'\x20\x20\x20return\x20'+'a\x20/\x20b;\x0a}\x0a\x0a'+'fn\x20toneMap'+'(color:\x20ve'+'c3f)\x20->\x20ve'+'c3f\x20{\x0a\x20\x20\x20\x20'+'var\x20c:\x20vec'+'3f\x20=\x20color'+'\x20*\x20(unifor'+'m.exposure'+'\x20/\x200.6);\x0a\x20'+'\x20\x20\x20c\x20=\x20c\x20*'+'\x20ACESInput'+'Mat;\x0a\x0a\x20\x20\x20\x20'+'//\x20Apply\x20R'+'RT\x20and\x20ODT'+'\x0a\x20\x20\x20\x20c\x20=\x20R'+'RTAndODTFi'+'t(c);\x0a\x20\x20\x20\x20'+'c\x20=\x20c\x20*\x20AC'+'ESOutputMa'+'t;\x0a\x0a\x20\x20\x20\x20//'+'\x20Clamp\x20to\x20'+'[0,\x201]\x0a\x20\x20\x20'+'\x20return\x20cl'+'amp(c,\x20vec'+'3f(0.0),\x20v'+'ec3f(1.0))'+';\x0a}\x0a',UI='\x0aconst\x20A:\x20'+'f32\x20=\x200.15'+';\x0aconst\x20B:'+'\x20f32\x20=\x200.5'+'0;\x0aconst\x20C'+':\x20f32\x20=\x200.'+'10;\x0aconst\x20'+'D:\x20f32\x20=\x200'+'.20;\x0aconst'+'\x20E:\x20f32\x20=\x20'+'0.02;\x0acons'+'t\x20F:\x20f32\x20='+'\x200.30;\x0acon'+'st\x20W:\x20f32\x20'+'=\x2011.2;\x0a\x0au'+'niform\x20exp'+'osure:\x20f32'+';\x0a\x0afn\x20unch'+'arted2Tone'+'map(x:\x20vec'+'3f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20((x\x20'+'*\x20(A\x20*\x20x\x20+'+'\x20C\x20*\x20B)\x20+\x20'+'D\x20*\x20E)\x20/\x20('+'x\x20*\x20(A\x20*\x20x'+'\x20+\x20B)\x20+\x20D\x20'+'*\x20F))\x20-\x20ve'+'c3f(E\x20/\x20F)'+';\x0a}\x0a\x0afn\x20to'+'neMap(colo'+'r:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20var\x20c'+':\x20vec3f\x20=\x20'+'uncharted2'+'Tonemap(co'+'lor\x20*\x20unif'+'orm.exposu'+'re);\x0a\x20\x20\x20\x20l'+'et\x20whiteSc'+'ale:\x20vec3f'+'\x20=\x20vec3f(1'+'.0)\x20/\x20unch'+'arted2Tone'+'map(vec3f('+'W,\x20W,\x20W));'+'\x0a\x20\x20\x20\x20c\x20*=\x20'+'whiteScale'+';\x0a\x20\x20\x20\x20retu'+'rn\x20c;\x0a}\x0a',BI='\x0auniform\x20e'+'xposure:\x20f'+'32;\x0a\x0afn\x20to'+'neMap(colo'+'r:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20let\x20A'+':\x20f32\x20=\x200.'+'22;\x0a\x20\x20\x20\x20le'+'t\x20B:\x20f32\x20='+'\x200.3;\x0a\x20\x20\x20\x20'+'let\x20C:\x20f32'+'\x20=\x200.1;\x0a\x20\x20'+'\x20\x20let\x20D:\x20f'+'32\x20=\x200.2;\x0a'+'\x20\x20\x20\x20let\x20E:'+'\x20f32\x20=\x200.0'+'1;\x0a\x20\x20\x20\x20let'+'\x20F:\x20f32\x20=\x20'+'0.3;\x0a\x20\x20\x20\x20l'+'et\x20Scl:\x20f3'+'2\x20=\x201.25;\x0a'+'\x0a\x20\x20\x20\x20let\x20a'+'djusted_co'+'lor\x20=\x20colo'+'r\x20*\x20unifor'+'m.exposure'+';\x0a\x20\x20\x20\x20let\x20'+'h\x20=\x20max(ve'+'c3f(0.0),\x20'+'adjusted_c'+'olor\x20-\x20vec'+'3f(0.004))'+';\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20(h\x20*\x20('+'(Scl\x20*\x20A)\x20'+'*\x20h\x20+\x20Scl\x20'+'*\x20vec3f(C\x20'+'*\x20B))\x20+\x20Sc'+'l\x20*\x20vec3f('+'D\x20*\x20E))\x20/\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20(h\x20*\x20(A\x20*'+'\x20h\x20+\x20vec3f'+'(B))\x20+\x20vec'+'3f(D\x20*\x20F))'+'\x20-\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20Scl\x20*\x20'+'vec3f(E\x20/\x20'+'F);\x0a}\x0a',zI='\x0auniform\x20e'+'xposure:\x20f'+'32;\x0a\x0afn\x20to'+'neMap(colo'+'r:\x20vec3f)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20color\x20*\x20'+'uniform.ex'+'posure;\x0a}\x0a',VI='\x0auniform\x20e'+'xposure:\x20f'+'32;\x0a\x0afn\x20to'+'neMap(col:'+'\x20vec3f)\x20->'+'\x20vec3f\x20{\x0a\x20'+'\x20\x20\x20var\x20col'+'or\x20=\x20col\x20*'+'\x20uniform.e'+'xposure;\x0a\x0a'+'\x20\x20\x20\x20let\x20st'+'artCompres'+'sion\x20=\x200.8'+'\x20-\x200.04;\x0a\x20'+'\x20\x20\x20let\x20des'+'aturation\x20'+'=\x200.15;\x0a\x0a\x20'+'\x20\x20\x20let\x20x\x20='+'\x20min(color'+'.r,\x20min(co'+'lor.g,\x20col'+'or.b));\x0a\x20\x20'+'\x20\x20let\x20offs'+'et\x20=\x20selec'+'t(0.04,\x20x\x20'+'-\x206.25\x20*\x20x'+'\x20*\x20x,\x20x\x20<\x20'+'0.08);\x0a\x20\x20\x20'+'\x20color\x20-=\x20'+'vec3f(offs'+'et);\x0a\x0a\x20\x20\x20\x20'+'let\x20peak\x20='+'\x20max(color'+'.r,\x20max(co'+'lor.g,\x20col'+'or.b));\x0a\x20\x20'+'\x20\x20if\x20(peak'+'\x20<\x20startCo'+'mpression)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20co'+'lor;\x0a\x20\x20\x20\x20}'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'d\x20=\x201.0\x20-\x20'+'startCompr'+'ession;\x0a\x20\x20'+'\x20\x20let\x20newP'+'eak\x20=\x201.0\x20'+'-\x20d\x20*\x20d\x20/\x20'+'(peak\x20+\x20d\x20'+'-\x20startCom'+'pression);'+'\x0a\x20\x20\x20\x20color'+'\x20*=\x20newPea'+'k\x20/\x20peak;\x0a'+'\x0a\x20\x20\x20\x20let\x20g'+'\x20=\x201.0\x20-\x201'+'.0\x20/\x20(desa'+'turation\x20*'+'\x20(peak\x20-\x20n'+'ewPeak)\x20+\x20'+'1.0);\x0a\x20\x20\x20\x20'+'return\x20mix'+'(color,\x20ve'+'c3f(newPea'+'k),\x20vec3f('+'g));\x0a}\x0a',GI='\x0afn\x20toneMa'+'p(color:\x20v'+'ec3f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20return\x20co'+'lor;\x0a}\x0a',HI='\x0a#ifdef\x20PI'+'XELSNAP\x0a\x20\x20'+'\x20\x20uniform\x20'+'uScreenSiz'+'e:\x20vec4f;\x0a'+'#endif\x0a\x0a#i'+'fdef\x20SCREE'+'NSPACE\x0a\x20\x20\x20'+'\x20uniform\x20p'+'rojectionF'+'lipY:\x20f32;'+'\x0a#endif\x0a\x0af'+'n\x20evalWorl'+'dPosition('+'vertexPosi'+'tion:\x20vec3'+'f,\x20modelMa'+'trix:\x20mat4'+'x4f)\x20->\x20ve'+'c4f\x20{\x0a\x0a\x20\x20\x20'+'\x20var\x20local'+'Pos:\x20vec3f'+'\x20=\x20getLoca'+'lPosition('+'vertexPosi'+'tion);\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20N'+'INESLICED\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20//'+'\x20outer\x20and'+'\x20inner\x20ver'+'tices\x20are\x20'+'at\x20the\x20sam'+'e\x20position'+',\x20scale\x20bo'+'th\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20local'+'PosXZ:\x20vec'+'2f\x20=\x20local'+'Pos.xz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20loca'+'lPosXZ\x20=\x20l'+'ocalPosXZ\x20'+'*\x20uniform.'+'outerScale'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20offset'+'\x20inner\x20ver'+'tices\x20insi'+'de\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20(origi'+'nal\x20vertic'+'es\x20must\x20be'+'\x20in\x20[-1;1]'+'\x20range)\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'positiveUn'+'itOffset:\x20'+'vec2f\x20=\x20cl'+'amp(vertex'+'Position.x'+'z,\x20vec2f(0'+'.0),\x20vec2f'+'(1.0));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'negativeUn'+'itOffset:\x20'+'vec2f\x20=\x20cl'+'amp(-verte'+'xPosition.'+'xz,\x20vec2f('+'0.0),\x20vec2'+'f(1.0));\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20loc'+'alPosXZ\x20=\x20'+'localPosXZ'+'\x20+\x20(-posit'+'iveUnitOff'+'set\x20*\x20unif'+'orm.innerO'+'ffset.xy\x20+'+'\x20negativeU'+'nitOffset\x20'+'*\x20uniform.'+'innerOffse'+'t.zw)\x20*\x20ve'+'rtex_texCo'+'ord0.xy;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20dT'+'iledUvGlob'+'al\x20=\x20(loca'+'lPosXZ\x20-\x20u'+'niform.out'+'erScale\x20+\x20'+'uniform.in'+'nerOffset.'+'xy)\x20*\x20-0.5'+'\x20+\x201.0;\x20//'+'\x20uv\x20=\x20loca'+'l\x20pos\x20-\x20in'+('ner\x20corner'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'localPosXZ'+'\x20=\x20localPo'+'sXZ\x20*\x20-0.5'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'localPos\x20='+'\x20vec3f(loc'+'alPosXZ.x,'+'\x20localPosX'+'Z.y,\x20local'+'Pos.y);\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20var\x20po'+'sW:\x20vec4f\x20'+'=\x20modelMat'+'rix\x20*\x20vec4'+'f(localPos'+',\x201.0);\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SCREENSPAC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'posW\x20=\x20vec'+'4f(posW.xy'+',\x200.0,\x201.0'+');\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20posW'+';\x0a}\x0a\x0afn\x20ge'+'tPosition('+')\x20->\x20vec4f'+'\x20{\x0a\x0a\x20\x20\x20\x20dM'+'odelMatrix'+'\x20=\x20getMode'+'lMatrix();'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'posW:\x20vec4'+'f\x20=\x20evalWo'+'rldPositio'+'n(vertex_p'+'osition.xy'+'z,\x20dModelM'+'atrix);\x0a\x20\x20'+'\x20\x20dPositio'+'nW\x20=\x20posW.'+'xyz;\x0a\x0a\x20\x20\x20\x20'+'var\x20screen'+'Pos:\x20vec4f'+';\x0a\x20\x20\x20\x20#ifd'+'ef\x20UV1LAYO'+'UT\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'\x20=\x20vec4f(v'+'ertex_texC'+'oord1.xy\x20*'+'\x202.0\x20-\x201.0'+',\x200.5,\x201.0'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'.y\x20*=\x20-1.0'+';\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20SCR'+'EENSPACE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'\x20=\x20posW;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20screenPos'+'.y\x20*=\x20unif'+'orm.projec'+'tionFlipY;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20scr'+'eenPos\x20=\x20u'+'niform.mat'+'rix_viewPr'+'ojection\x20*'+'\x20posW;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20PI'+'XELSNAP\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20snap\x20ve'+'rtex\x20to\x20a\x20'+'pixel\x20boun'+'dary\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20scr'+'eenPos.xy\x20'+'=\x20(screenP'+'os.xy\x20*\x200.'+'5)\x20+\x200.5;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20screenPo'+'s.xy\x20*=\x20un'+'iforms.uSc'+'reenSize.x'+'y;\x0a\x20\x20\x20\x20\x20\x20\x20')+('\x20\x20\x20\x20\x20scree'+'nPos.xy\x20=\x20'+'floor(scre'+'enPos.xy);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20screenP'+'os.xy\x20*=\x20u'+'niforms.uS'+'creenSize.'+'zw;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20scre'+'enPos.xy\x20='+'\x20(screenPo'+'s.xy\x20*\x202.0'+')\x20-\x201.0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'return\x20scr'+'eenPos;\x0a}\x0a'+'\x0afn\x20getWor'+'ldPosition'+'()\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20re'+'turn\x20dPosi'+'tionW;\x0a}\x0a'),WI='\x0a\x0a\x20\x20\x20\x20attr'+'ibute\x20vert'+'ex_positio'+'n:\x20vec4f;\x0a'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20matrix_'+'viewProjec'+'tion:\x20mat4'+'x4f;\x0a\x20\x20\x20\x20u'+'niform\x20mat'+'rix_model:'+'\x20mat4x4f;\x0a'+'\x20\x20\x20\x20\x0a\x20\x20\x20\x20#'+'ifdef\x20MORP'+'HING\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20morph_te'+'x_params:\x20'+'vec2f;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20attri'+'bute\x20morph'+'_vertex_id'+':\x20u32;\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20fn\x20g'+'etTextureM'+'orphCoords'+'()\x20->\x20vec2'+'i\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'turn\x20morph'+'_vertex_id'+'\x20into\x20int\x20'+'grid\x20coord'+'inates\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20texture'+'Size:\x20vec2'+'i\x20=\x20vec2i('+'uniform.mo'+'rph_tex_pa'+'rams);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20morphGr'+'idV:\x20i32\x20='+'\x20i32(morph'+'_vertex_id'+')\x20/\x20textur'+'eSize.x;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20morph'+'GridU:\x20i32'+'\x20=\x20i32(mor'+'ph_vertex_'+'id)\x20-\x20(mor'+'phGridV\x20*\x20'+'textureSiz'+'e.x);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20mo'+'rphGridV\x20='+'\x20textureSi'+'ze.y\x20-\x20mor'+'phGridV\x20-\x20'+'1;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20vec2i(mo'+'rphGridU,\x20'+'morphGridV'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20M'+'ORPHING_PO'+'SITION\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20MORP'+'HING_INT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20aabbSiz'+'e:\x20vec3f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20unif'+'orm\x20aabbMi'+'n:\x20vec3f;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'morphPosit'+'ionTex:\x20te'+'xture_2d<u'+'32>;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20morphPo'+'sitionTex:'+'\x20texture_2'+'d<f32>;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20#end'+('if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20defin'+'ed(BATCH)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22sk'+'inBatchVS\x22'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'fn\x20getMode'+'lMatrix()\x20'+'->\x20mat4x4f'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20getBoneM'+'atrix(vert'+'ex_boneInd'+'ices);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20#elif\x20de'+'fined(SKIN'+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'skinVS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20fn\x20g'+'etModelMat'+'rix()\x20->\x20m'+'at4x4f\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20un'+'iform.matr'+'ix_model\x20*'+'\x20getSkinMa'+'trix(verte'+'x_boneIndi'+'ces,\x20verte'+'x_boneWeig'+'hts);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20'+'\x20#elif\x20def'+'ined(INSTA'+'NCING)\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22tran'+'sformInsta'+'ncingVS\x22\x0a\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20f'+'n\x20getModel'+'Matrix()\x20-'+'>\x20mat4x4f\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20uniform.m'+'atrix_mode'+'l;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'fn\x20getLoca'+'lPosition('+'vertexPosi'+'tion:\x20vec3'+'f)\x20->\x20vec3'+'f\x20{\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20loc'+'alPos:\x20vec'+'3f\x20=\x20verte'+'xPosition;'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20MOR'+'PHING_POSI'+'TION\x0a\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20morphUV:'+'\x20vec2i\x20=\x20g'+'etTextureM'+'orphCoords'+'();\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20MORPHI'+'NG_INT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20Use\x20'+'textureLoa'+'d\x20instead\x20'+'of\x20texelFe'+'tch.\x20Coord'+'inates\x20mus'+'t\x20be\x20integ'+'er\x20type\x20(v'+'ec2i).\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20WGSL'+'\x20requires\x20'+'explicit\x20t'+'ype\x20conver'+'sion\x20for\x20v'+'ectors.\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20Div'+'ision\x20by\x20f'+'loat\x20liter')+('al\x20ensures'+'\x20floating\x20'+'point\x20divi'+'sion.\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20var\x20morp'+'hPos:\x20vec3'+'f\x20=\x20vec3f('+'textureLoa'+'d(morphPos'+'itionTex,\x20'+'morphUV,\x200'+').xyz)\x20/\x206'+'5535.0\x20*\x20u'+'niform.aab'+'bSize\x20+\x20un'+'iform.aabb'+'Min;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20Use\x20text'+'ureLoad\x20in'+'stead\x20of\x20t'+'exelFetch.'+'\x20Coordinat'+'es\x20must\x20be'+'\x20integer\x20t'+'ype\x20(vec2i'+').\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20morphPo'+'s:\x20vec3f\x20='+'\x20textureLo'+'ad(morphPo'+'sitionTex,'+'\x20morphUV,\x20'+'0).xyz;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'localPos\x20+'+'=\x20morphPos'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20localP'+'os;\x0a\x20\x20\x20\x20}\x0a'),$I='\x0a\x0aattribut'+'e\x20instance'+'_line1:\x20ve'+'c4f;\x0aattri'+'bute\x20insta'+'nce_line2:'+'\x20vec4f;\x0aat'+'tribute\x20in'+'stance_lin'+'e3:\x20vec4f;'+'\x0aattribute'+'\x20instance_'+'line4:\x20vec'+'4f;\x0a\x0afn\x20ge'+'tModelMatr'+'ix()\x20->\x20ma'+'t4x4f\x20{\x0a\x20\x20'+'\x20\x20return\x20u'+'niform.mat'+'rix_model\x20'+'*\x20mat4x4f('+'instance_l'+'ine1,\x20inst'+'ance_line2'+',\x20instance'+'_line3,\x20in'+'stance_lin'+'e4);\x0a}\x0a',XI='\x0a\x0a#ifdef\x20S'+'TD_REFRACT'+'ION_CONSTA'+'NT\x0a\x20\x20\x20\x20uni'+'form\x20mater'+'ial_refrac'+'tion:\x20f32;'+'\x0a#endif\x0a\x0af'+'n\x20getRefra'+'ction()\x20{\x0a'+'\x20\x20\x20\x20var\x20re'+'fraction:\x20'+'f32\x20=\x201.0;'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_REF'+'RACTION_CO'+'NSTANT\x0a\x20\x20\x20'+'\x20refractio'+'n\x20=\x20unifor'+'m.material'+'_refractio'+'n;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STD_'+'REFRACTION'+'_TEXTURE\x0a\x20'+'\x20\x20\x20refract'+'ion\x20=\x20refr'+'action\x20*\x20t'+'extureSamp'+'leBias({ST'+'D_REFRACTI'+'ON_TEXTURE'+'_NAME},\x20{S'+'TD_REFRACT'+'ION_TEXTUR'+'E_NAME}Sam'+'pler,\x20{STD'+'_REFRACTIO'+'N_TEXTURE_'+'UV},\x20unifo'+'rm.texture'+'Bias).{STD'+'_REFRACTIO'+'N_TEXTURE_'+'CHANNEL};\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20STD_REF'+'RACTION_VE'+'RTEX\x0a\x20\x20\x20\x20r'+'efraction\x20'+'=\x20refracti'+'on\x20*\x20satur'+'ate(vVerte'+'xColor.{ST'+'D_REFRACTI'+'ON_VERTEX_'+'CHANNEL});'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20dTr'+'ansmission'+'\x20=\x20refract'+'ion;\x0a}\x0a',qI='\x0auniform\x20t'+'woSidedLig'+'htingNegSc'+'aleFactor:'+'\x20f32;\x0a\x0afn\x20'+'handleTwoS'+'idedLighti'+'ng()\x20{\x0a\x20\x20\x20'+'\x20dTBN[2]\x20='+'\x20dTBN[2]\x20*'+'\x20select(-u'+'niform.two'+'SidedLight'+'ingNegScal'+'eFactor,\x20u'+'niform.two'+'SidedLight'+'ingNegScal'+'eFactor,\x20p'+'cFrontFaci'+'ng);\x0a}\x0a',jI='\x0a#ifdef\x20NI'+'NESLICED\x0a\x20'+'\x20\x20\x20fn\x20getU'+'v0()\x20->\x20ve'+'c2f\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20uv'+'\x20=\x20vertex_'+'position.x'+'z;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20//\x20offse'+'t\x20inner\x20ve'+'rtices\x20ins'+'ide\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20let\x20posi'+'tiveUnitOf'+'fset\x20=\x20cla'+'mp(vertex_'+'position.x'+'z,\x20vec2f(0'+'.0,\x200.0),\x20'+'vec2f(1.0,'+'\x201.0));\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'negativeUn'+'itOffset\x20='+'\x20clamp(-ve'+'rtex_posit'+'ion.xz,\x20ve'+'c2f(0.0,\x200'+'.0),\x20vec2f'+'(1.0,\x201.0)'+');\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20uv\x20=\x20uv\x20'+'+\x20((-posit'+'iveUnitOff'+'set\x20*\x20unif'+'orm.innerO'+'ffset.xy)\x20'+'+\x20(negativ'+'eUnitOffse'+'t\x20*\x20unifor'+'m.innerOff'+'set.zw))\x20*'+'\x20vertex_te'+'xCoord0.xy'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uv\x20=\x20uv\x20*'+'\x20-0.5\x20+\x20ve'+'c2f(0.5,\x200'+'.5);\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20uv\x20=\x20uv'+'\x20*\x20uniform'+'.atlasRect'+'.zw\x20+\x20unif'+'orm.atlasR'+'ect.xy;\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20dMa'+'skGlobal\x20='+'\x20vertex_te'+'xCoord0.xy'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20uv'+';\x0a\x20\x20\x20\x20}\x0a#e'+'lse\x0a\x20\x20\x20\x20fn'+'\x20getUv0()\x20'+'->\x20vec2f\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20vert'+'ex_texCoor'+'d0;\x0a\x20\x20\x20\x20}\x0a'+'#endif\x0a',YI='\x0afn\x20getUv1'+'()\x20->\x20vec2'+'f\x20{\x0a\x20\x20\x20\x20re'+'turn\x20verte'+'x_texCoord'+'1;\x0a}\x0a',KI='\x0aoutput.vU'+'V{TRANSFOR'+'M_UV_{i}}_'+'{TRANSFORM'+'_ID_{i}}\x20='+'\x20vec2f(\x0a\x20\x20'+'\x20\x20dot(vec3'+'f(uv{TRANS'+'FORM_UV_{i'+'}},\x201),\x20un'+'iform.{TRA'+'NSFORM_NAM'+'E_{i}}0),\x0a'+'\x20\x20\x20\x20dot(ve'+'c3f(uv{TRA'+'NSFORM_UV_'+'{i}},\x201),\x20'+'uniform.{T'+'RANSFORM_N'+'AME_{i}}1)'+'\x0a);\x0a',ZI='\x0a\x20\x20\x20\x20unifo'+'rm\x20{TRANSF'+'ORM_NAME_{'+'i}}0:\x20vec3'+'f;\x0a\x20\x20\x20\x20uni'+'form\x20{TRAN'+'SFORM_NAME'+'_{i}}1:\x20ve'+'c3f;\x0a',QI='\x0afn\x20getVie'+'wDir()\x20{\x0a\x20'+'\x20\x20\x20dViewDi'+'rW\x20=\x20norma'+'lize(unifo'+'rm.view_po'+'sition\x20-\x20v'+'PositionW)'+';\x0a}\x0a',JI={'alphaTestPS':Q2,'ambientPS':J2,'anisotropyPS':eM,'aoPS':tM,'aoDiffuseOccPS':sM,'aoSpecOccPS':iM,'bakeDirLmEndPS':rM,'bakeLmEndPS':aM,'basePS':nM,'baseNineSlicedPS':oM,'baseNineSlicedTiledPS':lM,'bayerPS':cM,'blurVSMPS':hM,'clearCoatPS':dM,'clearCoatGlossPS':fM,'clearCoatNormalPS':uM,'clusteredLightCookiesPS':mM,'clusteredLightShadowsPS':_M,'clusteredLightUtilsPS':pM,'clusteredLightPS':gM,'combinePS':SM,'cookieBlit2DPS':yM,'cookieBlitCubePS':vM,'cookieBlitVS':xM,'cubeMapProjectPS':TM,'cubeMapRotatePS':wM,'debugOutputPS':EM,'debugProcessFrontendPS':bM,'detailModesPS':CM,'diffusePS':PM,'decodePS':AM,'emissivePS':MM,'encodePS':DM,'endPS':IM,'envAtlasPS':LM,'envProcPS':RM,'falloffInvSquaredPS':OM,'falloffLinearPS':FM,'floatAsUintPS':NM,'fogPS':kM,'fresnelSchlickPS':UM,'frontendCodePS':'','frontendDeclPS':'','fullscreenQuadVS':BM,'gammaPS':zM,'glossPS':VM,'gsplatCenterVS':GM,'gsplatCornerVS':QM,'gsplatColorVS':HM,'gsplatCommonVS':WM,'gsplatCompressedDataVS':$M,'gsplatCompressedSHVS':XM,'gsplatEvalSHVS':qM,'gsplatQuatToMat3VS':jM,'gsplatSogsColorVS':YM,'gsplatSogsDataVS':KM,'gsplatSogsSHVS':ZM,'gsplatDataVS':JM,'gsplatOutputVS':eD,'gsplatPS':tD,'gsplatSHVS':sD,'gsplatSourceVS':iD,'gsplatVS':rD,'quadVS':aD,'indirectCoreCS':nD,'immediateLinePS':oD,'immediateLineVS':lD,'iridescenceDiffractionPS':cD,'iridescencePS':hD,'iridescenceThicknessPS':dD,'iorPS':fD,'lightDeclarationPS':uD,'lightDiffuseLambertPS':pD,'lightDirPointPS':mD,'lightEvaluationPS':_D,'lightFunctionLightPS':gD,'lightFunctionShadowPS':SD,'lightingPS':yD,'lightmapAddPS':vD,'lightmapPS':xD,'lightSpecularAnisoGGXPS':TD,'lightSpecularBlinnPS':wD,'lightSheenPS':ED,'linearizeDepthPS':bD,'litForwardBackendPS':AD,'litForwardDeclarationPS':CD,'litForwardMainPS':PD,'litForwardPostCodePS':MD,'litForwardPreCodePS':DD,'litMainPS':ID,'litMainVS':LD,'litOtherMainPS':RD,'litShaderArgsPS':OD,'litShaderCorePS':FD,'litShadowMainPS':ND,'litUserDeclarationPS':'','litUserDeclarationVS':'','litUserCodePS':'','litUserCodeVS':'','litUserMainStartPS':'','litUserMainStartVS':'','litUserMainEndPS':'','litUserMainEndVS':'','ltcPS':kD,'metalnessPS':UD,'metalnessModulatePS':zD,'morphPS':VD,'morphVS':GD,'msdfPS':BD,'msdfVS':HD,'normalVS':WD,'normalCoreVS':$D,'normalMapPS':XD,'opacityPS':qD,'opacityDitherPS':jD,'outputPS':YD,'outputAlphaPS':KD,'outputTex2DPS':ZD,'sheenPS':QD,'sheenGlossPS':JD,'parallaxPS':eI,'pickPS':tI,'reflDirPS':sI,'reflDirAnisoPS':iI,'reflectionCCPS':rI,'reflectionCubePS':aI,'reflectionEnvHQPS':nI,'reflectionEnvPS':oI,'reflectionSpherePS':lI,'reflectionSheenPS':cI,'refractionCubePS':hI,'refractionDynamicPS':dI,'reprojectPS':fI,'reprojectVS':uI,'screenDepthPS':pI,'shadowCascadesPS':mI,'shadowEVSMPS':_I,'shadowPCF1PS':gI,'shadowPCF3PS':SI,'shadowPCF5PS':yI,'shadowSoftPS':vI,'skinBatchVS':xI,'skinVS':TI,'skyboxPS':wI,'skyboxVS':EI,'specularPS':bI,'sphericalPS':AI,'specularityFactorPS':CI,'spotPS':PI,'startNineSlicedPS':MI,'startNineSlicedTiledPS':DI,'stdDeclarationPS':II,'stdFrontEndPS':LI,'TBNPS':RI,'thicknessPS':OI,'tonemappingPS':FI,'tonemappingAcesPS':NI,'tonemappingAces2PS':kI,'tonemappingFilmicPS':UI,'tonemappingHejlPS':BI,'tonemappingLinearPS':zI,'tonemappingNeutralPS':VI,'tonemappingNonePS':GI,'transformVS':HI,'transformCoreVS':WI,'transformInstancingVS':$I,'transmissionPS':XI,'twoSidedLightingPS':qI,'uv0VS':jI,'uv1VS':YI,'uvTransformVS':KI,'uvTransformUniformsPS':ZI,'viewDirPS':QI,'webgpuPS':$y,'webgpuVS':Xy},ea=class ea extends me{constructor(_0x49b678){super(),h(this,'_batcher',null),h(this,'_destroyRe'+'quested',!(-0xd*-0x8+-0xf13+-0x1*-0xeac)),h(this,'_inFrameUp'+'date',!(-0x267+0x17*0x15d+0x1cf3*-0x1)),h(this,'_libraries'+'Loaded',!(-0x17b5+-0x16*0x19c+0x3b1e)),h(this,'_fillMode',Tg),h(this,'_resolutio'+'nMode',MC),h(this,'_allowResi'+'ze',!(0x118a+-0x2ae*-0x6+-0xd*0x296)),h(this,'_skyboxAss'+'et',null),h(this,'_soundMana'+'ger'),h(this,'_visibilit'+'yChangeHan'+'dler'),h(this,'_entityInd'+'ex',{}),h(this,'_inTools',!(-0xc95*-0x1+-0x1*0x1871+-0xbdd*-0x1)),h(this,'_scriptPre'+'fix',''),h(this,'_time',-0x1061+-0xf0d*-0x1+0x4*0x55),h(this,'enableBund'+'les',typeof TextDecoder<'u'),h(this,'frameReque'+'stId'),h(this,'timeScale',-0x1b4f+-0x152f+0x1*0x307f),h(this,'maxDeltaTi'+'me',-0x12fe+0x187d*0x1+-0x57f+0.1),h(this,'frame',0x1*0x2+-0x24fc+-0x127d*-0x2),h(this,'frameGraph',new DC()),h(this,'renderer'),h(this,'scriptsOrd'+'er',[]),h(this,'stats'),h(this,'autoRender',!(-0x1*-0x249b+-0xa8b*0x1+-0x116*0x18)),h(this,'renderNext'+'Frame',!(-0x346+-0x23d5+0x271c*0x1)),h(this,'graphicsDe'+'vice'),h(this,'root'),h(this,'scene'),h(this,'lightmappe'+'r',null),h(this,'loader',new Cn(this)),h(this,'assets'),h(this,'bundles'),h(this,'scenes',new qC(this)),h(this,'scripts',new HC(this)),h(this,'systems',new BC()),h(this,'i18n',new wa(this)),h(this,'keyboard',null),h(this,'mouse',null),h(this,'touch',null),h(this,'gamepads',null),h(this,'elementInp'+'ut',null),h(this,'xr',null),((hn==null?void(0x1abe+-0x1af8+0x1d*0x2):hn['indexOf']('$'))<-0x1df5+-0x2008+0x3dfd&&w['log']('Powered\x20by'+'\x20PlayCanva'+'s\x20'+hn+'\x20'+$S),ea['_applicati'+'ons'][_0x49b678['id']]=this,_u(this),this['root']=new lt(),this['root']['_enabledIn'+'Hierarchy']=!(0x156b+0xa*0xa0+-0x1bab));}['init'](_0x55cd02){const {assetPrefix:_0x47b591,batchManager:_0x2ab69c,componentSystems:_0x4484f3,elementInput:_0x1e94ce,gamepads:_0x4b0a58,graphicsDevice:_0x4c1c26,keyboard:_0x5755e5,lightmapper:_0x32704b,mouse:_0x4f54c3,resourceHandlers:_0x11a960,scriptsOrder:_0xd74f19,scriptPrefix:_0x5e97e2,soundManager:_0xc5def,touch:_0x244a3e,xr:_0x546a85}=_0x55cd02;w['assert'](_0x4c1c26,'The\x20applic'+'ation\x20cann'+'ot\x20be\x20crea'+'ted\x20withou'+'t\x20a\x20valid\x20'+'GraphicsDe'+'vice'),this['graphicsDe'+'vice']=_0x4c1c26,Pe['get'](_0x4c1c26,Fe)['add'](Z2),Pe['get'](_0x4c1c26,it)['add'](JI),this['_initDefau'+'ltMaterial'](),this['_initProgr'+'amLibrary'](),this['stats']=new jC(_0x4c1c26),this['_soundMana'+'ger']=_0xc5def,this['scene']=new Et(_0x4c1c26),this['_registerS'+'ceneImmedi'+'ate'](this['scene']),this['assets']=new mn(this['loader']),_0x47b591&&(this['assets']['prefix']=_0x47b591),this['bundles']=new UC(this['assets']),this['scriptsOrd'+'er']=_0xd74f19||[],this['defaultLay'+'erWorld']=new Ot({'name':'World','id':er}),this['defaultLay'+'erDepth']=new Ot({'name':'Depth','id':ps,'enabled':!(0x18df*0x1+-0x35*-0x1f+-0x1f49),'opaqueSortMode':Yc}),this['defaultLay'+'erSkybox']=new Ot({'name':'Skybox','id':Kp,'opaqueSortMode':Yc}),this['defaultLay'+'erUi']=new Ot({'name':'UI','id':Il,'transparentSortMode':jw}),this['defaultLay'+'erImmediat'+'e']=new Ot({'name':'Immediate','id':Zp,'opaqueSortMode':Yc});const _0x3bf2c3=new du('default');_0x3bf2c3['pushOpaque'](this['defaultLay'+'erWorld']),_0x3bf2c3['pushOpaque'](this['defaultLay'+'erDepth']),_0x3bf2c3['pushOpaque'](this['defaultLay'+'erSkybox']),_0x3bf2c3['pushTransp'+'arent'](this['defaultLay'+'erWorld']),_0x3bf2c3['pushOpaque'](this['defaultLay'+'erImmediat'+'e']),_0x3bf2c3['pushTransp'+'arent'](this['defaultLay'+'erImmediat'+'e']),_0x3bf2c3['pushTransp'+'arent'](this['defaultLay'+'erUi']),this['scene']['layers']=_0x3bf2c3,ia['createPlac'+'eholder'](_0x4c1c26),this['renderer']=new fl(_0x4c1c26),this['renderer']['scene']=this['scene'],_0x32704b&&(this['lightmappe'+'r']=new _0x32704b(_0x4c1c26,this['root'],this['scene'],this['renderer'],this['assets']),this['once']('prerender',this['_firstBake'],this)),_0x2ab69c&&(this['_batcher']=new _0x2ab69c(_0x4c1c26,this['root'],this['scene']),this['once']('prerender',this['_firstBatc'+'h'],this)),this['keyboard']=_0x5755e5||null,this['mouse']=_0x4f54c3||null,this['touch']=_0x244a3e||null,this['gamepads']=_0x4b0a58||null,_0x1e94ce&&(this['elementInp'+'ut']=_0x1e94ce,this['elementInp'+'ut']['app']=this),this['xr']=_0x546a85?new _0x546a85(this):null,this['elementInp'+'ut']&&this['elementInp'+'ut']['attachSele'+'ctEvents'](),this['_scriptPre'+'fix']=_0x5e97e2||'',this['enableBund'+'les']&&this['loader']['addHandler']('bundle',new VC(this)),_0x11a960['forEach'](_0x135fc2=>{const _0x342c87=new _0x135fc2(this);this['loader']['addHandler'](_0x342c87['handlerTyp'+'e'],_0x342c87);}),_0x4484f3['forEach'](_0x26a80f=>{this['systems']['add'](new _0x26a80f(this));}),this['_visibilit'+'yChangeHan'+'dler']=this['onVisibili'+'tyChange']['bind'](this),typeof document<'u'&&(document['hidden']!==void(0x4*0x1a8+-0x2693+0x1ff3)?(this['_hiddenAtt'+'r']='hidden',document['addEventLi'+'stener']('visibility'+'change',this['_visibilit'+'yChangeHan'+'dler'],!(-0xf91+0x45*0x15+0x9e9))):document['mozHidden']!==void(0x2707+0x1*-0x150b+0x47f*-0x4)?(this['_hiddenAtt'+'r']='mozHidden',document['addEventLi'+'stener']('mozvisibil'+'itychange',this['_visibilit'+'yChangeHan'+'dler'],!(0x241a*0x1+-0x9*0x53+-0x89*0x3e))):document['msHidden']!==void(-0xabf*0x3+0x1262+0xddb)?(this['_hiddenAtt'+'r']='msHidden',document['addEventLi'+'stener']('msvisibili'+'tychange',this['_visibilit'+'yChangeHan'+'dler'],!(0x1f94+0x278*-0xb+-0x46b))):document['webkitHidd'+'en']!==void(-0x5*-0x2f+-0xb1*0x33+0x4e8*0x7)&&(this['_hiddenAtt'+'r']='webkitHidd'+'en',document['addEventLi'+'stener']('webkitvisi'+'bilitychan'+'ge',this['_visibilit'+'yChangeHan'+'dler'],!(-0xd*0x10d+0x155d+-0x3*0x291)))),this['tick']=eL(this);}static['getApplica'+'tion'](_0x1d0830){return _0x1d0830?ea['_applicati'+'ons'][_0x1d0830]:Ms();}['_initDefau'+'ltMaterial'](){const _0x52fb8d=new Ut();_0x52fb8d['name']='Default\x20Ma'+'terial',xE(this['graphicsDe'+'vice'],_0x52fb8d);}['_initProgr'+'amLibrary'](){const _0x575663=new qA(this['graphicsDe'+'vice'],new Ut());cE(this['graphicsDe'+'vice'],_0x575663);}get['soundManag'+'er'](){return this['_soundMana'+'ger'];}get['batcher'](){return w['assert'](this['_batcher'],'BatchManag'+'er\x20has\x20not'+'\x20been\x20crea'+'ted\x20and\x20is'+'\x20required\x20'+'for\x20correc'+'t\x20function'+'ality.'),this['_batcher'];}get['fillMode'](){return this['_fillMode'];}get['resolution'+'Mode'](){return this['_resolutio'+'nMode'];}['configure'](_0xf08f9,_0x124637){ot['get'](_0xf08f9,(_0x54f3fb,_0x19676b)=>{if(_0x54f3fb){_0x124637(_0x54f3fb);return;}const _0x4d8829=_0x19676b['applicatio'+'n_properti'+'es'],_0x1a24a4=_0x19676b['scenes'],_0x19d6e6=_0x19676b['assets'];this['_parseAppl'+'icationPro'+'perties'](_0x4d8829,_0x352209=>{this['_parseScen'+'es'](_0x1a24a4),this['_parseAsse'+'ts'](_0x19d6e6),_0x124637(_0x352209||null);});});}['preload'](_0x1d12e0){this['fire']('preload:st'+'art');const _0x1fa17a=this['assets']['list']({'preload':!(-0x94*-0x13+-0x88e+-0x26e)});if(_0x1fa17a['length']===-0x5cb+-0x93a+0xf05){this['fire']('preload:en'+'d'),_0x1d12e0();return;}let _0x3cbc04=-0x1a51+0x26b3+0x5*-0x27a;const _0x5415ae=()=>{_0x3cbc04++,this['fire']('preload:pr'+'ogress',_0x3cbc04/_0x1fa17a['length']),_0x3cbc04===_0x1fa17a['length']&&(this['fire']('preload:en'+'d'),_0x1d12e0());};_0x1fa17a['forEach'](_0x4131f9=>{_0x4131f9['loaded']?_0x5415ae():(_0x4131f9['once']('load',_0x5415ae),_0x4131f9['once']('error',_0x5415ae),this['assets']['load'](_0x4131f9));});}['_preloadSc'+'ripts'](_0x4c4bc8,_0x2d7c49){_0x2d7c49();}['_parseAppl'+'icationPro'+'perties'](_0xb067be,_0x3acc5d){if(typeof _0xb067be['maxAssetRe'+'tries']=='number'&&_0xb067be['maxAssetRe'+'tries']>-0x7f*-0x3f+-0xcce+-0x1273&&this['loader']['enableRetr'+'y'](_0xb067be['maxAssetRe'+'tries']),_0xb067be['useDeviceP'+'ixelRatio']||(_0xb067be['useDeviceP'+'ixelRatio']=_0xb067be['use_device'+'_pixel_rat'+'io']),_0xb067be['resolution'+'Mode']||(_0xb067be['resolution'+'Mode']=_0xb067be['resolution'+'_mode']),_0xb067be['fillMode']||(_0xb067be['fillMode']=_0xb067be['fill_mode']),this['_width']=_0xb067be['width'],this['_height']=_0xb067be['height'],_0xb067be['useDeviceP'+'ixelRatio']&&(this['graphicsDe'+'vice']['maxPixelRa'+'tio']=window['devicePixe'+'lRatio']),this['setCanvasR'+'esolution'](_0xb067be['resolution'+'Mode'],this['_width'],this['_height']),this['setCanvasF'+'illMode'](_0xb067be['fillMode'],this['_width'],this['_height']),_0xb067be['layers']&&_0xb067be['layerOrder']){const _0x227a19=new du('applicatio'+'n'),_0x2ac453={};for(const _0x54f434 in _0xb067be['layers']){const _0x11b70c=_0xb067be['layers'][_0x54f434];_0x11b70c['id']=parseInt(_0x54f434,0xa*-0xb+-0x443*0x2+0x8fe),_0x11b70c['enabled']=_0x11b70c['id']!==ps,_0x2ac453[_0x54f434]=new Ot(_0x11b70c);}for(let _0x116f21=-0x1df8+-0x1*-0x2104+0x186*-0x2,_0x56b3c2=_0xb067be['layerOrder']['length'];_0x116f21<_0x56b3c2;_0x116f21++){const _0x1e6555=_0xb067be['layerOrder'][_0x116f21],_0x127d67=_0x2ac453[_0x1e6555['layer']];_0x127d67&&(_0x1e6555['transparen'+'t']?_0x227a19['pushTransp'+'arent'](_0x127d67):_0x227a19['pushOpaque'](_0x127d67),_0x227a19['subLayerEn'+'abled'][_0x116f21]=_0x1e6555['enabled']);}this['scene']['layers']=_0x227a19;}if(_0xb067be['batchGroup'+'s']){const _0x7c82a2=this['batcher'];if(_0x7c82a2)for(let _0x571788=-0x1a77+-0x26*-0x40+0x10f7,_0x55a3f9=_0xb067be['batchGroup'+'s']['length'];_0x571788<_0x55a3f9;_0x571788++){const _0x19885f=_0xb067be['batchGroup'+'s'][_0x571788];_0x7c82a2['addGroup'](_0x19885f['name'],_0x19885f['dynamic'],_0x19885f['maxAabbSiz'+'e'],_0x19885f['id'],_0x19885f['layers']);}}_0xb067be['i18nAssets']&&(this['i18n']['assets']=_0xb067be['i18nAssets']),this['_loadLibra'+'ries'](_0xb067be['libraries'],_0x3acc5d);}['_loadLibra'+'ries'](_0x461388,_0x349bf6){const _0x20d57a=_0x461388['length'];let _0x463995=_0x20d57a;const _0x4df975=/^https?:\/\//;if(_0x20d57a){const _0x2b547c=(_0xf6b2a9,_0x4393a3)=>{_0x463995--,_0xf6b2a9?_0x349bf6(_0xf6b2a9):_0x463995===0x1508+-0x19a7+-0xa9*-0x7&&(this['onLibrarie'+'sLoaded'](),_0x349bf6(null));};for(let _0x4a90ee=0x26*0x2b+-0x2007+-0x1*-0x19a5;_0x4a90ee<_0x20d57a;++_0x4a90ee){let _0x52a3a7=_0x461388[_0x4a90ee];!_0x4df975['test'](_0x52a3a7['toLowerCas'+'e']())&&this['_scriptPre'+'fix']&&(_0x52a3a7=xe['join'](this['_scriptPre'+'fix'],_0x52a3a7)),this['loader']['load'](_0x52a3a7,'script',_0x2b547c);}}else this['onLibrarie'+'sLoaded'](),_0x349bf6(null);}['_parseScen'+'es'](_0x4d45a0){if(_0x4d45a0){for(let _0x3d258b=0x11a*-0x22+-0x623+0x2b97;_0x3d258b<_0x4d45a0['length'];_0x3d258b++)this['scenes']['add'](_0x4d45a0[_0x3d258b]['name'],_0x4d45a0[_0x3d258b]['url']);}}['_parseAsse'+'ts'](_0x51fd8d){const _0x46a61c=[],_0x4c7309={},_0x259174={};for(let _0xac25=-0xb01+0x45a+0x6a7;_0xac25<this['scriptsOrd'+'er']['length'];_0xac25++){const _0x48b10b=this['scriptsOrd'+'er'][_0xac25];_0x51fd8d[_0x48b10b]&&(_0x4c7309[_0x48b10b]=!(-0x2142+0xf59*-0x2+0x3ff4),_0x46a61c['push'](_0x51fd8d[_0x48b10b]));}if(this['enableBund'+'les']){for(const _0xc27dad in _0x51fd8d)_0x51fd8d[_0xc27dad]['type']==='bundle'&&(_0x259174[_0xc27dad]=!(0x19db+0x64*0x55+-0x3b0f),_0x46a61c['push'](_0x51fd8d[_0xc27dad]));}for(const _0x4a4181 in _0x51fd8d)_0x4c7309[_0x4a4181]||_0x259174[_0x4a4181]||_0x46a61c['push'](_0x51fd8d[_0x4a4181]);for(let _0xaa8aff=0x1*-0xc76+0x73+0xc03;_0xaa8aff<_0x46a61c['length'];_0xaa8aff++){const _0x32b252=_0x46a61c[_0xaa8aff],_0x3f3f00=new pe(_0x32b252['name'],_0x32b252['type'],_0x32b252['file'],_0x32b252['data']);if(_0x3f3f00['id']=parseInt(_0x32b252['id'],0x6*0x2c0+0x1df*-0x5+-0x71b),_0x3f3f00['preload']=_0x32b252['preload']?_0x32b252['preload']:!(-0xe*0xb+-0x7c3+0x33*0x2a),_0x3f3f00['loaded']=_0x32b252['type']==='script'&&_0x32b252['data']&&_0x32b252['data']['loadingTyp'+'e']>-0x38*0x6+0x7fa+-0x2*0x355,_0x3f3f00['tags']['add'](_0x32b252['tags']),_0x32b252['i18n']){for(const _0x2ec124 in _0x32b252['i18n'])_0x3f3f00['addLocaliz'+'edAssetId'](_0x2ec124,_0x32b252['i18n'][_0x2ec124]);}this['assets']['add'](_0x3f3f00);}}['start'](){w['call'](()=>{w['assert'](!this['_alreadySt'+'arted'],'The\x20applic'+'ation\x20can\x20'+'be\x20started'+'\x20only\x20one\x20'+'time.'),this['_alreadySt'+'arted']=!(-0x207f+0x19ad+0x6d2);}),this['frame']=-0x1*0xdd2+0x22e9+-0x1517,this['fire']('start',{'timestamp':de(),'target':this}),this['_libraries'+'Loaded']||this['onLibrarie'+'sLoaded'](),this['systems']['fire']('initialize',this['root']),this['fire']('initialize'),this['systems']['fire']('postInitia'+'lize',this['root']),this['systems']['fire']('postPostIn'+'itialize',this['root']),this['fire']('postinitia'+'lize'),this['tick']();}['inputUpdat'+'e'](_0x40a8b6){this['controller']&&this['controller']['update'](_0x40a8b6),this['mouse']&&this['mouse']['update'](),this['keyboard']&&this['keyboard']['update'](),this['gamepads']&&this['gamepads']['update']();}['update'](_0x5a21ed){this['frame']++,this['graphicsDe'+'vice']['update'](),this['stats']['frame']['updateStar'+'t']=de(),this['systems']['fire'](this['_inTools']?'toolsUpdat'+'e':'update',_0x5a21ed),this['systems']['fire']('animationU'+'pdate',_0x5a21ed),this['systems']['fire']('postUpdate',_0x5a21ed),this['fire']('update',_0x5a21ed),this['inputUpdat'+'e'](_0x5a21ed),this['stats']['frame']['updateTime']=de()-this['stats']['frame']['updateStar'+'t'];}['render'](){this['updateCanv'+'asSize'](),this['graphicsDe'+'vice']['frameStart'](),this['stats']['frame']['renderStar'+'t']=de(),this['fire']('prerender'),this['root']['syncHierar'+'chy'](),this['_batcher']&&this['_batcher']['updateAll'](),fl['_skipRende'+'rCounter']=0xfbd+-0x8d*0x13+0x9*-0x96,this['renderComp'+'osition'](this['scene']['layers']),this['fire']('postrender'),this['stats']['frame']['renderTime']=de()-this['stats']['frame']['renderStar'+'t'],this['graphicsDe'+'vice']['frameEnd']();}['renderComp'+'osition'](_0x9b4bf7){Q['clearGpuMa'+'rkers'](),this['renderer']['update'](_0x9b4bf7),this['renderer']['buildFrame'+'Graph'](this['frameGraph'],_0x9b4bf7),this['frameGraph']['render'](this['graphicsDe'+'vice']);}['_fillFrame'+'StatsBasic'](_0xceaf66,_0x214250,_0x331dad){const _0x1b7246=this['stats']['frame'];_0x1b7246['dt']=_0x214250,_0x1b7246['ms']=_0x331dad,_0xceaf66>_0x1b7246['_timeToCou'+'ntFrames']?(_0x1b7246['fps']=_0x1b7246['_fpsAccum'],_0x1b7246['_fpsAccum']=0x19e9+-0x3f9+-0x15f0,_0x1b7246['_timeToCou'+'ntFrames']=_0xceaf66+(-0x40f+-0x4c4+0xcbb*0x1)):_0x1b7246['_fpsAccum']++,this['stats']['drawCalls']['total']=this['graphicsDe'+'vice']['_drawCalls'+'PerFrame'],this['graphicsDe'+'vice']['_drawCalls'+'PerFrame']=-0x43f*0x6+-0x7ab*0x2+-0x51a*-0x8;}['_fillFrame'+'Stats'](){let _0xdc9e54=this['stats']['frame'];_0xdc9e54['cameras']=this['renderer']['_camerasRe'+'ndered'],_0xdc9e54['materials']=this['renderer']['_materialS'+'witches'],_0xdc9e54['shaders']=this['graphicsDe'+'vice']['_shaderSwi'+'tchesPerFr'+'ame'],_0xdc9e54['shadowMapU'+'pdates']=this['renderer']['_shadowMap'+'Updates'],_0xdc9e54['shadowMapT'+'ime']=this['renderer']['_shadowMap'+'Time'],_0xdc9e54['depthMapTi'+'me']=this['renderer']['_depthMapT'+'ime'],_0xdc9e54['forwardTim'+'e']=this['renderer']['_forwardTi'+'me'];const _0x4d298f=this['graphicsDe'+'vice']['_primsPerF'+'rame'];_0xdc9e54['triangles']=_0x4d298f[js]/(0x1c62+-0x22af+0x650)+Math['max'](_0x4d298f[Er]-(-0xe*-0x21b+0x23*0xc6+-0x388a),0x12aa+-0x2549+0x129f*0x1)+Math['max'](_0x4d298f[oa]-(0x7d2+0x166f+-0x3*0xa15),-0x6*0x4eb+-0x1*0x14d5+-0x731*-0x7),_0xdc9e54['cullTime']=this['renderer']['_cullTime'],_0xdc9e54['sortTime']=this['renderer']['_sortTime'],_0xdc9e54['skinTime']=this['renderer']['_skinTime'],_0xdc9e54['morphTime']=this['renderer']['_morphTime'],_0xdc9e54['lightClust'+'ers']=this['renderer']['_lightClus'+'ters'],_0xdc9e54['lightClust'+'ersTime']=this['renderer']['_lightClus'+'tersTime'],_0xdc9e54['otherPrimi'+'tives']=-0x1307+0x1ccc+-0x1*0x9c5;for(let _0xb2ff4e=-0x496*0x7+-0xf2c+-0x3*-0xfc2;_0xb2ff4e<_0x4d298f['length'];_0xb2ff4e++)_0xb2ff4e<js&&(_0xdc9e54['otherPrimi'+'tives']+=_0x4d298f[_0xb2ff4e]),_0x4d298f[_0xb2ff4e]=0x1d34+-0x35*0x45+0x3*-0x4f9;this['renderer']['_camerasRe'+'ndered']=-0x172b*-0x1+0xdf8+-0x2523,this['renderer']['_materialS'+'witches']=-0x1cb+-0x54*0x3+0x2c7,this['renderer']['_shadowMap'+'Updates']=-0xe7*0x1f+-0x1bfe*-0x1+-0x5,this['graphicsDe'+'vice']['_shaderSwi'+'tchesPerFr'+'ame']=-0x11e8+0x18d1*0x1+-0x1*0x6e9,this['renderer']['_cullTime']=-0xcb*-0xb+0x123*-0x12+0x259*0x5,this['renderer']['_layerComp'+'ositionUpd'+'ateTime']=0x42*-0x67+0x23ef+-0x961,this['renderer']['_lightClus'+'tersTime']=-0xf2*-0x1e+-0x42f+-0x182d,this['renderer']['_sortTime']=0x1aa6+-0x32f*-0x5+-0x2a91,this['renderer']['_skinTime']=-0x1191+0x1*-0x1ee5+0x3076,this['renderer']['_morphTime']=-0x1dfa+-0xb*0x381+0x4485,this['renderer']['_shadowMap'+'Time']=0x838+0xef4+-0x172c,this['renderer']['_depthMapT'+'ime']=-0xeb*-0x17+0x58*0x59+0xd9*-0x3d,this['renderer']['_forwardTi'+'me']=-0xd*0x20b+-0x1*0x482+0x1f11*0x1,_0xdc9e54=this['stats']['drawCalls'],_0xdc9e54['forward']=this['renderer']['_forwardDr'+'awCalls'],_0xdc9e54['culled']=this['renderer']['_numDrawCa'+'llsCulled'],_0xdc9e54['depth']=-0x3a9*-0x1+0x2*0x1375+0x15*-0x207,_0xdc9e54['shadow']=this['renderer']['_shadowDra'+'wCalls'],_0xdc9e54['skinned']=this['renderer']['_skinDrawC'+'alls'],_0xdc9e54['immediate']=-0xb*0x230+-0x694*-0x2+0xae8,_0xdc9e54['instanced']=-0x268b+0x4*-0x5b+0xd*0x313,_0xdc9e54['removedByI'+'nstancing']=0xfce+-0x4*0x62b+0x8de,_0xdc9e54['misc']=_0xdc9e54['total']-(_0xdc9e54['forward']+_0xdc9e54['shadow']),this['renderer']['_depthDraw'+'Calls']=0x145c*-0x1+-0x32e*0x9+0x30fa,this['renderer']['_shadowDra'+'wCalls']=-0xd01*0x3+0xc22+0x1ae1,this['renderer']['_forwardDr'+'awCalls']=0x1300+-0x53b*0x1+0x8d*-0x19,this['renderer']['_numDrawCa'+'llsCulled']=-0x1115+-0x1f16+0x302b,this['renderer']['_skinDrawC'+'alls']=0x14+0x1*0x1841+0x1*-0x1855,this['renderer']['_immediate'+'Rendered']=0x359*-0x1+-0x1840+0x1b99,this['renderer']['_instanced'+'DrawCalls']=0x605*0x4+-0xb9a+-0xc7a,this['stats']['misc']['renderTarg'+'etCreation'+'Time']=this['graphicsDe'+'vice']['renderTarg'+'etCreation'+'Time'],_0xdc9e54=this['stats']['particles'],_0xdc9e54['updatesPer'+'Frame']=_0xdc9e54['_updatesPe'+'rFrame'],_0xdc9e54['frameTime']=_0xdc9e54['_frameTime'],_0xdc9e54['_updatesPe'+'rFrame']=-0x16*0x1be+-0xa0a*0x1+0x52*0x97,_0xdc9e54['_frameTime']=-0x1*-0x182d+-0x3*0x2ad+-0x2b1*0x6;}['setCanvasF'+'illMode'](_0x13d544,_0x13c75b,_0x350190){this['_fillMode']=_0x13d544,this['resizeCanv'+'as'](_0x13c75b,_0x350190);}['setCanvasR'+'esolution'](_0xa205cb,_0x1d9d02,_0x42f96b){this['_resolutio'+'nMode']=_0xa205cb,_0xa205cb===wg&&_0x1d9d02===void(0x1*0x12d4+0x2119*-0x1+0xe45*0x1)&&(_0x1d9d02=this['graphicsDe'+'vice']['canvas']['clientWidt'+'h'],_0x42f96b=this['graphicsDe'+'vice']['canvas']['clientHeig'+'ht']),this['graphicsDe'+'vice']['resizeCanv'+'as'](_0x1d9d02,_0x42f96b);}['isHidden'](){return document[this['_hiddenAtt'+'r']];}['onVisibili'+'tyChange'](){this['isHidden']()?this['_soundMana'+'ger']&&this['_soundMana'+'ger']['suspend']():this['_soundMana'+'ger']&&this['_soundMana'+'ger']['resume']();}['resizeCanv'+'as'](_0x1ded2f,_0x398265){if(!this['_allowResi'+'ze']||this['xr']&&this['xr']['session'])return;const _0x532388=window['innerWidth'],_0x1a9fc1=window['innerHeigh'+'t'];if(this['_fillMode']===Tg){const _0x5478fb=this['graphicsDe'+'vice']['canvas']['width']/this['graphicsDe'+'vice']['canvas']['height'],_0x22cdd8=_0x532388/_0x1a9fc1;_0x5478fb>_0x22cdd8?(_0x1ded2f=_0x532388,_0x398265=_0x1ded2f/_0x5478fb):(_0x398265=_0x1a9fc1,_0x1ded2f=_0x398265*_0x5478fb);}else this['_fillMode']===PC&&(_0x1ded2f=_0x532388,_0x398265=_0x1a9fc1);return this['graphicsDe'+'vice']['canvas']['style']['width']=_0x1ded2f+'px',this['graphicsDe'+'vice']['canvas']['style']['height']=_0x398265+'px',this['updateCanv'+'asSize'](),{'width':_0x1ded2f,'height':_0x398265};}['updateCanv'+'asSize'](){var _0x5e1565;if(!(!this['_allowResi'+'ze']||(_0x5e1565=this['xr'])!=null&&_0x5e1565['active'])&&this['_resolutio'+'nMode']===wg){const _0x56b952=this['graphicsDe'+'vice']['canvas'];this['graphicsDe'+'vice']['resizeCanv'+'as'](_0x56b952['clientWidt'+'h'],_0x56b952['clientHeig'+'ht']);}}['onLibrarie'+'sLoaded'](){this['_libraries'+'Loaded']=!(-0x1e75+-0xda*0x3+0x2103*0x1),this['systems']['rigidbody']&&this['systems']['rigidbody']['onLibraryL'+'oaded']();}['applyScene'+'Settings'](_0x53102c){let _0x5e9484;if(this['systems']['rigidbody']&&typeof Ammo<'u'){const [_0x256e4f,_0x410821,_0x3f04ea]=_0x53102c['physics']['gravity'];this['systems']['rigidbody']['gravity']['set'](_0x256e4f,_0x410821,_0x3f04ea);}this['scene']['applySetti'+'ngs'](_0x53102c),_0x53102c['render']['hasOwnProp'+'erty']('skybox')&&(_0x53102c['render']['skybox']?(_0x5e9484=this['assets']['get'](_0x53102c['render']['skybox']),_0x5e9484?this['setSkybox'](_0x5e9484):this['assets']['once']('add:'+_0x53102c['render']['skybox'],this['setSkybox'],this)):this['setSkybox'](null));}['setAreaLig'+'htLuts'](_0x3b2184,_0x47a350){_0x3b2184&&_0x47a350?ia['set'](this['graphicsDe'+'vice'],_0x3b2184,_0x47a350):w['warn']('setAreaLig'+'htLuts:\x20LU'+'Ts\x20for\x20are'+'a\x20light\x20ar'+'e\x20not\x20vali'+'d');}['setSkybox'](_0x3901fc){if(_0x3901fc!==this['_skyboxAss'+'et']){const _0x4a0c21=()=>{this['setSkybox'](null);},_0x10e827=()=>{this['scene']['setSkybox'](this['_skyboxAss'+'et']?this['_skyboxAss'+'et']['resources']:null);};this['_skyboxAss'+'et']&&(this['assets']['off']('load:'+this['_skyboxAss'+'et']['id'],_0x10e827,this),this['assets']['off']('remove:'+this['_skyboxAss'+'et']['id'],_0x4a0c21,this),this['_skyboxAss'+'et']['off']('change',_0x10e827,this)),this['_skyboxAss'+'et']=_0x3901fc,this['_skyboxAss'+'et']&&(this['assets']['on']('load:'+this['_skyboxAss'+'et']['id'],_0x10e827,this),this['assets']['once']('remove:'+this['_skyboxAss'+'et']['id'],_0x4a0c21,this),this['_skyboxAss'+'et']['on']('change',_0x10e827,this),this['scene']['skyboxMip']===-0x1c5c+-0x25a7+0x1601*0x3&&!this['_skyboxAss'+'et']['loadFaces']&&(this['_skyboxAss'+'et']['loadFaces']=!(0x1998+0x2454+0x6*-0xa52)),this['assets']['load'](this['_skyboxAss'+'et'])),_0x10e827();}}['_firstBake'](){var _0x5554a1;(_0x5554a1=this['lightmappe'+'r'])==null||_0x5554a1['bake'](null,this['scene']['lightmapMo'+'de']);}['_firstBatc'+'h'](){var _0x548da3;(_0x548da3=this['batcher'])==null||_0x548da3['generate']();}['_processTi'+'mestamp'](_0x2b1e45){return _0x2b1e45;}['drawLine'](_0x30fdb5,_0x35a303,_0x17cd0d,_0x347e19,_0x571bee){this['scene']['drawLine'](_0x30fdb5,_0x35a303,_0x17cd0d,_0x347e19,_0x571bee);}['drawLines'](_0x38aeab,_0x4c733e,_0x28a101=!(-0x7*0x508+-0xf05+-0x1*-0x323d),_0x316efe=this['scene']['defaultDra'+'wLayer']){this['scene']['drawLines'](_0x38aeab,_0x4c733e,_0x28a101,_0x316efe);}['drawLineAr'+'rays'](_0x4038b6,_0x5b914b,_0x25e6a0=!(0x1ff1+-0x3*-0x393+-0x2aaa),_0x3a9584=this['scene']['defaultDra'+'wLayer']){this['scene']['drawLineAr'+'rays'](_0x4038b6,_0x5b914b,_0x25e6a0,_0x3a9584);}['drawWireSp'+'here'](_0x45bc38,_0x4579fd,_0x3f75e8=ie['WHITE'],_0xebf1b2=-0x1b*0x8+0x1c0e+0x12e*-0x17,_0x36a188=!(-0x10db+0x9f*0x11+0x64c),_0x3106df=this['scene']['defaultDra'+'wLayer']){this['scene']['immediate']['drawWireSp'+'here'](_0x45bc38,_0x4579fd,_0x3f75e8,_0xebf1b2,_0x36a188,_0x3106df);}['drawWireAl'+'ignedBox'](_0x1b5240,_0x167991,_0x1a715c=ie['WHITE'],_0x434f6f=!(-0x25ff+-0x196d+0x3f6c),_0x3578a7=this['scene']['defaultDra'+'wLayer'],_0x205689){this['scene']['immediate']['drawWireAl'+'ignedBox'](_0x1b5240,_0x167991,_0x1a715c,_0x434f6f,_0x3578a7,_0x205689);}['drawMeshIn'+'stance'](_0x5546ce,_0x24c319=this['scene']['defaultDra'+'wLayer']){this['scene']['immediate']['drawMesh'](null,null,null,_0x5546ce,_0x24c319);}['drawMesh'](_0x393a2c,_0x393145,_0x902782,_0x157a88=this['scene']['defaultDra'+'wLayer']){this['scene']['immediate']['drawMesh'](_0x393145,_0x902782,_0x393a2c,null,_0x157a88);}['drawQuad'](_0x3f5e8e,_0x5c25ac,_0x28ba92=this['scene']['defaultDra'+'wLayer']){this['scene']['immediate']['drawMesh'](_0x5c25ac,_0x3f5e8e,this['scene']['immediate']['getQuadMes'+'h'](),null,_0x28ba92);}['drawTextur'+'e'](_0x5a0ef1,_0x201bfb,_0x5eebfb,_0x419328,_0x123344,_0x653cb8,_0x5505aa=this['scene']['defaultDra'+'wLayer'],_0x387a9a=!(-0x1d40+0x5*0xeb+0x18a9)){if(_0x387a9a===!(-0x273*-0x7+-0x1d00+0xbdc)&&!this['graphicsDe'+'vice']['isWebGPU'])return;const _0x2aca28=new te();_0x2aca28['setTRS'](new D(_0x5a0ef1,_0x201bfb,0x7e8+-0x9*-0x2a9+-0x107*0x1f),le['IDENTITY'],new D(_0x5eebfb,-_0x419328,0x625*0x6+-0x16a*0xc+-0x13e6*0x1)),_0x653cb8||(_0x653cb8=new Xn(),_0x653cb8['cull']=bt,_0x653cb8['setParamet'+'er']('colorMap',_0x123344),_0x653cb8['shaderDesc']=_0x387a9a?this['scene']['immediate']['getTexture'+'ShaderDesc'](_0x123344['encoding']):this['scene']['immediate']['getUnfilte'+'rableTextu'+'reShaderDe'+'sc'](),_0x653cb8['update']()),this['drawQuad'](_0x2aca28,_0x653cb8,_0x5505aa);}['drawDepthT'+'exture'](_0x3f39fd,_0x3fe24,_0x4648f7,_0x4c9067,_0x46413a=this['scene']['defaultDra'+'wLayer']){const _0x31f147=new Xn();_0x31f147['cull']=bt,_0x31f147['shaderDesc']=this['scene']['immediate']['getDepthTe'+'xtureShade'+'rDesc'](),_0x31f147['update'](),this['drawTextur'+'e'](_0x3f39fd,_0x3fe24,_0x4648f7,_0x4c9067,null,_0x31f147,_0x46413a);}['destroy'](){var _0x504a79,_0x2e88f6,_0x35c389,_0x508464;if(this['_inFrameUp'+'date']){this['_destroyRe'+'quested']=!(-0x24c7+-0x10da+0x35a1);return;}const _0x3b032b=this['graphicsDe'+'vice']['canvas']['id'];this['fire']('destroy',this),this['off']('librariesl'+'oaded'),typeof document<'u'&&(document['removeEven'+'tListener']('visibility'+'change',this['_visibilit'+'yChangeHan'+'dler'],!(-0x1b79+-0x4f+0x1bc9)),document['removeEven'+'tListener']('mozvisibil'+'itychange',this['_visibilit'+'yChangeHan'+'dler'],!(-0x1bcb+-0xfce*0x1+0x2b9a)),document['removeEven'+'tListener']('msvisibili'+'tychange',this['_visibilit'+'yChangeHan'+'dler'],!(0x1db4+0x26a4+-0x1*0x4457)),document['removeEven'+'tListener']('webkitvisi'+'bilitychan'+'ge',this['_visibilit'+'yChangeHan'+'dler'],!(-0x112e+0x1*0x5dd+0xb52))),this['_visibilit'+'yChangeHan'+'dler']=null,this['root']['destroy'](),this['root']=null,this['mouse']&&(this['mouse']['off'](),this['mouse']['detach'](),this['mouse']=null),this['keyboard']&&(this['keyboard']['off'](),this['keyboard']['detach'](),this['keyboard']=null),this['touch']&&(this['touch']['off'](),this['touch']['detach'](),this['touch']=null),this['elementInp'+'ut']&&(this['elementInp'+'ut']['detach'](),this['elementInp'+'ut']=null),this['gamepads']&&(this['gamepads']['destroy'](),this['gamepads']=null),this['controller']&&(this['controller']=null),this['systems']['destroy'](),this['scene']['layers']&&this['scene']['layers']['destroy']();const _0x2d07a6=this['assets']['list']();for(let _0x3a8bfd=0x237f+0x18c0+-0x35*0x123;_0x3a8bfd<_0x2d07a6['length'];_0x3a8bfd++)_0x2d07a6[_0x3a8bfd]['unload'](),_0x2d07a6[_0x3a8bfd]['off']();this['assets']['off'](),this['bundles']['destroy'](),this['bundles']=null,this['i18n']['destroy'](),this['i18n']=null;const _0x2dd08b=this['loader']['getHandler']('script');_0x2dd08b==null||_0x2dd08b['clearCache'](),this['loader']['destroy'](),this['loader']=null,this['scene']['destroy'](),this['scene']=null,this['systems']=null,this['context']=null,this['scripts']['destroy'](),this['scripts']=null,this['scenes']['destroy'](),this['scenes']=null,(_0x504a79=this['lightmappe'+'r'])==null||_0x504a79['destroy'](),this['lightmappe'+'r']=null,this['_batcher']&&(this['_batcher']['destroy'](),this['_batcher']=null),this['_entityInd'+'ex']={},this['defaultLay'+'erDepth']['onDisable']=null,this['defaultLay'+'erDepth']['onEnable']=null,this['defaultLay'+'erDepth']=null,this['defaultLay'+'erWorld']=null,(_0x2e88f6=this['xr'])==null||_0x2e88f6['end'](),(_0x35c389=this['xr'])==null||_0x35c389['destroy'](),this['renderer']['destroy'](),this['renderer']=null,this['graphicsDe'+'vice']['destroy'](),this['graphicsDe'+'vice']=null,this['tick']=null,this['off'](),(_0x508464=this['_soundMana'+'ger'])==null||_0x508464['destroy'](),this['_soundMana'+'ger']=null,ea['_applicati'+'ons'][_0x3b032b]=null,Ms()===this&&_u(null),ea['cancelTick'](this);}static['cancelTick'](_0x1ccc3a){_0x1ccc3a['frameReque'+'stId']&&(window['cancelAnim'+'ationFrame'](_0x1ccc3a['frameReque'+'stId']),_0x1ccc3a['frameReque'+'stId']=void(0x1*-0xd4f+0x1f7b+-0x122c));}['getEntityF'+'romIndex'](_0x595b41){return this['_entityInd'+'ex'][_0x595b41];}['_registerS'+'ceneImmedi'+'ate'](_0x4f5186){this['on']('postrender',_0x4f5186['immediate']['onPostRend'+'er'],_0x4f5186['immediate']);}};h(ea,'_applicati'+'ons',{});let Ks=ea;const eL=function(_0x49527c){const _0x10af76=_0x49527c;return function(_0xcae8f9,_0xb761e1){var _0x1aac4b,_0x3dc916,_0x3b6539,_0x369cff;if(!_0x10af76['graphicsDe'+'vice'])return;_0x10af76['frameReque'+'stId']&&((_0x3dc916=(_0x1aac4b=_0x10af76['xr'])==null?void(0xdc9*-0x2+0xc86+0xf0c):_0x1aac4b['session'])==null||_0x3dc916['cancelAnim'+'ationFrame'](_0x10af76['frameReque'+'stId']),cancelAnimationFrame(_0x10af76['frameReque'+'stId']),_0x10af76['frameReque'+'stId']=null),_0x10af76['_inFrameUp'+'date']=!(0x7b4+-0x16*0x1a7+0x182*0x13),_u(_0x10af76);const _0x2b851e=_0x10af76['_processTi'+'mestamp'](_0xcae8f9)||de(),_0xbac118=_0x2b851e-(_0x10af76['_time']||_0x2b851e);let _0x53c4b3=_0xbac118/(-0x1f42+0x2287*0x1+0xa3);if(_0x53c4b3=Y['clamp'](_0x53c4b3,0x8e1+-0x18*-0x21+-0xbf9,_0x10af76['maxDeltaTi'+'me']),_0x53c4b3*=_0x10af76['timeScale'],_0x10af76['_time']=_0x2b851e,(_0x3b6539=_0x10af76['xr'])!=null&&_0x3b6539['session']?_0x10af76['frameReque'+'stId']=_0x10af76['xr']['session']['requestAni'+'mationFram'+'e'](_0x10af76['tick']):_0x10af76['frameReque'+'stId']=Ae['browser']||Ae['worker']?requestAnimationFrame(_0x10af76['tick']):null,_0x10af76['graphicsDe'+'vice']['contextLos'+'t'])return;_0x10af76['_fillFrame'+'StatsBasic'](_0x2b851e,_0x53c4b3,_0xbac118),_0x10af76['_fillFrame'+'Stats'](),_0x10af76['fire']('frameupdat'+'e',_0xbac118);let _0x44847c=!(0xbe*-0x1a+0x7ee*0x1+0xb5f);_0xb761e1?(_0x44847c=!((_0x369cff=_0x10af76['xr'])!=null&&_0x369cff['update'](_0xb761e1)),_0x10af76['graphicsDe'+'vice']['defaultFra'+'mebuffer']=_0xb761e1['session']['renderStat'+'e']['baseLayer']['framebuffe'+'r']):_0x10af76['graphicsDe'+'vice']['defaultFra'+'mebuffer']=null,!_0x44847c&&!_0x10af76['stopSort']&&(w['trace'](W0,'----\x20Frame'+'\x20'+_0x10af76['frame']),w['trace'](Ld,'--\x20UpdateS'+'tart\x20'+de()['toFixed'](-0x1*0x1c41+0x59+-0x1*-0x1bea)+'ms'),_0x10af76['update'](_0x53c4b3),_0x10af76['fire']('framerende'+'r'),(_0x10af76['autoRender']||_0x10af76['renderNext'+'Frame'])&&(w['trace'](Ld,'--\x20RenderS'+'tart\x20'+de()['toFixed'](0x1f8e*-0x1+0x1a75+0x51b)+'ms'),_0x10af76['render'](),_0x10af76['renderNext'+'Frame']=!(-0xaa2+0x2*-0xc25+0x22ed*0x1),w['trace'](Ld,'--\x20RenderE'+'nd\x20'+de()['toFixed'](-0x14f*0xb+0x116d*0x2+-0x1473)+'ms')),_0x10af76['fire']('frameend')),_0x10af76['_inFrameUp'+'date']=!(-0x150e+0x5*-0x5ba+0x31b1),_0x10af76['_destroyRe'+'quested']&&_0x10af76['destroy']();};};class tL{constructor(){h(this,'elementInp'+'ut'),h(this,'keyboard'),h(this,'mouse'),h(this,'touch'),h(this,'gamepads'),h(this,'scriptPref'+'ix'),h(this,'assetPrefi'+'x'),h(this,'scriptsOrd'+'er'),h(this,'soundManag'+'er'),h(this,'graphicsDe'+'vice'),h(this,'lightmappe'+'r'),h(this,'batchManag'+'er'),h(this,'xr'),h(this,'componentS'+'ystems',[]),h(this,'resourceHa'+'ndlers',[]);}}const mo=new sp();class Uv{constructor(_0x282d88,_0x466a86,_0x31d5e2){this['scene']=_0x282d88,this['light']=_0x466a86,this['store'](),_0x466a86['numCascade'+'s']=0x1c3*-0x16+-0x4a*-0x28+0x1b33,this['scene']['clusteredL'+'ightingEna'+'bled']&&!_0x31d5e2['shadowsEna'+'bled']&&(_0x466a86['castShadow'+'s']=!(-0x1093*-0x1+0x137*0x5+-0x16a5)),_0x466a86['type']!==ve&&(_0x466a86['_node']['getWorldTr'+'ansform'](),_0x466a86['getBoundin'+'gSphere'](mo),this['lightBound'+'s']=new De(),this['lightBound'+'s']['center']['copy'](mo['center']),this['lightBound'+'s']['halfExtent'+'s']['set'](mo['radius'],mo['radius'],mo['radius']));}['store'](){this['mask']=this['light']['mask'],this['shadowUpda'+'teMode']=this['light']['shadowUpda'+'teMode'],this['enabled']=this['light']['enabled'],this['intensity']=this['light']['intensity'],this['rotation']=this['light']['_node']['getLocalRo'+'tation']()['clone'](),this['numCascade'+'s']=this['light']['numCascade'+'s'],this['castShadow'+'s']=this['light']['_castShado'+'ws'];}['restore'](){const _0x43574d=this['light'];_0x43574d['mask']=this['mask'],_0x43574d['shadowUpda'+'teMode']=this['shadowUpda'+'teMode'],_0x43574d['enabled']=this['enabled'],_0x43574d['intensity']=this['intensity'],_0x43574d['_node']['setLocalRo'+'tation'](this['rotation']),_0x43574d['numCascade'+'s']=this['numCascade'+'s'],_0x43574d['_castShado'+'ws']=this['castShadow'+'s'];}['startBake'](){this['light']['enabled']=!(0x1b9b+0x1*-0x466+-0x1735),this['light']['_destroySh'+'adowMap'](),this['light']['beginFrame']();}['endBake'](_0x52661b){const _0x4b14f7=this['light'];_0x4b14f7['enabled']=!(0x1882*-0x1+-0x7b+0x18fe),_0x4b14f7['shadowMap']&&(_0x4b14f7['shadowMap']['cached']&&_0x52661b['add'](_0x4b14f7,_0x4b14f7['shadowMap']),_0x4b14f7['shadowMap']=null);}}const yc=new J();class sL extends Uv{constructor(_0x29e3b0,_0xe305b1){super(_0x29e3b0['scene'],_0xe305b1,_0x29e3b0['lightingPa'+'rams']);}get['numVirtual'+'Lights'](){return this['light']['type']===ve?this['light']['bakeNumSam'+'ples']:-0x1*-0x2cf+-0x23*-0x7+-0x3c3;}['prepareVir'+'tualLight'](_0x381ede,_0xf54555){const _0x529913=this['light'];if(_0x529913['_node']['setLocalRo'+'tation'](this['rotation']),_0x381ede>-0x2170+0x2560+-0x3*0x150){const _0x1a2169=_0x529913['bakeArea'];Nl['circlePoin'+'tDetermini'+'stic'](yc,_0x381ede,_0xf54555),yc['mulScalar'](_0x1a2169*(-0x832*-0x4+-0x1f6c+0x15c*-0x1+0.5)),_0x529913['_node']['rotateLoca'+'l'](yc['x'],0x2a1+-0x7*0x2aa+-0x1*-0x1005,yc['y']);}_0x529913['_node']['getWorldTr'+'ansform']();const _0x4d48b9=-0xfdb*-0x1+-0xfe8*-0x1+-0xb*0x2e3+0.20000000000000018,_0x20d448=Math['pow'](this['intensity'],_0x4d48b9);_0x529913['intensity']=Math['pow'](_0x20d448/_0xf54555,(0x1362+-0x1*-0x1873+-0x2bd4)/_0x4d48b9);}}const Pg=new D();class Mg extends Uv{constructor(_0x371a74){const _0x215d5f=_0x371a74['scene'],_0x1f51ab=new lt('AmbientLig'+'ht');_0x1f51ab['addCompone'+'nt']('light',{'type':'directiona'+'l','affectDynamic':!(0x2564+-0x6f*0xd+-0xb*0x2e3),'affectLightmapped':!(-0xf56+0xc*-0x2f1+0x32a3),'bake':!(-0x13a7+-0xf62*0x2+0x326b),'bakeNumSamples':_0x215d5f['ambientBak'+'eNumSample'+'s'],'castShadows':!(0x2291*0x1+-0x504+-0x1d8d),'normalOffsetBias':0.05,'shadowBias':0.2,'shadowDistance':0x1,'shadowResolution':0x800,'shadowType':$s,'color':ie['WHITE'],'intensity':0x1,'bakeDir':!(-0x1e10+-0x1*0x8e6+0x26f7)}),super(_0x215d5f,_0x1f51ab['light']['light'],_0x371a74['lightingPa'+'rams']);}get['numVirtual'+'Lights'](){return this['light']['bakeNumSam'+'ples'];}['prepareVir'+'tualLight'](_0x3861f8,_0x2985f6){Nl['spherePoin'+'tDetermini'+'stic'](Pg,_0x3861f8,_0x2985f6,-0x2*-0x2ea+-0x4f7+-0xdd,this['scene']['ambientBak'+'eSpherePar'+'t']),this['light']['_node']['lookAt'](Pg['mulScalar'](-(0x3b*0x77+-0xcf*0x9+-0x1425))),this['light']['_node']['rotateLoca'+'l'](0x2700+0xfd9*-0x1+-0x16cd,-0xca2+0x209f+-0x13fd,-0x1df8+-0x1*0x1326+0x311e);const _0x25ebe9=-0x583*0x7+-0x2003+-0xe*-0x50b+0.20000000000000018,_0xf2a08e=(0xd*-0x17b+0x760+0xbe1*0x1)*Math['PI']*this['scene']['ambientBak'+'eSpherePar'+'t'],_0xb20b3d=Math['pow'](_0xf2a08e,_0x25ebe9);this['light']['intensity']=Math['pow'](_0xb20b3d/_0x2985f6,(0x348*-0x4+0x1d*-0x119+0x2cf6)/_0x25ebe9);}}class vc{constructor(_0x580f32,_0x4ef73c=null){this['node']=_0x580f32,this['component']=_0x580f32['render']||_0x580f32['model'],_0x4ef73c=_0x4ef73c||this['component']['meshInstan'+'ces'],this['store'](),this['meshInstan'+'ces']=_0x4ef73c,this['bounds']=null,this['renderTarg'+'ets']=[];}['store'](){this['castShadow'+'s']=this['component']['castShadow'+'s'];}['restore'](){this['component']['castShadow'+'s']=this['castShadow'+'s'];}}const iL='\x0a//\x20bilate'+'ral\x20filter'+',\x20based\x20on'+'\x20https://w'+'ww.shadert'+'oy.com/vie'+'w/4dfGDH#\x20'+'and\x0a//\x20htt'+'p://people'+'.csail.mit'+'.edu/spari'+'s/bf_cours'+'e/course_n'+'otes.pdf\x0a\x0a'+'//\x20A\x20bilat'+'eral\x20filte'+'r\x20is\x20a\x20non'+'-linear,\x20e'+'dge-preser'+'ving,\x20and\x20'+'noise-redu'+'cing\x20smoot'+'hing\x20filte'+'r\x20for\x20imag'+'es.\x0a//\x20It\x20'+'replaces\x20t'+'he\x20intensi'+'ty\x20of\x20each'+'\x20pixel\x20wit'+'h\x20a\x20weight'+'ed\x20average'+'\x20of\x20intens'+'ity\x20values'+'\x20from\x20near'+'by\x20pixels.'+'\x0a//\x20This\x20w'+'eight\x20can\x20'+'be\x20based\x20o'+'n\x20a\x20Gaussi'+'an\x20distrib'+'ution.\x20Cru'+'cially,\x20th'+'e\x20weights\x20'+'depend\x20not'+'\x20only\x20on\x0a/'+'/\x20Euclidea'+'n\x20distance'+'\x20of\x20pixels'+',\x20but\x20also'+'\x20on\x20the\x20ra'+'diometric\x20'+'difference'+'s\x20(e.g.,\x20r'+'ange\x20diffe'+'rences,\x20su'+'ch\x0a//\x20as\x20c'+'olor\x20inten'+'sity,\x20dept'+'h\x20distance'+',\x20etc.).\x20T'+'his\x20preser'+'ves\x20sharp\x20'+'edges.\x0a\x0afl'+'oat\x20normpd'+'f3(in\x20vec3'+'\x20v,\x20in\x20flo'+'at\x20sigma)\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x200.39894'+'\x20*\x20exp(-0.'+'5\x20*\x20dot(v,'+'\x20v)\x20/\x20(sig'+'ma\x20*\x20sigma'+'))\x20/\x20sigma'+';\x0a}\x0a\x0avec3\x20'+'decodeRGBM'+'(vec4\x20rgbm'+')\x20{\x0a\x20\x20\x20\x20ve'+'c3\x20color\x20='+'\x20(8.0\x20*\x20rg'+'bm.a)\x20*\x20rg'+'bm.rgb;\x0a\x20\x20'+'\x20\x20return\x20c'+'olor\x20*\x20col'+'or;\x0a}\x0a\x0aflo'+'at\x20saturat'+'e(float\x20x)'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20clamp('+'x,\x200.0,\x201.'+'0);\x0a}\x0a\x0avec'+'4\x20encodeRG'+'BM(vec3\x20co'+'lor)\x20{\x20//\x20'+'modified\x20R'+'GBM\x0a\x20\x20\x20\x20ve'+'c4\x20encoded'+';\x0a\x20\x20\x20\x20enco'+'ded.rgb\x20=\x20'+'pow(color.'+('rgb,\x20vec3('+'0.5));\x0a\x20\x20\x20'+'\x20encoded.r'+'gb\x20*=\x201.0\x20'+'/\x208.0;\x0a\x0a\x20\x20'+'\x20\x20encoded.'+'a\x20=\x20satura'+'te(\x20max(\x20m'+'ax(\x20encode'+'d.r,\x20encod'+'ed.g\x20),\x20ma'+'x(\x20encoded'+'.b,\x201.0\x20/\x20'+'255.0\x20)\x20)\x20'+');\x0a\x20\x20\x20\x20enc'+'oded.a\x20=\x20c'+'eil(encode'+'d.a\x20*\x20255.'+'0)\x20/\x20255.0'+';\x0a\x0a\x20\x20\x20\x20enc'+'oded.rgb\x20/'+'=\x20encoded.'+'a;\x0a\x20\x20\x20\x20ret'+'urn\x20encode'+'d;\x0a}\x0a\x0avec3'+'\x20decode(ve'+'c4\x20pixel)\x20'+'{\x0a\x20\x20\x20\x20#if\x20'+'HDR\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20p'+'ixel.rgb;\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20decod'+'eRGBM(pixe'+'l);\x0a\x20\x20\x20\x20#e'+'ndif\x0a}\x0a\x0abo'+'ol\x20isUsed('+'vec4\x20pixel'+')\x20{\x0a\x20\x20\x20\x20#i'+'f\x20HDR\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20any(great'+'erThan(pix'+'el.rgb,\x20ve'+'c3(0.0)));'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20pixe'+'l.a\x20>\x200.0;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a}\x0a\x0avaryi'+'ng\x20vec2\x20vU'+'v0;\x0aunifor'+'m\x20sampler2'+'D\x20source;\x0a'+'uniform\x20ve'+'c2\x20pixelOf'+'fset;\x0aunif'+'orm\x20vec2\x20s'+'igmas;\x0auni'+'form\x20float'+'\x20bZnorm;\x0au'+'niform\x20flo'+'at\x20kernel['+'{MSIZE}];\x0a'+'\x0avoid\x20main'+'(void)\x20{\x0a\x20'+'\x20\x20\x20\x0a\x20\x20\x20\x20ve'+'c4\x20pixel\x20='+'\x20texture2D'+'Lod(source'+',\x20vUv0,\x200.'+'0);\x0a\x0a\x20\x20\x20\x20/'+'/\x20lightmap'+'\x20specific\x20'+'optimizati'+'on\x20-\x20skip\x20'+'pixels\x20tha'+'t\x20were\x20not'+'\x20baked\x0a\x20\x20\x20'+'\x20//\x20this\x20a'+'lso\x20allows'+'\x20dilate\x20fi'+'lter\x20that\x20'+'work\x20on\x20th'+'e\x20output\x20o'+'f\x20this\x20to\x20'+'work\x20corre'+'ctly,\x20as\x20i'+'t\x20depends\x20'+'on\x20.a\x20bein'+'g\x20zero\x0a\x20\x20\x20'+'\x20//\x20to\x20dil'+'ate,\x20which'+'\x20the\x20follo'+'wing\x20blur\x20'+'filter\x20wou'+'ld\x20otherwi'+'se\x20modify\x0a')+('\x20\x20\x20\x20if\x20(!i'+'sUsed(pixe'+'l))\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20p'+'ixel;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20return'+'\x20;\x0a\x20\x20\x20\x20}\x0a\x0a'+'\x20\x20\x20\x20//\x20ran'+'ge\x20sigma\x20-'+'\x20controls\x20'+'blurriness'+'\x20based\x20on\x20'+'a\x20pixel\x20di'+'stance\x0a\x20\x20\x20'+'\x20float\x20sig'+'ma\x20=\x20sigma'+'s.x;\x0a\x0a\x20\x20\x20\x20'+'//\x20domain\x20'+'sigma\x20-\x20co'+'ntrols\x20blu'+'rriness\x20ba'+'sed\x20on\x20a\x20p'+'ixel\x20simil'+'arity\x20(to\x20'+'preserve\x20e'+'dges)\x0a\x20\x20\x20\x20'+'float\x20bSig'+'ma\x20=\x20sigma'+'s.y;\x0a\x0a\x20\x20\x20\x20'+'vec3\x20pixel'+'Hdr\x20=\x20deco'+'de(pixel);'+'\x0a\x20\x20\x20\x20vec3\x20'+'accumulate'+'dHdr\x20=\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20float\x20ac'+'cumulatedF'+'actor\x20=\x200.'+'000001;\x20\x20/'+'/\x20avoid\x20di'+'vision\x20by\x20'+'zero\x0a\x0a\x20\x20\x20\x20'+'//\x20read\x20ou'+'t\x20the\x20texe'+'ls\x0a\x20\x20\x20\x20con'+'st\x20int\x20kSi'+'ze\x20=\x20({MSI'+'ZE}\x20-\x201)\x20/'+'\x202;\x0a\x20\x20\x20\x20fo'+'r\x20(int\x20i\x20='+'\x20-kSize;\x20i'+'\x20<=\x20kSize;'+'\x20++i)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20for\x20'+'(int\x20j\x20=\x20-'+'kSize;\x20j\x20<'+'=\x20kSize;\x20+'+'+j)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20//\x20sample'+'\x20the\x20pixel'+'\x20with\x20offs'+'et\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20vec2\x20'+'coord\x20=\x20vU'+'v0\x20+\x20vec2('+'float(i),\x20'+'float(j))\x20'+'*\x20pixelOff'+'set;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'4\x20pix\x20=\x20te'+'xture2DLod'+'(source,\x20c'+'oord,\x200.0)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20li'+'ghtmap\x20-\x20o'+'nly\x20use\x20ba'+'ked\x20pixels'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20if\x20(isU'+'sed(pix))\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20hdr\x20=\x20d'+'ecode(pix)'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20bilatera'+'l\x20factors\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20floa'+'t\x20factor\x20='+'\x20kernel[kS'+'ize\x20+\x20j]\x20*'+'\x20kernel[kS')+('ize\x20+\x20i];\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20fact'+'or\x20*=\x20norm'+'pdf3(hdr\x20-'+'\x20pixelHdr,'+'\x20bSigma)\x20*'+'\x20bZnorm;\x0a\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20a'+'ccumulate\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20accu'+'mulatedHdr'+'\x20+=\x20factor'+'\x20*\x20hdr;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20accumu'+'latedFacto'+'r\x20+=\x20facto'+'r;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20}\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20ve'+'c3\x20finalHD'+'R\x20=\x20accumu'+'latedHdr\x20/'+'\x20accumulat'+'edFactor;\x0a'+'\x0a\x20\x20\x20\x20#if\x20H'+'DR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20gl_FragCo'+'lor\x20=\x20vec4'+'(finalHDR,'+'\x201.0);\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20gl_Fr'+'agColor\x20=\x20'+'encodeRGBM'+'(finalHDR)'+';\x0a\x20\x20\x20\x20#end'+'if\x0a}\x0a'),rL='\x0a\x0avarying\x20'+'vec2\x20vUv0;'+'\x0a\x0auniform\x20'+'sampler2D\x20'+'source;\x0aun'+'iform\x20vec2'+'\x20pixelOffs'+'et;\x0a\x0abool\x20'+'isUsed(vec'+'4\x20pixel)\x20{'+'\x0a\x20\x20\x20\x20#if\x20H'+'DR\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20an'+'y(greaterT'+'han(pixel.'+'rgb,\x20vec3('+'0.0)));\x0a\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20retu'+'rn\x20pixel.a'+'\x20>\x200.0;\x0a\x20\x20'+'\x20\x20#endif\x0a}'+'\x0a\x0avoid\x20mai'+'n(void)\x20{\x0a'+'\x20\x20\x20\x20vec4\x20c'+'\x20=\x20texture'+'2DLod(sour'+'ce,\x20vUv0,\x20'+'0.0);\x0a\x20\x20\x20\x20'+'c\x20=\x20isUsed'+'(c)\x20?\x20c\x20:\x20'+'texture2DL'+'od(source,'+'\x20vUv0\x20-\x20pi'+'xelOffset,'+'\x200.0);\x0a\x20\x20\x20'+'\x20c\x20=\x20isUse'+'d(c)\x20?\x20c\x20:'+'\x20texture2D'+'Lod(source'+',\x20vUv0\x20+\x20v'+'ec2(0,\x20-pi'+'xelOffset.'+'y),\x200.0);\x0a'+'\x20\x20\x20\x20c\x20=\x20is'+'Used(c)\x20?\x20'+'c\x20:\x20textur'+'e2DLod(sou'+'rce,\x20vUv0\x20'+'+\x20vec2(pix'+'elOffset.x'+',\x20-pixelOf'+'fset.y),\x200'+'.0);\x0a\x20\x20\x20\x20c'+'\x20=\x20isUsed('+'c)\x20?\x20c\x20:\x20t'+'exture2DLo'+'d(source,\x20'+'vUv0\x20+\x20vec'+'2(-pixelOf'+'fset.x,\x200)'+',\x200.0);\x0a\x20\x20'+'\x20\x20c\x20=\x20isUs'+'ed(c)\x20?\x20c\x20'+':\x20texture2'+'DLod(sourc'+'e,\x20vUv0\x20+\x20'+'vec2(pixel'+'Offset.x,\x20'+'0),\x200.0);\x0a'+'\x20\x20\x20\x20c\x20=\x20is'+'Used(c)\x20?\x20'+'c\x20:\x20textur'+'e2DLod(sou'+'rce,\x20vUv0\x20'+'+\x20vec2(-pi'+'xelOffset.'+'x,\x20pixelOf'+'fset.y),\x200'+'.0);\x0a\x20\x20\x20\x20c'+'\x20=\x20isUsed('+'c)\x20?\x20c\x20:\x20t'+'exture2DLo'+'d(source,\x20'+'vUv0\x20+\x20vec'+'2(0,\x20pixel'+'Offset.y),'+'\x200.0);\x0a\x20\x20\x20'+'\x20c\x20=\x20isUse'+'d(c)\x20?\x20c\x20:'+'\x20texture2D'+'Lod(source'+',\x20vUv0\x20+\x20p'+'ixelOffset'+',\x200.0);\x0a\x20\x20'+'\x20\x20gl_FragC'+'olor\x20=\x20c;\x0a'+'}\x0a',aL='\x0a//\x20bilate'+'ral\x20filter'+',\x20based\x20on'+'\x20https://w'+'ww.shadert'+'oy.com/vie'+'w/4dfGDH#\x20'+'and\x0a//\x20htt'+'p://people'+'.csail.mit'+'.edu/spari'+'s/bf_cours'+'e/course_n'+'otes.pdf\x0a\x0a'+'//\x20A\x20bilat'+'eral\x20filte'+'r\x20is\x20a\x20non'+'-linear,\x20e'+'dge-preser'+'ving,\x20and\x20'+'noise-redu'+'cing\x20smoot'+'hing\x20filte'+'r\x20for\x20imag'+'es.\x0a//\x20It\x20'+'replaces\x20t'+'he\x20intensi'+'ty\x20of\x20each'+'\x20pixel\x20wit'+'h\x20a\x20weight'+'ed\x20average'+'\x20of\x20intens'+'ity\x20values'+'\x20from\x20near'+'by\x20pixels.'+'\x0a//\x20This\x20w'+'eight\x20can\x20'+'be\x20based\x20o'+'n\x20a\x20Gaussi'+'an\x20distrib'+'ution.\x20Cru'+'cially,\x20th'+'e\x20weights\x20'+'depend\x20not'+'\x20only\x20on\x0a/'+'/\x20Euclidea'+'n\x20distance'+'\x20of\x20pixels'+',\x20but\x20also'+'\x20on\x20the\x20ra'+'diometric\x20'+'difference'+'s\x20(e.g.,\x20r'+'ange\x20diffe'+'rences,\x20su'+'ch\x0a//\x20as\x20c'+'olor\x20inten'+'sity,\x20dept'+'h\x20distance'+',\x20etc.).\x20T'+'his\x20preser'+'ves\x20sharp\x20'+'edges.\x0a\x0afn'+'\x20normpdf3('+'v:\x20vec3f,\x20'+'sigma:\x20f32'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x200.39894\x20'+'*\x20exp(-0.5'+'\x20*\x20dot(v,\x20'+'v)\x20/\x20(sigm'+'a\x20*\x20sigma)'+')\x20/\x20sigma;'+'\x0a}\x0a\x0afn\x20dec'+'odeRGBM(rg'+'bm:\x20vec4f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'color\x20=\x20(8'+'.0\x20*\x20rgbm.'+'a)\x20*\x20rgbm.'+'rgb;\x0a\x20\x20\x20\x20r'+'eturn\x20colo'+'r\x20*\x20color;'+'\x0a}\x0a\x0afn\x20sat'+'urate(x:\x20f'+'32)\x20->\x20f32'+'\x20{\x0a\x20\x20\x20\x20ret'+'urn\x20clamp('+'x,\x200.0,\x201.'+'0);\x0a}\x0a\x0afn\x20'+'encodeRGBM'+'(color:\x20ve'+'c3f)\x20->\x20ve'+'c4f\x20{\x0a\x20\x20\x20\x20'+'var\x20encode'+'d:\x20vec4f;\x0a'+'\x20\x20\x20\x20let\x20rg'+'b_processe'+('d\x20=\x20pow(co'+'lor.rgb,\x20v'+'ec3f(0.5))'+'\x20*\x20(1.0\x20/\x20'+'8.0);\x0a\x20\x20\x20\x20'+'encoded\x20=\x20'+'vec4f(rgb_'+'processed,'+'\x200.0);\x0a\x0a\x20\x20'+'\x20\x20let\x20max_'+'g_b\x20=\x20max('+'\x20encoded.g'+',\x20max(\x20enc'+'oded.b,\x201.'+'0\x20/\x20255.0\x20'+')\x20);\x0a\x20\x20\x20\x20l'+'et\x20max_rgb'+'\x20=\x20max(\x20en'+'coded.r,\x20m'+'ax_g_b\x20);\x0a'+'\x20\x20\x20\x20encode'+'d.a\x20=\x20clam'+'p(max_rgb,'+'\x200.0,\x201.0)'+';\x0a\x20\x20\x20\x20enco'+'ded.a\x20=\x20ce'+'il(encoded'+'.a\x20*\x20255.0'+')\x20/\x20255.0;'+'\x0a\x0a\x20\x20\x20\x20enco'+'ded\x20=\x20vec4'+'f(encoded.'+'rgb\x20/\x20enco'+'ded.a,\x20enc'+'oded.a);\x0a\x20'+'\x20\x20\x20return\x20'+'encoded;\x0a}'+'\x0a\x0afn\x20decod'+'e(pixel:\x20v'+'ec4f)\x20->\x20v'+'ec3f\x20{\x0a\x20\x20\x20'+'\x20#if\x20HDR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20pixel.'+'rgb;\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'decodeRGBM'+'(pixel);\x0a\x20'+'\x20\x20\x20#endif\x0a'+'}\x0a\x0afn\x20isUs'+'ed(pixel:\x20'+'vec4f)\x20->\x20'+'bool\x20{\x0a\x20\x20\x20'+'\x20#if\x20HDR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20any(pi'+'xel.rgb\x20>\x20'+'vec3f(0.0)'+');\x0a\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20pi'+'xel.a\x20>\x200.'+'0;\x0a\x20\x20\x20\x20#en'+'dif\x0a}\x0a\x0avar'+'ying\x20vUv0:'+'\x20vec2f;\x0ava'+'r\x20source:\x20'+'texture_2d'+'<f32>;\x0avar'+'\x20sourceSam'+'pler:\x20samp'+'ler;\x0aunifo'+'rm\x20kernel:'+'\x20array<f32'+',\x20{MSIZE}>'+';\x0auniform\x20'+'pixelOffse'+'t:\x20vec2f;\x0a'+'uniform\x20si'+'gmas:\x20vec2'+'f;\x0auniform'+'\x20bZnorm:\x20f'+'32;\x0a\x0a@frag'+'ment\x0afn\x20fr'+'agmentMain'+'(input:\x20Fr'+'agmentInpu'+'t)\x20->\x20Frag'+'mentOutput'+'\x20{\x0a\x20\x20\x20\x20var'+'\x20output:\x20F'+'ragmentOut'+'put;\x0a\x0a\x20\x20\x20\x20'+'let\x20pixel\x20'+'=\x20textureS'+'ampleLevel'+'(source,\x20s'+'ourceSampl'+'er,\x20input.')+('vUv0,\x200.0)'+';\x0a\x0a\x20\x20\x20\x20//\x20'+'lightmap\x20s'+'pecific\x20op'+'timization'+'\x20-\x20skip\x20pi'+'xels\x20that\x20'+'were\x20not\x20b'+'aked\x0a\x20\x20\x20\x20/'+'/\x20this\x20als'+'o\x20allows\x20d'+'ilate\x20filt'+'er\x20that\x20wo'+'rk\x20on\x20the\x20'+'output\x20of\x20'+'this\x20to\x20wo'+'rk\x20correct'+'ly,\x20as\x20it\x20'+'depends\x20on'+'\x20.a\x20being\x20'+'zero\x0a\x20\x20\x20\x20/'+'/\x20to\x20dilat'+'e,\x20which\x20t'+'he\x20followi'+'ng\x20blur\x20fi'+'lter\x20would'+'\x20otherwise'+'\x20modify\x0a\x20\x20'+'\x20\x20if\x20(!isU'+'sed(pixel)'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20output.c'+'olor\x20=\x20pix'+'el;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20o'+'utput;\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20//'+'\x20range\x20sig'+'ma\x20-\x20contr'+'ols\x20blurri'+'ness\x20based'+'\x20on\x20a\x20pixe'+'l\x20distance'+'\x0a\x20\x20\x20\x20let\x20s'+'igma\x20=\x20uni'+'form.sigma'+'s.x;\x0a\x0a\x20\x20\x20\x20'+'//\x20domain\x20'+'sigma\x20-\x20co'+'ntrols\x20blu'+'rriness\x20ba'+'sed\x20on\x20a\x20p'+'ixel\x20simil'+'arity\x20(to\x20'+'preserve\x20e'+'dges)\x0a\x20\x20\x20\x20'+'let\x20bSigma'+'\x20=\x20uniform'+'.sigmas.y;'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'pixelHdr\x20='+'\x20decode(pi'+'xel);\x0a\x20\x20\x20\x20'+'var\x20accumu'+'latedHdr\x20='+'\x20vec3f(0.0'+');\x0a\x20\x20\x20\x20var'+'\x20accumulat'+'edFactor\x20='+'\x200.000001;'+'\x20\x20//\x20avoid'+'\x20division\x20'+'by\x20zero\x0a\x0a\x20'+'\x20\x20\x20//\x20read'+'\x20out\x20the\x20t'+'exels\x0a\x20\x20\x20\x20'+'const\x20kSiz'+'e\x20=\x20({MSIZ'+'E}\x20-\x201)\x20/\x20'+'2;\x0a\x20\x20\x20\x20for'+'\x20(var\x20i:\x20i'+'32\x20=\x20-kSiz'+'e;\x20i\x20<=\x20kS'+'ize;\x20i\x20=\x20i'+'\x20+\x201)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20for\x20'+'(var\x20j:\x20i3'+'2\x20=\x20-kSize'+';\x20j\x20<=\x20kSi'+'ze;\x20j\x20=\x20j\x20'+'+\x201)\x20{\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20sample\x20'+'the\x20pixel\x20'+'with\x20offse'+'t\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20co'+'ord\x20=\x20inpu'+'t.vUv0\x20+\x20v'+'ec2f(f32(i')+('),\x20f32(j))'+'\x20*\x20uniform'+'.pixelOffs'+'et;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20let\x20'+'pix\x20=\x20text'+'ureSampleL'+'evel(sourc'+'e,\x20sourceS'+'ampler,\x20co'+'ord,\x200.0);'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20//\x20lig'+'htmap\x20-\x20on'+'ly\x20use\x20bak'+'ed\x20pixels\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(isUs'+'ed(pix))\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20let'+'\x20hdr\x20=\x20dec'+'ode(pix);\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'bilateral\x20'+'factors\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20var\x20fa'+'ctor\x20=\x20uni'+'form.kerne'+'l[u32(kSiz'+'e\x20+\x20j)].el'+'ement\x20*\x20un'+'iform.kern'+'el[u32(kSi'+'ze\x20+\x20i)].e'+'lement;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20factor'+'\x20=\x20factor\x20'+'*\x20normpdf3'+'(hdr\x20-\x20pix'+'elHdr,\x20bSi'+'gma)\x20*\x20uni'+'form.bZnor'+'m;\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'//\x20accumul'+'ate\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'accumulate'+'dHdr\x20=\x20acc'+'umulatedHd'+'r\x20+\x20factor'+'\x20*\x20hdr;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20accumu'+'latedFacto'+'r\x20=\x20accumu'+'latedFacto'+'r\x20+\x20factor'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'+'}\x0a\x0a\x20\x20\x20\x20let'+'\x20finalHDR\x20'+'=\x20accumula'+'tedHdr\x20/\x20a'+'ccumulated'+'Factor;\x0a\x0a\x20'+'\x20\x20\x20#if\x20HDR'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.colo'+'r\x20=\x20vec4f('+'finalHDR,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.color\x20=\x20e'+'ncodeRGBM('+'finalHDR);'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a}\x0a'),nL='\x0a\x0avarying\x20'+'vUv0:\x20vec2'+'f;\x0a\x0avar\x20so'+'urce:\x20text'+'ure_2d<f32'+'>;\x0avar\x20sou'+'rceSampler'+':\x20sampler;'+'\x0auniform\x20p'+'ixelOffset'+':\x20vec2f;\x0a\x0a'+'fn\x20isUsed('+'pixel:\x20vec'+'4f)\x20->\x20boo'+'l\x20{\x0a\x20\x20\x20\x20#i'+'fdef\x20HDR\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20ret'+'urn\x20any(pi'+'xel.rgb\x20>\x20'+'vec3f(0.0)'+');\x0a\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20pi'+'xel.a\x20>\x200.'+'0;\x0a\x20\x20\x20\x20#en'+'dif\x0a}\x0a\x0a@fr'+'agment\x0afn\x20'+'fragmentMa'+'in(input:\x20'+'FragmentIn'+'put)\x20->\x20Fr'+'agmentOutp'+'ut\x20{\x0a\x20\x20\x20\x20v'+'ar\x20c:\x20vec4'+'f\x20=\x20textur'+'eSampleLev'+'el(source,'+'\x20sourceSam'+'pler,\x20inpu'+'t.vUv0,\x200.'+'0);\x0a\x20\x20\x20\x20c\x20'+'=\x20select(t'+'extureSamp'+'leLevel(so'+'urce,\x20sour'+'ceSampler,'+'\x20input.vUv'+'0\x20-\x20unifor'+'m.pixelOff'+'set,\x200.0),'+'\x20c,\x20isUsed'+'(c));\x0a\x20\x20\x20\x20'+'c\x20=\x20select'+'(textureSa'+'mpleLevel('+'source,\x20so'+'urceSample'+'r,\x20input.v'+'Uv0\x20+\x20vec2'+'f(0.0,\x20-un'+'iform.pixe'+'lOffset.y)'+',\x200.0),\x20c,'+'\x20isUsed(c)'+');\x0a\x20\x20\x20\x20c\x20='+'\x20select(te'+'xtureSampl'+'eLevel(sou'+'rce,\x20sourc'+'eSampler,\x20'+'input.vUv0'+'\x20+\x20vec2f(u'+'niform.pix'+'elOffset.x'+',\x20-uniform'+'.pixelOffs'+'et.y),\x200.0'+'),\x20c,\x20isUs'+'ed(c));\x0a\x20\x20'+'\x20\x20c\x20=\x20sele'+'ct(texture'+'SampleLeve'+'l(source,\x20'+'sourceSamp'+'ler,\x20input'+'.vUv0\x20+\x20ve'+'c2f(-unifo'+'rm.pixelOf'+'fset.x,\x200.'+'0),\x200.0),\x20'+'c,\x20isUsed('+'c));\x0a\x20\x20\x20\x20c'+'\x20=\x20select('+'textureSam'+'pleLevel(s'+'ource,\x20sou'+'rceSampler'+',\x20input.vU'+'v0\x20+\x20vec2f'+'(uniform.p'+('ixelOffset'+'.x,\x200.0),\x20'+'0.0),\x20c,\x20i'+'sUsed(c));'+'\x0a\x20\x20\x20\x20c\x20=\x20s'+'elect(text'+'ureSampleL'+'evel(sourc'+'e,\x20sourceS'+'ampler,\x20in'+'put.vUv0\x20+'+'\x20vec2f(-un'+'iform.pixe'+'lOffset.x,'+'\x20uniform.p'+'ixelOffset'+'.y),\x200.0),'+'\x20c,\x20isUsed'+'(c));\x0a\x20\x20\x20\x20'+'c\x20=\x20select'+'(textureSa'+'mpleLevel('+'source,\x20so'+'urceSample'+'r,\x20input.v'+'Uv0\x20+\x20vec2'+'f(0.0,\x20uni'+'form.pixel'+'Offset.y),'+'\x200.0),\x20c,\x20'+'isUsed(c))'+';\x0a\x20\x20\x20\x20c\x20=\x20'+'select(tex'+'tureSample'+'Level(sour'+'ce,\x20source'+'Sampler,\x20i'+'nput.vUv0\x20'+'+\x20uniform.'+'pixelOffse'+'t,\x200.0),\x20c'+',\x20isUsed(c'+'));\x0a\x0a\x20\x20\x20\x20v'+'ar\x20output:'+'\x20FragmentO'+'utput;\x0a\x20\x20\x20'+'\x20output.co'+'lor\x20=\x20c;\x0a\x20'+'\x20\x20\x20return\x20'+'output;\x0a}\x0a'),Dg=-0x45f+-0x1763+0x1bd1,oL={'glslBilateralDeNoisePS':iL,'glslDilatePS':rL},lL={'wgslBilateralDeNoisePS':aL,'wgslDilatePS':nL};class cL{constructor(_0x8a6e7f){h(this,'shaderDila'+'te',[]),h(this,'shaderDeno'+'ise',[]),(this['device']=_0x8a6e7f,Pe['get'](this['device'],Fe)['add'](oL),Pe['get'](this['device'],it)['add'](lL),this['constantTe'+'xSource']=_0x8a6e7f['scope']['resolve']('source'),this['constantPi'+'xelOffset']=_0x8a6e7f['scope']['resolve']('pixelOffse'+'t'),this['pixelOffse'+'t']=new Float32Array(-0x322*-0xa+-0x20c9+0x177),this['sigmas']=null,this['constantSi'+'gmas']=null,this['kernel']=null);}['setSourceT'+'exture'](_0x5e8164){this['constantTe'+'xSource']['setValue'](_0x5e8164);}['prepare'](_0x416471,_0x4ae014){this['pixelOffse'+'t'][0x379*-0xb+-0x1c53+0x4286]=(0x350+-0x13b*0xe+-0x1fd*-0x7)/_0x416471,this['pixelOffse'+'t'][0x4cd*0x8+-0x31b*0x3+-0x92*0x33]=(-0x1ca9+-0x32e+-0x1*-0x1fd8)/_0x4ae014,this['constantPi'+'xelOffset']['setValue'](this['pixelOffse'+'t']);}['prepareDen'+'oise'](_0x5299b9,_0x42adae,_0x3e25e4){const _0x41fa0a=_0x3e25e4?0x11*0x185+-0xe01+-0x4*0x2f5:0x1a*-0xad+-0x1*0x1df1+0x2f84;if(!this['shaderDeno'+'ise'][_0x41fa0a]){const _0x5b8992=new Map();_0x5b8992['set']('{MSIZE}',-0x1c2c+-0x1b05+0x3740),_0x3e25e4&&_0x5b8992['set']('HDR',''),this['shaderDeno'+'ise'][_0x41fa0a]=$t['createShad'+'er'](this['device'],{'uniqueName':'lmBilatera'+'lDeNoise-'+(_0x3e25e4?'hdr':'rgbm'),'attributes':{'vertex_position':Me},'vertexGLSL':Pe['get'](this['device'],Fe)['get']('fullscreen'+'QuadVS'),'vertexWGSL':Pe['get'](this['device'],it)['get']('fullscreen'+'QuadVS'),'fragmentGLSL':Pe['get'](this['device'],Fe)['get']('glslBilate'+'ralDeNoise'+'PS'),'fragmentWGSL':Pe['get'](this['device'],it)['get']('wgslBilate'+'ralDeNoise'+'PS'),'fragmentDefines':_0x5b8992}),this['sigmas']=new Float32Array(0x2658+-0x674+-0x1fe2),this['constantSi'+'gmas']=this['device']['scope']['resolve']('sigmas'),this['constantKe'+'rnel']=this['device']['scope']['resolve']('kernel[0]'),this['bZnorm']=this['device']['scope']['resolve']('bZnorm');}this['sigmas'][-0x1f1d+0x60*0x2f+-0xd7d*-0x1]=_0x5299b9,this['sigmas'][0xf18+0x11a*0x3+-0x1*0x1265]=_0x42adae,this['constantSi'+'gmas']['setValue'](this['sigmas']),this['evaluateDe'+'noiseUnifo'+'rms'](_0x5299b9,_0x42adae);}['getDenoise'](_0x51be8e){const _0x45e75f=_0x51be8e?-0x192*-0x8+-0x1*-0x11b5+-0x1e45:0x291*0x1+0x13c*0x1a+-0x4*0x8aa;return this['shaderDeno'+'ise'][_0x45e75f];}['getDilate'](_0x21828a,_0xf7394){const _0x227ed5=_0xf7394?0x979*-0x1+0x1*-0x130f+0x1c88:-0xc10+0x1*-0x1709+0x231a;if(!this['shaderDila'+'te'][_0x227ed5]){const _0x152c30=_0xf7394?'#define\x20HD'+'R\x0a':'';this['shaderDila'+'te'][_0x227ed5]=$t['createShad'+'er'](_0x21828a,{'uniqueName':'lmDilate-'+(_0xf7394?'hdr':'rgbm'),'attributes':{'vertex_position':Me},'vertexGLSL':Pe['get'](this['device'],Fe)['get']('fullscreen'+'QuadVS'),'vertexWGSL':Pe['get'](this['device'],it)['get']('fullscreen'+'QuadVS'),'fragmentGLSL':_0x152c30+Pe['get'](this['device'],Fe)['get']('glslDilate'+'PS'),'fragmentWGSL':_0x152c30+Pe['get'](this['device'],it)['get']('wgslDilate'+'PS')});}return this['shaderDila'+'te'][_0x227ed5];}['evaluateDe'+'noiseUnifo'+'rms'](_0x54f5f8,_0x2b6292){function _0x481fcf(_0x318b8d,_0x2d092){return(-0x1eb6+0x1098+0xe1e+0.39894)*Math['exp'](-(-0x1a74+0x1a6a+-0xa*-0x1+0.5)*_0x318b8d*_0x318b8d/(_0x2d092*_0x2d092))/_0x2d092;}this['kernel']=this['kernel']||new Float32Array(Dg);const _0x357c2f=this['kernel'],_0x5f2a00=Math['floor']((Dg-(0x1d41+0xaa1+-0x27e1))/(-0x1914+0x216a+-0x854));for(let _0x177e8a=-0x7*-0x3cd+-0x126d+-0x82e;_0x177e8a<=_0x5f2a00;++_0x177e8a){const _0x30bc37=_0x481fcf(_0x177e8a,_0x54f5f8);_0x357c2f[_0x5f2a00+_0x177e8a]=_0x30bc37,_0x357c2f[_0x5f2a00-_0x177e8a]=_0x30bc37;}this['constantKe'+'rnel']['setValue'](this['kernel']);const _0x2752c5=(-0x225f+0x64c*-0x4+-0x10*-0x3b9)/_0x481fcf(0x1ef4+-0x2*-0x2bd+-0x246e,_0x2b6292);this['bZnorm']['setValue'](_0x2752c5);}}class hL extends ys{constructor(_0x5ba5c0,_0x52cdd3,_0x592ec7,_0x2e8359,_0x31b3be,_0x255700){super(_0x5ba5c0),h(this,'viewBindGr'+'oups',[]),(this['renderer']=_0x52cdd3,this['camera']=_0x592ec7,this['worldClust'+'ers']=_0x2e8359,this['receivers']=_0x31b3be,this['lightArray']=_0x255700);}['destroy'](){this['viewBindGr'+'oups']['forEach'](_0x1411b4=>{_0x1411b4['defaultUni'+'formBuffer']['destroy'](),_0x1411b4['destroy']();}),this['viewBindGr'+'oups']['length']=0xa7d+0x24e*0x7+-0x1a9f;}['execute'](){const _0x166d48=this['device'];Q['pushGpuMar'+'ker'](_0x166d48,'Lightmappe'+'r');const {renderer:_0x2b0339,camera:_0x2fd981,receivers:_0x2931b4,renderTarget:_0x23e43a,worldClusters:_0x155121,lightArray:_0x396b3c}=this;_0x2b0339['renderForw'+'ardLayer'](_0x2fd981,_0x23e43a,null,void(0x124f+0x1f44*-0x1+0x6b*0x1f),Aa,this['viewBindGr'+'oups'],{'meshInstances':_0x2931b4,'splitLights':_0x396b3c,'lightClusters':_0x155121}),Q['popGpuMark'+'er'](_0x166d48);}}const dL=-0x8d*-0x7+0xd9e+0x1e5*-0x5,fL=0x2632+0x131e+-0x3950,uL=0x2020+0x2*-0x6cb+-0x1289,xc=new D();class pL{constructor(_0x2b8079,_0xc0121e,_0x4b4de1,_0xf36ddc,_0x4360c3){this['device']=_0x2b8079,this['root']=_0xc0121e,this['scene']=_0x4b4de1,this['renderer']=_0xf36ddc,this['assets']=_0x4360c3,this['shadowMapC'+'ache']=_0xf36ddc['shadowMapC'+'ache'],this['_tempSet']=new Set(),this['_initCalle'+'d']=!(-0x174c+0xb4f+-0x133*-0xa),this['passMateri'+'als']=[],this['ambientAOM'+'aterial']=null,this['fog']='',this['ambientLig'+'ht']=new ie(),this['renderTarg'+'ets']=new Map(),this['stats']={'renderPasses':0x0,'lightmapCount':0x0,'totalRenderTime':0x0,'forwardTime':0x0,'fboTime':0x0,'shadowMapTime':0x0,'compileTime':0x0,'shadersLinked':0x0};}['destroy'](){var _0x2b289e;zi['decRef'](this['blackTex']),this['blackTex']=null,zi['destroy'](),this['device']=null,this['root']=null,this['scene']=null,this['renderer']=null,this['assets']=null,(_0x2b289e=this['camera'])==null||_0x2b289e['destroy'](),this['camera']=null;}['initBake'](_0x346fb8){if(this['bakeHDR']=this['scene']['lightmapPi'+'xelFormat']!==Ne,!this['_initCalle'+'d']){this['_initCalle'+'d']=!(0x3d6+0x1b28+-0x1efe),this['lightmapFi'+'lters']=new cL(_0x346fb8),this['constantBa'+'keDir']=_0x346fb8['scope']['resolve']('bakeDir'),this['materials']=[],this['blackTex']=new _e(this['device'],{'width':0x4,'height':0x4,'format':Ne,'type':Zi,'name':'lightmapBl'+'ack'}),zi['incRef'](this['blackTex']);const _0x48c89b=new Fl();_0x48c89b['clearColor']['set'](-0x10c2+0x17e*-0x18+-0x6*-0x8c3,0x106+0x1225+-0x2bd*0x7,0xc*-0x28b+0x47b+0x1a09,0x1*-0x16bd+0x1*-0xb32+-0x21ef*-0x1),_0x48c89b['clearColor'+'Buffer']=!(0x1e2a+-0x10cc+-0xd5e),_0x48c89b['clearDepth'+'Buffer']=!(0x3*0xf7+-0x9e3*0x1+0x6ff),_0x48c89b['clearStenc'+'ilBuffer']=!(0x1b4b+-0xcd1+-0xe79),_0x48c89b['frustumCul'+'ling']=!(-0x252e+-0xf43+0x1a39*0x2),_0x48c89b['projection']=En,_0x48c89b['aspectRati'+'o']=0x1d53+-0x15f*0x9+-0x10fb,_0x48c89b['node']=new Ie(),this['camera']=_0x48c89b,this['camera']['shaderPara'+'ms']['gammaCorre'+'ction']=Ll,this['camera']['shaderPara'+'ms']['toneMappin'+'g']=sm;}if(this['scene']['clusteredL'+'ightingEna'+'bled']){const _0x9a00d0=new Mv(_0x346fb8['supportsAr'+'eaLights'],_0x346fb8['maxTexture'+'Size'],()=>{});this['lightingPa'+'rams']=_0x9a00d0;const _0x5ea5ce=this['scene']['lighting'];_0x9a00d0['shadowsEna'+'bled']=_0x5ea5ce['shadowsEna'+'bled'],_0x9a00d0['shadowAtla'+'sResolutio'+'n']=_0x5ea5ce['shadowAtla'+'sResolutio'+'n'],_0x9a00d0['cookiesEna'+'bled']=_0x5ea5ce['cookiesEna'+'bled'],_0x9a00d0['cookieAtla'+'sResolutio'+'n']=_0x5ea5ce['cookieAtla'+'sResolutio'+'n'],_0x9a00d0['areaLights'+'Enabled']=_0x5ea5ce['areaLights'+'Enabled'],_0x9a00d0['cells']=new D(0x59*-0x6d+0xf79+0x166f*0x1,-0x5fc+-0x181c+-0x3*-0xa09,-0x21e*-0x6+-0xf05*-0x1+-0x2*0xddb),_0x9a00d0['maxLightsP'+'erCell']=-0x1362+-0xc67*-0x2+0x2b4*-0x2,this['worldClust'+'ers']=new cu(_0x346fb8),this['worldClust'+'ers']['name']='ClusterLig'+'htmapper';}}['finishBake'](_0x5b4fbd){this['materials']=[];function _0x4318a8(_0x2e2ec1){zi['decRef'](_0x2e2ec1['colorBuffe'+'r']),_0x2e2ec1['destroy']();}this['renderTarg'+'ets']['forEach'](_0x4e83fa=>{_0x4318a8(_0x4e83fa);}),this['renderTarg'+'ets']['clear'](),_0x5b4fbd['forEach'](_0x3f903c=>{_0x3f903c['renderTarg'+'ets']['forEach'](_0x329590=>{_0x4318a8(_0x329590);}),_0x3f903c['renderTarg'+'ets']['length']=-0x200b+0x16f2+0x919;}),this['ambientAOM'+'aterial']=null,this['worldClust'+'ers']&&(this['worldClust'+'ers']['destroy'](),this['worldClust'+'ers']=null);}['createMate'+'rialForPas'+'s'](_0x154dc8,_0x129d7b,_0x3fa792){const _0x4411f3=new Ut();return _0x4411f3['name']='lmMaterial'+'-pass:'+_0x129d7b+'-ambient:'+_0x3fa792,_0x4411f3['setDefine']('UV1LAYOUT',''),_0x4411f3['setDefine']('LIT_LIGHTM'+'AP_BAKING',''),_0x129d7b===fL?(_0x4411f3['setDefine']('LIT_LIGHTM'+'AP_BAKING_'+'COLOR',''),_0x3fa792?_0x4411f3['setDefine']('LIT_LIGHTM'+'AP_BAKING_'+'ADD_AMBIEN'+'T',''):_0x4411f3['ambient']=new ie(0x1*0x2b8+0x13a3*-0x1+0x47*0x3d,0x3b*-0x13+-0x1*-0x4a9+0x3*-0x18,-0x198a+0x168e+0xbf*0x4),this['bakeHDR']||_0x4411f3['setDefine']('LIGHTMAP_R'+'GBM',''),_0x4411f3['lightMap']=this['blackTex']):(_0x4411f3['setDefine']('LIT_LIGHTM'+'AP_BAKING_'+'DIR',''),_0x4411f3['setDefine']('STD_LIGHTM'+'AP_DIR','')),_0x4411f3['cull']=bt,_0x4411f3['forceUv1']=!(0x1213+0x57*-0x6+-0x1009*0x1),_0x4411f3['update'](),_0x4411f3;}['createMate'+'rials'](_0xa0bb01,_0xaceb10,_0x543dc1){for(let _0x27b561=-0x3b9*-0x8+-0x25*-0xc9+-0x3ad5*0x1;_0x27b561<_0x543dc1;_0x27b561++)this['passMateri'+'als'][_0x27b561]||(this['passMateri'+'als'][_0x27b561]=this['createMate'+'rialForPas'+'s'](_0xaceb10,_0x27b561,!(0x4*0x47+0x1216*-0x2+-0x1*-0x2311)));this['ambientAOM'+'aterial']||(this['ambientAOM'+'aterial']=this['createMate'+'rialForPas'+'s'](_0xaceb10,0x2557*-0x1+-0x83f+0x2d96,!(-0x88*-0x26+-0xf7e*0x1+0x2*-0x259)),this['ambientAOM'+'aterial']['onUpdateSh'+'ader']=function(_0x52405c){return _0x52405c['litOptions']['lightMapWi'+'thoutAmbie'+'nt']=!(0x12fe*0x2+0x23fb+-0xecb*0x5),_0x52405c['litOptions']['separateAm'+'bient']=!(0x1*0x456+-0x18fe+0x14a8),_0x52405c;});}['createText'+'ure'](_0x3febee,_0x414048){return new _e(this['device'],{'profilerHint':vy,'width':_0x3febee,'height':_0x3febee,'format':this['scene']['lightmapPi'+'xelFormat'],'mipmaps':!(0x2a7*0x5+-0x243e+0x5bf*0x4),'type':this['bakeHDR']?Ds:Zi,'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue,'name':_0x414048});}['collectMod'+'els'](_0x172596,_0x22cd14,_0x27f1d1){var _0x433e85,_0x2ad20e,_0x242ec4;if(!_0x172596['enabled'])return;let _0x20d19c;if((_0x433e85=_0x172596['model'])!=null&&_0x433e85['model']&&((_0x2ad20e=_0x172596['model'])!=null&&_0x2ad20e['enabled'])&&(_0x27f1d1&&_0x27f1d1['push'](new vc(_0x172596)),_0x172596['model']['lightmappe'+'d']&&_0x22cd14&&(_0x20d19c=_0x172596['model']['model']['meshInstan'+'ces'])),(_0x242ec4=_0x172596['render'])!=null&&_0x242ec4['enabled']&&(_0x27f1d1&&_0x27f1d1['push'](new vc(_0x172596)),_0x172596['render']['lightmappe'+'d']&&_0x22cd14&&(_0x20d19c=_0x172596['render']['meshInstan'+'ces'])),_0x20d19c){let _0x52c1c4=!(-0x824+-0x1da2*-0x1+-0x15*0x106);for(let _0x1a71b6=0x20a3+-0x1de7+-0x2bc;_0x1a71b6<_0x20d19c['length'];_0x1a71b6++)if(!_0x20d19c[_0x1a71b6]['mesh']['vertexBuff'+'er']['format']['hasUv1']){w['log']('Lightmappe'+'r\x20-\x20node\x20['+_0x172596['name']+(']\x20contains'+'\x20meshes\x20wi'+'thout\x20requ'+'ired\x20uv1,\x20'+'excluding\x20'+'it\x20from\x20ba'+'king.')),_0x52c1c4=!(0x164c+0x1a69*0x1+0x30b4*-0x1);break;}if(_0x52c1c4){const _0x11f8ea=[];for(let _0x2162bd=0x1a6c*0x1+-0x1a88+-0x4*-0x7;_0x2162bd<_0x20d19c['length'];_0x2162bd++){const _0x3a3a39=_0x20d19c[_0x2162bd]['mesh'];this['_tempSet']['has'](_0x3a3a39)?_0x22cd14['push'](new vc(_0x172596,[_0x20d19c[_0x2162bd]])):_0x11f8ea['push'](_0x20d19c[_0x2162bd]),this['_tempSet']['add'](_0x3a3a39);}this['_tempSet']['clear'](),_0x11f8ea['length']>0x1*-0x501+0x4*-0x454+0x1651*0x1&&_0x22cd14['push'](new vc(_0x172596,_0x11f8ea));}}for(let _0x1a8cae=0x22a+-0x347+0x11d;_0x1a8cae<_0x172596['_children']['length'];_0x1a8cae++)this['collectMod'+'els'](_0x172596['_children'][_0x1a8cae],_0x22cd14,_0x27f1d1);}['prepareSha'+'dowCasters'](_0x21d33b){const _0x124141=[];for(let _0x49c49c=-0xb2*0x16+0x7*-0xec+-0x10*-0x15c;_0x49c49c<_0x21d33b['length'];_0x49c49c++){const _0x37e631=_0x21d33b[_0x49c49c]['component'];if(_0x37e631['castShadow'+'s']=_0x37e631['castShadow'+'sLightmap'],_0x37e631['castShadow'+'sLightmap']){const _0x28c40c=_0x21d33b[_0x49c49c]['meshInstan'+'ces'];for(let _0x3b374f=0x1ab8+-0x97a+-0x2*0x89f;_0x3b374f<_0x28c40c['length'];_0x3b374f++)_0x28c40c[_0x3b374f]['visibleThi'+'sFrame']=!(-0x1*0x14eb+0x26c8+0x10d*-0x11),_0x124141['push'](_0x28c40c[_0x3b374f]);}}return _0x124141;}['updateTran'+'sforms'](_0x2b38a6){for(let _0x5b6d36=0x1*0x1321+0x365*0x3+0x1c*-0x10c;_0x5b6d36<_0x2b38a6['length'];_0x5b6d36++){const _0x5ea9c2=_0x2b38a6[_0x5b6d36]['meshInstan'+'ces'];for(let _0xb26235=-0x19*0x23+-0x1*-0x53f+-0x1d4;_0xb26235<_0x5ea9c2['length'];_0xb26235++)_0x5ea9c2[_0xb26235]['node']['getWorldTr'+'ansform']();}}['calculateL'+'ightmapSiz'+'e'](_0x161ff3){let _0x430b8b;const _0x5bb4f4=this['scene']['lightmapSi'+'zeMultipli'+'er']||0xc*0x1e1+0x1f50+0x2c*-0x139,_0x547eca=xc;let _0x36cd40,_0x51d373;_0x161ff3['model']?(_0x51d373=_0x161ff3['model']['lightmapSi'+'zeMultipli'+'er'],_0x161ff3['model']['asset']?(_0x430b8b=this['assets']['get'](_0x161ff3['model']['asset'])['data'],_0x430b8b['area']&&(_0x36cd40=_0x430b8b['area'])):_0x161ff3['model']['_area']&&(_0x430b8b=_0x161ff3['model'],_0x430b8b['_area']&&(_0x36cd40=_0x430b8b['_area']))):_0x161ff3['render']&&(_0x51d373=_0x161ff3['render']['lightmapSi'+'zeMultipli'+'er'],_0x161ff3['render']['type']!=='asset'&&_0x161ff3['render']['_area']&&(_0x430b8b=_0x161ff3['render'],_0x430b8b['_area']&&(_0x36cd40=_0x430b8b['_area'])));const _0x4ef51e={'x':0x1,'y':0x1,'z':0x1,'uv':0x1};_0x36cd40&&(_0x4ef51e['x']=_0x36cd40['x'],_0x4ef51e['y']=_0x36cd40['y'],_0x4ef51e['z']=_0x36cd40['z'],_0x4ef51e['uv']=_0x36cd40['uv']);const _0x33e875=_0x51d373||0x2395+0x64d+-0x29e1*0x1;_0x4ef51e['x']*=_0x33e875,_0x4ef51e['y']*=_0x33e875,_0x4ef51e['z']*=_0x33e875;const _0xddb247=_0x161ff3['render']||_0x161ff3['model'],_0x430ee2=this['computeNod'+'eBounds'](_0xddb247['meshInstan'+'ces']);_0x547eca['copy'](_0x430ee2['halfExtent'+'s']);let _0x562f07=_0x4ef51e['x']*_0x547eca['y']*_0x547eca['z']+_0x4ef51e['y']*_0x547eca['x']*_0x547eca['z']+_0x4ef51e['z']*_0x547eca['x']*_0x547eca['y'];return _0x562f07/=_0x4ef51e['uv'],_0x562f07=Math['sqrt'](_0x562f07),Math['min'](Y['nextPowerO'+'fTwo'](_0x562f07*_0x5bb4f4),this['scene']['lightmapMa'+'xResolutio'+'n']||dL);}['setLightma'+'pping'](_0x42a1fe,_0x297ee1,_0x3654a7,_0x12b237){for(let _0x4225c4=-0x4af*0x6+0x1c*0xe0+0x39a*0x1;_0x4225c4<_0x42a1fe['length'];_0x4225c4++){const _0x1cc110=_0x42a1fe[_0x4225c4],_0x34c0f3=_0x1cc110['meshInstan'+'ces'];for(let _0x56742e=0x1f95+0xbe1*-0x1+0x1a*-0xc2;_0x56742e<_0x34c0f3['length'];_0x56742e++){const _0x303da1=_0x34c0f3[_0x56742e];if(_0x303da1['setLightma'+'pped'](_0x297ee1),_0x297ee1){_0x12b237&&(_0x303da1['_shaderDef'+'s']|=_0x12b237),_0x303da1['mask']=di;for(let _0x83aadd=0x5bb*0x6+-0x14b5+0x9*-0x185;_0x83aadd<_0x3654a7;_0x83aadd++){const _0x5de193=_0x1cc110['renderTarg'+'ets'][_0x83aadd]['colorBuffe'+'r'];_0x5de193['minFilter']=vt,_0x5de193['magFilter']=vt,_0x303da1['setRealtim'+'eLightmap'](He['lightmapPa'+'ramNames'][_0x83aadd],_0x5de193);}}}}}['bake'](_0xf3b8af,_0x9fff5a=jc){const _0x4a30d1=this['device'],_0xf6c112=de();this['scene']['_updateSky'+'Mesh'](),_0x4a30d1['fire']('lightmappe'+'r:start',{'timestamp':_0xf6c112,'target':this}),this['stats']['renderPass'+'es']=0x1285+0x24ac+-0x3731,this['stats']['shadowMapT'+'ime']=-0x2f*-0xd0+-0x1fd2+0x146*-0x5,this['stats']['forwardTim'+'e']=-0x18ee+-0x2*0x56+-0x2*-0xccd;const _0x347848=_0x4a30d1['_shaderSta'+'ts']['linked'],_0x3a6810=_0x4a30d1['_renderTar'+'getCreatio'+'nTime'],_0x26aa9f=_0x4a30d1['_shaderSta'+'ts']['compileTim'+'e'],_0x517da4=[],_0x5cf4bd=[];if(_0xf3b8af){for(let _0xa80a99=0x207e+-0x17*0xea+-0xb78;_0xa80a99<_0xf3b8af['length'];_0xa80a99++)this['collectMod'+'els'](_0xf3b8af[_0xa80a99],_0x517da4,null);this['collectMod'+'els'](this['root'],null,_0x5cf4bd);}else this['collectMod'+'els'](this['root'],_0x517da4,_0x5cf4bd);if(Q['pushGpuMar'+'ker'](this['device'],'LMBake'),_0x517da4['length']>-0x161*0x5+-0x1*-0x14bc+-0xdd7){this['renderer']['shadowRend'+'erer']['frameUpdat'+'e']();const _0x5f0902=_0x9fff5a===jc?0x2*0x349+-0x1c6e*0x1+-0x74a*-0x3:-0xa7f*-0x1+0x3*-0x5eb+0xd*0x8f;this['setLightma'+'pping'](_0x517da4,!(0x1b5f+0x1d3*-0xb+-0x74d),_0x5f0902),this['initBake'](_0x4a30d1),this['bakeIntern'+'al'](_0x5f0902,_0x517da4,_0x5cf4bd);let _0x1e9e84=ou;_0x9fff5a===jc&&(_0x1e9e84|=uv),this['scene']['ambientBak'+'e']&&(_0x1e9e84|=pv),this['setLightma'+'pping'](_0x517da4,!(-0x4*-0x83e+0x1*-0xbb7+-0x1541),_0x5f0902,_0x1e9e84),this['finishBake'](_0x517da4);}Q['popGpuMark'+'er'](this['device']);const _0x23318a=de();this['stats']['totalRende'+'rTime']=_0x23318a-_0xf6c112,this['stats']['shadersLin'+'ked']=_0x4a30d1['_shaderSta'+'ts']['linked']-_0x347848,this['stats']['compileTim'+'e']=_0x4a30d1['_shaderSta'+'ts']['compileTim'+'e']-_0x26aa9f,this['stats']['fboTime']=_0x4a30d1['_renderTar'+'getCreatio'+'nTime']-_0x3a6810,this['stats']['lightmapCo'+'unt']=_0x517da4['length'],_0x4a30d1['fire']('lightmappe'+'r:end',{'timestamp':_0x23318a,'target':this});}['allocateTe'+'xtures'](_0x58f129,_0x96d8fc){for(let _0x44efce=-0x1*0x797+-0x4c9+0x1*0xc60;_0x44efce<_0x58f129['length'];_0x44efce++){const _0x355a75=_0x58f129[_0x44efce],_0x4b01c9=this['calculateL'+'ightmapSiz'+'e'](_0x355a75['node']);for(let _0x1b3823=-0x19a4+-0xaa+0x1a4e;_0x1b3823<_0x96d8fc;_0x1b3823++){const _0x315d81=this['createText'+'ure'](_0x4b01c9,'lightmappe'+'r_lightmap'+'_'+_0x44efce);zi['incRef'](_0x315d81),_0x355a75['renderTarg'+'ets'][_0x1b3823]=new gt({'colorBuffer':_0x315d81,'depth':!(0x203*-0xa+0x186b+-0x44c*0x1)});}if(!this['renderTarg'+'ets']['has'](_0x4b01c9)){const _0x559b7d=this['createText'+'ure'](_0x4b01c9,'lightmappe'+'r_temp_lig'+'htmap_'+_0x4b01c9);zi['incRef'](_0x559b7d),this['renderTarg'+'ets']['set'](_0x4b01c9,new gt({'colorBuffer':_0x559b7d,'depth':!(0xffd+-0x4dd*0x1+-0xb1f)}));}}}['prepareLig'+'htsToBake'](_0x5be363,_0x3b540b){if(this['scene']['ambientBak'+'e']){const _0x18974d=new Mg(this);_0x3b540b['push'](_0x18974d);}const _0x1aa48c=this['renderer']['lights'];for(let _0x422c40=0x1ab1+-0x176*0x19+0x3*0x347;_0x422c40<_0x1aa48c['length'];_0x422c40++){const _0x3df57c=_0x1aa48c[_0x422c40],_0x5ccfbc=new sL(this,_0x3df57c);_0x5be363['push'](_0x5ccfbc),_0x3df57c['enabled']&&(_0x3df57c['mask']&fi)!==-0x25c2+-0x674+0x2c36&&(_0x3df57c['mask']=fi|di|Ss,_0x3df57c['shadowUpda'+'teMode']=_0x3df57c['type']===ve?lm:xr,_0x3b540b['push'](_0x5ccfbc));}_0x3b540b['sort']();}['restoreLig'+'hts'](_0x4ece29){for(let _0x3f8430=0x1*-0x211c+0x52f+0x3*0x94f;_0x3f8430<_0x4ece29['length'];_0x3f8430++)_0x4ece29[_0x3f8430]['restore']();}['setupScene'](){this['ambientLig'+'ht']['copy'](this['scene']['ambientLig'+'ht']),this['scene']['ambientBak'+'e']||this['scene']['ambientLig'+'ht']['set'](0xe99+0x2308+-0x31a1,-0x1599+0x54b+0x104e,0x15*0x56+-0xafb+0x3ed),this['renderer']['setSceneCo'+'nstants'](),this['device']['scope']['resolve']('ambientBak'+'eOcclusion'+'Contrast')['setValue'](this['scene']['ambientBak'+'eOcclusion'+'Contrast']),this['device']['scope']['resolve']('ambientBak'+'eOcclusion'+'Brightness')['setValue'](this['scene']['ambientBak'+'eOcclusion'+'Brightness']);}['restoreSce'+'ne'](){this['scene']['ambientLig'+'ht']['copy'](this['ambientLig'+'ht']);}['computeNod'+'eBounds'](_0x34f27e){const _0x9c5aad=new De();if(_0x34f27e['length']>0x2f5+0x2*0xece+-0x15*0x18d){_0x9c5aad['copy'](_0x34f27e[-0x1*-0x1247+0x2177+0x1*-0x33be]['aabb']);for(let _0x36779b=-0x1240+-0x1*0x6b2+0x18f3;_0x36779b<_0x34f27e['length'];_0x36779b++)_0x9c5aad['add'](_0x34f27e[_0x36779b]['aabb']);}return _0x9c5aad;}['computeNod'+'esBounds'](_0x11972a){for(let _0x373a1c=0xf*0x1ad+-0xd*-0x20f+-0x5b*0x92;_0x373a1c<_0x11972a['length'];_0x373a1c++){const _0x215712=_0x11972a[_0x373a1c]['meshInstan'+'ces'];_0x11972a[_0x373a1c]['bounds']=this['computeNod'+'eBounds'](_0x215712);}}['computeBou'+'nds'](_0x41e246){const _0x512251=new De();for(let _0x223119=0x4+-0x2*-0xaab+-0x155a;_0x223119<_0x41e246['length'];_0x223119++){_0x512251['copy'](_0x41e246[-0xc57*0x1+0x36f*-0xb+-0x190e*-0x2]['aabb']);for(let _0x2ab96b=0xd4b*-0x1+0x4*0x8c3+-0x15c0;_0x2ab96b<_0x41e246['length'];_0x2ab96b++)_0x512251['add'](_0x41e246[_0x2ab96b]['aabb']);}return _0x512251;}['backupMate'+'rials'](_0x2cd7a7){for(let _0x485642=0x1*-0xf0b+-0xa*-0x65+0xb19;_0x485642<_0x2cd7a7['length'];_0x485642++)this['materials'][_0x485642]=_0x2cd7a7[_0x485642]['material'];}['restoreMat'+'erials'](_0xff6d20){for(let _0x3b88fa=0x23b*-0xf+0x1*-0x143b+-0x1ad8*-0x2;_0x3b88fa<_0xff6d20['length'];_0x3b88fa++)_0xff6d20[_0x3b88fa]['material']=this['materials'][_0x3b88fa];}['lightCamer'+'aPrepare'](_0x3b2caf,_0x353c02){const _0x349aa9=_0x353c02['light'];let _0x466fce;return _0x349aa9['type']===Ze&&(_0x466fce=_0x349aa9['getRenderD'+'ata'](null,0x1f27+-0x136*0x16+0xa5*-0x7)['shadowCame'+'ra'],_0x466fce['_node']['setPositio'+'n'](_0x349aa9['_node']['getPositio'+'n']()),_0x466fce['_node']['setRotatio'+'n'](_0x349aa9['_node']['getRotatio'+'n']()),_0x466fce['_node']['rotateLoca'+'l'](-(-0x1*-0x859+-0x11fd+0x9fe),-0x234b+-0x1ed+0x2538,-0xf1e+-0x2f*-0x52+-0x8*-0x2),_0x466fce['projection']=ni,_0x466fce['nearClip']=_0x349aa9['attenuatio'+'nEnd']/(-0x2709+0xcd3+0x1e*0x101),_0x466fce['farClip']=_0x349aa9['attenuatio'+'nEnd'],_0x466fce['aspectRati'+'o']=0x743+-0x76*0x7+0x81*-0x8,_0x466fce['fov']=_0x349aa9['_outerCone'+'Angle']*(-0x4+0x10d2+0x19*-0xac),this['renderer']['updateCame'+'raFrustum'](_0x466fce)),_0x466fce;}['lightCamer'+'aPrepareAn'+'dCull'](_0xbf454f,_0x339bd6,_0x21701b,_0x3adfce){const _0x8e9854=_0xbf454f['light'];let _0x11015d=!(-0x63c+0x1cf4+-0x16b8);if(_0x8e9854['type']===ve){xc['copy'](_0x3adfce['center']),xc['y']+=_0x3adfce['halfExtent'+'s']['y'],this['camera']['node']['setPositio'+'n'](xc),this['camera']['node']['setEulerAn'+'gles'](-(0x1686+-0x1ed7+0x8ab),0x2097+0x216d*-0x1+-0x1*-0xd6,-0xeb0+0xd*-0x177+-0x5*-0x6bf),this['camera']['nearClip']=0x1fe6*-0x1+0xcd1*-0x3+0x4659,this['camera']['farClip']=_0x3adfce['halfExtent'+'s']['y']*(0x23be+-0x2c1+-0x20fb);const _0x1659b9=Math['max'](_0x3adfce['halfExtent'+'s']['x'],_0x3adfce['halfExtent'+'s']['z']);this['camera']['orthoHeigh'+'t']=_0x1659b9;}else _0xbf454f['lightBound'+'s']['intersects'](_0x339bd6['bounds'])||(_0x11015d=!(0x1dc8+-0x1*-0x177f+-0x3546));if(_0x8e9854['type']===Ze){let _0x1b26aa=!(0x1496+0x1ffe+0x3493*-0x1);const _0x57f434=_0x339bd6['meshInstan'+'ces'];for(let _0x445924=-0x2632+0x1cf9+0x939;_0x445924<_0x57f434['length'];_0x445924++)if(_0x57f434[_0x445924]['_isVisible'](_0x21701b)){_0x1b26aa=!(0x1738+-0x1678+-0x30*0x4);break;}_0x1b26aa||(_0x11015d=!(0x75e+0x40a*-0x7+0x35*0x65));}return _0x11015d;}['setupLight'+'Array'](_0x10c3ba,_0x3526c6){_0x10c3ba[ve]['length']=-0x297+-0x23c3*-0x1+-0x212c,_0x10c3ba[Ke]['length']=-0x9*-0x2b+-0x1*-0xf34+0x1*-0x10b7,_0x10c3ba[Ze]['length']=-0x2318+0x4af+-0xf*-0x207,_0x10c3ba[_0x3526c6['type']][-0x1*-0xb51+0x6f2*0x5+-0x2e0b]=_0x3526c6,_0x3526c6['visibleThi'+'sFrame']=!(0x79a+0x1d8d+-0x2527);}['renderShad'+'owMap'](_0x9b0ac2,_0x6ebb7f,_0x45569e,_0x373dd9){const _0x45ea83=_0x373dd9['light'],_0x52ded7=this['scene']['clusteredL'+'ightingEna'+'bled'],_0x5d7a4e=_0x45ea83['castShadow'+'s']&&(!_0x52ded7||this['scene']['lighting']['shadowsEna'+'bled']);if(!_0x6ebb7f&&_0x5d7a4e){if(!_0x45ea83['shadowMap']&&!_0x52ded7&&(_0x45ea83['shadowMap']=this['shadowMapC'+'ache']['get'](this['device'],_0x45ea83)),_0x45ea83['type']===ve){this['renderer']['_shadowRen'+'dererDirec'+'tional']['cull'](_0x45ea83,_0x9b0ac2,this['camera'],_0x45569e);const _0x278b71=this['renderer']['_shadowRen'+'dererDirec'+'tional']['getLightRe'+'nderPass'](_0x45ea83,this['camera']);_0x278b71==null||_0x278b71['render']();}else{if(this['device']['isWebGPU'])return w['warnOnce']('Lightmappe'+'r\x20on\x20WebGP'+'U\x20does\x20not'+'\x20yet\x20suppo'+'rt\x20spot\x20an'+'d\x20omni\x20sha'+'dows.'),!(0x1dcb+0x8*0x2b0+0x1119*-0x3);this['renderer']['_shadowRen'+'dererLocal']['cull'](_0x45ea83,_0x9b0ac2,_0x45569e),this['renderer']['shadowRend'+'erer']['render'](_0x45ea83,this['camera'],!(0x9d1+-0x1*-0x10f3+-0x1ac3));}}return!(-0x1*-0x2d7+-0x156d+0x1296);}['postproces'+'sTextures'](_0x1a5106,_0x8f0530,_0x2b3375){const _0x3d777c=this['lightmapFi'+'lters']['getDilate'](_0x1a5106,this['bakeHDR']);let _0x1207cb;const _0x58b5c3=this['scene']['lightmapFi'+'lterEnable'+'d'];_0x58b5c3&&(this['lightmapFi'+'lters']['prepareDen'+'oise'](this['scene']['lightmapFi'+'lterRange'],this['scene']['lightmapFi'+'lterSmooth'+'ness'],this['bakeHDR']),_0x1207cb=this['lightmapFi'+'lters']['getDenoise'](this['bakeHDR'])),_0x1a5106['setBlendSt'+'ate'](pt['NOBLEND']),_0x1a5106['setDepthSt'+'ate'](Yt['NODEPTH']),_0x1a5106['setStencil'+'State'](null,null);for(let _0x3b16d2=-0x10e*0xb+-0x2*0xf43+0x2a20;_0x3b16d2<_0x8f0530['length'];_0x3b16d2++){const _0x197d9a=_0x8f0530[_0x3b16d2];Q['pushGpuMar'+'ker'](this['device'],'LMPost:'+_0x3b16d2);for(let _0x5c7cba=-0x1552*-0x1+0x3*0x59a+-0x2620;_0x5c7cba<_0x2b3375;_0x5c7cba++){const _0x39e8fd=_0x197d9a['renderTarg'+'ets'][_0x5c7cba],_0x255402=_0x39e8fd['colorBuffe'+'r'],_0x2635da=this['renderTarg'+'ets']['get'](_0x255402['width']),_0x37d2df=_0x2635da['colorBuffe'+'r'];this['lightmapFi'+'lters']['prepare'](_0x255402['width'],_0x255402['height']);for(let _0x3a4071=-0x2ad+0x1*0xed5+0x8*-0x185;_0x3a4071<-0x4*0x47f+-0x1e92+0x308f;_0x3a4071++)this['lightmapFi'+'lters']['setSourceT'+'exture'](_0x255402),Ar(_0x1a5106,_0x2635da,_0x58b5c3&&_0x5c7cba===-0x26b5+0x1fbf+0xa2*0xb&&_0x3a4071===0x1b8e+-0x135d+0x9*-0xe9?_0x1207cb:_0x3d777c),this['lightmapFi'+'lters']['setSourceT'+'exture'](_0x37d2df),Ar(_0x1a5106,_0x39e8fd,_0x3d777c);}Q['popGpuMark'+'er'](this['device']);}}['bakeIntern'+'al'](_0x33d9aa,_0x37eea3,_0x12bc9e){const _0x4eba86=this['scene'],_0x59ea1d=_0x4eba86['layers'],_0xdd651e=this['device'],_0xaa25b3=_0x4eba86['clusteredL'+'ightingEna'+'bled'];this['createMate'+'rials'](_0xdd651e,_0x4eba86,_0x33d9aa),this['setupScene'](),_0x59ea1d['_update'](),this['computeNod'+'esBounds'](_0x37eea3),this['allocateTe'+'xtures'](_0x37eea3,_0x33d9aa),this['renderer']['collectLig'+'hts'](_0x59ea1d);const _0x47be93=[],_0x3030a6=[];this['prepareLig'+'htsToBake'](_0x47be93,_0x3030a6),this['updateTran'+'sforms'](_0x12bc9e);const _0x567db3=this['prepareSha'+'dowCasters'](_0x12bc9e);this['renderer']['updateCpuS'+'kinMatrice'+'s'](_0x567db3),this['renderer']['gpuUpdate'](_0x567db3);const _0x1d1aad=this['computeBou'+'nds'](_0x567db3);let _0x27375c,_0x3027de,_0x1f1347,_0x2dedfa;for(_0x27375c=0xc*0x17a+-0x1847+0x68f;_0x27375c<_0x37eea3['length'];_0x27375c++)for(_0x1f1347=_0x37eea3[_0x27375c]['meshInstan'+'ces'],_0x3027de=0x1c22+0xbcb*-0x1+-0x1057;_0x3027de<_0x1f1347['length'];_0x3027de++)_0x2dedfa=_0x1f1347[_0x3027de],_0x2dedfa['setLightma'+'pped'](!(0x1fb1+-0x43d*0x5+-0xa7f)),_0x2dedfa['mask']=fi,_0x2dedfa['setRealtim'+'eLightmap'](He['lightmapPa'+'ramNames'][0x1f61*0x1+0x123e+-0x319f],this['blackTex']),_0x2dedfa['setRealtim'+'eLightmap'](He['lightmapPa'+'ramNames'][0x1e4d*-0x1+-0x665*0x5+0x3e47],this['blackTex']);for(_0x3027de=0x220c*-0x1+0x899*-0x2+-0xe*-0x3a9;_0x3027de<_0x3030a6['length'];_0x3027de++)_0x3030a6[_0x3027de]['light']['enabled']=!(-0xaa5+-0x2*0x928+0x1cf6);const _0x3a3122=[[],[],[]];let _0x28ec39,_0x410504,_0x18332b=!(-0x3*-0xb7e+0xcc5+-0x1*0x2f3e);for(_0x27375c=0xf03+0x1*-0x111d+0x21a;_0x27375c<_0x3030a6['length'];_0x27375c++){const _0x2eac15=_0x3030a6[_0x27375c],_0x131ed6=_0x2eac15 instanceof Mg,_0x14fa45=_0x2eac15['light']['type']===ve;let _0x1db6e1=_0x2eac15['numVirtual'+'Lights'];_0x33d9aa>0x2661+-0x1334+0x4*-0x4cb&&_0x1db6e1>0x1e7*-0x2+-0x1bd+0x58c&&_0x2eac15['light']['bakeDir']&&(_0x1db6e1=0x1e86*-0x1+-0x24df*0x1+-0x4366*-0x1,w['warn']('Lightmappe'+'r\x27s\x20BAKE_C'+'OLORDIR\x20mo'+'de\x20is\x20not\x20'+'compatible'+'\x20with\x20Ligh'+'t\x27s\x20bakeNu'+'mSamples\x20l'+'arger\x20than'+'\x20one.\x20Forc'+'ing\x20it\x20to\x20'+'one.'));for(let _0x2d6e18=-0x14c2*-0x1+-0x2*-0x5de+-0x103f*0x2;_0x2d6e18<_0x1db6e1;_0x2d6e18++){Q['pushGpuMar'+'ker'](_0xdd651e,'Light:'+_0x2eac15['light']['_node']['name']+':'+_0x2d6e18),_0x1db6e1>0x12cc*-0x1+-0x1b9d+0x2e6a&&_0x2eac15['prepareVir'+'tualLight'](_0x2d6e18,_0x1db6e1),_0x2eac15['startBake']();let _0x56e1f6=!(0x1bce*-0x1+-0x3b*-0x71+0x1c4);const _0xf392f3=this['lightCamer'+'aPrepare'](_0xdd651e,_0x2eac15);for(_0x410504=0xb6*0x1d+-0x1*0x1d6+-0x12c8;_0x410504<_0x37eea3['length'];_0x410504++){const _0x10f685=_0x37eea3[_0x410504];if(_0x1f1347=_0x10f685['meshInstan'+'ces'],!this['lightCamer'+'aPrepareAn'+'dCull'](_0x2eac15,_0x10f685,_0xf392f3,_0x1d1aad))continue;this['setupLight'+'Array'](_0x3a3122,_0x2eac15['light']);const _0x2534dd=_0x14fa45?[]:[_0x2eac15['light']];for(_0xaa25b3&&this['renderer']['lightTextu'+'reAtlas']['update'](_0x2534dd,this['lightingPa'+'rams']),_0x56e1f6=this['renderShad'+'owMap'](_0x59ea1d,_0x56e1f6,_0x567db3,_0x2eac15),_0xaa25b3&&this['worldClust'+'ers']['update'](_0x2534dd,this['lightingPa'+'rams']),this['backupMate'+'rials'](_0x1f1347),_0x28ec39=-0x1c63*0x1+-0x1b94+0x37f7*0x1;_0x28ec39<_0x33d9aa&&!(_0x28ec39>0x21b7+0x4f*0x22+-0x2c35&&_0x2d6e18>-0x12a*0xb+-0xec1+-0x53*-0x55||_0x131ed6&&_0x28ec39>-0x61*-0x2b+0x74f+0x35*-0x72);_0x28ec39++){Q['pushGpuMar'+'ker'](_0xdd651e,'LMPass:'+_0x28ec39);const _0x1f2c56=_0x10f685['renderTarg'+'ets'][_0x28ec39],_0xc7a52c=_0x10f685['renderTarg'+'ets'][_0x28ec39]['colorBuffe'+'r']['width'],_0xdd027f=this['renderTarg'+'ets']['get'](_0xc7a52c),_0x1d9d45=_0xdd027f['colorBuffe'+'r'];_0x28ec39===0x15eb*0x1+0x8*-0x45e+0x21*0x65?_0x18332b=_0x4eba86['updateShad'+'ers']:_0x18332b&&(_0x4eba86['updateShad'+'ers']=!(0x394*-0x1+-0x17ae+0x1b42));let _0x51bfb3=this['passMateri'+'als'][_0x28ec39];for(_0x131ed6&&_0x2d6e18+(0x223d+-0x24*0x44+0xc56*-0x2)===_0x1db6e1&&_0x28ec39===0x1628+-0x22*0x59+0x126*-0x9&&(_0x51bfb3=this['ambientAOM'+'aterial']),_0x3027de=0x6*0x209+0xb39+0x176f*-0x1;_0x3027de<_0x1f1347['length'];_0x3027de++)_0x1f1347[_0x3027de]['material']=_0x51bfb3;if(this['renderer']['updateShad'+'ers'](_0x1f1347),_0x28ec39===uL&&this['constantBa'+'keDir']['setValue'](_0x2eac15['light']['bakeDir']?-0x437*-0x1+-0x1d*0x139+0x1f3f:0x84b+0x6b1+0x89*-0x1c),_0xdd651e['isWebGPU']){const _0x2f0581=new hL(_0xdd651e,this['renderer'],this['camera'],_0xaa25b3?this['worldClust'+'ers']:null,_0x1f1347,_0x3a3122);_0x2f0581['init'](_0xdd027f),_0x2f0581['render'](),_0x2f0581['destroy']();}else this['renderer']['setCamera'](this['camera'],_0xdd027f,!(0x8*0x2cc+-0x18be+0x25e)),_0xaa25b3&&this['worldClust'+'ers']['activate'](),this['renderer']['_forwardTi'+'me']=0x22f8+0xf73*-0x1+-0x1385,this['renderer']['_shadowMap'+'Time']=0x8a1*0x1+-0x13*0x159+0x10fa,this['renderer']['renderForw'+'ard'](this['camera'],_0xdd027f,_0x1f1347,_0x3a3122,Aa),_0xdd651e['updateEnd']();for(this['stats']['shadowMapT'+'ime']+=this['renderer']['_shadowMap'+'Time'],this['stats']['forwardTim'+'e']+=this['renderer']['_forwardTi'+'me'],this['stats']['renderPass'+'es']++,_0x10f685['renderTarg'+'ets'][_0x28ec39]=_0xdd027f,this['renderTarg'+'ets']['set'](_0xc7a52c,_0x1f2c56),_0x3027de=-0x1079*0x1+-0x1a20+-0x885*-0x5;_0x3027de<_0x1f1347['length'];_0x3027de++)_0x2dedfa=_0x1f1347[_0x3027de],_0x2dedfa['setRealtim'+'eLightmap'](He['lightmapPa'+'ramNames'][_0x28ec39],_0x1d9d45),_0x2dedfa['_shaderDef'+'s']|=ou;Q['popGpuMark'+'er'](_0xdd651e);}this['restoreMat'+'erials'](_0x1f1347);}_0x2eac15['endBake'](this['shadowMapC'+'ache']),Q['popGpuMark'+'er'](_0xdd651e);}}for(this['postproces'+'sTextures'](_0xdd651e,_0x37eea3,_0x33d9aa),_0x410504=-0x59*-0x29+0x996+0x17d7*-0x1;_0x410504<_0x12bc9e['length'];_0x410504++)_0x12bc9e[_0x410504]['restore']();this['restoreLig'+'hts'](_0x47be93),this['restoreSce'+'ne'](),_0xaa25b3||this['shadowMapC'+'ache']['clear']();}}const Wh=class Wh extends me{constructor(_0x484ce8,_0xce1736){super(),h(this,'system'),h(this,'entity'),(this['system']=_0x484ce8,this['entity']=_0xce1736,this['system']['schema']&&!this['_accessors'+'Built']&&this['buildAcces'+'sors'](this['system']['schema']),this['on']('set',function(_0x3504ce,_0x48e667,_0x39ae5d){this['fire']('set_'+_0x3504ce,_0x3504ce,_0x48e667,_0x39ae5d);}),this['on']('set_enable'+'d',this['onSetEnabl'+'ed'],this));}static['_buildAcce'+'ssors'](_0x2b1273,_0x3a37e1){_0x3a37e1['forEach'](_0x495ae3=>{const _0x3df853=typeof _0x495ae3=='object'?_0x495ae3['name']:_0x495ae3;Object['defineProp'+'erty'](_0x2b1273,_0x3df853,{'get':function(){return this['data'][_0x3df853];},'set':function(_0x197b5a){const _0x38a164=this['data'],_0x2399f1=_0x38a164[_0x3df853];_0x38a164[_0x3df853]=_0x197b5a,this['fire']('set',_0x3df853,_0x2399f1,_0x197b5a);},'configurable':!(-0x1*0x2431+0x326+-0x1*-0x210b)});}),_0x2b1273['_accessors'+'Built']=!(0xd0a*0x1+-0xbd*0x11+-0x7d);}['buildAcces'+'sors'](_0x5712af){Wh['_buildAcce'+'ssors'](this,_0x5712af);}['onSetEnabl'+'ed'](_0x198a65,_0x12a196,_0xca9aee){_0x12a196!==_0xca9aee&&this['entity']['enabled']&&(_0xca9aee?this['onEnable']():this['onDisable']());}['onEnable'](){}['onDisable'](){}['onPostStat'+'eChange'](){}get['data'](){const _0x21b300=this['system']['store'][this['entity']['getGuid']()];return _0x21b300?_0x21b300['data']:null;}set['enabled'](_0x4317b0){}get['enabled'](){return!(-0x1*-0x16cd+0x1*0x23bf+0x3*-0x1384);}};h(Wh,'order',0xc64*0x1+0x1aa6+-0x1385*0x2);let we=Wh;class ct extends me{constructor(_0x33c9c2){super(),this['app']=_0x33c9c2,this['store']={},this['schema']=[];}['addCompone'+'nt'](_0x571656,_0x272a39={}){const _0x42f43c=new this['ComponentT'+'ype'](this,_0x571656),_0x4f010d=new this['DataType']();return this['store'][_0x571656['getGuid']()]={'entity':_0x571656,'data':_0x4f010d},_0x571656[this['id']]=_0x42f43c,_0x571656['c'][this['id']]=_0x42f43c,this['initialize'+'ComponentD'+'ata'](_0x42f43c,_0x272a39,[]),this['fire']('add',_0x571656,_0x42f43c),_0x42f43c;}['removeComp'+'onent'](_0x1a7dab){const _0x3b94b3=this['id'],_0x53ed66=this['store'][_0x1a7dab['getGuid']()],_0x2ab990=_0x1a7dab['c'][_0x3b94b3];_0x2ab990['fire']('beforeremo'+'ve'),this['fire']('beforeremo'+'ve',_0x1a7dab,_0x2ab990),delete this['store'][_0x1a7dab['getGuid']()],_0x1a7dab[_0x3b94b3]=void(-0x5d8+-0xab9*-0x1+-0x1*0x4e1),delete _0x1a7dab['c'][_0x3b94b3],this['fire']('remove',_0x1a7dab,_0x53ed66['data']);}['cloneCompo'+'nent'](_0x4c6620,_0x38169e){const _0x56b170=this['store'][_0x4c6620['getGuid']()];return this['addCompone'+'nt'](_0x38169e,_0x56b170['data']);}['initialize'+'ComponentD'+'ata'](_0x318258,_0x3c9232={},_0x1e5838){for(let _0x1b9fb5=-0x52*0x54+-0x1c4*-0x8+0x199*0x8,_0x2354d9=_0x1e5838['length'];_0x1b9fb5<_0x2354d9;_0x1b9fb5++){const _0x11709c=_0x1e5838[_0x1b9fb5];let _0x40dc87,_0x59acde;typeof _0x11709c=='object'?(_0x40dc87=_0x11709c['name'],_0x59acde=_0x11709c['type']):(_0x40dc87=_0x11709c,_0x59acde=void(-0x23d3*-0x1+-0xd6*-0xb+0x901*-0x5));let _0x1d2c33=_0x3c9232[_0x40dc87];_0x1d2c33!==void(-0x1f0b+-0x1*-0x2a5+-0x5ae*-0x5)?(_0x59acde!==void(0xe70+0x26dc+0x4*-0xd53)&&(_0x1d2c33=mL(_0x1d2c33,_0x59acde)),_0x318258[_0x40dc87]=_0x1d2c33):_0x318258[_0x40dc87]=_0x318258['data'][_0x40dc87];}_0x318258['enabled']&&_0x318258['entity']['enabled']&&_0x318258['onEnable']();}['getPropert'+'iesOfType'](_0x57bbf3){const _0x1b3e7b=[];return(this['schema']||[])['forEach'](_0x189dc0=>{_0x189dc0&&typeof _0x189dc0=='object'&&_0x189dc0['type']===_0x57bbf3&&_0x1b3e7b['push'](_0x189dc0);}),_0x1b3e7b;}['destroy'](){this['off']();}}function mL(_0x53e3d0,_0x34159c){if(!_0x53e3d0)return _0x53e3d0;switch(_0x34159c){case'rgb':return _0x53e3d0 instanceof ie?_0x53e3d0['clone']():new ie(_0x53e3d0[0x1*-0x19cf+0x228f*-0x1+0x1*0x3c5e],_0x53e3d0[-0x1cd*-0xf+0x2*-0xd8d+0x18],_0x53e3d0[-0x2598+0x24a1*-0x1+0x1*0x4a3b]);case'rgba':return _0x53e3d0 instanceof ie?_0x53e3d0['clone']():new ie(_0x53e3d0[-0x21a9+-0x1ca8+0x3e51],_0x53e3d0[0xf*0x15b+0x7f*0x5+-0x16cf*0x1],_0x53e3d0[-0x1b37+0x119*0x1+-0x688*-0x4],_0x53e3d0[0x1*-0x9aa+-0x1294*-0x1+-0x35*0x2b]);case'vec2':return _0x53e3d0 instanceof J?_0x53e3d0['clone']():new J(_0x53e3d0[-0x4e9*0x1+0x22e5*0x1+-0xca*0x26],_0x53e3d0[0xd*0x27+-0x234e+0xc*0x2c7]);case'vec3':return _0x53e3d0 instanceof D?_0x53e3d0['clone']():new D(_0x53e3d0[0x3*0xc19+-0x873+-0x48*0x63],_0x53e3d0[0x2151+-0x22b5*0x1+0x33*0x7],_0x53e3d0[-0x894+0xa5a+-0x1c4]);case'vec4':return _0x53e3d0 instanceof re?_0x53e3d0['clone']():new re(_0x53e3d0[-0x2*-0xa9f+0x115d+-0x1*0x269b],_0x53e3d0[0x9+0xcf0+0x19f*-0x8],_0x53e3d0[0x505*0x7+0x1d99*0x1+-0x40ba],_0x53e3d0[0x1cba+0x1e7+-0x1e9e]);case'boolean':case'number':case'string':return _0x53e3d0;case'entity':return _0x53e3d0;default:throw new Error('Could\x20not\x20'+'convert\x20un'+'handled\x20ty'+'pe:\x20'+_0x34159c);}}const Bv=0x1*0x1276+-0x3*-0x2dd+-0x115*0x19,Su=0x238d+0x1200*0x1+-0x358c,yu=-0xb*-0xb7+0x326+0x9*-0x139;class _L{constructor(){this['_left']=(-0x1409+-0xfd1*0x1+0x23db)/(0x218e+-0xe3a+-0x1*0x1354),this['_right']=-(0x1*-0x20cf+0x2*-0xd77+-0x13ea*-0x3)/(-0x30*0x8b+-0x38c*-0x4+0xbe0),this['_len']=0x17*0x3a+0x2*-0xb5d+-0x461*-0x4,this['_recip']=-0x498+0x149*-0x9+0x1029,this['_p0']=-0xf72+0x214d+0x7*-0x28d,this['_p1']=0x1*-0x41b+-0x25f*0x2+0x8d9,this['_t']=0x1*0x2345+-0x1b5a+-0x7eb,this['_hermite']={'valid':!(0x6c5+0x1*0x6f7+-0xdbb),'p0':0x0,'m0':0x0,'p1':0x0,'m1':0x0};}['update'](_0x2f677c,_0x845cdf){if(_0x2f677c<this['_left']||_0x2f677c>=this['_right']){const _0x2c188f=_0x845cdf['length'];if(!_0x2c188f)this['_left']=-(0x9*0x44b+-0x12dd+-0xf1*0x15)/(0x245+0x1aa4+-0x1ce9),this['_right']=(-0x40d*0x1+-0x1e19*0x1+-0x2227*-0x1)/(-0xd9b*0x1+0x2015+-0x127a),this['_len']=0x3*0x7bb+-0x7f7*0x3+-0x2*-0x5a,this['_recip']=-0x25c0+-0x2*-0x43c+0x1*0x1d48,this['_p0']=this['_p1']=0xcab+-0x103e+-0x1*-0x393;else{if(_0x2f677c<_0x845cdf[-0x49*-0x4c+0x4ee*-0x2+-0xbd0])this['_left']=-(0x1def+-0xa00+-0x2*0x9f7)/(-0x78a+0x17db+-0x1051*0x1),this['_right']=_0x845cdf[-0xb*0xa6+-0x9*0x1f3+0x18ad],this['_len']=-0x1b*0xff+-0x1*-0x1dcf+-0x2ea,this['_recip']=0xfa6+0x3*0x1e1+0x1549*-0x1,this['_p0']=this['_p1']=-0x3*-0x4b+-0x196*0x13+0x1d41;else{if(_0x2f677c>=_0x845cdf[_0x2c188f-(0x3*0x917+0x1898+-0x33dc)])this['_left']=_0x845cdf[_0x2c188f-(0x25d5+0x167b+-0x3c4f*0x1)],this['_right']=(0x1a4+0x2*-0x103f+0x1edb)/(-0x3*0x287+0x1c0d+-0x1478),this['_len']=0x1e32+-0x2255+-0x1*-0x423,this['_recip']=-0x63e+0x1d7b+0x295*-0x9,this['_p0']=this['_p1']=_0x2c188f-(0x1f64+0x3*0x6c7+-0x28*0x14b);else{const _0x1ffd1d=this['_findKey'](_0x2f677c,_0x845cdf);this['_left']=_0x845cdf[_0x1ffd1d],this['_right']=_0x845cdf[_0x1ffd1d+(-0x38*-0x51+0x19cd*0x1+0x15c2*-0x2)],this['_len']=this['_right']-this['_left'];const _0x10d170=(-0x6*-0x108+0x2341+-0x2970)/this['_len'];this['_recip']=isFinite(_0x10d170)?_0x10d170:-0xb08+0x7a6+-0x362*-0x1,this['_p0']=_0x1ffd1d,this['_p1']=_0x1ffd1d+(0x1*0x15a3+-0xfb6+-0x5ec);}}}}this['_t']=this['_recip']===0x1*-0x299+0x4e5*-0x1+0x77e?-0x2b*0x5+-0x1*0x93f+0x50b*0x2:(_0x2f677c-this['_left'])*this['_recip'],this['_hermite']['valid']=!(-0x43*0x4+-0x1cac+0x1db9);}['_findKey'](_0x57df7d,_0x9c74dc){let _0x30f069=-0x2b*-0xa3+0x33*0x3+-0xdfd*0x2;for(;_0x57df7d>=_0x9c74dc[_0x30f069+(-0xeef+0x196f+-0xa7f)];)_0x30f069++;return _0x30f069;}['eval'](_0x257385,_0xf48b66,_0x237e5f){const _0x227ad0=_0x237e5f['_data'],_0x1d797a=_0x237e5f['_component'+'s'],_0x33d8bc=this['_p0']*_0x1d797a;if(_0xf48b66===Bv){for(let _0x5382af=-0x1*-0x218b+-0x4ee+0x5*-0x5b9;_0x5382af<_0x1d797a;++_0x5382af)_0x257385[_0x5382af]=_0x227ad0[_0x33d8bc+_0x5382af];}else{const _0x5e5aff=this['_t'],_0x18d1bc=this['_p1']*_0x1d797a;switch(_0xf48b66){case Su:for(let _0x2bb169=-0x2*-0x1e2+0x18e9+0x98f*-0x3;_0x2bb169<_0x1d797a;++_0x2bb169)_0x257385[_0x2bb169]=Y['lerp'](_0x227ad0[_0x33d8bc+_0x2bb169],_0x227ad0[_0x18d1bc+_0x2bb169],_0x5e5aff);break;case yu:{const _0x3f9273=this['_hermite'];if(!_0x3f9273['valid']){const _0x1af4e0=_0x5e5aff*_0x5e5aff,_0x4a723a=_0x5e5aff+_0x5e5aff,_0x1e4e91=-0x1441+-0x1ec7+0x3309-_0x5e5aff,_0x108ce6=_0x1e4e91*_0x1e4e91;_0x3f9273['valid']=!(-0x511*-0x2+0x1cc8+-0x26ea),_0x3f9273['p0']=(0x1813+0x1955+-0x3167*0x1+_0x4a723a)*_0x108ce6,_0x3f9273['m0']=_0x5e5aff*_0x108ce6,_0x3f9273['p1']=_0x1af4e0*(-0x262c+-0x12b7*0x1+-0x1*-0x38e6-_0x4a723a),_0x3f9273['m1']=_0x1af4e0*(_0x5e5aff-(0x3*-0xb6f+0x251e+-0x2d0));}const _0x4f466e=(this['_p0']*(-0x9a9*-0x1+0x1d5+-0xb7b*0x1)+(-0x9a+-0x1b1c+0xa5*0x2b))*_0x1d797a,_0x20e535=(this['_p0']*(-0x2*0x11d7+0x2c2+-0x1*-0x20ef)+(0xd9e+-0x196f+-0xbd3*-0x1))*_0x1d797a,_0x150df3=(this['_p1']*(0x1381+0x95*-0x29+-0x1*-0x45f)+(-0x2*0xd33+0x1*0x1d85+-0x31e))*_0x1d797a,_0x4e56f1=(this['_p1']*(0x1b92*0x1+-0x1*-0x15c4+0x9*-0x57b)+(0x263f+-0x1e8*0xa+-0x3*0x665))*_0x1d797a;for(let _0x3e0517=-0x16d9*0x1+-0x707+0x1de0;_0x3e0517<_0x1d797a;++_0x3e0517)_0x257385[_0x3e0517]=_0x3f9273['p0']*_0x227ad0[_0x4f466e+_0x3e0517]+_0x3f9273['m0']*_0x227ad0[_0x20e535+_0x3e0517]*this['_len']+_0x3f9273['p1']*_0x227ad0[_0x150df3+_0x3e0517]+_0x3f9273['m1']*_0x227ad0[_0x4e56f1+_0x3e0517]*this['_len'];break;}}}}}class Ig{constructor(_0x4b069f){this['_name']=_0x4b069f['name']+'Snapshot',this['_time']=-(-0x10aa+-0x1*0x1c3c+0x2ce7),this['_cache']=[],this['_results']=[];for(let _0x36dd95=0x4*-0x63+0x1*0x1a1b+-0x188f*0x1;_0x36dd95<_0x4b069f['_inputs']['length'];++_0x36dd95)this['_cache'][_0x36dd95]=new _L();const _0x46f08e=_0x4b069f['_curves'],_0x22d312=_0x4b069f['_outputs'];for(let _0x33e368=-0x56b*-0x2+-0x20d5+0x15ff;_0x33e368<_0x46f08e['length'];++_0x33e368){const _0x1852a4=_0x46f08e[_0x33e368],_0x5c7622=_0x22d312[_0x1852a4['_output']],_0x3950f0=[];for(let _0x23e32a=-0x13a7+-0x67d*-0x1+-0x695*-0x2;_0x23e32a<_0x5c7622['_component'+'s'];++_0x23e32a)_0x3950f0[_0x23e32a]=0x156c+-0x65*-0x3e+-0x1*0x2de2;this['_results'][_0x33e368]=_0x3950f0;}}}const qo=class qo{constructor(_0x590c02,_0x5249da,_0x43b28e,_0x97bab0,_0x3a2dd2,_0x3ddeb4){this['_name']=_0x590c02['name'],this['_track']=_0x590c02,this['_snapshot']=new Ig(_0x590c02),this['_playing']=_0x97bab0,this['_time']=_0x5249da,this['_speed']=_0x43b28e,this['_loop']=_0x3a2dd2,this['_blendWeig'+'ht']=0xf29+-0x1f5a*0x1+0x1032,this['_blendOrde'+'r']=-0x144e*0x1+-0x1b7d+0x5*0x98f,this['_eventHand'+'ler']=_0x3ddeb4,this['alignCurso'+'rToCurrent'+'Time']();}set['name'](_0x1f907b){this['_name']=_0x1f907b;}get['name'](){return this['_name'];}set['track'](_0x316c3b){this['_track']=_0x316c3b,this['_snapshot']=new Ig(_0x316c3b);}get['track'](){return this['_track'];}get['snapshot'](){return this['_snapshot'];}set['time'](_0x3b2d5d){this['_time']=_0x3b2d5d,this['alignCurso'+'rToCurrent'+'Time']();}get['time'](){return this['_time'];}set['speed'](_0x55dea5){const _0x35b747=Math['sign'](_0x55dea5)!==Math['sign'](this['_speed']);this['_speed']=_0x55dea5,_0x35b747&&this['alignCurso'+'rToCurrent'+'Time']();}get['speed'](){return this['_speed'];}set['loop'](_0x2b5b2b){this['_loop']=_0x2b5b2b;}get['loop'](){return this['_loop'];}set['blendWeigh'+'t'](_0x5616fc){this['_blendWeig'+'ht']=_0x5616fc;}get['blendWeigh'+'t'](){return this['_blendWeig'+'ht'];}set['blendOrder'](_0x4a3c7b){this['_blendOrde'+'r']=_0x4a3c7b;}get['blendOrder'](){return this['_blendOrde'+'r'];}set['eventCurso'+'r'](_0x222571){this['_eventCurs'+'or']=_0x222571;}get['eventCurso'+'r'](){return this['_eventCurs'+'or'];}get['eventCurso'+'rEnd'](){return this['isReverse']?-0x2*0x3b7+0xf68+-0x7fa:this['_track']['events']['length']-(0x1438+0xc*-0x55+-0x103b);}get['nextEvent'](){return this['_track']['events'][this['_eventCurs'+'or']];}get['isReverse'](){return this['_speed']<0xb*-0x1cf+-0xaf4+-0x1ed9*-0x1;}['nextEventA'+'headOfTime'](_0x3a814e){return this['nextEvent']?this['isReverse']?this['nextEvent']['time']<=_0x3a814e:this['nextEvent']['time']>=_0x3a814e:!(-0x1f87+-0xdce+0x2d56);}['nextEventB'+'ehindTime'](_0x518cd6){return this['nextEvent']?_0x518cd6===this['track']['duration']?this['isReverse']?this['nextEvent']['time']>=_0x518cd6:this['nextEvent']['time']<=_0x518cd6:this['isReverse']?this['nextEvent']['time']>_0x518cd6:this['nextEvent']['time']<_0x518cd6:!(-0x126c+0x2669+-0x13fc);}['resetEvent'+'Cursor'](){this['_eventCurs'+'or']=this['isReverse']?this['_track']['events']['length']-(-0x2283+0x17ab+0xad9):0x111*0x24+-0x5d5*0x1+-0x208f*0x1;}['moveEventC'+'ursor'](){this['_eventCurs'+'or']+=this['isReverse']?-(0x2*-0x7bf+-0x1f5*0xd+0x418*0xa):0x0+0xc43+-0xc42,this['_eventCurs'+'or']>=this['track']['events']['length']?this['_eventCurs'+'or']=0x9*0x3dd+0x1*0x1ee5+0x1*-0x41aa:this['_eventCurs'+'or']<0x5e1+0x52+-0x633&&(this['_eventCurs'+'or']=this['track']['events']['length']-(-0xddb+-0x54d*-0x2+0x342));}['clipFrameT'+'ime'](_0x5a382f){const _0x42ddf7=qo['eventFrame'];_0x42ddf7['start']=0x1*-0x1679+0xf98+-0x6e1*-0x1,_0x42ddf7['end']=_0x5a382f,_0x42ddf7['residual']=-0xb*0x209+-0x1612+0x1*0x2c75,this['isReverse']?_0x5a382f<-0x51*-0x25+-0x1878+0xcc3&&(_0x42ddf7['start']=this['track']['duration'],_0x42ddf7['end']=0x2*-0x21a+0x7*0x351+0x9d*-0x1f,_0x42ddf7['residual']=_0x5a382f+this['track']['duration']):_0x5a382f>this['track']['duration']&&(_0x42ddf7['start']=-0x2250+0x1555+0xcfb,_0x42ddf7['end']=this['track']['duration'],_0x42ddf7['residual']=_0x5a382f-this['track']['duration']);}['alignCurso'+'rToCurrent'+'Time'](){for(this['resetEvent'+'Cursor']();this['nextEventB'+'ehindTime'](this['_time'])&&this['_eventCurs'+'or']!==this['eventCurso'+'rEnd'];)this['moveEventC'+'ursor']();}['fireNextEv'+'ent'](){this['_eventHand'+'ler']['fire'](this['nextEvent']['name'],{'track':this['track'],...this['nextEvent']}),this['moveEventC'+'ursor']();}['fireNextEv'+'entInFrame'](_0x1bf8b9,_0xb0e5fe){return this['nextEventA'+'headOfTime'](_0x1bf8b9)&&this['nextEventB'+'ehindTime'](_0xb0e5fe)?(this['fireNextEv'+'ent'](),!(0xbdc+-0x2*-0xf1d+0x2a16*-0x1)):!(-0x1839+0xd*0x87+0x115f);}['activeEven'+'tsForFrame'](_0x569108,_0x58a7b0){const _0x48fbca=qo['eventFrame'];this['clipFrameT'+'ime'](_0x58a7b0);const _0x2ba14c=this['eventCurso'+'r'];for(;this['fireNextEv'+'entInFrame'](_0x569108,_0x48fbca['end'])&&_0x2ba14c!==this['eventCurso'+'r'];);this['loop']&&Math['abs'](_0x48fbca['residual'])>-0x2635*-0x1+0x35*0x9+-0x2812&&this['activeEven'+'tsForFrame'](_0x48fbca['start'],_0x48fbca['residual']);}['progressFo'+'rTime'](_0x4f00fa){return _0x4f00fa*this['_speed']/this['_track']['duration'];}['_update'](_0x2a17b6){if(this['_playing']){let _0x359770=this['_time'];const _0x321729=this['_track']['duration'],_0x4ec41a=this['_speed'],_0x4ad1e5=this['_loop'];this['_track']['events']['length']>-0x1eb6+-0x1*0x1aa2+0x3958&&_0x321729>-0x51b*0x2+0x2556*-0x1+-0x44*-0xb3&&this['activeEven'+'tsForFrame'](_0x359770,_0x359770+_0x4ec41a*_0x2a17b6),_0x359770+=_0x4ec41a*_0x2a17b6,_0x4ec41a>=-0xb*-0x119+0x3ba+-0xfcd?_0x359770>_0x321729&&(_0x4ad1e5?_0x359770=_0x359770%_0x321729||0xb*-0x158+0xb3e+0x38a:(_0x359770=this['_track']['duration'],this['pause']())):_0x359770<-0x150a+-0x1886+0x2d90&&(_0x4ad1e5?_0x359770=_0x321729+(_0x359770%_0x321729||-0x4*-0x470+-0x12d7+0x117):(_0x359770=-0x14cf*-0x1+0x1*0x1135+-0x4*0x981,this['pause']())),this['_time']=_0x359770;}this['_time']!==this['_snapshot']['_time']&&this['_track']['eval'](this['_time'],this['_snapshot']);}['play'](){this['_playing']=!(0x32*-0x1+-0x1937+0x1969),this['_time']=-0xe*0x1b1+-0xf61+-0xb*-0x38d;}['stop'](){this['_playing']=!(0x47*0x82+0x1797+-0x56c*0xb),this['_time']=0x927+0x41*-0x52+-0xbab*-0x1;}['pause'](){this['_playing']=!(-0xf*-0x142+0x470+0x5*-0x4a9);}['resume'](){this['_playing']=!(0xd*0x1f3+0x65*0x37+-0x12*0x29d);}['reset'](){this['_time']=-0x1252+0x8*0x14+0x11b2;}};h(qo,'eventFrame',{'start':0x0,'end':0x0,'residual':0x0});let Dh=qo;const zv='NONE',gL='PREV_STATE',SL='NEXT_STATE',yL='PREV_STATE'+'_NEXT_STAT'+'E',vL='NEXT_STATE'+'_PREV_STAT'+'E',xL='GREATER_TH'+'AN',TL='LESS_THAN',wL='GREATER_TH'+'AN_EQUAL_T'+'O',EL='LESS_THAN_'+'EQUAL_TO',bL='EQUAL_TO',AL='NOT_EQUAL_'+'TO',Lg='INTEGER',Rg='FLOAT',Og='BOOLEAN',Qc='TRIGGER',CL='1D',PL='2D_DIRECTI'+'ONAL',ML='2D_CARTESI'+'AN',DL='DIRECT',Co='START',vu='END',qr='ANY',Ih=[Co,vu,qr],Vv='OVERWRITE',IL='ADDITIVE';class Ht{static['dot'](_0x22f8b6,_0x35dab0){const _0xcaf363=_0x22f8b6['length'];let _0x236371=-0x131c*-0x1+-0x8*0x38+-0x115c;for(let _0x4b3512=0xbb*-0xb+0x1f3e+0x1c9*-0xd;_0x4b3512<_0xcaf363;++_0x4b3512)_0x236371+=_0x22f8b6[_0x4b3512]*_0x35dab0[_0x4b3512];return _0x236371;}static['normalize'](_0x156dbe){let _0x3fa360=Ht['dot'](_0x156dbe,_0x156dbe);if(_0x3fa360>0xbf9*0x1+-0x11a+-0x1*0xadf){_0x3fa360=(0x3d3+-0x1303+0xf31)/Math['sqrt'](_0x3fa360);const _0x129724=_0x156dbe['length'];for(let _0x5857bb=-0x1f15+0xecb*-0x1+0x2de0;_0x5857bb<_0x129724;++_0x5857bb)_0x156dbe[_0x5857bb]*=_0x3fa360;}}static['set'](_0x3b4e3e,_0x17b02d,_0x355cbf){const _0x135912=_0x3b4e3e['length'];if(_0x355cbf==='quaternion'){let _0x72fd6a=Ht['dot'](_0x17b02d,_0x17b02d);_0x72fd6a>0x9f8+0x21ac+-0x2ba4&&(_0x72fd6a=(-0x71b*0x2+-0x296+-0x17*-0xbb)/Math['sqrt'](_0x72fd6a));for(let _0x1c326d=-0x1*0x2539+0x4*-0x29c+0x2fa9;_0x1c326d<_0x135912;++_0x1c326d)_0x3b4e3e[_0x1c326d]=_0x17b02d[_0x1c326d]*_0x72fd6a;}else{for(let _0x287ad2=-0x224*-0x3+-0xc6d+0x601;_0x287ad2<_0x135912;++_0x287ad2)_0x3b4e3e[_0x287ad2]=_0x17b02d[_0x287ad2];}}static['blendVec'](_0x5e8336,_0xa315c1,_0x104d1f,_0x2d3b68){const _0x17897b=_0x2d3b68?0x6*0x2a2+-0x2d*0x1d+0x1*-0xab2:-0xd*0x9c+0x112e+-0x941*0x1-_0x104d1f,_0x46c5ef=_0x5e8336['length'];for(let _0x40cb67=-0x9*-0x25a+-0x3*-0x21d+-0x1b81;_0x40cb67<_0x46c5ef;++_0x40cb67)_0x5e8336[_0x40cb67]=_0x5e8336[_0x40cb67]*_0x17897b+_0xa315c1[_0x40cb67]*_0x104d1f;}static['blendQuat'](_0x4bd375,_0x38ec6e,_0x1671b1,_0x4a0cc4){const _0x51c9fc=_0x4bd375['length'],_0x150358=_0x4a0cc4?0x1a*-0xe9+0x8*-0x1a1+0x24b3:0x1b*0x3a+-0x1d18+-0x9f*-0x25-_0x1671b1;Ht['dot'](_0x4bd375,_0x38ec6e)<-0x7a8+0x221e+-0x1a76&&(_0x1671b1=-_0x1671b1);for(let _0x5b6fac=-0x4*0x8f9+0x2654+0xc*-0x34;_0x5b6fac<_0x51c9fc;++_0x5b6fac)_0x4bd375[_0x5b6fac]=_0x4bd375[_0x5b6fac]*_0x150358+_0x38ec6e[_0x5b6fac]*_0x1671b1;_0x4a0cc4||Ht['normalize'](_0x4bd375);}static['blend'](_0x371fc7,_0xc58a0e,_0xce16e5,_0x2a7b3e,_0x57f2b4){_0x2a7b3e==='quaternion'?Ht['blendQuat'](_0x371fc7,_0xc58a0e,_0xce16e5,_0x57f2b4):Ht['blendVec'](_0x371fc7,_0xc58a0e,_0xce16e5,_0x57f2b4);}static['stableSort'](_0x2a7f00,_0x3c1413){const _0x9bb5f=_0x2a7f00['length'];for(let _0x5ba879=-0xeae*0x2+-0x2*0x1385+0xa*0x6d7;_0x5ba879<_0x9bb5f-(0xe15+-0x5*-0x3f0+-0x21c4);++_0x5ba879)for(let _0x46db90=_0x5ba879+(-0x2245+-0xdd1+0x3017);_0x46db90<_0x9bb5f;++_0x46db90)if(_0x3c1413(_0x2a7f00[_0x46db90],_0x2a7f00[_0x5ba879])){const _0x573adc=_0x2a7f00[_0x5ba879];_0x2a7f00[_0x5ba879]=_0x2a7f00[_0x46db90],_0x2a7f00[_0x46db90]=_0x573adc;}}}const st=class st{constructor(_0x4d26de,_0x4fa3f3){this['_component']=_0x4d26de,this['mask']=new Int8Array(_0x4d26de['layers']['length']),this['weights']=new Float32Array(_0x4d26de['layers']['length']),this['totalWeigh'+'t']=-0x1d7c+-0x8f0+0x266c,this['counter']=0x13b*-0x13+0x6b*0x2+0x168b,this['layerCount'+'er']=-0x1331*0x1+0x338*-0xa+0x3361,this['valueType']=_0x4fa3f3,this['dirty']=!(0x21e*0x11+0x3*-0x3a5+-0x190f),this['value']=_0x4fa3f3===st['TYPE_QUAT']?[-0x35*0x9e+-0x13*-0x10+0x6*0x541,0x967+-0x17*-0xf9+-0x245*0xe,0x853+-0x1*0x1f4b+0x16f8,0x1602+-0x2540+0xf3f]:[0x3*0xbfd+-0x158*-0xd+-0x356f,0x2*-0xcd1+-0x2*0x26e+-0x2*-0xf3f,0x2cd*-0x9+0xb70+0xdc5],this['baseValue']=null,this['setter']=null;}get['_normalize'+'Weights'](){return this['_component']['normalizeW'+'eights'];}['getWeight'](_0x23e258){return this['dirty']&&this['updateWeig'+'hts'](),this['_normalize'+'Weights']&&this['totalWeigh'+'t']===-0x5*-0xea+0x1be1+-0x2073||!this['mask'][_0x23e258]?-0x1d43+-0x1b89+-0x2d7*-0x14:this['_normalize'+'Weights']?this['weights'][_0x23e258]/this['totalWeigh'+'t']:Y['clamp'](this['weights'][_0x23e258],0xb7*-0x13+-0x2615+0x1*0x33aa,0x1b62+0xa7*0x33+-0x3ca6);}['_layerBlen'+'dType'](_0xcd9cb4){return this['_component']['layers'][_0xcd9cb4]['blendType'];}['setMask'](_0x58d988,_0x433937){this['mask'][_0x58d988]=_0x433937,this['_normalize'+'Weights']&&(this['_component']['layers'][_0x58d988]['blendType']===Vv&&(this['mask']=this['mask']['fill'](0x12e6+-0x68e*0x1+0x18b*-0x8,0x1a1e+0x9*0x317+-0x35ed,_0x58d988)),this['dirty']=!(-0x35f*-0x1+0x970+-0x1*0xccf));}['updateWeig'+'hts'](){this['totalWeigh'+'t']=0x12c1+-0x12ad*0x2+0x1299;for(let _0x3e2cab=0x1*-0x265e+0xf04+0x175a;_0x3e2cab<this['weights']['length'];_0x3e2cab++)this['weights'][_0x3e2cab]=this['_component']['layers'][_0x3e2cab]['weight'],this['totalWeigh'+'t']+=this['mask'][_0x3e2cab]*this['weights'][_0x3e2cab];this['dirty']=!(-0x89*0x2c+-0x9a*-0x3b+0x1*-0xbf1);}['updateValu'+'e'](_0x3ab932,_0x8945e0){if(this['counter']===-0x1*-0x3df+-0x2089+0x1caa&&(Ht['set'](this['value'],st['IDENTITY_Q'+'UAT_ARR'],this['valueType']),this['_normalize'+'Weights']||Ht['blend'](this['value'],this['baseValue'],-0x93*-0x31+0xe1e*0x1+-0x2a40,this['valueType'])),!(!this['mask'][_0x3ab932]||this['getWeight'](_0x3ab932)===-0x3f*0x3f+-0xb34+0x1ab5)){if(this['_layerBlen'+'dType'](_0x3ab932)===IL&&!this['_normalize'+'Weights']){if(this['valueType']===st['TYPE_QUAT']){const _0xef59a4=st['q1']['set'](this['value'][-0x33b*-0x5+0x1*0x3ad+-0x13d4],this['value'][-0x2252+-0xfa3+0x31f6],this['value'][0x187b+-0x1d2*-0x15+0x8f5*-0x7],this['value'][-0x29*0x52+-0x146f+0x2194]),_0x33f55a=st['q2']['set'](this['baseValue'][0x1099+-0x135f+0x163*0x2],this['baseValue'][-0x3*0xc07+-0x2d2+0x6*0x67c],this['baseValue'][-0x1*-0x1a5d+0x10f+-0x1b6a*0x1],this['baseValue'][-0x4*0x1f3+0x2*-0x5e2+-0x1*-0x1393]),_0x17a66f=st['q3']['set'](_0x8945e0[0x7a7+0x1*-0xcb5+0x50e],_0x8945e0[0x62e+-0x87b*0x2+-0xfb*-0xb],_0x8945e0[0x5f3+-0x23b3+0x1dc2],_0x8945e0[-0x10e*0x17+0x124d*-0x2+0x3cdf*0x1]),_0x494987=_0x33f55a['invert']()['mul'](_0x17a66f);_0x494987['slerp'](le['IDENTITY'],_0x494987,this['getWeight'](_0x3ab932)),_0xef59a4['mul'](_0x494987),st['quatArr'][-0xd20+-0xdd*-0x1+0x2b*0x49]=_0xef59a4['x'],st['quatArr'][0x2482*0x1+-0x926*-0x4+-0x4919]=_0xef59a4['y'],st['quatArr'][0x127b+-0x1*-0x1d13+0x2cc*-0x11]=_0xef59a4['z'],st['quatArr'][0x5d*-0x17+0x96*-0xe+0x1092]=_0xef59a4['w'],Ht['set'](this['value'],st['quatArr'],this['valueType']);}else st['vecArr'][0x75+0xdd+0x1a*-0xd]=_0x8945e0[-0x71*-0x11+-0x12*0xbd+0x5c9]-this['baseValue'][0xc9a+0x1b85*0x1+-0x1*0x281f],st['vecArr'][0x45f+0x2b*0xa6+0x2040*-0x1]=_0x8945e0[0x1*0x1a47+-0x2c5+0x1781*-0x1]-this['baseValue'][0x55c+0x2e0+-0x83b],st['vecArr'][0x3*-0x8e1+0x9c*0x4+0x1835]=_0x8945e0[0xbe6*-0x2+0x513+0x12bb]-this['baseValue'][0x102*-0x17+0x1cf*-0x14+0x3b5c],Ht['blend'](this['value'],st['vecArr'],this['getWeight'](_0x3ab932),this['valueType'],!(-0x43*0x1f+0x2*-0x5e7+0x1*0x13eb));}else Ht['blend'](this['value'],_0x8945e0,this['getWeight'](_0x3ab932),this['valueType']);this['setter']&&this['setter'](this['value']);}}['unbind'](){this['setter']&&this['setter'](this['baseValue']);}};h(st,'TYPE_QUAT','quaternion'),h(st,'TYPE_VEC3','vector3'),h(st,'q1',new le()),h(st,'q2',new le()),h(st,'q3',new le()),h(st,'quatArr',[-0xd65+0x2507+0xb*-0x226,-0x221*-0xa+-0xef*-0x2+-0x1728,0x1732+0x3*-0xaea+0x2*0x4c6,0xf3d+-0x1*-0x1ec1+0x1*-0x2dfd]),h(st,'vecArr',[-0x2338+-0x354+-0x1*-0x268c,-0x923*0x2+-0x1*0x21f2+0x3438,0x621*0x5+0x169b+-0x3540]),h(st,'IDENTITY_Q'+'UAT_ARR',[0x1ecd+0x1989*-0x1+0x2*-0x2a2,0x52+0x203*0x5+0x1*-0xa61,0x1040+0x14cb+0x1d*-0x147,0x1b3b*-0x1+0x176a+-0xa3*-0x6]);let Vo=st;class Gv{constructor(_0x753302){this['_binder']=_0x753302,this['_clips']=[],this['_inputs']=[],this['_outputs']=[],this['_targets']={};}get['clips'](){return this['_clips'];}['addClip'](_0xb06cd9){const _0x5b67b0=this['_targets'],_0x3a7548=this['_binder'],_0x458024=_0xb06cd9['track']['curves'],_0x597806=_0xb06cd9['snapshot'],_0x80d9e1=[],_0x3f91d0=[];for(let _0x42bce5=-0x20cf*0x1+-0x1*-0x4e5+0x1bea;_0x42bce5<_0x458024['length'];++_0x42bce5){const _0x328684=_0x458024[_0x42bce5]['paths'];for(let _0x118c2b=0x1d5d+-0x1b48+0x29*-0xd;_0x118c2b<_0x328684['length'];++_0x118c2b){const _0x3c044d=_0x328684[_0x118c2b],_0xd52bab=_0x3a7548['resolve'](_0x3c044d);let _0x5adf15=_0x5b67b0[_0xd52bab&&_0xd52bab['targetPath']||null];if(!_0x5adf15&&_0xd52bab){_0x5adf15={'target':_0xd52bab,'value':[],'curves':0x0,'blendCounter':0x0};for(let _0xf6bf2a=-0x11*0xf7+-0x3*0x14d+0x144e;_0xf6bf2a<_0x5adf15['target']['components'];++_0xf6bf2a)_0x5adf15['value']['push'](-0x14c+-0x24be+0x260a);if(_0x5b67b0[_0xd52bab['targetPath']]=_0x5adf15,_0x3a7548['animCompon'+'ent']){if(!_0x3a7548['animCompon'+'ent']['targets'][_0xd52bab['targetPath']]){let _0xda23af;_0xd52bab['targetPath']['substring'](_0xd52bab['targetPath']['length']-(0xde5*0x1+0xeef*-0x2+0x1006))==='localRotat'+'ion'?_0xda23af=Vo['TYPE_QUAT']:_0xda23af=Vo['TYPE_VEC3'],_0x3a7548['animCompon'+'ent']['targets'][_0xd52bab['targetPath']]=new Vo(_0x3a7548['animCompon'+'ent'],_0xda23af);}_0x3a7548['animCompon'+'ent']['targets'][_0xd52bab['targetPath']]['layerCount'+'er']++,_0x3a7548['animCompon'+'ent']['targets'][_0xd52bab['targetPath']]['setMask'](_0x3a7548['layerIndex'],0x2090+0x1*-0x883+-0xab*0x24);}}_0x5adf15&&(_0x5adf15['curves']++,_0x80d9e1['push'](_0x597806['_results'][_0x42bce5]),_0x3f91d0['push'](_0x5adf15));}}this['_clips']['push'](_0xb06cd9),this['_inputs']['push'](_0x80d9e1),this['_outputs']['push'](_0x3f91d0);}['removeClip'](_0x55b8df){const _0x5bfc97=this['_targets'],_0xdab7f7=this['_binder'],_0x50d02f=this['_clips'],_0x2ac2f2=_0x50d02f[_0x55b8df]['track']['curves'];for(let _0x5c7cc8=-0x1a5f+0x7a1*0x5+0x89*-0x16;_0x5c7cc8<_0x2ac2f2['length'];++_0x5c7cc8){const _0x5c3c86=_0x2ac2f2[_0x5c7cc8]['paths'];for(let _0x2584cb=0x2584+0x2*0xfa7+-0x17f*0x2e;_0x2584cb<_0x5c3c86['length'];++_0x2584cb){const _0x111176=_0x5c3c86[_0x2584cb],_0x2b8ad4=this['_binder']['resolve'](_0x111176);_0x2b8ad4&&(_0x2b8ad4['curves']--,_0x2b8ad4['curves']===-0x7*-0x3e3+0xc6f+-0x27a4&&(_0xdab7f7['unresolve'](_0x111176),delete _0x5bfc97[_0x2b8ad4['targetPath']],_0xdab7f7['animCompon'+'ent']&&_0xdab7f7['animCompon'+'ent']['targets'][_0x2b8ad4['targetPath']]['layerCount'+'er']--));}}_0x50d02f['splice'](_0x55b8df,-0x2672+-0x1fe1+-0x1195*-0x4),this['_inputs']['splice'](_0x55b8df,-0x77*0x3a+-0x8dd*-0x1+0x121a),this['_outputs']['splice'](_0x55b8df,-0xe1c+0x2*0xdb7+-0xd51);}['removeClip'+'s'](){for(;this['_clips']['length']>0xc2a+-0xf0*0x3+-0x7*0x156;)this['removeClip'](0xc8f+0x94b+-0x15da);}['updateClip'+'Track'](_0x3c5bbc,_0x11435f){this['_clips']['forEach'](_0x3b5896=>{_0x3b5896['name']['includes'](_0x3c5bbc)&&(_0x3b5896['track']=_0x11435f);}),this['rebind']();}['findClip'](_0x79baec){const _0x2dca98=this['_clips'];for(let _0x2fc257=0x3*0xa7f+0x5*-0x474+-0x3*0x313;_0x2fc257<_0x2dca98['length'];++_0x2fc257){const _0x5cc442=_0x2dca98[_0x2fc257];if(_0x5cc442['name']===_0x79baec)return _0x5cc442;}return null;}['rebind'](){this['_binder']['rebind'](),this['_targets']={};const _0x1f1bba=[...this['clips']];this['removeClip'+'s'](),_0x1f1bba['forEach'](_0x17f9f8=>{this['addClip'](_0x17f9f8);});}['assignMask'](_0x4aab64){return this['_binder']['assignMask'](_0x4aab64);}['update'](_0x18ec88,_0x4fd5b2=!(0xf*-0x14b+0xd10+0x655)){const _0x1f7c4f=this['_clips'],_0x2c576a=_0x1f7c4f['map']((_0x20e524,_0x52f7da)=>_0x52f7da);Ht['stableSort'](_0x2c576a,(_0x2f5620,_0xa82764)=>_0x1f7c4f[_0x2f5620]['blendOrder']<_0x1f7c4f[_0xa82764]['blendOrder']);for(let _0x5af3fd=-0x258+0x1190+-0xf38;_0x5af3fd<_0x2c576a['length'];++_0x5af3fd){const _0x5a0e61=_0x2c576a[_0x5af3fd],_0x2df3ca=_0x1f7c4f[_0x5a0e61],_0x298df3=this['_inputs'][_0x5a0e61],_0x34d9ad=this['_outputs'][_0x5a0e61],_0xc8cc1b=_0x2df3ca['blendWeigh'+'t'];if(_0xc8cc1b>0x1a3*0x1+-0xb10+-0x7f*-0x13&&_0x2df3ca['_update'](_0x18ec88),!_0x4fd5b2)break;let _0x5b23ae,_0x2290e8,_0x34f6f5;if(_0xc8cc1b>=0x13f4+-0x42*-0x5f+-0x2c71*0x1){for(let _0x5d5863=0x1*-0x2141+-0x2b3*0x1+0x23f4;_0x5d5863<_0x298df3['length'];++_0x5d5863)_0x5b23ae=_0x298df3[_0x5d5863],_0x2290e8=_0x34d9ad[_0x5d5863],_0x34f6f5=_0x2290e8['value'],Ht['set'](_0x34f6f5,_0x5b23ae,_0x2290e8['target']['type']),_0x2290e8['blendCount'+'er']++;}else{if(_0xc8cc1b>-0x12a1+-0x2d5+-0xabb*-0x2){for(let _0x4bf99d=-0xa51*0x2+-0xed1+-0x113*-0x21;_0x4bf99d<_0x298df3['length'];++_0x4bf99d)_0x5b23ae=_0x298df3[_0x4bf99d],_0x2290e8=_0x34d9ad[_0x4bf99d],_0x34f6f5=_0x2290e8['value'],_0x2290e8['blendCount'+'er']===0x26e+0x104+-0x372?Ht['set'](_0x34f6f5,_0x5b23ae,_0x2290e8['target']['type']):Ht['blend'](_0x34f6f5,_0x5b23ae,_0xc8cc1b,_0x2290e8['target']['type']),_0x2290e8['blendCount'+'er']++;}}}const _0x3dc04a=this['_targets'],_0x1cff02=this['_binder'];for(const _0x358f0d in _0x3dc04a)if(_0x3dc04a['hasOwnProp'+'erty'](_0x358f0d)){const _0x92521a=_0x3dc04a[_0x358f0d];if(_0x1cff02['animCompon'+'ent']&&_0x92521a['target']['isTransfor'+'m']){const _0x231f30=_0x1cff02['animCompon'+'ent']['targets'][_0x358f0d];_0x231f30['counter']===_0x231f30['layerCount'+'er']&&(_0x231f30['counter']=-0x1c81+0x17cb+0x4b6),_0x231f30['path']||(_0x231f30['path']=_0x358f0d,_0x231f30['baseValue']=_0x92521a['target']['get'](),_0x231f30['setter']=_0x92521a['target']['set']),_0x231f30['updateValu'+'e'](_0x1cff02['layerIndex'],_0x92521a['value']),_0x231f30['counter']++;}else _0x92521a['target']['set'](_0x92521a['value']);_0x92521a['blendCount'+'er']=0x1099+0x1*0x14f6+0x281*-0xf;}this['_binder']['update'](_0x18ec88);}}class Hv{constructor(_0x21607d){this['_events']=[..._0x21607d],this['_events']['sort']((_0x1616a1,_0x423dd0)=>_0x1616a1['time']-_0x423dd0['time']);}get['events'](){return this['_events'];}}const $h=class $h{constructor(_0x155ca5,_0xf291b,_0x1dcec0,_0x439c70,_0x1ea362,_0x1f56c4=new Hv([])){this['_name']=_0x155ca5,this['_duration']=_0xf291b,this['_inputs']=_0x1dcec0,this['_outputs']=_0x439c70,this['_curves']=_0x1ea362,this['_animEvent'+'s']=_0x1f56c4;}get['name'](){return this['_name'];}get['duration'](){return this['_duration'];}get['inputs'](){return this['_inputs'];}get['outputs'](){return this['_outputs'];}get['curves'](){return this['_curves'];}set['events'](_0x434861){this['_animEvent'+'s']=_0x434861;}get['events'](){return this['_animEvent'+'s']['events'];}['eval'](_0x368d1c,_0x3e9b62){_0x3e9b62['_time']=_0x368d1c;const _0x1c1dd8=this['_inputs'],_0x34cba1=this['_outputs'],_0x205e54=this['_curves'],_0x3003dc=_0x3e9b62['_cache'],_0x15bc04=_0x3e9b62['_results'];for(let _0x447357=-0x1294+-0x1*0x926+0x3f6*0x7;_0x447357<_0x1c1dd8['length'];++_0x447357)_0x3003dc[_0x447357]['update'](_0x368d1c,_0x1c1dd8[_0x447357]['_data']);for(let _0x4e1faa=0x1013+-0x24ec+0x14d9;_0x4e1faa<_0x205e54['length'];++_0x4e1faa){const _0x41359c=_0x205e54[_0x4e1faa],_0x4c817e=_0x34cba1[_0x41359c['_output']],_0x44e756=_0x15bc04[_0x4e1faa];_0x3003dc[_0x41359c['_input']]['eval'](_0x44e756,_0x41359c['_interpola'+'tion'],_0x4c817e);}}};h($h,'EMPTY',Object['freeze'](new $h('empty',Number['MAX_VALUE'],[],[],[])));let Qi=$h;class ra{static['joinPath'](_0x348f29,_0x4c7584){_0x4c7584=_0x4c7584||'.';const _0x105254=function(_0x456a18){return _0x456a18['replace'](/\\/g,'\x5c\x5c')['replace'](new RegExp('\x5c'+_0x4c7584,'g'),'\x5c'+_0x4c7584);};return _0x348f29['map'](_0x105254)['join'](_0x4c7584);}static['splitPath'](_0x9c93e7,_0x508afd){_0x508afd=_0x508afd||'.';const _0x576e2e=[];let _0x57fdaa='',_0x58bb29=0xe29+0x204a*-0x1+-0x27*-0x77;for(;_0x58bb29<_0x9c93e7['length'];){let _0x262632=_0x9c93e7[_0x58bb29++];_0x262632==='\x5c'&&_0x58bb29<_0x9c93e7['length']?(_0x262632=_0x9c93e7[_0x58bb29++],_0x262632==='\x5c'||_0x262632===_0x508afd?_0x57fdaa+=_0x262632:_0x57fdaa+='\x5c'+_0x262632):_0x262632===_0x508afd?(_0x576e2e['push'](_0x57fdaa),_0x57fdaa=''):_0x57fdaa+=_0x262632;}return _0x57fdaa['length']>-0x249c+0x2060+-0x4*-0x10f&&_0x576e2e['push'](_0x57fdaa),_0x576e2e;}static['encode'](_0x1c9a69,_0x44ca02,_0x81f0f9){return(Array['isArray'](_0x1c9a69)?_0x1c9a69['join']('/'):_0x1c9a69)+'/'+_0x44ca02+'/'+(Array['isArray'](_0x81f0f9)?_0x81f0f9['join']('/'):_0x81f0f9);}['resolve'](_0x4e6591){return null;}['unresolve'](_0x184ad9){}['update'](_0x3ab7a9){}}class xu{constructor(_0x5e92c9,_0x38f121,_0xb44fc5,_0x9f291d){_0x5e92c9['set']?(this['_set']=_0x5e92c9['set'],this['_get']=_0x5e92c9['get']):this['_set']=_0x5e92c9,this['_type']=_0x38f121,this['_component'+'s']=_0xb44fc5,this['_targetPat'+'h']=_0x9f291d,this['_isTransfo'+'rm']=this['_targetPat'+'h']['substring'](this['_targetPat'+'h']['length']-(0x66a*0x5+-0x1*-0xbcb+-0x1*0x2bd0))==='localRotat'+'ion'||this['_targetPat'+'h']['substring'](this['_targetPat'+'h']['length']-(0x1c0d+-0x1058*-0x1+-0x21*0x158))==='localPosit'+'ion'||this['_targetPat'+'h']['substring'](this['_targetPat'+'h']['length']-(0xde8+-0x8b*0xd+-0x53*0x15))==='localScale';}get['set'](){return this['_set'];}get['get'](){return this['_get'];}get['type'](){return this['_type'];}get['components'](){return this['_component'+'s'];}get['targetPath'](){return this['_targetPat'+'h'];}get['isTransfor'+'m'](){return this['_isTransfo'+'rm'];}}class Sr{constructor(_0x115dba){h(this,'_isPathInM'+'ask',(_0x3773d1,_0x3a4674)=>{const _0x3d18fd=this['_mask'][_0x3773d1];if(_0x3d18fd){if(_0x3d18fd['children']||_0x3a4674&&_0x3d18fd['value']!==!(-0x1*-0x117a+-0x1cbe+0xb45))return!(-0x4*0x80b+-0x2e*0x29+0x278a);}else return!(-0x3f8+-0x1af*0x11+0xe*0x254);return!(-0xdde+-0xe50+-0xb9*-0x27);});if(this['graph']=_0x115dba,!_0x115dba)return;this['_mask']=null;const _0x490a54={},_0x416f18=function(_0x306077){_0x490a54[_0x306077['name']]=_0x306077;for(let _0x86655d=-0xa13*-0x1+0x25d9+0x2fec*-0x1;_0x86655d<_0x306077['children']['length'];++_0x86655d)_0x416f18(_0x306077['children'][_0x86655d]);};_0x416f18(_0x115dba),this['nodes']=_0x490a54,this['targetCach'+'e']={},this['visitedFal'+'lbackGraph'+'Paths']={};const _0x3332df=function(_0x14b77d){let _0x4311c8=_0x14b77d;for(;_0x4311c8&&!(_0x4311c8 instanceof lt);)_0x4311c8=_0x4311c8['parent'];let _0x218296;return _0x4311c8&&(_0x4311c8['render']?_0x218296=_0x4311c8['render']['meshInstan'+'ces']:_0x4311c8['model']&&(_0x218296=_0x4311c8['model']['meshInstan'+'ces'])),_0x218296;};this['nodeCounts']={},this['activeNode'+'s']=[],this['handlers']={'localPosition':function(_0x179182){const _0xd89f5b=_0x179182['localPosit'+'ion'],_0x3ab3fc=function(_0x25825d){_0xd89f5b['set'](..._0x25825d);};return Sr['createAnim'+'Target'](_0x3ab3fc,'vector',-0xda*0x17+-0x3a7+0xba*0x20,_0x179182,'localPosit'+'ion');},'localRotation':function(_0x54c122){const _0x786a68=_0x54c122['localRotat'+'ion'],_0x5c65e0=function(_0x373b0a){_0x786a68['set'](..._0x373b0a);};return Sr['createAnim'+'Target'](_0x5c65e0,'quaternion',0x26f6+-0x20e9+-0x67*0xf,_0x54c122,'localRotat'+'ion');},'localScale':function(_0x54c650){const _0x21e049=_0x54c650['localScale'],_0x19a44f=function(_0xcdf261){_0x21e049['set'](..._0xcdf261);};return Sr['createAnim'+'Target'](_0x19a44f,'vector',-0x13c*-0x8+-0x1b59+-0x8be*-0x2,_0x54c650,'localScale');},'weight':function(_0x593d06,_0x13c95b){_0x13c95b['indexOf']('name.')===-0x1*-0x1059+0x1*0x9b0+0xd7*-0x1f?_0x13c95b=_0x13c95b['replace']('name.',''):_0x13c95b=Number(_0x13c95b);const _0x16d519=_0x3332df(_0x593d06);let _0x238443;if(_0x16d519){for(let _0x923ebd=-0x5*-0x130+0x140e+-0x19fe;_0x923ebd<_0x16d519['length'];++_0x923ebd)if(_0x16d519[_0x923ebd]['node']['name']===_0x593d06['name']&&_0x16d519[_0x923ebd]['morphInsta'+'nce']){const _0x3511ca=_0x16d519[_0x923ebd]['morphInsta'+'nce'],_0x23308e=_0x62d5a5=>{_0x3511ca['setWeight'](_0x13c95b,_0x62d5a5[-0x15c3+-0x216e+0x3731]);};_0x238443||(_0x238443=[]),_0x238443['push'](_0x23308e);}}if(_0x238443){const _0x4166c2=_0x395174=>{for(let _0x572912=0x23d1+0xcc7*0x3+-0x4a26;_0x572912<_0x238443['length'];++_0x572912)_0x238443[_0x572912](_0x395174);};return Sr['createAnim'+'Target'](_0x4166c2,'number',-0x2052*0x1+-0x2111+0x4164,_0x593d06,'weight.'+_0x13c95b);}return null;},'materialTexture':(_0x5c42ef,_0x1dae2c)=>{const _0xcaf34d=_0x3332df(_0x5c42ef);if(_0xcaf34d){let _0x4d8fb7;for(let _0x4f4d4d=0x10e8*0x1+-0x22b3+0x11cb;_0x4f4d4d<_0xcaf34d['length'];++_0x4f4d4d)if(_0xcaf34d[_0x4f4d4d]['node']['name']===_0x5c42ef['name']){_0x4d8fb7=_0xcaf34d[_0x4f4d4d];break;}if(_0x4d8fb7){const _0x3ae7a4=_0x3443c6=>{const _0x484930=this['animCompon'+'ent']['system']['app']['assets']['get'](_0x3443c6[0x19c4+0x727+-0x20eb]);_0x484930&&_0x484930['resource']&&_0x484930['type']==='texture'&&(_0x4d8fb7['material'][_0x1dae2c]=_0x484930['resource'],_0x4d8fb7['material']['update']());};return Sr['createAnim'+'Target'](_0x3ae7a4,'vector',-0x5c*0x1a+0x621+0x1*0x338,_0x5c42ef,'materialTe'+'xture','material');}}return null;}};}['_isPathAct'+'ive'](_0x1f52ef){if(!this['_mask'])return!(-0x65*0x2f+-0x1d70+0x2ffb);const _0x2f4a09=[_0x1f52ef['entityPath'][-0x4a*0x61+-0x3e*0x3b+0x2a*0x102],this['graph']['name']];for(let _0x6063a1=-0x5*0x5d5+0x24ed+0x2*-0x3e2;_0x6063a1<_0x2f4a09['length'];++_0x6063a1){let _0x2f4219=_0x2f4a09[_0x6063a1];if(this['_isPathInM'+'ask'](_0x2f4219,_0x1f52ef['entityPath']['length']===-0x130c+-0x269+0xabb*0x2))return!(-0x1d78+0x395*-0x5+0x2f61);for(let _0x5f0e5d=-0x1*-0x140b+0xe*-0x12+-0x130e;_0x5f0e5d<_0x1f52ef['entityPath']['length'];_0x5f0e5d++)if(_0x2f4219+='/'+_0x1f52ef['entityPath'][_0x5f0e5d],this['_isPathInM'+'ask'](_0x2f4219,_0x5f0e5d===_0x1f52ef['entityPath']['length']-(-0x16bb+0x14e8+-0x6*-0x4e)))return!(-0x6a*-0x2b+0xeaa+-0x2078);}return!(-0xd*-0x2b6+0x7*-0x51+0x1083*-0x2);}['findNode'](_0x510333){if(!this['_isPathAct'+'ive'](_0x510333))return null;let _0x30f315;if(this['graph']&&(_0x30f315=this['graph']['findByPath'](_0x510333['entityPath']),_0x30f315||(_0x30f315=this['graph']['findByPath'](_0x510333['entityPath']['slice'](-0x1*0x971+0x15e6*-0x1+0xfac*0x2)))),!_0x30f315){_0x30f315=this['nodes'][_0x510333['entityPath'][_0x510333['entityPath']['length']-(-0x10f2+0x9d*0x11+0x686)]||''];const _0x4724c7=ra['encode'](_0x510333['entityPath'][_0x510333['entityPath']['length']-(0xc*-0xd3+-0x31*-0x9d+0xd7*-0x18)]||'','graph',_0x510333['propertyPa'+'th']);this['visitedFal'+'lbackGraph'+'Paths'][_0x4724c7]===0xef5+0x1*-0xac1+-0x2b*0x19&&w['warnOnce']('Anim\x20Binde'+'r:\x20Multipl'+'e\x20animatio'+'n\x20curves\x20w'+'ith\x20the\x20pa'+'th\x20'+_0x4724c7+('\x20are\x20prese'+'nt\x20in\x20the\x20')+this['graph']['path']+('\x20graph\x20whi'+'ch\x20may\x20res'+'ult\x20in\x20the'+'\x20incorrect'+'\x20binding\x20o'+'f\x20animatio'+'ns')),Number['isFinite'](this['visitedFal'+'lbackGraph'+'Paths'][_0x4724c7])?this['visitedFal'+'lbackGraph'+'Paths'][_0x4724c7]++:this['visitedFal'+'lbackGraph'+'Paths'][_0x4724c7]=-0x1*-0x48f+-0x15d+0x199*-0x2;}return _0x30f315;}static['createAnim'+'Target'](_0x5782b5,_0x32ee6f,_0x4e4b94,_0x412d1f,_0x1af453,_0x15cbd6){const _0xac6c83=ra['encode'](_0x412d1f['path'],_0x15cbd6||'entity',_0x1af453);return new xu(_0x5782b5,_0x32ee6f,_0x4e4b94,_0xac6c83);}['resolve'](_0x443605){const _0x3fc612=ra['encode'](_0x443605['entityPath'],_0x443605['component'],_0x443605['propertyPa'+'th']);let _0x310fa9=this['targetCach'+'e'][_0x3fc612];if(_0x310fa9)return _0x310fa9;const _0xdf82fd=this['findNode'](_0x443605);if(!_0xdf82fd)return null;const _0x1d7ab0=this['handlers'][_0x443605['propertyPa'+'th']];return!_0x1d7ab0||(_0x310fa9=_0x1d7ab0(_0xdf82fd),!_0x310fa9)?null:(this['targetCach'+'e'][_0x3fc612]=_0x310fa9,this['nodeCounts'][_0xdf82fd['path']]?this['nodeCounts'][_0xdf82fd['path']]++:(this['activeNode'+'s']['push'](_0xdf82fd),this['nodeCounts'][_0xdf82fd['path']]=-0xb07+0xf4+0xa*0x102),_0x310fa9);}['unresolve'](_0x4964de){if(_0x4964de['component']!=='graph')return;const _0xb94ec6=this['nodes'][_0x4964de['entityPath'][_0x4964de['entityPath']['length']-(-0x2*-0x5e2+-0x1f8*0x10+0x13bd)]||''];if(this['nodeCounts'][_0xb94ec6['path']]--,this['nodeCounts'][_0xb94ec6['path']]===-0x23b6+0x2391+-0x1*-0x25){const _0x3b54a4=this['activeNode'+'s'],_0xf677d7=_0x3b54a4['indexOf'](_0xb94ec6['node']),_0x3605b1=_0x3b54a4['length'];_0xf677d7<_0x3605b1-(0x29+0xb83+-0xbab)&&(_0x3b54a4[_0xf677d7]=_0x3b54a4[_0x3605b1-(-0x1842+0x1769+-0x1*-0xda)]),_0x3b54a4['pop']();}}['update'](_0x296ca0){const _0x38ab18=this['activeNode'+'s'];for(let _0x5ae76f=0x217*0x7+0x12af+-0x2150;_0x5ae76f<_0x38ab18['length'];++_0x5ae76f)_0x38ab18[_0x5ae76f]['_dirtifyLo'+'cal']();}['assignMask'](_0x2b6a7f){return _0x2b6a7f!==this['_mask']?(this['_mask']=_0x2b6a7f,!(-0xc7*-0x11+-0x22c9+0x1592)):!(-0x201e+-0x1605+-0x84*-0x69);}}class Wv extends we{constructor(){super(...arguments),h(this,'_animation'+'s',{}),h(this,'_assets',[]),h(this,'_loop',!(-0x2351*-0x1+0x5*-0x207+0x125*-0x16)),h(this,'animEvalua'+'tor',null),h(this,'model',null),h(this,'skeleton',null),h(this,'fromSkel',null),h(this,'toSkel',null),h(this,'animations'+'Index',{}),h(this,'prevAnim',null),h(this,'currAnim',null),h(this,'blend',0xc2*-0x30+0x1d+0x2443),h(this,'blending',!(-0x18ed+-0x3f5*-0x7+-0x2c5)),h(this,'blendSpeed',-0x737+-0x3*-0x4cd+-0x73*0x10),h(this,'activate',!(-0x2540+0x1d*0x3d+0x1e57)),h(this,'speed',-0x7*0x515+-0x1e91+0x4225);}set['animations'](_0x746261){this['_animation'+'s']=_0x746261,this['onSetAnima'+'tions']();}get['animations'](){return this['_animation'+'s'];}set['assets'](_0x857cd2){const _0x32c61e=this['_assets'];if(_0x32c61e&&_0x32c61e['length']){for(let _0x3e1b34=-0x166*0x4+0x2*0x10b1+-0x1bca;_0x3e1b34<_0x32c61e['length'];_0x3e1b34++)if(_0x32c61e[_0x3e1b34]){const _0x6d36ad=this['system']['app']['assets']['get'](_0x32c61e[_0x3e1b34]);if(_0x6d36ad){_0x6d36ad['off']('change',this['onAssetCha'+'nged'],this),_0x6d36ad['off']('remove',this['onAssetRem'+'oved'],this);const _0x3b5f6e=this['animations'+'Index'][_0x6d36ad['id']];this['currAnim']===_0x3b5f6e&&this['_stopCurre'+'ntAnimatio'+'n'](),delete this['animations'][_0x3b5f6e],delete this['animations'+'Index'][_0x6d36ad['id']];}}}this['_assets']=_0x857cd2;const _0x2eddf9=_0x857cd2['map'](_0x3abce6=>_0x3abce6 instanceof pe?_0x3abce6['id']:_0x3abce6);this['loadAnimat'+'ionAssets'](_0x2eddf9);}get['assets'](){return this['_assets'];}set['currentTim'+'e'](_0x416d52){if(this['skeleton']&&(this['skeleton']['currentTim'+'e']=_0x416d52,this['skeleton']['addTime'](0xa*-0x2a2+-0x11bb+0x2c0f),this['skeleton']['updateGrap'+'h']()),this['animEvalua'+'tor']){const _0x4ce212=this['animEvalua'+'tor']['clips'];for(let _0x1c7908=-0xddd+-0x376*-0x1+0xa67;_0x1c7908<_0x4ce212['length'];++_0x1c7908)_0x4ce212[_0x1c7908]['time']=_0x416d52;}}get['currentTim'+'e'](){if(this['skeleton'])return this['skeleton']['_time'];if(this['animEvalua'+'tor']){const _0x314241=this['animEvalua'+'tor']['clips'];if(_0x314241['length']>0x882+-0x5*0x54f+0x1209)return _0x314241[_0x314241['length']-(-0x1*-0x1349+0x1c9c+-0x2fe4)]['time'];}return 0x736+-0x5*0x46f+0xef5;}get['duration'](){return this['currAnim']?this['animations'][this['currAnim']]['duration']:(w['warn']('No\x20animati'+'on\x20is\x20play'+'ing\x20to\x20get'+'\x20a\x20duratio'+'n.\x20Returni'+'ng\x200.'),-0x3a9+-0x1*-0x2b7+0xf2);}set['loop'](_0x581903){if(this['_loop']=_0x581903,this['skeleton']&&(this['skeleton']['looping']=_0x581903),this['animEvalua'+'tor']){for(let _0x5175a9=-0x1c83*0x1+0xe4e+0xe35;_0x5175a9<this['animEvalua'+'tor']['clips']['length'];++_0x5175a9)this['animEvalua'+'tor']['clips'][_0x5175a9]['loop']=_0x581903;}}get['loop'](){return this['_loop'];}['play'](_0x11df39,_0x2c30cf=-0xc0*-0x3+-0x1131+0x11*0xe1){if(!(!this['enabled']||!this['entity']['enabled'])){if(!this['animations'][_0x11df39]){w['error']('Trying\x20to\x20'+'play\x20anima'+'tion\x20\x27'+_0x11df39+('\x27\x20which\x20do'+'esn\x27t\x20exis'+'t'));return;}if(this['prevAnim']=this['currAnim'],this['currAnim']=_0x11df39,this['model']){!this['skeleton']&&!this['animEvalua'+'tor']&&this['_createAni'+'mationCont'+'roller']();const _0x17f4d8=this['animations'][this['prevAnim']],_0x500efa=this['animations'][this['currAnim']];if(this['blending']=_0x2c30cf>-0x13c*-0x1+0x2497+-0x25d3*0x1&&!!this['prevAnim'],this['blending']&&(this['blend']=-0xd00+0x3d1*0x4+0xa*-0x3a,this['blendSpeed']=(0x1a2c+-0x1*-0x1a1f+-0x344a)/_0x2c30cf),this['skeleton']&&(this['blending']?(this['fromSkel']['animation']=_0x17f4d8,this['fromSkel']['addTime'](this['skeleton']['_time']),this['toSkel']['animation']=_0x500efa):this['skeleton']['animation']=_0x500efa),this['animEvalua'+'tor']){const _0xd8c9e9=this['animEvalua'+'tor'];if(this['blending']){for(;_0xd8c9e9['clips']['length']>0x1691+-0x1*-0xbfe+-0x228e*0x1;)_0xd8c9e9['removeClip'](-0x1059+-0x8b*0x29+-0x161*-0x1c);}else this['animEvalua'+'tor']['removeClip'+'s']();const _0x23f2d1=new Dh(this['animations'][this['currAnim']],0x24fd+0x13*-0x32+-0x2147,0x2244+0x9*-0x2bd+-0x4cf*0x2,!(0x9*0x1e7+-0x3*0x5d1+0x54),this['loop']);_0x23f2d1['name']=this['currAnim'],_0x23f2d1['blendWeigh'+'t']=this['blending']?0x1c17+-0x13bf+-0x42c*0x2:0x189f*0x1+0x2fc*0x1+0x1b9a*-0x1,_0x23f2d1['reset'](),this['animEvalua'+'tor']['addClip'](_0x23f2d1);}}this['playing']=!(-0x1d63*0x1+0x25b*0x7+0xce6);}}['getAnimati'+'on'](_0x1a39a6){return this['animations'][_0x1a39a6];}['setModel'](_0xfd0b34){_0xfd0b34!==this['model']&&(this['_resetAnim'+'ationContr'+'oller'](),this['model']=_0xfd0b34,this['animations']&&this['currAnim']&&this['animations'][this['currAnim']]&&this['play'](this['currAnim']));}['onSetAnima'+'tions'](){const _0x2f58fc=this['entity']['model'];if(_0x2f58fc){const _0x3c281c=_0x2f58fc['model'];_0x3c281c&&_0x3c281c!==this['model']&&this['setModel'](_0x3c281c);}if(!this['currAnim']&&this['activate']&&this['enabled']&&this['entity']['enabled']){const _0x23245c=Object['keys'](this['_animation'+'s']);_0x23245c['length']>-0x16c*0x10+0x13*-0x1fc+-0x1*-0x3c74&&this['play'](_0x23245c[-0x1586+-0x1082+0x4c1*0x8]);}}['_resetAnim'+'ationContr'+'oller'](){this['skeleton']=null,this['fromSkel']=null,this['toSkel']=null,this['animEvalua'+'tor']=null;}['_createAni'+'mationCont'+'roller'](){const _0x307f04=this['model'],_0x5d3173=this['animations'];let _0x2086d8=!(0xb*-0x277+0x22ba+-0x79c*0x1),_0x5a439b=!(0x1383+-0x1*0x142f+0xad);for(const _0x2b123a in _0x5d3173)_0x5d3173['hasOwnProp'+'erty'](_0x2b123a)&&(_0x5d3173[_0x2b123a]['constructo'+'r']===Qi?_0x5a439b=!(0x3ca+-0x8e0+0x516):_0x2086d8=!(0x141d*0x1+-0x1185+-0x4*0xa6));const _0x135fc8=_0x307f04['getGraph']();_0x2086d8?(this['fromSkel']=new Sf(_0x135fc8),this['toSkel']=new Sf(_0x135fc8),this['skeleton']=new Sf(_0x135fc8),this['skeleton']['looping']=this['loop'],this['skeleton']['setGraph'](_0x135fc8)):_0x5a439b&&(this['animEvalua'+'tor']=new Gv(new Sr(this['entity'])));}['loadAnimat'+'ionAssets'](_0x5733e4){if(!_0x5733e4||!_0x5733e4['length'])return;const _0x19453a=this['system']['app']['assets'],_0x55cbc7=_0x5792fc=>{if(_0x5792fc['resources']['length']>-0x7c9+0x5*0x463+-0xe25){for(let _0x19155e=0x1*0x124e+0x14*0x60+-0x2*0xce7;_0x19155e<_0x5792fc['resources']['length'];_0x19155e++)this['animations'][_0x5792fc['resources'][_0x19155e]['name']]=_0x5792fc['resources'][_0x19155e],this['animations'+'Index'][_0x5792fc['id']]=_0x5792fc['resources'][_0x19155e]['name'];}else this['animations'][_0x5792fc['name']]=_0x5792fc['resource'],this['animations'+'Index'][_0x5792fc['id']]=_0x5792fc['name'];this['animations']=this['animations'];},_0x333770=_0x4abbbb=>{_0x4abbbb['off']('change',this['onAssetCha'+'nged'],this),_0x4abbbb['on']('change',this['onAssetCha'+'nged'],this),_0x4abbbb['off']('remove',this['onAssetRem'+'oved'],this),_0x4abbbb['on']('remove',this['onAssetRem'+'oved'],this),_0x4abbbb['resource']?_0x55cbc7(_0x4abbbb):(_0x4abbbb['once']('load',_0x55cbc7,this),this['enabled']&&this['entity']['enabled']&&_0x19453a['load'](_0x4abbbb));};for(let _0x3194e7=-0x26*-0x71+-0x1008+-0xbe*0x1,_0x26be8c=_0x5733e4['length'];_0x3194e7<_0x26be8c;_0x3194e7++){const _0x1e3884=_0x19453a['get'](_0x5733e4[_0x3194e7]);_0x1e3884?_0x333770(_0x1e3884):_0x19453a['on']('add:'+_0x5733e4[_0x3194e7],_0x333770);}}['onAssetCha'+'nged'](_0x56e84d,_0x53afff,_0x288260,_0x412973){if(_0x53afff==='resource'||_0x53afff==='resources'){if(_0x53afff==='resources'&&_0x288260&&_0x288260['length']===0x488+-0x1*-0x835+-0xcbd&&(_0x288260=null),_0x288260){let _0x532211=!(0x2662+-0x5*0x6a+-0x244f);if(_0x288260['length']>-0x3a3+0x3a*0x6d+-0xf5*0x16){if(_0x412973&&_0x412973['length']>-0x2608*-0x1+-0x33*0x6b+-0x3e*0x45){for(let _0x17e2a5=-0x5e4+-0x6c6+-0xcaa*-0x1;_0x17e2a5<_0x412973['length'];_0x17e2a5++)delete this['animations'][_0x412973[_0x17e2a5]['name']];}else delete this['animations'][_0x56e84d['name']];_0x532211=!(0x1*-0x31c+0x1*-0x2a5+-0x1*-0x5c2);for(let _0x841e48=0x6*0xd+0x1a96+-0x2*0xd72;_0x841e48<_0x288260['length'];_0x841e48++)this['animations'][_0x288260[_0x841e48]['name']]=_0x288260[_0x841e48],!_0x532211&&this['currAnim']===_0x288260[_0x841e48]['name']&&this['playing']&&this['enabled']&&this['entity']['enabled']&&(_0x532211=!(-0x5c*-0x27+-0x24*0xf2+0xf4*0x15),this['play'](_0x288260[_0x841e48]['name']));_0x532211||(this['_stopCurre'+'ntAnimatio'+'n'](),this['onSetAnima'+'tions']());}else{if(_0x412973&&_0x412973['length']>0xd04+-0x1324+-0x621*-0x1){for(let _0x1efdf2=0x13f6+-0x96*-0x27+0x5*-0x890;_0x1efdf2<_0x412973['length'];_0x1efdf2++)delete this['animations'][_0x412973[_0x1efdf2]['name']];}this['animations'][_0x56e84d['name']]=_0x288260[0x2661+-0xa7*-0x18+-0x57*0x9f]||_0x288260,_0x532211=!(0x143+-0x1*-0x1aba+-0xdfe*0x2),this['currAnim']===_0x56e84d['name']&&this['playing']&&this['enabled']&&this['entity']['enabled']&&(_0x532211=!(0x5f4+-0x828*-0x1+0x54*-0x2b),this['play'](_0x56e84d['name'])),_0x532211||(this['_stopCurre'+'ntAnimatio'+'n'](),this['onSetAnima'+'tions']());}this['animations'+'Index'][_0x56e84d['id']]=_0x56e84d['name'];}else{if(_0x412973['length']>0xea3*0x2+-0x7*0x143+-0xc*0x1b4){for(let _0x147aef=-0xd0e+0x12ec+-0x5de;_0x147aef<_0x412973['length'];_0x147aef++)delete this['animations'][_0x412973[_0x147aef]['name']],this['currAnim']===_0x412973[_0x147aef]['name']&&this['_stopCurre'+'ntAnimatio'+'n']();}else delete this['animations'][_0x56e84d['name']],this['currAnim']===_0x56e84d['name']&&this['_stopCurre'+'ntAnimatio'+'n']();delete this['animations'+'Index'][_0x56e84d['id']];}}}['onAssetRem'+'oved'](_0x2f3dcf){if(_0x2f3dcf['off']('remove',this['onAssetRem'+'oved'],this),this['animations']){if(_0x2f3dcf['resources']['length']>-0x15f1+-0xa26+-0x403*-0x8){for(let _0x6d2494=0x3*-0xc6+-0xe99+-0x10eb*-0x1;_0x6d2494<_0x2f3dcf['resources']['length'];_0x6d2494++)delete this['animations'][_0x2f3dcf['resources'][_0x6d2494]['name']],this['currAnim']===_0x2f3dcf['resources'][_0x6d2494]['name']&&this['_stopCurre'+'ntAnimatio'+'n']();}else delete this['animations'][_0x2f3dcf['name']],this['currAnim']===_0x2f3dcf['name']&&this['_stopCurre'+'ntAnimatio'+'n']();delete this['animations'+'Index'][_0x2f3dcf['id']];}}['_stopCurre'+'ntAnimatio'+'n'](){if(this['currAnim']=null,this['playing']=!(0x9e9+0x2570+-0x2f58),this['skeleton']&&(this['skeleton']['currentTim'+'e']=0x24a6+0x23*-0x59+0x3*-0x829,this['skeleton']['animation']=null),this['animEvalua'+'tor']){for(let _0x2abd09=-0x106a+-0x83b*0x3+0x26b*0x11;_0x2abd09<this['animEvalua'+'tor']['clips']['length'];++_0x2abd09)this['animEvalua'+'tor']['clips'][_0x2abd09]['stop']();this['animEvalua'+'tor']['update'](0x1a2a+0x1*0x64e+-0x2078),this['animEvalua'+'tor']['removeClip'+'s']();}}['onEnable'](){super['onEnable']();const _0x1e27ba=this['assets'],_0x342a2d=this['system']['app']['assets'];if(_0x1e27ba)for(let _0xbcd203=0x1*-0xbd5+-0xf29*0x1+-0x2*-0xd7f,_0x391c6c=_0x1e27ba['length'];_0xbcd203<_0x391c6c;_0xbcd203++){let _0x4d7eee=_0x1e27ba[_0xbcd203];_0x4d7eee instanceof pe||(_0x4d7eee=_0x342a2d['get'](_0x4d7eee)),_0x4d7eee&&!_0x4d7eee['resource']&&_0x342a2d['load'](_0x4d7eee);}if(this['activate']&&!this['currAnim']){const _0x320e7f=Object['keys'](this['animations']);_0x320e7f['length']>0x2469+-0xeb7*-0x1+-0x3320&&this['play'](_0x320e7f[0x23b5+0x269f*-0x1+-0x1*-0x2ea]);}}['onBeforeRe'+'move'](){for(let _0x249bb5=-0xe4e*0x2+-0x1d42+0x39de;_0x249bb5<this['assets']['length'];_0x249bb5++){let _0x347d05=this['assets'][_0x249bb5];typeof _0x347d05=='number'&&(_0x347d05=this['system']['app']['assets']['get'](_0x347d05)),_0x347d05&&(_0x347d05['off']('change',this['onAssetCha'+'nged'],this),_0x347d05['off']('remove',this['onAssetRem'+'oved'],this));}this['skeleton']=null,this['fromSkel']=null,this['toSkel']=null,this['animEvalua'+'tor']=null;}['update'](_0x4d0c1d){if(this['blending']&&(this['blend']+=_0x4d0c1d*this['blendSpeed'],this['blend']>=-0x9c8+-0x1123+0x1aec&&(this['blend']=-0x622+-0x3*-0xcdd+-0x2074)),this['playing']){const _0x399397=this['skeleton'];if(_0x399397!==null&&this['model']!==null){if(this['blending'])_0x399397['blend'](this['fromSkel'],this['toSkel'],this['blend']);else{const _0x4d09e2=_0x4d0c1d*this['speed'];_0x399397['addTime'](_0x4d09e2),this['speed']>-0x3e*-0x54+0x8*-0x91+-0x16*0xb8&&_0x399397['_time']===_0x399397['animation']['duration']&&!this['loop']?this['playing']=!(-0x20*0x38+0x1de1+-0x16e0):this['speed']<-0x2*-0xdd1+-0x1f7c+-0x1d*-0x22&&_0x399397['_time']===0x1*-0x12c4+-0x2d0+0x1594&&!this['loop']&&(this['playing']=!(-0x9f+0x551*0x1+-0x1*0x4b1));}this['blending']&&this['blend']===0x1c68+-0x53*0xa+0x3*-0x863&&(_0x399397['animation']=this['toSkel']['animation']),_0x399397['updateGrap'+'h']();}}const _0x2b2e46=this['animEvalua'+'tor'];if(_0x2b2e46){for(let _0x5caaf8=0xd1*-0xf+0x484*-0x1+-0x7*-0x265;_0x5caaf8<_0x2b2e46['clips']['length'];++_0x5caaf8){const _0x42308a=_0x2b2e46['clips'][_0x5caaf8];_0x42308a['speed']=this['speed'],this['playing']?_0x42308a['resume']():_0x42308a['pause']();}this['blending']&&_0x2b2e46['clips']['length']>-0x245f+-0x67a*-0x1+-0x1*-0x1de6&&(_0x2b2e46['clips'][-0xd4c*0x2+-0x9d*-0x4+-0x373*-0x7]['blendWeigh'+'t']=this['blend']),_0x2b2e46['update'](_0x4d0c1d);}this['blending']&&this['blend']===0x9ab+-0x1*0x1574+0xbca&&(this['blending']=!(-0x27*-0xdb+0x3*-0x581+-0x10d9));}}class LL{constructor(){this['enabled']=!(-0x4*0x94e+-0x9f5*-0x1+0x3e5*0x7);}}const Tu=['enabled'];class RL extends ct{constructor(_0x25f2f2){super(_0x25f2f2),this['id']='animation',this['ComponentT'+'ype']=Wv,this['DataType']=LL,this['schema']=Tu,this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this),this['app']['systems']['on']('update',this['onUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x105f6c,_0x43b47a,_0x5babfa){_0x5babfa=['activate','enabled','loop','speed','assets'];for(const _0x597f3b of _0x5babfa)_0x43b47a['hasOwnProp'+'erty'](_0x597f3b)&&(_0x105f6c[_0x597f3b]=_0x43b47a[_0x597f3b]);super['initialize'+'ComponentD'+'ata'](_0x105f6c,_0x43b47a,Tu);}['cloneCompo'+'nent'](_0x1e3bd4,_0xf4d5d){this['addCompone'+'nt'](_0xf4d5d,{}),_0xf4d5d['animation']['assets']=_0x1e3bd4['animation']['assets']['slice'](),_0xf4d5d['animation']['speed']=_0x1e3bd4['animation']['speed'],_0xf4d5d['animation']['loop']=_0x1e3bd4['animation']['loop'],_0xf4d5d['animation']['activate']=_0x1e3bd4['animation']['activate'],_0xf4d5d['animation']['enabled']=_0x1e3bd4['animation']['enabled'];const _0x111019={},_0x1a73ab=_0x1e3bd4['animation']['animations'];for(const _0x5a10be in _0x1a73ab)_0x1a73ab['hasOwnProp'+'erty'](_0x5a10be)&&(_0x111019[_0x5a10be]=_0x1a73ab[_0x5a10be]);_0xf4d5d['animation']['animations']=_0x111019;const _0x32fb42={},_0x3b735a=_0x1e3bd4['animation']['animations'+'Index'];for(const _0x12c4da in _0x3b735a)_0x3b735a['hasOwnProp'+'erty'](_0x12c4da)&&(_0x32fb42[_0x12c4da]=_0x3b735a[_0x12c4da]);return _0xf4d5d['animation']['animations'+'Index']=_0x32fb42,_0xf4d5d['animation'];}['onBeforeRe'+'move'](_0x4c3b67,_0x644cab){_0x644cab['onBeforeRe'+'move']();}['onUpdate'](_0x24c365){const _0x3fe7ea=this['store'];for(const _0x5d47fc in _0x3fe7ea)if(_0x3fe7ea['hasOwnProp'+'erty'](_0x5d47fc)){const _0x518e3f=_0x3fe7ea[_0x5d47fc];_0x518e3f['data']['enabled']&&_0x518e3f['entity']['enabled']&&_0x518e3f['entity']['animation']['update'](_0x24c365);}}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}we['_buildAcce'+'ssors'](Wv['prototype'],Tu);class ml{constructor(_0x23dc14,_0x2a9856,_0x42f250,_0x114c3e,_0x3483d7=-0xe*-0x28c+-0x3e2*0xa+0x32d){this['_state']=_0x23dc14,this['_parent']=_0x2a9856,this['_name']=_0x42f250,Array['isArray'](_0x114c3e)?(this['_point']=new J(_0x114c3e[0x987+-0x1728+0xda1],_0x114c3e[0x26a4+-0x57a+-0xd*0x28d]),this['_pointLeng'+'th']=this['_point']['length']()):(this['_point']=_0x114c3e,this['_pointLeng'+'th']=_0x114c3e),this['_speed']=_0x3483d7,this['_weightedS'+'peed']=-0x7*0x25a+0xd6+0xfa1,this['_weight']=-0xa49*0x2+0x1b*-0x63+0x1f04,this['_animTrack']=null;}get['parent'](){return this['_parent'];}get['name'](){return this['_name'];}get['path'](){return this['_parent']?this['_parent']['path']+'.'+this['_name']:this['_name'];}get['point'](){return this['_point'];}get['pointLengt'+'h'](){return this['_pointLeng'+'th'];}set['weight'](_0x164feb){this['_weight']=_0x164feb;}get['weight'](){return this['_parent']?this['_parent']['weight']*this['_weight']:this['_weight'];}get['normalized'+'Weight'](){const _0x5b256d=this['_state']['totalWeigh'+'t'];return _0x5b256d===0x87*0x49+-0x3*-0x53+-0x2778?-0x553+0x10c0*0x1+0x1*-0xb6d:this['weight']/_0x5b256d;}get['speed'](){return this['_weightedS'+'peed']*this['_speed'];}get['absoluteSp'+'eed'](){return Math['abs'](this['_speed']);}set['weightedSp'+'eed'](_0x4ec1d9){this['_weightedS'+'peed']=_0x4ec1d9;}get['weightedSp'+'eed'](){return this['_weightedS'+'peed'];}set['animTrack'](_0x491ff5){this['_animTrack']=_0x491ff5;}get['animTrack'](){return this['_animTrack'];}}class Jn extends ml{constructor(_0x84c60a,_0x191ce3,_0x1e7808,_0x1a2a2a,_0xd6192d,_0xff2766,_0x3883ab,_0x1657e8,_0x1263c3){super(_0x84c60a,_0x191ce3,_0x1e7808,_0x1a2a2a),this['_parameter'+'s']=_0xd6192d,this['_parameter'+'Values']=new Array(_0xd6192d['length']),this['_children']=[],this['_findParam'+'eter']=_0x1263c3,this['_syncAnima'+'tions']=_0x3883ab!==!(-0xa6*-0x10+-0xbac+0x1*0x14d),this['_pointCach'+'e']={};for(let _0x1e705d=0xf0a+0x511*0x1+-0x141b*0x1;_0x1e705d<_0xff2766['length'];_0x1e705d++){const _0x3dbfcf=_0xff2766[_0x1e705d];_0x3dbfcf['children']?this['_children']['push'](_0x1657e8(_0x3dbfcf['type'],_0x84c60a,this,_0x3dbfcf['name'],-0x2148+0xb2+0x2097,_0x3dbfcf['parameter']?[_0x3dbfcf['parameter']]:_0x3dbfcf['parameters'],_0x3dbfcf['children'],_0x3dbfcf['syncAnimat'+'ions'],_0x1657e8,_0x1263c3)):this['_children']['push'](new ml(_0x84c60a,this,_0x3dbfcf['name'],_0x3dbfcf['point'],_0x3dbfcf['speed']));}}get['weight'](){return this['calculateW'+'eights'](),this['_parent']?this['_parent']['weight']*this['_weight']:this['_weight'];}get['syncAnimat'+'ions'](){return this['_syncAnima'+'tions'];}['getChild'](_0x50bb45){for(let _0x2b9612=-0x301*-0x2+-0x210d+0x1b0b;_0x2b9612<this['_children']['length'];_0x2b9612++)if(this['_children'][_0x2b9612]['name']===_0x50bb45)return this['_children'][_0x2b9612];return null;}['updatePara'+'meterValue'+'s'](){let _0x390f61=!(0x98d*-0x4+-0x13dd+0x135b*0x3);for(let _0x3b9c0f=0x6*0x13a+0x679+-0xdd5;_0x3b9c0f<this['_parameter'+'Values']['length'];_0x3b9c0f++){const _0x5dbeed=this['_findParam'+'eter'](this['_parameter'+'s'][_0x3b9c0f])['value'];this['_parameter'+'Values'][_0x3b9c0f]!==_0x5dbeed&&(this['_parameter'+'Values'][_0x3b9c0f]=_0x5dbeed,_0x390f61=!(0x1*0x1c5+0x1*0x17ad+-0x1*0x1971));}return _0x390f61;}['getNodeWei'+'ghtedDurat'+'ion'](_0x26ff45){return this['_children'][_0x26ff45]['animTrack']['duration']/this['_children'][_0x26ff45]['speedMulti'+'plier']*this['_children'][_0x26ff45]['weight'];}['getNodeCou'+'nt'](){let _0x464560=-0xc9d+0xe*0x9+0xc1f;for(let _0x32b5ef=0x122c+0x1aa+-0x13d6;_0x32b5ef<this['_children']['length'];_0x32b5ef++)this['_children'][_0x32b5ef]['constructo'+'r']===Jn?_0x464560+=this['_children'][_0x32b5ef]['getNodeCou'+'nt']():_0x464560++;return _0x464560;}}class OL extends Jn{constructor(_0x3770e1,_0x5ce31f,_0x41d512,_0x9c5812,_0x234469,_0x1aaec1,_0x28abe1,_0x2be3ca,_0x187694){_0x1aaec1['sort']((_0x13bcc6,_0xb3cfcc)=>_0x13bcc6['point']-_0xb3cfcc['point']),super(_0x3770e1,_0x5ce31f,_0x41d512,_0x9c5812,_0x234469,_0x1aaec1,_0x28abe1,_0x2be3ca,_0x187694);}['calculateW'+'eights'](){if(this['updatePara'+'meterValue'+'s']())return;let _0x3a71c1=-0x21b7+0xf3f*0x1+0x1278;this['_children'][0x1*-0xd1f+0x7*-0x506+-0x3049*-0x1]['weight']=0x1*-0xa4d+-0x728+-0x1175*-0x1;for(let _0x1c1abe=-0xb91*0x3+-0x79d+0x2a50;_0x1c1abe<this['_children']['length'];_0x1c1abe++){const _0x4f2b6e=this['_children'][_0x1c1abe];if(_0x1c1abe!==this['_children']['length']-(0x1f0f+0x1840+-0x374e)){const _0x4ef48a=this['_children'][_0x1c1abe+(-0xa0d+0x264a+-0x1c3c)];if(_0x4f2b6e['point']===_0x4ef48a['point'])_0x4f2b6e['weight']=0x17*-0xaf+0x97d+0x63c+0.5,_0x4ef48a['weight']=-0x1b16+-0x19ef+0x3505+0.5;else{if(Y['between'](this['_parameter'+'Values'][-0xe*-0x14d+0x359*-0x8+-0x2*-0x449],_0x4f2b6e['point'],_0x4ef48a['point'],!(-0x8*-0x9c+0x3*0x6a5+-0x845*0x3))){const _0x5687a2=Math['abs'](_0x4f2b6e['point']-_0x4ef48a['point']),_0xf75c79=Math['abs'](_0x4f2b6e['point']-this['_parameter'+'Values'][-0x2171+0x331+0x1e40]),_0x21eced=(_0x5687a2-_0xf75c79)/_0x5687a2;_0x4f2b6e['weight']=_0x21eced,_0x4ef48a['weight']=-0x1fe+-0x65*-0x15+-0x2*0x325-_0x21eced;}else _0x4ef48a['weight']=0xa1d+-0xc0d+0x1f0;}}this['_syncAnima'+'tions']&&(_0x3a71c1+=_0x4f2b6e['animTrack']['duration']/_0x4f2b6e['absoluteSp'+'eed']*_0x4f2b6e['weight']);}if(this['_syncAnima'+'tions'])for(let _0x57cc87=-0x2c2*0x4+0x1be1+-0x10d9;_0x57cc87<this['_children']['length'];_0x57cc87++){const _0x41e6c0=this['_children'][_0x57cc87];_0x41e6c0['weightedSp'+'eed']=_0x41e6c0['animTrack']['duration']/_0x41e6c0['absoluteSp'+'eed']/_0x3a71c1;}}}const ki=class ki extends Jn{['pointDista'+'nceCache'](_0x18a5a0,_0x159742){const _0x1371c7=''+_0x18a5a0+_0x159742;return this['_pointCach'+'e'][_0x1371c7]||(this['_pointCach'+'e'][_0x1371c7]=this['_children'][_0x159742]['point']['clone']()['sub'](this['_children'][_0x18a5a0]['point'])),this['_pointCach'+'e'][_0x1371c7];}['calculateW'+'eights'](){if(this['updatePara'+'meterValue'+'s']())return;let _0xa73325,_0x21fcb9;ki['_p']['set'](...this['_parameter'+'Values']),_0xa73325=0x23b3+-0x7b2+-0x1c01,_0x21fcb9=0x133*0x7+0x2e1+-0x6f*0x1a;for(let _0x431434=0x29*0xa9+-0x10e1+-0xa30;_0x431434<this['_children']['length'];_0x431434++){const _0x2645b9=this['_children'][_0x431434],_0x2816b3=_0x2645b9['point'];ki['_pip']['set'](ki['_p']['x'],ki['_p']['y'])['sub'](_0x2816b3);let _0x42a241=Number['MAX_VALUE'];for(let _0xea4ccb=-0x183a+-0x1*0x18b3+0x30ed;_0xea4ccb<this['_children']['length'];_0xea4ccb++){if(_0x431434===_0xea4ccb)continue;const _0xf2fc1f=this['pointDista'+'nceCache'](_0x431434,_0xea4ccb),_0x3af243=Y['clamp'](-0x10a3+0x147e+-0x3da-ki['_pip']['dot'](_0xf2fc1f)/_0xf2fc1f['lengthSq'](),0x1*-0x1a4d+0x6*0xa7+-0x1*-0x1663,-0x39f+0x3*0xb5e+0xf3d*-0x2);_0x3af243<_0x42a241&&(_0x42a241=_0x3af243);}_0x2645b9['weight']=_0x42a241,_0xa73325+=_0x42a241,this['_syncAnima'+'tions']&&(_0x21fcb9+=_0x2645b9['animTrack']['duration']/_0x2645b9['absoluteSp'+'eed']*_0x2645b9['weight']);}for(let _0x4d3c9b=-0x24+0x41f+-0x3fb;_0x4d3c9b<this['_children']['length'];_0x4d3c9b++){const _0x41a886=this['_children'][_0x4d3c9b];_0x41a886['weight']=_0x41a886['_weight']/_0xa73325,this['_syncAnima'+'tions']&&(_0x41a886['weightedSp'+'eed']=_0x41a886['animTrack']['duration']/_0x41a886['absoluteSp'+'eed']/_0x21fcb9);}}};h(ki,'_p',new J()),h(ki,'_pip',new J());let wu=ki;const Ui=class Ui extends Jn{['pointCache'](_0x1f6c82,_0x34dbf0){const _0x172f84=''+_0x1f6c82+_0x34dbf0;return this['_pointCach'+'e'][_0x172f84]||(this['_pointCach'+'e'][_0x172f84]=new J((this['_children'][_0x34dbf0]['pointLengt'+'h']-this['_children'][_0x1f6c82]['pointLengt'+'h'])/((this['_children'][_0x34dbf0]['pointLengt'+'h']+this['_children'][_0x1f6c82]['pointLengt'+'h'])/(-0x1*0x11bd+-0xd48+0x263*0xd)),J['angleRad'](this['_children'][_0x1f6c82]['point'],this['_children'][_0x34dbf0]['point'])*(0x1*-0xd8d+0x1*0x1318+-0x589))),this['_pointCach'+'e'][_0x172f84];}['calculateW'+'eights'](){if(this['updatePara'+'meterValue'+'s']())return;let _0xb3eb15,_0x1ac6e2;Ui['_p']['set'](...this['_parameter'+'Values']);const _0x3b0e73=Ui['_p']['length']();_0xb3eb15=0x1*0x146e+0x20af+-0x351d,_0x1ac6e2=0x1*0x1ecb+-0xe6f+0x4*-0x417;for(let _0x20d8e6=-0x1a53+0xb52+0xf01;_0x20d8e6<this['_children']['length'];_0x20d8e6++){const _0xfcd318=this['_children'][_0x20d8e6],_0x21dd57=_0xfcd318['point'],_0x548a13=_0xfcd318['pointLengt'+'h'];let _0x1c1eb5=Number['MAX_VALUE'];for(let _0x2b4c3e=0x18a*0x12+0xf1*0x5+-0x1*0x2069;_0x2b4c3e<this['_children']['length'];_0x2b4c3e++){if(_0x20d8e6===_0x2b4c3e)continue;const _0x45801b=this['pointCache'](_0x20d8e6,_0x2b4c3e),_0x204729=this['_children'][_0x2b4c3e]['pointLengt'+'h'];Ui['_pip']['set']((_0x3b0e73-_0x548a13)/((_0x204729+_0x548a13)/(-0x2029+0x32*-0x1d+0x25d5)),J['angleRad'](_0x21dd57,Ui['_p'])*(-0xa3*0x3+0x28*-0x39+0xad3));const _0x43099e=Y['clamp'](-0x59*0x40+0xe*-0x53+0x1acb-Math['abs'](Ui['_pip']['dot'](_0x45801b)/_0x45801b['lengthSq']()),0x2*0x8f0+0x103e*-0x2+0xe9c,-0x83*0x3d+-0x71f*0x5+-0x42d3*-0x1);_0x43099e<_0x1c1eb5&&(_0x1c1eb5=_0x43099e);}_0xfcd318['weight']=_0x1c1eb5,_0xb3eb15+=_0x1c1eb5,this['_syncAnima'+'tions']&&(_0x1ac6e2+=_0xfcd318['animTrack']['duration']/_0xfcd318['absoluteSp'+'eed']*_0xfcd318['weight']);}for(let _0x170b4a=0x1427+-0x5bf*-0x1+0xa*-0x297;_0x170b4a<this['_children']['length'];_0x170b4a++){const _0x15e92e=this['_children'][_0x170b4a];if(_0x15e92e['weight']=_0x15e92e['_weight']/_0xb3eb15,this['_syncAnima'+'tions']){const _0x15b70d=_0x15e92e['animTrack']['duration']/_0x1ac6e2*_0xb3eb15;_0x15e92e['weightedSp'+'eed']=_0x15e92e['absoluteSp'+'eed']*_0x15b70d;}}}};h(Ui,'_p',new J()),h(Ui,'_pip',new J());let Eu=Ui;class FL extends Jn{['calculateW'+'eights'](){if(this['updatePara'+'meterValue'+'s']())return;let _0x5c1020=0x26a5+0x6a8*-0x1+0x1ffd*-0x1,_0x4153fc=-0x2495*0x1+-0x799*0x1+-0x1*-0x2c2e;for(let _0x16f764=-0x1d28+-0xa0f+0x2737*0x1;_0x16f764<this['_children']['length'];_0x16f764++)if(_0x5c1020+=Math['max'](this['_parameter'+'Values'][_0x16f764],-0xce2+0x2347+-0x1665),this['_syncAnima'+'tions']){const _0x1604c4=this['_children'][_0x16f764];_0x4153fc+=_0x1604c4['animTrack']['duration']/_0x1604c4['absoluteSp'+'eed']*_0x1604c4['weight'];}for(let _0x146782=-0x43*0x2a+-0xc00+0x16fe;_0x146782<this['_children']['length'];_0x146782++){const _0x3012bb=this['_children'][_0x146782],_0x338cde=Math['max'](this['_parameter'+'Values'][_0x146782],-0x1*0x22bb+0x9cc+0x1eb*0xd);_0x5c1020?(_0x3012bb['weight']=_0x338cde/_0x5c1020,this['_syncAnima'+'tions']&&(_0x3012bb['weightedSp'+'eed']=_0x3012bb['animTrack']['duration']/_0x3012bb['absoluteSp'+'eed']/_0x4153fc)):(_0x3012bb['weight']=0x1b85+-0x8d*0x3b+0x1a*0x31,this['_syncAnima'+'tions']&&(_0x3012bb['weightedSp'+'eed']=0x1bd7+-0x7b0*0x2+-0xc77*0x1));}}}class Fg{constructor(_0x484276,_0x40b7de,_0x35c89c=0x1271*-0x2+0x75*0xd+-0x1d2*-0x11,_0x299420=!(0x1*-0xa6f+-0xcb*0x1f+0x2304),_0x1545a9){h(this,'_animation'+'s',{}),h(this,'_animation'+'List',[]),(this['_controlle'+'r']=_0x484276,this['_name']=_0x40b7de,this['_speed']=_0x35c89c,this['_loop']=_0x299420,this['_hasAnimat'+'ions']=!(0x2ce*-0x5+-0xc22+0x1a29),_0x1545a9?this['_blendTree']=this['_createTre'+'e'](_0x1545a9['type'],this,null,_0x40b7de,0x5e8+0x65*0x53+-0xc2*0x33,_0x1545a9['parameter']?[_0x1545a9['parameter']]:_0x1545a9['parameters'],_0x1545a9['children'],_0x1545a9['syncAnimat'+'ions'],this['_createTre'+'e'],this['_controlle'+'r']['findParame'+'ter']):this['_blendTree']=new ml(this,null,_0x40b7de,0x1a8+0x1f54+-0x20fb*0x1,_0x35c89c));}['_createTre'+'e'](_0x4dc920,_0x90646a,_0x2ecb4c,_0x57fdd5,_0x30195f,_0x2b2f11,_0x3a73d8,_0x1b6e0e,_0x56cca0,_0xf30de8){switch(_0x4dc920){case CL:return new OL(_0x90646a,_0x2ecb4c,_0x57fdd5,_0x30195f,_0x2b2f11,_0x3a73d8,_0x1b6e0e,_0x56cca0,_0xf30de8);case ML:return new wu(_0x90646a,_0x2ecb4c,_0x57fdd5,_0x30195f,_0x2b2f11,_0x3a73d8,_0x1b6e0e,_0x56cca0,_0xf30de8);case PL:return new Eu(_0x90646a,_0x2ecb4c,_0x57fdd5,_0x30195f,_0x2b2f11,_0x3a73d8,_0x1b6e0e,_0x56cca0,_0xf30de8);case DL:return new FL(_0x90646a,_0x2ecb4c,_0x57fdd5,_0x30195f,_0x2b2f11,_0x3a73d8,_0x1b6e0e,_0x56cca0,_0xf30de8);}w['error']('Invalid\x20an'+'im\x20blend\x20t'+'ype:\x20'+_0x4dc920);}['_getNodeFr'+'omPath'](_0x511856){let _0x3f164b=this['_blendTree'];for(let _0x2bd9a6=-0x35b*0xb+0x2*0x4d+0x38*0xa6;_0x2bd9a6<_0x511856['length'];_0x2bd9a6++)_0x3f164b=_0x3f164b['getChild'](_0x511856[_0x2bd9a6]);return _0x3f164b;}['addAnimati'+'on'](_0x3bc843,_0x4285a7){const _0x451231=_0x3bc843['join']('.'),_0x2aa984=this['_animation'+'List']['findIndex'](_0x1362d4=>_0x1362d4['path']===_0x451231);if(_0x2aa984>=0x3*0x576+-0x1*0x9a3+-0x6bf)this['_animation'+'List'][_0x2aa984]['animTrack']=_0x4285a7;else{const _0x20e839=this['_getNodeFr'+'omPath'](_0x3bc843);_0x20e839['animTrack']=_0x4285a7,this['_animation'+'List']['push'](_0x20e839);}this['_updateHas'+'Animations']();}['_updateHas'+'Animations'](){this['_hasAnimat'+'ions']=this['_animation'+'List']['length']>0x1ab8+0x1*0x9ef+-0x1*0x24a7&&this['_animation'+'List']['every'](_0x5711d9=>_0x5711d9['animTrack']&&_0x5711d9['animTrack']!==Qi['EMPTY']);}get['name'](){return this['_name'];}set['animations'](_0x22fcef){this['_animation'+'List']=_0x22fcef,this['_updateHas'+'Animations']();}get['animations'](){return this['_animation'+'List'];}get['hasAnimati'+'ons'](){return this['_hasAnimat'+'ions'];}set['speed'](_0x3d1d77){this['_speed']=_0x3d1d77;}get['speed'](){return this['_speed'];}set['loop'](_0x4d5b0f){this['_loop']=_0x4d5b0f;}get['loop'](){return this['_loop'];}get['nodeCount'](){return!this['_blendTree']||this['_blendTree']['constructo'+'r']===ml?0x7*0x296+0xfc7+-0x21e0:this['_blendTree']['getNodeCou'+'nt']();}get['playable'](){return Ih['indexOf'](this['name'])!==-(0x1*-0xbd8+0x73c+0x49d)||this['animations']['length']===this['nodeCount'];}get['looping'](){if(this['animations']['length']>0x121a+-0x846*-0x3+-0x1576*0x2){const _0x3c91d0=this['name']+'.'+this['animations'][0x834+0x414+-0xc48]['animTrack']['name'],_0x135a3c=this['_controlle'+'r']['animEvalua'+'tor']['findClip'](_0x3c91d0);if(_0x135a3c)return _0x135a3c['loop'];}return!(-0x1*0x1397+-0x7*0xb5+-0x1*-0x188b);}get['totalWeigh'+'t'](){let _0xd738c2=-0x1*0x1247+0x1ec1+-0xc7a;for(let _0xf901a=-0xe28+0x1edc+-0x10b4;_0xf901a<this['animations']['length'];_0xf901a++)_0xd738c2+=this['animations'][_0xf901a]['weight'];return _0xd738c2;}get['timelineDu'+'ration'](){let _0x55a6b7=-0x2117+0x1*-0x697+0x27ae;for(let _0x4b4d77=0x24d9+-0xa22*-0x2+-0x391d;_0x4b4d77<this['animations']['length'];_0x4b4d77++){const _0x298cf7=this['animations'][_0x4b4d77];_0x298cf7['animTrack']['duration']>_0x55a6b7&&(_0x55a6b7=_0x298cf7['animTrack']['duration']);}return _0x55a6b7;}}class Lh{constructor({from:_0x42e6f1,to:_0x4262ca,time:_0x3af300=-0x16e0+-0x1538+0x2c18,priority:_0x5dcf6c=-0x1f1d+0x9fe+0x151f*0x1,conditions:_0x513aaa=[],exitTime:_0xacef51=null,transitionOffset:_0x4190f5=null,interruptionSource:_0x4fb344=zv}){this['_from']=_0x42e6f1,this['_to']=_0x4262ca,this['_time']=_0x3af300,this['_priority']=_0x5dcf6c,this['_condition'+'s']=_0x513aaa,this['_exitTime']=_0xacef51,this['_transitio'+'nOffset']=_0x4190f5,this['_interrupt'+'ionSource']=_0x4fb344;}get['from'](){return this['_from'];}set['to'](_0x30521d){this['_to']=_0x30521d;}get['to'](){return this['_to'];}get['time'](){return this['_time'];}get['priority'](){return this['_priority'];}get['conditions'](){return this['_condition'+'s'];}get['exitTime'](){return this['_exitTime'];}get['transition'+'Offset'](){return this['_transitio'+'nOffset'];}get['interrupti'+'onSource'](){return this['_interrupt'+'ionSource'];}get['hasExitTim'+'e'](){return!!this['exitTime'];}}class NL{constructor(_0x168ba9,_0x564b3a,_0x2edd8b,_0x442ec3,_0x5e2a0c,_0x5bd4be,_0x2b5970){h(this,'_states',{}),h(this,'_stateName'+'s',[]),h(this,'_findTrans'+'itionsFrom'+'StateCache',{}),h(this,'_findTrans'+'itionsBetw'+'eenStatesC'+'ache',{}),h(this,'_previousS'+'tateName',null),h(this,'_activeSta'+'teName',Co),h(this,'_activeSta'+'teDuration',-0x25*0x64+-0x2b+0xe9f),h(this,'_activeSta'+'teDuration'+'Dirty',!(0xed6+0x368*0x3+-0x190e)),h(this,'_playing',!(0x1e7c*0x1+-0x109f+-0xddc)),h(this,'_activate'),h(this,'_transitio'+'ns'),h(this,'_currTrans'+'itionTime',-0x124*-0x4+-0x268a+-0x21fb*-0x1),h(this,'_totalTran'+'sitionTime',-0xb3c+0x4e*0x40+-0x3*0x2c1),h(this,'_isTransit'+'ioning',!(-0x26f4+-0x25f7*-0x1+0x2*0x7f)),h(this,'_transitio'+'nInterrupt'+'ionSource',zv),h(this,'_transitio'+'nPreviousS'+'tates',[]),h(this,'_timeInSta'+'te',0x1264+-0x17*0x82+-0x6b6),h(this,'_timeInSta'+'teBefore',-0x149*0x7+0x1f61+0x2*-0xb31),h(this,'findParame'+'ter',_0x40880d=>this['_findParam'+'eter'](_0x40880d)),(this['_animEvalu'+'ator']=_0x168ba9,this['_eventHand'+'ler']=_0x5e2a0c,this['_findParam'+'eter']=_0x5bd4be,this['_consumeTr'+'igger']=_0x2b5970);for(let _0x1e5082=0x1648+-0x2cd+-0x137b;_0x1e5082<_0x564b3a['length'];_0x1e5082++)this['_states'][_0x564b3a[_0x1e5082]['name']]=new Fg(this,_0x564b3a[_0x1e5082]['name'],_0x564b3a[_0x1e5082]['speed'],_0x564b3a[_0x1e5082]['loop'],_0x564b3a[_0x1e5082]['blendTree']),this['_stateName'+'s']['push'](_0x564b3a[_0x1e5082]['name']);this['_transitio'+'ns']=_0x2edd8b['map'](_0x1fdabe=>new Lh({..._0x1fdabe})),this['_activate']=_0x442ec3;}get['animEvalua'+'tor'](){return this['_animEvalu'+'ator'];}set['activeStat'+'e'](_0x4a5d1b){this['_activeSta'+'teName']=_0x4a5d1b;}get['activeStat'+'e'](){return this['_findState'](this['_activeSta'+'teName']);}get['activeStat'+'eName'](){return this['_activeSta'+'teName'];}get['activeStat'+'eAnimation'+'s'](){return this['activeStat'+'e']['animations'];}set['previousSt'+'ate'](_0xcab5db){this['_previousS'+'tateName']=_0xcab5db;}get['previousSt'+'ate'](){return this['_findState'](this['_previousS'+'tateName']);}get['previousSt'+'ateName'](){return this['_previousS'+'tateName'];}get['playable'](){let _0x1d4f1b=!(-0x10de+0x1be*0x1+0xf20);for(let _0x4a9d2d=-0x6fd*0x5+-0x1645+-0x1*-0x3936;_0x4a9d2d<this['_stateName'+'s']['length'];_0x4a9d2d++)this['_states'][this['_stateName'+'s'][_0x4a9d2d]]['playable']||(_0x1d4f1b=!(0x115*-0x9+-0x811+-0x2f*-0x61));return _0x1d4f1b;}set['playing'](_0x1ddd28){this['_playing']=_0x1ddd28;}get['playing'](){return this['_playing'];}get['activeStat'+'eProgress'](){return this['_getActive'+'StateProgr'+'essForTime'](this['_timeInSta'+'te']);}get['activeStat'+'eDuration'](){if(this['_activeSta'+'teDuration'+'Dirty']){let _0x3a9a45=0x552+0x2007+-0x2559;for(let _0x9190e5=-0x1ac0+-0x6b3+0x2173;_0x9190e5<this['activeStat'+'eAnimation'+'s']['length'];_0x9190e5++){const _0x5a6920=this['_animEvalu'+'ator']['findClip'](this['activeStat'+'eAnimation'+'s'][_0x9190e5]['name']);_0x5a6920&&(_0x3a9a45=Math['max'](_0x3a9a45,_0x5a6920['track']['duration']));}this['_activeSta'+'teDuration']=_0x3a9a45,this['_activeSta'+'teDuration'+'Dirty']=!(-0x17*-0x4+-0x197b+0x43*0x60);}return this['_activeSta'+'teDuration'];}set['activeStat'+'eCurrentTi'+'me'](_0x3db9e0){this['_timeInSta'+'teBefore']=_0x3db9e0,this['_timeInSta'+'te']=_0x3db9e0;for(let _0x261723=0x14ce+-0x1298+-0x236;_0x261723<this['activeStat'+'eAnimation'+'s']['length'];_0x261723++){const _0x3428a4=this['animEvalua'+'tor']['findClip'](this['activeStat'+'eAnimation'+'s'][_0x261723]['name']);_0x3428a4&&(_0x3428a4['time']=_0x3db9e0);}}get['activeStat'+'eCurrentTi'+'me'](){return this['_timeInSta'+'te'];}get['transition'+'ing'](){return this['_isTransit'+'ioning'];}get['transition'+'Progress'](){return this['_currTrans'+'itionTime']/this['_totalTran'+'sitionTime'];}get['states'](){return this['_stateName'+'s'];}['assignMask'](_0x557887){return this['_animEvalu'+'ator']['assignMask'](_0x557887);}['_findState'](_0x301f1c){return this['_states'][_0x301f1c];}['_getActive'+'StateProgr'+'essForTime'](_0x2c160a){if(this['activeStat'+'eName']===Co||this['activeStat'+'eName']===vu||this['activeStat'+'eName']===qr)return 0x17*-0x83+0x408*-0x9+0x300e;const _0x4b803a=this['_animEvalu'+'ator']['findClip'](this['activeStat'+'eAnimation'+'s'][0x1f83+0xa70+0x29f3*-0x1]['name']);return _0x4b803a?_0x4b803a['progressFo'+'rTime'](_0x2c160a):null;}['_findTrans'+'itionsFrom'+'State'](_0x3adeea){let _0x2d5a67=this['_findTrans'+'itionsFrom'+'StateCache'][_0x3adeea];return _0x2d5a67||(_0x2d5a67=this['_transitio'+'ns']['filter'](_0x4b06d8=>_0x4b06d8['from']===_0x3adeea),ul(_0x2d5a67),this['_findTrans'+'itionsFrom'+'StateCache'][_0x3adeea]=_0x2d5a67),_0x2d5a67;}['_findTrans'+'itionsBetw'+'eenStates'](_0x27027a,_0x50242a){let _0x379226=this['_findTrans'+'itionsBetw'+'eenStatesC'+'ache'][_0x27027a+'->'+_0x50242a];return _0x379226||(_0x379226=this['_transitio'+'ns']['filter'](_0x42fd54=>_0x42fd54['from']===_0x27027a&&_0x42fd54['to']===_0x50242a),ul(_0x379226),this['_findTrans'+'itionsBetw'+'eenStatesC'+'ache'][_0x27027a+'->'+_0x50242a]=_0x379226),_0x379226;}['_transitio'+'nHasCondit'+'ionsMet'](_0x43647d){const _0x679210=_0x43647d['conditions'];for(let _0x195311=0xec3+-0x7cd*-0x2+0x3*-0xa1f;_0x195311<_0x679210['length'];_0x195311++){const _0x281f0f=_0x679210[_0x195311],_0x1cb99f=this['_findParam'+'eter'](_0x281f0f['parameterN'+'ame']);switch(_0x281f0f['predicate']){case xL:if(!(_0x1cb99f['value']>_0x281f0f['value']))return!(0x9c2+-0x1ec1+0x2a0*0x8);break;case TL:if(!(_0x1cb99f['value']<_0x281f0f['value']))return!(-0x55*0x35+0x11b7+-0x1d);break;case wL:if(!(_0x1cb99f['value']>=_0x281f0f['value']))return!(-0x1bfb+0x2*0x351+-0x6*-0x38f);break;case EL:if(!(_0x1cb99f['value']<=_0x281f0f['value']))return!(-0x125e+-0x103*0xb+0x1d80);break;case bL:if(_0x1cb99f['value']!==_0x281f0f['value'])return!(0x13*-0x83+-0xec6+0x1880*0x1);break;case AL:if(_0x1cb99f['value']===_0x281f0f['value'])return!(-0x2*0xe4b+-0x1faf+-0xc0e*-0x5);break;}}return!(-0x11*-0x65+-0x267*-0x1+-0x91c);}['_findTrans'+'ition'](_0x5370dd,_0x41ed01){let _0x426b41=[];if(_0x5370dd&&_0x41ed01)_0x426b41=_0x426b41['concat'](this['_findTrans'+'itionsBetw'+'eenStates'](_0x5370dd,_0x41ed01));else{if(!this['_isTransit'+'ioning'])_0x426b41=_0x426b41['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_activeSta'+'teName'])),_0x426b41=_0x426b41['concat'](this['_findTrans'+'itionsFrom'+'State'](qr));else switch(this['_transitio'+'nInterrupt'+'ionSource']){case gL:_0x426b41=_0x426b41['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_previousS'+'tateName'])),_0x426b41=_0x426b41['concat'](this['_findTrans'+'itionsFrom'+'State'](qr));break;case SL:_0x426b41=_0x426b41['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_activeSta'+'teName'])),_0x426b41=_0x426b41['concat'](this['_findTrans'+'itionsFrom'+'State'](qr));break;case yL:_0x426b41=_0x426b41['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_previousS'+'tateName'])),_0x426b41=_0x426b41['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_activeSta'+'teName'])),_0x426b41=_0x426b41['concat'](this['_findTrans'+'itionsFrom'+'State'](qr));break;case vL:_0x426b41=_0x426b41['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_activeSta'+'teName'])),_0x426b41=_0x426b41['concat'](this['_findTrans'+'itionsFrom'+'State'](this['_previousS'+'tateName'])),_0x426b41=_0x426b41['concat'](this['_findTrans'+'itionsFrom'+'State'](qr));break;}}if(_0x426b41=_0x426b41['filter'](_0x5cb444=>{if(_0x5cb444['to']===this['activeStat'+'eName'])return!(-0x28b*0x2+-0x1175+-0x9c*-0x25);if(_0x5cb444['hasExitTim'+'e']){let _0x322514=this['_getActive'+'StateProgr'+'essForTime'](this['_timeInSta'+'teBefore']),_0x1cb121=this['_getActive'+'StateProgr'+'essForTime'](this['_timeInSta'+'te']);if(_0x5cb444['exitTime']<0x3*0x85d+-0x12bc+-0x2*0x32d&&this['activeStat'+'e']['loop']&&(_0x322514-=Math['floor'](_0x322514),_0x1cb121-=Math['floor'](_0x1cb121)),_0x1cb121===_0x322514){if(_0x1cb121!==_0x5cb444['exitTime'])return null;}else{if(!(_0x5cb444['exitTime']>_0x322514&&_0x5cb444['exitTime']<=_0x1cb121))return null;}}return this['_transitio'+'nHasCondit'+'ionsMet'](_0x5cb444);}),_0x426b41['length']>0xdc8+-0xb15+-0x2b3){const _0x488e38=_0x426b41[-0x8fb+0x4a7*0x7+-0x1796];if(_0x488e38['to']===vu){const _0x5b5527=this['_findTrans'+'itionsFrom'+'State'](Co)[0x22*0x10d+-0x1b6a+-0x850];_0x488e38['to']=_0x5b5527['to'];}return _0x488e38;}return null;}['updateStat'+'eFromTrans'+'ition'](_0x7c180a){let _0x27ae6a,_0x567fca,_0x26bf59;this['previousSt'+'ate']=_0x7c180a['from']?this['activeStat'+'eName']:null,this['activeStat'+'e']=_0x7c180a['to'],this['_activeSta'+'teDuration'+'Dirty']=!(0x4e9*0x1+0x1b8*0xb+-0x17d1);for(let _0x393e12=0x49*-0x73+0x26*-0x76+0x1*0x324f;_0x393e12<_0x7c180a['conditions']['length'];_0x393e12++){const _0x587445=_0x7c180a['conditions'][_0x393e12];this['_findParam'+'eter'](_0x587445['parameterN'+'ame'])['type']===Qc&&this['_consumeTr'+'igger'](_0x587445['parameterN'+'ame']);}if(this['previousSt'+'ate']){this['_isTransit'+'ioning']||(this['_transitio'+'nPreviousS'+'tates']=[]),this['_transitio'+'nPreviousS'+'tates']['push']({'name':this['_previousS'+'tateName'],'weight':0x1});const _0x209ecd=Math['min'](this['_totalTran'+'sitionTime']!==0x6b6+-0x23bd+0x1d07?this['_currTrans'+'itionTime']/this['_totalTran'+'sitionTime']:0x7cf*0x2+0x267a*0x1+-0x3617,0x1e28+-0x25ce+0x1*0x7a7);for(let _0x390e29=0x1745+-0x26fb+0xfb6;_0x390e29<this['_transitio'+'nPreviousS'+'tates']['length'];_0x390e29++){this['_isTransit'+'ioning']?_0x390e29!==this['_transitio'+'nPreviousS'+'tates']['length']-(0xed*0x7+0x54d*-0x2+-0xc*-0x58)?this['_transitio'+'nPreviousS'+'tates'][_0x390e29]['weight']*=0x7f4*-0x1+0xbd8+-0x3e3-_0x209ecd:this['_transitio'+'nPreviousS'+'tates'][_0x390e29]['weight']=_0x209ecd:this['_transitio'+'nPreviousS'+'tates'][_0x390e29]['weight']=0x209b+0x357+-0x23f1,_0x27ae6a=this['_findState'](this['_transitio'+'nPreviousS'+'tates'][_0x390e29]['name']);for(let _0x42a069=-0x1a*-0x14f+0x713+-0x2919;_0x42a069<_0x27ae6a['animations']['length'];_0x42a069++)_0x567fca=_0x27ae6a['animations'][_0x42a069],_0x26bf59=this['_animEvalu'+'ator']['findClip'](_0x567fca['name']+'.previous.'+_0x390e29),_0x26bf59||(_0x26bf59=this['_animEvalu'+'ator']['findClip'](_0x567fca['name']),_0x26bf59['name']=_0x567fca['name']+'.previous.'+_0x390e29),_0x390e29!==this['_transitio'+'nPreviousS'+'tates']['length']-(-0x5*-0x641+0x59c+-0x24e0)&&_0x26bf59['pause']();}}this['_isTransit'+'ioning']=!(0x258+-0x1*-0x1d21+-0x1f79),this['_totalTran'+'sitionTime']=_0x7c180a['time'],this['_currTrans'+'itionTime']=-0xff5+-0x16bb+0x26b0,this['_transitio'+'nInterrupt'+'ionSource']=_0x7c180a['interrupti'+'onSource'];const _0x4141f0=this['activeStat'+'e'],_0x19b630=_0x7c180a['transition'+'Offset']&&_0x7c180a['transition'+'Offset']>-0x57d*0x1+-0x11b6+0x1733&&_0x7c180a['transition'+'Offset']<0x72a+0x2278*-0x1+-0x1*-0x1b4f;let _0x2b1aba=-0x89*0x3c+-0x1f1+0x220d,_0x2890f0=-0x1d2*0x1+-0x1d9d+0x1f6f;if(_0x19b630){const _0x2235b3=_0x4141f0['timelineDu'+'ration']*_0x7c180a['transition'+'Offset'];_0x2b1aba=_0x2235b3,_0x2890f0=_0x2235b3;}this['_timeInSta'+'te']=_0x2b1aba,this['_timeInSta'+'teBefore']=_0x2890f0;for(let _0x3da8ed=-0x1*0x1a7d+0x3a7*-0x7+0x340e;_0x3da8ed<_0x4141f0['animations']['length'];_0x3da8ed++){if(_0x26bf59=this['_animEvalu'+'ator']['findClip'](_0x4141f0['animations'][_0x3da8ed]['name']),_0x26bf59)_0x26bf59['reset']();else{const _0x4f0efc=Number['isFinite'](_0x4141f0['animations'][_0x3da8ed]['speed'])?_0x4141f0['animations'][_0x3da8ed]['speed']:_0x4141f0['speed'];_0x26bf59=new Dh(_0x4141f0['animations'][_0x3da8ed]['animTrack'],this['_timeInSta'+'te'],_0x4f0efc,!(-0x1445*0x1+-0xb*0x8e+-0x9d*-0x2b),_0x4141f0['loop'],this['_eventHand'+'ler']),_0x26bf59['name']=_0x4141f0['animations'][_0x3da8ed]['name'],this['_animEvalu'+'ator']['addClip'](_0x26bf59);}if(_0x7c180a['time']>0x537+-0x12eb+-0x4*-0x36d?_0x26bf59['blendWeigh'+'t']=0x1*-0x499+-0xe42*-0x1+-0x9a9:_0x26bf59['blendWeigh'+'t']=_0x4141f0['animations'][_0x3da8ed]['normalized'+'Weight'],_0x26bf59['play'](),_0x19b630)_0x26bf59['time']=_0x4141f0['timelineDu'+'ration']*_0x7c180a['transition'+'Offset'];else{const _0x509c8e=_0x4141f0['speed']>=0x73*0xa+-0x1*-0x9a4+0x4b6*-0x3?0xccf*-0x1+0x129a+0x1*-0x5cb:this['activeStat'+'eDuration'];_0x26bf59['time']=_0x509c8e;}}}['_transitio'+'nToState'](_0x2db88f){if(!this['_findState'](_0x2db88f))return;let _0x250f61=this['_findTrans'+'ition'](this['_activeSta'+'teName'],_0x2db88f);_0x250f61||(this['_animEvalu'+'ator']['removeClip'+'s'](),_0x250f61=new Lh({'from':null,'to':_0x2db88f})),this['updateStat'+'eFromTrans'+'ition'](_0x250f61);}['assignAnim'+'ation'](_0x3ca9d3,_0x164e61,_0x49d04d,_0x3baa3d){const _0x867dbc=_0x3ca9d3['split']('.');let _0x453545=this['_findState'](_0x867dbc[-0x1423+0x445*-0x2+0x1cad]);_0x453545||(_0x453545=new Fg(this,_0x867dbc[0xe*-0x1a7+-0x1f5e+0x2*0x1b40],_0x49d04d),this['_states'][_0x867dbc[-0x7f*0x1b+-0x12f*-0x1+-0x6*-0x209]]=_0x453545,this['_stateName'+'s']['push'](_0x867dbc[-0x7*0xb6+-0x1*-0xa4d+0x1d*-0x2f])),_0x453545['addAnimati'+'on'](_0x867dbc,_0x164e61),this['_animEvalu'+'ator']['updateClip'+'Track'](_0x453545['name'],_0x164e61),_0x49d04d!==void(-0x2*-0x71e+-0x481*0x1+-0x9bb)&&(_0x453545['speed']=_0x49d04d),_0x3baa3d!==void(0x5*0x1f3+-0x7e7+-0x1d8)&&(_0x453545['loop']=_0x3baa3d),!this['_playing']&&this['_activate']&&this['playable']&&this['play'](),this['_activeSta'+'teDuration'+'Dirty']=!(-0x1172+-0xc3e+0x1db0);}['removeNode'+'Animations'](_0x116de5){if(Ih['indexOf'](_0x116de5)!==-(0x6*-0x21f+-0x2162+0x1*0x2e1d))return!(-0x55d*0x1+-0x15*0x7b+0x527*0x3);const _0x456492=this['_findState'](_0x116de5);return _0x456492?(_0x456492['animations']=[],!(0x10e1*-0x2+0xcc8+0x14fa)):(w['error']('Attempting'+'\x20to\x20unassi'+'gn\x20animati'+'on\x20tracks\x20'+'from\x20a\x20sta'+'te\x20that\x20do'+'es\x20not\x20exi'+'st.',_0x116de5),!(0x1*-0x1582+-0x11*0x15+0x16e8));}['play'](_0x251dbe){_0x251dbe&&this['_transitio'+'nToState'](_0x251dbe),this['_playing']=!(-0x1e3+0x1359+-0x95*0x1e);}['pause'](){this['_playing']=!(-0x97c*-0x1+-0x1c09*-0x1+-0x2584*0x1);}['reset'](){this['_previousS'+'tateName']=null,this['_activeSta'+'teName']=Co,this['_playing']=!(0x1f92+-0x1f3e+-0x53*0x1),this['_currTrans'+'itionTime']=0x1*0x15a5+0xa4*-0x1c+0x4*-0xed,this['_totalTran'+'sitionTime']=0x394+-0x40e*0x2+-0x489*-0x1,this['_isTransit'+'ioning']=!(-0x1915*-0x1+-0x1079+-0x89b),this['_timeInSta'+'te']=-0x2429*0x1+0x5*0x1e3+0x1aba,this['_timeInSta'+'teBefore']=-0x245*0x11+0x250a*0x1+0x18b*0x1,this['_animEvalu'+'ator']['removeClip'+'s']();}['rebind'](){this['_animEvalu'+'ator']['rebind']();}['update'](_0x3496bf){if(!this['_playing'])return;let _0x2737a1,_0x12c186,_0x36c670;(this['activeStat'+'e']['loop']||this['_timeInSta'+'te']<this['activeStat'+'eDuration'])&&(this['_timeInSta'+'teBefore']=this['_timeInSta'+'te'],this['_timeInSta'+'te']+=_0x3496bf*this['activeStat'+'e']['speed'],!this['activeStat'+'e']['loop']&&this['_timeInSta'+'te']>this['activeStat'+'eDuration']&&(this['_timeInSta'+'te']=this['activeStat'+'eDuration'],_0x3496bf=this['activeStat'+'eDuration']-this['_timeInSta'+'teBefore']));const _0x28d3e5=this['_findTrans'+'ition'](this['_activeSta'+'teName']);if(_0x28d3e5&&this['updateStat'+'eFromTrans'+'ition'](_0x28d3e5),this['_isTransit'+'ioning']){if(this['_currTrans'+'itionTime']+=_0x3496bf,this['_currTrans'+'itionTime']<=this['_totalTran'+'sitionTime']){const _0x2babd3=this['_totalTran'+'sitionTime']!==-0x1370+-0x2*-0xa5d+-0x14a?this['_currTrans'+'itionTime']/this['_totalTran'+'sitionTime']:-0xa*0x35d+-0x2*-0x10cf+0x5;for(let _0x38e16e=-0x1296+-0x17e*0xb+0x2300;_0x38e16e<this['_transitio'+'nPreviousS'+'tates']['length'];_0x38e16e++){_0x2737a1=this['_findState'](this['_transitio'+'nPreviousS'+'tates'][_0x38e16e]['name']);const _0x4bbfae=this['_transitio'+'nPreviousS'+'tates'][_0x38e16e]['weight'];for(let _0x851deb=0x2335*0x1+-0x44a+0x5*-0x62f;_0x851deb<_0x2737a1['animations']['length'];_0x851deb++)_0x12c186=_0x2737a1['animations'][_0x851deb],_0x36c670=this['_animEvalu'+'ator']['findClip'](_0x12c186['name']+'.previous.'+_0x38e16e),_0x36c670&&(_0x36c670['blendWeigh'+'t']=(0x1f93+0x1a5c+-0xb96*0x5-_0x2babd3)*_0x12c186['normalized'+'Weight']*_0x4bbfae);}_0x2737a1=this['activeStat'+'e'];for(let _0x40b2cd=0x2fa*-0xa+-0x198c*0x1+0x3750;_0x40b2cd<_0x2737a1['animations']['length'];_0x40b2cd++)_0x12c186=_0x2737a1['animations'][_0x40b2cd],this['_animEvalu'+'ator']['findClip'](_0x12c186['name'])['blendWeigh'+'t']=_0x2babd3*_0x12c186['normalized'+'Weight'];}else{this['_isTransit'+'ioning']=!(0x1*0x533+-0x377*-0x1+0x3*-0x2e3);const _0x3428b1=this['activeStat'+'eAnimation'+'s']['length'],_0x16d316=this['_animEvalu'+'ator']['clips']['length'];for(let _0x382541=-0x8cf+-0xd3d+0xb06*0x2;_0x382541<_0x16d316-_0x3428b1;_0x382541++)this['_animEvalu'+'ator']['removeClip'](-0x14fb+-0x1*0x7b1+0x1cac*0x1);this['_transitio'+'nPreviousS'+'tates']=[],_0x2737a1=this['activeStat'+'e'];for(let _0x5b13a8=-0x912+0x1*-0x21a3+0x2ab5;_0x5b13a8<_0x2737a1['animations']['length'];_0x5b13a8++)_0x12c186=_0x2737a1['animations'][_0x5b13a8],_0x36c670=this['_animEvalu'+'ator']['findClip'](_0x12c186['name']),_0x36c670&&(_0x36c670['blendWeigh'+'t']=_0x12c186['normalized'+'Weight']);}}else{if(this['activeStat'+'e']['_blendTree']['constructo'+'r']!==ml){_0x2737a1=this['activeStat'+'e'];for(let _0x1cccfb=-0x237c+-0x1c8c+-0x2*-0x2004;_0x1cccfb<_0x2737a1['animations']['length'];_0x1cccfb++)_0x12c186=_0x2737a1['animations'][_0x1cccfb],_0x36c670=this['_animEvalu'+'ator']['findClip'](_0x12c186['name']),_0x36c670&&(_0x36c670['blendWeigh'+'t']=_0x12c186['normalized'+'Weight'],_0x12c186['parent']['syncAnimat'+'ions']&&(_0x36c670['speed']=_0x12c186['speed']));}}this['_animEvalu'+'ator']['update'](_0x3496bf,this['activeStat'+'e']['hasAnimati'+'ons']);}}const wf=new J(),Tc=new D(),_o=new re(),go=new ie(),So=new le();class Fi extends Sr{constructor(_0x341546,_0x1fe449,_0xfe6ae3,_0x1ba4a5,_0x494bb8){super(_0x1fe449),this['animCompon'+'ent']=_0x341546,this['_mask']=_0x1ba4a5,this['layerName']=_0xfe6ae3,this['layerIndex']=_0x494bb8;}static['_packFloat'](_0x2f6376){return _0x2f6376[-0x86f*-0x2+0x15e0+-0x26be];}static['_packBoole'+'an'](_0x3aeaee){return!!_0x3aeaee[0x1c44+0x1013+-0x1*0x2c57];}static['_packVec2'](_0x19ce55){return wf['x']=_0x19ce55[-0x1729+0x14e*0xb+-0x5*-0x1c3],wf['y']=_0x19ce55[0x7a*-0x44+-0x50b*-0x2+-0x1*-0x1653],wf;}static['_packVec3'](_0x291d3c){return Tc['x']=_0x291d3c[0x21fb*-0x1+0x1486+0xd75],Tc['y']=_0x291d3c[0x1e9a+0x2161+-0x35e*0x13],Tc['z']=_0x291d3c[0x117f*0x1+-0x1d2*-0x3+-0x16f3],Tc;}static['_packVec4'](_0x2ba206){return _o['x']=_0x2ba206[0x1f*0xe5+0xa67+-0x2622],_o['y']=_0x2ba206[-0x4*0x430+-0xe92+-0xf3*-0x21],_o['z']=_0x2ba206[-0x2*0xc7b+-0x1d12+-0x1*-0x360a],_o['w']=_0x2ba206[-0x21df+0x1bc5*-0x1+0x3da7],_o;}static['_packColor'](_0x1241dc){return go['r']=_0x1241dc[-0x4*0x5af+0x1765+-0xa9],go['g']=_0x1241dc[0x2d2*-0xd+-0x8c1+0x3c9*0xc],go['b']=_0x1241dc[0x1*-0xbcc+0x189*0x5+0x421],go['a']=_0x1241dc[0xeca+0x1*-0x1343+0x47c],go;}static['_packQuat'](_0x3cef6b){return So['x']=_0x3cef6b[0x1d92+-0x4*0x794+0xbe],So['y']=_0x3cef6b[-0x1*-0x1888+-0x20f5*0x1+-0x437*-0x2],So['z']=_0x3cef6b[0x21a7+0x14ce+-0x3673],So['w']=_0x3cef6b[0x641*-0x3+-0x2*-0x11ea+-0x110e],So;}['resolve'](_0x4efa62){const _0x3929f1=ra['encode'](_0x4efa62['entityPath'],_0x4efa62['component'],_0x4efa62['propertyPa'+'th']);let _0xb9096b=this['targetCach'+'e'][_0x3929f1];if(_0xb9096b)return _0xb9096b;let _0x1266d4,_0xee07bf,_0xe637b1;switch(_0x4efa62['component']){case'entity':_0x1266d4=this['_getEntity'+'FromHierar'+'chy'](_0x4efa62['entityPath']),_0xe637b1=ra['encode'](_0x1266d4['path'],'entity',_0x4efa62['propertyPa'+'th']),_0xee07bf=_0x1266d4;break;case'graph':if(_0xee07bf=this['findNode'](_0x4efa62),!_0xee07bf)return null;_0xe637b1=ra['encode'](_0xee07bf['path'],'graph',_0x4efa62['propertyPa'+'th']);break;default:if(_0x1266d4=this['_getEntity'+'FromHierar'+'chy'](_0x4efa62['entityPath']),_0xee07bf=_0x1266d4['findCompon'+'ent'](_0x4efa62['component']),!_0xee07bf)return null;_0xe637b1=ra['encode'](_0x1266d4['path'],_0x4efa62['component'],_0x4efa62['propertyPa'+'th']);break;}return _0xb9096b=this['_createAni'+'mTargetFor'+'Property'](_0xee07bf,_0x4efa62['propertyPa'+'th'],_0xe637b1),this['targetCach'+'e'][_0x3929f1]=_0xb9096b,_0xb9096b;}['update'](_0x56ae3e){const _0x10b99a=this['activeNode'+'s'];if(_0x10b99a){for(let _0x8174d=0x87c+0x1e62+-0x26de;_0x8174d<_0x10b99a['length'];_0x8174d++)_0x10b99a[_0x8174d]['_dirtifyLo'+'cal']();}}['_getEntity'+'FromHierar'+'chy'](_0x456849){if(!this['animCompon'+'ent']['entity']['name']===_0x456849[-0xc6f+0xf9b+-0x32c])return null;const _0x27c8db=this['animCompon'+'ent']['entity'];return _0x456849['length']===0x1ae+0x21b4+-0x2361?_0x27c8db:_0x27c8db['_parent']['findByPath'](_0x456849);}['_resolvePa'+'th'](_0x42cfe6,_0x451168,_0x1b8e51){const _0x37e29b=_0x451168['length']-(_0x1b8e51?0x2b1*-0xd+0x7c6+0x1b37:0xaac*-0x1+-0x36d+0xe1a);for(let _0x131b71=-0x5e7*-0x1+0x9ec+0x1*-0xfd3;_0x131b71<_0x37e29b;_0x131b71++)_0x42cfe6=_0x42cfe6[_0x451168[_0x131b71]];return _0x42cfe6;}['_setter'](_0x4486ce,_0x5d5098,_0x28487a){const _0xaccd4e=this['_resolvePa'+'th'](_0x4486ce,_0x5d5098),_0xdef4b6=_0x5d5098[_0x5d5098['length']-(-0x2*0x191+0x6d3+0x1*-0x3b0)],_0x3c0ab0='set'+_0xdef4b6['substring'](-0x1c4e+0x2512+-0x33*0x2c,0x13ae+-0x1*-0xc2e+-0x1fdb)['toUpperCas'+'e']()+_0xdef4b6['substring'](-0x148e+0x1*-0x18a+0x1619*0x1);if(_0xaccd4e[_0x3c0ab0]){let _0x595bc3=_0xaccd4e['get'+_0xdef4b6['substring'](0xc*-0x2f9+0x8dc+0x1ad0,-0x81*-0xd+0x356+-0xb*0xe6)['toUpperCas'+'e']()+_0xdef4b6['substring'](-0x27*0xf0+0x1b2a+0x967)]['bind'](_0xaccd4e)();_0x595bc3=[_0x595bc3['x'],_0x595bc3['y'],_0x595bc3['z'],_0x595bc3['w']];const _0x6d8c57=_0xaccd4e[_0x3c0ab0]['bind'](_0xaccd4e);return{'set':_0x500848=>{_0x6d8c57(_0x28487a(_0x500848));},'get':()=>_0x595bc3};}const _0x2e9641=_0xaccd4e[_0xdef4b6];if(typeof _0x2e9641=='object'&&_0x2e9641['hasOwnProp'+'erty']('copy'))return function(_0x284af9){_0x2e9641['copy'](_0x28487a(_0x284af9));};if([J,D,re,ie,le]['indexOf'](_0xaccd4e['constructo'+'r'])!==-(0x159c+-0x1cf*-0x7+0x1*-0x2244)&&_0x5d5098['length']>-0xca*0x16+-0x1*-0x783+0x4ed*0x2){const _0x1d1c6d=_0x5d5098['length']>0x84e*0x1+0xc65+0x14b1*-0x1?this['_resolvePa'+'th'](_0x4486ce,_0x5d5098['slice'](0x1*0x556+0x1247*-0x2+-0x6*-0x534,-(0x2682*0x1+0x28*0x56+-0x33f1))):_0x4486ce,_0x50dd1e=_0x5d5098[_0x5d5098['length']-(0x20c5+-0x2ca*-0x7+-0x3449*0x1)];return function(_0x2de181){_0xaccd4e[_0xdef4b6]=_0x28487a(_0x2de181),_0x1d1c6d[_0x50dd1e]=_0xaccd4e;};}return function(_0x106ae5){_0xaccd4e[_0xdef4b6]=_0x28487a(_0x106ae5);};}['_createAni'+'mTargetFor'+'Property'](_0x2c8f21,_0x50aa6c,_0x908dba){if(this['handlers']&&_0x50aa6c[-0x10*-0x165+-0x2532+-0xa*-0x17d]['startsWith']('weight.'))return this['handlers']['weight'](_0x2c8f21,_0x50aa6c[0xf7*0x1d+-0xec*-0x7+0x29*-0xd7]['replace']('weight.',''));if(this['handlers']&&_0x50aa6c[0x1a57+-0x2*0xd8b+-0xbf*-0x1]==='material'&&_0x50aa6c['length']===-0x1509+0x239a+0xe8f*-0x1){const _0x40819e=_0x50aa6c[0x174c+-0x2122+0x9d7];if(_0x40819e['endsWith']('Map'))return this['handlers']['materialTe'+'xture'](_0x2c8f21,_0x40819e);}const _0x37147a=this['_resolvePa'+'th'](_0x2c8f21,_0x50aa6c,!(0x1dea+0x1166+0x1*-0x2f50));if(typeof _0x37147a>'u')return null;let _0x235a79,_0x515094,_0x1f31fc;if(typeof _0x37147a=='number')_0x235a79=this['_setter'](_0x2c8f21,_0x50aa6c,Fi['_packFloat']),_0x515094='vector',_0x1f31fc=0x2532+-0x9*-0x454+-0x1*0x4c25;else{if(typeof _0x37147a=='boolean')_0x235a79=this['_setter'](_0x2c8f21,_0x50aa6c,Fi['_packBoole'+'an']),_0x515094='vector',_0x1f31fc=-0x3d*-0x41+0x3e8+0x4d9*-0x4;else{if(typeof _0x37147a=='object')switch(_0x37147a['constructo'+'r']){case J:_0x235a79=this['_setter'](_0x2c8f21,_0x50aa6c,Fi['_packVec2']),_0x515094='vector',_0x1f31fc=0x1943*0x1+0x1e46+-0x5*0xb1b;break;case D:_0x235a79=this['_setter'](_0x2c8f21,_0x50aa6c,Fi['_packVec3']),_0x515094='vector',_0x1f31fc=-0x2477*-0x1+-0x1fbe+-0x4b6;break;case re:_0x235a79=this['_setter'](_0x2c8f21,_0x50aa6c,Fi['_packVec4']),_0x515094='vector',_0x1f31fc=0x1cac+-0x53*0x3e+-0x92*0xf;break;case ie:_0x235a79=this['_setter'](_0x2c8f21,_0x50aa6c,Fi['_packColor']),_0x515094='vector',_0x1f31fc=0x934+-0xdd7*-0x1+-0x1707;break;case le:_0x235a79=this['_setter'](_0x2c8f21,_0x50aa6c,Fi['_packQuat']),_0x515094='quaternion',_0x1f31fc=-0x827*-0x1+-0x1b85+-0x9b1*-0x2;break;default:return null;}}}return _0x50aa6c['indexOf']('material')!==-(0x5ff*0x5+0x4*-0x323+-0x116e)?new xu(_0xc42b03=>{_0x235a79(_0xc42b03),_0x2c8f21['material']['update']();},_0x515094,_0x1f31fc,_0x908dba):new xu(_0x235a79,_0x515094,_0x1f31fc,_0x908dba);}['rebind'](){this['targetCach'+'e']={},this['visitedFal'+'lbackGraph'+'Paths']={},this['animCompon'+'ent']['rootBone']?this['graph']=this['animCompon'+'ent']['rootBone']:this['graph']=this['animCompon'+'ent']['entity'];const _0x57482e={},_0x59fb11=function(_0x4f243d){_0x57482e[_0x4f243d['name']]=_0x4f243d;for(let _0x13bf24=0x5f7*-0x6+-0x495+0x5*0x813;_0x13bf24<_0x4f243d['children']['length'];++_0x13bf24)_0x59fb11(_0x4f243d['children'][_0x13bf24]);};_0x59fb11(this['graph']),this['nodes']=_0x57482e;}}class kL{constructor(_0x19c02f,_0x5a1c64,_0x36f2b9,_0x557c95=0x10*0x236+-0xc74*0x2+0x37d*-0x3,_0x1ddf1d=Vv){h(this,'_name'),h(this,'_controlle'+'r'),h(this,'_component'),h(this,'_weight'),h(this,'_blendType'),h(this,'_mask',null),h(this,'_blendTime',-0x180b*0x1+-0xb24+-0x232f*-0x1),h(this,'_blendTime'+'Elapsed',0x729+0xb94+0x63f*-0x3),h(this,'_startingW'+'eight',0x1b28+0xb5c+-0x1ed*0x14),h(this,'_targetWei'+'ght',0xb71+-0x92a+-0x247),(this['_name']=_0x19c02f,this['_controlle'+'r']=_0x5a1c64,this['_component']=_0x36f2b9,this['_weight']=_0x557c95,this['_blendType']=_0x1ddf1d);}get['name'](){return this['_name'];}set['playing'](_0x4b0e8c){this['_controlle'+'r']['playing']=_0x4b0e8c;}get['playing'](){return this['_controlle'+'r']['playing'];}get['playable'](){return this['_controlle'+'r']['playable'];}get['activeStat'+'e'](){return this['_controlle'+'r']['activeStat'+'eName'];}get['previousSt'+'ate'](){return this['_controlle'+'r']['previousSt'+'ateName'];}get['activeStat'+'eProgress'](){return this['_controlle'+'r']['activeStat'+'eProgress'];}get['activeStat'+'eDuration'](){return this['_controlle'+'r']['activeStat'+'eDuration'];}set['activeStat'+'eCurrentTi'+'me'](_0x3e6312){const _0x1a804a=this['_controlle'+'r'],_0x352565=_0x1a804a['playing'];_0x1a804a['playing']=!(0x1*0x18d1+0x11a7+-0x12*0x25c),_0x1a804a['activeStat'+'eCurrentTi'+'me']=_0x3e6312,_0x352565||_0x1a804a['update'](0xc3e+-0x630+-0x60e),_0x1a804a['playing']=_0x352565;}get['activeStat'+'eCurrentTi'+'me'](){return this['_controlle'+'r']['activeStat'+'eCurrentTi'+'me'];}get['transition'+'ing'](){return this['_controlle'+'r']['transition'+'ing'];}get['transition'+'Progress'](){return this['transition'+'ing']?this['_controlle'+'r']['transition'+'Progress']:null;}get['states'](){return this['_controlle'+'r']['states'];}set['weight'](_0x8b5d34){this['_weight']=_0x8b5d34,this['_component']['dirtifyTar'+'gets']();}get['weight'](){return this['_weight'];}set['blendType'](_0x5330b6){_0x5330b6!==this['_blendType']&&(this['_blendType']=_0x5330b6,this['_controlle'+'r']['normalizeW'+'eights']&&this['_component']['rebind']());}get['blendType'](){return this['_blendType'];}set['mask'](_0x18576c){this['_controlle'+'r']['assignMask'](_0x18576c)&&this['_component']['rebind'](),this['_mask']=_0x18576c;}get['mask'](){return this['_mask'];}['play'](_0x3cb84a){this['_controlle'+'r']['play'](_0x3cb84a);}['pause'](){this['_controlle'+'r']['pause']();}['reset'](){this['_controlle'+'r']['reset']();}['rebind'](){this['_controlle'+'r']['rebind']();}['update'](_0x810afe){this['_blendTime']&&(this['_blendTime'+'Elapsed']<this['_blendTime']?(this['weight']=Y['lerp'](this['_startingW'+'eight'],this['_targetWei'+'ght'],this['_blendTime'+'Elapsed']/this['_blendTime']),this['_blendTime'+'Elapsed']+=_0x810afe):(this['weight']=this['_targetWei'+'ght'],this['_blendTime']=0x1c50+0x43*-0x95+0xaaf,this['_blendTime'+'Elapsed']=-0x1e25*-0x1+-0x11a3+-0x1*0xc82,this['_startingW'+'eight']=-0x1487+-0xeea+-0x2b*-0xd3,this['_targetWei'+'ght']=-0x16ca*-0x1+-0x1c07+0x53d)),this['_controlle'+'r']['update'](_0x810afe);}['blendToWei'+'ght'](_0x4faa16,_0x376cc2){this['_startingW'+'eight']=this['weight'],this['_targetWei'+'ght']=_0x4faa16,this['_blendTime']=Math['max'](-0x1*-0xe59+0x7c+-0xed5,_0x376cc2),this['_blendTime'+'Elapsed']=0x258a+-0x2295*-0x1+-0x481f;}['assignAnim'+'ation'](_0x2ae532,_0x57d3d0,_0x494514,_0x2004a3){if(!(_0x57d3d0 instanceof Qi)){w['error']('assignAnim'+'ation:\x20ani'+'mTrack\x20sup'+'plied\x20to\x20f'+'unction\x20wa'+'s\x20not\x20of\x20t'+'ype\x20AnimTr'+'ack');return;}this['_controlle'+'r']['assignAnim'+'ation'](_0x2ae532,_0x57d3d0,_0x494514,_0x2004a3),this['_controlle'+'r']['_transitio'+'ns']['length']===-0x2*0x11a5+-0x9ae*0x3+0x4054&&this['_controlle'+'r']['_transitio'+'ns']['push'](new Lh({'from':'START','to':_0x2ae532})),this['_component']['activate']&&this['_component']['playable']&&(this['_component']['playing']=!(-0x2277+0x16d1+0xba6));}['removeNode'+'Animations'](_0x14d4d4){this['_controlle'+'r']['removeNode'+'Animations'](_0x14d4d4)&&(this['_component']['playing']=!(0x11d3+0x1*0x2186+-0xf8*0x35));}['getAnimati'+'onAsset'](_0x4587fb){return this['_component']['animationA'+'ssets'][this['name']+':'+_0x4587fb];}['transition'](_0x5c0ce9,_0x132078=0x1*0x997+0x1*0x2f3+-0xc8a,_0x3f176d=null){this['_controlle'+'r']['updateStat'+'eFromTrans'+'ition'](new Lh({'from':this['_controlle'+'r']['activeStat'+'eName'],'to':_0x5c0ce9,'time':_0x132078,'transitionOffset':_0x3f176d}));}}class Jc{constructor(_0x280b4a){if(this['_layers']=[],this['_parameter'+'s']={},Array['isArray'](_0x280b4a['layers']))this['_layers']=_0x280b4a['layers'];else for(const _0x4730c7 in _0x280b4a['layers']){const _0x452ecb=_0x280b4a['layers'][_0x4730c7],_0xd810a3={'name':_0x452ecb['name'],'blendType':_0x452ecb['blendType'],'weight':_0x452ecb['weight'],'states':[],'transitions':[]};for(let _0x8d85a9=-0x18bd+0x296+-0x1627*-0x1;_0x8d85a9<_0x452ecb['states']['length'];_0x8d85a9++)_0xd810a3['states']['push'](_0x280b4a['states'][_0x452ecb['states'][_0x8d85a9]]);for(let _0x3f3e3a=0x109d+-0x25*0x71+0x12*-0x4;_0x3f3e3a<_0x452ecb['transition'+'s']['length'];_0x3f3e3a++){const _0x1f732f=_0x280b4a['transition'+'s'][_0x452ecb['transition'+'s'][_0x3f3e3a]];if(_0x1f732f['conditions']&&!Array['isArray'](_0x1f732f['conditions'])){const _0x2e0bdd=Object['keys'](_0x1f732f['conditions']),_0x4d7e5a=[];for(let _0x105cc3=-0x3*-0x239+0x38*0x3c+-0x13cb;_0x105cc3<_0x2e0bdd['length'];_0x105cc3++){const _0xdb6000=_0x1f732f['conditions'][_0x2e0bdd[_0x105cc3]];_0xdb6000['parameterN'+'ame']&&_0x4d7e5a['push'](_0xdb6000);}_0x1f732f['conditions']=_0x4d7e5a;}Number['isInteger'](_0x1f732f['from'])&&(_0x1f732f['from']=_0x280b4a['states'][_0x1f732f['from']]['name']),Number['isInteger'](_0x1f732f['to'])&&(_0x1f732f['to']=_0x280b4a['states'][_0x1f732f['to']]['name']),_0xd810a3['transition'+'s']['push'](_0x1f732f);}this['_layers']['push'](_0xd810a3);}for(const _0x227ae0 in _0x280b4a['parameters']){const _0x415076=_0x280b4a['parameters'][_0x227ae0];this['_parameter'+'s'][_0x415076['name']]={'type':_0x415076['type'],'value':_0x415076['value']};}}get['parameters'](){return Object['assign']({},this['_parameter'+'s']);}get['layers'](){return this['_layers'];}}class $v extends we{constructor(){super(...arguments),h(this,'_stateGrap'+'hAsset',null),h(this,'_animation'+'Assets',{}),h(this,'_speed',-0x139d+0xbf0*-0x3+-0x58b*-0xa),h(this,'_activate',!(0x21a3+-0x30*0xd0+0x55d)),h(this,'_playing',!(0x1270+-0x1852*0x1+-0x89*-0xb)),h(this,'_rootBone',null),h(this,'_stateGrap'+'h',null),h(this,'_layers',[]),h(this,'_layerIndi'+'ces',{}),h(this,'_parameter'+'s',{}),h(this,'_targets',{}),h(this,'_consumedT'+'riggers',new Set()),h(this,'_normalize'+'Weights',!(0xc69*0x3+-0x1ef*-0x5+0x7*-0x6b3)),h(this,'findParame'+'ter',_0xdf1dc7=>this['_parameter'+'s'][_0xdf1dc7]),h(this,'consumeTri'+'gger',_0xd06899=>{this['_consumedT'+'riggers']['add'](_0xd06899);});}set['stateGraph'+'Asset'](_0x4b2702){if(_0x4b2702===null){this['removeStat'+'eGraph']();return;}this['_stateGrap'+'hAsset']&&this['system']['app']['assets']['get'](this['_stateGrap'+'hAsset'])['off']('change',this['_onStateGr'+'aphAssetCh'+'angeEvent'],this);let _0x198129,_0x26821e;_0x4b2702 instanceof pe?(_0x198129=_0x4b2702['id'],_0x26821e=this['system']['app']['assets']['get'](_0x198129),_0x26821e||(this['system']['app']['assets']['add'](_0x4b2702),_0x26821e=this['system']['app']['assets']['get'](_0x198129))):(_0x198129=_0x4b2702,_0x26821e=this['system']['app']['assets']['get'](_0x198129)),!(!_0x26821e||this['_stateGrap'+'hAsset']===_0x198129)&&(_0x26821e['resource']?(this['_stateGrap'+'h']=_0x26821e['resource'],this['loadStateG'+'raph'](this['_stateGrap'+'h']),_0x26821e['on']('change',this['_onStateGr'+'aphAssetCh'+'angeEvent'],this)):(_0x26821e['once']('load',_0x314ae2=>{this['_stateGrap'+'h']=_0x314ae2['resource'],this['loadStateG'+'raph'](this['_stateGrap'+'h']);}),_0x26821e['on']('change',this['_onStateGr'+'aphAssetCh'+'angeEvent'],this),this['system']['app']['assets']['load'](_0x26821e)),this['_stateGrap'+'hAsset']=_0x198129);}get['stateGraph'+'Asset'](){return this['_stateGrap'+'hAsset'];}set['normalizeW'+'eights'](_0x441f3c){this['_normalize'+'Weights']=_0x441f3c,this['unbind']();}get['normalizeW'+'eights'](){return this['_normalize'+'Weights'];}set['animationA'+'ssets'](_0x3876e8){this['_animation'+'Assets']=_0x3876e8,this['loadAnimat'+'ionAssets']();}get['animationA'+'ssets'](){return this['_animation'+'Assets'];}set['speed'](_0x1cccb5){this['_speed']=_0x1cccb5;}get['speed'](){return this['_speed'];}set['activate'](_0x2df9dc){this['_activate']=_0x2df9dc;}get['activate'](){return this['_activate'];}set['playing'](_0x19788c){this['_playing']=_0x19788c;}get['playing'](){return this['_playing'];}set['rootBone'](_0x55f640){if(typeof _0x55f640=='string'){const _0x51a95b=this['entity']['root']['findByGuid'](_0x55f640);w['assert'](_0x51a95b,'rootBone\x20e'+'ntity\x20for\x20'+'supplied\x20g'+'uid:'+_0x55f640+('\x20cannot\x20be'+'\x20found\x20in\x20'+'the\x20scene')),this['_rootBone']=_0x51a95b;}else _0x55f640 instanceof lt?this['_rootBone']=_0x55f640:this['_rootBone']=null;this['rebind']();}get['rootBone'](){return this['_rootBone'];}set['stateGraph'](_0x594d04){this['_stateGrap'+'h']=_0x594d04;}get['stateGraph'](){return this['_stateGrap'+'h'];}get['layers'](){return this['_layers'];}set['layerIndic'+'es'](_0x411f11){this['_layerIndi'+'ces']=_0x411f11;}get['layerIndic'+'es'](){return this['_layerIndi'+'ces'];}set['parameters'](_0x32a44b){this['_parameter'+'s']=_0x32a44b;}get['parameters'](){return this['_parameter'+'s'];}set['targets'](_0x1cb43c){this['_targets']=_0x1cb43c;}get['targets'](){return this['_targets'];}get['playable'](){for(let _0x55e223=-0x25c5+0x1568+0x47*0x3b;_0x55e223<this['_layers']['length'];_0x55e223++)if(!this['_layers'][_0x55e223]['playable'])return!(-0x4*-0x959+-0x1b39+0xa2a*-0x1);return!(0x1*0xa5a+-0x2566*0x1+0x6*0x482);}get['baseLayer'](){return this['_layers']['length']>0x172c+-0x113f+-0x25*0x29?this['_layers'][0x1354+-0x100e+-0x346]:null;}['_onStateGr'+'aphAssetCh'+'angeEvent'](_0x4af330){const _0x3f36bb=this['animationA'+'ssets'],_0x2310d3=this['layers']['map'](_0xefe573=>_0xefe573['mask']);this['removeStat'+'eGraph'](),this['_stateGrap'+'h']=new Jc(_0x4af330['_data']),this['loadStateG'+'raph'](this['_stateGrap'+'h']),this['animationA'+'ssets']=_0x3f36bb,this['loadAnimat'+'ionAssets'](),this['layers']['forEach']((_0x3f9dda,_0x3b7c57)=>{_0x3f9dda['mask']=_0x2310d3[_0x3b7c57];}),this['rebind']();}['dirtifyTar'+'gets'](){const _0x42e69e=Object['values'](this['_targets']);for(let _0x2606d3=0x2556+-0x33e*0x9+-0x828;_0x2606d3<_0x42e69e['length'];_0x2606d3++)_0x42e69e[_0x2606d3]['dirty']=!(-0x4c1*-0x7+-0xb62+-0x15e5);}['_addLayer']({name:_0x3bc50b,states:_0x336e5a,transitions:_0x25448b,weight:_0x252979,mask:_0x4076d3,blendType:_0x4d9b04}){let _0x173190;this['rootBone']?_0x173190=this['rootBone']:_0x173190=this['entity'];const _0x3f7e6c=this['_layers']['length'],_0x160f56=new Fi(this,_0x173190,_0x3bc50b,_0x4076d3,_0x3f7e6c),_0x59126c=new Gv(_0x160f56),_0x5a8de0=new NL(_0x59126c,_0x336e5a,_0x25448b,this['_activate'],this,this['findParame'+'ter'],this['consumeTri'+'gger']);return this['_layers']['push'](new kL(_0x3bc50b,_0x5a8de0,this,_0x252979,_0x4d9b04)),this['_layerIndi'+'ces'][_0x3bc50b]=_0x3f7e6c,this['_layers'][_0x3f7e6c];}['addLayer'](_0x2feb00,_0x298d47,_0x1e16ad,_0x387dc7){const _0x5293f9=this['findAnimat'+'ionLayer'](_0x2feb00);if(_0x5293f9)return _0x5293f9;const _0x396123=[{'name':'START','speed':0x1}],_0x519d3b=[];return this['_addLayer']({'name':_0x2feb00,'states':_0x396123,'transitions':_0x519d3b,'weight':_0x298d47,'mask':_0x1e16ad,'blendType':_0x387dc7});}['_assignPar'+'ameters'](_0x5ee542){this['_parameter'+'s']={};const _0x35474a=Object['keys'](_0x5ee542['parameters']);for(let _0x37dbe0=-0x2545+-0x187*-0xa+-0x15ff*-0x1;_0x37dbe0<_0x35474a['length'];_0x37dbe0++){const _0x21cf81=_0x35474a[_0x37dbe0];this['_parameter'+'s'][_0x21cf81]={'type':_0x5ee542['parameters'][_0x21cf81]['type'],'value':_0x5ee542['parameters'][_0x21cf81]['value']};}}['loadStateG'+'raph'](_0x3c4af8){this['_stateGrap'+'h']=_0x3c4af8,this['_assignPar'+'ameters'](_0x3c4af8),this['_layers']=[];let _0xd595ae=!(0x191e+0x2*0xb07+-0x2f2b);for(let _0x3b4f67=0x22c8+-0x9*0x350+-0x4f8;_0x3b4f67<_0x3c4af8['layers']['length'];_0x3b4f67++){const _0x5119fa=_0x3c4af8['layers'][_0x3b4f67];this['_addLayer']({..._0x5119fa}),_0x5119fa['states']['some'](_0x41394d=>_0x41394d['blendTree'])&&(_0xd595ae=!(-0xf15+0x2*0x1c3+-0xb*-0x10d));}_0xd595ae||this['setupAnima'+'tionAssets']();}['setupAnima'+'tionAssets'](){for(let _0x398381=-0x4d*0x7f+-0xdce+0x3401;_0x398381<this['_layers']['length'];_0x398381++){const _0x9e37a8=this['_layers'][_0x398381],_0x437b14=_0x9e37a8['name'];for(let _0x1edb43=0x16d4+0x1163+-0x2837;_0x1edb43<_0x9e37a8['states']['length'];_0x1edb43++){const _0x5649a7=_0x9e37a8['states'][_0x1edb43];if(Ih['indexOf'](_0x5649a7)===-(0x1ac4+-0x125b+-0x21a*0x4)){const _0x22de4a=_0x437b14+':'+_0x5649a7;this['_animation'+'Assets'][_0x22de4a]||(this['_animation'+'Assets'][_0x22de4a]={'asset':null});}}}this['loadAnimat'+'ionAssets']();}['loadAnimat'+'ionAssets'](){for(let _0x5b3179=0x1*0x18eb+0x1a37+0xe*-0x3a7;_0x5b3179<this['_layers']['length'];_0x5b3179++){const _0x89f88f=this['_layers'][_0x5b3179];for(let _0x44803d=-0x1e1*-0xb+-0x883*0x4+-0x89*-0x19;_0x44803d<_0x89f88f['states']['length'];_0x44803d++){const _0x5cfa6e=_0x89f88f['states'][_0x44803d];if(Ih['indexOf'](_0x5cfa6e)!==-(0x32b+-0x556+-0x2*-0x116))continue;const _0x5c164e=this['_animation'+'Assets'][_0x89f88f['name']+':'+_0x5cfa6e];if(!_0x5c164e||!_0x5c164e['asset']){this['findAnimat'+'ionLayer'](_0x89f88f['name'])['assignAnim'+'ation'](_0x5cfa6e,Qi['EMPTY']);continue;}const _0x366b7c=_0x5c164e['asset'],_0x2ae9d6=this['system']['app']['assets']['get'](_0x366b7c);_0x2ae9d6&&(_0x2ae9d6['resource']?this['onAnimatio'+'nAssetLoad'+'ed'](_0x89f88f['name'],_0x5cfa6e,_0x2ae9d6):(_0x2ae9d6['once']('load',function(_0x20c0d5,_0x15821b){return function(_0x55fe3b){this['onAnimatio'+'nAssetLoad'+'ed'](_0x20c0d5,_0x15821b,_0x55fe3b);}['bind'](this);}['bind'](this)(_0x89f88f['name'],_0x5cfa6e)),this['system']['app']['assets']['load'](_0x2ae9d6)));}}}['onAnimatio'+'nAssetLoad'+'ed'](_0x3376fd,_0x372ef7,_0x54c6fa){this['findAnimat'+'ionLayer'](_0x3376fd)['assignAnim'+'ation'](_0x372ef7,_0x54c6fa['resource']);}['removeStat'+'eGraph'](){this['_stateGrap'+'h']=null,this['_stateGrap'+'hAsset']=null,this['_animation'+'Assets']={},this['_layers']=[],this['_layerIndi'+'ces']={},this['_parameter'+'s']={},this['_playing']=!(0x1*0x24f7+-0xc50+-0x18a6),this['unbind'](),this['_targets']={};}['reset'](){this['_assignPar'+'ameters'](this['_stateGrap'+'h']);for(let _0x14555a=-0x17ae+-0x1cd*-0xe+-0x188;_0x14555a<this['_layers']['length'];_0x14555a++){const _0x4110cb=this['_layers'][_0x14555a]['playing'];this['_layers'][_0x14555a]['reset'](),this['_layers'][_0x14555a]['playing']=_0x4110cb;}}['unbind'](){this['_normalize'+'Weights']||Object['keys'](this['_targets'])['forEach'](_0x648fc5=>{this['_targets'][_0x648fc5]['unbind']();});}['rebind'](){this['_targets']={};for(let _0x206bba=0x2371+0x65*-0x53+-0x2b2;_0x206bba<this['_layers']['length'];_0x206bba++)this['_layers'][_0x206bba]['rebind']();}['findAnimat'+'ionLayer'](_0x46c56a){const _0x124f27=this['_layerIndi'+'ces'][_0x46c56a];return this['_layers'][_0x124f27]||null;}['addAnimati'+'onState'](_0x4c557f,_0x4b4e0f,_0x2b349e=-0x22cb*-0x1+-0x20bd+-0x15*0x19,_0x248fc8=!(-0x1135*-0x2+-0x19fb+-0x86f),_0x4fe8c8='Base'){var _0x97acf8;this['_stateGrap'+'h']||this['loadStateG'+'raph'](new Jc({'layers':[{'name':_0x4fe8c8,'states':[{'name':'START','speed':0x1},{'name':_0x4c557f,'speed':_0x2b349e,'loop':_0x248fc8,'defaultState':!(-0x181c+-0x1016+0x3*0xd66)}],'transitions':[{'from':'START','to':_0x4c557f}]}],'parameters':{}}));const _0x449fc6=this['findAnimat'+'ionLayer'](_0x4fe8c8);_0x449fc6?_0x449fc6['assignAnim'+'ation'](_0x4c557f,_0x4b4e0f,_0x2b349e,_0x248fc8):(_0x97acf8=this['addLayer'](_0x4fe8c8))==null||_0x97acf8['assignAnim'+'ation'](_0x4c557f,_0x4b4e0f,_0x2b349e,_0x248fc8);}['assignAnim'+'ation'](_0x614c42,_0x142793,_0x22aad3,_0x1faab4=-0x2372+0x1b00+-0x15*-0x67,_0x354592=!(0x11*0x21e+-0x16*0x1b1+-0x138*-0x1)){if(!this['_stateGrap'+'h']&&_0x614c42['indexOf']('.')===-(0x1*-0x1475+0xb60+0x916)){this['loadStateG'+'raph'](new Jc({'layers':[{'name':'Base','states':[{'name':'START','speed':0x1},{'name':_0x614c42,'speed':_0x1faab4,'loop':_0x354592,'defaultState':!(0xc5b*0x3+0x520*0x5+0x3eb1*-0x1)}],'transitions':[{'from':'START','to':_0x614c42}]}],'parameters':{}})),this['baseLayer']['assignAnim'+'ation'](_0x614c42,_0x142793);return;}const _0x471bdc=_0x22aad3?this['findAnimat'+'ionLayer'](_0x22aad3):this['baseLayer'];if(!_0x471bdc){w['error']('assignAnim'+'ation:\x20Try'+'ing\x20to\x20ass'+'ign\x20an\x20ani'+'m\x20track\x20to'+'\x20a\x20layer\x20t'+'hat\x20doesn\x27'+'t\x20exist');return;}_0x471bdc['assignAnim'+'ation'](_0x614c42,_0x142793,_0x1faab4,_0x354592);}['removeNode'+'Animations'](_0x434b38,_0x450ea3){const _0xf5f889=_0x450ea3?this['findAnimat'+'ionLayer'](_0x450ea3):this['baseLayer'];if(!_0xf5f889){w['error']('removeStat'+'eAnimation'+'s:\x20Trying\x20'+'to\x20remove\x20'+'animation\x20'+'tracks\x20fro'+'m\x20a\x20state\x20'+'before\x20the'+'\x20state\x20gra'+'ph\x20has\x20bee'+'n\x20loaded.\x20'+'Have\x20you\x20c'+'alled\x20load'+'StateGraph'+'?');return;}_0xf5f889['removeNode'+'Animations'](_0x434b38);}['getParamet'+'erValue'](_0x2580dd,_0xa73e2){const _0x529602=this['_parameter'+'s'][_0x2580dd];if(_0x529602&&_0x529602['type']===_0xa73e2)return _0x529602['value'];w['log']('Cannot\x20get'+'\x20parameter'+'\x20value.\x20No'+'\x20parameter'+'\x20found\x20in\x20'+'anim\x20contr'+'oller\x20name'+'d\x20\x22'+_0x2580dd+('\x22\x20of\x20type\x20'+'\x22')+_0xa73e2+'\x22');}['setParamet'+'erValue'](_0x436617,_0x2fecef,_0x139a3e){const _0x512327=this['_parameter'+'s'][_0x436617];if(_0x512327&&_0x512327['type']===_0x2fecef){_0x512327['value']=_0x139a3e;return;}w['log']('Cannot\x20set'+'\x20parameter'+'\x20value.\x20No'+'\x20parameter'+'\x20found\x20in\x20'+'anim\x20contr'+'oller\x20name'+'d\x20\x22'+_0x436617+('\x22\x20of\x20type\x20'+'\x22')+_0x2fecef+'\x22');}['getFloat'](_0x33d808){return this['getParamet'+'erValue'](_0x33d808,Rg);}['setFloat'](_0x27b088,_0x281034){this['setParamet'+'erValue'](_0x27b088,Rg,_0x281034);}['getInteger'](_0x47af09){return this['getParamet'+'erValue'](_0x47af09,Lg);}['setInteger'](_0x5e6765,_0x321c3f){typeof _0x321c3f=='number'&&_0x321c3f%(0x7*-0x57d+-0x222+-0x2*-0x1447)===-0x1c0e+0x1*0x511+0x1*0x16fd?this['setParamet'+'erValue'](_0x5e6765,Lg,_0x321c3f):w['error']('Attempting'+'\x20to\x20assign'+'\x20non\x20integ'+'er\x20value\x20t'+'o\x20integer\x20'+'parameter',_0x5e6765,_0x321c3f);}['getBoolean'](_0x112885){return this['getParamet'+'erValue'](_0x112885,Og);}['setBoolean'](_0x1661e2,_0x118469){this['setParamet'+'erValue'](_0x1661e2,Og,!!_0x118469);}['getTrigger'](_0x58b18a){return this['getParamet'+'erValue'](_0x58b18a,Qc);}['setTrigger'](_0x21d1f2,_0x110ff4=!(0x6*0x2d5+0x244d*-0x1+0xc*0x19c)){this['setParamet'+'erValue'](_0x21d1f2,Qc,!(0x239b+0x1*0x1689+0x1*-0x3a24)),_0x110ff4&&this['_consumedT'+'riggers']['add'](_0x21d1f2);}['resetTrigg'+'er'](_0x6bc5b7){this['setParamet'+'erValue'](_0x6bc5b7,Qc,!(0x22e8+-0x1f*0x10d+-0x1*0x254));}['onBeforeRe'+'move'](){Number['isFinite'](this['_stateGrap'+'hAsset'])&&this['system']['app']['assets']['get'](this['_stateGrap'+'hAsset'])['off']('change',this['_onStateGr'+'aphAssetCh'+'angeEvent'],this);}['update'](_0x46ee07){for(let _0xe3d68b=-0x1*-0x1460+0x23dc+-0x7a*0x76;_0xe3d68b<this['layers']['length'];_0xe3d68b++)this['layers'][_0xe3d68b]['update'](_0x46ee07*this['speed']);this['_consumedT'+'riggers']['forEach'](_0x382588=>{this['parameters'][_0x382588]['value']=!(-0xad5+0x18a3+0x1*-0xdcd);}),this['_consumedT'+'riggers']['clear']();}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x43e5fe,_0x5daf7c){_0x43e5fe['rootBone']&&_0x5daf7c[_0x43e5fe['rootBone']['getGuid']()]?this['rootBone']=_0x5daf7c[_0x43e5fe['rootBone']['getGuid']()]:this['rebind']();}}class UL{constructor(){this['enabled']=!(-0x1*0x89+0x5fe+-0x575);}}const bu=['enabled'];class BL extends ct{constructor(_0x197aa0){super(_0x197aa0),this['id']='anim',this['ComponentT'+'ype']=$v,this['DataType']=UL,this['schema']=bu,this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this),this['app']['systems']['on']('animationU'+'pdate',this['onAnimatio'+'nUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x1cca8c,_0x2ac6c3,_0xbb82b){super['initialize'+'ComponentD'+'ata'](_0x1cca8c,_0x2ac6c3,bu);const _0xc193f4=['animationA'+'ssets','stateGraph','layers','masks'];Object['keys'](_0x2ac6c3)['forEach'](_0x2f04ce=>{_0xc193f4['includes'](_0x2f04ce)||(_0x1cca8c[_0x2f04ce]=_0x2ac6c3[_0x2f04ce]);}),_0x2ac6c3['stateGraph']&&(_0x1cca8c['stateGraph']=_0x2ac6c3['stateGraph'],_0x1cca8c['loadStateG'+'raph'](_0x1cca8c['stateGraph'])),_0x2ac6c3['layers']&&_0x2ac6c3['layers']['forEach']((_0x44cc09,_0x3c8f86)=>{_0x44cc09['_controlle'+'r']['states']['forEach'](_0xdf923f=>{_0x44cc09['_controlle'+'r']['_states'][_0xdf923f]['_animation'+'List']['forEach'](_0x577922=>{if(!_0x577922['animTrack']||_0x577922['animTrack']===Qi['EMPTY']){const _0x316491=this['app']['assets']['get'](_0x44cc09['_component']['_animation'+'Assets'][_0x44cc09['name']+':'+_0x577922['name']]['asset']);_0x316491&&!_0x316491['loaded']&&_0x316491['once']('load',()=>{_0x1cca8c['layers'][_0x3c8f86]['assignAnim'+'ation'](_0x577922['name'],_0x316491['resource']);});}else _0x1cca8c['layers'][_0x3c8f86]['assignAnim'+'ation'](_0x577922['name'],_0x577922['animTrack']);});});}),_0x2ac6c3['animationA'+'ssets']&&(_0x1cca8c['animationA'+'ssets']=Object['assign'](_0x1cca8c['animationA'+'ssets'],_0x2ac6c3['animationA'+'ssets'])),_0x2ac6c3['masks']&&Object['keys'](_0x2ac6c3['masks'])['forEach'](_0x464b15=>{if(_0x1cca8c['layers'][_0x464b15]){const _0x51d89b=_0x2ac6c3['masks'][_0x464b15]['mask'],_0x409b8d={};Object['keys'](_0x51d89b)['forEach'](_0xad8a47=>{_0x409b8d[decodeURI(_0xad8a47)]=_0x51d89b[_0xad8a47];}),_0x1cca8c['layers'][_0x464b15]['mask']=_0x409b8d;}});}['onAnimatio'+'nUpdate'](_0x4f5edc){const _0x20b0e5=this['store'];for(const _0x2200cc in _0x20b0e5)if(_0x20b0e5['hasOwnProp'+'erty'](_0x2200cc)){const _0x3af9aa=_0x20b0e5[_0x2200cc]['entity']['anim'];_0x3af9aa['data']['enabled']&&_0x3af9aa['entity']['enabled']&&_0x3af9aa['playing']&&_0x3af9aa['update'](_0x4f5edc);}}['cloneCompo'+'nent'](_0x559eee,_0x5b1918){let _0x1dd726;(!_0x559eee['anim']['rootBone']||_0x559eee['anim']['rootBone']===_0x559eee)&&(_0x1dd726={},_0x559eee['anim']['layers']['forEach']((_0x212a1f,_0x5c69d7)=>{if(_0x212a1f['mask']){const _0x1df7fa={};Object['keys'](_0x212a1f['mask'])['forEach'](_0x431937=>{const _0x547352=_0x431937['split']('/');_0x547352['shift']();const _0x346392=[_0x5b1918['name'],..._0x547352]['join']('/');_0x1df7fa[_0x346392]=_0x212a1f['mask'][_0x431937];}),_0x1dd726[_0x5c69d7]={'mask':_0x1df7fa};}}));const _0x1644ea={'enabled':_0x559eee['anim']['enabled'],'stateGraphAsset':_0x559eee['anim']['stateGraph'+'Asset'],'animationAssets':_0x559eee['anim']['animationA'+'ssets'],'speed':_0x559eee['anim']['speed'],'activate':_0x559eee['anim']['activate'],'playing':_0x559eee['anim']['playing'],'rootBone':_0x559eee['anim']['rootBone'],'stateGraph':_0x559eee['anim']['stateGraph'],'layers':_0x559eee['anim']['layers'],'layerIndices':_0x559eee['anim']['layerIndic'+'es'],'parameters':_0x559eee['anim']['parameters'],'normalizeWeights':_0x559eee['anim']['normalizeW'+'eights'],'masks':_0x1dd726};return this['addCompone'+'nt'](_0x5b1918,_0x1644ea);}['onBeforeRe'+'move'](_0x3385db,_0x81cf8f){_0x81cf8f['onBeforeRe'+'move']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('animationU'+'pdate',this['onAnimatio'+'nUpdate'],this);}}we['_buildAcce'+'ssors']($v['prototype'],bu);class Xv extends we{['setCurrent'+'Listener'](){if(this['enabled']&&this['entity']['audioliste'+'ner']&&this['entity']['enabled']){this['system']['current']=this['entity'];const _0x2aa06d=this['system']['current']['getPositio'+'n']();this['system']['manager']['listener']['setPositio'+'n'](_0x2aa06d);}}['onEnable'](){this['setCurrent'+'Listener']();}['onDisable'](){this['system']['current']===this['entity']&&(this['system']['current']=null);}}class zL{constructor(){this['enabled']=!(0xa6*0x2c+-0x1*0x223f+0x5b7*0x1);}}const qv=['enabled'];class VL extends ct{constructor(_0x1743bc){super(_0x1743bc),this['id']='audioliste'+'ner',this['ComponentT'+'ype']=Xv,this['DataType']=zL,this['schema']=qv,this['manager']=_0x1743bc['soundManag'+'er'],w['assert'](this['manager'],'AudioListe'+'nerCompone'+'ntSystem\x20c'+'annot\x20be\x20c'+'reated\x20wit'+'hout\x20sound'+'\x20manager'),this['current']=null,this['app']['systems']['on']('update',this['onUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x28d5aa,_0x159e78,_0x575893){_0x575893=['enabled'],super['initialize'+'ComponentD'+'ata'](_0x28d5aa,_0x159e78,_0x575893);}['onUpdate'](_0x3a708a){if(this['current']){const _0x55eda5=this['current']['getPositio'+'n']();this['manager']['listener']['setPositio'+'n'](_0x55eda5);const _0x14494e=this['current']['getWorldTr'+'ansform']();this['manager']['listener']['setOrienta'+'tion'](_0x14494e);}}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}we['_buildAcce'+'ssors'](Xv['prototype'],qv);const Au=0x166c+0x5*0x455+-0x2c15,Ng=0x175e+0x2148+-0x38a5*0x1,eh='group',Cu='image',jv='text',th='stretch',GL='contain',HL='cover',ft={'DEFAULT':'DEFAULT','HOVER':'HOVER','PRESSED':'PRESSED','INACTIVE':'INACTIVE'},kl={};kl[ft['DEFAULT']]='_defaultTi'+'nt',kl[ft['HOVER']]='hoverTint',kl[ft['PRESSED']]='pressedTin'+'t',kl[ft['INACTIVE']]='inactiveTi'+'nt';const Ul={};Ul[ft['DEFAULT']]='_defaultSp'+'riteAsset',Ul[ft['HOVER']]='hoverSprit'+'eAsset',Ul[ft['PRESSED']]='pressedSpr'+'iteAsset',Ul[ft['INACTIVE']]='inactiveSp'+'riteAsset';const Bl={};Bl[ft['DEFAULT']]='_defaultSp'+'riteFrame',Bl[ft['HOVER']]='hoverSprit'+'eFrame',Bl[ft['PRESSED']]='pressedSpr'+'iteFrame',Bl[ft['INACTIVE']]='inactiveSp'+'riteFrame';class It extends we{constructor(_0x587bb7,_0x399ba1){super(_0x587bb7,_0x399ba1),h(this,'_visualSta'+'te',ft['DEFAULT']),h(this,'_isHoverin'+'g',!(-0x62a+0x1955*0x1+-0x132a)),h(this,'_hoveringC'+'ounter',0x1dcd+0x1*0xb67+-0x494*0x9),h(this,'_isPressed',!(0xc84+-0x163*-0x5+0x26*-0x83)),h(this,'_defaultTi'+'nt',new ie(0x48b*-0x7+-0x35*-0x1+0x1f99,0x1ed7+-0x1bd8+-0x2fe,-0x1b84+0x1136+0xd*0xcb,0x2*0x49c+0x17df+-0x2116)),h(this,'_defaultSp'+'riteAsset',null),h(this,'_defaultSp'+'riteFrame',0x1cd6+-0x2459+0x783),h(this,'_imageEnti'+'ty',null),h(this,'_evtElemen'+'tAdd',null),h(this,'_evtImageE'+'ntityEleme'+'ntAdd',null),h(this,'_evtImageE'+'ntityEleme'+'ntRemove',null),h(this,'_evtImageE'+'ntityEleme'+'ntColor',null),h(this,'_evtImageE'+'ntityEleme'+'ntOpacity',null),h(this,'_evtImageE'+'ntityEleme'+'ntSpriteAs'+'set',null),h(this,'_evtImageE'+'ntityEleme'+'ntSpriteFr'+'ame',null),(this['_visualSta'+'te']=ft['DEFAULT'],this['_isHoverin'+'g']=!(0x1*0xd22+-0x2*0x288+-0x3b*0x23),this['_hoveringC'+'ounter']=0x1*0x2541+0x2479+-0x49ba,this['_isPressed']=!(-0x813*0x4+0x1083+0xfca),this['_defaultTi'+'nt']=new ie(-0x14*0x1cf+0xd78*0x2+0xd7*0xb,-0x71*0x3e+0x3*-0x214+0x1*0x219b,0x12ac+0x9c5*-0x1+-0x8e6*0x1,-0x1cfc+0xb18+0x11e5),this['_defaultSp'+'riteAsset']=null,this['_defaultSp'+'riteFrame']=-0x9e6+-0xf47+0x509*0x5,this['_toggleLif'+'ecycleList'+'eners']('on',_0x587bb7));}get['data'](){const _0x49ea65=this['system']['store'][this['entity']['getGuid']()];return _0x49ea65?_0x49ea65['data']:null;}set['enabled'](_0x347a48){this['_setValue']('enabled',_0x347a48);}get['enabled'](){return this['data']['enabled'];}set['active'](_0x235aa6){this['_setValue']('active',_0x235aa6);}get['active'](){return this['data']['active'];}set['imageEntit'+'y'](_0x5528e8){if(this['_imageEnti'+'ty']!==_0x5528e8){const _0x2c7383=typeof _0x5528e8=='string';if(this['_imageEnti'+'ty']&&_0x2c7383&&this['_imageEnti'+'ty']['getGuid']()===_0x5528e8)return;this['_imageEnti'+'ty']&&this['_imageEnti'+'tyUnsubscr'+'ibe'](),_0x5528e8 instanceof Ie?this['_imageEnti'+'ty']=_0x5528e8:_0x2c7383?this['_imageEnti'+'ty']=this['system']['app']['getEntityF'+'romIndex'](_0x5528e8)||null:this['_imageEnti'+'ty']=null,this['_imageEnti'+'ty']&&this['_imageEnti'+'tySubscrib'+'e'](),this['_imageEnti'+'ty']?this['data']['imageEntit'+'y']=this['_imageEnti'+'ty']['getGuid']():_0x2c7383&&_0x5528e8&&(this['data']['imageEntit'+'y']=_0x5528e8);}}get['imageEntit'+'y'](){return this['_imageEnti'+'ty'];}set['hitPadding'](_0x1f16a7){this['_setValue']('hitPadding',_0x1f16a7);}get['hitPadding'](){return this['data']['hitPadding'];}set['transition'+'Mode'](_0x3db2f0){this['_setValue']('transition'+'Mode',_0x3db2f0);}get['transition'+'Mode'](){return this['data']['transition'+'Mode'];}set['hoverTint'](_0xac0b0c){this['_setValue']('hoverTint',_0xac0b0c);}get['hoverTint'](){return this['data']['hoverTint'];}set['pressedTin'+'t'](_0x28e3dd){this['_setValue']('pressedTin'+'t',_0x28e3dd);}get['pressedTin'+'t'](){return this['data']['pressedTin'+'t'];}set['inactiveTi'+'nt'](_0x2a7cf3){this['_setValue']('inactiveTi'+'nt',_0x2a7cf3);}get['inactiveTi'+'nt'](){return this['data']['inactiveTi'+'nt'];}set['fadeDurati'+'on'](_0xe86ab6){this['_setValue']('fadeDurati'+'on',_0xe86ab6);}get['fadeDurati'+'on'](){return this['data']['fadeDurati'+'on'];}set['hoverSprit'+'eAsset'](_0x5c92c9){this['_setValue']('hoverSprit'+'eAsset',_0x5c92c9);}get['hoverSprit'+'eAsset'](){return this['data']['hoverSprit'+'eAsset'];}set['hoverSprit'+'eFrame'](_0x54bfc6){this['_setValue']('hoverSprit'+'eFrame',_0x54bfc6);}get['hoverSprit'+'eFrame'](){return this['data']['hoverSprit'+'eFrame'];}set['pressedSpr'+'iteAsset'](_0x5a062b){this['_setValue']('pressedSpr'+'iteAsset',_0x5a062b);}get['pressedSpr'+'iteAsset'](){return this['data']['pressedSpr'+'iteAsset'];}set['pressedSpr'+'iteFrame'](_0x165e13){this['_setValue']('pressedSpr'+'iteFrame',_0x165e13);}get['pressedSpr'+'iteFrame'](){return this['data']['pressedSpr'+'iteFrame'];}set['inactiveSp'+'riteAsset'](_0x175017){this['_setValue']('inactiveSp'+'riteAsset',_0x175017);}get['inactiveSp'+'riteAsset'](){return this['data']['inactiveSp'+'riteAsset'];}set['inactiveSp'+'riteFrame'](_0x4da465){this['_setValue']('inactiveSp'+'riteFrame',_0x4da465);}get['inactiveSp'+'riteFrame'](){return this['data']['inactiveSp'+'riteFrame'];}['_setValue'](_0x15244d,_0x591cb7){const _0xca5c2e=this['data'],_0x172e4f=_0xca5c2e[_0x15244d];_0xca5c2e[_0x15244d]=_0x591cb7,this['fire']('set',_0x15244d,_0x172e4f,_0x591cb7);}['_toggleLif'+'ecycleList'+'eners'](_0x2a074a,_0x4a4532){var _0x45b84f;this[_0x2a074a]('set_active',this['_onSetActi'+'ve'],this),this[_0x2a074a]('set_transi'+'tionMode',this['_onSetTran'+'sitionMode'],this),this[_0x2a074a]('set_hoverT'+'int',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x2a074a]('set_presse'+'dTint',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x2a074a]('set_inacti'+'veTint',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x2a074a]('set_hoverS'+'priteAsset',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x2a074a]('set_hoverS'+'priteFrame',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x2a074a]('set_presse'+'dSpriteAss'+'et',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x2a074a]('set_presse'+'dSpriteFra'+'me',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x2a074a]('set_inacti'+'veSpriteAs'+'set',this['_onSetTran'+'sitionValu'+'e'],this),this[_0x2a074a]('set_inacti'+'veSpriteFr'+'ame',this['_onSetTran'+'sitionValu'+'e'],this),_0x2a074a==='on'?this['_evtElemen'+'tAdd']=this['entity']['on']('element:ad'+'d',this['_onElement'+'ComponentA'+'dd'],this):((_0x45b84f=this['_evtElemen'+'tAdd'])==null||_0x45b84f['off'](),this['_evtElemen'+'tAdd']=null);}['_onSetActi'+'ve'](_0x4ae8f4,_0x29bf58,_0x5d6588){_0x29bf58!==_0x5d6588&&this['_updateVis'+'ualState']();}['_onSetTran'+'sitionMode'](_0x2a21ce,_0x180969,_0x39a743){_0x180969!==_0x39a743&&(this['_cancelTwe'+'en'](),this['_resetToDe'+'faultVisua'+'lState'](_0x180969),this['_forceReap'+'plyVisualS'+'tate']());}['_onSetTran'+'sitionValu'+'e'](_0x283c44,_0x449148,_0x583d66){_0x449148!==_0x583d66&&this['_forceReap'+'plyVisualS'+'tate']();}['_imageEnti'+'tySubscrib'+'e'](){this['_evtImageE'+'ntityEleme'+'ntAdd']=this['_imageEnti'+'ty']['on']('element:ad'+'d',this['_onImageEl'+'ementGain'],this),this['_imageEnti'+'ty']['element']&&this['_onImageEl'+'ementGain']();}['_imageEnti'+'tyUnsubscr'+'ibe'](){var _0x1a5aa1,_0x434441;(_0x1a5aa1=this['_evtImageE'+'ntityEleme'+'ntAdd'])==null||_0x1a5aa1['off'](),this['_evtImageE'+'ntityEleme'+'ntAdd']=null,(_0x434441=this['_imageEnti'+'ty'])!=null&&_0x434441['element']&&this['_onImageEl'+'ementLose']();}['_imageEnti'+'tyElementS'+'ubscribe'](){const _0x377ad4=this['_imageEnti'+'ty']['element'];this['_evtImageE'+'ntityEleme'+'ntRemove']=_0x377ad4['once']('beforeremo'+'ve',this['_onImageEl'+'ementLose'],this),this['_evtImageE'+'ntityEleme'+'ntColor']=_0x377ad4['on']('set:color',this['_onSetColo'+'r'],this),this['_evtImageE'+'ntityEleme'+'ntOpacity']=_0x377ad4['on']('set:opacit'+'y',this['_onSetOpac'+'ity'],this),this['_evtImageE'+'ntityEleme'+'ntSpriteAs'+'set']=_0x377ad4['on']('set:sprite'+'Asset',this['_onSetSpri'+'teAsset'],this),this['_evtImageE'+'ntityEleme'+'ntSpriteFr'+'ame']=_0x377ad4['on']('set:sprite'+'Frame',this['_onSetSpri'+'teFrame'],this);}['_imageEnti'+'tyElementU'+'nsubscribe'](){var _0x43ccad,_0x1c125e,_0x4e9661,_0x27dc11,_0x44ad27;(_0x43ccad=this['_evtImageE'+'ntityEleme'+'ntRemove'])==null||_0x43ccad['off'](),this['_evtImageE'+'ntityEleme'+'ntRemove']=null,(_0x1c125e=this['_evtImageE'+'ntityEleme'+'ntColor'])==null||_0x1c125e['off'](),this['_evtImageE'+'ntityEleme'+'ntColor']=null,(_0x4e9661=this['_evtImageE'+'ntityEleme'+'ntOpacity'])==null||_0x4e9661['off'](),this['_evtImageE'+'ntityEleme'+'ntOpacity']=null,(_0x27dc11=this['_evtImageE'+'ntityEleme'+'ntSpriteAs'+'set'])==null||_0x27dc11['off'](),this['_evtImageE'+'ntityEleme'+'ntSpriteAs'+'set']=null,(_0x44ad27=this['_evtImageE'+'ntityEleme'+'ntSpriteFr'+'ame'])==null||_0x44ad27['off'](),this['_evtImageE'+'ntityEleme'+'ntSpriteFr'+'ame']=null;}['_onElement'+'ComponentR'+'emove'](){this['_toggleHit'+'ElementLis'+'teners']('off');}['_onElement'+'ComponentA'+'dd'](){this['_toggleHit'+'ElementLis'+'teners']('on');}['_onImageEl'+'ementLose'](){this['_imageEnti'+'tyElementU'+'nsubscribe'](),this['_cancelTwe'+'en'](),this['_resetToDe'+'faultVisua'+'lState'](this['transition'+'Mode']);}['_onImageEl'+'ementGain'](){this['_imageEnti'+'tyElementS'+'ubscribe'](),this['_storeDefa'+'ultVisualS'+'tate'](),this['_forceReap'+'plyVisualS'+'tate']();}['_toggleHit'+'ElementLis'+'teners'](_0x1c1349){if(this['entity']['element']){const _0x436ef1=_0x1c1349==='on';if(_0x436ef1&&this['_hasHitEle'+'mentListen'+'ers'])return;this['entity']['element'][_0x1c1349]('beforeremo'+'ve',this['_onElement'+'ComponentR'+'emove'],this),this['entity']['element'][_0x1c1349]('mouseenter',this['_onMouseEn'+'ter'],this),this['entity']['element'][_0x1c1349]('mouseleave',this['_onMouseLe'+'ave'],this),this['entity']['element'][_0x1c1349]('mousedown',this['_onMouseDo'+'wn'],this),this['entity']['element'][_0x1c1349]('mouseup',this['_onMouseUp'],this),this['entity']['element'][_0x1c1349]('touchstart',this['_onTouchSt'+'art'],this),this['entity']['element'][_0x1c1349]('touchend',this['_onTouchEn'+'d'],this),this['entity']['element'][_0x1c1349]('touchleave',this['_onTouchLe'+'ave'],this),this['entity']['element'][_0x1c1349]('touchcance'+'l',this['_onTouchCa'+'ncel'],this),this['entity']['element'][_0x1c1349]('selectstar'+'t',this['_onSelectS'+'tart'],this),this['entity']['element'][_0x1c1349]('selectend',this['_onSelectE'+'nd'],this),this['entity']['element'][_0x1c1349]('selectente'+'r',this['_onSelectE'+'nter'],this),this['entity']['element'][_0x1c1349]('selectleav'+'e',this['_onSelectL'+'eave'],this),this['entity']['element'][_0x1c1349]('click',this['_onClick'],this),this['_hasHitEle'+'mentListen'+'ers']=_0x436ef1;}}['_storeDefa'+'ultVisualS'+'tate'](){var _0x3ccf30;const _0x308009=(_0x3ccf30=this['_imageEnti'+'ty'])==null?void(0x42*0x63+-0x5cc*0x4+-0x256*0x1):_0x3ccf30['element'];!_0x308009||_0x308009['type']===eh||(this['_storeDefa'+'ultColor'](_0x308009['color']),this['_storeDefa'+'ultOpacity'](_0x308009['opacity']),this['_storeDefa'+'ultSpriteA'+'sset'](_0x308009['spriteAsse'+'t']),this['_storeDefa'+'ultSpriteF'+'rame'](_0x308009['spriteFram'+'e']));}['_storeDefa'+'ultColor'](_0x44bb62){this['_defaultTi'+'nt']['r']=_0x44bb62['r'],this['_defaultTi'+'nt']['g']=_0x44bb62['g'],this['_defaultTi'+'nt']['b']=_0x44bb62['b'];}['_storeDefa'+'ultOpacity'](_0x5f27cb){this['_defaultTi'+'nt']['a']=_0x5f27cb;}['_storeDefa'+'ultSpriteA'+'sset'](_0x5e9e33){this['_defaultSp'+'riteAsset']=_0x5e9e33;}['_storeDefa'+'ultSpriteF'+'rame'](_0x591dd6){this['_defaultSp'+'riteFrame']=_0x591dd6;}['_onSetColo'+'r'](_0x226fb5){this['_isApplyin'+'gTint']||(this['_storeDefa'+'ultColor'](_0x226fb5),this['_forceReap'+'plyVisualS'+'tate']());}['_onSetOpac'+'ity'](_0x2eda6c){this['_isApplyin'+'gTint']||(this['_storeDefa'+'ultOpacity'](_0x2eda6c),this['_forceReap'+'plyVisualS'+'tate']());}['_onSetSpri'+'teAsset'](_0x3e5912){this['_isApplyin'+'gSprite']||(this['_storeDefa'+'ultSpriteA'+'sset'](_0x3e5912),this['_forceReap'+'plyVisualS'+'tate']());}['_onSetSpri'+'teFrame'](_0x2ca505){this['_isApplyin'+'gSprite']||(this['_storeDefa'+'ultSpriteF'+'rame'](_0x2ca505),this['_forceReap'+'plyVisualS'+'tate']());}['_onMouseEn'+'ter'](_0x1c46a0){this['_isHoverin'+'g']=!(-0x8*0x21a+0x1115*-0x2+-0x12*-0x2d5),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('mouseenter',_0x1c46a0);}['_onMouseLe'+'ave'](_0xfc9c82){this['_isHoverin'+'g']=!(-0x2e*-0x79+0x9ed+-0x486*0x7),this['_isPressed']=!(-0x566+-0x113+0x2*0x33d),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('mouseleave',_0xfc9c82);}['_onMouseDo'+'wn'](_0x4baa55){this['_isPressed']=!(0x1*-0xae5+-0xb30+0x1615),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('mousedown',_0x4baa55);}['_onMouseUp'](_0x506774){this['_isPressed']=!(0x1*-0x259d+0x1c0e+-0x4*-0x264),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('mouseup',_0x506774);}['_onTouchSt'+'art'](_0x2db2d4){this['_isPressed']=!(-0x2607+-0x246c+-0x4a73*-0x1),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('touchstart',_0x2db2d4);}['_onTouchEn'+'d'](_0x105b5c){_0x105b5c['event']['preventDef'+'ault'](),this['_isPressed']=!(-0x5*0x19f+0x211d*-0x1+0x1*0x2939),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('touchend',_0x105b5c);}['_onTouchLe'+'ave'](_0x234a03){this['_isPressed']=!(-0x607+-0x1fb2+0x25ba),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('touchleave',_0x234a03);}['_onTouchCa'+'ncel'](_0x36b181){this['_isPressed']=!(0x2*-0x1367+0x2*-0x59a+-0xd9*-0x3b),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('touchcance'+'l',_0x36b181);}['_onSelectS'+'tart'](_0x191350){this['_isPressed']=!(-0xc3d+0xe98*-0x2+0x296d),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('selectstar'+'t',_0x191350);}['_onSelectE'+'nd'](_0x3bdabc){this['_isPressed']=!(-0x125*0x4+-0x219e*-0x1+-0x1d09),this['_updateVis'+'ualState'](),this['_fireIfAct'+'ive']('selectend',_0x3bdabc);}['_onSelectE'+'nter'](_0x258807){this['_hoveringC'+'ounter']++,this['_hoveringC'+'ounter']===0x63*-0xd+-0x3a1*-0x8+-0x1800&&(this['_isHoverin'+'g']=!(-0xf9*-0x1c+0xd87*0x1+-0x827*0x5),this['_updateVis'+'ualState']()),this['_fireIfAct'+'ive']('selectente'+'r',_0x258807);}['_onSelectL'+'eave'](_0x577852){this['_hoveringC'+'ounter']--,this['_hoveringC'+'ounter']===-0x54*-0x3b+0xa35+0x1*-0x1d91&&(this['_isHoverin'+'g']=!(-0x2*0xcc7+0x6b*-0x57+-0x6*-0xa52),this['_isPressed']=!(0xdd3+0xc3*0x12+-0x1b88),this['_updateVis'+'ualState']()),this['_fireIfAct'+'ive']('selectleav'+'e',_0x577852);}['_onClick'](_0x354b65){this['_fireIfAct'+'ive']('click',_0x354b65);}['_fireIfAct'+'ive'](_0x37be75,_0x2e8a1b){this['data']['active']&&this['fire'](_0x37be75,_0x2e8a1b);}['_updateVis'+'ualState'](_0x341136){const _0x1b0fa6=this['_visualSta'+'te'],_0x471bf3=this['_determine'+'VisualStat'+'e']();if((_0x1b0fa6!==_0x471bf3||_0x341136)&&this['enabled'])switch(this['_visualSta'+'te']=_0x471bf3,_0x1b0fa6===ft['HOVER']&&this['_fireIfAct'+'ive']('hoverend'),_0x1b0fa6===ft['PRESSED']&&this['_fireIfAct'+'ive']('pressedend'),_0x471bf3===ft['HOVER']&&this['_fireIfAct'+'ive']('hoverstart'),_0x471bf3===ft['PRESSED']&&this['_fireIfAct'+'ive']('pressedsta'+'rt'),this['transition'+'Mode']){case Au:{const _0x5f99ff=kl[this['_visualSta'+'te']],_0x4e6b25=this[_0x5f99ff];this['_applyTint'](_0x4e6b25);break;}case Ng:{const _0x160fbf=Ul[this['_visualSta'+'te']],_0x2295e1=Bl[this['_visualSta'+'te']],_0x4edc81=this[_0x160fbf],_0x12f59f=this[_0x2295e1];this['_applySpri'+'te'](_0x4edc81,_0x12f59f);break;}}}['_forceReap'+'plyVisualS'+'tate'](){this['_updateVis'+'ualState'](!(-0x3b*0x77+0x81b*0x1+0x1352));}['_resetToDe'+'faultVisua'+'lState'](_0x585fa2){var _0x37f0e3;if((_0x37f0e3=this['_imageEnti'+'ty'])!=null&&_0x37f0e3['element'])switch(_0x585fa2){case Au:this['_cancelTwe'+'en'](),this['_applyTint'+'Immediatel'+'y'](this['_defaultTi'+'nt']);break;case Ng:this['_applySpri'+'te'](this['_defaultSp'+'riteAsset'],this['_defaultSp'+'riteFrame']);break;}}['_determine'+'VisualStat'+'e'](){if(this['active']){if(this['_isPressed'])return ft['PRESSED'];if(this['_isHoverin'+'g'])return ft['HOVER'];}else return ft['INACTIVE'];return ft['DEFAULT'];}['_applySpri'+'te'](_0x56b992,_0x11fa97){var _0xad77c1;const _0x2c8481=(_0xad77c1=this['_imageEnti'+'ty'])==null?void(-0x4*-0x9b6+-0x1b94+0xe*-0xce):_0xad77c1['element'];_0x2c8481&&(_0x11fa97=_0x11fa97||-0x2b*0x66+0x1421+-0x1*0x2ff,this['_isApplyin'+'gSprite']=!(0x855+-0x47*-0x1+-0x89c),_0x2c8481['spriteAsse'+'t']!==_0x56b992&&(_0x2c8481['spriteAsse'+'t']=_0x56b992),_0x2c8481['spriteFram'+'e']!==_0x11fa97&&(_0x2c8481['spriteFram'+'e']=_0x11fa97),this['_isApplyin'+'gSprite']=!(0x6*-0x529+0x1*-0x157f+0xa7e*0x5));}['_applyTint'](_0x35a9e9){this['_cancelTwe'+'en'](),this['fadeDurati'+'on']===-0x1055*0x1+-0xcb4*-0x2+0x1*-0x913?this['_applyTint'+'Immediatel'+'y'](_0x35a9e9):this['_applyTint'+'WithTween'](_0x35a9e9);}['_applyTint'+'Immediatel'+'y'](_0x52b7fb){var _0xfa85fc;const _0x5150fb=(_0xfa85fc=this['_imageEnti'+'ty'])==null?void(-0x1009+0x8fa+0x70f*0x1):_0xfa85fc['element'];if(!_0x52b7fb||!_0x5150fb||_0x5150fb['type']===eh)return;const _0x16b47a=kg(_0x52b7fb);this['_isApplyin'+'gTint']=!(-0x2*-0x52+-0x15*0x12d+0x1*0x180d),_0x16b47a['equals'](_0x5150fb['color'])||(_0x5150fb['color']=_0x16b47a),_0x5150fb['opacity']!==_0x52b7fb['a']&&(_0x5150fb['opacity']=_0x52b7fb['a']),this['_isApplyin'+'gTint']=!(0x1*0x3d6+0x11e*-0x1f+0x1ecd);}['_applyTint'+'WithTween'](_0x1974b8){var _0x3b2f33;const _0x229cc5=(_0x3b2f33=this['_imageEnti'+'ty'])==null?void(-0x18b9+0x5*0x2b+-0x3*-0x7f6):_0x3b2f33['element'];if(!_0x1974b8||!_0x229cc5||_0x229cc5['type']===eh)return;const _0x3a6fef=kg(_0x1974b8),_0x516982=_0x229cc5['color'],_0x5649ef=_0x229cc5['opacity'];_0x3a6fef['equals'](_0x516982)&&_0x1974b8['a']===_0x5649ef||(this['_tweenInfo']={'startTime':de(),'from':new ie(_0x516982['r'],_0x516982['g'],_0x516982['b'],_0x5649ef),'to':_0x1974b8['clone'](),'lerpColor':new ie()});}['_updateTin'+'tTween'](){const _0x16bdfe=de()-this['_tweenInfo']['startTime'];let _0x248395=this['fadeDurati'+'on']===-0x12e2*0x1+-0xac8+0x1daa?-0x12*-0x6e+0xcf*-0xb+-0x95*-0x2:_0x16bdfe/this['fadeDurati'+'on'];if(_0x248395=Y['clamp'](_0x248395,-0x1*-0x227b+0xa*0x350+0x1*-0x439b,-0x195b+0xe77+0xae5),Math['abs'](_0x248395-(0x2018+-0x1e*-0xcd+-0x55*0xa9))>0x17ae+-0x130a+-0x4a4+0.00001){const _0x4dd900=this['_tweenInfo']['lerpColor'];_0x4dd900['lerp'](this['_tweenInfo']['from'],this['_tweenInfo']['to'],_0x248395),this['_applyTint'+'Immediatel'+'y'](new ie(_0x4dd900['r'],_0x4dd900['g'],_0x4dd900['b'],_0x4dd900['a']));}else this['_applyTint'+'Immediatel'+'y'](this['_tweenInfo']['to']),this['_cancelTwe'+'en']();}['_cancelTwe'+'en'](){delete this['_tweenInfo'];}['onUpdate'](){this['_tweenInfo']&&this['_updateTin'+'tTween']();}['onEnable'](){this['_isHoverin'+'g']=!(0x808+-0x70+0x1d*-0x43),this['_hoveringC'+'ounter']=0x2393+0x17ce+0x1*-0x3b61,this['_isPressed']=!(0x4f*0x3+0x886+0x1*-0x972),this['_toggleHit'+'ElementLis'+'teners']('on'),this['_forceReap'+'plyVisualS'+'tate']();}['onDisable'](){this['_toggleHit'+'ElementLis'+'teners']('off'),this['_resetToDe'+'faultVisua'+'lState'](this['transition'+'Mode']);}['onRemove'](){this['_imageEnti'+'tyUnsubscr'+'ibe'](),this['_toggleLif'+'ecycleList'+'eners']('off',this['system']),this['onDisable']();}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x5d3c49,_0x3c9538){_0x5d3c49['imageEntit'+'y']&&(this['imageEntit'+'y']=_0x3c9538[_0x5d3c49['imageEntit'+'y']['getGuid']()]);}}h(It,'EVENT_MOUS'+'EDOWN','mousedown'),h(It,'EVENT_MOUS'+'EUP','mouseup'),h(It,'EVENT_MOUS'+'EENTER','mouseenter'),h(It,'EVENT_MOUS'+'ELEAVE','mouseleave'),h(It,'EVENT_CLIC'+'K','click'),h(It,'EVENT_TOUC'+'HSTART','touchstart'),h(It,'EVENT_TOUC'+'HEND','touchend'),h(It,'EVENT_TOUC'+'HCANCEL','touchcance'+'l'),h(It,'EVENT_TOUC'+'HLEAVE','touchleave'),h(It,'EVENT_SELE'+'CTSTART','selectstar'+'t'),h(It,'EVENT_SELE'+'CTEND','selectend'),h(It,'EVENT_SELE'+'CTENTER','selectente'+'r'),h(It,'EVENT_SELE'+'CTLEAVE','selectleav'+'e'),h(It,'EVENT_HOVE'+'RSTART','hoverstart'),h(It,'EVENT_HOVE'+'REND','hoverend'),h(It,'EVENT_PRES'+'SEDSTART','pressedsta'+'rt'),h(It,'EVENT_PRES'+'SEDEND','pressedend');function kg(_0x3fdbc9){return new ie(_0x3fdbc9['r'],_0x3fdbc9['g'],_0x3fdbc9['b']);}class WL{constructor(){this['enabled']=!(0x5e*-0x61+-0x46*-0x85+0xc*-0x10),this['active']=!(0x23*-0xa9+0x1*0x92f+-0x51*-0x2c),this['imageEntit'+'y']=null,this['hitPadding']=new re(),this['transition'+'Mode']=Au,this['hoverTint']=new ie(0x1a84+-0x97b+0x26f*-0x7+0.75,-0x17b2+-0x25f*-0x1+-0x67*-0x35+0.75,0xc1b+0x81*-0x39+-0x2*-0x84f+0.75),this['pressedTin'+'t']=new ie(-0x2196+0x13bc+-0x1*-0xdda+0.5,-0x1*0x2160+0x71b+0x1a45+0.5,-0x1*-0xeb7+0x2a7*-0xd+0x2e*0x6e+0.5),this['inactiveTi'+'nt']=new ie(0x1*-0x556+-0x1b73+-0x4d*-0x6d+0.25,0x3*0xb2+-0x10d*-0x3+-0x53d+0.25,-0xb*0x313+0x181*-0x4+0x27d5+0.25),this['fadeDurati'+'on']=0x1d20+-0x1345*0x2+0x96a,this['hoverSprit'+'eAsset']=null,this['hoverSprit'+'eFrame']=0x1*-0x103+-0xa1*-0x2a+-0x3a1*0x7,this['pressedSpr'+'iteAsset']=null,this['pressedSpr'+'iteFrame']=-0x7+0x61*0x59+-0x21b2,this['inactiveSp'+'riteAsset']=null,this['inactiveSp'+'riteFrame']=0x28*-0x96+-0x1ff5+0x3765;}}const Ug=['enabled','active',{'name':'hitPadding','type':'vec4'},'transition'+'Mode',{'name':'hoverTint','type':'rgba'},{'name':'pressedTin'+'t','type':'rgba'},{'name':'inactiveTi'+'nt','type':'rgba'},'fadeDurati'+'on','hoverSprit'+'eAsset','hoverSprit'+'eFrame','pressedSpr'+'iteAsset','pressedSpr'+'iteFrame','inactiveSp'+'riteAsset','inactiveSp'+'riteFrame'];class $L extends ct{constructor(_0x1bbbdd){super(_0x1bbbdd),this['id']='button',this['ComponentT'+'ype']=It,this['DataType']=WL,this['schema']=Ug,this['on']('beforeremo'+'ve',this['_onRemoveC'+'omponent'],this),this['app']['systems']['on']('update',this['onUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x5eb331,_0x57f98d,_0x3c80f5){_0x5eb331['imageEntit'+'y']=_0x57f98d['imageEntit'+'y'],super['initialize'+'ComponentD'+'ata'](_0x5eb331,_0x57f98d,Ug);}['onUpdate'](_0x15bd81){const _0x2d1136=this['store'];for(const _0x2cebfc in _0x2d1136){const _0x44b40d=_0x2d1136[_0x2cebfc]['entity'],_0x2da298=_0x44b40d['button'];_0x2da298['enabled']&&_0x44b40d['enabled']&&_0x2da298['onUpdate']();}}['_onRemoveC'+'omponent'](_0x25b012,_0x3c7161){_0x3c7161['onRemove']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}const Bg=new D(),zg=new le();class rn extends we{constructor(_0x2a4fc7,_0x96e36c){super(_0x2a4fc7,_0x96e36c),h(this,'_compoundP'+'arent',null),h(this,'_hasOffset',!(-0x12b1+0x130a+0x2c*-0x2)),(this['entity']['on']('insert',this['_onInsert'],this),this['on']('set_type',this['onSetType'],this),this['on']('set_convex'+'Hull',this['onSetModel'],this),this['on']('set_halfEx'+'tents',this['onSetHalfE'+'xtents'],this),this['on']('set_linear'+'Offset',this['onSetOffse'+'t'],this),this['on']('set_angula'+'rOffset',this['onSetOffse'+'t'],this),this['on']('set_radius',this['onSetRadiu'+'s'],this),this['on']('set_height',this['onSetHeigh'+'t'],this),this['on']('set_axis',this['onSetAxis'],this),this['on']('set_asset',this['onSetAsset'],this),this['on']('set_render'+'Asset',this['onSetRende'+'rAsset'],this),this['on']('set_model',this['onSetModel'],this),this['on']('set_render',this['onSetRende'+'r'],this));}get['data'](){const _0x38c556=this['system']['store'][this['entity']['getGuid']()];return _0x38c556?_0x38c556['data']:null;}set['enabled'](_0x13936f){this['_setValue']('enabled',_0x13936f);}get['enabled'](){return this['data']['enabled'];}set['type'](_0x2a62a0){this['_setValue']('type',_0x2a62a0);}get['type'](){return this['data']['type'];}set['halfExtent'+'s'](_0x31fc59){this['_setValue']('halfExtent'+'s',_0x31fc59);}get['halfExtent'+'s'](){return this['data']['halfExtent'+'s'];}set['linearOffs'+'et'](_0x380577){this['_setValue']('linearOffs'+'et',_0x380577);}get['linearOffs'+'et'](){return this['data']['linearOffs'+'et'];}set['angularOff'+'set'](_0x3c02ab){this['_setValue']('angularOff'+'set',_0x3c02ab);}get['angularOff'+'set'](){return this['data']['angularOff'+'set'];}set['radius'](_0x593e06){this['_setValue']('radius',_0x593e06);}get['radius'](){return this['data']['radius'];}set['axis'](_0x1fd4a0){this['_setValue']('axis',_0x1fd4a0);}get['axis'](){return this['data']['axis'];}set['height'](_0x45afd0){this['_setValue']('height',_0x45afd0);}get['height'](){return this['data']['height'];}set['asset'](_0x3ff23d){this['_setValue']('asset',_0x3ff23d);}get['asset'](){return this['data']['asset'];}set['renderAsse'+'t'](_0x22c56e){this['_setValue']('renderAsse'+'t',_0x22c56e);}get['renderAsse'+'t'](){return this['data']['renderAsse'+'t'];}set['convexHull'](_0x3f175a){this['_setValue']('convexHull',_0x3f175a);}get['convexHull'](){return this['data']['convexHull'];}set['shape'](_0x115c4c){this['_setValue']('shape',_0x115c4c);}get['shape'](){return this['data']['shape'];}set['model'](_0x360be1){this['_setValue']('model',_0x360be1);}get['model'](){return this['data']['model'];}set['render'](_0x31671d){this['_setValue']('render',_0x31671d);}get['render'](){return this['data']['render'];}set['checkVerte'+'xDuplicate'+'s'](_0x5e7abf){this['_setValue']('checkVerte'+'xDuplicate'+'s',_0x5e7abf);}get['checkVerte'+'xDuplicate'+'s'](){return this['data']['checkVerte'+'xDuplicate'+'s'];}['_setValue'](_0xfc2e61,_0x171961){const _0x43995a=this['data'],_0x124eec=_0x43995a[_0xfc2e61];_0x43995a[_0xfc2e61]=_0x171961,this['fire']('set',_0xfc2e61,_0x124eec,_0x171961);}['onSetType'](_0x3c553c,_0x44c139,_0x232047){_0x44c139!==_0x232047&&this['system']['changeType'](this,_0x44c139,_0x232047);}['onSetHalfE'+'xtents'](_0x42d082,_0x1a5ea1,_0x3bcaf5){const _0x41bf5e=this['data']['type'];this['data']['initialize'+'d']&&_0x41bf5e==='box'&&this['system']['recreatePh'+'ysicalShap'+'es'](this);}['onSetOffse'+'t'](_0x19803d,_0x24c9eb,_0x5f599e){this['_hasOffset']=!this['data']['linearOffs'+'et']['equals'](D['ZERO'])||!this['data']['angularOff'+'set']['equals'](le['IDENTITY']),this['data']['initialize'+'d']&&this['system']['recreatePh'+'ysicalShap'+'es'](this);}['onSetRadiu'+'s'](_0x124526,_0x401619,_0x49d961){const _0x3c3c68=this['data']['type'];this['data']['initialize'+'d']&&(_0x3c3c68==='sphere'||_0x3c3c68==='capsule'||_0x3c3c68==='cylinder'||_0x3c3c68==='cone')&&this['system']['recreatePh'+'ysicalShap'+'es'](this);}['onSetHeigh'+'t'](_0x1999e2,_0x5297dd,_0x12368d){const _0x43cf23=this['data']['type'];this['data']['initialize'+'d']&&(_0x43cf23==='capsule'||_0x43cf23==='cylinder'||_0x43cf23==='cone')&&this['system']['recreatePh'+'ysicalShap'+'es'](this);}['onSetAxis'](_0x481df2,_0x184823,_0x3b3946){const _0x5b3bff=this['data']['type'];this['data']['initialize'+'d']&&(_0x5b3bff==='capsule'||_0x5b3bff==='cylinder'||_0x5b3bff==='cone')&&this['system']['recreatePh'+'ysicalShap'+'es'](this);}['onSetAsset'](_0x332d01,_0x5bd656,_0x1a7ca3){const _0x1c96c2=this['system']['app']['assets'];if(_0x5bd656){const _0x5e54b6=_0x1c96c2['get'](_0x5bd656);_0x5e54b6&&_0x5e54b6['off']('remove',this['onAssetRem'+'oved'],this);}if(_0x1a7ca3){_0x1a7ca3 instanceof pe&&(this['data']['asset']=_0x1a7ca3['id']);const _0x51b944=_0x1c96c2['get'](this['data']['asset']);_0x51b944&&(_0x51b944['off']('remove',this['onAssetRem'+'oved'],this),_0x51b944['on']('remove',this['onAssetRem'+'oved'],this));}this['data']['initialize'+'d']&&this['data']['type']==='mesh'&&(_0x1a7ca3||(this['data']['model']=null),this['system']['recreatePh'+'ysicalShap'+'es'](this));}['onSetRende'+'rAsset'](_0x431f83,_0x39b43d,_0xf59c20){const _0x18e8e1=this['system']['app']['assets'];if(_0x39b43d){const _0x2de286=_0x18e8e1['get'](_0x39b43d);_0x2de286&&_0x2de286['off']('remove',this['onRenderAs'+'setRemoved'],this);}if(_0xf59c20){_0xf59c20 instanceof pe&&(this['data']['renderAsse'+'t']=_0xf59c20['id']);const _0x1a9801=_0x18e8e1['get'](this['data']['renderAsse'+'t']);_0x1a9801&&(_0x1a9801['off']('remove',this['onRenderAs'+'setRemoved'],this),_0x1a9801['on']('remove',this['onRenderAs'+'setRemoved'],this));}this['data']['initialize'+'d']&&this['data']['type']==='mesh'&&(_0xf59c20||(this['data']['render']=null),this['system']['recreatePh'+'ysicalShap'+'es'](this));}['onSetModel'](_0x5f154e,_0x21b2f4,_0x2cc061){this['data']['initialize'+'d']&&this['data']['type']==='mesh'&&this['system']['implementa'+'tions']['mesh']['doRecreate'+'PhysicalSh'+'ape'](this);}['onSetRende'+'r'](_0x41c5d0,_0x2f8df2,_0x59553d){this['onSetModel'](_0x41c5d0,_0x2f8df2,_0x59553d);}['onAssetRem'+'oved'](_0x2bc836){_0x2bc836['off']('remove',this['onAssetRem'+'oved'],this),this['data']['asset']===_0x2bc836['id']&&(this['asset']=null);}['onRenderAs'+'setRemoved'](_0x553322){_0x553322['off']('remove',this['onRenderAs'+'setRemoved'],this),this['data']['renderAsse'+'t']===_0x553322['id']&&(this['renderAsse'+'t']=null);}['getCompoun'+'dChildShap'+'eIndex'](_0x5b222a){const _0x70af00=this['data']['shape'],_0xca48fe=_0x70af00['getNumChil'+'dShapes']();for(let _0xb8c16d=-0x1*-0x409+-0x105b+0x13*0xa6;_0xb8c16d<_0xca48fe;_0xb8c16d++){const _0x5871f3=_0x70af00['getChildSh'+'ape'](_0xb8c16d);if(Ammo['getPointer'](_0x5871f3)===Ammo['getPointer'](_0x5b222a))return _0xb8c16d;}return null;}['_onInsert'](_0x347f56){if(!(typeof Ammo>'u')){if(this['_compoundP'+'arent'])this['system']['recreatePh'+'ysicalShap'+'es'](this);else{if(!this['entity']['rigidbody']){let _0x5e63d9=this['entity']['parent'];for(;_0x5e63d9;){if(_0x5e63d9['collision']&&_0x5e63d9['collision']['type']==='compound'){_0x5e63d9['collision']['shape']['getNumChil'+'dShapes']()===0x209*-0x4+-0x897+0x10bb*0x1?this['system']['recreatePh'+'ysicalShap'+'es'](_0x5e63d9['collision']):this['system']['recreatePh'+'ysicalShap'+'es'](this);break;}_0x5e63d9=_0x5e63d9['parent'];}}}}}['_updateCom'+'pound'](){const _0x226aba=this['entity'];if(_0x226aba['_dirtyWorl'+'d']){let _0x2c8a52=_0x226aba['_dirtyLoca'+'l'],_0x445cc2=_0x226aba;for(;_0x445cc2&&!_0x2c8a52&&!(_0x445cc2['collision']&&_0x445cc2['collision']===this['_compoundP'+'arent']);)_0x445cc2['_dirtyLoca'+'l']&&(_0x2c8a52=!(0x587*0x2+-0x1fd9+-0x1*-0x14cb)),_0x445cc2=_0x445cc2['parent'];if(_0x2c8a52){_0x226aba['forEach'](this['system']['implementa'+'tions']['compound']['_updateEac'+'hDescendan'+'tTransform'],_0x226aba);const _0x5c0e74=this['_compoundP'+'arent']['entity']['rigidbody'];_0x5c0e74&&_0x5c0e74['activate']();}}}['getShapePo'+'sition'](){const _0x1549f1=this['entity']['getPositio'+'n']();if(this['_hasOffset']){const _0x52c1ba=this['entity']['getRotatio'+'n'](),_0x518272=this['data']['linearOffs'+'et'];return zg['copy'](_0x52c1ba)['transformV'+'ector'](_0x518272,Bg),Bg['add'](_0x1549f1);}return _0x1549f1;}['getShapeRo'+'tation'](){const _0x3f3762=this['entity']['getRotatio'+'n']();return this['_hasOffset']?zg['copy'](_0x3f3762)['mul'](this['data']['angularOff'+'set']):_0x3f3762;}['onEnable'](){if(this['data']['type']==='mesh'&&(this['data']['asset']||this['data']['renderAsse'+'t'])&&this['data']['initialize'+'d']){const _0x105180=this['system']['app']['assets']['get'](this['data']['asset']||this['data']['renderAsse'+'t']);if(_0x105180&&(!_0x105180['resource']||!this['data']['shape'])){this['system']['recreatePh'+'ysicalShap'+'es'](this);return;}}if(this['entity']['rigidbody'])this['entity']['rigidbody']['enabled']&&this['entity']['rigidbody']['enableSimu'+'lation']();else{if(this['_compoundP'+'arent']&&this!==this['_compoundP'+'arent']){if(this['_compoundP'+'arent']['shape']['getNumChil'+'dShapes']()===0xb*0x61+0x1cd*0xa+-0x162d*0x1)this['system']['recreatePh'+'ysicalShap'+'es'](this['_compoundP'+'arent']);else{const _0x54d604=this['system']['_getNodeTr'+'ansform'](this['entity'],this['_compoundP'+'arent']['entity']);this['_compoundP'+'arent']['shape']['addChildSh'+'ape'](_0x54d604,this['data']['shape']),Ammo['destroy'](_0x54d604),this['_compoundP'+'arent']['entity']['rigidbody']&&this['_compoundP'+'arent']['entity']['rigidbody']['activate']();}}else this['entity']['trigger']&&this['entity']['trigger']['enable']();}}['onDisable'](){this['entity']['rigidbody']?this['entity']['rigidbody']['disableSim'+'ulation']():this['_compoundP'+'arent']&&this!==this['_compoundP'+'arent']?this['_compoundP'+'arent']['entity']['_destroyin'+'g']||(this['system']['_removeCom'+'poundChild'](this['_compoundP'+'arent'],this['data']['shape']),this['_compoundP'+'arent']['entity']['rigidbody']&&this['_compoundP'+'arent']['entity']['rigidbody']['activate']()):this['entity']['trigger']&&this['entity']['trigger']['disable']();}['onBeforeRe'+'move'](){this['asset']&&(this['asset']=null),this['renderAsse'+'t']&&(this['renderAsse'+'t']=null),this['entity']['off']('insert',this['_onInsert'],this),this['off']();}}h(rn,'EVENT_CONT'+'ACT','contact'),h(rn,'EVENT_COLL'+'ISIONSTART','collisions'+'tart'),h(rn,'EVENT_COLL'+'ISIONEND','collisione'+'nd'),h(rn,'EVENT_TRIG'+'GERENTER','triggerent'+'er'),h(rn,'EVENT_TRIG'+'GERLEAVE','triggerlea'+'ve');class XL{constructor(){this['enabled']=!(0x1d58*0x1+-0x1815*-0x1+-0x356d),this['type']='box',this['halfExtent'+'s']=new D(-0x12fa*-0x1+0x134f*-0x1+0x5*0x11+0.5,0xf1d+0x30f+-0x122c+0.5,0x3e*0x76+-0x1*-0x253a+-0x1*0x41ce+0.5),this['linearOffs'+'et']=new D(),this['angularOff'+'set']=new le(),this['radius']=0x1*-0x533+0xca*0xd+-0x25*0x23+0.5,this['axis']=0x2*0xa42+0xa41+0xb3*-0x2c,this['height']=0x958+0x8aa*-0x1+-0xac,this['convexHull']=!(0x1948*-0x1+0x347*-0x5+0x29ac),this['asset']=null,this['renderAsse'+'t']=null,this['checkVerte'+'xDuplicate'+'s']=!(-0xf43*-0x1+-0x80a+-0x739),this['shape']=null,this['model']=null,this['render']=null,this['initialize'+'d']=!(0xd1*-0x1c+-0x1fd5+0x36b2);}}const yo='static',ks='dynamic',Ha='kinematic',qL=-0x10c2+-0x15d7+0x269b,Po=0x4*0x2f7+0xd93+-0x196b,Pu=0x1*0xca1+-0x24e8+0x1848,Vg=-0x23e6+-0x9c1+0x1*0x2dab,Yv=0x7f9+-0x725+-0xcf,jL=0x49b+-0x786+0x2ec,Gg=0x24c1+-0xe0f+0x4*-0x5ac,YL=-0x7a*0x16+-0x1172+0x49*0x62,Hg=0x11c*0x19+0x1b67+-0x265*0x17,Wg=-0x74ab+-0x1f866+0x36d1*0x10,Mu=-0x1dff3+0x1eeef+0xf101;let Us,zr,Wa;class Kv{constructor(_0x24ccec,_0x25b5a4,_0x953c09){this['entity']=_0x25b5a4['entity'],this['component']=_0x25b5a4,this['app']=_0x24ccec,typeof Ammo<'u'&&!Us&&(Us=new Ammo['btVector3'](),zr=new Ammo['btQuaterni'+'on'](),Wa=new Ammo['btTransfor'+'m']()),this['initialize'](_0x953c09);}['initialize'](_0x36131e){const _0x1e3199=this['entity'],_0x238cf7=_0x36131e['shape'];if(_0x238cf7&&typeof Ammo<'u'){_0x1e3199['trigger']&&_0x1e3199['trigger']['destroy']();const _0x12b06b=0x71*0x1+-0x1da6+0x1d36,_0x5dd79c=this['component'];if(_0x5dd79c){const _0x4d1157=_0x5dd79c['getShapePo'+'sition'](),_0x4e1260=_0x5dd79c['getShapeRo'+'tation']();Us['setValue'](_0x4d1157['x'],_0x4d1157['y'],_0x4d1157['z']),zr['setValue'](_0x4e1260['x'],_0x4e1260['y'],_0x4e1260['z'],_0x4e1260['w']);}else{const _0x5449a5=_0x1e3199['getPositio'+'n'](),_0x5e0427=_0x1e3199['getRotatio'+'n']();Us['setValue'](_0x5449a5['x'],_0x5449a5['y'],_0x5449a5['z']),zr['setValue'](_0x5e0427['x'],_0x5e0427['y'],_0x5e0427['z'],_0x5e0427['w']);}Wa['setOrigin'](Us),Wa['setRotatio'+'n'](zr);const _0x3b27a7=this['app']['systems']['rigidbody']['createBody'](_0x12b06b,_0x238cf7,Wa);_0x3b27a7['setRestitu'+'tion'](0xc3*0x29+0xb*-0x119+0x2*-0x994),_0x3b27a7['setFrictio'+'n'](0x43d+-0x32*0x35+0x61d),_0x3b27a7['setDamping'](0xb96+0x1f61+-0x2af7,0x108e+0x176f+-0x161*0x1d),Us['setValue'](-0x16df+0xa*0x10c+0xc67,-0x8*0x29+0xa*0xa+0xe4,-0x3*-0x332+-0x139f*-0x1+0x1*-0x1d35),_0x3b27a7['setLinearF'+'actor'](Us),_0x3b27a7['setAngular'+'Factor'](Us),_0x3b27a7['setCollisi'+'onFlags'](_0x3b27a7['getCollisi'+'onFlags']()|Po),_0x3b27a7['entity']=_0x1e3199,this['body']=_0x3b27a7,this['component']['enabled']&&_0x1e3199['enabled']&&this['enable']();}}['destroy'](){this['body']&&(this['disable'](),this['app']['systems']['rigidbody']['destroyBod'+'y'](this['body']),this['body']=null);}['_getEntity'+'Transform'](_0xb0c502){const _0x588b5d=this['component'];if(_0x588b5d){const _0x16262d=_0x588b5d['getShapePo'+'sition'](),_0x1f4801=_0x588b5d['getShapeRo'+'tation']();Us['setValue'](_0x16262d['x'],_0x16262d['y'],_0x16262d['z']),zr['setValue'](_0x1f4801['x'],_0x1f4801['y'],_0x1f4801['z'],_0x1f4801['w']);}else{const _0x26f745=this['entity']['getPositio'+'n'](),_0x1b996f=this['entity']['getRotatio'+'n']();Us['setValue'](_0x26f745['x'],_0x26f745['y'],_0x26f745['z']),zr['setValue'](_0x1b996f['x'],_0x1b996f['y'],_0x1b996f['z'],_0x1b996f['w']);}_0xb0c502['setOrigin'](Us),_0xb0c502['setRotatio'+'n'](zr);}['updateTran'+'sform'](){this['_getEntity'+'Transform'](Wa);const _0x16dfd0=this['body'];_0x16dfd0['setWorldTr'+'ansform'](Wa),_0x16dfd0['activate']();}['enable'](){const _0xc5a09d=this['body'];if(!_0xc5a09d)return;const _0x4a5ea5=this['app']['systems']['rigidbody'];_0x4a5ea5['_triggers']['indexOf'](this)<-0x1b*0xa1+-0xab5*0x1+0x1*0x1bb0&&(_0x4a5ea5['addBody'](_0xc5a09d,Hg,Mu^Hg),_0x4a5ea5['_triggers']['push'](this)),_0xc5a09d['forceActiv'+'ationState'](Pu),this['updateTran'+'sform']();}['disable'](){const _0x24201d=this['body'];if(!_0x24201d)return;const _0x4dbe8e=this['app']['systems']['rigidbody'],_0x1b5bd4=_0x4dbe8e['_triggers']['indexOf'](this);_0x1b5bd4>-(-0x1e67+-0x74*-0x49+-0x2ac)&&(_0x4dbe8e['removeBody'](_0x24201d),_0x4dbe8e['_triggers']['splice'](_0x1b5bd4,-0xf+0x13*0xcb+-0xf01)),_0x24201d['forceActiv'+'ationState'](Yv);}}const wc=new te(),KL=new D(),ZL=new D(),Vr=new le(),$g=new Ie(),QL=['enabled','type','halfExtent'+'s','linearOffs'+'et','angularOff'+'set','radius','axis','height','convexHull','asset','renderAsse'+'t','shape','model','render','checkVerte'+'xDuplicate'+'s'];class Ca{constructor(_0x4f1e17){this['system']=_0x4f1e17;}['beforeInit'+'ialize'](_0x7486d0,_0x40408f){_0x40408f['shape']=null,_0x40408f['model']=new sr(),_0x40408f['model']['graph']=new Ie();}['afterIniti'+'alize'](_0x281099,_0x2f7ddf){this['recreatePh'+'ysicalShap'+'es'](_0x281099),_0x281099['data']['initialize'+'d']=!(0x2673*0x1+-0x5*0xc6+-0x2295);}['reset'](_0x422d3f,_0x55e82d){this['beforeInit'+'ialize'](_0x422d3f,_0x55e82d),this['afterIniti'+'alize'](_0x422d3f,_0x55e82d);}['recreatePh'+'ysicalShap'+'es'](_0x3fc169){const _0x328555=_0x3fc169['entity'],_0x1bc9b0=_0x3fc169['data'];if(typeof Ammo<'u'){_0x328555['trigger']&&(_0x328555['trigger']['destroy'](),delete _0x328555['trigger']),_0x1bc9b0['shape']&&(_0x3fc169['_compoundP'+'arent']&&(_0x3fc169!==_0x3fc169['_compoundP'+'arent']&&this['system']['_removeCom'+'poundChild'](_0x3fc169['_compoundP'+'arent'],_0x1bc9b0['shape']),_0x3fc169['_compoundP'+'arent']['entity']['rigidbody']&&_0x3fc169['_compoundP'+'arent']['entity']['rigidbody']['activate']()),this['destroySha'+'pe'](_0x1bc9b0)),_0x1bc9b0['shape']=this['createPhys'+'icalShape'](_0x3fc169['entity'],_0x1bc9b0);const _0x3f999a=!_0x3fc169['_compoundP'+'arent'];if(_0x1bc9b0['type']==='compound'&&(!_0x3fc169['_compoundP'+'arent']||_0x3fc169===_0x3fc169['_compoundP'+'arent']))_0x3fc169['_compoundP'+'arent']=_0x3fc169,_0x328555['forEach'](this['_addEachDe'+'scendant'],_0x3fc169);else{if(_0x1bc9b0['type']!=='compound'&&!_0x3fc169['rigidbody']){_0x3fc169['_compoundP'+'arent']=null;let _0x2206bf=_0x328555['parent'];for(;_0x2206bf;){if(_0x2206bf['collision']&&_0x2206bf['collision']['type']==='compound'){_0x3fc169['_compoundP'+'arent']=_0x2206bf['collision'];break;}_0x2206bf=_0x2206bf['parent'];}}}_0x3fc169['_compoundP'+'arent']&&_0x3fc169!==_0x3fc169['_compoundP'+'arent']&&(_0x3f999a&&_0x3fc169['_compoundP'+'arent']['shape']['getNumChil'+'dShapes']()===-0x89*0x12+-0x2ea+0x49*0x2c?this['system']['recreatePh'+'ysicalShap'+'es'](_0x3fc169['_compoundP'+'arent']):(this['system']['updateComp'+'oundChildT'+'ransform'](_0x328555,!(0x2579+0x1dde*0x1+0x1*-0x4357)),_0x3fc169['_compoundP'+'arent']['entity']['rigidbody']&&_0x3fc169['_compoundP'+'arent']['entity']['rigidbody']['activate']())),_0x328555['rigidbody']?(_0x328555['rigidbody']['disableSim'+'ulation'](),_0x328555['rigidbody']['createBody'](),_0x328555['enabled']&&_0x328555['rigidbody']['enabled']&&_0x328555['rigidbody']['enableSimu'+'lation']()):_0x3fc169['_compoundP'+'arent']||(_0x328555['trigger']?_0x328555['trigger']['initialize'](_0x1bc9b0):_0x328555['trigger']=new Kv(this['system']['app'],_0x3fc169,_0x1bc9b0));}}['createPhys'+'icalShape'](_0xb94079,_0x179989){}['updateTran'+'sform'](_0x3515ae,_0x3dafd1,_0x2aec7e,_0x52c300){_0x3515ae['entity']['trigger']&&_0x3515ae['entity']['trigger']['updateTran'+'sform']();}['destroySha'+'pe'](_0xb25fa1){_0xb25fa1['shape']&&(Ammo['destroy'](_0xb25fa1['shape']),_0xb25fa1['shape']=null);}['beforeRemo'+'ve'](_0x24e901,_0x491f97){_0x491f97['data']['shape']&&(_0x491f97['_compoundP'+'arent']&&!_0x491f97['_compoundP'+'arent']['entity']['_destroyin'+'g']&&(this['system']['_removeCom'+'poundChild'](_0x491f97['_compoundP'+'arent'],_0x491f97['data']['shape']),_0x491f97['_compoundP'+'arent']['entity']['rigidbody']&&_0x491f97['_compoundP'+'arent']['entity']['rigidbody']['activate']()),_0x491f97['_compoundP'+'arent']=null,this['destroySha'+'pe'](_0x491f97['data']));}['remove'](_0x269754,_0x5d9eb8){_0x269754['rigidbody']&&_0x269754['rigidbody']['body']&&_0x269754['rigidbody']['disableSim'+'ulation'](),_0x269754['trigger']&&(_0x269754['trigger']['destroy'](),delete _0x269754['trigger']);}['clone'](_0x14d2ae,_0x1e9930){const _0x3dfba2=this['system']['store'][_0x14d2ae['getGuid']()],_0x2d8553={'enabled':_0x3dfba2['data']['enabled'],'type':_0x3dfba2['data']['type'],'halfExtents':[_0x3dfba2['data']['halfExtent'+'s']['x'],_0x3dfba2['data']['halfExtent'+'s']['y'],_0x3dfba2['data']['halfExtent'+'s']['z']],'linearOffset':[_0x3dfba2['data']['linearOffs'+'et']['x'],_0x3dfba2['data']['linearOffs'+'et']['y'],_0x3dfba2['data']['linearOffs'+'et']['z']],'angularOffset':[_0x3dfba2['data']['angularOff'+'set']['x'],_0x3dfba2['data']['angularOff'+'set']['y'],_0x3dfba2['data']['angularOff'+'set']['z'],_0x3dfba2['data']['angularOff'+'set']['w']],'radius':_0x3dfba2['data']['radius'],'axis':_0x3dfba2['data']['axis'],'height':_0x3dfba2['data']['height'],'convexHull':_0x3dfba2['data']['convexHull'],'asset':_0x3dfba2['data']['asset'],'renderAsset':_0x3dfba2['data']['renderAsse'+'t'],'model':_0x3dfba2['data']['model'],'render':_0x3dfba2['data']['render'],'checkVertexDuplicates':_0x3dfba2['data']['checkVerte'+'xDuplicate'+'s']};return this['system']['addCompone'+'nt'](_0x1e9930,_0x2d8553);}}class JL extends Ca{['createPhys'+'icalShape'](_0x30c2e1,_0x1e862b){if(typeof Ammo<'u'){const _0x2edce3=_0x1e862b['halfExtent'+'s'],_0x39ca82=new Ammo['btVector3'](_0x2edce3?_0x2edce3['x']:-0x2002+0x758+-0x23e*-0xb+0.5,_0x2edce3?_0x2edce3['y']:-0x17*0x112+-0x2008+-0x12e2*-0x3+0.5,_0x2edce3?_0x2edce3['z']:0x158f+0x1*0x185d+-0x16f6*0x2+0.5),_0x2e15c5=new Ammo['btBoxShape'](_0x39ca82);return Ammo['destroy'](_0x39ca82),_0x2e15c5;}}}class eR extends Ca{['createPhys'+'icalShape'](_0x19c2e7,_0x4c5c4a){if(typeof Ammo<'u')return new Ammo['btSphereSh'+'ape'](_0x4c5c4a['radius']);}}class tR extends Ca{['createPhys'+'icalShape'](_0x3b9915,_0x2aea46){const _0x5b6b5e=_0x2aea46['axis']??0x1*-0x14d1+0x1*-0xe43+0x2315,_0x5432a5=_0x2aea46['radius']??-0x2*-0x907+0x123*-0x1a+0xb80+0.5,_0x2cabf7=Math['max']((_0x2aea46['height']??0xd41*-0x2+-0x16*0xad+0x2962)-(-0x5*-0x72a+0x332+-0x2702)*_0x5432a5,0x2536+0x1*-0x89b+0x1c9b*-0x1);let _0x20f977=null;if(typeof Ammo<'u')switch(_0x5b6b5e){case 0x25b*-0xa+-0x142*0x1b+-0x24*-0x199:_0x20f977=new Ammo['btCapsuleS'+'hapeX'](_0x5432a5,_0x2cabf7);break;case 0xd*0xc+0x1ba5+0x2*-0xe20:_0x20f977=new Ammo['btCapsuleS'+'hape'](_0x5432a5,_0x2cabf7);break;case-0x43a+0x89a+-0x1*0x45e:_0x20f977=new Ammo['btCapsuleS'+'hapeZ'](_0x5432a5,_0x2cabf7);break;}return _0x20f977;}}class sR extends Ca{['createPhys'+'icalShape'](_0x549ed3,_0x537b65){const _0x5b0252=_0x537b65['axis']??0x1cc+0x1*0x1b61+-0xe96*0x2,_0x7eddb8=_0x537b65['radius']??-0xe1a*0x1+-0x1fae+0x2dc8+0.5,_0x321015=_0x537b65['height']??-0x9*-0x2ca+0x1fa8+0x57*-0xa7;let _0x3aea13=null,_0x290bd7=null;if(typeof Ammo<'u')switch(_0x5b0252){case 0x1a98+-0x13*-0xa1+-0x268b:_0x3aea13=new Ammo['btVector3'](_0x321015*(0xf7+0x1d8*-0x4+-0x223*-0x3+0.5),_0x7eddb8,_0x7eddb8),_0x290bd7=new Ammo['btCylinder'+'ShapeX'](_0x3aea13);break;case 0x233a+0x11df+-0x3518:_0x3aea13=new Ammo['btVector3'](_0x7eddb8,_0x321015*(0x24bf+-0x2e5+0x7*-0x4d6+0.5),_0x7eddb8),_0x290bd7=new Ammo['btCylinder'+'Shape'](_0x3aea13);break;case 0x463*0x1+0x563*-0x1+0x102:_0x3aea13=new Ammo['btVector3'](_0x7eddb8,_0x7eddb8,_0x321015*(0x16b3+-0x8*0x315+0x1f5+0.5)),_0x290bd7=new Ammo['btCylinder'+'ShapeZ'](_0x3aea13);break;}return _0x3aea13&&Ammo['destroy'](_0x3aea13),_0x290bd7;}}class iR extends Ca{['createPhys'+'icalShape'](_0x7ce95f,_0x52d107){const _0x244c3e=_0x52d107['axis']??0x129*0xc+0x525+-0x1310,_0xb22db7=_0x52d107['radius']??0x472*-0x2+-0x1a5b+0x509*0x7+0.5,_0x13a4ea=_0x52d107['height']??0x1c76+-0x1d5c+0xb*0x15;let _0x5c5275=null;if(typeof Ammo<'u')switch(_0x244c3e){case-0x5*-0x78b+0x8bd+-0x4*0xb9d:_0x5c5275=new Ammo['btConeShap'+'eX'](_0xb22db7,_0x13a4ea);break;case 0x2674+-0x1f8e+-0x6e5:_0x5c5275=new Ammo['btConeShap'+'e'](_0xb22db7,_0x13a4ea);break;case-0x1923+0xd69+0x5de*0x2:_0x5c5275=new Ammo['btConeShap'+'eZ'](_0xb22db7,_0x13a4ea);break;}return _0x5c5275;}}class rR extends Ca{['beforeInit'+'ialize'](_0x19f9a9,_0x3fafe2){}['createAmmo'+'Hull'](_0x5dfd8d,_0x27871f,_0x1100e5,_0x43f355){const _0x40fd71=new Ammo['btConvexHu'+'llShape'](),_0x49820e=new Ammo['btVector3'](),_0x5475c0=[];_0x5dfd8d['getPositio'+'ns'](_0x5475c0);for(let _0x5afe2a=-0x2*0x10a5+0x1f*0xa1+0xdcb;_0x5afe2a<_0x5475c0['length'];_0x5afe2a+=0x381*0x2+0xbbd+-0x12bc)_0x49820e['setValue'](_0x5475c0[_0x5afe2a]*_0x43f355['x'],_0x5475c0[_0x5afe2a+(0x1c61+0x1c6c+-0x38cc)]*_0x43f355['y'],_0x5475c0[_0x5afe2a+(0x7*0x4d6+-0x157a+0x62f*-0x2)]*_0x43f355['z']),_0x40fd71['addPoint'](_0x49820e,!(-0x8e4+-0x1202+0x1ae7));Ammo['destroy'](_0x49820e),_0x40fd71['recalcLoca'+'lAabb'](),_0x40fd71['setMargin'](-0x1*0x23a7+-0x108+0x1*0x24af+0.01);const _0x47f3c3=this['system']['_getNodeTr'+'ansform'](_0x27871f);_0x1100e5['addChildSh'+'ape'](_0x47f3c3,_0x40fd71),Ammo['destroy'](_0x47f3c3);}['createAmmo'+'Mesh'](_0x5f31e9,_0x12826e,_0x2811bd,_0x153cc1,_0x33f507=!(-0x14*0xcd+0x1466+-0x462)){const _0x427232=this['system'];let _0x44537c;if(_0x427232['_triMeshCa'+'che'][_0x5f31e9['id']])_0x44537c=_0x427232['_triMeshCa'+'che'][_0x5f31e9['id']];else{const _0x2aed44=_0x5f31e9['vertexBuff'+'er'],_0x3ffec3=_0x2aed44['getFormat']();let _0x449c3f,_0x3f3374;for(let _0x214a77=0x12b7+-0x166f+-0x1dc*-0x2;_0x214a77<_0x3ffec3['elements']['length'];_0x214a77++){const _0x4a967c=_0x3ffec3['elements'][_0x214a77];if(_0x4a967c['name']===Me){_0x3f3374=new Float32Array(_0x2aed44['lock'](),_0x4a967c['offset']),_0x449c3f=_0x4a967c['stride']/(-0x4*0x215+0x116*-0x1f+0x2a02);break;}}const _0x325c46=[];_0x5f31e9['getIndices'](_0x325c46);const _0x14960c=_0x5f31e9['primitive'][0x1174*-0x1+0x14*0x4b+-0xd4*-0xe]['count']/(0x1*-0x8a1+0xe1*0x12+0x72e*-0x1),_0x1c6dbf=new Ammo['btVector3']();let _0x5022d5,_0x4b5183,_0x160672;const _0x4fdfc5=_0x5f31e9['primitive'][-0x1eeb+-0x65c+0x2547]['base'];_0x44537c=new Ammo['btTriangle'+'Mesh'](),_0x427232['_triMeshCa'+'che'][_0x5f31e9['id']]=_0x44537c;const _0xfdd6c0=new Map();w['assert'](typeof _0x44537c['getIndexed'+'MeshArray']=='function','Ammo.js\x20ve'+'rsion\x20is\x20t'+'oo\x20old,\x20pl'+'ease\x20updat'+'e\x20to\x20a\x20new'+'er\x20Ammo.');const _0x37d320=_0x44537c['getIndexed'+'MeshArray']();_0x37d320['at'](-0x1*0x1ea1+0x2*-0x76d+0x2d7b)['m_numTrian'+'gles']=_0x14960c;const _0x42e914=_0x153cc1?_0x153cc1['x']:0x1a30+0x33c*0x9+-0x374b,_0x304c3e=_0x153cc1?_0x153cc1['y']:-0x1cab+0x7b+0x1c31,_0x570655=_0x153cc1?_0x153cc1['z']:0xeea+-0x1*0x67+-0xe82,_0x54c9f9=_0x484e86=>{const _0x3321de=_0x3f3374[_0x484e86*_0x449c3f]*_0x42e914,_0x56ce93=_0x3f3374[_0x484e86*_0x449c3f+(-0x15f5+0x1*0x892+0xd64)]*_0x304c3e,_0x49dc16=_0x3f3374[_0x484e86*_0x449c3f+(-0x1ae4+-0x13da+0x2ec0)]*_0x570655;let _0x406345;if(_0x33f507){const _0x3369d9=_0x3321de+':'+_0x56ce93+':'+_0x49dc16;if(_0x406345=_0xfdd6c0['get'](_0x3369d9),_0x406345!==void(-0x1*-0x2621+-0xf*0xd6+-0x1997))return _0x406345;_0x1c6dbf['setValue'](_0x3321de,_0x56ce93,_0x49dc16),_0x406345=_0x44537c['findOrAddV'+'ertex'](_0x1c6dbf,!(0x1ac1*0x1+0x19bb+-0xa7f*0x5)),_0xfdd6c0['set'](_0x3369d9,_0x406345);}else _0x1c6dbf['setValue'](_0x3321de,_0x56ce93,_0x49dc16),_0x406345=_0x44537c['findOrAddV'+'ertex'](_0x1c6dbf,!(-0x54c*-0x5+0xc4+-0x1b3f));return _0x406345;};for(let _0x221eed=-0x20c*0xc+0x5*0x1b1+0x101b;_0x221eed<_0x14960c;_0x221eed++)_0x5022d5=_0x54c9f9(_0x325c46[_0x4fdfc5+_0x221eed*(0x1*-0x25ed+0x78b*-0x1+-0x1*-0x2d7b)]),_0x4b5183=_0x54c9f9(_0x325c46[_0x4fdfc5+_0x221eed*(-0x25d8+-0x1473+0x3a4e)+(-0x1d*0x43+-0x1b08+0x1150*0x2)]),_0x160672=_0x54c9f9(_0x325c46[_0x4fdfc5+_0x221eed*(0x1*0x1c41+0x2*0xde2+-0x3802)+(-0x1*-0x1b1a+0x3a*-0x32+-0xfc4)]),_0x44537c['addIndex'](_0x5022d5),_0x44537c['addIndex'](_0x4b5183),_0x44537c['addIndex'](_0x160672);Ammo['destroy'](_0x1c6dbf);}const _0x1d3a75=new Ammo['btBvhTrian'+'gleMeshSha'+'pe'](_0x44537c,!(0x88*0xc+-0x119*-0x5+-0x1*0xbdd));if(!_0x153cc1){const _0x1b65ad=_0x427232['_getNodeSc'+'aling'](_0x12826e);_0x1d3a75['setLocalSc'+'aling'](_0x1b65ad),Ammo['destroy'](_0x1b65ad);}const _0xc608a7=_0x427232['_getNodeTr'+'ansform'](_0x12826e);_0x2811bd['addChildSh'+'ape'](_0xc608a7,_0x1d3a75),Ammo['destroy'](_0xc608a7);}['createPhys'+'icalShape'](_0x5d81ad,_0x357ec6){if(!(typeof Ammo>'u')&&(_0x357ec6['model']||_0x357ec6['render'])){const _0x2a3821=new Ammo['btCompound'+'Shape'](),_0x553bc7=_0x5d81ad['getWorldTr'+'ansform']()['getScale']();if(_0x357ec6['render']){const _0x1a133f=_0x357ec6['render']['meshes'];for(let _0x54e299=0xc94+0x1f3*-0x5+0x19*-0x1d;_0x54e299<_0x1a133f['length'];_0x54e299++)_0x357ec6['convexHull']?this['createAmmo'+'Hull'](_0x1a133f[_0x54e299],$g,_0x2a3821,_0x553bc7):this['createAmmo'+'Mesh'](_0x1a133f[_0x54e299],$g,_0x2a3821,_0x553bc7,_0x357ec6['checkVerte'+'xDuplicate'+'s']);}else{if(_0x357ec6['model']){const _0x6763a3=_0x357ec6['model']['meshInstan'+'ces'];for(let _0x1331b9=0x5e2*0x5+0x1*-0x170c+-0x65e;_0x1331b9<_0x6763a3['length'];_0x1331b9++)this['createAmmo'+'Mesh'](_0x6763a3[_0x1331b9]['mesh'],_0x6763a3[_0x1331b9]['node'],_0x2a3821,null,_0x357ec6['checkVerte'+'xDuplicate'+'s']);const _0x4f1f30=new Ammo['btVector3'](_0x553bc7['x'],_0x553bc7['y'],_0x553bc7['z']);_0x2a3821['setLocalSc'+'aling'](_0x4f1f30),Ammo['destroy'](_0x4f1f30);}}return _0x2a3821;}}['recreatePh'+'ysicalShap'+'es'](_0x446121){const _0x44d75b=_0x446121['data'];if((_0x44d75b['renderAsse'+'t']||_0x44d75b['asset'])&&_0x446121['enabled']&&_0x446121['entity']['enabled']){this['loadAsset'](_0x446121,_0x44d75b['renderAsse'+'t']||_0x44d75b['asset'],_0x44d75b['renderAsse'+'t']?'render':'model');return;}this['doRecreate'+'PhysicalSh'+'ape'](_0x446121);}['loadAsset'](_0x4e0e40,_0x186c63,_0x4aebdc){const _0x29ea73=_0x4e0e40['data'],_0xca682f=this['system']['app']['assets'],_0x3b4e24=_0x29ea73[_0x4aebdc],_0x1c6fd3=_0x193231=>{_0x29ea73[_0x4aebdc]===_0x3b4e24&&(_0x29ea73[_0x4aebdc]=_0x193231['resource'],this['doRecreate'+'PhysicalSh'+'ape'](_0x4e0e40));},_0x5000db=_0x364b40=>{_0x364b40['ready'](_0x497862=>{if(_0x497862['data']['containerA'+'sset']){const _0x18a0ec=_0xca682f['get'](_0x497862['data']['containerA'+'sset']);_0x18a0ec['loaded']?_0x1c6fd3(_0x497862):(_0x18a0ec['ready'](()=>{_0x1c6fd3(_0x497862);}),_0xca682f['load'](_0x18a0ec));}else _0x1c6fd3(_0x497862);}),_0xca682f['load'](_0x364b40);},_0x34b7bd=_0xca682f['get'](_0x186c63);_0x34b7bd?_0x5000db(_0x34b7bd):_0xca682f['once']('add:'+_0x186c63,_0x5000db);}['doRecreate'+'PhysicalSh'+'ape'](_0x1f46d0){const _0xf738bd=_0x1f46d0['entity'],_0x35313b=_0x1f46d0['data'];_0x35313b['model']||_0x35313b['render']?(this['destroySha'+'pe'](_0x35313b),_0x35313b['shape']=this['createPhys'+'icalShape'](_0xf738bd,_0x35313b),_0xf738bd['rigidbody']?(_0xf738bd['rigidbody']['disableSim'+'ulation'](),_0xf738bd['rigidbody']['createBody'](),_0xf738bd['enabled']&&_0xf738bd['rigidbody']['enabled']&&_0xf738bd['rigidbody']['enableSimu'+'lation']()):_0xf738bd['trigger']?_0xf738bd['trigger']['initialize'](_0x35313b):_0xf738bd['trigger']=new Kv(this['system']['app'],_0x1f46d0,_0x35313b)):(this['beforeRemo'+'ve'](_0xf738bd,_0x1f46d0),this['remove'](_0xf738bd,_0x35313b));}['updateTran'+'sform'](_0x5c5a6f,_0x5c0050,_0x454d77,_0x2980aa){if(_0x5c5a6f['shape']){const _0x312206=_0x5c5a6f['entity']['getWorldTr'+'ansform']()['getScale'](),_0x18f5cd=_0x5c5a6f['shape']['getLocalSc'+'aling']();(_0x312206['x']!==_0x18f5cd['x']()||_0x312206['y']!==_0x18f5cd['y']()||_0x312206['z']!==_0x18f5cd['z']())&&this['doRecreate'+'PhysicalSh'+'ape'](_0x5c5a6f);}super['updateTran'+'sform'](_0x5c5a6f,_0x5c0050,_0x454d77,_0x2980aa);}['destroySha'+'pe'](_0x15c2c1){if(!_0x15c2c1['shape'])return;const _0x22b116=_0x15c2c1['shape']['getNumChil'+'dShapes']();for(let _0x566ae9=-0x72c+-0x759+0xe85;_0x566ae9<_0x22b116;_0x566ae9++){const _0x5f3fc3=_0x15c2c1['shape']['getChildSh'+'ape'](_0x566ae9);Ammo['destroy'](_0x5f3fc3);}Ammo['destroy'](_0x15c2c1['shape']),_0x15c2c1['shape']=null;}}class aR extends Ca{['createPhys'+'icalShape'](_0x59d117,_0x33432a){if(typeof Ammo<'u')return new Ammo['btCompound'+'Shape']();}['_addEachDe'+'scendant'](_0x161231){!_0x161231['collision']||_0x161231['rigidbody']||(_0x161231['collision']['_compoundP'+'arent']=this,_0x161231!==this['entity']&&_0x161231['collision']['system']['recreatePh'+'ysicalShap'+'es'](_0x161231['collision']));}['_updateEac'+'hDescendan'+'t'](_0x4f2c1d){_0x4f2c1d['collision']&&_0x4f2c1d['collision']['_compoundP'+'arent']===this&&(_0x4f2c1d['collision']['_compoundP'+'arent']=null,_0x4f2c1d!==this['entity']&&!_0x4f2c1d['rigidbody']&&_0x4f2c1d['collision']['system']['recreatePh'+'ysicalShap'+'es'](_0x4f2c1d['collision']));}['_updateEac'+'hDescendan'+'tTransform'](_0x13bd95){!_0x13bd95['collision']||_0x13bd95['collision']['_compoundP'+'arent']!==this['collision']['_compoundP'+'arent']||this['collision']['system']['updateComp'+'oundChildT'+'ransform'](_0x13bd95,!(0x1fa6+0x14d6+-0xa7f*0x5));}}class nR extends ct{constructor(_0x5015c3){super(_0x5015c3),this['id']='collision',this['ComponentT'+'ype']=rn,this['DataType']=XL,this['schema']=QL,this['implementa'+'tions']={},this['_triMeshCa'+'che']={},this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this),this['on']('remove',this['onRemove'],this);}['initialize'+'ComponentD'+'ata'](_0x33ff23,_0x214734,_0x5ede5f){_0x5ede5f=['type','halfExtent'+'s','radius','axis','height','convexHull','shape','model','asset','render','renderAsse'+'t','enabled','linearOffs'+'et','angularOff'+'set','checkVerte'+'xDuplicate'+'s'];const _0x2ab830={};for(let _0x1e13d7=0x2a2+-0x892*0x1+0x5f0,_0x58d000=_0x5ede5f['length'];_0x1e13d7<_0x58d000;_0x1e13d7++){const _0x3b9a8f=_0x5ede5f[_0x1e13d7];_0x2ab830[_0x3b9a8f]=_0x214734[_0x3b9a8f];}let _0xf8e0c4;if(_0x214734['hasOwnProp'+'erty']('asset')?(_0xf8e0c4=_0x5ede5f['indexOf']('model'),_0xf8e0c4!==-(0x2573+0x7*0x4+-0x258e)&&_0x5ede5f['splice'](_0xf8e0c4,0x3b7+0x2e7+0x1*-0x69d),_0xf8e0c4=_0x5ede5f['indexOf']('render'),_0xf8e0c4!==-(0x3*-0x304+0x16e5+-0x376*0x4)&&_0x5ede5f['splice'](_0xf8e0c4,0x1b1e+-0x61a+-0x1503)):_0x214734['hasOwnProp'+'erty']('model')&&(_0xf8e0c4=_0x5ede5f['indexOf']('asset'),_0xf8e0c4!==-(-0xba*-0x1+0x5*0x4+0x5*-0x29)&&_0x5ede5f['splice'](_0xf8e0c4,-0x1eca+0x158b+0x940)),_0x2ab830['type']||(_0x2ab830['type']=_0x33ff23['data']['type']),_0x33ff23['data']['type']=_0x2ab830['type'],Array['isArray'](_0x2ab830['halfExtent'+'s'])&&(_0x2ab830['halfExtent'+'s']=new D(_0x2ab830['halfExtent'+'s'])),Array['isArray'](_0x2ab830['linearOffs'+'et'])&&(_0x2ab830['linearOffs'+'et']=new D(_0x2ab830['linearOffs'+'et'])),Array['isArray'](_0x2ab830['angularOff'+'set'])){const _0x117ad7=_0x2ab830['angularOff'+'set'];_0x117ad7['length']===-0x9e1+0x256+0x2*0x3c7?_0x2ab830['angularOff'+'set']=new le()['setFromEul'+'erAngles'](_0x117ad7[0x547*-0x6+0x1759+0x851],_0x117ad7[0x1b1d*0x1+-0x8ed*0x3+0x1*-0x55],_0x117ad7[0x1*-0x23f3+-0xf2+0x24e7]):_0x2ab830['angularOff'+'set']=new le(_0x2ab830['angularOff'+'set']);}const _0x475029=this['_createImp'+'lementatio'+'n'](_0x2ab830['type']);_0x475029['beforeInit'+'ialize'](_0x33ff23,_0x2ab830),super['initialize'+'ComponentD'+'ata'](_0x33ff23,_0x2ab830,_0x5ede5f),_0x475029['afterIniti'+'alize'](_0x33ff23,_0x2ab830);}['_createImp'+'lementatio'+'n'](_0x3b2938){if(this['implementa'+'tions'][_0x3b2938]===void(0x1c*0xe5+-0x1f73+0x667)){let _0x4c6ba8;switch(_0x3b2938){case'box':_0x4c6ba8=new JL(this);break;case'sphere':_0x4c6ba8=new eR(this);break;case'capsule':_0x4c6ba8=new tR(this);break;case'cylinder':_0x4c6ba8=new sR(this);break;case'cone':_0x4c6ba8=new iR(this);break;case'mesh':_0x4c6ba8=new rR(this);break;case'compound':_0x4c6ba8=new aR(this);break;default:w['error']('_createImp'+'lementatio'+'n:\x20Invalid'+'\x20collision'+'\x20system\x20ty'+'pe:\x20'+_0x3b2938);}this['implementa'+'tions'][_0x3b2938]=_0x4c6ba8;}return this['implementa'+'tions'][_0x3b2938];}['_getImplem'+'entation'](_0x2badb2){return this['implementa'+'tions'][_0x2badb2['collision']['data']['type']];}['cloneCompo'+'nent'](_0x2154b2,_0x128a94){return this['_getImplem'+'entation'](_0x2154b2)['clone'](_0x2154b2,_0x128a94);}['onBeforeRe'+'move'](_0x6bfc9e,_0x3e2aff){this['implementa'+'tions'][_0x3e2aff['data']['type']]['beforeRemo'+'ve'](_0x6bfc9e,_0x3e2aff),_0x3e2aff['onBeforeRe'+'move']();}['onRemove'](_0x11a36a,_0x1001a9){this['implementa'+'tions'][_0x1001a9['type']]['remove'](_0x11a36a,_0x1001a9);}['updateComp'+'oundChildT'+'ransform'](_0x31790d,_0x264c92){const _0x42e014=_0x31790d['collision']['_compoundP'+'arent'];if(_0x42e014!==_0x31790d['collision']&&_0x31790d['enabled']&&_0x31790d['collision']['enabled']&&(_0x31790d['_dirtyLoca'+'l']||_0x264c92)){const _0x8a37de=this['_getNodeTr'+'ansform'](_0x31790d,_0x42e014['entity']),_0x248d49=_0x42e014['getCompoun'+'dChildShap'+'eIndex'](_0x31790d['collision']['shape']);_0x248d49===null?_0x42e014['shape']['addChildSh'+'ape'](_0x8a37de,_0x31790d['collision']['data']['shape']):_0x42e014['shape']['updateChil'+'dTransform'](_0x248d49,_0x8a37de,!(0x1f*-0x3d+0x1*-0x3d+0x7a0)),Ammo['destroy'](_0x8a37de);}}['_removeCom'+'poundChild'](_0x8e0bbb,_0x203333){if(_0x8e0bbb['shape']['getNumChil'+'dShapes']()!==-0xdef+0x1*-0x23ec+0x31db){if(_0x8e0bbb['shape']['removeChil'+'dShape'])_0x8e0bbb['shape']['removeChil'+'dShape'](_0x203333);else{const _0x2ce536=_0x8e0bbb['getCompoun'+'dChildShap'+'eIndex'](_0x203333);_0x2ce536!==null&&_0x8e0bbb['shape']['removeChil'+'dShapeByIn'+'dex'](_0x2ce536);}}}['onTransfor'+'mChanged'](_0x18f929,_0x275775,_0x3870c9,_0x1b7f84){this['implementa'+'tions'][_0x18f929['data']['type']]['updateTran'+'sform'](_0x18f929,_0x275775,_0x3870c9,_0x1b7f84);}['changeType'](_0x395ee0,_0x5b396e,_0x1ae47c){this['implementa'+'tions'][_0x5b396e]['beforeRemo'+'ve'](_0x395ee0['entity'],_0x395ee0),this['implementa'+'tions'][_0x5b396e]['remove'](_0x395ee0['entity'],_0x395ee0['data']),this['_createImp'+'lementatio'+'n'](_0x1ae47c)['reset'](_0x395ee0,_0x395ee0['data']);}['recreatePh'+'ysicalShap'+'es'](_0x1dd92a){this['implementa'+'tions'][_0x1dd92a['data']['type']]['recreatePh'+'ysicalShap'+'es'](_0x1dd92a);}['_calculate'+'NodeRelati'+'veTransfor'+'m'](_0xf7089d,_0xe9922d){if(_0xf7089d===_0xe9922d){const _0x4c4c5e=_0xf7089d['getWorldTr'+'ansform']()['getScale']();wc['setScale'](_0x4c4c5e['x'],_0x4c4c5e['y'],_0x4c4c5e['z']);}else this['_calculate'+'NodeRelati'+'veTransfor'+'m'](_0xf7089d['parent'],_0xe9922d),wc['mul'](_0xf7089d['getLocalTr'+'ansform']());}['_getNodeSc'+'aling'](_0x532521){const _0x3896ee=_0x532521['getWorldTr'+'ansform']()['getScale']();return new Ammo['btVector3'](_0x3896ee['x'],_0x3896ee['y'],_0x3896ee['z']);}['_getNodeTr'+'ansform'](_0xf9efd5,_0x19813c){let _0x29efbe,_0x2ab187;_0x19813c?(this['_calculate'+'NodeRelati'+'veTransfor'+'m'](_0xf9efd5,_0x19813c),_0x29efbe=KL,_0x2ab187=Vr,wc['getTransla'+'tion'](_0x29efbe),_0x2ab187['setFromMat'+'4'](wc)):(_0x29efbe=_0xf9efd5['getPositio'+'n'](),_0x2ab187=_0xf9efd5['getRotatio'+'n']());const _0x421574=new Ammo['btQuaterni'+'on'](),_0x240ef0=new Ammo['btTransfor'+'m']();_0x240ef0['setIdentit'+'y']();const _0x2b7252=_0x240ef0['getOrigin'](),_0x364798=_0xf9efd5['collision'];if(_0x364798&&_0x364798['_hasOffset']){const _0xd089bb=_0x364798['data']['linearOffs'+'et'],_0x48538d=_0x364798['data']['angularOff'+'set'],_0x516c92=ZL;Vr['copy'](_0x2ab187)['transformV'+'ector'](_0xd089bb,_0x516c92),_0x516c92['add'](_0x29efbe),Vr['copy'](_0x2ab187)['mul'](_0x48538d),_0x2b7252['setValue'](_0x516c92['x'],_0x516c92['y'],_0x516c92['z']),_0x421574['setValue'](Vr['x'],Vr['y'],Vr['z'],Vr['w']);}else _0x2b7252['setValue'](_0x29efbe['x'],_0x29efbe['y'],_0x29efbe['z']),_0x421574['setValue'](_0x2ab187['x'],_0x2ab187['y'],_0x2ab187['z'],_0x2ab187['w']);return _0x240ef0['setRotatio'+'n'](_0x421574),Ammo['destroy'](_0x421574),_0x240ef0;}['destroy'](){for(const _0x2034ac in this['_triMeshCa'+'che'])Ammo['destroy'](this['_triMeshCa'+'che'][_0x2034ac]);this['_triMeshCa'+'che']=null,super['destroy']();}}const Ec=new ie(),oR=new Kt();class lR{constructor(_0x1b0d0e,_0x53d18d,_0x3f520c){this['_entity']=_0x1b0d0e,this['_element']=_0x1b0d0e['element'],this['model']=new sr(),this['node']=new Ie(),this['model']['graph']=this['node'],this['mesh']=_0x53d18d,this['meshInstan'+'ce']=new He(this['mesh'],_0x3f520c,this['node']),this['meshInstan'+'ce']['name']='ImageEleme'+'nt:\x20'+_0x1b0d0e['name'],this['meshInstan'+'ce']['castShadow']=!(0xe93+0x3*0x955+0x281*-0x11),this['meshInstan'+'ce']['receiveSha'+'dow']=!(0x737*0x4+0x1*0x18a7+-0x1*0x3582),this['_meshDirty']=!(-0x5e2+0x2123*-0x1+0x2706),this['model']['meshInstan'+'ces']['push'](this['meshInstan'+'ce']),this['_entity']['addChild'](this['model']['graph']),this['model']['_entity']=this['_entity'],this['unmaskMesh'+'Instance']=null;}['destroy'](){var _0x43e4d2,_0x4c40a2;this['setMateria'+'l'](null),this['_element']['removeMode'+'lFromLayer'+'s'](this['model']),this['model']['destroy'](),this['model']=null,this['node']=null,this['mesh']=null,(_0x43e4d2=this['meshInstan'+'ce'])==null||_0x43e4d2['destroy'](),this['meshInstan'+'ce']=null,(_0x4c40a2=this['unmaskMesh'+'Instance'])==null||_0x4c40a2['destroy'](),this['unmaskMesh'+'Instance']=null,this['_entity']=null,this['_element']=null;}['setMesh'](_0x46cd5e){this['meshInstan'+'ce']&&(this['mesh']=_0x46cd5e,this['meshInstan'+'ce']['mesh']=_0x46cd5e,this['meshInstan'+'ce']['visible']=!!_0x46cd5e,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['mesh']=_0x46cd5e),this['forceUpdat'+'eAabb']());}['setMask'](_0x11ad15){var _0x40b02a;if(this['meshInstan'+'ce']){if(this['_entity']['enabled']&&this['_element']['enabled']&&this['_element']['removeMode'+'lFromLayer'+'s'](this['model']),_0x11ad15){this['unmaskMesh'+'Instance']=new He(this['mesh'],this['meshInstan'+'ce']['material'],this['node']),this['unmaskMesh'+'Instance']['name']='Unmask:\x20'+this['_entity']['name'],this['unmaskMesh'+'Instance']['castShadow']=!(0x1*0x1bd7+-0x1*0x229+-0x19ad),this['unmaskMesh'+'Instance']['receiveSha'+'dow']=!(0xe49+0x1c7c+-0xe*0x30e),this['unmaskMesh'+'Instance']['pick']=!(0x108d+0x19b5+-0x1d*0x175),this['model']['meshInstan'+'ces']['push'](this['unmaskMesh'+'Instance']);for(const _0x47bf5e in this['meshInstan'+'ce']['parameters'])this['unmaskMesh'+'Instance']['setParamet'+'er'](_0x47bf5e,this['meshInstan'+'ce']['parameters'][_0x47bf5e]['data']);}else{const _0x149547=this['model']['meshInstan'+'ces']['indexOf'](this['unmaskMesh'+'Instance']);_0x149547>=-0x25a4+0x1+-0xeb*-0x29&&this['model']['meshInstan'+'ces']['splice'](_0x149547,0x19*-0x143+0x24b2+-0x526);}this['_entity']['enabled']&&this['_element']['enabled']&&this['_element']['addModelTo'+'Layers'](this['model']),_0x11ad15||((_0x40b02a=this['unmaskMesh'+'Instance'])==null||_0x40b02a['destroy'](),this['unmaskMesh'+'Instance']=null);}}['setMateria'+'l'](_0x36f39a){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['material']=_0x36f39a,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['material']=_0x36f39a));}['setParamet'+'er'](_0xcc65ea,_0x68b68d){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['setParamet'+'er'](_0xcc65ea,_0x68b68d),this['unmaskMesh'+'Instance']&&this['unmaskMesh'+'Instance']['setParamet'+'er'](_0xcc65ea,_0x68b68d));}['deletePara'+'meter'](_0x50f47b){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['deletePara'+'meter'](_0x50f47b),this['unmaskMesh'+'Instance']&&this['unmaskMesh'+'Instance']['deletePara'+'meter'](_0x50f47b));}['setUnmaskD'+'rawOrder'](){if(!this['meshInstan'+'ce'])return;const _0x3ef7fd=function(_0x5b7970){let _0x4ef3aa;const _0x2540fa=_0x5b7970['children'],_0x15215d=_0x2540fa['length'];if(_0x15215d){for(let _0x591bcf=0x1dc1+0x1887+-0x3648;_0x591bcf<_0x15215d;_0x591bcf++)_0x2540fa[_0x591bcf]['element']&&(_0x4ef3aa=_0x2540fa[_0x591bcf]);if(!_0x4ef3aa)return null;const _0x55a633=_0x3ef7fd(_0x4ef3aa);return _0x55a633||_0x4ef3aa;}return null;};if(this['unmaskMesh'+'Instance']){const _0xb0c5d2=_0x3ef7fd(this['_entity']);_0xb0c5d2&&_0xb0c5d2['element']?this['unmaskMesh'+'Instance']['drawOrder']=_0xb0c5d2['element']['drawOrder']+_0xb0c5d2['element']['getMaskOff'+'set']():this['unmaskMesh'+'Instance']['drawOrder']=this['meshInstan'+'ce']['drawOrder']+this['_element']['getMaskOff'+'set'](),w['trace'](Vs,'setDrawOrd'+'er:\x20',this['unmaskMesh'+'Instance']['name'],this['unmaskMesh'+'Instance']['drawOrder']);}}['setDrawOrd'+'er'](_0x1134eb){this['meshInstan'+'ce']&&(w['trace'](Vs,'setDrawOrd'+'er:\x20',this['meshInstan'+'ce']['name'],_0x1134eb),this['meshInstan'+'ce']['drawOrder']=_0x1134eb);}['setCull'](_0x1fde2d){if(!this['meshInstan'+'ce'])return;const _0x1a8499=this['_element'];let _0x5c32f7=null;_0x1fde2d&&_0x1a8499['_isScreenS'+'pace']()&&(_0x5c32f7=function(_0x36e098){return _0x1a8499['isVisibleF'+'orCamera'](_0x36e098);}),this['meshInstan'+'ce']['cull']=_0x1fde2d,this['meshInstan'+'ce']['isVisibleF'+'unc']=_0x5c32f7,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['cull']=_0x1fde2d,this['unmaskMesh'+'Instance']['isVisibleF'+'unc']=_0x5c32f7);}['setScreenS'+'pace'](_0xdb1be0){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['screenSpac'+'e']=_0xdb1be0,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['screenSpac'+'e']=_0xdb1be0));}['setLayer'](_0x30aee0){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['layer']=_0x30aee0,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['layer']=_0x30aee0));}['forceUpdat'+'eAabb'](_0x5a75c1){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['_aabbVer']=-(-0x1c4b+0x386+0x18c6),this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['_aabbVer']=-(0x1*0x11fc+-0x22f5+0x52*0x35)));}['setAabbFun'+'c'](_0x46af7e){this['meshInstan'+'ce']&&(this['meshInstan'+'ce']['_updateAab'+'bFunc']=_0x46af7e,this['unmaskMesh'+'Instance']&&(this['unmaskMesh'+'Instance']['_updateAab'+'bFunc']=_0x46af7e));}}class cR{constructor(_0x4fb7e8){h(this,'_evtSetMes'+'hes',null),(this['_element']=_0x4fb7e8,this['_entity']=_0x4fb7e8['entity'],this['_system']=_0x4fb7e8['system'],this['_textureAs'+'set']=null,this['_texture']=null,this['_materialA'+'sset']=null,this['_material']=null,this['_spriteAss'+'et']=null,this['_sprite']=null,this['_spriteFra'+'me']=0x1*0x22a5+-0x3d*0x83+-0x2*0x1b7,this['_pixelsPer'+'Unit']=null,this['_targetAsp'+'ectRatio']=-(-0xc59+0x1b61+-0xf07),this['_rect']=new re(-0x15c1+0xefb+0x6c6,-0xf17+-0x643+-0x71e*-0x3,-0x1471*0x1+-0xe7e+0x22f0,-0x11*0xfd+-0xd28+0x1df6),this['_mask']=!(0x71*0x2d+0x3*0x3b5+-0x1efb),this['_maskRef']=0x1*-0xf10+0x912+0x5fe,this['_outerScal'+'e']=new J(),this['_outerScal'+'eUniform']=new Float32Array(0xf0+0xd7b+-0xe69),this['_innerOffs'+'et']=new re(),this['_innerOffs'+'etUniform']=new Float32Array(-0x5*-0x1b7+0x5e1+0x8*-0x1ce),this['_atlasRect']=new re(),this['_atlasRect'+'Uniform']=new Float32Array(0x246+0x1d*-0x91+0xe2b*0x1),this['_defaultMe'+'sh']=this['_createMes'+'h'](),this['_renderabl'+'e']=new lR(this['_entity'],this['_defaultMe'+'sh'],this['_material']),this['_color']=new ie(-0x22e+0x1d*0x97+-0xeec,0xd6b+0x1dcc+-0x2*0x159b,0x515*-0x2+0x1*0x1649+-0xc1e,-0x477*0x1+-0x1436*-0x1+-0xfbe),this['_colorUnif'+'orm']=new Float32Array([0x1092+0x95c+-0x1*0x19ed,0xdb1+-0x146f+0x9d*0xb,0x9c2+0x7c5+-0x1186]),this['_updateRen'+'derableEmi'+'ssive'](),this['_renderabl'+'e']['setParamet'+'er']('material_o'+'pacity',-0x204e*0x1+-0xfbf*0x2+0x3fcd),this['_updateAab'+'bFunc']=this['_updateAab'+'b']['bind'](this),this['_onScreenC'+'hange'](this['_element']['screen']),this['_element']['on']('resize',this['_onParentR'+'esizeOrPiv'+'otChange'],this),this['_element']['on']('set:pivot',this['_onParentR'+'esizeOrPiv'+'otChange'],this),this['_element']['on']('screen:set'+':screenspa'+'ce',this['_onScreenS'+'paceChange'],this),this['_element']['on']('set:screen',this['_onScreenC'+'hange'],this),this['_element']['on']('set:drawor'+'der',this['_onDrawOrd'+'erChange'],this),this['_element']['on']('screen:set'+':resolutio'+'n',this['_onResolut'+'ionChange'],this));}['destroy'](){this['textureAss'+'et']=null,this['spriteAsse'+'t']=null,this['materialAs'+'set']=null,this['_renderabl'+'e']['setMesh'](this['_defaultMe'+'sh']),this['_renderabl'+'e']['destroy'](),this['_defaultMe'+'sh']=null,this['_element']['off']('resize',this['_onParentR'+'esizeOrPiv'+'otChange'],this),this['_element']['off']('set:pivot',this['_onParentR'+'esizeOrPiv'+'otChange'],this),this['_element']['off']('screen:set'+':screenspa'+'ce',this['_onScreenS'+'paceChange'],this),this['_element']['off']('set:screen',this['_onScreenC'+'hange'],this),this['_element']['off']('set:drawor'+'der',this['_onDrawOrd'+'erChange'],this),this['_element']['off']('screen:set'+':resolutio'+'n',this['_onResolut'+'ionChange'],this);}['_onResolut'+'ionChange'](_0x31c699){}['_onParentR'+'esizeOrPiv'+'otChange'](){this['_renderabl'+'e']['mesh']&&this['_updateMes'+'h'](this['_renderabl'+'e']['mesh']);}['_onScreenS'+'paceChange'](_0x703ff1){this['_updateMat'+'erial'](_0x703ff1);}['_onScreenC'+'hange'](_0x2e4bf6,_0x412b6d){_0x2e4bf6?this['_updateMat'+'erial'](_0x2e4bf6['screen']['screenSpac'+'e']):this['_updateMat'+'erial'](!(-0xa53+0x102f+-0x5db));}['_onDrawOrd'+'erChange'](_0x508fa4){this['_renderabl'+'e']['setDrawOrd'+'er'](_0x508fa4),this['mask']&&this['_element']['screen']&&this['_element']['screen']['screen']['once']('syncdrawor'+'der',function(){this['_renderabl'+'e']['setUnmaskD'+'rawOrder']();},this);}['_hasUserMa'+'terial'](){return!!this['_materialA'+'sset']||!!this['_material']&&this['_system']['defaultIma'+'geMaterial'+'s']['indexOf'](this['_material'])===-(0xa53+-0xf58+-0x1*-0x506);}['_use9Slici'+'ng'](){return this['sprite']&&(this['sprite']['renderMode']===Pt||this['sprite']['renderMode']===Mt);}['_updateMat'+'erial'](_0x48b1b7){const _0x593dfb=!!this['_mask'],_0x51167e=!!(this['sprite']&&this['sprite']['renderMode']===Pt),_0x2fb875=!!(this['sprite']&&this['sprite']['renderMode']===Mt);this['_hasUserMa'+'terial']()||(this['_material']=this['_system']['getImageEl'+'ementMater'+'ial'](_0x48b1b7,_0x593dfb,_0x51167e,_0x2fb875)),this['_renderabl'+'e']&&(this['_renderabl'+'e']['setCull'](!this['_element']['_isScreenS'+'pace']()||this['_element']['_isScreenC'+'ulled']()),this['_renderabl'+'e']['setMateria'+'l'](this['_material']),this['_renderabl'+'e']['setScreenS'+'pace'](_0x48b1b7),this['_renderabl'+'e']['setLayer'](_0x48b1b7?Ow:Ky));}['_createMes'+'h'](){const _0x4501c1=this['_element'],_0xe8ef38=_0x4501c1['calculated'+'Width'],_0x15880f=_0x4501c1['calculated'+'Height'],_0x21a144=this['_rect'],_0x49439a=this['_system']['app']['graphicsDe'+'vice'],_0x25b15f=new Float32Array([_0xe8ef38,0x2351*-0x1+0x16c*0xa+0xb*0x1eb,0x1450+-0x192+-0x12be,-0x12a7+0x2391+-0x10ea,-0x1*-0xb4d+-0x3*0xa3b+-0x92*-0x22,-0x7b5*0x5+0xd01+0x1*0x1989,_0x21a144['x']+_0x21a144['z'],-0x1981+-0x9*-0x35f+0x4d5*-0x1-_0x21a144['y'],_0xe8ef38,_0x15880f,-0x1cbe+0x20ad+-0x3ef,0x1b5*-0x5+0x3*-0x351+0x127c,0x1cff+-0x133*-0x20+-0x3*0x1675,-0x85*-0x40+-0x1929+-0x816,_0x21a144['x']+_0x21a144['z'],0x126e+-0xd*-0xf+-0x1330-(_0x21a144['y']+_0x21a144['w']),-0x5d*-0x1a+0x4*0x4bd+0x1c66*-0x1,-0x13f1+-0x2298+0x3689,0x1c38+-0xeba+-0xd7e,0x9a0+0x1963+-0x2303,0x110a*-0x1+-0x2487+0x3591,0x8*-0x3c1+0x2061*0x1+-0x258,_0x21a144['x'],0xcc7+0x1fa7+-0x2c6d-_0x21a144['y'],-0x91d*0x2+0x1f*-0x57+-0x1*-0x1cc3,_0x15880f,0xbf8+0x653+-0x124b,0x4cd+-0x4*0x96b+0xbb*0x2d,0x363*0x5+0x1*0x180e+0x1*-0x28fd,0xad*0x1+-0x186c+0x17c0,_0x21a144['x'],0x1*-0x6dd+0x1*-0x2da+0x9b8-(_0x21a144['y']+_0x21a144['w'])]),_0x29054e=oR['get'](_0x49439a,()=>new kt(_0x49439a,[{'semantic':Me,'components':0x3,'type':Ve},{'semantic':gs,'components':0x3,'type':Ve},{'semantic':is,'components':0x2,'type':Ve}])),_0x5788d8=new Is(_0x49439a,_0x29054e,0x12a7+-0x3d+-0x1266,{'data':_0x25b15f['buffer']}),_0x3eead9=new Ge(_0x49439a);return _0x3eead9['vertexBuff'+'er']=_0x5788d8,_0x3eead9['primitive'][-0x2569+0x1217+0x1352]['type']=Er,_0x3eead9['primitive'][0xf57+-0x187*0x14+-0x11*-0xe5]['base']=0x28*-0xad+-0x15b1+0x30b9,_0x3eead9['primitive'][0x22ec+0x1378+0x2*-0x1b32]['count']=-0x991*-0x1+-0x2*-0x46f+-0x126b,_0x3eead9['primitive'][0x2*0x869+-0x1*0x1eb0+-0x2*-0x6ef]['indexed']=!(-0x151d+0xa*-0xb3+0x1c1c),_0x3eead9['aabb']['setMinMax'](D['ZERO'],new D(_0xe8ef38,_0x15880f,-0x46f+0x133c*-0x2+0x2ae7)),this['_updateMes'+'h'](_0x3eead9),_0x3eead9;}['_updateMes'+'h'](_0x11c7ff){const _0x1cb91b=this['_element'];let _0x96b1c5=_0x1cb91b['calculated'+'Width'],_0x51f75e=_0x1cb91b['calculated'+'Height'];if(_0x1cb91b['fitMode']!==th&&this['_targetAsp'+'ectRatio']>-0x1b53+-0x1*0x229+0x1d7c){const _0xa54bf2=_0x1cb91b['calculated'+'Width']/_0x1cb91b['calculated'+'Height'];_0x1cb91b['fitMode']===GL&&_0xa54bf2>this['_targetAsp'+'ectRatio']||_0x1cb91b['fitMode']===HL&&_0xa54bf2<this['_targetAsp'+'ectRatio']?_0x96b1c5=_0x1cb91b['calculated'+'Height']*this['_targetAsp'+'ectRatio']:_0x51f75e=_0x1cb91b['calculated'+'Width']/this['_targetAsp'+'ectRatio'];}const _0x598f56=_0x1cb91b['_isScreenS'+'pace']();if(this['_updateMat'+'erial'](_0x598f56),this['_renderabl'+'e']&&this['_renderabl'+'e']['forceUpdat'+'eAabb'](),this['sprite']&&(this['sprite']['renderMode']===Pt||this['sprite']['renderMode']===Mt)){const _0x30b44c=this['_sprite']['atlas']['frames'][this['_sprite']['frameKeys'][this['_spriteFra'+'me']]],_0xf1bd0b=(0x23e9+0xba*0x2+0x1*-0x255b)/_0x30b44c['rect']['z'],_0x43116c=(0x22a+-0x8*0x123+-0xde*-0x8)/_0x30b44c['rect']['w'];this['_innerOffs'+'et']['set'](_0x30b44c['border']['x']*_0xf1bd0b,_0x30b44c['border']['y']*_0x43116c,_0x30b44c['border']['z']*_0xf1bd0b,_0x30b44c['border']['w']*_0x43116c);const _0x3f3d29=this['sprite']['atlas']['texture'];this['_atlasRect']['set'](_0x30b44c['rect']['x']/_0x3f3d29['width'],_0x30b44c['rect']['y']/_0x3f3d29['height'],_0x30b44c['rect']['z']/_0x3f3d29['width'],_0x30b44c['rect']['w']/_0x3f3d29['height']);const _0x465618=this['_pixelsPer'+'Unit']!==null?this['_pixelsPer'+'Unit']:this['sprite']['pixelsPerU'+'nit'],_0x1ea4fc=_0x30b44c['rect']['z']/_0x465618,_0x20e9ed=_0x30b44c['rect']['w']/_0x465618;this['_outerScal'+'e']['set'](Math['max'](_0x96b1c5,this['_innerOffs'+'et']['x']*_0x1ea4fc),Math['max'](_0x51f75e,this['_innerOffs'+'et']['y']*_0x20e9ed));let _0x1d61b3=_0x1ea4fc,_0xc8bd44=_0x20e9ed;this['_outerScal'+'e']['x']/=_0x1ea4fc,this['_outerScal'+'e']['y']/=_0x20e9ed,_0x1d61b3*=Y['clamp'](_0x96b1c5/(this['_innerOffs'+'et']['x']*_0x1ea4fc),-0xd92+-0x1f7a+0x2d0c+0.0001,0x4bd+-0x7a*0x30+0x2*0x912),_0xc8bd44*=Y['clamp'](_0x51f75e/(this['_innerOffs'+'et']['y']*_0x20e9ed),0x1*-0xcf1+-0x1731+0x2422+0.0001,0xe0f*-0x1+0xf57+0x6d*-0x3),this['_renderabl'+'e']&&(this['_innerOffs'+'etUniform'][0x3*0x71b+-0x912*-0x1+-0x1e63*0x1]=this['_innerOffs'+'et']['x'],this['_innerOffs'+'etUniform'][-0x8*0x48e+0xb43*0x3+0x2a8]=this['_innerOffs'+'et']['y'],this['_innerOffs'+'etUniform'][-0x238c+-0x88a*0x1+-0xb06*-0x4]=this['_innerOffs'+'et']['z'],this['_innerOffs'+'etUniform'][0x33b+-0xfa9+0xc71]=this['_innerOffs'+'et']['w'],this['_renderabl'+'e']['setParamet'+'er']('innerOffse'+'t',this['_innerOffs'+'etUniform']),this['_atlasRect'+'Uniform'][-0x1923+-0x3*-0x26b+0x11e2]=this['_atlasRect']['x'],this['_atlasRect'+'Uniform'][0x1ea1+-0x180b+-0x695]=this['_atlasRect']['y'],this['_atlasRect'+'Uniform'][0x15*-0x54+0x1318+-0xdf*0xe]=this['_atlasRect']['z'],this['_atlasRect'+'Uniform'][-0x659*-0x6+-0x6b9*-0x1+-0x3d*0xbc]=this['_atlasRect']['w'],this['_renderabl'+'e']['setParamet'+'er']('atlasRect',this['_atlasRect'+'Uniform']),this['_outerScal'+'eUniform'][0x1385+-0x8*0x259+-0xbd]=this['_outerScal'+'e']['x'],this['_outerScal'+'eUniform'][0x1d+0x3*-0x78d+0x1d*0xc7]=this['_outerScal'+'e']['y'],this['_renderabl'+'e']['setParamet'+'er']('outerScale',this['_outerScal'+'eUniform']),this['_renderabl'+'e']['setAabbFun'+'c'](this['_updateAab'+'bFunc']),this['_renderabl'+'e']['node']['setLocalSc'+'ale'](_0x1d61b3,_0xc8bd44,-0x1*0x3e5+-0x1*0x1738+0x1b1e),this['_renderabl'+'e']['node']['setLocalPo'+'sition']((0x2659+-0x28b+-0x23ce*0x1+0.5-_0x1cb91b['pivot']['x'])*_0x96b1c5,(-0x2311+-0x1a43+0x3d54*0x1+0.5-_0x1cb91b['pivot']['y'])*_0x51f75e,-0x1d61+-0x2*0x55c+0x805*0x5));}else{const _0x205c2a=_0x11c7ff['vertexBuff'+'er'],_0x558a47=new Float32Array(_0x205c2a['lock']()),_0x3db139=_0x1cb91b['pivot']['x'],_0x5dee15=_0x1cb91b['pivot']['y'];_0x558a47[0x11*0x23+0xde9*0x2+-0x1*0x1e25]=_0x96b1c5-_0x3db139*_0x96b1c5,_0x558a47[-0x339*-0x2+0x178c*-0x1+-0x1*-0x111b]=0x1757+0x3e*0x5+-0x3*0x82f-_0x5dee15*_0x51f75e,_0x558a47[-0x2310+-0x387+0x269f]=_0x96b1c5-_0x3db139*_0x96b1c5,_0x558a47[0xd31+0x235*0x5+0xb*-0x233]=_0x51f75e-_0x5dee15*_0x51f75e,_0x558a47[-0x1d7a*0x1+-0x1*-0x168e+-0x2*-0x37e]=-0x21b4+-0x1b7*-0x11+0x1*0x48d-_0x3db139*_0x96b1c5,_0x558a47[-0x2161+-0x7f*0x1e+-0x407*-0xc]=0xcb5+-0x11bf+0x50a-_0x5dee15*_0x51f75e,_0x558a47[0x1*-0x1848+0x207c+0x15a*-0x6]=-0x1a9+0x36d+-0x1c4-_0x3db139*_0x96b1c5,_0x558a47[0x159b+-0x1af+-0x13d3]=_0x51f75e-_0x5dee15*_0x51f75e;let _0x1fbc20=-0xe7d+-0x297+-0x1115*-0x1,_0x5440f9=-0x2ed*0x1+0x1cb+-0x61*-0x3,_0x3cdf1e=this['_rect'];if(this['_sprite']&&this['_sprite']['frameKeys'][this['_spriteFra'+'me']]&&this['_sprite']['atlas']){const _0x14a53a=this['_sprite']['atlas']['frames'][this['_sprite']['frameKeys'][this['_spriteFra'+'me']]];_0x14a53a&&(_0x3cdf1e=_0x14a53a['rect'],_0x1fbc20=this['_sprite']['atlas']['texture']['width'],_0x5440f9=this['_sprite']['atlas']['texture']['height']);}_0x558a47[-0x3fa*-0x2+0x58f*-0x1+-0x25f]=(_0x3cdf1e['x']+_0x3cdf1e['z'])/_0x1fbc20,_0x558a47[0xb26+0x12fa+-0x1e19]=0x2656+0xa0c+-0x3061-_0x3cdf1e['y']/_0x5440f9,_0x558a47[0x8af+-0x1ea0+0x15ff*0x1]=(_0x3cdf1e['x']+_0x3cdf1e['z'])/_0x1fbc20,_0x558a47[0x27*0xa3+0x2389+-0x3c4f*0x1]=0x124c*0x2+-0x2009+-0x48e-(_0x3cdf1e['y']+_0x3cdf1e['w'])/_0x5440f9,_0x558a47[-0x24e0+0xb68+0x198e]=_0x3cdf1e['x']/_0x1fbc20,_0x558a47[0xc04+-0x2554+0x1967]=0x981+-0x1*-0x11a4+0x1b24*-0x1-_0x3cdf1e['y']/_0x5440f9,_0x558a47[-0x4ed+-0xd3f+0x124a]=_0x3cdf1e['x']/_0x1fbc20,_0x558a47[-0x1b5*0x1+0xddf+0xc0b*-0x1]=0x1e1e+-0x9ef*0x1+-0x15*0xf6-(_0x3cdf1e['y']+_0x3cdf1e['w'])/_0x5440f9,_0x205c2a['unlock']();const _0x81c710=new D(-0x1ac*0x11+0xc9*-0x2+-0x2*-0xeff-_0x3db139*_0x96b1c5,0x986+0x1674+-0x1ffa-_0x5dee15*_0x51f75e,0x587+-0x269f+0x2118),_0x2d2135=new D(_0x96b1c5-_0x3db139*_0x96b1c5,_0x51f75e-_0x5dee15*_0x51f75e,-0x22c5+0xc80+-0x1*-0x1645);_0x11c7ff['aabb']['setMinMax'](_0x81c710,_0x2d2135),this['_renderabl'+'e']&&(this['_renderabl'+'e']['node']['setLocalSc'+'ale'](-0xb4d+0x1ad8+0x297*-0x6,-0x148b*-0x1+-0x164+0x56*-0x39,-0x195c+-0x11*0x1f4+0x3a91),this['_renderabl'+'e']['node']['setLocalPo'+'sition'](-0x57c+0x1101*-0x1+0x167d*0x1,-0x20a9+-0x184e+0x38f7,0x93b+-0x501*-0x6+-0x2741),this['_renderabl'+'e']['setAabbFun'+'c'](null));}this['_meshDirty']=!(0x19e8+-0x137*0x1b+0x373*0x2);}['_updateSpr'+'ite'](){let _0x5f5b1d=!(-0x2*-0xb17+-0x5*0x6cd+-0x2*-0x5ea),_0x5e882a=null;if(this['_targetAsp'+'ectRatio']=-(-0x1*0x265b+-0x36*-0x93+-0x2*-0x3ad),this['_sprite']&&this['_sprite']['atlas']){_0x5e882a=this['_sprite']['meshes'][this['spriteFram'+'e']],_0x5f5b1d=this['_sprite']['renderMode']===Pt||this['_sprite']['renderMode']===Mt;const _0x4cc53a=this['_sprite']['atlas']['frames'][this['_sprite']['frameKeys'][this['_spriteFra'+'me']]];(_0x4cc53a==null?void(0x20*-0x11+-0x91d+0x89*0x15):_0x4cc53a['rect']['w'])>-0x66+-0x1c99*-0x1+-0x1c33&&(this['_targetAsp'+'ectRatio']=_0x4cc53a['rect']['z']/_0x4cc53a['rect']['w']);}this['mesh']=_0x5f5b1d?_0x5e882a:this['_defaultMe'+'sh'],this['refreshMes'+'h']();}['refreshMes'+'h'](){this['mesh']&&(this['_element']['_beingInit'+'ialized']?this['_meshDirty']=!(-0x9*-0x287+0x16*-0x185+-0xaaf*-0x1):this['_updateMes'+'h'](this['mesh']));}['_updateAab'+'b'](_0x69cdb3){return _0x69cdb3['center']['set'](0x262c+0x4c*0x4a+-0x3c24*0x1,0x1431*-0x1+-0x1e2*0x6+0x1f7d,-0x260f*-0x1+-0xff*0x5+-0x1*0x2114),_0x69cdb3['halfExtent'+'s']['set'](this['_outerScal'+'e']['x']*(0x1*0x1253+0x1*-0x12d1+0x7e+0.5),this['_outerScal'+'e']['y']*(-0x1ffb+0xa3b*0x2+0x3*0x3d7+0.5),0x1471+0x263b*0x1+-0x3aac+0.001),_0x69cdb3['setFromTra'+'nsformedAa'+'bb'](_0x69cdb3,this['_renderabl'+'e']['node']['getWorldTr'+'ansform']()),_0x69cdb3;}['_toggleMas'+'k'](){this['_element']['_dirtifyMa'+'sk']();const _0x5911ef=this['_element']['_isScreenS'+'pace']();this['_updateMat'+'erial'](_0x5911ef),this['_renderabl'+'e']['setMask'](!!this['_mask']);}['_onMateria'+'lLoad'](_0x5782fa){this['material']=_0x5782fa['resource'];}['_onMateria'+'lAdded'](_0x2f5534){this['_system']['app']['assets']['off']('add:'+_0x2f5534['id'],this['_onMateria'+'lAdded'],this),this['_materialA'+'sset']===_0x2f5534['id']&&this['_bindMater'+'ialAsset'](_0x2f5534);}['_bindMater'+'ialAsset'](_0x402d4f){this['_entity']['enabled']&&(_0x402d4f['on']('load',this['_onMateria'+'lLoad'],this),_0x402d4f['on']('change',this['_onMateria'+'lChange'],this),_0x402d4f['on']('remove',this['_onMateria'+'lRemove'],this),_0x402d4f['resource']?this['_onMateria'+'lLoad'](_0x402d4f):this['_system']['app']['assets']['load'](_0x402d4f));}['_unbindMat'+'erialAsset'](_0x2588df){_0x2588df['off']('load',this['_onMateria'+'lLoad'],this),_0x2588df['off']('change',this['_onMateria'+'lChange'],this),_0x2588df['off']('remove',this['_onMateria'+'lRemove'],this);}['_onMateria'+'lChange'](){}['_onMateria'+'lRemove'](){}['_onTexture'+'Added'](_0x3f97ab){this['_system']['app']['assets']['off']('add:'+_0x3f97ab['id'],this['_onTexture'+'Added'],this),this['_textureAs'+'set']===_0x3f97ab['id']&&this['_bindTextu'+'reAsset'](_0x3f97ab);}['_bindTextu'+'reAsset'](_0x28abb8){this['_entity']['enabled']&&(_0x28abb8['on']('load',this['_onTexture'+'Load'],this),_0x28abb8['on']('change',this['_onTexture'+'Change'],this),_0x28abb8['on']('remove',this['_onTexture'+'Remove'],this),_0x28abb8['resource']?this['_onTexture'+'Load'](_0x28abb8):this['_system']['app']['assets']['load'](_0x28abb8));}['_unbindTex'+'tureAsset'](_0x461f1b){_0x461f1b['off']('load',this['_onTexture'+'Load'],this),_0x461f1b['off']('change',this['_onTexture'+'Change'],this),_0x461f1b['off']('remove',this['_onTexture'+'Remove'],this);}['_onTexture'+'Load'](_0x5512cd){this['texture']=_0x5512cd['resource'];}['_onTexture'+'Change'](_0x8ca444){}['_onTexture'+'Remove'](_0x378054){}['_onSpriteA'+'ssetAdded'](_0x54ba0e){this['_system']['app']['assets']['off']('add:'+_0x54ba0e['id'],this['_onSpriteA'+'ssetAdded'],this),this['_spriteAss'+'et']===_0x54ba0e['id']&&this['_bindSprit'+'eAsset'](_0x54ba0e);}['_bindSprit'+'eAsset'](_0x6640a9){this['_entity']['enabled']&&(_0x6640a9['on']('load',this['_onSpriteA'+'ssetLoad'],this),_0x6640a9['on']('change',this['_onSpriteA'+'ssetChange'],this),_0x6640a9['on']('remove',this['_onSpriteA'+'ssetRemove'],this),_0x6640a9['resource']?this['_onSpriteA'+'ssetLoad'](_0x6640a9):this['_system']['app']['assets']['load'](_0x6640a9));}['_unbindSpr'+'iteAsset'](_0x53c72e){_0x53c72e['off']('load',this['_onSpriteA'+'ssetLoad'],this),_0x53c72e['off']('change',this['_onSpriteA'+'ssetChange'],this),_0x53c72e['off']('remove',this['_onSpriteA'+'ssetRemove'],this),_0x53c72e['data']['textureAtl'+'asAsset']&&this['_system']['app']['assets']['off']('load:'+_0x53c72e['data']['textureAtl'+'asAsset'],this['_onTexture'+'AtlasLoad'],this);}['_onSpriteA'+'ssetLoad'](_0x529ced){if(!_0x529ced||!_0x529ced['resource'])this['sprite']=null;else{if(_0x529ced['resource']['atlas'])this['sprite']=_0x529ced['resource'];else{const _0x10be35=_0x529ced['data']['textureAtl'+'asAsset'];if(_0x10be35){const _0x3b2a77=this['_system']['app']['assets'];_0x3b2a77['off']('load:'+_0x10be35,this['_onTexture'+'AtlasLoad'],this),_0x3b2a77['once']('load:'+_0x10be35,this['_onTexture'+'AtlasLoad'],this);}}}}['_onSpriteA'+'ssetChange'](_0x2d27e6){this['_onSpriteA'+'ssetLoad'](_0x2d27e6);}['_onSpriteA'+'ssetRemove'](_0x1e9d9a){}['_bindSprit'+'e'](_0x51f598){this['_evtSetMes'+'hes']=_0x51f598['on']('set:meshes',this['_onSpriteM'+'eshesChang'+'e'],this),_0x51f598['on']('set:pixels'+'PerUnit',this['_onSpriteP'+'puChange'],this),_0x51f598['on']('set:atlas',this['_onAtlasTe'+'xtureChang'+'e'],this),_0x51f598['atlas']&&_0x51f598['atlas']['on']('set:textur'+'e',this['_onAtlasTe'+'xtureChang'+'e'],this);}['_unbindSpr'+'ite'](_0x46764b){var _0x3eab2a;(_0x3eab2a=this['_evtSetMes'+'hes'])==null||_0x3eab2a['off'](),this['_evtSetMes'+'hes']=null,_0x46764b['off']('set:pixels'+'PerUnit',this['_onSpriteP'+'puChange'],this),_0x46764b['off']('set:atlas',this['_onAtlasTe'+'xtureChang'+'e'],this),_0x46764b['atlas']&&_0x46764b['atlas']['off']('set:textur'+'e',this['_onAtlasTe'+'xtureChang'+'e'],this);}['_onSpriteM'+'eshesChang'+'e'](){this['_sprite']&&(this['_spriteFra'+'me']=Y['clamp'](this['_spriteFra'+'me'],0x72f+0x1*-0x274+-0x4bb,this['_sprite']['frameKeys']['length']-(0x17*0x9d+0x2284+-0x6f2*0x7))),this['_updateSpr'+'ite']();}['_onSpriteP'+'puChange'](){this['sprite']['renderMode']!==ci&&this['_pixelsPer'+'Unit']===null&&this['_updateSpr'+'ite']();}['_onAtlasTe'+'xtureChang'+'e'](){this['sprite']&&this['sprite']['atlas']&&this['sprite']['atlas']['texture']?(this['_renderabl'+'e']['setParamet'+'er']('texture_em'+'issiveMap',this['_sprite']['atlas']['texture']),this['_renderabl'+'e']['setParamet'+'er']('texture_op'+'acityMap',this['_sprite']['atlas']['texture'])):(this['_renderabl'+'e']['deletePara'+'meter']('texture_em'+'issiveMap'),this['_renderabl'+'e']['deletePara'+'meter']('texture_op'+'acityMap'));}['_onTexture'+'AtlasLoad'](_0x44bf6b){const _0x176a12=this['_spriteAss'+'et'];_0x176a12 instanceof pe?this['_onSpriteA'+'ssetLoad'](_0x176a12):this['_onSpriteA'+'ssetLoad'](this['_system']['app']['assets']['get'](_0x176a12));}['onEnable'](){if(this['_materialA'+'sset']){const _0xc6ffb0=this['_system']['app']['assets']['get'](this['_materialA'+'sset']);_0xc6ffb0&&_0xc6ffb0['resource']!==this['_material']&&this['_bindMater'+'ialAsset'](_0xc6ffb0);}if(this['_textureAs'+'set']){const _0x23a104=this['_system']['app']['assets']['get'](this['_textureAs'+'set']);_0x23a104&&_0x23a104['resource']!==this['_texture']&&this['_bindTextu'+'reAsset'](_0x23a104);}if(this['_spriteAss'+'et']){const _0x496d0c=this['_system']['app']['assets']['get'](this['_spriteAss'+'et']);_0x496d0c&&_0x496d0c['resource']!==this['_sprite']&&this['_bindSprit'+'eAsset'](_0x496d0c);}this['_element']['addModelTo'+'Layers'](this['_renderabl'+'e']['model']);}['onDisable'](){this['_element']['removeMode'+'lFromLayer'+'s'](this['_renderabl'+'e']['model']);}['_setStenci'+'l'](_0x19d4ba){this['_renderabl'+'e']['meshInstan'+'ce']['stencilFro'+'nt']=_0x19d4ba,this['_renderabl'+'e']['meshInstan'+'ce']['stencilBac'+'k']=_0x19d4ba;let _0x5ca220=0xbc4+0x610+-0x11d4;if(this['_element']['maskedBy']&&(_0x5ca220=this['_element']['maskedBy']['element']['_image']['_maskRef']),this['_renderabl'+'e']['unmaskMesh'+'Instance']){const _0x1b8cbf=new pi({'ref':_0x5ca220+(0x59a*0x1+-0x518+-0x1*0x81),'func':dh,'zpass':Bx});this['_renderabl'+'e']['unmaskMesh'+'Instance']['stencilFro'+'nt']=_0x1b8cbf,this['_renderabl'+'e']['unmaskMesh'+'Instance']['stencilBac'+'k']=_0x1b8cbf;}}['_updateRen'+'derableEmi'+'ssive'](){Ec['linear'](this['_color']),this['_colorUnif'+'orm'][-0x20e1*-0x1+-0x9*0x1e9+-0x10*0xfb]=Ec['r'],this['_colorUnif'+'orm'][0x1ea9+-0x4*0x45+-0x1d94]=Ec['g'],this['_colorUnif'+'orm'][-0x11f3*-0x1+-0x15*-0xb5+-0x1065*0x2]=Ec['b'],this['_renderabl'+'e']['setParamet'+'er']('material_e'+'missive',this['_colorUnif'+'orm']);}set['color'](_0x3b4313){this['_color']===_0x3b4313&&w['warn']('Setting\x20el'+'ement.colo'+'r\x20to\x20itsel'+'f\x20will\x20hav'+'e\x20no\x20effec'+'t');const {r:_0xbbb9d6,g:_0xde519e,b:_0x174e4e}=_0x3b4313;(this['_color']['r']!==_0xbbb9d6||this['_color']['g']!==_0xde519e||this['_color']['b']!==_0x174e4e)&&(this['_color']['r']=_0xbbb9d6,this['_color']['g']=_0xde519e,this['_color']['b']=_0x174e4e,this['_updateRen'+'derableEmi'+'ssive']()),this['_element']&&this['_element']['fire']('set:color',this['_color']);}get['color'](){return this['_color'];}set['opacity'](_0x3cb24f){_0x3cb24f!==this['_color']['a']&&(this['_color']['a']=_0x3cb24f,this['_renderabl'+'e']['setParamet'+'er']('material_o'+'pacity',_0x3cb24f)),this['_element']&&this['_element']['fire']('set:opacit'+'y',_0x3cb24f);}get['opacity'](){return this['_color']['a'];}set['rect'](_0x426fc9){this['_rect']===_0x426fc9&&console['warn']('Setting\x20el'+'ement.rect'+'\x20to\x20itself'+'\x20will\x20have'+'\x20no\x20effect');let _0x557c3d,_0x5c5701,_0x423e0b,_0x393756;_0x426fc9 instanceof re?(_0x557c3d=_0x426fc9['x'],_0x5c5701=_0x426fc9['y'],_0x423e0b=_0x426fc9['z'],_0x393756=_0x426fc9['w']):(_0x557c3d=_0x426fc9[-0xa3*0x3b+0x176f+0xe22],_0x5c5701=_0x426fc9[0x248a*-0x1+0xe4f+-0x2*-0xb1e],_0x423e0b=_0x426fc9[-0x1*0x14dd+-0x21*0x6b+0x22aa],_0x393756=_0x426fc9[-0xa0b*0x2+0x218b+-0x2*0x6b9]),!(_0x557c3d===this['_rect']['x']&&_0x5c5701===this['_rect']['y']&&_0x423e0b===this['_rect']['z']&&_0x393756===this['_rect']['w'])&&(this['_rect']['set'](_0x557c3d,_0x5c5701,_0x423e0b,_0x393756),this['_renderabl'+'e']['mesh']&&(this['_element']['_beingInit'+'ialized']?this['_meshDirty']=!(0x9bc+-0x2214+0x1858):this['_updateMes'+'h'](this['_renderabl'+'e']['mesh'])));}get['rect'](){return this['_rect'];}['_removeMat'+'erialAsset'+'Events'](){if(this['_materialA'+'sset']){const _0xab9d6b=this['_system']['app']['assets'];_0xab9d6b['off']('add:'+this['_materialA'+'sset'],this['_onMateria'+'lAdded'],this);const _0x520a3e=_0xab9d6b['get'](this['_materialA'+'sset']);_0x520a3e&&(_0x520a3e['off']('load',this['_onMateria'+'lLoad'],this),_0x520a3e['off']('change',this['_onMateria'+'lChange'],this),_0x520a3e['off']('remove',this['_onMateria'+'lRemove'],this));}}set['material'](_0x4aaf80){if(this['_material']!==_0x4aaf80){if(!_0x4aaf80){const _0x2d0b53=this['_element']['_isScreenS'+'pace']();this['mask']?_0x4aaf80=_0x2d0b53?this['_system']['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']:this['_system']['defaultIma'+'geMaskMate'+'rial']:_0x4aaf80=_0x2d0b53?this['_system']['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']:this['_system']['defaultIma'+'geMaterial'];}if(this['_material']=_0x4aaf80,this['_materialA'+'sset']){const _0x106a12=this['_system']['app']['assets']['get'](this['_materialA'+'sset']);(!_0x106a12||_0x106a12['resource']!==_0x4aaf80)&&(this['_removeMat'+'erialAsset'+'Events'](),this['_materialA'+'sset']=null);}_0x4aaf80&&(this['_renderabl'+'e']['setMateria'+'l'](_0x4aaf80),this['_hasUserMa'+'terial']()?(this['_renderabl'+'e']['deletePara'+'meter']('material_o'+'pacity'),this['_renderabl'+'e']['deletePara'+'meter']('material_e'+'missive')):(this['_updateRen'+'derableEmi'+'ssive'](),this['_renderabl'+'e']['setParamet'+'er']('material_o'+'pacity',this['_color']['a'])));}}get['material'](){return this['_material'];}set['materialAs'+'set'](_0x1e7c41){const _0x402b8f=this['_system']['app']['assets'];let _0x41537f=_0x1e7c41;if(_0x1e7c41 instanceof pe&&(_0x41537f=_0x1e7c41['id']),this['_materialA'+'sset']!==_0x41537f){if(this['_removeMat'+'erialAsset'+'Events'](),this['_materialA'+'sset']=_0x41537f,this['_materialA'+'sset']){const _0x2cb7ad=_0x402b8f['get'](this['_materialA'+'sset']);_0x2cb7ad?this['_bindMater'+'ialAsset'](_0x2cb7ad):(this['_materialA'+'sset']=null,this['material']=null,this['_materialA'+'sset']=_0x41537f,_0x402b8f['on']('add:'+this['_materialA'+'sset'],this['_onMateria'+'lAdded'],this));}else this['_materialA'+'sset']=null,this['material']=null,this['_materialA'+'sset']=_0x41537f;}}get['materialAs'+'set'](){return this['_materialA'+'sset'];}set['texture'](_0x4f0e9a){if(this['_texture']!==_0x4f0e9a){if(this['_textureAs'+'set']){const _0x4d809c=this['_system']['app']['assets']['get'](this['_textureAs'+'set']);_0x4d809c&&_0x4d809c['resource']!==_0x4f0e9a&&(this['textureAss'+'et']=null);}if(this['_texture']=_0x4f0e9a,_0x4f0e9a){this['_spriteAss'+'et']&&(this['spriteAsse'+'t']=null),this['_renderabl'+'e']['setParamet'+'er']('texture_em'+'issiveMap',this['_texture']),this['_renderabl'+'e']['setParamet'+'er']('texture_op'+'acityMap',this['_texture']),this['_updateRen'+'derableEmi'+'ssive'](),this['_renderabl'+'e']['setParamet'+'er']('material_o'+'pacity',this['_color']['a']);const _0x15bf3e=this['_texture']['width']/this['_texture']['height'];_0x15bf3e!==this['_targetAsp'+'ectRatio']&&(this['_targetAsp'+'ectRatio']=_0x15bf3e,this['_element']['fitMode']!==th&&this['refreshMes'+'h']());}else this['_renderabl'+'e']['deletePara'+'meter']('texture_em'+'issiveMap'),this['_renderabl'+'e']['deletePara'+'meter']('texture_op'+'acityMap'),this['_targetAsp'+'ectRatio']=-(0x1*0xa67+-0x1*0x1713+0xcad),this['_element']['fitMode']!==th&&this['refreshMes'+'h']();}}get['texture'](){return this['_texture'];}set['textureAss'+'et'](_0x3e8d8b){const _0xed4ef9=this['_system']['app']['assets'];let _0x1348fe=_0x3e8d8b;if(_0x3e8d8b instanceof pe&&(_0x1348fe=_0x3e8d8b['id']),this['_textureAs'+'set']!==_0x1348fe){if(this['_textureAs'+'set']){_0xed4ef9['off']('add:'+this['_textureAs'+'set'],this['_onTexture'+'Added'],this);const _0x58bf50=_0xed4ef9['get'](this['_textureAs'+'set']);_0x58bf50&&(_0x58bf50['off']('load',this['_onTexture'+'Load'],this),_0x58bf50['off']('change',this['_onTexture'+'Change'],this),_0x58bf50['off']('remove',this['_onTexture'+'Remove'],this));}if(this['_textureAs'+'set']=_0x1348fe,this['_textureAs'+'set']){const _0x45a1d2=_0xed4ef9['get'](this['_textureAs'+'set']);_0x45a1d2?this['_bindTextu'+'reAsset'](_0x45a1d2):(this['texture']=null,_0xed4ef9['on']('add:'+this['_textureAs'+'set'],this['_onTexture'+'Added'],this));}else this['texture']=null;}}get['textureAss'+'et'](){return this['_textureAs'+'set'];}set['spriteAsse'+'t'](_0x2f593a){const _0x243b22=this['_system']['app']['assets'];let _0x49acea=_0x2f593a;if(_0x2f593a instanceof pe&&(_0x49acea=_0x2f593a['id']),this['_spriteAss'+'et']!==_0x49acea){if(this['_spriteAss'+'et']){_0x243b22['off']('add:'+this['_spriteAss'+'et'],this['_onSpriteA'+'ssetAdded'],this);const _0x1086a0=_0x243b22['get'](this['_spriteAss'+'et']);_0x1086a0&&this['_unbindSpr'+'iteAsset'](_0x1086a0);}if(this['_spriteAss'+'et']=_0x49acea,this['_spriteAss'+'et']){const _0x246b93=_0x243b22['get'](this['_spriteAss'+'et']);_0x246b93?this['_bindSprit'+'eAsset'](_0x246b93):(this['sprite']=null,_0x243b22['on']('add:'+this['_spriteAss'+'et'],this['_onSpriteA'+'ssetAdded'],this));}else this['sprite']=null;}this['_element']&&this['_element']['fire']('set:sprite'+'Asset',_0x49acea);}get['spriteAsse'+'t'](){return this['_spriteAss'+'et'];}set['sprite'](_0x306bf0){if(this['_sprite']!==_0x306bf0){if(this['_sprite']&&this['_unbindSpr'+'ite'](this['_sprite']),this['_spriteAss'+'et']){const _0x13927d=this['_system']['app']['assets']['get'](this['_spriteAss'+'et']);_0x13927d&&_0x13927d['resource']!==_0x306bf0&&(this['spriteAsse'+'t']=null);}this['_sprite']=_0x306bf0,this['_sprite']&&(this['_bindSprit'+'e'](this['_sprite']),this['_textureAs'+'set']&&(this['textureAss'+'et']=null)),this['_sprite']&&this['_sprite']['atlas']&&this['_sprite']['atlas']['texture']?(this['_renderabl'+'e']['setParamet'+'er']('texture_em'+'issiveMap',this['_sprite']['atlas']['texture']),this['_renderabl'+'e']['setParamet'+'er']('texture_op'+'acityMap',this['_sprite']['atlas']['texture'])):(this['_renderabl'+'e']['deletePara'+'meter']('texture_em'+'issiveMap'),this['_renderabl'+'e']['deletePara'+'meter']('texture_op'+'acityMap')),this['_sprite']&&(this['_spriteFra'+'me']=Y['clamp'](this['_spriteFra'+'me'],-0x1*0x1ec5+0x127*0x1+0x1d9e,this['_sprite']['frameKeys']['length']-(0x2684+-0x56b+-0x2118))),this['_updateSpr'+'ite']();}}get['sprite'](){return this['_sprite'];}set['spriteFram'+'e'](_0x5ba8e0){const _0x1f1208=this['_spriteFra'+'me'];this['_sprite']?this['_spriteFra'+'me']=Y['clamp'](_0x5ba8e0,-0x531+0x13f2+-0xec1,this['_sprite']['frameKeys']['length']-(-0x2c6*0x2+-0x73*-0x56+0x2115*-0x1)):this['_spriteFra'+'me']=_0x5ba8e0,this['_spriteFra'+'me']!==_0x1f1208&&this['_updateSpr'+'ite'](),this['_element']&&this['_element']['fire']('set:sprite'+'Frame',_0x5ba8e0);}get['spriteFram'+'e'](){return this['_spriteFra'+'me'];}set['mesh'](_0x223bb1){this['_renderabl'+'e']['setMesh'](_0x223bb1),this['_defaultMe'+'sh']===_0x223bb1?this['_renderabl'+'e']['setAabbFun'+'c'](null):this['_renderabl'+'e']['setAabbFun'+'c'](this['_updateAab'+'bFunc']);}get['mesh'](){return this['_renderabl'+'e']['mesh'];}set['mask'](_0x514785){this['_mask']!==_0x514785&&(this['_mask']=_0x514785,this['_toggleMas'+'k']());}get['mask'](){return this['_mask'];}set['pixelsPerU'+'nit'](_0x275f8d){this['_pixelsPer'+'Unit']!==_0x275f8d&&(this['_pixelsPer'+'Unit']=_0x275f8d,this['_sprite']&&(this['_sprite']['renderMode']===Pt||this['_sprite']['renderMode']===Mt)&&this['_updateSpr'+'ite']());}get['pixelsPerU'+'nit'](){return this['_pixelsPer'+'Unit'];}get['aabb'](){return this['_renderabl'+'e']['meshInstan'+'ce']?this['_renderabl'+'e']['meshInstan'+'ce']['aabb']:null;}}class hR extends me{constructor(_0x28b3ac){super(),this['_app']=_0x28b3ac,_0x28b3ac['i18n']['on'](wa['EVENT_CHAN'+'GE'],this['_onSetLoca'+'le'],this),this['_autoLoad']=!(-0xdc3+-0x1081*-0x1+0x1*-0x2bd),this['_disableLo'+'calization']=!(-0x7*0x36f+-0x1*0xef3+-0x9*-0x455),this['_defaultAs'+'set']=null,this['_localized'+'Asset']=null;}set['defaultAss'+'et'](_0x27da18){const _0xa8a06e=_0x27da18 instanceof pe?_0x27da18['id']:_0x27da18;this['_defaultAs'+'set']!==_0xa8a06e&&(this['_defaultAs'+'set']&&this['_unbindDef'+'aultAsset'](),this['_defaultAs'+'set']=_0xa8a06e,this['_defaultAs'+'set']&&this['_bindDefau'+'ltAsset'](),this['_onSetLoca'+'le'](this['_app']['i18n']['locale']));}get['defaultAss'+'et'](){return this['_defaultAs'+'set'];}set['localizedA'+'sset'](_0x43cb54){const _0x150754=_0x43cb54 instanceof pe?_0x43cb54['id']:_0x43cb54;this['_localized'+'Asset']!==_0x150754&&(this['_localized'+'Asset']&&(this['_app']['assets']['off']('add:'+this['_localized'+'Asset'],this['_onLocaliz'+'edAssetAdd'],this),this['_unbindLoc'+'alizedAsse'+'t']()),this['_localized'+'Asset']=_0x150754,this['_localized'+'Asset']&&(this['_app']['assets']['get'](this['_localized'+'Asset'])?this['_bindLocal'+'izedAsset']():this['_app']['assets']['once']('add:'+this['_localized'+'Asset'],this['_onLocaliz'+'edAssetAdd'],this)));}get['localizedA'+'sset'](){return this['_localized'+'Asset'];}set['autoLoad'](_0x21c46d){this['_autoLoad']!==_0x21c46d&&(this['_autoLoad']=_0x21c46d,this['_autoLoad']&&this['_localized'+'Asset']&&(this['_unbindLoc'+'alizedAsse'+'t'](),this['_bindLocal'+'izedAsset']()));}get['autoLoad'](){return this['_autoLoad'];}set['disableLoc'+'alization'](_0x2604f9){this['_disableLo'+'calization']!==_0x2604f9&&(this['_disableLo'+'calization']=_0x2604f9,this['_onSetLoca'+'le'](this['_app']['i18n']['locale']));}get['disableLoc'+'alization'](){return this['_disableLo'+'calization'];}['_bindDefau'+'ltAsset'](){const _0xba90d=this['_app']['assets']['get'](this['_defaultAs'+'set']);_0xba90d?this['_onDefault'+'AssetAdd'](_0xba90d):this['_app']['assets']['once']('add:'+this['_defaultAs'+'set'],this['_onDefault'+'AssetAdd'],this);}['_unbindDef'+'aultAsset'](){if(!this['_defaultAs'+'set'])return;this['_app']['assets']['off']('add:'+this['_defaultAs'+'set'],this['_onDefault'+'AssetAdd'],this);const _0x2403af=this['_app']['assets']['get'](this['_defaultAs'+'set']);_0x2403af&&(_0x2403af['off']('add:locali'+'zed',this['_onLocaleA'+'dd'],this),_0x2403af['off']('remove:loc'+'alized',this['_onLocaleR'+'emove'],this),_0x2403af['off']('remove',this['_onDefault'+'AssetRemov'+'e'],this));}['_onDefault'+'AssetAdd'](_0x2e2e8a){this['_defaultAs'+'set']===_0x2e2e8a['id']&&(_0x2e2e8a['on']('add:locali'+'zed',this['_onLocaleA'+'dd'],this),_0x2e2e8a['on']('remove:loc'+'alized',this['_onLocaleR'+'emove'],this),_0x2e2e8a['once']('remove',this['_onDefault'+'AssetRemov'+'e'],this));}['_onDefault'+'AssetRemov'+'e'](_0x5bda77){this['_defaultAs'+'set']===_0x5bda77['id']&&(_0x5bda77['off']('add:locali'+'zed',this['_onLocaleA'+'dd'],this),_0x5bda77['off']('remove:loc'+'alized',this['_onLocaleA'+'dd'],this),this['_app']['assets']['once']('add:'+this['_defaultAs'+'set'],this['_onDefault'+'AssetAdd'],this));}['_bindLocal'+'izedAsset'](){if(!this['_autoLoad'])return;const _0x57300e=this['_app']['assets']['get'](this['_localized'+'Asset']);_0x57300e&&(_0x57300e['on']('load',this['_onLocaliz'+'edAssetLoa'+'d'],this),_0x57300e['on']('change',this['_onLocaliz'+'edAssetCha'+'nge'],this),_0x57300e['on']('remove',this['_onLocaliz'+'edAssetRem'+'ove'],this),_0x57300e['resource']?this['_onLocaliz'+'edAssetLoa'+'d'](_0x57300e):this['_app']['assets']['load'](_0x57300e));}['_unbindLoc'+'alizedAsse'+'t'](){const _0x22a493=this['_app']['assets']['get'](this['_localized'+'Asset']);_0x22a493&&(_0x22a493['off']('load',this['_onLocaliz'+'edAssetLoa'+'d'],this),_0x22a493['off']('change',this['_onLocaliz'+'edAssetCha'+'nge'],this),_0x22a493['off']('remove',this['_onLocaliz'+'edAssetRem'+'ove'],this));}['_onLocaliz'+'edAssetAdd'](_0x499f57){this['_localized'+'Asset']===_0x499f57['id']&&this['_bindLocal'+'izedAsset']();}['_onLocaliz'+'edAssetLoa'+'d'](_0x332a34){this['fire']('load',_0x332a34);}['_onLocaliz'+'edAssetCha'+'nge'](_0x40197c,_0x10309e,_0x590d4f,_0x48b56c){this['fire']('change',_0x40197c,_0x10309e,_0x590d4f,_0x48b56c);}['_onLocaliz'+'edAssetRem'+'ove'](_0x3f7106){this['_localized'+'Asset']===_0x3f7106['id']&&(this['localizedA'+'sset']=this['_defaultAs'+'set']),this['fire']('remove',_0x3f7106);}['_onLocaleA'+'dd'](_0x21ac40,_0x49d305){this['_app']['i18n']['locale']===_0x21ac40&&this['_onSetLoca'+'le'](_0x21ac40);}['_onLocaleR'+'emove'](_0x440e59,_0x35e1d6){this['_app']['i18n']['locale']===_0x440e59&&this['_onSetLoca'+'le'](_0x440e59);}['_onSetLoca'+'le'](_0x41fb77){if(!this['_defaultAs'+'set']){this['localizedA'+'sset']=null;return;}const _0x1d0176=this['_app']['assets']['get'](this['_defaultAs'+'set']);if(!_0x1d0176||this['_disableLo'+'calization']){this['localizedA'+'sset']=this['_defaultAs'+'set'];return;}const _0x33bfca=_0x1d0176['getLocaliz'+'edAssetId'](_0x41fb77);if(!_0x33bfca){this['localizedA'+'sset']=this['_defaultAs'+'set'];return;}this['localizedA'+'sset']=_0x33bfca;}['destroy'](){this['defaultAss'+'et']=null,this['_app']['i18n']['off'](wa['EVENT_CHAN'+'GE'],this['_onSetLoca'+'le'],this),this['off']();}}const Rh='msdf',dR='bitmap',Mo=0xa12+-0x1*0x2072+0x1660,an=-0x6c7*-0x5+-0x2069*-0x1+-0x424b,Du=0xa97*-0x1+-0x1242+0x1cdb,Zv=-0x2*0xdb5+0x1111+0xa5c,Iu=0x1e20+-0x1287+-0xb95,Lu=-0x1*0x1f52+-0x2*0xc75+0x3841*0x1,Ru=-0xb*-0x19c+-0x125b+-0xad*-0x1,Ou=-0x1*0x1ca5+0xa6+0x11*0x1a6,Xg=0x223e+-0x645+-0x1bf1,fR='\x20\x09\x0a\x0d\x0b\x0c',uR=/[\w|/]/;class pR{constructor(_0x4251f6){this['_symbols']=_0x4251f6,this['_index']=-0x1be*-0x1+-0x1948+0x2*0xbc5,this['_last']=0x1*0x266c+0x2*0xf9+0x1*-0x285e,this['_cur']=this['_symbols']['length']>-0x1bfb+0x208a+0x48f*-0x1?this['_symbols'][0x1*-0x11f5+-0x4a*0x67+0x2fbb]:null,this['_buf']=[],this['_mode']='text',this['_error']=null;}['read'](){let _0x27dd16=this['_read']();for(;_0x27dd16===Xg;)_0x27dd16=this['_read']();return _0x27dd16!==Mo&&_0x27dd16!==an&&(this['_last']=this['_index']),_0x27dd16;}['buf'](){return this['_buf'];}['last'](){return this['_last'];}['error'](){return this['_error'];}['debugPrint'](){const _0x52c276=['EOF','ERROR','TEXT','OPEN_BRACK'+'ET','CLOSE_BRAC'+'KET','EQUALS','STRING','IDENTIFIER','WHITESPACE'];let _0x2e1c36=this['read'](),_0x510772='';for(;_0x510772+=(_0x510772['length']>-0x9*0xc+-0x625+0x691?'\x0a':'')+_0x52c276[_0x2e1c36]+'\x20\x27'+this['buf']()['join']('')+'\x27',!(_0x2e1c36===Mo||_0x2e1c36===an);)_0x2e1c36=this['read']();return _0x510772;}['_read'](){return this['_buf']=[],this['_eof']()?Mo:this['_mode']==='text'?this['_text']():this['_tag']();}['_text'](){for(;;)switch(this['_cur']){case null:return this['_buf']['length']>0xc6b+0xff*-0x12+-0x11*-0x53?Du:Mo;case'[':return this['_mode']='tag',this['_buf']['length']>0x1a94+0x61d+-0x20b1?Du:this['_tag']();case'\x5c':switch(this['_next'](),this['_cur']){case'[':this['_store']();break;default:this['_output']('\x5c');break;}break;default:this['_store']();break;}}['_tag'](){switch(this['_cur']){case null:return this['_error']='unexpected'+'\x20end\x20of\x20in'+'put\x20readin'+'g\x20tag',an;case'[':return this['_store'](),Zv;case']':return this['_store'](),this['_mode']='text',Iu;case'=':return this['_store'](),Lu;case'\x20':case'\x09':case'\x0a':case'\x0d':case'\x0b':case'\x0c':return this['_whitespac'+'e']();case'\x22':return this['_string']();default:return this['_isIdentif'+'ierSymbol'](this['_cur'])?this['_identifie'+'r']():(this['_error']='unrecogniz'+'ed\x20charact'+'er',an);}}['_whitespac'+'e'](){for(this['_store']();fR['indexOf'](this['_cur'])!==-(-0x1ad5*-0x1+0x14*0xc5+0x1c*-0x182);)this['_store']();return Xg;}['_string'](){for(this['_next']();;)switch(this['_cur']){case null:return this['_error']='unexpected'+'\x20end\x20of\x20in'+'put\x20readin'+'g\x20string',an;case'\x22':return this['_next'](),Ru;default:this['_store']();break;}}['_identifie'+'r'](){for(this['_store']();this['_cur']!==null&&this['_isIdentif'+'ierSymbol'](this['_cur']);)this['_store']();return Ou;}['_isIdentif'+'ierSymbol'](_0x228993){return _0x228993['length']===0x2255+-0xfe5+-0x126f&&_0x228993['match'](uR)!==null;}['_eof'](){return this['_cur']===null;}['_next'](){return this['_eof']()||(this['_index']++,this['_cur']=this['_index']<this['_symbols']['length']?this['_symbols'][this['_index']]:null),this['_cur'];}['_store'](){return this['_buf']['push'](this['_cur']),this['_next']();}['_output'](_0x25e2c9){this['_buf']['push'](_0x25e2c9);}}class mR{constructor(_0x3483e2){this['_scanner']=new pR(_0x3483e2),this['_error']=null;}['parse'](_0x58084a,_0x2d5506){for(;;)switch(this['_scanner']['read']()){case Mo:return!(0x191c+-0x180f+-0x10d);case an:return!(0x645*-0x2+-0xf29+-0x12*-0x18a);case Du:Array['prototype']['push']['apply'](_0x58084a,this['_scanner']['buf']());break;case Zv:if(!this['_parseTag'](_0x58084a,_0x2d5506))return!(0x1f49+0x6f+-0x1*0x1fb7);break;default:return!(0x25c9*-0x1+0x1df*0x2+0x220c);}}['error'](){return'Error\x20eval'+'uating\x20mar'+'kup\x20at\x20#'+this['_scanner']['last']()['toString']()+'\x20('+(this['_scanner']['error']()||this['_error'])+')';}['_parseTag'](_0x270bc3,_0x15649c){let _0x5aa7ba=this['_scanner']['read']();if(_0x5aa7ba!==Ou)return this['_error']='expected\x20i'+'dentifier',!(0x1e0*-0x10+-0x1*0x20fb+0xfbf*0x4);const _0x5d2ac6=this['_scanner']['buf']()['join']('');if(_0x5d2ac6[-0x1066+-0xafb+0x2b*0xa3]==='/'){for(let _0x2cc758=_0x15649c['length']-(-0x1*0x10f1+0x122*-0x1d+-0x18e6*-0x2);_0x2cc758>=-0x132e+-0x1*-0xc25+-0x1*-0x709;--_0x2cc758)if(_0x5d2ac6==='/'+_0x15649c[_0x2cc758]['name']&&_0x15649c[_0x2cc758]['end']===null)return _0x15649c[_0x2cc758]['end']=_0x270bc3['length'],_0x5aa7ba=this['_scanner']['read'](),_0x5aa7ba!==Iu?(this['_error']='expected\x20c'+'lose\x20brack'+'et',!(0x20e3+-0x351*0x5+0x6b*-0x27)):!(-0xea1+0xd96+0x10b);return this['_error']='failed\x20to\x20'+'find\x20match'+'ing\x20tag',!(0x2c*0xbc+0x1*0x202a+-0x4079);}const _0x43188d={'name':_0x5d2ac6,'value':null,'attributes':{},'start':_0x270bc3['length'],'end':null};if(_0x5aa7ba=this['_scanner']['read'](),_0x5aa7ba===Lu){if(_0x5aa7ba=this['_scanner']['read'](),_0x5aa7ba!==Ru)return this['_error']='expected\x20s'+'tring',!(-0x3*0x4a9+0x12fb*-0x1+0x57*0x61);_0x43188d['value']=this['_scanner']['buf']()['join'](''),_0x5aa7ba=this['_scanner']['read']();}for(;;){switch(_0x5aa7ba){case Iu:return _0x15649c['push'](_0x43188d),!(0xb6*0x34+0x2c5*-0xb+-0x3*0x22b);case Ou:{const _0x557608=this['_scanner']['buf']()['join']('');if(_0x5aa7ba=this['_scanner']['read'](),_0x5aa7ba!==Lu)return this['_error']='expected\x20e'+'quals',!(0x1*-0x20b5+-0x6*0x5e7+-0x4*-0x1108);if(_0x5aa7ba=this['_scanner']['read'](),_0x5aa7ba!==Ru)return this['_error']='expected\x20s'+'tring',!(0x5ce*0x5+-0x1d*0x17+-0x2a*0xa1);const _0x201bd4=this['_scanner']['buf']()['join']('');_0x43188d['attributes'][_0x557608]=_0x201bd4;break;}default:return this['_error']='expected\x20c'+'lose\x20brack'+'et\x20or\x20iden'+'tifier',!(0xbeb+0x48+-0xc32);}_0x5aa7ba=this['_scanner']['read']();}}}function Qv(_0x4184a2,_0x1f2a2e){for(const _0x29269d in _0x1f2a2e){if(!_0x1f2a2e['hasOwnProp'+'erty'](_0x29269d))continue;const _0xe1fb33=_0x1f2a2e[_0x29269d];_0xe1fb33 instanceof Object?(_0x4184a2['hasOwnProp'+'erty'](_0x29269d)||(_0x4184a2[_0x29269d]={}),Qv(_0x4184a2[_0x29269d],_0x1f2a2e[_0x29269d])):_0x4184a2[_0x29269d]=_0xe1fb33;}}function _R(_0x3137ad){if(_0x3137ad['length']===0x175e+0x1*-0x179f+0x41)return null;const _0x2511d5={};for(let _0x189bed=0x23a7*-0x1+0x2d*-0x4e+0x315d*0x1;_0x189bed<_0x3137ad['length'];++_0x189bed){const _0x14fcf1=_0x3137ad[_0x189bed],_0x5aeebd={};_0x5aeebd[_0x14fcf1['name']]={'value':_0x14fcf1['value'],'attributes':_0x14fcf1['attributes']},Qv(_0x2511d5,_0x5aeebd);}return _0x2511d5;}function gR(_0xddaa74,_0x25a73a){if(_0xddaa74['length']===0xae7*-0x2+-0xdf9+0x23c7)return null;const _0x1ea21c={};for(let _0x4d72e4=-0x397+0x1*-0x1e9d+0x2234;_0x4d72e4<_0xddaa74['length'];++_0x4d72e4){const _0x12b3b1=_0xddaa74[_0x4d72e4];_0x1ea21c['hasOwnProp'+'erty'](_0x12b3b1['start'])?_0x1ea21c[_0x12b3b1['start']]['open']===null?_0x1ea21c[_0x12b3b1['start']]['open']=[_0x12b3b1]:_0x1ea21c[_0x12b3b1['start']]['open']['push'](_0x12b3b1):_0x1ea21c[_0x12b3b1['start']]={'open':[_0x12b3b1],'close':null},_0x1ea21c['hasOwnProp'+'erty'](_0x12b3b1['end'])?_0x1ea21c[_0x12b3b1['end']]['close']===null?_0x1ea21c[_0x12b3b1['end']]['close']=[_0x12b3b1]:_0x1ea21c[_0x12b3b1['end']]['close']['push'](_0x12b3b1):_0x1ea21c[_0x12b3b1['end']]={'open':null,'close':[_0x12b3b1]};}let _0x75a446=[];function _0x3fabdc(_0x2f0d65){_0x75a446=_0x75a446['filter'](_0x3ec871=>_0x2f0d65['find'](_0x342ad9=>_0x342ad9===_0x3ec871)===void(0x34*0x49+0x1dc+-0x2*0x858));}function _0x470105(_0x3fcf96){for(let _0x3a1cd9=-0x4f*-0x6d+0x815*-0x3+-0x4b2*0x2;_0x3a1cd9<_0x3fcf96['length'];++_0x3a1cd9)_0x75a446['push'](_0x3fcf96[_0x3a1cd9]);}const _0x11d039=Object['keys'](_0x1ea21c)['sort']((_0x410817,_0x50d06f)=>_0x410817-_0x50d06f),_0x52a571=[];for(let _0x4ae8f9=-0x1165*0x1+0x2569+-0x1404;_0x4ae8f9<_0x11d039['length'];++_0x4ae8f9){const _0x28067f=_0x1ea21c[_0x11d039[_0x4ae8f9]];_0x28067f['close']!==null&&_0x3fabdc(_0x28067f['close']),_0x28067f['open']!==null&&_0x470105(_0x28067f['open']),_0x52a571['push']({'start':_0x11d039[_0x4ae8f9],'tags':_R(_0x75a446)});}const _0x479c5d=[];let _0x2074ca=null;for(let _0x1a518d=-0x665*0x3+-0xfea+0xbb3*0x3;_0x1a518d<_0x52a571['length'];++_0x1a518d){const _0x4e13b7=_0x52a571[_0x1a518d];for(;_0x479c5d['length']<_0x4e13b7['start'];)_0x479c5d['push'](_0x2074ca?_0x2074ca['tags']:null);_0x2074ca=_0x4e13b7;}for(;_0x479c5d['length']<_0x25a73a;)_0x479c5d['push'](null);return _0x479c5d;}function SR(_0x2f9243){const _0x555d8b=new mR(_0x2f9243),_0x254b57=[],_0x4c56ef=[];if(!_0x555d8b['parse'](_0x254b57,_0x4c56ef))return console['warn'](_0x555d8b['error']()),{'symbols':_0x2f9243,'tags':null};const _0x4931a3=_0x4c56ef['find'](_0xb77293=>_0xb77293['end']===null);if(_0x4931a3)return console['warn']('Markup\x20err'+'or:\x20found\x20'+'unclosed\x20t'+'ag=\x27'+_0x4931a3['name']+'\x27'),{'symbols':_0x2f9243,'tags':null};const _0x22ab61=gR(_0x4c56ef,_0x254b57['length']);return{'symbols':_0x254b57,'tags':_0x22ab61};}class yR{static['evaluate'](_0x1aafe2){return SR(_0x1aafe2);}}class vR{constructor(){this['count']=0x1ff3+-0x2367+0x1a*0x22,this['quad']=-0x1510+-0x2512+0x3a22,this['lines']={},this['positions']=[],this['normals']=[],this['uvs']=[],this['colors']=[],this['indices']=[],this['outlines']=[],this['shadows']=[],this['meshInstan'+'ce']=null;}}function xR(_0x3eaf07,_0x311556){const _0xd266eb=new Ge(_0x3eaf07);return _0xd266eb['setPositio'+'ns'](_0x311556['positions']),_0xd266eb['setNormals'](_0x311556['normals']),_0xd266eb['setColors3'+'2'](_0x311556['colors']),_0xd266eb['setUvs'](-0x234+0x2eb+0x3*-0x3d,_0x311556['uvs']),_0xd266eb['setIndices'](_0x311556['indices']),_0xd266eb['setVertexS'+'tream'](Ko,_0x311556['outlines'],0xa78+-0xd95*0x1+0x320,void(-0x4*-0x4b1+-0x2d*-0x7c+-0xb*0x3b0),Ve,!(0x2197+-0x1093+-0x1103)),_0xd266eb['setVertexS'+'tream'](Zo,_0x311556['shadows'],0x2*-0x28e+0xa03*-0x3+0x2328,void(0x689*0x3+-0x1c6+0xb*-0x19f),Ve,!(0x1686+0x53*-0x6b+-0x2*-0x616)),_0xd266eb['update'](),_0xd266eb;}const qg=/^[\r\n]$/,TR=/^[ \t]$/,jg=/^[ \t\-]|\u200b$/,wR=/^[a-z0-9]$/i,Yg=/^[\u1100-\u11ff]|[\u3000-\u9fff\ua960-\ua97f]|[\uac00-\ud7ff]$/,ER=/^[]$/,bR=['','','','','','','','','','','','',''],AR={'width':0x0,'height':0x0,'xadvance':0x0,'xoffset':0x0,'yoffset':0x0},Kg=new ie(),CR=new J(),We=new ie();class PR{constructor(_0x2a082d){this['_element']=_0x2a082d,this['_system']=_0x2a082d['system'],this['_entity']=_0x2a082d['entity'],this['_text']='',this['_symbols']=[],this['_colorPale'+'tte']=[],this['_outlinePa'+'lette']=[],this['_shadowPal'+'ette']=[],this['_symbolCol'+'ors']=null,this['_symbolOut'+'lineParams']=null,this['_symbolSha'+'dowParams']=null,this['_i18nKey']=null,this['_fontAsset']=new hR(this['_system']['app']),this['_fontAsset']['disableLoc'+'alization']=!(0x255d+0x31e+0xf1*-0x2b),this['_fontAsset']['on']('load',this['_onFontLoa'+'d'],this),this['_fontAsset']['on']('change',this['_onFontCha'+'nge'],this),this['_fontAsset']['on']('remove',this['_onFontRem'+'ove'],this),this['_font']=null,this['_color']=new ie(-0x1807+0x25f2+0x1*-0xdea,-0x143c+-0x2*0x557+0x1*0x1eeb,-0x75e*0x1+0x2576+-0x1e17,-0x2232+-0x7e3+0x2a16),this['_colorUnif'+'orm']=new Float32Array(0x1b63+-0x9c+-0x1ac4),this['_spacing']=-0x133f+-0xbfc*-0x1+0x744,this['_fontSize']=-0x142b+-0x38b*0x7+0x2*0x168c,this['_fontMinY']=-0x3d*-0xe+-0x2*0xc8e+-0xae3*-0x2,this['_fontMaxY']=-0x315+0x12ff+-0xfea,this['_originalF'+'ontSize']=0x17*0x53+0x1265+-0x19ba,this['_maxFontSi'+'ze']=-0xb30+-0x243d+-0x1*-0x2f8d,this['_minFontSi'+'ze']=-0x19*-0x15d+0x83*-0xb+-0x44*0x6b,this['_autoFitWi'+'dth']=!(-0x1def+-0x23ab+0x5*0xd1f),this['_autoFitHe'+'ight']=!(0x1e0f+0x1*-0xbee+-0x1220),this['_maxLines']=-(0x18a0+0x297+-0x1b36),this['_lineHeigh'+'t']=0x56d+0x186f+0x16*-0x15a,this['_scaledLin'+'eHeight']=-0x1d*0xbf+-0xdc0+0x2383*0x1,this['_wrapLines']=!(0x22e9+-0x37*0x6b+-0x153*0x9),this['_drawOrder']=0x2*-0x1205+0x1953+0x1*0xab7,this['_alignment']=new J(0x1ed9+-0x2f*-0x4f+-0x78f*0x6+0.5,-0x8a5+-0x1*0xc94+0x1539+0.5),this['_autoWidth']=!(0x1777*-0x1+0xa82+-0x1*-0xcf5),this['_autoHeigh'+'t']=!(0x943*-0x1+0x82d*0x1+0x116),this['width']=0x1a42+-0x3*-0xc84+0x3fce*-0x1,this['height']=-0xb20+0x1b24+-0x1004,this['_node']=new Ie(),this['_model']=new sr(),this['_model']['graph']=this['_node'],this['_entity']['addChild'](this['_node']),this['_meshInfo']=[],this['_material']=null,this['_aabbDirty']=!(0x16d9+-0xd4*-0x1+-0x17ad),this['_aabb']=new De(),this['_noResize']=!(-0x4*-0x3e6+-0x776+-0x821*0x1),this['_currentMa'+'terialType']=null,this['_maskedMat'+'erialSrc']=null,this['_rtlReorde'+'r']=!(-0xc4a*0x1+-0x31*-0x8b+-0xe50),this['_unicodeCo'+'nverter']=!(0xdd0+-0xf*-0x15d+-0x36d*0xa),this['_rtl']=!(-0x656+0x33e+0x319),this['_outlineCo'+'lor']=new ie(-0xecf+-0xac5+0x1994,0xce5+0x263b+-0x3320,0x22*0x1a+-0x2*-0x11c3+-0x26fa,-0xc03+-0x1*0x198d+0x1*0x2591),this['_outlineCo'+'lorUniform']=new Float32Array(0x4ad+0xb00+0xfa9*-0x1),this['_outlineTh'+'icknessSca'+'le']=-0x3*0x90a+0xa7*0x25+0x1*0x2fb+0.2,this['_outlineTh'+'ickness']=0x1b2e+0x140*0x7+-0xe*0x291,this['_shadowCol'+'or']=new ie(0x80a+0x248e+0x8*-0x593,0x1*0x144c+-0x7*-0x42d+-0x3187,0x2489+0x49*0x41+-0x3712,0xd47+-0xb*0x27b+0x11*0xd3),this['_shadowCol'+'orUniform']=new Float32Array(0xd0*-0x17+0xd*-0x2b7+0x1*0x35ff),this['_shadowOff'+'setScale']=-0x126b+-0x2161+0x33cc+0.005,this['_shadowOff'+'set']=new J(0xf55*-0x1+-0x6e3*-0x3+-0x554,0x1*-0x1ee5+-0x2f*0x4f+0x2d66),this['_shadowOff'+'setUniform']=new Float32Array(-0x1c19+0x4*0x22b+0x136f),this['_enableMar'+'kup']=!(0x1*0x305+-0x283*0xe+0x2026),this['_onScreenC'+'hange'](this['_element']['screen']),_0x2a082d['on']('resize',this['_onParentR'+'esize'],this),_0x2a082d['on']('set:screen',this['_onScreenC'+'hange'],this),_0x2a082d['on']('screen:set'+':screenspa'+'ce',this['_onScreenS'+'paceChange'],this),_0x2a082d['on']('set:drawor'+'der',this['_onDrawOrd'+'erChange'],this),_0x2a082d['on']('set:pivot',this['_onPivotCh'+'ange'],this),this['_system']['app']['i18n']['on'](wa['EVENT_CHAN'+'GE'],this['_onLocaleS'+'et'],this),this['_system']['app']['i18n']['on']('data:add',this['_onLocaliz'+'ationData'],this),this['_system']['app']['i18n']['on']('data:remov'+'e',this['_onLocaliz'+'ationData'],this),this['_rangeStar'+'t']=-0x196c+-0x337*-0x1+0x1635,this['_rangeEnd']=0xb*0xfd+-0xb7*-0x3+-0xd04;}['destroy'](){this['_setMateri'+'al'](null),this['_model']&&(this['_element']['removeMode'+'lFromLayer'+'s'](this['_model']),this['_model']['destroy'](),this['_model']=null),this['_fontAsset']['destroy'](),this['font']=null,this['_element']['off']('resize',this['_onParentR'+'esize'],this),this['_element']['off']('set:screen',this['_onScreenC'+'hange'],this),this['_element']['off']('screen:set'+':screenspa'+'ce',this['_onScreenS'+'paceChange'],this),this['_element']['off']('set:drawor'+'der',this['_onDrawOrd'+'erChange'],this),this['_element']['off']('set:pivot',this['_onPivotCh'+'ange'],this),this['_system']['app']['i18n']['off'](wa['EVENT_CHAN'+'GE'],this['_onLocaleS'+'et'],this),this['_system']['app']['i18n']['off']('data:add',this['_onLocaliz'+'ationData'],this),this['_system']['app']['i18n']['off']('data:remov'+'e',this['_onLocaliz'+'ationData'],this);}['_onParentR'+'esize'](_0x3a873c,_0x22806a){this['_noResize']||this['_font']&&this['_updateTex'+'t']();}['_onScreenC'+'hange'](_0x4c9662){_0x4c9662?this['_updateMat'+'erial'](_0x4c9662['screen']['screenSpac'+'e']):this['_updateMat'+'erial'](!(-0x2294+0x1c84+-0x1*-0x611));}['_onScreenS'+'paceChange'](_0x180417){this['_updateMat'+'erial'](_0x180417);}['_onDrawOrd'+'erChange'](_0x2d9969){if(this['_drawOrder']=_0x2d9969,this['_model']){for(let _0x1e55b9=-0x1*-0x269b+-0x4e1*-0x8+-0x4da3,_0x4619e1=this['_model']['meshInstan'+'ces']['length'];_0x1e55b9<_0x4619e1;_0x1e55b9++)this['_model']['meshInstan'+'ces'][_0x1e55b9]['drawOrder']=_0x2d9969;}}['_onPivotCh'+'ange'](_0x5bfb1e){this['_font']&&this['_updateTex'+'t']();}['_onLocaleS'+'et'](_0x3c3433){if(this['_i18nKey']){if(this['fontAsset']){const _0x20c63e=this['_system']['app']['assets']['get'](this['fontAsset']);(!_0x20c63e||!_0x20c63e['resource']||_0x20c63e['resource']!==this['_font'])&&(this['font']=null);}this['_resetLoca'+'lizedText']();}}['_onLocaliz'+'ationData'](_0x5ac2e2,_0x472d23){this['_i18nKey']&&_0x472d23[this['_i18nKey']]&&this['_resetLoca'+'lizedText']();}['_resetLoca'+'lizedText'](){this['_setText'](this['_system']['app']['i18n']['getText'](this['_i18nKey']));}['_setText'](_0xc3413f){if(this['unicodeCon'+'verter']){const _0x1fe7db=this['_system']['getUnicode'+'Converter']();_0x1fe7db?_0xc3413f=_0x1fe7db(_0xc3413f):console['warn']('Element\x20cr'+'eated\x20with'+'\x20unicodeCo'+'nverter\x20op'+'tion\x20but\x20n'+'o\x20unicodeC'+'onverter\x20f'+'unction\x20re'+'gistered');}this['_text']!==_0xc3413f&&(this['_font']&&this['_updateTex'+'t'](_0xc3413f),this['_text']=_0xc3413f);}['_updateTex'+'t'](_0x32bbd9){let _0x2789d8;if(_0x32bbd9===void(0x1*-0xd32+0x23e4*0x1+0x46*-0x53)&&(_0x32bbd9=this['_text']),this['_symbols']=Hc['getSymbols'](_0x32bbd9['normalize']?_0x32bbd9['normalize']('NFC'):_0x32bbd9),this['_symbols']['length']===0x24de+-0x616*0x2+-0x18b2&&(this['_symbols']=['\x20']),this['_enableMar'+'kup']){const _0x3d68f0=yR['evaluate'](this['_symbols']);this['_symbols']=_0x3d68f0['symbols'],_0x2789d8=_0x3d68f0['tags']||[];}if(this['_rtlReorde'+'r']){const _0x53b5a5=this['_system']['app']['systems']['element']['getRtlReor'+'der']();if(_0x53b5a5){const _0xf54043=_0x53b5a5(this['_symbols']);this['_rtl']=_0xf54043['rtl'],this['_symbols']=_0xf54043['mapping']['map'](function(_0x41c0b9){return this['_symbols'][_0x41c0b9];},this),_0x2789d8&&(_0x2789d8=_0xf54043['mapping']['map'](_0x4b7e1a=>_0x2789d8[_0x4b7e1a]));}else console['warn']('Element\x20cr'+'eated\x20with'+'\x20rtlReorde'+'r\x20option\x20b'+'ut\x20no\x20rtlR'+'eorder\x20fun'+'ction\x20regi'+'stered');}else this['_rtl']=!(-0x26df+-0x60*0x2f+-0x71*-0x80);const _0x1992d4=(_0x4c4987,_0x22946c)=>_0x4c4987['toString'](!(-0x227c+-0x664+-0xa38*-0x4))['toLowerCas'+'e']()+':'+_0x22946c['toFixed'](-0x2598+-0x152a+0x1d62*0x2),_0x32c95e=(_0x84e8b7,_0x4f4832)=>_0x84e8b7['toString'](!(0x113c+0x132b+-0x2467*0x1))['toLowerCas'+'e']()+':'+_0x4f4832['x']['toFixed'](-0x86*0x17+-0xc0*0x33+-0x4*-0xc93)+':'+_0x4f4832['y']['toFixed'](-0x77e+-0x1096+0x1816);if(_0x2789d8){const _0x3603b6={},_0x34b942={},_0x4ffb97={};this['_colorPale'+'tte']=[Math['round'](this['_color']['r']*(-0x2063+-0xa61*0x3+-0xc7*-0x53)),Math['round'](this['_color']['g']*(0xd*0x11e+0x1cc1+-0x2a48)),Math['round'](this['_color']['b']*(0x1c09+-0x1*0x2217+0x70d))],this['_outlinePa'+'lette']=[Math['round'](this['_outlineCo'+'lor']['r']*(0x6f+-0x1b56*0x1+0x1*0x1be6)),Math['round'](this['_outlineCo'+'lor']['g']*(0x88f*0x3+-0xd*-0x2d4+-0x3d72)),Math['round'](this['_outlineCo'+'lor']['b']*(-0x21b5*0x1+0x146c+0xe48*0x1)),Math['round'](this['_outlineCo'+'lor']['a']*(-0x4c*0x21+0x11*-0x1f3+-0x1*-0x2bee)),Math['round'](this['_outlineTh'+'ickness']*(0xc*0xbf+0x7*-0x35b+0xf88))],this['_shadowPal'+'ette']=[Math['round'](this['_shadowCol'+'or']['r']*(0xc09+0xf46+-0x1a50)),Math['round'](this['_shadowCol'+'or']['g']*(-0x18ad+-0xf87+0xc7*0x35)),Math['round'](this['_shadowCol'+'or']['b']*(-0x2*0xd3+-0x1*-0xa03+-0x75e)),Math['round'](this['_shadowCol'+'or']['a']*(-0x4e3+-0x4a3*-0x4+-0x655*0x2)),Math['round'](this['_shadowOff'+'set']['x']*(-0xbcb*0x1+0xbf5*0x2+-0xba0)),Math['round'](this['_shadowOff'+'set']['y']*(0x1*0x215+0x1d29+0x1*-0x1ebf))],this['_symbolCol'+'ors']=[],this['_symbolOut'+'lineParams']=[],this['_symbolSha'+'dowParams']=[],_0x3603b6[this['_color']['toString'](!(-0xf5e*0x2+0x4d*0x45+0x9fc))['toLowerCas'+'e']()]=0x134+0x5*0x685+0x11*-0x1fd,_0x34b942[_0x1992d4(this['_outlineCo'+'lor'],this['_outlineTh'+'ickness'])]=-0x57*-0x1+0x3*0x3d+0x1b*-0xa,_0x4ffb97[_0x32c95e(this['_shadowCol'+'or'],this['_shadowOff'+'set'])]=-0x2478+0x10d*-0x1+-0x1*-0x2585;for(let _0x2806fb=-0x1*0x107d+0xf*0x19+0x6*0x281,_0x233b58=this['_symbols']['length'];_0x2806fb<_0x233b58;++_0x2806fb){const _0x1f28c3=_0x2789d8[_0x2806fb];let _0x4c0399=0x5ad*0x1+0x3c3*0x1+0x4*-0x25c;if(_0x1f28c3&&_0x1f28c3['color']&&_0x1f28c3['color']['value']){const _0x1cfa4a=_0x1f28c3['color']['value'];if(_0x1cfa4a['length']===-0x684+0x15e6*-0x1+0x329*0x9&&_0x1cfa4a[-0x3*0x9ed+0x31a*-0x6+0x3063]==='#'){const _0x1896ba=_0x1cfa4a['substring'](0x1*-0x1307+-0x19d6*0x1+0x2cde)['toLowerCas'+'e']();_0x3603b6['hasOwnProp'+'erty'](_0x1896ba)?_0x4c0399=_0x3603b6[_0x1896ba]:/^[0-9a-f]{6}$/['test'](_0x1896ba)&&(_0x4c0399=this['_colorPale'+'tte']['length']/(0x1ab4+-0x2f9*0x1+-0x17b8),_0x3603b6[_0x1896ba]=_0x4c0399,this['_colorPale'+'tte']['push'](parseInt(_0x1896ba['substring'](-0x1*0xbfd+0x4d1+-0x1cb*-0x4,0x71*-0x43+-0xe*0x10d+0x2c4b),0x3*-0xef+0xfe2+-0xd05)),this['_colorPale'+'tte']['push'](parseInt(_0x1896ba['substring'](0x23b2+0x154b+-0x38fb,-0x9*-0x387+-0x97*-0x2f+-0x3b74),0x20c6+-0x64a*0x2+-0x1422)),this['_colorPale'+'tte']['push'](parseInt(_0x1896ba['substring'](-0x1202+-0x20*-0xc8+-0x6fa,-0x1243+0x943+-0x2a*-0x37),-0x77*-0x27+0x1503+-0x3d*0xa4)));}}this['_symbolCol'+'ors']['push'](_0x4c0399);let _0x4c763a=0x92f*-0x3+0x1073*-0x2+-0x19*-0x26b;if(_0x1f28c3&&_0x1f28c3['outline']&&(_0x1f28c3['outline']['attributes']['color']||_0x1f28c3['outline']['attributes']['thickness'])){let _0x34d216=_0x1f28c3['outline']['attributes']['color']?Kg['fromString'](_0x1f28c3['outline']['attributes']['color']):this['_outlineCo'+'lor'],_0x46a19a=Number(_0x1f28c3['outline']['attributes']['thickness']);(Number['isNaN'](_0x34d216['r'])||Number['isNaN'](_0x34d216['g'])||Number['isNaN'](_0x34d216['b'])||Number['isNaN'](_0x34d216['a']))&&(_0x34d216=this['_outlineCo'+'lor']),Number['isNaN'](_0x46a19a)&&(_0x46a19a=this['_outlineTh'+'ickness']);const _0x27db08=_0x1992d4(_0x34d216,_0x46a19a);_0x34b942['hasOwnProp'+'erty'](_0x27db08)?_0x4c763a=_0x34b942[_0x27db08]:(_0x4c763a=this['_outlinePa'+'lette']['length']/(-0x34c*-0x3+-0x2242+0x1863),_0x34b942[_0x27db08]=_0x4c763a,this['_outlinePa'+'lette']['push'](Math['round'](_0x34d216['r']*(-0x3cd*-0x6+0x1c03*0x1+-0x31d2)),Math['round'](_0x34d216['g']*(-0x3ef*-0x4+-0x1*0x29f+0xb*-0x11a)),Math['round'](_0x34d216['b']*(-0x1047+-0x4c+-0x1*-0x1192)),Math['round'](_0x34d216['a']*(0x47*0x35+0x11*0x20a+-0x305e)),Math['round'](_0x46a19a*(0x7ad*0x3+0xe66+-0x246e))));}this['_symbolOut'+'lineParams']['push'](_0x4c763a);let _0x17c552=-0x1be8+-0x1*0xc4e+0x2836*0x1;if(_0x1f28c3&&_0x1f28c3['shadow']&&(_0x1f28c3['shadow']['attributes']['color']||_0x1f28c3['shadow']['attributes']['offset']||_0x1f28c3['shadow']['attributes']['offsetX']||_0x1f28c3['shadow']['attributes']['offsetY'])){let _0x5f240a=_0x1f28c3['shadow']['attributes']['color']?Kg['fromString'](_0x1f28c3['shadow']['attributes']['color']):this['_shadowCol'+'or'];const _0x26f903=Number(_0x1f28c3['shadow']['attributes']['offset']),_0x28c210=Number(_0x1f28c3['shadow']['attributes']['offsetX']),_0x5aed20=Number(_0x1f28c3['shadow']['attributes']['offsetY']);(Number['isNaN'](_0x5f240a['r'])||Number['isNaN'](_0x5f240a['g'])||Number['isNaN'](_0x5f240a['b'])||Number['isNaN'](_0x5f240a['a']))&&(_0x5f240a=this['_shadowCol'+'or']);const _0x1d4fcf=CR['set'](Number['isNaN'](_0x28c210)?Number['isNaN'](_0x26f903)?this['_shadowOff'+'set']['x']:_0x26f903:_0x28c210,Number['isNaN'](_0x5aed20)?Number['isNaN'](_0x26f903)?this['_shadowOff'+'set']['y']:_0x26f903:_0x5aed20),_0x2490b8=_0x32c95e(_0x5f240a,_0x1d4fcf);_0x4ffb97['hasOwnProp'+'erty'](_0x2490b8)?_0x17c552=_0x4ffb97[_0x2490b8]:(_0x17c552=this['_shadowPal'+'ette']['length']/(-0x2452+0x18d*-0xd+0x3881),_0x4ffb97[_0x2490b8]=_0x17c552,this['_shadowPal'+'ette']['push'](Math['round'](_0x5f240a['r']*(0x2*0xe99+0xc5*0x14+0x2b97*-0x1)),Math['round'](_0x5f240a['g']*(0x12ee+0x7ae+-0x199d)),Math['round'](_0x5f240a['b']*(-0x12d9+-0x1321+0x26f9)),Math['round'](_0x5f240a['a']*(0x2512+-0x230f+0x41*-0x4)),Math['round'](_0x1d4fcf['x']*(0x6a2*-0x3+-0x23fe+-0x5*-0xb47)),Math['round'](_0x1d4fcf['y']*(0x10d7+0x649*-0x1+-0xa0f))));}this['_symbolSha'+'dowParams']['push'](_0x17c552);}}else this['_colorPale'+'tte']=[],this['_symbolCol'+'ors']=null,this['_symbolOut'+'lineParams']=null,this['_symbolSha'+'dowParams']=null;this['_updateMat'+'erialEmiss'+'ive'](),this['_updateMat'+'erialOutli'+'ne'](),this['_updateMat'+'erialShado'+'w']();const _0x5ee527=this['_calculate'+'CharsPerTe'+'xture']();let _0x3932fb=!(-0x536+0x1019*-0x1+0x1550);const _0x634109=this['_element'],_0x413b49=_0x634109['_isScreenS'+'pace'](),_0x2b043b=_0x634109['_isScreenC'+'ulled'](),_0x42c50f=function(_0x2061e0){return _0x634109['isVisibleF'+'orCamera'](_0x2061e0);};for(let _0x370e51=-0x53*-0x3b+-0x8d2+0xcb*-0xd,_0x1083b8=this['_meshInfo']['length'];_0x370e51<_0x1083b8;_0x370e51++){const _0x3e05ca=_0x5ee527[_0x370e51]||-0x3*-0xa17+0x2b*-0xd3+0x52c,_0x32ce21=this['_meshInfo'][_0x370e51];if(_0x32ce21['count']!==_0x3e05ca){if(_0x3932fb||(_0x634109['removeMode'+'lFromLayer'+'s'](this['_model']),_0x3932fb=!(0x978+0x1*0x9b1+-0x1329)),_0x32ce21['count']=_0x3e05ca,_0x32ce21['positions']['length']=_0x32ce21['normals']['length']=_0x3e05ca*(-0x1251+-0x6*-0x53f+-0xd26)*(-0x37*0x62+0x211e+0x2*-0x606),_0x32ce21['indices']['length']=_0x3e05ca*(-0xaaf+0x14*0x1d0+-0x198e*0x1)*(-0x2185*0x1+-0x1454*-0x1+0xd33),_0x32ce21['uvs']['length']=_0x3e05ca*(-0x1630+-0x40d*-0x3+0x3*0x359)*(-0xc7a+0x1ff9+-0x137b),_0x32ce21['colors']['length']=_0x3e05ca*(-0x4d9*-0x5+0x1d6+-0x1a0f)*(-0x2*-0xe33+0x1efb+-0x3b5d),_0x32ce21['outlines']['length']=_0x3e05ca*(-0x2fc+0x1*0x2401+-0x2101)*(-0xe74+-0x2109+0x2f80),_0x32ce21['shadows']['length']=_0x3e05ca*(0x7f4+0x2d1*-0x7+-0x14f*-0x9)*(-0x1*-0xf59+-0xa9a+-0x4bc),_0x32ce21['meshInstan'+'ce']&&this['_removeMes'+'hInstance'](_0x32ce21['meshInstan'+'ce']),_0x3e05ca===-0xc3c+-0x51+-0x99*-0x15){_0x32ce21['meshInstan'+'ce']=null;continue;}for(let _0x36ac97=-0x147b+-0x12*0x81+0x1d8d;_0x36ac97<_0x3e05ca;_0x36ac97++)_0x32ce21['indices'][_0x36ac97*(-0x2121+0xcc4+0x8*0x28c)*(0x1*-0x844+0x53e+0x308)+(0x572+0xbaa*-0x1+0x638)]=_0x36ac97*(0xbbc*-0x2+-0x630*-0x1+-0x1ec*-0x9),_0x32ce21['indices'][_0x36ac97*(0xb3*-0x4+0x572+-0x2a3)*(-0x159*0xd+-0x9*-0x65+-0x2*-0x6fd)+(-0x1654+0x19*0xf9+-0x1fc)]=_0x36ac97*(-0xb65+-0x7*0x266+0x1c33*0x1)+(0xdd*-0x19+0x239d*0x1+-0xe07),_0x32ce21['indices'][_0x36ac97*(0x293+-0x32b*0x7+0x139d)*(-0x5ac+-0x10ad+0x61*0x3b)+(0x19*0xd+0x9b1*0x3+-0x2*0xf2b)]=_0x36ac97*(0x1*0xe02+-0x2082+0x1284)+(0x14c0+0x23ed+-0x38aa),_0x32ce21['indices'][_0x36ac97*(-0x2*0x97a+-0x157e+0x2875)*(-0xe2e+-0x11fa+-0x202a*-0x1)+(0x1ff3+-0x3be*-0x7+-0x3a22)]=_0x36ac97*(-0x1*-0x1231+0x49*-0x26+-0x757)+(-0x128d+0x296*-0x2+0x17bb),_0x32ce21['indices'][_0x36ac97*(0x755*0x1+-0x1438+0xce6)*(0x1192*0x2+-0x100c+0xe*-0x15d)+(-0x24e6+-0x8cb*-0x4+0x1be*0x1)]=_0x36ac97*(0xeb*0x1d+-0x4f*-0x42+-0x2ef9)+(-0xc37+0x4*0x7eb+-0x1372),_0x32ce21['indices'][_0x36ac97*(-0x6f6+0x1*-0x1d29+0x2422)*(-0x1d*-0x11b+-0x181b+-0x7f2)+(-0xc1+0x1aec*0x1+-0x1a26)]=_0x36ac97*(0x18ec+0x1154+-0x2a3c)+(-0xcbf+0x5*0x241+0x17b),_0x32ce21['normals'][_0x36ac97*(-0x4ff*0x7+0x13*-0x10c+0x36e1)*(-0x18d*0x11+0x1*0xf40+0xb20)+(0x379*0x7+-0x904+0x30f*-0x5)]=0x13*-0x10d+-0x1049+-0x91*-0x40,_0x32ce21['normals'][_0x36ac97*(-0x19b+0x239b+-0x21fc)*(0x17*-0x10f+0x869*0x3+-0xdf*0x1)+(0x320+-0x22*-0xde+-0x11*0x1eb)]=0x5*0x29+-0x2437*0x1+0x6*0x5e7,_0x32ce21['normals'][_0x36ac97*(0x247a+0x129f+-0x1*0x3715)*(0x1*-0x1271+0x169b+0x1*-0x427)+(-0x1*0x61e+-0x76b+0xd8b*0x1)]=-(0x1285+-0x4f4+-0x1c*0x7c),_0x32ce21['normals'][_0x36ac97*(-0x1*-0x1309+-0x1217+-0xee)*(-0xc89+0x194d+-0x5*0x28d)+(-0x15e7+0x33b*0xc+-0x10da)]=-0x31c*0x5+-0x1*-0x26df+0x355*-0x7,_0x32ce21['normals'][_0x36ac97*(0x4f*-0x6d+-0x2f0+0x2497)*(-0x26c1+0x1b49+0xb7b)+(-0x1*-0x3e1+0x24a7+0x1442*-0x2)]=-0x2226+0x2212+0x14,_0x32ce21['normals'][_0x36ac97*(-0x2415+0x1*0x77b+0x1c9e)*(-0x621*-0x2+0x188+-0xdc7)+(-0x17f*-0x3+-0x4*-0x67+-0x614*0x1)]=-(0x3a*0xd+0x53*0x23+-0x1f*0x76),_0x32ce21['normals'][_0x36ac97*(0x233*-0x1+0x1472*-0x1+0x16a9)*(0xb66+0x719+-0x127c)+(0x21a5+0x14b7+-0x3656)]=0x1da6+-0x1c1+-0x1be5,_0x32ce21['normals'][_0x36ac97*(-0x958+0x2416+0x1*-0x1aba)*(-0x1602+-0x6ec*-0x4+-0x5ab)+(-0x153f+0x1450+-0x7b*-0x2)]=0x1*0x9bf+0x1daa+-0x2769,_0x32ce21['normals'][_0x36ac97*(-0xfe5*-0x1+0x6a1+-0xb41*0x2)*(0x9*0x7+0x87c*-0x1+0x840)+(0x2*0x233+-0x256c+0x210e)]=-(0x1ddc+-0x1*-0xbcf+0x2*-0x14d5),_0x32ce21['normals'][_0x36ac97*(0x67c+0x110e+0xbc3*-0x2)*(0x23a7+-0xe5*-0x1+-0x2489)+(0x291+0x9ed*0x3+0x3*-0xac5)]=0x1bd*-0x10+-0x2273*0x1+0x21*0x1e3,_0x32ce21['normals'][_0x36ac97*(0x1c00+-0x1927+-0x2d5)*(0x851+0xf4*0x12+-0x1*0x1976)+(-0x2260*0x1+0x176a+0xb00)]=-0x546*0x5+-0x1*0xb27+0x2585,_0x32ce21['normals'][_0x36ac97*(0x14e*-0x17+-0x664+0x2*0x1235)*(0x23c4+-0x1*-0x137c+-0x373d)+(-0x49*0x4e+-0x21ac+-0x5*-0xb31)]=-(-0x1a2d*0x1+-0x5c*0x2c+-0x1*-0x29fe);const _0x124b73=xR(this['_system']['app']['graphicsDe'+'vice'],_0x32ce21),_0x4e38cc=new He(_0x124b73,this['_material'],this['_node']);if(_0x4e38cc['name']='Text\x20Eleme'+'nt:\x20'+this['_entity']['name'],_0x4e38cc['castShadow']=!(0x103d*0x1+-0x8ee+-0x74e*0x1),_0x4e38cc['receiveSha'+'dow']=!(-0xac1*-0x1+0x2041+-0x2b01),_0x4e38cc['cull']=!_0x413b49,_0x4e38cc['screenSpac'+'e']=_0x413b49,_0x4e38cc['drawOrder']=this['_drawOrder'],_0x2b043b&&(_0x4e38cc['cull']=!(0x81*-0x3+0xba9+0x1*-0xa26),_0x4e38cc['isVisibleF'+'unc']=_0x42c50f),this['_setTextur'+'eParams'](_0x4e38cc,this['_font']['textures'][_0x370e51]),_0x4e38cc['setParamet'+'er']('material_e'+'missive',this['_colorUnif'+'orm']),_0x4e38cc['setParamet'+'er']('material_o'+'pacity',this['_color']['a']),_0x4e38cc['setParamet'+'er']('font_sdfIn'+'tensity',this['_font']['intensity']),_0x4e38cc['setParamet'+'er']('font_pxran'+'ge',this['_getPxRang'+'e'](this['_font'])),_0x4e38cc['setParamet'+'er']('font_textu'+'reWidth',this['_font']['data']['info']['maps'][_0x370e51]['width']),_0x4e38cc['setParamet'+'er']('outline_co'+'lor',this['_outlineCo'+'lorUniform']),_0x4e38cc['setParamet'+'er']('outline_th'+'ickness',this['_outlineTh'+'icknessSca'+'le']*this['_outlineTh'+'ickness']),_0x4e38cc['setParamet'+'er']('shadow_col'+'or',this['_shadowCol'+'orUniform']),this['_symbolSha'+'dowParams'])this['_shadowOff'+'setUniform'][-0x2085+0x1c13+0x472]=-0x1ad5+-0x4eb+-0xfe*-0x20,this['_shadowOff'+'setUniform'][-0x61+-0x10f*0x19+0x1ad9]=0x465+-0x216f+0x1d0a;else{const _0x31901b=-this['_font']['data']['info']['maps'][_0x370e51]['width']/this['_font']['data']['info']['maps'][_0x370e51]['height'];this['_shadowOff'+'setUniform'][-0x5*0x6f7+0x1611+0xcc2]=this['_shadowOff'+'setScale']*this['_shadowOff'+'set']['x'],this['_shadowOff'+'setUniform'][-0x1*-0x1f99+-0x26ad*-0x1+0x4645*-0x1]=_0x31901b*this['_shadowOff'+'setScale']*this['_shadowOff'+'set']['y'];}_0x4e38cc['setParamet'+'er']('shadow_off'+'set',this['_shadowOff'+'setUniform']),_0x32ce21['meshInstan'+'ce']=_0x4e38cc,this['_model']['meshInstan'+'ces']['push'](_0x4e38cc);}}this['_element']['maskedBy']&&this['_element']['_setMasked'+'By'](this['_element']['maskedBy']),_0x3932fb&&this['_element']['enabled']&&this['_entity']['enabled']&&this['_element']['addModelTo'+'Layers'](this['_model']),this['_updateMes'+'hes'](),this['_rangeStar'+'t']=-0x2*-0xf05+-0x15d*-0xe+0x312*-0x10,this['_rangeEnd']=this['_symbols']['length'],this['_updateRen'+'derRange']();}['_removeMes'+'hInstance'](_0x564d69){_0x564d69['destroy']();const _0x4250c1=this['_model']['meshInstan'+'ces']['indexOf'](_0x564d69);_0x4250c1!==-(-0x16*-0xe6+-0x14b9+-0x7b*-0x2)&&this['_model']['meshInstan'+'ces']['splice'](_0x4250c1,-0x3*0x267+0x2496*-0x1+0x2bcc);}['_setMateri'+'al'](_0xd13ed){if(this['_material']=_0xd13ed,this['_model'])for(let _0x237f31=0x1bf6+0x2090+-0x1e43*0x2,_0x39a4ee=this['_model']['meshInstan'+'ces']['length'];_0x237f31<_0x39a4ee;_0x237f31++){const _0xc32a3=this['_model']['meshInstan'+'ces'][_0x237f31];_0xc32a3['material']=_0xd13ed;}}['_updateMat'+'erial'](_0x19b79a){const _0x9eaed5=this['_element'],_0x439fdf=_0x9eaed5['_isScreenC'+'ulled'](),_0x3f1434=function(_0x1ea0c1){return _0x9eaed5['isVisibleF'+'orCamera'](_0x1ea0c1);},_0x2ab3d6=this['_font']&&this['_font']['type']===Rh;if(this['_material']=this['_system']['getTextEle'+'mentMateri'+'al'](_0x19b79a,_0x2ab3d6,this['_enableMar'+'kup']),this['_model'])for(let _0x24fa91=-0x123d+0x1a1d+0x3f0*-0x2,_0x1ff93f=this['_model']['meshInstan'+'ces']['length'];_0x24fa91<_0x1ff93f;_0x24fa91++){const _0x4e5c12=this['_model']['meshInstan'+'ces'][_0x24fa91];_0x4e5c12['cull']=!_0x19b79a,_0x4e5c12['material']=this['_material'],_0x4e5c12['screenSpac'+'e']=_0x19b79a,_0x439fdf?(_0x4e5c12['cull']=!(0x53*0x60+-0x41f+-0x1b01),_0x4e5c12['isVisibleF'+'unc']=_0x3f1434):_0x4e5c12['isVisibleF'+'unc']=null;}}['_updateMat'+'erialEmiss'+'ive'](){this['_symbolCol'+'ors']?(this['_colorUnif'+'orm'][0x1*0x24b+0x1*-0x176d+-0xa*-0x21d]=-0x18e*-0x11+0x1f56+0x5d*-0x9f,this['_colorUnif'+'orm'][-0x6*-0x5f7+-0x1a30+-0x75*0x15]=-0xc77+0xee0+-0x268,this['_colorUnif'+'orm'][-0x1e23+-0x1717+0x353c]=0x9e*-0x4+0x4*-0x6a6+0x1d11):(We['linear'](this['_color']),this['_colorUnif'+'orm'][0x2158+-0x1*0x13bf+-0x3b*0x3b]=We['r'],this['_colorUnif'+'orm'][0x3*0xeb+-0xda*0x18+0x11b0]=We['g'],this['_colorUnif'+'orm'][-0xbf4+0x6*-0x1e5+0x4*0x5d5]=We['b']);}['_updateMat'+'erialOutli'+'ne'](){this['_symbolOut'+'lineParams']?(this['_outlineCo'+'lorUniform'][-0xd1f+0x2e4+0x1*0xa3b]=0x5*-0x5b4+-0x687*-0x2+0xf76,this['_outlineCo'+'lorUniform'][0x1*0x169b+-0x163*-0xa+-0x2478]=-0x1c8e+0x1fca+0x2*-0x19e,this['_outlineCo'+'lorUniform'][-0x1*-0x2165+-0x194d+0x9*-0xe6]=0x600+-0x8c*-0x3c+-0x26d0,this['_outlineCo'+'lorUniform'][-0x1497+0x22bd+-0xe23]=-0x12d9+-0xbc5+0x1e9f):(We['linear'](this['_outlineCo'+'lor']),this['_outlineCo'+'lorUniform'][-0x7*-0x523+0x1b21*0x1+-0x3f16]=We['r'],this['_outlineCo'+'lorUniform'][-0x35*-0x13+-0x772+0x9*0x64]=We['g'],this['_outlineCo'+'lorUniform'][-0x162c+-0x4*-0x605+-0x1e6]=We['b'],this['_outlineCo'+'lorUniform'][0x2424+-0x84*0x47+0x7b]=We['a']);}['_updateMat'+'erialShado'+'w'](){this['_symbolOut'+'lineParams']?(this['_shadowCol'+'orUniform'][-0x62*0x5b+0x11fc+0x10da]=0x259f+-0x1d5f+-0x840,this['_shadowCol'+'orUniform'][0x58b+-0x1c36+0x16ac]=-0xa89*0x1+0x3*0xe5+0xf*0x86,this['_shadowCol'+'orUniform'][-0x2f*-0x97+-0x1d4a+0x1f*0xd]=0x215*0x3+-0x2*0x955+0xc6b,this['_shadowCol'+'orUniform'][-0x1f08+0x14f1+0x1*0xa1a]=-0x1578+0x9*-0x427+0x3ad7*0x1):(We['linear'](this['_shadowCol'+'or']),this['_shadowCol'+'orUniform'][0x143c+-0x19af+-0x1d1*-0x3]=We['r'],this['_shadowCol'+'orUniform'][-0x24bd+0x2476+-0x3*-0x18]=We['g'],this['_shadowCol'+'orUniform'][0xa31+0x4c2*-0x3+0x417]=We['b'],this['_shadowCol'+'orUniform'][0x1*-0x55b+0x24cb+-0x1f6d]=We['a']);}['_isWordBou'+'ndary'](_0x2fa69b){return jg['test'](_0x2fa69b);}['_isValidNe'+'xtChar'](_0x2f6cc2){return _0x2f6cc2!==null&&!ER['test'](_0x2f6cc2);}['_isNextCJK'+'Boundary'](_0x4ebcf3,_0x10a71c){return Yg['test'](_0x4ebcf3)&&(jg['test'](_0x10a71c)||wR['test'](_0x10a71c));}['_isNextCJK'+'WholeWord'](_0x771305){return Yg['test'](_0x771305);}['_updateMes'+'hes'](){const _0xd4d83=this['_font']['data'],_0x15a9a5=this,_0x32b367=Math['min'](this['_minFontSi'+'ze'],this['_maxFontSi'+'ze']),_0x53359a=this['_maxFontSi'+'ze'],_0x110c60=this['_shouldAut'+'oFit']();_0x110c60&&(this['_fontSize']=this['_maxFontSi'+'ze']);const _0x4645bd=-0x4*0x3c1+0x21f*0x3+-0x2ed*-0x3,_0x1b5c80=this['_symbols']['length'];let _0x2f52f1=-0x2239*-0x1+-0x2506+0x2cd,_0x155527=-0x1861+0x22e8*0x1+0x1*-0xa87,_0x49d65c=0x31*-0xb9+0x4e9+0x1e80,_0xd83644=0xc*0x10c+-0x1*-0x14ce+-0x215e,_0x13ab21=-0x24d0+0x1*0x1f57+0x57a,_0x556ff9=-0x9cb*-0x2+-0x1e34+0xa9e,_0x85717d=0x1872+-0x1*0x1faf+-0x1*-0x73d,_0x636554=0xb*0x1d2+0x59*-0x1+-0x13ad,_0x1ec8f4=0x19cd+-0x625+0x275*-0x8,_0x592711=-0x2a1*-0x7+-0x1*0x1876+0x60f,_0x1a04b4=-0x10b*0x7+-0x223c+-0x2989*-0x1;const _0x46bdc0=Math['abs'](this['_element']['anchor']['x']-this['_element']['anchor']['z'])>=0x1*0x1942+-0x85f*-0x3+-0x325f+0.0001;let _0x27d794=this['_element']['calculated'+'Width'];(this['autoWidth']&&!_0x46bdc0||!this['_wrapLines'])&&(_0x27d794=Number['POSITIVE_I'+'NFINITY']);let _0x491eec=0x1889+0x137+-0x19c0,_0x46502a=0x1ab2+0xf40+-0x33a*0xd,_0x390dc9,_0xbd3e45,_0x10f5bd,_0x142f29;function _0x2e5db7(_0x1428b3,_0x1096af,_0x21fae4){_0x15a9a5['_lineWidth'+'s']['push'](Math['abs'](_0x21fae4));const _0xb37987=_0x636554>_0x1096af?_0x1096af+(0x22d3+-0x266*0x2+-0x1e06):_0x636554,_0x1bb0bd=_0x636554>_0x1096af?_0x636554+(0xc22*-0x1+-0x18c3+0x24e6):_0x1096af,_0x24b597=_0x1428b3['slice'](_0xb37987,_0x1bb0bd);if(_0x1a04b4){let _0x2613f7=_0x24b597['length'];for(;_0x2613f7--&&_0x1a04b4>0x123*-0x7+-0x1*-0x2cf+0x1*0x526;)qg['test'](_0x24b597[_0x2613f7])&&(_0x24b597['splice'](_0x2613f7,-0x25c5+-0x19b5+-0x3*-0x1529),_0x1a04b4--);}_0x15a9a5['_lineConte'+'nts']['push'](_0x24b597['join']('')),_0x2f52f1=-0x751*-0x3+-0x1222+0x3d1*-0x1,_0x155527-=_0x15a9a5['_scaledLin'+'eHeight'],_0x13ab21++,_0x1ec8f4=0xb06+0x7*-0x101+0x1f*-0x21,_0x592711=-0x578+0x1395+0xe1d*-0x1,_0x1a04b4=0x149b+0x1*0x20ff+-0x359a,_0x556ff9=0x1cd*-0xa+0x2667+-0x17*0xe3,_0x636554=_0x1096af;}let _0x2dd9bc=!(0x1676+-0x1*-0x19d5+-0x304b);for(;_0x2dd9bc;){_0x2dd9bc=!(0x70*0x2a+-0x185+-0x10da),_0x110c60?this['_scaledLin'+'eHeight']=this['_lineHeigh'+'t']*this['_fontSize']/(this['_maxFontSi'+'ze']||0x3c7*-0x3+0x305+0x70*0x13+0.0001):this['_scaledLin'+'eHeight']=this['_lineHeigh'+'t'],this['width']=0xb18*-0x2+0x10e8+0x548,this['height']=0x1a*-0x144+0x5d2+0x1*0x1b16,this['_lineWidth'+'s']=[],this['_lineConte'+'nts']=[],_0x2f52f1=-0x2124+-0x1369*0x1+0x348d,_0x155527=-0x134a+-0xccc+0x2016*0x1,_0x49d65c=-0x1*0x1cf6+-0x20b3+0x3da9,_0xd83644=-0x2ff*-0x7+-0x26d5+-0x1fc*-0x9,_0x13ab21=0x3*-0x95+-0x16e7+0x18a7,_0x556ff9=-0x2*0x11a5+0xc92*-0x1+0x2fdc,_0x85717d=0x17*0xc1+0x108f+-0x21e6,_0x636554=0x34e+-0x3e3*0x7+0x17e7,_0x1ec8f4=0xb5*0x13+-0x1aed+-0x13a*-0xb,_0x592711=0x2326+-0x446*-0x5+-0x3884,_0x1a04b4=-0x459+0x146*0x5+-0x205*0x1;const _0x366671=this['_fontSize']/_0x4645bd;_0x491eec=this['_fontMinY']*_0x366671,_0x46502a=this['_fontMaxY']*_0x366671;for(let _0x9af416=-0x16a*0x13+0x1be9*0x1+-0x10b;_0x9af416<this['_meshInfo']['length'];_0x9af416++)this['_meshInfo'][_0x9af416]['quad']=0xec3+0x23e7+-0x32aa,this['_meshInfo'][_0x9af416]['lines']={};let _0x555ab5=-0x1b8b+0x1db+0x1aaf,_0x4c0127=0x3*0x4dc+-0x1224+0x1*0x48f,_0x2f4e92=0x3*-0x169+0x1043+-0xb09,_0x8b2db7=0xca4+0x26e*-0xf+0x18cd+(-0x1330*0x1+0x270b+0x8e*-0x22)*(0x1b12+-0x10b*-0x11+-0x2bcd),_0x246178=0x23bd*0x1+-0x1*-0x703+-0x1fd*0x15+(0x1393+0x1*0x2647+0x47*-0xcd)*(0x13*-0x14b+0xd73+0xc1e),_0x1623f7=-0x2*-0x2bd+0x2*0x655+-0x1224,_0x26f987=-0x85d*-0x1+0x8e*-0x20+0x1bb*0x6+(0x233a+-0xfb9*-0x1+-0x5c*0x8b)*(0x1776+-0x1177+-0x4ff*0x1),_0x1675dd=0x19f2*-0x1+0x1191+0x960+(0x1993*0x1+0x581*0x4+-0x2e98)*(-0x3*0x16+-0x19d4+-0x1*-0x1b16),_0x5de962=-0x65d*0x1+-0x49*-0x21+-0x28d*0x1+(-0x6f5+0xddf+-0x66b*0x1)*(0x221b+0x1460*0x1+-0x357b*0x1);for(let _0x34a536=-0x214*0x7+0x1f93+0x1107*-0x1;_0x34a536<_0x1b5c80;_0x34a536++){if(_0x390dc9=this['_symbols'][_0x34a536],_0x142f29=_0x34a536+(-0x2051+0xfe0+0x1072)>=_0x1b5c80?null:this['_symbols'][_0x34a536+(0x2c9*0x8+0xe*0x214+-0x335f)],qg['test'](_0x390dc9)){_0x1a04b4++,(!this['_wrapLines']||this['_maxLines']<-0x1*0x13af+-0x16cd*0x1+0xa9f*0x4||_0x13ab21<this['_maxLines'])&&(_0x2e5db7(this['_symbols'],_0x34a536,_0xd83644),_0x85717d=_0x34a536+(0x7*0x22+0x149a+-0x1587),_0x636554=_0x34a536+(-0x2227+0x1*0x7a3+-0x1a85*-0x1));continue;}let _0xc801ab=0x2*-0x80+0xd9b+0x1cd*-0x7,_0x75fe7c=-0x7fe+-0x10a*-0x16+0x2*-0x76f,_0x15d6b1=0x1bf+0xc74+-0xe33,_0x5d467a=0x13bb+-0x26f5*0x1+0x133b,_0xccf246,_0x2f3a8f;if(_0xbd3e45=_0xd4d83['chars'][_0x390dc9],!_0xbd3e45){if(bR['indexOf'](_0x390dc9)!==-(0x2415+0x2*0xe47+-0x2*0x2051))_0xbd3e45=AR;else{if(_0xd4d83['chars']['\x20'])_0xbd3e45=_0xd4d83['chars']['\x20'];else for(const _0x603fb6 in _0xd4d83['chars']){_0xbd3e45=_0xd4d83['chars'][_0x603fb6];break;}_0xd4d83['missingCha'+'rs']||(_0xd4d83['missingCha'+'rs']=new Set()),_0xd4d83['missingCha'+'rs']['has'](_0x390dc9)||(console['warn']('Character\x20'+'\x27'+_0x390dc9+('\x27\x20is\x20missi'+'ng\x20from\x20th'+'e\x20font\x20')+_0xd4d83['info']['face']),_0xd4d83['missingCha'+'rs']['add'](_0x390dc9));}}if(_0xbd3e45){let _0x30f006=-0x1ed9+-0x1c45*0x1+0x3b1e;if(_0x592711>-0x1*0x664+-0xbb7*0x3+-0x7*-0x5ef){const _0x233339=this['_font']['data']['kerning'];if(_0x233339){const _0x5bef3e=_0x233339[Hc['getCodePoi'+'nt'](this['_symbols'][_0x34a536-(-0x1d7e+0x644*0x2+0x65*0x2b)])||0x2f1*-0x1+-0x1a74+-0x23*-0xd7];_0x5bef3e&&(_0x30f006=_0x5bef3e[Hc['getCodePoi'+'nt'](this['_symbols'][_0x34a536])||0x3*-0x3+-0x1*-0x193b+-0x56*0x4b]||0x5eb+-0x1*0x1e97+0x18ac*0x1);}}_0xccf246=_0xbd3e45['scale']||0x1116+-0x5f2+-0xb23,_0x2f3a8f=(_0xbd3e45['width']+_0xbd3e45['height'])/(0xb60+-0x2f5*0x1+-0x869),_0x5d467a=_0x366671*_0x2f3a8f/_0xccf246,_0x15d6b1=(_0xbd3e45['xadvance']+_0x30f006)*_0x366671,_0xc801ab=(_0xbd3e45['xoffset']-_0x30f006)*_0x366671,_0x75fe7c=_0xbd3e45['yoffset']*_0x366671;}else console['error']('Couldn\x27t\x20s'+'ubstitute\x20'+'missing\x20ch'+'aracter:\x20\x27'+_0x390dc9+'\x27');const _0xdfa4fc=TR['test'](_0x390dc9),_0x2f68fe=_0xbd3e45&&_0xbd3e45['map']||0x2192+0x8d9*0x1+-0x1*0x2a6b,_0x41be18=-this['_font']['data']['info']['maps'][_0x2f68fe]['width']/this['_font']['data']['info']['maps'][_0x2f68fe]['height'],_0x28a6e6=this['_meshInfo'][_0x2f68fe],_0x31df0d=_0x2f52f1+this['_spacing']*_0x15d6b1;if(_0x31df0d>_0x27d794&&_0x592711>0x256c+0x44*0x41+-0x36b0&&!_0xdfa4fc&&(this['_maxLines']<0x1ea1+0x1938+-0x37d9||_0x13ab21<this['_maxLines'])){if(_0x1ec8f4===0x1036*-0x1+0x1b79+-0xb43)_0x85717d=_0x34a536,_0x2e5db7(this['_symbols'],_0x34a536,_0xd83644);else{const _0x562c96=Math['max'](_0x34a536-_0x85717d,0x1142+0x24f+-0x1391);if(this['_meshInfo']['length']<=0x1acf+0x1*-0x1a87+0x47*-0x1)_0x28a6e6['lines'][_0x13ab21-(0x7c*0x20+0x1171+-0x20f0)]-=_0x562c96,_0x28a6e6['quad']-=_0x562c96;else{const _0x25589a=_0x85717d,_0x689778=_0x34a536;for(let _0x20bfe3=_0x25589a;_0x20bfe3<_0x689778;_0x20bfe3++){const _0xde6419=this['_symbols'][_0x20bfe3],_0xd4613a=_0xd4d83['chars'][_0xde6419],_0x4dda86=this['_meshInfo'][_0xd4613a&&_0xd4613a['map']||-0x350+-0xdee+0x113e];_0x4dda86['lines'][_0x13ab21-(0x19ae+0x8*-0x290+0x35*-0x19)]-=-0x259d*0x1+0x26a0+-0x102,_0x4dda86['quad']-=0x3*-0x68d+-0x11ff+0x25a7;}}_0x34a536-=_0x562c96+(0x1*0x77f+0xf69+-0x16e7),_0x2e5db7(this['_symbols'],_0x85717d,_0x556ff9);continue;}}_0x10f5bd=_0x28a6e6['quad'],_0x28a6e6['lines'][_0x13ab21-(-0xa4d*0x1+-0xe51+0x189f)]=_0x10f5bd;let _0x95bb75=_0x2f52f1-_0xc801ab,_0x5aeda2=_0x95bb75+_0x5d467a;const _0x42e060=_0x155527-_0x75fe7c,_0x2256b1=_0x42e060+_0x5d467a;if(this['_rtl']){const _0x3309a2=_0x5d467a-_0xc801ab-this['_spacing']*_0x15d6b1-_0xc801ab;_0x95bb75-=_0x3309a2,_0x5aeda2-=_0x3309a2;}_0x28a6e6['positions'][_0x10f5bd*(0x6a6+-0x16e+-0x534)*(0x3b9+-0x1*0x1834+0x147e)+(-0xdc+0x16a0+-0x15c4)]=_0x95bb75,_0x28a6e6['positions'][_0x10f5bd*(-0x3ff*-0x1+-0x2524+0x2129)*(-0xfc2+-0x1fb9*-0x1+-0xff4)+(-0x1*-0x26f1+-0x10ee+0x1*-0x1602)]=_0x42e060,_0x28a6e6['positions'][_0x10f5bd*(0x2*0xf0b+-0x18d6+-0x53c)*(0x2*0x3e1+0x1e*-0xc1+-0x1a7*-0x9)+(0x4*-0x47+-0x750+0x86e)]=_0x49d65c,_0x28a6e6['positions'][_0x10f5bd*(-0xb*0x67+0x182b+-0x13ba)*(-0x6c5+-0x10f3+0x17bb)+(-0x1040*-0x1+0x1f46+0x2f83*-0x1)]=_0x5aeda2,_0x28a6e6['positions'][_0x10f5bd*(0x8*-0x147+-0x383+0xdbf)*(0x7f*-0x29+0x442*0x7+-0x974)+(0x87c+-0x816+0x2*-0x31)]=_0x42e060,_0x28a6e6['positions'][_0x10f5bd*(0xd03+-0x45f*0x1+0x60*-0x17)*(0xc2c+-0x587*-0x1+-0x4*0x46c)+(-0x2c5*0x2+-0x253d+-0x1*-0x2acc)]=_0x49d65c,_0x28a6e6['positions'][_0x10f5bd*(0xdd*-0x1+0x2309+-0x2228)*(-0x227f+-0x2315+0x4597)+(-0x2376+-0x227+0x25a3)]=_0x5aeda2,_0x28a6e6['positions'][_0x10f5bd*(0x10f+0x26be+-0x27c9)*(0xe*-0x9c+0x248a+-0x1bff)+(-0x597+-0x1653+-0x17*-0x137)]=_0x2256b1,_0x28a6e6['positions'][_0x10f5bd*(0x7*0x3e5+-0x4d*0x5d+0xba)*(0x2335+0x6d*0x4a+0xc*-0x58f)+(0xc*-0xf3+-0x1af3+0x2f*0xd1)]=_0x49d65c,_0x28a6e6['positions'][_0x10f5bd*(-0x436+0x2*0x824+-0xc0e)*(0xd57*-0x2+0x1d30+-0x27f)+(-0xb*0x26e+0x130*-0x10+0x2dc3)]=_0x95bb75,_0x28a6e6['positions'][_0x10f5bd*(-0xc6b+0x7fc+0x473)*(0x2*0xcc7+0x3*-0x568+-0x953)+(-0x1aa+-0x2233+0x23e7)]=_0x2256b1,_0x28a6e6['positions'][_0x10f5bd*(-0x1*0x1c21+-0x80e+0x2433)*(0x3*0x40f+0x8cb+-0x14f5*0x1)+(-0x1b54+-0x1010+0x2b6f)]=_0x49d65c,this['width']=Math['max'](this['width'],_0x31df0d);let _0xbddfe4;if(this['_shouldAut'+'oFitWidth']()&&this['width']>this['_element']['calculated'+'Width']&&(_0xbddfe4=Math['floor'](this['_element']['fontSize']*this['_element']['calculated'+'Width']/(this['width']||0x11a9+-0x15f*0x11+0xf1*0x6+0.0001)),_0xbddfe4=Y['clamp'](_0xbddfe4,_0x32b367,_0x53359a),_0xbddfe4!==this['_element']['fontSize'])){this['_fontSize']=_0xbddfe4,_0x2dd9bc=!(-0x37*0x21+-0xd4f+0x1466);break;}if(this['height']=Math['max'](this['height'],_0x46502a-(_0x155527+_0x491eec)),this['_shouldAut'+'oFitHeight']()&&this['height']>this['_element']['calculated'+'Height']&&(_0xbddfe4=Y['clamp'](this['_fontSize']-(0x10db*-0x2+0x1*-0x25b6+0x476d),_0x32b367,_0x53359a),_0xbddfe4!==this['_element']['fontSize'])){this['_fontSize']=_0xbddfe4,_0x2dd9bc=!(-0x4df*-0x2+-0x6ba+0x4*-0xc1);break;}_0x2f52f1+=this['_spacing']*_0x15d6b1,_0xdfa4fc||(_0xd83644=_0x2f52f1),(this['_isWordBou'+'ndary'](_0x390dc9)||this['_isValidNe'+'xtChar'](_0x142f29)&&(this['_isNextCJK'+'Boundary'](_0x390dc9,_0x142f29)||this['_isNextCJK'+'WholeWord'](_0x142f29)))&&(_0x1ec8f4++,_0x556ff9=_0xd83644,_0x85717d=_0x34a536+(0xef+0x11b2*0x1+-0x12a0)),_0x592711++;const _0x5edb64=this['_getUv'](_0x390dc9);if(_0x28a6e6['uvs'][_0x10f5bd*(0x373*0x9+0x145a+-0x3361)*(-0x2f*-0x32+0x241a*0x1+-0x2d46)+(0x244b+-0x13d5*0x1+0x31*-0x56)]=_0x5edb64[0x6*0xae+-0x2b*0xbd+0x1bab],_0x28a6e6['uvs'][_0x10f5bd*(0x2b*0x7b+0x18ed+-0x2d92)*(0x29*0xdf+-0x99*0x1d+0xc4*-0x18)+(0x43*-0x3b+-0x1c86+-0x1d5*-0x18)]=-0x1*-0x32d+0xa5b+0x1*-0xd87-_0x5edb64[-0x74f*0x3+-0x1bad+-0x9*-0x583],_0x28a6e6['uvs'][_0x10f5bd*(0xad*0x2e+-0x43d*-0x3+-0x2bc9)*(0x1*-0x1107+-0x2b3*0x9+0x4*0xa55)+(0x829+0x19c*-0xf+0xffd*0x1)]=_0x5edb64[0x2641+-0xab*0xa+-0x1f91],_0x28a6e6['uvs'][_0x10f5bd*(0x1e1c+0x875+-0x1*0x268d)*(0x1124+-0x44*-0x30+-0x1de2)+(0x2*-0xaee+-0x1*0x17c9+-0x6*-0x79c)]=0x1bb0+0xa1c*-0x3+0x2a5*0x1-_0x5edb64[0x2215+0x141*-0x17+-0x53d],_0x28a6e6['uvs'][_0x10f5bd*(0x107+0x1ffa+0x699*-0x5)*(0x277+-0x6d3*-0x3+-0xb77*0x2)+(0x23c9*-0x1+-0x2438+0xb3*0x67)]=_0x5edb64[-0x4b3*-0x4+0x1db1+-0x307b],_0x28a6e6['uvs'][_0x10f5bd*(-0x16*0x99+-0x23f3+-0x9*-0x575)*(-0x3e3+-0x1ad4+0x1eb9)+(-0x4cd*0x1+-0x18e2+-0x76d*-0x4)]=-0x2595+-0xcb9*0x3+-0x1d9*-0x29-_0x5edb64[0x2a7+-0x1*-0xe3c+-0x3c*0x48],_0x28a6e6['uvs'][_0x10f5bd*(-0x5dc+0x11cf+-0x1*0xbef)*(0x3ca*0x2+0x1*-0xc2d+0x49b)+(-0xbb*-0x35+0xd48+-0xa65*0x5)]=_0x5edb64[-0x1*0xb43+-0x8c2+0x1405*0x1],_0x28a6e6['uvs'][_0x10f5bd*(0x732+-0xae8+0x3ba)*(0x81e+0x11f8+-0x1a14)+(-0x693+-0x1892+0x1f2c)]=0xbbb+-0x169f*0x1+0xae5-_0x5edb64[0xedb*-0x1+-0x14f+-0x1*-0x102d],this['_symbolCol'+'ors']){const _0x43eb26=this['_symbolCol'+'ors'][_0x34a536]*(-0x35b*0x2+-0xa03+0x10bc);_0x555ab5=this['_colorPale'+'tte'][_0x43eb26],_0x4c0127=this['_colorPale'+'tte'][_0x43eb26+(0x565+0x1*-0x3d7+-0x18d)],_0x2f4e92=this['_colorPale'+'tte'][_0x43eb26+(-0x2424+0x1ded+0x639)];}if(_0x28a6e6['colors'][_0x10f5bd*(-0xd0f*0x1+-0x1e90*-0x1+0xb*-0x197)*(0x1*0x1262+-0x149f+0x1*0x241)+(-0x1*0x69f+0x1c7a+0x45f*-0x5)]=_0x555ab5,_0x28a6e6['colors'][_0x10f5bd*(0x136a+0x83*-0x12+-0xa30)*(-0x6cd*0x5+0x1d*-0x17+0x24a0)+(-0x1945+-0x2412+0x3d58)]=_0x4c0127,_0x28a6e6['colors'][_0x10f5bd*(0x133f*-0x1+0x35*0x55+0x47*0x6)*(0xf09+0x15*-0x25+-0xbfc)+(0x13*-0x1f+0x1*-0x236b+0x25ba)]=_0x2f4e92,_0x28a6e6['colors'][_0x10f5bd*(-0x1b78+0x1*-0x1105+0x2c81)*(0x18e*0xe+-0xb*0x61+0x283*-0x7)+(-0x2618+0x49e+0x1*0x217d)]=0x1*0x1164+-0xfa5+-0xc0,_0x28a6e6['colors'][_0x10f5bd*(0x1a17+0x2387+-0x26*0x19f)*(0xd72+0x1*-0x1d9f+0x5*0x33d)+(0x5*-0x6b9+0x996+0x180b)]=_0x555ab5,_0x28a6e6['colors'][_0x10f5bd*(-0x3*-0x85d+0x1285+-0x7c*0x5a)*(-0x2438*0x1+0x35*-0x1c+0x2a08)+(0xbc6+0x1e70+-0x2a31)]=_0x4c0127,_0x28a6e6['colors'][_0x10f5bd*(-0x117a+-0x85b+0x19d9)*(-0x4b8*0x1+0x121a*0x2+0x4c*-0x6a)+(0xf31*-0x1+0x1bd0+-0xc99)]=_0x2f4e92,_0x28a6e6['colors'][_0x10f5bd*(-0x10*0x22b+0x4*-0x36c+-0x3064*-0x1)*(0x1745+0x24e0+-0x3c21)+(-0xeb6+-0xc4a+0x11*0x197)]=0x22dd+-0xf5e+-0x4*0x4a0,_0x28a6e6['colors'][_0x10f5bd*(0x17ca+-0x225b+0xa95)*(-0x1b34+0x220d*0x1+-0x6d5)+(0x1*0x17f6+0x272*-0xd+0x7dc)]=_0x555ab5,_0x28a6e6['colors'][_0x10f5bd*(-0x19ef+0x1*0x54d+0x6e2*0x3)*(-0x1bde+0x1bae+0x34)+(-0x217a*0x1+-0x19e6+0x3b69)]=_0x4c0127,_0x28a6e6['colors'][_0x10f5bd*(0x2436+-0xad2+0x1*-0x1960)*(0x50b*0x6+-0x57e*-0x2+0x1*-0x293a)+(0x87a+-0x168f+0x1*0xe1f)]=_0x2f4e92,_0x28a6e6['colors'][_0x10f5bd*(-0x1*-0x2586+-0xd*-0x259+-0x4407)*(-0x16dc+-0x1ca3+0x3383)+(-0x1*-0x1124+0x8*-0x28d+-0xb*-0x4d)]=-0x122f+0x1f53+-0xc25,_0x28a6e6['colors'][_0x10f5bd*(-0x121a+-0x1a3e*-0x1+-0x820)*(-0x2*-0x46f+-0x3f*-0xd+-0xc0d)+(-0x5d*0x47+-0x1ab1*-0x1+0x6d*-0x2)]=_0x555ab5,_0x28a6e6['colors'][_0x10f5bd*(0x7d7+-0x2*0x13+-0xf*0x83)*(0x1ab5+-0x3*-0x8c4+0xa99*-0x5)+(0x556+0x6e3*-0x1+0x19a)]=_0x4c0127,_0x28a6e6['colors'][_0x10f5bd*(0x1d3+0xbcf*0x1+-0xd9e)*(-0x1541*0x1+-0x1cc7+0x320c)+(-0x53*-0x4d+0x9bd+-0x22a6)]=_0x2f4e92,_0x28a6e6['colors'][_0x10f5bd*(0x15f*0x1a+0xb*-0xff+-0x18ad*0x1)*(0x5*0x494+0x24ef*0x1+-0x3bcf)+(0x2*-0x18d+-0x1*-0xebb+-0xb92)]=0xe9*-0x1d+-0x2098+-0x2ba*-0x16,this['_symbolOut'+'lineParams']){const _0x50a80a=this['_symbolOut'+'lineParams'][_0x34a536]*(-0xbdc+0x126c+-0x68b*0x1);_0x8b2db7=this['_outlinePa'+'lette'][_0x50a80a]+this['_outlinePa'+'lette'][_0x50a80a+(0x47a*0x2+-0x17*-0xe9+0x2*-0xef1)]*(0x3*0xc83+-0x18*0xbc+0x1*-0x12e9),_0x246178=this['_outlinePa'+'lette'][_0x50a80a+(-0x651*-0x3+-0xd18*-0x1+-0x3b*0x8b)]+this['_outlinePa'+'lette'][_0x50a80a+(0xf34+0x1b3a+-0x1*0x2a6b)]*(0x880+-0x16f2+-0xf72*-0x1),_0x1623f7=this['_outlinePa'+'lette'][_0x50a80a+(-0x11ad+-0x1e2c+-0x2fdd*-0x1)];}if(_0x28a6e6['outlines'][_0x10f5bd*(0x1*0x999+-0x2566+0x1bd1)*(-0x1*0x1cf1+0x2*-0xd40+0x3774)+(-0x4e4*0x7+0x1f*-0xa6+0x3656)]=_0x8b2db7,_0x28a6e6['outlines'][_0x10f5bd*(0xd29+0x15a4+-0x22c9)*(-0xd8+-0xcef+0xdca)+(-0x4*-0x493+-0xaa5+-0x7a6)]=_0x246178,_0x28a6e6['outlines'][_0x10f5bd*(0x9d9*-0x1+-0xd*0x14d+0x1*0x1ac6)*(-0x4d9*-0x7+-0x26b*0xb+-0x753)+(0x175a+-0xe*0x10b+-0x8be)]=_0x1623f7,_0x28a6e6['outlines'][_0x10f5bd*(0x192b+-0x2*0xab1+-0x3c5)*(0xc60+-0x119c+0x53f)+(0x2*-0x9eb+-0x1*0x205f+0x3438)]=_0x8b2db7,_0x28a6e6['outlines'][_0x10f5bd*(-0x2008+0x21d8+-0x1cc)*(-0xf55+-0x1*0x2608+0x3560)+(0x250e+0xbf+-0x25c9)]=_0x246178,_0x28a6e6['outlines'][_0x10f5bd*(0x8bf*0x1+-0xd72+0x4b7)*(-0xc78+0xc53*-0x1+-0x27b*-0xa)+(-0x971*-0x3+0x92*0x2+-0x1d72*0x1)]=_0x1623f7,_0x28a6e6['outlines'][_0x10f5bd*(0x11*0x245+-0x93c+-0x1d55)*(0x5*0x393+-0x12f4*0x1+-0x23*-0x8)+(0x2703+-0x2d4+-0x2429)]=_0x8b2db7,_0x28a6e6['outlines'][_0x10f5bd*(0x23aa+-0x1f7d*-0x1+-0x1661*0x3)*(0x2*-0x10c3+-0x60*0x26+0x2fc9)+(-0x359+0x3f*0x95+-0x214b)]=_0x246178,_0x28a6e6['outlines'][_0x10f5bd*(0x1*-0x2535+-0x19*-0xed+-0x385*-0x4)*(0xd4f*0x1+0x4*-0x2c5+0x2*-0x11c)+(0xa1*-0x25+0x875+-0x1db*-0x8)]=_0x1623f7,_0x28a6e6['outlines'][_0x10f5bd*(-0x2bf*-0xb+-0xfaa+-0xe87)*(-0x221b*-0x1+-0x2*-0x780+-0x3118)+(-0x2*0x3a3+-0x4b6+0x11*0xb5)]=_0x8b2db7,_0x28a6e6['outlines'][_0x10f5bd*(-0x71*-0x27+0x25c9+-0x36fc)*(0x4*0x24d+-0x1c6*0xc+0xc17)+(-0x1d*0x78+-0x3d*0x4c+0x1fbe)]=_0x246178,_0x28a6e6['outlines'][_0x10f5bd*(0x2e6+0xbe3*0x3+-0x8f*0x45)*(0x7*-0xb9+0x10a9*0x1+-0x17*0x81)+(0x9c8+-0x2486+0x1*0x1ac9)]=_0x1623f7,this['_symbolSha'+'dowParams']){const _0x51ece2=this['_symbolSha'+'dowParams'][_0x34a536]*(-0x1502*-0x1+0x16a8+-0x6*0x746);_0x26f987=this['_shadowPal'+'ette'][_0x51ece2]+this['_shadowPal'+'ette'][_0x51ece2+(0x139e+0x1ac4+-0x1*0x2e61)]*(-0x90a+0x2150+0x296*-0x9),_0x1675dd=this['_shadowPal'+'ette'][_0x51ece2+(0x6a1*0x1+-0x17ce+0x112f)]+this['_shadowPal'+'ette'][_0x51ece2+(-0xe7e+-0x168a*-0x1+0x1*-0x809)]*(0x1*-0x107a+0x56e*-0x5+0x2ca0),_0x5de962=this['_shadowPal'+'ette'][_0x51ece2+(0x26a1+0x84a+-0x1*0x2ee7)]+(0x75b+0xd7e+-0x145a)+Math['round'](_0x41be18*this['_shadowPal'+'ette'][_0x51ece2+(-0x815+0x989*-0x1+0x11a3*0x1)]+(0xcd6+-0x44*0xa+-0x9af))*(0x269c+0x150c+0x1d54*-0x2);}_0x28a6e6['shadows'][_0x10f5bd*(0x37*0x22+-0x2137+0x19ed)*(-0x1*-0x2d1+-0x1171+-0x3*-0x4e1)+(-0x1*0x123b+-0x491+0x16cc)]=_0x26f987,_0x28a6e6['shadows'][_0x10f5bd*(-0x1e04+0x10b7+0xd51)*(0x10ae+0x2291+0x2*-0x199e)+(-0x2209+0x7*0x13+0x2185)]=_0x1675dd,_0x28a6e6['shadows'][_0x10f5bd*(0x2bd*0xb+0x24e8+-0x4303)*(0x99b+-0x14b9+0x197*0x7)+(-0x2665+-0xfd9+-0x1f0*-0x1c)]=_0x5de962,_0x28a6e6['shadows'][_0x10f5bd*(-0x1e7*-0xd+0xc6e+-0x2525)*(-0xfa7+-0x2e+0x34*0x4e)+(0x419+0x4ac+-0x8c2)]=_0x26f987,_0x28a6e6['shadows'][_0x10f5bd*(-0x2663+-0x1ebb+0x2291*0x2)*(-0x1b31+0x10c*0x1+0x48*0x5d)+(-0x1*0xfc4+0x2d9*-0x1+0x13*0xfb)]=_0x1675dd,_0x28a6e6['shadows'][_0x10f5bd*(-0xe75+-0x9a9*-0x2+-0x4d9)*(-0x1*0xb47+0xa54+0xf6)+(0xf5*0xd+0x2607+0x3f*-0xcd)]=_0x5de962,_0x28a6e6['shadows'][_0x10f5bd*(-0x1*-0xcaa+0x1*-0x43+-0xc63)*(-0xd2c+-0x12a*0x5+0x1301)+(-0x114d+0x1557+-0x404)]=_0x26f987,_0x28a6e6['shadows'][_0x10f5bd*(0x2*-0x1247+0xd00+-0x1af*-0xe)*(0x25f5+0x25ad+0x2cd*-0x1b)+(0x8fb+-0x1*0x16d4+0x6f*0x20)]=_0x1675dd,_0x28a6e6['shadows'][_0x10f5bd*(0xb56*-0x2+-0x2630*-0x1+-0xf80)*(-0x4e5+-0x18f6+0x1dde)+(-0x7*-0x51e+-0x208b+-0x33f)]=_0x5de962,_0x28a6e6['shadows'][_0x10f5bd*(-0x2c*-0x43+-0x1999*-0x1+-0x2519)*(0x5*0x413+-0x58f*0x1+-0xecd)+(-0xa93*0x1+-0x1ca*-0x3+0x53e)]=_0x26f987,_0x28a6e6['shadows'][_0x10f5bd*(0x22cc+-0x1*0x11d+-0x11*0x1fb)*(-0x507*-0x1+-0x8d1+0x3cd)+(0x11*0x3b+0x1*-0x10da+0xcf9)]=_0x1675dd,_0x28a6e6['shadows'][_0x10f5bd*(-0x219d+-0xf6f*-0x2+0x2c3)*(0x1053+-0x126d+-0x21d*-0x1)+(-0xd95+-0x4f*-0x2f+0xf*-0xf)]=_0x5de962,_0x28a6e6['quad']++;}_0x2dd9bc||_0x636554<_0x1b5c80&&_0x2e5db7(this['_symbols'],_0x1b5c80,_0x2f52f1);}this['_noResize']=!(-0x2361+-0x552+0x28b3),this['autoWidth']=this['_autoWidth'],this['autoHeight']=this['_autoHeigh'+'t'],this['_noResize']=!(-0x160f*-0x1+-0x1*0xafc+0x589*-0x2);const _0x3156a0=this['_element']['pivot']['x'],_0x7b45a5=this['_element']['pivot']['y'],_0x7be31b=this['_alignment']['x'],_0x12ee2c=this['_alignment']['y'];for(let _0x1ab30c=-0x2116+0x4*-0x2f5+0x1675*0x2;_0x1ab30c<this['_meshInfo']['length'];_0x1ab30c++){if(this['_meshInfo'][_0x1ab30c]['count']===0x63b+0x266f+0x1*-0x2caa)continue;let _0x2f6132=0x8b8+0x20e*-0x2+0x4*-0x127;for(const _0x3c8f85 in this['_meshInfo'][_0x1ab30c]['lines']){const _0x1d80dd=this['_meshInfo'][_0x1ab30c]['lines'][_0x3c8f85],_0x3841e3=this['_lineWidth'+'s'][parseInt(_0x3c8f85,-0x5c1*0x2+-0xca0+0x182c)],_0x52f106=-_0x3156a0*this['_element']['calculated'+'Width']+_0x7be31b*(this['_element']['calculated'+'Width']-_0x3841e3)*(this['_rtl']?-(-0x2685+-0x184b+-0xd*-0x4d5):0x1698+0x2f4+0x1f7*-0xd),_0x42d1e5=(-0x3*-0x8db+0x8*-0x106+0x1*-0x1260-_0x7b45a5)*this['_element']['calculated'+'Height']-_0x46502a-(0x1ade+0x3be*-0x1+0x7b5*-0x3-_0x12ee2c)*(this['_element']['calculated'+'Height']-this['height']);for(let _0x13dff8=_0x2f6132;_0x13dff8<=_0x1d80dd;_0x13dff8++)this['_meshInfo'][_0x1ab30c]['positions'][_0x13dff8*(0xef*-0x7+-0x153e*-0x1+0xeb1*-0x1)*(0x219b+-0x23d*0x3+-0x1ae1*0x1)]+=_0x52f106,this['_meshInfo'][_0x1ab30c]['positions'][_0x13dff8*(-0x175f+0x1f59*0x1+-0x7f6)*(-0xa0c*-0x3+-0x2*-0xde5+0x39eb*-0x1)+(-0x1*-0x1ab1+0x1*-0x990+-0x111e)]+=_0x52f106,this['_meshInfo'][_0x1ab30c]['positions'][_0x13dff8*(-0x39d+0x423*-0x1+0x3e2*0x2)*(0x242*-0x6+-0x3*0xa5b+0x2ca0)+(-0x27e+-0x1108+0x138c)]+=_0x52f106,this['_meshInfo'][_0x1ab30c]['positions'][_0x13dff8*(-0x917*-0x1+0x1b82*0x1+0x5*-0x751)*(0xdf7+0xae0+-0x18d4)+(-0x1*-0x1ffd+0x47b*0x5+-0x365b)]+=_0x52f106,this['_meshInfo'][_0x1ab30c]['positions'][_0x13dff8*(0x1b7*0xb+-0xf56+-0x383)*(0x67*-0x1f+-0x22e+0xeaa)+(0x20a8+0xca6+0x2d4d*-0x1)]+=_0x42d1e5,this['_meshInfo'][_0x1ab30c]['positions'][_0x13dff8*(-0xbc8+-0x112*-0x1b+0xc7*-0x16)*(-0x38f*0x7+0x10bb*0x2+-0x88a)+(-0x2221*-0x1+-0x9bd+0x104*-0x18)]+=_0x42d1e5,this['_meshInfo'][_0x1ab30c]['positions'][_0x13dff8*(-0x566*0x1+0x33b+0x22f)*(-0x1b0d+-0xe5d+0x296d)+(-0x2b3*0x7+-0xb*0x203+0x290d)]+=_0x42d1e5,this['_meshInfo'][_0x1ab30c]['positions'][_0x13dff8*(0x5b*-0x6b+-0x8fc+-0x1*-0x2f09)*(0xae2+0x1cd*-0xc+-0x1*-0xabd)+(-0x11f1*-0x1+-0x1b5c+-0x9*-0x10d)]+=_0x42d1e5;if(this['_rtl'])for(let _0x3d90a9=_0x2f6132;_0x3d90a9<=_0x1d80dd;_0x3d90a9++){const _0x37d97f=_0x3d90a9*(-0x1*0x2203+-0x264+-0x1*-0x246b)*(-0x2dd*0x1+-0xd4c+0x102c);for(let _0x3388a3=0xf*0xd3+0x2b*0x2b+-0x1396;_0x3388a3<-0xf2d+-0x1a7c+0x29ad*0x1;++_0x3388a3)this['_meshInfo'][_0x1ab30c]['positions'][_0x37d97f+_0x3388a3*(-0x1a28+0xd3*-0x25+0x38aa)]=this['_element']['calculated'+'Width']-this['_meshInfo'][_0x1ab30c]['positions'][_0x37d97f+_0x3388a3*(0x58e+-0x510+-0x7b*0x1)]+_0x52f106*(0x3a1*-0x2+-0xfff+0x1743);const _0x2a6bfd=this['_meshInfo'][_0x1ab30c]['positions'][_0x37d97f+(0xf*0x38+0x1*-0x1597+0xa*0x1d5)],_0x5264a7=this['_meshInfo'][_0x1ab30c]['positions'][_0x37d97f+(0x1cbb+0x25c7+-0x14*0x353)];this['_meshInfo'][_0x1ab30c]['positions'][_0x37d97f+(0xa*0xc7+0x955*0x1+-0x1118)]=this['_meshInfo'][_0x1ab30c]['positions'][_0x37d97f+(0xfd2+0x14e8+0x1*-0x24ba)],this['_meshInfo'][_0x1ab30c]['positions'][_0x37d97f+(0x2d1+-0x1589*-0x1+-0x1854)]=this['_meshInfo'][_0x1ab30c]['positions'][_0x37d97f+(-0xbc3+0x1c76+-0x10aa)],this['_meshInfo'][_0x1ab30c]['positions'][_0x37d97f+(-0x12bc+-0x1a1a*0x1+0x2cd6)]=_0x2a6bfd,this['_meshInfo'][_0x1ab30c]['positions'][_0x37d97f+(-0x301*0xc+0xdb9+0x165c)]=_0x5264a7;}_0x2f6132=_0x1d80dd+(0x5c3+-0x549+-0xb*0xb);}const _0x4ab884=this['_meshInfo'][_0x1ab30c]['count']*(-0x15d+-0x1*0x21c1+0x1191*0x2),_0x396163=this['_meshInfo'][_0x1ab30c]['quad']*(-0x1a71*-0x1+-0x9*0x39+0xc36*-0x2),_0xa7d1a3=new Uo(this['_meshInfo'][_0x1ab30c]['meshInstan'+'ce']['mesh']['vertexBuff'+'er']);for(let _0x1fb0dd=-0x1ddb+-0x13*0x153+0x7*0x7dc;_0x1fb0dd<_0x4ab884;_0x1fb0dd++)_0x1fb0dd>=_0x396163?(_0xa7d1a3['element'][Me]['set'](0xc66+-0x1216+0x5b0,-0x22c4+0x22b7*0x1+0xd,0x14a+-0x447*0x1+-0x3*-0xff),_0xa7d1a3['element'][is]['set'](0x6d*0x11+0x10db+-0x1818,0x1*-0x9f2+-0x650+0x1042),_0xa7d1a3['element'][Wt]['set'](-0x1c11+0x25e*0x7+0xb7f,-0x7*0x493+0x184d+0x7b8,-0x7c2+0x23de+0x7*-0x404,-0x26da+-0x67a*-0x4+0xcf2),_0xa7d1a3['element'][Ko]['set'](-0x397*-0x1+0x48d+-0x2*0x412,0xfb*0x1f+0x35*0xc+-0x20e1,-0x1273*0x1+0x55*-0xa+0x15c5*0x1,-0xcb3+-0x30*-0x8b+-0xd5d),_0xa7d1a3['element'][Zo]['set'](0x1cd1+-0x1*0x185+-0x2*0xda6,0xa3c+-0x34b+-0x6f1,-0x23ce*0x1+-0x1fb1+0x437f,0x1c*-0x6+0x1*0xde5+-0xd3d)):(_0xa7d1a3['element'][Me]['set'](this['_meshInfo'][_0x1ab30c]['positions'][_0x1fb0dd*(0x1237*-0x2+-0x1168+-0x5*-0xac5)+(-0x1*-0x1813+0x1643+-0x2e56)],this['_meshInfo'][_0x1ab30c]['positions'][_0x1fb0dd*(-0x9d0+-0x14d*-0x1a+-0x17ff)+(0x718+-0x3*-0x231+-0xb*0x13e)],this['_meshInfo'][_0x1ab30c]['positions'][_0x1fb0dd*(0x126c+-0x130e+-0x5*-0x21)+(-0x1d2e+0xd*-0x39+0x2015)]),_0xa7d1a3['element'][is]['set'](this['_meshInfo'][_0x1ab30c]['uvs'][_0x1fb0dd*(0x1*0x1d95+0x266d+-0x4400)+(0x2491+0xb4*0x2e+-0x17*0x2ff)],this['_meshInfo'][_0x1ab30c]['uvs'][_0x1fb0dd*(0x7*0x36+-0x25e5*0x1+0x246d)+(0x16f0+0x1de*0x7+0x2c5*-0xd)]),_0xa7d1a3['element'][Wt]['set'](this['_meshInfo'][_0x1ab30c]['colors'][_0x1fb0dd*(0x26da*0x1+0xb5c+-0x3232)+(-0xae7+0x1fac+-0x14c5)],this['_meshInfo'][_0x1ab30c]['colors'][_0x1fb0dd*(-0x3*-0x125+-0x65*0x5f+0x2210)+(-0x1*0x15dd+0x2f*-0x1b+0x15*0x147)],this['_meshInfo'][_0x1ab30c]['colors'][_0x1fb0dd*(-0x24bc+-0x132a+0x1a5*0x22)+(-0x37a*0x4+0x4*-0x313+-0x1a36*-0x1)],this['_meshInfo'][_0x1ab30c]['colors'][_0x1fb0dd*(-0xadf+0x23b3+-0x18d0)+(-0x1b89+0x1867*0x1+0xa1*0x5)]),_0xa7d1a3['element'][Ko]['set'](this['_meshInfo'][_0x1ab30c]['outlines'][_0x1fb0dd*(0x5*-0x3f+-0x1*-0x2279+-0x213b)+(-0x117d+-0x1770+0x28ed)],this['_meshInfo'][_0x1ab30c]['outlines'][_0x1fb0dd*(0x1*0x1c6d+-0x33f*0x4+-0xf6e)+(0x1a94+-0xfd2+-0xac1)],this['_meshInfo'][_0x1ab30c]['outlines'][_0x1fb0dd*(0x1145*0x1+-0x2*-0x1cd+-0x537*0x4)+(-0x39d+-0xab2+0xe51)]),_0xa7d1a3['element'][Zo]['set'](this['_meshInfo'][_0x1ab30c]['shadows'][_0x1fb0dd*(-0x27d*0x7+0x222c+-0x10be)+(-0x812+0x29c+-0xe9*-0x6)],this['_meshInfo'][_0x1ab30c]['shadows'][_0x1fb0dd*(0x1107+-0x1afc+-0x1d*-0x58)+(-0x11b4+0x5*0x695+-0xf34)],this['_meshInfo'][_0x1ab30c]['shadows'][_0x1fb0dd*(0x2df+0x1*-0x1499+-0x13*-0xef)+(0x692+-0x2145+-0x1*-0x1ab5)])),_0xa7d1a3['next']();_0xa7d1a3['end'](),this['_meshInfo'][_0x1ab30c]['meshInstan'+'ce']['mesh']['aabb']['compute'](this['_meshInfo'][_0x1ab30c]['positions']),this['_meshInfo'][_0x1ab30c]['meshInstan'+'ce']['_aabbVer']=-(0x2526+0x12b0+-0x37d5*0x1);}this['_aabbDirty']=!(0x727+0x1*0xaca+-0x11f1*0x1);}['_onFontRen'+'der'](){this['font']=this['_font'];}['_onFontLoa'+'d'](_0xa54fc3){this['font']!==_0xa54fc3['resource']&&(this['font']=_0xa54fc3['resource']);}['_onFontCha'+'nge'](_0x2f8ac3,_0x29386e,_0x1e302f,_0x3d63c4){if(_0x29386e==='data'){this['_font']['data']=_0x1e302f;const _0x2d307d=this['_font']['data']['info']['maps']['length'];for(let _0x52d81a=0x652+-0xa67+-0x13*-0x37;_0x52d81a<_0x2d307d;_0x52d81a++){if(!this['_meshInfo'][_0x52d81a])continue;const _0x5a416a=this['_meshInfo'][_0x52d81a]['meshInstan'+'ce'];_0x5a416a&&(_0x5a416a['setParamet'+'er']('font_sdfIn'+'tensity',this['_font']['intensity']),_0x5a416a['setParamet'+'er']('font_pxran'+'ge',this['_getPxRang'+'e'](this['_font'])),_0x5a416a['setParamet'+'er']('font_textu'+'reWidth',this['_font']['data']['info']['maps'][_0x52d81a]['width']));}}}['_onFontRem'+'ove'](_0x1f2c46){}['_setTextur'+'eParams'](_0x10a7b7,_0x597f42){this['_font']&&(this['_font']['type']===Rh?(_0x10a7b7['deletePara'+'meter']('texture_em'+'issiveMap'),_0x10a7b7['deletePara'+'meter']('texture_op'+'acityMap'),_0x10a7b7['setParamet'+'er']('texture_ms'+'dfMap',_0x597f42)):this['_font']['type']===dR&&(_0x10a7b7['deletePara'+'meter']('texture_ms'+'dfMap'),_0x10a7b7['setParamet'+'er']('texture_em'+'issiveMap',_0x597f42),_0x10a7b7['setParamet'+'er']('texture_op'+'acityMap',_0x597f42)));}['_getPxRang'+'e'](_0x204cda){const _0x51a8e0=Object['keys'](this['_font']['data']['chars']);for(let _0x376ac0=-0x165f+-0x1*-0x21a+0x1445;_0x376ac0<_0x51a8e0['length'];_0x376ac0++){const _0x3f6d8b=this['_font']['data']['chars'][_0x51a8e0[_0x376ac0]];if(_0x3f6d8b['range'])return(_0x3f6d8b['scale']||0x1*-0x28+-0x194c+0x13*0x157)*_0x3f6d8b['range'];}return-0xbb9+0x1bc2+-0x1007;}['_getUv'](_0x248cf0){const _0x572f9c=this['_font']['data'];if(!_0x572f9c['chars'][_0x248cf0])return _0x572f9c['chars']['\x20']?this['_getUv']('\x20'):[-0x4b0+0x1fa8+-0xd7c*0x2,-0x12b4+-0x3*0xb19+-0x1cb*-0x1d,-0x806+-0x1f5e+0x2764,0x1a90+-0x1*-0x88+0x6c6*-0x4];const _0x294a7a=_0x572f9c['chars'][_0x248cf0]['map'],_0x3f51f1=_0x572f9c['info']['maps'][_0x294a7a]['width'],_0x5ec446=_0x572f9c['info']['maps'][_0x294a7a]['height'],_0xcdaa41=_0x572f9c['chars'][_0x248cf0]['x'],_0x1e4956=_0x572f9c['chars'][_0x248cf0]['y'],_0x10c420=_0xcdaa41,_0x55c6fc=_0x1e4956,_0x116e8f=_0xcdaa41+_0x572f9c['chars'][_0x248cf0]['width'],_0x1af8bc=_0x1e4956-_0x572f9c['chars'][_0x248cf0]['height'],_0x4dff80=-0x456+0x11*-0x200+0x2657-_0x572f9c['chars'][_0x248cf0]['height']/_0x5ec446;return[_0x10c420/_0x3f51f1,_0x4dff80-_0x55c6fc/_0x5ec446,_0x116e8f/_0x3f51f1,_0x4dff80-_0x1af8bc/_0x5ec446];}['onEnable'](){this['_fontAsset']['autoLoad']=!(-0x1*0x1dd+-0xe8f+0x41b*0x4),this['_model']&&this['_element']['addModelTo'+'Layers'](this['_model']);}['onDisable'](){this['_fontAsset']['autoLoad']=!(0x126*-0x3+0x1bcb+-0x4*0x616),this['_model']&&this['_element']['removeMode'+'lFromLayer'+'s'](this['_model']);}['_setStenci'+'l'](_0x2ff04d){if(this['_model']){const _0x5df558=this['_model']['meshInstan'+'ces'];for(let _0x31fe4b=-0x5*0x481+-0x656*0x5+-0xf*-0x39d;_0x31fe4b<_0x5df558['length'];_0x31fe4b++)_0x5df558[_0x31fe4b]['stencilFro'+'nt']=_0x2ff04d,_0x5df558[_0x31fe4b]['stencilBac'+'k']=_0x2ff04d;}}['_shouldAut'+'oFitWidth'](){return this['_autoFitWi'+'dth']&&!this['_autoWidth'];}['_shouldAut'+'oFitHeight'](){return this['_autoFitHe'+'ight']&&!this['_autoHeigh'+'t'];}['_shouldAut'+'oFit'](){return this['_autoFitWi'+'dth']&&!this['_autoWidth']||this['_autoFitHe'+'ight']&&!this['_autoHeigh'+'t'];}['_calculate'+'CharsPerTe'+'xture'](_0x30cd54){const _0x26c71e={};_0x30cd54===void(-0xdf*-0x5+0x1196+-0x89*0x29)&&(_0x30cd54=this['_symbols']['length']);for(let _0x116326=-0x1*-0xf91+0x26*0x22+-0x149d,_0x13acca=_0x30cd54;_0x116326<_0x13acca;_0x116326++){const _0x103513=this['_symbols'][_0x116326];let _0x1d58a0=this['_font']['data']['chars'][_0x103513];_0x1d58a0||(_0x1d58a0=this['_font']['data']['chars']['\x20'],_0x1d58a0||(_0x1d58a0=this['_font']['data']['chars'][Object['keys'](this['_font']['data']['chars'])[-0x10e4+-0x1a4d*0x1+0x2b31]]));const _0x412394=_0x1d58a0['map'];_0x26c71e[_0x412394]?_0x26c71e[_0x412394]++:_0x26c71e[_0x412394]=0x75c*0x4+-0x4b*-0x5+-0x1ee6;}return _0x26c71e;}['_updateRen'+'derRange'](){const _0xaf9b3c=this['_rangeStar'+'t']===-0x9d2+0x1cbe*-0x1+0x2690?-0xe38+-0x683+0x14bb:this['_calculate'+'CharsPerTe'+'xture'](this['_rangeStar'+'t']),_0x250f3a=this['_rangeEnd']===0x1a93+-0x814+-0x127f?0x4a8*-0x3+0x3*0xc23+-0x1671:this['_calculate'+'CharsPerTe'+'xture'](this['_rangeEnd']);for(let _0x13f858=0x10d5+-0x2*-0xfde+-0x3091,_0x4e8980=this['_meshInfo']['length'];_0x13f858<_0x4e8980;_0x13f858++){const _0x505649=_0xaf9b3c[_0x13f858]||0x2647+-0x2fb*0xa+-0x2d3*0x3,_0x368e56=_0x250f3a[_0x13f858]||0x6cc+0x1d*-0x77+0x6af,_0x4954b9=this['_meshInfo'][_0x13f858]['meshInstan'+'ce'];if(_0x4954b9){const _0x4ec17a=_0x4954b9['mesh'];_0x4ec17a&&(_0x4ec17a['primitive'][0x1405+0x1*-0x5db+-0xe2a]['base']=_0x505649*(-0x79*0x3e+0x18ec+0x465)*(0x1*-0x419+0x5*0x7c7+-0x22c8),_0x4ec17a['primitive'][-0x1*-0x2c+-0x2*-0x1379+0x138f*-0x2]['count']=(_0x368e56-_0x505649)*(0xdc1+-0xc*-0x2dc+0x2*-0x1807)*(0x227f*0x1+-0x1*-0xf05+0x2*-0x18c1));}}}set['text'](_0x123ef0){this['_i18nKey']=null;const _0x53c2e0=_0x123ef0!=null&&_0x123ef0['toString']()||'';this['_setText'](_0x53c2e0);}get['text'](){return this['_text'];}set['key'](_0x1661a4){const _0x5c058e=_0x1661a4!==null?_0x1661a4['toString']():null;this['_i18nKey']!==_0x5c058e&&(this['_i18nKey']=_0x5c058e,_0x5c058e?(this['_fontAsset']['disableLoc'+'alization']=!(0xfe7+0xe6e*0x1+-0x1e54),this['_resetLoca'+'lizedText']()):this['_fontAsset']['disableLoc'+'alization']=!(0x1*-0x93b+0x173b+0x8*-0x1c0));}get['key'](){return this['_i18nKey'];}set['color'](_0x187a31){const _0x4d888c=_0x187a31['r'],_0x1821f6=_0x187a31['g'],_0x4bcd32=_0x187a31['b'];if(this['_color']===_0x187a31&&console['warn']('Setting\x20el'+'ement.colo'+'r\x20to\x20itsel'+'f\x20will\x20hav'+'e\x20no\x20effec'+'t'),!(this['_color']['r']===_0x4d888c&&this['_color']['g']===_0x1821f6&&this['_color']['b']===_0x4bcd32)&&(this['_color']['r']=_0x4d888c,this['_color']['g']=_0x1821f6,this['_color']['b']=_0x4bcd32,!!this['_model'])){if(this['_symbolCol'+'ors'])this['_font']&&this['_updateTex'+'t']();else{We['linear'](this['_color']),this['_colorUnif'+'orm'][0x22a3+0x282*0xf+-0x4841]=We['r'],this['_colorUnif'+'orm'][0x22*-0xf9+0x167*-0x13+0x16c*0x2a]=We['g'],this['_colorUnif'+'orm'][-0x15f4+0x1e4f+-0x859*0x1]=We['b'];for(let _0x4e70aa=-0x21*0x3d+-0x13c*0x10+0x1b9d,_0x5ec612=this['_model']['meshInstan'+'ces']['length'];_0x4e70aa<_0x5ec612;_0x4e70aa++)this['_model']['meshInstan'+'ces'][_0x4e70aa]['setParamet'+'er']('material_e'+'missive',this['_colorUnif'+'orm']);}this['_element']&&this['_element']['fire']('set:color',this['_color']);}}get['color'](){return this['_color'];}set['opacity'](_0x27f393){if(this['_color']['a']!==_0x27f393&&(this['_color']['a']=_0x27f393,this['_model'])){for(let _0x15ee15=0x157*0x8+-0x172e+-0x37*-0x3a,_0x2bf7cd=this['_model']['meshInstan'+'ces']['length'];_0x15ee15<_0x2bf7cd;_0x15ee15++)this['_model']['meshInstan'+'ces'][_0x15ee15]['setParamet'+'er']('material_o'+'pacity',_0x27f393);}this['_element']&&this['_element']['fire']('set:opacit'+'y',_0x27f393);}get['opacity'](){return this['_color']['a'];}set['lineHeight'](_0x2cce18){const _0x536ef2=this['_lineHeigh'+'t'];this['_lineHeigh'+'t']=_0x2cce18,this['_scaledLin'+'eHeight']=_0x2cce18,_0x536ef2!==_0x2cce18&&this['_font']&&this['_updateTex'+'t']();}get['lineHeight'](){return this['_lineHeigh'+'t'];}set['wrapLines'](_0x10c585){const _0x5e9e80=this['_wrapLines'];this['_wrapLines']=_0x10c585,_0x5e9e80!==_0x10c585&&this['_font']&&this['_updateTex'+'t']();}get['wrapLines'](){return this['_wrapLines'];}get['lines'](){return this['_lineConte'+'nts'];}set['spacing'](_0x5e92df){const _0x540ac2=this['_spacing'];this['_spacing']=_0x5e92df,_0x540ac2!==_0x5e92df&&this['_font']&&this['_updateTex'+'t']();}get['spacing'](){return this['_spacing'];}set['fontSize'](_0x273982){const _0x592a9c=this['_fontSize'];this['_fontSize']=_0x273982,this['_originalF'+'ontSize']=_0x273982,_0x592a9c!==_0x273982&&this['_font']&&this['_updateTex'+'t']();}get['fontSize'](){return this['_fontSize'];}set['fontAsset'](_0x5e79ed){this['_fontAsset']['defaultAss'+'et']=_0x5e79ed;}get['fontAsset'](){return this['_fontAsset']['localizedA'+'sset'];}set['font'](_0x44b460){let _0x3221f8;if(this['_font']&&(_0x3221f8=this['_font']['type'],this['_font']['off']&&this['_font']['off']('render',this['_onFontRen'+'der'],this)),this['_font']=_0x44b460,this['_fontMinY']=-0x1c28+-0x3c*-0x4e+0x9e0,this['_fontMaxY']=0x5*0x49b+0x1d34+-0x343b,!_0x44b460)return;const _0x536cd7=this['_font']['data'];for(const _0x444898 in _0x536cd7['chars']){const _0x5cc0a2=_0x536cd7['chars'][_0x444898];_0x5cc0a2['bounds']&&(this['_fontMinY']=Math['min'](this['_fontMinY'],_0x5cc0a2['bounds'][0x1*-0x2078+0x130c+0xd6d]),this['_fontMaxY']=Math['max'](this['_fontMaxY'],_0x5cc0a2['bounds'][0x9f3+0x1dde+0x7f6*-0x5]));}if(this['_font']['on']&&this['_font']['on']('render',this['_onFontRen'+'der'],this),this['_fontAsset']['localizedA'+'sset']&&this['_system']['app']['assets']['get'](this['_fontAsset']['localizedA'+'sset'])['resource']!==this['_font']&&(this['_fontAsset']['defaultAss'+'et']=null),_0x44b460['type']!==_0x3221f8){const _0x43cc47=this['_element']['_isScreenS'+'pace']();this['_updateMat'+'erial'](_0x43cc47);}for(let _0x1333a6=-0x1fbe+-0x16d9+0x3697,_0x2bcd85=this['_font']['textures']['length'];_0x1333a6<_0x2bcd85;_0x1333a6++)if(!this['_meshInfo'][_0x1333a6])this['_meshInfo'][_0x1333a6]=new vR();else{const _0x15098c=this['_meshInfo'][_0x1333a6]['meshInstan'+'ce'];_0x15098c&&(_0x15098c['setParamet'+'er']('font_sdfIn'+'tensity',this['_font']['intensity']),_0x15098c['setParamet'+'er']('font_pxran'+'ge',this['_getPxRang'+'e'](this['_font'])),_0x15098c['setParamet'+'er']('font_textu'+'reWidth',this['_font']['data']['info']['maps'][_0x1333a6]['width']),this['_setTextur'+'eParams'](_0x15098c,this['_font']['textures'][_0x1333a6]));}let _0x14b66d=!(-0x171*0x5+-0xd81+0x14b7);for(let _0x27c04a=this['_font']['textures']['length'];_0x27c04a<this['_meshInfo']['length'];_0x27c04a++)this['_meshInfo'][_0x27c04a]['meshInstan'+'ce']&&(_0x14b66d||(this['_element']['removeMode'+'lFromLayer'+'s'](this['_model']),_0x14b66d=!(-0x7*0x593+-0x3ff+0x2*0x1582)),this['_removeMes'+'hInstance'](this['_meshInfo'][_0x27c04a]['meshInstan'+'ce']));this['_meshInfo']['length']>this['_font']['textures']['length']&&(this['_meshInfo']['length']=this['_font']['textures']['length']),this['_updateTex'+'t']();}get['font'](){return this['_font'];}set['alignment'](_0x406434){_0x406434 instanceof J?this['_alignment']['set'](_0x406434['x'],_0x406434['y']):this['_alignment']['set'](_0x406434[0xe7b+0xe9a+-0x5d1*0x5],_0x406434[-0x1e7+0x1a93+-0x3*0x839]),this['_font']&&this['_updateTex'+'t']();}get['alignment'](){return this['_alignment'];}set['autoWidth'](_0x565968){const _0x3b991e=this['_autoWidth'];if(this['_autoWidth']=_0x565968,_0x565968&&Math['abs'](this['_element']['anchor']['x']-this['_element']['anchor']['z'])<-0x2157+0x1*-0x13d2+-0x3529*-0x1+0.0001&&(this['_element']['width']=this['width']),_0x3b991e!==_0x565968){const _0x1ec07a=this['_shouldAut'+'oFit']()?this['_maxFontSi'+'ze']:this['_originalF'+'ontSize'];_0x1ec07a!==this['_fontSize']&&(this['_fontSize']=_0x1ec07a,this['_font']&&this['_updateTex'+'t']());}}get['autoWidth'](){return this['_autoWidth'];}set['autoHeight'](_0x2e9fd8){const _0x17fcb5=this['_autoHeigh'+'t'];if(this['_autoHeigh'+'t']=_0x2e9fd8,_0x2e9fd8&&Math['abs'](this['_element']['anchor']['y']-this['_element']['anchor']['w'])<0x5*-0x1a6+-0x1*0x77+0x3*0x2e7+0.0001&&(this['_element']['height']=this['height']),_0x17fcb5!==_0x2e9fd8){const _0x388032=this['_shouldAut'+'oFit']()?this['_maxFontSi'+'ze']:this['_originalF'+'ontSize'];_0x388032!==this['_fontSize']&&(this['_fontSize']=_0x388032,this['_font']&&this['_updateTex'+'t']());}}get['autoHeight'](){return this['_autoHeigh'+'t'];}set['rtlReorder'](_0x5004f6){this['_rtlReorde'+'r']!==_0x5004f6&&(this['_rtlReorde'+'r']=_0x5004f6,this['_font']&&this['_updateTex'+'t']());}get['rtlReorder'](){return this['_rtlReorde'+'r'];}set['unicodeCon'+'verter'](_0xe11123){this['_unicodeCo'+'nverter']!==_0xe11123&&(this['_unicodeCo'+'nverter']=_0xe11123,this['_setText'](this['_text']));}get['unicodeCon'+'verter'](){return this['_unicodeCo'+'nverter'];}get['aabb'](){if(this['_aabbDirty']){let _0x11ead3=!(-0x1d79+-0xe27+0x2ba1);for(let _0x59ff74=0x7d*-0x1+0x37+0x7*0xa;_0x59ff74<this['_meshInfo']['length'];_0x59ff74++)this['_meshInfo'][_0x59ff74]['meshInstan'+'ce']&&(_0x11ead3?this['_aabb']['add'](this['_meshInfo'][_0x59ff74]['meshInstan'+'ce']['aabb']):(this['_aabb']['copy'](this['_meshInfo'][_0x59ff74]['meshInstan'+'ce']['aabb']),_0x11ead3=!(0x22*0x2+0x166+-0x1aa)));this['_aabbDirty']=!(-0xf16+0x51f+0x9f8);}return this['_aabb'];}set['outlineCol'+'or'](_0x1836ee){const _0x56c727=_0x1836ee instanceof ie?_0x1836ee['r']:_0x1836ee[-0x1*-0x1ba1+-0x22fb+0x75a*0x1],_0x348840=_0x1836ee instanceof ie?_0x1836ee['g']:_0x1836ee[0xc0b*-0x1+0x4d4*0x1+0x21*0x38],_0xc55197=_0x1836ee instanceof ie?_0x1836ee['b']:_0x1836ee[-0x25cb*-0x1+-0x3*0x772+-0xf73],_0x138540=_0x1836ee instanceof ie?_0x1836ee['a']:_0x1836ee[0xf*0x19f+0x104e+0x71*-0x5c];if(this['_outlineCo'+'lor']===_0x1836ee&&console['warn']('Setting\x20el'+'ement.outl'+'ineColor\x20t'+'o\x20itself\x20w'+'ill\x20have\x20n'+'o\x20effect'),!(this['_outlineCo'+'lor']['r']===_0x56c727&&this['_outlineCo'+'lor']['g']===_0x348840&&this['_outlineCo'+'lor']['b']===_0xc55197&&this['_outlineCo'+'lor']['a']===_0x138540)&&(this['_outlineCo'+'lor']['r']=_0x56c727,this['_outlineCo'+'lor']['g']=_0x348840,this['_outlineCo'+'lor']['b']=_0xc55197,this['_outlineCo'+'lor']['a']=_0x138540,!!this['_model'])){if(this['_symbolOut'+'lineParams'])this['_font']&&this['_updateTex'+'t']();else{We['linear'](this['_outlineCo'+'lor']),this['_outlineCo'+'lorUniform'][-0x2*0x54a+-0x23a6+0x2e3a]=We['r'],this['_outlineCo'+'lorUniform'][-0x5db+0x13b1+0xdd5*-0x1]=We['g'],this['_outlineCo'+'lorUniform'][-0x1f*-0x1f+0x2*0x17e+-0x1*0x6bb]=We['b'],this['_outlineCo'+'lorUniform'][-0x168f+0x10b8+0x1*0x5da]=We['a'];for(let _0x1fe862=-0x4*0x1b7+0x68e+0x4e,_0x15c517=this['_model']['meshInstan'+'ces']['length'];_0x1fe862<_0x15c517;_0x1fe862++)this['_model']['meshInstan'+'ces'][_0x1fe862]['setParamet'+'er']('outline_co'+'lor',this['_outlineCo'+'lorUniform']);}this['_element']&&this['_element']['fire']('set:outlin'+'e',this['_color']);}}get['outlineCol'+'or'](){return this['_outlineCo'+'lor'];}set['outlineThi'+'ckness'](_0x4d0dcb){const _0x376650=this['_outlineTh'+'ickness'];if(this['_outlineTh'+'ickness']=_0x4d0dcb,_0x376650!==_0x4d0dcb&&this['_font']){if(!this['_model'])return;if(this['_symbolOut'+'lineParams'])this['_font']&&this['_updateTex'+'t']();else{for(let _0x4efaed=0x2530+0x1f4b*0x1+-0x447b,_0x3fa6f1=this['_model']['meshInstan'+'ces']['length'];_0x4efaed<_0x3fa6f1;_0x4efaed++)this['_model']['meshInstan'+'ces'][_0x4efaed]['setParamet'+'er']('outline_th'+'ickness',this['_outlineTh'+'icknessSca'+'le']*this['_outlineTh'+'ickness']);}}}get['outlineThi'+'ckness'](){return this['_outlineTh'+'ickness'];}set['shadowColo'+'r'](_0x2da69e){const _0x24de47=_0x2da69e instanceof ie?_0x2da69e['r']:_0x2da69e[-0x3d*-0x59+0x1654+-0x2b89],_0x5bc4e1=_0x2da69e instanceof ie?_0x2da69e['g']:_0x2da69e[0x20bc+-0x3b*-0x18+-0x5*0x7a7],_0x158125=_0x2da69e instanceof ie?_0x2da69e['b']:_0x2da69e[0x786+-0x1d7f+-0x1*-0x15fb],_0x1cc3f5=_0x2da69e instanceof ie?_0x2da69e['a']:_0x2da69e[-0x2337*-0x1+-0x9d0+-0x1964];if(this['_shadowCol'+'or']===_0x2da69e&&w['warn']('Setting\x20el'+'ement.shad'+'owColor\x20to'+'\x20itself\x20wi'+'ll\x20have\x20no'+'\x20effect'),!(this['_shadowCol'+'or']['r']===_0x24de47&&this['_shadowCol'+'or']['g']===_0x5bc4e1&&this['_shadowCol'+'or']['b']===_0x158125&&this['_shadowCol'+'or']['a']===_0x1cc3f5)&&(this['_shadowCol'+'or']['r']=_0x24de47,this['_shadowCol'+'or']['g']=_0x5bc4e1,this['_shadowCol'+'or']['b']=_0x158125,this['_shadowCol'+'or']['a']=_0x1cc3f5,!!this['_model'])){if(this['_symbolSha'+'dowParams'])this['_font']&&this['_updateTex'+'t']();else{We['linear'](this['_shadowCol'+'or']),this['_shadowCol'+'orUniform'][0xbc9+-0xc7+0x2*-0x581]=We['r'],this['_shadowCol'+'orUniform'][-0x1020*0x2+-0x5*0x6c7+0x1089*0x4]=We['g'],this['_shadowCol'+'orUniform'][0x81b+-0x109*-0x13+-0x1bc4]=We['b'],this['_shadowCol'+'orUniform'][-0x146b+0x122+-0x17c*-0xd]=We['a'];for(let _0x594de2=-0x1df2+0x87*-0xb+0x23bf*0x1,_0x3605a2=this['_model']['meshInstan'+'ces']['length'];_0x594de2<_0x3605a2;_0x594de2++)this['_model']['meshInstan'+'ces'][_0x594de2]['setParamet'+'er']('shadow_col'+'or',this['_shadowCol'+'orUniform']);}}}get['shadowColo'+'r'](){return this['_shadowCol'+'or'];}set['shadowOffs'+'et'](_0x1bd086){const _0x216f9c=_0x1bd086 instanceof J?_0x1bd086['x']:_0x1bd086[-0x1da6+-0x23f3*-0x1+-0x64d*0x1],_0x2544a4=_0x1bd086 instanceof J?_0x1bd086['y']:_0x1bd086[0xc6f+0x513*-0x3+0x37*0xd];if(!(this['_shadowOff'+'set']['x']===_0x216f9c&&this['_shadowOff'+'set']['y']===_0x2544a4)&&(this['_shadowOff'+'set']['set'](_0x216f9c,_0x2544a4),this['_font']&&this['_model'])){if(this['_symbolSha'+'dowParams'])this['_updateTex'+'t']();else for(let _0x3bebd0=0xec3+-0x63d*0x5+0x106e,_0x479c6e=this['_model']['meshInstan'+'ces']['length'];_0x3bebd0<_0x479c6e;_0x3bebd0++){const _0x11aae4=-this['_font']['data']['info']['maps'][_0x3bebd0]['width']/this['_font']['data']['info']['maps'][_0x3bebd0]['height'];this['_shadowOff'+'setUniform'][-0x1830+0x107+0x1729]=this['_shadowOff'+'setScale']*this['_shadowOff'+'set']['x'],this['_shadowOff'+'setUniform'][-0x135c+0xaa3+-0x8ba*-0x1]=_0x11aae4*this['_shadowOff'+'setScale']*this['_shadowOff'+'set']['y'],this['_model']['meshInstan'+'ces'][_0x3bebd0]['setParamet'+'er']('shadow_off'+'set',this['_shadowOff'+'setUniform']);}}}get['shadowOffs'+'et'](){return this['_shadowOff'+'set'];}set['minFontSiz'+'e'](_0x5333e2){this['_minFontSi'+'ze']!==_0x5333e2&&(this['_minFontSi'+'ze']=_0x5333e2,this['font']&&this['_shouldAut'+'oFit']()&&this['_updateTex'+'t']());}get['minFontSiz'+'e'](){return this['_minFontSi'+'ze'];}set['maxFontSiz'+'e'](_0x2fdd8b){this['_maxFontSi'+'ze']!==_0x2fdd8b&&(this['_maxFontSi'+'ze']=_0x2fdd8b,this['font']&&this['_shouldAut'+'oFit']()&&this['_updateTex'+'t']());}get['maxFontSiz'+'e'](){return this['_maxFontSi'+'ze'];}set['autoFitWid'+'th'](_0xb7304a){this['_autoFitWi'+'dth']!==_0xb7304a&&(this['_autoFitWi'+'dth']=_0xb7304a,this['_fontSize']=this['_shouldAut'+'oFit']()?this['_maxFontSi'+'ze']:this['_originalF'+'ontSize'],this['font']&&this['_updateTex'+'t']());}get['autoFitWid'+'th'](){return this['_autoFitWi'+'dth'];}set['autoFitHei'+'ght'](_0x33c502){this['_autoFitHe'+'ight']!==_0x33c502&&(this['_autoFitHe'+'ight']=_0x33c502,this['_fontSize']=this['_shouldAut'+'oFit']()?this['_maxFontSi'+'ze']:this['_originalF'+'ontSize'],this['font']&&this['_updateTex'+'t']());}get['autoFitHei'+'ght'](){return this['_autoFitHe'+'ight'];}set['maxLines'](_0x5b31a6){this['_maxLines']!==_0x5b31a6&&(_0x5b31a6===null&&this['_maxLines']===-(0xd68+0x1954+0x7bf*-0x5)||(this['_maxLines']=_0x5b31a6===null?-(-0x1e42+-0x1f7*0x3+0x34*0xb2):_0x5b31a6,this['font']&&this['_wrapLines']&&this['_updateTex'+'t']()));}get['maxLines'](){return this['_maxLines'];}set['enableMark'+'up'](_0x2c5df5){if(_0x2c5df5=!!_0x2c5df5,this['_enableMar'+'kup']===_0x2c5df5)return;this['_enableMar'+'kup']=_0x2c5df5,this['font']&&this['_updateTex'+'t']();const _0x497192=this['_element']['_isScreenS'+'pace']();this['_updateMat'+'erial'](_0x497192);}get['enableMark'+'up'](){return this['_enableMar'+'kup'];}get['symbols'](){return this['_symbols'];}get['symbolColo'+'rs'](){return this['_symbolCol'+'ors']===null?null:this['_symbolCol'+'ors']['map'](function(_0x5cc6c7){return this['_colorPale'+'tte']['slice'](_0x5cc6c7*(-0x48+0x20fb*-0x1+0x2146),_0x5cc6c7*(0x1e10+0x3*-0x307+-0x14f8)+(-0x1ad3*-0x1+0x792*-0x2+-0xbac));},this);}get['symbolOutl'+'ineParams'](){return this['_symbolOut'+'lineParams']===null?null:this['_symbolOut'+'lineParams']['map'](function(_0x5db202){return this['_outlinePa'+'lette']['slice'](_0x5db202*(-0x79*0x3e+-0x1*0x135e+0x30b1),_0x5db202*(-0x158+0x9d1*-0x1+-0x9*-0x13e)+(-0xa9c+0x17ef+-0xd4e));},this);}get['symbolShad'+'owParams'](){return this['_symbolSha'+'dowParams']===null?null:this['_symbolSha'+'dowParams']['map'](function(_0x12f7cd){return this['_shadowPal'+'ette']['slice'](_0x12f7cd*(0x4*-0x962+0x5*0x761+0xa9),_0x12f7cd*(-0x897+-0x13ce+-0x4b*-0x61)+(-0x7bb+0x209+0x18*0x3d));},this);}get['rtl'](){return this['_rtl'];}set['rangeStart'](_0x5a7dfe){_0x5a7dfe=Math['max'](-0x2387+0x2*0x12cd+0xb1*-0x3,Math['min'](_0x5a7dfe,this['_symbols']['length'])),_0x5a7dfe!==this['_rangeStar'+'t']&&(this['_rangeStar'+'t']=_0x5a7dfe,this['_updateRen'+'derRange']());}get['rangeStart'](){return this['_rangeStar'+'t'];}set['rangeEnd'](_0x3bef59){_0x3bef59=Math['max'](this['_rangeStar'+'t'],Math['min'](_0x3bef59,this['_symbols']['length'])),_0x3bef59!==this['_rangeEnd']&&(this['_rangeEnd']=_0x3bef59,this['_updateRen'+'derRange']());}get['rangeEnd'](){return this['_rangeEnd'];}}const Ef=new D(),Zg=new te(),Pi=new D(),MR=new D(),ws=new te(),bc=new te(),Ac=new te(),$a=new te();class hs extends we{constructor(_0x370a00,_0x1100d8){super(_0x370a00,_0x1100d8),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),(this['_beingInit'+'ialized']=!(-0x11d0+0xd*0x1b6+0x67*-0xb),this['_anchor']=new re(),this['_localAnch'+'or']=new re(),this['_pivot']=new J(),this['_width']=this['_calculate'+'dWidth']=0x6*0x6+-0x2a6+-0x151*-0x2,this['_height']=this['_calculate'+'dHeight']=0x39f*0x3+-0x1*-0x5cf+0x1*-0x108c,this['_margin']=new re(0x2367*0x1+-0x15e6+-0xd81*0x1,0xe58+-0x97e+0x1b*-0x2e,-(-0x564+-0x1738+0x1cbc),-(-0x16*0xc7+0xc6f+-0x1*-0x4cb)),this['_modelTran'+'sform']=new te(),this['_screenToW'+'orld']=new te(),this['_anchorTra'+'nsform']=new te(),this['_anchorDir'+'ty']=!(-0x1d57+0x5*-0x4d5+-0x6b0*-0x8),this['_parentWor'+'ldTransfor'+'m']=new te(),this['_screenTra'+'nsform']=new te(),this['_screenCor'+'ners']=[new D(),new D(),new D(),new D()],this['_canvasCor'+'ners']=[new J(),new J(),new J(),new J()],this['_worldCorn'+'ers']=[new D(),new D(),new D(),new D()],this['_cornersDi'+'rty']=!(0x56a*0x4+0xa0c*-0x1+0x5ce*-0x2),this['_canvasCor'+'nersDirty']=!(0x48f+-0xdaa+0x3*0x309),this['_worldCorn'+'ersDirty']=!(-0x1*-0x1fa2+0xeb*-0x1f+-0x3*0x10f),this['entity']['on']('insert',this['_onInsert'],this),this['_patch'](),this['screen']=null,this['_type']=eh,this['_image']=null,this['_text']=null,this['_group']=null,this['_drawOrder']=0x15*0x46+0x114c+-0x1*0x170a,this['_fitMode']=th,this['_useInput']=!(0x5*-0x14+0x87*0x27+-0x142c),this['_layers']=[Il],this['_addedMode'+'ls']=[],this['_batchGrou'+'pId']=-(-0x1eb4+-0x2f1+0x21a6),this['_batchGrou'+'p']=null,this['_offsetRea'+'dAt']=-0xbc2+-0x13*0x31+0xf65,this['_maskOffse'+'t']=-0x5*0x67a+0x158+0x1f0a+0.5,this['_maskedBy']=null);}get['data'](){const _0x22942e=this['system']['store'][this['entity']['getGuid']()];return _0x22942e?_0x22942e['data']:null;}set['enabled'](_0x34914e){const _0xb791d8=this['data'],_0x221a7b=_0xb791d8['enabled'];_0xb791d8['enabled']=_0x34914e,this['fire']('set','enabled',_0x221a7b,_0x34914e);}get['enabled'](){return this['data']['enabled'];}get['_absLeft'](){return this['_localAnch'+'or']['x']+this['_margin']['x'];}get['_absRight'](){return this['_localAnch'+'or']['z']-this['_margin']['z'];}get['_absTop'](){return this['_localAnch'+'or']['w']-this['_margin']['w'];}get['_absBottom'](){return this['_localAnch'+'or']['y']+this['_margin']['y'];}get['_hasSplitA'+'nchorsX'](){return Math['abs'](this['_anchor']['x']-this['_anchor']['z'])>-0x1add+0xfc0+0xb1d+0.001;}get['_hasSplitA'+'nchorsY'](){return Math['abs'](this['_anchor']['y']-this['_anchor']['w'])>-0x155+0x1331+-0x11dc+0.001;}get['aabb'](){return this['_image']?this['_image']['aabb']:this['_text']?this['_text']['aabb']:null;}set['anchor'](_0x25a265){_0x25a265 instanceof re?this['_anchor']['copy'](_0x25a265):this['_anchor']['set'](..._0x25a265),!this['entity']['_parent']&&!this['screen']?this['_calculate'+'LocalAncho'+'rs']():this['_calculate'+'Size'](this['_hasSplitA'+'nchorsX'],this['_hasSplitA'+'nchorsY']),this['_anchorDir'+'ty']=!(-0xd06+-0x2092+-0x5b3*-0x8),this['entity']['_dirtyLoca'+'l']||this['entity']['_dirtifyLo'+'cal'](),this['fire']('set:anchor',this['_anchor']);}get['anchor'](){return this['_anchor'];}set['batchGroup'+'Id'](_0x1df054){var _0xceb269,_0x10bb7a;this['_batchGrou'+'pId']!==_0x1df054&&(this['entity']['enabled']&&this['_batchGrou'+'pId']>=0x1f*-0x31+0x7c4+0x7*-0x43&&((_0xceb269=this['system']['app']['batcher'])==null||_0xceb269['remove'](St['ELEMENT'],this['batchGroup'+'Id'],this['entity'])),this['entity']['enabled']&&_0x1df054>=-0xfe*-0x1a+-0x79+-0x1953&&((_0x10bb7a=this['system']['app']['batcher'])==null||_0x10bb7a['insert'](St['ELEMENT'],_0x1df054,this['entity'])),_0x1df054<0x18af+-0x3*0x7fb+0x5*-0x26&&this['_batchGrou'+'pId']>=-0x1*-0x21fb+0x1990+-0x3b8b&&this['enabled']&&this['entity']['enabled']&&(this['_image']&&this['_image']['_renderabl'+'e']['model']?this['addModelTo'+'Layers'](this['_image']['_renderabl'+'e']['model']):this['_text']&&this['_text']['_model']&&this['addModelTo'+'Layers'](this['_text']['_model'])),this['_batchGrou'+'pId']=_0x1df054);}get['batchGroup'+'Id'](){return this['_batchGrou'+'pId'];}set['bottom'](_0xc4d7f9){this['_margin']['y']=_0xc4d7f9;const _0x10fab7=this['entity']['getLocalPo'+'sition'](),_0x41038f=this['_absTop'],_0x5a0e3a=this['_localAnch'+'or']['y']+_0xc4d7f9;this['_setHeight'](_0x41038f-_0x5a0e3a),_0x10fab7['y']=_0xc4d7f9+this['_calculate'+'dHeight']*this['_pivot']['y'],this['entity']['setLocalPo'+'sition'](_0x10fab7);}get['bottom'](){return this['_margin']['y'];}set['calculated'+'Width'](_0x2b584a){this['_setCalcul'+'atedWidth'](_0x2b584a,!(-0x15bf*-0x1+-0x1*0x3fd+-0x2*0x8e1));}get['calculated'+'Width'](){return this['_calculate'+'dWidth'];}set['calculated'+'Height'](_0x674ad4){this['_setCalcul'+'atedHeight'](_0x674ad4,!(-0x2145+0x13c1+0x5*0x2b4));}get['calculated'+'Height'](){return this['_calculate'+'dHeight'];}get['canvasCorn'+'ers'](){if(!this['_canvasCor'+'nersDirty']||!this['screen']||!this['screen']['screen']['screenSpac'+'e'])return this['_canvasCor'+'ners'];const _0x2d12e1=this['system']['app']['graphicsDe'+'vice'],_0x293384=this['screenCorn'+'ers'],_0x344dcf=_0x2d12e1['canvas']['clientWidt'+'h']/_0x2d12e1['width'],_0x22eb52=_0x2d12e1['canvas']['clientHeig'+'ht']/_0x2d12e1['height'];for(let _0x46d5b1=-0x1407*0x1+0xaf8+0x1*0x90f;_0x46d5b1<0xa50+0x1e70+-0x28bc;_0x46d5b1++)this['_canvasCor'+'ners'][_0x46d5b1]['set'](_0x293384[_0x46d5b1]['x']*_0x344dcf,(_0x2d12e1['height']-_0x293384[_0x46d5b1]['y'])*_0x22eb52);return this['_canvasCor'+'nersDirty']=!(0xeaf+0x165c+-0x250a),this['_canvasCor'+'ners'];}set['drawOrder'](_0x264b61){let _0x5713b1=0x9c*-0x13+0x14d8+-0x944;this['screen']&&(_0x5713b1=this['screen']['screen']['priority']),_0x264b61>-0x1a15bbf+-0xd*-0x11a9c9+0x93e983*0x3&&(w['warn']('Element.dr'+'awOrder\x20la'+'rger\x20than\x20'+'max\x20size\x20o'+'f:\x201677721'+'5'),_0x264b61=0x1548813+0x1f9cb69+-0x24e537d),this['_drawOrder']=(_0x5713b1<<-0x1bbf+0x14c6+0x3*0x25b)+_0x264b61,this['fire']('set:drawor'+'der',this['_drawOrder']);}get['drawOrder'](){return this['_drawOrder'];}set['height'](_0x636ee5){this['_height']=_0x636ee5,this['_hasSplitA'+'nchorsY']||this['_setCalcul'+'atedHeight'](_0x636ee5,!(0x27*0xa+-0x1*0x259+0xd3*0x1)),this['fire']('set:height',this['_height']);}get['height'](){return this['_height'];}set['layers'](_0x18c5ff){if(this['_addedMode'+'ls']['length'])for(let _0x13bf11=0x1*0x5e7+0x1b67+0x15*-0x196;_0x13bf11<this['_layers']['length'];_0x13bf11++){const _0x3462c4=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['_layers'][_0x13bf11]);if(_0x3462c4){for(let _0x37f200=-0x2609+-0x7*0x16d+-0x3004*-0x1;_0x37f200<this['_addedMode'+'ls']['length'];_0x37f200++)_0x3462c4['removeMesh'+'Instances'](this['_addedMode'+'ls'][_0x37f200]['meshInstan'+'ces']);}}if(this['_layers']=_0x18c5ff,!(!this['enabled']||!this['entity']['enabled']||!this['_addedMode'+'ls']['length']))for(let _0xb5b4f0=-0x1d89+-0x1*-0x2099+0x62*-0x8;_0xb5b4f0<this['_layers']['length'];_0xb5b4f0++){const _0x1ec326=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['_layers'][_0xb5b4f0]);if(_0x1ec326){for(let _0x2c7688=-0x15*0xe9+-0x1b*-0x3a+0xcff;_0x2c7688<this['_addedMode'+'ls']['length'];_0x2c7688++)_0x1ec326['addMeshIns'+'tances'](this['_addedMode'+'ls'][_0x2c7688]['meshInstan'+'ces']);}}}get['layers'](){return this['_layers'];}set['left'](_0x372a0f){this['_margin']['x']=_0x372a0f;const _0x48ed0f=this['entity']['getLocalPo'+'sition'](),_0x190be0=this['_absRight'],_0x49bc0f=this['_localAnch'+'or']['x']+_0x372a0f;this['_setWidth'](_0x190be0-_0x49bc0f),_0x48ed0f['x']=_0x372a0f+this['_calculate'+'dWidth']*this['_pivot']['x'],this['entity']['setLocalPo'+'sition'](_0x48ed0f);}get['left'](){return this['_margin']['x'];}set['margin'](_0x3bbfec){this['_margin']['copy'](_0x3bbfec),this['_calculate'+'Size'](!(0x1050+0x16e4+-0x2734),!(-0x24d3*0x1+-0x20c4+0x4597)),this['fire']('set:margin',this['_margin']);}get['margin'](){return this['_margin'];}get['maskedBy'](){return this['_maskedBy'];}set['pivot'](_0x235690){const {pivot:_0x223da8,margin:_0xc71c27}=this,_0x378ccb=_0x223da8['x'],_0x9b0867=_0x223da8['y'];_0x235690 instanceof J?_0x223da8['copy'](_0x235690):_0x223da8['set'](..._0x235690);const _0x137c92=_0xc71c27['x']+_0xc71c27['z'],_0xfa558c=_0x223da8['x']-_0x378ccb;_0xc71c27['x']+=_0x137c92*_0xfa558c,_0xc71c27['z']-=_0x137c92*_0xfa558c;const _0x1b71ac=_0xc71c27['y']+_0xc71c27['w'],_0x39c661=_0x223da8['y']-_0x9b0867;_0xc71c27['y']+=_0x1b71ac*_0x39c661,_0xc71c27['w']-=_0x1b71ac*_0x39c661,this['_anchorDir'+'ty']=!(0x1a80+-0x213a+-0x23e*-0x3),this['_cornersDi'+'rty']=!(-0x154a+0x1c3+0x1387*0x1),this['_worldCorn'+'ersDirty']=!(-0x1902+0x7*-0x469+0x1*0x37e1),this['_calculate'+'Size'](!(0x53*-0x65+0xbd9+-0x14e7*-0x1),!(0x1*-0x17e9+-0xe89+-0x243*-0x11)),this['_flagChild'+'renAsDirty'](),this['fire']('set:pivot',_0x223da8);}get['pivot'](){return this['_pivot'];}set['right'](_0x52046a){this['_margin']['z']=_0x52046a;const _0xf4a368=this['entity']['getLocalPo'+'sition'](),_0x30a450=this['_absLeft'],_0x1e1bfc=this['_localAnch'+'or']['z']-_0x52046a;this['_setWidth'](_0x1e1bfc-_0x30a450),_0xf4a368['x']=this['_localAnch'+'or']['z']-this['_localAnch'+'or']['x']-_0x52046a-this['_calculate'+'dWidth']*(0x191f*-0x1+0x1*-0x142d+-0x2d4d*-0x1-this['_pivot']['x']),this['entity']['setLocalPo'+'sition'](_0xf4a368);}get['right'](){return this['_margin']['z'];}get['screenCorn'+'ers'](){if(!this['_cornersDi'+'rty']||!this['screen'])return this['_screenCor'+'ners'];const _0x4ad0cf=this['entity']['parent']&&this['entity']['parent']['element']&&this['entity']['parent']['element']['screenCorn'+'ers'][-0x2255+-0x1*-0x1fff+0x12b*0x2];this['_screenCor'+'ners'][0x79*0x1+-0x14ab+-0x5e*-0x37]['set'](this['_absLeft'],this['_absBottom'],-0xca8+0x25ce+-0x1926*0x1),this['_screenCor'+'ners'][-0xcfa*0x1+-0x2f9*0xc+-0x9bb*-0x5]['set'](this['_absRight'],this['_absBottom'],0x19d5+-0x4cd+-0x1508),this['_screenCor'+'ners'][0x1402+0x4*-0x874+0xdd0]['set'](this['_absRight'],this['_absTop'],0x1cdb+-0x3*-0x637+-0x2f80),this['_screenCor'+'ners'][-0xcd5*0x1+0x10b0+-0x6*0xa4]['set'](this['_absLeft'],this['_absTop'],0xbd8+-0x148a+0x8b2);const _0x46640b=this['screen']['screen']['screenSpac'+'e'];for(let _0xe4b12e=-0x3*0x4fd+0x1*-0x668+0x155f;_0xe4b12e<-0x82d*0x3+-0x257c+-0x3*-0x14ad;_0xe4b12e++)this['_screenTra'+'nsform']['transformP'+'oint'](this['_screenCor'+'ners'][_0xe4b12e],this['_screenCor'+'ners'][_0xe4b12e]),_0x46640b&&this['_screenCor'+'ners'][_0xe4b12e]['mulScalar'](this['screen']['screen']['scale']),_0x4ad0cf&&this['_screenCor'+'ners'][_0xe4b12e]['add'](_0x4ad0cf);return this['_cornersDi'+'rty']=!(-0x10f3+-0x20cd+0x31c1),this['_canvasCor'+'nersDirty']=!(0x1*-0x1a3f+-0x4*0x68f+0x347b),this['_worldCorn'+'ersDirty']=!(-0x7*0x11+0x31*0x1e+-0x547),this['_screenCor'+'ners'];}get['textWidth'](){return this['_text']?this['_text']['width']:-0x2*-0x98e+0x519+-0x1835;}get['textHeight'](){return this['_text']?this['_text']['height']:-0x1b2a+-0x259f+0x40c9;}set['top'](_0x586647){this['_margin']['w']=_0x586647;const _0x557068=this['entity']['getLocalPo'+'sition'](),_0x4a9ec2=this['_absBottom'],_0x75dfc8=this['_localAnch'+'or']['w']-_0x586647;this['_setHeight'](_0x75dfc8-_0x4a9ec2),_0x557068['y']=this['_localAnch'+'or']['w']-this['_localAnch'+'or']['y']-_0x586647-this['_calculate'+'dHeight']*(0x247d+-0x8ff+0x1b7d*-0x1-this['_pivot']['y']),this['entity']['setLocalPo'+'sition'](_0x557068);}get['top'](){return this['_margin']['w'];}set['type'](_0x5dcfc4){_0x5dcfc4!==this['_type']&&(this['_type']=_0x5dcfc4,this['_image']&&(this['_image']['destroy'](),this['_image']=null),this['_text']&&(this['_text']['destroy'](),this['_text']=null),_0x5dcfc4===Cu?this['_image']=new cR(this):_0x5dcfc4===jv&&(this['_text']=new PR(this)));}get['type'](){return this['_type'];}set['useInput'](_0x1064b7){this['_useInput']!==_0x1064b7&&(this['_useInput']=_0x1064b7,this['system']['app']['elementInp'+'ut']?_0x1064b7?this['enabled']&&this['entity']['enabled']&&this['system']['app']['elementInp'+'ut']['addElement'](this):this['system']['app']['elementInp'+'ut']['removeElem'+'ent'](this):this['_useInput']===!(-0x1366+0x11c2*-0x1+0x2528)&&w['warn']('Elements\x20w'+'ill\x20not\x20ge'+'t\x20any\x20inpu'+'t\x20events\x20b'+'ecause\x20thi'+'s.system.a'+'pp.element'+'Input\x20is\x20n'+'ot\x20created'),this['fire']('set:useInp'+'ut',_0x1064b7));}get['useInput'](){return this['_useInput'];}set['fitMode'](_0x190a51){this['_fitMode']=_0x190a51,this['_calculate'+'Size'](!(-0x1*0x551+-0xa38+0xf89),!(-0x1*-0xc98+0x99d+-0xf*0x17b)),this['_image']&&this['_image']['refreshMes'+'h']();}get['fitMode'](){return this['_fitMode'];}set['width'](_0x77b54){this['_width']=_0x77b54,this['_hasSplitA'+'nchorsX']||this['_setCalcul'+'atedWidth'](_0x77b54,!(0x10fd+0x22d*0x2+-0x1557)),this['fire']('set:width',this['_width']);}get['width'](){return this['_width'];}get['worldCorne'+'rs'](){if(!this['_worldCorn'+'ersDirty'])return this['_worldCorn'+'ers'];if(this['screen']){const _0x3e2689=this['screenCorn'+'ers'];if(!this['screen']['screen']['screenSpac'+'e']){ws['copy'](this['screen']['screen']['_screenMat'+'rix']),ws['data'][0x788+0x13a*0x15+-0x213d]=-ws['data'][0x166*-0xd+0x1e6a*-0x1+0x30a5],ws['mul2'](this['screen']['getWorldTr'+'ansform'](),ws);for(let _0x12c018=0xb61+-0xd9*0x1f+0xee6;_0x12c018<0xf1+0x85*0x25+-0x1426;_0x12c018++)ws['transformP'+'oint'](_0x3e2689[_0x12c018],this['_worldCorn'+'ers'][_0x12c018]);}}else{const _0x2a9e7c=this['entity']['getLocalPo'+'sition']();ws['setTransla'+'te'](-_0x2a9e7c['x'],-_0x2a9e7c['y'],-_0x2a9e7c['z']),bc['setTRS'](D['ZERO'],this['entity']['getLocalRo'+'tation'](),this['entity']['getLocalSc'+'ale']()),Ac['setTransla'+'te'](_0x2a9e7c['x'],_0x2a9e7c['y'],_0x2a9e7c['z']);const _0x4aa740=this['entity']['parent']?this['entity']['parent']:this['entity'];$a['copy'](_0x4aa740['getWorldTr'+'ansform']()),$a['mul'](Ac)['mul'](bc)['mul'](ws),Pi['set'](_0x2a9e7c['x']-this['pivot']['x']*this['calculated'+'Width'],_0x2a9e7c['y']-this['pivot']['y']*this['calculated'+'Height'],_0x2a9e7c['z']),$a['transformP'+'oint'](Pi,this['_worldCorn'+'ers'][0x1c68+0xda*-0x4+-0x14*0x140]),Pi['set'](_0x2a9e7c['x']+(-0x1*0xab7+-0x10c+-0x5e2*-0x2-this['pivot']['x'])*this['calculated'+'Width'],_0x2a9e7c['y']-this['pivot']['y']*this['calculated'+'Height'],_0x2a9e7c['z']),$a['transformP'+'oint'](Pi,this['_worldCorn'+'ers'][0x1*-0x1bc7+0x7*0x4a5+0xad*-0x7]),Pi['set'](_0x2a9e7c['x']+(0x20e0+-0x1*0x2246+-0x1*-0x167-this['pivot']['x'])*this['calculated'+'Width'],_0x2a9e7c['y']+(-0x2a*-0x9f+-0x2143+-0x1*-0x72e-this['pivot']['y'])*this['calculated'+'Height'],_0x2a9e7c['z']),$a['transformP'+'oint'](Pi,this['_worldCorn'+'ers'][0x446*-0x9+0xca6+0x19d2]),Pi['set'](_0x2a9e7c['x']-this['pivot']['x']*this['calculated'+'Width'],_0x2a9e7c['y']+(0x180e+0x1fde*0x1+0x1*-0x37eb-this['pivot']['y'])*this['calculated'+'Height'],_0x2a9e7c['z']),$a['transformP'+'oint'](Pi,this['_worldCorn'+'ers'][-0x1a1d+0x12c8+0x758]);}return this['_worldCorn'+'ersDirty']=!(0x2*-0x496+0xd1f+-0x3f2),this['_worldCorn'+'ers'];}set['fontSize'](_0x4af215){this['_setValue']('fontSize',_0x4af215);}get['fontSize'](){return this['_text']?this['_text']['fontSize']:null;}set['minFontSiz'+'e'](_0x470057){this['_setValue']('minFontSiz'+'e',_0x470057);}get['minFontSiz'+'e'](){return this['_text']?this['_text']['minFontSiz'+'e']:null;}set['maxFontSiz'+'e'](_0x3f4b33){this['_setValue']('maxFontSiz'+'e',_0x3f4b33);}get['maxFontSiz'+'e'](){return this['_text']?this['_text']['maxFontSiz'+'e']:null;}set['maxLines'](_0x50e4c1){this['_setValue']('maxLines',_0x50e4c1);}get['maxLines'](){return this['_text']?this['_text']['maxLines']:null;}set['autoFitWid'+'th'](_0x55800b){this['_setValue']('autoFitWid'+'th',_0x55800b);}get['autoFitWid'+'th'](){return this['_text']?this['_text']['autoFitWid'+'th']:null;}set['autoFitHei'+'ght'](_0x5c60a1){this['_setValue']('autoFitHei'+'ght',_0x5c60a1);}get['autoFitHei'+'ght'](){return this['_text']?this['_text']['autoFitHei'+'ght']:null;}set['color'](_0x5909be){this['_setValue']('color',_0x5909be);}get['color'](){return this['_text']?this['_text']['color']:this['_image']?this['_image']['color']:null;}set['font'](_0xdcb1d7){this['_setValue']('font',_0xdcb1d7);}get['font'](){return this['_text']?this['_text']['font']:null;}set['fontAsset'](_0x19b015){this['_setValue']('fontAsset',_0x19b015);}get['fontAsset'](){return this['_text']&&typeof this['_text']['fontAsset']=='number'?this['_text']['fontAsset']:null;}set['spacing'](_0x4c155b){this['_setValue']('spacing',_0x4c155b);}get['spacing'](){return this['_text']?this['_text']['spacing']:null;}set['lineHeight'](_0x4b29b9){this['_setValue']('lineHeight',_0x4b29b9);}get['lineHeight'](){return this['_text']?this['_text']['lineHeight']:null;}set['wrapLines'](_0x276952){this['_setValue']('wrapLines',_0x276952);}get['wrapLines'](){return this['_text']?this['_text']['wrapLines']:null;}set['lines'](_0x1c9862){this['_setValue']('lines',_0x1c9862);}get['lines'](){return this['_text']?this['_text']['lines']:null;}set['alignment'](_0x4970eb){this['_setValue']('alignment',_0x4970eb);}get['alignment'](){return this['_text']?this['_text']['alignment']:null;}set['autoWidth'](_0x4e00bc){this['_setValue']('autoWidth',_0x4e00bc);}get['autoWidth'](){return this['_text']?this['_text']['autoWidth']:null;}set['autoHeight'](_0x2851c3){this['_setValue']('autoHeight',_0x2851c3);}get['autoHeight'](){return this['_text']?this['_text']['autoHeight']:null;}set['rtlReorder'](_0x3ace7d){this['_setValue']('rtlReorder',_0x3ace7d);}get['rtlReorder'](){return this['_text']?this['_text']['rtlReorder']:null;}set['unicodeCon'+'verter'](_0x5c715f){this['_setValue']('unicodeCon'+'verter',_0x5c715f);}get['unicodeCon'+'verter'](){return this['_text']?this['_text']['unicodeCon'+'verter']:null;}set['text'](_0x38c35f){this['_setValue']('text',_0x38c35f);}get['text'](){return this['_text']?this['_text']['text']:null;}set['key'](_0x35301a){this['_setValue']('key',_0x35301a);}get['key'](){return this['_text']?this['_text']['key']:null;}set['texture'](_0x2deec2){this['_setValue']('texture',_0x2deec2);}get['texture'](){return this['_image']?this['_image']['texture']:null;}set['textureAss'+'et'](_0x4fb820){this['_setValue']('textureAss'+'et',_0x4fb820);}get['textureAss'+'et'](){return this['_image']?this['_image']['textureAss'+'et']:null;}set['material'](_0x8e34ee){this['_setValue']('material',_0x8e34ee);}get['material'](){return this['_image']?this['_image']['material']:null;}set['materialAs'+'set'](_0x236b76){this['_setValue']('materialAs'+'set',_0x236b76);}get['materialAs'+'set'](){return this['_image']?this['_image']['materialAs'+'set']:null;}set['sprite'](_0x366134){this['_setValue']('sprite',_0x366134);}get['sprite'](){return this['_image']?this['_image']['sprite']:null;}set['spriteAsse'+'t'](_0x2ebaf9){this['_setValue']('spriteAsse'+'t',_0x2ebaf9);}get['spriteAsse'+'t'](){return this['_image']?this['_image']['spriteAsse'+'t']:null;}set['spriteFram'+'e'](_0x5530f6){this['_setValue']('spriteFram'+'e',_0x5530f6);}get['spriteFram'+'e'](){return this['_image']?this['_image']['spriteFram'+'e']:null;}set['pixelsPerU'+'nit'](_0x3e0690){this['_setValue']('pixelsPerU'+'nit',_0x3e0690);}get['pixelsPerU'+'nit'](){return this['_image']?this['_image']['pixelsPerU'+'nit']:null;}set['opacity'](_0x518120){this['_setValue']('opacity',_0x518120);}get['opacity'](){return this['_text']?this['_text']['opacity']:this['_image']?this['_image']['opacity']:null;}set['rect'](_0x4aea4b){this['_setValue']('rect',_0x4aea4b);}get['rect'](){return this['_image']?this['_image']['rect']:null;}set['mask'](_0x29c4e3){this['_setValue']('mask',_0x29c4e3);}get['mask'](){return this['_image']?this['_image']['mask']:null;}set['outlineCol'+'or'](_0x3663d0){this['_setValue']('outlineCol'+'or',_0x3663d0);}get['outlineCol'+'or'](){return this['_text']?this['_text']['outlineCol'+'or']:null;}set['outlineThi'+'ckness'](_0x42ebc7){this['_setValue']('outlineThi'+'ckness',_0x42ebc7);}get['outlineThi'+'ckness'](){return this['_text']?this['_text']['outlineThi'+'ckness']:null;}set['shadowColo'+'r'](_0x3754c1){this['_setValue']('shadowColo'+'r',_0x3754c1);}get['shadowColo'+'r'](){return this['_text']?this['_text']['shadowColo'+'r']:null;}set['shadowOffs'+'et'](_0x199a23){this['_setValue']('shadowOffs'+'et',_0x199a23);}get['shadowOffs'+'et'](){return this['_text']?this['_text']['shadowOffs'+'et']:null;}set['enableMark'+'up'](_0x5e843a){this['_setValue']('enableMark'+'up',_0x5e843a);}get['enableMark'+'up'](){return this['_text']?this['_text']['enableMark'+'up']:null;}set['rangeStart'](_0x48f148){this['_setValue']('rangeStart',_0x48f148);}get['rangeStart'](){return this['_text']?this['_text']['rangeStart']:null;}set['rangeEnd'](_0x22af6c){this['_setValue']('rangeEnd',_0x22af6c);}get['rangeEnd'](){return this['_text']?this['_text']['rangeEnd']:null;}['_setValue'](_0x48bc30,_0x3f172a){this['_text']?(this['_text'][_0x48bc30]!==_0x3f172a&&this['_dirtyBatc'+'h'](),this['_text'][_0x48bc30]=_0x3f172a):this['_image']&&(this['_image'][_0x48bc30]!==_0x3f172a&&this['_dirtyBatc'+'h'](),this['_image'][_0x48bc30]=_0x3f172a);}['_patch'](){this['entity']['_sync']=this['_sync'],this['entity']['setPositio'+'n']=this['_setPositi'+'on'],this['entity']['setLocalPo'+'sition']=this['_setLocalP'+'osition'];}['_unpatch'](){this['entity']['_sync']=lt['prototype']['_sync'],this['entity']['setPositio'+'n']=lt['prototype']['setPositio'+'n'],this['entity']['setLocalPo'+'sition']=lt['prototype']['setLocalPo'+'sition'];}['_setPositi'+'on'](_0xab7841,_0x156988,_0x5c21b1){if(!this['element']['screen']){lt['prototype']['setPositio'+'n']['call'](this,_0xab7841,_0x156988,_0x5c21b1);return;}_0xab7841 instanceof D?Ef['copy'](_0xab7841):Ef['set'](_0xab7841,_0x156988,_0x5c21b1),this['getWorldTr'+'ansform'](),Zg['copy'](this['element']['_screenToW'+'orld'])['invert'](),Zg['transformP'+'oint'](Ef,this['localPosit'+'ion']),this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['_setLocalP'+'osition'](_0x3dc51b,_0x12bae0,_0x3e374d){_0x3dc51b instanceof D?this['localPosit'+'ion']['copy'](_0x3dc51b):this['localPosit'+'ion']['set'](_0x3dc51b,_0x12bae0,_0x3e374d);const _0x2ad0a5=this['element'],_0xa11d3f=this['localPosit'+'ion'],_0x265351=_0x2ad0a5['_pivot'];_0x2ad0a5['_margin']['x']=_0xa11d3f['x']-_0x2ad0a5['_calculate'+'dWidth']*_0x265351['x'],_0x2ad0a5['_margin']['z']=_0x2ad0a5['_localAnch'+'or']['z']-_0x2ad0a5['_localAnch'+'or']['x']-_0x2ad0a5['_calculate'+'dWidth']-_0x2ad0a5['_margin']['x'],_0x2ad0a5['_margin']['y']=_0xa11d3f['y']-_0x2ad0a5['_calculate'+'dHeight']*_0x265351['y'],_0x2ad0a5['_margin']['w']=_0x2ad0a5['_localAnch'+'or']['w']-_0x2ad0a5['_localAnch'+'or']['y']-_0x2ad0a5['_calculate'+'dHeight']-_0x2ad0a5['_margin']['y'],this['_dirtyLoca'+'l']||this['_dirtifyLo'+'cal']();}['_sync'](){const _0x4d79e7=this['element'],_0x2765a8=_0x4d79e7['screen'];if(_0x2765a8){if(_0x4d79e7['_anchorDir'+'ty']){let _0x57e593=-0x17c4+-0x505+0x1cc9*0x1,_0x22344d=0xa05+0x198f+-0x2394,_0x5b53c5=-0x15b9+0x1*0x1549+-0x7*-0x10,_0x4017ca=-0x792*-0x1+-0x13*-0x59+-0x1*0xe2c;if(this['_parent']&&this['_parent']['element'])_0x57e593=this['_parent']['element']['calculated'+'Width'],_0x22344d=this['_parent']['element']['calculated'+'Height'],_0x5b53c5=this['_parent']['element']['pivot']['x'],_0x4017ca=this['_parent']['element']['pivot']['y'];else{const _0x408de3=_0x2765a8['screen']['resolution'];_0x57e593=_0x408de3['x']/_0x2765a8['screen']['scale'],_0x22344d=_0x408de3['y']/_0x2765a8['screen']['scale'];}_0x4d79e7['_anchorTra'+'nsform']['setTransla'+'te'](_0x57e593*(_0x4d79e7['anchor']['x']-_0x5b53c5),-(_0x22344d*(_0x4017ca-_0x4d79e7['anchor']['y'])),0xeb2+0x406+-0x12b8),_0x4d79e7['_anchorDir'+'ty']=!(0x1112+-0x40d+-0xd04),_0x4d79e7['_calculate'+'LocalAncho'+'rs']();}_0x4d79e7['_sizeDirty']&&_0x4d79e7['_calculate'+'Size'](!(-0x4*0x41b+-0xd11+0x1d7e),!(0x14b3+0x25db*-0x1+-0x1129*-0x1));}if(this['_dirtyLoca'+'l']){this['localTrans'+'form']['setTRS'](this['localPosit'+'ion'],this['localRotat'+'ion'],this['localScale']);const _0x289543=this['localPosit'+'ion'],_0x2e3817=_0x4d79e7['_pivot'];_0x4d79e7['_margin']['x']=_0x289543['x']-_0x4d79e7['_calculate'+'dWidth']*_0x2e3817['x'],_0x4d79e7['_margin']['z']=_0x4d79e7['_localAnch'+'or']['z']-_0x4d79e7['_localAnch'+'or']['x']-_0x4d79e7['_calculate'+'dWidth']-_0x4d79e7['_margin']['x'],_0x4d79e7['_margin']['y']=_0x289543['y']-_0x4d79e7['_calculate'+'dHeight']*_0x2e3817['y'],_0x4d79e7['_margin']['w']=_0x4d79e7['_localAnch'+'or']['w']-_0x4d79e7['_localAnch'+'or']['y']-_0x4d79e7['_calculate'+'dHeight']-_0x4d79e7['_margin']['y'],this['_dirtyLoca'+'l']=!(-0x171*-0xd+-0x5*-0x35b+-0x2383);}if(!_0x2765a8){this['_dirtyWorl'+'d']&&(_0x4d79e7['_cornersDi'+'rty']=!(-0x1b03+-0x1d62*0x1+0x3865),_0x4d79e7['_canvasCor'+'nersDirty']=!(-0x2c*0x75+0x1704+-0x3*0xf8),_0x4d79e7['_worldCorn'+'ersDirty']=!(-0x1fb4+0x1274*0x1+0x10*0xd4)),lt['prototype']['_sync']['call'](this);return;}if(this['_dirtyWorl'+'d']){if(this['_parent']===null)this['worldTrans'+'form']['copy'](this['localTrans'+'form']);else{if(this['_parent']['element']?_0x4d79e7['_screenToW'+'orld']['mul2'](this['_parent']['element']['_modelTran'+'sform'],_0x4d79e7['_anchorTra'+'nsform']):_0x4d79e7['_screenToW'+'orld']['copy'](_0x4d79e7['_anchorTra'+'nsform']),_0x4d79e7['_modelTran'+'sform']['mul2'](_0x4d79e7['_screenToW'+'orld'],this['localTrans'+'form']),_0x2765a8){_0x4d79e7['_screenToW'+'orld']['mul2'](_0x2765a8['screen']['_screenMat'+'rix'],_0x4d79e7['_screenToW'+'orld']),_0x2765a8['screen']['screenSpac'+'e']||_0x4d79e7['_screenToW'+'orld']['mul2'](_0x2765a8['worldTrans'+'form'],_0x4d79e7['_screenToW'+'orld']),this['worldTrans'+'form']['mul2'](_0x4d79e7['_screenToW'+'orld'],this['localTrans'+'form']);const _0x1a1300=_0x4d79e7['_parentWor'+'ldTransfor'+'m'];_0x1a1300['setIdentit'+'y']();const _0xd15119=this['_parent'];_0xd15119&&_0xd15119['element']&&_0xd15119!==_0x2765a8&&(ws['setTRS'](D['ZERO'],_0xd15119['getLocalRo'+'tation'](),_0xd15119['getLocalSc'+'ale']()),_0x1a1300['mul2'](_0xd15119['element']['_parentWor'+'ldTransfor'+'m'],ws));const _0x1b9245=Pi;_0x1b9245['set'](0x9f7*0x1+0x79*-0x31+-0x233*-0x6,-0x6*0x5+0x137+-0x119,this['localPosit'+'ion']['z']);const _0x22ed22=MR;_0x22ed22['set'](_0x4d79e7['_absLeft']+_0x4d79e7['_pivot']['x']*_0x4d79e7['calculated'+'Width'],_0x4d79e7['_absBottom']+_0x4d79e7['_pivot']['y']*_0x4d79e7['calculated'+'Height'],0xd6+-0x53*0x23+0xa83),ws['setTransla'+'te'](-_0x22ed22['x'],-_0x22ed22['y'],-_0x22ed22['z']),bc['setTRS'](_0x1b9245,this['getLocalRo'+'tation'](),this['getLocalSc'+'ale']()),Ac['setTransla'+'te'](_0x22ed22['x'],_0x22ed22['y'],_0x22ed22['z']),_0x4d79e7['_screenTra'+'nsform']['mul2'](_0x4d79e7['_parentWor'+'ldTransfor'+'m'],Ac)['mul'](bc)['mul'](ws),_0x4d79e7['_cornersDi'+'rty']=!(-0x2f*0x59+-0xe51+0x1ea8),_0x4d79e7['_canvasCor'+'nersDirty']=!(-0x14bf*0x1+-0x2347+0x8e*0x65),_0x4d79e7['_worldCorn'+'ersDirty']=!(0x233*0x11+-0x1d49+0x11*-0x7a);}else this['worldTrans'+'form']['copy'](_0x4d79e7['_modelTran'+'sform']);}this['_dirtyWorl'+'d']=!(0x89*-0x47+-0x4*-0x3e+-0x316*-0xc);}}['_onInsert'](_0x501a29){const _0xd513cb=this['_parseUpTo'+'Screen']();this['entity']['_dirtifyWo'+'rld'](),this['_updateScr'+'een'](_0xd513cb['screen']),this['_dirtifyMa'+'sk']();}['_dirtifyMa'+'sk'](){let _0x4178c2=this['entity'];for(;_0x4178c2;){const _0xe97d41=_0x4178c2['parent'];if((_0xe97d41===null||_0xe97d41['screen'])&&_0x4178c2['element']){(!this['system']['_prerender']||!this['system']['_prerender']['length'])&&(this['system']['_prerender']=[],this['system']['app']['once']('prerender',this['_onPrerend'+'er'],this),w['trace'](Vs,'register\x20p'+'rerender'));const _0x2fc214=this['system']['_prerender']['indexOf'](this['entity']);_0x2fc214>=-0x1bd0+0x23b*-0xb+0x3459*0x1&&this['system']['_prerender']['splice'](_0x2fc214,-0x43*-0x14+0x28f*0x5+-0x1206),this['system']['_prerender']['indexOf'](_0x4178c2)<0x13*0x1b1+-0x26c4+-0x6a1*-0x1&&this['system']['_prerender']['push'](_0x4178c2),w['trace'](Vs,'set\x20preren'+'der\x20root\x20t'+'o:\x20'+_0x4178c2['name']);}_0x4178c2=_0xe97d41;}}['_onPrerend'+'er'](){for(let _0x21d48d=0x213e+-0x897+0x1*-0x18a7;_0x21d48d<this['system']['_prerender']['length'];_0x21d48d++){const _0x5d8e02=this['system']['_prerender'][_0x21d48d];w['trace'](Vs,'prerender\x20'+'from:\x20'+_0x5d8e02['name']),_0x5d8e02['element']&&_0x5d8e02['element']['syncMask'](0x9f+0x85d*0x3+-0x1*0x19b5);}this['system']['_prerender']['length']=-0x804+0x10b*0xd+-0x2b*0x21;}['_bindScree'+'n'](_0x1a92db){_0x1a92db['_bindEleme'+'nt'](this);}['_unbindScr'+'een'](_0x498ed8){_0x498ed8['_unbindEle'+'ment'](this);}['_updateScr'+'een'](_0x12b3ae){this['screen']&&this['screen']!==_0x12b3ae&&this['_unbindScr'+'een'](this['screen']['screen']);const _0x1da021=this['screen'];this['screen']=_0x12b3ae,this['screen']&&this['_bindScree'+'n'](this['screen']['screen']),this['_calculate'+'Size'](this['_hasSplitA'+'nchorsX'],this['_hasSplitA'+'nchorsY']),this['fire']('set:screen',this['screen'],_0x1da021),this['_anchorDir'+'ty']=!(0x1*-0x24f7+-0x31d*0x8+0x3ddf);const _0x8c9488=this['entity']['children'];for(let _0x4f634b=-0x2179+-0x1bed*0x1+-0x1d*-0x21e,_0x2dd0a9=_0x8c9488['length'];_0x4f634b<_0x2dd0a9;_0x4f634b++)_0x8c9488[_0x4f634b]['element']&&_0x8c9488[_0x4f634b]['element']['_updateScr'+'een'](_0x12b3ae);this['screen']&&this['screen']['screen']['syncDrawOr'+'der']();}['syncMask'](_0x24e083){const _0x4577c2=this['_parseUpTo'+'Screen']();this['_updateMas'+'k'](_0x4577c2['mask'],_0x24e083);}['_setMasked'+'By'](_0x13f059){const _0x5075b6=this['_image']||this['_text'];if(_0x13f059){const _0x29edfd=_0x13f059['element']['_image']['_maskRef'];w['trace'](Vs,'masking:\x20'+this['entity']['name']+'\x20with\x20'+_0x29edfd),_0x5075b6==null||_0x5075b6['_setStenci'+'l'](new pi({'ref':_0x29edfd,'func':dh})),this['_maskedBy']=_0x13f059;}else w['trace'](Vs,'no\x20masking'+'\x20on:\x20'+this['entity']['name']),_0x5075b6==null||_0x5075b6['_setStenci'+'l'](null),this['_maskedBy']=null;}['_updateMas'+'k'](_0x4c7406,_0x49de5d){var _0x2c8278,_0x553c75;if(_0x4c7406){if(this['_setMasked'+'By'](_0x4c7406),this['mask']){const _0x58459a=_0x4c7406['element']['_image']['_maskRef'],_0x4e48af=new pi({'ref':_0x58459a,'func':dh,'zpass':Ux});this['_image']['_setStenci'+'l'](_0x4e48af),this['_image']['_maskRef']=_0x49de5d,_0x49de5d++,w['trace'](Vs,'masking\x20fr'+'om:\x20'+this['entity']['name']+'\x20with\x20'+(_0x4e48af['ref']+(-0xaab*-0x1+-0x13d7+0x92d))),w['trace'](Vs,'depth++\x20to'+':\x20',_0x49de5d),_0x4c7406=this['entity'];}const _0xddb7fc=this['entity']['children'];for(let _0x289a93=-0x21a+0x105a+-0xe40,_0x2f0cea=_0xddb7fc['length'];_0x289a93<_0x2f0cea;_0x289a93++)(_0x2c8278=_0xddb7fc[_0x289a93]['element'])==null||_0x2c8278['_updateMas'+'k'](_0x4c7406,_0x49de5d);this['mask']&&_0x49de5d--;}else{if(this['_setMasked'+'By'](null),this['mask']){const _0x322363=new pi({'ref':_0x49de5d,'func':Wi,'zpass':kx});this['_image']['_setStenci'+'l'](_0x322363),this['_image']['_maskRef']=_0x49de5d,_0x49de5d++,w['trace'](Vs,'masking\x20fr'+'om:\x20'+this['entity']['name']+'\x20with\x20'+_0x322363['ref']),w['trace'](Vs,'depth++\x20to'+':\x20',_0x49de5d),_0x4c7406=this['entity'];}const _0x2f64e5=this['entity']['children'];for(let _0x27a680=-0x2*-0xe51+0x6f9+0x71f*-0x5,_0x51e62e=_0x2f64e5['length'];_0x27a680<_0x51e62e;_0x27a680++)(_0x553c75=_0x2f64e5[_0x27a680]['element'])==null||_0x553c75['_updateMas'+'k'](_0x4c7406,_0x49de5d);this['mask']&&_0x49de5d--;}}['_parseUpTo'+'Screen'](){const _0x277d85={'screen':null,'mask':null};let _0x16c314=this['entity']['_parent'];for(;_0x16c314&&!_0x16c314['screen'];)_0x16c314['element']&&_0x16c314['element']['mask']&&(_0x277d85['mask']||(_0x277d85['mask']=_0x16c314)),_0x16c314=_0x16c314['parent'];return _0x16c314&&_0x16c314['screen']&&(_0x277d85['screen']=_0x16c314),_0x277d85;}['_onScreenR'+'esize'](_0x4b4952){this['_anchorDir'+'ty']=!(-0xdcb+0x1a*-0x19+0x1*0x1055),this['_cornersDi'+'rty']=!(-0x78b*0x1+-0x2*0x11b4+0x897*0x5),this['_worldCorn'+'ersDirty']=!(0x1c6c+0x745*-0x1+-0xf*0x169),this['_calculate'+'Size'](this['_hasSplitA'+'nchorsX'],this['_hasSplitA'+'nchorsY']),this['fire']('screen:set'+':resolutio'+'n',_0x4b4952);}['_onScreenS'+'paceChange'](){this['fire']('screen:set'+':screenspa'+'ce',this['screen']['screen']['screenSpac'+'e']);}['_onScreenR'+'emove'](){this['screen']&&(this['screen']['_destroyin'+'g']?this['screen']=null:this['_updateScr'+'een'](null));}['_calculate'+'LocalAncho'+'rs'](){let _0x6a7469=0x25f4+-0x54b+0x1b1*-0x11,_0x470648=0x112+-0x544+0x81a;const _0x2bc37f=this['entity']['_parent'];if(_0x2bc37f&&_0x2bc37f['element'])_0x6a7469=_0x2bc37f['element']['calculated'+'Width'],_0x470648=_0x2bc37f['element']['calculated'+'Height'];else{if(this['screen']){const _0xff3605=this['screen']['screen']['resolution'],_0x369ee0=this['screen']['screen']['scale'];_0x6a7469=_0xff3605['x']/_0x369ee0,_0x470648=_0xff3605['y']/_0x369ee0;}}this['_localAnch'+'or']['set'](this['_anchor']['x']*_0x6a7469,this['_anchor']['y']*_0x470648,this['_anchor']['z']*_0x6a7469,this['_anchor']['w']*_0x470648);}['getOffsetP'+'osition'](_0x1e967f,_0x18a625){const _0x1228d2=this['entity']['getLocalPo'+'sition']()['clone']();return _0x1228d2['x']+=_0x1e967f,_0x1228d2['y']+=_0x18a625,this['_screenToW'+'orld']['transformP'+'oint'](_0x1228d2,_0x1228d2),_0x1228d2;}['onLayersCh'+'anged'](_0x1c264e,_0x13748a){this['addModelTo'+'Layers'](this['_image']?this['_image']['_renderabl'+'e']['model']:this['_text']['_model']),_0x1c264e['off']('add',this['onLayerAdd'+'ed'],this),_0x1c264e['off']('remove',this['onLayerRem'+'oved'],this),_0x13748a['on']('add',this['onLayerAdd'+'ed'],this),_0x13748a['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0xbc247f){this['layers']['indexOf'](_0xbc247f['id'])<0x246*0x7+-0x193c+0x952*0x1||(this['_image']?_0xbc247f['addMeshIns'+'tances'](this['_image']['_renderabl'+'e']['model']['meshInstan'+'ces']):this['_text']&&_0xbc247f['addMeshIns'+'tances'](this['_text']['_model']['meshInstan'+'ces']));}['onLayerRem'+'oved'](_0x11113d){this['layers']['indexOf'](_0x11113d['id'])<-0x3ad+-0x1*-0x14e+-0x25f*-0x1||(this['_image']?_0x11113d['removeMesh'+'Instances'](this['_image']['_renderabl'+'e']['model']['meshInstan'+'ces']):this['_text']&&_0x11113d['removeMesh'+'Instances'](this['_text']['_model']['meshInstan'+'ces']));}['onEnable'](){var _0x4709e9;const _0x49f230=this['system']['app']['scene'],_0x507467=_0x49f230['layers'];this['_image']&&this['_image']['onEnable'](),this['_text']&&this['_text']['onEnable'](),this['_group']&&this['_group']['onEnable'](),this['useInput']&&this['system']['app']['elementInp'+'ut']&&this['system']['app']['elementInp'+'ut']['addElement'](this),this['_evtLayers'+'Changed']=_0x49f230['on']('set:layers',this['onLayersCh'+'anged'],this),_0x507467&&(this['_evtLayerA'+'dded']=_0x507467['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x507467['on']('remove',this['onLayerRem'+'oved'],this)),this['_batchGrou'+'pId']>=0x1350+-0xcd1+-0x1*0x67f&&((_0x4709e9=this['system']['app']['batcher'])==null||_0x4709e9['insert'](St['ELEMENT'],this['batchGroup'+'Id'],this['entity'])),this['fire']('enableelem'+'ent');}['onDisable'](){var _0x21c303,_0x248f1a,_0x31c325,_0x20438a;const _0x3e0035=this['system']['app']['scene']['layers'];(_0x21c303=this['_evtLayers'+'Changed'])==null||_0x21c303['off'](),this['_evtLayers'+'Changed']=null,_0x3e0035&&((_0x248f1a=this['_evtLayerA'+'dded'])==null||_0x248f1a['off'](),this['_evtLayerA'+'dded']=null,(_0x31c325=this['_evtLayerR'+'emoved'])==null||_0x31c325['off'](),this['_evtLayerR'+'emoved']=null),this['_image']&&this['_image']['onDisable'](),this['_text']&&this['_text']['onDisable'](),this['_group']&&this['_group']['onDisable'](),this['system']['app']['elementInp'+'ut']&&this['useInput']&&this['system']['app']['elementInp'+'ut']['removeElem'+'ent'](this),this['_batchGrou'+'pId']>=0x3*0x911+0x236f+-0x3ea2*0x1&&((_0x20438a=this['system']['app']['batcher'])==null||_0x20438a['remove'](St['ELEMENT'],this['batchGroup'+'Id'],this['entity'])),this['fire']('disableele'+'ment');}['onRemove'](){this['entity']['off']('insert',this['_onInsert'],this),this['_unpatch'](),this['_image']&&this['_image']['destroy'](),this['_text']&&this['_text']['destroy'](),this['system']['app']['elementInp'+'ut']&&this['useInput']&&this['system']['app']['elementInp'+'ut']['removeElem'+'ent'](this),this['screen']&&this['screen']['screen']&&(this['_unbindScr'+'een'](this['screen']['screen']),this['screen']['screen']['syncDrawOr'+'der']()),this['off']();}['_calculate'+'Size'](_0x374305,_0x5313ab){if(!this['entity']['_parent']&&!this['screen'])return;this['_calculate'+'LocalAncho'+'rs']();const _0x5a3846=this['_absRight']-this['_absLeft'],_0x4be2cb=this['_absTop']-this['_absBottom'];_0x374305?this['_setWidth'](_0x5a3846):this['_setCalcul'+'atedWidth'](_0x5a3846,!(0x1*-0xdb+-0x1*0x1d31+-0x1*-0x1e0d)),_0x5313ab?this['_setHeight'](_0x4be2cb):this['_setCalcul'+'atedHeight'](_0x4be2cb,!(-0xa5e+-0x432*-0x2+0x1fb));const _0x5d802c=this['entity']['getLocalPo'+'sition']();_0x5d802c['x']=this['_margin']['x']+this['_calculate'+'dWidth']*this['_pivot']['x'],_0x5d802c['y']=this['_margin']['y']+this['_calculate'+'dHeight']*this['_pivot']['y'],this['entity']['setLocalPo'+'sition'](_0x5d802c),this['_sizeDirty']=!(-0x75b+0x25ce+-0x3*0xa26);}['_setWidth'](_0x478968){this['_width']=_0x478968,this['_setCalcul'+'atedWidth'](_0x478968,!(-0x15fb+0x2da+0x1322)),this['fire']('set:width',this['_width']);}['_setHeight'](_0xc42570){this['_height']=_0xc42570,this['_setCalcul'+'atedHeight'](_0xc42570,!(0x1d4f+-0x1*0xca6+-0xd*0x148)),this['fire']('set:height',this['_height']);}['_setCalcul'+'atedWidth'](_0xe64201,_0x1b26ab){if(!(Math['abs'](_0xe64201-this['_calculate'+'dWidth'])<=0x1*0x245+0x60a+0x1*-0x84f+0.0001)){if(this['_calculate'+'dWidth']=_0xe64201,this['entity']['_dirtifyLo'+'cal'](),_0x1b26ab){const _0x1ba506=this['entity']['getLocalPo'+'sition'](),_0x31e7ac=this['_pivot'];this['_margin']['x']=_0x1ba506['x']-this['_calculate'+'dWidth']*_0x31e7ac['x'],this['_margin']['z']=this['_localAnch'+'or']['z']-this['_localAnch'+'or']['x']-this['_calculate'+'dWidth']-this['_margin']['x'];}this['_flagChild'+'renAsDirty'](),this['fire']('set:calcul'+'atedWidth',this['_calculate'+'dWidth']),this['fire']('resize',this['_calculate'+'dWidth'],this['_calculate'+'dHeight']);}}['_setCalcul'+'atedHeight'](_0x204bf6,_0x18a8d3){if(!(Math['abs'](_0x204bf6-this['_calculate'+'dHeight'])<=-0xe0e*0x2+-0x19*0xb5+0x2dc9+0.0001)){if(this['_calculate'+'dHeight']=_0x204bf6,this['entity']['_dirtifyLo'+'cal'](),_0x18a8d3){const _0x316bf0=this['entity']['getLocalPo'+'sition'](),_0xbc9e76=this['_pivot'];this['_margin']['y']=_0x316bf0['y']-this['_calculate'+'dHeight']*_0xbc9e76['y'],this['_margin']['w']=this['_localAnch'+'or']['w']-this['_localAnch'+'or']['y']-this['_calculate'+'dHeight']-this['_margin']['y'];}this['_flagChild'+'renAsDirty'](),this['fire']('set:calcul'+'atedHeight',this['_calculate'+'dHeight']),this['fire']('resize',this['_calculate'+'dWidth'],this['_calculate'+'dHeight']);}}['_flagChild'+'renAsDirty'](){const _0x312fa9=this['entity']['_children'];for(let _0x164f2b=0x2*-0x13+0x432*-0x1+-0x2*-0x22c,_0x167253=_0x312fa9['length'];_0x164f2b<_0x167253;_0x164f2b++)_0x312fa9[_0x164f2b]['element']&&(_0x312fa9[_0x164f2b]['element']['_anchorDir'+'ty']=!(0x625+-0x11e7+0x1*0xbc2),_0x312fa9[_0x164f2b]['element']['_sizeDirty']=!(-0x160*0x16+0x1d18+0x128));}['addModelTo'+'Layers'](_0x35493e){this['_addedMode'+'ls']['push'](_0x35493e);for(let _0x11f666=-0x3b*0x11+-0x86a+0xc55;_0x11f666<this['layers']['length'];_0x11f666++){const _0x2019eb=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x11f666]);_0x2019eb&&_0x2019eb['addMeshIns'+'tances'](_0x35493e['meshInstan'+'ces']);}}['removeMode'+'lFromLayer'+'s'](_0x49f9de){const _0x2686bd=this['_addedMode'+'ls']['indexOf'](_0x49f9de);_0x2686bd>=0x74*-0x48+0x16*-0x56+-0x4*-0xa01&&this['_addedMode'+'ls']['splice'](_0x2686bd,0x16b6+-0x14bb+-0x1fa);for(let _0x416327=0x980+-0x537*0x6+0x15ca;_0x416327<this['layers']['length'];_0x416327++){const _0x3162fd=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x416327]);_0x3162fd&&_0x3162fd['removeMesh'+'Instances'](_0x49f9de['meshInstan'+'ces']);}}['getMaskOff'+'set'](){const _0x5ce198=this['system']['app']['frame'];this['_offsetRea'+'dAt']!==_0x5ce198&&(this['_maskOffse'+'t']=-0x702+0x101*0xa+-0x308+0.5,this['_offsetRea'+'dAt']=_0x5ce198);const _0x4536ee=this['_maskOffse'+'t'];return this['_maskOffse'+'t']-=-0xc6a+0x434+0x836+0.001,_0x4536ee;}['isVisibleF'+'orCamera'](_0x490460){let _0x39782d,_0x451ab5,_0x42ac3a,_0x3b3404;if(this['maskedBy']){const _0x4e2912=this['maskedBy']['element']['screenCorn'+'ers'];_0x39782d=Math['min'](Math['min'](_0x4e2912[-0x93e+0x1*0x1e6+-0x3ac*-0x2]['x'],_0x4e2912[-0x19c*0x4+-0x1*-0x214a+-0xed*0x1d]['x']),Math['min'](_0x4e2912[0x162b+0x6b2*-0x2+-0x8c5]['x'],_0x4e2912[0x159b*0x1+-0xc*-0x314+0x2*-0x1d44]['x'])),_0x451ab5=Math['max'](Math['max'](_0x4e2912[-0x1*0x1cb3+-0x67*0x3d+0x1d*0x1d6]['x'],_0x4e2912[0xa*0x3a4+-0x2181+-0x2e6*0x1]['x']),Math['max'](_0x4e2912[-0x50a*0x2+-0x803+0x1219]['x'],_0x4e2912[-0x7*-0x346+0xe20+-0x2507]['x'])),_0x3b3404=Math['min'](Math['min'](_0x4e2912[-0x171f*0x1+-0x5da+0x1cf9]['y'],_0x4e2912[0x1d88+0x3b6+-0x213d]['y']),Math['min'](_0x4e2912[0x3*-0x632+-0x1*0x1bad+0x2e45]['y'],_0x4e2912[-0x234+-0x3*0x1c9+0x792]['y'])),_0x42ac3a=Math['max'](Math['max'](_0x4e2912[0x43*0x7+-0x7*0x52e+0x226d]['y'],_0x4e2912[0x10d*-0x1+0x1b86+0x268*-0xb]['y']),Math['max'](_0x4e2912[-0x174d+-0x2079*-0x1+0x17*-0x66]['y'],_0x4e2912[0x795*0x2+-0x23d6+0x14af]['y']));}else{const _0x1acafa=this['system']['app']['graphicsDe'+'vice']['width'],_0x543ed9=this['system']['app']['graphicsDe'+'vice']['height'],_0x1034fa=_0x490460['_rect']['z']*_0x1acafa,_0x4e3e32=_0x490460['_rect']['w']*_0x543ed9;_0x39782d=_0x490460['_rect']['x']*_0x1acafa,_0x451ab5=_0x39782d+_0x1034fa,_0x42ac3a=(0x102b+-0x1*-0x8bb+-0x18e5-_0x490460['_rect']['y'])*_0x543ed9,_0x3b3404=_0x42ac3a-_0x4e3e32;}const _0x56d4a7=this['screenCorn'+'ers'],_0x18629c=Math['min'](Math['min'](_0x56d4a7[0xb*-0x224+-0x2702*-0x1+-0x7bb*0x2]['x'],_0x56d4a7[-0x16d*-0x13+-0x1*-0x667+0x1*-0x217d]['x']),Math['min'](_0x56d4a7[0x325+0x1164+-0x1487]['x'],_0x56d4a7[0x1496+0x1e62+-0xa31*0x5]['x'])),_0x477807=Math['max'](Math['max'](_0x56d4a7[0x1f69+-0x269c+0x733]['x'],_0x56d4a7[-0x1917+-0x7*0xad+-0x1fd*-0xf]['x']),Math['max'](_0x56d4a7[0x3*0x2b+-0x9e5+-0x2*-0x4b3]['x'],_0x56d4a7[-0x304*-0x5+0x1388+0x2299*-0x1]['x'])),_0x4004b2=Math['min'](Math['min'](_0x56d4a7[0x1*0x1c27+-0x1c77+0x50]['y'],_0x56d4a7[0x329*-0x1+-0x1c81+0x1*0x1fab]['y']),Math['min'](_0x56d4a7[0x5d*-0x2a+0xa*0x35b+-0x124a]['y'],_0x56d4a7[0x2562+0x99a+-0x2ef9]['y'])),_0x21cc1f=Math['max'](Math['max'](_0x56d4a7[0x46+0x12aa+-0x12f0]['y'],_0x56d4a7[0xd9*0x18+-0x1bc7+0x770]['y']),Math['max'](_0x56d4a7[0x8a9*-0x4+0x5*-0x4b5+0x3a2f]['y'],_0x56d4a7[-0x189f+-0x179d+0x303f]['y']));return!(_0x477807<_0x39782d||_0x18629c>_0x451ab5||_0x4004b2>_0x42ac3a||_0x21cc1f<_0x3b3404);}['_isScreenS'+'pace'](){return this['screen']&&this['screen']['screen']?this['screen']['screen']['screenSpac'+'e']:!(0x1ae+0x8*-0x3d7+0x1d0b);}['_isScreenC'+'ulled'](){return this['screen']&&this['screen']['screen']?this['screen']['screen']['cull']:!(-0x2a5*0x7+0xc59+0x62b);}['_dirtyBatc'+'h'](){var _0x27e045;this['batchGroup'+'Id']!==-(0x1b61*-0x1+0x20dd+-0x57b*0x1)&&((_0x27e045=this['system']['app']['batcher'])==null||_0x27e045['markGroupD'+'irty'](this['batchGroup'+'Id']));}}h(hs,'EVENT_MOUS'+'EDOWN','mousedown'),h(hs,'EVENT_MOUS'+'EUP','mouseup'),h(hs,'EVENT_MOUS'+'EENTER','mouseenter'),h(hs,'EVENT_MOUS'+'ELEAVE','mouseleave'),h(hs,'EVENT_MOUS'+'EMOVE','mousemove'),h(hs,'EVENT_MOUS'+'EWHEEL','mousewheel'),h(hs,'EVENT_CLIC'+'K','click'),h(hs,'EVENT_TOUC'+'HSTART','touchstart'),h(hs,'EVENT_TOUC'+'HEND','touchend'),h(hs,'EVENT_TOUC'+'HMOVE','touchmove'),h(hs,'EVENT_TOUC'+'HCANCEL','touchcance'+'l');class DR{constructor(){this['enabled']=!(-0x2245*0x1+0x8f8*-0x1+-0x1*-0x2b3d);}}const IR=['enabled'];class LR extends ct{constructor(_0x3e289a){super(_0x3e289a),this['id']='element',this['ComponentT'+'ype']=hs,this['DataType']=DR,this['schema']=IR,this['_unicodeCo'+'nverter']=null,this['_rtlReorde'+'r']=null,this['_defaultTe'+'xture']=new _e(_0x3e289a['graphicsDe'+'vice'],{'width':0x1,'height':0x1,'format':_s,'name':'element-sy'+'stem'});const _0x3a1ce3=this['_defaultTe'+'xture']['lock'](),_0x3bf8bd=new Uint8Array(0x1d*-0xcd+0x1709+-0x34*-0x1);_0x3bf8bd[-0x1*-0x1930+-0x8bb+-0xb*0x17f]=-0x2f*0x9f+0x87e+0x2*0xad9,_0x3bf8bd[0x25a3+0x62*-0x42+-0xc5e]=-0x2*-0x10d9+0x109b+-0x314e,_0x3bf8bd[0x351*-0x1+-0x851*0x2+0x13f5]=0x59+0x2*-0x1d3+0x44c,_0x3bf8bd[-0x35*-0x6a+0x17b2+-0x1*0x2da1]=-0x1ada+0x1f47+-0x36e,_0x3a1ce3['set'](_0x3bf8bd),this['_defaultTe'+'xture']['unlock'](),this['defaultIma'+'geMaterial']=null,this['defaultIma'+'ge9SlicedM'+'aterial']=null,this['defaultIma'+'ge9TiledMa'+'terial']=null,this['defaultIma'+'geMaskMate'+'rial']=null,this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']=null,this['defaultIma'+'ge9TiledMa'+'skMaterial']=null,this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']=null,this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']=null,this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']=null,this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']=null,this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']=null,this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']=null,this['_defaultTe'+'xtMaterial'+'s']={},this['defaultIma'+'geMaterial'+'s']=[],this['on']('add',this['onAddCompo'+'nent'],this),this['on']('beforeremo'+'ve',this['onRemoveCo'+'mponent'],this);}['destroy'](){super['destroy'](),this['_defaultTe'+'xture']['destroy']();}['initialize'+'ComponentD'+'ata'](_0x14e81d,_0x412b24,_0x225690){_0x14e81d['_beingInit'+'ialized']=!(-0x260*0xd+-0x2246+0x4126),_0x412b24['anchor']!==void(0x25fd*-0x1+0xd45+0x18b8)&&(_0x412b24['anchor']instanceof re?_0x14e81d['anchor']['copy'](_0x412b24['anchor']):_0x14e81d['anchor']['set'](_0x412b24['anchor'][-0x18e8+0x1*0x11cd+0x71b],_0x412b24['anchor'][-0x247*0x1+0xafe+0x5*-0x1be],_0x412b24['anchor'][0x2464+-0x903*0x3+-0x959],_0x412b24['anchor'][-0x2167+-0x1722+0x388c])),_0x412b24['pivot']!==void(-0x2494+0x3b*0x94+0x278)&&(_0x412b24['pivot']instanceof J?_0x14e81d['pivot']['copy'](_0x412b24['pivot']):_0x14e81d['pivot']['set'](_0x412b24['pivot'][0x11be+0xbf0+-0x1dae],_0x412b24['pivot'][0x24fa+-0x3*-0x251+0xafb*-0x4]));const _0x88545f=Math['abs'](_0x14e81d['anchor']['x']-_0x14e81d['anchor']['z'])>0x1c74+0x88+-0x1cfc+0.001,_0x90f3f=Math['abs'](_0x14e81d['anchor']['y']-_0x14e81d['anchor']['w'])>0x289+0x896+0x3*-0x3b5+0.001;let _0xc4ed08=!(0x63*0x21+-0x2f*0xb3+0x141b),_0x379b85;_0x412b24['margin']!==void(-0x1*0x65f+0x193a+-0x12db)&&(_0x412b24['margin']instanceof re?_0x14e81d['margin']['copy'](_0x412b24['margin']):_0x14e81d['_margin']['set'](_0x412b24['margin'][-0x9f3+-0x1a5e+0x2451],_0x412b24['margin'][0x1a71+-0x2001+0x591],_0x412b24['margin'][-0x8*-0x275+-0x2a*-0x87+0x32*-0xd6],_0x412b24['margin'][0x1047*0x1+0xd7f+0x191*-0x13]),_0xc4ed08=!(-0x7*0x53+-0x6bf*-0x3+-0x19*0xb8)),_0x412b24['left']!==void(0x110a+0x11b2+-0x12*0x1ee)&&(_0x14e81d['_margin']['x']=_0x412b24['left'],_0xc4ed08=!(0x1f97+0xfdf+0x546*-0x9)),_0x412b24['bottom']!==void(0x10ec+0x2406+0x5e2*-0x9)&&(_0x14e81d['_margin']['y']=_0x412b24['bottom'],_0xc4ed08=!(-0x6c+0x1*0x2561+-0x24f5)),_0x412b24['right']!==void(-0x2c*0x90+-0x18*0x8b+0x25c8)&&(_0x14e81d['_margin']['z']=_0x412b24['right'],_0xc4ed08=!(0x2509+0x2010*-0x1+0x1*-0x4f9)),_0x412b24['top']!==void(-0xee6+-0x4d4*0x5+-0x270a*-0x1)&&(_0x14e81d['_margin']['w']=_0x412b24['top'],_0xc4ed08=!(-0x21f0+-0x1f7*-0x5+0x181d)),_0xc4ed08&&(_0x14e81d['margin']=_0x14e81d['_margin']);let _0x4ada9a=!(-0x24cf+-0x2e1*0x7+0x12fd*0x3);_0x412b24['width']!==void(0x5*0x6cd+0x1575*0x1+-0x3776)&&!_0x88545f?_0x14e81d['width']=_0x412b24['width']:_0x88545f&&(_0x4ada9a=!(0x1ab3+0xc0d+0x26c*-0x10)),_0x412b24['height']!==void(-0x2*-0xb+0x64f+-0x665)&&!_0x90f3f?_0x14e81d['height']=_0x412b24['height']:_0x90f3f&&(_0x4ada9a=!(-0x322+0xf7b*-0x1+-0x3b9*-0x5)),_0x4ada9a&&(_0x14e81d['anchor']=_0x14e81d['anchor']),_0x412b24['enabled']!==void(0x6c+0x28*-0x4+-0x34*-0x1)&&(_0x14e81d['enabled']=_0x412b24['enabled']),_0x412b24['useInput']!==void(0x2384+0x60*-0x19+-0xd12*0x2)&&(_0x14e81d['useInput']=_0x412b24['useInput']),_0x412b24['fitMode']!==void(-0x202d*0x1+0x600+-0x1a2d*-0x1)&&(_0x14e81d['fitMode']=_0x412b24['fitMode']),_0x14e81d['batchGroup'+'Id']=_0x412b24['batchGroup'+'Id']===void(-0xc8f*0x1+0x9*0x40b+-0x17d4)||_0x412b24['batchGroup'+'Id']===null?-(0x1dfa+-0x1*0x477+-0x1982):_0x412b24['batchGroup'+'Id'],_0x412b24['layers']&&Array['isArray'](_0x412b24['layers'])&&(_0x14e81d['layers']=_0x412b24['layers']['slice'](-0x231d+-0x2*-0xad9+0xd6b*0x1)),_0x412b24['type']!==void(-0x9c5+0x2196+0x17d1*-0x1)&&(_0x14e81d['type']=_0x412b24['type']),_0x14e81d['type']===Cu?(_0x412b24['rect']!==void(-0x21b+-0x1*-0x395+-0xbd*0x2)&&(_0x14e81d['rect']=_0x412b24['rect']),_0x412b24['color']!==void(-0x19ee+0x17b9+-0x1*-0x235)&&(_0x379b85=_0x412b24['color'],_0x379b85 instanceof ie||(_0x379b85=new ie(_0x412b24['color'][-0x2*0x4d1+0x392*0x7+0x7ae*-0x2],_0x412b24['color'][0x3b*0xa1+0x367+0x2881*-0x1],_0x412b24['color'][0xe9a+-0x75b+-0x1*0x73d])),_0x14e81d['color']=_0x379b85),_0x412b24['opacity']!==void(-0x1368+-0x713+-0x1*-0x1a7b)&&(_0x14e81d['opacity']=_0x412b24['opacity']),_0x412b24['textureAss'+'et']!==void(-0x1*-0x69b+0x355*0x3+-0x109a)&&(_0x14e81d['textureAss'+'et']=_0x412b24['textureAss'+'et']),_0x412b24['texture']&&(_0x14e81d['texture']=_0x412b24['texture']),_0x412b24['spriteAsse'+'t']!==void(0xce7*0x2+-0x11*0x3d+-0x15c1*0x1)&&(_0x14e81d['spriteAsse'+'t']=_0x412b24['spriteAsse'+'t']),_0x412b24['sprite']&&(_0x14e81d['sprite']=_0x412b24['sprite']),_0x412b24['spriteFram'+'e']!==void(0x2562+-0xbff*-0x1+-0x3161*0x1)&&(_0x14e81d['spriteFram'+'e']=_0x412b24['spriteFram'+'e']),_0x412b24['pixelsPerU'+'nit']!==void(0x503+0x178f+-0x1c92)&&_0x412b24['pixelsPerU'+'nit']!==null&&(_0x14e81d['pixelsPerU'+'nit']=_0x412b24['pixelsPerU'+'nit']),_0x412b24['materialAs'+'set']!==void(0x47d*0x3+-0x2701+-0xcc5*-0x2)&&(_0x14e81d['materialAs'+'set']=_0x412b24['materialAs'+'set']),_0x412b24['material']&&(_0x14e81d['material']=_0x412b24['material']),_0x412b24['mask']!==void(0xe86+-0x1a83*-0x1+-0x2909)&&(_0x14e81d['mask']=_0x412b24['mask'])):_0x14e81d['type']===jv&&(_0x412b24['autoWidth']!==void(0x6*-0x1c0+-0xc53+-0x16d3*-0x1)&&(_0x14e81d['autoWidth']=_0x412b24['autoWidth']),_0x412b24['autoHeight']!==void(0xe0e+-0x11*0xca+0x52*-0x2)&&(_0x14e81d['autoHeight']=_0x412b24['autoHeight']),_0x412b24['rtlReorder']!==void(-0xca3+-0xbed*0x1+0x10*0x189)&&(_0x14e81d['rtlReorder']=_0x412b24['rtlReorder']),_0x412b24['unicodeCon'+'verter']!==void(-0x25*-0x97+-0x1*-0x2591+0x2*-0x1db2)&&(_0x14e81d['unicodeCon'+'verter']=_0x412b24['unicodeCon'+'verter']),_0x412b24['text']!==null&&_0x412b24['text']!==void(0x305*0x8+0x2559+-0x43*0xeb)?_0x14e81d['text']=_0x412b24['text']:_0x412b24['key']!==null&&_0x412b24['key']!==void(-0x1d34+0xec9+-0xe6b*-0x1)&&(_0x14e81d['key']=_0x412b24['key']),_0x412b24['color']!==void(-0x1c8*0x1+-0x1*-0x1715+0x29*-0x85)&&(_0x379b85=_0x412b24['color'],_0x379b85 instanceof ie||(_0x379b85=new ie(_0x379b85[-0x3*0x11+0x1*-0xddc+0x3d*0x3b],_0x379b85[0x16c*0x9+0x175*-0x6+-0x40d],_0x379b85[0x1*0x7cd+0xf5b+0x2*-0xb93])),_0x14e81d['color']=_0x379b85),_0x412b24['opacity']!==void(0x9*0x6b+0x2f0+-0x6b3)&&(_0x14e81d['opacity']=_0x412b24['opacity']),_0x412b24['spacing']!==void(-0x2*0xe2a+0x12fc+-0x2*-0x4ac)&&(_0x14e81d['spacing']=_0x412b24['spacing']),_0x412b24['fontSize']!==void(0x1*-0x13ec+0x1*-0x6d+0x1459)&&(_0x14e81d['fontSize']=_0x412b24['fontSize'],_0x412b24['lineHeight']||(_0x14e81d['lineHeight']=_0x412b24['fontSize'])),_0x412b24['lineHeight']!==void(0x6de*0x4+-0x43*0x6a+-0x7*-0xa)&&(_0x14e81d['lineHeight']=_0x412b24['lineHeight']),_0x412b24['maxLines']!==void(0xe93+0x21c8+0x1*-0x305b)&&(_0x14e81d['maxLines']=_0x412b24['maxLines']),_0x412b24['wrapLines']!==void(-0xd*-0x92+0xefe*-0x2+0x1692)&&(_0x14e81d['wrapLines']=_0x412b24['wrapLines']),_0x412b24['minFontSiz'+'e']!==void(-0xd*-0x21d+0x1e89+-0x3a02)&&(_0x14e81d['minFontSiz'+'e']=_0x412b24['minFontSiz'+'e']),_0x412b24['maxFontSiz'+'e']!==void(-0x1041+0x815*-0x1+0x1856)&&(_0x14e81d['maxFontSiz'+'e']=_0x412b24['maxFontSiz'+'e']),_0x412b24['autoFitWid'+'th']&&(_0x14e81d['autoFitWid'+'th']=_0x412b24['autoFitWid'+'th']),_0x412b24['autoFitHei'+'ght']&&(_0x14e81d['autoFitHei'+'ght']=_0x412b24['autoFitHei'+'ght']),_0x412b24['fontAsset']!==void(0x4*-0x4ca+0x248c+-0x1164)&&(_0x14e81d['fontAsset']=_0x412b24['fontAsset']),_0x412b24['font']!==void(-0x45e*0x5+-0x2492+0x59*0xa8)&&(_0x14e81d['font']=_0x412b24['font']),_0x412b24['alignment']!==void(0x1ac7*-0x1+-0x64d*-0x5+-0x4ba)&&(_0x14e81d['alignment']=_0x412b24['alignment']),_0x412b24['outlineCol'+'or']!==void(0x1f14+0x175c+-0x8*0x6ce)&&(_0x14e81d['outlineCol'+'or']=_0x412b24['outlineCol'+'or']),_0x412b24['outlineThi'+'ckness']!==void(-0x1*0x3f2+-0x249c+0x1*0x288e)&&(_0x14e81d['outlineThi'+'ckness']=_0x412b24['outlineThi'+'ckness']),_0x412b24['shadowColo'+'r']!==void(-0xbfa+0x263f+0x541*-0x5)&&(_0x14e81d['shadowColo'+'r']=_0x412b24['shadowColo'+'r']),_0x412b24['shadowOffs'+'et']!==void(0x13f*-0x17+0x26db+-0x12*0x91)&&(_0x14e81d['shadowOffs'+'et']=_0x412b24['shadowOffs'+'et']),_0x412b24['enableMark'+'up']!==void(-0x1549*0x1+0x197d+-0x434)&&(_0x14e81d['enableMark'+'up']=_0x412b24['enableMark'+'up']));const _0x1461d4=_0x14e81d['_parseUpTo'+'Screen']();_0x1461d4['screen']&&_0x14e81d['_updateScr'+'een'](_0x1461d4['screen']),super['initialize'+'ComponentD'+'ata'](_0x14e81d,_0x412b24,_0x225690),_0x14e81d['_beingInit'+'ialized']=!(-0x132b+0x160e+-0x2e2),_0x14e81d['type']===Cu&&_0x14e81d['_image']['_meshDirty']&&_0x14e81d['_image']['_updateMes'+'h'](_0x14e81d['_image']['mesh']);}['onAddCompo'+'nent'](_0x219900,_0x185e5e){_0x219900['fire']('element:ad'+'d');}['onRemoveCo'+'mponent'](_0x4a1d82,_0xbe11cd){_0xbe11cd['onRemove']();}['cloneCompo'+'nent'](_0x1d65b6,_0x43fcec){const _0x1ac74e=_0x1d65b6['element'],_0x3dffa7={'enabled':_0x1ac74e['enabled'],'width':_0x1ac74e['width'],'height':_0x1ac74e['height'],'anchor':_0x1ac74e['anchor']['clone'](),'pivot':_0x1ac74e['pivot']['clone'](),'margin':_0x1ac74e['margin']['clone'](),'alignment':_0x1ac74e['alignment']&&_0x1ac74e['alignment']['clone']()||_0x1ac74e['alignment'],'autoWidth':_0x1ac74e['autoWidth'],'autoHeight':_0x1ac74e['autoHeight'],'type':_0x1ac74e['type'],'rect':_0x1ac74e['rect']&&_0x1ac74e['rect']['clone']()||_0x1ac74e['rect'],'rtlReorder':_0x1ac74e['rtlReorder'],'unicodeConverter':_0x1ac74e['unicodeCon'+'verter'],'materialAsset':_0x1ac74e['materialAs'+'set'],'material':_0x1ac74e['material'],'color':_0x1ac74e['color']&&_0x1ac74e['color']['clone']()||_0x1ac74e['color'],'opacity':_0x1ac74e['opacity'],'textureAsset':_0x1ac74e['textureAss'+'et'],'texture':_0x1ac74e['texture'],'spriteAsset':_0x1ac74e['spriteAsse'+'t'],'sprite':_0x1ac74e['sprite'],'spriteFrame':_0x1ac74e['spriteFram'+'e'],'pixelsPerUnit':_0x1ac74e['pixelsPerU'+'nit'],'spacing':_0x1ac74e['spacing'],'lineHeight':_0x1ac74e['lineHeight'],'wrapLines':_0x1ac74e['wrapLines'],'layers':_0x1ac74e['layers'],'fontSize':_0x1ac74e['fontSize'],'minFontSize':_0x1ac74e['minFontSiz'+'e'],'maxFontSize':_0x1ac74e['maxFontSiz'+'e'],'autoFitWidth':_0x1ac74e['autoFitWid'+'th'],'autoFitHeight':_0x1ac74e['autoFitHei'+'ght'],'maxLines':_0x1ac74e['maxLines'],'fontAsset':_0x1ac74e['fontAsset'],'font':_0x1ac74e['font'],'useInput':_0x1ac74e['useInput'],'fitMode':_0x1ac74e['fitMode'],'batchGroupId':_0x1ac74e['batchGroup'+'Id'],'mask':_0x1ac74e['mask'],'outlineColor':_0x1ac74e['outlineCol'+'or']&&_0x1ac74e['outlineCol'+'or']['clone']()||_0x1ac74e['outlineCol'+'or'],'outlineThickness':_0x1ac74e['outlineThi'+'ckness'],'shadowColor':_0x1ac74e['shadowColo'+'r']&&_0x1ac74e['shadowColo'+'r']['clone']()||_0x1ac74e['shadowColo'+'r'],'shadowOffset':_0x1ac74e['shadowOffs'+'et']&&_0x1ac74e['shadowOffs'+'et']['clone']()||_0x1ac74e['shadowOffs'+'et'],'enableMarkup':_0x1ac74e['enableMark'+'up']};return _0x1ac74e['key']!==void(-0xba1*-0x1+0xc4*0x9+-0x1285)&&_0x1ac74e['key']!==null?_0x3dffa7['key']=_0x1ac74e['key']:_0x3dffa7['text']=_0x1ac74e['text'],this['addCompone'+'nt'](_0x43fcec,_0x3dffa7);}['getTextEle'+'mentMateri'+'al'](_0x489a83,_0x142fb8,_0x206034){const _0x38857b=(_0x489a83&&0x85+-0x2522+0x249e)|(_0x142fb8&&-0x1*-0x1f61+0x26*-0xbe+-0x32b)|(_0x206034&&0x12be+0x508+0xbe1*-0x2);let _0x1af43d=this['_defaultTe'+'xtMaterial'+'s'][_0x38857b];if(_0x1af43d)return _0x1af43d;let _0x8f3ada='TextMateri'+'al';return _0x1af43d=new Ut(),_0x142fb8?(_0x1af43d['msdfMap']=this['_defaultTe'+'xture'],_0x1af43d['msdfTextAt'+'tribute']=_0x206034,_0x1af43d['emissive']['set'](-0x28b+0x124*0x3+-0xe0*0x1,-0xa4*-0x29+-0x64f+0x1*-0x13f4,-0x105b+0x3*-0x4be+0x1e96)):(_0x8f3ada='Bitmap'+_0x8f3ada,_0x1af43d['emissive']['set'](0xb08*0x3+-0x76c+-0x19ab,0x15a3*-0x1+0xcdf*-0x2+0x2f62,-0x1*0x8a5+0x5e*0x16+0x92),_0x1af43d['emissiveMa'+'p']=this['_defaultTe'+'xture'],_0x1af43d['opacityMap']=this['_defaultTe'+'xture'],_0x1af43d['opacityMap'+'Channel']='a'),_0x489a83&&(_0x8f3ada='ScreenSpac'+'e'+_0x8f3ada,_0x1af43d['depthTest']=!(-0x11d3*-0x1+-0x18fd*-0x1+0x34b*-0xd)),_0x1af43d['name']='default'+_0x8f3ada,_0x1af43d['useLightin'+'g']=!(-0x2*0x83f+0xfe6+0x99),_0x1af43d['useTonemap']=!(-0x3*0x2c6+-0x15e6+0x3*0xa13),_0x1af43d['useFog']=!(-0xc5*0x1f+-0x4*-0x160+0x14*0xeb),_0x1af43d['useSkybox']=!(-0x2*-0x3c5+0x1*-0x2683+0x1efa*0x1),_0x1af43d['diffuse']['set'](-0x569*-0x4+0x9d*-0x11+-0x63*0x1d,0x1ccd*-0x1+-0x6c2+0x238f*0x1,-0x1ef+0x89e*0x1+0x3b*-0x1d),_0x1af43d['opacity']=0x12a*-0xc+-0x856+0x164e+0.5,_0x1af43d['blendType']=Gn,_0x1af43d['depthWrite']=!(-0x1b69+0x61f*0x5+-0x331),_0x1af43d['emissiveVe'+'rtexColor']=!(-0x1*-0x247d+0x23c7+-0x25*0x1f4),_0x1af43d['update'](),this['_defaultTe'+'xtMaterial'+'s'][_0x38857b]=_0x1af43d,_0x1af43d;}['_createBas'+'eImageMate'+'rial'](){const _0x50e3c9=new Ut();return _0x50e3c9['diffuse']['set'](-0x1*0x1aa3+-0x1abb*0x1+0x355e,0x3*0x4f+-0x108c*-0x1+-0xd5*0x15,0xd81*-0x2+0x174d+-0x3b5*-0x1),_0x50e3c9['emissive']['set'](-0x3f*-0x8b+0x2080+0xc*-0x58f,-0x3*0xceb+0x1352+0x1370,-0x6*-0x50d+0x1d70+-0x3bbd),_0x50e3c9['emissiveMa'+'p']=this['_defaultTe'+'xture'],_0x50e3c9['opacityMap']=this['_defaultTe'+'xture'],_0x50e3c9['opacityMap'+'Channel']='a',_0x50e3c9['useLightin'+'g']=!(-0x1497+-0xfa*0x2+0x168c),_0x50e3c9['useTonemap']=!(0x47*0x1+-0x1949*0x1+-0x151*-0x13),_0x50e3c9['useFog']=!(-0x55c*0x1+-0x1*0x1312+-0x1a1*-0xf),_0x50e3c9['useSkybox']=!(0x2d9+0x18*-0xe4+-0x8*-0x251),_0x50e3c9['blendType']=Gn,_0x50e3c9['depthWrite']=!(0x787+-0x1392+0xc0c),_0x50e3c9;}['getImageEl'+'ementMater'+'ial'](_0x5c3b2a,_0x1f201f,_0x1b8ee3,_0xb83a8a){return _0x5c3b2a?_0x1f201f?_0x1b8ee3?(this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']||(this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']=this['_createBas'+'eImageMate'+'rial'](),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['name']='defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al',this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['nineSliced'+'Mode']=Pt,this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['depthTest']=!(0x13a6+-0x2e*-0xa+0x1*-0x1571),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['alphaTest']=0x16*-0xb7+-0x96d*-0x2+-0x31f,this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['redWrite']=!(0x1*0x1f49+0x38*0x7c+-0x3a68),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['greenWrite']=!(0x1*0x1299+-0x478+-0xe20),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['blueWrite']=!(0x81*0x15+0x1635+-0x20c9),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['alphaWrite']=!(-0x1*-0xfd1+0x772+-0xe5*0x1a),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al'])),this['defaultScr'+'eenSpaceIm'+'ageMask9Sl'+'icedMateri'+'al']):_0xb83a8a?(this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']||(this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']=this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']['clone'](),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['name']='defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l',this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['nineSliced'+'Mode']=Mt,this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['depthTest']=!(-0x292+0x3*-0x7f3+0x13*0x164),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['alphaTest']=0x2*-0x476+-0x1dba+0x26a7,this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['redWrite']=!(0x85*0x47+-0x1*-0x2543+-0x4a25),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['greenWrite']=!(-0x1d27+-0x424+0x214c),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['blueWrite']=!(-0x1c08+0x446+0x17c3),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['alphaWrite']=!(0x31*-0xe+0x1*0xc61+-0x9b2),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l'])),this['defaultScr'+'eenSpaceIm'+'ageMask9Ti'+'ledMateria'+'l']):(this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']||(this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['name']='defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial',this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['depthTest']=!(-0x25c6+0xb64+0x547*0x5),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['alphaTest']=0x2f*0xa9+0x183f+-0x3745,this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['redWrite']=!(0x2267+-0x1*0x40a+-0x1e5c),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['greenWrite']=!(-0xc15+-0x3*0x479+-0x1*-0x1981),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['blueWrite']=!(0x8e*-0x37+0x7*-0x30a+0x5c1*0x9),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['alphaWrite']=!(0x1989+-0x49a*-0x2+-0x2*0x115e),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial'])),this['defaultScr'+'eenSpaceIm'+'ageMaskMat'+'erial']):_0x1b8ee3?(this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']||(this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']=this['_createBas'+'eImageMate'+'rial'](),this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']['name']='defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material',this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']['nineSliced'+'Mode']=Pt,this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']['depthTest']=!(-0xc23+0x269+0x2f*0x35),this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material'])),this['defaultScr'+'eenSpaceIm'+'age9Sliced'+'Material']):_0xb83a8a?(this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']||(this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']['name']='defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial',this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']['nineSliced'+'Mode']=Mt,this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']['depthTest']=!(-0x208+-0x2222+0x1*0x242b),this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial'])),this['defaultScr'+'eenSpaceIm'+'age9TiledM'+'aterial']):(this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']||(this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']=this['_createBas'+'eImageMate'+'rial'](),this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']['name']='defaultScr'+'eenSpaceIm'+'ageMateria'+'l',this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']['depthTest']=!(0x1*-0x155f+-0x1d55+0x32b5),this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l'])),this['defaultScr'+'eenSpaceIm'+'ageMateria'+'l']):_0x1f201f?_0x1b8ee3?(this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']||(this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['name']='defaultIma'+'ge9SlicedM'+'askMateria'+'l',this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['nineSliced'+'Mode']=Pt,this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['alphaTest']=0x195c*-0x1+-0x1fef+0x394c,this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['redWrite']=!(-0xd87+-0xed2+-0xbf*-0x26),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['greenWrite']=!(0x268c+-0xbbb+-0x1ad0),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['blueWrite']=!(-0x1b*-0x85+0x13b1+-0x21b7),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['alphaWrite']=!(0xd6b+0x2b7+-0x1021),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'ge9SlicedM'+'askMateria'+'l'])),this['defaultIma'+'ge9SlicedM'+'askMateria'+'l']):_0xb83a8a?(this['defaultIma'+'ge9TiledMa'+'skMaterial']||(this['defaultIma'+'ge9TiledMa'+'skMaterial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'ge9TiledMa'+'skMaterial']['name']='defaultIma'+'ge9TiledMa'+'skMaterial',this['defaultIma'+'ge9TiledMa'+'skMaterial']['nineSliced'+'Mode']=Mt,this['defaultIma'+'ge9TiledMa'+'skMaterial']['alphaTest']=-0x742*-0x1+0x3*0x1d5+-0x110*0xc,this['defaultIma'+'ge9TiledMa'+'skMaterial']['redWrite']=!(0x20f7+0xf0b+-0x3001),this['defaultIma'+'ge9TiledMa'+'skMaterial']['greenWrite']=!(-0x9fe*0x1+0x2b0*0x9+0x7*-0x207),this['defaultIma'+'ge9TiledMa'+'skMaterial']['blueWrite']=!(0x146a+-0x1e76+0x1f*0x53),this['defaultIma'+'ge9TiledMa'+'skMaterial']['alphaWrite']=!(-0x25a0+0x107*0x23+-0x2*-0xd6),this['defaultIma'+'ge9TiledMa'+'skMaterial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'ge9TiledMa'+'skMaterial'])),this['defaultIma'+'ge9TiledMa'+'skMaterial']):(this['defaultIma'+'geMaskMate'+'rial']||(this['defaultIma'+'geMaskMate'+'rial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'geMaskMate'+'rial']['name']='defaultIma'+'geMaskMate'+'rial',this['defaultIma'+'geMaskMate'+'rial']['alphaTest']=0x17*0x6a+0x42d*-0x9+-0x10*-0x1c1,this['defaultIma'+'geMaskMate'+'rial']['redWrite']=!(0x581*-0x1+0x24e3+0x1f61*-0x1),this['defaultIma'+'geMaskMate'+'rial']['greenWrite']=!(0x325+0x323*0x1+0x647*-0x1),this['defaultIma'+'geMaskMate'+'rial']['blueWrite']=!(0x25d6*0x1+-0x3a2*-0x3+0x30bb*-0x1),this['defaultIma'+'geMaskMate'+'rial']['alphaWrite']=!(-0x1e2c+-0xb*0x281+0x39b8),this['defaultIma'+'geMaskMate'+'rial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'geMaskMate'+'rial'])),this['defaultIma'+'geMaskMate'+'rial']):_0x1b8ee3?(this['defaultIma'+'ge9SlicedM'+'aterial']||(this['defaultIma'+'ge9SlicedM'+'aterial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'ge9SlicedM'+'aterial']['name']='defaultIma'+'ge9SlicedM'+'aterial',this['defaultIma'+'ge9SlicedM'+'aterial']['nineSliced'+'Mode']=Pt,this['defaultIma'+'ge9SlicedM'+'aterial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'ge9SlicedM'+'aterial'])),this['defaultIma'+'ge9SlicedM'+'aterial']):_0xb83a8a?(this['defaultIma'+'ge9TiledMa'+'terial']||(this['defaultIma'+'ge9TiledMa'+'terial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'ge9TiledMa'+'terial']['name']='defaultIma'+'ge9TiledMa'+'terial',this['defaultIma'+'ge9TiledMa'+'terial']['nineSliced'+'Mode']=Mt,this['defaultIma'+'ge9TiledMa'+'terial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'ge9TiledMa'+'terial'])),this['defaultIma'+'ge9TiledMa'+'terial']):(this['defaultIma'+'geMaterial']||(this['defaultIma'+'geMaterial']=this['_createBas'+'eImageMate'+'rial'](),this['defaultIma'+'geMaterial']['name']='defaultIma'+'geMaterial',this['defaultIma'+'geMaterial']['update'](),this['defaultIma'+'geMaterial'+'s']['push'](this['defaultIma'+'geMaterial'])),this['defaultIma'+'geMaterial']);}['registerUn'+'icodeConve'+'rter'](_0x309d8d){this['_unicodeCo'+'nverter']=_0x309d8d;}['registerRt'+'lReorder'](_0x21f6fa){this['_rtlReorde'+'r']=_0x21f6fa;}['getUnicode'+'Converter'](){return this['_unicodeCo'+'nverter'];}['getRtlReor'+'der'](){return this['_rtlReorde'+'r'];}}const Xa='free',qa='limited',ja='locked',RR=['angularDam'+'pingX','angularDam'+'pingY','angularDam'+'pingZ','angularEqu'+'ilibriumX','angularEqu'+'ilibriumY','angularEqu'+'ilibriumZ','angularLim'+'itsX','angularLim'+'itsY','angularLim'+'itsZ','angularMot'+'ionX','angularMot'+'ionY','angularMot'+'ionZ','angularSpr'+'ingX','angularSpr'+'ingY','angularSpr'+'ingZ','angularSti'+'ffnessX','angularSti'+'ffnessY','angularSti'+'ffnessZ','breakForce','enableColl'+'ision','enabled','entityA','entityB','linearDamp'+'ingX','linearDamp'+'ingY','linearDamp'+'ingZ','linearEqui'+'libriumX','linearEqui'+'libriumY','linearEqui'+'libriumZ','linearLimi'+'tsX','linearLimi'+'tsY','linearLimi'+'tsZ','linearMoti'+'onX','linearMoti'+'onY','linearMoti'+'onZ','linearSpri'+'ngX','linearSpri'+'ngY','linearSpri'+'ngZ','linearStif'+'fnessX','linearStif'+'fnessY','linearStif'+'fnessZ'];class ym extends we{constructor(_0x5911a4,_0x187a9e){super(_0x5911a4,_0x187a9e),w['assert'](typeof Ammo<'u','ERROR:\x20Att'+'empting\x20to'+'\x20create\x20a\x20'+'pc.JointCo'+'mponent\x20bu'+'t\x20Ammo.js\x20'+'is\x20not\x20loa'+'ded'),this['_constrain'+'t']=null,this['_entityA']=null,this['_entityB']=null,this['_breakForc'+'e']=0xffc99e3c66fd68000000000000000000,this['_enableCol'+'lision']=!(0x14c1+0x2095+0x3556*-0x1),this['_linearMot'+'ionX']=ja,this['_linearLim'+'itsX']=new J(0x1828+-0x257*0xd+0x7*0xe5,0x1fd8*-0x1+-0xb3f+0x2b17),this['_linearSpr'+'ingX']=!(-0x1c70+-0x41f+-0x1*-0x2090),this['_linearSti'+'ffnessX']=0x145b+0x1d4+-0x162f,this['_linearDam'+'pingX']=-0x99*0x1a+-0x4*0x14b+0x14b7,this['_linearEqu'+'ilibriumX']=0x489+-0x1c6*0x1+-0x2c3,this['_linearMot'+'ionY']=ja,this['_linearLim'+'itsY']=new J(-0x2*0x35f+0x1d62+-0x16a4,-0xfad*-0x1+-0x26c5+-0x1718*-0x1),this['_linearSpr'+'ingY']=!(0x4a2+0x1*0x1aad+-0x1f4e),this['_linearSti'+'ffnessY']=0x1432+0x1f*0x77+0xb89*-0x3,this['_linearDam'+'pingY']=0x3*0x801+-0x22f7*0x1+0xaf5,this['_linearEqu'+'ilibriumY']=0x16b5+0x251e+-0x3bd3,this['_linearMot'+'ionZ']=ja,this['_linearLim'+'itsZ']=new J(-0xc9*-0x3+-0x5*-0x41a+-0x3*0x79f,-0xdfe+-0x1*-0x6af+-0x74f*-0x1),this['_linearSpr'+'ingZ']=!(0x223c+-0x17bb+-0x40*0x2a),this['_linearSti'+'ffnessZ']=-0x687*-0x5+-0x66+-0x203d,this['_linearDam'+'pingZ']=0xad6+-0x26fa+-0x1c25*-0x1,this['_linearEqu'+'ilibriumZ']=-0x1*-0x11c2+0xdf9+0x1*-0x1fbb,this['_angularMo'+'tionX']=ja,this['_angularLi'+'mitsX']=new J(0x1cf3+-0x1110+-0xbe3,0xae1+0x8cb*0x3+-0x2542),this['_angularSp'+'ringX']=!(-0xdd8+-0x944+0x3d*0x61),this['_angularSt'+'iffnessX']=0x1357*0x1+0x1a41+-0x2d98,this['_angularDa'+'mpingX']=0x4*-0x2cf+-0x245e+0x2f9b,this['_angularEq'+'uilibriumX']=-0x128*-0x20+-0x167c+0x3a1*-0x4,this['_angularMo'+'tionY']=ja,this['_angularLi'+'mitsY']=new J(-0x1a75*0x1+0x59e*0x6+-0x1*0x73f,-0x37*-0x38+-0x929+-0x2df),this['_angularSp'+'ringY']=!(0x205*-0x7+0x17dc+-0x9b8),this['_angularSt'+'iffnessY']=-0x1594*0x1+0x1*0x253d+-0xfa9,this['_angularDa'+'mpingY']=0x11ae+-0x1727*-0x1+-0x28d4,this['_angularEq'+'uilibriumY']=-0x60e+-0x186+0x1e5*0x4,this['_angularMo'+'tionZ']=ja,this['_angularLi'+'mitsZ']=new J(0x1c1*0x10+0xbb*-0x35+0x38d*0x3,-0x159c+-0x779+0x1d15),this['_angularSp'+'ringZ']=!(-0xb02*0x1+-0x2627*0x1+0xe*0x383),this['_angularEq'+'uilibriumZ']=0x11b3+-0x24ff+0x134c*0x1,this['_angularDa'+'mpingZ']=-0x1719*-0x1+0x2175+-0x1f*0x1d3,this['_angularSt'+'iffnessZ']=0x3b5+-0x55*0x6b+0x1fd2,this['on']('set_enable'+'d',this['_onSetEnab'+'led'],this);}set['entityA'](_0x409301){this['_destroyCo'+'nstraint'](),this['_entityA']=_0x409301,this['_createCon'+'straint']();}get['entityA'](){return this['_entityA'];}set['entityB'](_0x2d9547){this['_destroyCo'+'nstraint'](),this['_entityB']=_0x2d9547,this['_createCon'+'straint']();}get['entityB'](){return this['_entityB'];}set['breakForce'](_0x326eac){this['_constrain'+'t']&&this['_breakForc'+'e']!==_0x326eac&&(this['_constrain'+'t']['setBreakin'+'gImpulseTh'+'reshold'](_0x326eac),this['_breakForc'+'e']=_0x326eac);}get['breakForce'](){return this['_breakForc'+'e'];}set['enableColl'+'ision'](_0x42d73a){this['_destroyCo'+'nstraint'](),this['_enableCol'+'lision']=_0x42d73a,this['_createCon'+'straint']();}get['enableColl'+'ision'](){return this['_enableCol'+'lision'];}set['angularLim'+'itsX'](_0x1f713f){this['_angularLi'+'mitsX']['equals'](_0x1f713f)||(this['_angularLi'+'mitsX']['copy'](_0x1f713f),this['_updateAng'+'ularLimits']());}get['angularLim'+'itsX'](){return this['_angularLi'+'mitsX'];}set['angularMot'+'ionX'](_0x52bf64){this['_angularMo'+'tionX']!==_0x52bf64&&(this['_angularMo'+'tionX']=_0x52bf64,this['_updateAng'+'ularLimits']());}get['angularMot'+'ionX'](){return this['_angularMo'+'tionX'];}set['angularLim'+'itsY'](_0x508ad5){this['_angularLi'+'mitsY']['equals'](_0x508ad5)||(this['_angularLi'+'mitsY']['copy'](_0x508ad5),this['_updateAng'+'ularLimits']());}get['angularLim'+'itsY'](){return this['_angularLi'+'mitsY'];}set['angularMot'+'ionY'](_0x505415){this['_angularMo'+'tionY']!==_0x505415&&(this['_angularMo'+'tionY']=_0x505415,this['_updateAng'+'ularLimits']());}get['angularMot'+'ionY'](){return this['_angularMo'+'tionY'];}set['angularLim'+'itsZ'](_0x38e148){this['_angularLi'+'mitsZ']['equals'](_0x38e148)||(this['_angularLi'+'mitsZ']['copy'](_0x38e148),this['_updateAng'+'ularLimits']());}get['angularLim'+'itsZ'](){return this['_angularLi'+'mitsZ'];}set['angularMot'+'ionZ'](_0x398ca2){this['_angularMo'+'tionZ']!==_0x398ca2&&(this['_angularMo'+'tionZ']=_0x398ca2,this['_updateAng'+'ularLimits']());}get['angularMot'+'ionZ'](){return this['_angularMo'+'tionZ'];}set['linearLimi'+'tsX'](_0x374735){this['_linearLim'+'itsX']['equals'](_0x374735)||(this['_linearLim'+'itsX']['copy'](_0x374735),this['_updateLin'+'earLimits']());}get['linearLimi'+'tsX'](){return this['_linearLim'+'itsX'];}set['linearMoti'+'onX'](_0x38fa76){this['_linearMot'+'ionX']!==_0x38fa76&&(this['_linearMot'+'ionX']=_0x38fa76,this['_updateLin'+'earLimits']());}get['linearMoti'+'onX'](){return this['_linearMot'+'ionX'];}set['linearLimi'+'tsY'](_0x4cc50c){this['_linearLim'+'itsY']['equals'](_0x4cc50c)||(this['_linearLim'+'itsY']['copy'](_0x4cc50c),this['_updateLin'+'earLimits']());}get['linearLimi'+'tsY'](){return this['_linearLim'+'itsY'];}set['linearMoti'+'onY'](_0x578a47){this['_linearMot'+'ionY']!==_0x578a47&&(this['_linearMot'+'ionY']=_0x578a47,this['_updateLin'+'earLimits']());}get['linearMoti'+'onY'](){return this['_linearMot'+'ionY'];}set['linearLimi'+'tsZ'](_0x17b456){this['_linearLim'+'itsZ']['equals'](_0x17b456)||(this['_linearLim'+'itsZ']['copy'](_0x17b456),this['_updateLin'+'earLimits']());}get['linearLimi'+'tsZ'](){return this['_linearLim'+'itsZ'];}set['linearMoti'+'onZ'](_0x34b894){this['_linearMot'+'ionZ']!==_0x34b894&&(this['_linearMot'+'ionZ']=_0x34b894,this['_updateLin'+'earLimits']());}get['linearMoti'+'onZ'](){return this['_linearMot'+'ionZ'];}['_convertTr'+'ansform'](_0x1e2c19,_0x3c9b6f){const _0x387dcd=_0x1e2c19['getTransla'+'tion'](),_0x24a820=new le();_0x24a820['setFromMat'+'4'](_0x1e2c19);const _0x3f5168=new Ammo['btVector3'](_0x387dcd['x'],_0x387dcd['y'],_0x387dcd['z']),_0x493b62=new Ammo['btQuaterni'+'on'](_0x24a820['x'],_0x24a820['y'],_0x24a820['z'],_0x24a820['w']);_0x3c9b6f['setOrigin'](_0x3f5168),_0x3c9b6f['setRotatio'+'n'](_0x493b62),Ammo['destroy'](_0x3f5168),Ammo['destroy'](_0x493b62);}['_updateAng'+'ularLimits'](){const _0x4f3ea8=this['_constrain'+'t'];if(_0x4f3ea8){let _0x24db2b,_0xe9b632,_0x37ac6f,_0x1b0b26,_0x2d89d6,_0x4c564a;this['_angularMo'+'tionX']===qa?(_0x24db2b=this['_angularLi'+'mitsX']['x']*Y['DEG_TO_RAD'],_0x1b0b26=this['_angularLi'+'mitsX']['y']*Y['DEG_TO_RAD']):this['_angularMo'+'tionX']===Xa?(_0x24db2b=-0xbb1+0x1f*0xe5+-0x5*0x335,_0x1b0b26=-0x1*0x34f+0x17fd+0x1*-0x14ae):_0x24db2b=_0x1b0b26=-0xc64+-0x266a+0xe*0x3a1,this['_angularMo'+'tionY']===qa?(_0xe9b632=this['_angularLi'+'mitsY']['x']*Y['DEG_TO_RAD'],_0x2d89d6=this['_angularLi'+'mitsY']['y']*Y['DEG_TO_RAD']):this['_angularMo'+'tionY']===Xa?(_0xe9b632=-0x16e6+-0xc96+-0x237d*-0x1,_0x2d89d6=0x1*-0x94f+0x257d+0x1*-0x1c2e):_0xe9b632=_0x2d89d6=-0xc2a+-0x787+0x1*0x13b1,this['_angularMo'+'tionZ']===qa?(_0x37ac6f=this['_angularLi'+'mitsZ']['x']*Y['DEG_TO_RAD'],_0x4c564a=this['_angularLi'+'mitsZ']['y']*Y['DEG_TO_RAD']):this['_angularMo'+'tionZ']===Xa?(_0x37ac6f=-0x7*-0x20d+0xe*0x11a+-0x1dc6*0x1,_0x4c564a=-0x24d1+0x1*-0x128c+0x375d):_0x37ac6f=_0x4c564a=0xb2a*0x2+-0x2445+0xdf1;const _0x5ea8f6=new Ammo['btVector3'](_0x24db2b,_0xe9b632,_0x37ac6f);_0x4f3ea8['setAngular'+'LowerLimit'](_0x5ea8f6),_0x5ea8f6['setValue'](_0x1b0b26,_0x2d89d6,_0x4c564a),_0x4f3ea8['setAngular'+'UpperLimit'](_0x5ea8f6),Ammo['destroy'](_0x5ea8f6);}}['_updateLin'+'earLimits'](){const _0x2ed21a=this['_constrain'+'t'];if(_0x2ed21a){let _0x584a13,_0xa9d911,_0x1671f3,_0x292387,_0x4e7dc2,_0x3fc358;this['_linearMot'+'ionX']===qa?(_0x584a13=this['_linearLim'+'itsX']['x'],_0x292387=this['_linearLim'+'itsX']['y']):this['_linearMot'+'ionX']===Xa?(_0x584a13=-0x2542+-0xa21+0x6*0x7e6,_0x292387=-0x42d+-0xc96+0x10c3):_0x584a13=_0x292387=0x843*0x3+-0x1f7d+-0x9c*-0xb,this['_linearMot'+'ionY']===qa?(_0xa9d911=this['_linearLim'+'itsY']['x'],_0x4e7dc2=this['_linearLim'+'itsY']['y']):this['_linearMot'+'ionY']===Xa?(_0xa9d911=0x20fd+-0xbc2+-0x153a,_0x4e7dc2=-0x1af3+0x5a6+0x154d):_0xa9d911=_0x4e7dc2=-0xb*-0x21a+0x5*0x757+-0x1*0x3bd1,this['_linearMot'+'ionZ']===qa?(_0x1671f3=this['_linearLim'+'itsZ']['x'],_0x3fc358=this['_linearLim'+'itsZ']['y']):this['_linearMot'+'ionZ']===Xa?(_0x1671f3=-0x1c14+0x21cf+0x1*-0x5ba,_0x3fc358=-0x1*0x2593+-0x1732+0x3cc5):_0x1671f3=_0x3fc358=-0x1c4c+-0x2*-0x298+0x171c;const _0xd7544=new Ammo['btVector3'](_0x584a13,_0xa9d911,_0x1671f3);_0x2ed21a['setLinearL'+'owerLimit'](_0xd7544),_0xd7544['setValue'](_0x292387,_0x4e7dc2,_0x3fc358),_0x2ed21a['setLinearU'+'pperLimit'](_0xd7544),Ammo['destroy'](_0xd7544);}}['_createCon'+'straint'](){if(this['_entityA']&&this['_entityA']['rigidbody']){this['_destroyCo'+'nstraint']();const _0x1c2d1a=new te(),_0x255821=this['_entityA']['rigidbody']['body'];_0x255821['activate']();const _0x2094e7=this['entity']['getWorldTr'+'ansform'](),_0x42e3c0=this['_entityA']['getWorldTr'+'ansform']()['clone']()['invert']();_0x1c2d1a['mul2'](_0x42e3c0,_0x2094e7);const _0x4f9888=new Ammo['btTransfor'+'m']();if(this['_convertTr'+'ansform'](_0x1c2d1a,_0x4f9888),this['_entityB']&&this['_entityB']['rigidbody']){const _0x545441=this['_entityB']['rigidbody']['body'];_0x545441['activate']();const _0x23dfb8=this['_entityB']['getWorldTr'+'ansform']()['clone']()['invert']();_0x1c2d1a['mul2'](_0x23dfb8,_0x2094e7);const _0x11f3ef=new Ammo['btTransfor'+'m']();this['_convertTr'+'ansform'](_0x1c2d1a,_0x11f3ef),this['_constrain'+'t']=new Ammo['btGeneric6'+'DofSpringC'+'onstraint'](_0x255821,_0x545441,_0x4f9888,_0x11f3ef,!this['_enableCol'+'lision']),Ammo['destroy'](_0x11f3ef);}else this['_constrain'+'t']=new Ammo['btGeneric6'+'DofSpringC'+'onstraint'](_0x255821,_0x4f9888,!this['_enableCol'+'lision']);Ammo['destroy'](_0x4f9888);const _0x3aeb2e=['X','Y','Z','X','Y','Z'];for(let _0x3f14c4=-0x1*-0x1c1+0x500+0xd*-0x85;_0x3f14c4<-0x337*0x7+0x35*0x8e+-0x6df;_0x3f14c4++){const _0x211185=_0x3f14c4<0x22bd+0x53+-0x230d?'_linear':'_angular';this['_constrain'+'t']['enableSpri'+'ng'](_0x3f14c4,this[_0x211185+'Spring'+_0x3aeb2e[_0x3f14c4]]),this['_constrain'+'t']['setDamping'](_0x3f14c4,this[_0x211185+'Damping'+_0x3aeb2e[_0x3f14c4]]),this['_constrain'+'t']['setEquilib'+'riumPoint'](_0x3f14c4,this[_0x211185+('Equilibriu'+'m')+_0x3aeb2e[_0x3f14c4]]),this['_constrain'+'t']['setStiffne'+'ss'](_0x3f14c4,this[_0x211185+'Stiffness'+_0x3aeb2e[_0x3f14c4]]);}this['_constrain'+'t']['setBreakin'+'gImpulseTh'+'reshold'](this['_breakForc'+'e']),this['_updateLin'+'earLimits'](),this['_updateAng'+'ularLimits'](),this['system']['app']['systems']['rigidbody']['dynamicsWo'+'rld']['addConstra'+'int'](this['_constrain'+'t'],!this['_enableCol'+'lision']);}}['_destroyCo'+'nstraint'](){this['_constrain'+'t']&&(this['system']['app']['systems']['rigidbody']['dynamicsWo'+'rld']['removeCons'+'traint'](this['_constrain'+'t']),Ammo['destroy'](this['_constrain'+'t']),this['_constrain'+'t']=null);}['initFromDa'+'ta'](_0x469aa1){for(const _0xa9084a of RR)_0x469aa1['hasOwnProp'+'erty'](_0xa9084a)&&(_0x469aa1[_0xa9084a]instanceof J?this['_'+_0xa9084a]['copy'](_0x469aa1[_0xa9084a]):this['_'+_0xa9084a]=_0x469aa1[_0xa9084a]);this['_createCon'+'straint']();}['onEnable'](){this['_createCon'+'straint']();}['onDisable'](){this['_destroyCo'+'nstraint']();}['_onSetEnab'+'led'](_0x33ed46,_0x5989b7,_0x52c176){}['_onBeforeR'+'emove'](){this['fire']('remove');}}const OR={'Damping':'setDamping','Equilibrium':'setEquilib'+'riumPoint','Spring':'enableSpri'+'ng','Stiffness':'setStiffne'+'ss'};['linear','angular']['forEach'](_0x5e5b0c=>{['Damping','Equilibriu'+'m','Spring','Stiffness']['forEach'](_0x28053f=>{['X','Y','Z']['forEach'](_0x1dceaf=>{const _0xf4ef76=_0x5e5b0c+_0x28053f+_0x1dceaf,_0x531553='_'+_0xf4ef76;let _0x11dc4b=_0x5e5b0c==='linear'?0x1257+0xe24*-0x1+0xd7*-0x5:0x14e5+0x56*0x37+-0x1ca*0x16;_0x1dceaf==='Y'&&(_0x11dc4b+=0xd1f*0x1+0x21d3+0x2ef1*-0x1),_0x1dceaf==='Z'&&(_0x11dc4b+=-0x14f4+0x90*0x20+0x2f6),Object['defineProp'+'erty'](ym['prototype'],_0xf4ef76,{'get':function(){return this[_0x531553];},'set':function(_0x5e622c){this[_0x531553]!==_0x5e622c&&(this[_0x531553]=_0x5e622c,this['_constrain'+'t'][OR[_0x28053f]](_0x11dc4b,_0x5e622c));}});});});});class FR{constructor(){this['enabled']=!(0xee9+0x2*-0x9d6+0x4c3);}}const Fu=['enabled'];class NR extends ct{constructor(_0x3a56e5){super(_0x3a56e5),this['id']='joint',this['app']=_0x3a56e5,this['ComponentT'+'ype']=ym,this['DataType']=FR,this['schema']=Fu;}['initialize'+'ComponentD'+'ata'](_0x398fab,_0x4acf06,_0x2f4ec6){_0x398fab['initFromDa'+'ta'](_0x4acf06),super['initialize'+'ComponentD'+'ata'](_0x398fab,_0x4acf06,Fu);}}we['_buildAcce'+'ssors'](ym['prototype'],Fu);class Jv extends we{constructor(){super(...arguments),h(this,'_minWidth',-0x3*-0x757+0x33d*0x3+0x2a5*-0xc),h(this,'_minHeight',-0x1436+0x1c89+-0x853),h(this,'_maxWidth',null),h(this,'_maxHeight',null),h(this,'_fitWidthP'+'roportion',0x999+0x26c*-0x5+0x283),h(this,'_fitHeight'+'Proportion',0x1b*0xd3+0x173*-0x1+-0x14ce),h(this,'_excludeFr'+'omLayout',!(0x5*0x35+0x1*0x12e2+-0x13ea));}set['minWidth'](_0x4fe067){_0x4fe067!==this['_minWidth']&&(this['_minWidth']=_0x4fe067,this['fire']('resize'));}get['minWidth'](){return this['_minWidth'];}set['minHeight'](_0x2b266c){_0x2b266c!==this['_minHeight']&&(this['_minHeight']=_0x2b266c,this['fire']('resize'));}get['minHeight'](){return this['_minHeight'];}set['maxWidth'](_0x214948){_0x214948!==this['_maxWidth']&&(this['_maxWidth']=_0x214948,this['fire']('resize'));}get['maxWidth'](){return this['_maxWidth'];}set['maxHeight'](_0x1014e5){_0x1014e5!==this['_maxHeight']&&(this['_maxHeight']=_0x1014e5,this['fire']('resize'));}get['maxHeight'](){return this['_maxHeight'];}set['fitWidthPr'+'oportion'](_0x246672){_0x246672!==this['_fitWidthP'+'roportion']&&(this['_fitWidthP'+'roportion']=_0x246672,this['fire']('resize'));}get['fitWidthPr'+'oportion'](){return this['_fitWidthP'+'roportion'];}set['fitHeightP'+'roportion'](_0x2c4e41){_0x2c4e41!==this['_fitHeight'+'Proportion']&&(this['_fitHeight'+'Proportion']=_0x2c4e41,this['fire']('resize'));}get['fitHeightP'+'roportion'](){return this['_fitHeight'+'Proportion'];}set['excludeFro'+'mLayout'](_0x3e5244){_0x3e5244!==this['_excludeFr'+'omLayout']&&(this['_excludeFr'+'omLayout']=_0x3e5244,this['fire']('resize'));}get['excludeFro'+'mLayout'](){return this['_excludeFr'+'omLayout'];}}class kR{constructor(){this['enabled']=!(-0x3f9+-0x1f68+0x2361);}}const e0=['enabled'];class UR extends ct{constructor(_0xf54bfd){super(_0xf54bfd),this['id']='layoutchil'+'d',this['ComponentT'+'ype']=Jv,this['DataType']=kR,this['schema']=e0;}['initialize'+'ComponentD'+'ata'](_0x291b0d,_0x5907c7,_0xb8aed4){_0x5907c7['enabled']!==void(-0x3*-0x20b+0xa4f+-0x1070)&&(_0x291b0d['enabled']=_0x5907c7['enabled']),_0x5907c7['minWidth']!==void(-0x1*-0x6af+0x1269+-0x1918)&&(_0x291b0d['minWidth']=_0x5907c7['minWidth']),_0x5907c7['minHeight']!==void(-0x3e*0x19+0x20b*-0x3+0xc2f)&&(_0x291b0d['minHeight']=_0x5907c7['minHeight']),_0x5907c7['maxWidth']!==void(-0x1310+-0x1*0x188e+0x2b9e)&&(_0x291b0d['maxWidth']=_0x5907c7['maxWidth']),_0x5907c7['maxHeight']!==void(0x6*-0x45d+-0x187*0x1+0x1bb5)&&(_0x291b0d['maxHeight']=_0x5907c7['maxHeight']),_0x5907c7['fitWidthPr'+'oportion']!==void(-0x151*0x5+-0x400+-0x12d*-0x9)&&(_0x291b0d['fitWidthPr'+'oportion']=_0x5907c7['fitWidthPr'+'oportion']),_0x5907c7['fitHeightP'+'roportion']!==void(-0x2*0xac1+0x50*-0x47+-0x292*-0x11)&&(_0x291b0d['fitHeightP'+'roportion']=_0x5907c7['fitHeightP'+'roportion']),_0x5907c7['excludeFro'+'mLayout']!==void(-0x5f*-0x4f+0x6*0x5e+-0x1f85*0x1)&&(_0x291b0d['excludeFro'+'mLayout']=_0x5907c7['excludeFro'+'mLayout']),super['initialize'+'ComponentD'+'ata'](_0x291b0d,_0x5907c7,_0xb8aed4);}['cloneCompo'+'nent'](_0x448ae3,_0x5e52e2){const _0x327939=_0x448ae3['layoutchil'+'d'];return this['addCompone'+'nt'](_0x5e52e2,{'enabled':_0x327939['enabled'],'minWidth':_0x327939['minWidth'],'minHeight':_0x327939['minHeight'],'maxWidth':_0x327939['maxWidth'],'maxHeight':_0x327939['maxHeight'],'fitWidthProportion':_0x327939['fitWidthPr'+'oportion'],'fitHeightProportion':_0x327939['fitHeightP'+'roportion'],'excludeFromLayout':_0x327939['excludeFro'+'mLayout']});}}we['_buildAcce'+'ssors'](Jv['prototype'],e0);const Nu=-0x22c0+-0x59*0x4d+0x3d85,BR=-0x1*-0x1ea4+-0x10f6*-0x2+-0x408f*0x1,Qg=-0x1677+0x1aa9+0x430*-0x1,zR=-0x20f+-0x13*0xa3+0xe2b,Oh={};Oh[Ce]={'axis':'x','size':'width','calculatedSize':'calculated'+'Width','minSize':'minWidth','maxSize':'maxWidth','fitting':'widthFitti'+'ng','fittingProportion':'fitWidthPr'+'oportion'},Oh[je]={'axis':'y','size':'height','calculatedSize':'calculated'+'Height','minSize':'minHeight','maxSize':'maxHeight','fitting':'heightFitt'+'ing','fittingProportion':'fitHeightP'+'roportion'};const vm={};vm[Ce]=je,vm[je]=Ce;const VR={'minWidth':0x0,'minHeight':0x0,'maxWidth':Number['POSITIVE_I'+'NFINITY'],'maxHeight':Number['POSITIVE_I'+'NFINITY'],'width':null,'height':null,'fitWidthProportion':0x0,'fitHeightProportion':0x0},os={'NONE':'NONE','APPLY_STRETCHING':'APPLY_STRE'+'TCHING','APPLY_SHRINKING':'APPLY_SHRI'+'NKING'},ls=new J();function t0(_0x4dd0c2){let _0x11b42f;const _0x1c2de4=Oh[_0x4dd0c2],_0x54d23=Oh[vm[_0x4dd0c2]];function _0x2a8695(_0x56edf6,_0x3caed1){return-_0x3caed1[_0x1c2de4['size']]*_0x56edf6['pivot'][_0x1c2de4['axis']];}function _0x2210ba(_0x3e2cc8,_0x248eea){return-_0x248eea[_0x54d23['size']]*_0x3e2cc8['pivot'][_0x54d23['axis']];}function _0x47d873(_0x10910f,_0x349129){return _0x349129[_0x1c2de4['size']]*(0x7ac+-0x10f8+-0x1*-0x94d-_0x10910f['pivot'][_0x1c2de4['axis']]);}function _0xc9be75(_0x225eb9,_0x4204bb){_0x225eb9=_0x225eb9['filter'](_0x427a80),_0x11b42f=_0x4204bb,ls['x']=_0x11b42f['containerS'+'ize']['x']-_0x11b42f['padding']['x']-_0x11b42f['padding']['z'],ls['y']=_0x11b42f['containerS'+'ize']['y']-_0x11b42f['padding']['y']-_0x11b42f['padding']['w'],_0x47d9a2(_0x225eb9);const _0x4e3167=_0x15526d(_0x3b35e0(_0x225eb9)),_0x340b80=_0x197961(_0x4e3167,_0x539f71(_0x4e3167)),_0xde1198=_0x5938c(_0x4e3167,_0x340b80);return _0x4964eb(_0x4e3167,_0x340b80,_0xde1198),_0x4c81c2(_0x4e3167,_0x340b80,_0xde1198),_0x54ef22(_0x4e3167);}function _0x427a80(_0x2b846b){const _0x1889e1=_0x2b846b['entity']['layoutchil'+'d'];return!_0x1889e1||!_0x1889e1['enabled']||!_0x1889e1['excludeFro'+'mLayout'];}function _0x47d9a2(_0x16669d){for(let _0x46bcbc=-0x2*0x10c6+-0x2a1*0x8+0x3694;_0x46bcbc<_0x16669d['length'];++_0x46bcbc){const _0x45fcd2=_0x16669d[_0x46bcbc],_0x4a21b4=_0x45fcd2['anchor'];(_0x4a21b4['x']!==0x53c+0x2186*-0x1+0x8e*0x33||_0x4a21b4['y']!==0x8*-0x254+-0x82*0x4+0x8*0x295||_0x4a21b4['z']!==-0x1372+0x1*-0x25ae+-0x20*-0x1c9||_0x4a21b4['w']!==0x17*-0x3e+0x355*-0x3+0xf91)&&(_0x45fcd2['anchor']=re['ZERO']);}}function _0x3b35e0(_0x1424b8){if(!_0x11b42f['wrap'])return[_0x1424b8];const _0x2867f5=[[]],_0x31e8af=_0x1f5640(_0x1424b8);let _0x183b24=-0x19c8+0x2c*0x16+-0x2c*-0x80;const _0x456699=_0x11b42f[_0x1c2de4['fitting']]===Qg;for(let _0x3dd400=0xa48+0x2421+0x6d*-0x6d;_0x3dd400<_0x1424b8['length'];++_0x3dd400){_0x2867f5[_0x2867f5['length']-(-0x947+-0x1dca+-0x1389*-0x2)]['length']>-0x141*-0x8+0x26af+0x3*-0x103d&&(_0x183b24+=_0x11b42f['spacing'][_0x1c2de4['axis']]);const _0x5b3150=_0x31e8af[_0x3dd400][_0x1c2de4['size']];_0x183b24+=_0x5b3150,!_0x456699&&_0x183b24>ls[_0x1c2de4['axis']]&&_0x2867f5[_0x2867f5['length']-(-0x241*-0xb+0x25f1+-0x3ebb)]['length']!==-0x261b*-0x1+0x1e77+-0x4492&&(_0x183b24=_0x5b3150,_0x2867f5['push']([])),_0x2867f5[_0x2867f5['length']-(0x1dd2+0x5bb+0xaf*-0x34)]['push'](_0x1424b8[_0x3dd400]),_0x456699&&_0x183b24>ls[_0x1c2de4['axis']]&&_0x3dd400!==_0x1424b8['length']-(-0x1de*0x8+0xcb*-0x22+0x29e7)&&(_0x183b24=-0x1*0x1972+-0x2241+0x3bb3,_0x2867f5['push']([]));}return _0x2867f5;}function _0x15526d(_0x104b7f){const _0x24dd63=_0x11b42f['orientatio'+'n']===Ce&&_0x11b42f['reverseX']||_0x11b42f['orientatio'+'n']===je&&_0x11b42f['reverseY'],_0x16e266=_0x11b42f['orientatio'+'n']===Ce&&_0x11b42f['reverseY']||_0x11b42f['orientatio'+'n']===je&&_0x11b42f['reverseX'];if(_0x24dd63){for(let _0x546e1f=0x55d*-0x3+0x1a2d+-0xa16;_0x546e1f<_0x104b7f['length'];++_0x546e1f)_0x24dd63&&_0x104b7f[_0x546e1f]['reverse']();}return _0x16e266&&_0x104b7f['reverse'](),_0x104b7f;}function _0x539f71(_0x2f15c8){const _0x437feb=[];for(let _0x349132=-0xe*0x2c9+0x1*0x24e3+0x31*0xb;_0x349132<_0x2f15c8['length'];++_0x349132){const _0x3d27b2=_0x2f15c8[_0x349132],_0x5cb877=_0x1f5640(_0x3d27b2),_0x22642c=_0x57eed5(_0x5cb877,_0x1c2de4),_0x4c1726=_0xfea1d0(_0x11b42f[_0x1c2de4['fitting']],_0x22642c,ls[_0x1c2de4['axis']]);_0x4c1726===os['APPLY_STRE'+'TCHING']?_0xcfe691(_0x5cb877,_0x22642c,_0x1c2de4):_0x4c1726===os['APPLY_SHRI'+'NKING']&&_0x1d2ad6(_0x5cb877,_0x22642c,_0x1c2de4),_0x437feb['push'](_0x5cb877);}return _0x437feb;}function _0x197961(_0x462582,_0x1ac546){const _0x48f05b=[],_0x1e9702=[];for(let _0x484842=0x2673+0x10ef+-0x11*0x342;_0x484842<_0x462582['length'];++_0x484842){const _0x179f86=_0x462582[_0x484842];_0x179f86['largestEle'+'ment']=null,_0x179f86['largestSiz'+'e']={'width':Number['NEGATIVE_I'+'NFINITY'],'height':Number['NEGATIVE_I'+'NFINITY']};for(let _0x33f840=0x1*-0x1358+0x21ec+0x4*-0x3a5;_0x33f840<_0x179f86['length'];++_0x33f840){const _0x216a91=_0x1ac546[_0x484842][_0x33f840];_0x216a91[_0x54d23['size']]>_0x179f86['largestSiz'+'e'][_0x54d23['size']]&&(_0x179f86['largestEle'+'ment']=_0x179f86[_0x33f840],_0x179f86['largestSiz'+'e']=_0x216a91);}_0x48f05b['push'](_0x179f86['largestEle'+'ment']),_0x1e9702['push'](_0x179f86['largestSiz'+'e']);}const _0x2d6b0c=_0x57eed5(_0x1e9702,_0x54d23),_0xc9eb12=_0xfea1d0(_0x11b42f[_0x54d23['fitting']],_0x2d6b0c,ls[_0x54d23['axis']]);_0xc9eb12===os['APPLY_STRE'+'TCHING']?_0xcfe691(_0x1e9702,_0x2d6b0c,_0x54d23):_0xc9eb12===os['APPLY_SHRI'+'NKING']&&_0x1d2ad6(_0x1e9702,_0x2d6b0c,_0x54d23);for(let _0x376fcf=-0xa81+-0x162f+0x20b0;_0x376fcf<_0x462582['length'];++_0x376fcf){const _0x563f33=_0x462582[_0x376fcf];for(let _0x437381=0x1d49+0x161*0x1c+-0x7*0x9b3;_0x437381<_0x563f33['length'];++_0x437381){const _0x325e56=_0x1ac546[_0x376fcf][_0x437381],_0x1d9e4b=_0x325e56[_0x54d23['size']],_0x18004b=_0x462582['length']===-0x3*0x414+0x1394+-0x757?ls[_0x54d23['axis']]:_0x563f33['largestSiz'+'e'][_0x54d23['size']],_0x5cab48=_0xfea1d0(_0x11b42f[_0x54d23['fitting']],_0x1d9e4b,_0x18004b);_0x5cab48===os['APPLY_STRE'+'TCHING']?_0x325e56[_0x54d23['size']]=Math['min'](_0x18004b,_0x325e56[_0x54d23['maxSize']]):_0x5cab48===os['APPLY_SHRI'+'NKING']&&(_0x325e56[_0x54d23['size']]=Math['max'](_0x18004b,_0x325e56[_0x54d23['minSize']]));}}return _0x1ac546;}function _0xfea1d0(_0x1fd252,_0x44c6e6,_0xb6719e){switch(_0x1fd252){case Nu:return os['NONE'];case BR:return _0x44c6e6<_0xb6719e?os['APPLY_STRE'+'TCHING']:os['NONE'];case Qg:return _0x44c6e6>=_0xb6719e?os['APPLY_SHRI'+'NKING']:os['NONE'];case zR:return _0x44c6e6<_0xb6719e?os['APPLY_STRE'+'TCHING']:os['APPLY_SHRI'+'NKING'];default:throw new Error('Unrecogniz'+'ed\x20fitting'+'\x20mode:\x20'+_0x1fd252);}}function _0x57eed5(_0x4fc24c,_0x574dee){const _0x5c8032=_0x2b10e3(_0x4fc24c,_0x574dee['size']),_0xf13d5a=(_0x4fc24c['length']-(0x1064*-0x2+0x4df*-0x2+0x39*0xbf))*_0x11b42f['spacing'][_0x574dee['axis']];return _0x5c8032+_0xf13d5a;}function _0xcfe691(_0x1f4019,_0x3bb1ba,_0x107cfa){const _0x1ccbd5=_0x274f61(_0x1f4019,_0x107cfa['maxSize']),_0x37537e=_0x3768d3(_0x1f4019,_0x107cfa['fittingPro'+'portion']),_0x39f426=_0x99d5a5(_0x37537e,_0x1ccbd5);let _0x1fa9fd=ls[_0x107cfa['axis']]-_0x3bb1ba;for(let _0x170d3b=-0x949*0x1+-0x1*0x15d+0xaa6;_0x170d3b<_0x1f4019['length'];++_0x170d3b){const _0x4931b6=_0x1ccbd5[_0x170d3b],_0x2eaa15=_0x45e187(_0x4931b6,_0x1fa9fd,_0x37537e,_0x39f426),_0x117ddc=_0x1f4019[_0x4931b6][_0x107cfa['size']]+_0x2eaa15,_0x40cbac=_0x1f4019[_0x4931b6][_0x107cfa['maxSize']],_0x22d714=Math['min'](_0x117ddc,_0x40cbac);_0x1f4019[_0x4931b6][_0x107cfa['size']]=_0x22d714;const _0x51994c=Math['max'](_0x117ddc-_0x22d714,0xf1d+0x1227*0x2+-0x336b),_0xad6d55=_0x2eaa15-_0x51994c;_0x1fa9fd-=_0xad6d55;}}function _0x1d2ad6(_0x312408,_0x48c084,_0x35b4a3){const _0x35da32=_0x274f61(_0x312408,_0x35b4a3['minSize'],!(-0xb4*0x3+0x21e7+0x1fcb*-0x1)),_0xdb9eb4=_0x3768d3(_0x312408,_0x35b4a3['fittingPro'+'portion']),_0x5a82b0=_0x3bbe8e(_0xdb9eb4),_0x222d00=_0x99d5a5(_0x5a82b0,_0x35da32);let _0x44ed85=_0x48c084-ls[_0x35b4a3['axis']];for(let _0x39f3c0=-0x2673+0x5*0x3a0+-0x1d9*-0xb;_0x39f3c0<_0x312408['length'];++_0x39f3c0){const _0x26288c=_0x35da32[_0x39f3c0],_0x8280c5=_0x45e187(_0x26288c,_0x44ed85,_0x5a82b0,_0x222d00),_0x13b060=_0x312408[_0x26288c][_0x35b4a3['size']]-_0x8280c5,_0x289909=_0x312408[_0x26288c][_0x35b4a3['minSize']],_0xf22b8b=Math['max'](_0x13b060,_0x289909);_0x312408[_0x26288c][_0x35b4a3['size']]=_0xf22b8b;const _0x3b4888=Math['max'](_0xf22b8b-_0x13b060,0x1a8b+-0xa69+0x24e*-0x7),_0x22471a=_0x8280c5-_0x3b4888;_0x44ed85-=_0x22471a;}}function _0x45e187(_0x2e504c,_0x4b786f,_0x140975,_0x51feb8){const _0x3fff19=_0x140975[_0x2e504c],_0x338ac5=_0x51feb8[_0x2e504c];return Math['abs'](_0x3fff19)<-0x282+0x3*-0x98a+0x1f20+0.00001&&Math['abs'](_0x338ac5)<0x2*0xe5d+-0x4e1*-0x7+-0x3ee1+0.00001?_0x4b786f:_0x4b786f*_0x3fff19/_0x338ac5;}function _0x5938c(_0x2b2a66,_0xe58cd0){const _0x22dd39={};_0x22dd39[_0x1c2de4['axis']]=-0x5e*-0x5+0xe24+-0xffa,_0x22dd39[_0x54d23['axis']]=0x954*0x1+0x88a*-0x3+0x104a,_0x2b2a66[_0x1c2de4['size']]=Number['NEGATIVE_I'+'NFINITY'];const _0x51c892=[];for(let _0x889c46=0x1*0xdcc+-0x1da0+0xfd4;_0x889c46<_0x2b2a66['length'];++_0x889c46){const _0x4c3ecc=_0x2b2a66[_0x889c46];if(_0x4c3ecc['length']===0x34*-0x59+-0x29*-0x94+0x5a*-0x10){_0x51c892['push']([]);continue;}const _0x232357=[],_0x3749a8=_0xe58cd0[_0x889c46];for(let _0x56edfc=0x12ab+0x1101+-0x23ac;_0x56edfc<_0x4c3ecc['length'];++_0x56edfc){const _0x4472f1=_0x4c3ecc[_0x56edfc],_0x7ddcfe=_0x3749a8[_0x56edfc];_0x22dd39[_0x54d23['axis']]-=_0x2210ba(_0x4472f1,_0x7ddcfe),_0x22dd39[_0x1c2de4['axis']]-=_0x2a8695(_0x4472f1,_0x7ddcfe),_0x232357[_0x56edfc]={},_0x232357[_0x56edfc][_0x1c2de4['axis']]=_0x22dd39[_0x1c2de4['axis']],_0x232357[_0x56edfc][_0x54d23['axis']]=_0x22dd39[_0x54d23['axis']],_0x22dd39[_0x54d23['axis']]+=_0x2210ba(_0x4472f1,_0x7ddcfe),_0x22dd39[_0x1c2de4['axis']]+=_0x47d873(_0x4472f1,_0x7ddcfe)+_0x11b42f['spacing'][_0x1c2de4['axis']];}_0x4c3ecc[_0x1c2de4['size']]=_0x22dd39[_0x1c2de4['axis']]-_0x11b42f['spacing'][_0x1c2de4['axis']],_0x4c3ecc[_0x54d23['size']]=_0x4c3ecc['largestSiz'+'e'][_0x54d23['size']],_0x2b2a66[_0x1c2de4['size']]=Math['max'](_0x2b2a66[_0x1c2de4['size']],_0x4c3ecc[_0x1c2de4['size']]),_0x22dd39[_0x1c2de4['axis']]=0x1b*0x165+0x18ce+-0x1*0x3e75,_0x22dd39[_0x54d23['axis']]+=_0x4c3ecc[_0x54d23['size']]+_0x11b42f['spacing'][_0x54d23['axis']],_0x51c892['push'](_0x232357);}return _0x2b2a66[_0x54d23['size']]=_0x22dd39[_0x54d23['axis']]-_0x11b42f['spacing'][_0x54d23['axis']],_0x51c892;}function _0x4964eb(_0x33c682,_0x3a52d2,_0x47760){const _0x2eb20d=_0x11b42f['alignment'][_0x1c2de4['axis']],_0x3ea0cd=_0x11b42f['alignment'][_0x54d23['axis']],_0x5c742c=_0x11b42f['padding'][_0x1c2de4['axis']],_0x378e84=_0x11b42f['padding'][_0x54d23['axis']];for(let _0x8cea1f=0xc34+0x1811*-0x1+0xbdd;_0x8cea1f<_0x33c682['length'];++_0x8cea1f){const _0x3a6c7c=_0x33c682[_0x8cea1f],_0x3b67dd=_0x3a52d2[_0x8cea1f],_0x5c858a=_0x47760[_0x8cea1f],_0x1b6b5b=(ls[_0x1c2de4['axis']]-_0x3a6c7c[_0x1c2de4['size']])*_0x2eb20d+_0x5c742c,_0x86bf2=(ls[_0x54d23['axis']]-_0x33c682[_0x54d23['size']])*_0x3ea0cd+_0x378e84;for(let _0x56ce4d=0x1ad1+0x2347*-0x1+0x26*0x39;_0x56ce4d<_0x3a6c7c['length'];++_0x56ce4d){const _0x582a2f=(_0x3a6c7c[_0x54d23['size']]-_0x3b67dd[_0x56ce4d][_0x54d23['size']])*_0x11b42f['alignment'][_0x54d23['axis']];_0x5c858a[_0x56ce4d][_0x1c2de4['axis']]+=_0x1b6b5b,_0x5c858a[_0x56ce4d][_0x54d23['axis']]+=_0x86bf2+_0x582a2f;}}}function _0x4c81c2(_0x2edce0,_0x242c18,_0x558cb3){for(let _0xd439d=-0x12*-0x63+0x2415+-0x3*0xe59;_0xd439d<_0x2edce0['length'];++_0xd439d){const _0x537529=_0x2edce0[_0xd439d],_0x1516f0=_0x242c18[_0xd439d],_0x150c2f=_0x558cb3[_0xd439d];for(let _0x59bd3b=-0x21e2+0xc5*0x1b+0xd1b;_0x59bd3b<_0x537529['length'];++_0x59bd3b){const _0x554230=_0x537529[_0x59bd3b];_0x554230[_0x1c2de4['calculated'+'Size']]=_0x1516f0[_0x59bd3b][_0x1c2de4['size']],_0x554230[_0x54d23['calculated'+'Size']]=_0x1516f0[_0x59bd3b][_0x54d23['size']],_0x11b42f['orientatio'+'n']===Ce?_0x554230['entity']['setLocalPo'+'sition'](_0x150c2f[_0x59bd3b][_0x1c2de4['axis']],_0x150c2f[_0x59bd3b][_0x54d23['axis']],_0x554230['entity']['getLocalPo'+'sition']()['z']):_0x554230['entity']['setLocalPo'+'sition'](_0x150c2f[_0x59bd3b][_0x54d23['axis']],_0x150c2f[_0x59bd3b][_0x1c2de4['axis']],_0x554230['entity']['getLocalPo'+'sition']()['z']);}}}function _0x54ef22(_0x5b54ad){const _0x176049=_0x5b54ad['width'],_0x43919f=_0x5b54ad['height'],_0x49bdf2=(ls['x']-_0x176049)*_0x11b42f['alignment']['x']+_0x11b42f['padding']['x'],_0x47f639=(ls['y']-_0x43919f)*_0x11b42f['alignment']['y']+_0x11b42f['padding']['y'];return{'bounds':new re(_0x49bdf2,_0x47f639,_0x176049,_0x43919f)};}function _0x1f5640(_0x45163b){const _0x583e92=[];for(let _0x1593b5=-0x6d*-0x13+-0xcd0+0x193*0x3;_0x1593b5<_0x45163b['length'];++_0x1593b5){const _0x2d54ac=_0x45163b[_0x1593b5],_0xe9d8e=Math['max'](_0x125435(_0x2d54ac,'minWidth'),-0x1*0x1352+0x161*-0xd+0x253f),_0x2debf1=Math['max'](_0x125435(_0x2d54ac,'minHeight'),-0x24d3+-0x17de+0x3cb1),_0x108258=Math['max'](_0x125435(_0x2d54ac,'maxWidth'),_0xe9d8e),_0x187d83=Math['max'](_0x125435(_0x2d54ac,'maxHeight'),_0x2debf1),_0x32be8f=_0x369274(_0x125435(_0x2d54ac,'width'),_0xe9d8e,_0x108258),_0x10f7e6=_0x369274(_0x125435(_0x2d54ac,'height'),_0x2debf1,_0x187d83),_0x1c40a3=_0x125435(_0x2d54ac,'fitWidthPr'+'oportion'),_0xc7d861=_0x125435(_0x2d54ac,'fitHeightP'+'roportion');_0x583e92['push']({'minWidth':_0xe9d8e,'minHeight':_0x2debf1,'maxWidth':_0x108258,'maxHeight':_0x187d83,'width':_0x32be8f,'height':_0x10f7e6,'fitWidthProportion':_0x1c40a3,'fitHeightProportion':_0xc7d861});}return _0x583e92;}function _0x125435(_0x517b32,_0x3cef19){const _0x1aa87c=_0x517b32['entity']['layoutchil'+'d'];return _0x1aa87c&&_0x1aa87c['enabled']&&_0x1aa87c[_0x3cef19]!==void(0x1*0x1834+-0x13e8+-0x32*0x16)&&_0x1aa87c[_0x3cef19]!==null?_0x1aa87c[_0x3cef19]:_0x517b32[_0x3cef19]!==void(-0x164*-0xd+0x181f+0xd*-0x33f)?_0x517b32[_0x3cef19]:VR[_0x3cef19];}function _0x369274(_0x4a7df0,_0x588d38,_0x3c16e8){return Math['min'](Math['max'](_0x4a7df0,_0x588d38),_0x3c16e8);}function _0x2b10e3(_0x5107a9,_0x4a75f4){return _0x5107a9['reduce']((_0xd8be75,_0x31394c)=>_0xd8be75+_0x31394c[_0x4a75f4],0x20eb+0x18fc+-0x39e7);}function _0x3768d3(_0x48a440,_0x334c79){const _0x5332b4=_0x2b10e3(_0x48a440,_0x334c79),_0x12d35b=[],_0x33cd5a=_0x48a440['length'];if(_0x5332b4===-0x18d9*0x1+-0x1*-0x2707+-0xe2e){for(let _0x41f80b=-0x2709+0x1ddb+0x92e;_0x41f80b<_0x33cd5a;++_0x41f80b)_0x12d35b['push']((0x26dc+0x246*0x3+-0x2dad)/_0x33cd5a);}else{for(let _0x2903ba=0x9*-0x22a+-0x1640+0x29ba;_0x2903ba<_0x33cd5a;++_0x2903ba)_0x12d35b['push'](_0x48a440[_0x2903ba][_0x334c79]/_0x5332b4);}return _0x12d35b;}function _0x3bbe8e(_0x3fe35b){if(_0x3fe35b['length']===-0x1236+-0x10*-0xf1+0x327)return[0x206b*-0x1+0x1bc7+0x1*0x4a5];const _0x13202f=[],_0x11b8bd=_0x3fe35b['length'];for(let _0x363d39=0x24aa*0x1+0x1241*0x1+-0x36eb;_0x363d39<_0x11b8bd;++_0x363d39)_0x13202f['push']((0x27*0x49+0x15df+-0x1*0x20fd-_0x3fe35b[_0x363d39])/(_0x11b8bd-(0x1f*-0x2b+-0xbc3+0x10f9)));return _0x13202f;}function _0x274f61(_0x47381f,_0x4469a7,_0x40620a){return _0x47381f['forEach'](_0x5045c6),_0x47381f['slice']()['sort']((_0x7612b8,_0x1c996b)=>_0x40620a?_0x1c996b[_0x4469a7]-_0x7612b8[_0x4469a7]:_0x7612b8[_0x4469a7]-_0x1c996b[_0x4469a7])['map'](_0x488ea1);}function _0x5045c6(_0x2f4f00,_0x150fbb){_0x2f4f00['index']=_0x150fbb;}function _0x488ea1(_0x5ce0da){return _0x5ce0da['index'];}function _0x99d5a5(_0x1c6f3f,_0xf46a47){const _0x32649d=[];_0x32649d[_0xf46a47[_0x1c6f3f['length']-(-0x249e+-0x918+0xf9*0x2f)]]=_0x1c6f3f[_0xf46a47[_0x1c6f3f['length']-(0x2*0xe5c+-0x1*-0x23a7+-0x405e)]];for(let _0x1d5639=_0x1c6f3f['length']-(0x1414+0x1*-0x234a+0xf38);_0x1d5639>=0x19+-0x12f6+0x12dd*0x1;--_0x1d5639)_0x32649d[_0xf46a47[_0x1d5639]]=_0x32649d[_0xf46a47[_0x1d5639+(-0x34f*-0xb+0x2387+-0x47eb)]]+_0x1c6f3f[_0xf46a47[_0x1d5639]];return _0x32649d;}return _0xc9be75;}const xm={};xm[Ce]=t0(Ce),xm[je]=t0(je);class GR{['calculateL'+'ayout'](_0x4b62c1,_0x402afd){const _0x2db2c6=xm[_0x402afd['orientatio'+'n']];if(_0x2db2c6)return _0x2db2c6(_0x4b62c1,_0x402afd);throw new Error('Unrecogniz'+'ed\x20orienta'+'tion\x20value'+':\x20'+_0x402afd['orientatio'+'n']);}}function Jg(_0x483643){return _0x483643['element'];}function HR(_0x240a34){return _0x240a34['enabled']&&_0x240a34['element']&&_0x240a34['element']['enabled'];}class s0 extends we{constructor(_0x27174c,_0x221722){super(_0x27174c,_0x221722),h(this,'_orientati'+'on',Ce),h(this,'_reverseX',!(0xabd+0x755+0x25*-0x7d)),h(this,'_reverseY',!(-0x2*0x126a+0x9e*-0x3e+0x59*0xd8)),h(this,'_alignment',new J(0x1a8c+0xe3a+0x266*-0x11,-0x3e1+-0x101f*0x1+0x239*0x9)),h(this,'_padding',new re()),h(this,'_spacing',new J()),h(this,'_widthFitt'+'ing',Nu),h(this,'_heightFit'+'ting',Nu),h(this,'_wrap',!(-0x1ad1+0x1b0b+-0x39)),h(this,'_layoutCal'+'culator',new GR()),(this['_listenFor'+'ReflowEven'+'ts'](this['entity'],'on'),this['entity']['children']['forEach'](_0x275925=>{this['_listenFor'+'ReflowEven'+'ts'](_0x275925,'on');}),this['entity']['on']('childinser'+'t',this['_onChildIn'+'sert'],this),this['entity']['on']('childremov'+'e',this['_onChildRe'+'move'],this),w['assert'](_0x27174c['app']['systems']['element'],'System\x20\x27el'+'ement\x27\x20doe'+'sn\x27t\x20exist'),_0x27174c['app']['systems']['element']['on']('add',this['_onElement'+'OrLayoutCo'+'mponentAdd'],this),_0x27174c['app']['systems']['element']['on']('beforeremo'+'ve',this['_onElement'+'OrLayoutCo'+'mponentRem'+'ove'],this),w['assert'](_0x27174c['app']['systems']['layoutchil'+'d'],'System\x20\x27la'+'youtchild\x27'+'\x20doesn\x27t\x20e'+'xist'),_0x27174c['app']['systems']['layoutchil'+'d']['on']('add',this['_onElement'+'OrLayoutCo'+'mponentAdd'],this),_0x27174c['app']['systems']['layoutchil'+'d']['on']('beforeremo'+'ve',this['_onElement'+'OrLayoutCo'+'mponentRem'+'ove'],this));}set['orientatio'+'n'](_0x1b1075){_0x1b1075!==this['_orientati'+'on']&&(this['_orientati'+'on']=_0x1b1075,this['_scheduleR'+'eflow']());}get['orientatio'+'n'](){return this['_orientati'+'on'];}set['reverseX'](_0x545f71){_0x545f71!==this['_reverseX']&&(this['_reverseX']=_0x545f71,this['_scheduleR'+'eflow']());}get['reverseX'](){return this['_reverseX'];}set['reverseY'](_0x4d4f50){_0x4d4f50!==this['_reverseY']&&(this['_reverseY']=_0x4d4f50,this['_scheduleR'+'eflow']());}get['reverseY'](){return this['_reverseY'];}set['alignment'](_0x5393c6){_0x5393c6['equals'](this['_alignment'])||(this['_alignment']['copy'](_0x5393c6),this['_scheduleR'+'eflow']());}get['alignment'](){return this['_alignment'];}set['padding'](_0x4ca385){_0x4ca385['equals'](this['_padding'])||(this['_padding']['copy'](_0x4ca385),this['_scheduleR'+'eflow']());}get['padding'](){return this['_padding'];}set['spacing'](_0x4db6af){_0x4db6af['equals'](this['_spacing'])||(this['_spacing']['copy'](_0x4db6af),this['_scheduleR'+'eflow']());}get['spacing'](){return this['_spacing'];}set['widthFitti'+'ng'](_0x4514cf){_0x4514cf!==this['_widthFitt'+'ing']&&(this['_widthFitt'+'ing']=_0x4514cf,this['_scheduleR'+'eflow']());}get['widthFitti'+'ng'](){return this['_widthFitt'+'ing'];}set['heightFitt'+'ing'](_0x139f65){_0x139f65!==this['_heightFit'+'ting']&&(this['_heightFit'+'ting']=_0x139f65,this['_scheduleR'+'eflow']());}get['heightFitt'+'ing'](){return this['_heightFit'+'ting'];}set['wrap'](_0x38792a){_0x38792a!==this['_wrap']&&(this['_wrap']=_0x38792a,this['_scheduleR'+'eflow']());}get['wrap'](){return this['_wrap'];}['_isSelfOrC'+'hild'](_0x54f4c7){return _0x54f4c7===this['entity']||this['entity']['children']['indexOf'](_0x54f4c7)!==-(-0x5a*0x29+-0x135*0x1+0x8*0x1f4);}['_listenFor'+'ReflowEven'+'ts'](_0x578037,_0x3b8ce7){_0x578037['element']&&(_0x578037['element'][_0x3b8ce7]('enableelem'+'ent',this['_scheduleR'+'eflow'],this),_0x578037['element'][_0x3b8ce7]('disableele'+'ment',this['_scheduleR'+'eflow'],this),_0x578037['element'][_0x3b8ce7]('resize',this['_scheduleR'+'eflow'],this),_0x578037['element'][_0x3b8ce7]('set:pivot',this['_scheduleR'+'eflow'],this)),_0x578037['layoutchil'+'d']&&(_0x578037['layoutchil'+'d'][_0x3b8ce7]('set_enable'+'d',this['_scheduleR'+'eflow'],this),_0x578037['layoutchil'+'d'][_0x3b8ce7]('resize',this['_scheduleR'+'eflow'],this));}['_onElement'+'OrLayoutCo'+'mponentAdd'](_0x297ca3){this['_isSelfOrC'+'hild'](_0x297ca3)&&(this['_listenFor'+'ReflowEven'+'ts'](_0x297ca3,'on'),this['_scheduleR'+'eflow']());}['_onElement'+'OrLayoutCo'+'mponentRem'+'ove'](_0x210052){this['_isSelfOrC'+'hild'](_0x210052)&&(this['_listenFor'+'ReflowEven'+'ts'](_0x210052,'off'),this['_scheduleR'+'eflow']());}['_onChildIn'+'sert'](_0x4c80bc){this['_listenFor'+'ReflowEven'+'ts'](_0x4c80bc,'on'),this['_scheduleR'+'eflow']();}['_onChildRe'+'move'](_0x309749){this['_listenFor'+'ReflowEven'+'ts'](_0x309749,'off'),this['_scheduleR'+'eflow']();}['_scheduleR'+'eflow'](){this['enabled']&&this['entity']&&this['entity']['enabled']&&!this['_isPerform'+'ingReflow']&&this['system']['scheduleRe'+'flow'](this);}['reflow'](){const _0x37adb5=Jg(this['entity']),_0xc9f346=this['entity']['children']['filter'](HR)['map'](Jg);if(!_0x37adb5||_0xc9f346['length']===0x78d*0x1+-0xbef+0x462)return;const _0x203513=Math['max'](_0x37adb5['calculated'+'Width'],0x16a+-0x15c5+-0x1b*-0xc1),_0x4dbceb=Math['max'](_0x37adb5['calculated'+'Height'],0xbf8+0x2*-0x7b3+-0x1*-0x36e),_0x235c74={'orientation':this['_orientati'+'on'],'reverseX':this['_reverseX'],'reverseY':this['_reverseY'],'alignment':this['_alignment'],'padding':this['_padding'],'spacing':this['_spacing'],'widthFitting':this['_widthFitt'+'ing'],'heightFitting':this['_heightFit'+'ting'],'wrap':this['_wrap'],'containerSize':new J(_0x203513,_0x4dbceb)};this['_isPerform'+'ingReflow']=!(-0x7*-0x21d+0x6d3*-0x1+0x11*-0x78);const _0x2904b5=this['_layoutCal'+'culator']['calculateL'+'ayout'](_0xc9f346,_0x235c74);this['_isPerform'+'ingReflow']=!(0x20a5+0x1*0x1733+-0xb2b*0x5),this['fire']('reflow',_0x2904b5);}['onEnable'](){this['_scheduleR'+'eflow']();}['onRemove'](){this['entity']['off']('childinser'+'t',this['_onChildIn'+'sert'],this),this['entity']['off']('childremov'+'e',this['_onChildRe'+'move'],this),this['_listenFor'+'ReflowEven'+'ts'](this['entity'],'off'),this['entity']['children']['forEach'](_0x2cfa7b=>{this['_listenFor'+'ReflowEven'+'ts'](_0x2cfa7b,'off');}),this['system']['app']['systems']['element']['off']('add',this['_onElement'+'OrLayoutCo'+'mponentAdd'],this),this['system']['app']['systems']['element']['off']('beforeremo'+'ve',this['_onElement'+'OrLayoutCo'+'mponentRem'+'ove'],this),this['system']['app']['systems']['layoutchil'+'d']['off']('add',this['_onElement'+'OrLayoutCo'+'mponentAdd'],this),this['system']['app']['systems']['layoutchil'+'d']['off']('beforeremo'+'ve',this['_onElement'+'OrLayoutCo'+'mponentRem'+'ove'],this);}}class WR{constructor(){this['enabled']=!(-0x735+-0x33*-0x52+-0x921);}}const i0=['enabled'],$R=-0x1c25+0xe11*0x2+0x67*0x1;class XR extends ct{constructor(_0x318ae1){super(_0x318ae1),this['id']='layoutgrou'+'p',this['ComponentT'+'ype']=s0,this['DataType']=WR,this['schema']=i0,this['_reflowQue'+'ue']=[],this['on']('beforeremo'+'ve',this['_onRemoveC'+'omponent'],this),this['app']['systems']['on']('postUpdate',this['_onPostUpd'+'ate'],this);}['initialize'+'ComponentD'+'ata'](_0x4b13b8,_0x46bf94,_0x46be61){_0x46bf94['enabled']!==void(0x1d41+-0x1088+-0xcb9)&&(_0x4b13b8['enabled']=_0x46bf94['enabled']),_0x46bf94['orientatio'+'n']!==void(0x1ec3+-0x2522+0x65f)&&(_0x4b13b8['orientatio'+'n']=_0x46bf94['orientatio'+'n']),_0x46bf94['reverseX']!==void(0x1*0x2503+0x213c+-0x463f)&&(_0x4b13b8['reverseX']=_0x46bf94['reverseX']),_0x46bf94['reverseY']!==void(0x1d53*0x1+0x430*-0x6+0x5*-0xd7)&&(_0x4b13b8['reverseY']=_0x46bf94['reverseY']),_0x46bf94['alignment']!==void(-0x14a8+-0x5*0x524+0x1*0x2e5c)&&(_0x4b13b8['alignment']=Array['isArray'](_0x46bf94['alignment'])?new J(_0x46bf94['alignment']):_0x46bf94['alignment']),_0x46bf94['padding']!==void(0xeda+0x1411+-0x1*0x22eb)&&(_0x4b13b8['padding']=Array['isArray'](_0x46bf94['padding'])?new re(_0x46bf94['padding']):_0x46bf94['padding']),_0x46bf94['spacing']!==void(0x94c+0x1*0xfb5+0xad*-0x25)&&(_0x4b13b8['spacing']=Array['isArray'](_0x46bf94['spacing'])?new J(_0x46bf94['spacing']):_0x46bf94['spacing']),_0x46bf94['widthFitti'+'ng']!==void(0x1c28+-0x892+0x9cb*-0x2)&&(_0x4b13b8['widthFitti'+'ng']=_0x46bf94['widthFitti'+'ng']),_0x46bf94['heightFitt'+'ing']!==void(0x5*0x5fd+0x635*-0x1+-0xbde*0x2)&&(_0x4b13b8['heightFitt'+'ing']=_0x46bf94['heightFitt'+'ing']),_0x46bf94['wrap']!==void(-0x859+-0x1da0+0x25f9)&&(_0x4b13b8['wrap']=_0x46bf94['wrap']),super['initialize'+'ComponentD'+'ata'](_0x4b13b8,_0x46bf94,_0x46be61);}['cloneCompo'+'nent'](_0x41172b,_0x55f65d){const _0x2581f0=_0x41172b['layoutgrou'+'p'];return this['addCompone'+'nt'](_0x55f65d,{'enabled':_0x2581f0['enabled'],'orientation':_0x2581f0['orientatio'+'n'],'reverseX':_0x2581f0['reverseX'],'reverseY':_0x2581f0['reverseY'],'alignment':_0x2581f0['alignment'],'padding':_0x2581f0['padding'],'spacing':_0x2581f0['spacing'],'widthFitting':_0x2581f0['widthFitti'+'ng'],'heightFitting':_0x2581f0['heightFitt'+'ing'],'wrap':_0x2581f0['wrap']});}['scheduleRe'+'flow'](_0x3a83be){this['_reflowQue'+'ue']['indexOf'](_0x3a83be)===-(0xbf1+-0xf13+0x323)&&this['_reflowQue'+'ue']['push'](_0x3a83be);}['_onPostUpd'+'ate'](){this['_processRe'+'flowQueue']();}['_processRe'+'flowQueue'](){if(this['_reflowQue'+'ue']['length']===-0x1391*-0x1+0x38a+-0x171b)return;let _0x478b83=0x79e+0x214e+-0x28ec;for(;this['_reflowQue'+'ue']['length']>-0x16db*0x1+-0x1*-0x1795+-0xba;){const _0x1121f5=this['_reflowQue'+'ue']['slice']();this['_reflowQue'+'ue']['length']=0x2161+-0x17fe*0x1+-0x963,_0x1121f5['sort']((_0x366666,_0x2c7459)=>_0x366666['entity']['graphDepth']-_0x2c7459['entity']['graphDepth']);for(let _0x5b926c=0x149*-0xe+0xadb*0x1+0x723;_0x5b926c<_0x1121f5['length'];++_0x5b926c)_0x1121f5[_0x5b926c]['reflow']();if(++_0x478b83>=$R){console['warn']('Max\x20reflow'+'\x20iteration'+'s\x20limit\x20re'+'ached,\x20bai'+'ling.');break;}}}['_onRemoveC'+'omponent'](_0x3e1c1c,_0x183a8b){_0x183a8b['onRemove']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('postUpdate',this['_onPostUpd'+'ate'],this);}}we['_buildAcce'+'ssors'](s0['prototype'],i0);class qR{constructor(){h(this,'map',new Map());}['destroy'](_0x2691ba){this['map']['forEach'](_0x5988c7=>_0x5988c7['mesh']['destroy']());}}const jR=new Kt(),r0=(_0x4e398e,_0xd2022a)=>{const _0x29624c=jR['get'](_0x4e398e,()=>new qR());let _0x115265=_0x29624c['map']['get'](_0xd2022a);if(!_0x115265){let _0x283063,_0x16e202;switch(_0xd2022a){case'box':_0x283063=Ge['fromGeomet'+'ry'](_0x4e398e,new mu()),_0x16e202={'x':0x2,'y':0x2,'z':0x2,'uv':(0x1e29+-0x1df9+-0x2e)/(0x9bd+-0xabb*0x1+-0x1*-0x101)};break;case'capsule':_0x283063=Ge['fromGeomet'+'ry'](_0x4e398e,new GA({'radius':0.5,'height':0x2})),_0x16e202={'x':Math['PI']*(0x9d5+-0xc41*-0x1+-0x9*0x274),'y':Math['PI'],'z':Math['PI']*(-0x1963+0xf*-0x112+-0x189*-0x1b),'uv':(0x2455+-0x13c9+-0x108b)/(-0x845+-0x6*-0x521+-0x167e)+(-0x1978+0x1bb2+-0x239)/(-0x225e+-0x1*-0x2cf+0x1f92)/(0xeec+-0x1d8b+0xea2)*(-0xc31+-0x2f*-0x9e+0x1*-0x10cf)};break;case'cone':_0x283063=Ge['fromGeomet'+'ry'](_0x4e398e,new HA({'baseRadius':0.5,'peakRadius':0x0,'height':0x1})),_0x16e202={'x':2.54,'y':2.54,'z':2.54,'uv':(0x219c+-0x2*-0x547+-0x7*0x64f)/(0x1c5d*-0x1+-0x7*0x36c+0x3454)+(0x27d+-0xdd*0x28+0x1c*0x125)/(-0x56*0x71+-0xdab+0x33a4)/(-0x1b09+0x9*0x40b+-0x3*0x31d)};break;case'cylinder':_0x283063=Ge['fromGeomet'+'ry'](_0x4e398e,new WA({'radius':0.5,'height':0x1})),_0x16e202={'x':Math['PI'],'y':(0x1*-0x126b+-0x1*0x135+0x13a0+0.79)*(-0xfcf+-0x1*-0x1f1b+0xce*-0x13),'z':Math['PI'],'uv':(-0x3*-0x17f+-0x586+0x10a)/(-0x1b23+0x768*0x4+-0x27a)+(-0x3aa+0x1*0xb99+0x122*-0x7)/(0x17ea+0x18c1+-0x30a8)/(-0x89d*0x3+-0x1fd*0x5+-0xb*-0x341)*(0x1063+-0x137c+0x31b)};break;case'plane':_0x283063=Ge['fromGeomet'+'ry'](_0x4e398e,new $A({'halfExtents':new J(-0x10*0x242+-0x97*-0x21+0x10a9+0.5,0xbad+-0x1fb2+0x1405+0.5),'widthSegments':0x1,'lengthSegments':0x1})),_0x16e202={'x':0x0,'y':0x1,'z':0x0,'uv':0x1};break;case'sphere':_0x283063=Ge['fromGeomet'+'ry'](_0x4e398e,new _m({'radius':0.5})),_0x16e202={'x':Math['PI'],'y':Math['PI'],'z':Math['PI'],'uv':0x1};break;case'torus':_0x283063=Ge['fromGeomet'+'ry'](_0x4e398e,new XA({'tubeRadius':0.2,'ringRadius':0.3})),_0x16e202={'x':Math['PI']*(0x1*-0x26d5+-0x12dc+0x39b1+0.5)*(0x1112+-0x2275+0x1163*0x1+0.5)-Math['PI']*(-0x15a9+-0x151*0xe+0x3a5*0xb+0.1)*(0xf0d+-0xfc3+0xb6+0.1),'y':0.4,'z':0.4,'uv':0x1};break;default:throw new Error('Invalid\x20pr'+'imitive\x20ty'+'pe:\x20'+_0xd2022a);}_0x283063['incRefCoun'+'t'](),_0x115265={'mesh':_0x283063,'area':_0x16e202},_0x29624c['map']['set'](_0xd2022a,_0x115265);}return _0x115265;};class Tm extends we{constructor(_0x19b363,_0x487db0){super(_0x19b363,_0x487db0),h(this,'_type','asset'),h(this,'_asset',null),h(this,'_model',null),h(this,'_mapping',{}),h(this,'_castShado'+'ws',!(-0x12fa+0x2*0x1021+-0xa*0x154)),h(this,'_receiveSh'+'adows',!(0x1*0x2019+-0x1*0xf37+-0x871*0x2)),h(this,'_materialA'+'sset',null),h(this,'_material'),h(this,'_castShado'+'wsLightmap',!(-0x15eb+0x25d2+-0xfe7)),h(this,'_lightmapp'+'ed',!(-0x259e+-0x4a*0x4+0x3*0xced)),h(this,'_lightmapS'+'izeMultipl'+'ier',-0x2697+-0x1cff+-0x1*-0x4397),h(this,'isStatic',!(0x7b*0x47+-0xd79*-0x1+-0x2f95)),h(this,'_layers',[er]),h(this,'_batchGrou'+'pId',-(0x43d*-0x3+-0x10*0x7a+0x1458)),h(this,'_customAab'+'b',null),h(this,'_area',null),h(this,'_materialE'+'vents',null),h(this,'_clonedMod'+'el',!(0x2*0x686+0x197b*0x1+-0x1*0x2686)),h(this,'_batchGrou'+'p',null),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),(this['_material']=_0x19b363['defaultMat'+'erial'],_0x487db0['on']('remove',this['onRemoveCh'+'ild'],this),_0x487db0['on']('removehier'+'archy',this['onRemoveCh'+'ild'],this),_0x487db0['on']('insert',this['onInsertCh'+'ild'],this),_0x487db0['on']('inserthier'+'archy',this['onInsertCh'+'ild'],this));}set['meshInstan'+'ces'](_0x1ab485){this['_model']&&(this['_model']['meshInstan'+'ces']=_0x1ab485);}get['meshInstan'+'ces'](){return this['_model']?this['_model']['meshInstan'+'ces']:null;}set['customAabb'](_0x331bdc){if(this['_customAab'+'b']=_0x331bdc,this['_model']){const _0x4eb1c8=this['_model']['meshInstan'+'ces'];if(_0x4eb1c8){for(let _0x5c99ae=0x16*0xb4+0x1*-0x628+-0x8*0x12a;_0x5c99ae<_0x4eb1c8['length'];_0x5c99ae++)_0x4eb1c8[_0x5c99ae]['setCustomA'+'abb'](this['_customAab'+'b']);}}}get['customAabb'](){return this['_customAab'+'b'];}set['type'](_0x16d98b){if(this['_type']!==_0x16d98b){if(this['_area']=null,this['_type']=_0x16d98b,_0x16d98b==='asset')this['_asset']!==null?this['_bindModel'+'Asset'](this['_asset']):this['model']=null;else{const _0xcb57b8=r0(this['system']['app']['graphicsDe'+'vice'],_0x16d98b);this['_area']=_0xcb57b8['area'];const _0x128ee5=_0xcb57b8['mesh'],_0x378f7c=new Ie(),_0x28d914=new sr();_0x28d914['graph']=_0x378f7c,_0x28d914['meshInstan'+'ces']=[new He(_0x128ee5,this['_material'],_0x378f7c)],this['model']=_0x28d914,this['_asset']=null;}}}get['type'](){return this['_type'];}set['asset'](_0x582c36){const _0x4f2819=this['system']['app']['assets'];let _0x4d3fc6=_0x582c36;if(_0x582c36 instanceof pe&&(_0x4d3fc6=_0x582c36['id']),this['_asset']!==_0x4d3fc6){if(this['_asset']){_0x4f2819['off']('add:'+this['_asset'],this['_onModelAs'+'setAdded'],this);const _0x4fa803=_0x4f2819['get'](this['_asset']);_0x4fa803&&this['_unbindMod'+'elAsset'](_0x4fa803);}if(this['_asset']=_0x4d3fc6,this['_asset']){const _0x1293dc=_0x4f2819['get'](this['_asset']);_0x1293dc?this['_bindModel'+'Asset'](_0x1293dc):(this['model']=null,_0x4f2819['on']('add:'+this['_asset'],this['_onModelAs'+'setAdded'],this));}else this['model']=null;}}get['asset'](){return this['_asset'];}set['model'](_0x436c03){if(this['_model']!==_0x436c03){if(_0x436c03&&_0x436c03['_immutable']){w['error']('Invalid\x20at'+'tempt\x20to\x20a'+'ssign\x20a\x20mo'+'del\x20to\x20mul'+'tiple\x20Mode'+'lComponent'+'s');return;}if(this['_model']&&(this['_model']['_immutable']=!(-0x86*-0x3b+0x887+-0x2768),this['removeMode'+'lFromLayer'+'s'](),this['_model']['getGraph']()['destroy'](),delete this['_model']['_entity'],this['_clonedMod'+'el']&&(this['_model']['destroy'](),this['_clonedMod'+'el']=!(-0x2572+0x47e*-0x5+0x7*0x88f))),this['_model']=_0x436c03,this['_model']){this['_model']['_immutable']=!(0x317+-0x1*-0x111a+-0x3*0x6bb);const _0x1fca5f=this['_model']['meshInstan'+'ces'];for(let _0x1da187=0x11e+0x1317+-0x1435;_0x1da187<_0x1fca5f['length'];_0x1da187++)_0x1fca5f[_0x1da187]['castShadow']=this['_castShado'+'ws'],_0x1fca5f[_0x1da187]['receiveSha'+'dow']=this['_receiveSh'+'adows'],_0x1fca5f[_0x1da187]['setCustomA'+'abb'](this['_customAab'+'b']);this['lightmappe'+'d']=this['_lightmapp'+'ed'],this['entity']['addChild'](this['_model']['graph']),this['enabled']&&this['entity']['enabled']&&this['addModelTo'+'Layers'](),this['_model']['_entity']=this['entity'],this['entity']['animation']&&this['entity']['animation']['setModel'](this['_model']),this['entity']['anim']&&this['entity']['anim']['rebind'](),this['type']==='asset'?this['mapping']=this['_mapping']:this['_unsetMate'+'rialEvents']();}}}get['model'](){return this['_model'];}set['lightmappe'+'d'](_0x364835){if(_0x364835!==this['_lightmapp'+'ed']&&(this['_lightmapp'+'ed']=_0x364835,this['_model'])){const _0x1a1567=this['_model']['meshInstan'+'ces'];for(let _0x499112=-0xb84*-0x3+0x2159+-0x43e5;_0x499112<_0x1a1567['length'];_0x499112++)_0x1a1567[_0x499112]['setLightma'+'pped'](_0x364835);}}get['lightmappe'+'d'](){return this['_lightmapp'+'ed'];}set['castShadow'+'s'](_0xb012d4){if(this['_castShado'+'ws']===_0xb012d4)return;const _0x56eb42=this['_model'];if(_0x56eb42){const _0x46ea14=this['layers'],_0x33a832=this['system']['app']['scene'];if(this['_castShado'+'ws']&&!_0xb012d4)for(let _0x180848=0x2059+-0x12d*-0x10+-0x3329;_0x180848<_0x46ea14['length'];_0x180848++){const _0x39463c=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x180848]);_0x39463c&&_0x39463c['removeShad'+'owCasters'](_0x56eb42['meshInstan'+'ces']);}const _0x30affc=_0x56eb42['meshInstan'+'ces'];for(let _0x5160cc=-0xacd+-0x60*-0x35+-0x913;_0x5160cc<_0x30affc['length'];_0x5160cc++)_0x30affc[_0x5160cc]['castShadow']=_0xb012d4;if(!this['_castShado'+'ws']&&_0xb012d4)for(let _0x9f3abe=0x1c83+0xd*-0x181+-0x8f6;_0x9f3abe<_0x46ea14['length'];_0x9f3abe++){const _0x3047f5=_0x33a832['layers']['getLayerBy'+'Id'](_0x46ea14[_0x9f3abe]);_0x3047f5&&_0x3047f5['addShadowC'+'asters'](_0x56eb42['meshInstan'+'ces']);}}this['_castShado'+'ws']=_0xb012d4;}get['castShadow'+'s'](){return this['_castShado'+'ws'];}set['receiveSha'+'dows'](_0x5b936f){if(this['_receiveSh'+'adows']!==_0x5b936f&&(this['_receiveSh'+'adows']=_0x5b936f,this['_model'])){const _0x5610e0=this['_model']['meshInstan'+'ces'];for(let _0xf49494=-0x65b+0x1*0x1b29+-0x14ce,_0x29c7fa=_0x5610e0['length'];_0xf49494<_0x29c7fa;_0xf49494++)_0x5610e0[_0xf49494]['receiveSha'+'dow']=_0x5b936f;}}get['receiveSha'+'dows'](){return this['_receiveSh'+'adows'];}set['castShadow'+'sLightmap'](_0x449048){this['_castShado'+'wsLightmap']=_0x449048;}get['castShadow'+'sLightmap'](){return this['_castShado'+'wsLightmap'];}set['lightmapSi'+'zeMultipli'+'er'](_0x10198f){this['_lightmapS'+'izeMultipl'+'ier']=_0x10198f;}get['lightmapSi'+'zeMultipli'+'er'](){return this['_lightmapS'+'izeMultipl'+'ier'];}set['layers'](_0x56ccc3){const _0x139548=this['system']['app']['scene']['layers'];if(this['meshInstan'+'ces'])for(let _0x28587c=0x11e3+-0xbd*-0x19+-0x2458;_0x28587c<this['_layers']['length'];_0x28587c++){const _0x3e5ba8=_0x139548['getLayerBy'+'Id'](this['_layers'][_0x28587c]);_0x3e5ba8&&_0x3e5ba8['removeMesh'+'Instances'](this['meshInstan'+'ces']);}this['_layers']['length']=0x12f*0xa+0x1*-0x1c6b+0x1095;for(let _0x1366a3=-0xbfb*-0x3+-0x10d5*-0x1+-0x34c6;_0x1366a3<_0x56ccc3['length'];_0x1366a3++)this['_layers'][_0x1366a3]=_0x56ccc3[_0x1366a3];if(!(!this['enabled']||!this['entity']['enabled']||!this['meshInstan'+'ces']))for(let _0x23c5c9=0x167f+0x1019+-0x2698;_0x23c5c9<this['_layers']['length'];_0x23c5c9++){const _0xe4af38=_0x139548['getLayerBy'+'Id'](this['_layers'][_0x23c5c9]);_0xe4af38&&_0xe4af38['addMeshIns'+'tances'](this['meshInstan'+'ces']);}}get['layers'](){return this['_layers'];}set['batchGroup'+'Id'](_0x5d8f4f){var _0x3be683,_0xb71628;this['_batchGrou'+'pId']!==_0x5d8f4f&&(this['entity']['enabled']&&this['_batchGrou'+'pId']>=0x1f83+0x1fb3+-0x3f36&&((_0x3be683=this['system']['app']['batcher'])==null||_0x3be683['remove'](St['MODEL'],this['batchGroup'+'Id'],this['entity'])),this['entity']['enabled']&&_0x5d8f4f>=-0x13*0x86+-0x22*0x44+-0x15b*-0xe&&((_0xb71628=this['system']['app']['batcher'])==null||_0xb71628['insert'](St['MODEL'],_0x5d8f4f,this['entity'])),_0x5d8f4f<0x1a93+0x1f*0x139+0x6*-0xabf&&this['_batchGrou'+'pId']>=-0x2*0x60d+0x785+-0x3*-0x187&&this['enabled']&&this['entity']['enabled']&&this['addModelTo'+'Layers'](),this['_batchGrou'+'pId']=_0x5d8f4f);}get['batchGroup'+'Id'](){return this['_batchGrou'+'pId'];}set['materialAs'+'set'](_0x332c3b){let _0x5371f4=_0x332c3b;_0x332c3b instanceof pe&&(_0x5371f4=_0x332c3b['id']);const _0xe35fdf=this['system']['app']['assets'];if(_0x5371f4!==this['_materialA'+'sset']){if(this['_materialA'+'sset']){_0xe35fdf['off']('add:'+this['_materialA'+'sset'],this['_onMateria'+'lAssetAdd'],this);const _0x10b606=_0xe35fdf['get'](this['_materialA'+'sset']);_0x10b606&&this['_unbindMat'+'erialAsset'](_0x10b606);}if(this['_materialA'+'sset']=_0x5371f4,this['_materialA'+'sset']){const _0x4adbf0=_0xe35fdf['get'](this['_materialA'+'sset']);_0x4adbf0?this['_bindMater'+'ialAsset'](_0x4adbf0):(this['_setMateri'+'al'](this['system']['defaultMat'+'erial']),_0xe35fdf['on']('add:'+this['_materialA'+'sset'],this['_onMateria'+'lAssetAdd'],this));}else this['_setMateri'+'al'](this['system']['defaultMat'+'erial']);}}get['materialAs'+'set'](){return this['_materialA'+'sset'];}set['material'](_0x1569e3){this['_material']!==_0x1569e3&&(this['materialAs'+'set']=null,this['_setMateri'+'al'](_0x1569e3));}get['material'](){return this['_material'];}set['mapping'](_0x147afd){if(this['_type']!=='asset'||(this['_unsetMate'+'rialEvents'](),_0x147afd||(_0x147afd={}),this['_mapping']=_0x147afd,!this['_model']))return;const _0x4b3727=this['_model']['meshInstan'+'ces'],_0x58f01f=this['asset']?this['system']['app']['assets']['get'](this['asset']):null,_0x3124d6=_0x58f01f?_0x58f01f['data']['mapping']:null;let _0x5b9188=null;for(let _0x574d16=0x19da+0xcd9+-0x26b3,_0xc4bca3=_0x4b3727['length'];_0x574d16<_0xc4bca3;_0x574d16++)if(_0x147afd[_0x574d16]!==void(0x26f7+-0x4f4+0x2203*-0x1))_0x147afd[_0x574d16]?(_0x5b9188=this['system']['app']['assets']['get'](_0x147afd[_0x574d16]),this['_loadAndSe'+'tMeshInsta'+'nceMateria'+'l'](_0x5b9188,_0x4b3727[_0x574d16],_0x574d16)):_0x4b3727[_0x574d16]['material']=this['system']['defaultMat'+'erial'];else{if(_0x3124d6){if(_0x3124d6[_0x574d16]&&(_0x3124d6[_0x574d16]['material']||_0x3124d6[_0x574d16]['path'])){if(_0x3124d6[_0x574d16]['material']!==void(0x1e29+0x1b37+-0x3960))_0x5b9188=this['system']['app']['assets']['get'](_0x3124d6[_0x574d16]['material']);else{if(_0x3124d6[_0x574d16]['path']!==void(-0x51d+-0x2*-0xbd1+0x1*-0x1285)){const _0x2f19de=this['_getMateri'+'alAssetUrl'](_0x3124d6[_0x574d16]['path']);_0x2f19de&&(_0x5b9188=this['system']['app']['assets']['getByUrl'](_0x2f19de));}}this['_loadAndSe'+'tMeshInsta'+'nceMateria'+'l'](_0x5b9188,_0x4b3727[_0x574d16],_0x574d16);}else _0x4b3727[_0x574d16]['material']=this['system']['defaultMat'+'erial'];}}}get['mapping'](){return this['_mapping'];}['addModelTo'+'Layers'](){const _0x1804c6=this['system']['app']['scene']['layers'];for(let _0x3ba873=0x1d4c+0x265e+-0x43aa;_0x3ba873<this['_layers']['length'];_0x3ba873++){const _0x3969d5=_0x1804c6['getLayerBy'+'Id'](this['_layers'][_0x3ba873]);_0x3969d5&&_0x3969d5['addMeshIns'+'tances'](this['meshInstan'+'ces']);}}['removeMode'+'lFromLayer'+'s'](){const _0x104f8b=this['system']['app']['scene']['layers'];for(let _0x3b97de=-0x8d2+0x2*0x1114+-0x1956;_0x3b97de<this['_layers']['length'];_0x3b97de++){const _0x157907=_0x104f8b['getLayerBy'+'Id'](this['_layers'][_0x3b97de]);_0x157907&&_0x157907['removeMesh'+'Instances'](this['meshInstan'+'ces']);}}['onRemoveCh'+'ild'](){this['_model']&&this['removeMode'+'lFromLayer'+'s']();}['onInsertCh'+'ild'](){this['_model']&&this['enabled']&&this['entity']['enabled']&&this['addModelTo'+'Layers']();}['onRemove'](){this['asset']=null,this['model']=null,this['materialAs'+'set']=null,this['_unsetMate'+'rialEvents'](),this['entity']['off']('remove',this['onRemoveCh'+'ild'],this),this['entity']['off']('insert',this['onInsertCh'+'ild'],this);}['onLayersCh'+'anged'](_0x4593c0,_0x472fbc){this['addModelTo'+'Layers'](),_0x4593c0['off']('add',this['onLayerAdd'+'ed'],this),_0x4593c0['off']('remove',this['onLayerRem'+'oved'],this),_0x472fbc['on']('add',this['onLayerAdd'+'ed'],this),_0x472fbc['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x5ae830){this['layers']['indexOf'](_0x5ae830['id'])<0x24f*0x9+-0x1607*-0x1+-0x1*0x2ace||_0x5ae830['addMeshIns'+'tances'](this['meshInstan'+'ces']);}['onLayerRem'+'oved'](_0x2b7dea){this['layers']['indexOf'](_0x2b7dea['id'])<-0x17*-0x15d+0x93d+-0x2898||_0x2b7dea['removeMesh'+'Instances'](this['meshInstan'+'ces']);}['_setMateri'+'alEvent'](_0x481647,_0x212e21,_0x1af87f,_0x96ca4c){const _0x26fd3f=_0x212e21+':'+_0x1af87f;this['system']['app']['assets']['on'](_0x26fd3f,_0x96ca4c,this),this['_materialE'+'vents']||(this['_materialE'+'vents']=[]),this['_materialE'+'vents'][_0x481647]||(this['_materialE'+'vents'][_0x481647]={}),this['_materialE'+'vents'][_0x481647][_0x26fd3f]={'id':_0x1af87f,'handler':_0x96ca4c};}['_unsetMate'+'rialEvents'](){const _0x5b8f78=this['system']['app']['assets'],_0x1e619=this['_materialE'+'vents'];if(_0x1e619){for(let _0x422404=-0x1*-0x1eab+-0x1056*0x1+-0x1*0xe55,_0x274b82=_0x1e619['length'];_0x422404<_0x274b82;_0x422404++){if(!_0x1e619[_0x422404])continue;const _0x344ea6=_0x1e619[_0x422404];for(const _0x24b46f in _0x344ea6)_0x5b8f78['off'](_0x24b46f,_0x344ea6[_0x24b46f]['handler'],this);}this['_materialE'+'vents']=null;}}['_getAssetB'+'yIdOrPath'](_0xb4c7c5){let _0x520702=null;if(!isNaN(parseInt(_0xb4c7c5,0x696+0xae3+0x1*-0x116f)))_0x520702=this['system']['app']['assets']['get'](_0xb4c7c5);else{if(this['asset']){const _0x2e0313=this['_getMateri'+'alAssetUrl'](_0xb4c7c5);_0x2e0313&&(_0x520702=this['system']['app']['assets']['getByUrl'](_0x2e0313));}}return _0x520702;}['_getMateri'+'alAssetUrl'](_0x282734){if(!this['asset'])return null;const _0x4da8f0=this['system']['app']['assets']['get'](this['asset']);return _0x4da8f0?_0x4da8f0['getAbsolut'+'eUrl'](_0x282734):null;}['_loadAndSe'+'tMeshInsta'+'nceMateria'+'l'](_0x501890,_0x2f74b6,_0x312b29){const _0x1f5d6b=this['system']['app']['assets'];_0x501890&&(_0x501890['resource']?(_0x2f74b6['material']=_0x501890['resource'],this['_setMateri'+'alEvent'](_0x312b29,'remove',_0x501890['id'],function(){_0x2f74b6['material']=this['system']['defaultMat'+'erial'];})):(this['_setMateri'+'alEvent'](_0x312b29,'load',_0x501890['id'],function(_0x20d419){_0x2f74b6['material']=_0x20d419['resource'],this['_setMateri'+'alEvent'](_0x312b29,'remove',_0x501890['id'],function(){_0x2f74b6['material']=this['system']['defaultMat'+'erial'];});}),this['enabled']&&this['entity']['enabled']&&_0x1f5d6b['load'](_0x501890)));}['onEnable'](){var _0x2b2460;const _0x5867af=this['system']['app'],_0x44491e=_0x5867af['scene'],_0x8ae4ad=_0x44491e==null?void(-0x20a1+-0x956+0x29f7):_0x44491e['layers'];this['_evtLayers'+'Changed']=_0x44491e['on']('set:layers',this['onLayersCh'+'anged'],this),_0x8ae4ad&&(this['_evtLayerA'+'dded']=_0x8ae4ad['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x8ae4ad['on']('remove',this['onLayerRem'+'oved'],this));const _0x448c90=this['_type']==='asset';let _0x21123e;if(this['_model']?this['addModelTo'+'Layers']():_0x448c90&&this['_asset']&&(_0x21123e=_0x5867af['assets']['get'](this['_asset']),_0x21123e&&_0x21123e['resource']!==this['_model']&&this['_bindModel'+'Asset'](_0x21123e)),this['_materialA'+'sset']&&(_0x21123e=_0x5867af['assets']['get'](this['_materialA'+'sset']),_0x21123e&&_0x21123e['resource']!==this['_material']&&this['_bindMater'+'ialAsset'](_0x21123e)),_0x448c90&&this['_mapping']){for(const _0x24b186 in this['_mapping'])this['_mapping'][_0x24b186]&&(_0x21123e=this['_getAssetB'+'yIdOrPath'](this['_mapping'][_0x24b186]),_0x21123e&&!_0x21123e['resource']&&_0x5867af['assets']['load'](_0x21123e));}this['_batchGrou'+'pId']>=0x1717+0xcc3*-0x3+-0x30a*-0x5&&((_0x2b2460=_0x5867af['batcher'])==null||_0x2b2460['insert'](St['MODEL'],this['batchGroup'+'Id'],this['entity']));}['onDisable'](){var _0x309e45,_0x21c2e3,_0x16c89d,_0xe15433;const _0x555c6d=this['system']['app'],_0x5a14e8=_0x555c6d['scene']['layers'];(_0x309e45=this['_evtLayers'+'Changed'])==null||_0x309e45['off'](),this['_evtLayers'+'Changed']=null,_0x5a14e8&&((_0x21c2e3=this['_evtLayerA'+'dded'])==null||_0x21c2e3['off'](),this['_evtLayerA'+'dded']=null,(_0x16c89d=this['_evtLayerR'+'emoved'])==null||_0x16c89d['off'](),this['_evtLayerR'+'emoved']=null),this['_batchGrou'+'pId']>=0x1*0x184d+-0x2*-0x2cf+-0x6f*0x45&&((_0xe15433=_0x555c6d['batcher'])==null||_0xe15433['remove'](St['MODEL'],this['batchGroup'+'Id'],this['entity'])),this['_model']&&this['removeMode'+'lFromLayer'+'s']();}['hide'](){if(this['_model']){const _0x2e7865=this['_model']['meshInstan'+'ces'];for(let _0xaa644a=-0x8ef+-0x2*0x1269+0x2dc1,_0x32c1ac=_0x2e7865['length'];_0xaa644a<_0x32c1ac;_0xaa644a++)_0x2e7865[_0xaa644a]['visible']=!(0x1942+0x8b7+0x8*-0x43f);}}['show'](){if(this['_model']){const _0x2bb550=this['_model']['meshInstan'+'ces'];for(let _0x45a4fd=0x26e8+0x59a+-0x4f2*0x9,_0x2f2ed4=_0x2bb550['length'];_0x45a4fd<_0x2f2ed4;_0x45a4fd++)_0x2bb550[_0x45a4fd]['visible']=!(0x7c7+-0x1221+0xa5a);}}['_bindMater'+'ialAsset'](_0x51834e){if(_0x51834e['on']('load',this['_onMateria'+'lAssetLoad'],this),_0x51834e['on']('unload',this['_onMateria'+'lAssetUnlo'+'ad'],this),_0x51834e['on']('remove',this['_onMateria'+'lAssetRemo'+'ve'],this),_0x51834e['on']('change',this['_onMateria'+'lAssetChan'+'ge'],this),_0x51834e['resource'])this['_onMateria'+'lAssetLoad'](_0x51834e);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x51834e);}}['_unbindMat'+'erialAsset'](_0x4bc918){_0x4bc918['off']('load',this['_onMateria'+'lAssetLoad'],this),_0x4bc918['off']('unload',this['_onMateria'+'lAssetUnlo'+'ad'],this),_0x4bc918['off']('remove',this['_onMateria'+'lAssetRemo'+'ve'],this),_0x4bc918['off']('change',this['_onMateria'+'lAssetChan'+'ge'],this);}['_onMateria'+'lAssetAdd'](_0x260457){this['system']['app']['assets']['off']('add:'+_0x260457['id'],this['_onMateria'+'lAssetAdd'],this),this['_materialA'+'sset']===_0x260457['id']&&this['_bindMater'+'ialAsset'](_0x260457);}['_onMateria'+'lAssetLoad'](_0x2bd9a7){this['_setMateri'+'al'](_0x2bd9a7['resource']);}['_onMateria'+'lAssetUnlo'+'ad'](_0x5c9fb2){this['_setMateri'+'al'](this['system']['defaultMat'+'erial']);}['_onMateria'+'lAssetRemo'+'ve'](_0x102722){this['_onMateria'+'lAssetUnlo'+'ad'](_0x102722);}['_onMateria'+'lAssetChan'+'ge'](_0x213c20){}['_bindModel'+'Asset'](_0x55426d){if(this['_unbindMod'+'elAsset'](_0x55426d),_0x55426d['on']('load',this['_onModelAs'+'setLoad'],this),_0x55426d['on']('unload',this['_onModelAs'+'setUnload'],this),_0x55426d['on']('change',this['_onModelAs'+'setChange'],this),_0x55426d['on']('remove',this['_onModelAs'+'setRemove'],this),_0x55426d['resource'])this['_onModelAs'+'setLoad'](_0x55426d);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x55426d);}}['_unbindMod'+'elAsset'](_0x4d0beb){_0x4d0beb['off']('load',this['_onModelAs'+'setLoad'],this),_0x4d0beb['off']('unload',this['_onModelAs'+'setUnload'],this),_0x4d0beb['off']('change',this['_onModelAs'+'setChange'],this),_0x4d0beb['off']('remove',this['_onModelAs'+'setRemove'],this);}['_onModelAs'+'setAdded'](_0x4ce07c){this['system']['app']['assets']['off']('add:'+_0x4ce07c['id'],this['_onModelAs'+'setAdded'],this),_0x4ce07c['id']===this['_asset']&&this['_bindModel'+'Asset'](_0x4ce07c);}['_onModelAs'+'setLoad'](_0x5c6064){this['model']=_0x5c6064['resource']['clone'](),this['_clonedMod'+'el']=!(-0x2*-0x683+-0xe9*0x5+0x9*-0xf1);}['_onModelAs'+'setUnload'](_0x49779e){this['model']=null;}['_onModelAs'+'setChange'](_0x52c39b,_0x353779,_0x1a5d64,_0xe6cf8b){_0x353779==='data'&&(this['mapping']=this['_mapping']);}['_onModelAs'+'setRemove'](_0x4350db){this['model']=null;}['_setMateri'+'al'](_0x224a93){if(this['_material']===_0x224a93)return;this['_material']=_0x224a93;const _0x17a185=this['_model'];if(_0x17a185&&this['_type']!=='asset'){const _0xa278ef=_0x17a185['meshInstan'+'ces'];for(let _0x275be2=0x376*0x1+-0x1db1+0x1a3b,_0x2364e3=_0xa278ef['length'];_0x275be2<_0x2364e3;_0x275be2++)_0xa278ef[_0x275be2]['material']=_0x224a93;}}}class YR{constructor(){this['enabled']=!(-0x248+-0x33d*-0x2+-0x432*0x1);}}const a0=['enabled'];class KR extends ct{constructor(_0x3f953d){super(_0x3f953d),this['id']='model',this['ComponentT'+'ype']=Tm,this['DataType']=YR,this['schema']=a0,this['defaultMat'+'erial']=Qn(_0x3f953d['graphicsDe'+'vice']),this['on']('beforeremo'+'ve',this['onRemove'],this);}['initialize'+'ComponentD'+'ata'](_0x1d9534,_0x25a20b,_0x303a1f){_0x303a1f=['material','materialAs'+'set','asset','castShadow'+'s','receiveSha'+'dows','castShadow'+'sLightmap','lightmappe'+'d','lightmapSi'+'zeMultipli'+'er','type','mapping','layers','isStatic','batchGroup'+'Id'],(_0x25a20b['batchGroup'+'Id']===null||_0x25a20b['batchGroup'+'Id']===void(-0x46*0x5+0x645*-0x3+0x142d))&&(_0x25a20b['batchGroup'+'Id']=-(-0x1296+0x25bb+0x1ea*-0xa)),_0x25a20b['layers']&&_0x25a20b['layers']['length']&&(_0x25a20b['layers']=_0x25a20b['layers']['slice'](0xd*-0x1b4+0x5f*-0x1+-0x1683*-0x1));for(let _0x4b5f89=-0x31b*0xa+0x2645*-0x1+0x4553;_0x4b5f89<_0x303a1f['length'];_0x4b5f89++)_0x25a20b['hasOwnProp'+'erty'](_0x303a1f[_0x4b5f89])&&(_0x1d9534[_0x303a1f[_0x4b5f89]]=_0x25a20b[_0x303a1f[_0x4b5f89]]);_0x25a20b['aabbCenter']&&_0x25a20b['aabbHalfEx'+'tents']&&(_0x1d9534['customAabb']=new De(new D(_0x25a20b['aabbCenter']),new D(_0x25a20b['aabbHalfEx'+'tents']))),super['initialize'+'ComponentD'+'ata'](_0x1d9534,_0x25a20b,['enabled']);}['cloneCompo'+'nent'](_0x579337,_0x317a55){const _0x2280cd={'type':_0x579337['model']['type'],'asset':_0x579337['model']['asset'],'castShadows':_0x579337['model']['castShadow'+'s'],'receiveShadows':_0x579337['model']['receiveSha'+'dows'],'castShadowsLightmap':_0x579337['model']['castShadow'+'sLightmap'],'lightmapped':_0x579337['model']['lightmappe'+'d'],'lightmapSizeMultiplier':_0x579337['model']['lightmapSi'+'zeMultipli'+'er'],'isStatic':_0x579337['model']['isStatic'],'enabled':_0x579337['model']['enabled'],'layers':_0x579337['model']['layers'],'batchGroupId':_0x579337['model']['batchGroup'+'Id'],'mapping':ah({},_0x579337['model']['mapping'])};let _0x1fea54=_0x579337['model']['materialAs'+'set'];!(_0x1fea54 instanceof pe)&&_0x1fea54!=null&&(_0x1fea54=this['app']['assets']['get'](_0x1fea54));const _0x55a343=_0x579337['model']['material'];(!_0x55a343||_0x55a343===this['defaultMat'+'erial']||!_0x1fea54||_0x55a343===_0x1fea54['resource'])&&(_0x2280cd['materialAs'+'set']=_0x1fea54);const _0x1c477f=this['addCompone'+'nt'](_0x317a55,_0x2280cd);if(_0x579337['model']['model']&&_0x579337['model']['type']==='asset'&&!_0x579337['model']['asset']&&(_0x1c477f['model']=_0x579337['model']['model']['clone'](),_0x1c477f['_clonedMod'+'el']=!(-0x1a07+-0xd7f*-0x1+0xc88)),_0x2280cd['materialAs'+'set']||(_0x1c477f['material']=_0x55a343),_0x579337['model']['model']){const _0x8a6457=_0x579337['model']['model']['meshInstan'+'ces'],_0xd39c80=_0x1c477f['model']['meshInstan'+'ces'];for(let _0x5dbc1b=-0x1716+0x2f*-0x51+0x25f5;_0x5dbc1b<_0x8a6457['length'];_0x5dbc1b++)_0xd39c80[_0x5dbc1b]['mask']=_0x8a6457[_0x5dbc1b]['mask'],_0xd39c80[_0x5dbc1b]['material']=_0x8a6457[_0x5dbc1b]['material'],_0xd39c80[_0x5dbc1b]['layer']=_0x8a6457[_0x5dbc1b]['layer'],_0xd39c80[_0x5dbc1b]['receiveSha'+'dow']=_0x8a6457[_0x5dbc1b]['receiveSha'+'dow'];}return _0x579337['model']['customAabb']&&(_0x1c477f['customAabb']=_0x579337['model']['customAabb']['clone']()),_0x1c477f;}['onRemove'](_0x384915,_0x43a75a){_0x43a75a['onRemove']();}}we['_buildAcce'+'ssors'](Tm['prototype'],a0);const ZR=['emitterExt'+'ents','emitterRad'+'ius','emitterExt'+'entsInner','emitterRad'+'iusInner','loop','initialVel'+'ocity','animSpeed','normalMap','particleNo'+'rmal'],QR=['numParticl'+'es','lifetime','rate','rate2','startAngle','startAngle'+'2','lighting','halfLamber'+'t','intensity','wrap','wrapBounds','depthWrite','noFog','sort','stretch','alignToMot'+'ion','preWarm','emitterSha'+'pe','animTilesX','animTilesY','animStartF'+'rame','animNumFra'+'mes','animNumAni'+'mations','animIndex','randomizeA'+'nimIndex','animLoop','colorMap','localSpace','screenSpac'+'e','orientatio'+'n'],JR=['scaleGraph','scaleGraph'+'2','colorGraph','colorGraph'+'2','alphaGraph','alphaGraph'+'2','velocityGr'+'aph','velocityGr'+'aph2','localVeloc'+'ityGraph','localVeloc'+'ityGraph2','rotationSp'+'eedGraph','rotationSp'+'eedGraph2','radialSpee'+'dGraph','radialSpee'+'dGraph2'],Cc=['colorMapAs'+'set','normalMapA'+'sset','meshAsset','renderAsse'+'t'];let Ya;class e3 extends we{constructor(_0x3861a1,_0x230bc2){super(_0x3861a1,_0x230bc2),h(this,'_requested'+'Depth',!(0x22e7+-0x23ec+0x83*0x2)),h(this,'_drawOrder',-0x23a5+0xe6d*0x1+0x2a7*0x8),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),h(this,'_evtSetMes'+'hes',null),(this['on']('set_colorM'+'apAsset',this['onSetColor'+'MapAsset'],this),this['on']('set_normal'+'MapAsset',this['onSetNorma'+'lMapAsset'],this),this['on']('set_meshAs'+'set',this['onSetMeshA'+'sset'],this),this['on']('set_mesh',this['onSetMesh'],this),this['on']('set_render'+'Asset',this['onSetRende'+'rAsset'],this),this['on']('set_loop',this['onSetLoop'],this),this['on']('set_blendT'+'ype',this['onSetBlend'+'Type'],this),this['on']('set_depthS'+'oftening',this['onSetDepth'+'Softening'],this),this['on']('set_layers',this['onSetLayer'+'s'],this),ZR['forEach'](_0x5b73b5=>{this['on']('set_'+_0x5b73b5,this['onSetSimpl'+'eProperty'],this);}),QR['forEach'](_0x39fc21=>{this['on']('set_'+_0x39fc21,this['onSetCompl'+'exProperty'],this);}),JR['forEach'](_0xfde389=>{this['on']('set_'+_0xfde389,this['onSetGraph'+'Property'],this);}));}get['data'](){const _0x51ece7=this['system']['store'][this['entity']['getGuid']()];return _0x51ece7?_0x51ece7['data']:null;}set['enabled'](_0x585262){this['_setValue']('enabled',_0x585262);}get['enabled'](){return this['data']['enabled'];}set['autoPlay'](_0x156de2){this['_setValue']('autoPlay',_0x156de2);}get['autoPlay'](){return this['data']['autoPlay'];}set['numParticl'+'es'](_0x130d9f){this['_setValue']('numParticl'+'es',_0x130d9f);}get['numParticl'+'es'](){return this['data']['numParticl'+'es'];}set['lifetime'](_0x1a942b){this['_setValue']('lifetime',_0x1a942b);}get['lifetime'](){return this['data']['lifetime'];}set['rate'](_0x330537){this['_setValue']('rate',_0x330537);}get['rate'](){return this['data']['rate'];}set['rate2'](_0x1cbb01){this['_setValue']('rate2',_0x1cbb01);}get['rate2'](){return this['data']['rate2'];}set['startAngle'](_0x8a8de8){this['_setValue']('startAngle',_0x8a8de8);}get['startAngle'](){return this['data']['startAngle'];}set['startAngle'+'2'](_0x131a30){this['_setValue']('startAngle'+'2',_0x131a30);}get['startAngle'+'2'](){return this['data']['startAngle'+'2'];}set['loop'](_0x145b9b){this['_setValue']('loop',_0x145b9b);}get['loop'](){return this['data']['loop'];}set['preWarm'](_0xc7302d){this['_setValue']('preWarm',_0xc7302d);}get['preWarm'](){return this['data']['preWarm'];}set['lighting'](_0x30af5d){this['_setValue']('lighting',_0x30af5d);}get['lighting'](){return this['data']['lighting'];}set['halfLamber'+'t'](_0x1e4c77){this['_setValue']('halfLamber'+'t',_0x1e4c77);}get['halfLamber'+'t'](){return this['data']['halfLamber'+'t'];}set['intensity'](_0x2dd03d){this['_setValue']('intensity',_0x2dd03d);}get['intensity'](){return this['data']['intensity'];}set['depthWrite'](_0x547236){this['_setValue']('depthWrite',_0x547236);}get['depthWrite'](){return this['data']['depthWrite'];}set['noFog'](_0x55d910){this['_setValue']('noFog',_0x55d910);}get['noFog'](){return this['data']['noFog'];}set['depthSofte'+'ning'](_0x35bb10){this['_setValue']('depthSofte'+'ning',_0x35bb10);}get['depthSofte'+'ning'](){return this['data']['depthSofte'+'ning'];}set['sort'](_0x530cc5){this['_setValue']('sort',_0x530cc5);}get['sort'](){return this['data']['sort'];}set['blendType'](_0x5aee31){this['_setValue']('blendType',_0x5aee31);}get['blendType'](){return this['data']['blendType'];}set['stretch'](_0x2ba440){this['_setValue']('stretch',_0x2ba440);}get['stretch'](){return this['data']['stretch'];}set['alignToMot'+'ion'](_0x42a802){this['_setValue']('alignToMot'+'ion',_0x42a802);}get['alignToMot'+'ion'](){return this['data']['alignToMot'+'ion'];}set['emitterSha'+'pe'](_0x4e0c0d){this['_setValue']('emitterSha'+'pe',_0x4e0c0d);}get['emitterSha'+'pe'](){return this['data']['emitterSha'+'pe'];}set['emitterExt'+'ents'](_0x3e3d7c){this['_setValue']('emitterExt'+'ents',_0x3e3d7c);}get['emitterExt'+'ents'](){return this['data']['emitterExt'+'ents'];}set['emitterExt'+'entsInner'](_0x24415b){this['_setValue']('emitterExt'+'entsInner',_0x24415b);}get['emitterExt'+'entsInner'](){return this['data']['emitterExt'+'entsInner'];}set['emitterRad'+'ius'](_0x3735e3){this['_setValue']('emitterRad'+'ius',_0x3735e3);}get['emitterRad'+'ius'](){return this['data']['emitterRad'+'ius'];}set['emitterRad'+'iusInner'](_0x22485d){this['_setValue']('emitterRad'+'iusInner',_0x22485d);}get['emitterRad'+'iusInner'](){return this['data']['emitterRad'+'iusInner'];}set['initialVel'+'ocity'](_0x1126e4){this['_setValue']('initialVel'+'ocity',_0x1126e4);}get['initialVel'+'ocity'](){return this['data']['initialVel'+'ocity'];}set['wrap'](_0x10ebd0){this['_setValue']('wrap',_0x10ebd0);}get['wrap'](){return this['data']['wrap'];}set['wrapBounds'](_0x41eb59){this['_setValue']('wrapBounds',_0x41eb59);}get['wrapBounds'](){return this['data']['wrapBounds'];}set['localSpace'](_0x52f930){this['_setValue']('localSpace',_0x52f930);}get['localSpace'](){return this['data']['localSpace'];}set['screenSpac'+'e'](_0x1aa718){this['_setValue']('screenSpac'+'e',_0x1aa718);}get['screenSpac'+'e'](){return this['data']['screenSpac'+'e'];}set['colorMapAs'+'set'](_0x26032c){this['_setValue']('colorMapAs'+'set',_0x26032c);}get['colorMapAs'+'set'](){return this['data']['colorMapAs'+'set'];}set['normalMapA'+'sset'](_0x52c179){this['_setValue']('normalMapA'+'sset',_0x52c179);}get['normalMapA'+'sset'](){return this['data']['normalMapA'+'sset'];}set['mesh'](_0x305be8){this['_setValue']('mesh',_0x305be8);}get['mesh'](){return this['data']['mesh'];}set['meshAsset'](_0x504c34){this['_setValue']('meshAsset',_0x504c34);}get['meshAsset'](){return this['data']['meshAsset'];}set['renderAsse'+'t'](_0x36ad4a){this['_setValue']('renderAsse'+'t',_0x36ad4a);}get['renderAsse'+'t'](){return this['data']['renderAsse'+'t'];}set['orientatio'+'n'](_0xa466a0){this['_setValue']('orientatio'+'n',_0xa466a0);}get['orientatio'+'n'](){return this['data']['orientatio'+'n'];}set['particleNo'+'rmal'](_0x3ec023){this['_setValue']('particleNo'+'rmal',_0x3ec023);}get['particleNo'+'rmal'](){return this['data']['particleNo'+'rmal'];}set['localVeloc'+'ityGraph'](_0x58481a){this['_setValue']('localVeloc'+'ityGraph',_0x58481a);}get['localVeloc'+'ityGraph'](){return this['data']['localVeloc'+'ityGraph'];}set['localVeloc'+'ityGraph2'](_0x1f958b){this['_setValue']('localVeloc'+'ityGraph2',_0x1f958b);}get['localVeloc'+'ityGraph2'](){return this['data']['localVeloc'+'ityGraph2'];}set['velocityGr'+'aph'](_0x225129){this['_setValue']('velocityGr'+'aph',_0x225129);}get['velocityGr'+'aph'](){return this['data']['velocityGr'+'aph'];}set['velocityGr'+'aph2'](_0x2e87b3){this['_setValue']('velocityGr'+'aph2',_0x2e87b3);}get['velocityGr'+'aph2'](){return this['data']['velocityGr'+'aph2'];}set['rotationSp'+'eedGraph'](_0x19941e){this['_setValue']('rotationSp'+'eedGraph',_0x19941e);}get['rotationSp'+'eedGraph'](){return this['data']['rotationSp'+'eedGraph'];}set['rotationSp'+'eedGraph2'](_0x3faf8f){this['_setValue']('rotationSp'+'eedGraph2',_0x3faf8f);}get['rotationSp'+'eedGraph2'](){return this['data']['rotationSp'+'eedGraph2'];}set['radialSpee'+'dGraph'](_0x4f821c){this['_setValue']('radialSpee'+'dGraph',_0x4f821c);}get['radialSpee'+'dGraph'](){return this['data']['radialSpee'+'dGraph'];}set['radialSpee'+'dGraph2'](_0x4f04f0){this['_setValue']('radialSpee'+'dGraph2',_0x4f04f0);}get['radialSpee'+'dGraph2'](){return this['data']['radialSpee'+'dGraph2'];}set['scaleGraph'](_0x2c9792){this['_setValue']('scaleGraph',_0x2c9792);}get['scaleGraph'](){return this['data']['scaleGraph'];}set['scaleGraph'+'2'](_0x5d5e81){this['_setValue']('scaleGraph'+'2',_0x5d5e81);}get['scaleGraph'+'2'](){return this['data']['scaleGraph'+'2'];}set['colorGraph'](_0x20df9f){this['_setValue']('colorGraph',_0x20df9f);}get['colorGraph'](){return this['data']['colorGraph'];}set['colorGraph'+'2'](_0x3cd297){this['_setValue']('colorGraph'+'2',_0x3cd297);}get['colorGraph'+'2'](){return this['data']['colorGraph'+'2'];}set['alphaGraph'](_0x1918b1){this['_setValue']('alphaGraph',_0x1918b1);}get['alphaGraph'](){return this['data']['alphaGraph'];}set['alphaGraph'+'2'](_0x86ee6c){this['_setValue']('alphaGraph'+'2',_0x86ee6c);}get['alphaGraph'+'2'](){return this['data']['alphaGraph'+'2'];}set['colorMap'](_0x1eb33f){this['_setValue']('colorMap',_0x1eb33f);}get['colorMap'](){return this['data']['colorMap'];}set['normalMap'](_0x2c7a79){this['_setValue']('normalMap',_0x2c7a79);}get['normalMap'](){return this['data']['normalMap'];}set['animTilesX'](_0x24ba37){this['_setValue']('animTilesX',_0x24ba37);}get['animTilesX'](){return this['data']['animTilesX'];}set['animTilesY'](_0x39a375){this['_setValue']('animTilesY',_0x39a375);}get['animTilesY'](){return this['data']['animTilesY'];}set['animStartF'+'rame'](_0xd62c33){this['_setValue']('animStartF'+'rame',_0xd62c33);}get['animStartF'+'rame'](){return this['data']['animStartF'+'rame'];}set['animNumFra'+'mes'](_0x2c5c2c){this['_setValue']('animNumFra'+'mes',_0x2c5c2c);}get['animNumFra'+'mes'](){return this['data']['animNumFra'+'mes'];}set['animNumAni'+'mations'](_0x3692c7){this['_setValue']('animNumAni'+'mations',_0x3692c7);}get['animNumAni'+'mations'](){return this['data']['animNumAni'+'mations'];}set['animIndex'](_0x30eef0){this['_setValue']('animIndex',_0x30eef0);}get['animIndex'](){return this['data']['animIndex'];}set['randomizeA'+'nimIndex'](_0x461176){this['_setValue']('randomizeA'+'nimIndex',_0x461176);}get['randomizeA'+'nimIndex'](){return this['data']['randomizeA'+'nimIndex'];}set['animSpeed'](_0x4c0c73){this['_setValue']('animSpeed',_0x4c0c73);}get['animSpeed'](){return this['data']['animSpeed'];}set['animLoop'](_0x27da7b){this['_setValue']('animLoop',_0x27da7b);}get['animLoop'](){return this['data']['animLoop'];}set['layers'](_0xa206c4){this['_setValue']('layers',_0xa206c4);}get['layers'](){return this['data']['layers'];}set['drawOrder'](_0x57a413){this['_drawOrder']=_0x57a413,this['emitter']&&(this['emitter']['drawOrder']=_0x57a413);}get['drawOrder'](){return this['_drawOrder'];}['_setValue'](_0xecdab7,_0x2fcd62){const _0x325970=this['data'],_0x472e89=_0x325970[_0xecdab7];_0x325970[_0xecdab7]=_0x2fcd62,this['fire']('set',_0xecdab7,_0x472e89,_0x2fcd62);}['addMeshIns'+'tanceToLay'+'ers'](){if(this['emitter'])for(let _0xe4a67d=-0x1739+0x655*0x3+0x43a;_0xe4a67d<this['layers']['length'];_0xe4a67d++){const _0x7255c8=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0xe4a67d]);_0x7255c8&&(_0x7255c8['addMeshIns'+'tances']([this['emitter']['meshInstan'+'ce']]),this['emitter']['_layer']=_0x7255c8);}}['removeMesh'+'InstanceFr'+'omLayers'](){if(this['emitter'])for(let _0x57cc1a=-0x21a3+-0x153e+-0x619*-0x9;_0x57cc1a<this['layers']['length'];_0x57cc1a++){const _0x1bf432=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x57cc1a]);_0x1bf432&&_0x1bf432['removeMesh'+'Instances']([this['emitter']['meshInstan'+'ce']]);}}['onSetLayer'+'s'](_0xb4568b,_0x1ea4cd,_0x194348){if(this['emitter']){for(let _0xa36ac7=-0x1a5d*-0x1+-0x1491+0x1*-0x5cc;_0xa36ac7<_0x1ea4cd['length'];_0xa36ac7++){const _0x14ba3e=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x1ea4cd[_0xa36ac7]);_0x14ba3e&&_0x14ba3e['removeMesh'+'Instances']([this['emitter']['meshInstan'+'ce']]);}if(!(!this['enabled']||!this['entity']['enabled']))for(let _0x210611=0xa3*-0x2+-0x6*0x625+0x2624;_0x210611<_0x194348['length'];_0x210611++){const _0x11007d=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x194348[_0x210611]);_0x11007d&&_0x11007d['addMeshIns'+'tances']([this['emitter']['meshInstan'+'ce']]);}}}['onLayersCh'+'anged'](_0x533dab,_0x57477){this['addMeshIns'+'tanceToLay'+'ers'](),_0x533dab['off']('add',this['onLayerAdd'+'ed'],this),_0x533dab['off']('remove',this['onLayerRem'+'oved'],this),_0x57477['on']('add',this['onLayerAdd'+'ed'],this),_0x57477['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x1f4d90){!this['emitter']||this['layers']['indexOf'](_0x1f4d90['id'])<0x219e+0xade*-0x3+-0x4*0x41||_0x1f4d90['addMeshIns'+'tances']([this['emitter']['meshInstan'+'ce']]);}['onLayerRem'+'oved'](_0x13ff48){!this['emitter']||this['layers']['indexOf'](_0x13ff48['id'])<-0xb73*-0x3+-0xee5+-0xf9*0x14||_0x13ff48['removeMesh'+'Instances']([this['emitter']['meshInstan'+'ce']]);}['_bindColor'+'MapAsset'](_0x4cafa){if(_0x4cafa['on']('load',this['_onColorMa'+'pAssetLoad'],this),_0x4cafa['on']('unload',this['_onColorMa'+'pAssetUnlo'+'ad'],this),_0x4cafa['on']('remove',this['_onColorMa'+'pAssetRemo'+'ve'],this),_0x4cafa['on']('change',this['_onColorMa'+'pAssetChan'+'ge'],this),_0x4cafa['resource'])this['_onColorMa'+'pAssetLoad'](_0x4cafa);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x4cafa);}}['_unbindCol'+'orMapAsset'](_0x505cf0){_0x505cf0['off']('load',this['_onColorMa'+'pAssetLoad'],this),_0x505cf0['off']('unload',this['_onColorMa'+'pAssetUnlo'+'ad'],this),_0x505cf0['off']('remove',this['_onColorMa'+'pAssetRemo'+'ve'],this),_0x505cf0['off']('change',this['_onColorMa'+'pAssetChan'+'ge'],this);}['_onColorMa'+'pAssetLoad'](_0x1f9ab9){this['colorMap']=_0x1f9ab9['resource'];}['_onColorMa'+'pAssetUnlo'+'ad'](_0xec30f4){this['colorMap']=null;}['_onColorMa'+'pAssetRemo'+'ve'](_0x14ff90){this['_onColorMa'+'pAssetUnlo'+'ad'](_0x14ff90);}['_onColorMa'+'pAssetChan'+'ge'](_0x59c783){}['onSetColor'+'MapAsset'](_0x430ce8,_0x22f9dd,_0x2e19d7){const _0x3f3dec=this['system']['app']['assets'];if(_0x22f9dd){const _0x3da1f1=_0x3f3dec['get'](_0x22f9dd);_0x3da1f1&&this['_unbindCol'+'orMapAsset'](_0x3da1f1);}if(_0x2e19d7){_0x2e19d7 instanceof pe&&(this['data']['colorMapAs'+'set']=_0x2e19d7['id'],_0x2e19d7=_0x2e19d7['id']);const _0x53c998=_0x3f3dec['get'](_0x2e19d7);_0x53c998?this['_bindColor'+'MapAsset'](_0x53c998):_0x3f3dec['once']('add:'+_0x2e19d7,_0x514aa2=>{this['_bindColor'+'MapAsset'](_0x514aa2);});}else this['colorMap']=null;}['_bindNorma'+'lMapAsset'](_0x44634d){if(_0x44634d['on']('load',this['_onNormalM'+'apAssetLoa'+'d'],this),_0x44634d['on']('unload',this['_onNormalM'+'apAssetUnl'+'oad'],this),_0x44634d['on']('remove',this['_onNormalM'+'apAssetRem'+'ove'],this),_0x44634d['on']('change',this['_onNormalM'+'apAssetCha'+'nge'],this),_0x44634d['resource'])this['_onNormalM'+'apAssetLoa'+'d'](_0x44634d);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x44634d);}}['_unbindNor'+'malMapAsse'+'t'](_0x2efb47){_0x2efb47['off']('load',this['_onNormalM'+'apAssetLoa'+'d'],this),_0x2efb47['off']('unload',this['_onNormalM'+'apAssetUnl'+'oad'],this),_0x2efb47['off']('remove',this['_onNormalM'+'apAssetRem'+'ove'],this),_0x2efb47['off']('change',this['_onNormalM'+'apAssetCha'+'nge'],this);}['_onNormalM'+'apAssetLoa'+'d'](_0x9d871d){this['normalMap']=_0x9d871d['resource'];}['_onNormalM'+'apAssetUnl'+'oad'](_0x513cf6){this['normalMap']=null;}['_onNormalM'+'apAssetRem'+'ove'](_0x1cb6ca){this['_onNormalM'+'apAssetUnl'+'oad'](_0x1cb6ca);}['_onNormalM'+'apAssetCha'+'nge'](_0x3f43f7){}['onSetNorma'+'lMapAsset'](_0x2ca31b,_0x3b2697,_0x192db9){const _0x3c61d5=this['system']['app']['assets'];if(_0x3b2697){const _0x1254fe=_0x3c61d5['get'](_0x3b2697);_0x1254fe&&this['_unbindNor'+'malMapAsse'+'t'](_0x1254fe);}if(_0x192db9){_0x192db9 instanceof pe&&(this['data']['normalMapA'+'sset']=_0x192db9['id'],_0x192db9=_0x192db9['id']);const _0x30156b=_0x3c61d5['get'](_0x192db9);_0x30156b?this['_bindNorma'+'lMapAsset'](_0x30156b):_0x3c61d5['once']('add:'+_0x192db9,_0x46a950=>{this['_bindNorma'+'lMapAsset'](_0x46a950);});}else this['normalMap']=null;}['_bindMeshA'+'sset'](_0x137cde){if(_0x137cde['on']('load',this['_onMeshAss'+'etLoad'],this),_0x137cde['on']('unload',this['_onMeshAss'+'etUnload'],this),_0x137cde['on']('remove',this['_onMeshAss'+'etRemove'],this),_0x137cde['on']('change',this['_onMeshAss'+'etChange'],this),_0x137cde['resource'])this['_onMeshAss'+'etLoad'](_0x137cde);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x137cde);}}['_unbindMes'+'hAsset'](_0x4f22c3){_0x4f22c3['off']('load',this['_onMeshAss'+'etLoad'],this),_0x4f22c3['off']('unload',this['_onMeshAss'+'etUnload'],this),_0x4f22c3['off']('remove',this['_onMeshAss'+'etRemove'],this),_0x4f22c3['off']('change',this['_onMeshAss'+'etChange'],this);}['_onMeshAss'+'etLoad'](_0x5c852a){this['_onMeshCha'+'nged'](_0x5c852a['resource']);}['_onMeshAss'+'etUnload'](_0x5662fd){this['mesh']=null;}['_onMeshAss'+'etRemove'](_0x3b169f){this['_onMeshAss'+'etUnload'](_0x3b169f);}['_onMeshAss'+'etChange'](_0x5813fa){}['onSetMeshA'+'sset'](_0x27fe7f,_0xb11430,_0x3117d4){const _0x19561c=this['system']['app']['assets'];if(_0xb11430){const _0x408e9a=_0x19561c['get'](_0xb11430);_0x408e9a&&this['_unbindMes'+'hAsset'](_0x408e9a);}if(_0x3117d4){_0x3117d4 instanceof pe&&(this['data']['meshAsset']=_0x3117d4['id'],_0x3117d4=_0x3117d4['id']);const _0x4f1188=_0x19561c['get'](_0x3117d4);_0x4f1188&&this['_bindMeshA'+'sset'](_0x4f1188);}else this['_onMeshCha'+'nged'](null);}['onSetMesh'](_0x4aa9e7,_0x3176e0,_0x412d7b){!_0x412d7b||_0x412d7b instanceof pe||typeof _0x412d7b=='number'?this['meshAsset']=_0x412d7b:this['_onMeshCha'+'nged'](_0x412d7b);}['_onMeshCha'+'nged'](_0x1e743a){_0x1e743a&&!(_0x1e743a instanceof Ge)&&(_0x1e743a['meshInstan'+'ces'][-0x2350+-0x1315*-0x2+-0x92*0x5]?_0x1e743a=_0x1e743a['meshInstan'+'ces'][-0xa7*0x9+0x26+0x5b9]['mesh']:_0x1e743a=null),this['data']['mesh']=_0x1e743a,this['emitter']&&(this['emitter']['mesh']=_0x1e743a,this['emitter']['resetMater'+'ial'](),this['rebuild']());}['onSetRende'+'rAsset'](_0x22766b,_0x5672db,_0x480167){const _0x1d6d31=this['system']['app']['assets'];if(_0x5672db){const _0x849e0c=_0x1d6d31['get'](_0x5672db);_0x849e0c&&this['_unbindRen'+'derAsset'](_0x849e0c);}if(_0x480167){_0x480167 instanceof pe&&(this['data']['renderAsse'+'t']=_0x480167['id'],_0x480167=_0x480167['id']);const _0x3a99b0=_0x1d6d31['get'](_0x480167);_0x3a99b0&&this['_bindRende'+'rAsset'](_0x3a99b0);}else this['_onRenderC'+'hanged'](null);}['_bindRende'+'rAsset'](_0x1c58c1){if(_0x1c58c1['on']('load',this['_onRenderA'+'ssetLoad'],this),_0x1c58c1['on']('unload',this['_onRenderA'+'ssetUnload'],this),_0x1c58c1['on']('remove',this['_onRenderA'+'ssetRemove'],this),_0x1c58c1['resource'])this['_onRenderA'+'ssetLoad'](_0x1c58c1);else{if(!this['enabled']||!this['entity']['enabled'])return;this['system']['app']['assets']['load'](_0x1c58c1);}}['_unbindRen'+'derAsset'](_0x9627f2){var _0x189c44;_0x9627f2['off']('load',this['_onRenderA'+'ssetLoad'],this),_0x9627f2['off']('unload',this['_onRenderA'+'ssetUnload'],this),_0x9627f2['off']('remove',this['_onRenderA'+'ssetRemove'],this),(_0x189c44=this['_evtSetMes'+'hes'])==null||_0x189c44['off'](),this['_evtSetMes'+'hes']=null;}['_onRenderA'+'ssetLoad'](_0x4d6312){this['_onRenderC'+'hanged'](_0x4d6312['resource']);}['_onRenderA'+'ssetUnload'](_0x2113e7){this['_onRenderC'+'hanged'](null);}['_onRenderA'+'ssetRemove'](_0x2bce06){this['_onRenderA'+'ssetUnload'](_0x2bce06);}['_onRenderC'+'hanged'](_0x1a534d){var _0xa66818;if(!_0x1a534d){this['_onMeshCha'+'nged'](null);return;}(_0xa66818=this['_evtSetMes'+'hes'])==null||_0xa66818['off'](),this['_evtSetMes'+'hes']=_0x1a534d['on']('set:meshes',this['_onRenderS'+'etMeshes'],this),_0x1a534d['meshes']&&this['_onRenderS'+'etMeshes'](_0x1a534d['meshes']);}['_onRenderS'+'etMeshes'](_0x48709e){this['_onMeshCha'+'nged'](_0x48709e&&_0x48709e[-0x529*-0x2+-0x23c6+0x1974]);}['onSetLoop'](_0x3aeae0,_0x3f575f,_0x47cbac){this['emitter']&&(this['emitter'][_0x3aeae0]=_0x47cbac,this['emitter']['resetTime']());}['onSetBlend'+'Type'](_0x20b60d,_0x323538,_0x4269fd){this['emitter']&&(this['emitter'][_0x20b60d]=_0x4269fd,this['emitter']['material']['blendType']=_0x4269fd,this['emitter']['resetMater'+'ial'](),this['rebuild']());}['_requestDe'+'pth'](){this['_requested'+'Depth']||(Ya||(Ya=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](ps)),Ya&&(Ya['incrementC'+'ounter'](),this['_requested'+'Depth']=!(-0xf37+0x97a*0x4+-0x9d*0x25)));}['_releaseDe'+'pth'](){this['_requested'+'Depth']&&Ya&&(Ya['decrementC'+'ounter'](),this['_requested'+'Depth']=!(-0x1604+0x393+0x939*0x2));}['onSetDepth'+'Softening'](_0x40d7db,_0x330e5b,_0x7d040c){_0x330e5b!==_0x7d040c&&(_0x7d040c?(this['enabled']&&this['entity']['enabled']&&this['_requestDe'+'pth'](),this['emitter']&&(this['emitter'][_0x40d7db]=_0x7d040c)):(this['enabled']&&this['entity']['enabled']&&this['_releaseDe'+'pth'](),this['emitter']&&(this['emitter'][_0x40d7db]=_0x7d040c)),this['emitter']&&(this['reset'](),this['emitter']['resetMater'+'ial'](),this['rebuild']()));}['onSetSimpl'+'eProperty'](_0x231acc,_0x4d0edc,_0x2e3061){this['emitter']&&(this['emitter'][_0x231acc]=_0x2e3061,this['emitter']['resetMater'+'ial']());}['onSetCompl'+'exProperty'](_0x181018,_0x592a4a,_0x12efc5){this['emitter']&&(this['emitter'][_0x181018]=_0x12efc5,this['emitter']['resetMater'+'ial'](),this['rebuild'](),this['reset']());}['onSetGraph'+'Property'](_0x4c6b15,_0x4dc9c4,_0x5a6fbc){this['emitter']&&(this['emitter'][_0x4c6b15]=_0x5a6fbc,this['emitter']['rebuildGra'+'phs'](),this['emitter']['resetMater'+'ial']());}['onEnable'](){const _0x2e0d3b=this['system']['app']['scene'],_0x1ae2db=_0x2e0d3b['layers'],_0x4192ce=this['data'];for(let _0x470f92=-0x2485+0x8eb+-0x1*-0x1b9a,_0x10d5d3=Cc['length'];_0x470f92<_0x10d5d3;_0x470f92++){let _0x514667=_0x4192ce[Cc[_0x470f92]];if(_0x514667){if(!(_0x514667 instanceof pe)){if(parseInt(_0x514667,-0x117*0x16+-0x141f*-0x1+-0x1*-0x3e5)>=0x21*-0x115+-0x1*0x22f1+0x46a6)_0x514667=this['system']['app']['assets']['get'](_0x514667);else continue;}_0x514667&&!_0x514667['resource']&&this['system']['app']['assets']['load'](_0x514667);}}if(!this['system']['app']['graphicsDe'+'vice']['disablePar'+'ticleSyste'+'m']){if(!this['emitter']){let _0x38f1d5=_0x4192ce['mesh'];_0x38f1d5 instanceof Ge||(_0x38f1d5=null),this['emitter']=new CA(this['system']['app']['graphicsDe'+'vice'],{'numParticles':_0x4192ce['numParticl'+'es'],'emitterExtents':_0x4192ce['emitterExt'+'ents'],'emitterExtentsInner':_0x4192ce['emitterExt'+'entsInner'],'emitterRadius':_0x4192ce['emitterRad'+'ius'],'emitterRadiusInner':_0x4192ce['emitterRad'+'iusInner'],'emitterShape':_0x4192ce['emitterSha'+'pe'],'initialVelocity':_0x4192ce['initialVel'+'ocity'],'wrap':_0x4192ce['wrap'],'localSpace':_0x4192ce['localSpace'],'screenSpace':_0x4192ce['screenSpac'+'e'],'wrapBounds':_0x4192ce['wrapBounds'],'lifetime':_0x4192ce['lifetime'],'rate':_0x4192ce['rate'],'rate2':_0x4192ce['rate2'],'orientation':_0x4192ce['orientatio'+'n'],'particleNormal':_0x4192ce['particleNo'+'rmal'],'animTilesX':_0x4192ce['animTilesX'],'animTilesY':_0x4192ce['animTilesY'],'animStartFrame':_0x4192ce['animStartF'+'rame'],'animNumFrames':_0x4192ce['animNumFra'+'mes'],'animNumAnimations':_0x4192ce['animNumAni'+'mations'],'animIndex':_0x4192ce['animIndex'],'randomizeAnimIndex':_0x4192ce['randomizeA'+'nimIndex'],'animSpeed':_0x4192ce['animSpeed'],'animLoop':_0x4192ce['animLoop'],'startAngle':_0x4192ce['startAngle'],'startAngle2':_0x4192ce['startAngle'+'2'],'scaleGraph':_0x4192ce['scaleGraph'],'scaleGraph2':_0x4192ce['scaleGraph'+'2'],'colorGraph':_0x4192ce['colorGraph'],'colorGraph2':_0x4192ce['colorGraph'+'2'],'alphaGraph':_0x4192ce['alphaGraph'],'alphaGraph2':_0x4192ce['alphaGraph'+'2'],'localVelocityGraph':_0x4192ce['localVeloc'+'ityGraph'],'localVelocityGraph2':_0x4192ce['localVeloc'+'ityGraph2'],'velocityGraph':_0x4192ce['velocityGr'+'aph'],'velocityGraph2':_0x4192ce['velocityGr'+'aph2'],'rotationSpeedGraph':_0x4192ce['rotationSp'+'eedGraph'],'rotationSpeedGraph2':_0x4192ce['rotationSp'+'eedGraph2'],'radialSpeedGraph':_0x4192ce['radialSpee'+'dGraph'],'radialSpeedGraph2':_0x4192ce['radialSpee'+'dGraph2'],'colorMap':_0x4192ce['colorMap'],'normalMap':_0x4192ce['normalMap'],'loop':_0x4192ce['loop'],'preWarm':_0x4192ce['preWarm'],'sort':_0x4192ce['sort'],'stretch':_0x4192ce['stretch'],'alignToMotion':_0x4192ce['alignToMot'+'ion'],'lighting':_0x4192ce['lighting'],'halfLambert':_0x4192ce['halfLamber'+'t'],'intensity':_0x4192ce['intensity'],'depthSoftening':_0x4192ce['depthSofte'+'ning'],'scene':this['system']['app']['scene'],'mesh':_0x38f1d5,'depthWrite':_0x4192ce['depthWrite'],'noFog':_0x4192ce['noFog'],'node':this['entity'],'blendType':_0x4192ce['blendType']}),this['emitter']['meshInstan'+'ce']['node']=this['entity'],this['emitter']['drawOrder']=this['drawOrder'],_0x4192ce['autoPlay']||(this['pause'](),this['emitter']['meshInstan'+'ce']['visible']=!(-0x29*0x97+-0x7b*-0x25+-0x3*-0x223));}this['emitter']['colorMap']&&this['addMeshIns'+'tanceToLay'+'ers'](),this['_evtLayers'+'Changed']=_0x2e0d3b['on']('set:layers',this['onLayersCh'+'anged'],this),_0x1ae2db&&(this['_evtLayerA'+'dded']=_0x1ae2db['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x1ae2db['on']('remove',this['onLayerRem'+'oved'],this)),this['enabled']&&this['entity']['enabled']&&_0x4192ce['depthSofte'+'ning']&&this['_requestDe'+'pth']();}}['onDisable'](){var _0x3d3316,_0x25231b,_0x5057fd;const _0x481f3e=this['system']['app']['scene']['layers'];(_0x3d3316=this['_evtLayers'+'Changed'])==null||_0x3d3316['off'](),this['_evtLayers'+'Changed']=null,_0x481f3e&&((_0x25231b=this['_evtLayerA'+'dded'])==null||_0x25231b['off'](),this['_evtLayerA'+'dded']=null,(_0x5057fd=this['_evtLayerR'+'emoved'])==null||_0x5057fd['off'](),this['_evtLayerR'+'emoved']=null),this['emitter']&&(this['removeMesh'+'InstanceFr'+'omLayers'](),this['data']['depthSofte'+'ning']&&this['_releaseDe'+'pth'](),this['emitter']['camera']=null);}['onBeforeRe'+'move'](){this['enabled']&&(this['enabled']=!(-0x6e9*-0x2+0x15c3+-0x2394*0x1)),this['emitter']&&(this['emitter']['destroy'](),this['emitter']=null);for(let _0x5c65f4=-0x173*-0x13+-0x144*0x6+-0x13f1;_0x5c65f4<Cc['length'];_0x5c65f4++){const _0x520bf8=Cc[_0x5c65f4];this['data'][_0x520bf8]&&(this[_0x520bf8]=null);}this['off']();}['reset'](){this['emitter']&&this['emitter']['reset']();}['stop'](){this['emitter']&&(this['emitter']['loop']=!(0x1a61+0x187e+-0x2*0x196f),this['emitter']['resetTime'](),this['emitter']['addTime'](0x14af+0x1267+-0x2716*0x1,!(-0xb41+-0x2502+0x3043)));}['pause'](){this['data']['paused']=!(-0x1df7+0x1*-0x1e5e+-0x3c55*-0x1);}['unpause'](){this['data']['paused']=!(0xc0+-0x1*0x2ed+0x3*0xba);}['play'](){this['data']['paused']=!(-0x909+-0xd17+0x1621),this['emitter']&&(this['emitter']['meshInstan'+'ce']['visible']=!(0x1b74+-0xcde+0x1*-0xe96),this['emitter']['loop']=this['data']['loop'],this['emitter']['resetTime']());}['isPlaying'](){return this['data']['paused']?!(-0x1*-0x1564+-0x6d4+-0x1*0xe8f):this['emitter']&&this['emitter']['loop']?!(-0x1cf*0x1+0x1e20+-0x1c51):Date['now']()<=this['emitter']['endTime'];}['setInTools'](){const {emitter:_0x7b3591}=this;_0x7b3591&&!_0x7b3591['inTools']&&(_0x7b3591['inTools']=!(0x1*-0x1ec1+-0x1*-0x13dd+0xae4),this['rebuild']());}['rebuild'](){const _0x5d8251=this['enabled'];this['enabled']=!(-0xf4f+-0x5*0x655+0x39d*0xd),this['emitter']&&this['emitter']['rebuild'](),this['enabled']=_0x5d8251;}}class t3{constructor(){this['numParticl'+'es']=-0xc0c+-0x1*0xad9+0x16e6,this['rate']=0x16fc+-0x26d9+0xfde,this['rate2']=null,this['startAngle']=0x1*-0x1458+-0x4e7+0x119*0x17,this['startAngle'+'2']=null,this['lifetime']=-0x263*0xd+0x12e0+0xc59,this['emitterExt'+'ents']=new D(),this['emitterExt'+'entsInner']=new D(),this['emitterRad'+'ius']=0xbee+0xa7*0x2+-0xd3c,this['emitterRad'+'iusInner']=0x10f5*0x1+-0x710*-0x5+0x3445*-0x1,this['emitterSha'+'pe']=ai,this['initialVel'+'ocity']=-0x26d5*0x1+0x353*0x2+0x2ed*0xb,this['wrap']=!(0x7d*-0x1+0x143d+-0x13bf),this['wrapBounds']=new D(),this['localSpace']=!(0x1875+-0x1*-0x1064+-0x28d8),this['screenSpac'+'e']=!(-0x510+-0x12bb+0x17cc),this['colorMap']=null,this['colorMapAs'+'set']=null,this['normalMap']=null,this['normalMapA'+'sset']=null,this['loop']=!(-0x23a1+-0xd03+0x30a4),this['preWarm']=!(0x1815*-0x1+-0x2648+0x3e5e),this['sort']=0x1*0x3f+0x2135+-0x2174,this['mode']=rv,this['scene']=null,this['lighting']=!(0x4fd+0x2054+-0x2550),this['halfLamber'+'t']=!(0xb7a+0x1*0x2596+-0x310f),this['intensity']=0x1cd0+0x153a+0x1*-0x3209,this['stretch']=-0x3d9+0x12*0x206+0x10d*-0x1f,this['alignToMot'+'ion']=!(-0x1859*-0x1+-0x1*-0x1c02+-0x345a),this['depthSofte'+'ning']=0x2*0x92b+-0x3*-0x481+-0x1fd9,this['renderAsse'+'t']=null,this['meshAsset']=null,this['mesh']=null,this['depthWrite']=!(-0x1*-0x873+-0x9c3+0x151),this['noFog']=!(0xb3*0xb+-0x1*0xedd+0x72d),this['orientatio'+'n']=yh,this['particleNo'+'rmal']=new D(-0x4*0x2f6+-0x260a+0x31e2,0x1*0x305+0x4*-0x71e+0x16a*0x12,-0xef9+0x9c0+0x539),this['animTilesX']=0x1b38+0x7*0x52f+-0x3f80,this['animTilesY']=0x2508+-0x71d*0x1+-0x1dea,this['animStartF'+'rame']=0xe4a+0x190b+-0x2755*0x1,this['animNumFra'+'mes']=-0x49*0x1f+0xb9f+-0x2c7,this['animNumAni'+'mations']=0x47*0x77+0x1*0x1e83+-0x3f83*0x1,this['animIndex']=-0x11a7+-0x6de+0x1885,this['randomizeA'+'nimIndex']=!(0x55*0x22+-0x1*-0x17+0x1c*-0x68),this['animSpeed']=0x5e*-0x5e+0x5db*0x1+0x1caa,this['animLoop']=!(-0x26f*-0xf+-0xfda*0x1+0x1*-0x14a7),this['scaleGraph']=null,this['scaleGraph'+'2']=null,this['colorGraph']=null,this['colorGraph'+'2']=null,this['alphaGraph']=null,this['alphaGraph'+'2']=null,this['localVeloc'+'ityGraph']=null,this['localVeloc'+'ityGraph2']=null,this['velocityGr'+'aph']=null,this['velocityGr'+'aph2']=null,this['rotationSp'+'eedGraph']=null,this['rotationSp'+'eedGraph2']=null,this['radialSpee'+'dGraph']=null,this['radialSpee'+'dGraph2']=null,this['blendType']=Zs,this['enabled']=!(-0x2*0x551+-0x267f+0x3121),this['paused']=!(-0x343*0x8+0x2*-0xd12+0x343d),this['autoPlay']=!(-0x4d5*0x1+0x2*-0x85d+0x1*0x158f),this['layers']=[er];}}const s3='\x0avarying\x20v'+'ec4\x20texCoo'+'rdsAlphaLi'+'fe;\x0a\x0aunifo'+'rm\x20sampler'+'2D\x20colorMa'+'p;\x0auniform'+'\x20sampler2D'+'\x20colorPara'+'m;\x0auniform'+'\x20float\x20gra'+'phSampleSi'+'ze;\x0aunifor'+'m\x20float\x20gr'+'aphNumSamp'+'les;\x0a\x0a#ifn'+'def\x20CAMERA'+'PLANES\x0a\x20\x20\x20'+'\x20#define\x20C'+'AMERAPLANE'+'S\x0a\x20\x20\x20\x20unif'+'orm\x20vec4\x20c'+'amera_para'+'ms;\x0a#endif'+'\x0a\x0auniform\x20'+'float\x20soft'+'ening;\x0auni'+'form\x20float'+'\x20colorMult'+';\x0a\x0afloat\x20s'+'aturate(fl'+'oat\x20x)\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'clamp(x,\x200'+'.0,\x201.0);\x0a'+'}\x0a\x0avoid\x20ma'+'in(void)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'tex\x20\x20=\x20tex'+'ture2D(col'+'orMap,\x20vec'+'2(texCoord'+'sAlphaLife'+'.x,\x201.0\x20-\x20'+'texCoordsA'+'lphaLife.y'+'));\x0a\x20\x20\x20\x20ve'+'c4\x20ramp\x20=\x20'+'texture2D('+'colorParam'+',\x20vec2(tex'+'CoordsAlph'+'aLife.w,\x200'+'.0));\x0a\x20\x20\x20\x20'+'ramp.rgb\x20*'+'=\x20colorMul'+'t;\x0a\x0a\x20\x20\x20\x20ra'+'mp.a\x20+=\x20te'+'xCoordsAlp'+'haLife.z;\x0a'+'\x0a\x20\x20\x20\x20vec3\x20'+'rgb\x20=\x20tex.'+'rgb\x20*\x20ramp'+'.rgb;\x0a\x20\x20\x20\x20'+'float\x20a\x20\x20='+'\x20tex.a\x20*\x20r'+'amp.a;\x0a',i3='\x0avec3\x20unpa'+'ck3NFloats'+'(float\x20src'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20r\x20=\x20fr'+'act(src);\x0a'+'\x20\x20\x20\x20float\x20'+'g\x20=\x20fract('+'src\x20*\x20256.'+'0);\x0a\x20\x20\x20\x20fl'+'oat\x20b\x20=\x20fr'+'act(src\x20*\x20'+'65536.0);\x0a'+'\x20\x20\x20\x20return'+'\x20vec3(r,\x20g'+',\x20b);\x0a}\x0a\x0af'+'loat\x20satur'+'ate(float\x20'+'x)\x20{\x0a\x20\x20\x20\x20r'+'eturn\x20clam'+'p(x,\x200.0,\x20'+'1.0);\x0a}\x0a\x0av'+'ec4\x20tex1Dl'+'od_lerp(TE'+'XTURE_ACCE'+'PT_HIGHP(t'+'ex),\x20vec2\x20'+'tc)\x20{\x0a\x20\x20\x20\x20'+'return\x20mix'+'(\x20texture2'+'D(tex,tc),'+'\x20texture2D'+'(tex,tc\x20+\x20'+'graphSampl'+'eSize),\x20fr'+'act(tc.x*g'+'raphNumSam'+'ples)\x20);\x0a}'+'\x0a\x0avec4\x20tex'+'1Dlod_lerp'+'(TEXTURE_A'+'CCEPT_HIGH'+'P(tex),\x20ve'+'c2\x20tc,\x20out'+'\x20vec3\x20w)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'a\x20=\x20textur'+'e2D(tex,tc'+');\x0a\x20\x20\x20\x20vec'+'4\x20b\x20=\x20text'+'ure2D(tex,'+'tc\x20+\x20graph'+'SampleSize'+');\x0a\x20\x20\x20\x20flo'+'at\x20c\x20=\x20fra'+'ct(tc.x*gr'+'aphNumSamp'+'les);\x0a\x0a\x20\x20\x20'+'\x20vec3\x20unpa'+'ckedA\x20=\x20un'+'pack3NFloa'+'ts(a.w);\x0a\x20'+'\x20\x20\x20vec3\x20un'+'packedB\x20=\x20'+'unpack3NFl'+'oats(b.w);'+'\x0a\x20\x20\x20\x20w\x20=\x20m'+'ix(unpacke'+'dA,\x20unpack'+'edB,\x20c);\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20mix(a,\x20b,'+'\x20c);\x0a}\x0a\x0ave'+'c2\x20rotate('+'vec2\x20quadX'+'Y,\x20float\x20p'+'Rotation,\x20'+'out\x20mat2\x20r'+'otMatrix)\x20'+'{\x0a\x20\x20\x20\x20floa'+'t\x20c\x20=\x20cos('+'pRotation)'+';\x0a\x20\x20\x20\x20floa'+'t\x20s\x20=\x20sin('+'pRotation)'+';\x0a\x0a\x20\x20\x20\x20mat'+'2\x20m\x20=\x20mat2'+'(c,\x20-s,\x20s,'+'\x20c);\x0a\x20\x20\x20\x20r'+'otMatrix\x20='+'\x20m;\x0a\x0a\x20\x20\x20\x20r'+'eturn\x20m\x20*\x20'+'quadXY;\x0a}\x0a'+'\x0avec3\x20bill'+'board(vec3'+'\x20InstanceC'+'oords,\x20vec'+'2\x20quadXY)\x20'+'{\x0a\x20\x20\x20\x20#ifd'+'ef\x20SCREEN_'+('SPACE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20vec3\x20p'+'os\x20=\x20vec3('+'-1,\x200,\x200)\x20'+'*\x20quadXY.x'+'\x20+\x20vec3(0,'+'\x20-1,\x200)\x20*\x20'+'quadXY.y;\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20pos\x20=\x20-'+'matrix_vie'+'wInverse[0'+'].xyz\x20*\x20qu'+'adXY.x\x20+\x20-'+'matrix_vie'+'wInverse[1'+'].xyz\x20*\x20qu'+'adXY.y;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20return'+'\x20pos;\x0a}\x0a\x0av'+'ec3\x20custom'+'Face(vec3\x20'+'InstanceCo'+'ords,\x20vec2'+'\x20quadXY)\x20{'+'\x0a\x20\x20\x20\x20vec3\x20'+'pos\x20=\x20face'+'Tangent\x20*\x20'+'quadXY.x\x20+'+'\x20faceBinor'+'m\x20*\x20quadXY'+'.y;\x0a\x20\x20\x20\x20re'+'turn\x20pos;\x0a'+'}\x0a\x0avec2\x20sa'+'feNormaliz'+'e(vec2\x20v)\x20'+'{\x0a\x20\x20\x20\x20floa'+'t\x20l\x20=\x20leng'+'th(v);\x0a\x20\x20\x20'+'\x20return\x20(l'+'\x20>\x201e-06)\x20'+'?\x20v\x20/\x20l\x20:\x20'+'v;\x0a}\x0a\x0avoid'+'\x20main(void'+')\x20{\x0a\x20\x20\x20\x20ve'+'c3\x20meshLoc'+'alPos\x20=\x20pa'+'rticle_ver'+'texData.xy'+'z;\x0a\x20\x20\x20\x20flo'+'at\x20id\x20=\x20fl'+'oor(partic'+'le_vertexD'+'ata.w);\x0a\x0a\x20'+'\x20\x20\x20float\x20r'+'ndFactor\x20='+'\x20fract(sin'+'(id\x20+\x201.0\x20'+'+\x20seed));\x0a'+'\x20\x20\x20\x20vec3\x20r'+'ndFactor3\x20'+'=\x20vec3(rnd'+'Factor,\x20fr'+'act(rndFac'+'tor*10.0),'+'\x20fract(rnd'+'Factor*100'+'.0));\x0a\x0a\x20\x20\x20'+'\x20float\x20uv\x20'+'=\x20id\x20/\x20num'+'ParticlesP'+'ot;\x0a\x20\x20\x20\x20re'+'adInput(uv'+');\x0a\x0a#ifdef'+'\x20LOCAL_SPA'+'CE\x0a\x20\x20\x20\x20inV'+'el\x20=\x20mat3('+'matrix_mod'+'el)\x20*\x20inVe'+'l;\x0a#endif\x0a'+'\x20\x20\x20\x20vec2\x20v'+'elocityV\x20='+'\x20safeNorma'+'lize((mat3'+'(matrix_vi'+'ew)\x20*\x20inVe'+'l).xy);\x20//'+'\x20should\x20be'+'\x20removed\x20b'+'y\x20compiler'+'\x20if\x20align/'+'stretch\x20is'+'\x20not\x20used\x0a'+'\x0a\x20\x20\x20\x20float'+'\x20particleL'+'ifetime\x20=\x20'+'lifetime;\x0a'+'\x0a\x20\x20\x20\x20if\x20(i')+('nLife\x20<=\x200'+'.0\x20||\x20inLi'+'fe\x20>\x20parti'+'cleLifetim'+'e\x20||\x20!inSh'+'ow)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20meshLoca'+'lPos\x20=\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20vec2\x20qua'+'dXY\x20=\x20mesh'+'LocalPos.x'+'y;\x0a\x20\x20\x20\x20flo'+'at\x20nlife\x20='+'\x20clamp(inL'+'ife\x20/\x20part'+'icleLifeti'+'me,\x200.0,\x201'+'.0);\x0a\x0a\x20\x20\x20\x20'+'vec3\x20param'+'Div;\x0a\x20\x20\x20\x20v'+'ec4\x20params'+'\x20=\x20tex1Dlo'+'d_lerp(TEX'+'TURE_PASS('+'internalTe'+'x2),\x20vec2('+'nlife,\x200),'+'\x20paramDiv)'+';\x0a\x20\x20\x20\x20floa'+'t\x20scale\x20=\x20'+'params.y;\x0a'+'\x20\x20\x20\x20float\x20'+'scaleDiv\x20='+'\x20paramDiv.'+'x;\x0a\x20\x20\x20\x20flo'+'at\x20alphaDi'+'v\x20=\x20paramD'+'iv.z;\x0a\x0a\x20\x20\x20'+'\x20scale\x20+=\x20'+'(scaleDiv\x20'+'*\x202.0\x20-\x201.'+'0)\x20*\x20scale'+'DivMult\x20*\x20'+'fract(rndF'+'actor*1000'+'0.0);\x0a\x0a#if'+'ndef\x20USE_M'+'ESH\x0a\x20\x20\x20\x20te'+'xCoordsAlp'+'haLife\x20=\x20v'+'ec4(quadXY'+'\x20*\x20-0.5\x20+\x20'+'0.5,\x20(alph'+'aDiv\x20*\x202.0'+'\x20-\x201.0)\x20*\x20'+'alphaDivMu'+'lt\x20*\x20fract'+'(rndFactor'+'*1000.0),\x20'+'nlife);\x0a#e'+'lse\x0a\x20\x20\x20\x20te'+'xCoordsAlp'+'haLife\x20=\x20v'+'ec4(partic'+'le_uv,\x20(al'+'phaDiv\x20*\x202'+'.0\x20-\x201.0)\x20'+'*\x20alphaDiv'+'Mult\x20*\x20fra'+'ct(rndFact'+'or*1000.0)'+',\x20nlife);\x0a'+'#endif\x0a\x0a\x20\x20'+'\x20\x20vec3\x20par'+'ticlePos\x20='+'\x20inPos;\x0a\x20\x20'+'\x20\x20vec3\x20par'+'ticlePosMo'+'ved\x20=\x20vec3'+'(0.0);\x0a\x0a\x20\x20'+'\x20\x20mat2\x20rot'+'Matrix;\x0a'),r3='\x0a\x20\x20\x20\x20float'+'\x20animFrame'+'\x20=\x20min(flo'+'or(texCoor'+'dsAlphaLif'+'e.w\x20*\x20anim'+'TexParams.'+'y)\x20+\x20animT'+'exParams.x'+',\x20animTexP'+'arams.z);\x0a',a3='\x0a\x20\x20\x20\x20float'+'\x20animFrame'+'\x20=\x20floor(m'+'od(texCoor'+'dsAlphaLif'+'e.w\x20*\x20anim'+'TexParams.'+'y\x20+\x20animTe'+'xParams.x,'+'\x20animTexPa'+'rams.z\x20+\x201'+'.0));\x0a',n3='\x0a\x20\x20\x20\x20float'+'\x20animation'+'Index;\x0a\x0a\x20\x20'+'\x20\x20if\x20(anim'+'TexIndexPa'+'rams.y\x20==\x20'+'1.0)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20anima'+'tionIndex\x20'+'=\x20floor((a'+'nimTexPara'+'ms.w\x20+\x201.0'+')\x20*\x20rndFac'+'tor3.z)\x20*\x20'+'(animTexPa'+'rams.z\x20+\x201'+'.0);\x0a\x20\x20\x20\x20}'+'\x20else\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20anim'+'ationIndex'+'\x20=\x20animTex'+'IndexParam'+'s.x\x20*\x20(ani'+'mTexParams'+'.z\x20+\x201.0);'+'\x0a\x20\x20\x20\x20}\x0a\x0a\x20\x20'+'\x20\x20float\x20at'+'lasX\x20=\x20(an'+'imationInd'+'ex\x20+\x20animF'+'rame)\x20*\x20an'+'imTexTiles'+'Params.x;\x0a'+'\x20\x20\x20\x20float\x20'+'atlasY\x20=\x201'+'.0\x20-\x20floor'+'(atlasX\x20+\x20'+'1.0)\x20*\x20ani'+'mTexTilesP'+'arams.y;\x0a\x20'+'\x20\x20\x20atlasX\x20'+'=\x20fract(at'+'lasX);\x0a\x0a\x20\x20'+'\x20\x20texCoord'+'sAlphaLife'+'.xy\x20*=\x20ani'+'mTexTilesP'+'arams.xy;\x0a'+'\x20\x20\x20\x20texCoo'+'rdsAlphaLi'+'fe.xy\x20+=\x20v'+'ec2(atlasX'+',\x20atlasY);'+'\x0a',o3='\x0avoid\x20read'+'Input(floa'+'t\x20uv)\x20{\x0a\x20\x20'+'\x20\x20vec4\x20tex'+'\x20=\x20texture'+'2D(particl'+'eTexIN,\x20ve'+'c2(uv,\x200.2'+'5));\x0a\x20\x20\x20\x20v'+'ec4\x20tex2\x20='+'\x20texture2D'+'(particleT'+'exIN,\x20vec2'+'(uv,\x200.75)'+');\x0a\x0a\x20\x20\x20\x20in'+'Pos\x20=\x20tex.'+'xyz;\x0a\x20\x20\x20\x20i'+'nVel\x20=\x20tex'+'2.xyz;\x0a\x20\x20\x20'+'\x20inAngle\x20='+'\x20(tex.w\x20<\x20'+'0.0?\x20-tex.'+'w\x20:\x20tex.w)'+'\x20-\x201000.0;'+'\x0a\x20\x20\x20\x20inSho'+'w\x20=\x20tex.w\x20'+'>=\x200.0;\x0a\x20\x20'+'\x20\x20inLife\x20='+'\x20tex2.w;\x0a}'+'\x0a',l3='\x0a//RG=X,\x20B'+'A=Y\x0a//RG=Z'+',\x20BA=A\x0a//R'+'GB=V,\x20A=vi'+'sMode\x0a//RG'+'BA=life\x0a\x0a#'+'define\x20PI2'+'\x206.2831853'+'07179586\x0a\x0a'+'uniform\x20ve'+'c3\x20inBound'+'sSize;\x0auni'+'form\x20vec3\x20'+'inBoundsCe'+'nter;\x0a\x0auni'+'form\x20float'+'\x20maxVel;\x0a\x0a'+'float\x20deco'+'deFloatRG('+'vec2\x20rg)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20rg.y\x20*\x20('+'1.0\x20/\x20255.'+'0)\x20+\x20rg.x;'+'\x0a}\x0a\x0afloat\x20'+'decodeFloa'+'tRGBA(\x20vec'+'4\x20rgba\x20)\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20dot(rgba'+',\x20vec4(1.0'+',\x201.0\x20/\x2025'+'5.0,\x201.0\x20/'+'\x2065025.0,\x20'+'1.0\x20/\x201605'+'81375.0));'+'\x0a}\x0a\x0avoid\x20r'+'eadInput(f'+'loat\x20uv)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'tex0\x20=\x20tex'+'ture2D(par'+'ticleTexIN'+',\x20vec2(uv,'+'\x200.125));\x0a'+'\x20\x20\x20\x20vec4\x20t'+'ex1\x20=\x20text'+'ure2D(part'+'icleTexIN,'+'\x20vec2(uv,\x20'+'0.375));\x0a\x20'+'\x20\x20\x20vec4\x20te'+'x2\x20=\x20textu'+'re2D(parti'+'cleTexIN,\x20'+'vec2(uv,\x200'+'.625));\x0a\x20\x20'+'\x20\x20vec4\x20tex'+'3\x20=\x20textur'+'e2D(partic'+'leTexIN,\x20v'+'ec2(uv,\x200.'+'875));\x0a\x0a\x20\x20'+'\x20\x20inPos\x20=\x20'+'vec3(decod'+'eFloatRG(t'+'ex0.rg),\x20d'+'ecodeFloat'+'RG(tex0.ba'+'),\x20decodeF'+'loatRG(tex'+'1.rg));\x0a\x20\x20'+'\x20\x20inPos\x20=\x20'+'(inPos\x20-\x20v'+'ec3(0.5))\x20'+'*\x20inBounds'+'Size\x20+\x20inB'+'oundsCente'+'r;\x0a\x0a\x20\x20\x20\x20in'+'Vel\x20=\x20tex2'+'.xyz;\x0a\x20\x20\x20\x20'+'inVel\x20=\x20(i'+'nVel\x20-\x20vec'+'3(0.5))\x20*\x20'+'maxVel;\x0a\x0a\x20'+'\x20\x20\x20inAngle'+'\x20=\x20decodeF'+'loatRG(tex'+'1.ba)\x20*\x20PI'+'2;\x0a\x20\x20\x20\x20inS'+'how\x20=\x20tex2'+'.a\x20>\x200.5;\x0a'+'\x0a\x20\x20\x20\x20inLif'+'e\x20=\x20decode'+'FloatRGBA('+'tex3);\x0a\x20\x20\x20'+'\x20float\x20max'+'NegLife\x20=\x20'+'max(lifeti'+'me,\x20(numPa'+('rticles\x20-\x20'+'1.0)\x20*\x20(ra'+'te+rateDiv'+'));\x0a\x20\x20\x20\x20fl'+'oat\x20maxPos'+'Life\x20=\x20lif'+'etime+1.0;'+'\x0a\x20\x20\x20\x20inLif'+'e\x20=\x20inLife'+'\x20*\x20(maxNeg'+'Life\x20+\x20max'+'PosLife)\x20-'+'\x20maxNegLif'+'e;\x0a}\x0a'),c3='\x0avoid\x20writ'+'eOutput()\x20'+'{\x0a\x20\x20\x20\x20if\x20('+'gl_FragCoo'+'rd.y<1.0)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'gl_FragCol'+'or\x20=\x20vec4('+'outPos,\x20(o'+'utAngle\x20+\x20'+'1000.0)\x20*\x20'+'visMode);\x0a'+'\x20\x20\x20\x20}\x20else'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20gl_FragCo'+'lor\x20=\x20vec4'+'(outVel,\x20o'+'utLife);\x0a\x20'+'\x20\x20\x20}\x0a}\x0a',h3='\x0auniform\x20v'+'ec3\x20outBou'+'ndsMul;\x0aun'+'iform\x20vec3'+'\x20outBounds'+'Add;\x0a\x0avec2'+'\x20encodeFlo'+'atRG(\x20floa'+'t\x20v\x20)\x20{\x0a\x20\x20'+'\x20\x20vec2\x20enc'+'\x20=\x20vec2(1.'+'0,\x20255.0)\x20'+'*\x20v;\x0a\x20\x20\x20\x20e'+'nc\x20=\x20fract'+'(enc);\x0a\x20\x20\x20'+'\x20enc\x20-=\x20en'+'c.yy\x20*\x20vec'+'2(1.0/255.'+'0,\x201.0/255'+'.0);\x0a\x20\x20\x20\x20r'+'eturn\x20enc;'+'\x0a}\x0a\x0avec4\x20e'+'ncodeFloat'+'RGBA(\x20floa'+'t\x20v\x20)\x20{\x0a\x20\x20'+'\x20\x20vec4\x20enc'+'\x20=\x20vec4(1.'+'0,\x20255.0,\x20'+'65025.0,\x201'+'60581375.0'+')\x20*\x20v;\x0a\x20\x20\x20'+'\x20enc\x20=\x20fra'+'ct(enc);\x0a\x20'+'\x20\x20\x20enc\x20-=\x20'+'enc.yzww\x20*'+'\x20vec4(1.0/'+'255.0,1.0/'+'255.0,1.0/'+'255.0,0.0)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20enc;\x0a}\x0a'+'\x0avoid\x20writ'+'eOutput()\x20'+'{\x0a\x20\x20\x20\x20outP'+'os\x20=\x20outPo'+'s\x20*\x20outBou'+'ndsMul\x20+\x20o'+'utBoundsAd'+'d;\x0a\x20\x20\x20\x20out'+'Angle\x20=\x20fr'+'act(outAng'+'le\x20/\x20PI2);'+'\x0a\x0a\x20\x20\x20\x20outV'+'el\x20=\x20(outV'+'el\x20/\x20maxVe'+'l)\x20+\x20vec3('+'0.5);\x20//\x20T'+'ODO:\x20mul\x0a\x0a'+'\x20\x20\x20\x20float\x20'+'maxNegLife'+'\x20=\x20max(lif'+'etime,\x20(nu'+'mParticles'+'\x20-\x201.0)\x20*\x20'+'(rate+rate'+'Div));\x0a\x20\x20\x20'+'\x20float\x20max'+'PosLife\x20=\x20'+'lifetime+1'+'.0;\x0a\x20\x20\x20\x20ou'+'tLife\x20=\x20(o'+'utLife\x20+\x20m'+'axNegLife)'+'\x20/\x20(maxNeg'+'Life\x20+\x20max'+'PosLife);\x0a'+'\x0a\x20\x20\x20\x20if\x20(g'+'l_FragCoor'+'d.y\x20<\x201.0)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20gl_FragCo'+'lor\x20=\x20vec4'+'(encodeFlo'+'atRG(outPo'+'s.x),\x20enco'+'deFloatRG('+'outPos.y))'+';\x0a\x20\x20\x20\x20}\x20el'+'se\x20if\x20(gl_'+'FragCoord.'+'y\x20<\x202.0)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_FragColo'+'r\x20=\x20vec4(e'+'ncodeFloat'+'RG(outPos.'+'z),\x20encode'+'FloatRG(ou'+'tAngle));\x0a'+'\x20\x20\x20\x20}\x20else'+('\x20if\x20(gl_Fr'+'agCoord.y\x20'+'<\x203.0)\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20gl_'+'FragColor\x20'+'=\x20vec4(out'+'Vel,\x20visMo'+'de*0.5+0.5'+');\x0a\x20\x20\x20\x20}\x20e'+'lse\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20gl_Fra'+'gColor\x20=\x20e'+'ncodeFloat'+'RGBA(outLi'+'fe);\x0a\x20\x20\x20\x20}'+'\x0a}\x0a'),d3='\x0auniform\x20m'+'at3\x20spawnB'+'ounds;\x0auni'+'form\x20vec3\x20'+'spawnPosIn'+'nerRatio;\x0a'+'\x0avec3\x20calc'+'SpawnPosit'+'ion(vec3\x20i'+'nBounds,\x20f'+'loat\x20rndFa'+'ctor)\x20{\x0a\x20\x20'+'\x20\x20vec3\x20pos'+'\x20=\x20inBound'+'s\x20-\x20vec3(0'+'.5);\x0a\x0a\x20\x20\x20\x20'+'vec3\x20posAb'+'s\x20=\x20abs(po'+'s);\x0a\x20\x20\x20\x20ve'+'c3\x20maxPos\x20'+'=\x20vec3(max'+'(posAbs.x,'+'\x20max(posAb'+'s.y,\x20posAb'+'s.z)));\x0a\x0a\x20'+'\x20\x20\x20vec3\x20ed'+'ge\x20=\x20maxPo'+'s\x20+\x20(vec3('+'0.5)\x20-\x20max'+'Pos)\x20*\x20spa'+'wnPosInner'+'Ratio;\x0a\x0a\x20\x20'+'\x20\x20pos.x\x20=\x20'+'edge.x\x20*\x20('+'maxPos.x\x20='+'=\x20posAbs.x'+'\x20?\x20sign(po'+'s.x)\x20:\x202.0'+'\x20*\x20pos.x);'+'\x0a\x20\x20\x20\x20pos.y'+'\x20=\x20edge.y\x20'+'*\x20(maxPos.'+'y\x20==\x20posAb'+'s.y\x20?\x20sign'+'(pos.y)\x20:\x20'+'2.0\x20*\x20pos.'+'y);\x0a\x20\x20\x20\x20po'+'s.z\x20=\x20edge'+'.z\x20*\x20(maxP'+'os.z\x20==\x20po'+'sAbs.z\x20?\x20s'+'ign(pos.z)'+'\x20:\x202.0\x20*\x20p'+'os.z);\x0a\x0a#i'+'fndef\x20LOCA'+'L_SPACE\x0a\x20\x20'+'\x20\x20return\x20e'+'mitterPos\x20'+'+\x20spawnBou'+'nds\x20*\x20pos;'+'\x0a#else\x0a\x20\x20\x20'+'\x20return\x20sp'+'awnBounds\x20'+'*\x20pos;\x0a#en'+'dif\x0a}\x0a\x0avoi'+'d\x20addIniti'+'alVelocity'+'(inout\x20vec'+'3\x20localVel'+'ocity,\x20vec'+'3\x20inBounds'+')\x20{\x0a\x20\x20\x20\x20lo'+'calVelocit'+'y\x20-=\x20vec3('+'0,\x200,\x20init'+'ialVelocit'+'y);\x0a}\x0a',f3='\x0a\x20\x20\x20\x20write'+'Output();\x0a'+'}\x0a',u3='\x0avarying\x20v'+'ec2\x20vUv0;\x0a'+'\x0auniform\x20h'+'ighp\x20sampl'+'er2D\x20parti'+'cleTexIN;\x0a'+'uniform\x20hi'+'ghp\x20sample'+'r2D\x20intern'+'alTex0;\x0aun'+'iform\x20high'+'p\x20sampler2'+'D\x20internal'+'Tex1;\x0aunif'+'orm\x20highp\x20'+'sampler2D\x20'+'internalTe'+'x2;\x0aunifor'+'m\x20highp\x20sa'+'mpler2D\x20in'+'ternalTex3'+';\x0a\x0auniform'+'\x20mat3\x20emit'+'terMatrix;'+'\x0auniform\x20m'+'at3\x20emitte'+'rMatrixInv'+';\x0auniform\x20'+'vec3\x20emitt'+'erScale;\x0a\x0a'+'uniform\x20ve'+'c3\x20emitter'+'Pos;\x0aunifo'+'rm\x20vec3\x20fr'+'ameRandom;'+'\x0auniform\x20v'+'ec3\x20localV'+'elocityDiv'+'Mult;\x0aunif'+'orm\x20vec3\x20v'+'elocityDiv'+'Mult;\x0aunif'+'orm\x20float\x20'+'delta;\x0auni'+'form\x20float'+'\x20rate;\x0auni'+'form\x20float'+'\x20rateDiv;\x0a'+'uniform\x20fl'+'oat\x20lifeti'+'me;\x0aunifor'+'m\x20float\x20nu'+'mParticles'+';\x0auniform\x20'+'float\x20rotS'+'peedDivMul'+'t;\x0auniform'+'\x20float\x20rad'+'ialSpeedDi'+'vMult;\x0auni'+'form\x20float'+'\x20seed;\x0auni'+'form\x20float'+'\x20startAngl'+'e;\x0auniform'+'\x20float\x20sta'+'rtAngle2;\x0a'+'uniform\x20fl'+'oat\x20initia'+'lVelocity;'+'\x0a\x0auniform\x20'+'float\x20grap'+'hSampleSiz'+'e;\x0auniform'+'\x20float\x20gra'+'phNumSampl'+'es;\x0a\x0avec3\x20'+'inPos;\x0avec'+'3\x20inVel;\x0af'+'loat\x20inAng'+'le;\x0abool\x20i'+'nShow;\x0aflo'+'at\x20inLife;'+'\x0afloat\x20vis'+'Mode;\x0a\x0avec'+'3\x20outPos;\x0a'+'vec3\x20outVe'+'l;\x0afloat\x20o'+'utAngle;\x0ab'+'ool\x20outSho'+'w;\x0afloat\x20o'+'utLife;\x0a',p3='\x0a\x20\x20\x20\x20if\x20(o'+'utLife\x20>=\x20'+'lifetime)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'outLife\x20-='+'\x20max(lifet'+'ime,\x20(numP'+'articles\x20-'+'\x201.0)\x20*\x20pa'+'rticleRate'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20visMode\x20='+'\x20-1.0;\x0a\x20\x20\x20'+'\x20}\x0a',m3='\x0a\x20\x20\x20\x20visMo'+'de\x20=\x20outLi'+'fe\x20<\x200.0?\x20'+'-1.0:\x20visM'+'ode;\x0a',_3='\x0a\x20\x20\x20\x20if\x20(o'+'utLife\x20>=\x20'+'lifetime)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'outLife\x20-='+'\x20max(lifet'+'ime,\x20(numP'+'articles\x20-'+'\x201.0)\x20*\x20pa'+'rticleRate'+');\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20visMode\x20='+'\x201.0;\x0a\x20\x20\x20\x20'+'}\x0a\x20\x20\x20\x20visM'+'ode\x20=\x20outL'+'ife\x20<\x200.0?'+'\x201.0:\x20visM'+'ode;\x0a',g3='\x0auniform\x20f'+'loat\x20spawn'+'BoundsSphe'+'re;\x0aunifor'+'m\x20float\x20sp'+'awnBoundsS'+'phereInner'+'Ratio;\x0a\x0ave'+'c3\x20calcSpa'+'wnPosition'+'(vec3\x20inBo'+'unds,\x20floa'+'t\x20rndFacto'+'r)\x20{\x0a\x20\x20\x20\x20f'+'loat\x20rnd4\x20'+'=\x20fract(rn'+'dFactor\x20*\x20'+'1000.0);\x0a\x20'+'\x20\x20\x20vec3\x20no'+'rm\x20=\x20norma'+'lize(inBou'+'nds.xyz\x20-\x20'+'vec3(0.5))'+';\x0a\x20\x20\x20\x20floa'+'t\x20r\x20=\x20rnd4'+'\x20*\x20(1.0\x20-\x20'+'spawnBound'+'sSphereInn'+'erRatio)\x20+'+'\x20spawnBoun'+'dsSphereIn'+'nerRatio;\x0a'+'#ifndef\x20LO'+'CAL_SPACE\x0a'+'\x20\x20\x20\x20return'+'\x20emitterPo'+'s\x20+\x20norm\x20*'+'\x20r\x20*\x20spawn'+'BoundsSphe'+'re;\x0a#else\x0a'+'\x20\x20\x20\x20return'+'\x20norm\x20*\x20r\x20'+'*\x20spawnBou'+'ndsSphere;'+'\x0a#endif\x0a}\x0a'+'\x0avoid\x20addI'+'nitialVelo'+'city(inout'+'\x20vec3\x20loca'+'lVelocity,'+'\x20vec3\x20inBo'+'unds)\x20{\x0a\x20\x20'+'\x20\x20localVel'+'ocity\x20+=\x20n'+'ormalize(i'+'nBounds\x20-\x20'+'vec3(0.5))'+'\x20*\x20initial'+'Velocity;\x0a'+'}\x0a',S3='\x0afloat\x20sat'+'urate(floa'+'t\x20x)\x20{\x0a\x20\x20\x20'+'\x20return\x20cl'+'amp(x,\x200.0'+',\x201.0);\x0a}\x0a'+'\x0avec3\x20unpa'+'ck3NFloats'+'(float\x20src'+')\x20{\x0a\x20\x20\x20\x20fl'+'oat\x20r\x20=\x20fr'+'act(src);\x0a'+'\x20\x20\x20\x20float\x20'+'g\x20=\x20fract('+'src\x20*\x20256.'+'0);\x0a\x20\x20\x20\x20fl'+'oat\x20b\x20=\x20fr'+'act(src\x20*\x20'+'65536.0);\x0a'+'\x20\x20\x20\x20return'+'\x20vec3(r,\x20g'+',\x20b);\x0a}\x0a\x0av'+'ec3\x20tex1Dl'+'od_lerp(TE'+'XTURE_ACCE'+'PT_HIGHP(t'+'ex),\x20vec2\x20'+'tc,\x20out\x20ve'+'c3\x20w)\x20{\x0a\x20\x20'+'\x20\x20vec4\x20a\x20='+'\x20texture2D'+'(tex,\x20tc);'+'\x0a\x20\x20\x20\x20vec4\x20'+'b\x20=\x20textur'+'e2D(tex,\x20t'+'c\x20+\x20graphS'+'ampleSize)'+';\x0a\x20\x20\x20\x20floa'+'t\x20c\x20=\x20frac'+'t(tc.x\x20*\x20g'+'raphNumSam'+'ples);\x0a\x0a\x20\x20'+'\x20\x20vec3\x20unp'+'ackedA\x20=\x20u'+'npack3NFlo'+'ats(a.w);\x0a'+'\x20\x20\x20\x20vec3\x20u'+'npackedB\x20='+'\x20unpack3NF'+'loats(b.w)'+';\x0a\x20\x20\x20\x20w\x20=\x20'+'mix(unpack'+'edA,\x20unpac'+'kedB,\x20c);\x0a'+'\x0a\x20\x20\x20\x20retur'+'n\x20mix(a.xy'+'z,\x20b.xyz,\x20'+'c);\x0a}\x0a\x0a#de'+'fine\x20HASHS'+'CALE4\x20vec4'+'(1031,\x20.10'+'30,\x20.0973,'+'\x20.1099)\x0ave'+'c4\x20hash41('+'float\x20p)\x20{'+'\x0a\x20\x20\x20\x20vec4\x20'+'p4\x20=\x20fract'+'(vec4(p)\x20*'+'\x20HASHSCALE'+'4);\x0a\x20\x20\x20\x20p4'+'\x20+=\x20dot(p4'+',\x20p4.wzxy+'+'19.19);\x0a\x20\x20'+'\x20\x20return\x20f'+'ract(vec4('+'(p4.x\x20+\x20p4'+'.y)*p4.z,\x20'+'(p4.x\x20+\x20p4'+'.z)*p4.y,\x20'+'(p4.y\x20+\x20p4'+'.z)*p4.w,\x20'+'(p4.z\x20+\x20p4'+'.w)*p4.x))'+';\x0a}\x0a\x0avoid\x20'+'main(void)'+'\x20{\x0a\x20\x20\x20\x20if\x20'+'(gl_FragCo'+'ord.x\x20>\x20nu'+'mParticles'+')\x20discard;'+'\x0a\x0a\x20\x20\x20\x20read'+'Input(vUv0'+'.x);\x0a\x20\x20\x20\x20v'+'isMode\x20=\x20i'+'nShow?\x201.0'+'\x20:\x20-1.0;\x0a\x0a'+'\x20\x20\x20\x20vec4\x20r'+'ndFactor\x20='+'\x20hash41(gl'+'_FragCoord'+('.x\x20+\x20seed)'+';\x0a\x0a\x20\x20\x20\x20flo'+'at\x20particl'+'eRate\x20=\x20ra'+'te\x20+\x20rateD'+'iv\x20*\x20rndFa'+'ctor.x;\x0a\x0a\x20'+'\x20\x20\x20outLife'+'\x20=\x20inLife\x20'+'+\x20delta;\x0a\x20'+'\x20\x20\x20float\x20n'+'life\x20=\x20cla'+'mp(outLife'+'\x20/\x20lifetim'+'e,\x200.0,\x201.'+'0);\x0a\x0a\x20\x20\x20\x20v'+'ec3\x20localV'+'elocityDiv'+';\x0a\x20\x20\x20\x20vec3'+'\x20velocityD'+'iv;\x0a\x20\x20\x20\x20ve'+'c3\x20paramDi'+'v;\x0a\x20\x20\x20\x20vec'+'3\x20localVel'+'ocity\x20=\x20te'+'x1Dlod_ler'+'p(TEXTURE_'+'PASS(inter'+'nalTex0),\x20'+'vec2(nlife'+',\x200),\x20loca'+'lVelocityD'+'iv);\x0a\x20\x20\x20\x20v'+'ec3\x20veloci'+'ty\x20=\x20\x20\x20\x20\x20\x20'+'tex1Dlod_l'+'erp(TEXTUR'+'E_PASS(int'+'ernalTex1)'+',\x20vec2(nli'+'fe,\x200),\x20ve'+'locityDiv)'+';\x0a\x20\x20\x20\x20vec3'+'\x20params\x20=\x20'+'\x20\x20\x20\x20\x20\x20\x20tex'+'1Dlod_lerp'+'(TEXTURE_P'+'ASS(intern'+'alTex2),\x20v'+'ec2(nlife,'+'\x200),\x20param'+'Div);\x0a\x20\x20\x20\x20'+'float\x20rotS'+'peed\x20=\x20par'+'ams.x;\x0a\x20\x20\x20'+'\x20float\x20rot'+'SpeedDiv\x20='+'\x20paramDiv.'+'y;\x0a\x0a\x20\x20\x20\x20ve'+'c3\x20radialP'+'arams\x20=\x20te'+'x1Dlod_ler'+'p(TEXTURE_'+'PASS(inter'+'nalTex3),\x20'+'vec2(nlife'+',\x200),\x20para'+'mDiv);\x0a\x20\x20\x20'+'\x20float\x20rad'+'ialSpeed\x20='+'\x20radialPar'+'ams.x;\x0a\x20\x20\x20'+'\x20float\x20rad'+'ialSpeedDi'+'v\x20=\x20radial'+'Params.y;\x0a'+'\x0a\x20\x20\x20\x20bool\x20'+'respawn\x20=\x20'+'inLife\x20<=\x20'+'0.0\x20||\x20out'+'Life\x20>=\x20li'+'fetime;\x0a\x20\x20'+'\x20\x20inPos\x20=\x20'+'respawn\x20?\x20'+'calcSpawnP'+'osition(rn'+'dFactor.xy'+'z,\x20rndFact'+'or.x)\x20:\x20in'+'Pos;\x0a\x20\x20\x20\x20i'+'nAngle\x20=\x20r'+'espawn\x20?\x20m'+'ix(startAn'+'gle,\x20start'+'Angle2,\x20rn'+'dFactor.x)'+'\x20:\x20inAngle'+';\x0a\x0a#ifndef'+'\x20LOCAL_SPA'+'CE\x0a\x20\x20\x20\x20vec')+('3\x20radialVe'+'l\x20=\x20inPos\x20'+'-\x20emitterP'+'os;\x0a#else\x0a'+'\x20\x20\x20\x20vec3\x20r'+'adialVel\x20='+'\x20inPos;\x0a#e'+'ndif\x0a\x20\x20\x20\x20r'+'adialVel\x20='+'\x20(dot(radi'+'alVel,\x20rad'+'ialVel)\x20>\x20'+'1.0E-8)\x20?\x20'+'radialSpee'+'d\x20*\x20normal'+'ize(radial'+'Vel)\x20:\x20vec'+'3(0.0);\x0a\x20\x20'+'\x20\x20radialVe'+'l\x20+=\x20(radi'+'alSpeedDiv'+'\x20*\x20vec3(2.'+'0)\x20-\x20vec3('+'1.0))\x20*\x20ra'+'dialSpeedD'+'ivMult\x20*\x20r'+'ndFactor.x'+'yz;\x0a\x0a\x20\x20\x20\x20l'+'ocalVeloci'+'ty\x20+=\x20\x20\x20\x20('+'localVeloc'+'ityDiv\x20*\x20v'+'ec3(2.0)\x20-'+'\x20vec3(1.0)'+')\x20*\x20localV'+'elocityDiv'+'Mult\x20*\x20rnd'+'Factor.xyz'+';\x0a\x20\x20\x20\x20velo'+'city\x20+=\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20(vel'+'ocityDiv\x20*'+'\x20vec3(2.0)'+'\x20-\x20vec3(1.'+'0))\x20*\x20velo'+'cityDivMul'+'t\x20*\x20rndFac'+'tor.xyz;\x0a\x20'+'\x20\x20\x20rotSpee'+'d\x20+=\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20(rotSpe'+'edDiv\x20*\x202.'+'0\x20-\x201.0)\x20*'+'\x20rotSpeedD'+'ivMult\x20*\x20r'+'ndFactor.y'+';\x0a\x0a\x20\x20\x20\x20add'+'InitialVel'+'ocity(loca'+'lVelocity,'+'\x20rndFactor'+'.xyz);\x0a\x0a#i'+'fndef\x20LOCA'+'L_SPACE\x0a\x20\x20'+'\x20\x20outVel\x20='+'\x20emitterMa'+'trix\x20*\x20loc'+'alVelocity'+'\x20+\x20(radial'+'Vel\x20+\x20velo'+'city)\x20*\x20em'+'itterScale'+';\x0a#else\x0a\x20\x20'+'\x20\x20outVel\x20='+'\x20(localVel'+'ocity\x20+\x20ra'+'dialVel)\x20/'+'\x20emitterSc'+'ale\x20+\x20emit'+'terMatrixI'+'nv\x20*\x20veloc'+'ity;\x0a#endi'+'f\x0a\x0a\x20\x20\x20\x20out'+'Pos\x20=\x20inPo'+'s\x20+\x20outVel'+'\x20*\x20delta;\x0a'+'\x20\x20\x20\x20outAng'+'le\x20=\x20inAng'+'le\x20+\x20rotSp'+'eed\x20*\x20delt'+'a;\x0a'),y3='\x0a\x20\x20\x20\x20quadX'+'Y\x20=\x20rotate'+'(quadXY,\x20i'+'nAngle,\x20ro'+'tMatrix);\x0a'+'\x20\x20\x20\x20vec3\x20l'+'ocalPos\x20=\x20'+'billboard('+'particlePo'+'s,\x20quadXY)'+';\x0a',v3='\x0a\x20\x20\x20\x20dBlen'+'dModeFogFa'+'ctor\x20=\x200.0'+';\x0a\x20\x20\x20\x20rgb\x20'+'*=\x20saturat'+'e(gammaCor'+'rectInput('+'max(a,\x200.0'+')));\x0a\x20\x20\x20\x20i'+'f\x20((rgb.r\x20'+'+\x20rgb.g\x20+\x20'+'rgb.b)\x20<\x200'+'.000001)\x20d'+'iscard;\x0a',x3='\x0a\x20\x20\x20\x20rgb\x20='+'\x20mix(vec3('+'1.0),\x20rgb,'+'\x20vec3(a));'+'\x0a\x20\x20\x20\x20if\x20(r'+'gb.r\x20+\x20rgb'+'.g\x20+\x20rgb.b'+'\x20>\x202.99)\x20d'+'iscard;\x0a',T3='\x0a\x20\x20\x20\x20if\x20(a'+'\x20<\x200.01)\x20d'+'iscard;\x0a',w3='\x0aattribute'+'\x20vec4\x20part'+'icle_verte'+'xData;\x20\x20\x20/'+'/\x20XYZ\x20=\x20wo'+'rld\x20pos,\x20W'+'\x20=\x20life\x0aat'+'tribute\x20ve'+'c4\x20particl'+'e_vertexDa'+'ta2;\x20\x20//\x20X'+'\x20=\x20angle,\x20'+'Y\x20=\x20scale,'+'\x20Z\x20=\x20alpha'+',\x20W\x20=\x20velo'+'city.x\x0aatt'+'ribute\x20vec'+'4\x20particle'+'_vertexDat'+'a3;\x20\x20//\x20XY'+'Z\x20=\x20partic'+'le\x20local\x20p'+'os,\x20W\x20=\x20ve'+'locity.y\x0aa'+'ttribute\x20f'+'loat\x20parti'+'cle_vertex'+'Data4;\x20//\x20'+'particle\x20i'+'d\x0a\x0a//\x20type'+'\x20depends\x20o'+'n\x20useMesh\x20'+'property.\x20'+'Start\x20with'+'\x20X\x20=\x20veloc'+'ity.z,\x20Y\x20='+'\x20particle\x20'+'ID\x20and\x20for'+'\x20mesh\x20part'+'icles\x20proc'+'eeds\x20with\x20'+'Z\x20=\x20mesh\x20U'+'V.x,\x20W\x20=\x20m'+'esh\x20UV.y\x0a/'+'/\x20Note:\x20Th'+'is\x20generat'+'es\x20a\x20dupli'+'cate\x20attri'+'bute\x20warni'+'ng,\x20as\x20the'+'\x20scanning\x20'+'we\x20do\x20is\x20v'+'ery\x20simple'+'.\x0a#ifndef\x20'+'USE_MESH\x0a\x20'+'\x20\x20\x20attribu'+'te\x20vec2\x20pa'+'rticle_ver'+'texData5;\x0a'+'#else\x0a\x20\x20\x20\x20'+'attribute\x20'+'vec4\x20parti'+'cle_vertex'+'Data5;\x0a#en'+'dif\x0a\x0aunifo'+'rm\x20mat4\x20ma'+'trix_viewP'+'rojection;'+'\x0auniform\x20m'+'at4\x20matrix'+'_model;\x0a\x0a#'+'ifndef\x20VIE'+'WMATRIX\x0a\x20\x20'+'\x20\x20#define\x20'+'VIEWMATRIX'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20mat4\x20ma'+'trix_view;'+'\x0a#endif\x0a\x0au'+'niform\x20mat'+'3\x20matrix_n'+'ormal;\x0auni'+'form\x20mat4\x20'+'matrix_vie'+'wInverse;\x0a'+'\x0auniform\x20f'+'loat\x20numPa'+'rticles;\x0au'+'niform\x20flo'+'at\x20lifetim'+'e;\x0auniform'+'\x20float\x20str'+'etch;\x0aunif'+'orm\x20float\x20'+'seed;\x0aunif'+'orm\x20vec3\x20w'+'rapBounds;'+'\x0auniform\x20v'+'ec3\x20emitte'+'rScale;\x0aun'+('iform\x20vec3'+'\x20faceTange'+'nt;\x0aunifor'+'m\x20vec3\x20fac'+'eBinorm;\x0a\x0a'+'#ifdef\x20PAR'+'TICLE_GPU\x0a'+'\x20\x20\x20\x20unifor'+'m\x20highp\x20sa'+'mpler2D\x20in'+'ternalTex0'+';\x0a\x20\x20\x20\x20unif'+'orm\x20highp\x20'+'sampler2D\x20'+'internalTe'+'x1;\x0a\x20\x20\x20\x20un'+'iform\x20high'+'p\x20sampler2'+'D\x20internal'+'Tex2;\x0a#end'+'if\x0auniform'+'\x20vec3\x20emit'+'terPos;\x0a\x0av'+'arying\x20vec'+'4\x20texCoord'+'sAlphaLife'+';\x0a\x0avec2\x20ro'+'tate(vec2\x20'+'quadXY,\x20fl'+'oat\x20pRotat'+'ion,\x20out\x20m'+'at2\x20rotMat'+'rix)\x0a{\x0a\x20\x20\x20'+'\x20float\x20c\x20='+'\x20cos(pRota'+'tion);\x0a\x20\x20\x20'+'\x20float\x20s\x20='+'\x20sin(pRota'+'tion);\x0a\x20\x20\x20'+'\x20//vec4\x20ro'+'tationMatr'+'ix\x20=\x20vec4('+'c,\x20-s,\x20s,\x20'+'c);\x0a\x0a\x20\x20\x20\x20m'+'at2\x20m\x20=\x20ma'+'t2(c,\x20-s,\x20'+'s,\x20c);\x0a\x20\x20\x20'+'\x20rotMatrix'+'\x20=\x20m;\x0a\x0a\x20\x20\x20'+'\x20return\x20m\x20'+'*\x20quadXY;\x0a'+'}\x0a\x0avec3\x20bi'+'llboard(ve'+'c3\x20Instanc'+'eCoords,\x20v'+'ec2\x20quadXY'+')\x0a{\x0a\x20\x20\x20\x20ve'+'c3\x20pos\x20=\x20-'+'matrix_vie'+'wInverse[0'+'].xyz\x20*\x20qu'+'adXY.x\x20+\x20-'+'matrix_vie'+'wInverse[1'+'].xyz\x20*\x20qu'+'adXY.y;\x0a\x20\x20'+'\x20\x20return\x20p'+'os;\x0a}\x0a\x0avec'+'3\x20customFa'+'ce(vec3\x20In'+'stanceCoor'+'ds,\x20vec2\x20q'+'uadXY)\x0a{\x0a\x20'+'\x20\x20\x20vec3\x20po'+'s\x20=\x20faceTa'+'ngent\x20*\x20qu'+'adXY.x\x20+\x20f'+'aceBinorm\x20'+'*\x20quadXY.y'+';\x0a\x20\x20\x20\x20retu'+'rn\x20pos;\x0a}\x0a'+'\x0avoid\x20main'+'(void)\x0a{\x0a\x20'+'\x20\x20\x20vec3\x20pa'+'rticlePos\x20'+'=\x20particle'+'_vertexDat'+'a.xyz;\x0a\x20\x20\x20'+'\x20vec3\x20inPo'+'s\x20=\x20partic'+'lePos;\x0a\x20\x20\x20'+'\x20vec3\x20vert'+'Pos\x20=\x20part'+'icle_verte'+'xData3.xyz'+';\x0a\x20\x20\x20\x20vec3'+'\x20inVel\x20=\x20v'+'ec3(partic'+'le_vertexD'+'ata2.w,\x20pa')+('rticle_ver'+'texData3.w'+',\x20particle'+'_vertexDat'+'a5.x);\x0a\x0a\x20\x20'+'\x20\x20float\x20id'+'\x20=\x20floor(p'+'article_ve'+'rtexData4)'+';\x0a\x20\x20\x20\x20floa'+'t\x20rndFacto'+'r\x20=\x20fract('+'sin(id\x20+\x201'+'.0\x20+\x20seed)'+');\x0a\x20\x20\x20\x20vec'+'3\x20rndFacto'+'r3\x20=\x20vec3('+'rndFactor,'+'\x20fract(rnd'+'Factor*10.'+'0),\x20fract('+'rndFactor*'+'100.0));\x0a\x0a'+'#ifdef\x20LOC'+'AL_SPACE\x0a\x20'+'\x20\x20\x20inVel\x20='+'\x20mat3(matr'+'ix_model)\x20'+'*\x20inVel;\x0a#'+'endif\x0a\x20\x20\x20\x20'+'vec2\x20veloc'+'ityV\x20=\x20nor'+'malize((ma'+'t3(matrix_'+'view)\x20*\x20in'+'Vel).xy);\x20'+'//\x20should\x20'+'be\x20removed'+'\x20by\x20compil'+'er\x20if\x20alig'+'n/stretch\x20'+'is\x20not\x20use'+'d\x0a\x0a\x20\x20\x20\x20vec'+'2\x20quadXY\x20='+'\x20vertPos.x'+'y;\x0a\x0a#ifdef'+'\x20USE_MESH\x0a'+'\x20\x20\x20\x20texCoo'+'rdsAlphaLi'+'fe\x20=\x20vec4('+'particle_v'+'ertexData5'+'.zw,\x20parti'+'cle_vertex'+'Data2.z,\x20p'+'article_ve'+'rtexData.w'+');\x0a#else\x0a\x20'+'\x20\x20\x20texCoor'+'dsAlphaLif'+'e\x20=\x20vec4(q'+'uadXY\x20*\x20-0'+'.5\x20+\x200.5,\x20'+'particle_v'+'ertexData2'+'.z,\x20partic'+'le_vertexD'+'ata.w);\x0a#e'+'ndif\x0a\x20\x20\x20\x20m'+'at2\x20rotMat'+'rix;\x0a\x0a\x20\x20\x20\x20'+'float\x20inAn'+'gle\x20=\x20part'+'icle_verte'+'xData2.x;\x0a'+'\x20\x20\x20\x20vec3\x20p'+'articlePos'+'Moved\x20=\x20ve'+'c3(0.0);\x0a\x20'+'\x20\x20\x20vec3\x20me'+'shLocalPos'+'\x20=\x20particl'+'e_vertexDa'+'ta3.xyz;\x0a'),E3='\x0a\x20\x20\x20\x20local'+'Pos\x20*=\x20par'+'ticle_vert'+'exData2.y\x20'+'*\x20emitterS'+'cale;\x0a\x20\x20\x20\x20'+'localPos\x20+'+'=\x20particle'+'Pos;\x0a\x0a\x20\x20\x20\x20'+'gl_Positio'+'n\x20=\x20matrix'+'_viewProje'+'ction\x20*\x20ve'+'c4(localPo'+'s,\x201.0);\x0a',b3='\x0a\x20\x20\x20\x20quadX'+'Y\x20=\x20rotate'+'(quadXY,\x20i'+'nAngle,\x20ro'+'tMatrix);\x0a'+'\x20\x20\x20\x20vec3\x20l'+'ocalPos\x20=\x20'+'customFace'+'(particleP'+'os,\x20quadXY'+');\x0a',A3='\x0a\x20\x20\x20\x20rgb\x20='+'\x20addFog(rg'+'b);\x0a\x20\x20\x20\x20rg'+'b\x20=\x20toneMa'+'p(rgb);\x0a\x20\x20'+'\x20\x20rgb\x20=\x20ga'+'mmaCorrect'+'Output(rgb'+');\x0a\x20\x20\x20\x20gl_'+'FragColor\x20'+'=\x20vec4(rgb'+',\x20a);\x0a}\x0a',C3='\x0a\x20\x20\x20\x20local'+'Pos\x20*=\x20sca'+'le\x20*\x20emitt'+'erScale;\x0a\x20'+'\x20\x20\x20localPo'+'s\x20+=\x20parti'+'clePos;\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SCREEN_SPA'+'CE\x0a\x20\x20\x20\x20gl_'+'Position\x20='+'\x20vec4(loca'+'lPos.x,\x20lo'+'calPos.y,\x20'+'0.0,\x201.0);'+'\x0a\x20\x20\x20\x20#else'+'\x0a\x20\x20\x20\x20gl_Po'+'sition\x20=\x20m'+'atrix_view'+'Projection'+'\x20*\x20vec4(lo'+'calPos.xyz'+',\x201.0);\x0a\x20\x20'+'\x20\x20#endif\x0a',P3='\x0a\x20\x20\x20\x20vec3\x20'+'negNormal\x20'+'=\x20normal\x20*'+'\x200.5\x20+\x200.5'+';\x0a\x20\x20\x20\x20vec3'+'\x20posNormal'+'\x20=\x20-normal'+'\x20*\x200.5\x20+\x200'+'.5;\x0a\x20\x20\x20\x20ne'+'gNormal\x20*='+'\x20negNormal'+';\x0a\x20\x20\x20\x20posN'+'ormal\x20*=\x20p'+'osNormal;\x0a',M3='\x0aattribute'+'\x20vec4\x20part'+'icle_verte'+'xData;\x20//\x20'+'XYZ\x20=\x20part'+'icle\x20posit'+'ion,\x20W\x20=\x20p'+'article\x20ID'+'\x20+\x20random\x20'+'factor\x0a\x0a#i'+'f\x20defined('+'USE_MESH)\x0a'+'\x20\x20\x20\x20#if\x20de'+'fined(USE_'+'MESH_UV)\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20att'+'ribute\x20vec'+'2\x20particle'+'_uv;\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20mesh'+'\x20UV\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20vec2\x20par'+'ticle_uv\x20='+'\x20vec2(0.0,'+'\x200.0);\x0a\x20\x20\x20'+'\x20#endif\x0a#e'+'ndif\x0a\x0aunif'+'orm\x20mat4\x20m'+'atrix_view'+'Projection'+';\x0auniform\x20'+'mat4\x20matri'+'x_model;\x0au'+'niform\x20mat'+'3\x20matrix_n'+'ormal;\x0auni'+'form\x20mat4\x20'+'matrix_vie'+'wInverse;\x0a'+'\x0a#ifndef\x20V'+'IEWMATRIX\x0a'+'\x20\x20\x20\x20#defin'+'e\x20VIEWMATR'+'IX\x0a\x20\x20\x20\x20uni'+'form\x20mat4\x20'+'matrix_vie'+'w;\x0a#endif\x0a'+'\x0auniform\x20f'+'loat\x20numPa'+'rticles;\x0au'+'niform\x20flo'+'at\x20numPart'+'iclesPot;\x0a'+'uniform\x20fl'+'oat\x20graphS'+'ampleSize;'+'\x0auniform\x20f'+'loat\x20graph'+'NumSamples'+';\x0auniform\x20'+'float\x20stre'+'tch;\x0aunifo'+'rm\x20vec3\x20wr'+'apBounds;\x0a'+'uniform\x20ve'+'c3\x20emitter'+'Scale;\x0auni'+'form\x20vec3\x20'+'emitterPos'+';\x0auniform\x20'+'vec3\x20faceT'+'angent;\x0aun'+'iform\x20vec3'+'\x20faceBinor'+'m;\x0auniform'+'\x20float\x20rat'+'e;\x0auniform'+'\x20float\x20rat'+'eDiv;\x0aunif'+'orm\x20float\x20'+'lifetime;\x0a'+'uniform\x20fl'+'oat\x20deltaR'+'andomnessS'+'tatic;\x0auni'+'form\x20float'+'\x20scaleDivM'+'ult;\x0aunifo'+'rm\x20float\x20a'+'lphaDivMul'+'t;\x0auniform'+'\x20float\x20see'+'d;\x0auniform'+'\x20float\x20del'+'ta;\x0aunifor'+'m\x20sampler2'+'D\x20particle'+'TexOUT;\x0aun'+'iform\x20samp'+('ler2D\x20part'+'icleTexIN;'+'\x0a\x0a#ifdef\x20P'+'ARTICLE_GP'+'U\x0a\x20\x20\x20\x20unif'+'orm\x20highp\x20'+'sampler2D\x20'+'internalTe'+'x0;\x0a\x20\x20\x20\x20un'+'iform\x20high'+'p\x20sampler2'+'D\x20internal'+'Tex1;\x0a\x20\x20\x20\x20'+'uniform\x20hi'+'ghp\x20sample'+'r2D\x20intern'+'alTex2;\x0a#e'+'ndif\x0a\x0a#ifn'+'def\x20CAMERA'+'PLANES\x0a\x20\x20\x20'+'\x20#define\x20C'+'AMERAPLANE'+'S\x0a\x20\x20\x20\x20unif'+'orm\x20vec4\x20c'+'amera_para'+'ms;\x0a#endif'+'\x0a\x0avarying\x20'+'vec4\x20texCo'+'ordsAlphaL'+'ife;\x0a\x0avec3'+'\x20inPos;\x0ave'+'c3\x20inVel;\x0a'+'float\x20inAn'+'gle;\x0abool\x20'+'inShow;\x0afl'+'oat\x20inLife'+';\x0a'),D3='\x0a\x20\x20\x20\x20vec3\x20'+'negNormal\x20'+'=\x20max(norm'+'al,\x20vec3(0'+'.0));\x0a\x20\x20\x20\x20'+'vec3\x20posNo'+'rmal\x20=\x20max'+'(-normal,\x20'+'vec3(0.0))'+';\x0a',I3='\x0a\x20\x20\x20\x20vec3\x20'+'light\x20=\x20ne'+'gNormal.x*'+'lightCube['+'0]\x20+\x20posNo'+'rmal.x*lig'+'htCube[1]\x20'+'+\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20negN'+'ormal.y*li'+'ghtCube[2]'+'\x20+\x20posNorm'+'al.y*light'+'Cube[3]\x20+\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20negNor'+'mal.z*ligh'+'tCube[4]\x20+'+'\x20posNormal'+'.z*lightCu'+'be[5];\x0a\x0a\x20\x20'+'\x20\x20rgb\x20*=\x20l'+'ight;\x0a',L3='\x0a\x20\x20\x20\x20parti'+'clePos\x20=\x20('+'matrix_mod'+'el\x20*\x20vec4('+'particlePo'+'s,\x201.0)).x'+'yz;\x0a',R3='\x0a\x20\x20\x20\x20vec3\x20'+'localPos\x20='+'\x20meshLocal'+'Pos;\x0a\x20\x20\x20\x20l'+'ocalPos.xy'+'\x20=\x20rotate('+'localPos.x'+'y,\x20inAngle'+',\x20rotMatri'+'x);\x0a\x20\x20\x20\x20lo'+'calPos.yz\x20'+'=\x20rotate(l'+'ocalPos.yz'+',\x20inAngle,'+'\x20rotMatrix'+');\x0a\x0a\x20\x20\x20\x20bi'+'llboard(pa'+'rticlePos,'+'\x20quadXY);\x0a',O3='\x0a\x20\x20\x20\x20Norma'+'l\x20=\x20normal'+'ize(localP'+'os\x20+\x20matri'+'x_viewInve'+'rse[2].xyz'+');\x0a',F3='\x0a\x20\x20\x20\x20vec3\x20'+'normalMap\x20'+'=\x20normaliz'+'e(texture2'+'D(normalMa'+'p,\x20vec2(te'+'xCoordsAlp'+'haLife.x,\x20'+'1.0\x20-\x20texC'+'oordsAlpha'+'Life.y)).x'+'yz\x20*\x202.0\x20-'+'\x201.0);\x0a\x20\x20\x20'+'\x20vec3\x20norm'+'al\x20=\x20Parti'+'cleMat\x20*\x20n'+'ormalMap;\x0a',N3='\x0a\x20\x20\x20\x20//\x20no'+'t\x20the\x20fast'+'est\x20way,\x20b'+'ut\x20easier\x20'+'to\x20plug\x20in'+';\x20TODO:\x20cr'+'eate\x20rot\x20m'+'atrix\x20righ'+'t\x20from\x20vec'+'tors\x0a\x20\x20\x20\x20i'+'nAngle\x20=\x20a'+'tan(veloci'+'tyV.x,\x20vel'+'ocityV.y);'+'\x0a\x0a',k3='\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleUpdater'+'InitPS\x22\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'PACK8\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leInputRgb'+'a8PS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leOutputRg'+'ba8PS\x22\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleInputFl'+'oatPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleOutputF'+'loatPS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20EMITTERSH'+'APE_BOX\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icleUpdate'+'rAABBPS\x22\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticleUpdat'+'erSpherePS'+'\x22\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticleUpda'+'terStartPS'+'\x22\x0a\x0a\x20\x20\x20\x20#if'+'def\x20RESPAW'+'N\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particleUp'+'daterRespa'+'wnPS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20N'+'O_RESPAWN\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticleUpda'+'terNoRespa'+'wnPS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20O'+'N_STOP\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleUpdater'+'OnStopPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icleUpdate'+'rEndPS\x22\x0a',U3='\x0a\x20\x20\x20\x20#if\x20N'+'ORMAL\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20NORM'+'AL\x20==\x20VERT'+'EX\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20varyi'+'ng\x20vec3\x20No'+'rmal;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#if\x20NORMAL'+'\x20==\x20MAP\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'varying\x20ma'+'t3\x20Particl'+'eMat;\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'uniform\x20ve'+'c3\x20lightCu'+'be[6];\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SOFT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20varying'+'\x20float\x20vDe'+'pth;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22screenD'+'epthPS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#inclu'+'de\x20\x22gammaP'+'S\x22\x0a\x20\x20\x20\x20#in'+'clude\x20\x22ton'+'emappingPS'+'\x22\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22fogP'+'S\x22\x0a\x0a\x20\x20\x20\x20#i'+'f\x20NORMAL\x20='+'=\x20MAP\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20unifor'+'m\x20sampler2'+'D\x20normalMa'+'p;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22p'+'articlePS\x22'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20SOFT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_softP'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20NORMAL\x20'+'==\x20VERTEX\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ve'+'c3\x20normal\x20'+'=\x20Normal;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#if\x20'+'NORMAL\x20==\x20'+'MAP\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_normalMap'+'PS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20NORMAL'+'\x20!=\x20NONE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20HALF_L'+'AMBERT\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'article_ha'+'lflambertP'+'S\x22\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'article_la'+'mbertPS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_lighting'+'PS\x22\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20BLEND\x20'+'==\x20NORMAL\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticle_ble'+'ndNormalPS'+'\x22\x0a\x20\x20\x20\x20#eli'+'f\x20BLEND\x20=='+('\x20ADDITIVE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticle_ble'+'ndAddPS\x22\x0a\x20'+'\x20\x20\x20#elif\x20B'+'LEND\x20==\x20MU'+'LTIPLICATI'+'VE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22particle_'+'blendMulti'+'plyPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_endPS\x22\x0a'),B3='\x0a\x20\x20\x20\x20#ifde'+'f\x20ANIMTEX\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20vec2'+'\x20animTexTi'+'lesParams;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20vec'+'4\x20animTexP'+'arams;\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm\x20vec2\x20an'+'imTexIndex'+'Params;\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#if\x20NO'+'RMAL\x20==\x20MA'+'P\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'varying\x20ma'+'t3\x20Particl'+'eMat;\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#if\x20NORM'+'AL\x20==\x20VERT'+'EX\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20varying\x20v'+'ec3\x20Normal'+';\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'fdef\x20SOFT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'rying\x20floa'+'t\x20vDepth;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20PARTICL'+'E_GPU\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cle_initVS'+'\x22\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#ifdef\x20PA'+'CK8\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icleInputR'+'gba8PS\x22\x20\x20\x20'+'\x20\x20//\x20why\x20a'+'re\x20these\x20P'+'S\x20and\x20not\x20'+'VS?\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x20'+'\x22particleI'+'nputFloatP'+'S\x22\x20\x20\x20\x20//\x20w'+'hy\x20are\x20the'+'se\x20PS\x20and\x20'+'not\x20VS?\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20S'+'OFT\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22scre'+'enDepthPS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleVS\x22\x0a\x0a\x20\x20'+'\x20\x20#else\x20//'+'\x20PARTICLE_'+'CPU\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'SOFT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22scr'+'eenDepthPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_cpuVS'+'\x22\x0a\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20LOCA'+'L_SPACE\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_local'+'ShiftVS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20ANIMTEX\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'fdef\x20ANIMT'+'EX_LOOP\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+('#include\x20\x22'+'particleAn'+'imFrameLoo'+'pVS\x22\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22particleA'+'nimFrameCl'+'ampVS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particleAn'+'imTexVS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20//\x20wr'+'ap\x20is\x20not\x20'+'used\x20on\x20CP'+'U,\x20it\x20was\x20'+'commented\x20'+'out.\x20TODO:'+'\x20investiga'+'te\x20why\x0a\x20\x20\x20'+'\x20#ifdef\x20PA'+'RTICLE_GPU'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'ifdef\x20WRAP'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_wrapVS\x22\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#e'+'ndif\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20AL'+'IGN_TO_MOT'+'ION\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_pointAlon'+'gVS\x22\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20US'+'E_MESH\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cle_meshVS'+'\x22\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20CUS'+'TOM_FACE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22particle_'+'customFace'+'VS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particle_b'+'illboardVS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#if\x20NOR'+'MAL\x20==\x20VER'+'TEX\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_normalVS\x22'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'\x20NORMAL\x20=='+'\x20MAP\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_TBNVS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20STRETCH\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticle_str'+'etchVS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20PARTICLE'+'_GPU\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_endVS\x22\x0a\x20'+'\x20\x20\x20#else\x20/'+'/\x20PARTICLE'+'_CPU\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_cpu_endV'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#')+('ifdef\x20SOFT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'article_so'+'ftVS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20}\x0a'),z3='\x0a\x20\x20\x20\x20float'+'\x20depth\x20=\x20g'+'etLinearSc'+'reenDepth('+');\x0a\x20\x20\x20\x20flo'+'at\x20particl'+'eDepth\x20=\x20v'+'Depth;\x0a\x20\x20\x20'+'\x20float\x20dep'+'thDiff\x20=\x20s'+'aturate(ab'+'s(particle'+'Depth\x20-\x20de'+'pth)\x20*\x20sof'+'tening);\x0a\x20'+'\x20\x20\x20a\x20*=\x20de'+'pthDiff;\x0a',V3='\x0a\x20\x20\x20\x20vDept'+'h\x20=\x20getLin'+'earDepth(l'+'ocalPos);\x0a',G3='\x0a\x20\x20\x20\x20vec3\x20'+'moveDir\x20=\x20'+'inVel\x20*\x20st'+'retch;\x0a\x20\x20\x20'+'\x20vec3\x20posP'+'rev\x20=\x20part'+'iclePos\x20-\x20'+'moveDir;\x0a\x20'+'\x20\x20\x20posPrev'+'\x20+=\x20partic'+'lePosMoved'+';\x0a\x0a\x20\x20\x20\x20vec'+'2\x20centerTo'+'VertexV\x20=\x20'+'normalize('+'(mat3(matr'+'ix_view)\x20*'+'\x20localPos)'+'.xy);\x0a\x0a\x20\x20\x20'+'\x20float\x20int'+'erpolation'+'\x20=\x20dot(-ve'+'locityV,\x20c'+'enterToVer'+'texV)\x20*\x200.'+'5\x20+\x200.5;\x0a\x0a'+'\x20\x20\x20\x20partic'+'lePos\x20=\x20mi'+'x(particle'+'Pos,\x20posPr'+'ev,\x20interp'+'olation);\x0a',H3='\x0a\x20\x20\x20\x20mat3\x20'+'rot3\x20=\x20mat'+'3(rotMatri'+'x[0][0],\x20r'+'otMatrix[0'+'][1],\x200.0,'+'\x20rotMatrix'+'[1][0],\x20ro'+'tMatrix[1]'+'[1],\x200.0,\x20'+'0.0,\x200.0,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'ParticleMa'+'t\x20=\x20mat3(-'+'matrix_vie'+'wInverse[0'+'].xyz,\x20-ma'+'trix_viewI'+'nverse[1].'+'xyz,\x20matri'+'x_viewInve'+'rse[2].xyz'+')\x20*\x20rot3;\x0a',W3='\x0a\x20\x20\x20\x20vec3\x20'+'origPartic'+'lePos\x20=\x20pa'+'rticlePos;'+'\x0a\x20\x20\x20\x20parti'+'clePos\x20-=\x20'+'matrix_mod'+'el[3].xyz;'+'\x0a\x20\x20\x20\x20parti'+'clePos\x20=\x20m'+'od(particl'+'ePos,\x20wrap'+'Bounds)\x20-\x20'+'wrapBounds'+'\x20*\x200.5;\x0a\x20\x20'+'\x20\x20particle'+'Pos\x20+=\x20mat'+'rix_model['+'3].xyz;\x0a\x20\x20'+'\x20\x20particle'+'PosMoved\x20='+'\x20particleP'+'os\x20-\x20origP'+'articlePos'+';\x0a',$3={'particlePS':s3,'particleVS':i3,'particleAnimFrameClampVS':r3,'particleAnimFrameLoopVS':a3,'particleAnimTexVS':n3,'particleInputFloatPS':o3,'particleInputRgba8PS':l3,'particleOutputFloatPS':c3,'particleOutputRgba8PS':h3,'particleUpdaterAABBPS':d3,'particleUpdaterEndPS':f3,'particleUpdaterInitPS':u3,'particleUpdaterNoRespawnPS':p3,'particleUpdaterOnStopPS':m3,'particleUpdaterRespawnPS':_3,'particleUpdaterSpherePS':g3,'particleUpdaterStartPS':S3,'particle_billboardVS':y3,'particle_blendAddPS':v3,'particle_blendMultiplyPS':x3,'particle_blendNormalPS':T3,'particle_cpuVS':w3,'particle_cpu_endVS':E3,'particle_customFaceVS':b3,'particle_endPS':A3,'particle_endVS':C3,'particle_halflambertPS':P3,'particle_initVS':M3,'particle_lambertPS':D3,'particle_lightingPS':I3,'particle_localShiftVS':L3,'particle_meshVS':R3,'particle_normalVS':O3,'particle_normalMapPS':F3,'particle_pointAlongVS':N3,'particle_simulationPS':k3,'particle_shaderPS':U3,'particle_shaderVS':B3,'particle_softPS':z3,'particle_softVS':V3,'particle_stretchVS':G3,'particle_TBNVS':H3,'particle_wrapVS':W3},X3='\x0avarying\x20t'+'exCoordsAl'+'phaLife:\x20v'+'ec4f;\x0a\x0avar'+'\x20colorMap:'+'\x20texture_2'+'d<f32>;\x0ava'+'r\x20colorMap'+'Sampler:\x20s'+'ampler;\x0ava'+'r\x20colorPar'+'am:\x20textur'+'e_2d<f32>;'+'\x0avar\x20color'+'ParamSampl'+'er:\x20sample'+'r;\x0a\x0aunifor'+'m\x20graphSam'+'pleSize:\x20f'+'32;\x0aunifor'+'m\x20graphNum'+'Samples:\x20f'+'32;\x0a\x0a#ifnd'+'ef\x20CAMERAP'+'LANES\x0a\x20\x20\x20\x20'+'#define\x20CA'+'MERAPLANES'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20camera_'+'params:\x20ve'+'c4f;\x0a#endi'+'f\x0a\x0auniform'+'\x20softening'+':\x20f32;\x0auni'+'form\x20color'+'Mult:\x20f32;'+'\x0a\x0afn\x20satur'+'ate(x:\x20f32'+')\x20->\x20f32\x20{'+'\x0a\x20\x20\x20\x20retur'+'n\x20clamp(x,'+'\x200.0,\x201.0)'+';\x0a}\x0a\x0a@frag'+'ment\x0afn\x20fr'+'agmentMain'+'(input:\x20Fr'+'agmentInpu'+'t)\x20->\x20Frag'+'mentOutput'+'\x20{\x0a\x20\x20\x20\x20var'+'\x20output:\x20F'+'ragmentOut'+'put;\x0a\x0a\x20\x20\x20\x20'+'let\x20tex:\x20v'+'ec4f\x20\x20=\x20te'+'xtureSampl'+'e(colorMap'+',\x20colorMap'+'Sampler,\x20v'+'ec2f(input'+'.texCoords'+'AlphaLife.'+'x,\x201.0\x20-\x20i'+'nput.texCo'+'ordsAlphaL'+'ife.y));\x0a\x20'+'\x20\x20\x20var\x20ram'+'p:\x20vec4f\x20='+'\x20textureSa'+'mple(color'+'Param,\x20col'+'orParamSam'+'pler,\x20vec2'+'f(input.te'+'xCoordsAlp'+'haLife.w,\x20'+'0.0));\x0a\x20\x20\x20'+'\x20ramp\x20=\x20ve'+'c4f(ramp.r'+'gb\x20*\x20unifo'+'rm.colorMu'+'lt,\x20ramp.a'+');\x0a\x0a\x20\x20\x20\x20ra'+'mp.a\x20=\x20ram'+'p.a\x20+\x20inpu'+'t.texCoord'+'sAlphaLife'+'.z;\x0a\x0a\x20\x20\x20\x20v'+'ar\x20rgb:\x20ve'+'c3f\x20=\x20tex.'+'rgb\x20*\x20ramp'+'.rgb;\x0a\x20\x20\x20\x20'+'var\x20a:\x20f32'+'\x20=\x20tex.a\x20*'+'\x20ramp.a;\x0a',q3='\x0afn\x20unpack'+'3NFloats(s'+'rc:\x20f32)\x20-'+'>\x20vec3f\x20{\x0a'+'\x20\x20\x20\x20let\x20r\x20'+'=\x20fract(sr'+'c);\x0a\x20\x20\x20\x20le'+'t\x20g\x20=\x20frac'+'t(src\x20*\x2025'+'6.0);\x0a\x20\x20\x20\x20'+'let\x20b\x20=\x20fr'+'act(src\x20*\x20'+'65536.0);\x0a'+'\x20\x20\x20\x20return'+'\x20vec3f(r,\x20'+'g,\x20b);\x0a}\x0a\x0a'+'fn\x20saturat'+'e(x:\x20f32)\x20'+'->\x20f32\x20{\x0a\x20'+'\x20\x20\x20return\x20'+'clamp(x,\x200'+'.0,\x201.0);\x0a'+'}\x0a\x0astruct\x20'+'TexLerpUnp'+'ackResult\x20'+'{\x0a\x20\x20\x20\x20resu'+'lt:\x20vec4f,'+'\x0a\x20\x20\x20\x20unpac'+'ked:\x20vec3f'+'\x0a}\x0a\x0afn\x20tex'+'1Dlod_lerp'+'_simple(te'+'x:\x20texture'+'_2d<f32>,\x20'+'texSampler'+':\x20sampler,'+'\x20tc:\x20vec2f'+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20tc_next\x20='+'\x20tc\x20+\x20vec2'+'f(uniform.'+'graphSampl'+'eSize);\x0a\x20\x20'+'\x20\x20return\x20m'+'ix(\x20textur'+'eSample(te'+'x,\x20texSamp'+'ler,\x20tc),\x20'+'textureSam'+'ple(tex,\x20t'+'exSampler,'+'\x20tc_next),'+'\x20fract(tc.'+'x\x20*\x20unifor'+'m.graphNum'+'Samples)\x20)'+';\x0a}\x0a\x0afn\x20te'+'x1Dlod_ler'+'p_unpack(t'+'ex:\x20textur'+'e_2d<f32>,'+'\x20texSample'+'r:\x20sampler'+',\x20tc:\x20vec2'+'f)\x20->\x20TexL'+'erpUnpackR'+'esult\x20{\x0a\x20\x20'+'\x20\x20let\x20tc_n'+'ext\x20=\x20tc\x20+'+'\x20vec2f(uni'+'form.graph'+'SampleSize'+');\x0a\x20\x20\x20\x20let'+'\x20a\x20=\x20textu'+'reSampleLe'+'vel(tex,\x20t'+'exSampler,'+'\x20tc,\x200.0);'+'\x0a\x20\x20\x20\x20let\x20b'+'\x20=\x20texture'+'SampleLeve'+'l(tex,\x20tex'+'Sampler,\x20t'+'c_next,\x200.'+'0);\x0a\x20\x20\x20\x20le'+'t\x20c\x20=\x20frac'+'t(tc.x\x20*\x20u'+'niform.gra'+'phNumSampl'+'es);\x0a\x20\x20\x20\x20l'+'et\x20unpacke'+'dA\x20=\x20unpac'+'k3NFloats('+'a.w);\x0a\x20\x20\x20\x20'+'let\x20unpack'+'edB\x20=\x20unpa'+'ck3NFloats'+'(b.w);\x0a\x20\x20\x20'+'\x20let\x20w_out'+('\x20=\x20mix(unp'+'ackedA,\x20un'+'packedB,\x20c'+');\x0a\x20\x20\x20\x20ret'+'urn\x20TexLer'+'pUnpackRes'+'ult(mix(a,'+'\x20b,\x20c),\x20w_'+'out);\x0a}\x0a\x0as'+'truct\x20Rota'+'teResult\x20{'+'\x0a\x20\x20\x20\x20rotat'+'edVec:\x20vec'+'2f,\x0a\x20\x20\x20\x20ma'+'trix:\x20mat2'+'x2f\x0a}\x0a\x0afn\x20'+'rotateWith'+'Matrix(qua'+'dXY:\x20vec2f'+',\x20pRotatio'+'n:\x20f32)\x20->'+'\x20RotateRes'+'ult\x20{\x0a\x20\x20\x20\x20'+'let\x20c\x20=\x20co'+'s(pRotatio'+'n);\x0a\x20\x20\x20\x20le'+'t\x20s\x20=\x20sin('+'pRotation)'+';\x0a\x20\x20\x20\x20let\x20'+'m\x20=\x20mat2x2'+'f(vec2f(c,'+'\x20s),\x20vec2f'+'(-s,\x20c));\x0a'+'\x20\x20\x20\x20return'+'\x20RotateRes'+'ult(m\x20*\x20qu'+'adXY,\x20m);\x0a'+'}\x0a\x0afn\x20bill'+'board(Inst'+'anceCoords'+':\x20vec3f,\x20q'+'uadXY:\x20vec'+'2f)\x20->\x20vec'+'3f\x20{\x0a\x20\x20\x20\x20v'+'ar\x20pos:\x20ve'+'c3f;\x0a\x20\x20\x20\x20#'+'ifdef\x20SCRE'+'EN_SPACE\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20pos'+'\x20=\x20vec3f(-'+'1.0,\x200.0,\x20'+'0.0)\x20*\x20qua'+'dXY.x\x20+\x20ve'+'c3f(0.0,\x20-'+'1.0,\x200.0)\x20'+'*\x20quadXY.y'+';\x0a\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'pos\x20=\x20-uni'+'form.matri'+'x_viewInve'+'rse[0].xyz'+'\x20*\x20quadXY.'+'x\x20+\x20-unifo'+'rm.matrix_'+'viewInvers'+'e[1].xyz\x20*'+'\x20quadXY.y;'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x20\x20\x20\x20retu'+'rn\x20pos;\x0a}\x0a'+'\x0afn\x20custom'+'Face(Insta'+'nceCoords:'+'\x20vec3f,\x20qu'+'adXY:\x20vec2'+'f)\x20->\x20vec3'+'f\x20{\x0a\x20\x20\x20\x20le'+'t\x20pos\x20=\x20un'+'iform.face'+'Tangent\x20*\x20'+'quadXY.x\x20+'+'\x20uniform.f'+'aceBinorm\x20'+'*\x20quadXY.y'+';\x0a\x20\x20\x20\x20retu'+'rn\x20pos;\x0a}\x0a'+'\x0afn\x20safeNo'+'rmalize(v:'+'\x20vec2f)\x20->'+'\x20vec2f\x20{\x0a\x20'+'\x20\x20\x20let\x20l\x20='+'\x20length(v)'+';\x0a\x20\x20\x20\x20retu'+'rn\x20select('+'v,\x20v\x20/\x20l,\x20'+'l\x20>\x201e-06)'+';\x0a}\x0a\x0a@vert'+'ex\x0afn\x20vert'+'exMain(inp')+('ut:\x20Vertex'+'Input)\x20->\x20'+'VertexOutp'+'ut\x20{\x0a\x20\x20\x20\x20v'+'ar\x20output:'+'\x20VertexOut'+'put;\x0a\x0a\x20\x20\x20\x20'+'let\x20meshLo'+'calPos_in\x20'+'=\x20input.pa'+'rticle_ver'+'texData.xy'+'z;\x0a\x20\x20\x20\x20let'+'\x20id\x20=\x20floo'+'r(input.pa'+'rticle_ver'+'texData.w)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20rndFactor'+'\x20=\x20fract(s'+'in(id\x20+\x201.'+'0\x20+\x20unifor'+'m.seed));\x0a'+'\x20\x20\x20\x20let\x20rn'+'dFactor3\x20='+'\x20vec3f(rnd'+'Factor,\x20fr'+'act(rndFac'+'tor*10.0),'+'\x20fract(rnd'+'Factor*100'+'.0));\x0a\x0a\x20\x20\x20'+'\x20let\x20uv\x20=\x20'+'id\x20/\x20unifo'+'rm.numPart'+'iclesPot;\x0a'+'\x20\x20\x20\x20readIn'+'put(uv);\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20LOCAL_SPA'+'CE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20let\x20model'+'Rotation\x20='+'\x20mat3x3f(u'+'niform.mat'+'rix_model['+'0].xyz,\x20un'+'iform.matr'+'ix_model[1'+'].xyz,\x20uni'+'form.matri'+'x_model[2]'+'.xyz);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20inVel'+'\x20=\x20modelRo'+'tation\x20*\x20i'+'nVel;\x0a\x20\x20\x20\x20'+'#endif\x0a\x20\x20\x20'+'\x20let\x20viewR'+'otation\x20=\x20'+'mat3x3f(un'+'iform.matr'+'ix_view[0]'+'.xyz,\x20unif'+'orm.matrix'+'_view[1].x'+'yz,\x20unifor'+'m.matrix_v'+'iew[2].xyz'+');\x0a\x20\x20\x20\x20let'+'\x20velocityV'+'\x20=\x20safeNor'+'malize((vi'+'ewRotation'+'\x20*\x20inVel).'+'xy);\x0a\x0a\x20\x20\x20\x20'+'let\x20partic'+'leLifetime'+'\x20=\x20uniform'+'.lifetime;'+'\x0a\x0a\x20\x20\x20\x20var\x20'+'meshLocalP'+'os\x20=\x20meshL'+'ocalPos_in'+';\x0a\x20\x20\x20\x20if\x20('+'inLife\x20<=\x20'+'0.0\x20||\x20inL'+'ife\x20>\x20part'+'icleLifeti'+'me\x20||\x20!inS'+'how)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20mesh'+'LocalPos\x20='+'\x20vec3f(0.0'+');\x0a\x20\x20\x20\x20}\x0a\x20'+'\x20\x20\x20let\x20qua'+'dXY\x20=\x20mesh'+'LocalPos.x'+'y;\x0a\x20\x20\x20\x20let'+'\x20nlife\x20=\x20c')+('lamp(inLif'+'e\x20/\x20partic'+'leLifetime'+',\x200.0,\x201.0'+');\x0a\x0a\x20\x20\x20\x20le'+'t\x20lerp_res'+'ult\x20=\x20tex1'+'Dlod_lerp_'+'unpack(int'+'ernalTex2,'+'\x20internalT'+'ex2Sampler'+',\x20vec2f(nl'+'ife,\x200.0))'+';\x0a\x20\x20\x20\x20let\x20'+'params\x20=\x20l'+'erp_result'+'.result;\x0a\x20'+'\x20\x20\x20let\x20par'+'amDiv\x20=\x20le'+'rp_result.'+'unpacked;\x0a'+'\x0a\x20\x20\x20\x20var\x20s'+'cale\x20=\x20par'+'ams.y;\x0a\x20\x20\x20'+'\x20let\x20scale'+'Div\x20=\x20para'+'mDiv.x;\x0a\x20\x20'+'\x20\x20let\x20alph'+'aDiv\x20=\x20par'+'amDiv.z;\x0a\x0a'+'\x20\x20\x20\x20scale\x20'+'=\x20scale\x20+\x20'+'(scaleDiv\x20'+'*\x202.0\x20-\x201.'+'0)\x20*\x20unifo'+'rm.scaleDi'+'vMult\x20*\x20fr'+'act(rndFac'+'tor*10000.'+'0);\x0a\x0a\x20\x20\x20\x20#'+'ifndef\x20USE'+'_MESH\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20output'+'.texCoords'+'AlphaLife\x20'+'=\x20vec4f(qu'+'adXY\x20*\x20-0.'+'5\x20+\x200.5,\x20('+'alphaDiv\x20*'+'\x202.0\x20-\x201.0'+')\x20*\x20unifor'+'m.alphaDiv'+'Mult\x20*\x20fra'+'ct(rndFact'+'or*1000.0)'+',\x20nlife);\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tput.texCo'+'ordsAlphaL'+'ife\x20=\x20vec4'+'f(particle'+'_uv,\x20(alph'+'aDiv\x20*\x202.0'+'\x20-\x201.0)\x20*\x20'+'uniform.al'+'phaDivMult'+'\x20*\x20fract(r'+'ndFactor*1'+'000.0),\x20nl'+'ife);\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20var\x20part'+'iclePos\x20=\x20'+'inPos;\x0a\x20\x20\x20'+'\x20var\x20parti'+'clePosMove'+'d\x20=\x20vec3f('+'0.0);\x0a\x0a\x20\x20\x20'+'\x20var\x20rotMa'+'trix:\x20mat2'+'x2f;\x0a'),j3='\x0a\x20\x20\x20\x20let\x20a'+'nimFrame:\x20'+'f32\x20=\x20min('+'floor(inpu'+'t.texCoord'+'sAlphaLife'+'.w\x20*\x20unifo'+'rm.animTex'+'Params.y)\x20'+'+\x20uniform.'+'animTexPar'+'ams.x,\x20uni'+'form.animT'+'exParams.z'+');\x0a',Y3='\x0a\x20\x20\x20\x20let\x20a'+'nimFrame:\x20'+'f32\x20=\x20floo'+'r((output.'+'texCoordsA'+'lphaLife.w'+'\x20*\x20uniform'+'.animTexPa'+'rams.y\x20+\x20u'+'niform.ani'+'mTexParams'+'.x)\x20%\x20(uni'+'form.animT'+'exParams.z'+'\x20+\x201.0));\x20'+'\x20\x20\x20\x0a',K3='\x0a\x20\x20\x20\x20var\x20a'+'nimationIn'+'dex:\x20f32;\x0a'+'\x0a\x20\x20\x20\x20if\x20(u'+'niform.ani'+'mTexIndexP'+'arams.y\x20=='+'\x201.0)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20anim'+'ationIndex'+'\x20=\x20floor(('+'uniform.an'+'imTexParam'+'s.w\x20+\x201.0)'+'\x20*\x20rndFact'+'or3.z)\x20*\x20('+'uniform.an'+'imTexParam'+'s.z\x20+\x201.0)'+';\x0a\x20\x20\x20\x20}\x20el'+'se\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20animati'+'onIndex\x20=\x20'+'uniform.an'+'imTexIndex'+'Params.x\x20*'+'\x20(uniform.'+'animTexPar'+'ams.z\x20+\x201.'+'0);\x0a\x20\x20\x20\x20}\x0a'+'\x0a\x20\x20\x20\x20var\x20a'+'tlasX:\x20f32'+'\x20=\x20(animat'+'ionIndex\x20+'+'\x20animFrame'+')\x20*\x20unifor'+'m.animTexT'+'ilesParams'+'.x;\x0a\x20\x20\x20\x20le'+'t\x20atlasY:\x20'+'f32\x20=\x201.0\x20'+'-\x20floor(at'+'lasX\x20+\x201.0'+')\x20*\x20unifor'+'m.animTexT'+'ilesParams'+'.y;\x0a\x20\x20\x20\x20at'+'lasX\x20=\x20fra'+'ct(atlasX)'+';\x20//\x20Reass'+'ign\x20atlasX'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'current_tc'+'al_xy\x20=\x20ou'+'tput.texCo'+'ordsAlphaL'+'ife.xy;\x0a\x20\x20'+'\x20\x20let\x20scal'+'ed_tcal_xy'+'\x20=\x20current'+'_tcal_xy\x20*'+'\x20uniform.a'+'nimTexTile'+'sParams.xy'+';\x0a\x20\x20\x20\x20let\x20'+'final_tcal'+'_xy\x20=\x20scal'+'ed_tcal_xy'+'\x20+\x20vec2f(a'+'tlasX,\x20atl'+'asY);\x0a\x20\x20\x20\x20'+'output.tex'+'CoordsAlph'+'aLife\x20=\x20ve'+'c4f(final_'+'tcal_xy,\x20o'+'utput.texC'+'oordsAlpha'+'Life.z,\x20ou'+'tput.texCo'+'ordsAlphaL'+'ife.w);\x0a',Z3='\x0afn\x20readIn'+'put(uv:\x20f3'+'2)\x20{\x0a\x20\x20\x20\x20l'+'et\x20tex:\x20ve'+'c4f\x20=\x20text'+'ureSampleL'+'evel(parti'+'cleTexIN,\x20'+'particleTe'+'xINSampler'+',\x20vec2f(uv'+',\x200.25),\x200'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20tex2:\x20v'+'ec4f\x20=\x20tex'+'tureSample'+'Level(part'+'icleTexIN,'+'\x20particleT'+'exINSample'+'r,\x20vec2f(u'+'v,\x200.75),\x20'+'0.0);\x0a\x0a\x20\x20\x20'+'\x20inPos\x20=\x20t'+'ex.xyz;\x0a\x20\x20'+'\x20\x20inVel\x20=\x20'+'tex2.xyz;\x0a'+'\x20\x20\x20\x20inAngl'+'e\x20=\x20abs(te'+'x.w)\x20-\x20100'+'0.0;\x0a\x20\x20\x20\x20i'+'nShow\x20=\x20te'+'x.w\x20>=\x200.0'+';\x0a\x20\x20\x20\x20inLi'+'fe\x20=\x20tex2.'+'w;\x0a}\x0a',Q3='\x0a//RG=X,\x20B'+'A=Y\x0a//RG=Z'+',\x20BA=A\x0a//R'+'GB=V,\x20A=vi'+'sMode\x0a//RG'+'BA=life\x0a\x0ac'+'onst\x20PI2:\x20'+'f32\x20=\x206.28'+'3185307179'+'586;\x0a\x0aunif'+'orm\x20inBoun'+'dsSize:\x20ve'+'c3f;\x0aunifo'+'rm\x20inBound'+'sCenter:\x20v'+'ec3f;\x0a\x0auni'+'form\x20maxVe'+'l:\x20f32;\x0a\x0af'+'n\x20decodeFl'+'oatRG(rg:\x20'+'vec2f)\x20->\x20'+'f32\x20{\x0a\x20\x20\x20\x20'+'return\x20rg.'+'y\x20*\x20(1.0\x20/'+'\x20255.0)\x20+\x20'+'rg.x;\x0a}\x0a\x0af'+'n\x20decodeFl'+'oatRGBA(\x20r'+'gba:\x20vec4f'+'\x20)\x20->\x20f32\x20'+'{\x0a\x20\x20\x20\x20retu'+'rn\x20dot(rgb'+'a,\x20vec4f(1'+'.0,\x201.0\x20/\x20'+'255.0,\x201.0'+'\x20/\x2065025.0'+',\x201.0\x20/\x2016'+'0581375.0)'+');\x0a}\x0a\x0afn\x20r'+'eadInput(u'+'v:\x20f32)\x20{\x0a'+'\x20\x20\x20\x20let\x20te'+'x0\x20=\x20textu'+'reSampleLe'+'vel(partic'+'leTexIN,\x20p'+'articleTex'+'INSampler,'+'\x20vec2f(uv,'+'\x200.125),\x200'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20tex1\x20=\x20'+'textureSam'+'pleLevel(p'+'articleTex'+'IN,\x20partic'+'leTexINSam'+'pler,\x20vec2'+'f(uv,\x200.37'+'5),\x200.0);\x0a'+'\x20\x20\x20\x20let\x20te'+'x2\x20=\x20textu'+'reSampleLe'+'vel(partic'+'leTexIN,\x20p'+'articleTex'+'INSampler,'+'\x20vec2f(uv,'+'\x200.625),\x200'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20tex3\x20=\x20'+'textureSam'+'pleLevel(p'+'articleTex'+'IN,\x20partic'+'leTexINSam'+'pler,\x20vec2'+'f(uv,\x200.87'+'5),\x200.0);\x0a'+'\x0a\x20\x20\x20\x20inPos'+'\x20=\x20vec3f(d'+'ecodeFloat'+'RG(tex0.rg'+'),\x20decodeF'+'loatRG(tex'+'0.ba),\x20dec'+'odeFloatRG'+'(tex1.rg))'+';\x0a\x20\x20\x20\x20inPo'+'s\x20=\x20(inPos'+'\x20-\x20vec3f(0'+'.5))\x20*\x20uni'+'form.inBou'+'ndsSize\x20+\x20'+'uniform.in'+'BoundsCent'+'er;\x0a\x0a\x20\x20\x20\x20i'+'nVel\x20=\x20tex'+'2.xyz;\x0a\x20\x20\x20'+'\x20inVel\x20=\x20('+('inVel\x20-\x20ve'+'c3f(0.5))\x20'+'*\x20uniform.'+'maxVel;\x0a\x0a\x20'+'\x20\x20\x20inAngle'+'\x20=\x20decodeF'+'loatRG(tex'+'1.ba)\x20*\x20PI'+'2;\x0a\x20\x20\x20\x20inS'+'how\x20=\x20tex2'+'.a\x20>\x200.5;\x0a'+'\x0a\x20\x20\x20\x20let\x20l'+'ife_decode'+'d\x20=\x20decode'+'FloatRGBA('+'tex3);\x0a\x20\x20\x20'+'\x20let\x20maxNe'+'gLife\x20=\x20ma'+'x(uniform.'+'lifetime,\x20'+'(uniform.n'+'umParticle'+'s\x20-\x201.0)\x20*'+'\x20(uniform.'+'rate\x20+\x20uni'+'form.rateD'+'iv));\x0a\x20\x20\x20\x20'+'let\x20maxPos'+'Life\x20=\x20uni'+'form.lifet'+'ime\x20+\x201.0;'+'\x0a\x20\x20\x20\x20inLif'+'e\x20=\x20life_d'+'ecoded\x20*\x20('+'maxNegLife'+'\x20+\x20maxPosL'+'ife)\x20-\x20max'+'NegLife;\x0a}'),J3='\x0afn\x20getOut'+'put()\x20->\x20v'+'ec4f\x20{\x0a\x20\x20\x20'+'\x20if\x20(pcPos'+'ition.y\x20<\x20'+'1.0)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20vec4f(ou'+'tPos,\x20(out'+'Angle\x20+\x2010'+'00.0)\x20*\x20vi'+'sMode);\x0a\x20\x20'+'\x20\x20}\x20else\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20vec4'+'f(outVel,\x20'+'outLife);\x0a'+'\x20\x20\x20\x20}\x0a}\x0a',eO='\x0auniform\x20o'+'utBoundsMu'+'l:\x20vec3f;\x0a'+'uniform\x20ou'+'tBoundsAdd'+':\x20vec3f;\x0a\x0a'+'fn\x20encodeF'+'loatRG(\x20v:'+'\x20f32\x20)\x20->\x20'+'vec2f\x20{\x0a\x20\x20'+'\x20\x20var\x20enc:'+'\x20vec2f\x20=\x20v'+'ec2f(1.0,\x20'+'255.0)\x20*\x20v'+';\x0a\x20\x20\x20\x20enc\x20'+'=\x20fract(en'+'c);\x0a\x20\x20\x20\x20en'+'c\x20=\x20enc\x20-\x20'+'enc.yy\x20*\x20('+'1.0\x20/\x20255.'+'0);\x0a\x20\x20\x20\x20re'+'turn\x20enc;\x0a'+'}\x0a\x0afn\x20enco'+'deFloatRGB'+'A(\x20v:\x20f32\x20'+')\x20->\x20vec4f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20factors\x20='+'\x20vec4f(1.0'+',\x20255.0,\x206'+'5025.0,\x2016'+'0581375.0)'+';\x0a\x20\x20\x20\x20var\x20'+'enc:\x20vec4f'+'\x20=\x20factors'+'\x20*\x20v;\x0a\x20\x20\x20\x20'+'enc\x20=\x20frac'+'t(enc);\x0a\x20\x20'+'\x20\x20enc\x20=\x20en'+'c\x20-\x20enc.yz'+'ww\x20*\x20vec4f'+'(1.0\x20/\x20255'+'.0,\x201.0\x20/\x20'+'255.0,\x201.0'+'\x20/\x20255.0,\x20'+'0.0);\x0a\x20\x20\x20\x20'+'return\x20enc'+';\x0a}\x0a\x0afn\x20ge'+'tOutput()\x20'+'->\x20vec4f\x20{'+'\x0a\x20\x20\x20\x20outPo'+'s\x20=\x20outPos'+'\x20*\x20uniform'+'.outBounds'+'Mul\x20+\x20unif'+'orm.outBou'+'ndsAdd;\x0a\x20\x20'+'\x20\x20outAngle'+'\x20=\x20fract(o'+'utAngle\x20/\x20'+'PI2);\x0a\x0a\x20\x20\x20'+'\x20outVel\x20=\x20'+'(outVel\x20/\x20'+'uniform.ma'+'xVel)\x20+\x20ve'+'c3f(0.5);\x20'+'//\x20TODO:\x20m'+'ul\x0a\x0a\x20\x20\x20\x20le'+'t\x20maxNegLi'+'fe\x20=\x20max(u'+'niform.lif'+'etime,\x20(un'+'iform.numP'+'articles\x20-'+'\x201.0)\x20*\x20(u'+'niform.rat'+'e\x20+\x20unifor'+'m.rateDiv)'+');\x0a\x20\x20\x20\x20let'+'\x20maxPosLif'+'e\x20=\x20unifor'+'m.lifetime'+'\x20+\x201.0;\x0a\x20\x20'+'\x20\x20outLife\x20'+'=\x20(outLife'+'\x20+\x20maxNegL'+'ife)\x20/\x20(ma'+'xNegLife\x20+'+'\x20maxPosLif'+'e);\x0a\x0a\x20\x20\x20\x20i'+'f\x20(pcPosit'+'ion.y\x20<\x201.'+'0)\x20{\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'vec4f(enco'+'deFloatRG('+'outPos.x),'+'\x20encodeFlo'+'atRG(outPo'+'s.y));\x0a\x20\x20\x20'+('\x20}\x20else\x20if'+'\x20(pcPositi'+'on.y\x20<\x202.0'+')\x20{\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20v'+'ec4f(encod'+'eFloatRG(o'+'utPos.z),\x20'+'encodeFloa'+'tRG(outAng'+'le));\x0a\x20\x20\x20\x20'+'}\x20else\x20if\x20'+'(pcPositio'+'n.y\x20<\x203.0)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20return\x20ve'+'c4f(outVel'+',\x20visMode\x20'+'*\x200.5\x20+\x200.'+'5);\x0a\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20retur'+'n\x20encodeFl'+'oatRGBA(ou'+'tLife);\x0a\x20\x20'+'\x20\x20}\x0a}\x0a'),tO='\x0auniform\x20s'+'pawnBounds'+':\x20mat3x3f;'+'\x0auniform\x20s'+'pawnPosInn'+'erRatio:\x20v'+'ec3f;\x0a\x0afn\x20'+'calcSpawnP'+'osition(in'+'Bounds:\x20ve'+'c3f,\x20rndFa'+'ctor:\x20f32)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20var\x20'+'pos\x20=\x20inBo'+'unds\x20-\x20vec'+'3f(0.5);\x0a\x0a'+'\x20\x20\x20\x20let\x20po'+'sAbs\x20=\x20abs'+'(pos);\x0a\x20\x20\x20'+'\x20let\x20maxCo'+'mp\x20=\x20max(p'+'osAbs.x,\x20m'+'ax(posAbs.'+'y,\x20posAbs.'+'z));\x0a\x20\x20\x20\x20l'+'et\x20maxPos\x20'+'=\x20vec3f(ma'+'xComp);\x0a\x0a\x20'+'\x20\x20\x20let\x20edg'+'e\x20=\x20maxPos'+'\x20+\x20(vec3f('+'0.5)\x20-\x20max'+'Pos)\x20*\x20uni'+'form.spawn'+'PosInnerRa'+'tio;\x0a\x0a\x20\x20\x20\x20'+'pos.x\x20=\x20ed'+'ge.x\x20*\x20sel'+'ect(2.0\x20*\x20'+'pos.x,\x20sig'+'n(pos.x),\x20'+'maxPos.x\x20='+'=\x20posAbs.x'+');\x0a\x20\x20\x20\x20pos'+'.y\x20=\x20edge.'+'y\x20*\x20select'+'(2.0\x20*\x20pos'+'.y,\x20sign(p'+'os.y),\x20max'+'Pos.y\x20==\x20p'+'osAbs.y);\x0a'+'\x20\x20\x20\x20pos.z\x20'+'=\x20edge.z\x20*'+'\x20select(2.'+'0\x20*\x20pos.z,'+'\x20sign(pos.'+'z),\x20maxPos'+'.z\x20==\x20posA'+'bs.z);\x0a\x0a\x20\x20'+'\x20\x20#ifndef\x20'+'LOCAL_SPAC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'return\x20uni'+'form.emitt'+'erPos\x20+\x20un'+'iform.spaw'+'nBounds\x20*\x20'+'pos;\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20return\x20'+'uniform.sp'+'awnBounds\x20'+'*\x20pos;\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'+'\x0afn\x20addIni'+'tialVeloci'+'ty(localVe'+'locity:\x20pt'+'r<function'+',\x20vec3f>,\x20'+'inBounds:\x20'+'vec3f)\x20{\x0a\x20'+'\x20\x20\x20*localV'+'elocity\x20=\x20'+'*localVelo'+'city\x20-\x20vec'+'3f(0.0,\x200.'+'0,\x20uniform'+'.initialVe'+'locity);\x0a}'+'\x0a',sO='\x0a\x20\x20\x20\x20outpu'+'t.color\x20=\x20'+'getOutput('+');\x0a\x20\x20\x20\x20ret'+'urn\x20output'+';\x0a}\x0a',iO='\x0avarying\x20v'+'Uv0:\x20vec2f'+';\x0a\x0avar\x20par'+'ticleTexIN'+':\x20texture_'+'2d<f32>;\x0av'+'ar\x20particl'+'eTexINSamp'+'ler:\x20sampl'+'er;\x0avar\x20in'+'ternalTex0'+':\x20texture_'+'2d<f32>;\x0av'+'ar\x20interna'+'lTex0Sampl'+'er:\x20sample'+'r;\x0avar\x20int'+'ernalTex1:'+'\x20texture_2'+'d<f32>;\x0ava'+'r\x20internal'+'Tex1Sample'+'r:\x20sampler'+';\x0avar\x20inte'+'rnalTex2:\x20'+'texture_2d'+'<f32>;\x0avar'+'\x20internalT'+'ex2Sampler'+':\x20sampler;'+'\x0avar\x20inter'+'nalTex3:\x20t'+'exture_2d<'+'f32>;\x0avar\x20'+'internalTe'+'x3Sampler:'+'\x20sampler;\x0a'+'\x0auniform\x20e'+'mitterMatr'+'ix:\x20mat3x3'+'f;\x0auniform'+'\x20emitterMa'+'trixInv:\x20m'+'at3x3f;\x0aun'+'iform\x20emit'+'terScale:\x20'+'vec3f;\x0a\x0aun'+'iform\x20emit'+'terPos:\x20ve'+'c3f;\x0aunifo'+'rm\x20frameRa'+'ndom:\x20vec3'+'f;\x0auniform'+'\x20localVelo'+'cityDivMul'+'t:\x20vec3f;\x0a'+'uniform\x20ve'+'locityDivM'+'ult:\x20vec3f'+';\x0auniform\x20'+'delta:\x20f32'+';\x0auniform\x20'+'rate:\x20f32;'+'\x0auniform\x20r'+'ateDiv:\x20f3'+'2;\x0auniform'+'\x20lifetime:'+'\x20f32;\x0aunif'+'orm\x20numPar'+'ticles:\x20f3'+'2;\x0auniform'+'\x20rotSpeedD'+'ivMult:\x20f3'+'2;\x0auniform'+'\x20radialSpe'+'edDivMult:'+'\x20f32;\x0aunif'+'orm\x20seed:\x20'+'f32;\x0aunifo'+'rm\x20startAn'+'gle:\x20f32;\x0a'+'uniform\x20st'+'artAngle2:'+'\x20f32;\x0aunif'+'orm\x20initia'+'lVelocity:'+'\x20f32;\x0a\x0auni'+'form\x20graph'+'SampleSize'+':\x20f32;\x0auni'+'form\x20graph'+'NumSamples'+':\x20f32;\x0a\x0ava'+'r<private>'+'\x20inPos:\x20ve'+'c3f;\x0avar<p'+'rivate>\x20in'+'Vel:\x20vec3f'+';\x0avar<priv'+'ate>\x20inAng'+('le:\x20f32;\x0av'+'ar<private'+'>\x20inShow:\x20'+'bool;\x0avar<'+'private>\x20i'+'nLife:\x20f32'+';\x0avar<priv'+'ate>\x20visMo'+'de:\x20f32;\x0a\x0a'+'var<privat'+'e>\x20outPos:'+'\x20vec3f;\x0ava'+'r<private>'+'\x20outVel:\x20v'+'ec3f;\x0avar<'+'private>\x20o'+'utAngle:\x20f'+'32;\x0avar<pr'+'ivate>\x20out'+'Show:\x20bool'+';\x0avar<priv'+'ate>\x20outLi'+'fe:\x20f32;\x0a'),rO='\x0a\x20\x20\x20\x20if\x20(o'+'utLife\x20>=\x20'+'uniform.li'+'fetime)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tLife\x20=\x20ou'+'tLife\x20-\x20ma'+'x(uniform.'+'lifetime,\x20'+'(uniform.n'+'umParticle'+'s\x20-\x201.0)\x20*'+'\x20particleR'+'ate);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20visMod'+'e\x20=\x20-1.0;\x0a'+'\x20\x20\x20\x20}\x0a',aO='\x0a\x20\x20\x20\x20visMo'+'de\x20=\x20selec'+'t(visMode,'+'\x20-1.0,\x20out'+'Life\x20<\x200.0'+');\x0a',nO='\x0a\x20\x20\x20\x20if\x20(o'+'utLife\x20>=\x20'+'uniform.li'+'fetime)\x20{\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20le'+'t\x20subtract'+'Amount\x20=\x20m'+'ax(uniform'+'.lifetime,'+'\x20(uniform.'+'numParticl'+'es\x20-\x201.0)\x20'+'*\x20particle'+'Rate);\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20outLi'+'fe\x20=\x20outLi'+'fe\x20-\x20subtr'+'actAmount;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'isMode\x20=\x201'+'.0;\x0a\x20\x20\x20\x20}\x0a'+'\x20\x20\x20\x20visMod'+'e\x20=\x20select'+'(visMode,\x20'+'1.0,\x20outLi'+'fe\x20<\x200.0);'+'\x0a',oO='\x0auniform\x20s'+'pawnBounds'+'Sphere:\x20f3'+'2;\x0auniform'+'\x20spawnBoun'+'dsSphereIn'+'nerRatio:\x20'+'f32;\x0a\x0afn\x20c'+'alcSpawnPo'+'sition(inB'+'ounds:\x20vec'+'3f,\x20rndFac'+'tor:\x20f32)\x20'+'->\x20vec3f\x20{'+'\x0a\x20\x20\x20\x20let\x20r'+'nd4:\x20f32\x20='+'\x20fract(rnd'+'Factor\x20*\x201'+'000.0);\x0a\x20\x20'+'\x20\x20let\x20norm'+':\x20vec3f\x20=\x20'+'normalize('+'inBounds.x'+'yz\x20-\x20vec3f'+'(0.5));\x0a\x20\x20'+'\x20\x20let\x20r:\x20f'+'32\x20=\x20rnd4\x20'+'*\x20(1.0\x20-\x20u'+'niform.spa'+'wnBoundsSp'+'hereInnerR'+'atio)\x20+\x20un'+'iform.spaw'+'nBoundsSph'+'ereInnerRa'+'tio;\x0a\x0a\x20\x20\x20\x20'+'#ifndef\x20LO'+'CAL_SPACE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20unifo'+'rm.emitter'+'Pos\x20+\x20norm'+'\x20*\x20r\x20*\x20uni'+'form.spawn'+'BoundsSphe'+'re;\x0a\x20\x20\x20\x20#e'+'lse\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20n'+'orm\x20*\x20r\x20*\x20'+'uniform.sp'+'awnBoundsS'+'phere;\x0a\x20\x20\x20'+'\x20#endif\x0a}\x0a'+'\x0afn\x20addIni'+'tialVeloci'+'ty(localVe'+'locity:\x20pt'+'r<function'+',\x20vec3f>,\x20'+'inBounds:\x20'+'vec3f)\x20{\x0a\x20'+'\x20\x20\x20let\x20ini'+'tialVelOff'+'set:\x20vec3f'+'\x20=\x20normali'+'ze(inBound'+'s\x20-\x20vec3f('+'0.5))\x20*\x20un'+'iform.init'+'ialVelocit'+'y;\x0a\x20\x20\x20\x20*lo'+'calVelocit'+'y\x20=\x20*local'+'Velocity\x20+'+'\x20initialVe'+'lOffset;\x0a}'+'\x0a',lO='\x0afn\x20satura'+'te(x:\x20f32)'+'\x20->\x20f32\x20{\x0a'+'\x20\x20\x20\x20return'+'\x20clamp(x,\x20'+'0.0,\x201.0);'+'\x0a}\x0a\x0afn\x20unp'+'ack3NFloat'+'s(src:\x20f32'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20r\x20=\x20fract'+'(src);\x0a\x20\x20\x20'+'\x20let\x20g\x20=\x20f'+'ract(src\x20*'+'\x20256.0);\x0a\x20'+'\x20\x20\x20let\x20b\x20='+'\x20fract(src'+'\x20*\x2065536.0'+');\x0a\x20\x20\x20\x20ret'+'urn\x20vec3f('+'r,\x20g,\x20b);\x0a'+'}\x0a\x0a//\x20Stru'+'ct\x20to\x20hand'+'le\x20multipl'+'e\x20return\x20v'+'alues\x20from'+'\x20tex1Dlod_'+'lerp\x0astruc'+'t\x20TexLerpU'+'npackResul'+'t\x20{\x0a\x20\x20\x20\x20re'+'sult:\x20vec3'+'f,\x0a\x20\x20\x20\x20unp'+'acked:\x20vec'+'3f\x0a}\x0a\x0afn\x20t'+'ex1Dlod_le'+'rp(tex:\x20te'+'xture_2d<f'+'32>,\x20texSa'+'mpler:\x20sam'+'pler,\x20tc:\x20'+'vec2f)\x20->\x20'+'TexLerpUnp'+'ackResult\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'tc_next\x20=\x20'+'tc\x20+\x20vec2f'+'(uniform.g'+'raphSample'+'Size);\x0a\x20\x20\x20'+'\x20let\x20a\x20=\x20t'+'extureSamp'+'leLevel(te'+'x,\x20texSamp'+'ler,\x20tc,\x200'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20b\x20=\x20tex'+'tureSample'+'Level(tex,'+'\x20texSample'+'r,\x20tc_next'+',\x200.0);\x0a\x20\x20'+'\x20\x20let\x20c\x20=\x20'+'fract(tc.x'+'\x20*\x20uniform'+'.graphNumS'+'amples);\x0a\x0a'+'\x20\x20\x20\x20let\x20un'+'packedA\x20=\x20'+'unpack3NFl'+'oats(a.w);'+'\x0a\x20\x20\x20\x20let\x20u'+'npackedB\x20='+'\x20unpack3NF'+'loats(b.w)'+';\x0a\x20\x20\x20\x20let\x20'+'w_out\x20=\x20mi'+'x(unpacked'+'A,\x20unpacke'+'dB,\x20c);\x0a\x0a\x20'+'\x20\x20\x20return\x20'+'TexLerpUnp'+'ackResult('+'mix(a.xyz,'+'\x20b.xyz,\x20c)'+',\x20w_out);\x0a'+'}\x0a\x0aconst\x20H'+'ASHSCALE4:'+'\x20vec4f\x20=\x20v'+'ec4f(1031.'+'0,\x200.1030,'+'\x200.0973,\x200'+'.1099);\x0afn'+'\x20hash41(p:'+'\x20f32)\x20->\x20v'+'ec4f\x20{\x0a\x20\x20\x20'+'\x20var\x20p4\x20=\x20'+'fract(vec4'+'f(p)\x20*\x20HAS'+('HSCALE4);\x0a'+'\x20\x20\x20\x20p4\x20=\x20p'+'4\x20+\x20dot(p4'+',\x20p4.wzxy\x20'+'+\x2019.19);\x0a'+'\x20\x20\x20\x20return'+'\x20fract(vec'+'4f((p4.x\x20+'+'\x20p4.y)*p4.'+'z,\x20(p4.x\x20+'+'\x20p4.z)*p4.'+'y,\x20(p4.y\x20+'+'\x20p4.z)*p4.'+'w,\x20(p4.z\x20+'+'\x20p4.w)*p4.'+'x));\x0a}\x0a\x0a@f'+'ragment\x0afn'+'\x20fragmentM'+'ain(input\x20'+':\x20Fragment'+'Input)\x20->\x20'+'FragmentOu'+'tput\x20{\x0a\x20\x20\x20'+'\x20var\x20outpu'+'t:\x20Fragmen'+'tOutput;\x0a\x0a'+'\x20\x20\x20\x20if\x20(pc'+'Position.x'+'\x20>\x20uniform'+'.numPartic'+'les)\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20disca'+'rd;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20return\x20o'+'utput;\x0a\x20\x20\x20'+'\x20}\x0a\x0a\x20\x20\x20\x20re'+'adInput(in'+'put.vUv0.x'+');\x0a\x20\x20\x20\x20vis'+'Mode\x20=\x20sel'+'ect(-1.0,\x20'+'1.0,\x20inSho'+'w);\x0a\x0a\x20\x20\x20\x20l'+'et\x20rndFact'+'or\x20=\x20hash4'+'1(pcPositi'+'on.x\x20+\x20uni'+'form.seed)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20particleR'+'ate\x20=\x20unif'+'orm.rate\x20+'+'\x20uniform.r'+'ateDiv\x20*\x20r'+'ndFactor.x'+';\x0a\x0a\x20\x20\x20\x20out'+'Life\x20=\x20inL'+'ife\x20+\x20unif'+'orm.delta;'+'\x0a\x20\x20\x20\x20let\x20n'+'life\x20=\x20cla'+'mp(outLife'+'\x20/\x20uniform'+'.lifetime,'+'\x200.0,\x201.0)'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20lerpResul'+'t0\x20=\x20tex1D'+'lod_lerp(i'+'nternalTex'+'0,\x20interna'+'lTex0Sampl'+'er,\x20vec2f('+'nlife,\x200.0'+'));\x0a\x20\x20\x20\x20va'+'r\x20localVel'+'ocity\x20=\x20le'+'rpResult0.'+'result;\x0a\x20\x20'+'\x20\x20let\x20loca'+'lVelocityD'+'iv\x20=\x20lerpR'+'esult0.unp'+'acked;\x0a\x0a\x20\x20'+'\x20\x20let\x20lerp'+'Result1\x20=\x20'+'tex1Dlod_l'+'erp(intern'+'alTex1,\x20in'+'ternalTex1'+'Sampler,\x20v'+'ec2f(nlife'+',\x200.0));\x0a\x20'+'\x20\x20\x20var\x20vel'+'ocity\x20=\x20le'+'rpResult1.'+'result;\x0a\x20\x20'+'\x20\x20let\x20velo'+'cityDiv\x20=\x20'+'lerpResult')+('1.unpacked'+';\x0a\x0a\x20\x20\x20\x20let'+'\x20lerpResul'+'t2\x20=\x20tex1D'+'lod_lerp(i'+'nternalTex'+'2,\x20interna'+'lTex2Sampl'+'er,\x20vec2f('+'nlife,\x200.0'+'));\x0a\x20\x20\x20\x20le'+'t\x20params\x20='+'\x20lerpResul'+'t2.result;'+'\x0a\x20\x20\x20\x20let\x20p'+'aramDiv\x20=\x20'+'lerpResult'+'2.unpacked'+';\x0a\x20\x20\x20\x20var\x20'+'rotSpeed\x20='+'\x20params.x;'+'\x0a\x20\x20\x20\x20let\x20r'+'otSpeedDiv'+'\x20=\x20paramDi'+'v.y;\x0a\x0a\x20\x20\x20\x20'+'let\x20lerpRe'+'sult3\x20=\x20te'+'x1Dlod_ler'+'p(internal'+'Tex3,\x20inte'+'rnalTex3Sa'+'mpler,\x20vec'+'2f(nlife,\x20'+'0.0));\x0a\x20\x20\x20'+'\x20let\x20radia'+'lParams\x20=\x20'+'lerpResult'+'3.result;\x0a'+'\x20\x20\x20\x20let\x20ra'+'dialParamD'+'iv\x20=\x20lerpR'+'esult3.unp'+'acked;\x0a\x20\x20\x20'+'\x20let\x20radia'+'lSpeed\x20=\x20r'+'adialParam'+'s.x;\x0a\x20\x20\x20\x20l'+'et\x20radialS'+'peedDiv\x20=\x20'+'radialPara'+'mDiv.y;\x0a\x0a\x20'+'\x20\x20\x20let\x20res'+'pawn\x20=\x20inL'+'ife\x20<=\x200.0'+'\x20||\x20outLif'+'e\x20>=\x20unifo'+'rm.lifetim'+'e;\x0a\x20\x20\x20\x20inP'+'os\x20=\x20selec'+'t(inPos,\x20c'+'alcSpawnPo'+'sition(rnd'+'Factor.xyz'+',\x20rndFacto'+'r.x),\x20resp'+'awn);\x0a\x20\x20\x20\x20'+'inAngle\x20=\x20'+'select(inA'+'ngle,\x20mix('+'uniform.st'+'artAngle,\x20'+'uniform.st'+'artAngle2,'+'\x20rndFactor'+'.x),\x20respa'+'wn);\x0a\x0a\x20\x20\x20\x20'+'#ifndef\x20LO'+'CAL_SPACE\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20va'+'r\x20radialVe'+'l:\x20vec3f\x20='+'\x20inPos\x20-\x20u'+'niform.emi'+'tterPos;\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20radialVel'+':\x20vec3f\x20=\x20'+'inPos;\x0a\x20\x20\x20'+'\x20#endif\x0a\x20\x20'+'\x20\x20radialVe'+'l\x20=\x20select'+'(vec3f(0.0'+'),\x20radialS'+'peed\x20*\x20nor'+'malize(rad'+'ialVel),\x20d'+'ot(radialV'+'el,\x20radial'+'Vel)\x20>\x201.0')+('E-8);\x0a\x20\x20\x20\x20'+'radialVel\x20'+'=\x20radialVe'+'l\x20+\x20(radia'+'lSpeedDiv\x20'+'*\x20vec3f(2.'+'0)\x20-\x20vec3f'+'(1.0))\x20*\x20u'+'niform.rad'+'ialSpeedDi'+'vMult\x20*\x20rn'+'dFactor.xy'+'z;\x0a\x0a\x20\x20\x20\x20lo'+'calVelocit'+'y\x20=\x20localV'+'elocity\x20+\x20'+'(localVelo'+'cityDiv\x20*\x20'+'vec3f(2.0)'+'\x20-\x20vec3f(1'+'.0))\x20*\x20uni'+'form.local'+'VelocityDi'+'vMult\x20*\x20rn'+'dFactor.xy'+'z;\x0a\x20\x20\x20\x20vel'+'ocity\x20=\x20ve'+'locity\x20+\x20('+'velocityDi'+'v\x20*\x20vec3f('+'2.0)\x20-\x20vec'+'3f(1.0))\x20*'+'\x20uniform.v'+'elocityDiv'+'Mult\x20*\x20rnd'+'Factor.xyz'+';\x0a\x20\x20\x20\x20rotS'+'peed\x20=\x20rot'+'Speed\x20+\x20(r'+'otSpeedDiv'+'\x20*\x202.0\x20-\x201'+'.0)\x20*\x20unif'+'orm.rotSpe'+'edDivMult\x20'+'*\x20rndFacto'+'r.y;\x0a\x0a\x20\x20\x20\x20'+'addInitial'+'Velocity(&'+'localVeloc'+'ity,\x20rndFa'+'ctor.xyz);'+'\x0a\x0a\x20\x20\x20\x20#ifn'+'def\x20LOCAL_'+'SPACE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20outVel'+'\x20=\x20uniform'+'.emitterMa'+'trix\x20*\x20loc'+'alVelocity'+'\x20+\x20(radial'+'Vel\x20+\x20velo'+'city)\x20*\x20un'+'iform.emit'+'terScale;\x0a'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20ou'+'tVel\x20=\x20(lo'+'calVelocit'+'y\x20+\x20radial'+'Vel)\x20/\x20uni'+'form.emitt'+'erScale\x20+\x20'+'uniform.em'+'itterMatri'+'xInv\x20*\x20vel'+'ocity;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20outPos\x20'+'=\x20inPos\x20+\x20'+'outVel\x20*\x20u'+'niform.del'+'ta;\x0a\x20\x20\x20\x20ou'+'tAngle\x20=\x20i'+'nAngle\x20+\x20r'+'otSpeed\x20*\x20'+'uniform.de'+'lta;\x0a'),cO='\x0a\x20\x20\x20\x20let\x20r'+'otationRes'+'ult\x20=\x20rota'+'teWithMatr'+'ix(quadXY,'+'\x20inAngle);'+'\x0a\x20\x20\x20\x20let\x20r'+'otatedQuad'+'XY\x20=\x20rotat'+'ionResult.'+'rotatedVec'+';\x0a\x20\x20\x20\x20rotM'+'atrix\x20=\x20ro'+'tationResu'+'lt.matrix;'+'\x0a\x20\x20\x20\x20var\x20l'+'ocalPos\x20=\x20'+'billboard('+'particlePo'+'s,\x20rotated'+'QuadXY);\x0a',hO='\x0a\x20\x20\x20\x20dBlen'+'dModeFogFa'+'ctor\x20=\x200.0'+';\x0a\x20\x20\x20\x20rgb\x20'+'=\x20rgb\x20*\x20sa'+'turate(gam'+'maCorrectI'+'nput(max(a'+',\x200.0)));\x0a'+'\x20\x20\x20\x20if\x20((r'+'gb.r\x20+\x20rgb'+'.g\x20+\x20rgb.b'+')\x20<\x200.0000'+'01)\x20{\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20discar'+'d;\x0a\x20\x20\x20\x20}\x20\x20'+'\x20\x20\x0a',dO='\x0a\x20\x20\x20\x20rgb\x20='+'\x20mix(vec3f'+'(1.0),\x20rgb'+',\x20a);\x0a\x20\x20\x20\x20'+'if\x20((rgb.r'+'\x20+\x20rgb.g\x20+'+'\x20rgb.b)\x20>\x20'+'2.99)\x20{\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20disc'+'ard;\x0a\x20\x20\x20\x20}'+'\x0a',fO='\x0a\x20\x20\x20\x20if\x20(a'+'\x20<\x200.01)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20d'+'iscard;\x0a\x20\x20'+'\x20\x20}\x0a',uO='\x0aattribute'+'\x20particle_'+'vertexData'+':\x20vec4f;\x20\x20'+'\x20//\x20XYZ\x20=\x20'+'world\x20pos,'+'\x20W\x20=\x20life\x0a'+'attribute\x20'+'particle_v'+'ertexData2'+':\x20vec4f;\x20\x20'+'//\x20X\x20=\x20ang'+'le,\x20Y\x20=\x20sc'+'ale,\x20Z\x20=\x20a'+'lpha,\x20W\x20=\x20'+'velocity.x'+'\x0aattribute'+'\x20particle_'+'vertexData'+'3:\x20vec4f;\x20'+'\x20//\x20XYZ\x20=\x20'+'particle\x20l'+'ocal\x20pos,\x20'+'W\x20=\x20veloci'+'ty.y\x0aattri'+'bute\x20parti'+'cle_vertex'+'Data4:\x20f32'+';\x20\x20\x20\x20//\x20pa'+'rticle\x20id\x0a'+'\x0a//\x20type\x20d'+'epends\x20on\x20'+'useMesh\x20pr'+'operty.\x20St'+'art\x20with\x20X'+'\x20=\x20velocit'+'y.z,\x20Y\x20=\x20p'+'article\x20ID'+'\x20and\x20for\x20m'+'esh\x20partic'+'les\x20procee'+'ds\x20with\x20Z\x20'+'=\x20mesh\x20UV.'+'x,\x20W\x20=\x20mes'+'h\x20UV.y\x0a#if'+'ndef\x20USE_M'+'ESH\x0a\x20\x20\x20\x20at'+'tribute\x20pa'+'rticle_ver'+'texData5:\x20'+'vec2f;\x0a#el'+'se\x0a\x20\x20\x20\x20att'+'ribute\x20par'+'ticle_vert'+'exData5:\x20v'+'ec4f;\x0a#end'+'if\x0a\x0aunifor'+'m\x20matrix_v'+'iewProject'+'ion:\x20mat4x'+'4f;\x0aunifor'+'m\x20matrix_m'+'odel:\x20mat4'+'x4f;\x0a\x0a#ifn'+'def\x20VIEWMA'+'TRIX\x0a\x20\x20\x20\x20#'+'define\x20VIE'+'WMATRIX\x0a\x20\x20'+'\x20\x20uniform\x20'+'matrix_vie'+'w:\x20mat4x4f'+';\x0a#endif\x0a\x0a'+'uniform\x20ma'+'trix_norma'+'l:\x20mat3x3f'+';\x0auniform\x20'+'matrix_vie'+'wInverse:\x20'+'mat4x4f;\x0a\x0a'+'uniform\x20nu'+'mParticles'+':\x20f32;\x0auni'+'form\x20lifet'+'ime:\x20f32;\x0a'+'uniform\x20st'+'retch:\x20f32'+';\x0auniform\x20'+'seed:\x20f32;'+'\x0auniform\x20w'+'rapBounds:'+'\x20vec3f;\x0aun'+'iform\x20emit'+'terScale:\x20'+'vec3f;\x0auni'+'form\x20faceT'+'angent:\x20ve'+'c3f;\x0aunifo'+'rm\x20faceBin'+'orm:\x20vec3f'+';\x0a\x0a#ifdef\x20'+('PARTICLE_G'+'PU\x0a\x20\x20\x20\x20var'+'\x20internalT'+'ex0:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20var\x20'+'internalTe'+'x0Sampler:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20var\x20in'+'ternalTex1'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20var\x20int'+'ernalTex1S'+'ampler:\x20sa'+'mpler;\x0a\x20\x20\x20'+'\x20var\x20inter'+'nalTex2:\x20t'+'exture_2d<'+'f32>;\x0a\x20\x20\x20\x20'+'var\x20intern'+'alTex2Samp'+'ler:\x20sampl'+'er;\x0a#endif'+'\x0auniform\x20e'+'mitterPos:'+'\x20vec3f;\x0a\x0av'+'arying\x20tex'+'CoordsAlph'+'aLife:\x20vec'+'4f;\x0a\x0astruc'+'t\x20RotateRe'+'sult\x20{\x0a\x20\x20\x20'+'\x20rotatedVe'+'c:\x20vec2f,\x0a'+'\x20\x20\x20\x20matrix'+':\x20mat2x2f\x0a'+'}\x0a\x0afn\x20rota'+'teWithMatr'+'ix(quadXY:'+'\x20vec2f,\x20pR'+'otation:\x20f'+'32)\x20->\x20Rot'+'ateResult\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'c\x20=\x20cos(pR'+'otation);\x0a'+'\x20\x20\x20\x20let\x20s\x20'+'=\x20sin(pRot'+'ation);\x0a\x20\x20'+'\x20\x20let\x20m\x20=\x20'+'mat2x2f(ve'+'c2f(c,\x20s),'+'\x20vec2f(-s,'+'\x20c));\x0a\x20\x20\x20\x20'+'return\x20Rot'+'ateResult('+'m\x20*\x20quadXY'+',\x20m);\x0a}\x0a\x0a\x0a'+'fn\x20billboa'+'rd(Instanc'+'eCoords:\x20v'+'ec3f,\x20quad'+'XY:\x20vec2f)'+'\x20->\x20vec3f\x20'+'{\x0a\x20\x20\x20\x20let\x20'+'pos\x20=\x20-uni'+'form.matri'+'x_viewInve'+'rse[0].xyz'+'\x20*\x20quadXY.'+'x\x20+\x20-unifo'+'rm.matrix_'+'viewInvers'+'e[1].xyz\x20*'+'\x20quadXY.y;'+'\x0a\x20\x20\x20\x20retur'+'n\x20pos;\x0a}\x0a\x0a'+'fn\x20customF'+'ace(Instan'+'ceCoords:\x20'+'vec3f,\x20qua'+'dXY:\x20vec2f'+')\x20->\x20vec3f'+'\x20{\x0a\x20\x20\x20\x20let'+'\x20pos\x20=\x20uni'+'form.faceT'+'angent\x20*\x20q'+'uadXY.x\x20+\x20'+'uniform.fa'+'ceBinorm\x20*'+'\x20quadXY.y;'+'\x0a\x20\x20\x20\x20retur'+'n\x20pos;\x0a}\x0a\x0a'+'fn\x20safeNor'+'malize(v:\x20'+'vec2f)\x20->\x20'+'vec2f\x20{\x0a\x20\x20'+'\x20\x20let\x20l\x20=\x20')+('length(v);'+'\x0a\x20\x20\x20\x20retur'+'n\x20select(v'+',\x20v\x20/\x20l,\x20l'+'\x20>\x201e-06);'+'\x0a}\x0a\x0a@verte'+'x\x0afn\x20verte'+'xMain(inpu'+'t:\x20VertexI'+'nput)\x20->\x20V'+'ertexOutpu'+'t\x20{\x0a\x20\x20\x20\x20va'+'r\x20output:\x20'+'VertexOutp'+'ut;\x0a\x0a\x20\x20\x20\x20v'+'ar\x20particl'+'ePos\x20=\x20inp'+'ut.particl'+'e_vertexDa'+'ta.xyz;\x0a\x20\x20'+'\x20\x20let\x20inPo'+'s\x20=\x20partic'+'lePos;\x0a\x20\x20\x20'+'\x20let\x20vertP'+'os\x20=\x20input'+'.particle_'+'vertexData'+'3.xyz;\x0a\x20\x20\x20'+'\x20var\x20inVel'+'\x20=\x20vec3f(i'+'nput.parti'+'cle_vertex'+'Data2.w,\x20i'+'nput.parti'+'cle_vertex'+'Data3.w,\x20i'+'nput.parti'+'cle_vertex'+'Data5.x);\x0a'+'\x0a\x20\x20\x20\x20let\x20i'+'d\x20=\x20floor('+'input.part'+'icle_verte'+'xData4);\x0a\x20'+'\x20\x20\x20let\x20rnd'+'Factor\x20=\x20f'+'ract(sin(i'+'d\x20+\x201.0\x20+\x20'+'uniform.se'+'ed));\x0a\x20\x20\x20\x20'+'let\x20rndFac'+'tor3\x20=\x20vec'+'3f(rndFact'+'or,\x20fract('+'rndFactor*'+'10.0),\x20fra'+'ct(rndFact'+'or*100.0))'+';\x0a\x0a\x20\x20\x20\x20#if'+'def\x20LOCAL_'+'SPACE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20let\x20mo'+'delRotatio'+'n\x20=\x20mat3x3'+'f(uniform.'+'matrix_mod'+'el[0].xyz,'+'\x20uniform.m'+'atrix_mode'+'l[1].xyz,\x20'+'uniform.ma'+'trix_model'+'[2].xyz);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20in'+'Vel\x20=\x20mode'+'lRotation\x20'+'*\x20inVel;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x20\x20\x20\x20let\x20ve'+'locityV\x20=\x20'+'safeNormal'+'ize((mat3x'+'3f(uniform'+'.matrix_vi'+'ew[0].xyz,'+'\x20uniform.m'+'atrix_view'+'[1].xyz,\x20u'+'niform.mat'+'rix_view[2'+'].xyz)\x20*\x20i'+'nVel).xy);'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'quadXY\x20=\x20v'+'ertPos.xy;'+'\x0a\x0a\x20\x20\x20\x20#ifd'+'ef\x20USE_MES'+'H\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'output.tex'+'CoordsAlph')+('aLife\x20=\x20ve'+'c4f(input.'+'particle_v'+'ertexData5'+'.zw,\x20input'+'.particle_'+'vertexData'+'2.z,\x20input'+'.particle_'+'vertexData'+'.w);\x0a\x20\x20\x20\x20#'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20output.'+'texCoordsA'+'lphaLife\x20='+'\x20vec4f(qua'+'dXY\x20*\x20-0.5'+'\x20+\x200.5,\x20in'+'put.partic'+'le_vertexD'+'ata2.z,\x20in'+'put.partic'+'le_vertexD'+'ata.w);\x0a\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20var\x20rot'+'Matrix:\x20ma'+'t2x2f;\x0a\x0a\x20\x20'+'\x20\x20var\x20inAn'+'gle\x20=\x20inpu'+'t.particle'+'_vertexDat'+'a2.x;\x0a\x20\x20\x20\x20'+'var\x20partic'+'lePosMoved'+'\x20=\x20vec3f(0'+'.0);\x0a\x20\x20\x20\x20l'+'et\x20meshLoc'+'alPos\x20=\x20in'+'put.partic'+'le_vertexD'+'ata3.xyz;\x0a'),pO='\x0a\x20\x20\x20\x20local'+'Pos\x20=\x20loca'+'lPos\x20*\x20inp'+'ut.particl'+'e_vertexDa'+'ta2.y\x20*\x20un'+'iform.emit'+'terScale;\x0a'+'\x20\x20\x20\x20localP'+'os\x20=\x20local'+'Pos\x20+\x20part'+'iclePos;\x0a\x0a'+'\x20\x20\x20\x20output'+'.position\x20'+'=\x20uniform.'+'matrix_vie'+'wProjectio'+'n\x20*\x20vec4f('+'localPos,\x20'+'1.0);\x0a',mO='\x0a\x20\x20\x20\x20let\x20r'+'otationRes'+'ult\x20=\x20rota'+'teWithMatr'+'ix(quadXY,'+'\x20inAngle);'+'\x0a\x20\x20\x20\x20let\x20r'+'otatedQuad'+'XY\x20=\x20rotat'+'ionResult.'+'rotatedVec'+';\x0a\x20\x20\x20\x20rotM'+'atrix\x20=\x20ro'+'tationResu'+'lt.matrix;'+'\x0a\x20\x20\x20\x20var\x20l'+'ocalPos\x20=\x20'+'customFace'+'(particleP'+'os,\x20rotate'+'dQuadXY);\x0a',_O='\x0a\x20\x20\x20\x20rgb\x20='+'\x20addFog(rg'+'b);\x0a\x20\x20\x20\x20rg'+'b\x20=\x20toneMa'+'p(rgb);\x0a\x20\x20'+'\x20\x20rgb\x20=\x20ga'+'mmaCorrect'+'Output(rgb'+');\x0a\x20\x20\x20\x20out'+'put.color\x20'+'=\x20vec4f(rg'+'b,\x20a);\x0a\x20\x20\x20'+'\x20return\x20ou'+'tput;\x0a}\x0a',gO='\x0a\x20\x20\x20\x20local'+'Pos\x20=\x20loca'+'lPos\x20*\x20sca'+'le\x20*\x20unifo'+'rm.emitter'+'Scale;\x0a\x20\x20\x20'+'\x20localPos\x20'+'=\x20localPos'+'\x20+\x20particl'+'ePos;\x0a\x0a\x20\x20\x20'+'\x20#ifdef\x20SC'+'REEN_SPACE'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20o'+'utput.posi'+'tion\x20=\x20vec'+'4f(localPo'+'s.x,\x20local'+'Pos.y,\x200.0'+',\x201.0);\x0a\x20\x20'+'\x20\x20#else\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20outp'+'ut.positio'+'n\x20=\x20unifor'+'m.matrix_v'+'iewProject'+'ion\x20*\x20vec4'+'f(localPos'+'.xyz,\x201.0)'+';\x0a\x20\x20\x20\x20#end'+'if\x0a',SO='\x0a\x20\x20\x20\x20var\x20n'+'egNormal:\x20'+'vec3f\x20=\x20no'+'rmal\x20*\x200.5'+'\x20+\x200.5;\x0a\x20\x20'+'\x20\x20var\x20posN'+'ormal:\x20vec'+'3f\x20=\x20-norm'+'al\x20*\x200.5\x20+'+'\x200.5;\x0a\x20\x20\x20\x20'+'negNormal\x20'+'=\x20negNorma'+'l\x20*\x20negNor'+'mal;\x0a\x20\x20\x20\x20p'+'osNormal\x20='+'\x20posNormal'+'\x20*\x20posNorm'+'al;\x0a',yO='\x0aattribute'+'\x20particle_'+'vertexData'+':\x20vec4f;\x20/'+'/\x20XYZ\x20=\x20pa'+'rticle\x20pos'+'ition,\x20W\x20='+'\x20particle\x20'+'ID\x20+\x20rando'+'m\x20factor\x0a#'+'if\x20defined'+'(USE_MESH)'+'\x0a\x20\x20\x20\x20#if\x20d'+'efined(USE'+'_MESH_UV)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20at'+'tribute\x20pa'+'rticle_uv:'+'\x20vec2f;\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20//\x20m'+'esh\x20UV\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var<p'+'rivate>\x20pa'+'rticle_uv:'+'\x20vec2f\x20=\x20v'+'ec2f(0.0,\x20'+'0.0);\x0a\x20\x20\x20\x20'+'#endif\x0a#en'+'dif\x0a\x0aunifo'+'rm\x20matrix_'+'viewProjec'+'tion:\x20mat4'+'x4f;\x0aunifo'+'rm\x20matrix_'+'model:\x20mat'+'4x4f;\x0aunif'+'orm\x20matrix'+'_normal:\x20m'+'at3x3f;\x0aun'+'iform\x20matr'+'ix_viewInv'+'erse:\x20mat4'+'x4f;\x0a\x0a#ifn'+'def\x20VIEWMA'+'TRIX\x0a\x20\x20\x20\x20#'+'define\x20VIE'+'WMATRIX\x0a\x20\x20'+'\x20\x20uniform\x20'+'matrix_vie'+'w:\x20mat4x4f'+';\x0a#endif\x0a\x0a'+'uniform\x20nu'+'mParticles'+':\x20f32;\x0auni'+'form\x20numPa'+'rticlesPot'+':\x20f32;\x0auni'+'form\x20graph'+'SampleSize'+':\x20f32;\x0auni'+'form\x20graph'+'NumSamples'+':\x20f32;\x0auni'+'form\x20stret'+'ch:\x20f32;\x0au'+'niform\x20wra'+'pBounds:\x20v'+'ec3f;\x0aunif'+'orm\x20emitte'+'rScale:\x20ve'+'c3f;\x0aunifo'+'rm\x20emitter'+'Pos:\x20vec3f'+';\x0auniform\x20'+'faceTangen'+'t:\x20vec3f;\x0a'+'uniform\x20fa'+'ceBinorm:\x20'+'vec3f;\x0auni'+'form\x20rate:'+'\x20f32;\x0aunif'+'orm\x20rateDi'+'v:\x20f32;\x0aun'+'iform\x20life'+'time:\x20f32;'+'\x0auniform\x20d'+'eltaRandom'+'nessStatic'+':\x20f32;\x0auni'+'form\x20scale'+'DivMult:\x20f'+'32;\x0aunifor'+'m\x20alphaDiv'+'Mult:\x20f32;'+'\x0auniform\x20s'+'eed:\x20f32;\x0a'+'uniform\x20de'+'lta:\x20f32;\x0a'+'\x0avar\x20parti'+('cleTexOUT:'+'\x20texture_2'+'d<f32>;\x0ava'+'r\x20particle'+'TexOUTSamp'+'ler:\x20sampl'+'er;\x0avar\x20pa'+'rticleTexI'+'N:\x20texture'+'_2d<f32>;\x0a'+'var\x20partic'+'leTexINSam'+'pler:\x20samp'+'ler;\x0a\x0a#ifd'+'ef\x20PARTICL'+'E_GPU\x0a\x20\x20\x20\x20'+'var\x20intern'+'alTex0:\x20te'+'xture_2d<f'+'32>;\x0a\x20\x20\x20\x20v'+'ar\x20interna'+'lTex0Sampl'+'er:\x20sample'+'r;\x0a\x20\x20\x20\x20var'+'\x20internalT'+'ex1:\x20textu'+'re_2d<f32>'+';\x0a\x20\x20\x20\x20var\x20'+'internalTe'+'x1Sampler:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20var\x20in'+'ternalTex2'+':\x20texture_'+'2d<f32>;\x0a\x20'+'\x20\x20\x20var\x20int'+'ernalTex2S'+'ampler:\x20sa'+'mpler;\x0a#en'+'dif\x0a\x0a#ifnd'+'ef\x20CAMERAP'+'LANES\x0a\x20\x20\x20\x20'+'#define\x20CA'+'MERAPLANES'+'\x0a\x20\x20\x20\x20unifo'+'rm\x20camera_'+'params:\x20ve'+'c4f;\x0a#endi'+'f\x0a\x0avarying'+'\x20texCoords'+'AlphaLife:'+'\x20vec4f;\x0a\x0av'+'ar<private'+'>\x20inPos:\x20v'+'ec3f;\x0avar<'+'private>\x20i'+'nVel:\x20vec3'+'f;\x0avar<pri'+'vate>\x20inAn'+'gle:\x20f32;\x0a'+'var<privat'+'e>\x20inShow:'+'\x20bool;\x0avar'+'<private>\x20'+'inLife:\x20f3'+'2;\x0a'),vO='\x0a\x20\x20\x20\x20var\x20n'+'egNormal:\x20'+'vec3f\x20=\x20ma'+'x(normal,\x20'+'vec3(0.0))'+';\x0a\x20\x20\x20\x20var\x20'+'posNormal:'+'\x20vec3f\x20=\x20m'+'ax(-normal'+',\x20vec3(0.0'+'));\x0a',xO='\x0a\x20\x20\x20\x20let\x20l'+'ight:\x20vec3'+'f\x20=\x20negNor'+'mal.x\x20*\x20un'+'iform.ligh'+'tCube[0]\x20+'+'\x20posNormal'+'.x\x20*\x20unifo'+'rm.lightCu'+'be[1]\x20+\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20negNormal'+'.y\x20*\x20unifo'+'rm.lightCu'+'be[2]\x20+\x20po'+'sNormal.y\x20'+'*\x20uniform.'+'lightCube['+'3]\x20+\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20ne'+'gNormal.z\x20'+'*\x20uniform.'+'lightCube['+'4]\x20+\x20posNo'+'rmal.z\x20*\x20u'+'niform.lig'+'htCube[5];'+'\x0a\x0a\x20\x20\x20\x20rgb\x20'+'=\x20rgb\x20*\x20li'+'ght;\x0a',TO='\x0aparticleP'+'os\x20=\x20(unif'+'orm.matrix'+'_model\x20*\x20v'+'ec4f(parti'+'clePos,\x201.'+'0)).xyz;\x0a',wO='\x0avar\x20local'+'Pos\x20=\x20mesh'+'LocalPos;\x0a'+'let\x20rotRes'+'ultXY\x20=\x20ro'+'tateWithMa'+'trix(local'+'Pos.xy,\x20in'+'Angle);\x0alo'+'calPos\x20=\x20v'+'ec3f(rotRe'+'sultXY.rot'+'atedVec,\x20l'+'ocalPos.z)'+';\x0arotMatri'+'x\x20=\x20rotRes'+'ultXY.matr'+'ix;\x0a\x0alet\x20r'+'otResultYZ'+'\x20=\x20rotateW'+'ithMatrix('+'localPos.y'+'z,\x20inAngle'+');\x0alocalPo'+'s\x20=\x20vec3f('+'localPos.x'+',\x20rotResul'+'tYZ.rotate'+'dVec);\x0arot'+'Matrix\x20=\x20r'+'otResultYZ'+'.matrix;\x0a\x0a'+'billboard('+'particlePo'+'s,\x20quadXY)'+';\x0a',EO='\x0aoutput.No'+'rmal\x20=\x20nor'+'malize(loc'+'alPos\x20+\x20un'+'iform.matr'+'ix_viewInv'+'erse[2].xy'+'z);\x0a',bO='\x0a\x20\x20\x20\x20let\x20s'+'ampledNorm'+'al:\x20vec4f\x20'+'=\x20textureS'+'ample(norm'+'alMap,\x20nor'+'malMapSamp'+'ler,\x20vec2f'+'(input.tex'+'CoordsAlph'+'aLife.x,\x201'+'.0\x20-\x20input'+'.texCoords'+'AlphaLife.'+'y));\x0a\x20\x20\x20\x20l'+'et\x20normalM'+'ap:\x20vec3f\x20'+'=\x20normaliz'+'e(sampledN'+'ormal.xyz\x20'+'*\x202.0\x20-\x201.'+'0);\x0a\x0a\x20\x20\x20\x20l'+'et\x20Particl'+'eMat\x20=\x20mat'+'3x3<f32>(P'+'articleMat'+'0,\x20Particl'+'eMat1,\x20Par'+'ticleMat2)'+';\x0a\x20\x20\x20\x20let\x20'+'normal:\x20ve'+'c3f\x20=\x20Part'+'icleMat\x20*\x20'+'normalMap;'+'\x0a',AO='\x0a\x20\x20\x20\x20//\x20no'+'t\x20the\x20fast'+'est\x20way,\x20b'+'ut\x20easier\x20'+'to\x20plug\x20in'+';\x20TODO:\x20cr'+'eate\x20rot\x20m'+'atrix\x20righ'+'t\x20from\x20vec'+'tors\x0a\x20\x20\x20\x20i'+'nAngle\x20=\x20a'+'tan2(veloc'+'ityV.x,\x20ve'+'locityV.y)'+';\x0a',CO='\x0a\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleUpdater'+'InitPS\x22\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'PACK8\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leInputRgb'+'a8PS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leOutputRg'+'ba8PS\x22\x0a\x20\x20\x20'+'\x20#else\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleInputFl'+'oatPS\x22\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleOutputF'+'loatPS\x22\x0a\x20\x20'+'\x20\x20#endif\x0a\x0a'+'\x20\x20\x20\x20#ifdef'+'\x20EMITTERSH'+'APE_BOX\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icleUpdate'+'rAABBPS\x22\x0a\x20'+'\x20\x20\x20#else\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticleUpdat'+'erSpherePS'+'\x22\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticleUpda'+'terStartPS'+'\x22\x0a\x0a\x20\x20\x20\x20#if'+'def\x20RESPAW'+'N\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particleUp'+'daterRespa'+'wnPS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20N'+'O_RESPAWN\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22pa'+'rticleUpda'+'terNoRespa'+'wnPS\x22\x0a\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20#ifdef\x20O'+'N_STOP\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleUpdater'+'OnStopPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icleUpdate'+'rEndPS\x22\x0a',PO='\x0a\x20\x20\x20\x20#if\x20N'+'ORMAL\x20!=\x20N'+'ONE\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20NORM'+'AL\x20==\x20VERT'+'EX\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20varyi'+'ng\x20Normal:'+'\x20vec3f;\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#end'+'if\x0a\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#if\x20NORM'+'AL\x20==\x20MAP\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20varying\x20'+'ParticleMa'+'t0:\x20vec3f;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20varying'+'\x20ParticleM'+'at1:\x20vec3f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20varyin'+'g\x20Particle'+'Mat2:\x20vec3'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20uni'+'form\x20light'+'Cube:\x20arra'+'y<vec3f,\x206'+'>;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20SOFT'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'arying\x20vDe'+'pth:\x20f32;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20#i'+'nclude\x20\x22sc'+'reenDepthP'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'include\x20\x22g'+'ammaPS\x22\x0a\x20\x20'+'\x20\x20#include'+'\x20\x22tonemapp'+'ingPS\x22\x0a\x20\x20\x20'+'\x20#include\x20'+'\x22fogPS\x22\x0a\x0a\x20'+'\x20\x20\x20#if\x20NOR'+'MAL\x20==\x20MAP'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20normalM'+'ap:\x20textur'+'e_2d<f32>;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20v'+'ar\x20normalM'+'apSampler:'+'\x20sampler;\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'iclePS\x22\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SOFT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_softPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#if\x20'+'NORMAL\x20==\x20'+'VERTEX\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20n'+'ormal:\x20vec'+'3f\x20=\x20Norma'+'l;\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'if\x20NORMAL\x20'+'==\x20MAP\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cle_normal'+'MapPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#if\x20NOR'+'MAL\x20!=\x20NON'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#ifdef\x20HAL'+'F_LAMBERT\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_halflambe'+'rtPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#else\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_lambertPS'+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+('#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_light'+'ingPS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#if\x20BLE'+'ND\x20==\x20NORM'+'AL\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22particle_'+'blendNorma'+'lPS\x22\x0a\x20\x20\x20\x20#'+'elif\x20BLEND'+'\x20==\x20ADDITI'+'VE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22particle_'+'blendAddPS'+'\x22\x0a\x20\x20\x20\x20#eli'+'f\x20BLEND\x20=='+'\x20MULTIPLIC'+'ATIVE\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'le_blendMu'+'ltiplyPS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_endPS'+'\x22\x0a'),MO='\x0a\x20\x20\x20\x20#ifde'+'f\x20ANIMTEX\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20un'+'iform\x20anim'+'TexTilesPa'+'rams:\x20vec2'+'f;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20uniform\x20a'+'nimTexPara'+'ms:\x20vec4f;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'niform\x20ani'+'mTexIndexP'+'arams:\x20vec'+'2f;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#if\x20NORMAL'+'\x20==\x20MAP\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20vary'+'ing\x20Partic'+'leMat0:\x20ve'+'c3f;\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20varying'+'\x20ParticleM'+'at1:\x20vec3f'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'varying\x20Pa'+'rticleMat2'+':\x20vec3f;\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#if\x20N'+'ORMAL\x20==\x20V'+'ERTEX\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20varyin'+'g\x20Normal:\x20'+'vec3f;\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SOFT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20varying'+'\x20vDepth:\x20f'+'32;\x0a\x20\x20\x20\x20#e'+'ndif\x0a\x0a\x20\x20\x20\x20'+'#ifdef\x20PAR'+'TICLE_GPU\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'article_in'+'itVS\x22\x0a\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20#ifde'+'f\x20PACK8\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particleIn'+'putRgba8PS'+'\x22\x20\x20\x20\x20\x20//\x20w'+'hy\x20are\x20the'+'se\x20PS\x20and\x20'+'not\x20VS?\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x20\x22parti'+'cleInputFl'+'oatPS\x22\x20\x20\x20\x20'+'//\x20why\x20are'+'\x20these\x20PS\x20'+'and\x20not\x20VS'+'?\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#endif\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#ifd'+'ef\x20SOFT\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'screenDept'+'hPS\x22\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'articleVS\x22'+'\x0a\x0a\x20\x20\x20\x20#els'+'e\x20//\x20PARTI'+'CLE_CPU\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#if'+'def\x20SOFT\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20#include\x20'+'\x22screenDep'+'thPS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particle_c'+'puVS\x22\x0a\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'LOCAL_SPAC'+'E\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'#include\x20\x22'+'particle_l'+('ocalShiftV'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20ANIM'+'TEX\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#ifdef\x20A'+'NIMTEX_LOO'+'P\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leAnimFram'+'eLoopVS\x22\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#el'+'se\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cleAnimFra'+'meClampVS\x22'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'endif\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'leAnimTexV'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20/'+'/\x20wrap\x20is\x20'+'not\x20used\x20o'+'n\x20CPU,\x20it\x20'+'was\x20commen'+'ted\x20out.\x20T'+'ODO:\x20inves'+'tigate\x20why'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20PARTICLE'+'_GPU\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#ifdef\x20'+'WRAP\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticle_wrap'+'VS\x22\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#endif\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20ALIGN_TO'+'_MOTION\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_point'+'AlongVS\x22\x0a\x20'+'\x20\x20\x20#endif\x0a'+'\x0a\x20\x20\x20\x20#ifde'+'f\x20USE_MESH'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+'include\x20\x22p'+'article_me'+'shVS\x22\x0a\x20\x20\x20\x20'+'#else\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#ifdef'+'\x20CUSTOM_FA'+'CE\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20#incl'+'ude\x20\x22parti'+'cle_custom'+'FaceVS\x22\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#els'+'e\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20#inclu'+'de\x20\x22partic'+'le_billboa'+'rdVS\x22\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20#endif'+'\x0a\x20\x20\x20\x20#endi'+'f\x0a\x0a\x20\x20\x20\x20#if'+'\x20NORMAL\x20=='+'\x20VERTEX\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20#inc'+'lude\x20\x22part'+'icle_norma'+'lVS\x22\x0a\x20\x20\x20\x20#'+'endif\x0a\x0a\x20\x20\x20'+'\x20#if\x20NORMA'+'L\x20==\x20MAP\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticle_TBNV'+'S\x22\x0a\x20\x20\x20\x20#en'+'dif\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20STRE'+'TCH\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20#include'+'\x20\x22particle'+'_stretchVS'+'\x22\x0a\x20\x20\x20\x20#end'+'if\x0a\x0a\x0a\x20\x20\x20\x20#'+'ifdef\x20PART'+'ICLE_GPU\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticle_endV')+('S\x22\x0a\x20\x20\x20\x20#el'+'se\x20//\x20PART'+'ICLE_CPU\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20#in'+'clude\x20\x22par'+'ticle_cpu_'+'endVS\x22\x0a\x20\x20\x20'+'\x20#endif\x0a\x0a\x20'+'\x20\x20\x20#ifdef\x20'+'SOFT\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20#includ'+'e\x20\x22particl'+'e_softVS\x22\x0a'+'\x20\x20\x20\x20#endif'+'\x0a\x0a\x20\x20\x20\x20retu'+'rn\x20output;'+'\x0a}\x0a'),DO='\x0a\x20\x20\x20\x20var\x20d'+'epth:\x20f32\x20'+'=\x20getLinea'+'rScreenDep'+'thFrag();\x0a'+'\x20\x20\x20\x20var\x20pa'+'rticleDept'+'h:\x20f32\x20=\x20v'+'Depth;\x0a\x20\x20\x20'+'\x20var\x20depth'+'Diff:\x20f32\x20'+'=\x20saturate'+'(abs(parti'+'cleDepth\x20-'+'\x20depth)\x20*\x20'+'uniform.so'+'ftening);\x0a'+'\x20\x20\x20\x20a\x20=\x20a\x20'+'*\x20depthDif'+'f;\x0a',IO='\x0a\x20\x20\x20\x20outpu'+'t.vDepth\x20='+'\x20getLinear'+'Depth(loca'+'lPos);\x0a',LO='\x0a\x20\x20\x20\x20let\x20m'+'oveDir:\x20ve'+'c3f\x20=\x20inVe'+'l\x20*\x20unifor'+'m.stretch;'+'\x0a\x20\x20\x20\x20var\x20p'+'osPrev:\x20ve'+'c3f\x20=\x20part'+'iclePos\x20-\x20'+'moveDir;\x0a\x20'+'\x20\x20\x20posPrev'+'\x20=\x20posPrev'+'\x20+\x20particl'+'ePosMoved;'+'\x0a\x0a\x20\x20\x20\x20let\x20'+'viewRotati'+'onTemp:\x20ma'+'t3x3f\x20=\x20ma'+'t3x3f(unif'+'orm.matrix'+'_view[0].x'+'yz,\x20unifor'+'m.matrix_v'+'iew[1].xyz'+',\x20uniform.'+'matrix_vie'+'w[2].xyz);'+'\x0a\x20\x20\x20\x20let\x20c'+'enterToVer'+'texV:\x20vec2'+'f\x20=\x20normal'+'ize((viewR'+'otationTem'+'p\x20*\x20localP'+'os).xy);\x0a\x0a'+'\x20\x20\x20\x20let\x20in'+'terpolatio'+'n:\x20f32\x20=\x20d'+'ot(-veloci'+'tyV,\x20cente'+'rToVertexV'+')\x20*\x200.5\x20+\x20'+'0.5;\x0a\x0a\x20\x20\x20\x20'+'particlePo'+'s\x20=\x20mix(pa'+'rticlePos,'+'\x20posPrev,\x20'+'interpolat'+'ion);\x0a',RO='\x0a\x20\x20\x20\x20let\x20r'+'ot3\x20=\x20mat3'+'x3f(\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20vec3f(r'+'otMatrix[0'+'][0],\x20rotM'+'atrix[1][0'+'],\x200.0),\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'3f(rotMatr'+'ix[0][1],\x20'+'rotMatrix['+'1][1],\x200.0'+'),\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20vec3f(0.0'+',\x200.0,\x201.0'+')\x0a\x20\x20\x20\x20);\x0a\x0a'+'\x20\x20\x20\x20let\x20vi'+'ewBasis\x20=\x20'+'mat3x3f(\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20-un'+'iform.matr'+'ix_viewInv'+'erse[0].xy'+'z,\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20-uniform.'+'matrix_vie'+'wInverse[1'+'].xyz,\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20unifo'+'rm.matrix_'+'viewInvers'+'e[2].xyz\x0a\x20'+'\x20\x20\x20);\x0a\x0a\x20\x20\x20'+'\x20let\x20tempM'+'at\x20=\x20viewB'+'asis\x20*\x20rot'+'3;\x0a\x0a\x20\x20\x20\x20//'+'\x20WGSL\x20does'+'\x20not\x20suppo'+'rt\x20matrix\x20'+'varyings,\x20'+'decompose\x20'+'it\x20to\x20vec3'+'s\x0a\x20\x20\x20\x20outp'+'ut.Particl'+'eMat0\x20=\x20te'+'mpMat[0];\x0a'+'\x20\x20\x20\x20output'+'.ParticleM'+'at1\x20=\x20temp'+'Mat[1];\x0a\x20\x20'+'\x20\x20output.P'+'articleMat'+'2\x20=\x20tempMa'+'t[2];\x0a',OO='\x0a\x20\x20\x20\x20let\x20o'+'rigParticl'+'ePos:\x20vec3'+'f\x20=\x20partic'+'lePos;\x0a\x20\x20\x20'+'\x20particleP'+'os\x20=\x20parti'+'clePos\x20-\x20u'+'niform.mat'+'rix_model['+'3].xyz;\x0a\x20\x20'+'\x20\x20particle'+'Pos\x20=\x20(par'+'ticlePos\x20%'+'\x20uniform.w'+'rapBounds)'+'\x20-\x20uniform'+'.wrapBound'+'s\x20*\x200.5;\x0a\x20'+'\x20\x20\x20particl'+'ePos\x20=\x20par'+'ticlePos\x20+'+'\x20uniform.m'+'atrix_mode'+'l[3].xyz;\x0a'+'\x20\x20\x20\x20partic'+'lePosMoved'+'\x20=\x20particl'+'ePos\x20-\x20ori'+'gParticleP'+'os;\x0a',FO={'particlePS':X3,'particleVS':q3,'particleAnimFrameClampVS':j3,'particleAnimFrameLoopVS':Y3,'particleAnimTexVS':K3,'particleInputFloatPS':Z3,'particleInputRgba8PS':Q3,'particleOutputFloatPS':J3,'particleOutputRgba8PS':eO,'particleUpdaterAABBPS':tO,'particleUpdaterEndPS':sO,'particleUpdaterInitPS':iO,'particleUpdaterNoRespawnPS':rO,'particleUpdaterOnStopPS':aO,'particleUpdaterRespawnPS':nO,'particleUpdaterSpherePS':oO,'particleUpdaterStartPS':lO,'particle_billboardVS':cO,'particle_blendAddPS':hO,'particle_blendMultiplyPS':dO,'particle_blendNormalPS':fO,'particle_cpuVS':uO,'particle_cpu_endVS':pO,'particle_customFaceVS':mO,'particle_endPS':_O,'particle_endVS':gO,'particle_halflambertPS':SO,'particle_initVS':yO,'particle_lambertPS':vO,'particle_lightingPS':xO,'particle_localShiftVS':TO,'particle_meshVS':wO,'particle_normalVS':EO,'particle_normalMapPS':bO,'particle_pointAlongVS':AO,'particle_simulationPS':CO,'particle_shaderPS':PO,'particle_shaderVS':MO,'particle_softPS':DO,'particle_softVS':IO,'particle_stretchVS':LO,'particle_TBNVS':RO,'particle_wrapVS':OO},NO=['enabled','autoPlay','numParticl'+'es','lifetime','rate','rate2','startAngle','startAngle'+'2','loop','preWarm','lighting','halfLamber'+'t','intensity','depthWrite','noFog','depthSofte'+'ning','sort','blendType','stretch','alignToMot'+'ion','emitterSha'+'pe','emitterExt'+'ents','emitterExt'+'entsInner','emitterRad'+'ius','emitterRad'+'iusInner','initialVel'+'ocity','wrap','wrapBounds','localSpace','screenSpac'+'e','colorMapAs'+'set','normalMapA'+'sset','mesh','meshAsset','renderAsse'+'t','orientatio'+'n','particleNo'+'rmal','localVeloc'+'ityGraph','localVeloc'+'ityGraph2','velocityGr'+'aph','velocityGr'+'aph2','rotationSp'+'eedGraph','rotationSp'+'eedGraph2','radialSpee'+'dGraph','radialSpee'+'dGraph2','scaleGraph','scaleGraph'+'2','colorGraph','colorGraph'+'2','alphaGraph','alphaGraph'+'2','colorMap','normalMap','animTilesX','animTilesY','animStartF'+'rame','animNumFra'+'mes','animNumAni'+'mations','animIndex','randomizeA'+'nimIndex','animSpeed','animLoop','layers'];class kO extends ct{constructor(_0x411f0b){super(_0x411f0b),this['id']='particlesy'+'stem',this['ComponentT'+'ype']=e3,this['DataType']=t3,this['schema']=NO,this['propertyTy'+'pes']={'emitterExtents':'vec3','emitterExtentsInner':'vec3','particleNormal':'vec3','wrapBounds':'vec3','localVelocityGraph':'curveset','localVelocityGraph2':'curveset','velocityGraph':'curveset','velocityGraph2':'curveset','colorGraph':'curveset','colorGraph2':'curveset','alphaGraph':'curve','alphaGraph2':'curve','rotationSpeedGraph':'curve','rotationSpeedGraph2':'curve','radialSpeedGraph':'curve','radialSpeedGraph2':'curve','scaleGraph':'curve','scaleGraph2':'curve'},this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this),this['app']['systems']['on']('update',this['onUpdate'],this),Pe['get'](_0x411f0b['graphicsDe'+'vice'],Fe)['add']($3),Pe['get'](_0x411f0b['graphicsDe'+'vice'],it)['add'](FO);}['initialize'+'ComponentD'+'ata'](_0x41a3aa,_0x4d9dee,_0xf3e36d){const _0xd99a54={};_0xf3e36d=[];const _0x44d229=this['propertyTy'+'pes'];(_0x4d9dee['mesh']instanceof pe||typeof _0x4d9dee['mesh']=='number')&&(_0x4d9dee['meshAsset']=_0x4d9dee['mesh'],delete _0x4d9dee['mesh']);for(const _0x3407fb in _0x4d9dee){if(_0x4d9dee['hasOwnProp'+'erty'](_0x3407fb)&&(_0xf3e36d['push'](_0x3407fb),_0xd99a54[_0x3407fb]=_0x4d9dee[_0x3407fb]),_0x44d229[_0x3407fb]==='vec3')Array['isArray'](_0xd99a54[_0x3407fb])&&(_0xd99a54[_0x3407fb]=new D(_0xd99a54[_0x3407fb][0x2*-0x1061+0xe*-0x277+-0x35d*-0x14],_0xd99a54[_0x3407fb][0x1d*0x9+-0xc0c+0x2*0x584],_0xd99a54[_0x3407fb][-0x3d4*0xa+-0x59a*0x3+0x3718]));else{if(_0x44d229[_0x3407fb]==='curve'){if(!(_0xd99a54[_0x3407fb]instanceof qs)){const _0x521826=_0xd99a54[_0x3407fb]['type'];_0xd99a54[_0x3407fb]=new qs(_0xd99a54[_0x3407fb]['keys']),_0xd99a54[_0x3407fb]['type']=_0x521826;}}else{if(_0x44d229[_0x3407fb]==='curveset'&&!(_0xd99a54[_0x3407fb]instanceof na)){const _0x391aca=_0xd99a54[_0x3407fb]['type'];_0xd99a54[_0x3407fb]=new na(_0xd99a54[_0x3407fb]['keys']),_0xd99a54[_0x3407fb]['type']=_0x391aca;}}}_0xd99a54['layers']&&Array['isArray'](_0xd99a54['layers'])&&(_0xd99a54['layers']=_0xd99a54['layers']['slice'](-0x1*-0x967+0x634*-0x3+-0x1*-0x935));}super['initialize'+'ComponentD'+'ata'](_0x41a3aa,_0xd99a54,_0xf3e36d);}['cloneCompo'+'nent'](_0x1b44a0,_0x2a9f8e){const _0x904617=_0x1b44a0['particlesy'+'stem']['data'],_0x4a03e5=this['schema'],_0x3aa7ad={};for(let _0x5012ef=0x2107+0x1ea3+-0x3faa,_0x27d3bf=_0x4a03e5['length'];_0x5012ef<_0x27d3bf;_0x5012ef++){const _0x3d59a8=_0x4a03e5[_0x5012ef];let _0x29b9cb=_0x904617[_0x3d59a8];_0x29b9cb instanceof D||_0x29b9cb instanceof qs||_0x29b9cb instanceof na?(_0x29b9cb=_0x29b9cb['clone'](),_0x3aa7ad[_0x3d59a8]=_0x29b9cb):_0x3d59a8==='layers'?_0x3aa7ad['layers']=_0x904617['layers']['slice'](0x1*0x14cf+0x30*-0x89+0x1*0x4e1):_0x29b9cb!=null&&(_0x3aa7ad[_0x3d59a8]=_0x29b9cb);}return this['addCompone'+'nt'](_0x2a9f8e,_0x3aa7ad);}['onUpdate'](_0x3eaced){const _0x46bb66=this['store'],_0x5f2a69=this['app']['stats']['particles'],_0x40ea35=this['app']['scene']['layers'];for(let _0x5a13cc=0x2*0x70f+-0x5*0x1c5+0x47*-0x13;_0x5a13cc<_0x40ea35['layerList']['length'];_0x5a13cc++)_0x40ea35['layerList'][_0x5a13cc]['requiresLi'+'ghtCube']=!(0x2*0x5d+-0x5a4+0x4eb);for(const _0x120914 in _0x46bb66)if(_0x46bb66['hasOwnProp'+'erty'](_0x120914)){const _0x2f5c10=_0x46bb66[_0x120914],_0x517e03=_0x2f5c10['entity'],_0x348a8b=_0x2f5c10['data'];if(_0x348a8b['enabled']&&_0x517e03['enabled']){const _0x459a95=_0x517e03['particlesy'+'stem']['emitter'];if(!(_0x459a95!=null&&_0x459a95['meshInstan'+'ce']['visible']))continue;if(_0x459a95['lighting']){const _0x59788d=_0x348a8b['layers'];for(let _0x419dbf=-0xdee*0x1+-0x2e2+0x10d0;_0x419dbf<_0x59788d['length'];_0x419dbf++){const _0x3f9922=_0x40ea35['getLayerBy'+'Id'](_0x59788d[_0x419dbf]);_0x3f9922&&(_0x3f9922['requiresLi'+'ghtCube']=!(0xd*0x2dd+-0x1*-0x92+-0x25cb));}}if(!_0x348a8b['paused']){let _0x8a9352=0xa5b+0x7a*0x1e+0x18a7*-0x1;if(_0x459a95['simTime']+=_0x3eaced,_0x459a95['simTime']>=_0x459a95['fixedTimeS'+'tep']&&(_0x8a9352=Math['floor'](_0x459a95['simTime']/_0x459a95['fixedTimeS'+'tep']),_0x459a95['simTime']-=_0x8a9352*_0x459a95['fixedTimeS'+'tep']),_0x8a9352){_0x8a9352=Math['min'](_0x8a9352,_0x459a95['maxSubStep'+'s']);for(let _0xa766ba=-0x987+-0x9*-0x3c3+-0x1854;_0xa766ba<_0x8a9352;_0xa766ba++)_0x459a95['addTime'](_0x459a95['fixedTimeS'+'tep'],!(-0x2*0x48f+-0x1*0x3bb+0xcda));_0x5f2a69['_updatesPe'+'rFrame']+=_0x8a9352,_0x5f2a69['_frameTime']+=_0x459a95['_addTimeTi'+'me'],_0x459a95['_addTimeTi'+'me']=-0x97a*0x3+0x5*0x422+0x7c4;}_0x459a95['finishFram'+'e']();}}}}['onBeforeRe'+'move'](_0x3e4cd8,_0x46e993){_0x46e993['onBeforeRe'+'move']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}class UO extends wd{constructor(_0x550762,_0x4f5b31){super(),this['skin']=_0x550762,this['skinInstan'+'ce']=_0x4f5b31;}}const Gs=class Gs{static['logCachedS'+'kinInstanc'+'es'](){console['log']('CachedSkin'+'Instances'),Gs['_skinInsta'+'nceCache']['forEach']((_0x259afd,_0x4e9e1c)=>{console['log'](_0x4e9e1c['name']+':\x20Array('+_0x259afd['length']+')');for(let _0x5a4b31=-0x1*0x719+0x1*0x17f6+0x59f*-0x3;_0x5a4b31<_0x259afd['length'];_0x5a4b31++)console['log']('\x20\x20'+_0x5a4b31+(':\x20RefCount'+'\x20')+_0x259afd[_0x5a4b31]['refCount']);});}static['createCach'+'edSkinInst'+'ance'](_0x483d03,_0x563b1a,_0x46c336){let _0x44fa2f=Gs['getCachedS'+'kinInstanc'+'e'](_0x483d03,_0x563b1a);return _0x44fa2f||(_0x44fa2f=new Ol(_0x483d03),_0x44fa2f['resolve'](_0x563b1a,_0x46c336),Gs['addCachedS'+'kinInstanc'+'e'](_0x483d03,_0x563b1a,_0x44fa2f)),_0x44fa2f;}static['getCachedS'+'kinInstanc'+'e'](_0x2c60a8,_0x29464c){let _0x35cfd0=null;const _0x8740f6=Gs['_skinInsta'+'nceCache']['get'](_0x29464c);if(_0x8740f6){const _0x3dd0f0=_0x8740f6['find'](_0x270cfe=>_0x270cfe['skin']===_0x2c60a8);_0x3dd0f0&&(_0x3dd0f0['incRefCoun'+'t'](),_0x35cfd0=_0x3dd0f0['skinInstan'+'ce']);}return _0x35cfd0;}static['addCachedS'+'kinInstanc'+'e'](_0x261622,_0x58f5cc,_0x373b78){let _0x3b932c=Gs['_skinInsta'+'nceCache']['get'](_0x58f5cc);_0x3b932c||(_0x3b932c=[],Gs['_skinInsta'+'nceCache']['set'](_0x58f5cc,_0x3b932c));let _0x23cb71=_0x3b932c['find'](_0x4461bd=>_0x4461bd['skin']===_0x261622);_0x23cb71||(_0x23cb71=new UO(_0x261622,_0x373b78),_0x3b932c['push'](_0x23cb71)),_0x23cb71['incRefCoun'+'t']();}static['removeCach'+'edSkinInst'+'ance'](_0xf9bde3){if(_0xf9bde3){const _0x11ca29=_0xf9bde3['rootBone'];if(_0x11ca29){const _0x39af91=Gs['_skinInsta'+'nceCache']['get'](_0x11ca29);if(_0x39af91){const _0x41c9b2=_0x39af91['findIndex'](_0x347279=>_0x347279['skinInstan'+'ce']===_0xf9bde3);if(_0x41c9b2>=-0x1f73+-0x1e18+0x89*0x73){const _0x3e5107=_0x39af91[_0x41c9b2];_0x3e5107['decRefCoun'+'t'](),_0x3e5107['refCount']===-0x26df+0xc5f*-0x2+0x3f9d&&(_0x39af91['splice'](_0x41c9b2,0x34*-0xa0+0x22cb*0x1+-0x24a),_0x39af91['length']||Gs['_skinInsta'+'nceCache']['delete'](_0x11ca29),_0xf9bde3&&(_0xf9bde3['destroy'](),_0x3e5107['skinInstan'+'ce']=null));}}}}}};h(Gs,'_skinInsta'+'nceCache',new Map());let _l=Gs;class gl{constructor(_0x4c877,_0x474ebb,_0x13ef90,_0x24e376,_0x22c90d){h(this,'_evtLoadBy'+'Id',null),h(this,'_evtUnload'+'ById',null),h(this,'_evtAddByI'+'d',null),h(this,'_evtRemove'+'ById',null),h(this,'_evtLoadBy'+'Url',null),h(this,'_evtAddByU'+'rl',null),h(this,'_evtRemove'+'ByUrl',null),(this['propertyNa'+'me']=_0x4c877,this['parent']=_0x474ebb,this['_scope']=_0x22c90d,this['_registry']=_0x13ef90,this['id']=null,this['url']=null,this['asset']=null,this['_onAssetLo'+'ad']=_0x24e376['load'],this['_onAssetAd'+'d']=_0x24e376['add'],this['_onAssetRe'+'move']=_0x24e376['remove'],this['_onAssetUn'+'load']=_0x24e376['unload']);}set['id'](_0x2b02f5){if(this['url'])throw Error('Can\x27t\x20set\x20'+'id\x20and\x20url');this['_unbind'](),this['_id']=_0x2b02f5,this['asset']=this['_registry']['get'](this['_id']),this['_bind']();}get['id'](){return this['_id'];}set['url'](_0x718370){if(this['id'])throw Error('Can\x27t\x20set\x20'+'id\x20and\x20url');this['_unbind'](),this['_url']=_0x718370,this['asset']=this['_registry']['getByUrl'](this['_url']),this['_bind']();}get['url'](){return this['_url'];}['_bind'](){this['id']&&(this['_onAssetLo'+'ad']&&(this['_evtLoadBy'+'Id']=this['_registry']['on']('load:'+this['id'],this['_onLoad'],this)),this['_onAssetAd'+'d']&&(this['_evtAddByI'+'d']=this['_registry']['once']('add:'+this['id'],this['_onAdd'],this)),this['_onAssetRe'+'move']&&(this['_evtRemove'+'ById']=this['_registry']['on']('remove:'+this['id'],this['_onRemove'],this)),this['_onAssetUn'+'load']&&(this['_evtUnload'+'ById']=this['_registry']['on']('unload:'+this['id'],this['_onUnload'],this))),this['url']&&(this['_onAssetLo'+'ad']&&(this['_evtLoadBy'+'Url']=this['_registry']['on']('load:url:'+this['url'],this['_onLoad'],this)),this['_onAssetAd'+'d']&&(this['_evtAddByU'+'rl']=this['_registry']['once']('add:url:'+this['url'],this['_onAdd'],this)),this['_onAssetRe'+'move']&&(this['_evtRemove'+'ByUrl']=this['_registry']['on']('remove:url'+':'+this['url'],this['_onRemove'],this)));}['_unbind'](){var _0x2057cb,_0x5dd32b,_0x46ad63,_0x3bae80,_0x4e6c3a,_0x49e7da,_0x29540e;this['id']&&((_0x2057cb=this['_evtLoadBy'+'Id'])==null||_0x2057cb['off'](),this['_evtLoadBy'+'Id']=null,(_0x5dd32b=this['_evtAddByI'+'d'])==null||_0x5dd32b['off'](),this['_evtAddByI'+'d']=null,(_0x46ad63=this['_evtRemove'+'ById'])==null||_0x46ad63['off'](),this['_evtRemove'+'ById']=null,(_0x3bae80=this['_evtUnload'+'ById'])==null||_0x3bae80['off'](),this['_evtUnload'+'ById']=null),this['url']&&((_0x4e6c3a=this['_evtLoadBy'+'Url'])==null||_0x4e6c3a['off'](),this['_evtLoadBy'+'Url']=null,(_0x49e7da=this['_evtAddByU'+'rl'])==null||_0x49e7da['off'](),this['_evtAddByU'+'rl']=null,(_0x29540e=this['_evtRemove'+'ByUrl'])==null||_0x29540e['off'](),this['_evtRemove'+'ByUrl']=null);}['_onLoad'](_0x33c3e4){this['_onAssetLo'+'ad']['call'](this['_scope'],this['propertyNa'+'me'],this['parent'],_0x33c3e4);}['_onAdd'](_0x3d1b50){this['asset']=_0x3d1b50,this['_onAssetAd'+'d']['call'](this['_scope'],this['propertyNa'+'me'],this['parent'],_0x3d1b50);}['_onRemove'](_0x51f211){this['_onAssetRe'+'move']['call'](this['_scope'],this['propertyNa'+'me'],this['parent'],_0x51f211),this['asset']=null;}['_onUnload'](_0x20c3e0){this['_onAssetUn'+'load']['call'](this['_scope'],this['propertyNa'+'me'],this['parent'],_0x20c3e0);}}class n0 extends we{constructor(_0x30adfb,_0x4766b5){super(_0x30adfb,_0x4766b5),h(this,'_type','asset'),h(this,'_castShado'+'ws',!(0x1e1*0x1+-0x131b+0x113a)),h(this,'_receiveSh'+'adows',!(0xc1f*-0x1+0x91f*-0x2+-0xa1f*-0x3)),h(this,'_castShado'+'wsLightmap',!(-0x16f8+0x18fa+0x2*-0x101)),h(this,'_lightmapp'+'ed',!(-0x7*0x45+-0x163d+-0x1821*-0x1)),h(this,'_lightmapS'+'izeMultipl'+'ier',0x577+-0x6*0x30a+0xcc6),h(this,'isStatic',!(0x327*0x3+-0x89b*-0x1+-0x120f)),h(this,'_batchGrou'+'pId',-(-0x1*-0x106d+-0x4f*-0x2e+-0xf4f*0x2)),h(this,'_layers',[er]),h(this,'_renderSty'+'le',un),h(this,'_meshInsta'+'nces',[]),h(this,'_customAab'+'b',null),h(this,'_area',null),h(this,'_assetRefe'+'rence'),h(this,'_materialR'+'eferences',[]),h(this,'_material'),h(this,'_rootBone',null),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),h(this,'_evtSetMes'+'hes',null),(this['_assetRefe'+'rence']=new gl('asset',this,_0x30adfb['app']['assets'],{'add':this['_onRenderA'+'ssetAdded'],'load':this['_onRenderA'+'ssetLoad'],'remove':this['_onRenderA'+'ssetRemove'],'unload':this['_onRenderA'+'ssetUnload']},this),this['_material']=_0x30adfb['defaultMat'+'erial'],_0x4766b5['on']('remove',this['onRemoveCh'+'ild'],this),_0x4766b5['on']('removehier'+'archy',this['onRemoveCh'+'ild'],this),_0x4766b5['on']('insert',this['onInsertCh'+'ild'],this),_0x4766b5['on']('inserthier'+'archy',this['onInsertCh'+'ild'],this));}set['renderStyl'+'e'](_0x4d0346){this['_renderSty'+'le']!==_0x4d0346&&(this['_renderSty'+'le']=_0x4d0346,He['_prepareRe'+'nderStyleF'+'orArray'](this['_meshInsta'+'nces'],_0x4d0346));}get['renderStyl'+'e'](){return this['_renderSty'+'le'];}set['customAabb'](_0x371c67){this['_customAab'+'b']=_0x371c67;const _0x4d3b2f=this['_meshInsta'+'nces'];if(_0x4d3b2f){for(let _0x7e2c6d=0x1f91+0x431*-0x1+-0x1b60;_0x7e2c6d<_0x4d3b2f['length'];_0x7e2c6d++)_0x4d3b2f[_0x7e2c6d]['setCustomA'+'abb'](this['_customAab'+'b']);}}get['customAabb'](){return this['_customAab'+'b'];}set['type'](_0x4ab195){if(this['_type']!==_0x4ab195&&(this['_area']=null,this['_type']=_0x4ab195,this['destroyMes'+'hInstances'](),_0x4ab195!=='asset')){let _0x4cb35d=this['_material'];(!_0x4cb35d||_0x4cb35d===this['system']['defaultMat'+'erial'])&&(_0x4cb35d=this['_materialR'+'eferences'][-0x33*-0x1+-0x26eb+0x26b8]&&this['_materialR'+'eferences'][-0x198c+0x1fa1*0x1+0x3*-0x207]['asset']&&this['_materialR'+'eferences'][0x3*0x6cf+-0x79*-0x8+-0x1*0x1835]['asset']['resource']);const _0x128503=r0(this['system']['app']['graphicsDe'+'vice'],_0x4ab195);this['_area']=_0x128503['area'],this['meshInstan'+'ces']=[new He(_0x128503['mesh'],_0x4cb35d||this['system']['defaultMat'+'erial'],this['entity'])];}}get['type'](){return this['_type'];}set['meshInstan'+'ces'](_0x457b3c){if(w['assert'](Array['isArray'](_0x457b3c),'MeshInstan'+'ces\x20set\x20to'+'\x20a\x20Render\x20'+'component\x20'+'must\x20be\x20an'+'\x20array.'),this['destroyMes'+'hInstances'](),this['_meshInsta'+'nces']=_0x457b3c,this['_meshInsta'+'nces']){const _0x288446=this['_meshInsta'+'nces'];for(let _0x544412=0x1643+-0x1*0x1a56+0x413;_0x544412<_0x288446['length'];_0x544412++)_0x288446[_0x544412]['node']||(_0x288446[_0x544412]['node']=this['entity']),_0x288446[_0x544412]['castShadow']=this['_castShado'+'ws'],_0x288446[_0x544412]['receiveSha'+'dow']=this['_receiveSh'+'adows'],_0x288446[_0x544412]['renderStyl'+'e']=this['_renderSty'+'le'],_0x288446[_0x544412]['setLightma'+'pped'](this['_lightmapp'+'ed']),_0x288446[_0x544412]['setCustomA'+'abb'](this['_customAab'+'b']);this['enabled']&&this['entity']['enabled']&&this['addToLayer'+'s']();}}get['meshInstan'+'ces'](){return this['_meshInsta'+'nces'];}set['lightmappe'+'d'](_0x29145b){if(_0x29145b!==this['_lightmapp'+'ed']){this['_lightmapp'+'ed']=_0x29145b;const _0x21ff5f=this['_meshInsta'+'nces'];if(_0x21ff5f){for(let _0x5d8552=0x77d+0x57f+0x3*-0x454;_0x5d8552<_0x21ff5f['length'];_0x5d8552++)_0x21ff5f[_0x5d8552]['setLightma'+'pped'](_0x29145b);}}}get['lightmappe'+'d'](){return this['_lightmapp'+'ed'];}set['castShadow'+'s'](_0x1d7a8b){if(this['_castShado'+'ws']!==_0x1d7a8b){const _0x1bb683=this['_meshInsta'+'nces'];if(_0x1bb683){const _0x32a569=this['layers'],_0x3ebaa6=this['system']['app']['scene'];if(this['_castShado'+'ws']&&!_0x1d7a8b)for(let _0x4ab883=-0x18fe+-0x23ab+0x3ca9;_0x4ab883<_0x32a569['length'];_0x4ab883++){const _0x34d159=_0x3ebaa6['layers']['getLayerBy'+'Id'](this['layers'][_0x4ab883]);_0x34d159&&_0x34d159['removeShad'+'owCasters'](_0x1bb683);}for(let _0x3a3614=0x1aa7+-0xd*0x1c4+0x1*-0x3b3;_0x3a3614<_0x1bb683['length'];_0x3a3614++)_0x1bb683[_0x3a3614]['castShadow']=_0x1d7a8b;if(!this['_castShado'+'ws']&&_0x1d7a8b)for(let _0x24135c=-0x2538+-0x9c4*0x4+0x1*0x4c48;_0x24135c<_0x32a569['length'];_0x24135c++){const _0x44a167=_0x3ebaa6['layers']['getLayerBy'+'Id'](_0x32a569[_0x24135c]);_0x44a167&&_0x44a167['addShadowC'+'asters'](_0x1bb683);}}this['_castShado'+'ws']=_0x1d7a8b;}}get['castShadow'+'s'](){return this['_castShado'+'ws'];}set['receiveSha'+'dows'](_0x49d552){if(this['_receiveSh'+'adows']!==_0x49d552){this['_receiveSh'+'adows']=_0x49d552;const _0x287874=this['_meshInsta'+'nces'];if(_0x287874){for(let _0x4304ce=-0x13*-0x9+-0x2209+0x215e;_0x4304ce<_0x287874['length'];_0x4304ce++)_0x287874[_0x4304ce]['receiveSha'+'dow']=_0x49d552;}}}get['receiveSha'+'dows'](){return this['_receiveSh'+'adows'];}set['castShadow'+'sLightmap'](_0x2c065a){this['_castShado'+'wsLightmap']=_0x2c065a;}get['castShadow'+'sLightmap'](){return this['_castShado'+'wsLightmap'];}set['lightmapSi'+'zeMultipli'+'er'](_0x553561){this['_lightmapS'+'izeMultipl'+'ier']=_0x553561;}get['lightmapSi'+'zeMultipli'+'er'](){return this['_lightmapS'+'izeMultipl'+'ier'];}set['layers'](_0x233a2c){const _0x5cad25=this['system']['app']['scene']['layers'];let _0x74c207;if(this['_meshInsta'+'nces']){for(let _0x14e6c6=0x2567+-0x26b8+0x151*0x1;_0x14e6c6<this['_layers']['length'];_0x14e6c6++)_0x74c207=_0x5cad25['getLayerBy'+'Id'](this['_layers'][_0x14e6c6]),_0x74c207&&_0x74c207['removeMesh'+'Instances'](this['_meshInsta'+'nces']);}this['_layers']['length']=0x15*-0xce+-0x1*0x9d+0x1183;for(let _0x28e615=-0x2506+0x53*-0x29+-0x3251*-0x1;_0x28e615<_0x233a2c['length'];_0x28e615++)this['_layers'][_0x28e615]=_0x233a2c[_0x28e615];if(!(!this['enabled']||!this['entity']['enabled']||!this['_meshInsta'+'nces'])){for(let _0xff9cdc=0x12dc+-0x25c5+-0x67*-0x2f;_0xff9cdc<this['_layers']['length'];_0xff9cdc++)_0x74c207=_0x5cad25['getLayerBy'+'Id'](this['_layers'][_0xff9cdc]),_0x74c207&&_0x74c207['addMeshIns'+'tances'](this['_meshInsta'+'nces']);}}get['layers'](){return this['_layers'];}set['batchGroup'+'Id'](_0x594fc4){var _0x2eac8f,_0x8d683f;this['_batchGrou'+'pId']!==_0x594fc4&&(this['entity']['enabled']&&this['_batchGrou'+'pId']>=0x16dd*0x1+0x5*0x55a+-0x319f&&((_0x2eac8f=this['system']['app']['batcher'])==null||_0x2eac8f['remove'](St['RENDER'],this['batchGroup'+'Id'],this['entity'])),this['entity']['enabled']&&_0x594fc4>=0xe37*-0x1+0x1*-0x1966+0x1*0x279d&&((_0x8d683f=this['system']['app']['batcher'])==null||_0x8d683f['insert'](St['RENDER'],_0x594fc4,this['entity'])),_0x594fc4<0xac+0x1a23*-0x1+0x29*0x9f&&this['_batchGrou'+'pId']>=-0x15c6+0x77f+0x2b*0x55&&this['enabled']&&this['entity']['enabled']&&this['addToLayer'+'s'](),this['_batchGrou'+'pId']=_0x594fc4);}get['batchGroup'+'Id'](){return this['_batchGrou'+'pId'];}set['material'](_0x526ee0){if(this['_material']!==_0x526ee0&&(this['_material']=_0x526ee0,this['_meshInsta'+'nces']&&this['_type']!=='asset')){for(let _0x3fd05c=-0x15*0x15b+-0x19dc+0x3653;_0x3fd05c<this['_meshInsta'+'nces']['length'];_0x3fd05c++)this['_meshInsta'+'nces'][_0x3fd05c]['material']=_0x526ee0;}}get['material'](){return this['_material'];}set['materialAs'+'sets'](_0x4f3204=[]){if(this['_materialR'+'eferences']['length']>_0x4f3204['length']){for(let _0x4e7144=_0x4f3204['length'];_0x4e7144<this['_materialR'+'eferences']['length'];_0x4e7144++)this['_materialR'+'eferences'][_0x4e7144]['id']=null;this['_materialR'+'eferences']['length']=_0x4f3204['length'];}for(let _0x24dd33=-0x1*0xb24+0x222c+-0x2e1*0x8;_0x24dd33<_0x4f3204['length'];_0x24dd33++)if(this['_materialR'+'eferences'][_0x24dd33]||this['_materialR'+'eferences']['push'](new gl(_0x24dd33,this,this['system']['app']['assets'],{'add':this['_onMateria'+'lAdded'],'load':this['_onMateria'+'lLoad'],'remove':this['_onMateria'+'lRemove'],'unload':this['_onMateria'+'lUnload']},this)),_0x4f3204[_0x24dd33]){const _0xcc4a65=_0x4f3204[_0x24dd33]instanceof pe?_0x4f3204[_0x24dd33]['id']:_0x4f3204[_0x24dd33];this['_materialR'+'eferences'][_0x24dd33]['id']!==_0xcc4a65&&(this['_materialR'+'eferences'][_0x24dd33]['id']=_0xcc4a65),this['_materialR'+'eferences'][_0x24dd33]['asset']&&this['_onMateria'+'lAdded'](_0x24dd33,this,this['_materialR'+'eferences'][_0x24dd33]['asset']);}else this['_materialR'+'eferences'][_0x24dd33]['id']=null,this['_meshInsta'+'nces'][_0x24dd33]&&(this['_meshInsta'+'nces'][_0x24dd33]['material']=this['system']['defaultMat'+'erial']);}get['materialAs'+'sets'](){return this['_materialR'+'eferences']['map'](_0x403bab=>_0x403bab['id']);}set['asset'](_0x4c62d0){const _0x205c02=_0x4c62d0 instanceof pe?_0x4c62d0['id']:_0x4c62d0;this['_assetRefe'+'rence']['id']!==_0x205c02&&(this['_assetRefe'+'rence']['asset']&&this['_assetRefe'+'rence']['asset']['resource']&&this['_onRenderA'+'ssetRemove'](),this['_assetRefe'+'rence']['id']=_0x205c02,this['_assetRefe'+'rence']['asset']&&this['_onRenderA'+'ssetAdded']());}get['asset'](){return this['_assetRefe'+'rence']['id'];}['assignAsse'+'t'](_0x3cd581){const _0x9118b7=_0x3cd581 instanceof pe?_0x3cd581['id']:_0x3cd581;this['_assetRefe'+'rence']['id']=_0x9118b7;}set['rootBone'](_0xcc4a45){if(this['_rootBone']!==_0xcc4a45){const _0x9fea0e=typeof _0xcc4a45=='string';if(this['_rootBone']&&_0x9fea0e&&this['_rootBone']['getGuid']()===_0xcc4a45)return;this['_rootBone']&&this['_clearSkin'+'Instances'](),_0xcc4a45 instanceof Ie?this['_rootBone']=_0xcc4a45:_0x9fea0e?(this['_rootBone']=this['system']['app']['getEntityF'+'romIndex'](_0xcc4a45)||null,this['_rootBone']||w['warn']('Failed\x20to\x20'+'find\x20rootB'+'one\x20Entity'+'\x20by\x20GUID')):this['_rootBone']=null,this['_rootBone']&&this['_cloneSkin'+'Instances']();}}get['rootBone'](){return this['_rootBone'];}['destroyMes'+'hInstances'](){const _0x5ae57e=this['_meshInsta'+'nces'];if(_0x5ae57e){this['removeFrom'+'Layers'](),this['_clearSkin'+'Instances']();for(let _0x20104c=0x14f*-0x7+-0x35b*0x3+0x133a;_0x20104c<_0x5ae57e['length'];_0x20104c++)_0x5ae57e[_0x20104c]['destroy']();this['_meshInsta'+'nces']['length']=-0x5ab*0x1+0x15ad*-0x1+0x1b58;}}['addToLayer'+'s'](){const _0x5b2e17=this['system']['app']['scene']['layers'];for(let _0x369968=-0x2217+0x26fe+-0x5*0xfb;_0x369968<this['_layers']['length'];_0x369968++){const _0x28c7f0=_0x5b2e17['getLayerBy'+'Id'](this['_layers'][_0x369968]);_0x28c7f0&&_0x28c7f0['addMeshIns'+'tances'](this['_meshInsta'+'nces']);}}['removeFrom'+'Layers'](){if(this['_meshInsta'+'nces']&&this['_meshInsta'+'nces']['length']){const _0x21dd6f=this['system']['app']['scene']['layers'];for(let _0x43e9ae=-0x982*0x3+-0x17c1+0x3447;_0x43e9ae<this['_layers']['length'];_0x43e9ae++){const _0x2d0b9f=_0x21dd6f['getLayerBy'+'Id'](this['_layers'][_0x43e9ae]);_0x2d0b9f&&_0x2d0b9f['removeMesh'+'Instances'](this['_meshInsta'+'nces']);}}}['onRemoveCh'+'ild'](){this['removeFrom'+'Layers']();}['onInsertCh'+'ild'](){this['_meshInsta'+'nces']&&this['enabled']&&this['entity']['enabled']&&this['addToLayer'+'s']();}['onRemove'](){this['destroyMes'+'hInstances'](),this['asset']=null,this['materialAs'+'set']=null,this['_assetRefe'+'rence']['id']=null;for(let _0x4a56ad=0x8eb+-0x9ac+0xc1*0x1;_0x4a56ad<this['_materialR'+'eferences']['length'];_0x4a56ad++)this['_materialR'+'eferences'][_0x4a56ad]['id']=null;this['entity']['off']('remove',this['onRemoveCh'+'ild'],this),this['entity']['off']('insert',this['onInsertCh'+'ild'],this);}['onLayersCh'+'anged'](_0x8af4f9,_0x5e19af){this['addToLayer'+'s'](),_0x8af4f9['off']('add',this['onLayerAdd'+'ed'],this),_0x8af4f9['off']('remove',this['onLayerRem'+'oved'],this),_0x5e19af['on']('add',this['onLayerAdd'+'ed'],this),_0x5e19af['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x16ea23){this['layers']['indexOf'](_0x16ea23['id'])<-0x1*-0x207e+0x1337+0x3d*-0xd9||_0x16ea23['addMeshIns'+'tances'](this['_meshInsta'+'nces']);}['onLayerRem'+'oved'](_0x123a2a){this['layers']['indexOf'](_0x123a2a['id'])<0x629+0xba3+0x43*-0x44||_0x123a2a['removeMesh'+'Instances'](this['_meshInsta'+'nces']);}['onEnable'](){var _0x24b38e;const _0x30e1f4=this['system']['app'],_0x23b2ab=_0x30e1f4['scene'],_0x46d020=_0x23b2ab['layers'];this['_rootBone']&&this['_cloneSkin'+'Instances'](),this['_evtLayers'+'Changed']=_0x23b2ab['on']('set:layers',this['onLayersCh'+'anged'],this),_0x46d020&&(this['_evtLayerA'+'dded']=_0x46d020['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x46d020['on']('remove',this['onLayerRem'+'oved'],this));const _0x10381f=this['_type']==='asset';this['_meshInsta'+'nces']&&this['_meshInsta'+'nces']['length']?this['addToLayer'+'s']():_0x10381f&&this['asset']&&this['_onRenderA'+'ssetAdded']();for(let _0x22062b=0xd6+-0xc5f*-0x2+-0x1994;_0x22062b<this['_materialR'+'eferences']['length'];_0x22062b++)this['_materialR'+'eferences'][_0x22062b]['asset']&&this['system']['app']['assets']['load'](this['_materialR'+'eferences'][_0x22062b]['asset']);this['_batchGrou'+'pId']>=-0x38*0x3d+0x132a+-0x5d2&&((_0x24b38e=_0x30e1f4['batcher'])==null||_0x24b38e['insert'](St['RENDER'],this['batchGroup'+'Id'],this['entity']));}['onDisable'](){var _0x3fc61e,_0x4d472d,_0x1d9fc0,_0x5a031;const _0x466708=this['system']['app'],_0x3abdde=_0x466708['scene']['layers'];(_0x3fc61e=this['_evtLayers'+'Changed'])==null||_0x3fc61e['off'](),this['_evtLayers'+'Changed']=null,this['_rootBone']&&this['_clearSkin'+'Instances'](),_0x3abdde&&((_0x4d472d=this['_evtLayerA'+'dded'])==null||_0x4d472d['off'](),this['_evtLayerA'+'dded']=null,(_0x1d9fc0=this['_evtLayerR'+'emoved'])==null||_0x1d9fc0['off'](),this['_evtLayerR'+'emoved']=null),this['_batchGrou'+'pId']>=0x5*-0x247+0x11f4+-0x1*0x691&&((_0x5a031=_0x466708['batcher'])==null||_0x5a031['remove'](St['RENDER'],this['batchGroup'+'Id'],this['entity'])),this['removeFrom'+'Layers']();}['hide'](){if(this['_meshInsta'+'nces']){for(let _0x469242=-0x12e9+-0x1*0x3cb+0x16b4;_0x469242<this['_meshInsta'+'nces']['length'];_0x469242++)this['_meshInsta'+'nces'][_0x469242]['visible']=!(-0x1*-0x163d+0xbb3+-0x4d9*0x7);}}['show'](){if(this['_meshInsta'+'nces']){for(let _0x3af48b=0xc7*-0x7+-0x127*0x15+0x1da4;_0x3af48b<this['_meshInsta'+'nces']['length'];_0x3af48b++)this['_meshInsta'+'nces'][_0x3af48b]['visible']=!(-0x1c76*0x1+0x59c+0x16da);}}['_onRenderA'+'ssetAdded'](){this['_assetRefe'+'rence']['asset']&&(this['_assetRefe'+'rence']['asset']['resource']?this['_onRenderA'+'ssetLoad']():this['enabled']&&this['entity']['enabled']&&this['system']['app']['assets']['load'](this['_assetRefe'+'rence']['asset']));}['_onRenderA'+'ssetLoad'](){var _0x3c3a2a;if(this['destroyMes'+'hInstances'](),this['_assetRefe'+'rence']['asset']){const _0x36cfa2=this['_assetRefe'+'rence']['asset']['resource'];(_0x3c3a2a=this['_evtSetMes'+'hes'])==null||_0x3c3a2a['off'](),this['_evtSetMes'+'hes']=_0x36cfa2['on']('set:meshes',this['_onSetMesh'+'es'],this),_0x36cfa2['meshes']&&this['_onSetMesh'+'es'](_0x36cfa2['meshes']);}}['_onSetMesh'+'es'](_0x217e58){this['_cloneMesh'+'es'](_0x217e58);}['_clearSkin'+'Instances'](){for(let _0x2bbe8b=-0x16d5+-0x1a*-0x71+0xb5b;_0x2bbe8b<this['_meshInsta'+'nces']['length'];_0x2bbe8b++){const _0x456bde=this['_meshInsta'+'nces'][_0x2bbe8b];_l['removeCach'+'edSkinInst'+'ance'](_0x456bde['skinInstan'+'ce']),_0x456bde['skinInstan'+'ce']=null;}}['_cloneSkin'+'Instances'](){if(this['_meshInsta'+'nces']['length']&&this['_rootBone']instanceof Ie)for(let _0x7f236b=-0x1*-0x15ac+0x1*0x25c1+0x13cf*-0x3;_0x7f236b<this['_meshInsta'+'nces']['length'];_0x7f236b++){const _0x43f0a2=this['_meshInsta'+'nces'][_0x7f236b],_0x5de5c2=_0x43f0a2['mesh'];_0x5de5c2['skin']&&!_0x43f0a2['skinInstan'+'ce']&&(_0x43f0a2['skinInstan'+'ce']=_l['createCach'+'edSkinInst'+'ance'](_0x5de5c2['skin'],this['_rootBone'],this['entity']));}}['_cloneMesh'+'es'](_0x2b67da){if(_0x2b67da&&_0x2b67da['length']){const _0x43d22f=[];for(let _0x86e12c=0x1*0x1b3b+0x19*0x3e+-0x1*0x2149;_0x86e12c<_0x2b67da['length'];_0x86e12c++){const _0x551d7a=_0x2b67da[_0x86e12c],_0x5a3ccd=this['_materialR'+'eferences'][_0x86e12c]&&this['_materialR'+'eferences'][_0x86e12c]['asset']&&this['_materialR'+'eferences'][_0x86e12c]['asset']['resource'],_0x135732=new He(_0x551d7a,_0x5a3ccd||this['system']['defaultMat'+'erial'],this['entity']);_0x43d22f['push'](_0x135732),_0x551d7a['morph']&&(_0x135732['morphInsta'+'nce']=new xa(_0x551d7a['morph']));}this['meshInstan'+'ces']=_0x43d22f,this['_cloneSkin'+'Instances']();}}['_onRenderA'+'ssetUnload'](){this['_type']==='asset'&&this['destroyMes'+'hInstances']();}['_onRenderA'+'ssetRemove'](){var _0x10b085;(_0x10b085=this['_evtSetMes'+'hes'])==null||_0x10b085['off'](),this['_evtSetMes'+'hes']=null,this['_onRenderA'+'ssetUnload']();}['_onMateria'+'lAdded'](_0x4f5bb7,_0x2b442d,_0x22d4d2){_0x22d4d2['resource']?this['_onMateria'+'lLoad'](_0x4f5bb7,_0x2b442d,_0x22d4d2):this['enabled']&&this['entity']['enabled']&&this['system']['app']['assets']['load'](_0x22d4d2);}['_updateMai'+'nMaterial'](_0x46f8aa,_0x32492f){_0x46f8aa===0x12e3+0x11*0x94+-0x1cb7&&(this['material']=_0x32492f);}['_onMateria'+'lLoad'](_0x4e3838,_0x3c34d4,_0xf3bfb1){this['_meshInsta'+'nces'][_0x4e3838]&&(this['_meshInsta'+'nces'][_0x4e3838]['material']=_0xf3bfb1['resource']),this['_updateMai'+'nMaterial'](_0x4e3838,_0xf3bfb1['resource']);}['_onMateria'+'lRemove'](_0x358122,_0x3ca551,_0x9f873a){this['_meshInsta'+'nces'][_0x358122]&&(this['_meshInsta'+'nces'][_0x358122]['material']=this['system']['defaultMat'+'erial']),this['_updateMai'+'nMaterial'](_0x358122,this['system']['defaultMat'+'erial']);}['_onMateria'+'lUnload'](_0x3fafa5,_0x443b71,_0x58e0d9){this['_meshInsta'+'nces'][_0x3fafa5]&&(this['_meshInsta'+'nces'][_0x3fafa5]['material']=this['system']['defaultMat'+'erial']),this['_updateMai'+'nMaterial'](_0x3fafa5,this['system']['defaultMat'+'erial']);}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x378e83,_0x9d7c8a){_0x378e83['rootBone']&&(this['rootBone']=_0x9d7c8a[_0x378e83['rootBone']['getGuid']()]);}}class BO{constructor(){this['enabled']=!(0x2281*0x1+0x25ca+-0x255*0x1f);}}const ku=['enabled'],Gr=['material','meshInstan'+'ces','asset','materialAs'+'sets','castShadow'+'s','receiveSha'+'dows','castShadow'+'sLightmap','lightmappe'+'d','lightmapSi'+'zeMultipli'+'er','renderStyl'+'e','type','layers','isStatic','batchGroup'+'Id','rootBone'];class zO extends ct{constructor(_0x86d33f){super(_0x86d33f),this['id']='render',this['ComponentT'+'ype']=n0,this['DataType']=BO,this['schema']=ku,this['defaultMat'+'erial']=Qn(_0x86d33f['graphicsDe'+'vice']),this['on']('beforeremo'+'ve',this['onRemove'],this);}['initialize'+'ComponentD'+'ata'](_0x5289a5,_0x4bf84a,_0x2824c0){(_0x4bf84a['batchGroup'+'Id']===null||_0x4bf84a['batchGroup'+'Id']===void(-0x17*0x2+0x1b1f+-0x1af1))&&(_0x4bf84a['batchGroup'+'Id']=-(0x1e67+0xb55*-0x1+-0x1*0x1311)),_0x4bf84a['layers']&&_0x4bf84a['layers']['length']&&(_0x4bf84a['layers']=_0x4bf84a['layers']['slice'](0x1*-0x1ef4+-0x2b9+0x21ad));for(let _0x32727a=-0x11e6+0x15a0+-0x9f*0x6;_0x32727a<Gr['length'];_0x32727a++)_0x4bf84a['hasOwnProp'+'erty'](Gr[_0x32727a])&&(_0x5289a5[Gr[_0x32727a]]=_0x4bf84a[Gr[_0x32727a]]);_0x4bf84a['aabbCenter']&&_0x4bf84a['aabbHalfEx'+'tents']&&(_0x5289a5['customAabb']=new De(new D(_0x4bf84a['aabbCenter']),new D(_0x4bf84a['aabbHalfEx'+'tents']))),super['initialize'+'ComponentD'+'ata'](_0x5289a5,_0x4bf84a,ku);}['cloneCompo'+'nent'](_0x4cd6d3,_0x210be9){const _0x35b982={};for(let _0xb39230=-0x71e+-0x1b89+0x22a7;_0xb39230<Gr['length'];_0xb39230++)_0x35b982[Gr[_0xb39230]]=_0x4cd6d3['render'][Gr[_0xb39230]];_0x35b982['enabled']=_0x4cd6d3['render']['enabled'],delete _0x35b982['meshInstan'+'ces'];const _0x1b9d84=this['addCompone'+'nt'](_0x210be9,_0x35b982),_0x3463c7=_0x4cd6d3['render']['meshInstan'+'ces'],_0x3b3a83=_0x3463c7['map'](_0x42ed55=>_0x42ed55['mesh']);_0x1b9d84['_onSetMesh'+'es'](_0x3b3a83);for(let _0x8f0c5=0x1e9c+-0xf12*-0x1+-0x2dae;_0x8f0c5<_0x3463c7['length'];_0x8f0c5++)_0x1b9d84['meshInstan'+'ces'][_0x8f0c5]['material']=_0x3463c7[_0x8f0c5]['material'];return _0x4cd6d3['render']['customAabb']&&(_0x1b9d84['customAabb']=_0x4cd6d3['render']['customAabb']['clone']()),_0x1b9d84;}['onRemove'](_0x15acc3,_0x553460){_0x553460['onRemove']();}}we['_buildAcce'+'ssors'](n0['prototype'],ku);class bf{constructor(_0x19736f,_0x205899){h(this,'_construct'+'or'),h(this,'_pool',[]),h(this,'_count',0xd80+-0x19bd*0x1+0xd*0xf1),(this['_construct'+'or']=_0x19736f,this['_resize'](_0x205899));}['_resize'](_0x493831){if(_0x493831>this['_pool']['length']){for(let _0x15f7da=this['_pool']['length'];_0x15f7da<_0x493831;_0x15f7da++)this['_pool'][_0x15f7da]=new this['_construct'+'or']();}}['allocate'](){return this['_count']>=this['_pool']['length']&&this['_resize'](this['_pool']['length']*(0x878*0x1+0x6d*-0x59+0x1d6f*0x1)),this['_pool'][this['_count']++];}['freeAll'](){this['_count']=-0xf1f*0x1+0x705+0x81a*0x1;}}let cs,Re,Bs,Ka;const VO=new le(),GO=new le(),Pc=new D();class bs extends we{constructor(){super(...arguments),h(this,'_angularDa'+'mping',0x1*0xb55+-0x11d0+-0x15*-0x4f),h(this,'_angularFa'+'ctor',new D(-0x1446+0x2532*0x1+0x47*-0x3d,-0x4d4+0x1de4+0x5*-0x503,0x1dff+-0x1*0x2177+-0x1*-0x379)),h(this,'_angularVe'+'locity',new D()),h(this,'_body',null),h(this,'_friction',-0xc*-0x28f+0x213*0x1+-0x20c7+0.5),h(this,'_group',Gg),h(this,'_linearDam'+'ping',-0x170c+0x865+0xea7),h(this,'_linearFac'+'tor',new D(0x767+0x120f+-0x1975,0x1ed*0x14+0xc*-0x167+-0x15af,0x14a7+-0x1e7a*-0x1+-0x3320)),h(this,'_linearVel'+'ocity',new D()),h(this,'_mask',Mu),h(this,'_mass',-0x73c*-0x5+-0x24f9+0xce),h(this,'_restituti'+'on',-0x12*-0x3d+0x2168*0x1+-0x25b2),h(this,'_rollingFr'+'iction',-0x173b+0x50b*0x1+-0x10*-0x123),h(this,'_simulatio'+'nEnabled',!(-0x1507+-0x3cf*-0x5+-0x1fd*-0x1)),h(this,'_type',yo);}static['onLibraryL'+'oaded'](){typeof Ammo<'u'&&(cs=new Ammo['btTransfor'+'m'](),Re=new Ammo['btVector3'](),Bs=new Ammo['btVector3'](),Ka=new Ammo['btQuaterni'+'on']());}static['onAppDestr'+'oy'](){Ammo['destroy'](cs),Ammo['destroy'](Re),Ammo['destroy'](Bs),Ammo['destroy'](Ka),cs=null,Re=null,Bs=null,Ka=null;}set['angularDam'+'ping'](_0x2667a1){this['_angularDa'+'mping']!==_0x2667a1&&(this['_angularDa'+'mping']=_0x2667a1,this['_body']&&this['_body']['setDamping'](this['_linearDam'+'ping'],_0x2667a1));}get['angularDam'+'ping'](){return this['_angularDa'+'mping'];}set['angularFac'+'tor'](_0x29927a){this['_angularFa'+'ctor']['equals'](_0x29927a)||(this['_angularFa'+'ctor']['copy'](_0x29927a),this['_body']&&this['_type']===ks&&(Re['setValue'](_0x29927a['x'],_0x29927a['y'],_0x29927a['z']),this['_body']['setAngular'+'Factor'](Re)));}get['angularFac'+'tor'](){return this['_angularFa'+'ctor'];}set['angularVel'+'ocity'](_0x5a21b4){this['_body']&&this['_type']===ks&&(this['_body']['activate'](),Re['setValue'](_0x5a21b4['x'],_0x5a21b4['y'],_0x5a21b4['z']),this['_body']['setAngular'+'Velocity'](Re),this['_angularVe'+'locity']['copy'](_0x5a21b4));}get['angularVel'+'ocity'](){if(this['_body']&&this['_type']===ks){const _0x250989=this['_body']['getAngular'+'Velocity']();this['_angularVe'+'locity']['set'](_0x250989['x'](),_0x250989['y'](),_0x250989['z']());}return this['_angularVe'+'locity'];}set['body'](_0x5a72fd){this['_body']!==_0x5a72fd&&(this['_body']=_0x5a72fd,_0x5a72fd&&this['_simulatio'+'nEnabled']&&_0x5a72fd['activate']());}get['body'](){return this['_body'];}set['friction'](_0x227947){this['_friction']!==_0x227947&&(this['_friction']=_0x227947,this['_body']&&this['_body']['setFrictio'+'n'](_0x227947));}get['friction'](){return this['_friction'];}set['group'](_0x488694){this['_group']!==_0x488694&&(this['_group']=_0x488694,this['enabled']&&this['entity']['enabled']&&(this['disableSim'+'ulation'](),this['enableSimu'+'lation']()));}get['group'](){return this['_group'];}set['linearDamp'+'ing'](_0x4ec9d3){this['_linearDam'+'ping']!==_0x4ec9d3&&(this['_linearDam'+'ping']=_0x4ec9d3,this['_body']&&this['_body']['setDamping'](_0x4ec9d3,this['_angularDa'+'mping']));}get['linearDamp'+'ing'](){return this['_linearDam'+'ping'];}set['linearFact'+'or'](_0x20ae3b){this['_linearFac'+'tor']['equals'](_0x20ae3b)||(this['_linearFac'+'tor']['copy'](_0x20ae3b),this['_body']&&this['_type']===ks&&(Re['setValue'](_0x20ae3b['x'],_0x20ae3b['y'],_0x20ae3b['z']),this['_body']['setLinearF'+'actor'](Re)));}get['linearFact'+'or'](){return this['_linearFac'+'tor'];}set['linearVelo'+'city'](_0x24b30f){this['_body']&&this['_type']===ks&&(this['_body']['activate'](),Re['setValue'](_0x24b30f['x'],_0x24b30f['y'],_0x24b30f['z']),this['_body']['setLinearV'+'elocity'](Re),this['_linearVel'+'ocity']['copy'](_0x24b30f));}get['linearVelo'+'city'](){if(this['_body']&&this['_type']===ks){const _0x14953a=this['_body']['getLinearV'+'elocity']();this['_linearVel'+'ocity']['set'](_0x14953a['x'](),_0x14953a['y'](),_0x14953a['z']());}return this['_linearVel'+'ocity'];}set['mask'](_0x2096c3){this['_mask']!==_0x2096c3&&(this['_mask']=_0x2096c3,this['enabled']&&this['entity']['enabled']&&(this['disableSim'+'ulation'](),this['enableSimu'+'lation']()));}get['mask'](){return this['_mask'];}set['mass'](_0xf3b3ff){if(this['_mass']!==_0xf3b3ff&&(this['_mass']=_0xf3b3ff,this['_body']&&this['_type']===ks)){const _0x311aa9=this['enabled']&&this['entity']['enabled'];_0x311aa9&&this['disableSim'+'ulation'](),this['_body']['getCollisi'+'onShape']()['calculateL'+'ocalInerti'+'a'](_0xf3b3ff,Re),this['_body']['setMassPro'+'ps'](_0xf3b3ff,Re),this['_body']['updateIner'+'tiaTensor'](),_0x311aa9&&this['enableSimu'+'lation']();}}get['mass'](){return this['_mass'];}set['restitutio'+'n'](_0x50344f){this['_restituti'+'on']!==_0x50344f&&(this['_restituti'+'on']=_0x50344f,this['_body']&&this['_body']['setRestitu'+'tion'](_0x50344f));}get['restitutio'+'n'](){return this['_restituti'+'on'];}set['rollingFri'+'ction'](_0x5dc092){this['_rollingFr'+'iction']!==_0x5dc092&&(this['_rollingFr'+'iction']=_0x5dc092,this['_body']&&this['_body']['setRolling'+'Friction'](_0x5dc092));}get['rollingFri'+'ction'](){return this['_rollingFr'+'iction'];}set['type'](_0x272b6f){if(this['_type']!==_0x272b6f){switch(this['_type']=_0x272b6f,this['disableSim'+'ulation'](),_0x272b6f){case ks:this['_group']=jL,this['_mask']=Wg;break;case Ha:this['_group']=YL,this['_mask']=Wg;break;case yo:default:this['_group']=Gg,this['_mask']=Mu;break;}this['createBody']();}}get['type'](){return this['_type'];}['createBody'](){const _0x3daaf9=this['entity'];let _0x184cdd;if(_0x3daaf9['collision']&&(_0x184cdd=_0x3daaf9['collision']['shape'],_0x3daaf9['trigger']&&(_0x3daaf9['trigger']['destroy'](),delete _0x3daaf9['trigger'])),_0x184cdd){this['_body']&&(this['system']['removeBody'](this['_body']),this['system']['destroyBod'+'y'](this['_body']),this['_body']=null);const _0x188272=this['_type']===ks?this['_mass']:-0x1*0x9e+0x11a*-0x1d+0x2090;this['_getEntity'+'Transform'](cs);const _0x2a0d21=this['system']['createBody'](_0x188272,_0x184cdd,cs);if(_0x2a0d21['setRestitu'+'tion'](this['_restituti'+'on']),_0x2a0d21['setFrictio'+'n'](this['_friction']),_0x2a0d21['setRolling'+'Friction'](this['_rollingFr'+'iction']),_0x2a0d21['setDamping'](this['_linearDam'+'ping'],this['_angularDa'+'mping']),this['_type']===ks){const _0x45c86c=this['_linearFac'+'tor'];Re['setValue'](_0x45c86c['x'],_0x45c86c['y'],_0x45c86c['z']),_0x2a0d21['setLinearF'+'actor'](Re);const _0xf4c54c=this['_angularFa'+'ctor'];Re['setValue'](_0xf4c54c['x'],_0xf4c54c['y'],_0xf4c54c['z']),_0x2a0d21['setAngular'+'Factor'](Re);}else this['_type']===Ha&&(_0x2a0d21['setCollisi'+'onFlags'](_0x2a0d21['getCollisi'+'onFlags']()|qL),_0x2a0d21['setActivat'+'ionState'](Vg));_0x2a0d21['entity']=_0x3daaf9,this['body']=_0x2a0d21,this['enabled']&&_0x3daaf9['enabled']&&this['enableSimu'+'lation']();}}['isActive'](){return this['_body']?this['_body']['isActive']():!(-0xbf*-0x11+0x1543+0x21f1*-0x1);}['activate'](){this['_body']&&this['_body']['activate']();}['enableSimu'+'lation'](){const _0x2dbe0f=this['entity'];if(_0x2dbe0f['collision']&&_0x2dbe0f['collision']['enabled']&&!this['_simulatio'+'nEnabled']){const _0x3ab70b=this['_body'];if(_0x3ab70b){switch(this['system']['addBody'](_0x3ab70b,this['_group'],this['_mask']),this['_type']){case ks:this['system']['_dynamic']['push'](this),_0x3ab70b['forceActiv'+'ationState'](Pu),this['syncEntity'+'ToBody']();break;case Ha:this['system']['_kinematic']['push'](this),_0x3ab70b['forceActiv'+'ationState'](Vg);break;case yo:_0x3ab70b['forceActiv'+'ationState'](Pu),this['syncEntity'+'ToBody']();break;}_0x2dbe0f['collision']['type']==='compound'&&this['system']['_compounds']['push'](_0x2dbe0f['collision']),_0x3ab70b['activate'](),this['_simulatio'+'nEnabled']=!(-0x353+-0x57*-0x6d+-0x34*0xa6);}}}['disableSim'+'ulation'](){const _0x28f525=this['_body'];if(_0x28f525&&this['_simulatio'+'nEnabled']){const _0x1d90c0=this['system'];let _0x4979d3=_0x1d90c0['_compounds']['indexOf'](this['entity']['collision']);_0x4979d3>-(0x1*-0x2055+-0x20a6+-0x103f*-0x4)&&_0x1d90c0['_compounds']['splice'](_0x4979d3,-0x2061+-0x13*-0x184+0x2*0x1cb),_0x4979d3=_0x1d90c0['_dynamic']['indexOf'](this),_0x4979d3>-(-0x17af+0x3b*-0xb+0x1a39)&&_0x1d90c0['_dynamic']['splice'](_0x4979d3,0x3d*-0x98+-0x1*0x207+0x2640),_0x4979d3=_0x1d90c0['_kinematic']['indexOf'](this),_0x4979d3>-(-0x133e+0x1f*-0x5b+0x2*0xf22)&&_0x1d90c0['_kinematic']['splice'](_0x4979d3,-0x1*0x11b6+0x1b84+-0x9cd),_0x1d90c0['removeBody'](_0x28f525),_0x28f525['forceActiv'+'ationState'](Yv),this['_simulatio'+'nEnabled']=!(0xc4b+0xc*-0x27f+-0x8d5*-0x2);}}['applyForce'](_0x34f83e,_0x5383a2,_0x422baa,_0x1cf417,_0x3a023b,_0x12892d){const _0x59f587=this['_body'];_0x59f587&&(_0x59f587['activate'](),_0x34f83e instanceof D?Re['setValue'](_0x34f83e['x'],_0x34f83e['y'],_0x34f83e['z']):Re['setValue'](_0x34f83e,_0x5383a2,_0x422baa),_0x5383a2 instanceof D?Bs['setValue'](_0x5383a2['x'],_0x5383a2['y'],_0x5383a2['z']):_0x1cf417!==void(0x9a+-0x1f0b+0x1e71)?Bs['setValue'](_0x1cf417,_0x3a023b,_0x12892d):Bs['setValue'](-0x27*-0x7d+-0x336+0xc1*-0x15,0x2*0x5db+-0x2*-0x8e9+-0x1d88,-0x597+-0x1*0x1ab1+0x2048),_0x59f587['applyForce'](Re,Bs));}['applyTorqu'+'e'](_0x43e6c0,_0x137791,_0x38a0b1){const _0x3f9a78=this['_body'];_0x3f9a78&&(_0x3f9a78['activate'](),_0x43e6c0 instanceof D?Re['setValue'](_0x43e6c0['x'],_0x43e6c0['y'],_0x43e6c0['z']):Re['setValue'](_0x43e6c0,_0x137791,_0x38a0b1),_0x3f9a78['applyTorqu'+'e'](Re));}['applyImpul'+'se'](_0x4b879f,_0x528dfe,_0x432631,_0x16ef4d,_0x1742e1,_0x18aad3){const _0x17c6f0=this['_body'];_0x17c6f0&&(_0x17c6f0['activate'](),_0x4b879f instanceof D?Re['setValue'](_0x4b879f['x'],_0x4b879f['y'],_0x4b879f['z']):Re['setValue'](_0x4b879f,_0x528dfe,_0x432631),_0x528dfe instanceof D?Bs['setValue'](_0x528dfe['x'],_0x528dfe['y'],_0x528dfe['z']):_0x16ef4d!==void(-0x10*0x5e+-0x1888+-0x1*-0x1e68)?Bs['setValue'](_0x16ef4d,_0x1742e1,_0x18aad3):Bs['setValue'](0x92f*-0x3+0xeef+0xc9e,0x206b+0x18d*-0xd+0x2*-0x621,0x9*-0x41f+0x120*0x4+0x2097),_0x17c6f0['applyImpul'+'se'](Re,Bs));}['applyTorqu'+'eImpulse'](_0x13c2e6,_0x31ed51,_0x3bb8a7){const _0x353f7a=this['_body'];_0x353f7a&&(_0x353f7a['activate'](),_0x13c2e6 instanceof D?Re['setValue'](_0x13c2e6['x'],_0x13c2e6['y'],_0x13c2e6['z']):Re['setValue'](_0x13c2e6,_0x31ed51,_0x3bb8a7),_0x353f7a['applyTorqu'+'eImpulse'](Re));}['isStatic'](){return this['_type']===yo;}['isStaticOr'+'Kinematic'](){return this['_type']===yo||this['_type']===Ha;}['isKinemati'+'c'](){return this['_type']===Ha;}['_getEntity'+'Transform'](_0x307c8f){const _0x320053=this['entity'],_0x60a1a=_0x320053['collision'];if(_0x60a1a){const _0x260f42=_0x60a1a['getShapePo'+'sition'](),_0x141cb7=_0x60a1a['getShapeRo'+'tation']();Re['setValue'](_0x260f42['x'],_0x260f42['y'],_0x260f42['z']),Ka['setValue'](_0x141cb7['x'],_0x141cb7['y'],_0x141cb7['z'],_0x141cb7['w']);}else{const _0x9931a3=_0x320053['getPositio'+'n'](),_0x18ebd3=_0x320053['getRotatio'+'n']();Re['setValue'](_0x9931a3['x'],_0x9931a3['y'],_0x9931a3['z']),Ka['setValue'](_0x18ebd3['x'],_0x18ebd3['y'],_0x18ebd3['z'],_0x18ebd3['w']);}_0x307c8f['setOrigin'](Re),_0x307c8f['setRotatio'+'n'](Ka);}['syncEntity'+'ToBody'](){const _0x14bfe6=this['_body'];if(_0x14bfe6){if(this['_getEntity'+'Transform'](cs),_0x14bfe6['setWorldTr'+'ansform'](cs),this['_type']===Ha){const _0xd7fbed=_0x14bfe6['getMotionS'+'tate']();_0xd7fbed&&_0xd7fbed['setWorldTr'+'ansform'](cs);}_0x14bfe6['activate']();}}['_updateDyn'+'amic'](){const _0x57fe66=this['_body'];if(_0x57fe66['isActive']()){const _0x47f8d8=_0x57fe66['getMotionS'+'tate']();if(_0x47f8d8){const _0x49c0ac=this['entity'];_0x47f8d8['getWorldTr'+'ansform'](cs);const _0x118f74=cs['getOrigin'](),_0x36e059=cs['getRotatio'+'n'](),_0x866c49=_0x49c0ac['collision'];if(_0x866c49&&_0x866c49['_hasOffset']){const _0x5a816d=_0x866c49['data']['linearOffs'+'et'],_0x3af111=_0x866c49['data']['angularOff'+'set'],_0x2b0faf=GO['copy'](_0x3af111)['invert'](),_0x1e8500=VO['set'](_0x36e059['x'](),_0x36e059['y'](),_0x36e059['z'](),_0x36e059['w']())['mul'](_0x2b0faf);_0x1e8500['transformV'+'ector'](_0x5a816d,Pc),_0x49c0ac['setPositio'+'n'](_0x118f74['x']()-Pc['x'],_0x118f74['y']()-Pc['y'],_0x118f74['z']()-Pc['z']),_0x49c0ac['setRotatio'+'n'](_0x1e8500);}else _0x49c0ac['setPositio'+'n'](_0x118f74['x'](),_0x118f74['y'](),_0x118f74['z']()),_0x49c0ac['setRotatio'+'n'](_0x36e059['x'](),_0x36e059['y'](),_0x36e059['z'](),_0x36e059['w']());}}}['_updateKin'+'ematic'](){const _0x2b0015=this['_body']['getMotionS'+'tate']();_0x2b0015&&(this['_getEntity'+'Transform'](cs),_0x2b0015['setWorldTr'+'ansform'](cs));}['teleport'](_0x2cf903,_0x2d3189,_0x5f1de4,_0x1530b,_0x1e33a4,_0x2090f5){_0x2cf903 instanceof D?this['entity']['setPositio'+'n'](_0x2cf903):this['entity']['setPositio'+'n'](_0x2cf903,_0x2d3189,_0x5f1de4),_0x2d3189 instanceof le?this['entity']['setRotatio'+'n'](_0x2d3189):_0x2d3189 instanceof D?this['entity']['setEulerAn'+'gles'](_0x2d3189):_0x1530b!==void(0x47f+0xd3*0x25+0x6*-0x5d5)&&this['entity']['setEulerAn'+'gles'](_0x1530b,_0x1e33a4,_0x2090f5),this['syncEntity'+'ToBody']();}['onEnable'](){this['_body']||this['createBody'](),this['enableSimu'+'lation']();}['onDisable'](){this['disableSim'+'ulation']();}}h(bs,'EVENT_CONT'+'ACT','contact'),h(bs,'EVENT_COLL'+'ISIONSTART','collisions'+'tart'),h(bs,'EVENT_COLL'+'ISIONEND','collisione'+'nd'),h(bs,'EVENT_TRIG'+'GERENTER','triggerent'+'er'),h(bs,'EVENT_TRIG'+'GERLEAVE','triggerlea'+'ve'),h(bs,'order',-(0x186a+0x1*0xc46+-0x24af));class HO{constructor(){this['enabled']=!(0x19b2+-0x25*-0x10d+0x4093*-0x1);}}let Mi,Di;class eS{constructor(_0x3eff1e,_0x498fa9,_0x3fe46a,_0x1d4287){h(this,'entity'),h(this,'point'),h(this,'normal'),h(this,'hitFractio'+'n'),(this['entity']=_0x3eff1e,this['point']=_0x498fa9,this['normal']=_0x3fe46a,this['hitFractio'+'n']=_0x1d4287);}}class WO{constructor(_0x7aac86,_0x247552,_0x5f4f04){h(this,'a'),h(this,'b'),h(this,'impulse'),h(this,'localPoint'+'A'),h(this,'localPoint'+'B'),h(this,'pointA'),h(this,'pointB'),h(this,'normal'),arguments['length']!==-0x1d*0xeb+0x2ee+-0x17b1*-0x1?(this['a']=_0x7aac86,this['b']=_0x247552,this['impulse']=_0x5f4f04['impulse'],this['localPoint'+'A']=_0x5f4f04['localPoint'],this['localPoint'+'B']=_0x5f4f04['localPoint'+'Other'],this['pointA']=_0x5f4f04['point'],this['pointB']=_0x5f4f04['pointOther'],this['normal']=_0x5f4f04['normal']):(this['a']=null,this['b']=null,this['impulse']=-0x8e3+-0x8d3+-0x2*-0x8db,this['localPoint'+'A']=new D(),this['localPoint'+'B']=new D(),this['pointA']=new D(),this['pointB']=new D(),this['normal']=new D());}}class $O{constructor(_0x25fb73=new D(),_0x54a9d7=new D(),_0x40e65c=new D(),_0x198bd7=new D(),_0x303b90=new D(),_0x1d60c4=0x3*0x8d9+0x3*-0xc57+0xa7a*0x1){h(this,'localPoint'),h(this,'localPoint'+'Other'),h(this,'point'),h(this,'pointOther'),h(this,'normal'),h(this,'impulse'),(this['localPoint']=_0x25fb73,this['localPoint'+'Other']=_0x54a9d7,this['point']=_0x40e65c,this['pointOther']=_0x198bd7,this['normal']=_0x303b90,this['impulse']=_0x1d60c4);}}class XO{constructor(_0x4e2333,_0x169491){h(this,'other'),h(this,'contacts'),(this['other']=_0x4e2333,this['contacts']=_0x169491);}}const o0=['enabled'];class wm extends ct{constructor(_0x2cd3a8){super(_0x2cd3a8),h(this,'maxSubStep'+'s',-0x1fde*0x1+-0x168d+0x1*0x3675),h(this,'fixedTimeS'+'tep',(-0x1*0x105e+-0x5*-0x79+-0x1*-0xe02)/(-0x224f+0x1b33+0x758)),h(this,'gravity',new D(-0x23b1*-0x1+-0x1543*-0x1+-0x38f4,-(-0x1043+0x21b6+-0x1*0x116a+0.8100000000000005),-0x377*0x9+-0x2*-0xa30+-0xacf*-0x1)),h(this,'_gravityFl'+'oat32',new Float32Array(-0x1751+-0x1*-0x23a9+-0xc55)),h(this,'_dynamic',[]),h(this,'_kinematic',[]),h(this,'_triggers',[]),h(this,'_compounds',[]),(this['id']='rigidbody',this['_stats']=_0x2cd3a8['stats']['frame'],this['ComponentT'+'ype']=bs,this['DataType']=HO,this['contactPoi'+'ntPool']=null,this['contactRes'+'ultPool']=null,this['singleCont'+'actResultP'+'ool']=null,this['schema']=o0,this['collisions']={},this['frameColli'+'sions']={},this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this));}['onLibraryL'+'oaded'](){if(typeof Ammo<'u'){if(this['collisionC'+'onfigurati'+'on']=new Ammo['btDefaultC'+'ollisionCo'+'nfiguratio'+'n'](),this['dispatcher']=new Ammo['btCollisio'+'nDispatche'+'r'](this['collisionC'+'onfigurati'+'on']),this['overlappin'+'gPairCache']=new Ammo['btDbvtBroa'+'dphase'](),this['solver']=new Ammo['btSequenti'+'alImpulseC'+'onstraintS'+'olver'](),this['dynamicsWo'+'rld']=new Ammo['btDiscrete'+'DynamicsWo'+'rld'](this['dispatcher'],this['overlappin'+'gPairCache'],this['solver'],this['collisionC'+'onfigurati'+'on']),this['dynamicsWo'+'rld']['setInterna'+'lTickCallb'+'ack']){const _0x1fb077=Ammo['addFunctio'+'n'](this['_checkForC'+'ollisions']['bind'](this),'vif');this['dynamicsWo'+'rld']['setInterna'+'lTickCallb'+'ack'](_0x1fb077);}else w['warn']('WARNING:\x20T'+'his\x20versio'+'n\x20of\x20ammo.'+'js\x20can\x20pot'+'entially\x20f'+'ail\x20to\x20rep'+'ort\x20contac'+'ts.\x20Please'+'\x20update\x20it'+'\x20to\x20the\x20la'+'test\x20versi'+'on.');Mi=new Ammo['btVector3'](),Di=new Ammo['btVector3'](),bs['onLibraryL'+'oaded'](),this['contactPoi'+'ntPool']=new bf($O,0xb23*0x1+0xae8+-0x160a),this['contactRes'+'ultPool']=new bf(XO,-0x2*0x103c+0x1b*0x4f+0x1824),this['singleCont'+'actResultP'+'ool']=new bf(WO,0x15c7+-0x17b5+0x2d*0xb),this['app']['systems']['on']('update',this['onUpdate'],this);}else this['app']['systems']['off']('update',this['onUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x38e644,_0x412b38,_0x7122f8){const _0x3d57e8=['mass','linearDamp'+'ing','angularDam'+'ping','linearFact'+'or','angularFac'+'tor','friction','rollingFri'+'ction','restitutio'+'n','type','group','mask'];for(const _0x2a66c2 of _0x3d57e8)if(_0x412b38['hasOwnProp'+'erty'](_0x2a66c2)){const _0x25797e=_0x412b38[_0x2a66c2];Array['isArray'](_0x25797e)?_0x38e644[_0x2a66c2]=new D(_0x25797e[-0x73*-0x4c+-0x61*0x5b+-0x1d*-0x3],_0x25797e[0x13*0x18d+0x2*0xea3+-0x432*0xe],_0x25797e[-0x5fb+-0x16a6+0x1*0x1ca3]):_0x38e644[_0x2a66c2]=_0x25797e;}super['initialize'+'ComponentD'+'ata'](_0x38e644,_0x412b38,['enabled']);}['cloneCompo'+'nent'](_0x2d3ed6,_0x70610a){const _0x15fb2c=_0x2d3ed6['rigidbody'],_0x26ca93={'enabled':_0x15fb2c['enabled'],'mass':_0x15fb2c['mass'],'linearDamping':_0x15fb2c['linearDamp'+'ing'],'angularDamping':_0x15fb2c['angularDam'+'ping'],'linearFactor':[_0x15fb2c['linearFact'+'or']['x'],_0x15fb2c['linearFact'+'or']['y'],_0x15fb2c['linearFact'+'or']['z']],'angularFactor':[_0x15fb2c['angularFac'+'tor']['x'],_0x15fb2c['angularFac'+'tor']['y'],_0x15fb2c['angularFac'+'tor']['z']],'friction':_0x15fb2c['friction'],'rollingFriction':_0x15fb2c['rollingFri'+'ction'],'restitution':_0x15fb2c['restitutio'+'n'],'type':_0x15fb2c['type'],'group':_0x15fb2c['group'],'mask':_0x15fb2c['mask']};return this['addCompone'+'nt'](_0x70610a,_0x26ca93);}['onBeforeRe'+'move'](_0x19be54,_0x5b7561){_0x5b7561['enabled']&&(_0x5b7561['enabled']=!(-0x14b1+-0x127+0x31f*0x7)),_0x5b7561['body']&&(this['destroyBod'+'y'](_0x5b7561['body']),_0x5b7561['body']=null);}['addBody'](_0xfb3467,_0x56c809,_0x2fb428){_0x56c809!==void(0x1*-0x1e31+0x4*-0x1df+0x25ad)&&_0x2fb428!==void(-0xf20*-0x1+0xb*0x229+-0x26e3)?this['dynamicsWo'+'rld']['addRigidBo'+'dy'](_0xfb3467,_0x56c809,_0x2fb428):this['dynamicsWo'+'rld']['addRigidBo'+'dy'](_0xfb3467);}['removeBody'](_0x6fb3a2){this['dynamicsWo'+'rld']['removeRigi'+'dBody'](_0x6fb3a2);}['createBody'](_0x36ff52,_0x2f9437,_0x7fed85){const _0xcc5a8a=new Ammo['btVector3'](-0x5*-0x151+0x131c+0x19b1*-0x1,-0x79*-0x4e+0x1187+-0x1*0x3665,-0x1*0x2452+0x1*-0x883+0x1*0x2cd5);_0x36ff52!==-0x3ef*-0x1+0xe02+-0x3*0x5fb&&_0x2f9437['calculateL'+'ocalInerti'+'a'](_0x36ff52,_0xcc5a8a);const _0x3f958f=new Ammo['btDefaultM'+'otionState'](_0x7fed85),_0x10fff3=new Ammo['btRigidBod'+'yConstruct'+'ionInfo'](_0x36ff52,_0x3f958f,_0x2f9437,_0xcc5a8a),_0x4710f9=new Ammo['btRigidBod'+'y'](_0x10fff3);return Ammo['destroy'](_0x10fff3),Ammo['destroy'](_0xcc5a8a),_0x4710f9;}['destroyBod'+'y'](_0x2bd8ed){const _0x5e73f1=_0x2bd8ed['getMotionS'+'tate']();_0x5e73f1&&Ammo['destroy'](_0x5e73f1),Ammo['destroy'](_0x2bd8ed);}['raycastFir'+'st'](_0x589a34,_0x5019fb,_0x513191={}){if(_0x513191['filterTags']||_0x513191['filterCall'+'back'])return _0x513191['sort']=!(-0x14ec+-0x5f5+0x3d7*0x7),this['raycastAll'](_0x589a34,_0x5019fb,_0x513191)[-0x1f7+-0x2407+0x25fe]||null;let _0x3c2d44=null;Mi['setValue'](_0x589a34['x'],_0x589a34['y'],_0x589a34['z']),Di['setValue'](_0x5019fb['x'],_0x5019fb['y'],_0x5019fb['z']);const _0x2fae40=new Ammo['ClosestRay'+'ResultCall'+'back'](Mi,Di);if(typeof _0x513191['filterColl'+'isionGroup']=='number'&&_0x2fae40['set_m_coll'+'isionFilte'+'rGroup'](_0x513191['filterColl'+'isionGroup']),typeof _0x513191['filterColl'+'isionMask']=='number'&&_0x2fae40['set_m_coll'+'isionFilte'+'rMask'](_0x513191['filterColl'+'isionMask']),this['dynamicsWo'+'rld']['rayTest'](Mi,Di,_0x2fae40),_0x2fae40['hasHit']()){const _0x372201=_0x2fae40['get_m_coll'+'isionObjec'+'t'](),_0x37908c=Ammo['castObject'](_0x372201,Ammo['btRigidBod'+'y']);if(_0x37908c){const _0x3ddf23=_0x2fae40['get_m_hitP'+'ointWorld'](),_0x591696=_0x2fae40['get_m_hitN'+'ormalWorld']();_0x3c2d44=new eS(_0x37908c['entity'],new D(_0x3ddf23['x'](),_0x3ddf23['y'](),_0x3ddf23['z']()),new D(_0x591696['x'](),_0x591696['y'](),_0x591696['z']()),_0x2fae40['get_m_clos'+'estHitFrac'+'tion']());}}return Ammo['destroy'](_0x2fae40),_0x3c2d44;}['raycastAll'](_0x50c8eb,_0x18f45b,_0x43e357={}){w['assert'](Ammo['AllHitsRay'+'ResultCall'+'back'],'pc.RigidBo'+'dyComponen'+'tSystem#ra'+'ycastAll:\x20'+'Your\x20versi'+'on\x20of\x20ammo'+'.js\x20does\x20n'+'ot\x20expose\x20'+'Ammo.AllHi'+'tsRayResul'+'tCallback.'+'\x20Update\x20it'+'\x20to\x20latest'+'.');const _0x28fd12=[];Mi['setValue'](_0x50c8eb['x'],_0x50c8eb['y'],_0x50c8eb['z']),Di['setValue'](_0x18f45b['x'],_0x18f45b['y'],_0x18f45b['z']);const _0x556db0=new Ammo['AllHitsRay'+'ResultCall'+'back'](Mi,Di);if(typeof _0x43e357['filterColl'+'isionGroup']=='number'&&_0x556db0['set_m_coll'+'isionFilte'+'rGroup'](_0x43e357['filterColl'+'isionGroup']),typeof _0x43e357['filterColl'+'isionMask']=='number'&&_0x556db0['set_m_coll'+'isionFilte'+'rMask'](_0x43e357['filterColl'+'isionMask']),this['dynamicsWo'+'rld']['rayTest'](Mi,Di,_0x556db0),_0x556db0['hasHit']()){const _0x2a6878=_0x556db0['get_m_coll'+'isionObjec'+'ts'](),_0x192048=_0x556db0['get_m_hitP'+'ointWorld'](),_0x13452b=_0x556db0['get_m_hitN'+'ormalWorld'](),_0x4eea10=_0x556db0['get_m_hitF'+'ractions'](),_0x2de577=_0x2a6878['size']();for(let _0x1d8426=0x1*0x1525+0x17e3+0x4*-0xb42;_0x1d8426<_0x2de577;_0x1d8426++){const _0x44f398=Ammo['castObject'](_0x2a6878['at'](_0x1d8426),Ammo['btRigidBod'+'y']);if(_0x44f398&&_0x44f398['entity']){if(_0x43e357['filterTags']&&!_0x44f398['entity']['tags']['has'](..._0x43e357['filterTags'])||_0x43e357['filterCall'+'back']&&!_0x43e357['filterCall'+'back'](_0x44f398['entity']))continue;const _0x3d4433=_0x192048['at'](_0x1d8426),_0x4bebb5=_0x13452b['at'](_0x1d8426),_0x346b6f=new eS(_0x44f398['entity'],new D(_0x3d4433['x'](),_0x3d4433['y'](),_0x3d4433['z']()),new D(_0x4bebb5['x'](),_0x4bebb5['y'](),_0x4bebb5['z']()),_0x4eea10['at'](_0x1d8426));_0x28fd12['push'](_0x346b6f);}}_0x43e357['sort']&&_0x28fd12['sort']((_0x3b738d,_0x42611e)=>_0x3b738d['hitFractio'+'n']-_0x42611e['hitFractio'+'n']);}return Ammo['destroy'](_0x556db0),_0x28fd12;}['_storeColl'+'ision'](_0x3812cf,_0x31ba8d){let _0x28c679=!(-0x1*0x1082+0x1*0x682+0xa01*0x1);const _0x4a4bf1=_0x3812cf['getGuid']();return this['collisions'][_0x4a4bf1]=this['collisions'][_0x4a4bf1]||{'others':[],'entity':_0x3812cf},this['collisions'][_0x4a4bf1]['others']['indexOf'](_0x31ba8d)<0x2*-0xd4b+-0x23b*-0x4+0x11aa&&(this['collisions'][_0x4a4bf1]['others']['push'](_0x31ba8d),_0x28c679=!(-0x5*-0x639+0x8cf+0x7fc*-0x5)),this['frameColli'+'sions'][_0x4a4bf1]=this['frameColli'+'sions'][_0x4a4bf1]||{'others':[],'entity':_0x3812cf},this['frameColli'+'sions'][_0x4a4bf1]['others']['push'](_0x31ba8d),_0x28c679;}['_createCon'+'tactPointF'+'romAmmo'](_0x1396e9){const _0x3e4b84=_0x1396e9['get_m_loca'+'lPointA'](),_0x43b796=_0x1396e9['get_m_loca'+'lPointB'](),_0x4c047c=_0x1396e9['getPositio'+'nWorldOnA'](),_0x28cf63=_0x1396e9['getPositio'+'nWorldOnB'](),_0x22df80=_0x1396e9['get_m_norm'+'alWorldOnB'](),_0x4eb1b7=this['contactPoi'+'ntPool']['allocate']();return _0x4eb1b7['localPoint']['set'](_0x3e4b84['x'](),_0x3e4b84['y'](),_0x3e4b84['z']()),_0x4eb1b7['localPoint'+'Other']['set'](_0x43b796['x'](),_0x43b796['y'](),_0x43b796['z']()),_0x4eb1b7['point']['set'](_0x4c047c['x'](),_0x4c047c['y'](),_0x4c047c['z']()),_0x4eb1b7['pointOther']['set'](_0x28cf63['x'](),_0x28cf63['y'](),_0x28cf63['z']()),_0x4eb1b7['normal']['set'](_0x22df80['x'](),_0x22df80['y'](),_0x22df80['z']()),_0x4eb1b7['impulse']=_0x1396e9['getApplied'+'Impulse'](),_0x4eb1b7;}['_createRev'+'erseContac'+'tPointFrom'+'Ammo'](_0x1c7004){const _0x419956=_0x1c7004['get_m_loca'+'lPointA'](),_0x2e840e=_0x1c7004['get_m_loca'+'lPointB'](),_0xbee8d5=_0x1c7004['getPositio'+'nWorldOnA'](),_0x222f66=_0x1c7004['getPositio'+'nWorldOnB'](),_0x1b0800=_0x1c7004['get_m_norm'+'alWorldOnB'](),_0x52d58a=this['contactPoi'+'ntPool']['allocate']();return _0x52d58a['localPoint'+'Other']['set'](_0x419956['x'](),_0x419956['y'](),_0x419956['z']()),_0x52d58a['localPoint']['set'](_0x2e840e['x'](),_0x2e840e['y'](),_0x2e840e['z']()),_0x52d58a['pointOther']['set'](_0xbee8d5['x'](),_0xbee8d5['y'](),_0xbee8d5['z']()),_0x52d58a['point']['set'](_0x222f66['x'](),_0x222f66['y'](),_0x222f66['z']()),_0x52d58a['normal']['set'](_0x1b0800['x'](),_0x1b0800['y'](),_0x1b0800['z']()),_0x52d58a['impulse']=_0x1c7004['getApplied'+'Impulse'](),_0x52d58a;}['_createSin'+'gleContact'+'Result'](_0x50b5ef,_0x3eb278,_0x22c3fb){const _0x53f9f6=this['singleCont'+'actResultP'+'ool']['allocate']();return _0x53f9f6['a']=_0x50b5ef,_0x53f9f6['b']=_0x3eb278,_0x53f9f6['localPoint'+'A']=_0x22c3fb['localPoint'],_0x53f9f6['localPoint'+'B']=_0x22c3fb['localPoint'+'Other'],_0x53f9f6['pointA']=_0x22c3fb['point'],_0x53f9f6['pointB']=_0x22c3fb['pointOther'],_0x53f9f6['normal']=_0x22c3fb['normal'],_0x53f9f6['impulse']=_0x22c3fb['impulse'],_0x53f9f6;}['_createCon'+'tactResult'](_0x5254eb,_0x1df8fe){const _0x4af0c3=this['contactRes'+'ultPool']['allocate']();return _0x4af0c3['other']=_0x5254eb,_0x4af0c3['contacts']=_0x1df8fe,_0x4af0c3;}['_cleanOldC'+'ollisions'](){for(const _0x72b625 in this['collisions'])if(this['collisions']['hasOwnProp'+'erty'](_0x72b625)){const _0x1fb8e3=this['frameColli'+'sions'][_0x72b625],_0x3374ee=this['collisions'][_0x72b625],_0x2c5302=_0x3374ee['entity'],_0x13c322=_0x2c5302['collision'],_0x257f44=_0x2c5302['rigidbody'],_0x2f3c4d=_0x3374ee['others'];let _0x5179df=_0x2f3c4d['length'];for(;_0x5179df--;){const _0x407faf=_0x2f3c4d[_0x5179df];(!_0x1fb8e3||_0x1fb8e3['others']['indexOf'](_0x407faf)<0x7b*0x51+-0x15*0x1ad+-0x3ba)&&(_0x2f3c4d['splice'](_0x5179df,-0x1*-0x611+0x2*0x91a+-0x1*0x1844),_0x2c5302['trigger']?(_0x13c322&&_0x13c322['fire']('triggerlea'+'ve',_0x407faf),_0x407faf['rigidbody']&&_0x407faf['rigidbody']['fire']('triggerlea'+'ve',_0x2c5302)):_0x407faf['trigger']||(_0x257f44&&_0x257f44['fire']('collisione'+'nd',_0x407faf),_0x13c322&&_0x13c322['fire']('collisione'+'nd',_0x407faf)));}_0x2f3c4d['length']===0x11ae*-0x1+0x1b69+-0x9bb&&delete this['collisions'][_0x72b625];}}['_hasContac'+'tEvent'](_0x11cf72){const _0x250901=_0x11cf72['collision'];if(_0x250901&&(_0x250901['hasEvent']('collisions'+'tart')||_0x250901['hasEvent']('collisione'+'nd')||_0x250901['hasEvent']('contact')))return!(-0x178a+-0x34*0x20+0x1e0a);const _0x19430b=_0x11cf72['rigidbody'];return _0x19430b&&(_0x19430b['hasEvent']('collisions'+'tart')||_0x19430b['hasEvent']('collisione'+'nd')||_0x19430b['hasEvent']('contact'));}['_checkForC'+'ollisions'](_0x187727,_0x4e45b2){const _0x4342df=Ammo['wrapPointe'+'r'](_0x187727,Ammo['btDynamics'+'World'])['getDispatc'+'her'](),_0x17bbd2=_0x4342df['getNumMani'+'folds']();this['frameColli'+'sions']={};for(let _0x2d91f0=0xffe+0x1*-0x1b4f+-0x1*-0xb51;_0x2d91f0<_0x17bbd2;_0x2d91f0++){const _0x4740fd=_0x4342df['getManifol'+'dByIndexIn'+'ternal'](_0x2d91f0),_0x4a2689=_0x4740fd['getBody0'](),_0x1a1c6f=_0x4740fd['getBody1'](),_0x6ded80=Ammo['castObject'](_0x4a2689,Ammo['btRigidBod'+'y']),_0x25d2e2=Ammo['castObject'](_0x1a1c6f,Ammo['btRigidBod'+'y']),_0x55d4fe=_0x6ded80['entity'],_0x21aa0c=_0x25d2e2['entity'];if(!_0x55d4fe||!_0x21aa0c)continue;const _0x558710=_0x6ded80['getCollisi'+'onFlags'](),_0x16c1c0=_0x25d2e2['getCollisi'+'onFlags'](),_0x1d5a2b=_0x4740fd['getNumCont'+'acts'](),_0x28109a=[],_0x521e2e=[];let _0x548239;if(_0x1d5a2b>-0x4f6+-0x9b9*-0x1+-0x4c3){if(_0x558710&Po||_0x16c1c0&Po){const _0x2f2a66=_0x55d4fe['collision']&&(_0x55d4fe['collision']['hasEvent']('triggerent'+'er')||_0x55d4fe['collision']['hasEvent']('triggerlea'+'ve')),_0x123618=_0x21aa0c['collision']&&(_0x21aa0c['collision']['hasEvent']('triggerent'+'er')||_0x21aa0c['collision']['hasEvent']('triggerlea'+'ve')),_0x1eb7c2=_0x55d4fe['rigidbody']&&(_0x55d4fe['rigidbody']['hasEvent']('triggerent'+'er')||_0x55d4fe['rigidbody']['hasEvent']('triggerlea'+'ve')),_0x51bc32=_0x21aa0c['rigidbody']&&(_0x21aa0c['rigidbody']['hasEvent']('triggerent'+'er')||_0x21aa0c['rigidbody']['hasEvent']('triggerlea'+'ve'));_0x2f2a66&&(_0x548239=this['_storeColl'+'ision'](_0x55d4fe,_0x21aa0c),_0x548239&&!(_0x16c1c0&Po)&&_0x55d4fe['collision']['fire']('triggerent'+'er',_0x21aa0c)),_0x123618&&(_0x548239=this['_storeColl'+'ision'](_0x21aa0c,_0x55d4fe),_0x548239&&!(_0x558710&Po)&&_0x21aa0c['collision']['fire']('triggerent'+'er',_0x55d4fe)),_0x1eb7c2&&(_0x548239||(_0x548239=this['_storeColl'+'ision'](_0x21aa0c,_0x55d4fe)),_0x548239&&_0x55d4fe['rigidbody']['fire']('triggerent'+'er',_0x21aa0c)),_0x51bc32&&(_0x548239||(_0x548239=this['_storeColl'+'ision'](_0x55d4fe,_0x21aa0c)),_0x548239&&_0x21aa0c['rigidbody']['fire']('triggerent'+'er',_0x55d4fe));}else{const _0x2b479=this['_hasContac'+'tEvent'](_0x55d4fe),_0x4f7dec=this['_hasContac'+'tEvent'](_0x21aa0c),_0x4c0899=this['hasEvent']('contact');if(_0x4c0899||_0x2b479||_0x4f7dec){for(let _0x1999c3=-0x1b9d+0x5*-0x274+-0x7b*-0x53;_0x1999c3<_0x1d5a2b;_0x1999c3++){const _0x29107c=_0x4740fd['getContact'+'Point'](_0x1999c3),_0x113ad7=this['_createCon'+'tactPointF'+'romAmmo'](_0x29107c);if(_0x2b479||_0x4f7dec){_0x28109a['push'](_0x113ad7);const _0x4a26c7=this['_createRev'+'erseContac'+'tPointFrom'+'Ammo'](_0x29107c);_0x521e2e['push'](_0x4a26c7);}if(_0x4c0899){const _0x92cb46=this['_createSin'+'gleContact'+'Result'](_0x55d4fe,_0x21aa0c,_0x113ad7);this['fire']('contact',_0x92cb46);}}if(_0x2b479){const _0x51f2d5=this['_createCon'+'tactResult'](_0x21aa0c,_0x28109a);_0x548239=this['_storeColl'+'ision'](_0x55d4fe,_0x21aa0c),_0x55d4fe['collision']&&(_0x55d4fe['collision']['fire']('contact',_0x51f2d5),_0x548239&&_0x55d4fe['collision']['fire']('collisions'+'tart',_0x51f2d5)),_0x55d4fe['rigidbody']&&(_0x55d4fe['rigidbody']['fire']('contact',_0x51f2d5),_0x548239&&_0x55d4fe['rigidbody']['fire']('collisions'+'tart',_0x51f2d5));}if(_0x4f7dec){const _0x122982=this['_createCon'+'tactResult'](_0x55d4fe,_0x521e2e);_0x548239=this['_storeColl'+'ision'](_0x21aa0c,_0x55d4fe),_0x21aa0c['collision']&&(_0x21aa0c['collision']['fire']('contact',_0x122982),_0x548239&&_0x21aa0c['collision']['fire']('collisions'+'tart',_0x122982)),_0x21aa0c['rigidbody']&&(_0x21aa0c['rigidbody']['fire']('contact',_0x122982),_0x548239&&_0x21aa0c['rigidbody']['fire']('collisions'+'tart',_0x122982));}}}}}this['_cleanOldC'+'ollisions'](),this['contactPoi'+'ntPool']['freeAll'](),this['contactRes'+'ultPool']['freeAll'](),this['singleCont'+'actResultP'+'ool']['freeAll']();}['onUpdate'](_0x15c659){let _0x3ede53,_0x4081ec;this['_stats']['physicsSta'+'rt']=de(),this['_gravityFl'+'oat32'][-0x1b33+-0xec9+0x29fc]=this['gravity']['x'],this['_gravityFl'+'oat32'][-0x2f9*-0xd+0x2006+-0x46aa]=this['gravity']['y'],this['_gravityFl'+'oat32'][-0x51a*0x2+0x1d*-0x83+0x190d]=this['gravity']['z'];const _0x5c24cd=this['dynamicsWo'+'rld']['getGravity']();(_0x5c24cd['x']()!==this['_gravityFl'+'oat32'][0x1bc5*-0x1+-0x1f7a+0x3b3f]||_0x5c24cd['y']()!==this['_gravityFl'+'oat32'][-0x557*0x2+-0x1e6e+0x291d]||_0x5c24cd['z']()!==this['_gravityFl'+'oat32'][0x56*-0x1+-0x8b0+0x908])&&(_0x5c24cd['setValue'](this['gravity']['x'],this['gravity']['y'],this['gravity']['z']),this['dynamicsWo'+'rld']['setGravity'](_0x5c24cd));const _0x4e7902=this['_triggers'];for(_0x3ede53=-0xd54+0x361*-0x6+0x16*0x187,_0x4081ec=_0x4e7902['length'];_0x3ede53<_0x4081ec;_0x3ede53++)_0x4e7902[_0x3ede53]['updateTran'+'sform']();const _0x4cd132=this['_compounds'];for(_0x3ede53=-0xc71+-0x1b*-0x6a+0x1*0x143,_0x4081ec=_0x4cd132['length'];_0x3ede53<_0x4081ec;_0x3ede53++)_0x4cd132[_0x3ede53]['_updateCom'+'pound']();const _0x1274bc=this['_kinematic'];for(_0x3ede53=0x12dd+0x11c7+-0x24a4,_0x4081ec=_0x1274bc['length'];_0x3ede53<_0x4081ec;_0x3ede53++)_0x1274bc[_0x3ede53]['_updateKin'+'ematic']();this['dynamicsWo'+'rld']['stepSimula'+'tion'](_0x15c659,this['maxSubStep'+'s'],this['fixedTimeS'+'tep']);const _0x351f49=this['_dynamic'];for(_0x3ede53=-0xe19+-0x1b65+0x1*0x297e,_0x4081ec=_0x351f49['length'];_0x3ede53<_0x4081ec;_0x3ede53++)_0x351f49[_0x3ede53]['_updateDyn'+'amic']();this['dynamicsWo'+'rld']['setInterna'+'lTickCallb'+'ack']||this['_checkForC'+'ollisions'](Ammo['getPointer'](this['dynamicsWo'+'rld']),_0x15c659),this['_stats']['physicsTim'+'e']=de()-this['_stats']['physicsSta'+'rt'];}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this),typeof Ammo<'u'&&(Ammo['destroy'](this['dynamicsWo'+'rld']),Ammo['destroy'](this['solver']),Ammo['destroy'](this['overlappin'+'gPairCache']),Ammo['destroy'](this['dispatcher']),Ammo['destroy'](this['collisionC'+'onfigurati'+'on']),Ammo['destroy'](Mi),Ammo['destroy'](Di),this['dynamicsWo'+'rld']=null,this['solver']=null,this['overlappin'+'gPairCache']=null,this['dispatcher']=null,this['collisionC'+'onfigurati'+'on']=null,Mi=null,Di=null,bs['onAppDestr'+'oy']());}}h(wm,'EVENT_CONT'+'ACT','contact'),we['_buildAcce'+'ssors'](bs['prototype'],o0);const Za='none',qO='blend',tS=new te();class l0 extends we{constructor(_0x362d20,_0x549a59){super(_0x362d20,_0x549a59),this['_resolutio'+'n']=new J(0xa27+-0x2*-0xbb7+0x1*-0x1f15,-0x2*0xa0+0x20cb+-0x8d*0x37),this['_reference'+'Resolution']=new J(-0x1b70*0x1+-0x5*-0x6bb+0x3*-0x13d,-0x1518+0x1c9c+-0x644),this['_scaleMode']=Za,this['scale']=0x17a9+-0x12e8+-0x4c0,this['_scaleBlen'+'d']=-0x1cb8+0x8*0x1ca+0xe68+0.5,this['_priority']=-0x1*-0x8e9+-0x71*0x2+-0x807,this['_screenSpa'+'ce']=!(-0xa87+-0x1*-0x1871+-0xde9*0x1),this['cull']=this['_screenSpa'+'ce'],this['_screenMat'+'rix']=new te(),this['_elements']=new Set(),_0x362d20['app']['graphicsDe'+'vice']['on']('resizecanv'+'as',this['_onResize'],this);}['syncDrawOr'+'der'](){this['system']['queueDrawO'+'rderSync'](this['entity']['getGuid'](),this['_processDr'+'awOrderSyn'+'c'],this);}['_recurseDr'+'awOrderSyn'+'c'](_0x55f70a,_0x27b785){var _0x42c8b8;if(!(_0x55f70a instanceof lt))return _0x27b785;if(_0x55f70a['element']){const _0x44cac2=_0x55f70a['element']['drawOrder'];_0x55f70a['element']['drawOrder']=_0x27b785++,_0x55f70a['element']['_batchGrou'+'pId']>=-0x11dc+-0x1732+0x290e&&_0x44cac2!==_0x55f70a['element']['drawOrder']&&((_0x42c8b8=this['system']['app']['batcher'])==null||_0x42c8b8['markGroupD'+'irty'](_0x55f70a['element']['_batchGrou'+'pId']));}_0x55f70a['particlesy'+'stem']&&(_0x55f70a['particlesy'+'stem']['drawOrder']=_0x27b785++);const _0x9a0319=_0x55f70a['children'];for(let _0x30c294=-0x1b31*0x1+-0x2175+0x1*0x3ca6;_0x30c294<_0x9a0319['length'];_0x30c294++)_0x27b785=this['_recurseDr'+'awOrderSyn'+'c'](_0x9a0319[_0x30c294],_0x27b785);return _0x27b785;}['_processDr'+'awOrderSyn'+'c'](){this['_recurseDr'+'awOrderSyn'+'c'](this['entity'],0x341+-0x2a0+-0x5*0x20),this['fire']('syncdrawor'+'der');}['_calcProje'+'ctionMatri'+'x'](){const _0x52daf3=this['_resolutio'+'n']['x']/this['scale'],_0x2a8f1d=this['_resolutio'+'n']['y']/this['scale'],_0x1348b5=0x9d5+-0x2399*-0x1+0x48b*-0xa,_0x53d203=_0x52daf3,_0x31724e=-_0x2a8f1d;this['_screenMat'+'rix']['setOrtho'](_0x1348b5,_0x53d203,_0x31724e,-0x2a6+-0x1*0x1+-0x2a7*-0x1,0x1307+0x1*0xcd4+-0x12e*0x1b,-(0x761+-0x16f1*-0x1+-0x1e51)),this['_screenSpa'+'ce']||(tS['setScale']((0x100b+-0x4*-0x29+0x1*-0x10af+0.5)*_0x52daf3,(0x1*0x1836+-0x1379+-0x4bd*0x1+0.5)*_0x2a8f1d,-0x1ee2+0x268c+-0x7a9),this['_screenMat'+'rix']['mul2'](tS,this['_screenMat'+'rix']));}['_updateSca'+'le'](){this['scale']=this['_calcScale'](this['_resolutio'+'n'],this['referenceR'+'esolution']);}['_calcScale'](_0xeb82d0,_0x1d4c39){const _0x1038e6=Math['log2']((_0xeb82d0['x']||0x1779*0x1+-0x12f8+-0x480)/_0x1d4c39['x']),_0x32670b=Math['log2']((_0xeb82d0['y']||-0x248a+0x71f+0x1d6c)/_0x1d4c39['y']);return Math['pow'](0x25af+0x42b+0x1a*-0x19c,_0x1038e6*(-0x149b*0x1+-0x5*0x602+-0x32a6*-0x1-this['_scaleBlen'+'d'])+_0x32670b*this['_scaleBlen'+'d']);}['_onResize'](_0x3b0901,_0x2d031e){this['_screenSpa'+'ce']&&(this['_resolutio'+'n']['set'](_0x3b0901,_0x2d031e),this['resolution']=this['_resolutio'+'n']);}['_bindEleme'+'nt'](_0x597501){this['_elements']['add'](_0x597501);}['_unbindEle'+'ment'](_0x45edd4){this['_elements']['delete'](_0x45edd4);}['onRemove'](){this['system']['app']['graphicsDe'+'vice']['off']('resizecanv'+'as',this['_onResize'],this),this['fire']('remove'),this['_elements']['forEach'](_0x32773f=>_0x32773f['_onScreenR'+'emove']()),this['_elements']['clear'](),this['off']();}set['resolution'](_0x391a21){this['_screenSpa'+'ce']?this['_resolutio'+'n']['set'](this['system']['app']['graphicsDe'+'vice']['width'],this['system']['app']['graphicsDe'+'vice']['height']):this['_resolutio'+'n']['set'](_0x391a21['x'],_0x391a21['y']),this['_updateSca'+'le'](),this['_calcProje'+'ctionMatri'+'x'](),this['entity']['_dirtyLoca'+'l']||this['entity']['_dirtifyLo'+'cal'](),this['fire']('set:resolu'+'tion',this['_resolutio'+'n']),this['_elements']['forEach'](_0x4399c4=>_0x4399c4['_onScreenR'+'esize'](this['_resolutio'+'n']));}get['resolution'](){return this['_resolutio'+'n'];}set['referenceR'+'esolution'](_0x1f4dee){this['_reference'+'Resolution']['set'](_0x1f4dee['x'],_0x1f4dee['y']),this['_updateSca'+'le'](),this['_calcProje'+'ctionMatri'+'x'](),this['entity']['_dirtyLoca'+'l']||this['entity']['_dirtifyLo'+'cal'](),this['fire']('set:refere'+'nceresolut'+'ion',this['_resolutio'+'n']),this['_elements']['forEach'](_0x3f7b65=>_0x3f7b65['_onScreenR'+'esize'](this['_resolutio'+'n']));}get['referenceR'+'esolution'](){return this['_scaleMode']===Za?this['_resolutio'+'n']:this['_reference'+'Resolution'];}set['screenSpac'+'e'](_0x5bae05){this['_screenSpa'+'ce']=_0x5bae05,this['_screenSpa'+'ce']&&this['_resolutio'+'n']['set'](this['system']['app']['graphicsDe'+'vice']['width'],this['system']['app']['graphicsDe'+'vice']['height']),this['resolution']=this['_resolutio'+'n'],this['entity']['_dirtyLoca'+'l']||this['entity']['_dirtifyLo'+'cal'](),this['fire']('set:screen'+'space',this['_screenSpa'+'ce']),this['_elements']['forEach'](_0x40b7d4=>_0x40b7d4['_onScreenS'+'paceChange']());}get['screenSpac'+'e'](){return this['_screenSpa'+'ce'];}set['scaleMode'](_0x3bd8b3){_0x3bd8b3!==Za&&_0x3bd8b3!==qO&&(_0x3bd8b3=Za),!this['_screenSpa'+'ce']&&_0x3bd8b3!==Za&&(_0x3bd8b3=Za),this['_scaleMode']=_0x3bd8b3,this['resolution']=this['_resolutio'+'n'],this['fire']('set:scalem'+'ode',this['_scaleMode']);}get['scaleMode'](){return this['_scaleMode'];}set['scaleBlend'](_0x75abd6){this['_scaleBlen'+'d']=_0x75abd6,this['_updateSca'+'le'](),this['_calcProje'+'ctionMatri'+'x'](),this['entity']['_dirtyLoca'+'l']||this['entity']['_dirtifyLo'+'cal'](),this['fire']('set:scaleb'+'lend',this['_scaleBlen'+'d']),this['_elements']['forEach'](_0x1cf43a=>_0x1cf43a['_onScreenR'+'esize'](this['_resolutio'+'n']));}get['scaleBlend'](){return this['_scaleBlen'+'d'];}set['priority'](_0x538a38){_0x538a38>0x1d62+0x1d79+-0x4*0xe77&&(w['warn']('Clamping\x20s'+'creen\x20prio'+'rity\x20from\x20'+_0x538a38+'\x20to\x20255'),_0x538a38=-0x1*0x1fe1+-0x2*0x1381+-0x47e2*-0x1),this['_priority']!==_0x538a38&&(this['_priority']=_0x538a38,this['syncDrawOr'+'der']());}get['priority'](){return this['_priority'];}}class jO{constructor(){this['enabled']=!(-0x896+0x1*-0xe73+0x1709);}}const Uu=['enabled'];class YO extends ct{constructor(_0x3d49ef){super(_0x3d49ef),this['id']='screen',this['ComponentT'+'ype']=l0,this['DataType']=jO,this['schema']=Uu,this['windowReso'+'lution']=new J(),this['_drawOrder'+'SyncQueue']=new fx(),this['app']['graphicsDe'+'vice']['on']('resizecanv'+'as',this['_onResize'],this),this['app']['systems']['on']('update',this['_onUpdate'],this),this['on']('beforeremo'+'ve',this['onRemoveCo'+'mponent'],this);}['initialize'+'ComponentD'+'ata'](_0x2771f6,_0x262d6f,_0x61068){_0x262d6f['priority']!==void(0x3*0x67f+-0xe7f+-0x9*0x8e)&&(_0x2771f6['priority']=_0x262d6f['priority']),_0x262d6f['screenSpac'+'e']!==void(0x4*-0x660+-0x103f*-0x1+-0x67*-0x17)&&(_0x2771f6['screenSpac'+'e']=_0x262d6f['screenSpac'+'e']),_0x2771f6['cull']=_0x2771f6['screenSpac'+'e'],_0x262d6f['scaleMode']!==void(0x1*0xd81+0x970+0x347*-0x7)&&(_0x2771f6['scaleMode']=_0x262d6f['scaleMode']),_0x262d6f['scaleBlend']!==void(0x7e*-0x23+-0xdf4+0x1f2e)&&(_0x2771f6['scaleBlend']=_0x262d6f['scaleBlend']),_0x262d6f['resolution']!==void(-0x7b1*0x5+0x1*-0xe02+-0x197*-0x21)&&(_0x262d6f['resolution']instanceof J?_0x2771f6['_resolutio'+'n']['copy'](_0x262d6f['resolution']):_0x2771f6['_resolutio'+'n']['set'](_0x262d6f['resolution'][-0x40*-0x25+-0x9a*0x26+0xd9c],_0x262d6f['resolution'][0x33d*0xb+0x1dcb*0x1+-0x4169]),_0x2771f6['resolution']=_0x2771f6['_resolutio'+'n']),_0x262d6f['referenceR'+'esolution']!==void(0x1a1b+-0xf30+-0xd7*0xd)&&(_0x262d6f['referenceR'+'esolution']instanceof J?_0x2771f6['_reference'+'Resolution']['copy'](_0x262d6f['referenceR'+'esolution']):_0x2771f6['_reference'+'Resolution']['set'](_0x262d6f['referenceR'+'esolution'][-0x18e2+-0x7f+0x1961],_0x262d6f['referenceR'+'esolution'][0x7cd*0x1+-0x1*0x2022+0x1856]),_0x2771f6['referenceR'+'esolution']=_0x2771f6['_reference'+'Resolution']),_0x2771f6['syncDrawOr'+'der'](),super['initialize'+'ComponentD'+'ata'](_0x2771f6,_0x262d6f,Uu);}['destroy'](){super['destroy'](),this['app']['graphicsDe'+'vice']['off']('resizecanv'+'as',this['_onResize'],this),this['app']['systems']['off']('update',this['_onUpdate'],this);}['_onUpdate'](_0x5ec557){const _0x21e545=this['store'];for(const _0x10c412 in _0x21e545)_0x21e545[_0x10c412]['entity']['screen']['update']&&_0x21e545[_0x10c412]['entity']['screen']['update'](_0x5ec557);}['_onResize'](_0x1d9eee,_0x45e011){this['windowReso'+'lution']['x']=_0x1d9eee,this['windowReso'+'lution']['y']=_0x45e011;}['cloneCompo'+'nent'](_0x42563e,_0x3b2a01){const _0x37ad83=_0x42563e['screen'];return this['addCompone'+'nt'](_0x3b2a01,{'enabled':_0x37ad83['enabled'],'screenSpace':_0x37ad83['screenSpac'+'e'],'scaleMode':_0x37ad83['scaleMode'],'resolution':_0x37ad83['resolution']['clone'](),'referenceResolution':_0x37ad83['referenceR'+'esolution']['clone']()});}['onRemoveCo'+'mponent'](_0x3ac5ab,_0x4d0538){_0x4d0538['onRemove']();}['processDra'+'wOrderSync'+'Queue'](){const _0x38d695=this['_drawOrder'+'SyncQueue']['list']();for(let _0x43b2e7=-0x1800+-0x18a0+0x30a0;_0x43b2e7<_0x38d695['length'];_0x43b2e7++){const _0x2921b8=_0x38d695[_0x43b2e7];_0x2921b8['callback']['call'](_0x2921b8['scope']);}this['_drawOrder'+'SyncQueue']['clear']();}['queueDrawO'+'rderSync'](_0x55f505,_0x310dc7,_0x25759c){this['_drawOrder'+'SyncQueue']['list']()['length']||this['app']['once']('prerender',this['processDra'+'wOrderSync'+'Queue'],this),this['_drawOrder'+'SyncQueue']['has'](_0x55f505)||this['_drawOrder'+'SyncQueue']['push'](_0x55f505,{'callback':_0x310dc7,'scope':_0x25759c});}}we['_buildAcce'+'ssors'](l0['prototype'],Uu);const lr=new J(),sS=new D(),Hr=new Dn(),iS=new QS(),rS=new D(),vo=new D(),KO=new le(),ZO={'x':'y','y':'x'};class Go extends me{constructor(_0x368dba,_0x26a499){if(super(),!_0x368dba||!(_0x368dba instanceof hs))throw new Error('Element\x20wa'+'s\x20null\x20or\x20'+'not\x20an\x20Ele'+'mentCompon'+'ent');if(_0x26a499&&_0x26a499!=='x'&&_0x26a499!=='y')throw new Error('Unrecogniz'+'ed\x20axis:\x20'+_0x26a499);this['_element']=_0x368dba,this['_app']=_0x368dba['system']['app'],this['_axis']=_0x26a499||null,this['_enabled']=!(0x13*0x1c6+0x1da4+0x1*-0x3f56),this['_dragScale']=new D(),this['_dragStart'+'MousePosit'+'ion']=new D(),this['_dragStart'+'HandlePosi'+'tion']=new D(),this['_deltaMous'+'ePosition']=new D(),this['_deltaHand'+'lePosition']=new D(),this['_isDraggin'+'g']=!(-0xc97*0x2+0x1ffd+0x2*-0x367),this['_toggleLif'+'ecycleList'+'eners']('on');}['_toggleLif'+'ecycleList'+'eners'](_0x59ca0c){this['_element'][_0x59ca0c]('mousedown',this['_onMouseDo'+'wnOrTouchS'+'tart'],this),this['_element'][_0x59ca0c]('touchstart',this['_onMouseDo'+'wnOrTouchS'+'tart'],this),this['_element'][_0x59ca0c]('selectstar'+'t',this['_onMouseDo'+'wnOrTouchS'+'tart'],this);}['_toggleDra'+'gListeners'](_0xee74df){const _0x521c00=_0xee74df==='on';this['_hasDragLi'+'steners']&&_0x521c00||(this['_app']['mouse']&&(this['_element'][_0xee74df]('mousemove',this['_onMove'],this),this['_element'][_0xee74df]('mouseup',this['_onMouseUp'+'OrTouchEnd'],this)),Ae['touch']&&(this['_element'][_0xee74df]('touchmove',this['_onMove'],this),this['_element'][_0xee74df]('touchend',this['_onMouseUp'+'OrTouchEnd'],this),this['_element'][_0xee74df]('touchcance'+'l',this['_onMouseUp'+'OrTouchEnd'],this)),this['_element'][_0xee74df]('selectmove',this['_onMove'],this),this['_element'][_0xee74df]('selectend',this['_onMouseUp'+'OrTouchEnd'],this),this['_hasDragLi'+'steners']=_0x521c00);}['_onMouseDo'+'wnOrTouchS'+'tart'](_0x3bc144){if(this['_element']&&!this['_isDraggin'+'g']&&this['enabled']){this['_dragCamer'+'a']=_0x3bc144['camera'],this['_calculate'+'DragScale']();const _0x1a1a01=this['_screenToL'+'ocal'](_0x3bc144);_0x1a1a01&&(this['_toggleDra'+'gListeners']('on'),this['_isDraggin'+'g']=!(-0x2*0x110b+0xc5e+0x22c*0xa),this['_dragStart'+'MousePosit'+'ion']['copy'](_0x1a1a01),this['_dragStart'+'HandlePosi'+'tion']['copy'](this['_element']['entity']['getLocalPo'+'sition']()),this['fire']('drag:start'));}}['_onMouseUp'+'OrTouchEnd'](){this['_isDraggin'+'g']&&(this['_isDraggin'+'g']=!(0x25*0xdf+0xea1+-0x1*0x2edb),this['_toggleDra'+'gListeners']('off'),this['fire']('drag:end'));}['_screenToL'+'ocal'](_0x46836d){return _0x46836d['inputSourc'+'e']?Hr['set'](_0x46836d['inputSourc'+'e']['getOrigin'](),_0x46836d['inputSourc'+'e']['getDirecti'+'on']()):(this['_determine'+'InputPosit'+'ion'](_0x46836d),this['_chooseRay'+'OriginAndD'+'irection']()),rS['copy'](this['_element']['entity']['forward'])['mulScalar'](-(-0x1ada+-0x23fe+0x207*0x1f)),iS['setFromPoi'+'ntNormal'](this['_element']['entity']['getPositio'+'n'](),rS),iS['intersects'+'Ray'](Hr,vo)?(KO['copy'](this['_element']['entity']['getRotatio'+'n']())['invert']()['transformV'+'ector'](vo,vo),vo['mul'](this['_dragScale']),vo):null;}['_determine'+'InputPosit'+'ion'](_0x5e3462){const _0x431d80=this['_app']['graphicsDe'+'vice']['maxPixelRa'+'tio'];typeof _0x5e3462['x']<'u'&&typeof _0x5e3462['y']<'u'?(lr['x']=_0x5e3462['x']*_0x431d80,lr['y']=_0x5e3462['y']*_0x431d80):_0x5e3462['changedTou'+'ches']?(lr['x']=_0x5e3462['changedTou'+'ches'][-0x49*-0x1f+-0x31a*-0x7+0x1e8d*-0x1]['x']*_0x431d80,lr['y']=_0x5e3462['changedTou'+'ches'][0x20e4+-0x3b*-0x59+0x7a1*-0x7]['y']*_0x431d80):console['warn']('Could\x20not\x20'+'determine\x20'+'position\x20f'+'rom\x20input\x20'+'event');}['_chooseRay'+'OriginAndD'+'irection'](){this['_element']['screen']&&this['_element']['screen']['screen']['screenSpac'+'e']?(Hr['origin']['set'](lr['x'],-lr['y'],-0x729+0x1*-0x238d+0x4d*0x8e),Hr['direction']['copy'](D['FORWARD'])):(sS['copy'](this['_dragCamer'+'a']['screenToWo'+'rld'](lr['x'],lr['y'],-0x1d6*-0x4+0x1014+-0x176b)),Hr['origin']['copy'](this['_dragCamer'+'a']['entity']['getPositio'+'n']()),Hr['direction']['copy'](sS)['sub'](Hr['origin'])['normalize']());}['_calculate'+'DragScale'](){let _0x5e83a5=this['_element']['entity']['parent'];const _0x2b5677=this['_element']['screen']&&this['_element']['screen']['screen'],_0x26e23b=_0x2b5677&&_0x2b5677['screenSpac'+'e'],_0x13cfa4=_0x26e23b?_0x2b5677['scale']:0x8b7*0x1+0x1e44+-0x26fa,_0x4dacfb=this['_dragScale'];for(_0x4dacfb['set'](_0x13cfa4,_0x13cfa4,_0x13cfa4);_0x5e83a5&&(_0x4dacfb['mul'](_0x5e83a5['getLocalSc'+'ale']()),_0x5e83a5=_0x5e83a5['parent'],!(_0x26e23b&&_0x5e83a5['screen'])););_0x4dacfb['x']=(-0x20*-0x26+-0x122d+0xd6e)/_0x4dacfb['x'],_0x4dacfb['y']=(-0x87a+-0x1*0x2e4+0x1*0xb5f)/_0x4dacfb['y'],_0x4dacfb['z']=0xc6f*0x2+-0x6dd*-0x5+-0x3b2f*0x1;}['_onMove'](_0x4f16e2){const {_element:_0x385304,_deltaMousePosition:_0x58cdaf,_deltaHandlePosition:_0x1c002e,_axis:_0x536282}=this;if(_0x385304&&this['_isDraggin'+'g']&&this['enabled']&&_0x385304['enabled']&&_0x385304['entity']['enabled']){const _0x5e31d9=this['_screenToL'+'ocal'](_0x4f16e2);if(_0x5e31d9){if(_0x58cdaf['sub2'](_0x5e31d9,this['_dragStart'+'MousePosit'+'ion']),_0x1c002e['add2'](this['_dragStart'+'HandlePosi'+'tion'],_0x58cdaf),_0x536282){const _0x10e168=_0x385304['entity']['getLocalPo'+'sition'](),_0x380065=ZO[_0x536282];_0x1c002e[_0x380065]=_0x10e168[_0x380065];}_0x385304['entity']['setLocalPo'+'sition'](_0x1c002e),this['fire']('drag:move',_0x1c002e);}}}['destroy'](){this['_toggleLif'+'ecycleList'+'eners']('off'),this['_toggleDra'+'gListeners']('off');}set['enabled'](_0x12f3b3){this['_enabled']=_0x12f3b3;}get['enabled'](){return this['_enabled'];}get['isDragging'](){return this['_isDraggin'+'g'];}}h(Go,'EVENT_DRAG'+'START','drag:start'),h(Go,'EVENT_DRAG'+'END','drag:end'),h(Go,'EVENT_DRAG'+'MOVE','drag:move');const QO=0x2583+0x23fb+0x17*-0x332,aS=0xf3*0x13+0x25e6+-0x37ee,JO=0xf88+-0x1006*0x1+0x80,eF=-0x24d+0x12b8+-0x106b,tF=-0x293*0x2+-0x16f6+0x1c1d,xo=new J();class c0 extends we{constructor(_0x222335,_0x4b942c){super(_0x222335,_0x4b942c),h(this,'_viewportE'+'ntity',null),h(this,'_contentEn'+'tity',null),h(this,'_horizonta'+'lScrollbar'+'Entity',null),h(this,'_verticalS'+'crollbarEn'+'tity',null),h(this,'_evtElemen'+'tRemove',null),h(this,'_evtViewpo'+'rtElementR'+'emove',null),h(this,'_evtViewpo'+'rtResize',null),h(this,'_evtConten'+'tEntityEle'+'mentAdd',null),h(this,'_evtConten'+'tElementRe'+'move',null),h(this,'_evtConten'+'tResize',null),h(this,'_evtHorizo'+'ntalScroll'+'barAdd',null),h(this,'_evtHorizo'+'ntalScroll'+'barRemove',null),h(this,'_evtHorizo'+'ntalScroll'+'barValue',null),h(this,'_evtVertic'+'alScrollba'+'rAdd',null),h(this,'_evtVertic'+'alScrollba'+'rRemove',null),h(this,'_evtVertic'+'alScrollba'+'rValue',null),(this['_scrollbar'+'UpdateFlag'+'s']={},this['_scrollbar'+'Entities']={},this['_prevConte'+'ntSizes']={},this['_prevConte'+'ntSizes'][Ce]=null,this['_prevConte'+'ntSizes'][je]=null,this['_scroll']=new J(),this['_velocity']=new D(),this['_dragStart'+'Position']=new D(),this['_disabledC'+'ontentInpu'+'t']=!(-0x1b69+-0x1125+0x2c8f),this['_disabledC'+'ontentInpu'+'tEntities']=[],this['_toggleLif'+'ecycleList'+'eners']('on'),this['_toggleEle'+'mentListen'+'ers']('on'));}get['data'](){const _0xf0be1f=this['system']['store'][this['entity']['getGuid']()];return _0xf0be1f?_0xf0be1f['data']:null;}set['enabled'](_0x106097){this['_setValue']('enabled',_0x106097);}get['enabled'](){return this['data']['enabled'];}set['horizontal'](_0x47b952){this['_setValue']('horizontal',_0x47b952);}get['horizontal'](){return this['data']['horizontal'];}set['vertical'](_0x587293){this['_setValue']('vertical',_0x587293);}get['vertical'](){return this['data']['vertical'];}set['scrollMode'](_0x7aaa4d){this['_setValue']('scrollMode',_0x7aaa4d);}get['scrollMode'](){return this['data']['scrollMode'];}set['bounceAmou'+'nt'](_0x333abf){this['_setValue']('bounceAmou'+'nt',_0x333abf);}get['bounceAmou'+'nt'](){return this['data']['bounceAmou'+'nt'];}set['friction'](_0x3f2ed5){this['_setValue']('friction',_0x3f2ed5);}get['friction'](){return this['data']['friction'];}set['dragThresh'+'old'](_0x530524){this['_setValue']('dragThresh'+'old',_0x530524);}get['dragThresh'+'old'](){return this['data']['dragThresh'+'old'];}set['useMouseWh'+'eel'](_0x449ac1){this['_setValue']('useMouseWh'+'eel',_0x449ac1);}get['useMouseWh'+'eel'](){return this['data']['useMouseWh'+'eel'];}set['mouseWheel'+'Sensitivit'+'y'](_0x57a858){this['_setValue']('mouseWheel'+'Sensitivit'+'y',_0x57a858);}get['mouseWheel'+'Sensitivit'+'y'](){return this['data']['mouseWheel'+'Sensitivit'+'y'];}set['horizontal'+'ScrollbarV'+'isibility'](_0x59a1d2){this['_setValue']('horizontal'+'ScrollbarV'+'isibility',_0x59a1d2);}get['horizontal'+'ScrollbarV'+'isibility'](){return this['data']['horizontal'+'ScrollbarV'+'isibility'];}set['verticalSc'+'rollbarVis'+'ibility'](_0x560526){this['_setValue']('verticalSc'+'rollbarVis'+'ibility',_0x560526);}get['verticalSc'+'rollbarVis'+'ibility'](){return this['data']['verticalSc'+'rollbarVis'+'ibility'];}set['viewportEn'+'tity'](_0x198d99){if(this['_viewportE'+'ntity']===_0x198d99)return;const _0xb42ced=typeof _0x198d99=='string';this['_viewportE'+'ntity']&&_0xb42ced&&this['_viewportE'+'ntity']['getGuid']()===_0x198d99||(this['_viewportE'+'ntity']&&this['_viewportE'+'ntityUnsub'+'scribe'](),_0x198d99 instanceof Ie?this['_viewportE'+'ntity']=_0x198d99:_0xb42ced?this['_viewportE'+'ntity']=this['system']['app']['getEntityF'+'romIndex'](_0x198d99)||null:this['_viewportE'+'ntity']=null,this['_viewportE'+'ntity']&&this['_viewportE'+'ntitySubsc'+'ribe'](),this['_viewportE'+'ntity']?this['data']['viewportEn'+'tity']=this['_viewportE'+'ntity']['getGuid']():_0xb42ced&&_0x198d99&&(this['data']['viewportEn'+'tity']=_0x198d99));}get['viewportEn'+'tity'](){return this['_viewportE'+'ntity'];}set['contentEnt'+'ity'](_0x1b3b85){if(this['_contentEn'+'tity']===_0x1b3b85)return;const _0x253c6d=typeof _0x1b3b85=='string';this['_contentEn'+'tity']&&_0x253c6d&&this['_contentEn'+'tity']['getGuid']()===_0x1b3b85||(this['_contentEn'+'tity']&&this['_contentEn'+'tityUnsubs'+'cribe'](),_0x1b3b85 instanceof Ie?this['_contentEn'+'tity']=_0x1b3b85:_0x253c6d?this['_contentEn'+'tity']=this['system']['app']['getEntityF'+'romIndex'](_0x1b3b85)||null:this['_contentEn'+'tity']=null,this['_contentEn'+'tity']&&this['_contentEn'+'titySubscr'+'ibe'](),this['_contentEn'+'tity']?this['data']['contentEnt'+'ity']=this['_contentEn'+'tity']['getGuid']():_0x253c6d&&_0x1b3b85&&(this['data']['contentEnt'+'ity']=_0x1b3b85));}get['contentEnt'+'ity'](){return this['_contentEn'+'tity'];}set['horizontal'+'ScrollbarE'+'ntity'](_0x3ef1e5){if(this['_horizonta'+'lScrollbar'+'Entity']===_0x3ef1e5)return;const _0x47ca75=typeof _0x3ef1e5=='string';this['_horizonta'+'lScrollbar'+'Entity']&&_0x47ca75&&this['_horizonta'+'lScrollbar'+'Entity']['getGuid']()===_0x3ef1e5||(this['_horizonta'+'lScrollbar'+'Entity']&&this['_horizonta'+'lScrollbar'+'EntityUnsu'+'bscribe'](),_0x3ef1e5 instanceof Ie?this['_horizonta'+'lScrollbar'+'Entity']=_0x3ef1e5:_0x47ca75?this['_horizonta'+'lScrollbar'+'Entity']=this['system']['app']['getEntityF'+'romIndex'](_0x3ef1e5)||null:this['_horizonta'+'lScrollbar'+'Entity']=null,this['_scrollbar'+'Entities'][Ce]=this['_horizonta'+'lScrollbar'+'Entity'],this['_horizonta'+'lScrollbar'+'Entity']&&this['_horizonta'+'lScrollbar'+'EntitySubs'+'cribe'](),this['_horizonta'+'lScrollbar'+'Entity']?this['data']['horizontal'+'ScrollbarE'+'ntity']=this['_horizonta'+'lScrollbar'+'Entity']['getGuid']():_0x47ca75&&_0x3ef1e5&&(this['data']['horizontal'+'ScrollbarE'+'ntity']=_0x3ef1e5));}get['horizontal'+'ScrollbarE'+'ntity'](){return this['_horizonta'+'lScrollbar'+'Entity'];}set['verticalSc'+'rollbarEnt'+'ity'](_0x84109a){if(this['_verticalS'+'crollbarEn'+'tity']===_0x84109a)return;const _0x599805=typeof _0x84109a=='string';this['_verticalS'+'crollbarEn'+'tity']&&_0x599805&&this['_verticalS'+'crollbarEn'+'tity']['getGuid']()===_0x84109a||(this['_verticalS'+'crollbarEn'+'tity']&&this['_verticalS'+'crollbarEn'+'tityUnsubs'+'cribe'](),_0x84109a instanceof Ie?this['_verticalS'+'crollbarEn'+'tity']=_0x84109a:_0x599805?this['_verticalS'+'crollbarEn'+'tity']=this['system']['app']['getEntityF'+'romIndex'](_0x84109a)||null:this['_verticalS'+'crollbarEn'+'tity']=null,this['_scrollbar'+'Entities'][je]=this['_verticalS'+'crollbarEn'+'tity'],this['_verticalS'+'crollbarEn'+'tity']&&this['_verticalS'+'crollbarEn'+'titySubscr'+'ibe'](),this['_verticalS'+'crollbarEn'+'tity']?this['data']['verticalSc'+'rollbarEnt'+'ity']=this['_verticalS'+'crollbarEn'+'tity']['getGuid']():_0x599805&&_0x84109a&&(this['data']['verticalSc'+'rollbarEnt'+'ity']=_0x84109a));}get['verticalSc'+'rollbarEnt'+'ity'](){return this['_verticalS'+'crollbarEn'+'tity'];}set['scroll'](_0x54e8cd){this['_onSetScro'+'ll'](_0x54e8cd['x'],_0x54e8cd['y']);}get['scroll'](){return this['_scroll'];}['_setValue'](_0x14943c,_0x6be636){const _0x30ed4e=this['data'],_0x1ec142=_0x30ed4e[_0x14943c];_0x30ed4e[_0x14943c]=_0x6be636,this['fire']('set',_0x14943c,_0x1ec142,_0x6be636);}['_toggleLif'+'ecycleList'+'eners'](_0x5cac05){this[_0x5cac05]('set_horizo'+'ntal',this['_onSetHori'+'zontalScro'+'llingEnabl'+'ed'],this),this[_0x5cac05]('set_vertic'+'al',this['_onSetVert'+'icalScroll'+'ingEnabled'],this),this['entity'][_0x5cac05]('element:ad'+'d',this['_onElement'+'ComponentA'+'dd'],this);}['_toggleEle'+'mentListen'+'ers'](_0x14f92a){if(this['entity']['element']){if(_0x14f92a==='on'&&this['_hasElemen'+'tListeners'])return;this['entity']['element'][_0x14f92a]('resize',this['_syncAll'],this),this['entity']['element'][_0x14f92a]('mousewheel',this['_onMouseWh'+'eel'],this),this['_hasElemen'+'tListeners']=_0x14f92a==='on';}}['_onElement'+'ComponentA'+'dd'](_0x15d03c){this['_evtElemen'+'tRemove']=this['entity']['element']['once']('beforeremo'+'ve',this['_onElement'+'ComponentR'+'emove'],this),this['_toggleEle'+'mentListen'+'ers']('on');}['_onElement'+'ComponentR'+'emove'](_0x28c5d5){var _0x2c0e0b;(_0x2c0e0b=this['_evtElemen'+'tRemove'])==null||_0x2c0e0b['off'](),this['_evtElemen'+'tRemove']=null,this['_toggleEle'+'mentListen'+'ers']('off');}['_viewportE'+'ntitySubsc'+'ribe'](){this['_evtViewpo'+'rtEntityEl'+'ementAdd']=this['_viewportE'+'ntity']['on']('element:ad'+'d',this['_onViewpor'+'tElementGa'+'in'],this),this['_viewportE'+'ntity']['element']&&this['_onViewpor'+'tElementGa'+'in']();}['_viewportE'+'ntityUnsub'+'scribe'](){var _0xd02d5c,_0x1afe16;(_0xd02d5c=this['_evtViewpo'+'rtEntityEl'+'ementAdd'])==null||_0xd02d5c['off'](),this['_evtViewpo'+'rtEntityEl'+'ementAdd']=null,(_0x1afe16=this['_viewportE'+'ntity'])!=null&&_0x1afe16['element']&&this['_onViewpor'+'tElementLo'+'se']();}['_viewportE'+'ntityEleme'+'ntSubscrib'+'e'](){const _0x3f5398=this['_viewportE'+'ntity']['element'];this['_evtViewpo'+'rtElementR'+'emove']=_0x3f5398['once']('beforeremo'+'ve',this['_onViewpor'+'tElementLo'+'se'],this),this['_evtViewpo'+'rtResize']=_0x3f5398['on']('resize',this['_syncAll'],this);}['_viewportE'+'ntityEleme'+'ntUnsubscr'+'ibe'](){var _0x211761,_0x2df3af;(_0x211761=this['_evtViewpo'+'rtElementR'+'emove'])==null||_0x211761['off'](),this['_evtViewpo'+'rtElementR'+'emove']=null,(_0x2df3af=this['_evtViewpo'+'rtResize'])==null||_0x2df3af['off'](),this['_evtViewpo'+'rtResize']=null;}['_onViewpor'+'tElementGa'+'in'](){this['_viewportE'+'ntityEleme'+'ntSubscrib'+'e'](),this['_syncAll']();}['_onViewpor'+'tElementLo'+'se'](){this['_viewportE'+'ntityEleme'+'ntUnsubscr'+'ibe']();}['_contentEn'+'titySubscr'+'ibe'](){this['_evtConten'+'tEntityEle'+'mentAdd']=this['_contentEn'+'tity']['on']('element:ad'+'d',this['_onContent'+'ElementGai'+'n'],this),this['_contentEn'+'tity']['element']&&this['_onContent'+'ElementGai'+'n']();}['_contentEn'+'tityUnsubs'+'cribe'](){var _0x334696,_0x24588e;(_0x334696=this['_evtConten'+'tEntityEle'+'mentAdd'])==null||_0x334696['off'](),this['_evtConten'+'tEntityEle'+'mentAdd']=null,(_0x24588e=this['_contentEn'+'tity'])!=null&&_0x24588e['element']&&this['_onContent'+'ElementLos'+'e']();}['_contentEn'+'tityElemen'+'tSubscribe'](){const _0x3e20fd=this['_contentEn'+'tity']['element'];this['_evtConten'+'tElementRe'+'move']=_0x3e20fd['once']('beforeremo'+'ve',this['_onContent'+'ElementLos'+'e'],this),this['_evtConten'+'tResize']=_0x3e20fd['on']('resize',this['_syncAll'],this);}['_contentEn'+'tityElemen'+'tUnsubscri'+'be'](){var _0x20a34b,_0x50ca12;(_0x20a34b=this['_evtConten'+'tElementRe'+'move'])==null||_0x20a34b['off'](),this['_evtConten'+'tElementRe'+'move']=null,(_0x50ca12=this['_evtConten'+'tResize'])==null||_0x50ca12['off'](),this['_evtConten'+'tResize']=null;}['_onContent'+'ElementGai'+'n'](){this['_contentEn'+'tityElemen'+'tSubscribe'](),this['_destroyDr'+'agHelper'](),this['_contentDr'+'agHelper']=new Go(this['_contentEn'+'tity']['element']),this['_contentDr'+'agHelper']['on']('drag:start',this['_onContent'+'DragStart'],this),this['_contentDr'+'agHelper']['on']('drag:end',this['_onContent'+'DragEnd'],this),this['_contentDr'+'agHelper']['on']('drag:move',this['_onContent'+'DragMove'],this),this['_prevConte'+'ntSizes'][Ce]=null,this['_prevConte'+'ntSizes'][je]=null,this['_syncAll']();}['_onContent'+'ElementLos'+'e'](){this['_contentEn'+'tityElemen'+'tUnsubscri'+'be'](),this['_destroyDr'+'agHelper']();}['_onContent'+'DragStart'](){this['_contentEn'+'tity']&&this['enabled']&&this['entity']['enabled']&&this['_dragStart'+'Position']['copy'](this['_contentEn'+'tity']['getLocalPo'+'sition']());}['_onContent'+'DragEnd'](){this['_prevConte'+'ntDragPosi'+'tion']=null,this['_enableCon'+'tentInput']();}['_onContent'+'DragMove'](_0x1a651a){if(this['_contentEn'+'tity']&&this['enabled']&&this['entity']['enabled']&&(this['_wasDragge'+'d']=!(0x135c+0xd7*-0x1+-0x1285),this['_setScroll'+'FromConten'+'tPosition'](_0x1a651a),this['_setVeloci'+'tyFromCont'+'entPositio'+'nDelta'](_0x1a651a),!this['_disabledC'+'ontentInpu'+'t'])){const _0x521569=_0x1a651a['x']-this['_dragStart'+'Position']['x'],_0x503e9f=_0x1a651a['y']-this['_dragStart'+'Position']['y'];(Math['abs'](_0x521569)>this['dragThresh'+'old']||Math['abs'](_0x503e9f)>this['dragThresh'+'old'])&&this['_disableCo'+'ntentInput']();}}['_horizonta'+'lScrollbar'+'EntitySubs'+'cribe'](){this['_evtHorizo'+'ntalScroll'+'barAdd']=this['_horizonta'+'lScrollbar'+'Entity']['on']('scrollbar:'+'add',this['_onHorizon'+'talScrollb'+'arGain'],this),this['_horizonta'+'lScrollbar'+'Entity']['scrollbar']&&this['_onHorizon'+'talScrollb'+'arGain']();}['_verticalS'+'crollbarEn'+'titySubscr'+'ibe'](){this['_evtVertic'+'alScrollba'+'rAdd']=this['_verticalS'+'crollbarEn'+'tity']['on']('scrollbar:'+'add',this['_onVertica'+'lScrollbar'+'Gain'],this),this['_verticalS'+'crollbarEn'+'tity']['scrollbar']&&this['_onVertica'+'lScrollbar'+'Gain']();}['_horizonta'+'lScrollbar'+'EntityUnsu'+'bscribe'](){var _0x19c6ee;(_0x19c6ee=this['_evtHorizo'+'ntalScroll'+'barAdd'])==null||_0x19c6ee['off'](),this['_evtHorizo'+'ntalScroll'+'barAdd']=null,this['_horizonta'+'lScrollbar'+'Entity']['scrollbar']&&this['_onHorizon'+'talScrollb'+'arLose']();}['_verticalS'+'crollbarEn'+'tityUnsubs'+'cribe'](){var _0x1121a0;(_0x1121a0=this['_evtVertic'+'alScrollba'+'rAdd'])==null||_0x1121a0['off'](),this['_evtVertic'+'alScrollba'+'rAdd']=null,this['_verticalS'+'crollbarEn'+'tity']['scrollbar']&&this['_onVertica'+'lScrollbar'+'Lose']();}['_onSetHori'+'zontalScro'+'llbarValue'](_0x46c0e2){!this['_scrollbar'+'UpdateFlag'+'s'][Ce]&&this['enabled']&&this['entity']['enabled']&&this['_onSetScro'+'ll'](_0x46c0e2,null);}['_onSetVert'+'icalScroll'+'barValue'](_0x441dee){!this['_scrollbar'+'UpdateFlag'+'s'][je]&&this['enabled']&&this['entity']['enabled']&&this['_onSetScro'+'ll'](null,_0x441dee);}['_onHorizon'+'talScrollb'+'arGain'](){var _0x44c8f0;const _0x343118=(_0x44c8f0=this['_horizonta'+'lScrollbar'+'Entity'])==null?void(-0x225d+-0x47*-0x8b+-0x430):_0x44c8f0['scrollbar'];this['_evtHorizo'+'ntalScroll'+'barRemove']=_0x343118['on']('beforeremo'+'ve',this['_onHorizon'+'talScrollb'+'arLose'],this),this['_evtHorizo'+'ntalScroll'+'barValue']=_0x343118['on']('set:value',this['_onSetHori'+'zontalScro'+'llbarValue'],this),this['_syncScrol'+'lbarEnable'+'dState'](Ce),this['_syncScrol'+'lbarPositi'+'on'](Ce);}['_onVertica'+'lScrollbar'+'Gain'](){var _0x166fe9;const _0x7e7291=(_0x166fe9=this['_verticalS'+'crollbarEn'+'tity'])==null?void(-0x10f0*-0x2+0x1*0x22a9+-0x4489):_0x166fe9['scrollbar'];this['_evtVertic'+'alScrollba'+'rRemove']=_0x7e7291['on']('beforeremo'+'ve',this['_onVertica'+'lScrollbar'+'Lose'],this),this['_evtVertic'+'alScrollba'+'rValue']=_0x7e7291['on']('set:value',this['_onSetVert'+'icalScroll'+'barValue'],this),this['_syncScrol'+'lbarEnable'+'dState'](je),this['_syncScrol'+'lbarPositi'+'on'](je);}['_onHorizon'+'talScrollb'+'arLose'](){var _0x13e49a,_0x12f642;(_0x13e49a=this['_evtHorizo'+'ntalScroll'+'barRemove'])==null||_0x13e49a['off'](),this['_evtHorizo'+'ntalScroll'+'barRemove']=null,(_0x12f642=this['_evtHorizo'+'ntalScroll'+'barValue'])==null||_0x12f642['off'](),this['_evtHorizo'+'ntalScroll'+'barValue']=null;}['_onVertica'+'lScrollbar'+'Lose'](){var _0x3c5495,_0x5ae195;(_0x3c5495=this['_evtVertic'+'alScrollba'+'rRemove'])==null||_0x3c5495['off'](),this['_evtVertic'+'alScrollba'+'rRemove']=null,(_0x5ae195=this['_evtVertic'+'alScrollba'+'rValue'])==null||_0x5ae195['off'](),this['_evtVertic'+'alScrollba'+'rValue']=null;}['_onSetHori'+'zontalScro'+'llingEnabl'+'ed'](){this['_syncScrol'+'lbarEnable'+'dState'](Ce);}['_onSetVert'+'icalScroll'+'ingEnabled'](){this['_syncScrol'+'lbarEnable'+'dState'](je);}['_onSetScro'+'ll'](_0x45dc11,_0x5625de,_0x592e27){_0x592e27!==!(0x1b*0xd8+-0x4e3+-0x11e4)&&this['_velocity']['set'](-0x1b31+-0x28d*0xb+0x110*0x34,-0xc3c+0x11ee+-0x5b2*0x1,-0x44*-0x38+-0x1ca7+0x1*0xdc7);const _0x5b626d=this['_updateAxi'+'s'](_0x45dc11,'x',Ce),_0x1dcb99=this['_updateAxi'+'s'](_0x5625de,'y',je);(_0x5b626d||_0x1dcb99)&&this['fire']('set:scroll',this['_scroll']);}['_updateAxi'+'s'](_0x43a193,_0x513892,_0x5d451a){const _0x356df9=_0x43a193!==null&&Math['abs'](_0x43a193-this['_scroll'][_0x513892])>0xa*0x65+0x1192+-0x1584+0.00001;return(_0x356df9||this['_isDraggin'+'g']()||_0x43a193===-0x638+0x6c*-0x53+0x1c*0x179)&&(this['_scroll'][_0x513892]=this['_determine'+'NewScrollV'+'alue'](_0x43a193,_0x513892,_0x5d451a),this['_syncConte'+'ntPosition'](_0x5d451a),this['_syncScrol'+'lbarPositi'+'on'](_0x5d451a)),_0x356df9;}['_determine'+'NewScrollV'+'alue'](_0x31fb54,_0x42a05c,_0x2c0e56){if(!this['_getScroll'+'ingEnabled'](_0x2c0e56))return this['_scroll'][_0x42a05c];switch(this['scrollMode']){case QO:return Y['clamp'](_0x31fb54,0xb53*0x1+-0x1f1c+-0x13c9*-0x1,this['_getMaxScr'+'ollValue'](_0x2c0e56));case aS:return this['_setVeloci'+'tyFromOver'+'shoot'](_0x31fb54,_0x42a05c,_0x2c0e56),_0x31fb54;case JO:return _0x31fb54;default:return console['warn']('Unhandled\x20'+'scroll\x20mod'+'e:'+this['scrollMode']),_0x31fb54;}}['_syncAll'](){this['_syncConte'+'ntPosition'](Ce),this['_syncConte'+'ntPosition'](je),this['_syncScrol'+'lbarPositi'+'on'](Ce),this['_syncScrol'+'lbarPositi'+'on'](je),this['_syncScrol'+'lbarEnable'+'dState'](Ce),this['_syncScrol'+'lbarEnable'+'dState'](je);}['_syncConte'+'ntPosition'](_0x151f49){if(!this['_contentEn'+'tity'])return;const _0x27e344=this['_getAxis'](_0x151f49),_0x5ca88c=this['_getSign'](_0x151f49),_0x117c4c=this['_prevConte'+'ntSizes'][_0x151f49],_0x5f0fa2=this['_getConten'+'tSize'](_0x151f49);if(_0x117c4c!==null&&Math['abs'](_0x117c4c-_0x5f0fa2)>-0x745+0xd16+-0x5d1*0x1+0.0001){const _0x6fd211=this['_getMaxOff'+'set'](_0x151f49,_0x117c4c),_0x2e270a=this['_getMaxOff'+'set'](_0x151f49,_0x5f0fa2);_0x2e270a===0x187f+0x1264+0x1*-0x2ae3?this['_scroll'][_0x27e344]=-0xd72*-0x1+-0x645*0x1+-0x72c:this['_scroll'][_0x27e344]=Y['clamp'](this['_scroll'][_0x27e344]*_0x6fd211/_0x2e270a,-0xa7*-0x31+0x1041+-0x3038,-0x248*0x1+-0x674+0x8bd*0x1);}const _0x57601c=this['_scroll'][_0x27e344]*this['_getMaxOff'+'set'](_0x151f49),_0x3190e8=this['_contentEn'+'tity']['getLocalPo'+'sition']();_0x3190e8[_0x27e344]=_0x57601c*_0x5ca88c,this['_contentEn'+'tity']['setLocalPo'+'sition'](_0x3190e8),this['_prevConte'+'ntSizes'][_0x151f49]=_0x5f0fa2;}['_syncScrol'+'lbarPositi'+'on'](_0x3fe66c){const _0x1ce3f8=this['_scrollbar'+'Entities'][_0x3fe66c];if(!(_0x1ce3f8!=null&&_0x1ce3f8['scrollbar']))return;const _0x268e42=this['_getAxis'](_0x3fe66c);this['_scrollbar'+'UpdateFlag'+'s'][_0x3fe66c]=!(-0xdcf+0x740+0x68f),_0x1ce3f8['scrollbar']['value']=this['_scroll'][_0x268e42],_0x1ce3f8['scrollbar']['handleSize']=this['_getScroll'+'barHandleS'+'ize'](_0x268e42,_0x3fe66c),this['_scrollbar'+'UpdateFlag'+'s'][_0x3fe66c]=!(0x156e+-0x1c8b*0x1+0x71e);}['_syncScrol'+'lbarEnable'+'dState'](_0x407b4d){const _0x8565d6=this['_scrollbar'+'Entities'][_0x407b4d];if(!_0x8565d6)return;const _0x465d32=this['_getScroll'+'ingEnabled'](_0x407b4d),_0x1650d6=this['_getScroll'+'barVisibil'+'ity'](_0x407b4d);switch(_0x1650d6){case eF:_0x8565d6['enabled']=_0x465d32;return;case tF:_0x8565d6['enabled']=_0x465d32&&this['_contentIs'+'LargerThan'+'Viewport'](_0x407b4d);return;default:console['warn']('Unhandled\x20'+'scrollbar\x20'+'visibility'+':'+_0x1650d6),_0x8565d6['enabled']=_0x465d32;}}['_contentIs'+'LargerThan'+'Viewport'](_0x33bc0c){return this['_getConten'+'tSize'](_0x33bc0c)>this['_getViewpo'+'rtSize'](_0x33bc0c);}['_contentPo'+'sitionToSc'+'rollValue'](_0xb5bfac){const _0x4a13f0=this['_getMaxOff'+'set'](Ce),_0x15cc5d=this['_getMaxOff'+'set'](je);return _0x4a13f0===-0x20b8+0xe0d+0x12ab?xo['x']=0x1*-0xd8f+0x232d+-0x2*0xacf:xo['x']=_0xb5bfac['x']/_0x4a13f0,_0x15cc5d===0x1d9b+0xb75+-0x2910?xo['y']=0x11e+0x3a1+-0x4bf:xo['y']=_0xb5bfac['y']/-_0x15cc5d,xo;}['_getMaxOff'+'set'](_0x31bd89,_0x373aaa){_0x373aaa=_0x373aaa===void(0x3f8*-0x1+0x4d5+-0xdd)?this['_getConten'+'tSize'](_0x31bd89):_0x373aaa;const _0x11c9c0=this['_getViewpo'+'rtSize'](_0x31bd89);return _0x373aaa<_0x11c9c0?-this['_getViewpo'+'rtSize'](_0x31bd89):_0x11c9c0-_0x373aaa;}['_getMaxScr'+'ollValue'](_0x281335){return this['_contentIs'+'LargerThan'+'Viewport'](_0x281335)?-0x1986+-0x1*-0x5ab+0x13dc:-0xe6*0x29+0x1c08+0x17*0x62;}['_getScroll'+'barHandleS'+'ize'](_0x4e873e,_0x510cce){const _0x665c77=this['_getViewpo'+'rtSize'](_0x510cce),_0x419e10=this['_getConten'+'tSize'](_0x510cce);if(Math['abs'](_0x419e10)<0x1*0x1a5d+0x49*0x3c+0x167*-0x1f+0.001)return-0x81*0xd+0x2*0x684+0x1*-0x67a;const _0x3720fb=Math['min'](_0x665c77/_0x419e10,0x1*0x49+-0x212e*-0x1+-0x2176),_0x1864b5=this['_toOversho'+'ot'](this['_scroll'][_0x4e873e],_0x510cce);return _0x1864b5===-0x4*-0x121+0x2*0xf4d+-0x1d*0x136?_0x3720fb:_0x3720fb/(-0x1*-0x832+-0x61*-0x18+-0x1149+Math['abs'](_0x1864b5));}['_getViewpo'+'rtSize'](_0x2d862c){return this['_getSize'](_0x2d862c,this['_viewportE'+'ntity']);}['_getConten'+'tSize'](_0x497ccf){return this['_getSize'](_0x497ccf,this['_contentEn'+'tity']);}['_getSize'](_0x169571,_0x36dbb5){return _0x36dbb5!=null&&_0x36dbb5['element']?_0x36dbb5['element'][this['_getCalcul'+'atedDimens'+'ion'](_0x169571)]:-0x1743+-0xef*-0x1d+-0x3d0;}['_getScroll'+'ingEnabled'](_0x2f8ea0){if(_0x2f8ea0===Ce)return this['horizontal'];if(_0x2f8ea0===je)return this['vertical'];w['warn']('Unrecogniz'+'ed\x20orienta'+'tion:\x20'+_0x2f8ea0);}['_getScroll'+'barVisibil'+'ity'](_0x38bf1c){if(_0x38bf1c===Ce)return this['horizontal'+'ScrollbarV'+'isibility'];if(_0x38bf1c===je)return this['verticalSc'+'rollbarVis'+'ibility'];w['warn']('Unrecogniz'+'ed\x20orienta'+'tion:\x20'+_0x38bf1c);}['_getSign'](_0x5164da){return _0x5164da===Ce?0x2276+0xc15+-0x2e8a:-(-0x1*-0x3b9+0x9f*-0x25+0x1343);}['_getAxis'](_0x44f54f){return _0x44f54f===Ce?'x':'y';}['_getCalcul'+'atedDimens'+'ion'](_0x3eb61b){return _0x3eb61b===Ce?'calculated'+'Width':'calculated'+'Height';}['_destroyDr'+'agHelper'](){this['_contentDr'+'agHelper']&&this['_contentDr'+'agHelper']['destroy']();}['onUpdate'](){this['_contentEn'+'tity']&&(this['_updateVel'+'ocity'](),this['_syncScrol'+'lbarEnable'+'dState'](Ce),this['_syncScrol'+'lbarEnable'+'dState'](je));}['_updateVel'+'ocity'](){if(!this['_isDraggin'+'g']()){if(this['scrollMode']===aS&&(this['_hasOversh'+'oot']('x',Ce)&&this['_setVeloci'+'tyFromOver'+'shoot'](this['scroll']['x'],'x',Ce),this['_hasOversh'+'oot']('y',je)&&this['_setVeloci'+'tyFromOver'+'shoot'](this['scroll']['y'],'y',je)),Math['abs'](this['_velocity']['x'])>-0x2051+0xe87+0x11ca+0.0001||Math['abs'](this['_velocity']['y'])>0xb*0x215+-0x1d68+0x681+0.0001){const _0x46f281=this['_contentEn'+'tity']['getLocalPo'+'sition']();_0x46f281['x']+=this['_velocity']['x'],_0x46f281['y']+=this['_velocity']['y'],this['_contentEn'+'tity']['setLocalPo'+'sition'](_0x46f281),this['_setScroll'+'FromConten'+'tPosition'](_0x46f281);}this['_velocity']['x']*=0x8*0x299+-0x528+-0xf9f-this['friction'],this['_velocity']['y']*=0x50e*-0x5+-0x173d+0x3084-this['friction'];}}['_hasOversh'+'oot'](_0x419974,_0x3713b7){return Math['abs'](this['_toOversho'+'ot'](this['scroll'][_0x419974],_0x3713b7))>0x22db+-0xc20+-0x16bb+0.001;}['_toOversho'+'ot'](_0x2573b6,_0x5d05fc){const _0x3ec008=this['_getMaxScr'+'ollValue'](_0x5d05fc);return _0x2573b6<0x3cc*-0x4+0x1*-0xf13+0x1e43?_0x2573b6:_0x2573b6>_0x3ec008?_0x2573b6-_0x3ec008:-0x24d1+-0x5b3+-0x38b*-0xc;}['_setVeloci'+'tyFromOver'+'shoot'](_0x51f49f,_0x142b3b,_0x4f3319){const _0x3c4403=this['_toOversho'+'ot'](_0x51f49f,_0x4f3319)*this['_getMaxOff'+'set'](_0x4f3319)*this['_getSign'](_0x4f3319);Math['abs'](_0x3c4403)>0x2b1*0xd+0x233c*-0x1+0x3f&&(this['_velocity'][_0x142b3b]=-_0x3c4403/(this['bounceAmou'+'nt']*(0x3*0x81+0x57*-0x59+-0x1cee*-0x1)+(-0x2227+0xe50+0xfe*0x14)));}['_setVeloci'+'tyFromCont'+'entPositio'+'nDelta'](_0x1882f3){this['_prevConte'+'ntDragPosi'+'tion']?(this['_velocity']['sub2'](_0x1882f3,this['_prevConte'+'ntDragPosi'+'tion']),this['_prevConte'+'ntDragPosi'+'tion']['copy'](_0x1882f3)):(this['_velocity']['set'](-0x19b*0x16+0x2271+0x19*0x9,-0x6be+-0xe7a+0x1538,-0x89b*-0x4+0x6d*0x2+-0xd7*0x2a),this['_prevConte'+'ntDragPosi'+'tion']=_0x1882f3['clone']());}['_setScroll'+'FromConten'+'tPosition'](_0x48d7d1){let _0x333eba=this['_contentPo'+'sitionToSc'+'rollValue'](_0x48d7d1);this['_isDraggin'+'g']()&&(_0x333eba=this['_applyScro'+'llValueTen'+'sion'](_0x333eba)),this['_onSetScro'+'ll'](_0x333eba['x'],_0x333eba['y'],!(0xcfe+0x85e+0x7*-0x30d));}['_applyScro'+'llValueTen'+'sion'](_0x5958ba){let _0xe70d93=this['_getMaxScr'+'ollValue'](Ce),_0x151b7a=this['_toOversho'+'ot'](_0x5958ba['x'],Ce);return _0x151b7a>0x2656+-0x1b9e+-0xc4*0xe?_0x5958ba['x']=_0xe70d93+(-0x528+0x2e6+-0xc1*-0x3)*Math['log10'](-0x2654+-0xfd*0x26+0x4be3*0x1+_0x151b7a):_0x151b7a<-0x3d*-0x7+-0x20cf*-0x1+-0x6*0x5bf&&(_0x5958ba['x']=-(-0x1*-0x219+0x29c*-0xd+-0x15*-0x184)*Math['log10'](-0x1ced+-0x25f6+0x42e4-_0x151b7a)),_0xe70d93=this['_getMaxScr'+'ollValue'](je),_0x151b7a=this['_toOversho'+'ot'](_0x5958ba['y'],je),_0x151b7a>0x18c0+0x11*-0xe9+-0x947?_0x5958ba['y']=_0xe70d93+(0x6*-0x469+0x2b*-0xe6+-0x37*-0x12f)*Math['log10'](0x11a8+0x5*0x695+-0x3290+_0x151b7a):_0x151b7a<-0x2*0x101e+0x4b2*-0x3+0x2e52&&(_0x5958ba['y']=-(0x217a+0xcdc+-0x2e55)*Math['log10'](0x53*0x4d+0x1db+-0x1ad1-_0x151b7a)),_0x5958ba;}['_isDraggin'+'g'](){return this['_contentDr'+'agHelper']&&this['_contentDr'+'agHelper']['isDragging'];}['_setScroll'+'barCompone'+'ntsEnabled'](_0x49b4da){var _0x4a2e71,_0x1f833f;(_0x4a2e71=this['_horizonta'+'lScrollbar'+'Entity'])!=null&&_0x4a2e71['scrollbar']&&(this['_horizonta'+'lScrollbar'+'Entity']['scrollbar']['enabled']=_0x49b4da),(_0x1f833f=this['_verticalS'+'crollbarEn'+'tity'])!=null&&_0x1f833f['scrollbar']&&(this['_verticalS'+'crollbarEn'+'tity']['scrollbar']['enabled']=_0x49b4da);}['_setConten'+'tDraggingE'+'nabled'](_0x424a5a){this['_contentDr'+'agHelper']&&(this['_contentDr'+'agHelper']['enabled']=_0x424a5a);}['_onMouseWh'+'eel'](_0x7900c4){var _0x1bbafc;if(!this['useMouseWh'+'eel']||!((_0x1bbafc=this['_contentEn'+'tity'])!=null&&_0x1bbafc['element']))return;const _0x2b777c=_0x7900c4['event'],_0x382578=_0x2b777c['deltaX']/this['_contentEn'+'tity']['element']['calculated'+'Width']*this['mouseWheel'+'Sensitivit'+'y']['x'],_0x2f0b11=_0x2b777c['deltaY']/this['_contentEn'+'tity']['element']['calculated'+'Height']*this['mouseWheel'+'Sensitivit'+'y']['y'],_0x232e52=Y['clamp'](this['_scroll']['x']+_0x382578,0x66c+-0x209*0x5+0x3c1,this['_getMaxScr'+'ollValue'](Ce)),_0x5c5d6a=Y['clamp'](this['_scroll']['y']+_0x2f0b11,0x1*-0x1419+-0x1ba8+0x3*0xfeb,this['_getMaxScr'+'ollValue'](je));this['scroll']=new J(_0x232e52,_0x5c5d6a);}['_enableCon'+'tentInput'](){for(;this['_disabledC'+'ontentInpu'+'tEntities']['length'];){const _0x5ec0d6=this['_disabledC'+'ontentInpu'+'tEntities']['pop']();_0x5ec0d6['element']&&(_0x5ec0d6['element']['useInput']=!(-0x2325+0x1dc0+0x1*0x565));}this['_disabledC'+'ontentInpu'+'t']=!(-0x1*-0x1d15+0x1*-0x15c6+-0x74e);}['_disableCo'+'ntentInput'](){const _0x3a0ea5=_0x1685dc=>{_0x1685dc['element']&&_0x1685dc['element']['useInput']&&(this['_disabledC'+'ontentInpu'+'tEntities']['push'](_0x1685dc),_0x1685dc['element']['useInput']=!(-0x4f6*0x1+0x1b19+0xb11*-0x2));const _0x4fd887=_0x1685dc['children'];for(let _0x4fc92a=-0xfad+0x7b9*0x3+-0x77e,_0x2f89de=_0x4fd887['length'];_0x4fc92a<_0x2f89de;_0x4fc92a++)_0x3a0ea5(_0x4fd887[_0x4fc92a]);};if(this['_contentEn'+'tity']){const _0x2fe325=this['_contentEn'+'tity']['children'];for(let _0x38a14a=0x1e9f+0x76e+0x23d*-0x11,_0x44b1dc=_0x2fe325['length'];_0x38a14a<_0x44b1dc;_0x38a14a++)_0x3a0ea5(_0x2fe325[_0x38a14a]);}this['_disabledC'+'ontentInpu'+'t']=!(-0x1*-0x2af+0x8a1+-0xb50);}['onEnable'](){this['_setScroll'+'barCompone'+'ntsEnabled'](!(-0xca4+0x25c5+0x7*-0x397)),this['_setConten'+'tDraggingE'+'nabled'](!(-0x1*0x2361+-0x1bae+0x3f0f)),this['_syncAll']();}['onDisable'](){this['_setScroll'+'barCompone'+'ntsEnabled'](!(0xf2c+-0x1*0xd8a+-0x1a1)),this['_setConten'+'tDraggingE'+'nabled'](!(-0x1a95*-0x1+0x11d8+-0x4*0xb1b));}['onRemove'](){this['_toggleLif'+'ecycleList'+'eners']('off'),this['_toggleEle'+'mentListen'+'ers']('off'),this['_destroyDr'+'agHelper']();}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x40a62e,_0xb21bd9){_0x40a62e['viewportEn'+'tity']&&(this['viewportEn'+'tity']=_0xb21bd9[_0x40a62e['viewportEn'+'tity']['getGuid']()]),_0x40a62e['contentEnt'+'ity']&&(this['contentEnt'+'ity']=_0xb21bd9[_0x40a62e['contentEnt'+'ity']['getGuid']()]),_0x40a62e['horizontal'+'ScrollbarE'+'ntity']&&(this['horizontal'+'ScrollbarE'+'ntity']=_0xb21bd9[_0x40a62e['horizontal'+'ScrollbarE'+'ntity']['getGuid']()]),_0x40a62e['verticalSc'+'rollbarEnt'+'ity']&&(this['verticalSc'+'rollbarEnt'+'ity']=_0xb21bd9[_0x40a62e['verticalSc'+'rollbarEnt'+'ity']['getGuid']()]);}}h(c0,'EVENT_SETS'+'CROLL','set:scroll');const sF=0xf*0x175+-0x30c+-0x1f*0x9b;class iF{constructor(){h(this,'enabled',!(-0x1*-0x18e9+0x11ff+0x4*-0xaba)),h(this,'horizontal'),h(this,'vertical'),h(this,'scrollMode'),h(this,'bounceAmou'+'nt'),h(this,'friction'),h(this,'dragThresh'+'old',sF),h(this,'useMouseWh'+'eel',!(-0x89c+0x61f+-0x5b*-0x7)),h(this,'mouseWheel'+'Sensitivit'+'y',new J(0x1*-0xffb+0x1887+-0x88b,-0x16d2+-0x13e7+0x2aba)),h(this,'horizontal'+'ScrollbarV'+'isibility',-0x9*0x1c4+0x205d+-0x1079*0x1),h(this,'verticalSc'+'rollbarVis'+'ibility',0x1*-0xfb6+-0x51b+0x14d1),h(this,'viewportEn'+'tity',null),h(this,'contentEnt'+'ity',null),h(this,'horizontal'+'ScrollbarE'+'ntity',null),h(this,'verticalSc'+'rollbarEnt'+'ity',null);}}const nS=[{'name':'enabled','type':'boolean'},{'name':'horizontal','type':'boolean'},{'name':'vertical','type':'boolean'},{'name':'scrollMode','type':'number'},{'name':'bounceAmou'+'nt','type':'number'},{'name':'friction','type':'number'},{'name':'dragThresh'+'old','type':'number'},{'name':'useMouseWh'+'eel','type':'boolean'},{'name':'mouseWheel'+'Sensitivit'+'y','type':'vec2'},{'name':'horizontal'+'ScrollbarV'+'isibility','type':'number'},{'name':'verticalSc'+'rollbarVis'+'ibility','type':'number'}],rF=-0x1092+-0x9c*-0xa+-0xa84*-0x1;class aF extends ct{constructor(_0x50fb24){super(_0x50fb24),this['id']='scrollview',this['ComponentT'+'ype']=c0,this['DataType']=iF,this['schema']=nS,this['on']('beforeremo'+'ve',this['_onRemoveC'+'omponent'],this),this['app']['systems']['on']('update',this['onUpdate'],this);}['initialize'+'ComponentD'+'ata'](_0x1ee6fe,_0x5000dd,_0x21a0de){_0x5000dd['dragThresh'+'old']===void(-0x26d2+-0x15a9+0x3c7b)&&(_0x5000dd['dragThresh'+'old']=rF),_0x5000dd['useMouseWh'+'eel']===void(-0x35*-0x88+-0x11e4+0x124*-0x9)&&(_0x5000dd['useMouseWh'+'eel']=!(-0x10a5*0x1+0x1add*-0x1+0x2b82*0x1)),_0x5000dd['mouseWheel'+'Sensitivit'+'y']===void(0x179c+0x13ac*0x1+-0x2b48)&&(_0x5000dd['mouseWheel'+'Sensitivit'+'y']=new J(0xd7c+-0x259e+0x1823,0x8ab+0xa4a+-0x12f4)),super['initialize'+'ComponentD'+'ata'](_0x1ee6fe,_0x5000dd,nS),_0x1ee6fe['viewportEn'+'tity']=_0x5000dd['viewportEn'+'tity'],_0x1ee6fe['contentEnt'+'ity']=_0x5000dd['contentEnt'+'ity'],_0x1ee6fe['horizontal'+'ScrollbarE'+'ntity']=_0x5000dd['horizontal'+'ScrollbarE'+'ntity'],_0x1ee6fe['verticalSc'+'rollbarEnt'+'ity']=_0x5000dd['verticalSc'+'rollbarEnt'+'ity'];}['onUpdate'](_0xa9e938){const _0x444e6e=this['store'];for(const _0x1c013d in _0x444e6e){const _0x521beb=_0x444e6e[_0x1c013d]['entity'],_0x5da8c2=_0x521beb['scrollview'];_0x5da8c2['enabled']&&_0x521beb['enabled']&&_0x5da8c2['onUpdate']();}}['_onRemoveC'+'omponent'](_0x42466c,_0x2285a2){_0x2285a2['onRemove']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}class h0 extends we{constructor(_0x3bef4d,_0x144212){super(_0x3bef4d,_0x144212),h(this,'_handleEnt'+'ity',null),h(this,'_evtHandle'+'EntityElem'+'entAdd',null),h(this,'_evtHandle'+'EntityChan'+'ges',[]),this['_toggleLif'+'ecycleList'+'eners']('on');}get['data'](){const _0x289d7e=this['system']['store'][this['entity']['getGuid']()];return _0x289d7e?_0x289d7e['data']:null;}set['enabled'](_0x17f08a){this['_setValue']('enabled',_0x17f08a);}get['enabled'](){return this['data']['enabled'];}set['orientatio'+'n'](_0x6df0f4){this['_setValue']('orientatio'+'n',_0x6df0f4);}get['orientatio'+'n'](){return this['data']['orientatio'+'n'];}set['value'](_0x3b60a4){this['_setValue']('value',_0x3b60a4);}get['value'](){return this['data']['value'];}set['handleSize'](_0x454a66){this['_setValue']('handleSize',_0x454a66);}get['handleSize'](){return this['data']['handleSize'];}set['handleEnti'+'ty'](_0x26416d){if(this['_handleEnt'+'ity']===_0x26416d)return;const _0x4b0a0e=typeof _0x26416d=='string';this['_handleEnt'+'ity']&&_0x4b0a0e&&this['_handleEnt'+'ity']['getGuid']()===_0x26416d||(this['_handleEnt'+'ity']&&this['_handleEnt'+'ityUnsubsc'+'ribe'](),_0x26416d instanceof Ie?this['_handleEnt'+'ity']=_0x26416d:_0x4b0a0e?this['_handleEnt'+'ity']=this['system']['app']['getEntityF'+'romIndex'](_0x26416d)||null:this['_handleEnt'+'ity']=null,this['_handleEnt'+'ity']&&this['_handleEnt'+'itySubscri'+'be'](),this['_handleEnt'+'ity']?this['data']['handleEnti'+'ty']=this['_handleEnt'+'ity']['getGuid']():_0x4b0a0e&&_0x26416d&&(this['data']['handleEnti'+'ty']=_0x26416d));}get['handleEnti'+'ty'](){return this['_handleEnt'+'ity'];}['_setValue'](_0x176900,_0x14b812){const _0x10d0e8=this['data'],_0x3f7390=_0x10d0e8[_0x176900];_0x10d0e8[_0x176900]=_0x14b812,this['fire']('set',_0x176900,_0x3f7390,_0x14b812);}['_toggleLif'+'ecycleList'+'eners'](_0x436b72){this[_0x436b72]('set_value',this['_onSetValu'+'e'],this),this[_0x436b72]('set_handle'+'Size',this['_onSetHand'+'leSize'],this),this[_0x436b72]('set_orient'+'ation',this['_onSetOrie'+'ntation'],this);}['_handleEnt'+'itySubscri'+'be'](){this['_evtHandle'+'EntityElem'+'entAdd']=this['_handleEnt'+'ity']['on']('element:ad'+'d',this['_onHandleE'+'lementGain'],this),this['_handleEnt'+'ity']['element']&&this['_onHandleE'+'lementGain']();}['_handleEnt'+'ityUnsubsc'+'ribe'](){var _0x553707,_0x7df3dc;(_0x553707=this['_evtHandle'+'EntityElem'+'entAdd'])==null||_0x553707['off'](),this['_evtHandle'+'EntityElem'+'entAdd']=null,(_0x7df3dc=this['_handleEnt'+'ity'])!=null&&_0x7df3dc['element']&&this['_onHandleE'+'lementLose']();}['_handleEnt'+'ityElement'+'Subscribe'](){const _0x564761=this['_handleEnt'+'ity']['element'],_0x513ec3=this['_evtHandle'+'EntityChan'+'ges'];_0x513ec3['push'](_0x564761['once']('beforeremo'+'ve',this['_onHandleE'+'lementLose'],this)),_0x513ec3['push'](_0x564761['on']('set:anchor',this['_onSetHand'+'leAlignmen'+'t'],this)),_0x513ec3['push'](_0x564761['on']('set:margin',this['_onSetHand'+'leAlignmen'+'t'],this)),_0x513ec3['push'](_0x564761['on']('set:pivot',this['_onSetHand'+'leAlignmen'+'t'],this));}['_handleEnt'+'ityElement'+'Unsubscrib'+'e'](){for(let _0x599410=0x233*-0x7+-0x3*-0x989+-0xd36;_0x599410<this['_evtHandle'+'EntityChan'+'ges']['length'];_0x599410++)this['_evtHandle'+'EntityChan'+'ges'][_0x599410]['off']();this['_evtHandle'+'EntityChan'+'ges']['length']=-0x8ef+-0x1c28+-0xf*-0x279;}['_onHandleE'+'lementGain'](){this['_handleEnt'+'ityElement'+'Subscribe'](),this['_destroyDr'+'agHelper'](),this['_handleDra'+'gHelper']=new Go(this['_handleEnt'+'ity']['element'],this['_getAxis']()),this['_handleDra'+'gHelper']['on']('drag:move',this['_onHandleD'+'rag'],this),this['_updateHan'+'dlePositio'+'nAndSize']();}['_onHandleE'+'lementLose'](){this['_handleEnt'+'ityElement'+'Unsubscrib'+'e'](),this['_destroyDr'+'agHelper']();}['_onHandleD'+'rag'](_0x5eb998){this['_handleEnt'+'ity']&&this['enabled']&&this['entity']['enabled']&&(this['value']=this['_handlePos'+'itionToScr'+'ollValue'](_0x5eb998[this['_getAxis']()]));}['_onSetValu'+'e'](_0x6505ed,_0x1ce796,_0x71b4ca){Math['abs'](_0x71b4ca-_0x1ce796)>0x2a4*0x2+0x7f*0x43+-0x2685+0.00001&&(this['data']['value']=Y['clamp'](_0x71b4ca,-0x2*0x1b1+0x17*0x30+0xee*-0x1,0x2194+0x671+0x2*-0x1402),this['_updateHan'+'dlePositio'+'nAndSize'](),this['fire']('set:value',this['data']['value']));}['_onSetHand'+'leSize'](_0x10e232,_0x355146,_0x480ca2){Math['abs'](_0x480ca2-_0x355146)>-0x24fa+0x1*-0x1769+0x1421*0x3+0.00001&&(this['data']['handleSize']=Y['clamp'](_0x480ca2,-0x4d*0x10+-0x2076+0x2546,0x12a1+-0x743+-0xb5d),this['_updateHan'+'dlePositio'+'nAndSize']());}['_onSetHand'+'leAlignmen'+'t'](){this['_updateHan'+'dlePositio'+'nAndSize']();}['_onSetOrie'+'ntation'](_0x306649,_0x2fb783,_0x589da6){var _0x4cf042;_0x589da6!==_0x2fb783&&((_0x4cf042=this['_handleEnt'+'ity'])!=null&&_0x4cf042['element'])&&(this['_handleEnt'+'ity']['element'][this['_getOpposi'+'teDimensio'+'n']()]=-0x2212+-0x201e+-0x2118*-0x2);}['_updateHan'+'dlePositio'+'nAndSize'](){const _0x3f2902=this['_handleEnt'+'ity'],_0x17d0ec=_0x3f2902==null?void(-0x2008+0x5*-0x679+0x4065*0x1):_0x3f2902['element'];if(_0x3f2902){const _0x36b294=_0x3f2902['getLocalPo'+'sition']();_0x36b294[this['_getAxis']()]=this['_getHandle'+'Position'](),_0x3f2902['setLocalPo'+'sition'](_0x36b294);}_0x17d0ec&&(_0x17d0ec[this['_getDimens'+'ion']()]=this['_getHandle'+'Length']());}['_handlePos'+'itionToScr'+'ollValue'](_0x315f2d){return _0x315f2d*this['_getSign']()/this['_getUsable'+'TrackLengt'+'h']();}['_scrollVal'+'ueToHandle'+'Position'](_0x184654){return _0x184654*this['_getSign']()*this['_getUsable'+'TrackLengt'+'h']();}['_getUsable'+'TrackLengt'+'h'](){return Math['max'](this['_getTrackL'+'ength']()-this['_getHandle'+'Length'](),-0x1a5e+-0x77b+0x21d9+0.001);}['_getTrackL'+'ength'](){return this['entity']['element']?this['orientatio'+'n']===Ce?this['entity']['element']['calculated'+'Width']:this['entity']['element']['calculated'+'Height']:0x208f+-0x355*-0x6+-0x348d*0x1;}['_getHandle'+'Length'](){return this['_getTrackL'+'ength']()*this['handleSize'];}['_getHandle'+'Position'](){return this['_scrollVal'+'ueToHandle'+'Position'](this['value']);}['_getSign'](){return this['orientatio'+'n']===Ce?-0x1e2b+0x209+0x7*0x405:-(0x1*0x346+0x2153+-0x2498);}['_getAxis'](){return this['orientatio'+'n']===Ce?'x':'y';}['_getDimens'+'ion'](){return this['orientatio'+'n']===Ce?'width':'height';}['_getOpposi'+'teDimensio'+'n'](){return this['orientatio'+'n']===Ce?'height':'width';}['_destroyDr'+'agHelper'](){this['_handleDra'+'gHelper']&&this['_handleDra'+'gHelper']['destroy']();}['_setHandle'+'DraggingEn'+'abled'](_0x45139e){this['_handleDra'+'gHelper']&&(this['_handleDra'+'gHelper']['enabled']=_0x45139e);}['onEnable'](){this['_setHandle'+'DraggingEn'+'abled'](!(0x3*-0x5b1+-0x1971+0x3*0xe2c));}['onDisable'](){this['_setHandle'+'DraggingEn'+'abled'](!(0x1*-0x1807+0x547+0x12c1*0x1));}['onRemove'](){this['_destroyDr'+'agHelper'](),this['_toggleLif'+'ecycleList'+'eners']('off');}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x5ef0ac,_0x1a878c){_0x5ef0ac['handleEnti'+'ty']&&(this['handleEnti'+'ty']=_0x1a878c[_0x5ef0ac['handleEnti'+'ty']['getGuid']()]);}}h(h0,'EVENT_SETV'+'ALUE','set:value');class nF{constructor(){h(this,'enabled',!(0x4ab*0x1+-0xb5c+0x6b1*0x1)),h(this,'orientatio'+'n',Ce),h(this,'value',-0x175+-0x1*0x26b+0x3e0),h(this,'handleSize',-0x23*0x8e+0x4f1+-0x5f*-0x27),h(this,'handleEnti'+'ty',null);}}const oS=[{'name':'enabled','type':'boolean'},{'name':'orientatio'+'n','type':'number'},{'name':'value','type':'number'},{'name':'handleSize','type':'number'}];class oF extends ct{constructor(_0x48cda1){super(_0x48cda1),this['id']='scrollbar',this['ComponentT'+'ype']=h0,this['DataType']=nF,this['schema']=oS,this['on']('add',this['_onAddComp'+'onent'],this),this['on']('beforeremo'+'ve',this['_onRemoveC'+'omponent'],this);}['initialize'+'ComponentD'+'ata'](_0x2caf1b,_0x438498,_0x259991){super['initialize'+'ComponentD'+'ata'](_0x2caf1b,_0x438498,oS),_0x2caf1b['handleEnti'+'ty']=_0x438498['handleEnti'+'ty'];}['_onAddComp'+'onent'](_0x41a308){_0x41a308['fire']('scrollbar:'+'add');}['_onRemoveC'+'omponent'](_0xf2377d,_0x12fb9f){_0x12fb9f['onRemove']();}}const lF={'volume':0x0,'pitch':0x0,'loop':!(0x245f+0x1b36+-0x3f94),'startTime':0x0,'duration':0x0,'position':new D(),'maxDistance':0x0,'refDistance':0x0,'rollOffFactor':0x0,'distanceModel':0x0,'onPlay':null,'onPause':null,'onResume':null,'onStop':null,'onEnd':null};class Gi extends me{constructor(_0x42beef,_0x3df79d='Untitled',_0x49468f={}){super(),h(this,'name'),h(this,'instances',[]),(this['_component']=_0x42beef,this['_assets']=_0x42beef['system']['app']['assets'],this['_manager']=_0x42beef['system']['manager'],this['name']=_0x3df79d,this['_volume']=_0x49468f['volume']!==void(0x12b2+-0x1a93*0x1+0x7e1)?Y['clamp'](Number(_0x49468f['volume'])||-0xc93*-0x1+0x592+-0x1225,0x5f*0x2+-0x122f+0x1171,-0x3*0xeb+-0x959+0xc1b):0x207d*0x1+0x1*-0x11ef+-0xe8d*0x1,this['_pitch']=_0x49468f['pitch']!==void(0xd*0x2eb+0x1483*0x1+-0x3a72)?Math['max'](0x1df0+-0x3*-0x239+-0x249b*0x1+0.01,Number(_0x49468f['pitch'])||-0x47*-0x49+-0x2532+-0x1*-0x10f3):0x20d1+-0x1d8b+0x5d*-0x9,this['_loop']=!!(_0x49468f['loop']!==void(0x122d+-0x692+-0xb9b)&&_0x49468f['loop']),this['_duration']=_0x49468f['duration']>-0x4f9*-0x4+-0x1593+0x1af?_0x49468f['duration']:null,this['_startTime']=Math['max'](-0xbcd+0x1ca2+-0x10d5,Number(_0x49468f['startTime'])||0x25e7+0x21*-0x43+-0x1d44),this['_overlap']=!!_0x49468f['overlap'],this['_autoPlay']=!!_0x49468f['autoPlay'],this['_firstNode']=null,this['_lastNode']=null,this['_asset']=_0x49468f['asset'],this['_asset']instanceof pe&&(this['_asset']=this['_asset']['id']),this['_onInstanc'+'ePlayHandl'+'er']=this['_onInstanc'+'ePlay']['bind'](this),this['_onInstanc'+'ePauseHand'+'ler']=this['_onInstanc'+'ePause']['bind'](this),this['_onInstanc'+'eResumeHan'+'dler']=this['_onInstanc'+'eResume']['bind'](this),this['_onInstanc'+'eStopHandl'+'er']=this['_onInstanc'+'eStop']['bind'](this),this['_onInstanc'+'eEndHandle'+'r']=this['_onInstanc'+'eEnd']['bind'](this));}['play'](_0x4da400){if(this['overlap']||this['stop'](),!this['isLoaded']&&!this['_hasAsset']()){w['warn']('Trying\x20to\x20'+'play\x20Sound'+'Slot\x20'+this['name']+('\x20but\x20it\x20is'+'\x20not\x20loade'+'d\x20and\x20does'+'n\x27t\x20have\x20a'+'n\x20asset.'));return;}let _0x150ba5=_0x4da400;if(_0x150ba5||(_0x150ba5=this['_createIns'+'tance'](),this['instances']['push'](_0x150ba5)),this['isLoaded'])_0x150ba5['play']();else{const _0x29ccd8=function(_0x2b4cd4){const _0x5c0fb6=_0x150ba5['_playWhenL'+'oaded'];_0x150ba5['sound']=_0x2b4cd4,_0x5c0fb6&&_0x150ba5['play']();};this['off']('load',_0x29ccd8),this['once']('load',_0x29ccd8),this['load']();}return _0x150ba5;}['pause'](){let _0x42c207=!(-0x7*-0x4c1+0x1ed*-0x12+0x164);const _0x261a91=this['instances'];for(let _0x165e8b=0x3f*-0x12+0x1eda+-0x1a6c,_0x51fb49=_0x261a91['length'];_0x165e8b<_0x51fb49;_0x165e8b++)_0x261a91[_0x165e8b]['pause']()&&(_0x42c207=!(0x12af*-0x2+-0xa00+0x2f5e));return _0x42c207;}['resume'](){let _0x46e8db=!(0x2215+0x1*0x1a6f+0x7*-0x8a5);const _0x57c133=this['instances'];for(let _0x2359b0=0x1df*-0x2+0x604*0x5+-0x1a56*0x1,_0x2101d1=_0x57c133['length'];_0x2359b0<_0x2101d1;_0x2359b0++)_0x57c133[_0x2359b0]['resume']()&&(_0x46e8db=!(0x1bd5+0x1d1b*0x1+-0x4*0xe3c));return _0x46e8db;}['stop'](){let _0x37f86c=!(-0x167f+0x2d*0x43+0xab9);const _0x1ce7fc=this['instances'];let _0x51dcbe=_0x1ce7fc['length'];for(;_0x51dcbe--;)_0x1ce7fc[_0x51dcbe]['stop'](),_0x37f86c=!(0x23f7+0x19c*-0x5+-0x1beb);return _0x1ce7fc['length']=-0x1*-0x2104+0x1713+-0x3817,_0x37f86c;}['load'](){if(!this['_hasAsset']())return;const _0x373615=this['_assets']['get'](this['_asset']);if(!_0x373615){this['_assets']['off']('add:'+this['_asset'],this['_onAssetAd'+'d'],this),this['_assets']['once']('add:'+this['_asset'],this['_onAssetAd'+'d'],this);return;}if(_0x373615['off']('remove',this['_onAssetRe'+'moved'],this),_0x373615['on']('remove',this['_onAssetRe'+'moved'],this),!_0x373615['resource']){_0x373615['off']('load',this['_onAssetLo'+'ad'],this),_0x373615['once']('load',this['_onAssetLo'+'ad'],this),this['_assets']['load'](_0x373615);return;}this['fire']('load',_0x373615['resource']);}['setExterna'+'lNodes'](_0x5a432b,_0x538ce0){if(!_0x5a432b){console['error']('The\x20firstN'+'ode\x20must\x20h'+'ave\x20a\x20vali'+'d\x20AudioNod'+'e');return;}if(_0x538ce0||(_0x538ce0=_0x5a432b),this['_firstNode']=_0x5a432b,this['_lastNode']=_0x538ce0,!this['_overlap']){const _0x51e21b=this['instances'];for(let _0x5d1e54=0x792+0x977*0x1+0x26f*-0x7,_0x389f11=_0x51e21b['length'];_0x5d1e54<_0x389f11;_0x5d1e54++)_0x51e21b[_0x5d1e54]['setExterna'+'lNodes'](_0x5a432b,_0x538ce0);}}['clearExter'+'nalNodes'](){if(this['_firstNode']=null,this['_lastNode']=null,!this['_overlap']){const _0x3e6033=this['instances'];for(let _0x5df91f=-0x1*0x15ff+-0x7cf*0x1+0x1dce,_0x4b7a28=_0x3e6033['length'];_0x5df91f<_0x4b7a28;_0x5df91f++)_0x3e6033[_0x5df91f]['clearExter'+'nalNodes']();}}['getExterna'+'lNodes'](){return[this['_firstNode'],this['_lastNode']];}['_hasAsset'](){return this['_asset']!=null;}['_createIns'+'tance'](){let _0x49d189=null;const _0x5a73f0=this['_component'];let _0x282423=null;if(this['_hasAsset']()){const _0x277d4c=this['_assets']['get'](this['_asset']);_0x277d4c&&(_0x282423=_0x277d4c['resource']);}const _0x21e2ed=lF;return _0x21e2ed['volume']=this['_volume']*_0x5a73f0['volume'],_0x21e2ed['pitch']=this['_pitch']*_0x5a73f0['pitch'],_0x21e2ed['loop']=this['_loop'],_0x21e2ed['startTime']=this['_startTime'],_0x21e2ed['duration']=this['_duration'],_0x21e2ed['onPlay']=this['_onInstanc'+'ePlayHandl'+'er'],_0x21e2ed['onPause']=this['_onInstanc'+'ePauseHand'+'ler'],_0x21e2ed['onResume']=this['_onInstanc'+'eResumeHan'+'dler'],_0x21e2ed['onStop']=this['_onInstanc'+'eStopHandl'+'er'],_0x21e2ed['onEnd']=this['_onInstanc'+'eEndHandle'+'r'],_0x5a73f0['positional']?(_0x21e2ed['position']['copy'](_0x5a73f0['entity']['getPositio'+'n']()),_0x21e2ed['maxDistanc'+'e']=_0x5a73f0['maxDistanc'+'e'],_0x21e2ed['refDistanc'+'e']=_0x5a73f0['refDistanc'+'e'],_0x21e2ed['rollOffFac'+'tor']=_0x5a73f0['rollOffFac'+'tor'],_0x21e2ed['distanceMo'+'del']=_0x5a73f0['distanceMo'+'del'],_0x49d189=new sn(this['_manager'],_0x282423,_0x21e2ed)):_0x49d189=new As(this['_manager'],_0x282423,_0x21e2ed),this['_firstNode']&&_0x49d189['setExterna'+'lNodes'](this['_firstNode'],this['_lastNode']),_0x49d189;}['_onInstanc'+'ePlay'](_0x56aba2){this['fire']('play',_0x56aba2),this['_component']['fire']('play',this,_0x56aba2);}['_onInstanc'+'ePause'](_0x52eab0){this['fire']('pause',_0x52eab0),this['_component']['fire']('pause',this,_0x52eab0);}['_onInstanc'+'eResume'](_0x1aed4c){this['fire']('resume',_0x1aed4c),this['_component']['fire']('resume',this,_0x1aed4c);}['_onInstanc'+'eStop'](_0x2720f6){const _0x5c1bf8=this['instances']['indexOf'](_0x2720f6);_0x5c1bf8!==-(0x12a0+0x7a3+-0x1a42)&&this['instances']['splice'](_0x5c1bf8,0x1a*-0x138+-0x20a5+0x4056),this['fire']('stop',_0x2720f6),this['_component']['fire']('stop',this,_0x2720f6);}['_onInstanc'+'eEnd'](_0x143687){const _0x5bd7d7=this['instances']['indexOf'](_0x143687);_0x5bd7d7!==-(-0x1826+0x2*0x103d+-0x853*0x1)&&this['instances']['splice'](_0x5bd7d7,0xbb9+-0x2e3*-0x8+-0x1*0x22d0),this['fire']('end',_0x143687),this['_component']['fire']('end',this,_0x143687);}['_onAssetAd'+'d'](_0x466a2f){this['load']();}['_onAssetLo'+'ad'](_0x3d647b){this['load']();}['_onAssetRe'+'moved'](_0x29f34b){_0x29f34b['off']('remove',this['_onAssetRe'+'moved'],this),this['_assets']['off']('add:'+_0x29f34b['id'],this['_onAssetAd'+'d'],this),this['stop']();}['updatePosi'+'tion'](_0x352224){const _0x9436a3=this['instances'];for(let _0x47c2c7=-0xa26*-0x3+-0x15ee+-0x884,_0x3169e6=_0x9436a3['length'];_0x47c2c7<_0x3169e6;_0x47c2c7++)_0x9436a3[_0x47c2c7]['position']=_0x352224;}set['asset'](_0x6f5422){const _0x419b3=this['_asset'];if(_0x419b3){this['_assets']['off']('add:'+_0x419b3,this['_onAssetAd'+'d'],this);const _0x2c0b68=this['_assets']['get'](_0x419b3);_0x2c0b68&&_0x2c0b68['off']('remove',this['_onAssetRe'+'moved'],this);}this['_asset']=_0x6f5422,this['_asset']instanceof pe&&(this['_asset']=this['_asset']['id']),this['_hasAsset']()&&this['_component']['enabled']&&this['_component']['entity']['enabled']&&this['load']();}get['asset'](){return this['_asset'];}set['autoPlay'](_0x303a51){this['_autoPlay']=!!_0x303a51;}get['autoPlay'](){return this['_autoPlay'];}set['duration'](_0x51bfbe){if(this['_duration']=Math['max'](-0x1*0xb7f+-0x11b5+-0x26f*-0xc,Number(_0x51bfbe)||0x3*0x2e3+-0x1f8c+0x16e3)||null,!this['_overlap']){const _0x26b1a4=this['instances'];for(let _0x311591=-0x19*-0x15d+-0x1*-0xbe3+-0x2df8,_0x18c9e5=_0x26b1a4['length'];_0x311591<_0x18c9e5;_0x311591++)_0x26b1a4[_0x311591]['duration']=this['_duration'];}}get['duration'](){let _0x582541=0x8a*-0x8+0xfa9+-0xb59;if(this['_hasAsset']()){const _0x11b358=this['_assets']['get'](this['_asset']);_0x582541=_0x11b358!=null&&_0x11b358['resource']?_0x11b358['resource']['duration']:-0x1*-0x2479+-0x40d*0x3+-0x236*0xb;}return this['_duration']!=null?this['_duration']%(_0x582541||-0x2*0x4d3+0x1*0x186b+-0xec4):_0x582541;}get['isLoaded'](){if(this['_hasAsset']()){const _0x1144d4=this['_assets']['get'](this['_asset']);if(_0x1144d4)return!!_0x1144d4['resource'];}return!(0x1afc+0x16c0+-0x31bb);}get['isPaused'](){const _0x5aa563=this['instances'],_0x1dad77=_0x5aa563['length'];if(_0x1dad77===0x1d3a+-0x1*-0x254f+-0x4289*0x1)return!(0x1ea2+-0x67d+-0x1824);for(let _0xc92a52=-0x236b+0xe58+0x1513;_0xc92a52<_0x1dad77;_0xc92a52++)if(!_0x5aa563[_0xc92a52]['isPaused'])return!(0x3*-0xa67+-0xafa+0x2a30);return!(0x1245*-0x1+0x234d+0x442*-0x4);}get['isPlaying'](){const _0x147039=this['instances'];for(let _0x22e0e3=0x6df+0x275+-0x954,_0x3be39e=_0x147039['length'];_0x22e0e3<_0x3be39e;_0x22e0e3++)if(_0x147039[_0x22e0e3]['isPlaying'])return!(-0x9cf+-0x45*0x47+0x1cf2);return!(-0x682+-0x26e2+0x1*0x2d65);}get['isStopped'](){const _0x25af26=this['instances'];for(let _0x1e9451=-0x43*-0x21+-0x126e+0x1*0x9cb,_0x3dd16d=_0x25af26['length'];_0x1e9451<_0x3dd16d;_0x1e9451++)if(!_0x25af26[_0x1e9451]['isStopped'])return!(0x1*0x56f+-0x1b46*-0x1+-0x20b4);return!(0xbe4+0x1eed+0x71*-0x61);}set['loop'](_0x4fa1f7){this['_loop']=!!_0x4fa1f7;const _0x5b0c1d=this['instances'];for(let _0x536f21=0x26fc+0x1*-0x192+0x256a*-0x1,_0xdb7207=_0x5b0c1d['length'];_0x536f21<_0xdb7207;_0x536f21++)_0x5b0c1d[_0x536f21]['loop']=this['_loop'];}get['loop'](){return this['_loop'];}set['overlap'](_0x239e17){this['_overlap']=!!_0x239e17;}get['overlap'](){return this['_overlap'];}set['pitch'](_0x1edbdb){if(this['_pitch']=Math['max'](Number(_0x1edbdb)||-0x446+-0x18ef+0x1d35,-0x1286*0x1+0x1a71+0x7eb*-0x1+0.01),!this['_overlap']){const _0x4026ff=this['instances'];for(let _0x28b087=0x1fc*-0x2+0x13f4*-0x1+0x17ec,_0x1ff05=_0x4026ff['length'];_0x28b087<_0x1ff05;_0x28b087++)_0x4026ff[_0x28b087]['pitch']=this['pitch']*this['_component']['pitch'];}}get['pitch'](){return this['_pitch'];}set['startTime'](_0x56a5e7){if(this['_startTime']=Math['max'](-0x349+0xcd1*-0x1+-0x9*-0x1ca,Number(_0x56a5e7)||-0x7b4*0x5+0x1fac+0x6d8),!this['_overlap']){const _0x11b3c9=this['instances'];for(let _0x540613=-0x1831+-0xa*-0x147+-0x4f*-0x25,_0x126317=_0x11b3c9['length'];_0x540613<_0x126317;_0x540613++)_0x11b3c9[_0x540613]['startTime']=this['_startTime'];}}get['startTime'](){return this['_startTime'];}set['volume'](_0x55dae3){if(this['_volume']=Y['clamp'](Number(_0x55dae3)||-0x25a1+0x157d+-0x1024*-0x1,-0x1*0x13b2+0x2239+0xe87*-0x1,-0x9c*-0x2+0x2ad*0x9+0x4*-0x653),!this['_overlap']){const _0x57bc4c=this['instances'];for(let _0x21aade=-0x2*-0x1339+-0x1609*-0x1+-0x4a7*0xd,_0x5e11f1=_0x57bc4c['length'];_0x21aade<_0x5e11f1;_0x21aade++)_0x57bc4c[_0x21aade]['volume']=this['_volume']*this['_component']['volume'];}}get['volume'](){return this['_volume'];}}h(Gi,'EVENT_PLAY','play'),h(Gi,'EVENT_PAUS'+'E','pause'),h(Gi,'EVENT_RESU'+'ME','resume'),h(Gi,'EVENT_STOP','stop'),h(Gi,'EVENT_END','end'),h(Gi,'EVENT_LOAD','load');class Kr extends we{constructor(){super(...arguments),h(this,'_volume',0xcad*0x3+-0x25c2+-0x1*0x44),h(this,'_pitch',0xbb7+0x3*-0x476+0x6b*0x4),h(this,'_positiona'+'l',!(0x4e3+0x117*-0x13+0xfd2)),h(this,'_refDistan'+'ce',0x32b*0x4+0x2066*0x1+-0x2d11),h(this,'_maxDistan'+'ce',-0x13bd+-0x1*-0x1c85+-0x198*-0x13),h(this,'_rollOffFa'+'ctor',-0xc8*0xc+0xed*-0x16+0x1*0x1dbf),h(this,'_distanceM'+'odel',Vp),h(this,'_slots',{}),h(this,'_playingBe'+'foreDisabl'+'e',{});}['_updateSou'+'ndInstance'+'s'](_0x23309d,_0x403604,_0x58d6c6){const _0x4ca693=this['_slots'];for(const _0x1966c2 in _0x4ca693){const _0x59fdb1=_0x4ca693[_0x1966c2];if(!_0x59fdb1['overlap']){const _0x3cabe7=_0x59fdb1['instances'];for(let _0x512c77=-0x5*-0x1+-0x1dd0+-0x1dcb*-0x1,_0x3890e0=_0x3cabe7['length'];_0x512c77<_0x3890e0;_0x512c77++)_0x3cabe7[_0x512c77][_0x23309d]=_0x58d6c6?_0x59fdb1[_0x23309d]*_0x403604:_0x403604;}}}set['distanceMo'+'del'](_0x2e484d){this['_distanceM'+'odel']=_0x2e484d,this['_updateSou'+'ndInstance'+'s']('distanceMo'+'del',_0x2e484d,!(-0x8b+-0x1cce+-0x2*-0xead));}get['distanceMo'+'del'](){return this['_distanceM'+'odel'];}set['maxDistanc'+'e'](_0x536366){this['_maxDistan'+'ce']=_0x536366,this['_updateSou'+'ndInstance'+'s']('maxDistanc'+'e',_0x536366,!(-0x1859+0x9c1*0x1+0xe99));}get['maxDistanc'+'e'](){return this['_maxDistan'+'ce'];}set['refDistanc'+'e'](_0x30dfad){this['_refDistan'+'ce']=_0x30dfad,this['_updateSou'+'ndInstance'+'s']('refDistanc'+'e',_0x30dfad,!(0x2052+0xbfa+-0x2c4b));}get['refDistanc'+'e'](){return this['_refDistan'+'ce'];}set['rollOffFac'+'tor'](_0x4df2f3){this['_rollOffFa'+'ctor']=_0x4df2f3,this['_updateSou'+'ndInstance'+'s']('rollOffFac'+'tor',_0x4df2f3,!(0x150d+-0x5b*-0x4f+-0x3121));}get['rollOffFac'+'tor'](){return this['_rollOffFa'+'ctor'];}set['pitch'](_0xb23c25){this['_pitch']=_0xb23c25,this['_updateSou'+'ndInstance'+'s']('pitch',_0xb23c25,!(0x2*-0xbcb+-0x1ffc+0x3792));}get['pitch'](){return this['_pitch'];}set['volume'](_0x10bca3){this['_volume']=_0x10bca3,this['_updateSou'+'ndInstance'+'s']('volume',_0x10bca3,!(0x1d00+0x71*-0x32+-0x2*0x377));}get['volume'](){return this['_volume'];}set['positional'](_0x1af696){this['_positiona'+'l']=_0x1af696;const _0x5ca80b=this['_slots'];for(const _0x11770b in _0x5ca80b){const _0x3d166e=_0x5ca80b[_0x11770b];if(!_0x3d166e['overlap']){const _0x3ff6fc=_0x3d166e['instances'],_0x52c7b0=_0x3ff6fc['length'];for(let _0x3d6097=_0x52c7b0-(-0xc32+-0x1ca8+0x28db);_0x3d6097>=0x7*0x3ad+0x1647+-0x3002;_0x3d6097--){const _0x258f21=_0x3ff6fc[_0x3d6097]['isPlaying']||_0x3ff6fc[_0x3d6097]['isSuspende'+'d'],_0x511f50=_0x3ff6fc[_0x3d6097]['currentTim'+'e'];_0x258f21&&_0x3ff6fc[_0x3d6097]['stop']();const _0x5e838d=_0x3d166e['_createIns'+'tance']();_0x258f21&&(_0x5e838d['play'](),_0x5e838d['currentTim'+'e']=_0x511f50),_0x3ff6fc['push'](_0x5e838d);}}}}get['positional'](){return this['_positiona'+'l'];}set['slots'](_0x30196e){const _0x5a4816=this['_slots'];if(_0x5a4816){for(const _0x11c541 in _0x5a4816)_0x5a4816[_0x11c541]['stop']();}const _0x26abd2={};for(const _0x487285 in _0x30196e)_0x30196e[_0x487285]instanceof Gi?_0x26abd2[_0x30196e[_0x487285]['name']]=_0x30196e[_0x487285]:_0x30196e[_0x487285]['name']&&(_0x26abd2[_0x30196e[_0x487285]['name']]=new Gi(this,_0x30196e[_0x487285]['name'],_0x30196e[_0x487285]));this['_slots']=_0x26abd2,this['enabled']&&this['entity']['enabled']&&this['onEnable']();}get['slots'](){return this['_slots'];}['onEnable'](){if(this['system']['_inTools'])return;const _0x5025a3=this['_slots'],_0xc89061=this['_playingBe'+'foreDisabl'+'e'];for(const _0x4e1461 in _0x5025a3){const _0x3f1e2f=_0x5025a3[_0x4e1461];_0x3f1e2f['autoPlay']&&_0x3f1e2f['isStopped']?_0x3f1e2f['play']():_0xc89061[_0x4e1461]?_0x3f1e2f['resume']():_0x3f1e2f['isLoaded']||_0x3f1e2f['load']();}}['onDisable'](){const _0x9a858d=this['_slots'],_0x5576c8={};for(const _0x38f1a8 in _0x9a858d)_0x9a858d[_0x38f1a8]['overlap']||_0x9a858d[_0x38f1a8]['isPlaying']&&(_0x9a858d[_0x38f1a8]['pause'](),_0x5576c8[_0x38f1a8]=!(-0x1*-0x71e+-0x1*0x132d+0xc0f));this['_playingBe'+'foreDisabl'+'e']=_0x5576c8;}['onRemove'](){this['off']();}['addSlot'](_0x145469,_0x5e4123){const _0x253946=this['_slots'];if(_0x253946[_0x145469])return w['warn']('A\x20sound\x20sl'+'ot\x20with\x20na'+'me\x20'+_0x145469+('\x20already\x20e'+'xists\x20on\x20E'+'ntity\x20')+this['entity']['path']),null;const _0x193095=new Gi(this,_0x145469,_0x5e4123);return _0x253946[_0x145469]=_0x193095,_0x193095['autoPlay']&&this['enabled']&&this['entity']['enabled']&&_0x193095['play'](),_0x193095;}['removeSlot'](_0xace7c0){const _0x3ad6b4=this['_slots'];_0x3ad6b4[_0xace7c0]&&(_0x3ad6b4[_0xace7c0]['stop'](),delete _0x3ad6b4[_0xace7c0]);}['slot'](_0x1015e5){return this['_slots'][_0x1015e5];}['_getSlotPr'+'operty'](_0x436820,_0x3573ff){if(!this['enabled']||!this['entity']['enabled'])return;const _0x1fad10=this['_slots'][_0x436820];if(!_0x1fad10){w['warn']('Trying\x20to\x20'+'get\x20'+_0x3573ff+('\x20from\x20soun'+'d\x20slot\x20wit'+'h\x20name\x20')+_0x436820+('\x20which\x20doe'+'s\x20not\x20exis'+'t'));return;}return _0x1fad10[_0x3573ff];}['isPlaying'](_0x48e61d){return this['_getSlotPr'+'operty'](_0x48e61d,'isPlaying')||!(0x1e27+-0x58d*-0x7+-0x5*0xdcd);}['isLoaded'](_0x3df700){return this['_getSlotPr'+'operty'](_0x3df700,'isLoaded')||!(0x1f5+-0x43*0x62+0x17b2);}['isPaused'](_0x169c17){return this['_getSlotPr'+'operty'](_0x169c17,'isPaused')||!(0x23cb+-0x673*0x6+0x2e8);}['isStopped'](_0x304126){return this['_getSlotPr'+'operty'](_0x304126,'isStopped')||!(-0xbd9+0x2a5*0x7+-0x6a9);}['play'](_0xe996ba){if(!this['enabled']||!this['entity']['enabled'])return null;const _0x2f9773=this['_slots'][_0xe996ba];return _0x2f9773?_0x2f9773['play']():(w['warn']('Trying\x20to\x20'+'play\x20sound'+'\x20slot\x20with'+'\x20name\x20'+_0xe996ba+('\x20which\x20doe'+'s\x20not\x20exis'+'t')),null);}['pause'](_0xd63771){const _0x28669f=this['_slots'];if(_0xd63771){const _0x2747cb=_0x28669f[_0xd63771];if(!_0x2747cb){w['warn']('Trying\x20to\x20'+'pause\x20soun'+'d\x20slot\x20wit'+'h\x20name\x20'+_0xd63771+('\x20which\x20doe'+'s\x20not\x20exis'+'t'));return;}_0x2747cb['pause']();}else{for(const _0x491efb in _0x28669f)_0x28669f[_0x491efb]['pause']();}}['resume'](_0x324066){const _0xd594c9=this['_slots'];if(_0x324066){const _0x2160e4=_0xd594c9[_0x324066];if(!_0x2160e4){w['warn']('Trying\x20to\x20'+'resume\x20sou'+'nd\x20slot\x20wi'+'th\x20name\x20'+_0x324066+('\x20which\x20doe'+'s\x20not\x20exis'+'t'));return;}_0x2160e4['isPaused']&&_0x2160e4['resume']();}else{for(const _0x59bb1d in _0xd594c9)_0xd594c9[_0x59bb1d]['resume']();}}['stop'](_0x5b42bc){const _0x114fbf=this['_slots'];if(_0x5b42bc){const _0x3e0a02=_0x114fbf[_0x5b42bc];if(!_0x3e0a02){w['warn']('Trying\x20to\x20'+'stop\x20sound'+'\x20slot\x20with'+'\x20name\x20'+_0x5b42bc+('\x20which\x20doe'+'s\x20not\x20exis'+'t'));return;}_0x3e0a02['stop']();}else{for(const _0xd411f0 in _0x114fbf)_0x114fbf[_0xd411f0]['stop']();}}}h(Kr,'EVENT_PLAY','play'),h(Kr,'EVENT_PAUS'+'E','pause'),h(Kr,'EVENT_RESU'+'ME','resume'),h(Kr,'EVENT_STOP','stop'),h(Kr,'EVENT_END','end');class cF{constructor(){this['enabled']=!(-0x1ca3+-0x6f6+0x2399);}}const d0=['enabled'];class hF extends ct{constructor(_0x2be898){super(_0x2be898),this['id']='sound',this['ComponentT'+'ype']=Kr,this['DataType']=cF,this['schema']=d0,this['manager']=_0x2be898['soundManag'+'er'],w['assert'](this['manager'],'SoundCompo'+'nentSystem'+'\x20cannot\x20be'+'\x20created\x20w'+'ithout\x20sou'+'nd\x20manager'),this['app']['systems']['on']('update',this['onUpdate'],this),this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this);}set['volume'](_0x30d2cc){this['manager']['volume']=_0x30d2cc;}get['volume'](){return this['manager']['volume'];}get['context'](){return Dl()?this['manager']['context']:(w['warn']('WARNING:\x20A'+'udio\x20conte'+'xt\x20is\x20not\x20'+'supported\x20'+'on\x20this\x20br'+'owser'),null);}['initialize'+'ComponentD'+'ata'](_0x48982c,_0x2fb1e0,_0x33f0e2){_0x33f0e2=['volume','pitch','positional','refDistanc'+'e','maxDistanc'+'e','rollOffFac'+'tor','distanceMo'+'del','slots'];for(let _0x47166f=-0x219a+-0x7*-0x493+0x195;_0x47166f<_0x33f0e2['length'];_0x47166f++)_0x2fb1e0['hasOwnProp'+'erty'](_0x33f0e2[_0x47166f])&&(_0x48982c[_0x33f0e2[_0x47166f]]=_0x2fb1e0[_0x33f0e2[_0x47166f]]);super['initialize'+'ComponentD'+'ata'](_0x48982c,_0x2fb1e0,['enabled']);}['cloneCompo'+'nent'](_0x554252,_0x5e4948){const _0x2f0736=_0x554252['sound'],_0xbc8a18=_0x2f0736['slots'],_0x429f86={};for(const _0xa4fabd in _0xbc8a18){const _0xf60157=_0xbc8a18[_0xa4fabd];_0x429f86[_0xa4fabd]={'name':_0xf60157['name'],'volume':_0xf60157['volume'],'pitch':_0xf60157['pitch'],'loop':_0xf60157['loop'],'duration':_0xf60157['duration'],'startTime':_0xf60157['startTime'],'overlap':_0xf60157['overlap'],'autoPlay':_0xf60157['autoPlay'],'asset':_0xf60157['asset']};}const _0x393c8b={'distanceModel':_0x2f0736['distanceMo'+'del'],'enabled':_0x2f0736['enabled'],'maxDistance':_0x2f0736['maxDistanc'+'e'],'pitch':_0x2f0736['pitch'],'positional':_0x2f0736['positional'],'refDistance':_0x2f0736['refDistanc'+'e'],'rollOffFactor':_0x2f0736['rollOffFac'+'tor'],'slots':_0x429f86,'volume':_0x2f0736['volume']};return this['addCompone'+'nt'](_0x5e4948,_0x393c8b);}['onUpdate'](_0x1a7dd4){const _0x23578f=this['store'];for(const _0x9ad16f in _0x23578f)if(_0x23578f['hasOwnProp'+'erty'](_0x9ad16f)){const _0x23b95f=_0x23578f[_0x9ad16f]['entity'];if(_0x23b95f['enabled']){const _0x2ededc=_0x23b95f['sound'];if(_0x2ededc['enabled']&&_0x2ededc['positional']){const _0x3f5ae7=_0x23b95f['getPositio'+'n'](),_0x3d01bd=_0x2ededc['slots'];for(const _0x277d98 in _0x3d01bd)_0x3d01bd[_0x277d98]['updatePosi'+'tion'](_0x3f5ae7);}}}}['onBeforeRe'+'move'](_0x12cd4c,_0x52cf24){const _0x3cd81a=_0x52cf24['slots'];for(const _0xae5188 in _0x3cd81a)_0x3cd81a[_0xae5188]['overlap']||_0x3cd81a[_0xae5188]['stop']();_0x52cf24['onRemove']();}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this);}}we['_buildAcce'+'ssors'](Kr['prototype'],d0);const lS='simple',cS='animated';class Hi extends me{constructor(_0x163bbe,_0x509753){super(),h(this,'_evtSetMes'+'hes',null),(this['_component']=_0x163bbe,this['_frame']=-0x9b8+-0x1d2d+0x1*0x26e5,this['_sprite']=null,this['_spriteAss'+'et']=null,this['spriteAsse'+'t']=_0x509753['spriteAsse'+'t'],this['name']=_0x509753['name'],this['fps']=_0x509753['fps']||-0x1ca0+-0x8*0x277+0x4*0xc16,this['loop']=_0x509753['loop']||!(0x1cc3+-0x18b5+0x40d*-0x1),this['_playing']=!(-0xfa2*-0x2+-0x17f*-0x6+-0x283d),this['_paused']=!(-0x299*0x1+-0x5cd+-0x2cd*-0x3),this['_time']=-0x7*0x4c9+0x10d2+0x10ad);}get['duration'](){if(this['_sprite']){const _0x99dc04=this['fps']||Number['MIN_VALUE'];return this['_sprite']['frameKeys']['length']/Math['abs'](_0x99dc04);}return-0x1*-0x1c81+-0x1*0x261b+0x99a;}set['frame'](_0x355e01){this['_setFrame'](_0x355e01);const _0x3cbd41=this['fps']||Number['MIN_VALUE'];this['_setTime'](this['_frame']/_0x3cbd41);}get['frame'](){return this['_frame'];}get['isPaused'](){return this['_paused'];}get['isPlaying'](){return this['_playing'];}set['sprite'](_0x4e07fc){var _0x4bccbe;if(this['_sprite']&&((_0x4bccbe=this['_evtSetMes'+'hes'])==null||_0x4bccbe['off'](),this['_evtSetMes'+'hes']=null,this['_sprite']['off']('set:pixels'+'PerUnit',this['_onSpriteP'+'puChanged'],this),this['_sprite']['off']('set:atlas',this['_onSpriteM'+'eshesChang'+'e'],this),this['_sprite']['atlas']&&this['_sprite']['atlas']['off']('set:textur'+'e',this['_onSpriteM'+'eshesChang'+'e'],this)),this['_sprite']=_0x4e07fc,this['_sprite']&&(this['_evtSetMes'+'hes']=this['_sprite']['on']('set:meshes',this['_onSpriteM'+'eshesChang'+'e'],this),this['_sprite']['on']('set:pixels'+'PerUnit',this['_onSpriteP'+'puChanged'],this),this['_sprite']['on']('set:atlas',this['_onSpriteM'+'eshesChang'+'e'],this),this['_sprite']['atlas']&&this['_sprite']['atlas']['on']('set:textur'+'e',this['_onSpriteM'+'eshesChang'+'e'],this)),this['_component']['currentCli'+'p']===this){let _0x47c9c7;!_0x4e07fc||!_0x4e07fc['atlas']?(_0x47c9c7=this['_component']['_meshInsta'+'nce'],_0x47c9c7&&(_0x47c9c7['deletePara'+'meter']('texture_em'+'issiveMap'),_0x47c9c7['deletePara'+'meter']('texture_op'+'acityMap')),this['_component']['_hideModel']()):(_0x4e07fc['atlas']['texture']&&(_0x47c9c7=this['_component']['_meshInsta'+'nce'],_0x47c9c7&&(_0x47c9c7['setParamet'+'er']('texture_em'+'issiveMap',_0x4e07fc['atlas']['texture']),_0x47c9c7['setParamet'+'er']('texture_op'+'acityMap',_0x4e07fc['atlas']['texture'])),this['_component']['enabled']&&this['_component']['entity']['enabled']&&this['_component']['_showModel']()),this['time']&&this['fps']?this['time']=this['time']:this['frame']=this['frame']);}}get['sprite'](){return this['_sprite'];}set['spriteAsse'+'t'](_0x3a8878){const _0x288eb0=this['_component']['system']['app']['assets'];let _0x86d7dd=_0x3a8878;if(_0x3a8878 instanceof pe&&(_0x86d7dd=_0x3a8878['id']),this['_spriteAss'+'et']!==_0x86d7dd){if(this['_spriteAss'+'et']){const _0x593971=_0x288eb0['get'](this['_spriteAss'+'et']);_0x593971&&this['_unbindSpr'+'iteAsset'](_0x593971);}if(this['_spriteAss'+'et']=_0x86d7dd,this['_spriteAss'+'et']){const _0x4aa425=_0x288eb0['get'](this['_spriteAss'+'et']);_0x4aa425?this['_bindSprit'+'eAsset'](_0x4aa425):(this['sprite']=null,_0x288eb0['on']('add:'+this['_spriteAss'+'et'],this['_onSpriteA'+'ssetAdded'],this));}else this['sprite']=null;}}get['spriteAsse'+'t'](){return this['_spriteAss'+'et'];}set['time'](_0x3844bb){this['_setTime'](_0x3844bb),this['_sprite']?this['frame']=Math['min'](this['_sprite']['frameKeys']['length']-(-0x54*0x71+-0x111e+0x177*0x25),Math['floor'](this['_time']*Math['abs'](this['fps']))):this['frame']=0xee7+-0x1616+0x72f;}get['time'](){return this['_time'];}['_onSpriteA'+'ssetAdded'](_0x177624){this['_component']['system']['app']['assets']['off']('add:'+_0x177624['id'],this['_onSpriteA'+'ssetAdded'],this),this['_spriteAss'+'et']===_0x177624['id']&&this['_bindSprit'+'eAsset'](_0x177624);}['_bindSprit'+'eAsset'](_0x1781ab){_0x1781ab['on']('load',this['_onSpriteA'+'ssetLoad'],this),_0x1781ab['on']('remove',this['_onSpriteA'+'ssetRemove'],this),_0x1781ab['resource']?this['_onSpriteA'+'ssetLoad'](_0x1781ab):this['_component']['system']['app']['assets']['load'](_0x1781ab);}['_unbindSpr'+'iteAsset'](_0x4c9503){_0x4c9503&&(_0x4c9503['off']('load',this['_onSpriteA'+'ssetLoad'],this),_0x4c9503['off']('remove',this['_onSpriteA'+'ssetRemove'],this),_0x4c9503['resource']&&!_0x4c9503['resource']['atlas']&&this['_component']['system']['app']['assets']['off']('load:'+_0x4c9503['data']['textureAtl'+'asAsset'],this['_onTexture'+'AtlasLoad'],this));}['_onSpriteA'+'ssetLoad'](_0x4dfb5a){if(!_0x4dfb5a['resource'])this['sprite']=null;else{if(_0x4dfb5a['resource']['atlas'])this['sprite']=_0x4dfb5a['resource'];else{const _0x4358aa=_0x4dfb5a['data']['textureAtl'+'asAsset'],_0x238521=this['_component']['system']['app']['assets'];_0x238521['off']('load:'+_0x4358aa,this['_onTexture'+'AtlasLoad'],this),_0x238521['once']('load:'+_0x4358aa,this['_onTexture'+'AtlasLoad'],this);}}}['_onTexture'+'AtlasLoad'](_0x4d2141){const _0x26a17e=this['_spriteAss'+'et'];_0x26a17e instanceof pe?this['_onSpriteA'+'ssetLoad'](_0x26a17e):this['_onSpriteA'+'ssetLoad'](this['_component']['system']['app']['assets']['get'](_0x26a17e));}['_onSpriteA'+'ssetRemove'](_0x400502){this['sprite']=null;}['_onSpriteM'+'eshesChang'+'e'](){this['_component']['currentCli'+'p']===this&&this['_component']['_showFrame'](this['frame']);}['_onSpriteP'+'puChanged'](){this['_component']['currentCli'+'p']===this&&this['sprite']['renderMode']!==ci&&this['_component']['_showFrame'](this['frame']);}['_update'](_0x3c1668){if(this['fps']===-0x14b*-0x4+-0x43*0x8a+0x1ef2||!this['_playing']||this['_paused']||!this['_sprite'])return;const _0x13b4fd=this['fps']<-0x1*-0x89f+-0x1dff+0x1560?-(0x1*-0x55e+-0x17*0x37+0x1*0xa50):0xf5b+-0x2*-0x8f3+-0x2140,_0x4a6051=this['_time']+_0x3c1668*this['_component']['speed']*_0x13b4fd,_0x5a8af0=this['duration'],_0x310e7e=_0x4a6051>_0x5a8af0||_0x4a6051<0x2398+0x1276+-0x360e;this['_setTime'](_0x4a6051);let _0x5de869=this['frame'];this['_sprite']?_0x5de869=Math['floor'](this['_sprite']['frameKeys']['length']*this['_time']/_0x5a8af0):_0x5de869=0xd5*-0xb+0x51b*-0x1+-0x32*-0x49,_0x5de869!==this['_frame']&&this['_setFrame'](_0x5de869),_0x310e7e&&(this['loop']?(this['fire']('loop'),this['_component']['fire']('loop',this)):(this['_playing']=!(-0x76*-0x1c+0x31d*-0x2+-0x6ad),this['_paused']=!(0x12ca+0xecc+-0x1*0x2195),this['fire']('end'),this['_component']['fire']('end',this)));}['_setTime'](_0x138b26){this['_time']=_0x138b26;const _0x449ff6=this['duration'];this['_time']<0xe1e+-0x40e*-0x9+-0x4*0xca7?this['loop']?this['_time']=this['_time']%_0x449ff6+_0x449ff6:this['_time']=-0x7*-0x24a+-0x17d8+0x16*0x5b:this['_time']>_0x449ff6&&(this['loop']?this['_time']%=_0x449ff6:this['_time']=_0x449ff6);}['_setFrame'](_0x572270){this['_sprite']?this['_frame']=Y['clamp'](_0x572270,-0xc89*0x2+-0xfb1+-0x5*-0x827,this['_sprite']['frameKeys']['length']-(-0x15c7+-0x12a6+0x286e)):this['_frame']=_0x572270,this['_component']['currentCli'+'p']===this&&this['_component']['_showFrame'](this['_frame']);}['_destroy'](){if(this['_spriteAss'+'et']){const _0x52b743=this['_component']['system']['app']['assets'];this['_unbindSpr'+'iteAsset'](_0x52b743['get'](this['_spriteAss'+'et']));}this['_sprite']&&(this['sprite']=null),this['_spriteAss'+'et']&&(this['spriteAsse'+'t']=null);}['play'](){this['_playing']||(this['_playing']=!(-0x2*-0xf8+0xec0+-0x10b0),this['_paused']=!(0x114b+-0x1006+0x12*-0x12),this['frame']=-0x1*0x373+-0x100f+0x1382,this['fire']('play'),this['_component']['fire']('play',this));}['pause'](){!this['_playing']||this['_paused']||(this['_paused']=!(0x6e9+0x975+-0x105e*0x1),this['fire']('pause'),this['_component']['fire']('pause',this));}['resume'](){this['_paused']&&(this['_paused']=!(0x2026+-0x1*0x16ee+-0x7*0x151),this['fire']('resume'),this['_component']['fire']('resume',this));}['stop'](){this['_playing']&&(this['_playing']=!(0x212e+-0x1139*0x2+0x5*0x41),this['_paused']=!(0x1*0x102b+0x1bad+-0x2bd7),this['_time']=-0xb5b+-0x7*-0x3f2+0x1043*-0x1,this['frame']=0x7bf*-0x3+-0x100d+0x274a,this['fire']('stop'),this['_component']['fire']('stop',this));}}h(Hi,'EVENT_PLAY','play'),h(Hi,'EVENT_PAUS'+'E','pause'),h(Hi,'EVENT_RESU'+'ME','resume'),h(Hi,'EVENT_STOP','stop'),h(Hi,'EVENT_END','end'),h(Hi,'EVENT_LOOP','loop');const hS='texture_em'+'issiveMap',dS='texture_op'+'acityMap',fS='material_e'+'missive',uS='material_o'+'pacity',dF='innerOffse'+'t',fF='outerScale',uF='atlasRect';class ur extends we{constructor(_0x55baa6,_0x3dd865){super(_0x55baa6,_0x3dd865),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),(this['_type']=lS,this['_material']=_0x55baa6['defaultMat'+'erial'],this['_color']=new ie(0x1*-0x1b69+-0x22d5+0xc73*0x5,0x598*-0x2+0x7a*0x3b+-0x26b*0x7,-0x707*0x5+0x1154+0x11d0,0x1953+0x183d+-0x318f*0x1),this['_colorUnif'+'orm']=new Float32Array(0x2429*0x1+0x1ca6+-0x40cc),this['_speed']=-0x22cb+-0x9c8*-0x3+-0x4*-0x15d,this['_flipX']=!(-0x24d2+0x550+-0xa81*-0x3),this['_flipY']=!(0x1f8e+0x19f+0x304*-0xb),this['_width']=-0x1f42+0x68a+0x18b9,this['_height']=-0x4*-0x2cd+0x1c2d+0x48*-0x8c,this['_drawOrder']=0xe43+0x18*0x188+-0x3303,this['_layers']=[er],this['_outerScal'+'e']=new J(-0xd*-0xdf+0x6*0x137+-0x129c,0x1*0x5db+-0x1*0x8dd+0x303),this['_outerScal'+'eUniform']=new Float32Array(0x4df*-0x1+0xc2d+0x4*-0x1d3),this['_innerOffs'+'et']=new re(),this['_innerOffs'+'etUniform']=new Float32Array(0x1e6d+0xf3f+-0x79c*0x6),this['_atlasRect']=new re(),this['_atlasRect'+'Uniform']=new Float32Array(-0x7df+0x1e3d+0x165a*-0x1),this['_batchGrou'+'pId']=-(-0x12ef+-0x22d2*0x1+0x35c2),this['_batchGrou'+'p']=null,this['_node']=new Ie(),this['_model']=new sr(),this['_model']['graph']=this['_node'],this['_meshInsta'+'nce']=null,_0x3dd865['addChild'](this['_model']['graph']),this['_model']['_entity']=_0x3dd865,this['_updateAab'+'bFunc']=this['_updateAab'+'b']['bind'](this),this['_addedMode'+'l']=!(-0x20e4+-0x234b+0x886*0x8),this['_autoPlayC'+'lip']=null,this['_clips']={},this['_defaultCl'+'ip']=new Hi(this,{'name':this['entity']['name'],'fps':0x0,'loop':!(-0xd9+0xd03*0x1+-0xc29),'spriteAsset':null}),this['_currentCl'+'ip']=this['_defaultCl'+'ip']);}set['type'](_0x448e06){this['_type']!==_0x448e06&&(this['_type']=_0x448e06,this['_type']===lS?(this['stop'](),this['_currentCl'+'ip']=this['_defaultCl'+'ip'],this['enabled']&&this['entity']['enabled']&&(this['_currentCl'+'ip']['frame']=this['frame'],this['_currentCl'+'ip']['sprite']?this['_showModel']():this['_hideModel']())):this['_type']===cS&&(this['stop'](),this['_autoPlayC'+'lip']&&this['_tryAutoPl'+'ay'](),this['_currentCl'+'ip']&&this['_currentCl'+'ip']['isPlaying']&&this['enabled']&&this['entity']['enabled']?this['_showModel']():this['_hideModel']()));}get['type'](){return this['_type'];}set['frame'](_0x3e4e62){this['_currentCl'+'ip']['frame']=_0x3e4e62;}get['frame'](){return this['_currentCl'+'ip']['frame'];}set['spriteAsse'+'t'](_0x41c9bf){this['_defaultCl'+'ip']['spriteAsse'+'t']=_0x41c9bf;}get['spriteAsse'+'t'](){return this['_defaultCl'+'ip']['_spriteAss'+'et'];}set['sprite'](_0x45392b){this['_currentCl'+'ip']['sprite']=_0x45392b;}get['sprite'](){return this['_currentCl'+'ip']['sprite'];}set['material'](_0x347159){this['_material']=_0x347159,this['_meshInsta'+'nce']&&(this['_meshInsta'+'nce']['material']=_0x347159);}get['material'](){return this['_material'];}set['color'](_0x715810){this['_color']['r']=_0x715810['r'],this['_color']['g']=_0x715810['g'],this['_color']['b']=_0x715810['b'],this['_meshInsta'+'nce']&&(this['_colorUnif'+'orm'][-0x1f83+0x172f+0x854]=this['_color']['r'],this['_colorUnif'+'orm'][0x2642+-0x1*0x2063+-0x5de]=this['_color']['g'],this['_colorUnif'+'orm'][-0x14*-0x192+-0x35*0x11+-0x3*0x94b]=this['_color']['b'],this['_meshInsta'+'nce']['setParamet'+'er'](fS,this['_colorUnif'+'orm']));}get['color'](){return this['_color'];}set['opacity'](_0x52b63f){this['_color']['a']=_0x52b63f,this['_meshInsta'+'nce']&&this['_meshInsta'+'nce']['setParamet'+'er'](uS,_0x52b63f);}get['opacity'](){return this['_color']['a'];}set['clips'](_0x548a29){if(!_0x548a29){for(const _0x5afa46 in this['_clips'])this['removeClip'](_0x5afa46);return;}for(const _0x53a56b in this['_clips']){let _0x321cb0=!(-0x72*0x9+0x17*-0x1f+0x6cc);for(const _0x5e3e44 in _0x548a29)if(_0x548a29[_0x5e3e44]['name']===_0x53a56b){_0x321cb0=!(0x5*-0x2c1+0x34*0x5b+-0x4b7),this['_clips'][_0x53a56b]['fps']=_0x548a29[_0x5e3e44]['fps'],this['_clips'][_0x53a56b]['loop']=_0x548a29[_0x5e3e44]['loop'],_0x548a29[_0x5e3e44]['hasOwnProp'+'erty']('sprite')?this['_clips'][_0x53a56b]['sprite']=_0x548a29[_0x5e3e44]['sprite']:_0x548a29[_0x5e3e44]['hasOwnProp'+'erty']('spriteAsse'+'t')&&(this['_clips'][_0x53a56b]['spriteAsse'+'t']=_0x548a29[_0x5e3e44]['spriteAsse'+'t']);break;}_0x321cb0||this['removeClip'](_0x53a56b);}for(const _0x30bbb3 in _0x548a29)this['_clips'][_0x548a29[_0x30bbb3]['name']]||this['addClip'](_0x548a29[_0x30bbb3]);this['_autoPlayC'+'lip']&&this['_tryAutoPl'+'ay'](),(!this['_currentCl'+'ip']||!this['_currentCl'+'ip']['sprite'])&&this['_hideModel']();}get['clips'](){return this['_clips'];}get['currentCli'+'p'](){return this['_currentCl'+'ip'];}set['speed'](_0x344b1b){this['_speed']=_0x344b1b;}get['speed'](){return this['_speed'];}set['flipX'](_0x26ede1){this['_flipX']!==_0x26ede1&&(this['_flipX']=_0x26ede1,this['_updateTra'+'nsform']());}get['flipX'](){return this['_flipX'];}set['flipY'](_0x39fd18){this['_flipY']!==_0x39fd18&&(this['_flipY']=_0x39fd18,this['_updateTra'+'nsform']());}get['flipY'](){return this['_flipY'];}set['width'](_0xa6bd45){_0xa6bd45!==this['_width']&&(this['_width']=_0xa6bd45,this['_outerScal'+'e']['x']=this['_width'],this['sprite']&&(this['sprite']['renderMode']===Mt||this['sprite']['renderMode']===Pt)&&this['_updateTra'+'nsform']());}get['width'](){return this['_width'];}set['height'](_0x5c1273){_0x5c1273!==this['_height']&&(this['_height']=_0x5c1273,this['_outerScal'+'e']['y']=this['height'],this['sprite']&&(this['sprite']['renderMode']===Mt||this['sprite']['renderMode']===Pt)&&this['_updateTra'+'nsform']());}get['height'](){return this['_height'];}set['batchGroup'+'Id'](_0x3fedea){var _0x5385d3,_0x5d1160;if(this['_batchGrou'+'pId']===_0x3fedea)return;const _0x18f43d=this['_batchGrou'+'pId'];this['_batchGrou'+'pId']=_0x3fedea,this['entity']['enabled']&&_0x18f43d>=-0x157*0x2+0x9*0x26+0x2b*0x8&&((_0x5385d3=this['system']['app']['batcher'])==null||_0x5385d3['remove'](St['SPRITE'],_0x18f43d,this['entity'])),this['entity']['enabled']&&_0x3fedea>=0x1*-0x18df+-0x1681+0x17b*0x20?(_0x5d1160=this['system']['app']['batcher'])==null||_0x5d1160['insert'](St['SPRITE'],_0x3fedea,this['entity']):_0x18f43d>=0x10*0x1ec+-0x177d*-0x1+-0x1*0x363d&&this['_currentCl'+'ip']&&this['_currentCl'+'ip']['sprite']&&this['enabled']&&this['entity']['enabled']&&this['_showModel']();}get['batchGroup'+'Id'](){return this['_batchGrou'+'pId'];}set['autoPlayCl'+'ip'](_0x428480){this['_autoPlayC'+'lip']=_0x428480 instanceof Hi?_0x428480['name']:_0x428480,this['_tryAutoPl'+'ay']();}get['autoPlayCl'+'ip'](){return this['_autoPlayC'+'lip'];}set['drawOrder'](_0x27e2d2){this['_drawOrder']=_0x27e2d2,this['_meshInsta'+'nce']&&(this['_meshInsta'+'nce']['drawOrder']=_0x27e2d2);}get['drawOrder'](){return this['_drawOrder'];}set['layers'](_0x1cf294){this['_addedMode'+'l']&&this['_hideModel'](),this['_layers']=_0x1cf294,this['_meshInsta'+'nce']&&this['enabled']&&this['entity']['enabled']&&this['_showModel']();}get['layers'](){return this['_layers'];}get['aabb'](){return this['_meshInsta'+'nce']?this['_meshInsta'+'nce']['aabb']:null;}['onEnable'](){var _0x238eef;const _0x1bf258=this['system']['app'],_0x2310e5=_0x1bf258['scene'],_0x3c47e6=_0x2310e5['layers'];this['_evtLayers'+'Changed']=_0x2310e5['on']('set:layers',this['_onLayersC'+'hanged'],this),_0x3c47e6&&(this['_evtLayerA'+'dded']=_0x3c47e6['on']('add',this['_onLayerAd'+'ded'],this),this['_evtLayerR'+'emoved']=_0x3c47e6['on']('remove',this['_onLayerRe'+'moved'],this)),this['_showModel'](),this['_autoPlayC'+'lip']&&this['_tryAutoPl'+'ay'](),this['_batchGrou'+'pId']>=-0x2416+-0x24c1+0x1*0x48d7&&((_0x238eef=_0x1bf258['batcher'])==null||_0x238eef['insert'](St['SPRITE'],this['_batchGrou'+'pId'],this['entity']));}['onDisable'](){var _0x234e5c,_0x95c733,_0xd761ca,_0x505bdb;const _0x5841a7=this['system']['app'],_0x489571=_0x5841a7['scene']['layers'];(_0x234e5c=this['_evtLayers'+'Changed'])==null||_0x234e5c['off'](),this['_evtLayers'+'Changed']=null,_0x489571&&((_0x95c733=this['_evtLayerA'+'dded'])==null||_0x95c733['off'](),this['_evtLayerA'+'dded']=null,(_0xd761ca=this['_evtLayerR'+'emoved'])==null||_0xd761ca['off'](),this['_evtLayerR'+'emoved']=null),this['stop'](),this['_hideModel'](),this['_batchGrou'+'pId']>=-0xd1a+0x8db+0x43f&&((_0x505bdb=_0x5841a7['batcher'])==null||_0x505bdb['remove'](St['SPRITE'],this['_batchGrou'+'pId'],this['entity']));}['onDestroy'](){var _0x27db98;this['_currentCl'+'ip']=null,this['_defaultCl'+'ip']&&(this['_defaultCl'+'ip']['_destroy'](),this['_defaultCl'+'ip']=null);for(const _0x48c01a in this['_clips'])this['_clips'][_0x48c01a]['_destroy']();this['_clips']=null,this['_hideModel'](),this['_model']=null,(_0x27db98=this['_node'])==null||_0x27db98['remove'](),this['_node']=null,this['_meshInsta'+'nce']&&(this['_meshInsta'+'nce']['material']=null,this['_meshInsta'+'nce']['mesh']=null,this['_meshInsta'+'nce']=null);}['_showModel'](){if(this['_addedMode'+'l']||!this['_meshInsta'+'nce'])return;const _0x20419d=[this['_meshInsta'+'nce']];for(let _0x1811d9=-0x172b+0xb*-0x13d+0x115*0x22,_0x36c58c=this['_layers']['length'];_0x1811d9<_0x36c58c;_0x1811d9++){const _0x2252bc=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['_layers'][_0x1811d9]);_0x2252bc&&_0x2252bc['addMeshIns'+'tances'](_0x20419d);}this['_addedMode'+'l']=!(0x906+0x217+0x239*-0x5);}['_hideModel'](){if(!this['_addedMode'+'l']||!this['_meshInsta'+'nce'])return;const _0x436412=[this['_meshInsta'+'nce']];for(let _0x4ec598=0x802+-0x1*-0x25ff+-0x2e01,_0x347c38=this['_layers']['length'];_0x4ec598<_0x347c38;_0x4ec598++){const _0x4facde=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['_layers'][_0x4ec598]);_0x4facde&&_0x4facde['removeMesh'+'Instances'](_0x436412);}this['_addedMode'+'l']=!(0xb0b+-0xb3*-0x2b+-0x11*0x26b);}['_showFrame'](_0x31b032){if(!this['sprite'])return;const _0x367e95=this['sprite']['meshes'][_0x31b032];if(!_0x367e95){this['_meshInsta'+'nce']&&(this['_meshInsta'+'nce']['mesh']=null,this['_meshInsta'+'nce']['visible']=!(0x89*0x47+0x6fb*-0x1+-0x1*0x1f03));return;}let _0x43617f;if(this['sprite']['renderMode']===Pt?_0x43617f=this['system']['default9Sl'+'icedMateri'+'alSlicedMo'+'de']:this['sprite']['renderMode']===Mt?_0x43617f=this['system']['default9Sl'+'icedMateri'+'alTiledMod'+'e']:_0x43617f=this['system']['defaultMat'+'erial'],this['_meshInsta'+'nce']||(this['_meshInsta'+'nce']=new He(_0x367e95,this['_material'],this['_node']),this['_meshInsta'+'nce']['castShadow']=!(0x4*0x95f+-0x1eb*0x2+-0x21a5),this['_meshInsta'+'nce']['receiveSha'+'dow']=!(-0x1*0x1ac9+-0xa*-0x347+-0x4*0x17f),this['_meshInsta'+'nce']['drawOrder']=this['_drawOrder'],this['_model']['meshInstan'+'ces']['push'](this['_meshInsta'+'nce']),this['_colorUnif'+'orm'][0x1363+0x2572+0x1*-0x38d5]=this['_color']['r'],this['_colorUnif'+'orm'][-0x8*0x1a9+-0xb*0x162+0x1c7f]=this['_color']['g'],this['_colorUnif'+'orm'][0x8db*-0x3+-0xe04+0x2897]=this['_color']['b'],this['_meshInsta'+'nce']['setParamet'+'er'](fS,this['_colorUnif'+'orm']),this['_meshInsta'+'nce']['setParamet'+'er'](uS,this['_color']['a']),this['enabled']&&this['entity']['enabled']&&this['_showModel']()),this['_meshInsta'+'nce']['material']!==_0x43617f&&(this['_meshInsta'+'nce']['material']=_0x43617f),this['_meshInsta'+'nce']['mesh']!==_0x367e95&&(this['_meshInsta'+'nce']['mesh']=_0x367e95,this['_meshInsta'+'nce']['visible']=!(0xd20+0x1671+0x1*-0x2391),this['_meshInsta'+'nce']['_aabbVer']=-(0x1f12+0xdfd*-0x1+-0x88a*0x2)),this['sprite']['atlas']&&this['sprite']['atlas']['texture']?(this['_meshInsta'+'nce']['setParamet'+'er'](hS,this['sprite']['atlas']['texture']),this['_meshInsta'+'nce']['setParamet'+'er'](dS,this['sprite']['atlas']['texture'])):(this['_meshInsta'+'nce']['deletePara'+'meter'](hS),this['_meshInsta'+'nce']['deletePara'+'meter'](dS)),this['sprite']['atlas']&&(this['sprite']['renderMode']===Pt||this['sprite']['renderMode']===Mt)){this['_meshInsta'+'nce']['_updateAab'+'bFunc']=this['_updateAab'+'bFunc'];const _0x3a29c4=this['sprite']['atlas']['frames'][this['sprite']['frameKeys'][_0x31b032]];if(_0x3a29c4){const _0x2ac774=(0x2126*-0x1+-0x394+-0x92f*-0x4)/_0x3a29c4['rect']['z'],_0x1aafd9=(-0x185*-0x7+-0x10+-0xa91)/_0x3a29c4['rect']['w'];this['_innerOffs'+'et']['set'](_0x3a29c4['border']['x']*_0x2ac774,_0x3a29c4['border']['y']*_0x1aafd9,_0x3a29c4['border']['z']*_0x2ac774,_0x3a29c4['border']['w']*_0x1aafd9);const _0x134e98=this['sprite']['atlas']['texture'];this['_atlasRect']['set'](_0x3a29c4['rect']['x']/_0x134e98['width'],_0x3a29c4['rect']['y']/_0x134e98['height'],_0x3a29c4['rect']['z']/_0x134e98['width'],_0x3a29c4['rect']['w']/_0x134e98['height']);}else this['_innerOffs'+'et']['set'](-0xbdc+-0x59f*-0x1+0x63d,-0x39b+0x48*-0x53+0x1af3,0x5*0x453+-0x88+-0x1517,-0x1*-0x713+-0x17*-0x6b+-0x10b0);this['_innerOffs'+'etUniform'][-0xc87+-0x1ac6+-0x1*-0x274d]=this['_innerOffs'+'et']['x'],this['_innerOffs'+'etUniform'][-0x145f+0xa88+0x9d8]=this['_innerOffs'+'et']['y'],this['_innerOffs'+'etUniform'][-0x3fb*-0x1+0x8f4+-0xced*0x1]=this['_innerOffs'+'et']['z'],this['_innerOffs'+'etUniform'][0x27a*0xd+0x5*-0x624+-0x17b]=this['_innerOffs'+'et']['w'],this['_meshInsta'+'nce']['setParamet'+'er'](dF,this['_innerOffs'+'etUniform']),this['_atlasRect'+'Uniform'][-0x5+-0x1*0x8a1+-0x171*-0x6]=this['_atlasRect']['x'],this['_atlasRect'+'Uniform'][-0x3d*-0x83+-0x1447+-0x137*0x9]=this['_atlasRect']['y'],this['_atlasRect'+'Uniform'][-0x575+-0x1b4e+0x20c5]=this['_atlasRect']['z'],this['_atlasRect'+'Uniform'][-0xa1*0x3+0x1*0x1492+-0x12ac]=this['_atlasRect']['w'],this['_meshInsta'+'nce']['setParamet'+'er'](uF,this['_atlasRect'+'Uniform']);}else this['_meshInsta'+'nce']['_updateAab'+'bFunc']=null;this['_updateTra'+'nsform']();}['_updateTra'+'nsform'](){let _0x1d3310=this['flipX']?-(0x25f2+-0x13b*0x19+0x1*-0x72e):-0x1b64*0x1+-0x192a+0x348f,_0x5524e9=this['flipY']?-(0x1*-0x199+0x91+0x35*0x5):-0x1b24+-0x1*0x83+0xb1*0x28,_0x557a33=0x1*0x6da+-0x5*0xa7+-0x397,_0x582b57=-0x2*0xf51+0x243*0x3+0x17d9;if(this['sprite']&&(this['sprite']['renderMode']===Pt||this['sprite']['renderMode']===Mt)){let _0xf30d1e=0x661+0x238a+-0x29ea,_0x43b11c=-0xc3e*0x1+-0x2*-0x59f+0x101;if(this['sprite']['atlas']){const _0x46fd0=this['sprite']['atlas']['frames'][this['sprite']['frameKeys'][this['frame']]];_0x46fd0&&(_0xf30d1e=_0x46fd0['rect']['z'],_0x43b11c=_0x46fd0['rect']['w'],_0x557a33=(-0x2701+-0x6aa*0x4+0x41a9+0.5-_0x46fd0['pivot']['x'])*this['_width'],_0x582b57=(0xcee+0x719+0x1407*-0x1+0.5-_0x46fd0['pivot']['y'])*this['_height']);}const _0x4c6d18=_0xf30d1e/this['sprite']['pixelsPerU'+'nit'],_0x47de52=_0x43b11c/this['sprite']['pixelsPerU'+'nit'];this['_outerScal'+'e']['set'](Math['max'](this['_width'],this['_innerOffs'+'et']['x']*_0x4c6d18),Math['max'](this['_height'],this['_innerOffs'+'et']['y']*_0x47de52)),_0x1d3310*=_0x4c6d18,_0x5524e9*=_0x47de52,this['_outerScal'+'e']['x']/=_0x4c6d18,this['_outerScal'+'e']['y']/=_0x47de52,_0x1d3310*=Y['clamp'](this['_width']/(this['_innerOffs'+'et']['x']*_0x4c6d18),-0x1342+0x1cd1+-0x98f+0.0001,-0x1ea8+0x1*-0x111f+0x8b*0x58),_0x5524e9*=Y['clamp'](this['_height']/(this['_innerOffs'+'et']['y']*_0x47de52),-0x4b3*0x7+0x1928+0x7bd*0x1+0.0001,-0x1273*0x2+-0x18+-0xb*-0x35d),this['_meshInsta'+'nce']&&(this['_outerScal'+'eUniform'][0x1dfe+0x577*0x6+-0x148*0x31]=this['_outerScal'+'e']['x'],this['_outerScal'+'eUniform'][0x10b6+0x4db+-0x1590]=this['_outerScal'+'e']['y'],this['_meshInsta'+'nce']['setParamet'+'er'](fF,this['_outerScal'+'eUniform']));}this['_node']['setLocalSc'+'ale'](_0x1d3310,_0x5524e9,0x3ac*-0x4+-0xc7*-0x1b+-0x64c),this['_node']['setLocalPo'+'sition'](_0x557a33,_0x582b57,-0xf82+0x2*-0x57b+-0x4*-0x69e);}['_updateAab'+'b'](_0x16caf8){return _0x16caf8['center']['set'](-0xf3*0x25+-0x2576+0x4895,0x1da0+0x38d+-0x3*0xb0f,0x4*-0x19c+0x73*0x19+0x199*-0x3),_0x16caf8['halfExtent'+'s']['set'](this['_outerScal'+'e']['x']*(-0x39b*0x6+-0x161*-0x17+-0xa15+0.5),this['_outerScal'+'e']['y']*(0xd*0x14d+0x184*0x2+-0x13f1*0x1+0.5),0x1*0x8a9+-0x8d0+0x27+0.001),_0x16caf8['setFromTra'+'nsformedAa'+'bb'](_0x16caf8,this['_node']['getWorldTr'+'ansform']()),_0x16caf8;}['_tryAutoPl'+'ay'](){if(!this['_autoPlayC'+'lip']||this['type']!==cS)return;const _0x475adb=this['_clips'][this['_autoPlayC'+'lip']];_0x475adb&&!_0x475adb['isPlaying']&&(!this['_currentCl'+'ip']||!this['_currentCl'+'ip']['isPlaying'])&&this['enabled']&&this['entity']['enabled']&&this['play'](_0x475adb['name']);}['_onLayersC'+'hanged'](_0x132ab0,_0x48f767){_0x132ab0['off']('add',this['onLayerAdd'+'ed'],this),_0x132ab0['off']('remove',this['onLayerRem'+'oved'],this),_0x48f767['on']('add',this['onLayerAdd'+'ed'],this),_0x48f767['on']('remove',this['onLayerRem'+'oved'],this),this['enabled']&&this['entity']['enabled']&&this['_showModel']();}['_onLayerAd'+'ded'](_0x11b826){this['layers']['indexOf'](_0x11b826['id'])<-0x1*0x13af+0xb82*0x2+-0x355||this['_addedMode'+'l']&&this['enabled']&&this['entity']['enabled']&&this['_meshInsta'+'nce']&&_0x11b826['addMeshIns'+'tances']([this['_meshInsta'+'nce']]);}['_onLayerRe'+'moved'](_0x1661e0){!this['_meshInsta'+'nce']||this['layers']['indexOf'](_0x1661e0['id'])<0x1b*-0x35+0x129*-0x8+0xedf||_0x1661e0['removeMesh'+'Instances']([this['_meshInsta'+'nce']]);}['removeMode'+'lFromLayer'+'s'](){for(let _0x2f4d06=0x5*0x7+-0xa85+0xa62;_0x2f4d06<this['layers']['length'];_0x2f4d06++){const _0x1ae0c4=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x2f4d06]);_0x1ae0c4&&_0x1ae0c4['removeMesh'+'Instances']([this['_meshInsta'+'nce']]);}}['addClip'](_0x273db8){const _0x3454a7=new Hi(this,{'name':_0x273db8['name'],'fps':_0x273db8['fps'],'loop':_0x273db8['loop'],'spriteAsset':_0x273db8['spriteAsse'+'t']});return this['_clips'][_0x273db8['name']]=_0x3454a7,_0x3454a7['name']&&_0x3454a7['name']===this['_autoPlayC'+'lip']&&this['_tryAutoPl'+'ay'](),_0x3454a7;}['removeClip'](_0x27902e){delete this['_clips'][_0x27902e];}['clip'](_0x4e6766){return this['_clips'][_0x4e6766];}['play'](_0x4ddb8f){const _0x5c042a=this['_clips'][_0x4ddb8f],_0x23eee1=this['_currentCl'+'ip'];return _0x23eee1&&_0x23eee1!==_0x5c042a&&(_0x23eee1['_playing']=!(-0x25*-0x57+-0xc3+0xbcf*-0x1)),this['_currentCl'+'ip']=_0x5c042a,this['_currentCl'+'ip']?(this['_currentCl'+'ip']=_0x5c042a,this['_currentCl'+'ip']['play']()):w['warn']('Trying\x20to\x20'+'play\x20sprit'+'e\x20animatio'+'n\x20'+_0x4ddb8f+('\x20which\x20doe'+'s\x20not\x20exis'+'t.')),_0x5c042a;}['pause'](){this['_currentCl'+'ip']!==this['_defaultCl'+'ip']&&this['_currentCl'+'ip']['isPlaying']&&this['_currentCl'+'ip']['pause']();}['resume'](){this['_currentCl'+'ip']!==this['_defaultCl'+'ip']&&this['_currentCl'+'ip']['isPaused']&&this['_currentCl'+'ip']['resume']();}['stop'](){this['_currentCl'+'ip']!==this['_defaultCl'+'ip']&&this['_currentCl'+'ip']['stop']();}}h(ur,'EVENT_PLAY','play'),h(ur,'EVENT_PAUS'+'E','pause'),h(ur,'EVENT_RESU'+'ME','resume'),h(ur,'EVENT_STOP','stop'),h(ur,'EVENT_END','end'),h(ur,'EVENT_LOOP','loop');class pF{constructor(){this['enabled']=!(-0x4*-0x4d7+-0x2a*0x19+0x1f*-0x7e);}}const f0=['enabled'];class mF extends ct{constructor(_0x468358){super(_0x468358),this['id']='sprite',this['ComponentT'+'ype']=ur,this['DataType']=pF,this['schema']=f0,this['_defaultTe'+'xture']=null,this['_defaultMa'+'terial']=null,this['_default9S'+'licedMater'+'ialSlicedM'+'ode']=null,this['_default9S'+'licedMater'+'ialTiledMo'+'de']=null,this['app']['systems']['on']('update',this['onUpdate'],this),this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this);}set['defaultMat'+'erial'](_0x37718b){this['_defaultMa'+'terial']=_0x37718b;}get['defaultMat'+'erial'](){if(!this['_defaultMa'+'terial']){const _0x3bef10=new _e(this['app']['graphicsDe'+'vice'],{'width':0x1,'height':0x1,'format':_s,'name':'sprite'}),_0x288292=new Uint8Array(_0x3bef10['lock']());_0x288292[-0x3*-0x691+-0xb0f*-0x1+-0x1ec2]=_0x288292[-0xe6b*-0x2+-0x17c6+-0x50f]=_0x288292[0x1*0x202d+0x4b5*-0x7+0x19*0x8]=_0x288292[0x136e+-0x1727*0x1+0x2*0x1de]=0x6*-0x236+-0x1991+0x1*0x27d4,_0x3bef10['unlock']();const _0x3894ef=new Ut();_0x3894ef['diffuse']['set'](0x23b6+0x25c*0x1+-0x2612,0x1*0x25df+-0x1*0xa34+-0x1bab,-0xe6e+-0x1a86+0xa3d*0x4),_0x3894ef['emissive']['set'](-0x1cd0+0x1*0x1ace+0x203,-0xeb8+0xc34+0x285*0x1,-0x493+-0x8c1+-0xd55*-0x1),_0x3894ef['emissiveMa'+'p']=_0x3bef10,_0x3894ef['opacityMap']=_0x3bef10,_0x3894ef['opacityMap'+'Channel']='a',_0x3894ef['useLightin'+'g']=!(-0x150*0x1a+0x36*-0x25+0x5*0x863),_0x3894ef['useTonemap']=!(0xa9a+0x86d+-0x1306),_0x3894ef['useFog']=!(0x1d9f+-0x1a8a+0x314*-0x1),_0x3894ef['useSkybox']=!(0x5*0x168+-0x510+0x1*-0x1f7),_0x3894ef['blendType']=Gn,_0x3894ef['depthWrite']=!(-0x901*0x1+0x1*0x1ea1+0xf*-0x171),_0x3894ef['pixelSnap']=!(0x1a*0xf6+-0xb*-0xd5+-0x22*0x101),_0x3894ef['cull']=bt,_0x3894ef['update'](),this['_defaultTe'+'xture']=_0x3bef10,this['_defaultMa'+'terial']=_0x3894ef;}return this['_defaultMa'+'terial'];}set['default9Sl'+'icedMateri'+'alSlicedMo'+'de'](_0x269832){this['_default9S'+'licedMater'+'ialSlicedM'+'ode']=_0x269832;}get['default9Sl'+'icedMateri'+'alSlicedMo'+'de'](){if(!this['_default9S'+'licedMater'+'ialSlicedM'+'ode']){const _0x1af9d1=this['defaultMat'+'erial']['clone']();_0x1af9d1['nineSliced'+'Mode']=Pt,_0x1af9d1['update'](),this['_default9S'+'licedMater'+'ialSlicedM'+'ode']=_0x1af9d1;}return this['_default9S'+'licedMater'+'ialSlicedM'+'ode'];}set['default9Sl'+'icedMateri'+'alTiledMod'+'e'](_0x5c094d){this['_default9S'+'licedMater'+'ialTiledMo'+'de']=_0x5c094d;}get['default9Sl'+'icedMateri'+'alTiledMod'+'e'](){if(!this['_default9S'+'licedMater'+'ialTiledMo'+'de']){const _0x41397e=this['defaultMat'+'erial']['clone']();_0x41397e['nineSliced'+'Mode']=Mt,_0x41397e['update'](),this['_default9S'+'licedMater'+'ialTiledMo'+'de']=_0x41397e;}return this['_default9S'+'licedMater'+'ialTiledMo'+'de'];}['destroy'](){super['destroy'](),this['app']['systems']['off']('update',this['onUpdate'],this),this['_defaultTe'+'xture']&&(this['_defaultTe'+'xture']['destroy'](),this['_defaultTe'+'xture']=null);}['initialize'+'ComponentD'+'ata'](_0x5d99c0,_0x2e1907,_0x49d2a5){if(_0x2e1907['enabled']!==void(0xc70+-0x4b*0x41+0x1*0x69b)&&(_0x5d99c0['enabled']=_0x2e1907['enabled']),_0x5d99c0['type']=_0x2e1907['type'],_0x2e1907['layers']&&Array['isArray'](_0x2e1907['layers'])&&(_0x5d99c0['layers']=_0x2e1907['layers']['slice'](-0x1d35+-0x2b1+0x1fe6)),_0x2e1907['drawOrder']!==void(-0x1750+0x3*-0xa2e+0x2*0x1aed)&&(_0x5d99c0['drawOrder']=_0x2e1907['drawOrder']),_0x2e1907['color']!==void(0x12d*0xd+-0x16b6+0x76d)&&(_0x2e1907['color']instanceof ie?_0x5d99c0['color']['set'](_0x2e1907['color']['r'],_0x2e1907['color']['g'],_0x2e1907['color']['b'],_0x2e1907['opacity']??-0x1b89+-0x2*0x1080+0x17a*0x29):_0x5d99c0['color']['set'](_0x2e1907['color'][0x1be*-0x15+-0x1*-0x1fe1+0x4b5],_0x2e1907['color'][-0x3*-0x97c+0x1*-0xa88+-0x1*0x11eb],_0x2e1907['color'][0x151*0x17+-0x18cb*0x1+-0x2bd*0x2],_0x2e1907['opacity']??-0x3b*-0x5e+-0x164f+0xa6*0x1),_0x5d99c0['color']=_0x5d99c0['color']),_0x2e1907['opacity']!==void(-0x119*0x1b+-0x9a*0x2c+-0x1*-0x381b)&&(_0x5d99c0['opacity']=_0x2e1907['opacity']),_0x2e1907['flipX']!==void(0x225e+-0xea3+-0x13bb)&&(_0x5d99c0['flipX']=_0x2e1907['flipX']),_0x2e1907['flipY']!==void(0x1*-0x24fb+-0x96*0xb+-0x2b6d*-0x1)&&(_0x5d99c0['flipY']=_0x2e1907['flipY']),_0x2e1907['width']!==void(-0x225c+0x25e7+-0x1*0x38b)&&(_0x5d99c0['width']=_0x2e1907['width']),_0x2e1907['height']!==void(-0x5f9*-0x1+-0x17d3+-0xa*-0x1c9)&&(_0x5d99c0['height']=_0x2e1907['height']),_0x2e1907['spriteAsse'+'t']!==void(0x1591+0x1c*0x108+-0x3271)&&(_0x5d99c0['spriteAsse'+'t']=_0x2e1907['spriteAsse'+'t']),_0x2e1907['sprite']&&(_0x5d99c0['sprite']=_0x2e1907['sprite']),_0x2e1907['frame']!==void(-0x1b*-0x59+0x2013+-0x2976)&&(_0x5d99c0['frame']=_0x2e1907['frame']),_0x2e1907['clips']){for(const _0x4a4580 in _0x2e1907['clips'])_0x5d99c0['addClip'](_0x2e1907['clips'][_0x4a4580]);}_0x2e1907['speed']!==void(-0x1*0x17ec+-0x213*0x2+0x2*0xe09)&&(_0x5d99c0['speed']=_0x2e1907['speed']),_0x2e1907['autoPlayCl'+'ip']&&(_0x5d99c0['autoPlayCl'+'ip']=_0x2e1907['autoPlayCl'+'ip']),_0x5d99c0['batchGroup'+'Id']=_0x2e1907['batchGroup'+'Id']===void(-0x1*0xc73+-0x9c3+0x1636)||_0x2e1907['batchGroup'+'Id']===null?-(-0x231d+0x1*0x941+0x19dd):_0x2e1907['batchGroup'+'Id'],super['initialize'+'ComponentD'+'ata'](_0x5d99c0,_0x2e1907,_0x49d2a5);}['cloneCompo'+'nent'](_0x423fc0,_0x529255){const _0x3729f1=_0x423fc0['sprite'];return this['addCompone'+'nt'](_0x529255,{'enabled':_0x3729f1['enabled'],'type':_0x3729f1['type'],'spriteAsset':_0x3729f1['spriteAsse'+'t'],'sprite':_0x3729f1['sprite'],'width':_0x3729f1['width'],'height':_0x3729f1['height'],'frame':_0x3729f1['frame'],'color':_0x3729f1['color']['clone'](),'opacity':_0x3729f1['opacity'],'flipX':_0x3729f1['flipX'],'flipY':_0x3729f1['flipY'],'speed':_0x3729f1['speed'],'clips':_0x3729f1['clips'],'autoPlayClip':_0x3729f1['autoPlayCl'+'ip'],'batchGroupId':_0x3729f1['batchGroup'+'Id'],'drawOrder':_0x3729f1['drawOrder'],'layers':_0x3729f1['layers']['slice'](0x20cf+0x22ad+-0x437c)});}['onUpdate'](_0x32b01e){const _0x593a98=this['store'];for(const _0x2432dc in _0x593a98)if(_0x593a98['hasOwnProp'+'erty'](_0x2432dc)){const _0xf0c7b4=_0x593a98[_0x2432dc];if(_0xf0c7b4['data']['enabled']&&_0xf0c7b4['entity']['enabled']){const _0x2350c8=_0xf0c7b4['entity']['sprite'];_0x2350c8['_currentCl'+'ip']&&_0x2350c8['_currentCl'+'ip']['_update'](_0x32b01e);}}}['onBeforeRe'+'move'](_0x380d77,_0x5c92c6){_0x5c92c6['onDestroy']();}}we['_buildAcce'+'ssors'](ur['prototype'],f0);class _n extends we{constructor(_0x499b14,_0x47fb7e){super(_0x499b14,_0x47fb7e),this['_oldState']=!(-0xef8+0x178c+-0x894),this['_size']=new D(),this['on']('set_enable'+'d',this['_onSetEnab'+'led'],this);}set['size'](_0x256843){_0x256843 instanceof D?this['_size']['copy'](_0x256843):_0x256843 instanceof Array&&_0x256843['length']>=0x6*0x61+-0x7a8+0x565&&this['size']['set'](_0x256843[0x9*-0x1ee+0xd17*0x1+-0x1*-0x447],_0x256843[-0x4*0x2ed+-0x379*-0x1+0x2*0x41e],_0x256843[0x41*-0x10+0x25*0xfd+0x3b*-0x8d]);}get['size'](){return this['_size'];}['onEnable'](){this['_checkStat'+'e']();}['onDisable'](){this['_checkStat'+'e']();}['_onSetEnab'+'led'](_0x18423a,_0x39fadd,_0x863f2a){this['_checkStat'+'e']();}['_checkStat'+'e'](){const _0x271e8d=this['enabled']&&this['entity']['enabled'];_0x271e8d!==this['_oldState']&&(this['_oldState']=_0x271e8d,this['fire']('enable'),this['fire']('state',this['enabled']));}['_onBeforeR'+'emove'](){this['fire']('remove');}}h(_n,'EVENT_ENAB'+'LE','enable'),h(_n,'EVENT_DISA'+'BLE','disable'),h(_n,'EVENT_STAT'+'E','state'),h(_n,'EVENT_REMO'+'VE','remove');class _F{constructor(){this['enabled']=!(-0xf86+0x6*0x32b+-0x1be*0x2);}}const u0=['enabled'];class gF extends ct{constructor(_0x206d05){super(_0x206d05),this['id']='zone',this['ComponentT'+'ype']=_n,this['DataType']=_F,this['schema']=u0,this['on']('beforeremo'+'ve',this['_onBeforeR'+'emove'],this);}['initialize'+'ComponentD'+'ata'](_0x25c214,_0x101fb7,_0x579522){_0x25c214['enabled']=_0x101fb7['hasOwnProp'+'erty']('enabled')?!!_0x101fb7['enabled']:!(0x1726+-0x5*-0x639+-0x3643),_0x101fb7['size']&&(_0x101fb7['size']instanceof D?_0x25c214['size']['copy'](_0x101fb7['size']):_0x101fb7['size']instanceof Array&&_0x101fb7['size']['length']>=0x94*0xb+0x9b1*0x4+-0x2d1d&&_0x25c214['size']['set'](_0x101fb7['size'][0x2124+0xd53+0x94b*-0x5],_0x101fb7['size'][0x15b9+-0x1add+0x525],_0x101fb7['size'][-0x3*0x455+0x55*0x2b+-0x146]));}['cloneCompo'+'nent'](_0x5e9c91,_0x37d441){const _0x5045fd={'enabled':_0x5e9c91['zone']['enabled'],'size':_0x5e9c91['zone']['size']};return this['addCompone'+'nt'](_0x37d441,_0x5045fd);}['_onBeforeR'+'emove'](_0x3c1c1c,_0x6364e4){_0x6364e4['_onBeforeR'+'emove']();}}we['_buildAcce'+'ssors'](_n['prototype'],u0);class SF{constructor(_0x5efb0d,_0x473daf){this['effect']=_0x5efb0d,this['inputTarge'+'t']=_0x473daf,this['outputTarg'+'et']=null,this['name']=_0x5efb0d['constructo'+'r']['name'];}}class yF{constructor(_0x4e53b6,_0x480ed5){this['app']=_0x4e53b6,this['camera']=_0x480ed5,this['destinatio'+'nRenderTar'+'get']=null,this['effects']=[],this['enabled']=!(0x13a+0x1c83+-0x1dbc),this['depthTarge'+'t']=null,_0x480ed5['on']('set:rect',this['onCameraRe'+'ctChanged'],this);}['_allocateC'+'olorBuffer'](_0x331b63,_0x31587c){const _0x1d27d7=this['camera']['rect'],_0x3b4a6b=this['destinatio'+'nRenderTar'+'get'],_0x3f6c08=this['app']['graphicsDe'+'vice'],_0x33c101=Math['floor'](_0x1d27d7['z']*((_0x3b4a6b==null?void(-0x13b1*0x1+0xe5*0x29+-0x10fc):_0x3b4a6b['width'])??_0x3f6c08['width'])),_0x6b4ac7=Math['floor'](_0x1d27d7['w']*((_0x3b4a6b==null?void(0x1d*-0xf6+0x1e77+-0x299):_0x3b4a6b['height'])??_0x3f6c08['height']));return new _e(_0x3f6c08,{'name':_0x31587c,'format':_0x331b63,'width':_0x33c101,'height':_0x6b4ac7,'mipmaps':!(-0xf37+-0x1210*-0x2+-0x14e8),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue});}['_createOff'+'screenTarg'+'et'](_0xc20861,_0x33a688){const _0x4304b7=this['app']['graphicsDe'+'vice'],_0x4100b7=(this['destinatio'+'nRenderTar'+'get']??_0x4304b7['backBuffer'])['isColorBuf'+'ferSrgb'](-0xe*-0xe+-0x11*-0xda+-0xf3e),_0x58c916=(_0x33a688&&_0x4304b7['getRendera'+'bleHdrForm'+'at']([nt,Xt],!(-0x93*-0x13+0x1b33+0x2*-0x130e)))??(_0x4100b7?_s:Ne),_0xdb05bb=this['camera']['entity']['name']+('-posteffec'+'t-')+this['effects']['length'],_0x23eec4=this['_allocateC'+'olorBuffer'](_0x58c916,_0xdb05bb);return new gt({'colorBuffer':_0x23eec4,'depth':_0xc20861,'stencil':_0xc20861&&this['app']['graphicsDe'+'vice']['supportsSt'+'encil'],'samples':_0xc20861?_0x4304b7['samples']:-0x183d+-0x9c1+0x21ff});}['_resizeOff'+'screenTarg'+'et'](_0x54b1de){const _0x3e4dc0=_0x54b1de['colorBuffe'+'r']['format'],_0x54004a=_0x54b1de['colorBuffe'+'r']['name'];_0x54b1de['destroyFra'+'meBuffers'](),_0x54b1de['destroyTex'+'tureBuffer'+'s'](),_0x54b1de['_colorBuff'+'er']=this['_allocateC'+'olorBuffer'](_0x3e4dc0,_0x54004a),_0x54b1de['_colorBuff'+'ers']=[_0x54b1de['_colorBuff'+'er']];}['_destroyOf'+'fscreenTar'+'get'](_0x3e21ac){_0x3e21ac['destroyTex'+'tureBuffer'+'s'](),_0x3e21ac['destroy']();}['addEffect'](_0x5b1ad7){const _0x3dd3fb=this['effects'],_0x45ac8a=_0x3dd3fb['length']===-0x16*0x17d+0xe67+0x1257*0x1,_0x2e97ab=this['_createOff'+'screenTarg'+'et'](_0x45ac8a,_0x5b1ad7['hdr']),_0x2b0598=new SF(_0x5b1ad7,_0x2e97ab);_0x3dd3fb['push'](_0x2b0598),this['_sourceTar'+'get']=_0x2b0598['inputTarge'+'t'],_0x3dd3fb['length']>0x1945+0x1265+-0x1*0x2ba9&&(_0x3dd3fb[_0x3dd3fb['length']-(-0x595+0x251f+-0x1f88)]['outputTarg'+'et']=_0x2b0598['inputTarge'+'t']),this['_newPostEf'+'fect']=_0x5b1ad7,_0x5b1ad7['needsDepth'+'Buffer']&&this['_requestDe'+'pthMap'](),this['enable'](),this['_newPostEf'+'fect']=void(-0x29+-0x11b*-0xc+0xd1b*-0x1);}['removeEffe'+'ct'](_0x332c9a){let _0x204940=-(0x9e6+0x1577+-0xdf*0x24);for(let _0x549c92=-0x1f*-0x11b+0x26f+0x20a*-0x12,_0x25af77=this['effects']['length'];_0x549c92<_0x25af77;_0x549c92++)if(this['effects'][_0x549c92]['effect']===_0x332c9a){_0x204940=_0x549c92;break;}_0x204940>=0x1b97+-0x2603+-0x17*-0x74&&(_0x204940>0x1187+0x13ee+-0x2575?this['effects'][_0x204940-(0xb*0x86+-0x393+-0x22e)]['outputTarg'+'et']=_0x204940+(-0xecb*0x1+-0x24b0+-0x1*-0x337c)<this['effects']['length']?this['effects'][_0x204940+(0x7f4+-0x43*0x25+0x1*0x1bc)]['inputTarge'+'t']:null:this['effects']['length']>0x1c1*-0x5+0x10d*-0x3+0xbed&&(this['effects'][0x3d*-0x65+-0x13f2+-0x1*-0x2c04]['inputTarge'+'t']['_depth']||(this['_destroyOf'+'fscreenTar'+'get'](this['effects'][-0x35*-0x6f+0x1d5b+-0x3455]['inputTarge'+'t']),this['effects'][-0x30c+-0x25f8+0x2905*0x1]['inputTarge'+'t']=this['_createOff'+'screenTarg'+'et'](!(-0x2*-0x8ba+0x1946+-0x2aba),this['effects'][-0x669+-0x3d*-0x3a+0x1da*-0x4]['hdr']),this['_sourceTar'+'get']=this['effects'][-0xfd2+-0x1*0x255b+-0x1a97*-0x2]['inputTarge'+'t']),this['camera']['renderTarg'+'et']=this['effects'][0x614+0x1*0x64c+-0xc5f]['inputTarge'+'t']),this['_destroyOf'+'fscreenTar'+'get'](this['effects'][_0x204940]['inputTarge'+'t']),this['effects']['splice'](_0x204940,0x61e+-0x9b3+0x396)),this['enabled']&&_0x332c9a['needsDepth'+'Buffer']&&this['_releaseDe'+'pthMap'](),this['effects']['length']===-0x153*-0x1d+0x1408+-0x3a6f*0x1&&this['disable']();}['_requestDe'+'pthMaps'](){for(let _0x36834b=-0x6d*0x21+0x2300+-0x14f3,_0x1ee714=this['effects']['length'];_0x36834b<_0x1ee714;_0x36834b++){const _0x1923b0=this['effects'][_0x36834b]['effect'];this['_newPostEf'+'fect']!==_0x1923b0&&_0x1923b0['needsDepth'+'Buffer']&&this['_requestDe'+'pthMap']();}}['_releaseDe'+'pthMaps'](){for(let _0x353a22=0x1*0x20e7+0xf*-0x49+-0x1ca0,_0x58393e=this['effects']['length'];_0x353a22<_0x58393e;_0x353a22++)this['effects'][_0x353a22]['effect']['needsDepth'+'Buffer']&&this['_releaseDe'+'pthMap']();}['_requestDe'+'pthMap'](){const _0x2c4b1a=this['app']['scene']['layers']['getLayerBy'+'Id'](ps);_0x2c4b1a&&(_0x2c4b1a['incrementC'+'ounter'](),this['camera']['requestSce'+'neDepthMap'](!(-0xef+-0x2e6+0x3d5)));}['_releaseDe'+'pthMap'](){const _0x2ba96e=this['app']['scene']['layers']['getLayerBy'+'Id'](ps);_0x2ba96e&&(_0x2ba96e['decrementC'+'ounter'](),this['camera']['requestSce'+'neDepthMap'](!(0x421*0x2+-0x143*-0x7+-0x1116)));}['destroy'](){for(let _0x397c2e=-0x4*-0x31d+0x107*0x26+-0x337e,_0x1e5279=this['effects']['length'];_0x397c2e<_0x1e5279;_0x397c2e++)this['effects'][_0x397c2e]['inputTarge'+'t']['destroy']();this['effects']['length']=0x1d*-0x41+0x1*-0x702+0xe5f,this['disable']();}['enable'](){!this['enabled']&&this['effects']['length']&&(this['enabled']=!(-0xcfc*0x1+0xb4b*0x3+-0x14e5),this['_requestDe'+'pthMaps'](),this['app']['graphicsDe'+'vice']['on']('resizecanv'+'as',this['_onCanvasR'+'esized'],this),this['destinatio'+'nRenderTar'+'get']=this['camera']['renderTarg'+'et'],this['camera']['renderTarg'+'et']=this['effects'][0x3e6*0x4+-0x159b+0xab*0x9]['inputTarge'+'t'],this['camera']['onPostproc'+'essing']=()=>{if(this['enabled']){let _0x456cb8=null;const _0x4fe7ee=this['effects']['length'];if(_0x4fe7ee)for(let _0x54cefa=0x4f*0x12+-0x2283+0x1cf5;_0x54cefa<_0x4fe7ee;_0x54cefa++){const _0x541691=this['effects'][_0x54cefa];let _0xb68796=_0x541691['outputTarg'+'et'];_0x54cefa===_0x4fe7ee-(0x335*-0x1+-0x1ffc+0x2332)&&(_0x456cb8=this['camera']['rect'],this['destinatio'+'nRenderTar'+'get']&&(_0xb68796=this['destinatio'+'nRenderTar'+'get'])),Q['pushGpuMar'+'ker'](this['app']['graphicsDe'+'vice'],_0x541691['name']),_0x541691['effect']['render'](_0x541691['inputTarge'+'t'],_0xb68796,_0x456cb8),Q['popGpuMark'+'er'](this['app']['graphicsDe'+'vice']);}}});}['disable'](){this['enabled']&&(this['enabled']=!(-0x1b*-0x155+-0x3a*-0x2c+-0x2dee),this['app']['graphicsDe'+'vice']['off']('resizecanv'+'as',this['_onCanvasR'+'esized'],this),this['_releaseDe'+'pthMaps'](),this['_destroyOf'+'fscreenTar'+'get'](this['_sourceTar'+'get']),this['camera']['renderTarg'+'et']=this['destinatio'+'nRenderTar'+'get'],this['camera']['onPostproc'+'essing']=null);}['_onCanvasR'+'esized'](_0x4d2fe1,_0x5cb4ac){const _0x227718=this['camera']['rect'],_0x1ca60b=this['destinatio'+'nRenderTar'+'get'];_0x4d2fe1=(_0x1ca60b==null?void(-0x1210+0xb13+0x1*0x6fd):_0x1ca60b['width'])??_0x4d2fe1,_0x5cb4ac=(_0x1ca60b==null?void(0x1e77+0x269b+-0x4512):_0x1ca60b['height'])??_0x5cb4ac,this['camera']['camera']['aspectRati'+'o']=_0x4d2fe1*_0x227718['z']/(_0x5cb4ac*_0x227718['w']),this['resizeRend'+'erTargets']();}['resizeRend'+'erTargets'](){const _0xd1043=this['app']['graphicsDe'+'vice'],_0xf8b03=this['destinatio'+'nRenderTar'+'get'],_0x1796ab=(_0xf8b03==null?void(0x1*0x423+-0x913+0x4f0):_0xf8b03['width'])??_0xd1043['width'],_0x297df5=(_0xf8b03==null?void(0x3*-0x296+-0x4*0x52d+0x1c76):_0xf8b03['height'])??_0xd1043['height'],_0x1f8e0e=this['camera']['rect'],_0x43e9a5=Math['floor'](_0x1f8e0e['z']*_0x1796ab),_0x8ae01=Math['floor'](_0x1f8e0e['w']*_0x297df5),_0x3481e2=this['effects'];for(let _0x3ecb39=-0x9b9+0x15e*0xf+-0xac9,_0x33710c=_0x3481e2['length'];_0x3ecb39<_0x33710c;_0x3ecb39++){const _0x37ab1d=_0x3481e2[_0x3ecb39];(_0x37ab1d['inputTarge'+'t']['width']!==_0x43e9a5||_0x37ab1d['inputTarge'+'t']['height']!==_0x8ae01)&&this['_resizeOff'+'screenTarg'+'et'](_0x37ab1d['inputTarge'+'t']);}}['onCameraRe'+'ctChanged'](_0x20f1ce,_0x41b624,_0x3b6d20){this['enabled']&&this['resizeRend'+'erTargets']();}}class Ir extends we{constructor(_0x27f139,_0x4397b2){super(_0x27f139,_0x4397b2),h(this,'onPostproc'+'essing',null),h(this,'_renderSce'+'neDepthMap',-0x56a+0x1675+0x110b*-0x1),h(this,'_renderSce'+'neColorMap',-0x172*-0x11+-0x13dd+-0x4b5),h(this,'_sceneDept'+'hMapReques'+'ted',!(-0x17d8+-0x26ab+0x3e84)),h(this,'_sceneColo'+'rMapReques'+'ted',!(-0x1378+-0x22bb+0x3634)),h(this,'_priority',0x1d*0x3+-0x167a+0x1623),h(this,'_disablePo'+'stEffectsL'+'ayer',Il),h(this,'_camera',new Fl()),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),(this['_camera']['node']=_0x4397b2,this['_postEffec'+'ts']=new yF(_0x27f139['app'],this));}['setShaderP'+'ass'](_0x26b6c5){const _0x477cb5=Si['get'](this['system']['app']['graphicsDe'+'vice']),_0x268bc6=_0x26b6c5?_0x477cb5['allocate'](_0x26b6c5,{'isForward':!(0xd17+0x13*-0x50+-0x727)}):null;return this['_camera']['shaderPass'+'Info']=_0x268bc6,_0x268bc6['index'];}['getShaderP'+'ass'](){var _0x1a7614;return(_0x1a7614=this['_camera']['shaderPass'+'Info'])==null?void(0x620+0x5*0x3d7+-0x1953):_0x1a7614['name'];}set['renderPass'+'es'](_0x223148){this['_camera']['renderPass'+'es']=_0x223148||[],this['dirtyLayer'+'Compositio'+'nCameras'](),this['system']['app']['scene']['updateShad'+'ers']=!(0x1a51+0x183b*0x1+-0x328c);}get['renderPass'+'es'](){return this['_camera']['renderPass'+'es'];}get['shaderPara'+'ms'](){return this['_camera']['shaderPara'+'ms'];}set['gammaCorre'+'ction'](_0x2d73ef){this['camera']['shaderPara'+'ms']['gammaCorre'+'ction']=_0x2d73ef;}get['gammaCorre'+'ction'](){return this['camera']['shaderPara'+'ms']['gammaCorre'+'ction'];}set['toneMappin'+'g'](_0x2a47b4){this['camera']['shaderPara'+'ms']['toneMappin'+'g']=_0x2a47b4;}get['toneMappin'+'g'](){return this['camera']['shaderPara'+'ms']['toneMappin'+'g'];}set['fog'](_0x55e24d){this['_camera']['fogParams']=_0x55e24d;}get['fog'](){return this['_camera']['fogParams'];}set['aperture'](_0x49623d){this['_camera']['aperture']=_0x49623d;}get['aperture'](){return this['_camera']['aperture'];}set['aspectRati'+'o'](_0x77796f){this['_camera']['aspectRati'+'o']=_0x77796f;}get['aspectRati'+'o'](){return this['_camera']['aspectRati'+'o'];}set['aspectRati'+'oMode'](_0x28238a){this['_camera']['aspectRati'+'oMode']=_0x28238a;}get['aspectRati'+'oMode'](){return this['_camera']['aspectRati'+'oMode'];}set['calculateP'+'rojection'](_0x3cb2ed){this['_camera']['calculateP'+'rojection']=_0x3cb2ed;}get['calculateP'+'rojection'](){return this['_camera']['calculateP'+'rojection'];}set['calculateT'+'ransform'](_0x52e8ac){this['_camera']['calculateT'+'ransform']=_0x52e8ac;}get['calculateT'+'ransform'](){return this['_camera']['calculateT'+'ransform'];}get['camera'](){return this['_camera'];}set['clearColor'](_0x5eb783){this['_camera']['clearColor']=_0x5eb783;}get['clearColor'](){return this['_camera']['clearColor'];}set['clearColor'+'Buffer'](_0x36fb39){this['_camera']['clearColor'+'Buffer']=_0x36fb39,this['dirtyLayer'+'Compositio'+'nCameras']();}get['clearColor'+'Buffer'](){return this['_camera']['clearColor'+'Buffer'];}set['clearDepth'+'Buffer'](_0x35daa8){this['_camera']['clearDepth'+'Buffer']=_0x35daa8,this['dirtyLayer'+'Compositio'+'nCameras']();}get['clearDepth'+'Buffer'](){return this['_camera']['clearDepth'+'Buffer'];}set['clearStenc'+'ilBuffer'](_0x4c4b52){this['_camera']['clearStenc'+'ilBuffer']=_0x4c4b52,this['dirtyLayer'+'Compositio'+'nCameras']();}get['clearStenc'+'ilBuffer'](){return this['_camera']['clearStenc'+'ilBuffer'];}set['cullFaces'](_0x9120b0){this['_camera']['cullFaces']=_0x9120b0;}get['cullFaces'](){return this['_camera']['cullFaces'];}set['disablePos'+'tEffectsLa'+'yer'](_0x2ca597){this['_disablePo'+'stEffectsL'+'ayer']=_0x2ca597,this['dirtyLayer'+'Compositio'+'nCameras']();}get['disablePos'+'tEffectsLa'+'yer'](){return this['_disablePo'+'stEffectsL'+'ayer'];}set['farClip'](_0x4c4d9a){this['_camera']['farClip']=_0x4c4d9a;}get['farClip'](){return this['_camera']['farClip'];}set['flipFaces'](_0x1b47a5){this['_camera']['flipFaces']=_0x1b47a5;}get['flipFaces'](){return this['_camera']['flipFaces'];}set['fov'](_0x3a86f1){this['_camera']['fov']=_0x3a86f1;}get['fov'](){return this['_camera']['fov'];}get['frustum'](){return this['_camera']['frustum'];}set['frustumCul'+'ling'](_0x569e53){this['_camera']['frustumCul'+'ling']=_0x569e53;}get['frustumCul'+'ling'](){return this['_camera']['frustumCul'+'ling'];}set['horizontal'+'Fov'](_0xc3efa6){this['_camera']['horizontal'+'Fov']=_0xc3efa6;}get['horizontal'+'Fov'](){return this['_camera']['horizontal'+'Fov'];}set['layers'](_0x5b0562){const _0x409f81=this['_camera']['layers'],_0x2140b8=this['system']['app']['scene'];_0x409f81['forEach'](_0x31d645=>{const _0x3c62ab=_0x2140b8['layers']['getLayerBy'+'Id'](_0x31d645);_0x3c62ab==null||_0x3c62ab['removeCame'+'ra'](this);}),this['_camera']['layers']=_0x5b0562,this['enabled']&&this['entity']['enabled']&&_0x5b0562['forEach'](_0x319839=>{const _0x2249bc=_0x2140b8['layers']['getLayerBy'+'Id'](_0x319839);_0x2249bc==null||_0x2249bc['addCamera'](this);}),this['fire']('set:layers');}get['layers'](){return this['_camera']['layers'];}get['layersSet'](){return this['_camera']['layersSet'];}set['jitter'](_0x5a2288){this['_camera']['jitter']=_0x5a2288;}get['jitter'](){return this['_camera']['jitter'];}set['nearClip'](_0x540baf){this['_camera']['nearClip']=_0x540baf;}get['nearClip'](){return this['_camera']['nearClip'];}set['orthoHeigh'+'t'](_0x2f50ef){this['_camera']['orthoHeigh'+'t']=_0x2f50ef;}get['orthoHeigh'+'t'](){return this['_camera']['orthoHeigh'+'t'];}get['postEffect'+'s'](){return this['_postEffec'+'ts'];}get['postEffect'+'sEnabled'](){return this['_postEffec'+'ts']['enabled'];}set['priority'](_0xd7b9b1){this['_priority']=_0xd7b9b1,this['dirtyLayer'+'Compositio'+'nCameras']();}get['priority'](){return this['_priority'];}set['projection'](_0x26a6e1){this['_camera']['projection']=_0x26a6e1;}get['projection'](){return this['_camera']['projection'];}get['projection'+'Matrix'](){return this['_camera']['projection'+'Matrix'];}set['rect'](_0x2264f6){this['_camera']['rect']=_0x2264f6,this['fire']('set:rect',this['_camera']['rect']);}get['rect'](){return this['_camera']['rect'];}set['renderScen'+'eColorMap'](_0x48650e){_0x48650e&&!this['_sceneColo'+'rMapReques'+'ted']?(this['requestSce'+'neColorMap'](!(0xb86+-0x151a+0x994)),this['_sceneColo'+'rMapReques'+'ted']=!(-0x3d8+-0x1853+0x1c2b)):this['_sceneColo'+'rMapReques'+'ted']&&(this['requestSce'+'neColorMap'](!(-0x1769+-0x1ba0+-0x5e*-0x8b)),this['_sceneColo'+'rMapReques'+'ted']=!(0x1ade+0x1*-0x1a0c+0x1*-0xd1));}get['renderScen'+'eColorMap'](){return this['_renderSce'+'neColorMap']>-0x220f+-0x1342+-0x3551*-0x1;}set['renderScen'+'eDepthMap'](_0x5d8c64){_0x5d8c64&&!this['_sceneDept'+'hMapReques'+'ted']?(this['requestSce'+'neDepthMap'](!(0x1*0x133f+-0xea*0x9+-0xb05)),this['_sceneDept'+'hMapReques'+'ted']=!(0x146e+0xd0d*0x1+-0x217b)):this['_sceneDept'+'hMapReques'+'ted']&&(this['requestSce'+'neDepthMap'](!(-0x11*0x1a8+0x1f85+0x4*-0xd7)),this['_sceneDept'+'hMapReques'+'ted']=!(0xc*0x21d+-0x5*0x39b+-0x7*0x10c));}get['renderScen'+'eDepthMap'](){return this['_renderSce'+'neDepthMap']>0x12f4+-0xd85+-0x56f;}set['renderTarg'+'et'](_0x34056f){w['call'](()=>{this['_camera']['renderPass'+'es']['length']>-0x2c2*-0x1+-0x1025+0x95*0x17&&w['warn']('Setting\x20a\x20'+'render\x20tar'+'get\x20on\x20the'+'\x20camera\x20'+this['entity']['name']+('\x20after\x20the'+'\x20render\x20pa'+'sses\x20is\x20no'+'t\x20supporte'+'d,\x20set\x20it\x20'+'up\x20first.'));}),this['_camera']['renderTarg'+'et']=_0x34056f,this['dirtyLayer'+'Compositio'+'nCameras']();}get['renderTarg'+'et'](){return this['_camera']['renderTarg'+'et'];}set['scissorRec'+'t'](_0x5e7882){this['_camera']['scissorRec'+'t']=_0x5e7882;}get['scissorRec'+'t'](){return this['_camera']['scissorRec'+'t'];}set['sensitivit'+'y'](_0x2c1e7f){this['_camera']['sensitivit'+'y']=_0x2c1e7f;}get['sensitivit'+'y'](){return this['_camera']['sensitivit'+'y'];}set['shutter'](_0x28178f){this['_camera']['shutter']=_0x28178f;}get['shutter'](){return this['_camera']['shutter'];}get['viewMatrix'](){return this['_camera']['viewMatrix'];}['_enableDep'+'thLayer'](_0x28ab34){if(this['layers']['find'](_0x585fa3=>_0x585fa3===ps)){const _0x278fb9=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](ps);_0x28ab34?_0x278fb9==null||_0x278fb9['incrementC'+'ounter']():_0x278fb9==null||_0x278fb9['decrementC'+'ounter']();}else{if(_0x28ab34)return!(-0xf4a+-0x6e9*-0x5+-0x1ed*0xa);}return!(-0x746*0x1+-0xe*-0x2a5+0x44*-0x70);}['requestSce'+'neColorMap'](_0x3218e1){this['_renderSce'+'neColorMap']+=_0x3218e1?-0x22*-0x83+-0x1f7a+-0x203*-0x7:-(-0x1b11+0xfdd*-0x2+0xd4*0x47),w['assert'](this['_renderSce'+'neColorMap']>=-0xfd7+0x1*-0x124f+0x2226),this['_enableDep'+'thLayer'](_0x3218e1)||w['warnOnce']('CameraComp'+'onent.requ'+'estSceneCo'+'lorMap\x20was'+'\x20called,\x20b'+'ut\x20the\x20cam'+'era\x20does\x20n'+'ot\x20have\x20a\x20'+'Depth\x20laye'+'r,\x20ignorin'+'g.'),this['camera']['_enableRen'+'derPassCol'+'orGrab'](this['system']['app']['graphicsDe'+'vice'],this['renderScen'+'eColorMap']),this['system']['app']['scene']['layers']['markDirty']();}['requestSce'+'neDepthMap'](_0x1819e4){this['_renderSce'+'neDepthMap']+=_0x1819e4?-0x269d*-0x1+-0x2*-0x1383+-0x4da2:-(0x7*0x10a+-0x4c3+-0x282),w['assert'](this['_renderSce'+'neDepthMap']>=-0x3d*0x88+0x13f7+0x41*0x31),this['_enableDep'+'thLayer'](_0x1819e4)||w['warnOnce']('CameraComp'+'onent.requ'+'estSceneDe'+'pthMap\x20was'+'\x20called,\x20b'+'ut\x20the\x20cam'+'era\x20does\x20n'+'ot\x20have\x20a\x20'+'Depth\x20laye'+'r,\x20ignorin'+'g.'),this['camera']['_enableRen'+'derPassDep'+'thGrab'](this['system']['app']['graphicsDe'+'vice'],this['system']['app']['renderer'],this['renderScen'+'eDepthMap']),this['system']['app']['scene']['layers']['markDirty']();}['dirtyLayer'+'Compositio'+'nCameras'](){const _0x2eb82a=this['system']['app']['scene']['layers'];_0x2eb82a['_dirty']=!(0x1*-0x24d4+-0x13c+0x2610);}['screenToWo'+'rld'](_0xe79a8b,_0x12848f,_0x195ddc,_0x3cae41){const _0x3632c4=this['system']['app']['graphicsDe'+'vice'],{width:_0x5aefe0,height:_0x4116c3}=_0x3632c4['clientRect'];return this['_camera']['screenToWo'+'rld'](_0xe79a8b,_0x12848f,_0x195ddc,_0x5aefe0,_0x4116c3,_0x3cae41);}['worldToScr'+'een'](_0x50c338,_0x361849){const _0x4bded0=this['system']['app']['graphicsDe'+'vice'],{width:_0xabc598,height:_0x7306c5}=_0x4bded0['clientRect'];return this['_camera']['worldToScr'+'een'](_0x50c338,_0xabc598,_0x7306c5,_0x361849);}['onAppPrere'+'nder'](){this['_camera']['_viewMatDi'+'rty']=!(0x15*0xf3+-0x13*0x94+0x4f*-0x1d),this['_camera']['_viewProjM'+'atDirty']=!(0xf97+-0x2443*-0x1+-0x33da);}['addCameraT'+'oLayers'](){const _0x47caa0=this['layers'];for(let _0x4463b3=-0x1e8d+-0xf5d+-0x6*-0x7a7;_0x4463b3<_0x47caa0['length'];_0x4463b3++){const _0x15c589=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x47caa0[_0x4463b3]);_0x15c589&&_0x15c589['addCamera'](this);}}['removeCame'+'raFromLaye'+'rs'](){const _0x96c2d9=this['layers'];for(let _0x5384c8=-0x269c+0x853+0x1e49;_0x5384c8<_0x96c2d9['length'];_0x5384c8++){const _0x5b91ed=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x96c2d9[_0x5384c8]);_0x5b91ed&&_0x5b91ed['removeCame'+'ra'](this);}}['onLayersCh'+'anged'](_0xee6c23,_0x429f20){this['addCameraT'+'oLayers'](),_0xee6c23['off']('add',this['onLayerAdd'+'ed'],this),_0xee6c23['off']('remove',this['onLayerRem'+'oved'],this),_0x429f20['on']('add',this['onLayerAdd'+'ed'],this),_0x429f20['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x4480cd){this['layers']['indexOf'](_0x4480cd['id'])<-0x56*0x29+-0xde7+0x1bad||_0x4480cd['addCamera'](this);}['onLayerRem'+'oved'](_0x52e711){this['layers']['indexOf'](_0x52e711['id'])<0x2*0x21b+0xa48+-0xe7e||_0x52e711['removeCame'+'ra'](this);}['onEnable'](){var _0x746fd0,_0x1af6b5,_0x522c60;const _0x35e979=this['system']['app']['scene'],_0x1f75bb=_0x35e979['layers'];this['system']['addCamera'](this),(_0x746fd0=this['_evtLayers'+'Changed'])==null||_0x746fd0['off'](),this['_evtLayers'+'Changed']=_0x35e979['on']('set:layers',this['onLayersCh'+'anged'],this),_0x1f75bb&&((_0x1af6b5=this['_evtLayerA'+'dded'])==null||_0x1af6b5['off'](),this['_evtLayerA'+'dded']=_0x1f75bb['on']('add',this['onLayerAdd'+'ed'],this),(_0x522c60=this['_evtLayerR'+'emoved'])==null||_0x522c60['off'](),this['_evtLayerR'+'emoved']=_0x1f75bb['on']('remove',this['onLayerRem'+'oved'],this)),this['enabled']&&this['entity']['enabled']&&this['addCameraT'+'oLayers'](),this['postEffect'+'s']['enable']();}['onDisable'](){var _0x3278c8,_0x3bed63,_0x293d07;const _0x532575=this['system']['app']['scene']['layers'];this['postEffect'+'s']['disable'](),this['removeCame'+'raFromLaye'+'rs'](),(_0x3278c8=this['_evtLayers'+'Changed'])==null||_0x3278c8['off'](),this['_evtLayers'+'Changed']=null,_0x532575&&((_0x3bed63=this['_evtLayerA'+'dded'])==null||_0x3bed63['off'](),this['_evtLayerA'+'dded']=null,(_0x293d07=this['_evtLayerR'+'emoved'])==null||_0x293d07['off'](),this['_evtLayerR'+'emoved']=null),this['system']['removeCame'+'ra'](this);}['onRemove'](){this['onDisable'](),this['off'](),this['camera']['destroy']();}['calculateA'+'spectRatio'](_0x3289c5){const _0x1baec7=this['system']['app']['graphicsDe'+'vice'],_0x3b16a3=_0x3289c5?_0x3289c5['width']:_0x1baec7['width'],_0x5efb0b=_0x3289c5?_0x3289c5['height']:_0x1baec7['height'];return _0x3b16a3*this['rect']['z']/(_0x5efb0b*this['rect']['w']);}['frameUpdat'+'e'](_0x72c789){this['aspectRati'+'oMode']===hm&&(this['aspectRati'+'o']=this['calculateA'+'spectRatio'](_0x72c789));}['startXr'](_0x1a2512,_0x17de18,_0x12e85d){this['system']['app']['xr']['start'](this,_0x1a2512,_0x17de18,_0x12e85d);}['endXr'](_0x554d16){if(!this['_camera']['xr']){_0x554d16&&_0x554d16(new Error('Camera\x20is\x20'+'not\x20in\x20XR'));return;}this['_camera']['xr']['end'](_0x554d16);}['copy'](_0x2ee904){this['aperture']=_0x2ee904['aperture'],this['aspectRati'+'o']=_0x2ee904['aspectRati'+'o'],this['aspectRati'+'oMode']=_0x2ee904['aspectRati'+'oMode'],this['calculateP'+'rojection']=_0x2ee904['calculateP'+'rojection'],this['calculateT'+'ransform']=_0x2ee904['calculateT'+'ransform'],this['clearColor']=_0x2ee904['clearColor'],this['clearColor'+'Buffer']=_0x2ee904['clearColor'+'Buffer'],this['clearDepth'+'Buffer']=_0x2ee904['clearDepth'+'Buffer'],this['clearStenc'+'ilBuffer']=_0x2ee904['clearStenc'+'ilBuffer'],this['cullFaces']=_0x2ee904['cullFaces'],this['disablePos'+'tEffectsLa'+'yer']=_0x2ee904['disablePos'+'tEffectsLa'+'yer'],this['farClip']=_0x2ee904['farClip'],this['flipFaces']=_0x2ee904['flipFaces'],this['fov']=_0x2ee904['fov'],this['frustumCul'+'ling']=_0x2ee904['frustumCul'+'ling'],this['horizontal'+'Fov']=_0x2ee904['horizontal'+'Fov'],this['layers']=_0x2ee904['layers'],this['nearClip']=_0x2ee904['nearClip'],this['orthoHeigh'+'t']=_0x2ee904['orthoHeigh'+'t'],this['priority']=_0x2ee904['priority'],this['projection']=_0x2ee904['projection'],this['rect']=_0x2ee904['rect'],this['renderTarg'+'et']=_0x2ee904['renderTarg'+'et'],this['scissorRec'+'t']=_0x2ee904['scissorRec'+'t'],this['sensitivit'+'y']=_0x2ee904['sensitivit'+'y'],this['shutter']=_0x2ee904['shutter'];}}class vF{constructor(){this['enabled']=!(-0x88f+-0x5*0x7+0x8b2);}}const p0=['enabled'];class xF extends ct{constructor(_0x34ca78){super(_0x34ca78),h(this,'cameras',[]),(this['id']='camera',this['ComponentT'+'ype']=Ir,this['DataType']=vF,this['schema']=p0,this['on']('beforeremo'+'ve',this['onBeforeRe'+'move'],this),this['app']['on']('prerender',this['onAppPrere'+'nder'],this));}['initialize'+'ComponentD'+'ata'](_0x63497,_0x4f5c15,_0xa25cfe){_0xa25cfe=['aspectRati'+'o','aspectRati'+'oMode','calculateP'+'rojection','calculateT'+'ransform','clearColor','clearColor'+'Buffer','clearDepth'+'Buffer','clearStenc'+'ilBuffer','renderScen'+'eColorMap','renderScen'+'eDepthMap','cullFaces','farClip','flipFaces','fog','fov','frustumCul'+'ling','horizontal'+'Fov','layers','renderTarg'+'et','nearClip','orthoHeigh'+'t','projection','priority','rect','scissorRec'+'t','aperture','shutter','sensitivit'+'y','gammaCorre'+'ction','toneMappin'+'g'];for(let _0xaea2ab=0x6c0+0xe3*0x6+-0x1*0xc12;_0xaea2ab<_0xa25cfe['length'];_0xaea2ab++){const _0x337215=_0xa25cfe[_0xaea2ab];if(_0x4f5c15['hasOwnProp'+'erty'](_0x337215)){const _0x39f89a=_0x4f5c15[_0x337215];switch(_0x337215){case'rect':case'scissorRec'+'t':Array['isArray'](_0x39f89a)?_0x63497[_0x337215]=new re(_0x39f89a[-0x241b+-0x1*0x7ed+0x2c08],_0x39f89a[-0x4*0x899+-0xcdd+0x107*0x2e],_0x39f89a[-0xdfd*-0x2+-0x1db2*0x1+-0x1a*-0x11],_0x39f89a[0x931+-0x223a+0x1c*0xe5]):_0x63497[_0x337215]=_0x39f89a;break;case'clearColor':Array['isArray'](_0x39f89a)?_0x63497[_0x337215]=new ie(_0x39f89a[-0x1983+-0xe7a+-0x161*-0x1d],_0x39f89a[0x1a*0x7+-0xd69*0x2+0x1a1d],_0x39f89a[0xf5b+0xdd+0x2*-0x81b],_0x39f89a[-0x48b*-0x6+-0x2304+0x1*0x7c5]):_0x63497[_0x337215]=_0x39f89a;break;default:_0x63497[_0x337215]=_0x39f89a;break;}}}super['initialize'+'ComponentD'+'ata'](_0x63497,_0x4f5c15,['enabled']);}['cloneCompo'+'nent'](_0x4082de,_0x21807a){const _0xe9b4a2=_0x4082de['camera'];return this['addCompone'+'nt'](_0x21807a,{'aspectRatio':_0xe9b4a2['aspectRati'+'o'],'aspectRatioMode':_0xe9b4a2['aspectRati'+'oMode'],'calculateProjection':_0xe9b4a2['calculateP'+'rojection'],'calculateTransform':_0xe9b4a2['calculateT'+'ransform'],'clearColor':_0xe9b4a2['clearColor'],'clearColorBuffer':_0xe9b4a2['clearColor'+'Buffer'],'clearDepthBuffer':_0xe9b4a2['clearDepth'+'Buffer'],'clearStencilBuffer':_0xe9b4a2['clearStenc'+'ilBuffer'],'renderSceneDepthMap':_0xe9b4a2['renderScen'+'eDepthMap'],'renderSceneColorMap':_0xe9b4a2['renderScen'+'eColorMap'],'cullFaces':_0xe9b4a2['cullFaces'],'enabled':_0xe9b4a2['enabled'],'farClip':_0xe9b4a2['farClip'],'flipFaces':_0xe9b4a2['flipFaces'],'fov':_0xe9b4a2['fov'],'frustumCulling':_0xe9b4a2['frustumCul'+'ling'],'horizontalFov':_0xe9b4a2['horizontal'+'Fov'],'layers':_0xe9b4a2['layers'],'renderTarget':_0xe9b4a2['renderTarg'+'et'],'nearClip':_0xe9b4a2['nearClip'],'orthoHeight':_0xe9b4a2['orthoHeigh'+'t'],'projection':_0xe9b4a2['projection'],'priority':_0xe9b4a2['priority'],'rect':_0xe9b4a2['rect'],'scissorRect':_0xe9b4a2['scissorRec'+'t'],'aperture':_0xe9b4a2['aperture'],'sensitivity':_0xe9b4a2['sensitivit'+'y'],'shutter':_0xe9b4a2['shutter'],'gammaCorrection':_0xe9b4a2['gammaCorre'+'ction'],'toneMapping':_0xe9b4a2['toneMappin'+'g']});}['onBeforeRe'+'move'](_0x1c917f,_0x28b626){this['removeCame'+'ra'](_0x28b626),_0x28b626['onRemove']();}['onAppPrere'+'nder'](){for(let _0x502f1b=-0x10e2+0x1*0x7a2+-0x2*-0x4a0,_0x53d508=this['cameras']['length'];_0x502f1b<_0x53d508;_0x502f1b++)this['cameras'][_0x502f1b]['onAppPrere'+'nder']();}['addCamera'](_0x50e720){this['cameras']['push'](_0x50e720),ul(this['cameras']);}['removeCame'+'ra'](_0x205772){const _0x384aa2=this['cameras']['indexOf'](_0x205772);_0x384aa2>=0x11*0xe3+-0x10ce+0x1bb*0x1&&(this['cameras']['splice'](_0x384aa2,0x2e*0x29+0x1*0x46a+-0x43*0x2d),ul(this['cameras']));}['destroy'](){this['app']['off']('prerender',this['onAppPrere'+'nder'],this),super['destroy']();}}we['_buildAcce'+'ssors'](Ir['prototype'],p0);class m0{constructor(){h(this,'enabled',!(0x422*-0x5+0x256+-0x2*-0x92a)),h(this,'light'),h(this,'type','directiona'+'l'),h(this,'color',new ie(-0x35f+-0x7d3+0xb33,-0x6ec+0x1545+0x4c8*-0x3,-0x9d5+0x23bd+-0x19e7)),h(this,'intensity',-0x235c+0x4*-0x72f+0x4019),h(this,'luminance',-0xe5c+0x4*0x7b1+0x578*-0x3),h(this,'shape',Ys),h(this,'affectSpec'+'ularity',!(-0x1*0x92f+0x26e3*0x1+-0x1db4)),h(this,'castShadow'+'s',!(0x1782+-0x1f1c+0x79b*0x1)),h(this,'shadowDist'+'ance',0x7eb+-0x1da5+0x15e2),h(this,'shadowInte'+'nsity',0x19*-0x14f+0x89b+0x1*0x181d),h(this,'shadowReso'+'lution',0x1*-0x2527+-0x1ef2+0x1*0x4819),h(this,'shadowBias',0x3*0x260+0xdc+-0x2*0x3fe+0.05),h(this,'numCascade'+'s',-0x13*0x47+0x2*0xc7c+0x13b2*-0x1),h(this,'cascadeBle'+'nd',-0x2225*0x1+-0x4*-0x669+0x881),h(this,'bakeNumSam'+'ples',-0xac*-0x1+0x71*-0x1f+0xd04),h(this,'bakeArea',-0x1154+0xcf+0x1085),h(this,'cascadeDis'+'tribution',0x1dd*-0x8+-0x3f*0x31+0x1af7+0.5),h(this,'normalOffs'+'etBias',-0x1680+0x2*-0xc3b+-0x1*-0x2ef6),h(this,'range',0x9f5*-0x2+-0x1*0x181c+0x2c10),h(this,'innerConeA'+'ngle',-0xa4+0x121d*-0x1+-0x12e9*-0x1),h(this,'outerConeA'+'ngle',-0x225d+-0x13f+0x23c9),h(this,'falloffMod'+'e',Qp),h(this,'shadowType',$s),h(this,'vsmBlurSiz'+'e',0x1229*0x1+-0x108a*0x1+-0x194),h(this,'vsmBlurMod'+'e',em),h(this,'vsmBias',(-0x2519*0x1+0x568+0x1fb1+0.01)*(-0x3*0x2d1+0xcd6*-0x2+0x1*0x221f+0.25)),h(this,'cookieAsse'+'t',null),h(this,'cookie',null),h(this,'cookieInte'+'nsity',-0x62e+0x24e9+-0x1eba),h(this,'cookieFall'+'off',!(0x1c73+-0x270f+0xa9c)),h(this,'cookieChan'+'nel','rgb'),h(this,'cookieAngl'+'e',0x1c98+0x1101*-0x2+-0x3*-0x1ce),h(this,'cookieScal'+'e',null),h(this,'cookieOffs'+'et',null),h(this,'shadowUpda'+'teMode',lm),h(this,'mask',0x1*-0x12b2+-0xd33+0x1fe6),h(this,'affectDyna'+'mic',!(0xfa3+-0xc*-0x3e+-0x128b)),h(this,'affectLigh'+'tmapped',!(0x1108+0x91*-0x41+0x13ca)),h(this,'bake',!(0x870+0x9df+-0x124e)),h(this,'bakeDir',!(-0x722+0xc56+-0x1bc*0x3)),h(this,'isStatic',!(-0x1109+0xae9+0x20b*0x3)),h(this,'layers',[er]),h(this,'penumbraSi'+'ze',-0x7c7+-0xf9c+0x1764),h(this,'penumbraFa'+'lloff',-0xa62+-0x21e4+0x1*0x2c47),h(this,'shadowSamp'+'les',-0x16db*-0x1+-0x840+-0xdb*0x11),h(this,'shadowBloc'+'kerSamples',-0xfb+-0x1d4e+-0x1e59*-0x1);}}const Ho=Object['keys'](new m0());class TF extends we{constructor(){super(...arguments),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),h(this,'_cookieAss'+'et',null),h(this,'_cookieAss'+'etId',null),h(this,'_cookieAss'+'etAdd',!(0x5*-0x439+0x2*-0x828+0x3*0xc7a)),h(this,'_cookieMat'+'rix',null);}get['data'](){const _0x1d1d03=this['system']['store'][this['entity']['getGuid']()];return _0x1d1d03?_0x1d1d03['data']:null;}set['enabled'](_0x42a893){this['_setValue']('enabled',_0x42a893,function(_0x3733d6,_0x36c6f5){this['onSetEnabl'+'ed'](null,_0x36c6f5,_0x3733d6);});}get['enabled'](){return this['data']['enabled'];}set['light'](_0x4c0df3){this['_setValue']('light',_0x4c0df3);}get['light'](){return this['data']['light'];}set['type'](_0xec824b){this['_setValue']('type',_0xec824b,function(_0x2930f3,_0x58dc67){this['system']['changeType'](this,_0x58dc67,_0x2930f3),this['refreshPro'+'perties']();});}get['type'](){return this['data']['type'];}set['color'](_0x5e83c9){this['_setValue']('color',_0x5e83c9,function(_0x2c982d,_0x46eee0){this['light']['setColor'](_0x2c982d);},!(0xbc1+-0x4f*0x1d+0x167*-0x2));}get['color'](){return this['data']['color'];}set['intensity'](_0x9e04eb){this['_setValue']('intensity',_0x9e04eb,function(_0x44ae90,_0x1125a2){this['light']['intensity']=_0x44ae90;});}get['intensity'](){return this['data']['intensity'];}set['luminance'](_0x2438bf){this['_setValue']('luminance',_0x2438bf,function(_0x3a5e24,_0x33b270){this['light']['luminance']=_0x3a5e24;});}get['luminance'](){return this['data']['luminance'];}set['shape'](_0x3ee27a){this['_setValue']('shape',_0x3ee27a,function(_0x5b2cf5,_0x4820e7){this['light']['shape']=_0x5b2cf5;});}get['shape'](){return this['data']['shape'];}set['affectSpec'+'ularity'](_0x56ae2c){this['_setValue']('affectSpec'+'ularity',_0x56ae2c,function(_0x5b04d2,_0x3ca270){this['light']['affectSpec'+'ularity']=_0x5b04d2;});}get['affectSpec'+'ularity'](){return this['data']['affectSpec'+'ularity'];}set['castShadow'+'s'](_0x349206){this['_setValue']('castShadow'+'s',_0x349206,function(_0x2e61d4,_0x5e7f04){this['light']['castShadow'+'s']=_0x2e61d4;});}get['castShadow'+'s'](){return this['data']['castShadow'+'s'];}set['shadowDist'+'ance'](_0xb011a5){this['_setValue']('shadowDist'+'ance',_0xb011a5,function(_0x3506ee,_0x4ea569){this['light']['shadowDist'+'ance']=_0x3506ee;});}get['shadowDist'+'ance'](){return this['data']['shadowDist'+'ance'];}set['shadowInte'+'nsity'](_0x362089){this['_setValue']('shadowInte'+'nsity',_0x362089,function(_0x5acde2,_0x438769){this['light']['shadowInte'+'nsity']=_0x5acde2;});}get['shadowInte'+'nsity'](){return this['data']['shadowInte'+'nsity'];}set['shadowReso'+'lution'](_0xf7f396){this['_setValue']('shadowReso'+'lution',_0xf7f396,function(_0x102e1e,_0x3112dc){this['light']['shadowReso'+'lution']=_0x102e1e;});}get['shadowReso'+'lution'](){return this['data']['shadowReso'+'lution'];}set['shadowBias'](_0x119a32){this['_setValue']('shadowBias',_0x119a32,function(_0x3b4a39,_0xbe8987){this['light']['shadowBias']=-(0x122a+0x574*-0x2+-0x742+0.01)*Y['clamp'](_0x3b4a39,-0x1ad9+0x1bc2+0xe9*-0x1,0x159d*-0x1+-0x8d*0x2d+0x2e67);});}get['shadowBias'](){return this['data']['shadowBias'];}set['numCascade'+'s'](_0x55dd88){this['_setValue']('numCascade'+'s',_0x55dd88,function(_0x76edbf,_0x4b7aac){this['light']['numCascade'+'s']=Y['clamp'](Math['floor'](_0x76edbf),0x41*-0x1b+0x1869+-0x118d,0x153d*-0x1+0x14f1+0x50);});}get['numCascade'+'s'](){return this['data']['numCascade'+'s'];}set['cascadeBle'+'nd'](_0x20db43){this['_setValue']('cascadeBle'+'nd',_0x20db43,function(_0x4de618,_0x5a4157){this['light']['cascadeBle'+'nd']=Y['clamp'](_0x4de618,0x1ac0+-0x2*-0x12c1+-0x2*0x2021,-0x2603+-0x1bfc+-0x1080*-0x4);});}get['cascadeBle'+'nd'](){return this['data']['cascadeBle'+'nd'];}set['bakeNumSam'+'ples'](_0x3e2d7e){this['_setValue']('bakeNumSam'+'ples',_0x3e2d7e,function(_0x30be6c,_0x371a50){this['light']['bakeNumSam'+'ples']=Y['clamp'](Math['floor'](_0x30be6c),0x1acd+-0x1866+-0x266,0x20f1+0x7*-0x47d+-0x87);});}get['bakeNumSam'+'ples'](){return this['data']['bakeNumSam'+'ples'];}set['bakeArea'](_0x5739c3){this['_setValue']('bakeArea',_0x5739c3,function(_0x3c4c4e,_0x1dea08){this['light']['bakeArea']=Y['clamp'](_0x3c4c4e,-0x186a+0x609+0x1261,-0x1fc+0x2*0x5ad+-0x8aa);});}get['bakeArea'](){return this['data']['bakeArea'];}set['cascadeDis'+'tribution'](_0x22f751){this['_setValue']('cascadeDis'+'tribution',_0x22f751,function(_0x3e8756,_0x443117){this['light']['cascadeDis'+'tribution']=Y['clamp'](_0x3e8756,-0x61e*0x6+0x3a4*-0x2+0x2bfc,-0x182f+0x3*-0x985+0x3*0x1195);});}get['cascadeDis'+'tribution'](){return this['data']['cascadeDis'+'tribution'];}set['normalOffs'+'etBias'](_0x3f4ba7){this['_setValue']('normalOffs'+'etBias',_0x3f4ba7,function(_0x49009c,_0x1bde30){this['light']['normalOffs'+'etBias']=Y['clamp'](_0x49009c,-0x1*-0x2697+-0x23eb+-0x2ac,0x12d9+-0x1811+-0x1*-0x539);});}get['normalOffs'+'etBias'](){return this['data']['normalOffs'+'etBias'];}set['range'](_0x2781a8){this['_setValue']('range',_0x2781a8,function(_0x5d634,_0xb4400c){this['light']['attenuatio'+'nEnd']=_0x5d634;});}get['range'](){return this['data']['range'];}set['innerConeA'+'ngle'](_0x54f3a7){this['_setValue']('innerConeA'+'ngle',_0x54f3a7,function(_0x20123a,_0x5ee30a){this['light']['innerConeA'+'ngle']=_0x20123a;});}get['innerConeA'+'ngle'](){return this['data']['innerConeA'+'ngle'];}set['outerConeA'+'ngle'](_0x19c743){this['_setValue']('outerConeA'+'ngle',_0x19c743,function(_0x149dd8,_0x1ced8a){this['light']['outerConeA'+'ngle']=_0x149dd8;});}get['outerConeA'+'ngle'](){return this['data']['outerConeA'+'ngle'];}set['falloffMod'+'e'](_0x7e8b04){this['_setValue']('falloffMod'+'e',_0x7e8b04,function(_0x5f3ca8,_0x6994f7){this['light']['falloffMod'+'e']=_0x5f3ca8;});}get['falloffMod'+'e'](){return this['data']['falloffMod'+'e'];}set['shadowType'](_0x170647){this['_setValue']('shadowType',_0x170647,function(_0xeb9daa,_0x2aa234){this['light']['shadowType']=_0xeb9daa;});}get['shadowType'](){return this['data']['shadowType'];}set['vsmBlurSiz'+'e'](_0x53f2f5){this['_setValue']('vsmBlurSiz'+'e',_0x53f2f5,function(_0x42b259,_0x3d4ede){this['light']['vsmBlurSiz'+'e']=_0x42b259;});}get['vsmBlurSiz'+'e'](){return this['data']['vsmBlurSiz'+'e'];}set['vsmBlurMod'+'e'](_0x5ec961){this['_setValue']('vsmBlurMod'+'e',_0x5ec961,function(_0x594351,_0x2467ed){this['light']['vsmBlurMod'+'e']=_0x594351;});}get['vsmBlurMod'+'e'](){return this['data']['vsmBlurMod'+'e'];}set['vsmBias'](_0x19b7eb){this['_setValue']('vsmBias',_0x19b7eb,function(_0x44a4ad,_0x356d48){this['light']['vsmBias']=Y['clamp'](_0x44a4ad,0x8ae+-0x4*-0x682+-0x22b6,-0x8f*-0x43+0x2c0+-0x282c);});}get['vsmBias'](){return this['data']['vsmBias'];}set['cookieAsse'+'t'](_0x520445){this['_setValue']('cookieAsse'+'t',_0x520445,function(_0x2ec324,_0x50cf57){if(!(this['_cookieAss'+'etId']&&(_0x2ec324 instanceof pe&&_0x2ec324['id']===this['_cookieAss'+'etId']||_0x2ec324===this['_cookieAss'+'etId']))){if(this['onCookieAs'+'setRemove'](),this['_cookieAss'+'etId']=null,_0x2ec324 instanceof pe)this['data']['cookieAsse'+'t']=_0x2ec324['id'],this['_cookieAss'+'etId']=_0x2ec324['id'],this['onCookieAs'+'setAdd'](_0x2ec324);else{if(typeof _0x2ec324=='number'){this['_cookieAss'+'etId']=_0x2ec324;const _0x39991c=this['system']['app']['assets']['get'](_0x2ec324);_0x39991c?this['onCookieAs'+'setAdd'](_0x39991c):(this['_cookieAss'+'etAdd']=!(0x19ff+0x131+-0x1b30),this['system']['app']['assets']['on']('add:'+this['_cookieAss'+'etId'],this['onCookieAs'+'setAdd'],this));}}}});}get['cookieAsse'+'t'](){return this['data']['cookieAsse'+'t'];}set['cookie'](_0x1d6bf9){this['_setValue']('cookie',_0x1d6bf9,function(_0x34e0df,_0x470998){this['light']['cookie']=_0x34e0df;});}get['cookie'](){return this['data']['cookie'];}set['cookieInte'+'nsity'](_0x228990){this['_setValue']('cookieInte'+'nsity',_0x228990,function(_0x1ef91c,_0x23b825){this['light']['cookieInte'+'nsity']=Y['clamp'](_0x1ef91c,0x3b3*-0x2+0x10d3+-0x96d,-0x85d*0x3+0x1*0x13c3+0x23*0x27);});}get['cookieInte'+'nsity'](){return this['data']['cookieInte'+'nsity'];}set['cookieFall'+'off'](_0x599dea){this['_setValue']('cookieFall'+'off',_0x599dea,function(_0x2de0c5,_0x405c5){this['light']['cookieFall'+'off']=_0x2de0c5;});}get['cookieFall'+'off'](){return this['data']['cookieFall'+'off'];}set['cookieChan'+'nel'](_0x54d997){this['_setValue']('cookieChan'+'nel',_0x54d997,function(_0x5b5635,_0x46df27){this['light']['cookieChan'+'nel']=_0x5b5635;});}get['cookieChan'+'nel'](){return this['data']['cookieChan'+'nel'];}set['cookieAngl'+'e'](_0x123c2e){this['_setValue']('cookieAngl'+'e',_0x123c2e,function(_0x3a9810,_0x3506a0){if(_0x3a9810!==0x382+-0x1bd8+-0x59*-0x46||this['cookieScal'+'e']!==null){this['_cookieMat'+'rix']||(this['_cookieMat'+'rix']=new re());let _0x524726=-0x1f53*-0x1+0x1*-0x1807+-0x74b,_0x3b708c=0x9*0xc7+-0x1*0xe5+0x1*-0x619;this['cookieScal'+'e']&&(_0x524726=this['cookieScal'+'e']['x'],_0x3b708c=this['cookieScal'+'e']['y']);const _0x2fb6a4=Math['cos'](_0x3a9810*Y['DEG_TO_RAD']),_0x58d819=Math['sin'](_0x3a9810*Y['DEG_TO_RAD']);this['_cookieMat'+'rix']['set'](_0x2fb6a4/_0x524726,-_0x58d819/_0x524726,_0x58d819/_0x3b708c,_0x2fb6a4/_0x3b708c),this['light']['cookieTran'+'sform']=this['_cookieMat'+'rix'];}else this['light']['cookieTran'+'sform']=null;});}get['cookieAngl'+'e'](){return this['data']['cookieAngl'+'e'];}set['cookieScal'+'e'](_0xca5083){this['_setValue']('cookieScal'+'e',_0xca5083,function(_0x57faf6,_0x40bdbc){if(_0x57faf6!==null||this['cookieAngl'+'e']!==-0x1f*-0x6f+-0x1b41+0xdd0){this['_cookieMat'+'rix']||(this['_cookieMat'+'rix']=new re());const _0x3b8a00=_0x57faf6['x'],_0x4baa10=_0x57faf6['y'],_0x19de8a=Math['cos'](this['cookieAngl'+'e']*Y['DEG_TO_RAD']),_0x2a9db5=Math['sin'](this['cookieAngl'+'e']*Y['DEG_TO_RAD']);this['_cookieMat'+'rix']['set'](_0x19de8a/_0x3b8a00,-_0x2a9db5/_0x3b8a00,_0x2a9db5/_0x4baa10,_0x19de8a/_0x4baa10),this['light']['cookieTran'+'sform']=this['_cookieMat'+'rix'];}else this['light']['cookieTran'+'sform']=null;},!(0x6f*-0x47+-0x1e56+-0x1*-0x3d1f));}get['cookieScal'+'e'](){return this['data']['cookieScal'+'e'];}set['cookieOffs'+'et'](_0x29908a){this['_setValue']('cookieOffs'+'et',_0x29908a,function(_0x560a9b,_0x2f1780){this['light']['cookieOffs'+'et']=_0x560a9b;},!(-0x135b+0xbc*-0x22+-0x2c53*-0x1));}get['cookieOffs'+'et'](){return this['data']['cookieOffs'+'et'];}set['shadowUpda'+'teMode'](_0x5614b9){this['_setValue']('shadowUpda'+'teMode',_0x5614b9,function(_0x49418b,_0x161107){this['light']['shadowUpda'+'teMode']=_0x49418b;},!(0x1a12+0x1*0x2386+-0x3d98));}get['shadowUpda'+'teMode'](){return this['data']['shadowUpda'+'teMode'];}set['mask'](_0x5e1b5f){this['_setValue']('mask',_0x5e1b5f,function(_0x3d5489,_0x5969e2){this['light']['mask']=_0x3d5489;});}get['mask'](){return this['data']['mask'];}set['affectDyna'+'mic'](_0x3cb8af){this['_setValue']('affectDyna'+'mic',_0x3cb8af,function(_0x153d16,_0x1a3a9d){_0x153d16?this['light']['mask']|=Ss:this['light']['mask']&=~Ss,this['light']['layersDirt'+'y']();});}get['affectDyna'+'mic'](){return this['data']['affectDyna'+'mic'];}set['affectLigh'+'tmapped'](_0xd07687){this['_setValue']('affectLigh'+'tmapped',_0xd07687,function(_0x1f0e1b,_0x4cd65f){_0x1f0e1b?(this['light']['mask']|=di,this['bake']&&(this['light']['mask']&=~fi)):(this['light']['mask']&=~di,this['bake']&&(this['light']['mask']|=fi));});}get['affectLigh'+'tmapped'](){return this['data']['affectLigh'+'tmapped'];}set['bake'](_0x531ffe){this['_setValue']('bake',_0x531ffe,function(_0x54fefe,_0x4493e6){_0x54fefe?(this['light']['mask']|=fi,this['affectLigh'+'tmapped']&&(this['light']['mask']&=~di)):(this['light']['mask']&=~fi,this['affectLigh'+'tmapped']&&(this['light']['mask']|=di)),this['light']['layersDirt'+'y']();});}get['bake'](){return this['data']['bake'];}set['bakeDir'](_0x428677){this['_setValue']('bakeDir',_0x428677,function(_0x506e25,_0x32e639){this['light']['bakeDir']=_0x506e25;});}get['bakeDir'](){return this['data']['bakeDir'];}set['isStatic'](_0xc7afd6){this['_setValue']('isStatic',_0xc7afd6,function(_0x46d3a6,_0x31d239){this['light']['isStatic']=_0x46d3a6;});}get['isStatic'](){return this['data']['isStatic'];}set['layers'](_0x1b580b){this['_setValue']('layers',_0x1b580b,function(_0x141cfc,_0x2f717a){for(let _0x3fb880=0x1*0x2483+0x22b6+-0x1*0x4739;_0x3fb880<_0x2f717a['length'];_0x3fb880++){const _0x5a1da2=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x2f717a[_0x3fb880]);_0x5a1da2&&(_0x5a1da2['removeLigh'+'t'](this),this['light']['removeLaye'+'r'](_0x5a1da2));}for(let _0x2637d6=0xc*-0x1c6+0x8*-0x2fe+0x2d38;_0x2637d6<_0x141cfc['length'];_0x2637d6++){const _0x284ec1=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](_0x141cfc[_0x2637d6]);_0x284ec1&&this['enabled']&&this['entity']['enabled']&&(_0x284ec1['addLight'](this),this['light']['addLayer'](_0x284ec1));}});}get['layers'](){return this['data']['layers'];}set['shadowUpda'+'teOverride'+'s'](_0x65b7b2){this['light']['shadowUpda'+'teOverride'+'s']=_0x65b7b2;}get['shadowUpda'+'teOverride'+'s'](){return this['light']['shadowUpda'+'teOverride'+'s'];}set['shadowSamp'+'les'](_0x445b7e){this['light']['shadowSamp'+'les']=_0x445b7e;}get['shadowSamp'+'les'](){return this['light']['shadowSamp'+'les'];}set['shadowBloc'+'kerSamples'](_0x22b772){this['light']['shadowBloc'+'kerSamples']=_0x22b772;}get['shadowBloc'+'kerSamples'](){return this['light']['shadowBloc'+'kerSamples'];}set['penumbraSi'+'ze'](_0x11c23a){this['light']['penumbraSi'+'ze']=_0x11c23a;}get['penumbraSi'+'ze'](){return this['light']['penumbraSi'+'ze'];}set['penumbraFa'+'lloff'](_0x13e8a7){this['light']['penumbraFa'+'lloff']=_0x13e8a7;}get['penumbraFa'+'lloff'](){return this['light']['penumbraFa'+'lloff'];}['_setValue'](_0x505ab3,_0x211538,_0x351b22,_0x4c4628){const _0x404be9=this['data'],_0x5ed9ca=_0x404be9[_0x505ab3];!_0x4c4628&&_0x5ed9ca===_0x211538||(_0x404be9[_0x505ab3]=_0x211538,_0x351b22&&_0x351b22['call'](this,_0x211538,_0x5ed9ca));}['addLightTo'+'Layers'](){for(let _0x2914b4=0x5*0x3+0xb*-0x27f+0x7*0x3ea;_0x2914b4<this['layers']['length'];_0x2914b4++){const _0x5d569c=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x2914b4]);_0x5d569c&&(_0x5d569c['addLight'](this),this['light']['addLayer'](_0x5d569c));}}['removeLigh'+'tFromLayer'+'s'](){for(let _0x18fffe=-0x4a9+-0x1d77*0x1+0x2220;_0x18fffe<this['layers']['length'];_0x18fffe++){const _0x2069be=this['system']['app']['scene']['layers']['getLayerBy'+'Id'](this['layers'][_0x18fffe]);_0x2069be&&(_0x2069be['removeLigh'+'t'](this),this['light']['removeLaye'+'r'](_0x2069be));}}['onLayersCh'+'anged'](_0x933929,_0x48c6e5){this['enabled']&&this['entity']['enabled']&&this['addLightTo'+'Layers'](),_0x933929['off']('add',this['onLayerAdd'+'ed'],this),_0x933929['off']('remove',this['onLayerRem'+'oved'],this),_0x48c6e5['on']('add',this['onLayerAdd'+'ed'],this),_0x48c6e5['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x218510){this['layers']['indexOf'](_0x218510['id'])>=0x129b+0x5*0x62f+-0x841*0x6&&this['enabled']&&this['entity']['enabled']&&(_0x218510['addLight'](this),this['light']['addLayer'](_0x218510));}['onLayerRem'+'oved'](_0x28004e){this['layers']['indexOf'](_0x28004e['id'])>=-0x1d*-0x152+0x10bb+-0x9*0x61d&&(_0x28004e['removeLigh'+'t'](this),this['light']['removeLaye'+'r'](_0x28004e));}['refreshPro'+'perties'](){for(let _0x1b65b0=0x23d0+0x203e+-0x2207*0x2;_0x1b65b0<Ho['length'];_0x1b65b0++){const _0x41588c=Ho[_0x1b65b0];this[_0x41588c]=this[_0x41588c];}this['enabled']&&this['entity']['enabled']&&this['onEnable']();}['onCookieAs'+'setSet'](){let _0x1f882a=!(-0x54e*-0x7+-0xb*0x2ce+-0x647);this['_cookieAss'+'et']['type']==='cubemap'&&!this['_cookieAss'+'et']['loadFaces']&&(this['_cookieAss'+'et']['loadFaces']=!(-0x1bb0+0xf*0x1bb+0x1bb),_0x1f882a=!(-0xbb4+-0x1978*-0x1+0x4*-0x371)),(!this['_cookieAss'+'et']['resource']||_0x1f882a)&&this['system']['app']['assets']['load'](this['_cookieAss'+'et']),this['_cookieAss'+'et']['resource']&&this['onCookieAs'+'setLoad']();}['onCookieAs'+'setAdd'](_0x25d711){this['_cookieAss'+'etId']===_0x25d711['id']&&(this['_cookieAss'+'et']=_0x25d711,this['light']['enabled']&&this['onCookieAs'+'setSet'](),this['_cookieAss'+'et']['on']('load',this['onCookieAs'+'setLoad'],this),this['_cookieAss'+'et']['on']('remove',this['onCookieAs'+'setRemove'],this));}['onCookieAs'+'setLoad'](){!this['_cookieAss'+'et']||!this['_cookieAss'+'et']['resource']||(this['cookie']=this['_cookieAss'+'et']['resource']);}['onCookieAs'+'setRemove'](){this['_cookieAss'+'etId']&&(this['_cookieAss'+'etAdd']&&(this['system']['app']['assets']['off']('add:'+this['_cookieAss'+'etId'],this['onCookieAs'+'setAdd'],this),this['_cookieAss'+'etAdd']=!(-0xf*-0x132+0x177d+-0x1f*0x156)),this['_cookieAss'+'et']&&(this['_cookieAss'+'et']['off']('load',this['onCookieAs'+'setLoad'],this),this['_cookieAss'+'et']['off']('remove',this['onCookieAs'+'setRemove'],this),this['_cookieAss'+'et']=null),this['cookie']=null);}['onEnable'](){const _0x662e=this['system']['app']['scene'],_0x5bb3d3=_0x662e['layers'];this['light']['enabled']=!(0x2696+0xf1e+0x1eb*-0x1c),this['_evtLayers'+'Changed']=_0x662e['on']('set:layers',this['onLayersCh'+'anged'],this),_0x5bb3d3&&(this['_evtLayerA'+'dded']=_0x5bb3d3['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x5bb3d3['on']('remove',this['onLayerRem'+'oved'],this)),this['enabled']&&this['entity']['enabled']&&this['addLightTo'+'Layers'](),this['_cookieAss'+'et']&&!this['cookie']&&this['onCookieAs'+'setSet']();}['onDisable'](){var _0x4779a9,_0x545dab,_0x3e2fd0;const _0x44ece1=this['system']['app']['scene']['layers'];this['light']['enabled']=!(-0x1*0x1853+0x1*0x8ae+0x7d3*0x2),(_0x4779a9=this['_evtLayers'+'Changed'])==null||_0x4779a9['off'](),this['_evtLayers'+'Changed']=null,_0x44ece1&&((_0x545dab=this['_evtLayerA'+'dded'])==null||_0x545dab['off'](),this['_evtLayerA'+'dded']=null,(_0x3e2fd0=this['_evtLayerR'+'emoved'])==null||_0x3e2fd0['off'](),this['_evtLayerR'+'emoved']=null),this['removeLigh'+'tFromLayer'+'s']();}['onRemove'](){this['onDisable'](),this['light']['destroy'](),this['cookieAsse'+'t']=null;}}class wF extends ct{constructor(_0xbc0751){super(_0xbc0751),this['id']='light',this['ComponentT'+'ype']=TF,this['DataType']=m0,this['on']('beforeremo'+'ve',this['_onRemoveC'+'omponent'],this);}['initialize'+'ComponentD'+'ata'](_0x25fd6a,_0x5a1c93){const _0x85e553={..._0x5a1c93};_0x85e553['type']||(_0x85e553['type']=_0x25fd6a['data']['type']),_0x25fd6a['data']['type']=_0x85e553['type'],_0x85e553['layers']&&Array['isArray'](_0x85e553['layers'])&&(_0x85e553['layers']=_0x85e553['layers']['slice'](0x134f+0x1646+-0x2995)),_0x85e553['color']&&Array['isArray'](_0x85e553['color'])&&(_0x85e553['color']=new ie(_0x85e553['color'][0x24bb*-0x1+0x3*0x6ec+0x43*0x3d],_0x85e553['color'][-0x38d+0x399*0x5+-0xe6f],_0x85e553['color'][0x2*0x1af+0x1*0x1837+-0x1b93])),_0x85e553['cookieOffs'+'et']&&_0x85e553['cookieOffs'+'et']instanceof Array&&(_0x85e553['cookieOffs'+'et']=new J(_0x85e553['cookieOffs'+'et'][0xad5+0x1*0x941+-0x1416],_0x85e553['cookieOffs'+'et'][0x4*-0x269+-0x11d7*0x2+0x2d53])),_0x85e553['cookieScal'+'e']&&_0x85e553['cookieScal'+'e']instanceof Array&&(_0x85e553['cookieScal'+'e']=new J(_0x85e553['cookieScal'+'e'][-0x1*0x3e5+0x1bbc+-0x17d7],_0x85e553['cookieScal'+'e'][0x186c+-0x1eb2+0x647*0x1])),_0x85e553['enable']&&(console['warn']('WARNING:\x20e'+'nable:\x20Pro'+'perty\x20is\x20d'+'eprecated.'+'\x20Set\x20enabl'+'ed\x20propert'+'y\x20instead.'),_0x85e553['enabled']=_0x85e553['enable']),_0x85e553['shape']||(_0x85e553['shape']=Ys);const _0x413682=new pl(this['app']['graphicsDe'+'vice'],this['app']['scene']['clusteredL'+'ightingEna'+'bled']);_0x413682['type']=fu[_0x85e553['type']],_0x413682['_node']=_0x25fd6a['entity'],_0x25fd6a['data']['light']=_0x413682,super['initialize'+'ComponentD'+'ata'](_0x25fd6a,_0x85e553,Ho);}['_onRemoveC'+'omponent'](_0x22005a,_0x2aecc5){_0x2aecc5['onRemove']();}['cloneCompo'+'nent'](_0x199497,_0x2fba32){const _0x20e5c1=_0x199497['light'],_0x7dad50=[];let _0x621bdd;for(let _0x16f4aa=-0x1c4c+0x20f5+-0x4a9*0x1;_0x16f4aa<Ho['length'];_0x16f4aa++)_0x621bdd=Ho[_0x16f4aa],_0x621bdd!=='light'&&(_0x20e5c1[_0x621bdd]&&_0x20e5c1[_0x621bdd]['clone']?_0x7dad50[_0x621bdd]=_0x20e5c1[_0x621bdd]['clone']():_0x7dad50[_0x621bdd]=_0x20e5c1[_0x621bdd]);return this['addCompone'+'nt'](_0x2fba32,_0x7dad50);}['changeType'](_0x2d4838,_0x427e9c,_0x216190){_0x427e9c!==_0x216190&&(_0x2d4838['light']['type']=fu[_0x216190]);}}const EF=['x','y','z','w'],bF=[void(-0x15bf+-0x55d+0x14*0x15b),void(0x1c1*-0x10+0x1f01*0x1+-0x2f1),J,D,re];function Yn(_0x28a185,_0x5daf94,_0x5d66d1,_0x5c6708){switch(_0x5daf94['type']){case'boolean':return!!_0x5d66d1;case'number':if(typeof _0x5d66d1=='number')return _0x5d66d1;if(typeof _0x5d66d1=='string'){const _0x54b1b9=parseInt(_0x5d66d1,-0x1*0x19d9+0xedf+0xb04);return isNaN(_0x54b1b9)?null:_0x54b1b9;}else{if(typeof _0x5d66d1=='boolean')return 0x1*0xf20+0x1150+-0x1*0x2070+_0x5d66d1;}return null;case'json':{const _0x54a922={};if(Array['isArray'](_0x5daf94['schema'])){(!_0x5d66d1||typeof _0x5d66d1!='object')&&(_0x5d66d1={});for(let _0xd5eb21=-0x22b0+-0x1b08+0x3db8;_0xd5eb21<_0x5daf94['schema']['length'];_0xd5eb21++){const _0x378af5=_0x5daf94['schema'][_0xd5eb21];if(_0x378af5['name']){if(_0x378af5['array']){_0x54a922[_0x378af5['name']]=[];const _0x22ee14=Array['isArray'](_0x5d66d1[_0x378af5['name']])?_0x5d66d1[_0x378af5['name']]:[];for(let _0x3e6552=0x1e5+0x1cd6+0x1ebb*-0x1;_0x3e6552<_0x22ee14['length'];_0x3e6552++)_0x54a922[_0x378af5['name']]['push'](Yn(_0x28a185,_0x378af5,_0x22ee14[_0x3e6552]));}else{const _0x4e16e7=_0x5d66d1['hasOwnProp'+'erty'](_0x378af5['name'])?_0x5d66d1[_0x378af5['name']]:_0x378af5['default'];_0x54a922[_0x378af5['name']]=Yn(_0x28a185,_0x378af5,_0x4e16e7);}}}}return _0x54a922;}case'asset':return _0x5d66d1 instanceof pe?_0x5d66d1:typeof _0x5d66d1=='number'?_0x28a185['assets']['get'](_0x5d66d1)||null:typeof _0x5d66d1=='string'&&_0x28a185['assets']['get'](parseInt(_0x5d66d1,0x19f9*-0x1+-0x12c9+-0x5e*-0x7a))||null;case'entity':return _0x5d66d1 instanceof Ie?_0x5d66d1:typeof _0x5d66d1=='string'?_0x28a185['getEntityF'+'romIndex'](_0x5d66d1):null;case'rgb':case'rgba':if(_0x5d66d1 instanceof ie)return _0x5c6708 instanceof ie?(_0x5c6708['copy'](_0x5d66d1),_0x5c6708):_0x5d66d1['clone']();if(_0x5d66d1 instanceof Array&&_0x5d66d1['length']>=-0x4*-0xc7+-0x6d7*-0x3+0xbcf*-0x2&&_0x5d66d1['length']<=0x1f0c+-0x451+-0x3d1*0x7){for(let _0x488530=0x656*-0x5+0x8*0x235+0x703*0x2;_0x488530<_0x5d66d1['length'];_0x488530++)if(typeof _0x5d66d1[_0x488530]!='number')return null;return _0x5c6708||(_0x5c6708=new ie()),_0x5c6708['r']=_0x5d66d1[-0x1bc5*-0x1+-0x96*0x1b+-0x1b5*0x7],_0x5c6708['g']=_0x5d66d1[0x248e+-0x239f*0x1+0x22*-0x7],_0x5c6708['b']=_0x5d66d1[0x774+-0x1d4*0x11+0x32*0x79],_0x5c6708['a']=_0x5d66d1['length']===0x18a9*-0x1+0x3*-0x75f+0x19d*0x1d?-0x10d9+-0x21fa+-0x2*-0x196a:_0x5d66d1[-0x4b*0x70+-0x16ef+-0x1a*-0x225],_0x5c6708;}else{if(typeof _0x5d66d1=='string'&&/#(?:[0-9a-f]{2}){3,4}/i['test'](_0x5d66d1))return _0x5c6708||(_0x5c6708=new ie()),_0x5c6708['fromString'](_0x5d66d1),_0x5c6708;}return null;case'vec2':case'vec3':case'vec4':{const _0x31bc54=parseInt(_0x5daf94['type']['slice'](0x2f5+-0x186c+0x1*0x157a),-0x1803+0x29*0x1f+0x1316),_0x5e69f6=bF[_0x31bc54];if(_0x5d66d1 instanceof _0x5e69f6)return _0x5c6708 instanceof _0x5e69f6?(_0x5c6708['copy'](_0x5d66d1),_0x5c6708):_0x5d66d1['clone']();if(_0x5d66d1 instanceof Array&&_0x5d66d1['length']===_0x31bc54){for(let _0x23e800=-0x1b85+-0x7*-0x2ae+0x8c3;_0x23e800<_0x5d66d1['length'];_0x23e800++)if(typeof _0x5d66d1[_0x23e800]!='number')return null;_0x5c6708||(_0x5c6708=new _0x5e69f6());for(let _0x1826ff=0x1*-0x69c+0x13*0x158+-0xe*0x15a;_0x1826ff<_0x31bc54;_0x1826ff++)_0x5c6708[EF[_0x1826ff]]=_0x5d66d1[_0x1826ff];return _0x5c6708;}return null;}case'curve':if(_0x5d66d1){let _0x3cc6c8;if(_0x5d66d1 instanceof qs||_0x5d66d1 instanceof na)_0x3cc6c8=_0x5d66d1['clone']();else{const _0x17ba01=_0x5d66d1['keys'][0xb13+-0xa53+-0x18*0x8]instanceof Array?na:qs;_0x3cc6c8=new _0x17ba01(_0x5d66d1['keys']),_0x3cc6c8['type']=_0x5d66d1['type'];}return _0x3cc6c8;}break;}return _0x5d66d1;}function _0(_0x5a4559,_0x1a6d2e,_0x4f04e9,_0x7acfe5){return _0x1a6d2e['array']?_0x4f04e9['map']((_0x5ba567,_0x273078)=>Yn(_0x5a4559,_0x1a6d2e,_0x5ba567,_0x7acfe5?_0x7acfe5[_0x273078]:null)):Yn(_0x5a4559,_0x1a6d2e,_0x4f04e9,_0x7acfe5);}function g0(_0x121686,_0x3fc8f4,_0x79ed01,_0x12929c){if(_0x79ed01)for(const _0x4a9e54 in _0x3fc8f4){const _0x1078f6=_0x3fc8f4[_0x4a9e54],_0x168178=_0x79ed01[_0x4a9e54];_0x168178!==void(0x9d6+-0x2e7*-0x5+-0x1859)&&(_0x12929c[_0x4a9e54]=_0(_0x121686,_0x1078f6,_0x168178,_0x12929c[_0x4a9e54]));}}const yn=class yn{constructor(_0x1cd02a){this['scriptType']=_0x1cd02a,this['index']={};}['add'](_0x50988a,_0x54a1b0){if(this['index'][_0x50988a]){w['warn']('attribute\x20'+'\x27'+_0x50988a+('\x27\x20is\x20alrea'+'dy\x20defined'+'\x20for\x20scrip'+'t\x20type\x20\x27')+this['scriptType']['name']+'\x27');return;}else{if(yn['reservedNa'+'mes']['has'](_0x50988a)){w['warn']('attribute\x20'+'\x27'+_0x50988a+('\x27\x20is\x20a\x20res'+'erved\x20attr'+'ibute\x20name'));return;}}this['index'][_0x50988a]=_0x54a1b0,Object['defineProp'+'erty'](this['scriptType']['prototype'],_0x50988a,{'get':function(){return this['__attribut'+'es'][_0x50988a];},'set':function(_0xaf86fb){const _0x1173e0='attr',_0x1f0ceb='attr:'+_0x50988a,_0x49a26e=this['__attribut'+'es'][_0x50988a];let _0x14dcea=_0x49a26e;if(_0x49a26e&&_0x54a1b0['type']!=='json'&&_0x54a1b0['type']!=='entity'&&_0x49a26e['clone']&&(this['hasEvent'](_0x1173e0)||this['hasEvent'](_0x1f0ceb))&&(_0x14dcea=_0x49a26e['clone']()),_0x54a1b0['array']){if(this['__attribut'+'es'][_0x50988a]=[],_0xaf86fb){for(let _0x524f4d=0xa93*-0x1+0xc51+0x1be*-0x1,_0x5e702e=_0xaf86fb['length'];_0x524f4d<_0x5e702e;_0x524f4d++)this['__attribut'+'es'][_0x50988a]['push'](Yn(this['app'],_0x54a1b0,_0xaf86fb[_0x524f4d],_0x49a26e?_0x49a26e[_0x524f4d]:null));}}else this['__attribut'+'es'][_0x50988a]=Yn(this['app'],_0x54a1b0,_0xaf86fb,_0x49a26e);this['fire'](_0x1173e0,_0x50988a,this['__attribut'+'es'][_0x50988a],_0x14dcea),this['fire'](_0x1f0ceb,this['__attribut'+'es'][_0x50988a],_0x14dcea);}});}['remove'](_0x24550d){return this['index'][_0x24550d]?(delete this['index'][_0x24550d],delete this['scriptType']['prototype'][_0x24550d],!(0x8b*0xc+-0x123b+0xbb7*0x1)):!(-0x1629+0x540+0x5*0x362);}['has'](_0x512489){return!!this['index'][_0x512489];}['get'](_0x176490){return this['index'][_0x176490]||null;}};h(yn,'assignAttr'+'ibutesToSc'+'ript',g0),h(yn,'attributeT'+'oValue',_0),h(yn,'reservedNa'+'mes',new Set(['app','entity','enabled','_enabled','_enabledOl'+'d','_destroyed','__attribut'+'es','__attribut'+'esRaw','__scriptTy'+'pe','__executio'+'nOrder','_callbacks','_callbackA'+'ctive','has','get','on','off','fire','once','hasEvent']));let Sl=yn;const Bu='initialize',zu='postInitia'+'lize',AF='update',CF='postUpdate',PF='swap';class ts extends me{constructor(_0x2d7bbd){super(),h(this,'app'),h(this,'entity'),h(this,'_enabled'),h(this,'_enabledOl'+'d'),h(this,'_initializ'+'ed'),h(this,'_postIniti'+'alized'),h(this,'__destroye'+'d'),h(this,'__scriptTy'+'pe'),h(this,'__executio'+'nOrder'),this['initScript'](_0x2d7bbd);}set['enabled'](_0x5469bf){this['_enabled']=!!_0x5469bf,this['enabled']!==this['_enabledOl'+'d']&&(this['_enabledOl'+'d']=this['enabled'],this['fire'](this['enabled']?'enable':'disable'),this['fire']('state',this['enabled']),!this['_initializ'+'ed']&&this['enabled']&&(this['_initializ'+'ed']=!(0x3*0x8da+0x624+-0x1b*0x136),this['fire']('preInitial'+'ize'),this['initialize']&&this['entity']['script']['_scriptMet'+'hod'](this,Bu)),this['_initializ'+'ed']&&!this['_postIniti'+'alized']&&this['enabled']&&!this['entity']['script']['_beingEnab'+'led']&&(this['_postIniti'+'alized']=!(0x275*-0x5+0x18e4+-0xc9b),this['postInitia'+'lize']&&this['entity']['script']['_scriptMet'+'hod'](this,zu)));}get['enabled'](){return this['_enabled']&&!this['_destroyed']&&this['entity']['script']['enabled']&&this['entity']['enabled'];}['initScript'](_0x3d5315){const _0x32c717=this['constructo'+'r'];w['assert'](_0x3d5315&&_0x3d5315['app']&&_0x3d5315['entity'],'script\x20['+_0x32c717['__name']+(']\x20has\x20miss'+'ing\x20argume'+'nts\x20in\x20con'+'structor')),this['app']=_0x3d5315['app'],this['entity']=_0x3d5315['entity'],this['_enabled']=typeof _0x3d5315['enabled']=='boolean'?_0x3d5315['enabled']:!(0x3*-0x766+-0x1c3a+0x326c),this['_enabledOl'+'d']=this['enabled'],this['__destroye'+'d']=!(0x51f+-0x5b*0x38+-0x2*-0x765),this['__scriptTy'+'pe']=_0x32c717,this['__executio'+'nOrder']=-(-0x3*-0x61b+-0x97f+-0x8d1);}static get['scriptName'](){return this['__name'];}}h(ts,'EVENT_ENAB'+'LE','enable'),h(ts,'EVENT_DISA'+'BLE','disable'),h(ts,'EVENT_STAT'+'E','state'),h(ts,'EVENT_DEST'+'ROY','destroy'),h(ts,'EVENT_ATTR','attr'),h(ts,'EVENT_ERRO'+'R','error'),h(ts,'__name',null),h(ts,'__getScrip'+'tName',S0);const MF=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s\/]*)\s*/;function S0(_0xa2357c){if(typeof _0xa2357c!='function')return;if(_0xa2357c['scriptName'])return _0xa2357c['scriptName'];if('name'in Function['prototype'])return _0xa2357c['name'];if(_0xa2357c===Function||_0xa2357c===Function['prototype']['constructo'+'r'])return'Function';const _0x484362=(''+_0xa2357c)['match'](MF);return _0x484362?_0x484362[0x29*-0x17+-0x1*-0x1671+-0x12c1]:void(-0xb7*0x1d+0x13ed+0xce);}class Wo extends ts{constructor(_0xcf75e1){super(_0xcf75e1),h(this,'__attribut'+'es'),h(this,'__attribut'+'esRaw'),this['initScript'+'Type'](_0xcf75e1);}static get['attributes'](){return this['hasOwnProp'+'erty']('__attribut'+'es')||(this['__attribut'+'es']=new Sl(this)),this['__attribut'+'es'];}['initScript'](_0x44da6a){ts['prototype']['initScript']['call'](this,_0x44da6a),this['__attribut'+'es']={},this['__attribut'+'esRaw']=_0x44da6a['attributes']||{};}['initScript'+'Type'](_0x12b586){this['initScript'](_0x12b586);}['__initiali'+'zeAttribut'+'es'](_0x3de015){if(!(!_0x3de015&&!this['__attribut'+'esRaw'])){for(const _0x3627a2 in this['__scriptTy'+'pe']['attributes']['index'])this['__attribut'+'esRaw']&&this['__attribut'+'esRaw']['hasOwnProp'+'erty'](_0x3627a2)?this[_0x3627a2]=this['__attribut'+'esRaw'][_0x3627a2]:this['__attribut'+'es']['hasOwnProp'+'erty'](_0x3627a2)||(this['__scriptTy'+'pe']['attributes']['index'][_0x3627a2]['hasOwnProp'+'erty']('default')?this[_0x3627a2]=this['__scriptTy'+'pe']['attributes']['index'][_0x3627a2]['default']:this[_0x3627a2]=null);this['__attribut'+'esRaw']=null;}}static['extend'](_0x2fedcb){for(const _0x42e41b in _0x2fedcb)_0x2fedcb['hasOwnProp'+'erty'](_0x42e41b)&&(this['prototype'][_0x42e41b]=_0x2fedcb[_0x42e41b]);}}const DF=_0x88f5fb=>_0x88f5fb[0x147+-0x2*0x923+-0x13*-0xe5]['toLowerCas'+'e']()+_0x88f5fb['substring'](0x2ab*-0x2+-0x411+0x968);class Ii extends we{constructor(_0x2795dd,_0x251479){super(_0x2795dd,_0x251479),h(this,'_attribute'+'DataMap',new Map()),(this['_scripts']=[],this['_updateLis'+'t']=new oh({'sortBy':'__executio'+'nOrder'}),this['_postUpdat'+'eList']=new oh({'sortBy':'__executio'+'nOrder'}),this['_scriptsIn'+'dex']={},this['_destroyed'+'Scripts']=[],this['_destroyed']=!(0x3*0x2a+-0x3a*-0x17+-0x5b3),this['_scriptsDa'+'ta']=null,this['_oldState']=!(0x1*-0x25fb+0x14f7+-0x18c*-0xb),this['_enabled']=!(-0x1*0x11ea+-0x530+-0x1*-0x171a),this['_beingEnab'+'led']=!(-0x10d4+-0x590+-0x7*-0x333),this['_isLooping'+'ThroughScr'+'ipts']=!(-0x1262+0xb57*-0x2+0x2911),this['_execution'+'Order']=-(0x1684+-0x143b*-0x1+-0x2abe*0x1),this['on']('set_enable'+'d',this['_onSetEnab'+'led'],this));}set['scripts'](_0x5705bb){this['_scriptsDa'+'ta']=_0x5705bb;for(const _0x2ac427 in _0x5705bb){if(!_0x5705bb['hasOwnProp'+'erty'](_0x2ac427))continue;const _0x2856a5=this['_scriptsIn'+'dex'][_0x2ac427];if(_0x2856a5){if(typeof _0x5705bb[_0x2ac427]['enabled']=='boolean'&&(_0x2856a5['once']('preInitial'+'ize',()=>{this['initialize'+'Attributes'](_0x2856a5);}),_0x2856a5['enabled']=!!_0x5705bb[_0x2ac427]['enabled']),typeof _0x5705bb[_0x2ac427]['attributes']=='object'){for(const _0x185886 in _0x5705bb[_0x2ac427]['attributes'])if(!Sl['reservedNa'+'mes']['has'](_0x185886)){if(!_0x2856a5['__attribut'+'es']['hasOwnProp'+'erty'](_0x185886)){const _0x239ab3=this['system']['app']['scripts']['get'](_0x2ac427);_0x239ab3&&_0x239ab3['attributes']['add'](_0x185886,{});}_0x2856a5[_0x185886]=_0x5705bb[_0x2ac427]['attributes'][_0x185886];}}}else console['log'](this['order']);}}get['scripts'](){return this['_scripts'];}set['enabled'](_0x9fafcc){const _0x23d29b=this['_enabled'];this['_enabled']=_0x9fafcc,this['fire']('set','enabled',_0x23d29b,_0x9fafcc);}get['enabled'](){return this['_enabled'];}['onEnable'](){this['_beingEnab'+'led']=!(-0x2*0x63a+0x7*-0x2f9+0x41*0x83),this['_checkStat'+'e'](),this['entity']['_beingEnab'+'led']||this['onPostStat'+'eChange'](),this['_beingEnab'+'led']=!(0x5b9+-0x13d7+0xe1f);}['onDisable'](){this['_checkStat'+'e']();}['onPostStat'+'eChange'](){const _0x2feaad=this['_beginLoop'+'ing']();for(let _0x3f2aac=-0xa*0x359+-0x12ca+0x3444,_0x5ec5c4=this['scripts']['length'];_0x3f2aac<_0x5ec5c4;_0x3f2aac++){const _0x2a6059=this['scripts'][_0x3f2aac];_0x2a6059['_initializ'+'ed']&&!_0x2a6059['_postIniti'+'alized']&&_0x2a6059['enabled']&&(_0x2a6059['_postIniti'+'alized']=!(0x3*-0x1d3+0x1b*-0x110+-0x9f*-0x37),_0x2a6059['postInitia'+'lize']&&this['_scriptMet'+'hod'](_0x2a6059,zu));}this['_endLoopin'+'g'](_0x2feaad);}['_beginLoop'+'ing'](){const _0x3b41ad=this['_isLooping'+'ThroughScr'+'ipts'];return this['_isLooping'+'ThroughScr'+'ipts']=!(-0xcc7*0x2+0x11e*-0x1+0x1aac),_0x3b41ad;}['_endLoopin'+'g'](_0x1bd360){this['_isLooping'+'ThroughScr'+'ipts']=_0x1bd360,this['_isLooping'+'ThroughScr'+'ipts']||this['_removeDes'+'troyedScri'+'pts']();}['_onSetEnab'+'led'](_0x2193e7,_0x674c0,_0x4c8b22){this['_beingEnab'+'led']=!(-0x3c*-0x13+0x26f8+-0x2b6c),this['_checkStat'+'e'](),this['_beingEnab'+'led']=!(-0xcf6+0x21c1*-0x1+0x2eb8);}['_checkStat'+'e'](){const _0x5616e5=this['enabled']&&this['entity']['enabled'];if(_0x5616e5===this['_oldState'])return;this['_oldState']=_0x5616e5,this['fire'](_0x5616e5?'enable':'disable'),this['fire']('state',_0x5616e5),_0x5616e5?this['system']['_addCompon'+'entToEnabl'+'ed'](this):this['system']['_removeCom'+'ponentFrom'+'Enabled'](this);const _0x50cec1=this['_beginLoop'+'ing']();for(let _0x58ade3=0x152b*-0x1+0x199+-0x2*-0x9c9,_0x1e5b05=this['scripts']['length'];_0x58ade3<_0x1e5b05;_0x58ade3++){const _0x1dcedb=this['scripts'][_0x58ade3];_0x1dcedb['once']('preInitial'+'ize',()=>{this['initialize'+'Attributes'](_0x1dcedb);}),_0x1dcedb['enabled']=_0x1dcedb['_enabled'];}this['_endLoopin'+'g'](_0x50cec1);}['_onBeforeR'+'emove'](){this['fire']('remove');const _0x51cdd9=this['_beginLoop'+'ing']();for(let _0x98deb0=0x847+0x528+-0xd6f;_0x98deb0<this['scripts']['length'];_0x98deb0++){const _0x22fd68=this['scripts'][_0x98deb0];_0x22fd68&&this['destroy'](_0x22fd68['__scriptTy'+'pe']['__name']);}this['_endLoopin'+'g'](_0x51cdd9);}['_removeDes'+'troyedScri'+'pts'](){const _0x32da6c=this['_destroyed'+'Scripts']['length'];if(_0x32da6c){for(let _0x1892de=-0x1*-0x445+-0x1eef+0x1aaa;_0x1892de<_0x32da6c;_0x1892de++){const _0x19a7dc=this['_destroyed'+'Scripts'][_0x1892de];this['_removeScr'+'iptInstanc'+'e'](_0x19a7dc);}this['_destroyed'+'Scripts']['length']=-0x1242+-0x176a+0x29ac,this['_resetExec'+'utionOrder'](-0xe61+-0x5f4+0x1455,this['_scripts']['length']);}}['_onInitial'+'izeAttribu'+'tes'](){for(let _0x5abf6b=0x23b1*-0x1+0x4*-0x747+0x40cd,_0x3c8789=this['scripts']['length'];_0x5abf6b<_0x3c8789;_0x5abf6b++){const _0xbbc918=this['scripts'][_0x5abf6b];this['initialize'+'Attributes'](_0xbbc918);}}['initialize'+'Attributes'](_0x2df4d9){var _0x2e6e16;if(_0x2df4d9 instanceof Wo)_0x2df4d9['__initiali'+'zeAttribut'+'es']();else{const _0xe1203=_0x2df4d9['__scriptTy'+'pe']['__name'],_0x437df7=this['_attribute'+'DataMap']['get'](_0xe1203);if(!_0x437df7)return;const _0x4c0ac5=(_0x2e6e16=this['system']['app']['scripts'])==null?void(-0x1049+0x134c+0x303*-0x1):_0x2e6e16['getSchema'](_0xe1203);_0x4c0ac5||w['warnOnce']('No\x20schema\x20'+'exists\x20for'+'\x20the\x20scrip'+'t\x20\x27'+_0xe1203+('\x27.\x20A\x20schem'+'a\x20must\x20exi'+'st\x20for\x20dat'+'a\x20to\x20be\x20in'+'stantiated'+'\x20on\x20the\x20sc'+'ript.')),g0(this['system']['app'],_0x4c0ac5['attributes'],_0x437df7,_0x2df4d9);}}['_scriptMet'+'hod'](_0x4641c7,_0x37c2b0,_0x46b368){try{_0x4641c7[_0x37c2b0](_0x46b368);}catch(_0x5649f5){_0x4641c7['enabled']=!(0xabd*-0x1+0x1*0x2325+-0x1*0x1867),_0x4641c7['hasEvent']('error')||(console['warn']('unhandled\x20'+'exception\x20'+'while\x20call'+'ing\x20\x22'+_0x37c2b0+'\x22\x20for\x20\x22'+_0x4641c7['__scriptTy'+'pe']['__name']+'\x22\x20script:\x20',_0x5649f5),console['error'](_0x5649f5)),_0x4641c7['fire']('error',_0x5649f5,_0x37c2b0),this['fire']('error',_0x4641c7,_0x5649f5,_0x37c2b0);}}['_onInitial'+'ize'](){const _0xf7c26e=this['_scripts'],_0x11a718=this['_beginLoop'+'ing']();for(let _0xcd6d85=0x1d11*-0x1+-0x21e3*0x1+0x3b4*0x11,_0x4a6574=_0xf7c26e['length'];_0xcd6d85<_0x4a6574;_0xcd6d85++){const _0x501344=_0xf7c26e[_0xcd6d85];!_0x501344['_initializ'+'ed']&&_0x501344['enabled']&&(_0x501344['_initializ'+'ed']=!(-0x257b+-0x2511+-0x4*-0x12a3),_0x501344['initialize']&&this['_scriptMet'+'hod'](_0x501344,Bu));}this['_endLoopin'+'g'](_0x11a718);}['_onPostIni'+'tialize'](){this['onPostStat'+'eChange']();}['_onUpdate'](_0x52389a){const _0x35abd5=this['_updateLis'+'t'];if(!_0x35abd5['length'])return;const _0x2477c3=this['_beginLoop'+'ing']();for(_0x35abd5['loopIndex']=0x1ff6+-0xd50+0x4d*-0x3e;_0x35abd5['loopIndex']<_0x35abd5['length'];_0x35abd5['loopIndex']++){const _0x3555bf=_0x35abd5['items'][_0x35abd5['loopIndex']];_0x3555bf['enabled']&&this['_scriptMet'+'hod'](_0x3555bf,AF,_0x52389a);}this['_endLoopin'+'g'](_0x2477c3);}['_onPostUpd'+'ate'](_0x58f2a0){const _0x297704=this['_postUpdat'+'eList'];if(!_0x297704['length'])return;const _0x5c68a1=this['_beginLoop'+'ing']();for(_0x297704['loopIndex']=0x21ce*-0x1+0x14*0x34+0x1dbe;_0x297704['loopIndex']<_0x297704['length'];_0x297704['loopIndex']++){const _0x1e6c48=_0x297704['items'][_0x297704['loopIndex']];_0x1e6c48['enabled']&&this['_scriptMet'+'hod'](_0x1e6c48,CF,_0x58f2a0);}this['_endLoopin'+'g'](_0x5c68a1);}['_insertScr'+'iptInstanc'+'e'](_0x44002f,_0x27bb1b,_0x18dd08){_0x27bb1b===-(-0x1*0x244d+-0x200a+0x2d9*0x18)?(this['_scripts']['push'](_0x44002f),_0x44002f['__executio'+'nOrder']=_0x18dd08,_0x44002f['update']&&this['_updateLis'+'t']['append'](_0x44002f),_0x44002f['postUpdate']&&this['_postUpdat'+'eList']['append'](_0x44002f)):(this['_scripts']['splice'](_0x27bb1b,-0x1eb+0x3d*0x4f+-0x10e8,_0x44002f),_0x44002f['__executio'+'nOrder']=_0x27bb1b,this['_resetExec'+'utionOrder'](_0x27bb1b+(-0x1*-0x1e47+-0x2041+-0xd*-0x27),_0x18dd08+(0x2*0x11c3+-0x82*0x8+-0x1f75)),_0x44002f['update']&&this['_updateLis'+'t']['insert'](_0x44002f),_0x44002f['postUpdate']&&this['_postUpdat'+'eList']['insert'](_0x44002f));}['_removeScr'+'iptInstanc'+'e'](_0xd7dd34){const _0x30249c=this['_scripts']['indexOf'](_0xd7dd34);return _0x30249c===-(-0x1*-0xf4f+-0x1*0x1ed6+0xf88)||(this['_scripts']['splice'](_0x30249c,-0x32d*-0x1+-0xa3*0x13+0x8ed),_0xd7dd34['update']&&this['_updateLis'+'t']['remove'](_0xd7dd34),_0xd7dd34['postUpdate']&&this['_postUpdat'+'eList']['remove'](_0xd7dd34)),_0x30249c;}['_resetExec'+'utionOrder'](_0x3ce7c2,_0x1edc6f){for(let _0x330468=_0x3ce7c2;_0x330468<_0x1edc6f;_0x330468++)this['_scripts'][_0x330468]['__executio'+'nOrder']=_0x330468;}['_resolveEn'+'tityScript'+'Attribute'](_0x2a80a4,_0x138bee,_0x3afc4c,_0x53463c,_0x4d8a12,_0x2fe89a){if(_0x2a80a4['array']){const _0x51963d=_0x3afc4c['length'];if(!_0x51963d)return;const _0x46a913=_0x3afc4c['slice']();for(let _0xdb63ec=-0x2035+-0x522+0x1*0x2557;_0xdb63ec<_0x51963d;_0xdb63ec++){const _0x4f82ee=_0x46a913[_0xdb63ec]instanceof lt?_0x46a913[_0xdb63ec]['getGuid']():_0x46a913[_0xdb63ec];_0x2fe89a[_0x4f82ee]&&(_0x46a913[_0xdb63ec]=_0x53463c?_0x2fe89a[_0x4f82ee]['getGuid']():_0x2fe89a[_0x4f82ee]);}_0x4d8a12[_0x138bee]=_0x46a913;}else{if(_0x3afc4c instanceof lt)_0x3afc4c=_0x3afc4c['getGuid']();else{if(typeof _0x3afc4c!='string')return;}_0x2fe89a[_0x3afc4c]&&(_0x4d8a12[_0x138bee]=_0x2fe89a[_0x3afc4c]);}}['has'](_0x11be3b){if(typeof _0x11be3b=='string')return!!this['_scriptsIn'+'dex'][_0x11be3b];if(!_0x11be3b)return!(0x126f+-0x10fd+0x9*-0x29);const _0x471052=_0x11be3b,_0x2f960e=_0x471052['__name'],_0x30056b=this['_scriptsIn'+'dex'][_0x2f960e];return(_0x30056b&&_0x30056b['instance'])instanceof _0x471052;}['get'](_0x29d104){if(typeof _0x29d104=='string'){const _0x27224f=this['_scriptsIn'+'dex'][_0x29d104];return _0x27224f?_0x27224f['instance']:null;}if(!_0x29d104)return null;const _0x125280=_0x29d104,_0x4f7973=_0x125280['__name'],_0x557010=this['_scriptsIn'+'dex'][_0x4f7973],_0x1268d8=_0x557010&&_0x557010['instance'];return _0x1268d8 instanceof _0x125280?_0x1268d8:null;}['create'](_0x3cf58a,_0x324497={}){const _0x6cad11=this;let _0x3231c5=_0x3cf58a,_0x14da76=_0x3cf58a;if(typeof _0x3231c5=='string')_0x3231c5=this['system']['app']['scripts']['get'](_0x3231c5);else{if(_0x3231c5){const _0x2171ca=S0(_0x3231c5),_0x2a1f2a=DF(_0x2171ca);!(_0x3231c5['prototype']instanceof Wo)&&!_0x3231c5['scriptName']&&w['warnOnce']('The\x20Script'+'\x20class\x20\x22'+_0x2171ca+('\x22\x20must\x20hav'+'e\x20a\x20static'+'\x20\x22scriptNa'+'me\x22\x20proper'+'ty:\x20`')+_0x2171ca+('.scriptNam'+'e\x20=\x20\x22')+_0x2a1f2a+('\x22;`.\x20This\x20'+'will\x20be\x20an'+'\x20error\x20in\x20'+'future\x20ver'+'sions\x20of\x20P'+'layCanvas.')),_0x3231c5['__name']??(_0x3231c5['__name']=_0x3231c5['scriptName']??_0x2a1f2a),_0x14da76=_0x3231c5['__name'];}}if(_0x3231c5){if(!this['_scriptsIn'+'dex'][_0x14da76]||!this['_scriptsIn'+'dex'][_0x14da76]['instance']){const _0x48fcf6=new _0x3231c5({'app':this['system']['app'],'entity':this['entity'],'enabled':_0x324497['hasOwnProp'+'erty']('enabled')?_0x324497['enabled']:!(0x91e+0x410+-0xe*0xf1),'attributes':_0x324497['attributes']||{}});_0x324497['properties']&&typeof _0x324497['properties']=='object'&&Object['assign'](_0x48fcf6,_0x324497['properties']),_0x48fcf6 instanceof Wo||this['_attribute'+'DataMap']['set'](_0x14da76,_0x324497['attributes']);const _0x352bea=this['_scripts']['length'];let _0x593d8d=-(0x4d*0x71+0x5e3*-0x3+-0x1053*0x1);return typeof _0x324497['ind']=='number'&&_0x324497['ind']!==-(-0x8b+-0xfe*0x2+0x288)&&_0x352bea>_0x324497['ind']&&(_0x593d8d=_0x324497['ind']),this['_insertScr'+'iptInstanc'+'e'](_0x48fcf6,_0x593d8d,_0x352bea),this['_scriptsIn'+'dex'][_0x14da76]={'instance':_0x48fcf6,'onSwap':function(){_0x6cad11['swap'](_0x14da76);}},this[_0x14da76]=_0x48fcf6,_0x324497['preloading']||this['initialize'+'Attributes'](_0x48fcf6),this['fire']('create',_0x14da76,_0x48fcf6),this['fire']('create:'+_0x14da76,_0x48fcf6),this['system']['app']['scripts']['on']('swap:'+_0x14da76,this['_scriptsIn'+'dex'][_0x14da76]['onSwap']),_0x324497['preloading']||(_0x48fcf6['enabled']&&!_0x48fcf6['_initializ'+'ed']&&(_0x48fcf6['_initializ'+'ed']=!(-0x6cd*-0x1+-0x1*0x1cb4+-0x3f*-0x59),_0x48fcf6['initialize']&&this['_scriptMet'+'hod'](_0x48fcf6,Bu)),_0x48fcf6['enabled']&&!_0x48fcf6['_postIniti'+'alized']&&(_0x48fcf6['_postIniti'+'alized']=!(0x1b33+-0xfab+-0xb88),_0x48fcf6['postInitia'+'lize']&&this['_scriptMet'+'hod'](_0x48fcf6,zu))),_0x48fcf6;}w['warn']('script\x20\x27'+_0x14da76+('\x27\x20is\x20alrea'+'dy\x20added\x20t'+'o\x20entity\x20\x27')+this['entity']['name']+'\x27');}else this['_scriptsIn'+'dex'][_0x14da76]={'awaiting':!(-0x55a+0x92+-0xc*-0x66),'ind':this['_scripts']['length']},w['warn']('script\x20\x27'+_0x14da76+('\x27\x20is\x20not\x20f'+'ound,\x20awai'+'ting\x20it\x20to'+'\x20be\x20added\x20'+'to\x20registr'+'y'));return null;}['destroy'](_0x169737){let _0x1f1478=_0x169737,_0x3501dc=_0x169737;typeof _0x3501dc=='string'?_0x3501dc=this['system']['app']['scripts']['get'](_0x3501dc):_0x3501dc&&(_0x1f1478=_0x3501dc['__name']);const _0x751b47=this['_scriptsIn'+'dex'][_0x1f1478];if(delete this['_scriptsIn'+'dex'][_0x1f1478],!_0x751b47)return!(0x1272*0x1+0x2*-0x94f+0x2d);this['_attribute'+'DataMap']['delete'](_0x1f1478);const _0x382081=_0x751b47['instance'];if(_0x382081&&!_0x382081['_destroyed']){if(_0x382081['enabled']=!(-0x2417*0x1+-0x591+0x29a9),_0x382081['_destroyed']=!(-0x1*-0x11d9+0x24e0+0x36b9*-0x1),this['_isLooping'+'ThroughScr'+'ipts'])this['_destroyed'+'Scripts']['push'](_0x382081);else{const _0x29841d=this['_removeScr'+'iptInstanc'+'e'](_0x382081);_0x29841d>=0x1a93+-0x26bf+-0xa4*-0x13&&this['_resetExec'+'utionOrder'](_0x29841d,this['_scripts']['length']);}}return this['system']['app']['scripts']['off']('swap:'+_0x1f1478,_0x751b47['onSwap']),delete this[_0x1f1478],this['fire']('destroy',_0x1f1478,_0x382081||null),this['fire']('destroy:'+_0x1f1478,_0x382081||null),_0x382081&&_0x382081['fire']('destroy'),!(0xcd0+-0xa1*-0x31+-0x2ba1);}['swap'](_0x9e62ea){let _0x2fe054=_0x9e62ea,_0x2411a0=_0x9e62ea;typeof _0x2411a0=='string'?_0x2411a0=this['system']['app']['scripts']['get'](_0x2411a0):_0x2411a0&&(_0x2fe054=_0x2411a0['__name']);const _0x41f215=this['_scriptsIn'+'dex'][_0x2fe054];if(!_0x41f215||!_0x41f215['instance'])return!(0x244c+-0x1d7d+-0x6ce);const _0x5a3262=_0x41f215['instance'],_0x25e365=this['_scripts']['indexOf'](_0x5a3262),_0x249687=new _0x2411a0({'app':this['system']['app'],'entity':this['entity'],'enabled':_0x5a3262['enabled'],'attributes':_0x5a3262['__attribut'+'es']});return _0x249687['swap']?(this['initialize'+'Attributes'](_0x249687),this['_scripts'][_0x25e365]=_0x249687,this['_scriptsIn'+'dex'][_0x2fe054]['instance']=_0x249687,this[_0x2fe054]=_0x249687,_0x249687['__executio'+'nOrder']=_0x25e365,_0x5a3262['update']&&this['_updateLis'+'t']['remove'](_0x5a3262),_0x5a3262['postUpdate']&&this['_postUpdat'+'eList']['remove'](_0x5a3262),_0x249687['update']&&this['_updateLis'+'t']['insert'](_0x249687),_0x249687['postUpdate']&&this['_postUpdat'+'eList']['insert'](_0x249687),this['_scriptMet'+'hod'](_0x249687,PF,_0x5a3262),this['fire']('swap',_0x2fe054,_0x249687),this['fire']('swap:'+_0x2fe054,_0x249687),!(-0x7*-0x44f+-0x62*-0x11+-0x3f*0x95)):!(-0xc77*-0x2+-0x1e*-0x138+0x9f*-0x63);}['resolveDup'+'licatedEnt'+'ityReferen'+'ceProperti'+'es'](_0x3432be,_0x208ecd){var _0xb6a1c9,_0x38fcf8,_0x1b3608;const _0x55dbda=this['entity']['script'];for(const _0xbed038 in _0x3432be['_scriptsIn'+'dex']){const _0x7800de=this['system']['app']['scripts']['get'](_0xbed038);if(!_0x7800de)continue;const _0x3dad9b=_0x3432be['_scriptsIn'+'dex'][_0xbed038];if(!_0x3dad9b||!_0x3dad9b['instance'])continue;const _0x5d0662=_0x55dbda[_0xbed038]['__attribut'+'esRaw']??_0x55dbda['_attribute'+'DataMap']['get'](_0xbed038),_0x3d233e=_0x55dbda[_0xbed038]['__attribut'+'es'];if(!_0x5d0662&&!_0x3d233e)continue;const _0x124067=!!_0x5d0662,_0x3634ae=_0x3dad9b['instance']['__attribut'+'es']??_0x55dbda['_attribute'+'DataMap']['get'](_0xbed038);for(const _0x570893 in _0x3634ae){if(!_0x3634ae[_0x570893])continue;const _0x179b09=((_0xb6a1c9=_0x7800de['attributes'])==null?void(-0x1a6e+0x1c26+-0x1b8):_0xb6a1c9['get'](_0x570893))??((_0x1b3608=(_0x38fcf8=this['system']['app']['scripts']['getSchema'](_0xbed038))==null?void(0x1d48+-0x723+-0x1625):_0x38fcf8['attributes'])==null?void(-0x1*-0x2367+-0x7b1+-0x1bb6*0x1):_0x1b3608[_0x570893]);if(_0x179b09){if(_0x179b09['type']==='entity')this['_resolveEn'+'tityScript'+'Attribute'](_0x179b09,_0x570893,_0x3634ae[_0x570893],_0x124067,_0x5d0662||_0x3d233e,_0x208ecd);else{if(_0x179b09['type']==='json'&&Array['isArray'](_0x179b09['schema'])){const _0x3ef78d=_0x3634ae[_0x570893],_0x531b43=_0x5d0662?_0x5d0662[_0x570893]:_0x3d233e[_0x570893];for(let _0x3278db=-0x1*0xcac+-0x1c06+-0x2*-0x1459;_0x3278db<_0x179b09['schema']['length'];_0x3278db++){const _0x3b4b00=_0x179b09['schema'][_0x3278db];if(_0x3b4b00['type']==='entity'){if(_0x179b09['array']){for(let _0x5b9489=-0x3*-0xbc9+0x1e*0x22+-0x175*0x1b;_0x5b9489<_0x3ef78d['length'];_0x5b9489++)this['_resolveEn'+'tityScript'+'Attribute'](_0x3b4b00,_0x3b4b00['name'],_0x3ef78d[_0x5b9489][_0x3b4b00['name']],_0x124067,_0x531b43[_0x5b9489],_0x208ecd);}else this['_resolveEn'+'tityScript'+'Attribute'](_0x3b4b00,_0x3b4b00['name'],_0x3ef78d[_0x3b4b00['name']],_0x124067,_0x531b43,_0x208ecd);}}}}}}}}['move'](_0x26966d,_0x38d687){const _0x3b4493=this['_scripts']['length'];if(_0x38d687>=_0x3b4493||_0x38d687<-0x3*0x6c5+0x37*0x4+0x1373)return!(-0x1734+0x39*-0x9e+0x3a63);let _0x1f6845=_0x26966d,_0x3af198=_0x26966d;typeof _0x3af198!='string'?_0x3af198=_0x26966d['__name']:_0x1f6845=null;const _0x43f50d=this['_scriptsIn'+'dex'][_0x3af198];if(!_0x43f50d||!_0x43f50d['instance'])return!(0x2345*-0x1+0x14f6+0xe50);const _0x7e2e12=_0x43f50d['instance'];if(_0x1f6845&&!(_0x7e2e12 instanceof _0x1f6845))return!(-0x1*-0x1ef9+-0x158*0x12+-0x364*0x2);const _0x25a88f=this['_scripts']['indexOf'](_0x7e2e12);return _0x25a88f===-(-0x1173*0x1+-0x17*0x9+-0x1243*-0x1)||_0x25a88f===_0x38d687?!(0xe94+-0xff8+0x165):(this['_scripts']['splice'](_0x38d687,0x835*-0x2+-0x1cfc+0x2d66,this['_scripts']['splice'](_0x25a88f,-0x1d*-0x103+-0x20ff+0x3a9*0x1)[0x1*0x1f7b+0x1*-0x15c5+-0x9b6]),this['_resetExec'+'utionOrder'](-0x1bd9+-0x11b*-0x5+-0xb29*-0x2,_0x3b4493),this['_updateLis'+'t']['sort'](),this['_postUpdat'+'eList']['sort'](),this['fire']('move',_0x3af198,_0x7e2e12,_0x38d687,_0x25a88f),this['fire']('move:'+_0x3af198,_0x7e2e12,_0x38d687,_0x25a88f),!(0x1429+-0x1ce6+0x8bd));}}h(Ii,'EVENT_CREA'+'TE','create'),h(Ii,'EVENT_DEST'+'ROY','destroy'),h(Ii,'EVENT_ENAB'+'LE','enable'),h(Ii,'EVENT_DISA'+'BLE','disable'),h(Ii,'EVENT_REMO'+'VE','remove'),h(Ii,'EVENT_STAT'+'E','state'),h(Ii,'EVENT_MOVE','move'),h(Ii,'EVENT_ERRO'+'R','error');class IF{constructor(){this['enabled']=!(-0x1d43+0x61*0x2b+-0x53*-0x28);}}const LF='_onInitial'+'izeAttribu'+'tes',RF='_onInitial'+'ize',OF='_onPostIni'+'tialize',FF='_onUpdate',NF='_onPostUpd'+'ate';let Mc=0xa9+-0x95+-0xa*0x2;class kF extends ct{constructor(_0x5512f8){super(_0x5512f8),this['id']='script',this['ComponentT'+'ype']=Ii,this['DataType']=IF,this['_component'+'s']=new oh({'sortBy':'_execution'+'Order'}),this['_enabledCo'+'mponents']=new oh({'sortBy':'_execution'+'Order'}),this['preloading']=!(0x22ec+-0x4*0x7f6+-0x2*0x18a),this['on']('beforeremo'+'ve',this['_onBeforeR'+'emove'],this),this['app']['systems']['on']('initialize',this['_onInitial'+'ize'],this),this['app']['systems']['on']('postInitia'+'lize',this['_onPostIni'+'tialize'],this),this['app']['systems']['on']('update',this['_onUpdate'],this),this['app']['systems']['on']('postUpdate',this['_onPostUpd'+'ate'],this);}['initialize'+'ComponentD'+'ata'](_0x3d45e8,_0x4ef365){if(_0x3d45e8['_execution'+'Order']=Mc++,this['_component'+'s']['append'](_0x3d45e8),Mc>Number['MAX_SAFE_I'+'NTEGER']&&this['_resetExec'+'utionOrder'](),_0x3d45e8['enabled']=_0x4ef365['hasOwnProp'+'erty']('enabled')?!!_0x4ef365['enabled']:!(-0x11d0+-0x9*-0x49+-0x515*-0x3),_0x3d45e8['enabled']&&_0x3d45e8['entity']['enabled']&&this['_enabledCo'+'mponents']['append'](_0x3d45e8),_0x4ef365['hasOwnProp'+'erty']('order')&&_0x4ef365['hasOwnProp'+'erty']('scripts')){_0x3d45e8['_scriptsDa'+'ta']=_0x4ef365['scripts'];for(let _0x53336e=-0x1404+0x155*-0xc+-0x2400*-0x1;_0x53336e<_0x4ef365['order']['length'];_0x53336e++)_0x3d45e8['create'](_0x4ef365['order'][_0x53336e],{'enabled':_0x4ef365['scripts'][_0x4ef365['order'][_0x53336e]]['enabled'],'attributes':_0x4ef365['scripts'][_0x4ef365['order'][_0x53336e]]['attributes'],'preloading':this['preloading']});}}['cloneCompo'+'nent'](_0x20c6d5,_0x47e6c5){var _0xd2f769;const _0x281496=[],_0x338b1f={};for(let _0x5d0ec6=0x1a37+-0x1424+-0x613;_0x5d0ec6<_0x20c6d5['script']['_scripts']['length'];_0x5d0ec6++){const _0x20e758=_0x20c6d5['script']['_scripts'][_0x5d0ec6],_0x2646e2=_0x20e758['__scriptTy'+'pe']['__name'];_0x281496['push'](_0x2646e2);const _0x1d6420=((_0xd2f769=_0x20c6d5['script']['_attribute'+'DataMap'])==null?void(0xe4d+0x119*0x3+-0x1198):_0xd2f769['get'](_0x2646e2))||{};for(const _0xc13e25 in _0x20e758['__attribut'+'es'])_0x1d6420[_0xc13e25]=_0x20e758['__attribut'+'es'][_0xc13e25];_0x338b1f[_0x2646e2]={'enabled':_0x20e758['_enabled'],'attributes':_0x1d6420};}for(const _0x6a875f in _0x20c6d5['script']['_scriptsIn'+'dex'])_0x6a875f['awaiting']&&_0x281496['splice'](_0x6a875f['ind'],0xc33*0x2+0x4fa*-0x1+-0x136c,_0x6a875f);const _0x37d838={'enabled':_0x20c6d5['script']['enabled'],'order':_0x281496,'scripts':_0x338b1f};return this['addCompone'+'nt'](_0x47e6c5,_0x37d838);}['_resetExec'+'utionOrder'](){Mc=0x1*0x17c2+-0x1ced+0x1b*0x31;for(let _0x4244f5=-0x61*0xd+-0x1*-0xe0e+-0x30b*0x3,_0x41a017=this['_component'+'s']['length'];_0x4244f5<_0x41a017;_0x4244f5++)this['_component'+'s']['items'][_0x4244f5]['_execution'+'Order']=Mc++;}['_callCompo'+'nentMethod'](_0x3904b3,_0x159c5c,_0x2f2d49){for(_0x3904b3['loopIndex']=-0x1261+-0x53*0xc+-0x1*-0x1645;_0x3904b3['loopIndex']<_0x3904b3['length'];_0x3904b3['loopIndex']++)_0x3904b3['items'][_0x3904b3['loopIndex']][_0x159c5c](_0x2f2d49);}['_onInitial'+'ize'](){this['preloading']=!(0x12f3+-0x2*-0xcac+0x2*-0x1625),this['_callCompo'+'nentMethod'](this['_component'+'s'],LF),this['_callCompo'+'nentMethod'](this['_enabledCo'+'mponents'],RF);}['_onPostIni'+'tialize'](){this['_callCompo'+'nentMethod'](this['_enabledCo'+'mponents'],OF);}['_onUpdate'](_0x3c17c3){this['_callCompo'+'nentMethod'](this['_enabledCo'+'mponents'],FF,_0x3c17c3);}['_onPostUpd'+'ate'](_0x3d97dd){this['_callCompo'+'nentMethod'](this['_enabledCo'+'mponents'],NF,_0x3d97dd);}['_addCompon'+'entToEnabl'+'ed'](_0xf093e5){this['_enabledCo'+'mponents']['insert'](_0xf093e5);}['_removeCom'+'ponentFrom'+'Enabled'](_0x143410){this['_enabledCo'+'mponents']['remove'](_0x143410);}['_onBeforeR'+'emove'](_0x59dab9,_0x202065){this['_component'+'s']['items']['indexOf'](_0x202065)>=0x8e4+-0x1d45+-0x1461*-0x1&&_0x202065['_onBeforeR'+'emove'](),this['_removeCom'+'ponentFrom'+'Enabled'](_0x202065),this['_component'+'s']['remove'](_0x202065);}['destroy'](){super['destroy'](),this['app']['systems']['off']('initialize',this['_onInitial'+'ize'],this),this['app']['systems']['off']('postInitia'+'lize',this['_onPostIni'+'tialize'],this),this['app']['systems']['off']('update',this['_onUpdate'],this),this['app']['systems']['off']('postUpdate',this['_onPostUpd'+'ate'],this);}}class y0 extends we{constructor(_0x5446ad,_0x178fca){super(_0x5446ad,_0x178fca),h(this,'_layers',[er]),h(this,'_instance',null),h(this,'_materialT'+'mp',null),h(this,'_highQuali'+'tySH',!(-0x8cb+0x1522+-0xc57)),h(this,'_customAab'+'b',null),h(this,'_assetRefe'+'rence'),h(this,'_evtLayers'+'Changed',null),h(this,'_evtLayerA'+'dded',null),h(this,'_evtLayerR'+'emoved',null),h(this,'_castShado'+'ws',!(-0x26cb+-0x7e4+0x3*0xf90)),(this['_assetRefe'+'rence']=new gl('asset',this,_0x5446ad['app']['assets'],{'add':this['_onGSplatA'+'ssetAdded'],'load':this['_onGSplatA'+'ssetLoad'],'remove':this['_onGSplatA'+'ssetRemove'],'unload':this['_onGSplatA'+'ssetUnload']},this),_0x178fca['on']('remove',this['onRemoveCh'+'ild'],this),_0x178fca['on']('removehier'+'archy',this['onRemoveCh'+'ild'],this),_0x178fca['on']('insert',this['onInsertCh'+'ild'],this),_0x178fca['on']('inserthier'+'archy',this['onInsertCh'+'ild'],this));}set['customAabb'](_0x3de5bd){var _0x34b020,_0x49e77a;this['_customAab'+'b']=_0x3de5bd,(_0x49e77a=(_0x34b020=this['_instance'])==null?void(0x5*-0x363+-0x1999+0x1544*0x2):_0x34b020['meshInstan'+'ce'])==null||_0x49e77a['setCustomA'+'abb'](this['_customAab'+'b']);}get['customAabb'](){return this['_customAab'+'b'];}set['instance'](_0x22d787){if(this['destroyIns'+'tance'](),this['_instance']=_0x22d787,this['_instance']){const _0xe341b9=this['_instance']['meshInstan'+'ce'];_0xe341b9['node']||(_0xe341b9['node']=this['entity']),_0xe341b9['castShadow']=this['_castShado'+'ws'],_0xe341b9['setCustomA'+'abb'](this['_customAab'+'b']),this['enabled']&&this['entity']['enabled']&&this['addToLayer'+'s']();}}get['instance'](){return this['_instance'];}set['material'](_0x2e133b){this['_instance']?this['_instance']['material']=_0x2e133b:this['_materialT'+'mp']=_0x2e133b;}get['material'](){var _0x2ac8fe;return((_0x2ac8fe=this['_instance'])==null?void(0x1a40+0x1ba2+-0x35e2):_0x2ac8fe['material'])??this['_materialT'+'mp']??null;}set['highQualit'+'ySH'](_0x5790be){_0x5790be!==this['_highQuali'+'tySH']&&(this['_highQuali'+'tySH']=_0x5790be,this['_instance']&&this['_instance']['setHighQua'+'litySH'](_0x5790be));}get['highQualit'+'ySH'](){return this['_highQuali'+'tySH'];}set['castShadow'+'s'](_0xd13d19){var _0x2e48c9;if(this['_castShado'+'ws']!==_0xd13d19){const _0x5280c0=(_0x2e48c9=this['instance'])==null?void(0x105b+-0xa3*0x35+0x27c*0x7):_0x2e48c9['meshInstan'+'ce'];if(_0x5280c0){const _0x333065=this['layers'],_0x5884cd=this['system']['app']['scene'];if(this['_castShado'+'ws']&&!_0xd13d19)for(let _0x39c94a=0x1*-0x22f8+0x6eb+0x1c0d;_0x39c94a<_0x333065['length'];_0x39c94a++){const _0x3d8c2a=_0x5884cd['layers']['getLayerBy'+'Id'](this['layers'][_0x39c94a]);_0x3d8c2a&&_0x3d8c2a['removeShad'+'owCasters']([_0x5280c0]);}if(_0x5280c0['castShadow']=_0xd13d19,!this['_castShado'+'ws']&&_0xd13d19)for(let _0x2c8331=0x3b0*0x8+-0x57b+-0x1805*0x1;_0x2c8331<_0x333065['length'];_0x2c8331++){const _0x3615f0=_0x5884cd['layers']['getLayerBy'+'Id'](_0x333065[_0x2c8331]);_0x3615f0&&_0x3615f0['addShadowC'+'asters']([_0x5280c0]);}}this['_castShado'+'ws']=_0xd13d19;}}get['castShadow'+'s'](){return this['_castShado'+'ws'];}set['layers'](_0x1a532f){this['removeFrom'+'Layers'](),this['_layers']['length']=0xf65+0x1*-0x223f+0x12da;for(let _0x40fe53=0x1*0x1be6+0x1*-0xec5+-0xd21*0x1;_0x40fe53<_0x1a532f['length'];_0x40fe53++)this['_layers'][_0x40fe53]=_0x1a532f[_0x40fe53];!this['enabled']||!this['entity']['enabled']||this['addToLayer'+'s']();}get['layers'](){return this['_layers'];}set['asset'](_0x435e1f){const _0x404d5d=_0x435e1f instanceof pe?_0x435e1f['id']:_0x435e1f;this['_assetRefe'+'rence']['id']!==_0x404d5d&&(this['_assetRefe'+'rence']['asset']&&this['_assetRefe'+'rence']['asset']['resource']&&this['_onGSplatA'+'ssetRemove'](),this['_assetRefe'+'rence']['id']=_0x404d5d,this['_assetRefe'+'rence']['asset']&&this['_onGSplatA'+'ssetAdded']());}get['asset'](){return this['_assetRefe'+'rence']['id'];}['destroyIns'+'tance'](){var _0xa67607;this['_instance']&&(this['removeFrom'+'Layers'](),(_0xa67607=this['_instance'])==null||_0xa67607['destroy'](),this['_instance']=null);}['addToLayer'+'s'](){var _0x463f96,_0x1eebfb;const _0x41f346=(_0x463f96=this['instance'])==null?void(-0x1*0x602+0x1*0x2501+0x3*-0xa55):_0x463f96['meshInstan'+'ce'];if(_0x41f346){const _0x1dee80=this['system']['app']['scene']['layers'];for(let _0x11e66b=-0xb*0x2d7+-0x46*-0xb+-0x49*-0x63;_0x11e66b<this['_layers']['length'];_0x11e66b++)(_0x1eebfb=_0x1dee80['getLayerBy'+'Id'](this['_layers'][_0x11e66b]))==null||_0x1eebfb['addMeshIns'+'tances']([_0x41f346]);}}['removeFrom'+'Layers'](){var _0x240c21,_0x17264c;const _0x17c601=(_0x240c21=this['instance'])==null?void(-0x170+0x1234+-0x10c4):_0x240c21['meshInstan'+'ce'];if(_0x17c601){const _0x590481=this['system']['app']['scene']['layers'];for(let _0x30d2aa=0x79e+-0x295*0x8+-0x1*-0xd0a;_0x30d2aa<this['_layers']['length'];_0x30d2aa++)(_0x17264c=_0x590481['getLayerBy'+'Id'](this['_layers'][_0x30d2aa]))==null||_0x17264c['removeMesh'+'Instances']([_0x17c601]);}}['onRemoveCh'+'ild'](){this['removeFrom'+'Layers']();}['onInsertCh'+'ild'](){this['_instance']&&this['enabled']&&this['entity']['enabled']&&this['addToLayer'+'s']();}['onRemove'](){this['destroyIns'+'tance'](),this['asset']=null,this['_assetRefe'+'rence']['id']=null,this['entity']['off']('remove',this['onRemoveCh'+'ild'],this),this['entity']['off']('insert',this['onInsertCh'+'ild'],this);}['onLayersCh'+'anged'](_0x46cea4,_0x199f57){this['addToLayer'+'s'](),_0x46cea4['off']('add',this['onLayerAdd'+'ed'],this),_0x46cea4['off']('remove',this['onLayerRem'+'oved'],this),_0x199f57['on']('add',this['onLayerAdd'+'ed'],this),_0x199f57['on']('remove',this['onLayerRem'+'oved'],this);}['onLayerAdd'+'ed'](_0x4bae6a){this['layers']['indexOf'](_0x4bae6a['id'])<-0xad0+-0x5f3*-0x1+0x4dd||this['_instance']&&_0x4bae6a['addMeshIns'+'tances'](this['_instance']['meshInstan'+'ce']);}['onLayerRem'+'oved'](_0x252fbb){this['layers']['indexOf'](_0x252fbb['id'])<-0x7f4*-0x1+0x25*0x84+-0x5*0x568||this['_instance']&&_0x252fbb['removeMesh'+'Instances'](this['_instance']['meshInstan'+'ce']);}['onEnable'](){const _0x6f28f0=this['system']['app']['scene'],_0x31a024=_0x6f28f0['layers'];this['_evtLayers'+'Changed']=_0x6f28f0['on']('set:layers',this['onLayersCh'+'anged'],this),_0x31a024&&(this['_evtLayerA'+'dded']=_0x31a024['on']('add',this['onLayerAdd'+'ed'],this),this['_evtLayerR'+'emoved']=_0x31a024['on']('remove',this['onLayerRem'+'oved'],this)),this['_instance']?this['addToLayer'+'s']():this['asset']&&this['_onGSplatA'+'ssetAdded']();}['onDisable'](){var _0x22ed38,_0x56314c,_0x2ff09d;const _0x4c02f7=this['system']['app']['scene']['layers'];(_0x22ed38=this['_evtLayers'+'Changed'])==null||_0x22ed38['off'](),this['_evtLayers'+'Changed']=null,_0x4c02f7&&((_0x56314c=this['_evtLayerA'+'dded'])==null||_0x56314c['off'](),this['_evtLayerA'+'dded']=null,(_0x2ff09d=this['_evtLayerR'+'emoved'])==null||_0x2ff09d['off'](),this['_evtLayerR'+'emoved']=null),this['removeFrom'+'Layers']();}['hide'](){this['_instance']&&(this['_instance']['meshInstan'+'ce']['visible']=!(-0xa4c+0x1aca+-0x107d));}['show'](){this['_instance']&&(this['_instance']['meshInstan'+'ce']['visible']=!(-0x19bf+-0x155*0x19+0x3b0c));}['_onGSplatA'+'ssetAdded'](){this['_assetRefe'+'rence']['asset']&&(this['_assetRefe'+'rence']['asset']['resource']?this['_onGSplatA'+'ssetLoad']():this['enabled']&&this['entity']['enabled']&&this['system']['app']['assets']['load'](this['_assetRefe'+'rence']['asset']));}['_onGSplatA'+'ssetLoad'](){this['destroyIns'+'tance']();const _0x1d0e2c=this['_assetRefe'+'rence']['asset'];_0x1d0e2c&&(this['instance']=_0x1d0e2c['resource']['createInst'+'ance'](_0x1d0e2c['resource'],{'material':this['_materialT'+'mp'],'highQualitySH':this['_highQuali'+'tySH']}),this['_materialT'+'mp']=null,this['customAabb']=this['instance']['resource']['aabb']['clone']());}['_onGSplatA'+'ssetUnload'](){this['destroyIns'+'tance']();}['_onGSplatA'+'ssetRemove'](){this['_onGSplatA'+'ssetUnload']();}}class UF{constructor(){this['enabled']=!(0xf89+0x2f*-0xa4+0xe93);}}const Vu=['enabled'],To=['castShadow'+'s','material','highQualit'+'ySH','asset','layers'];class BF extends ct{constructor(_0x41c5b7){super(_0x41c5b7),this['id']='gsplat',this['ComponentT'+'ype']=y0,this['DataType']=UF,this['schema']=Vu,this['on']('beforeremo'+'ve',this['onRemove'],this);}['initialize'+'ComponentD'+'ata'](_0x16198c,_0xa735d6,_0x42bd63){_0xa735d6['layers']&&_0xa735d6['layers']['length']&&(_0xa735d6['layers']=_0xa735d6['layers']['slice'](0x15dc+0x1*-0x110d+-0x4cf*0x1));for(let _0x54dfbd=-0x108b+-0xc8+0x1153;_0x54dfbd<To['length'];_0x54dfbd++)_0xa735d6['hasOwnProp'+'erty'](To[_0x54dfbd])&&(_0x16198c[To[_0x54dfbd]]=_0xa735d6[To[_0x54dfbd]]);_0xa735d6['aabbCenter']&&_0xa735d6['aabbHalfEx'+'tents']&&(_0x16198c['customAabb']=new De(new D(_0xa735d6['aabbCenter']),new D(_0xa735d6['aabbHalfEx'+'tents']))),super['initialize'+'ComponentD'+'ata'](_0x16198c,_0xa735d6,Vu);}['cloneCompo'+'nent'](_0x134f72,_0x1db616){const _0x3eac32=_0x134f72['gsplat'],_0x12db8d={};To['forEach'](_0x1062d8=>{_0x1062d8==='material'?_0x12db8d[_0x1062d8]=_0x3eac32[_0x1062d8]['clone']():_0x12db8d[_0x1062d8]=_0x3eac32[_0x1062d8];}),_0x12db8d['enabled']=_0x3eac32['enabled'];const _0x5a589c=this['addCompone'+'nt'](_0x1db616,_0x12db8d);return _0x3eac32['customAabb']&&(_0x5a589c['customAabb']=_0x3eac32['customAabb']['clone']()),_0x5a589c;}['onRemove'](_0x25705a,_0x55b7f3){_0x55b7f3['onRemove']();}}we['_buildAcce'+'ssors'](y0['prototype'],Vu);class Em extends me{constructor(){super(...arguments),h(this,'_meshes',null);}set['meshes'](_0x1d88df){this['decRefMesh'+'es'](),this['_meshes']=_0x1d88df,this['incRefMesh'+'es'](),this['fire']('set:meshes',_0x1d88df);}get['meshes'](){return this['_meshes'];}['destroy'](){this['meshes']=null;}['decRefMesh'+'es'](){var _0x1959f1;(_0x1959f1=this['_meshes'])==null||_0x1959f1['forEach']((_0x1c105a,_0x15b729)=>{_0x1c105a&&(_0x1c105a['decRefCoun'+'t'](),_0x1c105a['refCount']<-0x362+-0x3a9*0x3+-0x1*-0xe5e&&(_0x1c105a['destroy'](),this['_meshes'][_0x15b729]=null));});}['incRefMesh'+'es'](){var _0x550fcf;(_0x550fcf=this['_meshes'])==null||_0x550fcf['forEach'](_0x16997a=>{_0x16997a==null||_0x16997a['incRefCoun'+'t']();});}}h(Em,'EVENT_SETM'+'ESHES','set:meshes');function sh(_0x52c250){const _0x411861=this;if(!_0x411861['resource'])return;const _0x4f854f=_0x52c250['resource'],_0x104766=_0x4f854f['renders']&&_0x4f854f['renders'][_0x411861['data']['renderInde'+'x']];_0x104766&&(_0x411861['resource']['meshes']=_0x104766['resource']['meshes']);}function pS(_0x595b23){const _0x310ee3=this;_0x310ee3['registry']['off']('load:'+_0x595b23['id'],sh,_0x310ee3),_0x310ee3['registry']['on']('load:'+_0x595b23['id'],sh,_0x310ee3),_0x310ee3['registry']['off']('remove:'+_0x595b23['id'],mS,_0x310ee3),_0x310ee3['registry']['once']('remove:'+_0x595b23['id'],mS,_0x310ee3),_0x595b23['resource']?sh['call'](_0x310ee3,_0x595b23):_0x310ee3['registry']['load'](_0x595b23);}function mS(_0x26919a){const _0x4823af=this;_0x4823af['registry']['off']('load:'+_0x26919a['id'],sh,_0x4823af),_0x4823af['resource']&&_0x4823af['resource']['destroy']();}class zF extends Qe{constructor(_0x24d860){super(_0x24d860,'render'),this['_registry']=_0x24d860['assets'];}['open'](_0x1f19d7,_0x40e8f6){return new Em();}['patch'](_0x25789f,_0x1325b7){if(!_0x25789f['data']['containerA'+'sset'])return;const _0x329029=_0x1325b7['get'](_0x25789f['data']['containerA'+'sset']);if(!_0x329029){_0x1325b7['once']('add:'+_0x25789f['data']['containerA'+'sset'],pS,_0x25789f);return;}pS['call'](_0x25789f,_0x329029);}}class v0{constructor(_0x16ff81,_0x5efd97,_0x22a17a,_0x5d9817){this['_paths']=_0x16ff81,this['_input']=_0x5efd97,this['_output']=_0x22a17a,this['_interpola'+'tion']=_0x5d9817;}get['paths'](){return this['_paths'];}get['input'](){return this['_input'];}get['output'](){return this['_output'];}get['interpolat'+'ion'](){return this['_interpola'+'tion'];}}class Fh{constructor(_0x2d9bdc,_0x5ca31f){this['_component'+'s']=_0x2d9bdc,this['_data']=_0x5ca31f;}get['components'](){return this['_component'+'s'];}get['data'](){return this['_data'];}}function VF(_0x368fac,_0x29c778){let _0x16cefe;const _0x235f1c=(_0x509aaa,_0x121935)=>{switch(_0x121935){case _0x16cefe['DT_INT8']:return new Int8Array(_0x509aaa['buffer'],_0x509aaa['byteOffset'],_0x509aaa['byteLength']);case _0x16cefe['DT_INT16']:return new Int16Array(_0x509aaa['buffer'],_0x509aaa['byteOffset'],_0x509aaa['byteLength']/(-0x1f91*-0x1+0x168d+-0x361c*0x1));case _0x16cefe['DT_INT32']:return new Int32Array(_0x509aaa['buffer'],_0x509aaa['byteOffset'],_0x509aaa['byteLength']/(0x107c+0xf5*0x1c+-0x4*0xad1));case _0x16cefe['DT_UINT8']:return new Uint8Array(_0x509aaa['buffer'],_0x509aaa['byteOffset'],_0x509aaa['byteLength']);case _0x16cefe['DT_UINT16']:return new Uint16Array(_0x509aaa['buffer'],_0x509aaa['byteOffset'],_0x509aaa['byteLength']/(-0x1*-0x16eb+-0x3*0x9a9+0x612));case _0x16cefe['DT_UINT32']:return new Uint32Array(_0x509aaa['buffer'],_0x509aaa['byteOffset'],_0x509aaa['byteLength']/(-0x2432+-0x11f+0x2555));case _0x16cefe['DT_FLOAT32']:return new Float32Array(_0x509aaa['buffer'],_0x509aaa['byteOffset'],_0x509aaa['byteLength']/(0x1*0xf61+0x17*0x6a+-0x18e3));}return null;},_0x19017f=_0x31c33c=>{switch(_0x31c33c){case _0x16cefe['DT_INT8']:return-0xfb7+0x5*-0xf2+-0x1*-0x1472;case _0x16cefe['DT_INT16']:return-0x2*0x806+-0x2*0x3d1+0x17b0*0x1;case _0x16cefe['DT_INT32']:return 0xc2*-0x1f+0x22e0*-0x1+-0x35*-0x11a;case _0x16cefe['DT_UINT8']:return 0x52*-0x49+0x5fe+0x1165;case _0x16cefe['DT_UINT16']:return-0x1e96+-0x13*-0x125+-0xf*-0x97;case _0x16cefe['DT_UINT32']:return 0x5*-0x263+0x384+-0x11*-0x7f;case _0x16cefe['DT_FLOAT32']:return 0xb*-0x1fc+-0x2*-0xff3+0x35a*-0x3;}return-0xce*0x8+-0x696+0x1d*0x73;},_0x500caf=_0x369f89=>_0x369f89['num_compon'+'ents']()*_0x19017f(_0x369f89['data_type']()),_0x213acf={0x0:0x0,0x1:0x1,0x5:0x2,0x2:0x3,0x7:0x4,0x8:0x5,0x4:0x6,0x3:0x7},_0x2336f6=(_0x4edf81,_0x3f9eb4)=>{const _0x2736be=(_0x1a597b,_0x23d41d,_0x4b31bc)=>{_0x1a597b[-0x12e3+0x1d*0x61+0x7e6]=_0x23d41d[-0xa1*0xe+-0xc9b*-0x1+-0x7*0x8b]-_0x4b31bc[0x1b33+-0x17d8+0x1*-0x35b],_0x1a597b[0x2637+-0x1*-0x23ce+-0x4a04]=_0x23d41d[-0x15e3*-0x1+0x4ac+-0x1a8e]-_0x4b31bc[0x4*-0x49a+-0xe19+0x2082],_0x1a597b[-0x4*0x92e+0x861+0x1c59]=_0x23d41d[-0x3*0x5ea+-0x69a+0x81e*0x3]-_0x4b31bc[0x13*0x61+0x1*0x2da+-0xa0b];},_0x5e4965=(_0xa8ca0d,_0xa6d721,_0x1852c8)=>{_0xa8ca0d[0xca1*0x2+-0x12a5+-0x69d]=_0xa6d721[-0x1ae*0x17+0x1727+0x4*0x3df]*_0x1852c8[-0x1322+0x7*0xca+0xd9e]-_0x1852c8[-0x1f6e+-0x1*-0x21cb+-0x25c]*_0xa6d721[0x43d+-0x12cd+-0x2ea*-0x5],_0xa8ca0d[0x84a+-0x15c*-0x5+-0x75*0x21]=_0xa6d721[-0xb09+0x80*0x29+-0x327*0x3]*_0x1852c8[-0x206e+0x183e*0x1+-0x418*-0x2]-_0x1852c8[0x1d5e+-0x16c+-0xc*0x254]*_0xa6d721[0x1*-0x24a9+-0x26bb+0x4b64],_0xa8ca0d[-0x24*0x1b+0x9*-0x17f+-0x1*-0x1145]=_0xa6d721[0x19fd*-0x1+-0x1*-0x1ee1+-0x4e4]*_0x1852c8[0x24*0x104+0xc0*0x5+-0x284f]-_0x1852c8[0x1*0x1066+0x1d5*-0x7+-0x393]*_0xa6d721[-0xe5*0x1b+-0x1*0x220a+0x3a32];},_0x4fb239=(_0x4082d3,_0x48f1cc)=>{const _0x306c3c=_0x4082d3[_0x48f1cc+(0xe9+-0x1c75+-0xac*-0x29)],_0x30d8e0=_0x4082d3[_0x48f1cc+(-0x11e+0xb*0x28d+0x10*-0x1af)],_0x14cd33=_0x4082d3[_0x48f1cc+(0x9e*-0x6+-0xf03+0x12b9)],_0x2fb596=(0x1731+-0x1de*0x1+0xaa9*-0x2)/Math['sqrt'](_0x306c3c*_0x306c3c+_0x30d8e0*_0x30d8e0+_0x14cd33*_0x14cd33);_0x4082d3[_0x48f1cc+(0x1*0xf6b+-0x1853*0x1+0x8e8)]*=_0x2fb596,_0x4082d3[_0x48f1cc+(0x33+0x787*0x3+-0x16c7)]*=_0x2fb596,_0x4082d3[_0x48f1cc+(0x24bf+0xce5+-0x31a2)]*=_0x2fb596;},_0x40ebda=(_0x2c7a78,_0x2416bb,_0x497bdc)=>{for(let _0x1cebe2=-0x1369*0x2+0x587*0x1+-0x3*-0xb19;_0x1cebe2<0xfaa*-0x1+0xc7*-0x1f+0x27c6;++_0x1cebe2)_0x2c7a78[_0x1cebe2]=_0x2416bb[_0x497bdc+_0x1cebe2];},_0x5c472d=_0x3f9eb4['length']/(-0x1*-0x19d6+-0x22*0x7f+-0x8f5),_0x48c356=_0x4edf81['length']/(-0x1bdc+-0x5cb*-0x2+0x1049),_0x419d21=new Float32Array(_0x4edf81['length']),_0xf9f0c8=[-0xa*0x2f3+0x109b+0xce3,0xe3*0x26+0x129b+0x1*-0x344d,-0xc1*-0xb+0x2200+-0x2a4b],_0x367131=[0x11a4+0x1103+-0xb8d*0x3,0x11d7+0x1722+-0x11*0x269,-0x1*-0x75e+-0x96a+0x20c],_0x570a4b=[0x15c2+-0xc90+0xb*-0xd6,0xcd9+0x270*-0x6+0x7*0x41,-0x230f+0xcc7*0x1+0x1648],_0x4f0a24=[0x1*-0x985+0x5*-0x20b+0x13bc*0x1,-0x150e+0x1e98+-0x98a,-0x1*-0x2b+-0xb*0x18c+0x10d9],_0x22c7e1=[-0x2*-0xbe1+-0x2*0x1237+0xcac,0x33*0x63+-0x270f+0x1356,-0xa6*0x8+0x1*-0x2270+0x27a0*0x1],_0x67ee7=[0x1595+0x48a*0x5+0x8db*-0x5,-0x1ed6*-0x1+0x17ba+0x30*-0x123,-0x1*0x1c8+0x1822+-0x165a];for(let _0x5e479e=-0x19ff+-0xec9*0x1+-0x244*-0x12;_0x5e479e<_0x5c472d;++_0x5e479e){const _0x47b0c1=_0x3f9eb4[_0x5e479e*(0x1*-0x12fd+0x887*0x4+-0xf1c)+(0x8f*-0x3b+-0x36*0x3d+0x1*0x2dd3)]*(0x347+-0x133+-0x211*0x1),_0x3b7ef6=_0x3f9eb4[_0x5e479e*(-0x13c5+0xbfd*-0x1+0x1fc5)+(-0x36*0x75+-0x8f2*0x2+0x2a93)]*(0x83*0x3e+0x22cf+-0x4286),_0x1dd299=_0x3f9eb4[_0x5e479e*(0x230d+-0xac9+-0x1841)+(-0x198f+-0x2391+0x3d22)]*(-0x1253*-0x1+0x5b*0x13+-0x1911);_0x40ebda(_0xf9f0c8,_0x4edf81,_0x47b0c1),_0x40ebda(_0x367131,_0x4edf81,_0x3b7ef6),_0x40ebda(_0x570a4b,_0x4edf81,_0x1dd299),_0x2736be(_0x4f0a24,_0x367131,_0xf9f0c8),_0x2736be(_0x22c7e1,_0x570a4b,_0xf9f0c8),_0x5e4965(_0x67ee7,_0x4f0a24,_0x22c7e1),_0x4fb239(_0x67ee7,-0x20ad+-0x18*0xef+0x3715);for(let _0x265e53=0x2225+-0xd1d+-0x1508;_0x265e53<0x1*-0x22e5+0x1*-0x1ef6+0x41de;++_0x265e53)_0x419d21[_0x47b0c1+_0x265e53]+=_0x67ee7[_0x265e53],_0x419d21[_0x3b7ef6+_0x265e53]+=_0x67ee7[_0x265e53],_0x419d21[_0x1dd299+_0x265e53]+=_0x67ee7[_0x265e53];}for(let _0x734bf2=-0x26bc+-0x1ce2+0x1e*0x241;_0x734bf2<_0x48c356;++_0x734bf2)_0x4fb239(_0x419d21,_0x734bf2*(0x16a7+-0x129b+-0x409));return new Uint8Array(_0x419d21['buffer']);},_0x42550f=_0x20f417=>{const _0xf9a3a9={},_0x62d953=new _0x16cefe['DecoderBuf'+'fer']();_0x62d953['Init'](_0x20f417,_0x20f417['length']);const _0x3f1edf=new _0x16cefe['Decoder']();if(_0x3f1edf['GetEncoded'+'GeometryTy'+'pe'](_0x62d953)!==_0x16cefe['TRIANGULAR'+'_MESH'])return _0xf9a3a9['error']='Failed\x20to\x20'+'decode\x20dra'+'co\x20mesh:\x20n'+'ot\x20a\x20mesh',_0xf9a3a9;const _0xd51bb9=new _0x16cefe['Mesh'](),_0x312032=_0x3f1edf['DecodeBuff'+'erToMesh'](_0x62d953,_0xd51bb9);if(!_0x312032||!_0x312032['ok']()||_0x16cefe['getPointer'](_0xd51bb9)===0x2589*-0x1+-0xce0+0x3269)return _0xf9a3a9['error']='Failed\x20to\x20'+'decode\x20dra'+'co\x20asset',_0xf9a3a9;const _0x104519=_0xd51bb9['num_faces']()*(-0x1e83+0x2287*-0x1+-0x3*-0x15af),_0x549ec9=_0xd51bb9['num_points']()<=0x1f53e+-0x1*-0x775+-0xfcb4,_0x2c342b=_0x104519*(_0x549ec9?-0x2*-0xd21+0x9*0x313+0x3*-0x11f9:-0x2301+0x1*-0x147a+0x377f),_0xc1c06a=_0x16cefe['_malloc'](_0x2c342b);_0x549ec9?(_0x3f1edf['GetTriangl'+'esUInt16Ar'+'ray'](_0xd51bb9,_0x2c342b,_0xc1c06a),_0xf9a3a9['indices']=new Uint16Array(_0x16cefe['HEAPU16']['buffer'],_0xc1c06a,_0x104519)['slice']()['buffer']):(_0x3f1edf['GetTriangl'+'esUInt32Ar'+'ray'](_0xd51bb9,_0x2c342b,_0xc1c06a),_0xf9a3a9['indices']=new Uint32Array(_0x16cefe['HEAPU32']['buffer'],_0xc1c06a,_0x104519)['slice']()['buffer']),_0x16cefe['_free'](_0xc1c06a);const _0x48dae6=[];for(let _0x5d34a6=0x35*0x1+-0x573+0x53e;_0x5d34a6<_0xd51bb9['num_attrib'+'utes']();++_0x5d34a6)_0x48dae6['push'](_0x3f1edf['GetAttribu'+'te'](_0xd51bb9,_0x5d34a6));_0x48dae6['sort']((_0xb0cd8d,_0x35e3eb)=>(_0x213acf[_0xb0cd8d['attribute_'+'type']()]??_0x213acf['length'])-(_0x213acf[_0x35e3eb['attribute_'+'type']()]??_0x213acf['length'])),_0xf9a3a9['attributes']=_0x48dae6['map'](_0x3dea52=>_0x3dea52['unique_id']());let _0xa88900=0x150a+0x11ea*-0x1+-0xa0*0x5;const _0x469c94=_0x48dae6['map'](_0x4e5b5d=>{const _0x5396c7=_0xa88900;return _0xa88900+=Math['ceil'](_0x500caf(_0x4e5b5d)/(0x14c4+0x1*-0x14da+0x1a))*(-0xab4+-0x5*0x7b7+-0x1*-0x314b),_0x5396c7;}),_0x45d75a=_0x48dae6['some'](_0xad846=>_0xad846['attribute_'+'type']()===-0x44c+-0xce6+0x25*0x77),_0x4eebb6=_0x469c94[-0x1e6+-0xdc0+-0xfa7*-0x1];if(!_0x45d75a){for(let _0x3ae595=-0x15f6*-0x1+-0x4*0x2ae+-0xb3d;_0x3ae595<_0x469c94['length'];++_0x3ae595)_0x469c94[_0x3ae595]+=0x75+-0x3*-0x2f0+-0x939*0x1;_0xa88900+=0x1952+-0x49a+0x1*-0x14ac;}_0xf9a3a9['vertices']=new ArrayBuffer(_0xd51bb9['num_points']()*_0xa88900);const _0x4005ad=new Uint8Array(_0xf9a3a9['vertices']);for(let _0x239d58=0x1*-0x287+-0x25*-0x89+-0x1146;_0x239d58<_0xd51bb9['num_attrib'+'utes']();++_0x239d58){const _0x15c73f=_0x48dae6[_0x239d58],_0x31e50a=_0x500caf(_0x15c73f),_0x2175dc=_0xd51bb9['num_points']()*_0x31e50a,_0x1f3ad9=_0x16cefe['_malloc'](_0x2175dc);_0x3f1edf['GetAttribu'+'teDataArra'+'yForAllPoi'+'nts'](_0xd51bb9,_0x15c73f,_0x15c73f['data_type'](),_0x2175dc,_0x1f3ad9);const _0x562383=new Uint8Array(_0x16cefe['HEAPU8']['buffer'],_0x1f3ad9,_0x2175dc);for(let _0x48ddf8=0x1bda+-0x4*0x1b5+-0x1506;_0x48ddf8<_0xd51bb9['num_points']();++_0x48ddf8)for(let _0x32c840=-0x902*0x1+-0x25*0x39+-0x373*-0x5;_0x32c840<_0x31e50a;++_0x32c840)_0x4005ad[_0x48ddf8*_0xa88900+_0x469c94[_0x239d58]+_0x32c840]=_0x562383[_0x48ddf8*_0x31e50a+_0x32c840];if(!_0x45d75a&&_0x15c73f['attribute_'+'type']()===0x14bb+0x1c5*-0x8+-0x693){const _0x32683f=_0x2336f6(_0x235f1c(_0x562383,_0x15c73f['data_type']()),_0x549ec9?new Uint16Array(_0xf9a3a9['indices']):new Uint32Array(_0xf9a3a9['indices']));for(let _0x2e14e5=-0xa6d*-0x3+-0x1f0*-0xb+-0x3497;_0x2e14e5<_0xd51bb9['num_points']();++_0x2e14e5)for(let _0x1a8b5d=0x1*0x1e53+-0x1*0xffb+-0xe58;_0x1a8b5d<0x105d+-0xb61+-0x4f0;++_0x1a8b5d)_0x4005ad[_0x2e14e5*_0xa88900+_0x4eebb6+_0x1a8b5d]=_0x32683f[_0x2e14e5*(0x38*0x79+0xc53+-0x26bf)+_0x1a8b5d];}_0x16cefe['_free'](_0x1f3ad9);}return _0x16cefe['destroy'](_0xd51bb9),_0x16cefe['destroy'](_0x3f1edf),_0x16cefe['destroy'](_0x62d953),_0xf9a3a9;},_0x47703e=_0xb2746=>{const _0xeb2687=_0x42550f(new Uint8Array(_0xb2746['buffer']));self['postMessag'+'e']({'jobId':_0xb2746['jobId'],'error':_0xeb2687['error'],'indices':_0xeb2687['indices'],'vertices':_0xeb2687['vertices'],'attributes':_0xeb2687['attributes']},[_0xeb2687['indices'],_0xeb2687['vertices']]['filter'](_0x1568f4=>_0x1568f4!=null));},_0x31af9a=[];self['onmessage']=_0x59c88a=>{const _0x2c10ef=_0x59c88a['data'];switch(_0x2c10ef['type']){case'init':self['DracoDecod'+'erModule']({'instantiateWasm':(_0x6f4b94,_0x3e4216)=>(WebAssembly['instantiat'+'e'](_0x2c10ef['module'],_0x6f4b94)['then'](_0x27d61f=>_0x3e4216(_0x27d61f))['catch'](_0x4639c7=>console['error']('instantiat'+'e\x20failed\x20+'+'\x20'+_0x4639c7)),{})})['then'](_0x4055d4=>{_0x16cefe=_0x4055d4,_0x31af9a['forEach'](_0x563278=>_0x47703e(_0x563278));});break;case'decodeMesh':_0x16cefe?_0x47703e(_0x2c10ef):_0x31af9a['push'](_0x2c10ef);break;}};}const _S=-0xaea*0x2+-0x1*0x32d+0x4*0x641;class GF{constructor(){this['workers']=[[],[],[]],this['jobId']=0xd33+-0xa63+0x48*-0xa,this['jobQueue']=[],this['jobCallbac'+'ks']=new Map(),this['run']=(_0x8f5842,_0x129d3b)=>{_0x8f5842['postMessag'+'e']({'type':'decodeMesh','jobId':_0x129d3b['jobId'],'buffer':_0x129d3b['buffer']},[_0x129d3b['buffer']]);};}['init'](_0x5aef90){for(_0x5aef90['forEach'](_0x278180=>{_0x278180['addEventLi'+'stener']('message',_0x5b3c6b=>{const _0x5392fa=_0x5b3c6b['data'],_0x19137b=this['jobCallbac'+'ks']['get'](_0x5392fa['jobId']);if(_0x19137b&&_0x19137b(_0x5392fa['error'],{'indices':_0x5392fa['indices'],'vertices':_0x5392fa['vertices'],'attributes':_0x5392fa['attributes']}),this['jobCallbac'+'ks']['delete'](_0x5392fa['jobId']),this['jobQueue']['length']>-0xf20+-0x1832*-0x1+-0x912){const _0x3d6444=this['jobQueue']['shift']();this['run'](_0x278180,_0x3d6444);}else{const _0x249db7=this['workers'][0x833*-0x1+0x14ef+-0xcba]['indexOf'](_0x278180);if(_0x249db7!==-(0x12a4+0x1ebc+0x1*-0x315f))this['workers'][-0x759*0x5+-0x1*0x599+-0x2a58*-0x1]['splice'](_0x249db7,-0x215e+0x1*-0xf08+-0x1*-0x3067),this['workers'][-0x3d*-0x65+0x346*-0x9+0x2b3*0x2]['push'](_0x278180);else{const _0x42cf31=this['workers'][-0x115d+-0x1*-0x1619+-0x4bb*0x1]['indexOf'](_0x278180);_0x42cf31!==-(0x224+0x315+-0x538)?(this['workers'][0x1f3c+-0x9*-0xa1+0x1272*-0x2]['splice'](_0x42cf31,0x17d4+-0x6*-0x30d+-0x2a21),this['workers'][-0x2d7*0x1+0x279*0x5+-0x4c3*0x2]['push'](_0x278180)):w['error']('logical\x20er'+'ror');}}});}),this['workers'][0x85*-0x3e+-0x3*-0xb70+0x10d*-0x2]=_0x5aef90;this['jobQueue']['length']&&(this['workers'][0x3a6*0x4+0x17b+-0x1013]['length']||this['workers'][0x6d4+0x1adc+0x21af*-0x1]['length']);){const _0x4333b1=this['jobQueue']['shift']();if(this['workers'][0x11d5*0x1+0x12d7+-0x24ac*0x1]['length']>-0x1f4f+0x125f*0x2+0x56f*-0x1){const _0x484251=this['workers'][0x11b6+0x20a+-0x13c0]['shift']();this['workers'][0x159a+0x1*-0x9d2+-0xbc7]['push'](_0x484251),this['run'](_0x484251,_0x4333b1);}else{const _0x2bbeab=this['workers'][-0x4*-0x1ca+-0x1d*0x111+0x22*0xb3]['shift']();this['workers'][0x5*-0x55+-0x1d97+-0x1f42*-0x1]['push'](_0x2bbeab),this['run'](_0x2bbeab,_0x4333b1);}}}['enqueueJob'](_0x28d25e,_0x4abcea){const _0x5261fc={'jobId':this['jobId']++,'buffer':_0x28d25e};if(this['jobCallbac'+'ks']['set'](_0x5261fc['jobId'],_0x4abcea),this['workers'][0x319+-0x28*-0xe2+-0x1*0x2669]['length']>-0x4b1*0x7+-0x5c*-0x47+0x271*0x3){const _0xa0f39f=this['workers'][0x112*-0x4+-0x1*-0x1df2+0x16d*-0x12]['shift']();this['workers'][0x521+0x310+-0x830]['push'](_0xa0f39f),this['run'](_0xa0f39f,_0x5261fc);}else{if(this['workers'][0x35*0x45+-0x1*-0x1b09+-0x2951]['length']>0x13f1+-0x1faf+0xbbe){const _0x4ed461=this['workers'][-0x1*0x4bb+-0xec*-0x17+-0x1078]['shift']();this['workers'][-0x287*0x1+-0x8a2+0xb2b]['push'](_0x4ed461),this['run'](_0x4ed461,_0x5261fc);}else this['jobQueue']['push'](_0x5261fc);}}}const HF=_0x46698d=>new Promise((_0x284da2,_0x33b857)=>{const _0x2fafa9={'cache':!(0x2*0xc29+0x26f3+-0x1*0x3f45),'responseType':'text','retry':_S>0x159*0x1+-0x3fb*0x7+-0x2*-0xd42,'maxRetries':_S};ot['get'](_0x46698d,_0x2fafa9,(_0x4f4ab9,_0xd82734)=>{_0x4f4ab9?_0x33b857(_0x4f4ab9):_0x284da2(_0xd82734);});}),WF=_0x1a67c9=>{const _0x39895e=()=>fetch(_0x1a67c9)['then'](_0x547191=>_0x547191['arrayBuffe'+'r']())['then'](_0x538432=>WebAssembly['compile'](_0x538432)),_0x392aab=()=>WebAssembly['compileStr'+'eaming'](fetch(_0x1a67c9))['catch'](_0x94b3c9=>(w['warn']('compileStr'+'eaming()\x20f'+'ailed\x20for\x20'+_0x1a67c9+'\x20('+_0x94b3c9+('),\x20falling'+'\x20back\x20to\x20a'+'rraybuffer'+'\x20download.')),_0x39895e()));return WebAssembly['compileStr'+'eaming']?_0x392aab():_0x39895e();},gS=-0x1*-0x1603+-0x22b1+0x11*0xbf;let ih;const $F=_0xfa77c1=>{if(ih)return!(-0x1bb3+-0x25*0xa9+0x3420);if(!_0xfa77c1){const _0x5f2661=YS['getConfig']('DracoDecod'+'erModule');_0x5f2661?_0xfa77c1={'jsUrl':_0x5f2661['glueUrl'],'wasmUrl':_0x5f2661['wasmUrl'],'numWorkers':_0x5f2661['numWorkers']}:_0xfa77c1={'jsUrl':'draco.wasm'+'.js','wasmUrl':'draco.wasm'+'.wasm','numWorkers':gS};}return!_0xfa77c1['jsUrl']||!_0xfa77c1['wasmUrl']?!(0x1349*-0x1+-0x1c55+0xa7*0x49):(ih=new GF(),Promise['all']([HF(_0xfa77c1['jsUrl']),WF(_0xfa77c1['wasmUrl'])])['then'](([_0x1f0149,_0x13b179])=>{const _0x5f0d59=['/*\x20draco\x20*'+'/',_0x1f0149,'/*\x20worker\x20'+'*/','(\x0a'+VF['toString']()+'\x0a)()\x0a\x0a']['join']('\x0a'),_0x41821c=new Blob([_0x5f0d59],{'type':'applicatio'+'n/javascri'+'pt'}),_0x23d504=URL['createObje'+'ctURL'](_0x41821c),_0x229b96=Math['max'](0x1*0x337+0xe7*-0xf+0xa53,Math['min'](-0xf2f*0x2+0x146*0x1e+0x3e3*-0x2,_0xfa77c1['numWorkers']||gS)),_0x2fe035=[];for(let _0x479ff7=0x1b19+-0x628+-0x14f1*0x1;_0x479ff7<_0x229b96;++_0x479ff7){const _0x13494b=new Worker(_0x23d504);_0x13494b['postMessag'+'e']({'type':'init','module':_0x13b179}),_0x2fe035['push'](_0x13494b);}ih['init'](_0x2fe035);}),!(0x1cfe+-0x1*-0xa6+-0x1da4));},XF=(_0x47954b,_0x17e810)=>$F()?(ih['enqueueJob'](_0x47954b,_0x17e810),!(-0x176f*-0x1+0xb*0x1b4+0x7f*-0x55)):!(-0x3*-0xca6+0x12e6+-0x38d7);class qF{constructor(){h(this,'gltf'),h(this,'nodes'),h(this,'scenes'),h(this,'animations'),h(this,'textures'),h(this,'materials'),h(this,'variants'),h(this,'meshVarian'+'ts'),h(this,'meshDefaul'+'tMaterials'),h(this,'renders'),h(this,'skins'),h(this,'lights'),h(this,'cameras'),h(this,'nodeInstan'+'cingMap');}['destroy'](){this['renders']&&this['renders']['forEach'](_0x24b30c=>{_0x24b30c['meshes']=null;});}}const x0=_0x35b939=>/^data:[^\n\r,\u2028\u2029]*,.*$/i['test'](_0x35b939),jF=_0x19fc22=>_0x19fc22['substring'](_0x19fc22['indexOf'](':')+(-0x21d9+0x16*-0x1c2+-0x4886*-0x1),_0x19fc22['indexOf'](';')),yl=_0x82e82a=>{switch(_0x82e82a){case'SCALAR':return 0x14af+-0x601+-0x11*0xdd;case'VEC2':return-0xd38+-0x186f+0x25a9;case'VEC3':return 0x886+-0x18eb*0x1+0x1068;case'VEC4':return 0x184a*0x1+0x5d9+-0xb*0x2bd;case'MAT2':return 0x7c*0x4b+-0x998+-0x48*0x5f;case'MAT3':return-0x254f*0x1+-0x2*0x817+-0x1ba*-0x1f;case'MAT4':return-0x1c0a+0x11c7+0x1*0xa53;default:return-0x15c4+0xc2d+-0x4cd*-0x2;}},Dd=_0x87a9d4=>{switch(_0x87a9d4){case 0x1b75+0x1e0e+-0x1*0x2583:return dd;case 0x1f*0xbb+-0x2260+0x1fbc:return la;case 0x18*-0x43+0x2594+-0xb4a:return fd;case 0x16db+-0xd3*0x1+-0x205:return Ml;case 0x1bb7*0x1+-0x1fcc+-0xc7*-0x1f:return Ty;case 0x1340+-0x8db*0x3+0x1b56:return el;case 0x631*0x3+-0x122*-0x1a+0x6b*-0x43:return Ve;default:return-0x21d4+0x1a7f+-0x755*-0x1;}},YF=_0x506edc=>{switch(_0x506edc){case 0x1*0x1b1+0x5*-0x277+0x1ea2:return-0x1*-0x20c5+-0x1*0x243c+0x1bc*0x2;case 0x20c2+-0x22f+-0xa92:return-0x427*0x7+0x90f+-0x1403*-0x1;case 0x8f8+0x1*0x25f9+-0x1aef:return 0x1cb8+-0x3*-0x338+-0x265e;case 0x57*-0x72+0x50c+0x35b5:return 0x62*-0xd+-0x1155+0x1651;case-0x14d9+0x1fe0+0x8fd:return-0x1*-0x240d+0x1*-0x1efd+-0x26*0x22;case 0x44*-0x4d+0x1*0x12e5+0x1*0x1594:return 0x6cb+0x20*-0x7f+0x919;case 0x1*-0x13bd+0x26d4+-0xef*-0x1:return 0xb*0x381+-0x1c9*0x3+-0x212c;default:return 0x1f13+0x1e83+-0x1*0x3d96;}},KF=_0x289d01=>{switch(_0x289d01){case-0xc*0xfe+0x2672+-0x68a:return Int8Array;case-0x237e+-0x5d3*0x5+-0x1*-0x549e:return Uint8Array;case 0x51d*-0x6+-0x2*0x326+0x209*0x1c:return Int16Array;case-0x56*0x4+-0x2*0x5ae+0x20b7:return Uint16Array;case 0xa19*-0x2+-0xb*-0x8f+0x3c9*0x9:return Int32Array;case 0xd7*0x6+-0x8c2*-0x1+0x1b*0x3b:return Uint32Array;case-0x78a+-0x3d*-0x97+0x1af*-0x5:return Float32Array;default:return null;}},Nh={'POSITION':Me,'NORMAL':gs,'TANGENT':yi,'COLOR_0':Wt,'JOINTS_0':us,'WEIGHTS_0':gi,'TEXCOORD_0':is,'TEXCOORD_1':ba,'TEXCOORD_2':wl,'TEXCOORD_3':El,'TEXCOORD_4':bl,'TEXCOORD_5':Al,'TEXCOORD_6':Cl,'TEXCOORD_7':Pl},SS={[Me]:0x1874+0x1f56+-0x37ca,[gs]:0x222+0x2257+-0x2478,[yi]:-0x1597+0x26f8+-0x115f*0x1,[Wt]:-0x1*0x1245+0x72*0x49+-0xe3a,[us]:0x439+0x2*-0x1006+0x1bd7,[gi]:-0x1*-0x4c3+0x1*-0x1e8e+0x19d0,[is]:0x21a1+0x4e*-0xd+-0x1da5,[ba]:-0x1*-0x3d7+-0x12e+-0x2a2,[wl]:0x1*0x52+0xc37+-0xb*0x123,[El]:-0x1efe*0x1+-0x111b+0x2*0x1811,[bl]:-0x88e+0x226f+0x2d*-0x93,[Al]:0x310*-0x6+-0x13dc+0x1*0x2647,[Cl]:-0x886+0xc5*0x6+0x3f4,[Pl]:0xdb7*0x1+0x1*-0x6b6+-0x14*0x59},ZF=_0x3235bf=>{switch(_0x3235bf){case dd:return _0x2cfd11=>Math['max'](_0x2cfd11/(-0x1*0x203c+0x718+-0x19a3*-0x1),-(-0x22e3+0x21fd+0x1*0xe7));case la:return _0x4aaf63=>_0x4aaf63/(0x29*0x81+0x1861+0x401*-0xb);case fd:return _0xba971c=>Math['max'](_0xba971c/(0xae02*0x1+0x7c*0x3b+-0x4a97),-(0x8*0x164+0x26b1+-0x31d0));case Ml:return _0x44bc9e=>_0x44bc9e/(-0x18483+-0xe6d9+-0x7d0d*-0x7);default:return _0x499551=>_0x499551;}},Gu=(_0x5657d8,_0x170ae8,_0x22543d)=>{const _0x31a2bd=ZF(_0x22543d),_0x32f3b3=_0x170ae8['length'];for(let _0x3a8e2d=0x5*0x369+-0x3*0x687+0x288;_0x3a8e2d<_0x32f3b3;++_0x3a8e2d)_0x5657d8[_0x3a8e2d]=_0x31a2bd(_0x170ae8[_0x3a8e2d]);return _0x5657d8;},ua=(_0x553726,_0xb9e96b,_0x283865=!(0x260e+0x41c*-0x4+-0x159d))=>{const _0x500a9b=yl(_0x553726['type']),_0x3a7424=KF(_0x553726['componentT'+'ype']);if(!_0x3a7424)return null;let _0x10a624;if(_0x553726['sparse']){const _0x3d3fb7=_0x553726['sparse'],_0x3396cd={'count':_0x3d3fb7['count'],'type':'SCALAR'},_0x19b826=ua(Object['assign'](_0x3396cd,_0x3d3fb7['indices']),_0xb9e96b,!(-0x1*-0x70f+0xfd3*-0x2+-0x4eb*-0x5)),_0x541fc1={'count':_0x3d3fb7['count'],'type':_0x553726['type'],'componentType':_0x553726['componentT'+'ype']},_0x1957f0=ua(Object['assign'](_0x541fc1,_0x3d3fb7['values']),_0xb9e96b,!(0x11a*-0x1+-0x26f8+0x2812));if(_0x553726['hasOwnProp'+'erty']('bufferView')){const _0x1b7ba3={'bufferView':_0x553726['bufferView'],'byteOffset':_0x553726['byteOffset'],'componentType':_0x553726['componentT'+'ype'],'count':_0x553726['count'],'type':_0x553726['type']};_0x10a624=ua(_0x1b7ba3,_0xb9e96b,!(-0x7*-0x335+0x167*0xa+-0x2479))['slice']();}else _0x10a624=new _0x3a7424(_0x553726['count']*_0x500a9b);for(let _0x197b52=0x11*0x161+-0x2cd+-0x14a4;_0x197b52<_0x3d3fb7['count'];++_0x197b52){const _0x4686dd=_0x19b826[_0x197b52];for(let _0x264ef4=-0x21*-0x10d+-0x53*-0x4a+-0x17*0x28d;_0x264ef4<_0x500a9b;++_0x264ef4)_0x10a624[_0x4686dd*_0x500a9b+_0x264ef4]=_0x1957f0[_0x197b52*_0x500a9b+_0x264ef4];}}else{if(_0x553726['hasOwnProp'+'erty']('bufferView')){const _0xfe47d2=_0xb9e96b[_0x553726['bufferView']];if(_0x283865&&_0xfe47d2['hasOwnProp'+'erty']('byteStride')){const _0x1832f1=_0x500a9b*_0x3a7424['BYTES_PER_'+'ELEMENT'],_0x1dfd8d=new ArrayBuffer(_0x553726['count']*_0x1832f1),_0x36172b=new Uint8Array(_0x1dfd8d);let _0x135313=-0x29*-0x57+-0x60+-0xd8f;for(let _0x37abf0=-0x3ed*0x2+-0xd*0x7d+-0x2d7*-0x5;_0x37abf0<_0x553726['count'];++_0x37abf0){let _0x377078=(_0x553726['byteOffset']||-0xbf*0x21+-0x19f2+-0xa1d*-0x5)+_0x37abf0*_0xfe47d2['byteStride'];for(let _0x55c002=0x1121*-0x2+0x6c3*0x3+0xdf9;_0x55c002<_0x1832f1;++_0x55c002)_0x36172b[_0x135313++]=_0xfe47d2[_0x377078++];}_0x10a624=new _0x3a7424(_0x1dfd8d);}else _0x10a624=new _0x3a7424(_0xfe47d2['buffer'],_0xfe47d2['byteOffset']+(_0x553726['byteOffset']||0x1*-0x212b+-0x395*-0x3+0x46*0x52),_0x553726['count']*_0x500a9b);}else _0x10a624=new _0x3a7424(_0x553726['count']*_0x500a9b);}return _0x10a624;},Pn=(_0x558e02,_0x4ab17d)=>{const _0x175542=ua(_0x558e02,_0x4ab17d,!(0x1de9*0x1+0x6fd*0x1+0x1*-0x24e6));if(_0x175542 instanceof Float32Array||!_0x558e02['normalized'])return _0x175542;const _0x5cc002=new Float32Array(_0x175542['length']);return Gu(_0x5cc002,_0x175542,Dd(_0x558e02['componentT'+'ype'])),_0x5cc002;},Hu=_0x2d1f4e=>{let _0x22ccb0=_0x2d1f4e['min'],_0x424e55=_0x2d1f4e['max'];if(!_0x22ccb0||!_0x424e55)return null;if(_0x2d1f4e['normalized']){const _0xbb6751=Dd(_0x2d1f4e['componentT'+'ype']);_0x22ccb0=Gu([],_0x22ccb0,_0xbb6751),_0x424e55=Gu([],_0x424e55,_0xbb6751);}return new De(new D((_0x424e55[0x129d+0x37b*-0x6+0x245]+_0x22ccb0[0x11d3*0x1+0x93*-0x3a+0x529*0x3])*(0x122a+0x1798+-0x29c2+0.5),(_0x424e55[-0x7*-0x95+0x8b3+-0xcc5]+_0x22ccb0[0x843+0x1838+-0x103d*0x2])*(0xa03+0x1d0c+-0x1*0x270f+0.5),(_0x424e55[-0x1*0x17b+-0x18d0+0x1a4d]+_0x22ccb0[-0x1aed*0x1+0x5*-0x145+0x429*0x8])*(-0x9b8+-0x2*0x34b+0x104e+0.5)),new D((_0x424e55[0x302+0x152a+0x44*-0x5b]-_0x22ccb0[0x1*-0x4bd+0x109a+0x1*-0xbdd])*(-0xf0b*-0x2+0x8bd+-0x1*0x26d3+0.5),(_0x424e55[-0x13fc+0x1ce2+0x1*-0x8e5]-_0x22ccb0[0x1f*0x4f+-0xf7*-0x2+0xb7e*-0x1])*(0x10c*-0xd+-0x1*0x23bf+-0x1*-0x315b+0.5),(_0x424e55[-0x89*0x28+-0x9c1*-0x2+0x1e8]-_0x22ccb0[-0xd38+0x2*-0xc1a+0x256e])*(-0x1*-0x1ae1+-0x11c2+0x91f*-0x1+0.5)));},T0=_0x48f409=>{if(!_0x48f409['hasOwnProp'+'erty']('mode'))return js;switch(_0x48f409['mode']){case 0x1*-0x1dff+-0x89b*-0x1+-0x94*-0x25:return cd;case-0xb10+0x3c4+-0x15*-0x59:return hd;case-0x8fb+0xe*0x125+-0x709:return _y;case-0x1c2a+-0x7a*0x10+-0xc3*-0x2f:return gy;case-0x833*-0x1+-0x1862+0x1033:return js;case-0x1a4f+0x5f5*0x4+0x280:return Er;case 0x180a+-0xc7a+-0xb8a:return oa;default:return js;}},QF=_0x2ee8fb=>{const _0x27b095=new Uint16Array(_0x2ee8fb);for(let _0x35ca65=0x5*0x1f+0x2e*-0x98+0x1ab5;_0x35ca65<_0x2ee8fb;_0x35ca65++)_0x27b095[_0x35ca65]=_0x35ca65;return _0x27b095;},JF=(_0x322e77,_0x5948bb)=>{const _0x48babf=_0x322e77[Me];if(!_0x48babf||_0x48babf['components']!==-0x1*0x4dd+-0x1f57+-0x2437*-0x1)return;let _0x2edb3d;if(_0x48babf['size']!==_0x48babf['stride']){const _0x4cd7a3=_0x48babf['stride']/No[_0x48babf['type']],_0x3da3aa=new wn[_0x48babf['type']](_0x48babf['buffer'],_0x48babf['offset'],_0x48babf['count']*_0x4cd7a3);_0x2edb3d=new wn[_0x48babf['type']](_0x48babf['count']*(-0x1582+0x3*0x7c6+-0x1cd));for(let _0x283a6c=-0x1b0+-0x305+0x1*0x4b5;_0x283a6c<_0x48babf['count'];++_0x283a6c)_0x2edb3d[_0x283a6c*(0x451+-0x90*0xc+0x272)+(0x1207+0xb*0x22f+-0x2a0c)]=_0x3da3aa[_0x283a6c*_0x4cd7a3+(-0x5*0x3d9+0x62b+0xd12)],_0x2edb3d[_0x283a6c*(-0x185*0xa+0x4*-0xb8+0x1215)+(0x52e*0x2+-0xa46*0x2+0xa31)]=_0x3da3aa[_0x283a6c*_0x4cd7a3+(0x7*0x3e8+0x3ec*-0x8+0x409)],_0x2edb3d[_0x283a6c*(0x2*0x10a3+-0x12c6+0xe7d*-0x1)+(-0x7ba+-0x3*-0x32+0x726)]=_0x3da3aa[_0x283a6c*_0x4cd7a3+(0x819+0x75a*-0x1+-0xbd)];}else _0x2edb3d=new wn[_0x48babf['type']](_0x48babf['buffer'],_0x48babf['offset'],_0x48babf['count']*(-0x21a7*0x1+-0x1d50+0x3efa));const _0x522d1e=_0x48babf['count'];_0x5948bb||(_0x5948bb=QF(_0x522d1e));const _0x4a55f6=Iv(_0x2edb3d,_0x5948bb),_0x80ca18=new Float32Array(_0x4a55f6['length']);_0x80ca18['set'](_0x4a55f6),_0x322e77[gs]={'buffer':_0x80ca18['buffer'],'size':0xc,'offset':0x0,'stride':0xc,'count':_0x522d1e,'components':0x3,'type':Ve};},eN=_0x2db149=>{const _0x3468d1=_0x5224d6=>{const _0xb1597=[];for(let _0x29440b=0xc96+0xe24*-0x1+0xc7*0x2;_0x29440b<_0x5224d6['_levels']['length'];++_0x29440b){let _0x18a779=[];if(_0x5224d6['cubemap']){for(let _0x59cb0e=0x14d7+-0x1*-0x1d25+-0x31fc;_0x59cb0e<-0x1664+-0x1f7f+0x35e9;++_0x59cb0e)_0x18a779['push'](_0x5224d6['_levels'][_0x29440b][_0x59cb0e]);}else _0x18a779=_0x5224d6['_levels'][_0x29440b];_0xb1597['push'](_0x18a779);}return _0xb1597;},_0x46f46f=new _e(_0x2db149['device'],_0x2db149);return _0x46f46f['_levels']=_0x3468d1(_0x2db149),_0x46f46f;},tN=_0xd80504=>{const _0xda905a=new pe(_0xd80504['name']+'_clone',_0xd80504['type'],_0xd80504['file'],_0xd80504['data'],_0xd80504['options']);return _0xda905a['loaded']=!(-0xaa1*-0x2+-0x2c*0xc0+0xbbe),_0xda905a['resource']=eN(_0xd80504['resource']),_0xd80504['registry']['add'](_0xda905a),_0xda905a;},sN=(_0x219209,_0x2216a5)=>{const _0x382cb4=_0x2216a5[Me];if(!_0x382cb4)return null;const _0x24159c=_0x382cb4['count'],_0x19bcff=[];for(const _0x5bd0c9 in _0x2216a5)if(_0x2216a5['hasOwnProp'+'erty'](_0x5bd0c9)){const _0x3a554a={'semantic':_0x5bd0c9,'components':_0x2216a5[_0x5bd0c9]['components'],'type':_0x2216a5[_0x5bd0c9]['type'],'normalize':!!_0x2216a5[_0x5bd0c9]['normalize']};kt['isElementV'+'alid'](_0x219209,_0x3a554a)||_0x3a554a['components']++,_0x19bcff['push'](_0x3a554a);}_0x19bcff['sort']((_0x50070e,_0x19b97a)=>SS[_0x50070e['semantic']]-SS[_0x19b97a['semantic']]);let _0x25618f,_0x479d99,_0x8db8f6,_0x27c1c4,_0xee3c17,_0x3eeca8;const _0x585f60=new kt(_0x219209,_0x19bcff);let _0x49fd29=!(-0x1*0x1886+-0x3*-0x9fd+-0x571);for(_0x25618f=0x18f8+0x99a+-0x2292;_0x25618f<_0x585f60['elements']['length'];++_0x25618f)if(_0xee3c17=_0x585f60['elements'][_0x25618f],_0x27c1c4=_0x2216a5[_0xee3c17['name']],_0x3eeca8=_0x27c1c4['offset']-_0x382cb4['offset'],_0x27c1c4['buffer']!==_0x382cb4['buffer']||_0x27c1c4['stride']!==_0xee3c17['stride']||_0x27c1c4['size']!==_0xee3c17['size']||_0x3eeca8!==_0xee3c17['offset']){_0x49fd29=!(-0x1*-0x1bd4+0x77c*-0x2+-0xcdb);break;}const _0x58ccc1=new Is(_0x219209,_0x585f60,_0x24159c),_0x4d64c1=_0x58ccc1['lock'](),_0x59f760=new Uint32Array(_0x4d64c1);let _0x4fa041;if(_0x49fd29)_0x4fa041=new Uint32Array(_0x382cb4['buffer'],_0x382cb4['offset'],_0x24159c*_0x58ccc1['format']['size']/(0x194f+-0xed9+-0xa72)),_0x59f760['set'](_0x4fa041);else{let _0x25de3c,_0x21a99f;for(_0x25618f=-0x1565+-0x19*0x13+-0x40*-0x5d;_0x25618f<_0x58ccc1['format']['elements']['length'];++_0x25618f){_0xee3c17=_0x58ccc1['format']['elements'][_0x25618f],_0x25de3c=_0xee3c17['stride']/(0x257*-0xd+-0x37d*-0x7+0x604),_0x27c1c4=_0x2216a5[_0xee3c17['name']],_0x21a99f=_0x27c1c4['stride']/(-0x1d*0x2b+-0x52f*0x2+0xf41),_0x4fa041=new Uint32Array(_0x27c1c4['buffer'],_0x27c1c4['offset'],(_0x27c1c4['count']-(-0x544*-0x2+0xe9f+0x1*-0x1926))*_0x21a99f+(_0x27c1c4['size']+(-0x1211+0xe*0x109+-0x2*-0x1cb))/(0xde+0x2656+-0x2730));let _0x3d0a23=0x113*0x1+-0x7*-0x329+-0xb99*0x2,_0x3b50fa=_0xee3c17['offset']/(-0x1*-0x109d+0x26ac+-0x3745);const _0x5d2397=Math['floor']((_0x27c1c4['size']+(0x4*0x5b1+0x179*-0x8+-0x1*0xaf9))/(-0x14d6+0x40d+0x10cd));for(_0x479d99=-0x2*0x117e+0x63e+-0x1a*-0x11b;_0x479d99<_0x24159c;++_0x479d99){for(_0x8db8f6=0x1bc5*-0x1+0x9ca+0x11fb;_0x8db8f6<_0x5d2397;++_0x8db8f6)_0x59f760[_0x3b50fa+_0x8db8f6]=_0x4fa041[_0x3d0a23+_0x8db8f6];_0x3d0a23+=_0x21a99f,_0x3b50fa+=_0x25de3c;}}}return _0x58ccc1['unlock'](),_0x58ccc1;},iN=(_0x2ff0d6,_0x2bd65c,_0x3d3ee9,_0x352bb9,_0x2ffc5a,_0x4443fd)=>{const _0x5b86de={},_0x348ddf=[];for(const _0x3b51ff in _0x2bd65c)_0x2bd65c['hasOwnProp'+'erty'](_0x3b51ff)&&Nh['hasOwnProp'+'erty'](_0x3b51ff)&&(_0x5b86de[_0x3b51ff]=_0x2bd65c[_0x3b51ff],_0x348ddf['push'](_0x3b51ff+':'+_0x2bd65c[_0x3b51ff]));_0x348ddf['sort']();const _0x1786df=_0x348ddf['join']();let _0x1bc36d=_0x4443fd[_0x1786df];if(!_0x1bc36d){const _0x284a6a={};for(const _0x89c20a in _0x5b86de){const _0x4a15c2=_0x352bb9[_0x2bd65c[_0x89c20a]],_0x2b7f8b=ua(_0x4a15c2,_0x2ffc5a),_0x1a38a9=_0x2ffc5a[_0x4a15c2['bufferView']],_0x135080=Nh[_0x89c20a],_0x1a4eec=yl(_0x4a15c2['type'])*YF(_0x4a15c2['componentT'+'ype']),_0x1edc9d=_0x1a38a9&&_0x1a38a9['hasOwnProp'+'erty']('byteStride')?_0x1a38a9['byteStride']:_0x1a4eec;_0x284a6a[_0x135080]={'buffer':_0x2b7f8b['buffer'],'size':_0x1a4eec,'offset':_0x2b7f8b['byteOffset'],'stride':_0x1edc9d,'count':_0x4a15c2['count'],'components':yl(_0x4a15c2['type']),'type':Dd(_0x4a15c2['componentT'+'ype']),'normalize':_0x4a15c2['normalized']};}_0x284a6a['hasOwnProp'+'erty'](gs)||JF(_0x284a6a,_0x3d3ee9),_0x1bc36d=sN(_0x2ff0d6,_0x284a6a),_0x4443fd[_0x1786df]=_0x1bc36d;}return _0x1bc36d;},rN=(_0x21ca64,_0xd2439e,_0x520771,_0x552ddf,_0x67372b,_0x3004f6)=>{let _0x5631f9,_0x598e2c,_0x53d2d3;const _0x55fa7d=_0xd2439e['joints'],_0x467534=_0x55fa7d['length'],_0x4e6070=[];if(_0xd2439e['hasOwnProp'+'erty']('inverseBin'+'dMatrices')){const _0x29c567=_0xd2439e['inverseBin'+'dMatrices'],_0x51aa07=ua(_0x520771[_0x29c567],_0x552ddf,!(-0x58a*0x5+0x7dc+0x9eb*0x2)),_0x5ae425=[];for(_0x5631f9=-0x1*0x11cb+-0x242c+0x3*0x11fd;_0x5631f9<_0x467534;_0x5631f9++){for(_0x598e2c=-0xd1f*0x1+0x165d+-0x93e;_0x598e2c<-0x21eb+-0x202a+0x4225;_0x598e2c++)_0x5ae425[_0x598e2c]=_0x51aa07[_0x5631f9*(-0x158b+0x261b+-0x1080)+_0x598e2c];_0x53d2d3=new te(),_0x53d2d3['set'](_0x5ae425),_0x4e6070['push'](_0x53d2d3);}}else{for(_0x5631f9=-0xddd+-0x7b3+-0xe6*-0x18;_0x5631f9<_0x467534;_0x5631f9++)_0x53d2d3=new te(),_0x4e6070['push'](_0x53d2d3);}const _0x5cdca1=[];for(_0x5631f9=-0x7ea*0x4+-0x877*-0x1+0x1731;_0x5631f9<_0x467534;_0x5631f9++)_0x5cdca1[_0x5631f9]=_0x67372b[_0x55fa7d[_0x5631f9]]['name'];const _0x5d83df=_0x5cdca1['join']('#');let _0x10522c=_0x3004f6['get'](_0x5d83df);return _0x10522c||(_0x10522c=new Lv(_0x21ca64,_0x4e6070,_0x5cdca1),_0x3004f6['set'](_0x5d83df,_0x10522c)),_0x10522c;},aN=(_0x19bdbd,_0x9cee47,_0x3af39b,_0x19531a,_0xfe8e04,_0x232dd0,_0x19c91f)=>{var _0x4e6ddb;const _0x4decd1=new Ge(_0x19bdbd);_0x4decd1['aabb']=Hu(_0x3af39b[_0x9cee47['attributes']['POSITION']]);const _0x6fc13f=[];for(const [_0x42d0b8,_0x38058d]of Object['entries'](_0x9cee47['attributes'])){const _0x4dab2=_0x3af39b[_0x38058d],_0x159af9=Nh[_0x42d0b8],_0x3ce8d1=Dd(_0x4dab2['componentT'+'ype']);_0x6fc13f['push']({'semantic':_0x159af9,'components':yl(_0x4dab2['type']),'type':_0x3ce8d1,'normalize':_0x4dab2['normalized']??(_0x159af9===Wt&&(_0x3ce8d1===la||_0x3ce8d1===Ml))});}if(_0x19c91f['push'](new Promise((_0x27403b,_0x3f1df2)=>{const _0x1742f=_0x9cee47['extensions']['KHR_draco_'+'mesh_compr'+'ession'];XF(_0x19531a[_0x1742f['bufferView']]['slice']()['buffer'],(_0x31b699,_0x40382f)=>{var _0x140285;if(_0x31b699)console['log'](_0x31b699),_0x3f1df2(_0x31b699);else{const _0x36f5a2={};for(const [_0x309d6c,_0x317d01]of Object['entries'](_0x1742f['attributes']))_0x36f5a2[Nh[_0x309d6c]]=_0x40382f['attributes']['indexOf'](_0x317d01);_0x6fc13f['sort']((_0x42e165,_0x2b4c72)=>_0x36f5a2[_0x42e165['semantic']]-_0x36f5a2[_0x2b4c72['semantic']]),(_0x140285=_0x9cee47['attributes'])!=null&&_0x140285['NORMAL']||_0x6fc13f['splice'](0x2592+-0x1744+-0xe4d,0x1*-0x3+0x1ce1+-0x2e3*0xa,{'semantic':'NORMAL','components':0x3,'type':Ve});const _0x5f56d2=new kt(_0x19bdbd,_0x6fc13f),_0x5aece4=_0x40382f['vertices']['byteLength']/_0x5f56d2['size'],_0x44cda4=_0x5aece4<=0x15a85+-0xc3f9+0x1*0x6973?Yi:wr,_0x16470c=_0x40382f['indices']['byteLength']/(_0x5aece4<=0x1350+-0x1078f+-0x2*-0xfa1f?-0x11bc+-0x1652+-0x281*-0x10:0x5e2+-0xe14+0x41b*0x2);w['call'](()=>{_0x5aece4!==_0x3af39b[_0x9cee47['attributes']['POSITION']]['count']&&w['warn']('mesh\x20has\x20i'+'nvalid\x20ver'+'tex\x20count'),_0x16470c!==_0x3af39b[_0x9cee47['indices']]['count']&&w['warn']('mesh\x20has\x20i'+'nvalid\x20ind'+'ex\x20count');});const _0x56ad4f=new Is(_0x19bdbd,_0x5f56d2,_0x5aece4,{'data':_0x40382f['vertices']}),_0x62f7c0=new br(_0x19bdbd,_0x44cda4,_0x16470c,ms,_0x40382f['indices']);_0x4decd1['vertexBuff'+'er']=_0x56ad4f,_0x4decd1['indexBuffe'+'r'][-0x1*-0x6be+0x1*0xe3+-0x7a1]=_0x62f7c0,_0x4decd1['primitive'][-0x19e1+0x5c8+0x1419]['type']=T0(_0x9cee47),_0x4decd1['primitive'][-0x15*0x14e+-0xb8b+0x26f1]['base']=-0x205e+0xe04+0xae*0x1b,_0x4decd1['primitive'][-0x2*-0x313+-0x9c3*0x2+0xd60]['count']=_0x62f7c0?_0x16470c:_0x5aece4,_0x4decd1['primitive'][-0x4*0x36d+-0x3*0x7ed+0x65*0x5f]['indexed']=!!_0x62f7c0,_0x27403b();}});})),(_0x4e6ddb=_0x9cee47==null?void(-0x11ad*0x1+-0x39*-0x65+-0xe*0x58):_0x9cee47['extensions'])!=null&&_0x4e6ddb['KHR_materi'+'als_varian'+'ts']){const _0xd34589=_0x9cee47['extensions']['KHR_materi'+'als_varian'+'ts'],_0x591a4e={};_0xd34589['mappings']['forEach'](_0x38faa0=>{_0x38faa0['variants']['forEach'](_0x47f9c1=>{_0x591a4e[_0x47f9c1]=_0x38faa0['material'];});}),_0xfe8e04[_0x4decd1['id']]=_0x591a4e;}return _0x232dd0[_0x4decd1['id']]=_0x9cee47['material'],_0x4decd1;},nN=(_0x530e78,_0x976b68,_0x1459d6,_0x37732c,_0x7a21ea,_0x33b2c8,_0x2aaa35,_0x10b8be,_0x2e2618)=>{const _0x2d9919=[];return _0x976b68['primitives']['forEach'](_0x1344fc=>{var _0x4176f0;if((_0x4176f0=_0x1344fc['extensions'])!=null&&_0x4176f0['KHR_draco_'+'mesh_compr'+'ession'])_0x2d9919['push'](aN(_0x530e78,_0x1344fc,_0x1459d6,_0x37732c,_0x33b2c8,_0x2aaa35,_0x2e2618));else{let _0x409b45=_0x1344fc['hasOwnProp'+'erty']('indices')?ua(_0x1459d6[_0x1344fc['indices']],_0x37732c,!(0xcfd+-0xbd*-0x2a+-0x2bff)):null;const _0x52dbb8=iN(_0x530e78,_0x1344fc['attributes'],_0x409b45,_0x1459d6,_0x37732c,_0x7a21ea),_0x4d2abb=T0(_0x1344fc),_0x3d5c88=new Ge(_0x530e78);if(_0x3d5c88['vertexBuff'+'er']=_0x52dbb8,_0x3d5c88['primitive'][0x187*-0x9+-0x1*-0x175b+-0x4*0x267]['type']=_0x4d2abb,_0x3d5c88['primitive'][-0xa6e+0x346+0x4*0x1ca]['base']=-0x1*-0x1b77+-0x3*0x679+0x14*-0x67,_0x3d5c88['primitive'][-0xe09+-0x16bd+0x24c6*0x1]['indexed']=_0x409b45!==null,_0x409b45!==null){let _0x496e8d;_0x409b45 instanceof Uint8Array?_0x496e8d=$f:_0x409b45 instanceof Uint16Array?_0x496e8d=Yi:_0x496e8d=wr,_0x496e8d===$f&&_0x530e78['isWebGPU']&&(_0x496e8d=Yi,_0x409b45=new Uint16Array(_0x409b45));const _0x16aae8=new br(_0x530e78,_0x496e8d,_0x409b45['length'],ms,_0x409b45);_0x3d5c88['indexBuffe'+'r'][0xe32+-0x1*-0x1a13+0xd*-0x319]=_0x16aae8,_0x3d5c88['primitive'][-0x1969+-0x168e+0x2ff7*0x1]['count']=_0x409b45['length'];}else _0x3d5c88['primitive'][-0x1cd9+0x124d+0x96*0x12]['count']=_0x52dbb8['numVertice'+'s'];if(_0x1344fc['hasOwnProp'+'erty']('extensions')&&_0x1344fc['extensions']['hasOwnProp'+'erty']('KHR_materi'+'als_varian'+'ts')){const _0x1e255e=_0x1344fc['extensions']['KHR_materi'+'als_varian'+'ts'],_0x4e7e58={};_0x1e255e['mappings']['forEach'](_0x11614e=>{_0x11614e['variants']['forEach'](_0xfaeea3=>{_0x4e7e58[_0xfaeea3]=_0x11614e['material'];});}),_0x33b2c8[_0x3d5c88['id']]=_0x4e7e58;}_0x2aaa35[_0x3d5c88['id']]=_0x1344fc['material'];let _0x13ef6a=_0x1459d6[_0x1344fc['attributes']['POSITION']];if(_0x3d5c88['aabb']=Hu(_0x13ef6a),_0x1344fc['hasOwnProp'+'erty']('targets')){const _0x5d169c=[];_0x1344fc['targets']['forEach']((_0x1ea3dc,_0x277fab)=>{const _0x2db908={};_0x1ea3dc['hasOwnProp'+'erty']('POSITION')&&(_0x13ef6a=_0x1459d6[_0x1ea3dc['POSITION']],_0x2db908['deltaPosit'+'ions']=Pn(_0x13ef6a,_0x37732c),_0x2db908['aabb']=Hu(_0x13ef6a)),_0x1ea3dc['hasOwnProp'+'erty']('NORMAL')&&(_0x13ef6a=_0x1459d6[_0x1ea3dc['NORMAL']],_0x2db908['deltaNorma'+'ls']=Pn(_0x13ef6a,_0x37732c)),_0x976b68['hasOwnProp'+'erty']('extras')&&_0x976b68['extras']['hasOwnProp'+'erty']('targetName'+'s')?_0x2db908['name']=_0x976b68['extras']['targetName'+'s'][_0x277fab]:_0x2db908['name']=_0x277fab['toString'](0x4c1+-0x1073*0x2+-0x3*-0x965),_0x976b68['hasOwnProp'+'erty']('weights')&&(_0x2db908['defaultWei'+'ght']=_0x976b68['weights'][_0x277fab]),_0x2db908['preserveDa'+'ta']=_0x10b8be['morphPrese'+'rveData'],_0x5d169c['push'](new Md(_0x2db908));}),_0x3d5c88['morph']=new mm(_0x5d169c,_0x530e78,{'preferHighPrecision':_0x10b8be['morphPrefe'+'rHighPreci'+'sion']});}_0x2d9919['push'](_0x3d5c88);}}),_0x2d9919;},Dt=(_0x295eb5,_0x1bda43,_0xf5d180)=>{var _0x230bf4;let _0x1d0b3a;const _0x109133=_0x295eb5['texCoord'];if(_0x109133){for(_0x1d0b3a=0xa53+0xd5*-0x11+0x3*0x146;_0x1d0b3a<_0xf5d180['length'];++_0x1d0b3a)_0x1bda43[_0xf5d180[_0x1d0b3a]+'MapUv']=_0x109133;}const _0x356ac3=[0x122b+-0x25*-0x33+0xcc5*-0x2,0x1*-0x39f+0x10c6+0x7*-0x1e1],_0xbc147d=[-0x22e0+0x1*0x20ed+0x1f4,0x3*-0x262+0xecd+-0x7a6],_0x433250=(_0x230bf4=_0x295eb5['extensions'])==null?void(-0x20f3+-0x1*0x20c0+0x8b*0x79):_0x230bf4['KHR_textur'+'e_transfor'+'m'];if(_0x433250){const _0x1febc9=_0x433250['offset']||_0x356ac3,_0x506e3f=_0x433250['scale']||_0xbc147d,_0x36f830=_0x433250['rotation']?-_0x433250['rotation']*Y['RAD_TO_DEG']:-0x1c63+-0x1fa1+0x29c*0x17,_0x54838c=new J(_0x506e3f[-0x149d*0x1+-0x1e9*-0x11+-0xbdc],_0x506e3f[0x1bce+-0x1415+-0x1a*0x4c]),_0x2d51db=new J(_0x1febc9[0xb4b+-0x1*-0x1bf1+-0x273c],-0xc1*0x17+0x25d*-0x5+0x1d29-_0x506e3f[0x24f3+-0x1*0xfb3+-0x153f]-_0x1febc9[-0x1e18+-0x13f2+0x320b]);for(_0x1d0b3a=-0x1*0x397+0x1505*0x1+0x116e*-0x1;_0x1d0b3a<_0xf5d180['length'];++_0x1d0b3a)_0x1bda43[_0xf5d180[_0x1d0b3a]+'MapTiling']=_0x54838c,_0x1bda43[_0xf5d180[_0x1d0b3a]+'MapOffset']=_0x2d51db,_0x1bda43[_0xf5d180[_0x1d0b3a]+('MapRotatio'+'n')]=_0x36f830;}},oN=(_0xd23d71,_0x55ad72,_0x661898)=>{let _0x18e35b,_0xe7d971;if(_0xd23d71['hasOwnProp'+'erty']('diffuseFac'+'tor')?(_0x18e35b=_0xd23d71['diffuseFac'+'tor'],_0x55ad72['diffuse']['set'](Math['pow'](_0x18e35b[0x374*-0x9+0x9cb+0x1*0x1549],(-0x1817*-0x1+0x56d*-0x1+-0x12a9)/(0x1150+-0x3*0x970+-0x1*-0xb02+0.20000000000000018)),Math['pow'](_0x18e35b[0x3b2*-0x3+-0x195d+0x2474],(0x21a4+-0x175f+-0xa44)/(0x909*-0x3+-0x67*0x17+0x245e+0.20000000000000018)),Math['pow'](_0x18e35b[-0x7f6*0x4+0x466*-0x7+0x1f52*0x2],(0x1904+-0x13*0x185+0x34*0x13)/(0x3*0x285+-0x7*-0x4dd+-0x2998+0.20000000000000018))),_0x55ad72['opacity']=_0x18e35b[0x1be9+0x2507*0x1+-0x5e7*0xb]):(_0x55ad72['diffuse']['set'](-0x1591+0x133d+0x255,-0x3*-0xab6+-0x1*-0x268f+-0x46b*0x10,0x1361+-0x9bd*0x1+-0x9a3),_0x55ad72['opacity']=0x7f2+-0xb61*0x1+0x370),_0xd23d71['hasOwnProp'+'erty']('diffuseTex'+'ture')){const _0x3fd988=_0xd23d71['diffuseTex'+'ture'];_0xe7d971=_0x661898[_0x3fd988['index']],_0x55ad72['diffuseMap']=_0xe7d971,_0x55ad72['diffuseMap'+'Channel']='rgb',_0x55ad72['opacityMap']=_0xe7d971,_0x55ad72['opacityMap'+'Channel']='a',Dt(_0x3fd988,_0x55ad72,['diffuse','opacity']);}if(_0x55ad72['useMetalne'+'ss']=!(-0x16f+-0x4e5+0x655*0x1),_0xd23d71['hasOwnProp'+'erty']('specularFa'+'ctor')?(_0x18e35b=_0xd23d71['specularFa'+'ctor'],_0x55ad72['specular']['set'](Math['pow'](_0x18e35b[-0x2f9*0xc+-0x6b9*-0x1+-0x1cf3*-0x1],(0x242e+0x98+0x24c5*-0x1)/(-0x134e+-0x7*0xa0+-0x2f6*-0x8+0.20000000000000018)),Math['pow'](_0x18e35b[-0xfc4+0x1*-0xa5c+0x1a21],(0x2c*0xb1+-0xf2e*-0x1+-0x2d99)/(-0x35a+-0x105b+0x13b7+0.20000000000000018)),Math['pow'](_0x18e35b[0x1*-0xf85+-0x2550+0x34d7],(0x17*-0x9b+0x2b7+0x9*0x13f)/(-0x2*-0x1181+0xa28*-0x2+0x2f*-0x50+0.20000000000000018)))):_0x55ad72['specular']['set'](-0x3c9*0x3+0x1d*0xed+-0xf7d,0x10ce+0x4db+-0x15a8,0xb37+-0x1*0x170a+0xbd4),_0xd23d71['hasOwnProp'+'erty']('glossiness'+'Factor')?_0x55ad72['gloss']=_0xd23d71['glossiness'+'Factor']:_0x55ad72['gloss']=0x1895+0x1d1e+-0x35b2,_0xd23d71['hasOwnProp'+'erty']('specularGl'+'ossinessTe'+'xture')){const _0x3659f4=_0xd23d71['specularGl'+'ossinessTe'+'xture'];_0x55ad72['specularMa'+'p']=_0x55ad72['glossMap']=_0x661898[_0x3659f4['index']],_0x55ad72['specularMa'+'pChannel']='rgb',_0x55ad72['glossMapCh'+'annel']='a',Dt(_0x3659f4,_0x55ad72,['gloss','metalness']);}},lN=(_0x5cd932,_0x5594da,_0x33d67e)=>{if(_0x5cd932['hasOwnProp'+'erty']('clearcoatF'+'actor')?_0x5594da['clearCoat']=_0x5cd932['clearcoatF'+'actor']*(-0xd19*0x1+0x118b+-0x472+0.25):_0x5594da['clearCoat']=-0x17f*0x19+0x1ce+0x2bd*0xd,_0x5cd932['hasOwnProp'+'erty']('clearcoatT'+'exture')){const _0x4d4a84=_0x5cd932['clearcoatT'+'exture'];_0x5594da['clearCoatM'+'ap']=_0x33d67e[_0x4d4a84['index']],_0x5594da['clearCoatM'+'apChannel']='r',Dt(_0x4d4a84,_0x5594da,['clearCoat']);}if(_0x5cd932['hasOwnProp'+'erty']('clearcoatR'+'oughnessFa'+'ctor')?_0x5594da['clearCoatG'+'loss']=_0x5cd932['clearcoatR'+'oughnessFa'+'ctor']:_0x5594da['clearCoatG'+'loss']=-0x26dc+0x3*0xd01+-0x27,_0x5cd932['hasOwnProp'+'erty']('clearcoatR'+'oughnessTe'+'xture')){const _0x44671c=_0x5cd932['clearcoatR'+'oughnessTe'+'xture'];_0x5594da['clearCoatG'+'lossMap']=_0x33d67e[_0x44671c['index']],_0x5594da['clearCoatG'+'lossMapCha'+'nnel']='g',Dt(_0x44671c,_0x5594da,['clearCoatG'+'loss']);}if(_0x5cd932['hasOwnProp'+'erty']('clearcoatN'+'ormalTextu'+'re')){const _0x409d21=_0x5cd932['clearcoatN'+'ormalTextu'+'re'];_0x5594da['clearCoatN'+'ormalMap']=_0x33d67e[_0x409d21['index']],Dt(_0x409d21,_0x5594da,['clearCoatN'+'ormal']),_0x409d21['hasOwnProp'+'erty']('scale')?_0x5594da['clearCoatB'+'umpiness']=_0x409d21['scale']:_0x5594da['clearCoatB'+'umpiness']=0x3*0xc40+-0x1427+-0x9*0x1d8;}_0x5594da['clearCoatG'+'lossInvert']=!(-0x8b9+-0x68f+0xf48);},cN=(_0x4b447d,_0x47d867,_0xa650a6)=>{_0x47d867['useLightin'+'g']=!(-0xb50+-0x1c78+-0x3*-0xd43),_0x47d867['emissive']['copy'](_0x47d867['diffuse']),_0x47d867['emissiveMa'+'p']=_0x47d867['diffuseMap'],_0x47d867['emissiveMa'+'pUv']=_0x47d867['diffuseMap'+'Uv'],_0x47d867['emissiveMa'+'pTiling']['copy'](_0x47d867['diffuseMap'+'Tiling']),_0x47d867['emissiveMa'+'pOffset']['copy'](_0x47d867['diffuseMap'+'Offset']),_0x47d867['emissiveMa'+'pRotation']=_0x47d867['diffuseMap'+'Rotation'],_0x47d867['emissiveMa'+'pChannel']=_0x47d867['diffuseMap'+'Channel'],_0x47d867['emissiveVe'+'rtexColor']=_0x47d867['diffuseVer'+'texColor'],_0x47d867['emissiveVe'+'rtexColorC'+'hannel']=_0x47d867['diffuseVer'+'texColorCh'+'annel'],_0x47d867['useLightin'+'g']=!(-0x12b5+0x1*0x125f+0x57),_0x47d867['useSkybox']=!(-0x2252+0x2387+0x1*-0x134),_0x47d867['diffuse']['set'](0x4ce*-0x2+0x151f*0x1+-0xb82,0x4*-0x1b+-0xb*-0x4c+-0x2d7,-0x16d*0xf+0x26b+-0x3*-0x653),_0x47d867['diffuseMap']=null,_0x47d867['diffuseVer'+'texColor']=!(0x1677+0x9*-0x243+-0x21b);},hN=(_0x2951b5,_0x85cc6d,_0x2a2d1f)=>{if(_0x85cc6d['useMetalne'+'ssSpecular'+'Color']=!(-0x146*0x2+-0x1e40+0x20cc),_0x2951b5['hasOwnProp'+'erty']('specularCo'+'lorTexture')&&(_0x85cc6d['specularMa'+'p']=_0x2a2d1f[_0x2951b5['specularCo'+'lorTexture']['index']],_0x85cc6d['specularMa'+'pChannel']='rgb',Dt(_0x2951b5['specularCo'+'lorTexture'],_0x85cc6d,['specular'])),_0x2951b5['hasOwnProp'+'erty']('specularCo'+'lorFactor')){const _0x4f4276=_0x2951b5['specularCo'+'lorFactor'];_0x85cc6d['specular']['set'](Math['pow'](_0x4f4276[0x1679+0x1ad5+-0x314e],(-0x1f1*0xa+-0x1ff*0x4+0x1b67*0x1)/(0x235*0x5+0xc42+-0x1749+0.20000000000000018)),Math['pow'](_0x4f4276[-0x1*0xa06+0x1b43*-0x1+0x254a],(0x952+-0x1*0x41c+-0x535)/(-0x1*-0xe81+0x1121*0x1+0x1fa0*-0x1+0.20000000000000018)),Math['pow'](_0x4f4276[0x28a+-0x204a+0x1dc2],(0x70*0x16+-0xaab*0x2+-0xbb7*-0x1)/(0x9*0x1b4+0x13b4+-0x2306+0.20000000000000018)));}else _0x85cc6d['specular']['set'](-0x9b+-0x1d0c+0x3b5*0x8,0xb52+-0x2b1*0x6+0x4d5,0x1*0x1796+0xd57+0x8b*-0x44);_0x2951b5['hasOwnProp'+'erty']('specularFa'+'ctor')?_0x85cc6d['specularit'+'yFactor']=_0x2951b5['specularFa'+'ctor']:_0x85cc6d['specularit'+'yFactor']=-0x1373*0x1+0x1cbe+-0x94a,_0x2951b5['hasOwnProp'+'erty']('specularTe'+'xture')&&(_0x85cc6d['specularit'+'yFactorMap'+'Channel']='a',_0x85cc6d['specularit'+'yFactorMap']=_0x2a2d1f[_0x2951b5['specularTe'+'xture']['index']],Dt(_0x2951b5['specularTe'+'xture'],_0x85cc6d,['specularit'+'yFactor']));},dN=(_0x58357a,_0x4583f8,_0xd2f18a)=>{_0x58357a['hasOwnProp'+'erty']('ior')&&(_0x4583f8['refraction'+'Index']=(-0xac5+0x1*0x1dfb+-0x1335)/_0x58357a['ior']);},fN=(_0x5632fd,_0x23d4bd,_0x1afadb)=>{_0x5632fd['hasOwnProp'+'erty']('dispersion')&&(_0x23d4bd['dispersion']=_0x5632fd['dispersion']);},uN=(_0x16e552,_0x383164,_0x20a91d)=>{_0x383164['blendType']=Zs,_0x383164['useDynamic'+'Refraction']=!(0x1547+-0x1045+0x2*-0x281),_0x16e552['hasOwnProp'+'erty']('transmissi'+'onFactor')&&(_0x383164['refraction']=_0x16e552['transmissi'+'onFactor']),_0x16e552['hasOwnProp'+'erty']('transmissi'+'onTexture')&&(_0x383164['refraction'+'MapChannel']='r',_0x383164['refraction'+'Map']=_0x20a91d[_0x16e552['transmissi'+'onTexture']['index']],Dt(_0x16e552['transmissi'+'onTexture'],_0x383164,['refraction']));},pN=(_0x222616,_0x29febf,_0x27d6e7)=>{if(_0x29febf['useSheen']=!(0x85e+-0x2344+0x272*0xb),_0x222616['hasOwnProp'+'erty']('sheenColor'+'Factor')){const _0x1425f6=_0x222616['sheenColor'+'Factor'];_0x29febf['sheen']['set'](Math['pow'](_0x1425f6[0x1b5+0x848+0x9fd*-0x1],(-0xeaa*0x1+0x24e5+-0x163a)/(0x8d8+-0x33b+-0x59b+0.20000000000000018)),Math['pow'](_0x1425f6[0x23df+-0x1*0x4b1+-0x1f2d],(-0x211*-0x5+-0x4fa+-0x55a)/(-0x2*0x988+0x1ff7+-0x1*0xce5+0.20000000000000018)),Math['pow'](_0x1425f6[0x190*-0x1+-0x1b6b+-0x29*-0xb5],(-0x18f6+0x13ee+0x509)/(-0x26a0+-0x1*-0x18c7+0xddb+0.20000000000000018)));}else _0x29febf['sheen']['set'](0x2*-0xfea+-0x2c1+0x2296,-0xb*0x317+0x3*-0x591+0x32b1,-0x30+-0x1*-0xc1+-0x90);_0x222616['hasOwnProp'+'erty']('sheenColor'+'Texture')&&(_0x29febf['sheenMap']=_0x27d6e7[_0x222616['sheenColor'+'Texture']['index']],Dt(_0x222616['sheenColor'+'Texture'],_0x29febf,['sheen'])),_0x29febf['sheenGloss']=_0x222616['hasOwnProp'+'erty']('sheenRough'+'nessFactor')?_0x222616['sheenRough'+'nessFactor']:0x688+-0xc15+0xcb*0x7,_0x222616['hasOwnProp'+'erty']('sheenRough'+'nessTextur'+'e')&&(_0x29febf['sheenGloss'+'Map']=_0x27d6e7[_0x222616['sheenRough'+'nessTextur'+'e']['index']],_0x29febf['sheenGloss'+'MapChannel']='a',Dt(_0x222616['sheenRough'+'nessTextur'+'e'],_0x29febf,['sheenGloss'])),_0x29febf['sheenGloss'+'Invert']=!(0x99a+0x256f+-0x2f09);},mN=(_0xdc39d3,_0x3decb9,_0x697358)=>{if(_0x3decb9['blendType']=Zs,_0x3decb9['useDynamic'+'Refraction']=!(0x1326+-0x19*-0xc7+-0x2695*0x1),_0xdc39d3['hasOwnProp'+'erty']('thicknessF'+'actor')&&(_0x3decb9['thickness']=_0xdc39d3['thicknessF'+'actor']),_0xdc39d3['hasOwnProp'+'erty']('thicknessT'+'exture')&&(_0x3decb9['thicknessM'+'ap']=_0x697358[_0xdc39d3['thicknessT'+'exture']['index']],_0x3decb9['thicknessM'+'apChannel']='g',Dt(_0xdc39d3['thicknessT'+'exture'],_0x3decb9,['thickness'])),_0xdc39d3['hasOwnProp'+'erty']('attenuatio'+'nDistance')&&(_0x3decb9['attenuatio'+'nDistance']=_0xdc39d3['attenuatio'+'nDistance']),_0xdc39d3['hasOwnProp'+'erty']('attenuatio'+'nColor')){const _0x1033ac=_0xdc39d3['attenuatio'+'nColor'];_0x3decb9['attenuatio'+'n']['set'](Math['pow'](_0x1033ac[0x4fb+-0xbc7+-0xae*-0xa],(0x22a2+-0x1*-0x1b06+-0x1*0x3da7)/(-0xa*-0x18b+-0x2*0xa16+0x1*0x4c0+0.20000000000000018)),Math['pow'](_0x1033ac[-0x2686+-0x43f*-0x3+0x19ca*0x1],(-0x4d3+-0x1*-0xdd8+-0x4*0x241)/(-0x6ab+-0x13a8+0x1a55+0.20000000000000018)),Math['pow'](_0x1033ac[0x4*-0x1e2+0x2019+-0x188f],(-0x329*-0xb+0x1e94+-0x4156)/(-0x15aa+0xf9f+0x60d+0.20000000000000018)));}},_N=(_0x19185b,_0x20956e,_0x4edd2a)=>{_0x19185b['hasOwnProp'+'erty']('emissiveSt'+'rength')&&(_0x20956e['emissiveIn'+'tensity']=_0x19185b['emissiveSt'+'rength']);},gN=(_0x400e93,_0xb55b83,_0x6eb529)=>{_0xb55b83['useIridesc'+'ence']=!(-0x2*0xcd2+0x5a1*-0x6+0x3b6a),_0x400e93['hasOwnProp'+'erty']('iridescenc'+'eFactor')&&(_0xb55b83['iridescenc'+'e']=_0x400e93['iridescenc'+'eFactor']),_0x400e93['hasOwnProp'+'erty']('iridescenc'+'eTexture')&&(_0xb55b83['iridescenc'+'eMapChanne'+'l']='r',_0xb55b83['iridescenc'+'eMap']=_0x6eb529[_0x400e93['iridescenc'+'eTexture']['index']],Dt(_0x400e93['iridescenc'+'eTexture'],_0xb55b83,['iridescenc'+'e'])),_0x400e93['hasOwnProp'+'erty']('iridescenc'+'eIor')&&(_0xb55b83['iridescenc'+'eRefractio'+'nIndex']=_0x400e93['iridescenc'+'eIor']),_0x400e93['hasOwnProp'+'erty']('iridescenc'+'eThickness'+'Minimum')&&(_0xb55b83['iridescenc'+'eThickness'+'Min']=_0x400e93['iridescenc'+'eThickness'+'Minimum']),_0x400e93['hasOwnProp'+'erty']('iridescenc'+'eThickness'+'Maximum')&&(_0xb55b83['iridescenc'+'eThickness'+'Max']=_0x400e93['iridescenc'+'eThickness'+'Maximum']),_0x400e93['hasOwnProp'+'erty']('iridescenc'+'eThickness'+'Texture')&&(_0xb55b83['iridescenc'+'eThickness'+'MapChannel']='g',_0xb55b83['iridescenc'+'eThickness'+'Map']=_0x6eb529[_0x400e93['iridescenc'+'eThickness'+'Texture']['index']],Dt(_0x400e93['iridescenc'+'eThickness'+'Texture'],_0xb55b83,['iridescenc'+'eThickness']));},SN=(_0x29afa8,_0x203636,_0x1a2375)=>{if(_0x203636['enableGGXS'+'pecular']=!(0x149f+0x22f5+-0xde5*0x4),_0x29afa8['hasOwnProp'+'erty']('anisotropy'+'Strength')?_0x203636['anisotropy'+'Intensity']=_0x29afa8['anisotropy'+'Strength']:_0x203636['anisotropy'+'Intensity']=0x1f75+0x199*-0x13+-0x6*0x2f,_0x29afa8['hasOwnProp'+'erty']('anisotropy'+'Texture')){const _0x516b77=_0x29afa8['anisotropy'+'Texture'];_0x203636['anisotropy'+'Map']=_0x1a2375[_0x516b77['index']],Dt(_0x516b77,_0x203636,['anisotropy']);}_0x29afa8['hasOwnProp'+'erty']('anisotropy'+'Rotation')?_0x203636['anisotropy'+'Rotation']=_0x29afa8['anisotropy'+'Rotation']*Y['RAD_TO_DEG']:_0x203636['anisotropy'+'Rotation']=-0x1396*-0x1+0xf6f+-0xa3*0x37;},w0=(_0x560700,_0x28aacf)=>{const _0x30c407=new Ut();_0x560700['hasOwnProp'+'erty']('name')&&(_0x30c407['name']=_0x560700['name']),_0x30c407['occludeSpe'+'cular']=bd,_0x30c407['diffuseVer'+'texColor']=!(-0x1b87+-0x19d8*0x1+-0x41b*-0xd),_0x30c407['specularTi'+'nt']=!(-0x120a+-0x1*-0x1b9b+-0x991),_0x30c407['specularVe'+'rtexColor']=!(-0x21c9+-0x1d6c+0x5bf*0xb),_0x30c407['specular']['set'](-0x1c72+-0x1c9a+0x27b*0x17,0x12b*-0xc+0xa8a+0x37b,0x2623+-0x7*-0x47+-0x2813),_0x30c407['gloss']=0x106*-0xb+-0x2*-0x105f+-0x157b,_0x30c407['glossInver'+'t']=!(0x1e95*0x1+0x1086+-0x2f1b),_0x30c407['useMetalne'+'ss']=!(0xb*0x6b+-0x1cee+0x1855);let _0x171141,_0x15ab74;if(_0x560700['hasOwnProp'+'erty']('pbrMetalli'+'cRoughness')){const _0x5cd271=_0x560700['pbrMetalli'+'cRoughness'];if(_0x5cd271['hasOwnProp'+'erty']('baseColorF'+'actor')&&(_0x171141=_0x5cd271['baseColorF'+'actor'],_0x30c407['diffuse']['set'](Math['pow'](_0x171141[0x2065+-0x2*-0xff8+-0x1*0x4055],(-0x777+0x1*0x11d2+0x212*-0x5)/(0xb1*0x2+-0x1ced+0x1b8d+0.20000000000000018)),Math['pow'](_0x171141[-0x1123+0x167a+-0x556],(-0xc5f*0x2+-0x74f+0xb*0x2ea)/(-0x4f+-0x1395+0x13e6+0.20000000000000018)),Math['pow'](_0x171141[0x25d0+-0x91+-0x253d*0x1],(-0x1eb5+-0x242+0x20f8)/(-0xcbc+0x19b*0x12+0xb*-0x178+0.20000000000000018))),_0x30c407['opacity']=_0x171141[-0x41*0x55+0x810+0xd88]),_0x5cd271['hasOwnProp'+'erty']('baseColorT'+'exture')){const _0x423f79=_0x5cd271['baseColorT'+'exture'];_0x15ab74=_0x28aacf[_0x423f79['index']],_0x30c407['diffuseMap']=_0x15ab74,_0x30c407['diffuseMap'+'Channel']='rgb',_0x30c407['opacityMap']=_0x15ab74,_0x30c407['opacityMap'+'Channel']='a',Dt(_0x423f79,_0x30c407,['diffuse','opacity']);}if(_0x5cd271['hasOwnProp'+'erty']('metallicFa'+'ctor')&&(_0x30c407['metalness']=_0x5cd271['metallicFa'+'ctor']),_0x5cd271['hasOwnProp'+'erty']('roughnessF'+'actor')&&(_0x30c407['gloss']=_0x5cd271['roughnessF'+'actor']),_0x5cd271['hasOwnProp'+'erty']('metallicRo'+'ughnessTex'+'ture')){const _0x518715=_0x5cd271['metallicRo'+'ughnessTex'+'ture'];_0x30c407['metalnessM'+'ap']=_0x30c407['glossMap']=_0x28aacf[_0x518715['index']],_0x30c407['metalnessM'+'apChannel']='b',_0x30c407['glossMapCh'+'annel']='g',Dt(_0x518715,_0x30c407,['gloss','metalness']);}}if(_0x560700['hasOwnProp'+'erty']('normalText'+'ure')){const _0x441331=_0x560700['normalText'+'ure'];_0x30c407['normalMap']=_0x28aacf[_0x441331['index']],Dt(_0x441331,_0x30c407,['normal']),_0x441331['hasOwnProp'+'erty']('scale')&&(_0x30c407['bumpiness']=_0x441331['scale']);}if(_0x560700['hasOwnProp'+'erty']('occlusionT'+'exture')){const _0xc16f83=_0x560700['occlusionT'+'exture'];_0x30c407['aoMap']=_0x28aacf[_0xc16f83['index']],_0x30c407['aoMapChann'+'el']='r',Dt(_0xc16f83,_0x30c407,['ao']);}if(_0x560700['hasOwnProp'+'erty']('emissiveFa'+'ctor')&&(_0x171141=_0x560700['emissiveFa'+'ctor'],_0x30c407['emissive']['set'](Math['pow'](_0x171141[-0x1b41*-0x1+-0xa*0x166+0x2b*-0x4f],(0x2c3*0xb+-0x250b*0x1+-0x1*-0x6ab)/(0x781+0x168*-0x1b+0x1e79+0.20000000000000018)),Math['pow'](_0x171141[-0x1de+0x97*-0x32+0x1f5d*0x1],(-0xb2a*-0x1+-0x13c*0xb+0x26b)/(-0x147*-0x1+0xcc5*-0x2+0x6d*0x39+0.20000000000000018)),Math['pow'](_0x171141[-0x77*0x1b+-0xcd4+-0x1963*-0x1],(0x116*-0x11+0xf7f+0x2f8)/(-0x2708+0x5ab+-0x215f*-0x1+0.20000000000000018)))),_0x560700['hasOwnProp'+'erty']('emissiveTe'+'xture')){const _0x2e124d=_0x560700['emissiveTe'+'xture'];_0x30c407['emissiveMa'+'p']=_0x28aacf[_0x2e124d['index']],Dt(_0x2e124d,_0x30c407,['emissive']);}if(_0x560700['hasOwnProp'+'erty']('alphaMode'))switch(_0x560700['alphaMode']){case'MASK':_0x30c407['blendType']=Cs,_0x560700['hasOwnProp'+'erty']('alphaCutof'+'f')?_0x30c407['alphaTest']=_0x560700['alphaCutof'+'f']:_0x30c407['alphaTest']=0x13f2+-0x19e7+0x5f5+0.5;break;case'BLEND':_0x30c407['blendType']=Zs,_0x30c407['depthWrite']=!(-0x21fe+0x108*-0x9+0x2b47);break;default:case'OPAQUE':_0x30c407['blendType']=Cs;break;}else _0x30c407['blendType']=Cs;_0x560700['hasOwnProp'+'erty']('doubleSide'+'d')?(_0x30c407['twoSidedLi'+'ghting']=_0x560700['doubleSide'+'d'],_0x30c407['cull']=_0x560700['doubleSide'+'d']?bt:pa):(_0x30c407['twoSidedLi'+'ghting']=!(0x1a86+0x1827+-0x32ac),_0x30c407['cull']=pa);const _0x319280={'KHR_materials_clearcoat':lN,'KHR_materials_emissive_strength':_N,'KHR_materials_ior':dN,'KHR_materials_dispersion':fN,'KHR_materials_iridescence':gN,'KHR_materials_pbrSpecularGlossiness':oN,'KHR_materials_sheen':pN,'KHR_materials_specular':hN,'KHR_materials_transmission':uN,'KHR_materials_unlit':cN,'KHR_materials_volume':mN,'KHR_materials_anisotropy':SN};if(_0x560700['hasOwnProp'+'erty']('extensions'))for(const _0x3e980f in _0x560700['extensions']){const _0x43500f=_0x319280[_0x3e980f];_0x43500f!==void(-0x46d*0x7+-0x1a0b*0x1+0x3*0x1302)&&_0x43500f(_0x560700['extensions'][_0x3e980f],_0x30c407,_0x28aacf);}return _0x30c407['update'](),_0x30c407;},yN=(_0x1827b7,_0x3170a8,_0x23611e,_0x264b9f,_0x21c133,_0x395d39,_0x156991)=>{const _0xb69265=_0x34845f=>new Fh(yl(_0x34845f['type']),Pn(_0x34845f,_0x264b9f)),_0x5ab05e={'STEP':Bv,'LINEAR':Su,'CUBICSPLINE':yu},_0x2dc01d={},_0x2101b7={},_0x52a0dc={};let _0xf64c73=0x1272+0x1156+-0x23c7,_0x17e8b6;for(_0x17e8b6=-0x1e9e+-0x1c94+0x3b32;_0x17e8b6<_0x1827b7['samplers']['length'];++_0x17e8b6){const _0x5a6126=_0x1827b7['samplers'][_0x17e8b6];_0x2dc01d['hasOwnProp'+'erty'](_0x5a6126['input'])||(_0x2dc01d[_0x5a6126['input']]=_0xb69265(_0x23611e[_0x5a6126['input']])),_0x2101b7['hasOwnProp'+'erty'](_0x5a6126['output'])||(_0x2101b7[_0x5a6126['output']]=_0xb69265(_0x23611e[_0x5a6126['output']]));const _0x4af7be=_0x5a6126['hasOwnProp'+'erty']('interpolat'+'ion')&&_0x5ab05e['hasOwnProp'+'erty'](_0x5a6126['interpolat'+'ion'])?_0x5ab05e[_0x5a6126['interpolat'+'ion']]:Su,_0x5757d8={'paths':[],'input':_0x5a6126['input'],'output':_0x5a6126['output'],'interpolation':_0x4af7be};_0x52a0dc[_0x17e8b6]=_0x5757d8;}const _0x257670=[],_0x37af3d={'translation':'localPosit'+'ion','rotation':'localRotat'+'ion','scale':'localScale'},_0x4a3f6b=_0x503cfe=>{const _0xbd0493=[];for(;_0x503cfe;)_0xbd0493['unshift'](_0x503cfe['name']),_0x503cfe=_0x503cfe['parent'];return _0xbd0493;},_0x166fcf=(_0x4bfd63,_0x29bc36,_0x53f375)=>{const _0x1188a7=_0x2101b7[_0x4bfd63['output']];if(!_0x1188a7){w['warn']('glb-parser'+':\x20No\x20outpu'+'t\x20data\x20is\x20'+'available\x20'+'for\x20the\x20mo'+'rph\x20target'+'\x20curve\x20('+_0x53f375+('/graph/wei'+'ghts).\x20Ski'+'pping.'));return;}let _0x16740e;if(_0x395d39&&_0x395d39[_0x29bc36['mesh']]){const _0x23889c=_0x395d39[_0x29bc36['mesh']];_0x23889c['hasOwnProp'+'erty']('extras')&&_0x23889c['extras']['hasOwnProp'+'erty']('targetName'+'s')&&(_0x16740e=_0x23889c['extras']['targetName'+'s']);}const _0x4ad77e=_0x1188a7['data'],_0x51e7d4=_0x4ad77e['length']/_0x2dc01d[_0x4bfd63['input']]['data']['length'],_0x3e1888=_0x4ad77e['length']/_0x51e7d4,_0x199ff5=_0x3e1888*(-0x12*0x111+0x1*-0xf1d+0x2253),_0x182cd1=new ArrayBuffer(_0x199ff5*_0x51e7d4);for(let _0x111e8e=-0x1173+-0x20be+0x3*0x10bb;_0x111e8e<_0x51e7d4;_0x111e8e++){const _0x1d7ab4=new Float32Array(_0x182cd1,_0x199ff5*_0x111e8e,_0x3e1888);for(let _0x3fd403=-0x14e3+-0x347+0x182a;_0x3fd403<_0x3e1888;_0x3fd403++)_0x1d7ab4[_0x3fd403]=_0x4ad77e[_0x3fd403*_0x51e7d4+_0x111e8e];const _0x5153ac=new Fh(-0x1259+0x93e+0xb*0xd4,_0x1d7ab4),_0x54ea42=_0x16740e!=null&&_0x16740e[_0x111e8e]?'name.'+_0x16740e[_0x111e8e]:_0x111e8e;_0x2101b7[-_0xf64c73]=_0x5153ac;const _0x20ac3d={'paths':[{'entityPath':_0x53f375,'component':'graph','propertyPath':['weight.'+_0x54ea42]}],'input':_0x4bfd63['input'],'output':-_0xf64c73,'interpolation':_0x4bfd63['interpolat'+'ion']};_0xf64c73++,_0x52a0dc['morphCurve'+'-'+_0x17e8b6+'-'+_0x111e8e]=_0x20ac3d;}};for(_0x17e8b6=-0x51*0x76+-0x428+-0x1*-0x297e;_0x17e8b6<_0x1827b7['channels']['length'];++_0x17e8b6){const _0x581272=_0x1827b7['channels'][_0x17e8b6],_0x26e498=_0x581272['target'],_0x2dbbda=_0x52a0dc[_0x581272['sampler']],_0x2cd0f4=_0x21c133[_0x26e498['node']],_0x5bcc80=_0x156991[_0x26e498['node']],_0x4bd667=_0x4a3f6b(_0x2cd0f4);_0x26e498['path']['startsWith']('weights')?(_0x166fcf(_0x2dbbda,_0x5bcc80,_0x4bd667),_0x52a0dc[_0x581272['sampler']]['morphCurve']=!(-0x44d+-0x1ab8+0x1f05)):_0x2dbbda['paths']['push']({'entityPath':_0x4bd667,'component':'graph','propertyPath':[_0x37af3d[_0x26e498['path']]]});}const _0x18bd4a=[],_0x52f03d=[],_0x2b1443=[];for(const _0x5203de in _0x2dc01d)_0x18bd4a['push'](_0x2dc01d[_0x5203de]),_0x2dc01d[_0x5203de]=_0x18bd4a['length']-(-0x1655+0x200b+-0x47*0x23);for(const _0x15f64b in _0x2101b7)_0x52f03d['push'](_0x2101b7[_0x15f64b]),_0x2101b7[_0x15f64b]=_0x52f03d['length']-(0x376*-0x8+-0x46*-0x1f+0x1337);for(const _0x330cfc in _0x52a0dc){const _0x4d7982=_0x52a0dc[_0x330cfc];_0x4d7982['morphCurve']||(_0x2b1443['push'](new v0(_0x4d7982['paths'],_0x2dc01d[_0x4d7982['input']],_0x2101b7[_0x4d7982['output']],_0x4d7982['interpolat'+'ion'])),_0x4d7982['paths']['length']>0x1e84+0x154c*0x1+-0x33d0&&_0x4d7982['paths'][-0x1c12+-0x1dda+-0x1cf6*-0x2]['propertyPa'+'th'][-0x1b12+-0x1*0x1421+0x2f33]==='localRotat'+'ion'&&_0x4d7982['interpolat'+'ion']!==yu&&_0x257670['push'](_0x2b1443[_0x2b1443['length']-(0x134d+-0x1b46+-0x1*-0x7fa)]['output']));}_0x257670['sort']();let _0xfec547=null,_0x14a04d;for(_0x17e8b6=0x12c2+0x8*0x14f+-0x6*0x4df;_0x17e8b6<_0x257670['length'];++_0x17e8b6){const _0x1b2bd3=_0x257670[_0x17e8b6];if(_0x17e8b6===0x1*0x19cf+0x8ec+0x22bb*-0x1||_0x1b2bd3!==_0xfec547){if(_0x14a04d=_0x52f03d[_0x1b2bd3],_0x14a04d['components']===0x338*0x5+0x67a+-0xb47*0x2){const _0xc6d894=_0x14a04d['data'],_0x1fe574=_0xc6d894['length']-(-0x18fa+-0x1ba2+-0x4*-0xd28);for(let _0x592950=0x4a9*0x1+0x58b*0x7+-0x2b76;_0x592950<_0x1fe574;_0x592950+=0x1b7b+-0x18b1+-0x2c6)_0xc6d894[_0x592950+(0x1ae6+0x177c+-0x3262)]*_0xc6d894[_0x592950+(-0x1b0+0x136c+-0x11b8)]+_0xc6d894[_0x592950+(0xfe8+0xd*0x28+-0x11ef*0x1)]*_0xc6d894[_0x592950+(0x2d8+0x592+-0x865*0x1)]+_0xc6d894[_0x592950+(-0x24ee*0x1+0x1*-0x184a+-0x1e9d*-0x2)]*_0xc6d894[_0x592950+(0x1e0+0x1525+-0x16ff)]+_0xc6d894[_0x592950+(-0x1*-0x1738+-0x5b9*-0x6+-0x398b)]*_0xc6d894[_0x592950+(0x12aa*0x1+0x224c+-0x34ef)]<-0x20e1*0x1+-0x1f46+0x4027&&(_0xc6d894[_0x592950+(0x1f3d+0x2*-0xc33+-0x6d3)]*=-(0x65a+-0x418*0x2+-0x1*-0x1d7),_0xc6d894[_0x592950+(-0x2*0x55c+-0x21b+0xcd8)]*=-(-0x11c*-0x1d+-0x2485*0x1+0x45a),_0xc6d894[_0x592950+(-0x1*0xfd1+0x805*0x1+-0x2*-0x3e9)]*=-(0x886*0x1+0xc*-0x31a+0x5d*0x4f),_0xc6d894[_0x592950+(0x14ac+-0x162a+-0x1*-0x185)]*=-(-0x260d+0x209+0x2405));}_0xfec547=_0x1b2bd3;}}let _0x291c9f=0x1830+0xe39+-0x2669*0x1;for(_0x17e8b6=-0x419*0x7+0x1*0x1468+0xa3*0xd;_0x17e8b6<_0x18bd4a['length'];_0x17e8b6++)_0x14a04d=_0x18bd4a[_0x17e8b6]['_data'],_0x291c9f=Math['max'](_0x291c9f,_0x14a04d['length']===0x2629*-0x1+0x106e+0x15bb?-0x2240*0x1+0x795+0x1aab*0x1:_0x14a04d[_0x14a04d['length']-(0x6e*0x2d+-0x215a+-0x1*-0xe05)]);return new Qi(_0x1827b7['hasOwnProp'+'erty']('name')?_0x1827b7['name']:'animation_'+_0x3170a8,_0x291c9f,_0x18bd4a,_0x52f03d,_0x2b1443);},Dc=new te(),Qa=new D(),vN=(_0x5ae1e4,_0x4fb1ce,_0x3dd0b8)=>{const _0x4f4051=new Ie();if(_0x5ae1e4['hasOwnProp'+'erty']('name')&&_0x5ae1e4['name']['length']>-0xc54+0x1a0d+-0xdb9*0x1?_0x4f4051['name']=_0x5ae1e4['name']:_0x4f4051['name']='node_'+_0x4fb1ce,_0x5ae1e4['hasOwnProp'+'erty']('matrix')&&(Dc['data']['set'](_0x5ae1e4['matrix']),Dc['getTransla'+'tion'](Qa),_0x4f4051['setLocalPo'+'sition'](Qa),Dc['getEulerAn'+'gles'](Qa),_0x4f4051['setLocalEu'+'lerAngles'](Qa),Dc['getScale'](Qa),_0x4f4051['setLocalSc'+'ale'](Qa)),_0x5ae1e4['hasOwnProp'+'erty']('rotation')){const _0x5df193=_0x5ae1e4['rotation'];_0x4f4051['setLocalRo'+'tation'](_0x5df193[0x1f04+0x17bf+-0x1241*0x3],_0x5df193[0x101e+-0xd04+-0x319],_0x5df193[0x1658+0x17b*-0x3+0x5f7*-0x3],_0x5df193[-0x907+0x12c2+-0x9b8]);}if(_0x5ae1e4['hasOwnProp'+'erty']('translatio'+'n')){const _0x4e72a3=_0x5ae1e4['translatio'+'n'];_0x4f4051['setLocalPo'+'sition'](_0x4e72a3[0x20*-0x133+-0x1f76+0x45d6],_0x4e72a3[-0x202f+0x2177*0x1+-0x147],_0x4e72a3[-0x1174*-0x1+0x3*0x337+-0x49*0x5f]);}if(_0x5ae1e4['hasOwnProp'+'erty']('scale')){const _0x3a0a53=_0x5ae1e4['scale'];_0x4f4051['setLocalSc'+'ale'](_0x3a0a53[0xa*0x176+-0x2a+-0x2b*0x56],_0x3a0a53[-0x97*-0x25+-0x9a1+-0x1*0xc31],_0x3a0a53[-0x2dc*0x2+-0x148*0x7+0xeb2]);}return _0x5ae1e4['hasOwnProp'+'erty']('extensions')&&_0x5ae1e4['extensions']['EXT_mesh_g'+'pu_instanc'+'ing']&&_0x3dd0b8['set'](_0x5ae1e4,{'ext':_0x5ae1e4['extensions']['EXT_mesh_g'+'pu_instanc'+'ing']}),_0x4f4051;},xN=(_0x4fcac1,_0x51b386)=>{const _0xd7ec87=_0x4fcac1['type']==='orthograph'+'ic'?En:ni,_0x48f571=_0xd7ec87===En?_0x4fcac1['orthograph'+'ic']:_0x4fcac1['perspectiv'+'e'],_0x4fec66={'enabled':!(0x15f+-0x1*0x2f3+0x195),'projection':_0xd7ec87,'nearClip':_0x48f571['znear'],'aspectRatioMode':hm};_0x48f571['zfar']&&(_0x4fec66['farClip']=_0x48f571['zfar']),_0xd7ec87===En?(_0x4fec66['orthoHeigh'+'t']=(-0xa25*-0x2+0x5b*0x4+-0x15b6+0.5)*_0x48f571['ymag'],_0x48f571['ymag']&&(_0x4fec66['aspectRati'+'oMode']=lu,_0x4fec66['aspectRati'+'o']=_0x48f571['xmag']/_0x48f571['ymag'])):(_0x4fec66['fov']=_0x48f571['yfov']*Y['RAD_TO_DEG'],_0x48f571['aspectRati'+'o']&&(_0x4fec66['aspectRati'+'oMode']=lu,_0x4fec66['aspectRati'+'o']=_0x48f571['aspectRati'+'o']));const _0x117090=new lt(_0x4fcac1['name']);return _0x117090['addCompone'+'nt']('camera',_0x4fec66),_0x117090;},TN=(_0x2b05fb,_0x5c1157)=>{const _0x1c1366={'enabled':!(-0x23*-0x27+0x5*0x641+-0x2499),'type':_0x2b05fb['type']==='point'?'omni':_0x2b05fb['type'],'color':_0x2b05fb['hasOwnProp'+'erty']('color')?new ie(_0x2b05fb['color']):ie['WHITE'],'range':_0x2b05fb['hasOwnProp'+'erty']('range')?_0x2b05fb['range']:-0x2a68+-0xb81*-0x5+0xbf9*0x2,'falloffMode':ev,'intensity':_0x2b05fb['hasOwnProp'+'erty']('intensity')?Y['clamp'](_0x2b05fb['intensity'],-0x1b43+0x177d+0x3c6,-0x67*0x31+0x21b+-0x29*-0x6e):-0xb*0x2c0+0xb1e+0x45*0x47};_0x2b05fb['hasOwnProp'+'erty']('spot')&&(_0x1c1366['innerConeA'+'ngle']=_0x2b05fb['spot']['hasOwnProp'+'erty']('innerConeA'+'ngle')?_0x2b05fb['spot']['innerConeA'+'ngle']*Y['RAD_TO_DEG']:-0x85a+-0xd1*-0x10+-0x4b6,_0x1c1366['outerConeA'+'ngle']=_0x2b05fb['spot']['hasOwnProp'+'erty']('outerConeA'+'ngle')?_0x2b05fb['spot']['outerConeA'+'ngle']*Y['RAD_TO_DEG']:Math['PI']/(0x8b9+0x3*-0x4b3+-0x1cc*-0x3)),_0x2b05fb['hasOwnProp'+'erty']('intensity')&&(_0x1c1366['luminance']=_0x2b05fb['intensity']*pl['getLightUn'+'itConversi'+'on'](fu[_0x1c1366['type']],_0x1c1366['outerConeA'+'ngle'],_0x1c1366['innerConeA'+'ngle']));const _0x2003da=new lt(_0x5c1157['name']);return _0x2003da['rotateLoca'+'l'](-0x1790+0x1043+-0x28d*-0x3,0x1eee+-0x11*0x128+-0xb46,0x2666+0x10ef+-0xb11*0x5),_0x2003da['addCompone'+'nt']('light',_0x1c1366),_0x2003da;},wN=(_0x1d2420,_0x4ffee4,_0x45559e,_0x59f489)=>{if(!_0x4ffee4['hasOwnProp'+'erty']('skins')||_0x4ffee4['skins']['length']===0x1fac+-0x357+-0x1c55*0x1)return[];const _0x19fe10=new Map();return _0x4ffee4['skins']['map'](_0x36ff27=>rN(_0x1d2420,_0x36ff27,_0x4ffee4['accessors'],_0x59f489,_0x45559e,_0x19fe10));},EN=(_0x15aa9f,_0x56754d,_0x22b37a,_0x183649)=>{var _0x4ffc75,_0x2040d2,_0x2e82b1;const _0x3c11b6={},_0xfffd99={},_0x263997={},_0x21ab3a=[];return{'meshes':!_0x183649['skipMeshes']&&((_0x4ffc75=_0x56754d==null?void(-0x250e+-0x5*0x321+0x34b3):_0x56754d['meshes'])==null?void(0x6c1+0x4a7+-0xb68):_0x4ffc75['length'])&&((_0x2040d2=_0x56754d==null?void(-0x3*0x9c7+0x105c*-0x2+0x3e0d):_0x56754d['accessors'])==null?void(-0x1776+-0x1*-0x2309+-0xb93):_0x2040d2['length'])&&((_0x2e82b1=_0x56754d==null?void(-0x897*0x2+-0x1c85+0x2db3):_0x56754d['bufferView'+'s'])==null?void(-0x201f+-0x22*-0x11f+-0x5ff):_0x2e82b1['length'])?_0x56754d['meshes']['map'](_0x14ff38=>nN(_0x15aa9f,_0x14ff38,_0x56754d['accessors'],_0x22b37a,_0x3c11b6,_0xfffd99,_0x263997,_0x183649,_0x21ab3a)):[],'meshVariants':_0xfffd99,'meshDefaultMaterials':_0x263997,'promises':_0x21ab3a};},bN=(_0x564b84,_0x1449fe,_0x3acad8)=>{var _0x1a89e6,_0x1f2b1f,_0x275559;if(!_0x564b84['hasOwnProp'+'erty']('materials')||_0x564b84['materials']['length']===-0x24a+0x1f5+0x1*0x55)return[];const _0x4fc833=(_0x1a89e6=_0x3acad8==null?void(0xddb+-0x1471*-0x1+-0x224c):_0x3acad8['material'])==null?void(-0x1f15+-0x2a*0x8b+0x35e3):_0x1a89e6['preprocess'],_0x121928=((_0x1f2b1f=_0x3acad8==null?void(0x1c97*-0x1+-0x1631*-0x1+0x666):_0x3acad8['material'])==null?void(-0x1*-0x1dda+0x1916+-0x36f0):_0x1f2b1f['process'])??w0,_0x2d61b7=(_0x275559=_0x3acad8==null?void(-0x6e5*-0x1+-0x1f58+0x1873):_0x3acad8['material'])==null?void(-0x9*0xde+-0x9a+-0x4*-0x21a):_0x275559['postproces'+'s'];return _0x564b84['materials']['map'](_0x53f0f1=>{_0x4fc833&&_0x4fc833(_0x53f0f1);const _0x47b35b=_0x121928(_0x53f0f1,_0x1449fe);return _0x2d61b7&&_0x2d61b7(_0x53f0f1,_0x47b35b),_0x47b35b;});},AN=_0x4c15fb=>{if(!_0x4c15fb['hasOwnProp'+'erty']('extensions')||!_0x4c15fb['extensions']['hasOwnProp'+'erty']('KHR_materi'+'als_varian'+'ts'))return null;const _0x2c666f=_0x4c15fb['extensions']['KHR_materi'+'als_varian'+'ts']['variants'],_0xf02730={};for(let _0x4a674c=0xad+-0x13b0+0x1303;_0x4a674c<_0x2c666f['length'];_0x4a674c++)_0xf02730[_0x2c666f[_0x4a674c]['name']]=_0x4a674c;return _0xf02730;},CN=(_0x5280fd,_0x5a37fa,_0x41dc86,_0x47e005)=>{var _0x2be400,_0x334f10;if(!_0x5280fd['hasOwnProp'+'erty']('animations')||_0x5280fd['animations']['length']===0xada+-0x30b*0xa+0x1394)return[];const _0x558657=(_0x2be400=_0x47e005==null?void(0x19f9+0x11ed*-0x1+-0x80c):_0x47e005['animation'])==null?void(-0xe*-0x98+0x1d93+0xca1*-0x3):_0x2be400['preprocess'],_0x5ae84d=(_0x334f10=_0x47e005==null?void(-0x168d+-0x2672+0x6c7*0x9):_0x47e005['animation'])==null?void(-0xc9*-0x17+-0x146e+0x25f):_0x334f10['postproces'+'s'];return _0x5280fd['animations']['map']((_0x46c7de,_0x734dfd)=>{_0x558657&&_0x558657(_0x46c7de);const _0x5b28cc=yN(_0x46c7de,_0x734dfd,_0x5280fd['accessors'],_0x41dc86,_0x5a37fa,_0x5280fd['meshes'],_0x5280fd['nodes']);return _0x5ae84d&&_0x5ae84d(_0x46c7de,_0x5b28cc),_0x5b28cc;});},PN=(_0x40a048,_0x447117,_0x4489e3,_0x91df9e)=>{const _0x5a0eef=_0x447117['accessors'];_0x4489e3['forEach']((_0x16e2c1,_0x1023b1)=>{const _0xc2b401=_0x16e2c1['ext']['attributes'];let _0x332a5a;if(_0xc2b401['hasOwnProp'+'erty']('TRANSLATIO'+'N')){const _0x36835e=_0x5a0eef[_0xc2b401['TRANSLATIO'+'N']];_0x332a5a=Pn(_0x36835e,_0x91df9e);}let _0x4cc879;if(_0xc2b401['hasOwnProp'+'erty']('ROTATION')){const _0x171031=_0x5a0eef[_0xc2b401['ROTATION']];_0x4cc879=Pn(_0x171031,_0x91df9e);}let _0x3824e6;if(_0xc2b401['hasOwnProp'+'erty']('SCALE')){const _0x163358=_0x5a0eef[_0xc2b401['SCALE']];_0x3824e6=Pn(_0x163358,_0x91df9e);}const _0x2f9803=(_0x332a5a?_0x332a5a['length']/(0xf5*0x1a+0x16f4+-0x21*0x173):-0xadd+0x2*-0x17d+-0x3*-0x49d)||(_0x4cc879?_0x4cc879['length']/(0x43b+0x12ed+0x1*-0x1724):-0x128a+0x1b61+-0x8d7)||(_0x3824e6?_0x3824e6['length']/(-0x164*-0x13+0x148f+0x9*-0x538):0x1*-0x1c03+-0x1*0x15bb+0x31be);if(_0x2f9803){const _0x24493a=new Float32Array(_0x2f9803*(-0xae9+0xa*0x1fd+-0x1*0x8e9)),_0x806f13=new D(),_0x575b69=new le(),_0x43866d=new D(0x22ae+-0x6*-0x5f8+-0x467d,-0x8*0x242+0x1cb*0x5+0xe9*0xa,-0xef*-0x1d+0x10a+0x202*-0xe),_0x1a7ba1=new te();let _0x5be9b0=-0x1ce1+0x1*0x1d79+0x4*-0x26;for(let _0x411070=-0x1a70+0x1*0x262b+-0xb*0x111;_0x411070<_0x2f9803;_0x411070++){const _0x964f27=_0x411070*(-0x2a*0xe6+0x1955+-0x2*-0x635);if(_0x332a5a&&_0x806f13['set'](_0x332a5a[_0x964f27],_0x332a5a[_0x964f27+(-0x91*-0x25+-0x1daf+-0x5*-0x1bf)],_0x332a5a[_0x964f27+(-0x11f6+-0x286+-0x147e*-0x1)]),_0x4cc879){const _0x442c48=_0x411070*(-0x142a+-0x4ee*-0x5+-0x478);_0x575b69['set'](_0x4cc879[_0x442c48],_0x4cc879[_0x442c48+(-0x5*0x313+0x19aa+-0x525*0x2)],_0x4cc879[_0x442c48+(-0x3*0x3e0+-0x6f*0x5a+0x32a8)],_0x4cc879[_0x442c48+(-0x11d5+0x26cf+0x1*-0x14f7)]);}_0x3824e6&&_0x43866d['set'](_0x3824e6[_0x964f27],_0x3824e6[_0x964f27+(-0xece+0xa04*0x1+0x4cb)],_0x3824e6[_0x964f27+(0x2*-0x1d5+-0x5f7+0x9a3)]),_0x1a7ba1['setTRS'](_0x806f13,_0x575b69,_0x43866d);for(let _0x35df13=0x4*0x751+0x2276+0x2*-0x1fdd;_0x35df13<0x1e66+0x175*0x2+-0x2140;_0x35df13++)_0x24493a[_0x5be9b0++]=_0x1a7ba1['data'][_0x35df13];}_0x16e2c1['matrices']=_0x24493a;}});},MN=(_0x1a1ec3,_0x25d2c7,_0x46cb9a)=>{var _0x437154,_0x10c538,_0x33e1dd;if(!_0x1a1ec3['hasOwnProp'+'erty']('nodes')||_0x1a1ec3['nodes']['length']===-0x6e*0x42+0x1*0x167f+0x5dd*0x1)return[];const _0x45f6a9=(_0x437154=_0x25d2c7==null?void(-0x7f*0xe+0x5*-0x4a5+0x1e2b*0x1):_0x25d2c7['node'])==null?void(0x2*0x1e5+0x2613+-0x29dd):_0x437154['preprocess'],_0x4463b5=((_0x10c538=_0x25d2c7==null?void(0x1df4+-0x1326+-0xace):_0x25d2c7['node'])==null?void(0xf53*0x1+0x29*-0x2+-0xa7*0x17):_0x10c538['process'])??vN,_0x2ed795=(_0x33e1dd=_0x25d2c7==null?void(0x97f+-0x10a+0x5*-0x1b1):_0x25d2c7['node'])==null?void(0x1f47+0x1*-0x225c+0x315):_0x33e1dd['postproces'+'s'],_0x1b4163=_0x1a1ec3['nodes']['map']((_0x4a1f9f,_0x50565d)=>{_0x45f6a9&&_0x45f6a9(_0x4a1f9f);const _0x38efd4=_0x4463b5(_0x4a1f9f,_0x50565d,_0x46cb9a);return _0x2ed795&&_0x2ed795(_0x4a1f9f,_0x38efd4),_0x38efd4;});for(let _0x1587ab=0xe9*0x13+0x1*-0x1fbe+0x4d1*0x3;_0x1587ab<_0x1a1ec3['nodes']['length'];++_0x1587ab){const _0x1b5bf8=_0x1a1ec3['nodes'][_0x1587ab];if(_0x1b5bf8['hasOwnProp'+'erty']('children')){const _0x3742d1=_0x1b4163[_0x1587ab],_0x3449b5={};for(let _0x2c8197=-0x2d*-0x5d+-0x1bef+-0x1*-0xb96;_0x2c8197<_0x1b5bf8['children']['length'];++_0x2c8197){const _0x1756c6=_0x1b4163[_0x1b5bf8['children'][_0x2c8197]];_0x1756c6['parent']||(_0x3449b5['hasOwnProp'+'erty'](_0x1756c6['name'])?_0x1756c6['name']+=_0x3449b5[_0x1756c6['name']]++:_0x3449b5[_0x1756c6['name']]=0x8*0x1eb+0x1cf9+0xb14*-0x4,_0x3742d1['addChild'](_0x1756c6));}}}return _0x1b4163;},DN=(_0x290411,_0x2352f3)=>{var _0x2e0eda;const _0x53b8d1=[],_0x1b3be7=_0x290411['scenes']['length'];if(_0x1b3be7===-0x1f83+-0x1dae+0x3d32&&((_0x2e0eda=_0x290411['scenes'][0x435*0x5+0x2571+-0x3a7a]['nodes'])==null?void(-0x118d+0xb26+-0x95*-0xb):_0x2e0eda['length'])===-0x57*-0x29+-0xf2a*0x2+0x1066){const _0x447b52=_0x290411['scenes'][0x213f+-0x1aad+0x349*-0x2]['nodes'][-0x1b39+-0x5*-0x1a9+0x12ec];_0x53b8d1['push'](_0x2352f3[_0x447b52]);}else for(let _0x3b50e7=-0x1b91+-0x1881+-0x1ae*-0x1f;_0x3b50e7<_0x1b3be7;_0x3b50e7++){const _0x37fafc=_0x290411['scenes'][_0x3b50e7];if(_0x37fafc['nodes']){const _0x401e72=new Ie(_0x37fafc['name']);for(let _0x379f32=0x231a+-0x3*-0x7c1+0x3a5d*-0x1;_0x379f32<_0x37fafc['nodes']['length'];_0x379f32++){const _0x5ea02b=_0x2352f3[_0x37fafc['nodes'][_0x379f32]];_0x401e72['addChild'](_0x5ea02b);}_0x53b8d1['push'](_0x401e72);}}return _0x53b8d1;},IN=(_0x3d133e,_0xdf64b6,_0x8d4849)=>{var _0x59f63c,_0x260da7,_0x93b214;let _0x241b78=null;if(_0x3d133e['hasOwnProp'+'erty']('nodes')&&_0x3d133e['hasOwnProp'+'erty']('cameras')&&_0x3d133e['cameras']['length']>0x1*-0x797+0x13*-0x65+-0x78b*-0x2){const _0xfe822a=(_0x59f63c=_0x8d4849==null?void(0x36*-0x8+0x1d6c+-0x2*0xdde):_0x8d4849['camera'])==null?void(-0x1b1d+-0x88*-0x28+0x5dd):_0x59f63c['preprocess'],_0x2d876b=((_0x260da7=_0x8d4849==null?void(0xa8*0x2a+0x1*-0x1051+-0xb3f):_0x8d4849['camera'])==null?void(0x8a3+-0x4*0x1cf+0x1*-0x167):_0x260da7['process'])??xN,_0x36dfee=(_0x93b214=_0x8d4849==null?void(0x240e+-0x1*0x2527+0x119):_0x8d4849['camera'])==null?void(-0xc10+-0x3*0x896+0x2*0x12e9):_0x93b214['postproces'+'s'];_0x3d133e['nodes']['forEach']((_0x34d8b6,_0x1b62e3)=>{if(_0x34d8b6['hasOwnProp'+'erty']('camera')){const _0x4069b2=_0x3d133e['cameras'][_0x34d8b6['camera']];if(_0x4069b2){_0xfe822a&&_0xfe822a(_0x4069b2);const _0x30f032=_0x2d876b(_0x4069b2,_0xdf64b6[_0x1b62e3]);_0x36dfee&&_0x36dfee(_0x4069b2,_0x30f032),_0x30f032&&(_0x241b78||(_0x241b78=new Map()),_0x241b78['set'](_0x34d8b6,_0x30f032));}}});}return _0x241b78;},LN=(_0x2a67ba,_0x42a904,_0x3b0afa)=>{var _0x43041d,_0x36d9c2,_0x15f62e;let _0x51b96b=null;if(_0x2a67ba['hasOwnProp'+'erty']('nodes')&&_0x2a67ba['hasOwnProp'+'erty']('extensions')&&_0x2a67ba['extensions']['hasOwnProp'+'erty']('KHR_lights'+'_punctual')&&_0x2a67ba['extensions']['KHR_lights'+'_punctual']['hasOwnProp'+'erty']('lights')){const _0x40d398=_0x2a67ba['extensions']['KHR_lights'+'_punctual']['lights'];if(_0x40d398['length']){const _0x1380cb=(_0x43041d=_0x3b0afa==null?void(-0x1574+-0x5f*0x17+0x1dfd):_0x3b0afa['light'])==null?void(0x19d3+0x257f+0x5*-0xcaa):_0x43041d['preprocess'],_0x5dce2e=((_0x36d9c2=_0x3b0afa==null?void(-0x2a*-0x7c+0x2*-0xd7+-0x12aa):_0x3b0afa['light'])==null?void(-0x1*0x4e1+0x130d+0x38b*-0x4):_0x36d9c2['process'])??TN,_0x48c69e=(_0x15f62e=_0x3b0afa==null?void(-0x1*-0xac6+0x24d*-0x6+0x1*0x308):_0x3b0afa['light'])==null?void(-0x100a*-0x2+-0x1152+-0xec2):_0x15f62e['postproces'+'s'];_0x2a67ba['nodes']['forEach']((_0x47dfc2,_0x53c4a2)=>{if(_0x47dfc2['hasOwnProp'+'erty']('extensions')&&_0x47dfc2['extensions']['hasOwnProp'+'erty']('KHR_lights'+'_punctual')&&_0x47dfc2['extensions']['KHR_lights'+'_punctual']['hasOwnProp'+'erty']('light')){const _0x512be4=_0x47dfc2['extensions']['KHR_lights'+'_punctual']['light'],_0x1474ab=_0x40d398[_0x512be4];if(_0x1474ab){_0x1380cb&&_0x1380cb(_0x1474ab);const _0x1eda63=_0x5dce2e(_0x1474ab,_0x42a904[_0x53c4a2]);_0x48c69e&&_0x48c69e(_0x1474ab,_0x1eda63),_0x1eda63&&(_0x51b96b||(_0x51b96b=new Map()),_0x51b96b['set'](_0x47dfc2,_0x1eda63));}}});}}return _0x51b96b;},RN=(_0x1a25d2,_0x582ab1,_0x5b351c)=>{_0x1a25d2['nodes']['forEach'](_0x4784c5=>{_0x4784c5['hasOwnProp'+'erty']('mesh')&&_0x4784c5['hasOwnProp'+'erty']('skin')&&_0x582ab1[_0x4784c5['mesh']]['meshes']['forEach'](_0x2d5b48=>{_0x2d5b48['skin']=_0x5b351c[_0x4784c5['skin']];});});},ON=async(_0x135c60,_0x216e46,_0x4ca96f,_0x4a758c,_0x31e4a7)=>{var _0x4657cb,_0x1a17fc;const _0x19812e=(_0x4657cb=_0x31e4a7==null?void(-0x252a+-0x18d9+0x3e03):_0x31e4a7['global'])==null?void(0x2061+0x944+-0x29a5*0x1):_0x4657cb['preprocess'],_0x4bc91e=(_0x1a17fc=_0x31e4a7==null?void(0x1727+0x7e1+0x1*-0x1f08):_0x31e4a7['global'])==null?void(-0x1e3b*0x1+-0x4db+0x5d9*0x6):_0x1a17fc['postproces'+'s'];_0x19812e&&_0x19812e(_0x216e46),_0x216e46['asset']&&_0x216e46['asset']['generator']==='PlayCanvas'&&w['warn']('glTF\x20model'+'\x20may\x20have\x20'+'been\x20gener'+'ated\x20with\x20'+'flipped\x20UV'+'s.\x20Please\x20'+'reconvert.');const _0x18a717=new Map(),_0x16af7d=MN(_0x216e46,_0x31e4a7,_0x18a717),_0x5b1a2a=DN(_0x216e46,_0x16af7d),_0x251cd7=LN(_0x216e46,_0x16af7d,_0x31e4a7),_0x71f49=IN(_0x216e46,_0x16af7d,_0x31e4a7),_0x5502af=AN(_0x216e46),_0x2c218e=await Promise['all'](_0x4ca96f),{meshes:_0x1cbee7,meshVariants:_0x16949d,meshDefaultMaterials:_0x18d80b,promises:_0x5bac57}=EN(_0x135c60,_0x216e46,_0x2c218e,_0x31e4a7),_0x3842f8=CN(_0x216e46,_0x16af7d,_0x2c218e,_0x31e4a7);PN(_0x135c60,_0x216e46,_0x18a717,_0x2c218e);const _0x48b55d=await Promise['all'](_0x4a758c),_0x4a3bdb=_0x48b55d['map'](_0x217773=>_0x217773['resource']),_0x44f912=bN(_0x216e46,_0x4a3bdb,_0x31e4a7),_0x1b0d63=wN(_0x135c60,_0x216e46,_0x16af7d,_0x2c218e),_0x425a30=[];for(let _0x5d2a3d=0xe30+0xa4*0x1+-0xed4;_0x5d2a3d<_0x1cbee7['length'];_0x5d2a3d++)_0x425a30[_0x5d2a3d]=new Em(),_0x425a30[_0x5d2a3d]['meshes']=_0x1cbee7[_0x5d2a3d];RN(_0x216e46,_0x425a30,_0x1b0d63);const _0x43a2ad=new qF();return _0x43a2ad['gltf']=_0x216e46,_0x43a2ad['nodes']=_0x16af7d,_0x43a2ad['scenes']=_0x5b1a2a,_0x43a2ad['animations']=_0x3842f8,_0x43a2ad['textures']=_0x48b55d,_0x43a2ad['materials']=_0x44f912,_0x43a2ad['variants']=_0x5502af,_0x43a2ad['meshVarian'+'ts']=_0x16949d,_0x43a2ad['meshDefaul'+'tMaterials']=_0x18d80b,_0x43a2ad['renders']=_0x425a30,_0x43a2ad['skins']=_0x1b0d63,_0x43a2ad['lights']=_0x251cd7,_0x43a2ad['cameras']=_0x71f49,_0x43a2ad['nodeInstan'+'cingMap']=_0x18a717,_0x4bc91e&&_0x4bc91e(_0x216e46,_0x43a2ad),await Promise['all'](_0x5bac57),_0x43a2ad;},FN=(_0x5e6657,_0x17a355)=>{const _0x8bdbce=(_0x5ab4e4,_0x57590b)=>{switch(_0x5ab4e4){case 0x1c65+-0x5*-0x4b5+0x6f7*-0x2:return Te;case 0x30e+0x26c4+-0x3d1*0x1:return vt;case 0x9*0x432+0x7*0x9fa+-0x4498:return Kh;case 0x40b7*-0x1+0x222*0x19+0x1933*0x2:return Qh;case-0x3*0x58d+0x2c73*0x1+-0x7*-0x19a:return Zh;case-0x1204+-0x3d09+-0x4*-0x1d84:return ma;default:return _0x57590b;}},_0x5eabf5=(_0x53bd86,_0x11f0ce)=>{switch(_0x53bd86){case-0x3a*-0x28f+0x9e34+-0xb16b:return ue;case-0x1e29*0x8+0x53fd+-0x120bb*-0x1:return ip;case-0x11*-0x3ee+-0x385d+0x4*0x7a4:return yt;default:return _0x11f0ce;}};_0x5e6657&&(_0x17a355=_0x17a355??{},_0x5e6657['minFilter']=_0x8bdbce(_0x17a355['minFilter'],ma),_0x5e6657['magFilter']=_0x8bdbce(_0x17a355['magFilter'],vt),_0x5e6657['addressU']=_0x5eabf5(_0x17a355['wrapS'],yt),_0x5e6657['addressV']=_0x5eabf5(_0x17a355['wrapT'],yt));};let NN=0x3*-0x6a5+0x9c1*0x3+-0x1*0x954;const nn=_0x4537c0=>{var _0x11dfdb,_0xa759e9,_0x3d1a07,_0x28753d;return((_0xa759e9=(_0x11dfdb=_0x4537c0['extensions'])==null?void(-0xc74+0x1f*0xfb+-0x11f1):_0x11dfdb['KHR_textur'+'e_basisu'])==null?void(-0x1ba9+-0x1b99+-0x1ba1*-0x2):_0xa759e9['source'])??((_0x28753d=(_0x3d1a07=_0x4537c0['extensions'])==null?void(0x2*0x112d+0xf4d*0x1+-0x31a7):_0x3d1a07['EXT_textur'+'e_webp'])==null?void(0x10e8+-0x2*-0x1088+-0x2*0x18fc):_0x28753d['source'])??_0x4537c0['source'];},kN=(_0x54747f,_0x428ed8,_0xb1ec7c,_0x2c65db,_0x3e5635)=>{var _0x4a264b,_0x1a7ede,_0x18dbcd;if(!_0x54747f['images']||_0x54747f['images']['length']===0xe29+-0xb4a+0x23*-0x15)return[];const _0x56eb2a=(_0x4a264b=_0x3e5635==null?void(-0x1c05+-0x263a+-0x423f*-0x1):_0x3e5635['image'])==null?void(0x733*-0x3+-0x24dd*-0x1+-0xf44):_0x4a264b['preprocess'],_0x2381d0=(_0x1a7ede=_0x3e5635==null?void(-0xe98*0x2+0x1b16+0x21a*0x1):_0x3e5635['image'])==null?void(0x267d+0x4*0x31e+0x32f5*-0x1):_0x1a7ede['processAsy'+'nc'],_0x56c600=(_0x18dbcd=_0x3e5635==null?void(0x183d+0x1*0x13a+-0x1977):_0x3e5635['image'])==null?void(0xb1+-0x17b0+0x16ff):_0x18dbcd['postproces'+'s'],_0x17f648={'image/png':'png','image/jpeg':'jpg','image/basis':'basis','image/ktx':'ktx','image/ktx2':'ktx2','image/vnd-ms.dds':'dds'},_0x430296=_0x2193ad=>{const _0x1c9ab8=new Set();return _0x2193ad['hasOwnProp'+'erty']('materials')&&_0x2193ad['materials']['forEach'](_0x4cab6f=>{if(_0x4cab6f['hasOwnProp'+'erty']('pbrMetalli'+'cRoughness')){const _0x103365=_0x4cab6f['pbrMetalli'+'cRoughness'];if(_0x103365['hasOwnProp'+'erty']('baseColorT'+'exture')){const _0x232834=_0x2193ad['textures'][_0x103365['baseColorT'+'exture']['index']];_0x1c9ab8['add'](nn(_0x232834));}}if(_0x4cab6f['hasOwnProp'+'erty']('emissiveTe'+'xture')){const _0x2c1176=_0x2193ad['textures'][_0x4cab6f['emissiveTe'+'xture']['index']];_0x1c9ab8['add'](nn(_0x2c1176));}if(_0x4cab6f['hasOwnProp'+'erty']('extensions')){const _0x126576=_0x4cab6f['extensions']['KHR_materi'+'als_sheen'];if(_0x126576&&_0x126576['hasOwnProp'+'erty']('sheenColor'+'Texture')){const _0x3f0326=_0x2193ad['textures'][_0x126576['sheenColor'+'Texture']['index']];_0x1c9ab8['add'](nn(_0x3f0326));}const _0x785b=_0x4cab6f['extensions']['KHR_materi'+'als_pbrSpe'+'cularGloss'+'iness'];if(_0x785b&&_0x785b['hasOwnProp'+'erty']('specularGl'+'ossinessTe'+'xture')){const _0x5c925f=_0x2193ad['textures'][_0x785b['specularGl'+'ossinessTe'+'xture']['index']];_0x1c9ab8['add'](nn(_0x5c925f));}const _0x2f7557=_0x4cab6f['extensions']['KHR_materi'+'als_specul'+'ar'];if(_0x2f7557&&_0x2f7557['hasOwnProp'+'erty']('specularCo'+'lorTexture')){const _0x319bb0=_0x2193ad['textures'][_0x2f7557['specularCo'+'lorTexture']['index']];_0x1c9ab8['add'](nn(_0x319bb0));}}}),_0x1c9ab8;},_0x1004c5=(_0x173683,_0x8b0b6b,_0x42b55c,_0x3c77c4,_0x1bb614,_0x3de3d2)=>new Promise((_0x475072,_0x964a13)=>{const _0x36ca9f=_0xd89c81=>{const _0x317599=(_0x173683['name']||'gltf-textu'+'re')+'-'+NN++,_0x29cf36={'url':_0x8b0b6b||_0x317599};if(_0xd89c81&&(_0x29cf36['contents']=_0xd89c81['slice'](-0xa7*-0x18+-0x140a+0x462)['buffer']),_0x3c77c4){const _0xbd8634=_0x17f648[_0x3c77c4];_0xbd8634&&(_0x29cf36['filename']=_0x29cf36['url']+'.'+_0xbd8634);}const _0x58cdd5={'srgb':_0x3de3d2},_0x15cfd0=new pe(_0x317599,'texture',_0x29cf36,_0x58cdd5,_0x1bb614);_0x15cfd0['on']('load',_0x217367=>_0x475072(_0x217367)),_0x15cfd0['on']('error',_0x7274bd=>_0x964a13(_0x7274bd)),_0x2c65db['add'](_0x15cfd0),_0x2c65db['load'](_0x15cfd0);};_0x42b55c?_0x42b55c['then'](_0xad5b74=>_0x36ca9f(_0xad5b74)):_0x36ca9f(null);}),_0x5cc096=_0x430296(_0x54747f);return _0x54747f['images']['map']((_0x1b7c22,_0x560972)=>{_0x56eb2a&&_0x56eb2a(_0x1b7c22);let _0x3f1283;return _0x2381d0?_0x3f1283=new Promise((_0x4602dd,_0x148d71)=>{_0x2381d0(_0x1b7c22,(_0x4ece89,_0x31f1f4)=>{_0x4ece89?_0x148d71(_0x4ece89):_0x4602dd(_0x31f1f4);});}):_0x3f1283=new Promise(_0x383bd9=>{_0x383bd9(null);}),_0x3f1283=_0x3f1283['then'](_0x55d543=>{const _0x1c45cb=_0x5cc096['has'](_0x560972);return _0x55d543||(_0x1b7c22['hasOwnProp'+'erty']('uri')?x0(_0x1b7c22['uri'])?_0x1004c5(_0x1b7c22,_0x1b7c22['uri'],null,jF(_0x1b7c22['uri']),null,_0x1c45cb):_0x1004c5(_0x1b7c22,jn['test'](_0x1b7c22['uri'])?_0x1b7c22['uri']:xe['join'](_0xb1ec7c,_0x1b7c22['uri']),null,null,{'crossOrigin':'anonymous'},_0x1c45cb):_0x1b7c22['hasOwnProp'+'erty']('bufferView')&&_0x1b7c22['hasOwnProp'+'erty']('mimeType')?_0x1004c5(_0x1b7c22,null,_0x428ed8[_0x1b7c22['bufferView']],_0x1b7c22['mimeType'],null,_0x1c45cb):Promise['reject'](new Error('Invalid\x20im'+'age\x20found\x20'+'in\x20gltf\x20(n'+'either\x20uri'+'\x20or\x20buffer'+'View\x20found'+').\x20index='+_0x560972)));}),_0x56c600&&(_0x3f1283=_0x3f1283['then'](_0x1bad87=>(_0x56c600(_0x1b7c22,_0x1bad87),_0x1bad87))),_0x3f1283;});},UN=(_0x255731,_0xf84a66,_0x945537)=>{var _0x550e7c,_0x22e6bb,_0x183f14,_0x1b5ce4,_0x23221d;if(!((_0x550e7c=_0x255731==null?void(-0x1*-0x1eec+0x194*-0x14+-0xa4*-0x1):_0x255731['images'])!=null&&_0x550e7c['length'])||!((_0x22e6bb=_0x255731==null?void(0x1*0xe75+0x3d*0x26+-0x1783):_0x255731['textures'])!=null&&_0x22e6bb['length']))return[];const _0x326f42=(_0x183f14=_0x945537==null?void(0x1bb*0x6+-0x1189*-0x1+0x1beb*-0x1):_0x945537['texture'])==null?void(-0xed8+0x24ee+-0x1616):_0x183f14['preprocess'],_0x6c16b9=(_0x1b5ce4=_0x945537==null?void(-0x1445+-0x23da+0x3*0x12b5):_0x945537['texture'])==null?void(0x1aa+0x3*0xc63+-0x26d3):_0x1b5ce4['processAsy'+'nc'],_0x3666d1=(_0x23221d=_0x945537==null?void(-0x1fd8+-0x399*-0x2+0xc53*0x2):_0x945537['texture'])==null?void(-0x3*0x4d6+-0x1ae*-0xd+-0x1d5*0x4):_0x23221d['postproces'+'s'],_0x1fc2ef=new Set();return _0x255731['textures']['map'](_0x514fbb=>{_0x326f42&&_0x326f42(_0x514fbb);let _0x59f445;return _0x6c16b9?_0x59f445=new Promise((_0x10244b,_0x3d2dde)=>{_0x6c16b9(_0x514fbb,_0x255731['images'],(_0x71d5cb,_0x5ddedb)=>{_0x71d5cb?_0x3d2dde(_0x71d5cb):_0x10244b(_0x5ddedb);});}):_0x59f445=new Promise(_0x20fda1=>{_0x20fda1(null);}),_0x59f445=_0x59f445['then'](_0x3a6b72=>{_0x3a6b72=_0x3a6b72??nn(_0x514fbb);const _0x3a088b=_0x1fc2ef['has'](_0x3a6b72);return _0x1fc2ef['add'](_0x3a6b72),_0xf84a66[_0x3a6b72]['then'](_0x58069f=>{const _0x45181c=_0x3a088b?tN(_0x58069f):_0x58069f;return FN(_0x45181c['resource'],(_0x255731['samplers']??[])[_0x514fbb['sampler']]),_0x45181c;});}),_0x3666d1&&(_0x59f445=_0x59f445['then'](_0x5db767=>(_0x3666d1(_0x514fbb,_0x5db767),_0x5db767))),_0x59f445;});},BN=(_0x5b82d0,_0x4385d4,_0x83adb,_0x4db142)=>{var _0x1cfcd4,_0x4de4d6,_0x4c9605;if(!_0x5b82d0['buffers']||_0x5b82d0['buffers']['length']===0x110f*-0x1+0x1763+-0x144*0x5)return[];const _0x56ac25=(_0x1cfcd4=_0x4db142==null?void(-0x14c*-0xc+-0x2588+0x15f8):_0x4db142['buffer'])==null?void(0x49e+0xe5b+0x12f9*-0x1):_0x1cfcd4['preprocess'],_0x179fc9=(_0x4de4d6=_0x4db142==null?void(-0x5*0x5d9+-0x236f*0x1+-0x102b*-0x4):_0x4db142['buffer'])==null?void(-0x1999+0x10ee+-0x1*-0x8ab):_0x4de4d6['processAsy'+'nc'],_0x4ebba7=(_0x4c9605=_0x4db142==null?void(0x1909+0x17*-0x52+0x11ab*-0x1):_0x4db142['buffer'])==null?void(0x71b*-0x2+0x1*0xaa+0x363*0x4):_0x4c9605['postproces'+'s'];return _0x5b82d0['buffers']['map']((_0x4f621c,_0x5cd98f)=>{_0x56ac25&&_0x56ac25(_0x4f621c);let _0x562244;return _0x179fc9?_0x562244=new Promise((_0x4fd1d8,_0x37c5cf)=>{_0x179fc9(_0x4f621c,(_0x46f6b8,_0x5713ba)=>{_0x46f6b8?_0x37c5cf(_0x46f6b8):_0x4fd1d8(_0x5713ba);});}):_0x562244=new Promise(_0x367ff8=>{_0x367ff8(null);}),_0x562244=_0x562244['then'](_0x47debf=>{if(_0x47debf)return _0x47debf;if(_0x4f621c['hasOwnProp'+'erty']('uri')){if(x0(_0x4f621c['uri'])){const _0x41de3c=atob(_0x4f621c['uri']['split'](',')[-0x1ebf+0x230a+0x16e*-0x3]),_0x1a78cc=new Uint8Array(_0x41de3c['length']);for(let _0x11aae6=-0x11b5*-0x1+-0x289*-0xb+0x4*-0xb66;_0x11aae6<_0x41de3c['length'];_0x11aae6++)_0x1a78cc[_0x11aae6]=_0x41de3c['charCodeAt'](_0x11aae6);return _0x1a78cc;}return new Promise((_0x19c229,_0xd10e94)=>{ot['get'](jn['test'](_0x4f621c['uri'])?_0x4f621c['uri']:xe['join'](_0x83adb,_0x4f621c['uri']),{'cache':!(0x6dc+-0x48b*0x1+-0x251*0x1),'responseType':'arraybuffe'+'r','retry':!(0x1304+-0x8e0*0x4+0x1d5*0x9)},(_0x1be5b8,_0x35ad8e)=>{_0x1be5b8?_0xd10e94(_0x1be5b8):_0x19c229(new Uint8Array(_0x35ad8e));});});}return _0x4385d4;}),_0x4ebba7&&(_0x562244=_0x562244['then'](_0x54ff93=>(_0x4ebba7(_0x5b82d0['buffers'][_0x5cd98f],_0x54ff93),_0x54ff93))),_0x562244;});},zN=(_0x3c76d4,_0x558091)=>{const _0x48701a=JSON['parse']((_0x45fb28=>{if(typeof TextDecoder<'u')return new TextDecoder()['decode'](_0x45fb28);let _0x2070ee='';for(let _0x5d3f63=0x7d*-0x49+-0xa5a+0x2dff*0x1;_0x5d3f63<_0x45fb28['length'];_0x5d3f63++)_0x2070ee+=String['fromCharCo'+'de'](_0x45fb28[_0x5d3f63]);return decodeURIComponent(escape(_0x2070ee));})(_0x3c76d4));if(_0x48701a['asset']&&_0x48701a['asset']['version']&&parseFloat(_0x48701a['asset']['version'])<0x3a5*0x7+-0x4*-0x33b+-0x266d){_0x558091('Invalid\x20gl'+'tf\x20version'+'.\x20Expected'+'\x20version\x202'+'.0\x20or\x20abov'+'e\x20but\x20foun'+'d\x20version\x20'+'\x27'+_0x48701a['asset']['version']+'\x27.');return;}_0x558091(null,_0x48701a);},VN=(_0x2a2f1c,_0x6d8b45)=>{const _0x1b59a0=_0x2a2f1c instanceof ArrayBuffer?new DataView(_0x2a2f1c):new DataView(_0x2a2f1c['buffer'],_0x2a2f1c['byteOffset'],_0x2a2f1c['byteLength']),_0x39fa98=_0x1b59a0['getUint32'](-0x117*0x1+-0x1e92+-0x1fa9*-0x1,!(0x115a*-0x2+-0xc2+0x10b*0x22)),_0x4920b8=_0x1b59a0['getUint32'](0x567+-0x131d+0xdba,!(0x710+0xe2b*-0x1+-0x11*-0x6b)),_0x4e1d29=_0x1b59a0['getUint32'](0x1b25+-0x1779+0x1*-0x3a4,!(-0xe6d+0xe90+-0x1*0x23));if(_0x39fa98!==-0x20a96f43*-0x1+-0x1f740b8b+-0x1ebe7*-0x23f9){_0x6d8b45('Invalid\x20ma'+'gic\x20number'+'\x20found\x20in\x20'+'glb\x20header'+'.\x20Expected'+'\x200x46546C6'+'7,\x20found\x200'+'x'+_0x39fa98['toString'](0xc0b*-0x3+-0x4df*0x5+0x3c8c));return;}if(_0x4920b8!==-0x1f9a+-0x1346+-0x27*-0x14e){_0x6d8b45('Invalid\x20ve'+'rsion\x20numb'+'er\x20found\x20i'+'n\x20glb\x20head'+'er.\x20Expect'+'ed\x202,\x20foun'+'d\x20'+_0x4920b8);return;}if(_0x4e1d29<=0x301*0x1+-0xc65*0x2+-0xa9*-0x21||_0x4e1d29>_0x1b59a0['byteLength']){_0x6d8b45('Invalid\x20le'+'ngth\x20found'+'\x20in\x20glb\x20he'+'ader.\x20Foun'+'d\x20'+_0x4e1d29);return;}const _0x128ece=[];let _0x889fb8=0x2229+0xef9+0x67*-0x7a;for(;_0x889fb8<_0x4e1d29;){const _0x539cc7=_0x1b59a0['getUint32'](_0x889fb8,!(0x584*0x3+-0x1ea4+0xe18));_0x889fb8+_0x539cc7+(0x205*0x9+-0x1bd4+0x1*0x9af)>_0x1b59a0['byteLength']&&_0x6d8b45('Invalid\x20ch'+'unk\x20length'+'\x20found\x20in\x20'+'glb.\x20Found'+'\x20'+_0x539cc7);const _0x84afbc=_0x1b59a0['getUint32'](_0x889fb8+(-0x2505+-0x5*-0x3e+0x23d3),!(0x23ce*0x1+-0x2*-0x7a+-0x24c2)),_0x4c0bc4=new Uint8Array(_0x1b59a0['buffer'],_0x1b59a0['byteOffset']+_0x889fb8+(-0x195d+-0x1*-0x1b25+-0x1c0),_0x539cc7);_0x128ece['push']({'length':_0x539cc7,'type':_0x84afbc,'data':_0x4c0bc4}),_0x889fb8+=_0x539cc7+(-0x35*-0x38+-0x64*-0x48+-0x27b0);}if(_0x128ece['length']!==0x67*0x47+-0x1a5c+-0x234&&_0x128ece['length']!==-0x4*0x6ed+0x1997*0x1+0x21f){_0x6d8b45('Invalid\x20nu'+'mber\x20of\x20ch'+'unks\x20found'+'\x20in\x20glb\x20fi'+'le.');return;}if(_0x128ece[-0x2268+0x5*0x6f8+0x1c*-0x4]['type']!==0x47f1f0b*0x1f+-0x4ff6e7c2+0x12e178b7){_0x6d8b45('Invalid\x20ch'+'unk\x20type\x20f'+'ound\x20in\x20gl'+'b\x20file.\x20Ex'+'pected\x200x4'+'E4F534A,\x20f'+'ound\x200x'+_0x128ece[0xe4e*0x2+-0x1*-0x751+-0x23ed]['type']['toString'](0x1a60+-0x29*0x26+-0x143a));return;}if(_0x128ece['length']>-0x1283+-0x1*-0x479+-0x2cf*-0x5&&_0x128ece[0xe43+-0x184f+0xa0d]['type']!==0x86ffbb+0x154ea7*0x4+-0x8df115){_0x6d8b45('Invalid\x20ch'+'unk\x20type\x20f'+'ound\x20in\x20gl'+'b\x20file.\x20Ex'+'pected\x200x0'+'04E4942,\x20f'+'ound\x200x'+_0x128ece[0x1*-0xc1+0xe81+0x11*-0xcf]['type']['toString'](-0x141*-0x1+0x23ad+-0x24de));return;}_0x6d8b45(null,{'gltfChunk':_0x128ece[0x2d4+-0x1*-0x113f+0x6b1*-0x3]['data'],'binaryChunk':_0x128ece['length']===-0xc*0xb7+-0x16*0x75+-0x1*-0x12a4?_0x128ece[-0xf4*-0x26+0x1*0xe3b+-0x3272]['data']:null});},GN=(_0x2721fd,_0x7475f9,_0x19a174)=>{const _0x2c61c9=()=>{const _0x575dcc=new Uint8Array(_0x7475f9);return _0x575dcc[0x397*0x7+0x967*0x4+-0x3ebd*0x1]===-0x26ef+0x1*-0xffd+0x3753&&_0x575dcc[0x3a*-0x39+-0x7a7+0xa49*0x2]===-0x1b86+0x1de3*0x1+-0x1f1&&_0x575dcc[-0x4*-0x21d+0x801+-0x1073]===-0x172f+0x1*0x434+-0x134f*-0x1&&_0x575dcc[0xd90+-0x16bd+0x930]===-0xf8a+-0x1229+0x21f9;};_0x2721fd&&_0x2721fd['toLowerCas'+'e']()['endsWith']('.glb')||_0x2c61c9()?VN(_0x7475f9,_0x19a174):_0x19a174(null,{'gltfChunk':_0x7475f9,'binaryChunk':null});},HN=(_0x3d3bd9,_0x4f8609,_0x1828a0)=>{var _0x29917a,_0x163c5c,_0x4db96d,_0x4d62dd;const _0x296d76=[],_0x92213d=(_0x29917a=_0x1828a0==null?void(-0x1c3a*-0x1+-0x7*-0x31c+0x31fe*-0x1):_0x1828a0['bufferView'])==null?void(-0x2*0xe79+-0x731+-0x13f*-0x1d):_0x29917a['preprocess'],_0x6bf615=(_0x163c5c=_0x1828a0==null?void(0x1ad2+0xf0+-0x1bc2):_0x1828a0['bufferView'])==null?void(-0x13e5+-0x203e+-0x3423*-0x1):_0x163c5c['processAsy'+'nc'],_0x3163aa=(_0x4db96d=_0x1828a0==null?void(0x141*0x1d+0x1*-0x9d9+0x1a84*-0x1):_0x1828a0['bufferView'])==null?void(-0x1*0x469+0x1686+-0x121d):_0x4db96d['postproces'+'s'];if(!((_0x4d62dd=_0x3d3bd9['bufferView'+'s'])!=null&&_0x4d62dd['length']))return _0x296d76;for(let _0x39f22c=0x223d+-0x1bea+-0x1*0x653;_0x39f22c<_0x3d3bd9['bufferView'+'s']['length'];++_0x39f22c){const _0xa8914f=_0x3d3bd9['bufferView'+'s'][_0x39f22c];_0x92213d&&_0x92213d(_0xa8914f);let _0x3ab5c0;_0x6bf615?_0x3ab5c0=new Promise((_0x5e8d6e,_0x27be89)=>{_0x6bf615(_0xa8914f,_0x4f8609,(_0x3d389a,_0x56a4ba)=>{_0x3d389a?_0x27be89(_0x3d389a):_0x5e8d6e(_0x56a4ba);});}):_0x3ab5c0=new Promise(_0x10de8e=>{_0x10de8e(null);}),_0x3ab5c0=_0x3ab5c0['then'](_0x4d42f9=>_0x4d42f9||_0x4f8609[_0xa8914f['buffer']]['then'](_0x3fc0a7=>new Uint8Array(_0x3fc0a7['buffer'],_0x3fc0a7['byteOffset']+(_0xa8914f['byteOffset']||0xec8+0x1b4*0x3+-0x4*0x4f9),_0xa8914f['byteLength']))),_0xa8914f['hasOwnProp'+'erty']('byteStride')&&(_0x3ab5c0=_0x3ab5c0['then'](_0x30b7e8=>(_0x30b7e8['byteStride']=_0xa8914f['byteStride'],_0x30b7e8))),_0x3163aa&&(_0x3ab5c0=_0x3ab5c0['then'](_0x46e6ee=>(_0x3163aa(_0xa8914f,_0x46e6ee),_0x46e6ee))),_0x296d76['push'](_0x3ab5c0);}return _0x296d76;};class kh{static['parse'](_0x19cd8a,_0x20b63c,_0x2abba4,_0x49aa93,_0x485718,_0x4347c6,_0x1087ec){GN(_0x19cd8a,_0x2abba4,(_0x20b19d,_0x516c79)=>{if(_0x20b19d){_0x1087ec(_0x20b19d);return;}zN(_0x516c79['gltfChunk'],(_0x229d42,_0x1778f5)=>{if(_0x229d42){_0x1087ec(_0x229d42);return;}const _0x5362d6=BN(_0x1778f5,_0x516c79['binaryChun'+'k'],_0x20b63c,_0x4347c6),_0x44236d=HN(_0x1778f5,_0x5362d6,_0x4347c6),_0x3d3b64=kN(_0x1778f5,_0x44236d,_0x20b63c,_0x485718,_0x4347c6),_0x32c7fe=UN(_0x1778f5,_0x3d3b64,_0x4347c6);ON(_0x49aa93,_0x1778f5,_0x44236d,_0x32c7fe,_0x4347c6)['then'](_0x5784b2=>_0x1087ec(null,_0x5784b2))['catch'](_0x14b68e=>_0x1087ec(_0x14b68e));});});}static['createDefa'+'ultMateria'+'l'](){return w0({'name':'defaultGlb'+'Material'},[]);}}class WN extends Qe{constructor(_0x49c19a){super(_0x49c19a,'animation'),this['device']=_0x49c19a['graphicsDe'+'vice'],this['assets']=_0x49c19a['assets'];}['load'](_0x5972d8,_0x38297f,_0x501568){typeof _0x5972d8=='string'&&(_0x5972d8={'load':_0x5972d8,'original':_0x5972d8});const _0x1c598c={'retry':this['maxRetries']>0x500+-0x1f9d*0x1+-0x8df*-0x3,'maxRetries':this['maxRetries']};(_0x5972d8['load']['startsWith']('blob:')||_0x5972d8['load']['startsWith']('data:'))&&(xe['getExtensi'+'on'](_0x5972d8['original'])['toLowerCas'+'e']()==='.glb'?_0x1c598c['responseTy'+'pe']=Ls['ResponseTy'+'pe']['ARRAY_BUFF'+'ER']:_0x1c598c['responseTy'+'pe']=Ls['ResponseTy'+'pe']['JSON']),ot['get'](_0x5972d8['load'],_0x1c598c,(_0x3fafbf,_0x452dac)=>{_0x3fafbf?_0x38297f('Error\x20load'+'ing\x20animat'+'ion\x20resour'+'ce:\x20'+_0x5972d8['original']+'\x20['+_0x3fafbf+']'):xe['getExtensi'+'on'](_0x5972d8['original'])['toLowerCas'+'e']()==='.glb'?kh['parse']('filename.g'+'lb','',_0x452dac,this['device'],this['assets'],(_0x501568==null?void(0x1d3e+0x1ef6+-0x3c34):_0x501568['options'])??{},(_0x1c5097,_0x4f6203)=>{var _0xce48de;if(_0x1c5097)_0x38297f(_0x1c5097);else{const _0x2357f7=_0x4f6203['animations'];if((_0xce48de=_0x501568==null?void(0x15d9+0x35*0x77+-0x2e7c):_0x501568['data'])!=null&&_0xce48de['events']){for(let _0x8e748=0x1fe4+0x105e+-0x3042;_0x8e748<_0x2357f7['length'];_0x8e748++)_0x2357f7[_0x8e748]['events']=new Hv(Object['values'](_0x501568['data']['events']));}_0x4f6203['destroy'](),_0x38297f(null,_0x2357f7);}}):_0x38297f(null,this['_parseAnim'+'ationV'+_0x452dac['animation']['version']](_0x452dac));});}['open'](_0x5aadd8,_0x30fd69,_0x15e410){return _0x30fd69;}['_parseAnim'+'ationV3'](_0x4db56f){const _0x42180e=_0x4db56f['animation'],_0x3cc2fc=new ug();_0x3cc2fc['name']=_0x42180e['name'],_0x3cc2fc['duration']=_0x42180e['duration'];for(let _0x926143=-0x1571+0x1c1*0x5+0xcac;_0x926143<_0x42180e['nodes']['length'];_0x926143++){const _0x2e6a36=new fg(),_0x56a44f=_0x42180e['nodes'][_0x926143];_0x2e6a36['_name']=_0x56a44f['name'];for(let _0x565367=-0x1ac+0x1*-0xbf5+0x48b*0x3;_0x565367<_0x56a44f['keys']['length'];_0x565367++){const _0x265a8d=_0x56a44f['keys'][_0x565367],_0x55d225=_0x265a8d['time'],_0x3eab55=_0x265a8d['pos'],_0x50ae3d=_0x265a8d['rot'],_0x1864c2=_0x265a8d['scale'],_0x201072=new D(_0x3eab55[0x1e02+-0x1*-0xd5a+-0x2b5c],_0x3eab55[0x1*0x1636+-0x2f5*0x5+-0x76c],_0x3eab55[-0x114c+-0x1f98+0xb*0x472]),_0x45ca26=new le()['setFromEul'+'erAngles'](_0x50ae3d[-0xc5f+0x1f3e+0x12df*-0x1],_0x50ae3d[0xa7*-0x2+-0x1338+-0x1*-0x1487],_0x50ae3d[-0xe96*-0x2+0xca*0x8+-0x11bd*0x2]),_0x53957f=new D(_0x1864c2[0x2*0x116a+-0x1381*-0x2+0x1a*-0x2d7],_0x1864c2[0x2*-0x113e+0x1cdb+-0x1*-0x5a2],_0x1864c2[0x362+0xd*0x25c+-0x220c]),_0x4807bf=new dg(_0x55d225,_0x201072,_0x45ca26,_0x53957f);_0x2e6a36['_keys']['push'](_0x4807bf);}_0x3cc2fc['addNode'](_0x2e6a36);}return _0x3cc2fc;}['_parseAnim'+'ationV4'](_0x5ce352){const _0x3be111=_0x5ce352['animation'],_0x560916=new ug();_0x560916['name']=_0x3be111['name'],_0x560916['duration']=_0x3be111['duration'];for(let _0x1d1bed=-0x1420+0x14ac+0x14*-0x7;_0x1d1bed<_0x3be111['nodes']['length'];_0x1d1bed++){const _0x19fadf=new fg(),_0x248a50=_0x3be111['nodes'][_0x1d1bed];_0x19fadf['_name']=_0x248a50['name'];const _0x306b81=_0x248a50['defaults']['p'],_0x306fe8=_0x248a50['defaults']['r'],_0x45f373=_0x248a50['defaults']['s'];for(let _0x1ecacd=-0x1b02+-0x850+-0x112*-0x21;_0x1ecacd<_0x248a50['keys']['length'];_0x1ecacd++){const _0x1a4252=_0x248a50['keys'][_0x1ecacd],_0x15c5dd=_0x1a4252['t'],_0x186438=_0x306b81||_0x1a4252['p'],_0x391be2=_0x306fe8||_0x1a4252['r'],_0x4c9af2=_0x45f373||_0x1a4252['s'],_0x3af289=new D(_0x186438[0x1acf*0x1+-0x2569*-0x1+-0x448*0xf],_0x186438[0x1292*0x1+0x1*0xfce+-0x225f],_0x186438[-0x221b+0xdd8+0x1445*0x1]),_0x347123=new le()['setFromEul'+'erAngles'](_0x391be2[-0x18e7+0x1*0x5d5+0x1312],_0x391be2[-0x24b+-0x3b*-0x53+0x8b*-0x1f],_0x391be2[-0x1c06+0xac*-0x39+0x4254]),_0x468e75=new D(_0x4c9af2[0x1dad*0x1+0x1ef8+-0xcf*0x4b],_0x4c9af2[-0x1834+-0x21c3+-0x28*-0x173],_0x4c9af2[-0x347+0xad*-0x5+0x6aa]),_0x400202=new dg(_0x15c5dd,_0x3af289,_0x347123,_0x468e75);_0x19fadf['_keys']['push'](_0x400202);}_0x560916['addNode'](_0x19fadf);}return _0x560916;}}class $N extends Qe{constructor(_0x5f2afd){super(_0x5f2afd,'animclip');}['load'](_0x493b70,_0x1b0f3f){typeof _0x493b70=='string'&&(_0x493b70={'load':_0x493b70,'original':_0x493b70});const _0x508f29={'retry':this['maxRetries']>-0x1a*-0x12d+-0xd63+0x1*-0x112f,'maxRetries':this['maxRetries']};_0x493b70['load']['startsWith']('blob:')&&(_0x508f29['responseTy'+'pe']=Ls['ResponseTy'+'pe']['JSON']),ot['get'](_0x493b70['load'],_0x508f29,(_0x4cba7f,_0x4b0709)=>{_0x4cba7f?_0x1b0f3f('Error\x20load'+'ing\x20animat'+'ion\x20clip\x20r'+'esource:\x20'+_0x493b70['original']+'\x20['+_0x4cba7f+']'):_0x1b0f3f(null,_0x4b0709);});}['open'](_0x21b7f4,_0x2a22f4){const _0x3f60c8=_0x2a22f4['name'],_0x1f5188=_0x2a22f4['duration'],_0xa807e4=_0x2a22f4['inputs']['map'](_0xd7ddda=>new Fh(0x2*0x72d+0x234b+-0x4*0xc69,_0xd7ddda)),_0x2f3c68=_0x2a22f4['outputs']['map'](_0xaa35ab=>new Fh(_0xaa35ab['components'],_0xaa35ab['data'])),_0x55e8a7=_0x2a22f4['curves']['map'](_0x4b433e=>new v0([_0x4b433e['path']],_0x4b433e['inputIndex'],_0x4b433e['outputInde'+'x'],_0x4b433e['interpolat'+'ion']));return new Qi(_0x3f60c8,_0x1f5188,_0xa807e4,_0x2f3c68,_0x55e8a7);}}class XN extends Qe{constructor(_0x383139){super(_0x383139,'animstateg'+'raph');}['load'](_0x205993,_0x1cda44){typeof _0x205993=='string'&&(_0x205993={'load':_0x205993,'original':_0x205993});const _0x3e8b28={'retry':this['maxRetries']>0x12ca+-0x20b7+0x1*0xded,'maxRetries':this['maxRetries']};_0x205993['load']['startsWith']('blob:')&&(_0x3e8b28['responseTy'+'pe']=Ls['ResponseTy'+'pe']['JSON']),ot['get'](_0x205993['load'],_0x3e8b28,(_0xe341a3,_0x3289c4)=>{_0xe341a3?_0x1cda44('Error\x20load'+'ing\x20animat'+'ion\x20state\x20'+'graph\x20reso'+'urce:\x20'+_0x205993['original']+'\x20['+_0xe341a3+']'):_0x1cda44(null,_0x3289c4);});}['open'](_0x4b2180,_0x5526c3){return new Jc(_0x5526c3);}}const Af=(function(){if(typeof window>'u')return!(0x16*-0x64+0x1*-0x9cd+-0x5*-0x3ae);const _0x19def9=window['navigator']['userAgent'],_0x474733=_0x19def9['indexOf']('MSIE\x20');if(_0x474733>0x12a7+-0x1*-0xa03+-0x6*0x4c7)return parseInt(_0x19def9['substring'](_0x474733+(0xe50+-0x9*-0x302+-0x295d),_0x19def9['indexOf']('.',_0x474733)),0x18*0x71+0x6b9+-0x1147);if(_0x19def9['indexOf']('Trident/')>-0x2b4*0xa+0x1aa*0x13+-0x496){const _0x5a5727=_0x19def9['indexOf']('rv:');return parseInt(_0x19def9['substring'](_0x5a5727+(-0x2623+0x19*0x1b+0x2383),_0x19def9['indexOf']('.',_0x5a5727)),0xd79+-0x23e3+0x1674);}return!(0x972*-0x3+0x40e+0x1849);}()),qN=['.ogg','.mp3','.wav','.mp4a','.m4a','.mp4','.aac','.opus'];class jN extends Qe{constructor(_0x728f15){super(_0x728f15,'audio'),this['manager']=_0x728f15['soundManag'+'er'],w['assert'](this['manager'],'AudioHandl'+'er\x20cannot\x20'+'be\x20created'+'\x20without\x20s'+'ound\x20manag'+'er');}['_isSupport'+'ed'](_0x48f7d0){const _0x212248=xe['getExtensi'+'on'](_0x48f7d0);return qN['indexOf'](_0x212248)>-(0x589+0x4f9+-0xa81)||_0x48f7d0['startsWith']('blob:');}['load'](_0x1f3cfe,_0x56173d){typeof _0x1f3cfe=='string'&&(_0x1f3cfe={'load':_0x1f3cfe,'original':_0x1f3cfe});const _0x4e9e65=function(_0x3d56ed){_0x56173d(null,new Mw(_0x3d56ed));},_0x181978=function(_0x1d0ee4){let _0x5b99be='Error\x20load'+'ing\x20audio\x20'+'url:\x20'+_0x1f3cfe['original'];_0x1d0ee4&&(_0x5b99be+=':\x20'+(_0x1d0ee4['message']||_0x1d0ee4)),console['warn'](_0x5b99be),_0x56173d(_0x5b99be);};if(this['_createSou'+'nd']){if(!this['_isSupport'+'ed'](_0x1f3cfe['original'])){_0x181978('Audio\x20form'+'at\x20for\x20'+_0x1f3cfe['original']+('\x20not\x20suppo'+'rted'));return;}this['_createSou'+'nd'](_0x1f3cfe['load'],_0x4e9e65,_0x181978);}else _0x181978(null);}['_createSou'+'nd'](_0x16a17a,_0x4543e0,_0x383515){if(Dl()){const _0x48c575=this['manager'];if(!_0x48c575['context']){_0x383515('Audio\x20mana'+'ger\x20has\x20no'+'\x20audio\x20con'+'text');return;}const _0x31136d={'retry':this['maxRetries']>0xb*-0xda+-0x1052+-0x3*-0x890,'maxRetries':this['maxRetries']};(_0x16a17a['startsWith']('blob:')||_0x16a17a['startsWith']('data:'))&&(_0x31136d['responseTy'+'pe']=Ls['ResponseTy'+'pe']['ARRAY_BUFF'+'ER']),ot['get'](_0x16a17a,_0x31136d,(_0x2100b4,_0x13bd64)=>{if(_0x2100b4){_0x383515(_0x2100b4);return;}_0x48c575['context']['decodeAudi'+'oData'](_0x13bd64,_0x4543e0,_0x383515);});}else{let _0x359347=null;try{_0x359347=new Audio();}catch{_0x383515('No\x20support'+'\x20for\x20Audio'+'\x20element');return;}Af&&document['body']['appendChil'+'d'](_0x359347);const _0x1e650b=function(){_0x359347['removeEven'+'tListener']('canplaythr'+'ough',_0x1e650b),Af&&document['body']['removeChil'+'d'](_0x359347),_0x4543e0(_0x359347);};_0x359347['onerror']=function(){_0x359347['onerror']=null,Af&&document['body']['removeChil'+'d'](_0x359347),_0x383515();},_0x359347['addEventLi'+'stener']('canplaythr'+'ough',_0x1e650b),_0x359347['src']=_0x16a17a;}}}class YN extends Qe{constructor(_0x3a6917){super(_0x3a6917,'binary');}['load'](_0x23386e,_0x21ccf7){typeof _0x23386e=='string'&&(_0x23386e={'load':_0x23386e,'original':_0x23386e}),ot['get'](_0x23386e['load'],{'responseType':Ls['ResponseTy'+'pe']['ARRAY_BUFF'+'ER'],'retry':this['maxRetries']>-0x86b+0x3f+-0x1*-0x82c,'maxRetries':this['maxRetries']},(_0x2d400d,_0x33fd58)=>{_0x2d400d?_0x21ccf7('Error\x20load'+'ing\x20binary'+'\x20resource:'+'\x20'+_0x23386e['original']+'\x20['+_0x2d400d+']'):_0x21ccf7(null,_0x33fd58);});}['openBinary'](_0x12d114){return _0x12d114['buffer'];}}class yr{constructor(_0xadae93,_0xe0c33f,_0x5b4b22,_0x4d6a39){const _0x114795=function(_0x3d4108,_0x48e15d,_0x13276e){const _0x58a2ab=yr['createAsse'+'t'](_0xe0c33f['name'],_0x3d4108,_0x48e15d,_0x13276e);return _0x5b4b22['add'](_0x58a2ab),_0x58a2ab;},_0x371226=[];for(let _0x24fa5f=0x2411+0x592*-0x5+0x1*-0x837;_0x24fa5f<_0xadae93['renders']['length'];++_0x24fa5f)_0x371226['push'](_0x114795('render',_0xadae93['renders'][_0x24fa5f],_0x24fa5f));const _0x41ba99=[];for(let _0x247975=-0x11b3*-0x1+-0x876+-0x93d;_0x247975<_0xadae93['materials']['length'];++_0x247975)_0x41ba99['push'](_0x114795('material',_0xadae93['materials'][_0x247975],_0x247975));const _0x4e8682=[];for(let _0x385727=-0x7c*-0x2b+-0x2404+0xf30;_0x385727<_0xadae93['animations']['length'];++_0x385727)_0x4e8682['push'](_0x114795('animation',_0xadae93['animations'][_0x385727],_0x385727));this['data']=_0xadae93,this['_model']=null,this['_assetName']=_0xe0c33f['name'],this['_assets']=_0x5b4b22,this['_defaultMa'+'terial']=_0x4d6a39,this['renders']=_0x371226,this['materials']=_0x41ba99,this['textures']=_0xadae93['textures'],this['animations']=_0x4e8682;}get['model'](){if(!this['_model']){const _0x2f0305=yr['createMode'+'l'](this['data'],this['_defaultMa'+'terial']),_0x493e05=yr['createAsse'+'t'](this['_assetName'],'model',_0x2f0305,0xa62*-0x3+0x17b0+0x776);this['_assets']['add'](_0x493e05),this['_model']=_0x493e05;}return this['_model'];}static['createAsse'+'t'](_0x281ecf,_0x4922c7,_0x466ce,_0x5a1683){const _0x395967=new pe(_0x281ecf+'/'+_0x4922c7+'/'+_0x5a1683,_0x4922c7,{'url':''});return _0x395967['resource']=_0x466ce,_0x395967['loaded']=!(-0x1d5*-0x2+0xb*-0x332+0x34*0x9b),_0x395967;}['instantiat'+'eModelEnti'+'ty'](_0x4dfcfb){const _0x46c01c=new lt(void(0xd13+-0x1*-0x195b+-0x1337*0x2),this['_assets']['_loader']['_app']);return _0x46c01c['addCompone'+'nt']('model',Object['assign']({'type':'asset','asset':this['model']},_0x4dfcfb)),_0x46c01c;}['instantiat'+'eRenderEnt'+'ity'](_0x353506){const _0x38a5f4=this['_defaultMa'+'terial'],_0x2b4465=[],_0x2740d1=function(_0x307e7e,_0x448f60,_0x28bc03,_0x5e7270,_0x1990e3,_0x16ab02,_0x332f6a,_0x38d72f){const _0x542870=_0x1990e3[_0x28bc03['id']],_0x34bcb1=_0x542870===void(0x1*0x237b+0x1691+-0x1d06*0x2)?_0x38a5f4:_0x5e7270[_0x542870],_0x886832=new He(_0x28bc03,_0x34bcb1);_0x28bc03['morph']&&(_0x886832['morphInsta'+'nce']=new xa(_0x28bc03['morph'])),_0x332f6a['hasOwnProp'+'erty']('skin')&&_0x2b4465['push']({'meshInstance':_0x886832,'rootBone':_0x307e7e,'entity':_0x448f60});const _0x119239=_0x38d72f['get'](_0x332f6a);if(_0x119239){const _0x5d7e63=_0x119239['matrices'],_0x20a500=kt['getDefault'+'Instancing'+'Format'](_0x28bc03['device']),_0x185d2e=new Is(_0x28bc03['device'],_0x20a500,_0x5d7e63['length']/(-0x740+-0x24c7+0x2c17),{'data':_0x5d7e63});_0x886832['setInstanc'+'ing'](_0x185d2e),_0x886832['instancing'+'Data']['_destroyVe'+'rtexBuffer']=!(0x1*-0xda9+-0x6*0x377+0x2273*0x1);}return _0x886832;},_0x50ae96=(_0x348a92,_0x401e95,_0x57b522)=>{const _0x295cab=new lt(void(0xf72+-0x2435+0x427*0x5),this['_assets']['_loader']['_app']);_0x401e95['_cloneInte'+'rnal'](_0x295cab),_0x348a92||(_0x348a92=_0x295cab);let _0x3bbcd6=null,_0x4e6094=null;for(let _0x19603a=0x1de0+-0x73f+-0x16a1*0x1;_0x19603a<_0x57b522['nodes']['length'];_0x19603a++)if(_0x57b522['nodes'][_0x19603a]===_0x401e95){const _0x6672d6=_0x57b522['gltf']['nodes'][_0x19603a];if(_0x6672d6['hasOwnProp'+'erty']('mesh')){const _0xd4299b=_0x57b522['renders'][_0x6672d6['mesh']]['meshes'];_0x4e6094=this['renders'][_0x6672d6['mesh']];for(let _0x65155f=0x1e1a+0x651+0x246b*-0x1;_0x65155f<_0xd4299b['length'];_0x65155f++){const _0x1cf59d=_0xd4299b[_0x65155f];if(_0x1cf59d){const _0x3d65b9=_0x2740d1(_0x348a92,_0x295cab,_0x1cf59d,_0x57b522['materials'],_0x57b522['meshDefaul'+'tMaterials'],_0x57b522['skins'],_0x6672d6,_0x57b522['nodeInstan'+'cingMap']);_0x3bbcd6||(_0x3bbcd6=[]),_0x3bbcd6['push'](_0x3d65b9);}}}if(_0x57b522['lights']){const _0x5b4f74=_0x57b522['lights']['get'](_0x6672d6);_0x5b4f74&&_0x295cab['addChild'](_0x5b4f74['clone']());}if(_0x57b522['cameras']){const _0x2db5d9=_0x57b522['cameras']['get'](_0x6672d6);_0x2db5d9&&_0x2db5d9['camera']['system']['cloneCompo'+'nent'](_0x2db5d9,_0x295cab);}}_0x3bbcd6&&(_0x295cab['addCompone'+'nt']('render',Object['assign']({'type':'asset','meshInstances':_0x3bbcd6},_0x353506)),_0x295cab['render']['assignAsse'+'t'](_0x4e6094));const _0x4208fa=_0x401e95['children'];for(let _0x27bfd2=0x129c+-0x625*0x3+-0x5*0x9;_0x27bfd2<_0x4208fa['length'];_0x27bfd2++){const _0x1fc88f=_0x50ae96(_0x348a92,_0x4208fa[_0x27bfd2],_0x57b522);_0x295cab['addChild'](_0x1fc88f);}return _0x295cab;},_0x309171=[];for(const _0x6483fd of this['data']['scenes'])_0x309171['push'](_0x50ae96(null,_0x6483fd,this['data']));return _0x2b4465['forEach'](_0x3e07ab=>{_0x3e07ab['meshInstan'+'ce']['skinInstan'+'ce']=_l['createCach'+'edSkinInst'+'ance'](_0x3e07ab['meshInstan'+'ce']['mesh']['skin'],_0x3e07ab['rootBone'],_0x3e07ab['entity']),_0x3e07ab['meshInstan'+'ce']['node']['render']['rootBone']=_0x3e07ab['rootBone'];}),yr['createScen'+'eHierarchy'](_0x309171,lt);}['getMateria'+'lVariants'](){return this['data']['variants']?Object['keys'](this['data']['variants']):[];}['applyMater'+'ialVariant'](_0x3c13b1,_0x1a94ae){const _0x45a7e7=_0x1a94ae?this['data']['variants'][_0x1a94ae]:null;if(_0x45a7e7===void(-0xd38+-0x16f*0x19+-0x13*-0x295)){w['warn']('No\x20variant'+'\x20named\x20'+_0x1a94ae+('\x20exists\x20in'+'\x20resource'));return;}const _0x24165b=_0x3c13b1['findCompon'+'ents']('render');for(let _0x2e4cac=0x16cc+0x22f+-0x18fb*0x1;_0x2e4cac<_0x24165b['length'];_0x2e4cac++){const _0x4a1b59=_0x24165b[_0x2e4cac];this['_applyMate'+'rialVarian'+'t'](_0x45a7e7,_0x4a1b59['meshInstan'+'ces']);}}['applyMater'+'ialVariant'+'Instances'](_0x5de1d5,_0x82121d){const _0x2a6a8a=_0x82121d?this['data']['variants'][_0x82121d]:null;if(_0x2a6a8a===void(-0xdd9+0x1*-0xace+0x18a7)){w['warn']('No\x20variant'+'\x20named\x20'+_0x82121d+('\x20exists\x20in'+'\x20resource'));return;}this['_applyMate'+'rialVarian'+'t'](_0x2a6a8a,_0x5de1d5);}['_applyMate'+'rialVarian'+'t'](_0x459443,_0x5cf517){_0x5cf517['forEach'](_0x1ab249=>{if(_0x459443===null)_0x1ab249['material']=this['_defaultMa'+'terial'];else{const _0x3828d5=this['data']['meshVarian'+'ts'][_0x1ab249['mesh']['id']];_0x3828d5&&(_0x1ab249['material']=this['data']['materials'][_0x3828d5[_0x459443]]);}w['assert'](_0x1ab249['material']);});}static['createScen'+'eHierarchy'](_0x40168c,_0x126970){let _0x10c86c=null;if(_0x40168c['length']===0x1dbf+0x3ab*0x2+-0x2514)_0x10c86c=_0x40168c[0x11f7+-0x3*-0x4dd+-0x208e];else{_0x10c86c=new _0x126970('SceneGroup');for(const _0x7b852a of _0x40168c)_0x10c86c['addChild'](_0x7b852a);}return _0x10c86c;}static['createMode'+'l'](_0x335772,_0x540dd6){const _0x4e9ac3=function(_0x2f84c1,_0x55be4c,_0x284ae7,_0x5c1904,_0x57bd1d,_0x1b68d9,_0x472713){const _0x929033=_0x335772['meshDefaul'+'tMaterials'][_0x55be4c['id']],_0x419e26=_0x929033===void(0x26b3*0x1+0xe*-0x107+-0x19f*0xf)?_0x540dd6:_0x57bd1d[_0x929033],_0x348233=new He(_0x55be4c,_0x419e26,_0x1b68d9);if(_0x55be4c['morph']){const _0x266e57=new xa(_0x55be4c['morph']);_0x348233['morphInsta'+'nce']=_0x266e57,_0x2f84c1['morphInsta'+'nces']['push'](_0x266e57);}if(_0x472713['hasOwnProp'+'erty']('skin')){const _0x5694a9=_0x472713['skin'],_0x4c16ae=_0x284ae7[_0x5694a9];_0x55be4c['skin']=_0x4c16ae;const _0x39a2b9=_0x5c1904[_0x5694a9];_0x348233['skinInstan'+'ce']=_0x39a2b9,_0x2f84c1['skinInstan'+'ces']['push'](_0x39a2b9);}_0x2f84c1['meshInstan'+'ces']['push'](_0x348233);},_0x5c0bae=new sr(),_0x2301f8=[];for(const _0x592fe1 of _0x335772['skins']){const _0x5b5f68=new Ol(_0x592fe1);_0x5b5f68['bones']=_0x592fe1['bones'],_0x2301f8['push'](_0x5b5f68);}_0x5c0bae['graph']=yr['createScen'+'eHierarchy'](_0x335772['scenes'],Ie);for(let _0x4f3880=0x1*0x10ea+-0x3d*-0x7+-0x1295;_0x4f3880<_0x335772['nodes']['length'];_0x4f3880++){const _0x2d8ec6=_0x335772['nodes'][_0x4f3880];if(_0x2d8ec6['root']===_0x5c0bae['graph']){const _0x3e9353=_0x335772['gltf']['nodes'][_0x4f3880];if(_0x3e9353['hasOwnProp'+'erty']('mesh')){const _0x2d0680=_0x335772['renders'][_0x3e9353['mesh']]['meshes'];for(let _0x177efb=0x1*0xa99+0x13*0xbd+0x20*-0xc5;_0x177efb<_0x2d0680['length'];_0x177efb++){const _0x568de7=_0x2d0680[_0x177efb];_0x568de7&&_0x4e9ac3(_0x5c0bae,_0x568de7,_0x335772['skins'],_0x2301f8,_0x335772['materials'],_0x2d8ec6,_0x3e9353);}}}}return _0x5c0bae;}['destroy'](){const _0x5498ec=this['_assets'],_0x4010d9=function(_0x283b67){_0x5498ec['remove'](_0x283b67),_0x283b67['unload']();},_0x228b7f=function(_0x3ebe20){_0x3ebe20['forEach'](_0x3509a2=>{_0x4010d9(_0x3509a2);});};this['animations']&&(_0x228b7f(this['animations']),this['animations']=null),this['textures']&&(_0x228b7f(this['textures']),this['textures']=null),this['materials']&&(_0x228b7f(this['materials']),this['materials']=null),this['renders']&&(_0x228b7f(this['renders']),this['renders']=null),this['_model']&&(_0x4010d9(this['_model']),this['_model']=null),this['data']=null,this['assets']=null;}}class KN{constructor(_0x2eb735,_0x264de1,_0x5e9964){this['_device']=_0x2eb735,this['_assets']=_0x264de1,this['_defaultMa'+'terial']=kh['createDefa'+'ultMateria'+'l'](),this['maxRetries']=_0x5e9964;}['_getUrlWit'+'houtParams'](_0x441d13){return _0x441d13['indexOf']('?')>=-0x2472+0x2d5+0x219d?_0x441d13['split']('?')[0x9*-0xe5+-0x23b5+0x15e1*0x2]:_0x441d13;}['load'](_0xcb6695,_0x398bd4,_0xf6a086){pe['fetchArray'+'Buffer'](_0xcb6695['load'],(_0xa5ea09,_0x40f8ad)=>{_0xa5ea09?_0x398bd4(_0xa5ea09):kh['parse'](this['_getUrlWit'+'houtParams'](_0xcb6695['original']),xe['extractPat'+'h'](_0xcb6695['load']),_0x40f8ad,this['_device'],_0xf6a086['registry'],_0xf6a086['options'],(_0x3f0328,_0x4f74b4)=>{_0x3f0328?_0x398bd4(_0x3f0328):_0x398bd4(null,new yr(_0x4f74b4,_0xf6a086,this['_assets'],this['_defaultMa'+'terial']));});},_0xf6a086,this['maxRetries']);}['open'](_0x4437a5,_0x3e3aa6,_0x2e8e4f){return _0x3e3aa6;}['patch'](_0x145a9d,_0x5cb94a){}}class ZN extends Qe{constructor(_0x219b8a){super(_0x219b8a,'container'),this['glbContain'+'erParser']=new KN(_0x219b8a['graphicsDe'+'vice'],_0x219b8a['assets'],0x8a1+0x1*0x2519+0x3*-0xf3e),this['parsers']={};}set['maxRetries'](_0x12f83f){this['glbContain'+'erParser']['maxRetries']=_0x12f83f;for(const _0x278687 in this['parsers'])this['parsers']['hasOwnProp'+'erty'](_0x278687)&&(this['parsers'][_0x278687]['maxRetries']=_0x12f83f);}get['maxRetries'](){return this['glbContain'+'erParser']['maxRetries'];}['_getUrlWit'+'houtParams'](_0x302185){return _0x302185['indexOf']('?')>=-0x1b0d+-0x25d0+-0x1*-0x40dd?_0x302185['split']('?')[0x233*-0x7+-0x74d+0x16b2]:_0x302185;}['_getParser'](_0xf77308){const _0x184e89=_0xf77308?xe['getExtensi'+'on'](this['_getUrlWit'+'houtParams'](_0xf77308))['toLowerCas'+'e']()['replace']('.',''):null;return this['parsers'][_0x184e89]||this['glbContain'+'erParser'];}['load'](_0x2df5f5,_0x259ee9,_0x7f7ed5){typeof _0x2df5f5=='string'&&(_0x2df5f5={'load':_0x2df5f5,'original':_0x2df5f5}),this['_getParser'](_0x2df5f5['original'])['load'](_0x2df5f5,_0x259ee9,_0x7f7ed5);}['open'](_0x13ac17,_0x2ed59a,_0x3e5ac0){return this['_getParser'](_0x13ac17)['open'](_0x13ac17,_0x2ed59a,_0x3e5ac0);}}class QN extends Qe{constructor(_0x3195a1){super(_0x3195a1,'css'),h(this,'decoder',null);}['load'](_0x3f4983,_0x5d04ab){typeof _0x3f4983=='string'&&(_0x3f4983={'load':_0x3f4983,'original':_0x3f4983}),ot['get'](_0x3f4983['load'],{'retry':this['maxRetries']>0x2*-0x12fd+0x46e+0x218c,'maxRetries':this['maxRetries']},(_0x3e6dbb,_0x19b099)=>{_0x3e6dbb?_0x5d04ab('Error\x20load'+'ing\x20css\x20re'+'source:\x20'+_0x3f4983['original']+'\x20['+_0x3e6dbb+']'):_0x5d04ab(null,_0x19b099);});}['openBinary'](_0x34b039){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),this['decoder']['decode'](_0x34b039);}}class JN extends Qe{constructor(_0x238be3){super(_0x238be3,'cubemap'),this['_device']=_0x238be3['graphicsDe'+'vice'],this['_registry']=_0x238be3['assets'],this['_loader']=_0x238be3['loader'];}['load'](_0x3182b3,_0x2f948e,_0x429de3){this['loadAssets'](_0x429de3,_0x2f948e);}['open'](_0x23b2f8,_0x4dc2e9,_0x2de500){return _0x2de500?_0x2de500['resource']:null;}['patch'](_0x58c51d,_0x297169){this['loadAssets'](_0x58c51d,(_0x2344f5,_0xa5151d)=>{_0x2344f5&&(_0x297169['fire']('error',_0x58c51d),_0x297169['fire']('error:'+_0x58c51d['id'],_0x2344f5,_0x58c51d),_0x58c51d['fire']('error',_0x58c51d));});}['getAssetId'+'s'](_0x4b5e84){const _0x1b088e=[];if(_0x1b088e[0x1709*-0x1+0x21*-0x10c+-0x1*-0x3995]=_0x4b5e84['file'],(_0x4b5e84['loadFaces']||!_0x4b5e84['file'])&&_0x4b5e84['data']&&_0x4b5e84['data']['textures']){for(let _0x187aac=0x7b*0x1b+0x2f*-0x47+0x10;_0x187aac<-0x200e+0x1fe3+-0x31*-0x1;++_0x187aac)_0x1b088e[_0x187aac+(-0x180a+-0x9e8*-0x1+0xe23)]=_0x4b5e84['data']['textures'][_0x187aac];}else _0x1b088e[0xd7+0x3*-0x644+-0x11f6*-0x1]=_0x1b088e[0x41*-0x5+0x49*0x4e+-0x14f7]=_0x1b088e[0x1b*-0xcf+0x1920+-0xc*0x46]=_0x1b088e[0x709+-0x79d*0x3+0x36*0x4b]=_0x1b088e[0xfd+0xe4b*0x1+0xf43*-0x1]=_0x1b088e[0x274*-0x5+0x1cd5+-0x108b]=null;return _0x1b088e;}['compareAss'+'etIds'](_0x2b3721,_0x54db9e){return _0x2b3721&&_0x54db9e?parseInt(_0x2b3721,-0x1*-0x20a4+0x1ff7+0x4091*-0x1)===_0x2b3721||typeof _0x2b3721=='string'?_0x2b3721===_0x54db9e:_0x2b3721['url']===_0x54db9e['url']:_0x2b3721!==null==(_0x54db9e!==null);}['update'](_0x2c39a7,_0x32fc0c,_0x3e6a27){const _0x133aa6=_0x2c39a7['data']||{},_0x14e113=_0x2c39a7['_handlerSt'+'ate']['assets'],_0x5498b2=_0x2c39a7['_resources'];let _0x3a3eae,_0x2eec78,_0x41d198;const _0x49e512=[null,null,null,null,null,null,null],_0x1e0333=function(){return _0x133aa6['hasOwnProp'+'erty']('type')?_0x133aa6['type']:_0x133aa6['hasOwnProp'+'erty']('rgbm')?_0x133aa6['rgbm']?Zi:Ds:null;};if(!_0x2c39a7['loaded']||_0x3e6a27[-0xb*-0x26e+0x2171+-0xd3*0x49]!==_0x14e113[0x180b+-0x142+-0x16c9]){if(_0x3e6a27[-0x17b5+0x552+-0x3*-0x621]){if(_0x3a3eae=_0x3e6a27[0x1736*-0x1+0x1ee4+-0x7ae]['resource'],_0x3a3eae['cubemap']){for(_0x41d198=0x155f*-0x1+-0x942+0x1ea1;_0x41d198<-0x3d*-0xa1+-0x1e38*0x1+0xbd*-0xb;++_0x41d198)_0x49e512[_0x41d198+(-0x178c+-0x2de*-0xb+-0x7fd)]=new _e(this['_device'],{'name':_0x2c39a7['name']+('_prelitCub'+'emap')+(_0x3a3eae['width']>>_0x41d198),'cubemap':!(-0x902*-0x1+0x366+-0xc68),'type':_0x1e0333()||_0x3a3eae['type'],'width':_0x3a3eae['width']>>_0x41d198,'height':_0x3a3eae['height']>>_0x41d198,'format':_0x3a3eae['format'],'levels':[_0x3a3eae['_levels'][_0x41d198]],'addressU':ue,'addressV':ue,'mipmaps':_0x41d198===-0x3*-0x318+-0x4*0x489+-0x144*-0x7});}else _0x49e512[-0x49*-0x2f+-0x2125+0x13bf]=_0x3a3eae;}}else _0x49e512[0x6d8+-0x1b84+0x14ad]=_0x5498b2[-0x14bf+0xdad+0x713]||null,_0x49e512[0xbec+0x1*0x942+-0x152c]=_0x5498b2[-0x4c9+-0x1f2d+0x8*0x47f]||null,_0x49e512[0x2276+-0x1ea5+0x1*-0x3ce]=_0x5498b2[-0x2483*-0x1+-0x12*-0x209+-0x4922]||null,_0x49e512[0x1*-0x223e+0x855*0x1+0x19ed]=_0x5498b2[-0x1691+-0x1ccc+0x757*0x7]||null,_0x49e512[-0x236b*0x1+-0x177c+0x3aec]=_0x5498b2[-0x2108+-0x107*-0x1f+0x134]||null,_0x49e512[0xc0e+-0xb*0xc7+-0x37b]=_0x5498b2[-0x74e+-0x1e75+0x25c9]||null;const _0x23fba0=_0x3e6a27['slice'](0x2*-0x102b+-0x10d4+0x312b);if(!_0x2c39a7['loaded']||!this['cmpArrays'](_0x23fba0,_0x14e113['slice'](-0x1*0x513+-0x2096+0x2*0x12d5))){if(_0x23fba0['indexOf'](null)===-(-0xd06+-0x1eab+-0x15d9*-0x2)){const _0x3bad06=_0x23fba0['map'](_0x20e1ad=>_0x20e1ad['resource']),_0x48757a=[];for(_0x2eec78=-0x177e+-0x1e75+-0x7*-0x7b5;_0x2eec78<_0x3bad06[0x147e+-0x2223+0xda5]['_levels']['length'];++_0x2eec78)_0x48757a['push'](_0x3bad06['map'](_0x37c011=>_0x37c011['_levels'][_0x2eec78]));const _0x35e90e=_0x3bad06[-0x359*-0x2+0x1*0x224e+-0x2900]['format'],_0x3a9484=new _e(this['_device'],{'name':_0x2c39a7['name']+'_faces','cubemap':!(-0xe89+0x165f+-0x7d6),'type':_0x1e0333()||_0x3bad06[-0x129a+-0xf09+0x21a3]['type'],'width':_0x3bad06[0xa22+-0x232a+0x1908]['width'],'height':_0x3bad06[-0x593+0x66*0x29+-0xac3]['height'],'format':_0x35e90e===Cr?Ne:_0x35e90e,'mipmaps':_0x133aa6['mipmaps']??!(-0x3e*-0x5d+-0x1*-0x11f7+0xf*-0x2b3),'levels':_0x48757a,'minFilter':_0x133aa6['hasOwnProp'+'erty']('minFilter')?_0x133aa6['minFilter']:_0x3bad06[0x12fa+0x57e+-0x1878]['minFilter'],'magFilter':_0x133aa6['hasOwnProp'+'erty']('magFilter')?_0x133aa6['magFilter']:_0x3bad06[-0x1688+-0xd*0x13+0x7d5*0x3]['magFilter'],'anisotropy':_0x133aa6['hasOwnProp'+'erty']('anisotropy')?_0x133aa6['anisotropy']:0xa3*0x19+0x1385+-0x236f,'addressU':ue,'addressV':ue});_0x49e512[-0x5d5*-0x2+0x1bce+-0x2778*0x1]=_0x3a9484;}}else _0x49e512[-0x469*0x1+0x1d40+-0x18d7]=_0x5498b2[0x758+-0x299+-0xf3*0x5]||null;if(!this['cmpArrays'](_0x49e512,_0x5498b2)){for(_0x2c39a7['resources']=_0x49e512,_0x2c39a7['_handlerSt'+'ate']['assetIds']=_0x32fc0c,_0x2c39a7['_handlerSt'+'ate']['assets']=_0x3e6a27,_0x41d198=0xfb6+-0x23cc+-0x1416*-0x1;_0x41d198<_0x5498b2['length'];++_0x41d198)_0x5498b2[_0x41d198]!==null&&_0x49e512['indexOf'](_0x5498b2[_0x41d198])===-(0x24c2+0x1*0xe9b+0x335c*-0x1)&&_0x5498b2[_0x41d198]['destroy']();}for(_0x41d198=0x12c9+0x8f7+-0x1bc0;_0x41d198<_0x14e113['length'];++_0x41d198)_0x14e113[_0x41d198]!==null&&_0x3e6a27['indexOf'](_0x14e113[_0x41d198])===-(0x1012+0x35*0xba+-0x3693)&&_0x14e113[_0x41d198]['unload']();}['cmpArrays'](_0x24f70b,_0x29283f){if(_0x24f70b['length']!==_0x29283f['length'])return!(0x496+-0x1ba4+0x170f);for(let _0x5d34d8=0x1b*0x14d+0x1aba+-0xdf*0x47;_0x5d34d8<_0x24f70b['length'];++_0x5d34d8)if(_0x24f70b[_0x5d34d8]!==_0x29283f[_0x5d34d8])return!(-0x74d*0x1+0xf1a+-0x7cc);return!(-0x263+0xe*0x25a+-0x1e89);}['resolveId'](_0x54cb7d){const _0x11e4db=parseInt(_0x54cb7d,-0x5*-0x362+0x113e+-0x221e);return _0x11e4db===_0x54cb7d||_0x11e4db['toString']()===_0x54cb7d?_0x11e4db:_0x54cb7d;}['loadAssets'](_0x563783,_0x290dd9){_0x563783['hasOwnProp'+'erty']('_handlerSt'+'ate')||(_0x563783['_handlerSt'+'ate']={'assetIds':[null,null,null,null,null,null,null],'assets':[null,null,null,null,null,null,null]});const _0x201334=this,_0x24fc83=_0x201334['getAssetId'+'s'](_0x563783),_0x3ba0e2=[null,null,null,null,null,null,null],_0x33241c=_0x563783['_handlerSt'+'ate']['assetIds'],_0x23fe08=_0x563783['_handlerSt'+'ate']['assets'],_0x9f85d5=_0x201334['_registry'];let _0x30e6d3=0x5ea*0x1+0x2f*0x55+-0x157e;const _0xceff16=function(_0x3396f2,_0xc39d32){_0x3ba0e2[_0x3396f2]=_0xc39d32,_0x30e6d3--,_0x30e6d3===0x30c*-0xc+0x26fa+0x67*-0x6&&(_0x201334['update'](_0x563783,_0x24fc83,_0x3ba0e2),_0x290dd9(null,_0x563783['resources']));},_0xa9c4e1=function(_0x328b7c,_0x554716,_0x4554b7){_0x290dd9(_0x554716);},_0x326d58=function(_0x4f0498,_0x9ec052){_0x9ec052['loaded']?_0xceff16(_0x4f0498,_0x9ec052):(_0x9f85d5['once']('load:'+_0x9ec052['id'],_0xceff16['bind'](_0x201334,_0x4f0498)),_0x9f85d5['once']('error:'+_0x9ec052['id'],_0xa9c4e1['bind'](_0x201334,_0x4f0498)),_0x9ec052['loading']||_0x9f85d5['load'](_0x9ec052));};let _0x482657;for(let _0x5145ac=0x817+0x139a+-0x1bb1;_0x5145ac<0xfdf+-0x156b+0x593;++_0x5145ac){const _0x3e3fd5=this['resolveId'](_0x24fc83[_0x5145ac]);if(!_0x3e3fd5)_0xceff16(_0x5145ac,null);else{if(_0x201334['compareAss'+'etIds'](_0x3e3fd5,_0x33241c[_0x5145ac]))_0x326d58(_0x5145ac,_0x23fe08[_0x5145ac]);else{if(parseInt(_0x3e3fd5,-0xe*-0x2b+-0x960+0x710)===_0x3e3fd5)_0x482657=_0x9f85d5['get'](_0x3e3fd5),_0x482657?_0x326d58(_0x5145ac,_0x482657):setTimeout(((_0xd1341c,_0x2d9bce)=>{const _0x104f2d=_0x9f85d5['get'](_0x2d9bce);_0x104f2d?_0x326d58(_0xd1341c,_0x104f2d):_0xa9c4e1(_0xd1341c,'failed\x20to\x20'+'find\x20depen'+'dent\x20cubem'+'ap\x20asset='+_0x2d9bce);})['bind'](null,_0x5145ac,_0x3e3fd5));else{const _0x4e6237=typeof _0x3e3fd5=='string'?{'url':_0x3e3fd5,'filename':_0x3e3fd5}:_0x3e3fd5,_0x141c84=_0x4e6237['url']['search']('.dds')===-(-0x2*0x68c+0x1*-0xdb+0xdf4)?{'type':'rgbp','addressu':'clamp','addressv':'clamp','mipmaps':!(0x1e6f+0x22c2*0x1+0x70*-0x95)}:null;_0x482657=new pe(_0x563783['name']+'_part_'+_0x5145ac,'texture',_0x4e6237,_0x141c84),_0x9f85d5['add'](_0x482657),_0x326d58(_0x5145ac,_0x482657);}}}}}}class ek extends Qe{constructor(_0x607afe){super(_0x607afe,'folder');}['load'](_0x48eb4d,_0x4db4f4){_0x4db4f4(null,null);}}class yS{constructor(_0x183743,_0x7a05cd){this['type']=_0x7a05cd&&_0x7a05cd['type']||Rh,this['em']=0x58b+0x67*0x41+-0x1fb1,this['textures']=_0x183743,this['intensity']=-0xe99+0x52*0x4e+-0xa63*0x1,this['_data']=null,this['data']=_0x7a05cd;}set['data'](_0x2ce055){if(this['_data']=_0x2ce055,!!_0x2ce055&&(this['_data']['intensity']!==void(-0x2dd*0xa+0xe0f+0xe93)&&(this['intensity']=this['_data']['intensity']),this['_data']['info']||(this['_data']['info']={}),(!this['_data']['version']||this['_data']['version']<0xf01*-0x2+-0x128e+0x3092)&&(this['_data']['info']['maps']=[{'width':this['_data']['info']['width'],'height':this['_data']['info']['height']}],this['_data']['chars']))){for(const _0xc02145 in this['_data']['chars'])this['_data']['chars'][_0xc02145]['map']=0x175+-0x7b+-0xfa;}}get['data'](){return this['_data'];}}function Cf(_0x475b08){return _0x475b08['version']<-0x5eb+0x65b*0x6+-0x2034&&(_0x475b08['version']<-0x460+-0xb56+-0xfb8*-0x1&&(_0x475b08['info']['maps']=_0x475b08['info']['maps']||[{'width':_0x475b08['info']['width'],'height':_0x475b08['info']['height']}]),_0x475b08['chars']=Object['keys'](_0x475b08['chars']||{})['reduce']((_0x3f272a,_0x5fe042)=>{const _0x123e0e=_0x475b08['chars'][_0x5fe042],_0x10f2d1=_0x123e0e['letter']!==void(0x8f*-0x28+-0x1*0x25ac+-0x5c*-0xa7)?_0x123e0e['letter']:Hc['fromCodePo'+'int'](_0x5fe042);return _0x475b08['version']<-0x16*-0x101+-0x25e3+0x47*0x39&&(_0x123e0e['map']=_0x123e0e['map']||0x1026+-0x2*-0xde6+0x1c2*-0x19),_0x3f272a[_0x10f2d1]=_0x123e0e,_0x3f272a;},{}),_0x475b08['version']=0x851+0x26*-0xe4+0x198a),_0x475b08;}class tk extends Qe{constructor(_0x2c559f){super(_0x2c559f,'font'),this['_loader']=_0x2c559f['loader'],this['maxRetries']=0x2*-0x209+0x2504+-0x20f2;}['load'](_0x2611e8,_0x41db20,_0x1f9ec5){typeof _0x2611e8=='string'&&(_0x2611e8={'load':_0x2611e8,'original':_0x2611e8});const _0x17c005=this;xe['getExtensi'+'on'](_0x2611e8['original'])==='.json'?ot['get'](_0x2611e8['load'],{'retry':this['maxRetries']>0x1*-0x335+-0xd30+0x1065,'maxRetries':this['maxRetries']},(_0x230ac7,_0x754855)=>{if(_0x230ac7)_0x41db20('Error\x20load'+'ing\x20font\x20r'+'esource:\x20'+_0x2611e8['original']+'\x20['+_0x230ac7+']');else{const _0x6a739e=Cf(_0x754855);_0x17c005['_loadTextu'+'res'](_0x2611e8['load']['replace']('.json','.png'),_0x6a739e,(_0x39ce0c,_0x5895f6)=>{_0x39ce0c?_0x41db20(_0x39ce0c):_0x41db20(null,{'data':_0x6a739e,'textures':_0x5895f6});});}}):(_0x1f9ec5&&_0x1f9ec5['data']&&(_0x1f9ec5['data']=Cf(_0x1f9ec5['data'])),this['_loadTextu'+'res'](_0x2611e8['load'],_0x1f9ec5&&_0x1f9ec5['data'],_0x41db20));}['_loadTextu'+'res'](_0xeea59d,_0x3de465,_0x191d80){const _0x55c1b1=_0x3de465['info']['maps']['length'];let _0x177a56=-0xed*0x2+-0x1cb5+0x1e8f,_0x4b3b30=null;const _0x1c78d4=new Array(_0x55c1b1),_0x5aa36e=this['_loader'],_0x4cf1c0=function(_0x183919){const _0x3da04b=function(_0x4be0e0,_0x41fe62){if(!_0x4b3b30){if(_0x4be0e0){_0x4b3b30=_0x4be0e0,_0x191d80(_0x4be0e0);return;}_0x41fe62['upload'](),_0x1c78d4[_0x183919]=_0x41fe62,_0x177a56++,_0x177a56===_0x55c1b1&&_0x191d80(null,_0x1c78d4);}};_0x183919===-0x26a+-0xb07+0xd71?_0x5aa36e['load'](_0xeea59d,'texture',_0x3da04b):_0x5aa36e['load'](_0xeea59d['replace']('.png',_0x183919+'.png'),'texture',_0x3da04b);};for(let _0x2c57a5=0x110b*-0x1+-0x1*-0x1517+-0x40c*0x1;_0x2c57a5<_0x55c1b1;_0x2c57a5++)_0x4cf1c0(_0x2c57a5);}['open'](_0x3d7f40,_0x133e5f,_0x330207){let _0x1204e9;return _0x133e5f['textures']?_0x1204e9=new yS(_0x133e5f['textures'],_0x133e5f['data']):_0x1204e9=new yS(_0x133e5f,null),_0x1204e9;}['patch'](_0x3926b5,_0x57737c){const _0x43c887=_0x3926b5['resource'];!_0x43c887['data']&&_0x3926b5['data']?_0x43c887['data']=_0x3926b5['data']:!_0x3926b5['data']&&_0x43c887['data']&&(_0x3926b5['data']=_0x43c887['data']),_0x3926b5['data']&&(_0x3926b5['data']=Cf(_0x3926b5['data']));}}async function sk(){const _0x338ee3=-0xc2*0x10+0x3d*0x36+0x26*-0x5+0.28209479177387814;class _0x42b7c{constructor(_0x172427,_0x2dc1af,_0x3d7d55){this['x']=_0x172427,this['y']=_0x2dc1af,this['z']=_0x3d7d55;}}class _0x23dd07{constructor(_0x1b31aa,_0x51cd28,_0x3afeb5,_0x318333){this['x']=_0x1b31aa,this['y']=_0x51cd28,this['z']=_0x3afeb5,this['w']=_0x318333;}}class _0x3d7e30{constructor(_0x2fab99,_0x8eb2e2,_0xba3577,_0x37f7fd){this['x']=_0x2fab99,this['y']=_0x8eb2e2,this['z']=_0xba3577,this['w']=_0x37f7fd;}['set'](_0x353a1e,_0x3f5c0c,_0x47cdc6,_0x56c81c){this['x']=_0x353a1e,this['y']=_0x3f5c0c,this['z']=_0x47cdc6,this['w']=_0x56c81c;}}class _0x54fd93{constructor(_0x4c7c03,_0x48a53a,_0x4f28df,_0x52ae51,_0x1403f5,_0x2c0127,_0x2a803e,_0xce2e07,_0x177695,_0x137270,_0x400e7b,_0x281b64,_0x295ac1,_0x1f08d9){const _0x1e0811=(_0x1a638d,_0x1134c6)=>{const _0x36f3bb=(0x1a9c+0x33*0x21+0x1*-0x212e<<_0x1134c6)-(0x4b*-0x2c+0x2*-0xdb4+0x284d);return(_0x1a638d&_0x36f3bb)/_0x36f3bb;},_0x25f622=(_0x5ba3d3,_0x28f633)=>{_0x5ba3d3['x']=_0x1e0811(_0x28f633>>>-0xaac+0x15bb+-0xafa,0x2*-0xfe5+0xc8d+-0x1348*-0x1),_0x5ba3d3['y']=_0x1e0811(_0x28f633>>>0x1ed*0xf+0x24b5+0x1*-0x418d,0x1248+-0x9c7*0x1+-0x877*0x1),_0x5ba3d3['z']=_0x1e0811(_0x28f633,0x2f7+0x497+-0x783);},_0x35497e=(_0xfdc09b,_0xaaf31c)=>{_0xfdc09b['x']=_0x1e0811(_0xaaf31c>>>-0x1fbe+-0x2440+0x4416,0x2126+0x7*0x567+-0x1*0x46ef),_0xfdc09b['y']=_0x1e0811(_0xaaf31c>>>0xe64+-0xc*0x305+0x15e8,0x1*-0x248e+-0xbc5+0x305b),_0xfdc09b['z']=_0x1e0811(_0xaaf31c>>>0xf64*0x2+0x1*-0x210b+0x24b,-0x444+-0xebb+0x1307),_0xfdc09b['w']=_0x1e0811(_0xaaf31c,0xcd1+0x1c32*-0x1+0xf69*0x1);},_0x117ff4=(_0x175a6e,_0x354183)=>{const _0x1af9ed=(0x1059+0x26fb+-0x3*0x1271)/(Math['sqrt'](0x2*0x5+0x5cb+0x7*-0xd5)*(0x719+0x3*-0xa1f+-0x2*-0xba2+0.5)),_0x1dbd93=(_0x1e0811(_0x354183>>>0x1c48+0x1d36*0x1+-0x1*0x396a,-0x43*-0x1b+0x43*-0x47+0xb8e)-(0xcc5*-0x3+0x125+-0x8e*-0x43+0.5))*_0x1af9ed,_0x2e5353=(_0x1e0811(_0x354183>>>0x8*-0x3e4+0x151*-0x9+-0x3e9*-0xb,-0x28*0x82+-0x1cec+0x3146)-(-0x908+-0x2581+-0x13*-0x273+0.5))*_0x1af9ed,_0x150e66=(_0x1e0811(_0x354183,-0x7de+-0xb14+-0xf3*-0x14)-(0x2217+-0xb*-0x22c+-0x39fb*0x1+0.5))*_0x1af9ed,_0x31071e=Math['sqrt'](-0x97+0x535+-0x49d*0x1-(_0x1dbd93*_0x1dbd93+_0x2e5353*_0x2e5353+_0x150e66*_0x150e66));switch(_0x354183>>>0x1ff7+-0x11*0x19+-0x1c*0x114){case-0x13*0x4a+0x1*0x2527+-0x1fa9:_0x175a6e['set'](_0x1dbd93,_0x2e5353,_0x150e66,_0x31071e);break;case 0x26c2*-0x1+0x7*-0x2db+0x8*0x758:_0x175a6e['set'](_0x31071e,_0x2e5353,_0x150e66,_0x1dbd93);break;case 0x13e1+0x1425+-0x2804:_0x175a6e['set'](_0x2e5353,_0x31071e,_0x150e66,_0x1dbd93);break;case 0x2e*-0xbf+-0xb9f+-0xb7d*-0x4:_0x175a6e['set'](_0x2e5353,_0x150e66,_0x31071e,_0x1dbd93);break;}},_0x2c7eeb=(_0x1ebf96,_0x285b74,_0x5c5fd9)=>_0x1ebf96*(-0x517+0x1*0x1025+-0x29*0x45-_0x5c5fd9)+_0x285b74*_0x5c5fd9,_0x14a1ce=[0x57d+-0x8*0x191+0x70e,0xc*-0x1da+0x481*-0x8+0x3a48,-0x1eb8+-0x21e1+-0x2*-0x2054][_0x2a803e-(-0x7b*0x36+-0x22f+0x22a*0xd)],_0x48aab9=0x657+0xc3*0x5+-0xa20;this['read']=_0x5ed560=>{const _0x1494ac=Math['floor'](_0x5ed560/(-0x47f*0x1+0x1bb2+0x1*-0x1633))*_0x48a53a;if(_0xce2e07&&(_0x25f622(_0xce2e07,_0x4f28df[_0x5ed560*_0x48aab9+(-0x1df*0x5+0x122e*0x1+-0x8d3*0x1)]),_0xce2e07['x']=_0x2c7eeb(_0x4c7c03[_0x1494ac+(-0x5*-0x5f3+0xda0+-0x2b5f)],_0x4c7c03[_0x1494ac+(0x112b+0xf2*0x13+-0x231e)],_0xce2e07['x']),_0xce2e07['y']=_0x2c7eeb(_0x4c7c03[_0x1494ac+(-0xbb*0x13+-0x171f+0x2501*0x1)],_0x4c7c03[_0x1494ac+(0x1f3c+-0x27a*-0x2+0x1cf*-0x14)],_0xce2e07['y']),_0xce2e07['z']=_0x2c7eeb(_0x4c7c03[_0x1494ac+(0x23cd+0x2f0*-0x3+-0x1afb)],_0x4c7c03[_0x1494ac+(-0x1*0x1a5+0x211d+-0x1f73)],_0xce2e07['z'])),_0x177695&&_0x117ff4(_0x177695,_0x4f28df[_0x5ed560*_0x48aab9+(-0x18d3*-0x1+0x1a7*0x5+-0x1*0x2115)]),_0x137270&&(_0x25f622(_0x137270,_0x4f28df[_0x5ed560*_0x48aab9+(0x1f4c+0x204f+-0x25b*0x1b)]),_0x137270['x']=_0x2c7eeb(_0x4c7c03[_0x1494ac+(0x21af+-0xac7+-0x16e2)],_0x4c7c03[_0x1494ac+(0x1bdc+-0x243c+0x869*0x1)],_0x137270['x']),_0x137270['y']=_0x2c7eeb(_0x4c7c03[_0x1494ac+(-0x7b4+-0x14b*0xb+0x119*0x14)],_0x4c7c03[_0x1494ac+(-0x1*0x2fb+0x209*0x13+-0x23a6)],_0x137270['y']),_0x137270['z']=_0x2c7eeb(_0x4c7c03[_0x1494ac+(0xa35+-0x1da8+0x137b)],_0x4c7c03[_0x1494ac+(0xee7+0x2f*-0x91+0xbc3*0x1)],_0x137270['z'])),_0x400e7b&&(_0x35497e(_0x400e7b,_0x4f28df[_0x5ed560*_0x48aab9+(-0x141c+0x1*-0x129d+0x1*0x26bc)]),_0x48a53a>-0x16e+-0x8*0x3a9+0x7f*0x3e&&(_0x400e7b['x']=_0x2c7eeb(_0x4c7c03[_0x1494ac+(-0xa4a+0x721*-0x1+0x1177)],_0x4c7c03[_0x1494ac+(0x5*-0x6a1+-0x2*-0xb8f+0x2*0x50b)],_0x400e7b['x']),_0x400e7b['y']=_0x2c7eeb(_0x4c7c03[_0x1494ac+(-0x1ed9+-0x22*0xf6+0x3f92)],_0x4c7c03[_0x1494ac+(-0x1825+-0x1*0x8d8+-0x210d*-0x1)],_0x400e7b['y']),_0x400e7b['z']=_0x2c7eeb(_0x4c7c03[_0x1494ac+(0x8*-0x28e+0x11e6*-0x1+-0x17a*-0x1a)],_0x4c7c03[_0x1494ac+(-0x1*-0x323+-0x562+0x250)],_0x400e7b['z']))),_0x281b64&&(_0x25f622(_0x281b64,_0x4f28df[_0x5ed560*_0x48aab9+(-0x7a*-0x31+-0x1e36+0x14*0x58)]),_0x281b64['x']=_0x2c7eeb(_0x4c7c03[_0x1494ac+(0x12c8+0x901+-0x2b*0xa5)],_0x4c7c03[_0x1494ac+(-0x1386+0xdee+0x5ad)],_0x281b64['x']),_0x281b64['y']=_0x2c7eeb(_0x4c7c03[_0x1494ac+(0x2d3+0x25f*-0x8+0x1038)],_0x4c7c03[_0x1494ac+(0x1477+-0x566*0x3+-0x42f)],_0x281b64['y']),_0x281b64['z']=_0x2c7eeb(_0x4c7c03[_0x1494ac+(0xeff+-0x5*-0x794+-0xb*0x4cd)],_0x4c7c03[_0x1494ac+(-0xe7e+0x2377+0x42*-0x51)],_0x281b64['z'])),_0x295ac1&&(_0x25f622(_0x295ac1,_0x4f28df[_0x5ed560*_0x48aab9+(0x5*-0x485+-0x32+0x16d0)]),_0x295ac1['x']=_0x2c7eeb(_0x4c7c03[_0x1494ac+(0x119*-0xc+0x9fc*-0x2+0x213c)],_0x4c7c03[_0x1494ac+(0x324*0x2+0xca3+-0x12d2)],_0x295ac1['x']),_0x295ac1['y']=_0x2c7eeb(_0x4c7c03[_0x1494ac+(0x1059+0x18be*-0x1+0x57*0x19)],_0x4c7c03[_0x1494ac+(0xa59+-0x1765+0xd27)],_0x295ac1['y'])),_0x1f08d9&&_0x2a803e>-0x42f+-0x1857+0x1c86){const _0x539c9e=[_0x52ae51,_0x1403f5,_0x2c0127];for(let _0x55c501=0xf*0x146+0x77*-0x5+-0x5*0x35b;_0x55c501<0x1*0x2605+-0x1*0x1679+-0xf89;++_0x55c501)for(let _0x4a0850=-0x2072+0x785+0x18ed;_0x4a0850<0x14cf+0xd3d+0x1*-0x21fd;++_0x4a0850)_0x1f08d9[_0x55c501*(0x3ff+-0x2*0x60a+-0x4*-0x209)+_0x4a0850]=_0x4a0850<_0x14a1ce?_0x539c9e[_0x55c501][_0x5ed560*(-0x5b1*0x5+-0x11da+0x1*0x2e5f)+_0x4a0850]*((0x1db7+-0x44*-0x49+0x2e3*-0x11)/(-0xabe+0x6ad*-0x4+0x2f5*0xd))-(0x1e84+0x21+-0x1ea1*0x1):-0x1*-0x65c+0x2263+0x3*-0xd95;}};}}self['onmessage']=async _0x2269ea=>{const {data:_0x48aa67}=_0x2269ea;switch(_0x48aa67['type']){case'initWorker':break;case'decompress':_0x10d0c2(_0x48aa67['numSplats'],_0x48aa67['chunkData'],_0x48aa67['chunkSize'],_0x48aa67['vertexData'],_0x48aa67['shData0'],_0x48aa67['shData1'],_0x48aa67['shData2'],_0x48aa67['shBands']);break;}};const _0x10d0c2=(_0x3d677d,_0x4c6c4d,_0x1c3421,_0x2924b9,_0x49755a,_0x1965bd,_0x33b357,_0x5a9c09)=>{const _0x1db11d=['x','y','z','f_dc_0','f_dc_1','f_dc_2','opacity','scale_0','scale_1','scale_2','rot_0','rot_1','rot_2','rot_3','t','t_scale','motion_0','motion_1','motion_2'];if(_0x5a9c09>0xa1*0xd+0x4*-0x916+0x1c2b){const _0x362d36=[];for(let _0x466c06=0x26dd+0x1e83+-0x4560;_0x466c06<-0x14f5+-0x231+-0x355*-0x7;++_0x466c06)_0x362d36['push']('f_rest_'+_0x466c06);_0x1db11d['splice'](_0x1db11d['indexOf']('f_dc_0')+(0x79f+0x1857+-0x65*0x51),-0x1*-0x1c8e+0x1618+-0x32a6,..._0x362d36);}const _0x53870b={};_0x1db11d['forEach'](_0x3b9634=>{_0x53870b[_0x3b9634]=new Float32Array(_0x3d677d);});const _0x506251=new _0x42b7c(),_0x187b19=new _0x3d7e30(),_0x5d7fa1=new _0x42b7c(),_0x1d7ed1=new _0x23dd07(),_0x223807=new _0x42b7c(),_0x246bc0=new _0x42b7c(),_0x2258bb=_0x5a9c09>0x4*-0x703+-0xcd+0x1cd9?new Float32Array(0x11a8+0x66c+0x17e7*-0x1):null,_0x5ea708=new _0x54fd93(_0x4c6c4d,_0x1c3421,_0x2924b9,_0x49755a,_0x1965bd,_0x33b357,_0x5a9c09,_0x506251,_0x187b19,_0x5d7fa1,_0x1d7ed1,_0x223807,_0x246bc0,_0x2258bb);for(let _0xb7e1c=-0x9d*-0x11+-0x1fd7+0x156a;_0xb7e1c<_0x3d677d;++_0xb7e1c)if(_0x5ea708['read'](_0xb7e1c),_0x53870b['x'][_0xb7e1c]=_0x506251['x'],_0x53870b['y'][_0xb7e1c]=_0x506251['y'],_0x53870b['z'][_0xb7e1c]=_0x506251['z'],_0x53870b['rot_1'][_0xb7e1c]=_0x187b19['x'],_0x53870b['rot_2'][_0xb7e1c]=_0x187b19['y'],_0x53870b['rot_3'][_0xb7e1c]=_0x187b19['z'],_0x53870b['rot_0'][_0xb7e1c]=_0x187b19['w'],_0x53870b['scale_0'][_0xb7e1c]=_0x5d7fa1['x'],_0x53870b['scale_1'][_0xb7e1c]=_0x5d7fa1['y'],_0x53870b['scale_2'][_0xb7e1c]=_0x5d7fa1['z'],_0x53870b['motion_0'][_0xb7e1c]=_0x223807['x'],_0x53870b['motion_1'][_0xb7e1c]=_0x223807['y'],_0x53870b['motion_2'][_0xb7e1c]=_0x223807['z'],_0x53870b['t_scale'][_0xb7e1c]=_0x246bc0['x'],_0x53870b['t'][_0xb7e1c]=_0x246bc0['y'],_0x53870b['f_dc_0'][_0xb7e1c]=(_0x1d7ed1['x']-(-0x1b32*-0x1+-0x12cc+-0x866+0.5))/_0x338ee3,_0x53870b['f_dc_1'][_0xb7e1c]=(_0x1d7ed1['y']-(0x25*0x2f+0x24b3*-0x1+0x3bd*0x8+0.5))/_0x338ee3,_0x53870b['f_dc_2'][_0xb7e1c]=(_0x1d7ed1['z']-(-0x128b+-0x1105+0x2390+0.5))/_0x338ee3,_0x53870b['opacity'][_0xb7e1c]=_0x1d7ed1['w']<=0xd4*0x2+0x10d1+0x1*-0x1279?-(-0x1afd+-0x1179+0x2c9e):_0x1d7ed1['w']>=0x1*0x16ef+0x2*-0x42b+-0x74c*0x2?0x1a*0xa9+-0x102b+0x2b*-0x5:-Math['log']((0x2*-0x38a+-0x639*-0x1+-0x6e*-0x2)/_0x1d7ed1['w']-(-0x1394+-0x55e*0x1+0x18f3)),_0x2258bb){for(let _0x22142a=0x1*-0x144f+0x119*-0x19+-0x1*-0x2fc0;_0x22142a<0x5f9*0x3+0x26bc+-0x387a;++_0x22142a)_0x53870b['f_rest_'+_0x22142a][_0xb7e1c]=_0x2258bb[_0x22142a];}let _0x33d023={'x':_0x53870b['x'],'y':_0x53870b['y'],'z':_0x53870b['z'],'rot_1':_0x53870b['rot_1'],'rot_2':_0x53870b['rot_2'],'rot_3':_0x53870b['rot_3'],'rot_0':_0x53870b['rot_0'],'scale_0':_0x53870b['scale_0'],'scale_1':_0x53870b['scale_1'],'scale_2':_0x53870b['scale_2'],'motion_0':_0x53870b['motion_0'],'motion_1':_0x53870b['motion_1'],'motion_2':_0x53870b['motion_2'],'t_scale':_0x53870b['t_scale'],'t':_0x53870b['t'],'f_dc_0':_0x53870b['f_dc_0'],'f_dc_1':_0x53870b['f_dc_1'],'f_dc_2':_0x53870b['f_dc_2'],'opacity':_0x53870b['opacity']};_0x2258bb&&(_0x33d023={..._0x33d023,'f_rest_0':_0x53870b['f_rest_0'],'f_rest_1':_0x53870b['f_rest_1'],'f_rest_2':_0x53870b['f_rest_2'],'f_rest_3':_0x53870b['f_rest_3'],'f_rest_4':_0x53870b['f_rest_4'],'f_rest_5':_0x53870b['f_rest_5'],'f_rest_6':_0x53870b['f_rest_6'],'f_rest_7':_0x53870b['f_rest_7'],'f_rest_8':_0x53870b['f_rest_8'],'f_rest_9':_0x53870b['f_rest_9'],'f_rest_10':_0x53870b['f_rest_10'],'f_rest_11':_0x53870b['f_rest_11'],'f_rest_12':_0x53870b['f_rest_12'],'f_rest_13':_0x53870b['f_rest_13'],'f_rest_14':_0x53870b['f_rest_14'],'f_rest_15':_0x53870b['f_rest_15'],'f_rest_16':_0x53870b['f_rest_16'],'f_rest_17':_0x53870b['f_rest_17'],'f_rest_18':_0x53870b['f_rest_18'],'f_rest_19':_0x53870b['f_rest_19'],'f_rest_20':_0x53870b['f_rest_20'],'f_rest_21':_0x53870b['f_rest_21'],'f_rest_22':_0x53870b['f_rest_22'],'f_rest_23':_0x53870b['f_rest_23'],'f_rest_24':_0x53870b['f_rest_24'],'f_rest_25':_0x53870b['f_rest_25'],'f_rest_26':_0x53870b['f_rest_26'],'f_rest_27':_0x53870b['f_rest_27'],'f_rest_28':_0x53870b['f_rest_28'],'f_rest_29':_0x53870b['f_rest_29'],'f_rest_30':_0x53870b['f_rest_30'],'f_rest_31':_0x53870b['f_rest_31'],'f_rest_32':_0x53870b['f_rest_32'],'f_rest_33':_0x53870b['f_rest_33'],'f_rest_34':_0x53870b['f_rest_34'],'f_rest_35':_0x53870b['f_rest_35'],'f_rest_36':_0x53870b['f_rest_36'],'f_rest_37':_0x53870b['f_rest_37'],'f_rest_38':_0x53870b['f_rest_38'],'f_rest_39':_0x53870b['f_rest_39'],'f_rest_40':_0x53870b['f_rest_40'],'f_rest_41':_0x53870b['f_rest_41'],'f_rest_42':_0x53870b['f_rest_42'],'f_rest_43':_0x53870b['f_rest_43'],'f_rest_44':_0x53870b['f_rest_44']});const _0x430ac7=Object['values'](_0x33d023)['map'](_0x2a2115=>_0x2a2115['buffer']);self['postMessag'+'e']({'type':'decompress'+'ed','data':_0x33d023},_0x430ac7);};}class ik extends me{constructor(){super(),h(this,'worker'),this['_initWorke'+'r']();}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+sk['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'}))),this['worker']['onmessage']=_0x281a67=>{if(!this['worker'])return;const {data:_0x30c160}=_0x281a67;switch(_0x30c160['type']){case'decompress'+'ed':console['log']('decompress'+'ed'),this['fire']('decompress'+'ed',_0x30c160['data']);break;}};}['decompress'](_0x1aa464,_0x204de5,_0x106b34,_0x1fcf8,_0x26a114,_0x1922f1,_0x53d935,_0x28a57e){const _0x4747e6=[_0x204de5['buffer'],_0x1fcf8['buffer']];_0x26a114&&_0x4747e6['push'](_0x26a114['buffer']),_0x1922f1&&_0x4747e6['push'](_0x1922f1['buffer']),_0x53d935&&_0x4747e6['push'](_0x53d935['buffer']),this['worker']['postMessag'+'e']({'type':'decompress','numSplats':_0x1aa464,'chunkData':_0x204de5,'chunkSize':_0x106b34,'vertexData':_0x1fcf8,'shData0':_0x26a114,'shData1':_0x1922f1,'shData2':_0x53d935,'shBands':_0x28a57e},_0x4747e6);}['destroy'](){this['worker']&&(this['worker']['terminate'](),this['worker']=null);}}class rk{constructor(_0x167c9b,_0x1e5b3b,_0x21ec80,_0x49c429,_0x45428b,_0x5d6d62,_0xbe03a4,_0x4eb734){const _0x2e5bfd=(_0x11919b,_0x4235c0)=>{const _0x59a28a=(0x22*0x9d+0xaa4*-0x1+-0xa35<<_0x4235c0)-(0x192e+-0x19d4+-0xa7*-0x1);return(_0x11919b&_0x59a28a)/_0x59a28a;},_0x35659f=(_0x589723,_0x3b442f)=>{_0x589723['x']=_0x2e5bfd(_0x3b442f>>>-0x1c0*-0x1+-0x1*0x2692+0x24e7*0x1,0xe4+-0xb*-0x199+0x624*-0x3),_0x589723['y']=_0x2e5bfd(_0x3b442f>>>-0x2003+-0x127c*0x2+-0x1d1*-0x26,-0x599*-0x1+-0x6*0x1fb+0x653),_0x589723['z']=_0x2e5bfd(_0x3b442f,-0x3*-0x154+-0x2*-0x1e4+-0x7b9);},_0x3b9ea3=(_0x49ee69,_0x2cab1a)=>{_0x49ee69['x']=_0x2e5bfd(_0x2cab1a>>>-0x36d*-0x3+-0x2252+-0x1823*-0x1,0x43a*0x1+0x1e5f+-0x2291*0x1),_0x49ee69['y']=_0x2e5bfd(_0x2cab1a>>>0x2*0xf86+0x2434+-0x4330,0x11e0*-0x2+-0x1*-0x1c4c+0x77c),_0x49ee69['z']=_0x2e5bfd(_0x2cab1a>>>-0x3e7+0xada+0x17*-0x4d,0x1*-0xa4f+0xb88+-0x131),_0x49ee69['w']=_0x2e5bfd(_0x2cab1a,-0x1*-0x26c9+-0x76*-0x31+0x17f*-0x29);},_0x2393b9=(_0x1504e6,_0x240ebc)=>{const _0x5b7c99=(0x4*0x144+0x32*-0x9b+0x1*0x1937)/(Math['sqrt'](0x6*0x199+-0x85f*-0x3+-0x22b1*0x1)*(0x53a+-0x13ed*0x1+0xeb3+0.5)),_0xf800fc=(_0x2e5bfd(_0x240ebc>>>-0x1*0x1209+0x18f8+-0x6db,0xd5b+0x256f+-0x2*0x1960)-(0xe68*0x1+0x3a*0xa6+0x2*-0x1a02+0.5))*_0x5b7c99,_0x2939f8=(_0x2e5bfd(_0x240ebc>>>-0xc*-0x1fc+-0x1*0x1c03+0x43d*0x1,-0x4fb*-0x5+0x42f+0x152*-0x16)-(0x35*0x26+-0xd03*0x2+0x1228*0x1+0.5))*_0x5b7c99,_0x59fb2a=(_0x2e5bfd(_0x240ebc,-0x1e6d*-0x1+0x1*-0xdde+-0x1085)-(0x19*0xf9+0x795*0x1+-0x1fe6*0x1+0.5))*_0x5b7c99,_0xd91a5f=Math['sqrt'](-0x1f*0xb2+-0xc*-0x22+-0x13f7*-0x1-(_0xf800fc*_0xf800fc+_0x2939f8*_0x2939f8+_0x59fb2a*_0x59fb2a));switch(_0x240ebc>>>0x2e0+0x1369+-0x162b){case 0x2669+0x12f6+0x13*-0x305:_0x1504e6['set'](_0xf800fc,_0x2939f8,_0x59fb2a,_0xd91a5f);break;case-0xb*0x7+-0x2605+0x1*0x2653:_0x1504e6['set'](_0xd91a5f,_0x2939f8,_0x59fb2a,_0xf800fc);break;case-0xf6*0x3+0xf40+-0xc5c:_0x1504e6['set'](_0x2939f8,_0xd91a5f,_0x59fb2a,_0xf800fc);break;case 0x1*-0x5e2+0x20c5+-0x4*0x6b8:_0x1504e6['set'](_0x2939f8,_0x59fb2a,_0xd91a5f,_0xf800fc);break;}},_0x10703f=(_0x17d26d,_0x288a23,_0x3e547b)=>_0x17d26d*(-0x1652+0x1280+-0x59*-0xb-_0x3e547b)+_0x288a23*_0x3e547b,{chunkData:_0x56ae72,chunkSize:_0x137a41,vertexData:_0x1dcf8d,shData0:_0x5ac780,shData1:_0x8f136a,shData2:_0x5483f3,shBands:_0x3a8be2}=_0x167c9b,_0x380424=[-0xcbb+0x13da+-0x41*0x1c,-0x24b3+-0x1f69+0x1*0x4424,-0x88*0xe+0xe55+-0x6d6][_0x3a8be2-(-0x765+-0x2053+-0x27b9*-0x1)],_0x361c3f=-0x51a*0x2+-0x206a+0x2aa4;this['read']=_0x598734=>{const _0x5383fe=Math['floor'](_0x598734/(0xfb6+-0x13e0+-0x2*-0x295))*_0x137a41;if(_0x1e5b3b&&(_0x35659f(_0x1e5b3b,_0x1dcf8d[_0x598734*_0x361c3f+(-0xc1e+-0x1d88+-0x2*-0x14d3)]),_0x1e5b3b['x']=_0x10703f(_0x56ae72[_0x5383fe+(0x846+-0x3*0x598+0x882)],_0x56ae72[_0x5383fe+(0x482*-0x6+0x259b*-0x1+-0x40aa*-0x1)],_0x1e5b3b['x']),_0x1e5b3b['y']=_0x10703f(_0x56ae72[_0x5383fe+(-0x1*-0x9fe+0x8da+-0x7*0x2b1)],_0x56ae72[_0x5383fe+(-0x14e*0x7+-0x1*-0x149f+-0x59*0x21)],_0x1e5b3b['y']),_0x1e5b3b['z']=_0x10703f(_0x56ae72[_0x5383fe+(-0x1b1a+-0x26e0+0x19c*0x29)],_0x56ae72[_0x5383fe+(-0x1*-0x1ff5+-0x435*0x1+-0x1bbb)],_0x1e5b3b['z'])),_0x21ec80&&_0x2393b9(_0x21ec80,_0x1dcf8d[_0x598734*_0x361c3f+(0x695*0x1+-0x76b+0xd7)]),_0x49c429&&(_0x35659f(_0x49c429,_0x1dcf8d[_0x598734*_0x361c3f+(-0x4*0x517+0x14c*-0x8+-0x313*-0xa)]),_0x49c429['x']=_0x10703f(_0x56ae72[_0x5383fe+(0x2*0xd5a+-0x12cf+-0x7df)],_0x56ae72[_0x5383fe+(0x26b+0x1554+-0x17b6)],_0x49c429['x']),_0x49c429['y']=_0x10703f(_0x56ae72[_0x5383fe+(-0x61f*0x6+0x3*0x987+0x1*0x82c)],_0x56ae72[_0x5383fe+(0x1*-0x1aeb+-0xe46+0x293b)],_0x49c429['y']),_0x49c429['z']=_0x10703f(_0x56ae72[_0x5383fe+(-0x3*-0x3c5+-0xf1*0x17+0xa60)],_0x56ae72[_0x5383fe+(0x1fb9*-0x1+-0x24c*-0x8+0x1*0xd64)],_0x49c429['z'])),_0x45428b&&(_0x3b9ea3(_0x45428b,_0x1dcf8d[_0x598734*_0x361c3f+(-0xb*-0x119+-0x2417+0x1807)]),_0x137a41>-0x39a*-0x2+-0x1179+0xa51&&(_0x45428b['x']=_0x10703f(_0x56ae72[_0x5383fe+(-0x30e+0x1125+-0x5*0x2cf)],_0x56ae72[_0x5383fe+(0xdfb+-0x1*0x1fa1+0x11b5)],_0x45428b['x']),_0x45428b['y']=_0x10703f(_0x56ae72[_0x5383fe+(0x4*0x7f4+-0x6a3*-0x5+0x33*-0x146)],_0x56ae72[_0x5383fe+(0x2ea*0x6+-0x2b3*0x1+-0xeb9)],_0x45428b['y']),_0x45428b['z']=_0x10703f(_0x56ae72[_0x5383fe+(-0xcf*0x10+-0x1375+-0x39b*-0x9)],_0x56ae72[_0x5383fe+(-0xf51*-0x1+0x17*0x10d+0x1*-0x276b)],_0x45428b['z']))),_0x5d6d62&&(_0x35659f(_0x5d6d62,_0x1dcf8d[_0x598734*_0x361c3f+(-0x2128+0x9a4+0x6*0x3ec)]),_0x5d6d62['x']=_0x10703f(_0x56ae72[_0x5383fe+(0x20*0x75+-0x59d*0x5+0xd83)],_0x56ae72[_0x5383fe+(-0x1a4d*-0x1+-0x1b*-0xbf+-0x2e5d)],_0x5d6d62['x']),_0x5d6d62['y']=_0x10703f(_0x56ae72[_0x5383fe+(-0xdf4+0x1d56+-0xf4f)],_0x56ae72[_0x5383fe+(-0xd99+0x14b*-0x7+0x4*0x5af)],_0x5d6d62['y']),_0x5d6d62['z']=_0x10703f(_0x56ae72[_0x5383fe+(-0x7fd+0x9*-0x21f+0x1b28)],_0x56ae72[_0x5383fe+(0x1354+0x43*-0x2+0x1*-0x12b7)],_0x5d6d62['z'])),_0xbe03a4&&(_0x35659f(_0xbe03a4,_0x1dcf8d[_0x598734*_0x361c3f+(0x18d0+-0x35*0x5d+-0x2*0x2c5)]),_0xbe03a4['x']=_0x10703f(_0x56ae72[_0x5383fe+(-0x137d+-0x1*-0x20cf+-0xd3a)],_0x56ae72[_0x5383fe+(-0x1105+-0x1085+-0x6d*-0x4f)],_0xbe03a4['x']),_0xbe03a4['y']=_0x10703f(_0x56ae72[_0x5383fe+(-0x3f*-0x13+0x2*-0x194+-0x3*0x79)],_0x56ae72[_0x5383fe+(-0x604+-0x28c*0x5+-0x3*-0x649)],_0xbe03a4['y'])),_0x4eb734&&_0x3a8be2>-0x9*0xee+-0xd68+0x3*0x742){const _0x4b147a=[_0x5ac780,_0x8f136a,_0x5483f3];for(let _0x1d9d6f=0x1ebd+0x2*-0xcf2+0x49*-0x11;_0x1d9d6f<-0x992+-0x1ab7+0x244c;++_0x1d9d6f)for(let _0x5d6c45=0x18f1+0x1*0x1282+0x31*-0xe3;_0x5d6c45<-0x1320+-0x71b+0x1a4a;++_0x5d6c45)_0x4eb734[_0x1d9d6f*(0x2*0x3d6+0x5f6+0x5*-0x2b7)+_0x5d6c45]=_0x5d6c45<_0x380424?_0x4b147a[_0x1d9d6f][_0x598734*(0x12*-0xa+0x23d6+0x43*-0x86)+_0x5d6c45]*((-0x1e21+0x1a19*0x1+0x410)/(-0x1*0x11f7+-0x1*0x1291+0x2587))-(-0x1*0x21fb+-0xe26+0x3025):-0x9*-0x295+-0x2cb+-0x2*0xa39;}};}}class ak{constructor(){h(this,'numSplats'),h(this,'comments'),h(this,'chunkData'),h(this,'vertexData'),h(this,'is4D'),h(this,'shData0'),h(this,'shData1'),h(this,'shData2'),h(this,'shBands');}['createIter'](_0x2ebf6c,_0x147704,_0x215c91,_0x1b2ee3,_0x256ea6,_0x5bf9cc,_0x2e5692){return new rk(this,_0x2ebf6c,_0x147704,_0x215c91,_0x1b2ee3,_0x256ea6,_0x5bf9cc,_0x2e5692);}['calcAabb'](_0x22bfaa){const {chunkData:_0x13fd18,numChunks:_0x9f33d9,chunkSize:_0x5abdf9}=this;let _0x682cfb=Math['exp'](Math['max'](_0x13fd18[0x1be6+0x170*-0x2+-0x18fd],_0x13fd18[0xe6b+-0x5*-0x24b+-0x19d8],_0x13fd18[0x226*0xc+0x913*0x3+0x34f6*-0x1])),_0x78bd27=_0x13fd18[-0x3c0+-0xb*-0x28f+-0x1*0x1865]-_0x682cfb,_0x130050=_0x13fd18[-0x21d*-0xb+0xa6d*-0x1+0xcd1*-0x1]-_0x682cfb,_0x72f750=_0x13fd18[0xb5*0x10+-0xbe*0x8+-0x2af*0x2]-_0x682cfb,_0x9e3a0b=_0x13fd18[0x1*-0x248b+-0x1b92+0x10*0x402]+_0x682cfb,_0x4a0324=_0x13fd18[-0x15eb*-0x1+-0x18f3+0x30c]+_0x682cfb,_0x374811=_0x13fd18[0x4e3*0x4+-0x319*0x8+0x541]+_0x682cfb;for(let _0xfc6675=-0xb5*0x29+0x12bf+-0x3d*-0x2b;_0xfc6675<_0x9f33d9;++_0xfc6675){const _0x4c978e=_0xfc6675*_0x5abdf9;_0x682cfb=Math['exp'](Math['max'](_0x13fd18[_0x4c978e+(-0x2045+0x146b*-0x1+0x34b9)],_0x13fd18[_0x4c978e+(-0x99*-0x11+-0x211d+0x147*0x12)],_0x13fd18[_0x4c978e+(-0x268+0x190f+-0x169c)])),_0x78bd27=Math['min'](_0x78bd27,_0x13fd18[_0x4c978e+(-0x1359+-0x977*-0x3+-0x90c)]-_0x682cfb),_0x130050=Math['min'](_0x130050,_0x13fd18[_0x4c978e+(-0x33*0x9+0x1c2e*-0x1+0x1dfa)]-_0x682cfb),_0x72f750=Math['min'](_0x72f750,_0x13fd18[_0x4c978e+(-0x625+-0x1*-0x900+-0x2d9)]-_0x682cfb),_0x9e3a0b=Math['max'](_0x9e3a0b,_0x13fd18[_0x4c978e+(-0x21a7+-0x1*0x1145+-0x32ef*-0x1)]+_0x682cfb),_0x4a0324=Math['max'](_0x4a0324,_0x13fd18[_0x4c978e+(-0x1b41*0x1+0x361+0x17e4)]+_0x682cfb),_0x374811=Math['max'](_0x374811,_0x13fd18[_0x4c978e+(-0x1c7e+-0xbbe+0x2841)]+_0x682cfb);}return _0x22bfaa['center']['set']((_0x78bd27+_0x9e3a0b)*(0x4b1+-0x1951*0x1+0x14a0+0.5),(_0x130050+_0x4a0324)*(0x1229+-0x9*0x457+0x14e6+0.5),(_0x72f750+_0x374811)*(-0x7*-0x38+0x7c4+-0x94c+0.5)),_0x22bfaa['halfExtent'+'s']['set']((_0x9e3a0b-_0x78bd27)*(-0x182d+0x1a03+0x5*-0x5e+0.5),(_0x4a0324-_0x130050)*(0xd5*-0x10+0x3ff+-0x1dd*-0x5+0.5),(_0x374811-_0x72f750)*(0x203b*0x1+-0x24a1*-0x1+-0x44dc+0.5)),!(-0x2*-0x209+-0x12d6+0xec4);}['getCenters'](_0x2532a1){const {vertexData:_0x54cbdd,chunkData:_0x31af7b,numChunks:_0x447dc9,chunkSize:_0x337fa9}=this;let _0x4d956b,_0x341bcc,_0x2d8fe8,_0x415e9e,_0xc99464,_0x4d939e;for(let _0x549bd2=0x243+0x734+-0x977;_0x549bd2<_0x447dc9;++_0x549bd2){const _0x364113=_0x549bd2*_0x337fa9;_0x4d956b=_0x31af7b[_0x364113+(0x1f96+0x72*-0x3c+0x1*-0x4de)],_0x341bcc=_0x31af7b[_0x364113+(0x1*0xa6e+-0x264b*0x1+0x1bde)],_0x2d8fe8=_0x31af7b[_0x364113+(0x19ae+-0x1*0x20cc+0x720)],_0x415e9e=_0x31af7b[_0x364113+(0x1703+0x2521+-0x140b*0x3)],_0xc99464=_0x31af7b[_0x364113+(0x3*0xa94+0xc01*0x2+-0x37ba)],_0x4d939e=_0x31af7b[_0x364113+(-0x23c4+-0x18*0x111+0x3d61)];const _0x58fa02=Math['min'](this['numSplats'],(_0x549bd2+(-0x1*-0x1beb+-0x15f+-0x1a8b))*(0xec9+-0x42b*0x1+-0x99e));for(let _0xfe0445=_0x549bd2*(-0x151+0x9e*0x26+-0x1523);_0xfe0445<_0x58fa02;++_0xfe0445){const _0x364751=_0x54cbdd[_0xfe0445*(0xd85*-0x2+-0x19df+0x34ed)],_0x5eb75b=(_0x364751>>>0x1db*-0xa+-0x2ba*0x5+0x2045)/(-0x6b*-0x1+0x30*0x4f+0x2*-0x39e),_0x5753fc=(_0x364751>>>0x1*-0x1239+-0x2c2*-0xd+-0x1196&-0x47*0x19+-0x1a30+0x251e)/(-0xe2f*-0x1+0xd9+-0xb09),_0x4f2ca6=(_0x364751&-0xfb*0x25+-0x8a9*0x4+0x4eea)/(-0x181b+0x4*-0x4ff+0x3416);_0x2532a1[_0xfe0445*(0x3d7+-0x224f+0x1e7b)+(0x2103+-0x26a4*0x1+-0x83*-0xb)]=(0xb9b*-0x1+-0x2b*-0xdb+-0x192d-_0x5eb75b)*_0x4d956b+_0x5eb75b*_0x415e9e,_0x2532a1[_0xfe0445*(-0x2d9+-0x68*-0x4c+-0x1c04)+(-0xc8+0x1b3d+0x69d*-0x4)]=(0x5f+0xe25+0x1*-0xe83-_0x5753fc)*_0x341bcc+_0x5753fc*_0xc99464,_0x2532a1[_0xfe0445*(-0x101*0x15+0xc60+0x8b8)+(-0xeca+-0x117e*0x1+0x1*0x204a)]=(0x71*-0xf+-0x547*0x7+0x1*0x2b91-_0x4f2ca6)*_0x2d8fe8+_0x4f2ca6*_0x4d939e;}}}['getChunks'](_0x4b4df4){const {chunkData:_0x3d199d,numChunks:_0x1d0572,chunkSize:_0x141add}=this;let _0x1156bd,_0x6881b1,_0x3fcddb,_0x5e994f,_0x4e0da0,_0x44389a;for(let _0x757310=0x26*0x76+-0x1fe*0xb+-0x2*-0x233;_0x757310<_0x1d0572;++_0x757310){const _0x2bbc70=_0x757310*_0x141add;_0x1156bd=_0x3d199d[_0x2bbc70+(-0x3e7*-0x3+0xef*0x19+-0x230c)],_0x6881b1=_0x3d199d[_0x2bbc70+(-0xac*-0x22+0x1b15+-0x8e*0x5a)],_0x3fcddb=_0x3d199d[_0x2bbc70+(-0x1*-0x19ab+0xb3e+-0x24e7)],_0x5e994f=_0x3d199d[_0x2bbc70+(-0xe97*0x1+0x2*-0xd36+0x76*0x59)],_0x4e0da0=_0x3d199d[_0x2bbc70+(0x1*-0x1345+-0x1a78+-0xdd*-0x35)],_0x44389a=_0x3d199d[_0x2bbc70+(-0xa49*-0x3+-0xdaa+-0x112c)],_0x4b4df4[_0x757310*(0x1*0x1055+0x1*0x30a+-0x1359)+(0x178e+-0xe*0x138+-0x22a*0x3)]=_0x1156bd,_0x4b4df4[_0x757310*(-0x1*0x10ef+0x6f9+0x1*0x9fc)+(-0x1c*0x5+0x2011+-0x1f84)]=_0x6881b1,_0x4b4df4[_0x757310*(-0x1d2*-0x7+0x1*0x26a1+-0x3359)+(-0x124f+-0x6*-0x183+-0x107*-0x9)]=_0x3fcddb,_0x4b4df4[_0x757310*(0xd*-0x90+0x1c5c+0x9*-0x256)+(-0x173c+0x332*-0x3+-0x691*-0x5)]=_0x5e994f,_0x4b4df4[_0x757310*(0x12ec+0x88d+-0x1b73)+(0x29*-0x43+0x1266+0x1*-0x7a7)]=_0x4e0da0,_0x4b4df4[_0x757310*(0xc2*0x4+0x2677+0x2979*-0x1)+(-0xdd+-0x1*-0x18f4+0x806*-0x3)]=_0x44389a;}}['calcFocalP'+'oint'](_0x3931e3){const {chunkData:_0x263972,numChunks:_0x1c4385,chunkSize:_0x387014}=this;_0x3931e3['x']=-0xb*0x33b+-0x2*0x295+0x28b3*0x1,_0x3931e3['y']=-0xc37*0x1+0x2e3+0x954,_0x3931e3['z']=-0x1*-0x989+-0x132+-0x5*0x1ab;for(let _0x14db40=0x1571*-0x1+0xa8+-0x14c9*-0x1;_0x14db40<_0x1c4385;++_0x14db40){const _0x8033ec=_0x14db40*_0x387014;_0x3931e3['x']+=_0x263972[_0x8033ec+(0x17*0x12a+-0x10b0*-0x1+-0x2b76*0x1)]+_0x263972[_0x8033ec+(-0x1*0x2471+-0x3aa*0x3+0x2f72)],_0x3931e3['y']+=_0x263972[_0x8033ec+(-0x258+0x1441+0x23d*-0x8)]+_0x263972[_0x8033ec+(-0x1e2*0x1+0x2dc*0x1+0x29*-0x6)],_0x3931e3['z']+=_0x263972[_0x8033ec+(0x33b*0x5+-0xac*0x17+-0xb1)]+_0x263972[_0x8033ec+(-0xd*-0xb3+-0x1914+0x1002)];}_0x3931e3['mulScalar']((-0x1881+0x1ec9*0x1+-0x648+0.5)/_0x1c4385);}get['isCompress'+'ed'](){return!(0x1b64+-0x25*0x61+0x1e9*-0x7);}get['numChunks'](){return Math['ceil'](this['numSplats']/(0x699+0x1c37+-0x2*0x10e8));}get['chunkSize'](){return this['chunkData']['length']/this['numChunks'];}async['decompress'](){const _0xbbbde6=['x','y','z','f_dc_0','f_dc_1','f_dc_2','opacity','scale_0','scale_1','scale_2','rot_0','rot_1','rot_2','rot_3','t','t_scale','motion_0','motion_1','motion_2'],{shBands:_0x4791c3}=this;if(_0x4791c3>-0xef*0x17+0x1cb7+-0x73e){const _0xdb163f=[];for(let _0x13d940=0x160+0x1568+-0x9*0x288;_0x13d940<0x1665+0x17*-0x18d+0xd73;++_0x13d940)_0xdb163f['push']('f_rest_'+_0x13d940);_0xbbbde6['splice'](_0xbbbde6['indexOf']('f_dc_0')+(0x2*0x757+0x13dd+0x2*-0x1145),-0xaf9*-0x2+-0x487*-0x1+-0x1a79,..._0xdb163f);}const _0xc734a0=new ik();return _0xc734a0['decompress'](this['numSplats'],this['chunkData'],this['chunkSize'],this['vertexData'],this['shData0'],this['shData1'],this['shData2'],this['shBands']),new Promise((_0x7aeda2,_0x1586a3)=>{_0xc734a0['on']('decompress'+'ed',_0xc00c67=>{_0xc734a0['destroy'](),_0x7aeda2(new qn([{'name':'vertex','count':this['numSplats'],'properties':_0xbbbde6['map'](_0x6f7a74=>({'type':'float','name':_0x6f7a74,'storage':_0xc00c67[_0x6f7a74],'byteSize':0x4}))}],this['comments']));});});}}async function nk(){const _0x5e97ce='super4d-ca'+'che-v1',_0x4f55b6={'maxAge':0x9a7ec800,'maxSize':0x280000000},_0x6fa69b=new Uint8Array([0x1215*0x1+0x487*-0x5+-0x27f*-0x2,-0x18ca+-0x170b+0x3041,-0x1b23*-0x1+-0xc*-0x9e+-0x4de*0x7,-0x1317+0x5*-0x1c9+0x7e*0x39]),_0x3c5dbb=new Uint8Array([0x19e4+0x2166+-0x30*0x13c,-0x185e+-0x124+-0x15d*-0x13,0xc6d*0x3+-0xbf*0x1+0x120d*-0x2,0x20*0x44+0x173b*-0x1+-0x1*-0xf1f,0xb8b+0x1*-0x13d9+0x8ad,0xa3*-0x9+-0x353+0x976,0xb59+0x2*0x10f1+-0x2cd6*0x1,0x5*0x4d6+-0x163+-0x12e*0x13,-0x400*0x1+-0x1025+0x1*0x1489,0x70b*0x3+-0x4a2+0x80d*-0x2,0x227+0x75*0x1+-0x22a,-0xf36+-0xfc2+0x1f02]),_0x7545da=-0x12fe+0xd*-0xd3+0x1db5+0.28209479177387814,_0x57fffb=new Map([['char',Int8Array],['uchar',Uint8Array],['short',Int16Array],['ushort',Uint16Array],['int',Int32Array],['uint',Uint32Array],['float',Float32Array],['double',Float64Array]]);class _0xd46f70{constructor(_0x58a004={}){this['options']={..._0x4f55b6,..._0x58a004},this['cache']=null,this['lruList']=[],this['cacheSizes']=new Map(),this['currentSiz'+'e']=0xff*-0x5+0x2156+-0x1c5b,this['initialize'+'d']=!(-0x205f+-0x188d+0x13*0x2ff);}async['init'](){if(!this['initialize'+'d']){try{this['cache']=await caches['open'](_0x5e97ce);const _0x289f90=await this['cache']['keys'](),_0x230110=[];for(const _0x31a5f9 of _0x289f90){const _0xe23862=_0x31a5f9['url'],_0x3cea32=await this['cache']['match'](_0xe23862);if(_0x3cea32){const _0x1c5f70=(await _0x3cea32['blob']())['size'],_0xddf755=_0x3cea32['headers']['get']('x-cache-ti'+'me');_0xddf755&&_0x230110['push']({'url':_0xe23862,'size':_0x1c5f70,'cacheTime':parseInt(_0xddf755)});}}_0x230110['sort']((_0x76804d,_0x50477f)=>_0x76804d['cacheTime']-_0x50477f['cacheTime']);for(const _0x45ec74 of _0x230110)this['cacheSizes']['set'](_0x45ec74['url'],_0x45ec74['size']),this['currentSiz'+'e']+=_0x45ec74['size'],this['lruList']['push'](_0x45ec74['url']);}catch(_0x475770){console['error']('Failed\x20to\x20'+'initialize'+'\x20cache:',_0x475770);}this['initialize'+'d']=!(0x17f9+-0x5*0x4b1+-0x84);}}async['get'](_0x536eb5){if(await this['init'](),!this['cache'])return null;try{const _0x2579d5=await this['cache']['match'](_0x536eb5);if(!_0x2579d5)return null;const _0x10869a=_0x2579d5['headers']['get']('x-cache-ti'+'me');return _0x10869a&&Date['now']()-parseInt(_0x10869a)>this['options']['maxAge']?(await this['delete'](_0x536eb5),null):(this['updateLRU'](_0x536eb5),_0x2579d5);}catch{return null;}}async['set'](_0x55453b,_0x2fdcb8){if(!(!this['cache']||_0x55453b['startsWith']('blob:')))try{const _0x314524=_0x2fdcb8['clone'](),_0x48c403=await _0x314524['blob'](),_0x364f98=_0x48c403['size'];this['currentSiz'+'e']+_0x364f98>this['options']['maxSize']&&await this['cleanupSpa'+'ce'](_0x364f98);const _0x116cab=new Headers(_0x314524['headers']);_0x116cab['set']('x-cache-ti'+'me',Date['now']()['toString']());const _0x2c822a=new Response(_0x48c403,{'status':_0x314524['status'],'statusText':_0x314524['statusText'],'headers':_0x116cab});await this['cache']['put'](_0x55453b,_0x2c822a),this['cacheSizes']['set'](_0x55453b,_0x364f98),this['currentSiz'+'e']+=_0x364f98,this['updateLRU'](_0x55453b);}catch(_0x177950){console['error']('Cache\x20set\x20'+'error:',_0x177950);}}['updateLRU'](_0x1f4ebd){const _0x4034d9=this['lruList']['indexOf'](_0x1f4ebd);_0x4034d9>-(-0x1989+-0x1380+0x2d0a)&&this['lruList']['splice'](_0x4034d9,0x62*0x27+-0x5fa+-0x4f*0x1d),this['lruList']['push'](_0x1f4ebd);}async['cleanupSpa'+'ce'](_0x3d4bd8){const _0x114f9b=this['options']['maxSize']*(0x21ef+-0x2173+0x1f*-0x4+0.9);if(!(this['currentSiz'+'e']<=_0x114f9b))for(;this['lruList']['length']>0x1*0xd43+-0x4*-0x31c+-0x99*0x2b&&this['currentSiz'+'e']>_0x114f9b;){const _0x20bd73=this['lruList']['shift']();_0x20bd73&&await this['delete'](_0x20bd73);}}async['delete'](_0x54b5e9){if(this['cache'])try{await this['cache']['delete'](_0x54b5e9);const _0x109716=this['cacheSizes']['get'](_0x54b5e9)||-0x1*-0x25cd+0x1589+0x3e*-0xf5;this['currentSiz'+'e']-=_0x109716,this['cacheSizes']['delete'](_0x54b5e9);const _0x1a932f=this['lruList']['indexOf'](_0x54b5e9);_0x1a932f>-(-0x17a1+-0x1*-0x5+0x179d)&&this['lruList']['splice'](_0x1a932f,0x1*0x484+-0x2263+-0x8*-0x3bc);}catch(_0x43cf3a){console['error']('Cache\x20dele'+'te\x20error:',_0x43cf3a);}}async['clear'](){if(this['cache'])try{await this['cache']['keys']()['then'](_0x5f1140=>Promise['all'](_0x5f1140['map'](_0x5829a9=>{var _0x298432;return(_0x298432=this['cache'])==null?void(-0x21de+-0x14b2+0x3690):_0x298432['delete'](_0x5829a9);}))),this['lruList']=[],this['cacheSizes']['clear'](),this['currentSiz'+'e']=-0x2167*0x1+-0x9e*0x4+0x23df;}catch(_0x36cd60){console['error']('Cache\x20clea'+'r\x20error:',_0x36cd60);}}['destroy'](){this['cache']=null,this['lruList']=[],this['cacheSizes']['clear'](),this['currentSiz'+'e']=-0x1928+0x1789*0x1+0x5*0x53;}}class _0xd9083d{constructor(_0x8fdeb4=[],_0x410da5={}){this['cacheManag'+'er']=new _0xd46f70(_0x410da5['cache']),this['retryCount']=_0x410da5['retryCount']||-0x12ff+0x2075+-0xd73,this['retryDelay']=_0x410da5['retryDelay']||-0x35*-0xbc+-0xa7*0x1d+-0x1*0x120d,this['maxConcurr'+'ency']=_0x410da5['maxConcurr'+'ency']||-0x1551+0x397*-0x5+0x2746,this['downloadQu'+'eue']=_0x8fdeb4,this['isProcessi'+'ngDownload'+'Queue']=!(0x1*0x142e+0x97d*0x3+-0x30a4),this['pendingRes'+'ponses']=new Map(),this['processDow'+'nloadQueue']();}async['processDow'+'nloadQueue'](){if(!this['isProcessi'+'ngDownload'+'Queue']){for(this['isProcessi'+'ngDownload'+'Queue']=!(0x18d0+0x1dc3*0x1+0x1231*-0x3);this['downloadQu'+'eue']['length']>0xca0*0x1+0x1315*-0x1+0x675;)try{const _0xc57ae1=this['downloadQu'+'eue']['splice'](0x1778+0xcf3+0x246b*-0x1,this['maxConcurr'+'ency'])['map'](_0x57231d=>{if(!this['pendingRes'+'ponses']['has'](_0x57231d)){const _0x48c404=this['download'](_0x57231d);return this['pendingRes'+'ponses']['set'](_0x57231d,_0x48c404),_0x48c404['then'](()=>{this['pendingRes'+'ponses']['delete'](_0x57231d);});}return Promise['resolve']();});await Promise['all'](_0xc57ae1);}catch(_0x3088f2){console['error']('Download\x20e'+'rror:',_0x3088f2);}finally{this['isProcessi'+'ngDownload'+'Queue']=!(0x1a7b+-0x1801+0x1*-0x279);}}}async['fetch'](_0x4079e9,_0x54f933={}){if(this['pendingRes'+'ponses']['has'](_0x4079e9))return this['pendingRes'+'ponses']['get'](_0x4079e9);const {forceRefresh:_0x20e4ab=!(0x1*-0x3f1+-0x1622+0x1a14),..._0x5d472d}=_0x54f933;this['pendingRes'+'ponses']['set'](_0x4079e9,this['download'](_0x4079e9,_0x5d472d));const _0x5c25ad=await this['pendingRes'+'ponses']['get'](_0x4079e9);return this['pendingRes'+'ponses']['delete'](_0x4079e9),_0x5c25ad;}async['download'](_0x50f00b,_0x1554ea={}){var _0x5c1dbd;await((_0x5c1dbd=this['cacheManag'+'er'])==null?void(0x1774+0x315*0x3+-0xb*0x2f9):_0x5c1dbd['init']());const {forceRefresh:_0x12e65d=!(0x1*-0x895+-0x1f89+-0x1*-0x281f),..._0x4a76de}=_0x1554ea;_0x12e65d&&await this['cacheManag'+'er']['delete'](_0x50f00b);const _0x19eddd=await this['cacheManag'+'er']['get'](_0x50f00b);if(_0x19eddd)return _0x19eddd;let _0x351069;for(let _0x593249=0x1*-0x2221+0xccd+-0x15*-0x104;_0x593249<this['retryCount'];_0x593249++)try{const _0x5a7555=await fetch(_0x50f00b,_0x4a76de);if(!_0x5a7555['ok'])throw new Error('HTTP\x20error'+'!\x20status:\x20'+_0x5a7555['status']);return await this['cacheManag'+'er']['set'](_0x50f00b,_0x5a7555),_0x5a7555;}catch(_0x3cd95d){console['error']('Download\x20e'+'rror:',_0x3cd95d),_0x351069=_0x3cd95d,_0x593249<this['retryCount']-(-0x9*0x123+-0x133*-0xd+-0x3*0x1c9)&&await new Promise(_0x398a53=>setTimeout(_0x398a53,this['retryDelay']*(_0x593249+(0x1f01+-0x225*0x4+-0x166c))));}throw _0x351069;}async['clearCache'](){await this['cacheManag'+'er']['clear']();}['destroy'](){this['cacheManag'+'er']['destroy'](),this['cacheManag'+'er']=null,this['downloadQu'+'eue']=[],this['isProcessi'+'ngDownload'+'Queue']=!(0x679+0x382*-0x1+-0x1*0x2f6),this['pendingRes'+'ponses']=new Map(),this['pendingRes'+'ponses']['clear']();}}class _0x40bc50{constructor(){this['numSplats']=-0x992*-0x1+0x20da+-0x2a6c,this['comments']=[],this['chunkData']=new Float32Array(0x171b+-0x27d*0x3+0x9a*-0x1a),this['vertexData']=new Uint32Array(-0x2*-0x1265+-0x4*0x315+-0xca*0x1f),this['is4D']=!(0xb19+0x11ab*-0x2+0x183d),this['shBands']=0xcbc*-0x1+0x1312+0x2*-0x32b,this['shData0']=new Uint8Array(0x14a4+-0x981+-0x1*0xb23),this['shData1']=new Uint8Array(0x3*0x94f+0x1283+0x10*-0x2e7),this['shData2']=new Uint8Array(-0xf49+-0x16*0x1b1+0x347f),this['elements']=[],this['isCompress'+'ed']=!(0x24d2+-0x5*0x57d+-0x961);}get['numChunks'](){return Math['ceil'](this['numSplats']/(-0x59f+-0x1095+0xdc*0x1b));}get['chunkSize'](){return this['chunkData']['length']/this['numChunks'];}}class _0x17f97f{constructor(_0x21da14,_0x3bdf23=[]){this['elements']=_0x21da14,this['comments']=_0x3bdf23,this['isCompress'+'ed']=!(0x2*0xb6b+-0x2356+0xc81);}}class _0x43d80f{constructor(_0x302098,_0x417f11){this['reader']=_0x302098,this['progressFu'+'nc']=_0x417f11,this['head']=-0x5*-0x4c3+-0x2b6*0x2+-0x1263,this['tail']=-0x1479+0x169*-0x13+0x2f44;}async['read'](){var _0x286350;const {value:_0x3c5fe8,done:_0x414890}=await this['reader']['read']();if(_0x414890)throw new Error('Stream\x20fin'+'ished\x20befo'+'re\x20end\x20of\x20'+'header');this['push'](_0x3c5fe8),(_0x286350=this['progressFu'+'nc'])==null||_0x286350['call'](this,_0x3c5fe8['byteLength']);}['push'](_0x5f460c){if(!this['data'])this['data']=_0x5f460c,this['view']=new DataView(this['data']['buffer']),this['tail']=_0x5f460c['length'];else{const _0x5c6feb=this['tail']-this['head'],_0x1af671=_0x5c6feb+_0x5f460c['length'];if(this['data']['length']>=_0x1af671)this['head']>0x2*0x137f+-0xaf*-0x1+-0x5ab*0x7?(this['data']['copyWithin'](0x867+-0x1da*0xc+0xdd1,this['head'],this['tail']),this['data']['set'](_0x5f460c,_0x5c6feb),this['head']=0x10ee+0x6ea*0x1+-0x17d8,this['tail']=_0x1af671):(this['data']['set'](_0x5f460c,this['tail']),this['tail']+=_0x5f460c['length']);else{const _0x580da3=new Uint8Array(_0x1af671);this['head']>-0x5f9*0x5+-0x6*0x525+0x3cbb||this['tail']<this['data']['length']?_0x580da3['set'](this['data']['subarray'](this['head'],this['tail']),0x732*-0x5+-0x19e1+0x5*0xc5f):_0x580da3['set'](this['data'],-0x56f+0xef3*0x1+-0x1*0x984),_0x580da3['set'](_0x5f460c,_0x5c6feb),this['data']=_0x580da3,this['view']=new DataView(this['data']['buffer']),this['head']=-0x9*0x3eb+0xecc+0x1477,this['tail']=_0x1af671;}}}['compact'](){this['head']>-0x133*-0x11+0x10da+0x253d*-0x1&&(this['data']['copyWithin'](0x116*-0xd+0x3*-0xcce+-0x1*-0x3488,this['head'],this['tail']),this['tail']-=this['head'],this['head']=-0x7ad+-0x2140+0x28ed);}get['remaining'](){return this['tail']-this['head'];}['getInt8'](){const _0x4fa053=this['view']['getInt8'](this['head']);return this['head']++,_0x4fa053;}['getUint8'](){const _0x2c6e2e=this['view']['getUint8'](this['head']);return this['head']++,_0x2c6e2e;}['getInt16'](){const _0x5a3c5e=this['view']['getInt16'](this['head'],!(-0x124f+0x358*-0x5+-0xb7*-0x31));return this['head']+=0x1*0xed+0x20*-0xd+0xb5,_0x5a3c5e;}['getUint16'](){const _0x480993=this['view']['getUint16'](this['head'],!(-0x1957+0x1889+0xce));return this['head']+=0x1bde+0x19e0+-0x35bc,_0x480993;}['getInt32'](){const _0x1cde16=this['view']['getInt32'](this['head'],!(-0x75f+0x10b*-0x5+0x6*0x219));return this['head']+=-0x905+-0x2a9+0xbb2,_0x1cde16;}['getUint32'](){const _0x430e33=this['view']['getUint32'](this['head'],!(-0x92f+-0x1b*-0x66+-0x193));return this['head']+=0x41*0x1f+0x1*-0x4cf+0x9c*-0x5,_0x430e33;}['getFloat32'](){const _0x581de2=this['view']['getFloat32'](this['head'],!(0x1ab*-0xb+-0x7*-0x22d+0x2a*0x13));return this['head']+=0x212a+-0x1*0xaa0+-0x1686,_0x581de2;}['getFloat64'](){const _0x3ac364=this['view']['getFloat64'](this['head'],!(0x1403+0x1fde+0x114b*-0x3));return this['head']+=-0x1*-0x31c+0x2bc*-0xa+-0xc22*-0x2,_0x3ac364;}}class _0x15b090{constructor(_0x180f3e,_0x458612,_0x28c240){this['x']=_0x180f3e,this['y']=_0x458612,this['z']=_0x28c240;}}class _0x19c7e3{constructor(_0x4b9421,_0xe646a0,_0x5ab33e,_0x352752){this['x']=_0x4b9421,this['y']=_0xe646a0,this['z']=_0x5ab33e,this['w']=_0x352752;}}class _0x3fe93b{constructor(_0x9a826f,_0x371aea,_0x48d803,_0xa0af01){this['x']=_0x9a826f,this['y']=_0x371aea,this['z']=_0x48d803,this['w']=_0xa0af01;}['set'](_0x12744a,_0x47f73d,_0x3335d8,_0x6bba81){this['x']=_0x12744a,this['y']=_0x47f73d,this['z']=_0x3335d8,this['w']=_0x6bba81;}}class _0x28fd49{constructor(_0x5767f2,_0x37aa20,_0x56ad7c,_0xd986e5,_0x372a60,_0x1dd93f,_0x535031,_0x525866,_0x4f0c2d,_0x39c5ce,_0x856c04,_0x3cb1cb,_0x24c430,_0x337165){const _0x551247=(_0x4e0fee,_0x36019c)=>{const _0x333be3=(-0xe*-0x175+0x1819+-0x2c7e<<_0x36019c)-(0x44*-0xa+-0x20c9+0x15d*0x1a);return(_0x4e0fee&_0x333be3)/_0x333be3;},_0x121e44=(_0x440b96,_0x5d7eab)=>{_0x440b96['x']=_0x551247(_0x5d7eab>>>0x1cf9*-0x1+0x2110+0x1*-0x402,0x1*0x1571+-0x6c8+-0xe9e),_0x440b96['y']=_0x551247(_0x5d7eab>>>-0x15d*-0x2+0x1c60+0x1*-0x1f0f,0x60*0x41+0x1014+0x2*-0x1435),_0x440b96['z']=_0x551247(_0x5d7eab,0x329*-0x3+0x18e1+0x1*-0xf5b);},_0x2aa7d4=(_0x522cf6,_0xddfc26)=>{_0x522cf6['x']=_0x551247(_0xddfc26>>>-0x335*0x2+0x1813+0x5db*-0x3,0x1f71+0x9*0xd3+-0x26d4),_0x522cf6['y']=_0x551247(_0xddfc26>>>0x10b*0xb+-0x13ff*-0x1+-0x8*0x3ed,0x2*-0x8cc+-0x11f3+0x7*0x515),_0x522cf6['z']=_0x551247(_0xddfc26>>>0xe*-0x101+0x1*-0x602+0x1418,0xf25*0x1+0x1267+-0x2184),_0x522cf6['w']=_0x551247(_0xddfc26,0x1a9c+-0x1*0x1a01+0x1*-0x93);},_0x466be3=(_0x5ad97d,_0x4dda4f)=>{const _0x167c2f=(0x18fa+-0x90f+-0xfea)/(Math['sqrt'](-0x17e7+0x255*-0xd+0x363a)*(-0x1*-0x213d+0x36d+-0x24aa+0.5)),_0x47af86=(_0x551247(_0x4dda4f>>>0x1b1b+-0x1745+-0x3c2,0x1231+0x2184+-0x33ab)-(-0x265+0x6de*0x2+-0xb57+0.5))*_0x167c2f,_0x52985f=(_0x551247(_0x4dda4f>>>-0x2537+-0x53f*0x1+-0x110*-0x28,0x1840+-0x1e53+0x61d)-(-0x2089*-0x1+0xe*-0x1f6+-0x515+0.5))*_0x167c2f,_0x3dfca0=(_0x551247(_0x4dda4f,-0x7*-0x577+-0x346*0x8+0x1*-0xc07)-(0xc*0x31a+-0x11d4*0x2+0x28*-0xa+0.5))*_0x167c2f,_0x580ec1=Math['sqrt'](-0x216e+-0x251c+0x468b-(_0x47af86*_0x47af86+_0x52985f*_0x52985f+_0x3dfca0*_0x3dfca0));switch(_0x4dda4f>>>0x94f+-0x156c+0x65*0x1f){case-0x662+-0x21bd+0x1*0x281f:_0x5ad97d['set'](_0x47af86,_0x52985f,_0x3dfca0,_0x580ec1);break;case-0x6a2+0x2c9*0x6+-0x1*0xa13:_0x5ad97d['set'](_0x580ec1,_0x52985f,_0x3dfca0,_0x47af86);break;case 0x107a+0x4f2*0x1+-0x2*0xab5:_0x5ad97d['set'](_0x52985f,_0x580ec1,_0x3dfca0,_0x47af86);break;case 0x2b*-0x11+0x23b4+-0x20d6:_0x5ad97d['set'](_0x52985f,_0x3dfca0,_0x580ec1,_0x47af86);break;}},_0x1a5144=(_0x6b241f,_0x4640e4,_0x4f86ab)=>_0x6b241f*(-0x1*0x10e9+-0x22c6*0x1+-0x4*-0xcec-_0x4f86ab)+_0x4640e4*_0x4f86ab,_0x5078b5=[-0x10*-0x5c+-0x641+0x84*0x1,0x24e9+-0x237d+-0x164,0x4ad+-0x5*-0x543+-0x1eed][_0x535031-(0x91a+0x1e+-0x1*0x937)],_0x326d89=-0x1757+0x172b+0x32;this['read']=_0x4fac45=>{const _0x93cda9=Math['floor'](_0x4fac45/(0x1*0xf45+0x2*-0xdab+0x1*0xd11))*_0x37aa20;if(_0x525866&&(_0x121e44(_0x525866,_0x56ad7c[_0x4fac45*_0x326d89+(-0x1c12+0x1*0x1389+0x889)]),_0x525866['x']=_0x1a5144(_0x5767f2[_0x93cda9+(0x2*0x3a8+-0x173e+-0xfee*-0x1)],_0x5767f2[_0x93cda9+(-0x5ca+0xdab*0x1+-0x6a*0x13)],_0x525866['x']),_0x525866['y']=_0x1a5144(_0x5767f2[_0x93cda9+(-0x199f+0x225b+0x5*-0x1bf)],_0x5767f2[_0x93cda9+(-0x22ba+-0x15*0x13f+0x3ce9)],_0x525866['y']),_0x525866['z']=_0x1a5144(_0x5767f2[_0x93cda9+(0x3*-0xa8b+-0x19d2*-0x1+0x5d1)],_0x5767f2[_0x93cda9+(0x1f75*0x1+-0x1c98+-0x1c*0x1a)],_0x525866['z'])),_0x4f0c2d&&_0x466be3(_0x4f0c2d,_0x56ad7c[_0x4fac45*_0x326d89+(0x25*0x2a+0x1dc*0xc+-0x1c61)]),_0x39c5ce&&(_0x121e44(_0x39c5ce,_0x56ad7c[_0x4fac45*_0x326d89+(0x5*0x718+-0x33d*-0xb+-0x1f*0x24b)]),_0x39c5ce['x']=_0x1a5144(_0x5767f2[_0x93cda9+(0x955+-0x1238+0x8e9)],_0x5767f2[_0x93cda9+(0x1df9+0x4f9+0xba3*-0x3)],_0x39c5ce['x']),_0x39c5ce['y']=_0x1a5144(_0x5767f2[_0x93cda9+(-0x1e18+0x2508+0x1d*-0x3d)],_0x5767f2[_0x93cda9+(0x18e4+0x1d11+-0x35eb)],_0x39c5ce['y']),_0x39c5ce['z']=_0x1a5144(_0x5767f2[_0x93cda9+(-0xb3e*0x2+0x3f5*-0x6+-0x17e*-0x1f)],_0x5767f2[_0x93cda9+(0x13*0x1b6+0x1*-0x139f+-0x66c*0x2)],_0x39c5ce['z'])),_0x856c04&&(_0x2aa7d4(_0x856c04,_0x56ad7c[_0x4fac45*_0x326d89+(0xd*-0x103+0x15b*-0xa+-0x6*-0x474)]),_0x37aa20>-0x5*0x526+-0x1fbd+0x3987&&(_0x856c04['x']=_0x1a5144(_0x5767f2[_0x93cda9+(0x2617+0xc16+0x1*-0x3221)],_0x5767f2[_0x93cda9+(-0x1e6a+-0x1*-0xbca+0x12af)],_0x856c04['x']),_0x856c04['y']=_0x1a5144(_0x5767f2[_0x93cda9+(0x200*0x7+0x16d0+-0xc41*0x3)],_0x5767f2[_0x93cda9+(0x1624+-0xbf*-0x2f+-0x1*0x3925)],_0x856c04['y']),_0x856c04['z']=_0x1a5144(_0x5767f2[_0x93cda9+(0x19ea+0x235f+-0x3d3b)],_0x5767f2[_0x93cda9+(0x1b*0x12f+-0x1672+-0x972)],_0x856c04['z']))),_0x3cb1cb&&(_0x121e44(_0x3cb1cb,_0x56ad7c[_0x4fac45*_0x326d89+(-0x1482+-0xdaf*0x1+0x2235)]),_0x3cb1cb['x']=_0x1a5144(_0x5767f2[_0x93cda9+(-0xe9e+0xb29*-0x3+0x302b)],_0x5767f2[_0x93cda9+(0xe5*0x7+0x64b*-0x1+0x1d*0x1)],_0x3cb1cb['x']),_0x3cb1cb['y']=_0x1a5144(_0x5767f2[_0x93cda9+(-0x59d*0x4+0x14b9+0x3*0x9a)],_0x5767f2[_0x93cda9+(0x20bc*0x1+-0x1*-0x458+-0x24fe)],_0x3cb1cb['y']),_0x3cb1cb['z']=_0x1a5144(_0x5767f2[_0x93cda9+(0x1977+0x1017+-0x1*0x297a)],_0x5767f2[_0x93cda9+(-0x29*-0x44+0x2442+0x6b9*-0x7)],_0x3cb1cb['z'])),_0x24c430&&(_0x121e44(_0x24c430,_0x56ad7c[_0x4fac45*_0x326d89+(-0x4b3+-0x117+0x5cf*0x1)]),_0x24c430['x']=_0x1a5144(_0x5767f2[_0x93cda9+(0x1759+0x2b*-0x89+-0x3e)],_0x5767f2[_0x93cda9+(0xdc*-0x16+0x1a13+-0x712)],_0x24c430['x']),_0x24c430['y']=_0x1a5144(_0x5767f2[_0x93cda9+(-0x12ce*-0x1+0x14f1+0x11*-0x255)],_0x5767f2[_0x93cda9+(0xa7*0x37+-0xd*0x1a5+-0xe65)],_0x24c430['y'])),_0x337165&&_0x535031>-0x216f+-0x8ef*0x1+0x2a5e){const _0x34a7ac=[_0xd986e5,_0x372a60,_0x1dd93f];for(let _0x1016ad=0x5c*0xa+-0x86f*-0x2+0x123*-0x12;_0x1016ad<-0xed4*-0x1+-0x2fc*0x7+-0x1*-0x613;++_0x1016ad)for(let _0x1eb689=-0xc34+0x22db+-0x1*0x16a7;_0x1eb689<-0x2*0x683+0x1*-0x4c4+-0x11d9*-0x1;++_0x1eb689)_0x337165[_0x1016ad*(-0x3*0x7cf+0xbd*0x3+0x1545)+_0x1eb689]=_0x1eb689<_0x5078b5?_0x34a7ac[_0x1016ad][_0x4fac45*(-0x1f97+-0x1319+-0x2*-0x1960)+_0x1eb689]*((0xf33*-0x1+-0x13b0+-0x1*-0x22eb)/(-0x23a0+-0x12f6+-0x20f*-0x1b))-(0x85e+0x159e*-0x1+0xd44*0x1):0x14af+-0xeda*-0x1+0x33b*-0xb;}};}}self['onmessage']=async _0x48e5b2=>{var _0x302e2f,_0x2810f2,_0x12e72e;const {data:_0x4540c7}=_0x48e5b2;switch(_0x4540c7['type']){case'initWorker':globalThis['loadUrlLis'+'t']=_0x4540c7['loadUrlLis'+'t'],globalThis['fetchWorke'+'r']=new _0xd9083d(globalThis['loadUrlLis'+'t']);break;case'destroyWor'+'ker':(_0x302e2f=globalThis['fetchWorke'+'r'])==null||_0x302e2f['destroy'](),globalThis['fetchWorke'+'r']=null,globalThis['loadUrlLis'+'t']=[];break;case'loadPly':const {url:_0x3d759b,decompress:_0x3e1046}=_0x4540c7;try{globalThis['fetchWorke'+'r']||(globalThis['fetchWorke'+'r']=new _0xd9083d(globalThis['loadUrlLis'+'t']));const _0x8fc308=await globalThis['fetchWorke'+'r']['fetch'](_0x3d759b);if(!_0x8fc308||!_0x8fc308['body'])self['postMessag'+'e']({'type':'error','data':'Error\x20load'+'ing\x20resour'+'ce','url':_0x3d759b});else{const _0x4a2c65=parseInt(_0x8fc308['headers']['get']('content-le'+'ngth')??'0',0x89d+-0x97*-0x7+0x32d*-0x4);self['postMessag'+'e']({'type':'totalLengt'+'h','totalLength':_0x4a2c65,'bytes':0x0,'url':_0x3d759b});let _0x9c5d04=await _0x2caf56(_0x8fc308['body']['getReader'](),_0x298ece=>{self['postMessag'+'e']({'type':'progress','bytes':_0x298ece,'totalLength':_0x4a2c65,'url':_0x3d759b});});if(_0x3e1046&&_0x9c5d04['isCompress'+'ed']){const _0x11df12=_0x45b40b(_0x9c5d04),_0x34685b=(_0x2810f2=_0x11df12==null?void(0x201d+0x186+-0x21a3*0x1):_0x11df12['elements'][-0x126*-0x18+-0x9bc+0x1c*-0xa3])==null?void(-0x210*0x8+-0x1ae1+0x2b61):_0x2810f2['properties']['map'](_0x375826=>_0x375826['storage']['buffer']);self['postMessag'+'e']({'type':'splatData','data':_0x11df12,'url':_0x3d759b},_0x34685b);}else{if(_0x9c5d04['isCompress'+'ed']){const _0x27e0dd=['chunkData','vertexData'];_0x9c5d04['shData0']&&_0x27e0dd['push']('shData0','shData1','shData2');const _0x1a235c=_0x27e0dd['map'](_0x39c782=>{var _0x11dbe4;return(_0x11dbe4=_0x9c5d04[_0x39c782])==null?void(0x25d1+-0x2249+-0x388):_0x11dbe4['buffer'];});self['postMessag'+'e']({'type':'splatData','data':_0x9c5d04,'url':_0x3d759b},_0x1a235c);}else{_0x9c5d04=_0x4ed187(_0x9c5d04);const _0x1b8117=(_0x12e72e=_0x9c5d04==null?void(0x22af+0x14f0+0x1d*-0x1eb):_0x9c5d04['elements'][-0xd0*0x1+0xa9*-0xb+0x813])==null?void(-0x16a*0x1+-0xe8e+0x7*0x248):_0x12e72e['properties']['map'](_0x50c2fd=>_0x50c2fd['storage']['buffer']);self['postMessag'+'e']({'type':'splatData','data':_0x9c5d04,'url':_0x3d759b},_0x1b8117);}}}}catch(_0x38e4c8){self['postMessag'+'e']({'type':'error','data':_0x38e4c8['message'],'url':_0x3d759b});}break;}};const _0x4ed187=_0xc06799=>{var _0x40b5e6;const _0x2b51ae=(_0x40b5e6=_0xc06799==null?void(-0x8a3+-0x15ef+-0xd*-0x25a):_0xc06799['elements'][0x103f+0x46f+0xa57*-0x2])==null?void(-0x1b05+0x281*-0x1+0x1d86):_0x40b5e6['properties']['find'](_0x45029f=>_0x45029f['name']==='opacity');if(_0x2b51ae){for(let _0x498107=-0x34b*-0x3+-0x2*0x6f4+0x407*0x1;_0x498107<_0x2b51ae['storage']['length'];_0x498107++)_0x2b51ae['storage'][_0x498107]=(0x1*-0x9dd+0x2419+-0x18b*0x11)/(-0x1*0x7df+-0x1044*0x2+0x2868+Math['exp'](-_0x2b51ae['storage'][_0x498107]));}return _0xc06799;},_0xa3af43=_0x2e14f8=>{const _0x426e7e=[],_0x47bec1=[];let _0x37e239;for(let _0x513d9b=-0x13*0xc1+-0x3b*-0x21+0x6b9;_0x513d9b<_0x2e14f8['length'];++_0x513d9b){const _0x38d459=_0x2e14f8[_0x513d9b]['split']('\x20');switch(_0x38d459[-0x18f7+-0xf0b+-0xd56*-0x3]){case'comment':_0x47bec1['push'](_0x38d459['slice'](0x192c+-0x468*-0x4+-0x2acb)['join']('\x20'));break;case'format':_0x37e239=_0x38d459[0x1*-0x1e2b+0x1ac+0x1c80];break;case'element':_0x426e7e['push']({'name':_0x38d459[0x2446+0x1*-0xe9+-0x235c],'count':parseInt(_0x38d459[-0x21e9+-0xaba*0x2+0xe1*0x3f],-0x1ded+-0xf9+-0x90*-0x37),'properties':[]});break;case'property':{if(!_0x57fffb['has'](_0x38d459[0x1de4+0x2350+-0x4133]))throw new Error('Unrecogniz'+'ed\x20propert'+'y\x20data\x20typ'+'e\x20\x27'+_0x38d459[0x9b5+-0x19b7+0x1003]+('\x27\x20in\x20ply\x20h'+'eader'));_0x426e7e[_0x426e7e['length']-(0x1*-0x401+-0x1*0x161f+0x1a21)]['properties']['push']({'type':_0x38d459[0xcea+0x245a*-0x1+0x1771],'name':_0x38d459[0x1*0x26da+-0x419*-0x5+-0x3b55],'storage':null,'byteSize':_0x57fffb['get'](_0x38d459[0x1ad*-0x7+0xfc4+-0x8*0x81])['BYTES_PER_'+'ELEMENT']});break;}default:throw new Error('Unrecogniz'+'ed\x20header\x20'+'value\x20\x27'+_0x38d459[-0x10e7+0x6b0*0x2+0x7*0x81]+('\x27\x20in\x20ply\x20h'+'eader'));}}return{'elements':_0x426e7e,'format':_0x37e239,'comments':_0x47bec1};},_0x1a4a06=_0x136df2=>{const _0x629be5=['min_x','min_y','min_z','max_x','max_y','max_z','min_scale_'+'x','min_scale_'+'y','min_scale_'+'z','max_scale_'+'x','max_scale_'+'y','max_scale_'+'z','min_r','min_g','min_b','max_r','max_g','max_b','min_motion'+'_x','min_motion'+'_y','min_motion'+'_z','max_motion'+'_x','max_motion'+'_y','max_motion'+'_z','min_time_s'+'cale','max_time_s'+'cale','min_time','max_time'],_0x320c21=['packed_pos'+'ition','packed_rot'+'ation','packed_sca'+'le','packed_col'+'or','packed_mot'+'ion','packed_tim'+'e'],_0x23bd5a=new Array(-0xf56*0x2+0x956+-0x1583*-0x1)['fill']('')['map']((_0x460411,_0x222232)=>'f_rest_'+_0x222232),_0x2561a2=()=>_0x136df2[0xa1d+-0x1f62+0x9*0x25d]['name']==='chunk'&&_0x136df2[-0x1e98+-0x1*0x180a+0x36a2]['properties']['every']((_0x4c9671,_0x55b082)=>_0x4c9671['name']===_0x629be5[_0x55b082]&&_0x4c9671['type']==='float')&&_0x136df2[-0x16*0x1a5+0x13*0x7+0x23aa]['name']==='vertex'&&_0x136df2[-0x28*-0x92+0xfd7+-0x61*0x66]['properties']['every']((_0x18719b,_0x418566)=>_0x18719b['name']===_0x320c21[_0x418566]&&_0x18719b['type']==='uint'),_0x57a3ee=()=>_0x136df2[-0x12*-0x15b+-0x745+0x1e7*-0x9]['name']==='sh'&&[-0x2473*0x1+0x1*0x1112+-0x47*-0x46,-0x6c8+-0x1479*-0x1+0xd99*-0x1,0x59*-0xd+0x19a+-0x6*-0x84]['indexOf'](_0x136df2[-0x4cf*-0x5+-0x25ea+0xbb*0x13]['properties']['length'])!==-(-0x188d*-0x1+-0x29*-0xd3+-0x67*0x91)&&_0x136df2[-0x17f*0x4+-0xdc5+-0x13c3*-0x1]['properties']['every']((_0x42b845,_0x956838)=>_0x42b845['name']===_0x23bd5a[_0x956838]&&_0x42b845['type']==='uchar');return _0x136df2['length']===0xb32*0x1+0x1*0x1fd5+0x2b05*-0x1&&_0x2561a2()||_0x136df2['length']===-0x5cf+-0x6*-0x43f+-0x13a8&&_0x2561a2()&&_0x57a3ee();},_0x453a5d=_0x27e709=>_0x27e709['length']===-0x3*-0x67f+-0x2*-0xd56+-0x1c*0x1a6&&_0x27e709[-0x12b3*-0x1+0x191b*0x1+-0x2bce]['name']==='vertex'&&_0x27e709[-0x24c1+-0x1*0xc91+0x3b*0xd6]['properties']['every'](_0xe3658d=>_0xe3658d['type']==='float'),_0x4ecf20=async(_0x40b59d,_0x34c638,_0x5872e2)=>{const _0x117d07=new _0x40bc50();_0x117d07['comments']=_0x5872e2;const _0xf03cab=_0x34c638[-0x191a+-0x235f+-0x3c79*-0x1]['count'],_0x10a6de=_0x34c638[0x1f*-0xc7+0x1037+0x3f1*0x2]['properties']['length'],_0x2be0c0=_0x34c638[0x59a+0x1fa8+-0x2541]['count'],_0x590b98=_0x34c638[-0xd*0x1bb+0x392*-0xa+-0x64*-0x95]['properties']['some'](_0x117fbb=>_0x117fbb['name']==='packed_tim'+'e'),_0x17dadb=(_0xac00af=>{const _0x1e1c5c=Math['ceil'](Math['sqrt'](_0xac00af)),_0x28c0e0=Math['ceil'](_0xac00af/_0x1e1c5c);return _0x1e1c5c*_0x28c0e0;})(_0x2be0c0);_0x117d07['numSplats']=_0x2be0c0,_0x117d07['is4D']=_0x590b98,_0x117d07['chunkData']=new Float32Array(_0xf03cab*_0x10a6de),_0x117d07['vertexData']=new Uint32Array(_0x17dadb*(0x2a*0xb+-0x243e+-0x322*-0xb));const _0xaf6c37=async(_0x2b95f9,_0x4021c1)=>{const _0x4fa4ad=new Uint8Array(_0x2b95f9);let _0x5d8074=0x11de+-0x813+-0x9cb;for(;_0x5d8074<_0x4021c1;){for(;_0x40b59d['remaining']===0xa66+0x4e3+-0xf49*0x1;)await _0x40b59d['read']();const _0x7dc477=Math['min'](_0x4021c1-_0x5d8074,_0x40b59d['remaining']),_0x204ab4=_0x40b59d['data'];for(let _0xaa91ca=-0x5aa*0x1+-0x999*0x1+0xf43*0x1;_0xaa91ca<_0x7dc477;++_0xaa91ca)_0x4fa4ad[_0x5d8074++]=_0x204ab4[_0x40b59d['head']++];}};if(await _0xaf6c37(_0x117d07['chunkData']['buffer'],_0xf03cab*_0x10a6de*(-0x1b55*0x1+0x226d+0x1*-0x714)),await _0xaf6c37(_0x117d07['vertexData']['buffer'],_0x2be0c0*(-0x11b8+-0x597+0x1755)*(-0xfcb*0x2+0xe3c+0x27*0x72)),_0x34c638['length']===-0xef3+0x71*-0x35+-0x3*-0xcc9){const _0x4b1868=_0x17dadb*(-0xdea+0x137*-0x1b+-0x5*-0x95b),_0x64f274=new Uint8Array(_0x4b1868),_0xea168d=new Uint8Array(_0x4b1868),_0xd28a6=new Uint8Array(_0x4b1868),_0x537400=-0x1*-0x1723+-0x17dd+0x4ba,_0xf04f49=_0x34c638[-0x1*-0x9b+0xf8a+0x1cb*-0x9]['properties']['length']/(0xd8+0x1aa5+-0xdbd*0x2),_0x55b4f4=new Uint8Array(_0x537400*_0xf04f49*(0x890+-0xb*0x71+-0x3b2));for(let _0x3cc863=0x19c4+0x6*-0x1e1+0x5*-0x2e6;_0x3cc863<_0x117d07['numSplats'];_0x3cc863+=_0x537400){const _0x1dbfd9=Math['min'](_0x537400,_0x117d07['numSplats']-_0x3cc863);await _0xaf6c37(_0x55b4f4['buffer'],_0x1dbfd9*_0xf04f49*(-0x12dc+-0x25a5+0x3884));for(let _0x11ffb9=0xd63+0x130*-0x1f+0x1*0x176d;_0x11ffb9<_0x1dbfd9;++_0x11ffb9)for(let _0x5422ad=-0x260b+-0x8e1*-0x2+0x1449;_0x5422ad<0x1cfa+0x9f*0x2+-0x1e29;++_0x5422ad){const _0x3eb32d=(_0x3cc863+_0x11ffb9)*(0x3*0x3ab+0xe68+-0x3*0x873)+_0x5422ad;_0x5422ad<_0xf04f49?(_0x64f274[_0x3eb32d]=_0x55b4f4[(_0x11ffb9*(-0x2*0xf8b+-0x1518+0x3431)+(-0x5d1*0x1+0xc98+-0x6c7))*_0xf04f49+_0x5422ad],_0xea168d[_0x3eb32d]=_0x55b4f4[(_0x11ffb9*(-0x107f+0x2684+0x1*-0x1602)+(-0x6e1+0x2*-0xb5+0x3*0x2c4))*_0xf04f49+_0x5422ad],_0xd28a6[_0x3eb32d]=_0x55b4f4[(_0x11ffb9*(0x128d+-0x2401+0x11*0x107)+(-0x539*0x6+0x2368+-0x410))*_0xf04f49+_0x5422ad]):(_0x64f274[_0x3eb32d]=0x132a+-0x4*-0x5e2+-0x2a33,_0xea168d[_0x3eb32d]=0x1a19+-0x1d+-0x197d,_0xd28a6[_0x3eb32d]=-0x1*0x14a7+0x1a4f+0x1*-0x529);}}_0x117d07['shData0']=_0x64f274,_0x117d07['shData1']=_0xea168d,_0x117d07['shData2']=_0xd28a6,_0x117d07['shBands']={0x3:0x1,0x8:0x2,0xf:0x3}[_0xf04f49];}else _0x117d07['shBands']=-0x1c9*-0xd+0x1af*0x7+-0x22fe;return _0x117d07;},_0x1ff854=async(_0x45decd,_0x47140d,_0x43ddaf)=>{const _0x15cf3f=_0x47140d[0x959*0x3+0x772*-0x5+0x92f],_0x22aa83=_0x15cf3f['properties'],_0x1e4d56=_0x22aa83['length'],_0x49dad5=_0x22aa83['map'](_0x38260e=>_0x38260e['storage']),_0x2fe719=_0x22aa83['reduce']((_0x4d6d0a,_0x26d215)=>_0x4d6d0a+_0x26d215['byteSize'],0xb0c+-0x4*0x2b7+-0x30);let _0x241a6c=-0xe92+-0x2*-0x70f+0x74,_0x5d5c77;const _0xeaa60=()=>{const _0x946cce=_0x45decd['data']['buffer'];(_0x5d5c77==null?void(0x66f*0x1+0x2*0xdd7+-0x221d):_0x5d5c77['buffer'])!==_0x946cce&&(_0x5d5c77=new Float32Array(_0x946cce,-0xef*0xd+0x26*-0x97+-0x1d*-0x131,_0x946cce['byteLength']/(0x21*0xc2+-0xee*0x6+-0x136a)));};for(_0xeaa60();_0x241a6c<_0x15cf3f['count'];){for(;_0x45decd['remaining']<_0x2fe719;)await _0x45decd['read'](),_0xeaa60();const _0x2f6ec4=Math['min'](_0x15cf3f['count']-_0x241a6c,Math['floor'](_0x45decd['remaining']/_0x2fe719));for(let _0x51a075=0x1f*-0xcb+-0x138a*0x1+0xeb5*0x3;_0x51a075<_0x1e4d56;++_0x51a075){const _0x536c2c=_0x49dad5[_0x51a075];for(let _0x1bb34a=0xeb1+-0xa1*-0x18+-0x1dc9;_0x1bb34a<_0x2f6ec4;++_0x1bb34a)_0x536c2c[_0x1bb34a+_0x241a6c]=_0x5d5c77[_0x1bb34a*_0x1e4d56+_0x51a075];}_0x241a6c+=_0x2f6ec4,_0x45decd['head']+=_0x2f6ec4*_0x2fe719;}return new _0x17f97f(_0x47140d,_0x43ddaf);},_0x261005=async(_0x248a9e,_0x432fcb,_0x5a8c6d)=>{for(let _0x3b21ac=-0x26e3+-0x9ef+0x30d2;_0x3b21ac<_0x432fcb['length'];++_0x3b21ac){const _0x7129f0=_0x432fcb[_0x3b21ac],_0x475d8e=_0x7129f0['properties']['reduce']((_0x232fb6,_0x3035fb)=>_0x232fb6+_0x3035fb['byteSize'],0x59c+0x7bc+-0xd58),_0x10dac8=_0x7129f0['properties']['map'](_0x2b290b=>{if(_0x2b290b['storage'])switch(_0x2b290b['type']){case'char':return(_0x4bb09b,_0x4e7f5d)=>{_0x2b290b['storage'][_0x4e7f5d]=_0x4bb09b['getInt8']();};case'uchar':return(_0x32df4d,_0x6ef746)=>{_0x2b290b['storage'][_0x6ef746]=_0x32df4d['getUint8']();};case'short':return(_0x32eeca,_0x2f9ff7)=>{_0x2b290b['storage'][_0x2f9ff7]=_0x32eeca['getInt16']();};case'ushort':return(_0x2cd346,_0x59ff7b)=>{_0x2b290b['storage'][_0x59ff7b]=_0x2cd346['getUint16']();};case'int':return(_0x4834c0,_0x1b5769)=>{_0x2b290b['storage'][_0x1b5769]=_0x4834c0['getInt32']();};case'uint':return(_0x4b870d,_0x293c3a)=>{_0x2b290b['storage'][_0x293c3a]=_0x4b870d['getUint32']();};case'float':return(_0x296fa4,_0x3ebffa)=>{_0x2b290b['storage'][_0x3ebffa]=_0x296fa4['getFloat32']();};case'double':return(_0x30a0c4,_0x944c9e)=>{_0x2b290b['storage'][_0x944c9e]=_0x30a0c4['getFloat64']();};default:throw new Error('Unsupporte'+'d\x20property'+'\x20data\x20type'+'\x20\x27'+_0x2b290b['type']+('\x27\x20in\x20ply\x20h'+'eader'));}else return _0x3feeb1=>{_0x3feeb1['head']+=_0x2b290b['byteSize'];};});let _0x25fc97=-0x785+-0x18ad+0x2032;for(;_0x25fc97<_0x7129f0['count'];){for(;_0x248a9e['remaining']<_0x475d8e;)await _0x248a9e['read']();const _0x2445d0=Math['min'](_0x7129f0['count']-_0x25fc97,Math['floor'](_0x248a9e['remaining']/_0x475d8e));for(let _0x3fb7a4=0x1*0x2e5+0x81f+-0xb04;_0x3fb7a4<_0x2445d0;++_0x3fb7a4){for(let _0x9acf68=-0x8*-0x472+-0xff6+-0x139a;_0x9acf68<_0x7129f0['properties']['length'];++_0x9acf68)_0x10dac8[_0x9acf68](_0x248a9e,_0x25fc97);_0x25fc97++;}}}return new _0x17f97f(_0x432fcb,_0x5a8c6d);},_0x2caf56=async(_0x2b5340,_0x3c5c04=null)=>{const _0x58ac79=(_0x11313f,_0x2f4ad0)=>{const _0x385db0=_0x11313f['length']-_0x2f4ad0['length'];let _0x3d0b9d,_0x2d0724;for(_0x3d0b9d=-0x1d04+0x1f*-0x88+0x16be*0x2;_0x3d0b9d<=_0x385db0;++_0x3d0b9d){for(_0x2d0724=-0x225b+0x343*-0x4+0x3*0xfcd;_0x2d0724<_0x2f4ad0['length']&&_0x11313f[_0x3d0b9d+_0x2d0724]===_0x2f4ad0[_0x2d0724];++_0x2d0724);if(_0x2d0724===_0x2f4ad0['length'])return _0x3d0b9d;}return-(0x3*0xa9+-0x146+-0xb4);},_0x459c1c=(_0x5a6faa,_0x379ce9)=>{if(_0x5a6faa['length']<_0x379ce9['length'])return!(-0xf*-0x1d1+-0x1c7f+0x141*0x1);for(let _0x26d362=0xddb+0x8c5*0x1+-0x16a0;_0x26d362<_0x379ce9['length'];++_0x26d362)if(_0x5a6faa[_0x26d362]!==_0x379ce9[_0x26d362])return!(0x27*0x13+0x1*0x845+-0xb29);return!(0x3*0x129+-0x29f*0x2+0x1c3);},_0x43d74a=new _0x43d80f(_0x2b5340,_0x3c5c04);let _0x6066bb;for(;;){if(await _0x43d74a['read'](),_0x43d74a['tail']>=_0x6fa69b['length']&&!_0x459c1c(_0x43d74a['data'],_0x6fa69b))throw new Error('Invalid\x20pl'+'y\x20header');if(_0x6066bb=_0x58ac79(_0x43d74a['data'],_0x3c5dbb),_0x6066bb!==-(0x20ae+-0x2133+0x86))break;}const _0x5ea1b6=new TextDecoder('ascii')['decode'](_0x43d74a['data']['subarray'](-0x1666+0x1*0x269f+-0x1039,_0x6066bb))['split']('\x0a'),{elements:_0x54c1fa,format:_0xcbccf1,comments:_0x2f46cb}=_0xa3af43(_0x5ea1b6);if(_0xcbccf1!=='binary_lit'+'tle_endian')throw new Error('Unsupporte'+'d\x20ply\x20form'+'at');return _0x43d74a['head']=_0x6066bb+_0x3c5dbb['length'],_0x43d74a['compact'](),await((async()=>_0x1a4a06(_0x54c1fa)?await _0x4ecf20(_0x43d74a,_0x54c1fa,_0x2f46cb):(_0x54c1fa['forEach'](_0x4db392=>{_0x4db392['properties']['forEach'](_0x2c07fa=>{const _0x580333=_0x57fffb['get'](_0x2c07fa['type']);if(_0x580333){const _0x28a01f=new _0x580333(_0x4db392['count']);_0x2c07fa['storage']=_0x28a01f;}});}),_0x453a5d(_0x54c1fa)?await _0x1ff854(_0x43d74a,_0x54c1fa,_0x2f46cb):await _0x261005(_0x43d74a,_0x54c1fa,_0x2f46cb)))());},_0x45b40b=_0x570d85=>{const {numSplats:_0x25dd54,chunkData:_0x2bc601,chunkSize:_0x345cfc,vertexData:_0x479803,shData0:_0x103021,shData1:_0x46fd90,shData2:_0x41298e,shBands:_0x28ef33,comments:_0x29b680,is4D:_0x43636b}=_0x570d85,_0x31af7a=['x','y','z','scale_0','scale_1','scale_2','rot_0','rot_1','rot_2','rot_3','f_dc_0','f_dc_1','f_dc_2','opacity'];if(_0x43636b&&_0x31af7a['push']('t','t_scale','motion_0','motion_1','motion_2'),_0x28ef33>-0x1d4f+-0x1*-0x1307+0xa48){const _0x333ff6=[];for(let _0x37d41f=-0x248+-0xe*0x1c5+0x1b0e;_0x37d41f<0x197e+0x1e7b+-0x37cc;++_0x37d41f)_0x333ff6['push']('f_rest_'+_0x37d41f);_0x31af7a['splice'](_0x31af7a['indexOf']('f_dc_0')+(-0x57d+0x2*0xe35+-0x16ec),-0x1ab2+0x24a8+-0x9f6,..._0x333ff6);}const _0x1ee52f={};_0x31af7a['forEach'](_0x18cf77=>{_0x1ee52f[_0x18cf77]=new Float32Array(_0x25dd54);});const _0x1bc9a9=new _0x15b090(),_0x215feb=new _0x3fe93b(),_0x50a93a=new _0x15b090(),_0x3bbd93=new _0x19c7e3(),_0x1fcc62=new _0x15b090(),_0x4b781d=new _0x15b090(),_0x1a8a3a=_0x28ef33>0x534+0xc88+-0x11bc?new Float32Array(-0x6f7*0x4+0x17d3+-0x31*-0x16):null,_0x2a9b89=new _0x28fd49(_0x2bc601,_0x345cfc,_0x479803,_0x103021,_0x46fd90,_0x41298e,_0x28ef33,_0x1bc9a9,_0x215feb,_0x50a93a,_0x3bbd93,_0x1fcc62,_0x4b781d,_0x1a8a3a);for(let _0x1054c4=0x3f2*0x2+-0x1c*0x119+0x16d8;_0x1054c4<_0x25dd54;++_0x1054c4){_0x2a9b89['read'](_0x1054c4),_0x1ee52f['x'][_0x1054c4]=_0x1bc9a9['x'],_0x1ee52f['y'][_0x1054c4]=_0x1bc9a9['y'],_0x1ee52f['z'][_0x1054c4]=_0x1bc9a9['z'],_0x1ee52f['rot_1'][_0x1054c4]=_0x215feb['x'],_0x1ee52f['rot_2'][_0x1054c4]=_0x215feb['y'],_0x1ee52f['rot_3'][_0x1054c4]=_0x215feb['z'],_0x1ee52f['rot_0'][_0x1054c4]=_0x215feb['w'],_0x1ee52f['scale_0'][_0x1054c4]=_0x50a93a['x'],_0x1ee52f['scale_1'][_0x1054c4]=_0x50a93a['y'],_0x1ee52f['scale_2'][_0x1054c4]=_0x50a93a['z'],_0x1ee52f['motion_0'][_0x1054c4]=_0x1fcc62['x'],_0x1ee52f['motion_1'][_0x1054c4]=_0x1fcc62['y'],_0x1ee52f['motion_2'][_0x1054c4]=_0x1fcc62['z'],_0x1ee52f['t_scale'][_0x1054c4]=_0x4b781d['x'],_0x1ee52f['t'][_0x1054c4]=_0x4b781d['y'],_0x1ee52f['f_dc_0'][_0x1054c4]=(_0x3bbd93['x']-(-0x1ad4+-0x1a6b*-0x1+0x69+0.5))/_0x7545da,_0x1ee52f['f_dc_1'][_0x1054c4]=(_0x3bbd93['y']-(0x59c*-0x3+-0xb14*0x1+0x1be8+0.5))/_0x7545da,_0x1ee52f['f_dc_2'][_0x1054c4]=(_0x3bbd93['z']-(0x1d06*-0x1+-0x3*-0xa82+-0x280+0.5))/_0x7545da;const _0x5eb056=_0x3bbd93['w']<=0x18d3+0x3d*-0x50+-0x127*0x5?-(0x11*0x7+0x1693+-0x1*0x16e2):_0x3bbd93['w']>=0x7f5+0x19e0+0x5*-0x6c4?-0x1225+0xb*-0xe9+0x1c50:-Math['log']((-0x3*-0xaf1+0x1731+-0x44f*0xd)/_0x3bbd93['w']-(0x1c9*-0x13+-0xd6d+0x2f59));if(_0x1ee52f['opacity'][_0x1054c4]=(-0x9*-0x8b+-0xc*0x307+-0x23f*-0xe)/(-0x1*0x13ea+-0x1*0x682+0x1a6d+Math['exp'](-_0x5eb056)),_0x1a8a3a){for(let _0x22ed74=-0x2124+0x255*-0xb+-0x1*-0x3acb;_0x22ed74<0x2599+-0x222d+-0x33f;++_0x22ed74)_0x1ee52f['f_rest_'+_0x22ed74][_0x1054c4]=_0x1a8a3a[_0x22ed74];}}const _0xd84e00=[{'count':_0x25dd54,'name':'vertex','properties':_0x31af7a['map'](_0x19a265=>({'byteSize':0x4,'name':_0x19a265,'type':'float','storage':_0x1ee52f[_0x19a265]}))}];return new _0x17f97f(_0xd84e00,_0x29b680);};}class ok extends me{constructor(_0xe4b1e7){super(),h(this,'worker'),h(this,'loadUrlLis'+'t'),(this['loadUrlLis'+'t']=_0xe4b1e7,this['_initWorke'+'r']());}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+nk['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'}))),this['worker']['postMessag'+'e']({'type':'initWorker','loadUrlList':this['loadUrlLis'+'t']});}['loadPly'](_0x3ee79a,_0x30a5a2,_0x45fed2=(_0x57844e,_0x45d095)=>{},_0xee7c69=(_0x125b31,_0x153a7a,_0x102b1f)=>{},_0x3c5375=(_0x2b5818,_0x2e0a4d)=>{}){var _0x31124b;return(_0x31124b=this['worker'])==null||_0x31124b['postMessag'+'e']({'type':'loadPly','url':_0x3ee79a,'decompress':_0x30a5a2}),new Promise((_0x1bf8f0,_0x3a927a)=>{if(!this['worker']){_0x3a927a(new Error('no\x20worker'));return;}this['worker']['onmessage']=_0x348a67=>{if(!this['worker'])return;const {data:_0x76c4b7}=_0x348a67;if(_0x3ee79a===_0x76c4b7['url'])switch(_0x76c4b7['type']){case'totalLengt'+'h':_0x45fed2==null||_0x45fed2(_0x76c4b7['totalLengt'+'h'],_0x76c4b7['url']);break;case'progress':_0xee7c69==null||_0xee7c69(_0x76c4b7['bytes'],_0x76c4b7['totalLengt'+'h'],_0x76c4b7['url']);break;case'splatData':_0x1bf8f0(_0x76c4b7['data']);break;case'error':_0x3c5375==null||_0x3c5375(_0x76c4b7['data'],_0x76c4b7['url']);break;}};});}['destroy'](){this['loadUrl']='',this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),this['worker']['terminate'](),this['worker']=void(0x1691+-0x24e8*0x1+-0xe57*-0x1));}}class lk{constructor(_0x3971e7,_0x401ca1){h(this,'urlList'),h(this,'app'),h(this,'maxRetries'),h(this,'gsplatReso'+'urce'),h(this,'onlyOneAss'+'et'),h(this,'readWorker'),(console['log']('____\x20PLYJS'+'\x20ENGINE\x20IV'+'AN','Register\x20P'+'lyParser.c'+'onstructor'),this['app']=_0x3971e7,this['maxRetries']=_0x401ca1,this['urlList']=[],this['gsplatReso'+'urce']=null,this['readWorker']=null,this['totalRecei'+'ved']=0x7*0x115+0x464*0x3+-0x14bf);}async['load'](_0x176988,_0x18a1c9,_0x4dd246){var _0x7eb13b,_0x56a4fd,_0x14cbed;console['log']('____\x20PLYJS'+'\x20ENGINE\x20IV'+'AN','PlyParser.'+'load'),this['urlList']=[],_0x176988['load']['includes'](',')?this['urlList']=_0x176988['load']['split'](','):this['urlList']['push'](_0x176988['load']);const _0x1f7188=_0x4dd246['data']['createTime']!==((_0x56a4fd=(_0x7eb13b=this['onlyOneAss'+'et'])==null?void(-0x1*0x38c+-0x24b1+0x1*0x283d):_0x7eb13b['data'])==null?void(-0x1*0x454+0x35*-0x89+-0x1*-0x20b1):_0x56a4fd['createTime']);(!this['readWorker']||_0x1f7188)&&((_0x14cbed=this['readWorker'])==null||_0x14cbed['destroy'](),this['readWorker']=new ok(this['urlList']));const _0x18e752=_0x4dd246['data']['loadIndex']>=-0x1*-0x149f+-0x1afe+0x7*0xe9?_0x4dd246['data']['loadIndex']:0xab9+0x18f3+-0x23ac,_0x93440f=_0x4dd246['data']['loadMode']==='all'?this['urlList']['length']-_0x18e752:_0x18e752+(0x251d+0x1723*-0x1+-0x31*0x49),_0x2ee3ba=_0x4dd246['data']['timeOption'],_0x216840=_0x4dd246['data']['events'];for(let _0x390743=_0x18e752;_0x390743<_0x93440f;_0x390743++)await this['loadGsplat'+'Data'](this['urlList'],_0x18a1c9,_0x4dd246,_0x390743,_0x2ee3ba,_0x216840,_0x93440f);_0x216840['fire']('loadAllAss'+'etsDone');}async['loadGsplat'+'Data'](_0x5171b6,_0x37ec1b,_0x20c653,_0x3afb31,_0xaba14e,_0x446c5e,_0x5b3c38){var _0x3120e6,_0x461984,_0x2f02c5;console['log']('____\x20PLYJS'+'\x20ENGINE\x20IV'+'AN','loadGsplat'+'Data',_0x5171b6[_0x3afb31]['trim'](),_0x3afb31);const _0xf7c285=_0xaba14e[(0x1*-0x140f+-0xce4+0x8f*0x3b)*_0x3afb31]+_0xaba14e[(0x17*-0xa3+-0x373*0x1+0x121a)*_0x3afb31+(0xc25+0x1*-0x1e92+0x126e)],_0x2e539b=_0x5171b6[_0x3afb31]['trim']();globalThis['loadGsplat'+'DataStartT'+'ime']=performance['now'](),console['log']('loadTime','=========='+'=========='+'=========='+'=========='+'=========='+'====='),console['log']('loadTime','start\x20load'+'\x20ply\x20data',((performance['now']()-globalThis['loadGsplat'+'DataStartT'+'ime'])/(-0x1b1+0xf55+-0x179*-0x4))['toFixed'](-0x1*-0x10d+0x8d*-0x33+0x1b0c));try{const _0x55f1a3=await((_0x3120e6=this['readWorker'])==null?void(0x1*-0xf1a+-0xea9+0x1dc3):_0x3120e6['loadPly'](_0x2e539b,_0x20c653['data']['decompress'],()=>{this['totalRecei'+'ved']=0x58d+-0xf3a+0x9ad;},(_0x5d3e36,_0xfd729f)=>{this['totalRecei'+'ved']+=_0x5d3e36,_0x20c653&&_0x446c5e['fire']('progress',_0xfd729f*_0x3afb31/_0x5b3c38+this['totalRecei'+'ved']/_0x5b3c38,_0xfd729f);},(_0x1d1db5,_0x24c14b)=>{debugger;console['warn']('ERROE\x20Load'+'\x20Ply',_0x24c14b,_0x1d1db5);}));let _0x50470c;console['log']('loadTime','load\x20ply\x20d'+'ata\x20done',((performance['now']()-globalThis['loadGsplat'+'DataStartT'+'ime'])/(0x1c3f+0x563*0x1+-0x26*0x5f))['toFixed'](-0x5*-0x73+-0x2*-0x8fe+-0x1439)),_0x55f1a3['isCompress'+'ed']?(_0x50470c=new ak(),_0x50470c['comments']=_0x55f1a3['comments'],_0x50470c['numSplats']=_0x55f1a3['numSplats'],_0x50470c['is4D']=_0x55f1a3['is4D'],_0x50470c['chunkData']=_0x55f1a3['chunkData'],_0x50470c['vertexData']=_0x55f1a3['vertexData'],_0x50470c['shData0']=_0x55f1a3['shData0'],_0x50470c['shData1']=_0x55f1a3['shData1'],_0x50470c['shData2']=_0x55f1a3['shData2'],_0x50470c['shBands']=_0x55f1a3['shBands']):_0x50470c=new qn(_0x55f1a3['elements'],_0x55f1a3['comments']),_0x20c653['fire']('load:data',_0x50470c),_0x50470c['isCompress'+'ed']||_0x20c653['data']['reorder'];const _0x515262=_0x20c653['data']['createTime']!==((_0x2f02c5=(_0x461984=this['onlyOneAss'+'et'])==null?void(-0xc*0x263+0xb29*0x2+0x2*0x329):_0x461984['data'])==null?void(-0xed*0xa+0x1dc1+0x21*-0x9f):_0x2f02c5['createTime']);this['gsplatReso'+'urce']&&!_0x515262?this['gsplatReso'+'urce']['appendGSpl'+'atResource'](_0x50470c['isCompress'+'ed']?await _0x50470c['decompress']():_0x50470c,_0xaba14e,_0xf7c285,_0x20c653,_0x446c5e):(console['log']('____\x20ENGIN'+'E\x20IVAN','new\x20GSplat'+'Resource'),this['gsplatReso'+'urce']=new EC(this['app']['graphicsDe'+'vice'],_0x50470c['isCompress'+'ed']?await _0x50470c['decompress']():_0x50470c),await this['gsplatReso'+'urce']['updateData'](),await this['gsplatReso'+'urce']['updateText'+'ure'](),this['gsplatReso'+'urce']['timeOption']=_0xaba14e,this['onlyOneAss'+'et']=_0x20c653),_0x37ec1b(null,this['gsplatReso'+'urce']);}catch(_0x22c917){_0x37ec1b(_0x22c917,null);}}['open'](_0x2253fd,_0x17b5c2){return _0x17b5c2;}}async function ck(){const _0x27d8ed='super4d-ca'+'che-v1',_0xfd9e30={'maxAge':0x202fbf000,'maxSize':0x280000000},_0x95e07a=0xdcd+0x1*-0x122b+-0x1a*-0x2b+0.28209479177387814;class _0x32e361{constructor(_0x1c9876={}){this['options']={..._0xfd9e30,..._0x1c9876},this['cache']=null,this['lruList']=[],this['cacheSizes']=new Map(),this['currentSiz'+'e']=-0x229c+0x6f1*0x3+0xdc9,this['initialize'+'d']=!(-0x2126+-0x31a+0x2441);}async['init'](){if(!this['initialize'+'d']){try{this['cache']=await caches['open'](_0x27d8ed);const _0x1b536f=await this['cache']['keys'](),_0x4667f2=[];for(const _0x323f26 of _0x1b536f){const _0x48b347=_0x323f26['url'],_0x113f56=await this['cache']['match'](_0x48b347);if(_0x113f56){const _0x42c47d=(await _0x113f56['blob']())['size'],_0x4f5548=_0x113f56['headers']['get']('x-cache-ti'+'me');_0x4f5548&&_0x4667f2['push']({'url':_0x48b347,'size':_0x42c47d,'cacheTime':parseInt(_0x4f5548)});}}_0x4667f2['sort']((_0x68e7,_0x3e69bb)=>_0x68e7['cacheTime']-_0x3e69bb['cacheTime']);for(const _0x1a55a0 of _0x4667f2)this['cacheSizes']['set'](_0x1a55a0['url'],_0x1a55a0['size']),this['currentSiz'+'e']+=_0x1a55a0['size'],this['lruList']['push'](_0x1a55a0['url']);}catch(_0x3d534f){console['error']('Failed\x20to\x20'+'initialize'+'\x20cache:',_0x3d534f);}this['initialize'+'d']=!(0x5b*0x5c+-0x1*0x229b+0x1e7);}}async['get'](_0x4b015c){if(await this['init'](),!this['cache'])return null;try{const _0x1a3d5f=await this['cache']['match'](_0x4b015c);if(!_0x1a3d5f)return null;const _0x23ee46=_0x1a3d5f['headers']['get']('x-cache-ti'+'me');return _0x23ee46&&Date['now']()-parseInt(_0x23ee46)>this['options']['maxAge']?(await this['delete'](_0x4b015c),null):(this['updateLRU'](_0x4b015c),_0x1a3d5f);}catch{return null;}}async['set'](_0xb96968,_0x2ddd0d){if(!(!this['cache']||_0xb96968['startsWith']('blob:')))try{const _0x42f47b=_0x2ddd0d['clone'](),_0x56b4bc=await _0x42f47b['blob'](),_0x4afc56=_0x56b4bc['size'];this['currentSiz'+'e']+_0x4afc56>this['options']['maxSize']&&await this['cleanupSpa'+'ce'](_0x4afc56);const _0x291e70=new Headers(_0x42f47b['headers']);_0x291e70['set']('x-cache-ti'+'me',Date['now']()['toString']());const _0x25709f=new Response(_0x56b4bc,{'status':_0x42f47b['status'],'statusText':_0x42f47b['statusText'],'headers':_0x291e70});await this['cache']['put'](_0xb96968,_0x25709f),this['cacheSizes']['set'](_0xb96968,_0x4afc56),this['currentSiz'+'e']+=_0x4afc56,this['updateLRU'](_0xb96968);}catch(_0x540a5a){console['error']('Cache\x20set\x20'+'error:',_0x540a5a);}}['updateLRU'](_0x273794){const _0x18e7a0=this['lruList']['indexOf'](_0x273794);_0x18e7a0>-(-0x88*0x26+0x6*0xd3+0xf3f)&&this['lruList']['splice'](_0x18e7a0,0x1170+-0x21ec+0xc9*0x15),this['lruList']['push'](_0x273794);}async['cleanupSpa'+'ce'](_0x5dc9f){const _0x534338=this['options']['maxSize']*(0x6b*-0x57+0x28b*-0x4+0x2e89+0.9);if(!(this['currentSiz'+'e']<=_0x534338))for(;this['lruList']['length']>-0x9c6*-0x3+-0x334+-0x1a1e&&this['currentSiz'+'e']>_0x534338;){const _0x2298b6=this['lruList']['shift']();_0x2298b6&&await this['delete'](_0x2298b6);}}async['delete'](_0x37883f){if(this['cache'])try{await this['cache']['delete'](_0x37883f);const _0x3cfe3b=this['cacheSizes']['get'](_0x37883f)||-0x1*-0xf4f+-0x11*0x7+-0xed8;this['currentSiz'+'e']-=_0x3cfe3b,this['cacheSizes']['delete'](_0x37883f);const _0x2e5c1a=this['lruList']['indexOf'](_0x37883f);_0x2e5c1a>-(0x21c2+0x1b*-0x142+0x35)&&this['lruList']['splice'](_0x2e5c1a,-0x2081+0x1*-0x1bb+0x223d);}catch(_0x4fbedf){console['error']('Cache\x20dele'+'te\x20error:',_0x4fbedf);}}async['clear'](){if(this['cache'])try{await this['cache']['keys']()['then'](_0x1f84e3=>Promise['all'](_0x1f84e3['map'](_0x4a7955=>{var _0x199170;return(_0x199170=this['cache'])==null?void(-0x10d3*-0x1+0x199*-0xd+-0x1f9*-0x2):_0x199170['delete'](_0x4a7955);}))),this['lruList']=[],this['cacheSizes']['clear'](),this['currentSiz'+'e']=-0x1e68+0x5*-0x9d+-0x29*-0xd1;}catch(_0x3554b0){console['error']('Cache\x20clea'+'r\x20error:',_0x3554b0);}}['destroy'](){this['cache']=null,this['lruList']=[],this['cacheSizes']['clear'](),this['currentSiz'+'e']=0x5*0x43+0xa34+0x1*-0xb83;}}class _0x2f58e3{constructor(_0x11c0f6=[],_0x3f02f4={}){this['cacheManag'+'er']=new _0x32e361(_0x3f02f4['cache']),this['retryCount']=_0x3f02f4['retryCount']||0x216a+0x1*0x57b+-0x26e2,this['retryDelay']=_0x3f02f4['retryDelay']||0x1ece+0x1*0x14c+-0x1e26,this['maxConcurr'+'ency']=_0x3f02f4['maxConcurr'+'ency']||0x873+0x26*-0x4+-0x7d5,this['downloadQu'+'eue']=_0x11c0f6,this['isProcessi'+'ngDownload'+'Queue']=!(0x9b1+-0x26ce+0x1d1e),this['pendingRes'+'ponses']=new Map(),this['processDow'+'nloadQueue']();}async['processDow'+'nloadQueue'](){if(!this['isProcessi'+'ngDownload'+'Queue']){for(this['isProcessi'+'ngDownload'+'Queue']=!(-0x201e+-0xcbb*-0x1+-0x2c5*-0x7);this['downloadQu'+'eue']['length']>-0x80c*0x1+0x17e3+-0xfd7;)try{const _0x5c5260=this['downloadQu'+'eue']['splice'](-0x2b8*0x2+0x3*-0xad1+-0xb7*-0x35,this['maxConcurr'+'ency'])['map'](_0x3173eb=>{if(!this['pendingRes'+'ponses']['has'](_0x3173eb)){const _0x1c1f5e=this['download'](_0x3173eb);return this['pendingRes'+'ponses']['set'](_0x3173eb,_0x1c1f5e),_0x1c1f5e['then'](()=>{this['pendingRes'+'ponses']['delete'](_0x3173eb);});}return Promise['resolve']();});await Promise['all'](_0x5c5260);}catch(_0x1cef3c){console['error']('Download\x20e'+'rror:',_0x1cef3c);}finally{this['isProcessi'+'ngDownload'+'Queue']=!(-0x1*-0x1069+0x199b+0xef*-0x2d);}}}async['fetch'](_0x2dca4d,_0x1c4235={}){if(this['pendingRes'+'ponses']['has'](_0x2dca4d))return this['pendingRes'+'ponses']['get'](_0x2dca4d);const {forceRefresh:_0x3ed300=!(0x53*-0x1f+-0x4*0x967+0x2faa),..._0x41bb2f}=_0x1c4235;this['pendingRes'+'ponses']['set'](_0x2dca4d,this['download'](_0x2dca4d,_0x41bb2f));const _0x2606fa=await this['pendingRes'+'ponses']['get'](_0x2dca4d);return this['pendingRes'+'ponses']['delete'](_0x2dca4d),_0x2606fa;}async['download'](_0x216b34,_0x2f2bb0={}){var _0x5b6d79;await((_0x5b6d79=this['cacheManag'+'er'])==null?void(-0x17da+-0x1*0x16b7+0x2e91):_0x5b6d79['init']());const {forceRefresh:_0xfa050e=!(-0x21f5+-0x16f6+0x38ec),..._0x2945b1}=_0x2f2bb0;_0xfa050e&&await this['cacheManag'+'er']['delete'](_0x216b34);const _0x697ab2=await this['cacheManag'+'er']['get'](_0x216b34);if(_0x697ab2)return _0x697ab2;let _0x11445f;for(let _0x1c6c8a=0x185c+-0xb88+0x66a*-0x2;_0x1c6c8a<this['retryCount'];_0x1c6c8a++)try{const _0x486ff0=await fetch(_0x216b34,_0x2945b1);if(!_0x486ff0['ok'])throw new Error('HTTP\x20error'+'!\x20status:\x20'+_0x486ff0['status']);return await this['cacheManag'+'er']['set'](_0x216b34,_0x486ff0),_0x486ff0;}catch(_0x4317ff){console['error']('Download\x20e'+'rror:',_0x4317ff),_0x11445f=_0x4317ff,_0x1c6c8a<this['retryCount']-(0x15bc+-0x2c*0x14+0x29d*-0x7)&&await new Promise(_0x20d712=>setTimeout(_0x20d712,this['retryDelay']*(_0x1c6c8a+(0xd*0x2aa+-0x344+-0x47b*0x7))));}throw _0x11445f;}async['clearCache'](){await this['cacheManag'+'er']['clear']();}['destroy'](){var _0x16713d;(_0x16713d=this['cacheManag'+'er'])==null||_0x16713d['destroy'](),this['cacheManag'+'er']=null,this['downloadQu'+'eue']=[],this['isProcessi'+'ngDownload'+'Queue']=!(-0x218f+-0x829+-0xb*-0x3cb),this['pendingRes'+'ponses']=new Map(),this['pendingRes'+'ponses']['clear']();}}class _0xc7ed37{constructor(_0x4bc572,_0x478075=[]){this['elements']=_0x4bc572,this['comments']=_0x478075,this['isCompress'+'ed']=!(0x1a43+-0x1*0x1ab1+0x6f);}}class _0x1bb04a{constructor(_0x18e535){this['url']=_0x18e535;}async['readFragme'+'nt'](){globalThis['fetchWorke'+'r']||(globalThis['fetchWorke'+'r']=new _0x2f58e3(globalThis['downloadQu'+'eueUrlList']));const _0x46c3bf=await globalThis['fetchWorke'+'r']['fetch'](this['url']);if(!_0x46c3bf['ok'])throw new Error('Failed\x20to\x20'+'fetch\x20'+this['url']+':\x20'+_0x46c3bf['statusText']);const _0x5c4afe=await _0x46c3bf['arrayBuffe'+'r'](),_0x4e8a20=new Uint8Array(_0x5c4afe);let _0x5524a1=0x3*-0xa0b+0x1c3c+0x1e5,{size:_0x1f624d,type:_0x266bd6}=this['_readBoxHe'+'ader'](_0x4e8a20,_0x5524a1);if(_0x266bd6!=='moof')throw new Error('Not\x20a\x20moof');_0x5524a1+=-0xb5*0x34+-0x1*-0x1633+-0x65*-0x25;const _0x1203c4=_0x5524a1+_0x1f624d-(-0xf4d+-0xf99+-0x2*-0xf77);let _0x1a0fc4=null;for(;_0x5524a1<_0x1203c4;){const {size:_0x300baf,type:_0x5689cc}=this['_readBoxHe'+'ader'](_0x4e8a20,_0x5524a1);_0x5524a1+=0x1*-0x260b+0x115*-0x14+0x3bb7;const _0x52711a=_0x4e8a20['slice'](_0x5524a1,_0x5524a1+_0x300baf-(-0x5b6+0x12cd*0x1+0x1*-0xd0f));_0x5524a1+=_0x300baf-(-0x175d*-0x1+-0x35e*0x3+-0xd3b),_0x5689cc==='emsg'&&(_0x1a0fc4=this['_parseEmsg'](_0x52711a));}if(!_0x1a0fc4)throw new Error('Incomplete'+'\x20moof');const {size:_0x121326,type:_0x506d67}=this['_readBoxHe'+'ader'](_0x4e8a20,_0x5524a1);if(_0x506d67!=='mdat')throw new Error('Expected\x20m'+'dat\x20box\x20af'+'ter\x20moof');_0x5524a1+=0x1b1*0x2+-0x596+0x16*0x1a;const _0x4560a6=_0x4e8a20['slice'](_0x5524a1,_0x5524a1+(_0x121326-(-0xd9f+0x4e7+0x7*0x140)));return{'metadata':_0x1a0fc4,'segmentData':_0x4560a6};}['_readBoxHe'+'ader'](_0x59e1d2,_0x5ec5a8){if(_0x5ec5a8+(0x10e0+-0x1a66+-0x2*-0x4c7)>_0x59e1d2['length'])throw new Error('EOF');const _0x4791a8=_0x59e1d2[_0x5ec5a8]<<-0x10b*-0xc+-0x2029+-0x13bd*-0x1|_0x59e1d2[_0x5ec5a8+(-0x1671+0x59*-0x6b+0x3ba5)]<<-0x544+0x2*-0x47d+0xe4e*0x1|_0x59e1d2[_0x5ec5a8+(0x1bd8+0x5*-0x15b+-0x150f)]<<-0x232*-0xd+0x25d8+-0x425a|_0x59e1d2[_0x5ec5a8+(0x411+-0x5*0x14b+-0x269*-0x1)],_0x4dee00=String['fromCharCo'+'de'](_0x59e1d2[_0x5ec5a8+(0xc90+0x4*-0xa3+0x8*-0x140)],_0x59e1d2[_0x5ec5a8+(0x2186+0x32*0x7+-0x22df)],_0x59e1d2[_0x5ec5a8+(0x17b3+0x2*-0xed3+-0xb*-0x8b)],_0x59e1d2[_0x5ec5a8+(-0x9*-0x3b9+-0x11f+-0xb*0x2f1)]);return{'size':_0x4791a8,'type':_0x4dee00};}['_parseEmsg'](_0x521b5c){let _0x42d226=0x1b8e+0xe1*0xa+-0x48b*0x8;_0x42d226=_0x521b5c['indexOf'](0x1*0xda3+0x2082+-0x1*0x2e25,_0x42d226)+(0x1eb4+0x9c7*-0x3+-0x15e),_0x42d226=_0x521b5c['indexOf'](0x4*-0x94b+0x172e+-0xc7*-0x12,_0x42d226)+(-0x1ad2+0x4*-0x212+0x231b),_0x42d226+=0x76f*0x4+-0x10b*0x7+-0x3*0x775;const _0x32afd6=_0x521b5c['slice'](_0x42d226);return globalThis['CBOR']['decode'](_0x32afd6);}}class _0x4eab4c{constructor(_0x58cc37=0xb67+-0x1550+0x9e9,_0x1e689e=0x9d7*-0x2+-0x21b*-0x3+-0x137*-0xb,_0x3bc9e0=0x750+-0x17*0xce+0xb32,_0x1274c7=-0x1b65+0x2c9*-0x5+0x2953){this['x']=_0x58cc37,this['y']=_0x1e689e,this['z']=_0x3bc9e0,this['w']=_0x1274c7;}['set'](_0x5a802b,_0x8cd827,_0x4907fc,_0x3a3eaa){return this['x']=_0x5a802b,this['y']=_0x8cd827,this['z']=_0x4907fc,this['w']=_0x3a3eaa,this;}['length'](){return Math['sqrt'](this['x']*this['x']+this['y']*this['y']+this['z']*this['z']+this['w']*this['w']);}['normalize'](_0x196e79=this){let _0x439351=_0x196e79['length']();return _0x439351===0x14d1+0x1*-0x22cd+0x166*0xa?(this['x']=this['y']=this['z']=-0xa+0xd4e+-0xd44,this['w']=0x99+-0x1d*0x7b+0xd57*0x1):(_0x439351=(0x995+0x11c0+-0x1b54)/_0x439351,this['x']=_0x196e79['x']*_0x439351,this['y']=_0x196e79['y']*_0x439351,this['z']=_0x196e79['z']*_0x439351,this['w']=_0x196e79['w']*_0x439351),this;}['mulScalar'](_0x367b36,_0x3faa44=this){return this['x']=_0x3faa44['x']*_0x367b36,this['y']=_0x3faa44['y']*_0x367b36,this['z']=_0x3faa44['z']*_0x367b36,this['w']=_0x3faa44['w']*_0x367b36,this;}}self['onmessage']=async _0x2fd482=>{var _0x4d9ac3,_0x2700ec;const {data:_0x8fbdda}=_0x2fd482;switch(_0x8fbdda['type']){case'initWorker':importScripts(_0x8fbdda['cborXUrl']);break;case'destroyWor'+'ker':_0xe7c01c();break;case'loadGsdMan'+'ifest':const {manifestUrl:_0x4ac24e,loadRepresentation:_0x42f32b}=_0x8fbdda,_0xcc9eb8=await _0x54e9a3(_0x4ac24e,_0x42f32b);globalThis['manifestUr'+'l']=_0x4ac24e,globalThis['manifest']=_0xcc9eb8,globalThis['resentatio'+'n']=_0xcc9eb8['representa'+'tion'],globalThis['downloadQu'+'eueUrlList']=_0x1877db(),globalThis['fetchWorke'+'r']=new _0x2f58e3(globalThis['downloadQu'+'eueUrlList']),self['postMessag'+'e']({'type':'onloadMani'+'fest','data':_0xcc9eb8,'url':_0x4ac24e,'representation':_0x42f32b});break;case'loadGsdSeg'+'ments':try{const _0x378f90=_0x1df2c2(globalThis['manifest'],globalThis['resentatio'+'n']),_0x406c3e=await _0x350956(globalThis['manifest'],_0x378f90),_0x4fc181=(_0x4d9ac3=_0x406c3e==null?void(0x2ae+-0x1075+0xdc7*0x1):_0x406c3e['elements'][0x1*-0x1f12+0x1*-0x11a6+0x30b8])==null?void(0x676+-0x146f+0xdf9):_0x4d9ac3['properties']['map'](_0x19019b=>_0x19019b['storage']['buffer']);self['postMessag'+'e']({'type':'loadGsdSeg'+'mentsDone','data':_0x406c3e,'url':globalThis['manifestUr'+'l'],'representation':globalThis['resentatio'+'n']},_0x4fc181);}catch(_0x940e1){console['error']('Error\x20load'+'ing\x20GSD:',_0x940e1),self['postMessag'+'e']({'type':'error','data':_0x940e1['message'],'url':globalThis['manifestUr'+'l']});}break;case'loadTimeli'+'neIndexSeg'+'ments':const {timelineIndexs:_0x121f1c}=_0x8fbdda;try{const _0x2e4440=_0x1df2c2(globalThis['manifest'],globalThis['resentatio'+'n']),_0x521d43=await _0x5dc0d3(globalThis['manifest'],_0x2e4440,_0x121f1c),_0xa18ea1=(_0x2700ec=_0x521d43==null?void(-0x41*-0x76+-0x3cc+-0x1a2a):_0x521d43['elements'][-0xc76*-0x1+-0x1*-0x17e1+-0x2457])==null?void(-0x28f*0xc+0x4bd*0x6+0xc2*0x3):_0x2700ec['properties']['map'](_0x1f6830=>_0x1f6830['storage']['buffer']);self['postMessag'+'e']({'type':'loadTimeli'+'neIndexSeg'+'mentsDone','data':_0x521d43,'timelineIndexs':_0x121f1c,'url':globalThis['manifestUr'+'l'],'representation':globalThis['resentatio'+'n']},_0xa18ea1);}catch(_0x3995bd){console['error']('Error\x20load'+'ing\x20GSD:',_0x3995bd),self['postMessag'+'e']({'type':'error','data':_0x3995bd['message'],'url':globalThis['manifestUr'+'l']});}break;}};const _0xe7c01c=()=>{var _0x5a662b;globalThis['manifestUr'+'l']=null,globalThis['manifest']=null,globalThis['resentatio'+'n']=null,(_0x5a662b=globalThis['fetchWorke'+'r'])==null||_0x5a662b['destroy'](),globalThis['fetchWorke'+'r']=null,globalThis['downloadQu'+'eueUrlList']=[],globalThis['loadedSegm'+'ents']=[],globalThis['currentLoa'+'dSg']=null;},_0x1877db=()=>{const _0x5076db=new Set(),_0xa09ab1=_0x1df2c2(globalThis['manifest'],globalThis['resentatio'+'n']),_0xf82db6=globalThis['manifest']['baseUrl'],_0x5a39e1=_0xa09ab1['segmentTem'+'plate'][0x1942+-0xad1+-0xe71*0x1];for(const _0x3ccd7b of _0x5a39e1['segmentTim'+'eline'])for(const _0xf4d34d of _0x3ccd7b['nl']){const _0x3962b7=''+_0xf82db6+_0x5a39e1['media']['replace']('$SegGroupI'+'ndex$',String(_0x3ccd7b['sg']))['replace']('$NodeIndex'+'$',String(_0xf4d34d));_0x5076db['add'](_0x3962b7);}return Array['from'](_0x5076db);},_0x54e9a3=async(_0x9df65c,_0x559767)=>{const _0x11212b=await(await fetch(_0x9df65c))['text'](),_0x29dba6=JSON['parse'](_0x11212b);_0x29dba6['baseUrl']=_0x9df65c['replace'](/\/[^\/]*$/,'/');const {schemas:_0x1926dc,gsiUrl:_0x4e34c7,repId:_0x5eaba3}=await _0xba38fc(_0x29dba6,_0x559767);return _0x29dba6['schemas']=_0x1926dc,_0x29dba6['gsiUrl']=_0x4e34c7,_0x29dba6['representa'+'tion']=_0x5eaba3,_0x29dba6;},_0xba38fc=async(_0x2c7ac8,_0x31953b)=>{let _0x390bce=null,_0x417720=null;for(const _0x4ba349 of _0x2c7ac8['adaptation'+'Sets'])if(_0x4ba349['contentTyp'+'e']==='4dgs'){_0x417720=_0x4ba349;for(const _0x56f562 of _0x4ba349['representa'+'tions'])if(_0x56f562['id']===_0x31953b){_0x390bce=_0x56f562;break;}break;}_0x390bce||(_0x390bce=_0x417720['representa'+'tions'][-0x182f*0x1+-0xe1f+0x264e*0x1],console['warn']('Representa'+'tion\x20\x27'+_0x31953b+('\x27\x20not\x20foun'+'d,\x20use\x20the'+'\x20first\x20rep'+'resentatio'+'n\x20instead')));const _0x5d9e3f=_0x390bce['id'],_0x11b05d=_0x2c7ac8['baseUrl']+_0x5d9e3f+('/init.gsi.'+'json'),_0x42e1c2=await(await fetch(_0x11b05d))['text'](),_0xac0b50=JSON['parse'](_0x42e1c2),_0x17bd62={};return _0x17bd62[_0x5d9e3f]=_0xac0b50,{'schemas':_0x17bd62,'gsiUrl':_0x11b05d,'repId':_0x5d9e3f};},_0x1df2c2=(_0x17a3f4,_0x2c270d='high-quant'+'ized')=>{let _0x523d3d=null;for(const _0x5b2f34 of _0x17a3f4['adaptation'+'Sets'])if(_0x5b2f34['contentTyp'+'e']==='4dgs'){for(const _0x538658 of _0x5b2f34['representa'+'tions'])if(_0x538658['id']===_0x2c270d){_0x523d3d=_0x538658;break;}break;}if(!_0x523d3d)throw new Error('Representa'+'tion\x20\x27'+_0x2c270d+('\x27\x20not\x20foun'+'d'));return _0x523d3d;},_0x350956=async(_0xb3b37e,_0x4ef2cc)=>{const _0x2c5e66=_0x4ef2cc['id'],_0x32f8b1=_0xb3b37e['schemas'][_0x2c5e66]['attributes'],_0xeeb750=_0x4ef2cc['segmentTem'+'plate'][0xc2b+0x15b*0x6+-0x144d];globalThis['loadedSegm'+'ents']=[];const _0x436aa9=[],_0x47b1bb=[];for(const _0x488abc of _0xeeb750['segmentTim'+'eline'])for(const _0xf57e53 of _0x488abc['nl']){if(globalThis['loadedSegm'+'ents']['includes'](_0x488abc['sg']+'_'+_0xf57e53))continue;globalThis['loadedSegm'+'ents']['push'](_0x488abc['sg']+'_'+_0xf57e53);const _0x204507=await _0xeb3db7(_0xb3b37e,_0x4ef2cc,_0x32f8b1,_0x488abc['sg'],_0xf57e53);_0x47b1bb['push'](_0x204507['decoded']),_0x436aa9['push'](_0x204507['metadata']);}return _0x48bb11(_0x47b1bb,_0x32f8b1,_0xb3b37e['comments']);},_0x5dc0d3=async(_0x201aba,_0xde34,_0x2f22ac)=>{if(!_0x2f22ac||_0x2f22ac['length']===-0x1660+0x1e63+0x7*-0x125)return{'decoded':[],'metadata':[]};const _0x14fdb9=_0xde34['id'],_0x51ea51=_0x201aba['schemas'][_0x14fdb9]['attributes'],_0x4fff63=_0xde34['segmentTem'+'plate'][-0x5*-0x199+-0x25ce+0x1*0x1dd1];globalThis['loadedSegm'+'ents']||(globalThis['loadedSegm'+'ents']=[]);const _0x5e1618=_0x4fff63['segmentTim'+'eline'][_0x2f22ac[-0x1521+-0x15a1+0x2ac2]];globalThis['currentLoa'+'dSg']!==_0x5e1618['sg']&&(globalThis['loadedSegm'+'ents']=globalThis['loadedSegm'+'ents']['filter'](_0x808e99=>!_0x808e99['startsWith'](globalThis['currentLoa'+'dSg'])),globalThis['currentLoa'+'dSg']=_0x5e1618['sg']);let _0x23a443;const _0x4ace9b=[];for(const _0x59f06c of _0x2f22ac){_0x23a443=_0x4fff63['segmentTim'+'eline'][_0x59f06c];for(const _0x10fead of _0x23a443['nl'])globalThis['loadedSegm'+'ents']['includes'](_0x23a443['sg']+'_'+_0x10fead)||(globalThis['loadedSegm'+'ents']['push'](_0x23a443['sg']+'_'+_0x10fead),_0x4ace9b['push'](_0x10fead));}const _0x5f07cd=await _0xeb3db7(_0x201aba,_0xde34,_0x51ea51,_0x23a443['sg'],_0x4ace9b);_0x5f07cd['metadata'];const _0x310ef=_0x5f07cd['decoded'];return _0x48bb11(_0x310ef,_0x51ea51,_0x201aba['comments']);},_0xeb3db7=async(_0x2f394a,_0xa80a1d,_0x511b4b,_0x1ec0e9,_0x41a703)=>{const _0x3b0585=_0x2f394a['baseUrl'],_0x2f0a4d=_0xa80a1d['segmentTem'+'plate'][-0x52+0x2*0xf68+-0x1e7e]['media'],_0x1fa76c=_0x41a703['map'](_0x202826=>''+_0x3b0585+_0x2f0a4d['replace']('$SegGroupI'+'ndex$',String(_0x1ec0e9))['replace']('$NodeIndex'+'$',String(_0x202826))),_0x47bbf2=await Promise['all'](_0x1fa76c['map'](async _0x377cdb=>{const _0x21c9e4=await _0x4cb971(_0x377cdb),_0x53b310=_0x21c9e4['metadata'],_0x3756f2=_0x21c9e4['segmentDat'+'a'],_0xb43346=_0x53b310['gaussianCo'+'unt'];console['log']('loadSegmen'+'t\x20'+_0x377cdb),console['log']('loadSegmen'+'t\x20timeStar'+'t:',_0x53b310['timeStart'],'segment\x20ti'+'meEnd:',_0x53b310['timeEnd'],'segment\x20ga'+'ussianCoun'+'t:',_0xb43346);let _0x5b1d1b;if(_0xa80a1d['id']['includes']('quantized')){const _0x17e2db=_0x53b310['chunk_boun'+'ds'];_0x5b1d1b=_0x421a26(_0x3756f2,_0xb43346,_0x511b4b,_0x1ec0e9,_0x17e2db);}else _0x5b1d1b=_0x66b827(_0x3756f2,_0xb43346,_0x511b4b,_0x1ec0e9);return{'decoded':_0x5b1d1b,'metadata':_0x53b310};})),_0x362327=_0x47bbf2['map'](_0x4e4c17=>_0x4e4c17['decoded']),_0x1cb36=_0x47bbf2['map'](_0x57a48f=>_0x57a48f['metadata']);return{'decoded':_0x362327,'metadata':_0x1cb36};},_0x48bb11=(_0x1f3e3c,_0x21b1a6,_0x48a257)=>{if(_0x1f3e3c['length']===-0x2289+0xe3f+-0x1*-0x144a)return new _0xc7ed37([{'name':'vertex','count':0x0,'properties':[{'name':'position','type':'float','storage':new Float32Array(0x15d1+0x8c7+0x16*-0x164),'byteSize':0x4},{'name':'color_opac'+'ity','type':'uint16','storage':new Uint16Array(-0x162e+0x1f7*0x1+-0x1*-0x1437),'byteSize':0x2},{'name':'t','type':'float','storage':new Float32Array(-0x210b+-0xb*0x1be+0x3435),'byteSize':0x4},{'name':'t_scale','type':'float','storage':new Float32Array(-0xa2c+-0x15be+-0x1fea*-0x1),'byteSize':0x4},{'name':'cutoff','type':'float','storage':new Float32Array(0x210b+-0x6f1+-0x1a1a),'byteSize':0x4},{'name':'motion','type':'float','storage':new Float32Array(-0x7b3+-0x637+0x1*0xdea),'byteSize':0x4},{'name':'rotation','type':'float','storage':new Float32Array(0x879+0xd*0x31+0x2*-0x57b),'byteSize':0x4},{'name':'scale','type':'uint16','storage':new Uint16Array(0x367*0x1+-0x1dda+-0x8d1*-0x3),'byteSize':0x2},{'name':'time_index','type':'float','storage':new Float32Array(0x1*-0x949+-0x1d27+0x7b*0x50),'byteSize':0x4}]}],_0x48a257);const _0x56e82e=_0x10ca81(_0x1f3e3c),[_0x3b0ae6,_0x26845e,_0x1782b9]=_0x947eb8(_0x56e82e['lifecycle'],0x1789+-0x542*0x1+0x2*-0x922,Float32Array),_0x4d89dc=_0x56e82e['time_index'],_0x34b414=_0x21b1a6['find'](_0x51e711=>_0x51e711['name']==='feature_re'+'st'),_0x5e36a8=[];if(_0x34b414&&_0x56e82e['feature_re'+'st']){const _0x4a7216=_0x34b414['dataType']['split'](',')[0x1406+-0x1c3a+0x835]['trim']()['replace']('>',''),_0x161aa9=_0x947eb8(_0x56e82e['feature_re'+'st'],-0x1e2b+0x93b+-0xad*-0x1f,Float32Array);for(const _0x2677a9 of _0x161aa9){const _0x169bcc=_0x947eb8(_0x2677a9,_0x4a7216/(0xe9b*0x2+0x42*0x5e+-0x356f),Float32Array);for(let _0x10b965=-0x1f93+-0x8a1*0x2+0x1*0x30d5;_0x10b965<_0x169bcc['length'];_0x10b965++)_0x5e36a8['push']({'name':'f_rest_'+_0x10b965,'type':'float','storage':_0x169bcc[_0x10b965],'byteSize':0x4});}}return new _0xc7ed37([{'name':'vertex','count':_0x56e82e['position']['length']/(0x2629+-0x1adc+-0x121*0xa),'properties':[{'name':'position','type':'float','storage':_0x56e82e['position'],'byteSize':0x4},{'name':'color_opac'+'ity','type':'uint16','storage':_0x56e82e['color_opac'+'ity'],'byteSize':0x2},{'name':'t','type':'float','storage':_0x26845e,'byteSize':0x4},{'name':'t_scale','type':'float','storage':_0x3b0ae6,'byteSize':0x4},{'name':'cutoff','type':'float','storage':_0x1782b9,'byteSize':0x4},{'name':'motion','type':'float','storage':_0x56e82e['motion'],'byteSize':0x4},{'name':'rotation','type':'float','storage':_0x56e82e['rotation'],'byteSize':0x4},{'name':'scale','type':'uint16','storage':_0x56e82e['scale'],'byteSize':0x2},{'name':'time_index','type':'float','storage':_0x4d89dc,'byteSize':0x4},..._0x5e36a8]}],_0x48a257);},_0x947eb8=(_0x57e677,_0x237102,_0x4289cd)=>{const _0x117ac7=new Array(_0x237102),_0x3a0d49=Math['floor'](_0x57e677['length']/_0x237102),_0x58be34=_0x57e677['length']%_0x237102;for(let _0x3a501d=-0x98b+0x1*-0x4ae+0xe39;_0x3a501d<_0x237102;_0x3a501d++){const _0x10ad6a=_0x3a501d<_0x58be34?_0x3a0d49+(-0x3*-0xcff+0x1*-0x482+0x113d*-0x2):_0x3a0d49;_0x117ac7[_0x3a501d]=new _0x4289cd(_0x10ad6a);}for(let _0x50508e=0x1*0x24cd+-0xb02*0x1+-0x19cb;_0x50508e<_0x57e677['length'];_0x50508e++){const _0x4f4e93=_0x50508e%_0x237102,_0x5ccb15=Math['floor'](_0x50508e/_0x237102);_0x117ac7[_0x4f4e93][_0x5ccb15]=_0x57e677[_0x50508e];}return _0x117ac7;},_0x4cb971=async _0x4290c2=>{const _0x2e4649=new _0x1bb04a(_0x4290c2),{metadata:_0x4cea5e,segmentData:_0x2aed40}=await _0x2e4649['readFragme'+'nt']();return{'metadata':_0x4cea5e,'segmentData':_0x2aed40};},_0x1dbf21=(_0x2d1d57,_0xd997db)=>{let _0x344d14,_0x3d6449,_0x292704=-(-0x1*0x2702+-0xf62+0x3665);if(_0x2d1d57['encoding']){const _0x211e73=_0x2d1d57['encoding']['storageTyp'+'e'];if(_0x211e73==='uint32')_0x3d6449=Uint32Array,_0x344d14=Uint32Array['BYTES_PER_'+'ELEMENT'];else{if(_0x211e73['startsWith']('array<ucha'+'r')){_0x3d6449=Uint8Array;const _0x4d1b55=_0x211e73['split'](',')[0x1722+0x85*-0x3a+0x701]['trim']()['replace']('>','');_0x292704=parseInt(_0x4d1b55),_0x344d14=_0x292704*Uint8Array['BYTES_PER_'+'ELEMENT'];}else throw new Error('Unsupporte'+'d\x20storage\x20'+'type:\x20'+_0x211e73);}}else{if(_0x3d6449=Float32Array,_0x2d1d57['dataType']==='vec3f')_0x344d14=(0x26*-0x56+0x3*0xcec+-0x19fd*0x1)*Float32Array['BYTES_PER_'+'ELEMENT'];else{if(_0x2d1d57['dataType']==='vec4f')_0x344d14=(0x239+0x6bf+-0x8f4)*Float32Array['BYTES_PER_'+'ELEMENT'];else{if(_0x2d1d57['dataType']==='vec2f')_0x344d14=(0x83d*0x3+-0x24db+0x1*0xc26)*Float32Array['BYTES_PER_'+'ELEMENT'];else{if(_0x2d1d57['dataType']['startsWith']('array<floa'+'t')){const _0x2b57fd=_0x2d1d57['dataType']['split'](',')[0x260d+0x75+0x1*-0x2681]['trim']()['replace']('>','');_0x292704=parseInt(_0x2b57fd),_0x344d14=_0x292704*Float32Array['BYTES_PER_'+'ELEMENT'];}else throw new Error('Unsupporte'+'d\x20data\x20typ'+'e:\x20'+_0x2d1d57['dataType']);}}}}return{'dataSize':_0xd997db*_0x344d14,'datatype':_0x3d6449,'arraySize':_0x292704};},_0x10af07=(_0x2a5f84,_0x477f81)=>{const _0x22afe7=(-0x1d*0x17+0x1d*-0xf9+0x1ed1<<_0x477f81)-(-0x5*0x3ff+0x540+0xebc);return(_0x2a5f84&_0x22afe7)/_0x22afe7;},_0x405875=_0x322372=>{const _0x1a989f=new Float32Array(_0x322372['length']*(0x2*-0x11d3+-0x1ebb+-0xe*-0x4be));for(let _0x467645=0x1*-0x557+-0x1a51+0x1fa8;_0x467645<_0x322372['length'];_0x467645++)_0x1a989f[_0x467645*(-0x15e5+0x9d1+-0xc17*-0x1)]=_0x10af07(_0x322372[_0x467645]>>>0x34*0x61+-0x101f*0x1+-0x380,0x1*0x641+-0x11fc+0x112*0xb),_0x1a989f[_0x467645*(0x4*-0x409+-0x1f68+0x2f8f)+(0xf2f+-0xc65*0x3+0x1601)]=_0x10af07(_0x322372[_0x467645]>>>0x1c41+0x1*0x2035+-0x3c6b,-0x6e6+-0x1681+-0x1d71*-0x1),_0x1a989f[_0x467645*(-0x16f*-0x8+0xd*-0x158+0x603)+(-0xff3+-0x1b81+0x2b76)]=_0x10af07(_0x322372[_0x467645],-0x172d+-0x7*0x247+0x2729);return _0x1a989f;},_0x7b8945=_0x16719a=>{const _0x51359f=new Float32Array(_0x16719a['length']*(-0x954+0x1d5+0x783*0x1));for(let _0x2378dc=-0x3*0xcf+-0x369+0x5d6;_0x2378dc<_0x16719a['length'];_0x2378dc++)_0x51359f[_0x2378dc*(-0x1618*-0x1+0xa6b*0x3+0x25*-0x171)]=_0x10af07(_0x16719a[_0x2378dc]>>>0xc91*0x1+-0xf16+-0x3*-0xdf,0x12*-0x173+-0xb*0x247+0x332b*0x1),_0x51359f[_0x2378dc*(-0x103e+0x1795+0x753*-0x1)+(-0x1*0x1aee+-0x680+0x216f)]=_0x10af07(_0x16719a[_0x2378dc]>>>0x93*0x3b+-0x207d+-0x4*0x55,-0x3*0x3ce+0x121b+0x6a9*-0x1),_0x51359f[_0x2378dc*(-0x5*0x4a8+-0x589+-0x29f*-0xb)+(0x6*-0x206+-0x1343+0x1f69)]=_0x10af07(_0x16719a[_0x2378dc]>>>-0x295+-0x618+0x2e7*0x3,-0x8f9*-0x1+-0x20ae+0x17bd),_0x51359f[_0x2378dc*(-0x1cff+0xf2+-0x5*-0x59d)+(-0x2231+0x31*0x41+-0x3*-0x741)]=_0x10af07(_0x16719a[_0x2378dc],0x1b9a+-0x1948+-0x24a);return _0x51359f;},_0x40eb7b=_0x5d8982=>{const _0x327868=new Float32Array(_0x5d8982['length']*(-0x35+-0xae6+-0x2*-0x58f)),_0x20e0bc=(0x1545*0x1+-0x1471+0x1*-0xd3)/(Math['sqrt'](-0xf7*-0x6+-0x15da+0x1012)*(0x254c+0x64d*0x1+-0x2b99+0.5));for(let _0x2489d9=-0x1ffa+-0x1223+0x321d;_0x2489d9<_0x5d8982['length'];_0x2489d9++){const _0x4d3ae4=(_0x10af07(_0x5d8982[_0x2489d9]>>>0x2539+0x8c+-0x25b1,0x257c+0x895*-0x3+-0x5*0x257)-(0x24cb+-0x26c5+-0xb*-0x2e+0.5))*_0x20e0bc,_0x4dcf77=(_0x10af07(_0x5d8982[_0x2489d9]>>>-0x193b+0xa4*0x3b+-0xc87,-0x25e0+-0x2f*-0xcb+-0x21*-0x5)-(-0x1*0x1fff+0xa4a+0x15b5+0.5))*_0x20e0bc,_0x3ca03a=(_0x10af07(_0x5d8982[_0x2489d9],-0xf98+0x170c+-0x49*0x1a)-(0x262d+0x258a*0x1+-0x5b*0xd5+0.5))*_0x20e0bc,_0x255944=Math['sqrt'](-0x19ad+0x240e+0x298*-0x4-(_0x4d3ae4*_0x4d3ae4+_0x4dcf77*_0x4dcf77+_0x3ca03a*_0x3ca03a));let _0x408f37=0xf*0xe+0xac6+-0xb98,_0x116596=-0x6d*-0x41+-0x24fb+-0x18d*-0x6,_0x340bf5=0x1ece+0x765+0x7*-0x575,_0x900a5d=0x241c+-0x30*0x70+0x3c7*-0x4;switch(_0x5d8982[_0x2489d9]>>>-0x9bc+-0x262a+0x3004){case-0x1d5*-0x1+-0x102d+-0x1cb*-0x8:_0x408f37=_0x255944,_0x116596=_0x4d3ae4,_0x340bf5=_0x4dcf77,_0x900a5d=_0x3ca03a;break;case 0xa4f*0x2+-0x2516+0x1079:_0x408f37=_0x255944,_0x116596=_0x4dcf77,_0x340bf5=_0x3ca03a,_0x900a5d=_0x4d3ae4;break;case 0x1*-0x92f+-0x13cf+0x1d00:_0x408f37=_0x4dcf77,_0x116596=_0x255944,_0x340bf5=_0x3ca03a,_0x900a5d=_0x4d3ae4;break;case-0x1572+-0x1*-0xfd3+0x5a2:_0x408f37=_0x4dcf77,_0x116596=_0x3ca03a,_0x340bf5=_0x255944,_0x900a5d=_0x4d3ae4;break;}const _0x48bdac=_0x529677(_0x408f37,_0x116596,_0x340bf5,_0x900a5d);_0x327868[_0x2489d9*(0x81+0x1d07+-0x1d85)]=_0x48bdac['x'],_0x327868[_0x2489d9*(-0xe*0x2c3+-0x7fb+0x2*0x1754)+(-0x22fd+0x19*-0x53+-0x3eb*-0xb)]=_0x48bdac['y'],_0x327868[_0x2489d9*(0x24c4+0x999*-0x4+-0x1a3*-0x1)+(-0x5e9+0x1aef+-0x1504)]=_0x48bdac['z'];}return _0x327868;},_0x703656=(_0x57d7ac,_0x51d23a,_0xd35078)=>{const _0xccbbb1=_0xd35078-_0x51d23a,_0x38f590=new Float32Array(_0x57d7ac['length']);for(let _0x374b13=-0x14ef+-0x240e+0x38fd;_0x374b13<_0x57d7ac['length'];_0x374b13++)_0x38f590[_0x374b13]=_0x57d7ac[_0x374b13]/(-0x26d*0x5+-0x26e+0xf8e)*_0xccbbb1+_0x51d23a;return _0x38f590;},_0x2438bb=new Float32Array(-0x2e9*0x4+0x2*0xd13+-0xe81),_0x2fcdec=new Int32Array(_0x2438bb['buffer']),_0x47103a=_0x8de9c=>{_0x2438bb[-0x1b96+-0x3d7*0x7+0x3677]=_0x8de9c;const _0x566b65=_0x2fcdec[-0x136d*-0x1+0x1*-0x20b1+0x1*0xd44];let _0x2da55f=_0x566b65>>-0x1*-0xc9a+-0x4ee+0x79c*-0x1&0x2c73*0x1+0xd1da+-0x120b*0x7,_0x16056c=_0x566b65>>-0x1b1*-0x3+0xe8*0x10+0x1*-0x1387&0xf42*0x2+-0x87e+0x1*-0xe07;const _0x32f9f0=_0x566b65>>-0x1bf*0x1+-0x61c+0x7f2&-0x14ef+0x1f*0x13+0x13a1;return _0x32f9f0<-0x14b5+-0x1008+0x2524?_0x2da55f:_0x32f9f0>0x5*0x553+0x23f8+-0x3e09?(_0x2da55f|=-0x3e5+0x1*0xcad0+-0x4aeb,_0x2da55f|=(_0x32f9f0===0x9f7+-0x1*0x1244+0x94c?0x1773+-0x1f04+-0x1*-0x791:-0x1*0xeed+0x1*-0xf12+0x6*0x500)&&_0x566b65&0xbb4737+0xf6537c+-0x1319ab4,_0x2da55f):_0x32f9f0<0x187*-0x13+-0x1*-0x2531+-0x1*0x7bb?(_0x16056c|=-0x202+0x1*0x25f7+0x1a5*-0x11,_0x2da55f|=(_0x16056c>>0x578+0x1972+0x8*-0x3cf-_0x32f9f0)+(_0x16056c>>0x12d*0x3+0xba*-0x1d+0x11fc*0x1-_0x32f9f0&0xc9b*0x1+-0x1777*-0x1+-0x2411),_0x2da55f):(_0x2da55f|=_0x32f9f0-(-0x23ca+-0x20df+0x4519)<<-0x1*0x1288+-0x124f+0x24e1|_0x16056c>>0x14a3+-0x161b+0x179,_0x2da55f+=_0x16056c&-0x14f*-0x5+0xf2*0x8+-0xe1a,_0x2da55f);},_0x16d055=_0x415ea6=>{const _0x5274d1=new Uint16Array(_0x415ea6['length']);for(let _0x472a21=-0x5*-0x20e+0x93d+-0x1383;_0x472a21<_0x415ea6['length']/(-0x1*-0x12ee+0x1*-0x949+-0x9a1);++_0x472a21)_0x5274d1[_0x472a21*(-0x1*0x2109+-0x703+0x1408*0x2)]=_0x47103a(_0x415ea6[_0x472a21*(-0x101e+-0x1138*-0x2+-0x2*0x927)]*_0x95e07a+(-0x1*-0xbc3+-0x2*0xf59+0x12ef*0x1+0.5)),_0x5274d1[_0x472a21*(0x759+-0x107+-0x64e)+(0x2401+0x2ea+-0x26ea)]=_0x47103a(_0x415ea6[_0x472a21*(-0x734+-0x1820+0x1f58)+(-0x1*0x1ba7+0x1204*0x2+-0x860)]*_0x95e07a+(-0x726*-0x2+0xf49+-0x1d95+0.5)),_0x5274d1[_0x472a21*(0x1c1*-0xd+0x1a5a+0x1*-0x389)+(0xe96+-0x2687+0x17f3)]=_0x47103a(_0x415ea6[_0x472a21*(0x24ea+0x2436+-0x491c)+(-0x3*0xbb6+0x15*-0xd+0x2435)]*_0x95e07a+(-0x3*0x7a5+0xbe6+-0x5*-0x235+0.5)),_0x5274d1[_0x472a21*(0x26a0+0x1f*-0xc+-0x2528)+(-0x14c0+0x5*0x7a5+0x1e*-0x95)]=_0x47103a(_0x415ea6[_0x472a21*(-0x1250+0x7*-0x16b+-0x3*-0x96b)+(0x125*-0x7+0x24b9+-0x1cb3)]);return _0x5274d1;},_0x22ef4a=new _0x4eab4c(-0xd3*-0x1+-0x2307+0x2234,0x5*0x56d+0x16c7+0x8*-0x63d,-0x16a9+0x25c0+-0xf17,-0x26*0x75+0x1*0xdb2+0xbc*0x5),_0x529677=(_0x590c08,_0x53d9d4,_0x35696a,_0x48d34e)=>(_0x22ef4a['set'](_0x53d9d4,_0x35696a,_0x48d34e,_0x590c08),_0x22ef4a['normalize'](),_0x22ef4a['w']<0x1e89+0x25c1+0x444a*-0x1&&_0x22ef4a['mulScalar'](-(0x23f9+-0x1*0x8cb+-0x1b2d)),_0x22ef4a);function _0x421a26(_0x7bd491,_0x8d350f,_0x42aab0,_0x1ac46e,_0x1af5a5){const _0x13fe82=_0x1af5a5[Object['keys'](_0x1af5a5)[-0x14e1*-0x1+-0x1*0x1bf4+-0x1*-0x713]]['length'],_0x1cc5e4=-0x200f+0x1797+0x1*0x978;let _0x5ecef6=[],_0x498ae9=_0x8d350f;for(let _0x9b3ad0=-0x2*0x66a+-0x3*-0xb5c+-0x440*0x5;_0x9b3ad0<_0x13fe82;_0x9b3ad0++){const _0x44f290=Math['min'](_0x1cc5e4,_0x498ae9);_0x5ecef6['push'](_0x44f290),_0x498ae9-=_0x44f290;}let _0x1860db=-0x48e*-0x6+0x200d+-0x3b61,_0x3551da={};for(let _0x2f5490 of _0x42aab0){const _0x2026b8=_0x2f5490['name'],{dataSize:_0x31fd2b,datatype:_0x4d4e40}=_0x1dbf21(_0x2f5490,_0x8d350f);let _0x256cc5=_0x7bd491['buffer']['slice'](_0x1860db,_0x1860db+_0x31fd2b),_0x38c657=new _0x4d4e40(_0x256cc5);_0x3551da[_0x2026b8]=_0x38c657,_0x1860db+=_0x31fd2b;}let _0x1599d5=[],_0x5b125f=0x33*-0x8e+-0x1*-0xd25+-0x1*-0xf25;for(let _0x394ce1=0x9c+0x1e52*0x1+0x4a*-0x6b;_0x394ce1<_0x13fe82;_0x394ce1++){const _0x256f55=_0x3d1285(_0x3551da,_0x1af5a5,_0x394ce1,_0x5ecef6,_0x5b125f,_0x42aab0),_0x3ff090=_0x256f55['chunkDecom'+'pressed'];_0x1599d5['push'](_0x3ff090),_0x5b125f=_0x256f55['chunkStart'+'Idx'];}let _0x4eb80f={};for(let _0x2829c2 of Object['keys'](_0x1599d5[-0x10d0+-0x277*-0x5+0x47d])){let _0x262c1b=-0xb46+0x25f5+0x9*-0x2f7;for(let _0xdfd0f9=-0x147e+0x2225+-0xda7;_0xdfd0f9<_0x1599d5['length'];_0xdfd0f9++)_0x262c1b+=_0x1599d5[_0xdfd0f9][_0x2829c2]['length'];_0x2829c2==='color_opac'+'ity'||_0x2829c2==='scale'?_0x4eb80f[_0x2829c2]=new Uint16Array(_0x262c1b):_0x4eb80f[_0x2829c2]=new Float32Array(_0x262c1b);let _0x4ef09e=-0x19*0xbe+-0x1*-0x253d+-0x1*0x12af;for(let _0x30a34b=-0x1*0x1eb2+0x1*-0x5bc+0x1*0x246e;_0x30a34b<_0x1599d5['length'];_0x30a34b++)_0x4eb80f[_0x2829c2]['set'](_0x1599d5[_0x30a34b][_0x2829c2],_0x4ef09e),_0x4ef09e+=_0x1599d5[_0x30a34b][_0x2829c2]['length'];}return _0x42aab0['some'](_0x452e4d=>_0x452e4d['name']==='feature_re'+'st')&&(_0x4eb80f['feature_re'+'st']=_0x4d8748(_0x3551da,_0x42aab0)),_0x4eb80f['time_index']=new Float32Array(_0x8d350f),_0x4eb80f['time_index']['fill'](_0x1ac46e-(0x10fb+-0x1217*0x1+-0x39*-0x5)),_0x4eb80f;}const _0x3d1285=(_0x529ba9,_0x3f6f14,_0x494ba4,_0x12b39e,_0x51bf84,_0x45d193)=>{const _0x1a1843=_0x12b39e[_0x494ba4],_0x43dad4=_0x51bf84+_0x1a1843,_0xf38476=(_0x2f3376,_0x4df373,_0x576e35)=>_0x2f3376*(0x953+-0xa02+0xb0-_0x576e35)+_0x4df373*_0x576e35;let _0x67ab06={};for(let _0x4c7e7d of _0x45d193){const _0x214ae1=_0x4c7e7d['name'],_0x3cb199=_0x4c7e7d['encoding']['codec'],_0x8543fd=_0x529ba9[_0x214ae1]['slice'](_0x51bf84,_0x43dad4);if(_0x3cb199==='pack_11_10'+'_11'){if(_0x214ae1==='scale'){const _0x38f7df=_0x3f6f14['min_scales'][_0x494ba4],_0x5e6973=_0x3f6f14['max_scales'][_0x494ba4],_0x2e3021=_0x405875(_0x8543fd),_0x4a2ffc=_0x2e3021['length'],_0x4e52cf=new Uint16Array(_0x4a2ffc);for(let _0x439456=0x31*0x4+0x1665+-0x1729;_0x439456<_0x4a2ffc;_0x439456++)_0x4e52cf[_0x439456]=_0x47103a(Math['exp'](_0xf38476(_0x38f7df[_0x439456%(-0x2347*-0x1+-0x1a3d+-0x1*0x907)],_0x5e6973[_0x439456%(0x2*-0xc4c+0x1*0x248e+-0xa1*0x13)],_0x2e3021[_0x439456])));_0x67ab06[_0x214ae1]=_0x4e52cf;}else{const _0x1655c3=_0x405875(_0x8543fd);let _0x2bed5c,_0x476e4c;if(_0x214ae1==='position')_0x2bed5c=_0x3f6f14['min_means'][_0x494ba4],_0x476e4c=_0x3f6f14['max_means'][_0x494ba4];else{if(_0x214ae1==='motion')_0x2bed5c=_0x3f6f14['min_motion'][_0x494ba4],_0x476e4c=_0x3f6f14['max_motion'][_0x494ba4];else{if(_0x214ae1==='lifecycle'){const _0x357eb2=_0x3f6f14['min_t_scal'+'e'][_0x494ba4],_0x1c168b=_0x3f6f14['max_t_scal'+'e'][_0x494ba4],_0x210a5a=_0x3f6f14['min_time'][_0x494ba4],_0x136dd9=_0x3f6f14['max_time'][_0x494ba4],_0x2739c7=_0x3f6f14['min_cutoff'][_0x494ba4],_0xdb33d3=_0x3f6f14['max_cutoff'][_0x494ba4];_0x2bed5c=[_0x357eb2[0x1f9d+-0x59*0x4c+0x1*-0x531],_0x210a5a[-0x1*0x1328+0x17*-0x10d+-0xe71*-0x3],_0x2739c7[-0x9b7+0x1104+0x26f*-0x3]],_0x476e4c=[_0x1c168b[0x26f5+0x165e+-0x3d53],_0x136dd9[0x15be+-0x1174+-0x44a],_0xdb33d3[0x4*0x77f+0x9*-0x13c+-0x12e0]];}else throw new Error('Unknown\x20at'+'tribute\x20fo'+'r\x20pack_11_'+'10_11:\x20'+_0x214ae1);}}for(let _0x210dd6=-0x1659+-0x7bb*0x2+0x25cf*0x1;_0x210dd6<_0x1655c3['length'];_0x210dd6++)_0x1655c3[_0x210dd6]=_0xf38476(_0x2bed5c[_0x210dd6%(0x56f+0x2*0x7fd+-0xab3*0x2)],_0x476e4c[_0x210dd6%(0x907*-0x3+0x8f5+0x1223)],_0x1655c3[_0x210dd6]);_0x67ab06[_0x214ae1]=_0x1655c3;}}else{if(_0x3cb199==='pack_8888'){let _0x16f7e9=_0x7b8945(_0x8543fd);const _0x3fa343=_0x3f6f14['min_colors'][_0x494ba4],_0x3350f1=_0x3f6f14['max_colors'][_0x494ba4],_0x2ad882=new Uint16Array(_0x16f7e9['length']);for(let _0x402002=0x60b*0x5+0x13f6*0x1+-0x322d;_0x402002<_0x16f7e9['length'];_0x402002++){const _0x11c71b=_0x402002*(0xea8+-0xa87+-0x41d);_0x2ad882[_0x11c71b]=_0x47103a(_0xf38476(_0x3fa343[-0x1fc*-0x9+0x217d*0x1+-0x5*0xa45],_0x3350f1[0x6d2+-0xde8+0x1*0x716],_0x16f7e9[_0x11c71b])),_0x2ad882[_0x11c71b+(0x284*-0xb+-0x3a5+-0xd3*-0x26)]=_0x47103a(_0xf38476(_0x3fa343[0x1333*0x1+0x1*0x136b+-0x269d],_0x3350f1[-0xa8d+0x169c+0xc0e*-0x1],_0x16f7e9[_0x11c71b+(0x1*0x1a54+0x2de*-0x7+-0x641)])),_0x2ad882[_0x11c71b+(-0x1*-0x13af+0xc9a+-0x2047)]=_0x47103a(_0xf38476(_0x3fa343[0x1e02*-0x1+0x13*-0xdf+0x2e91],_0x3350f1[-0xf45*0x1+-0x173*-0x11+-0x95c],_0x16f7e9[_0x11c71b+(-0x1*0x127d+0xb*-0x17+-0x4*-0x4df)])),_0x2ad882[_0x11c71b+(0x109f+0x14bb+0x79*-0x4f)]=_0x47103a(_0x16f7e9[_0x11c71b+(0x5e3*-0x3+-0x10c3+-0x29*-0xd7)]);}_0x67ab06[_0x214ae1]=_0x2ad882;}else{if(_0x3cb199==='pack_rotat'+'ion_32'){const _0x15dd8d=_0x40eb7b(_0x8543fd);_0x67ab06[_0x214ae1]=_0x15dd8d;}else{if(_0x3cb199==='range_quan'+'t_u8'){if(_0x214ae1==='feature_re'+'st')continue;throw new Error('Unknown\x20co'+'dec:\x20'+_0x3cb199);}}}}}return{'chunkDecompressed':_0x67ab06,'chunkStartIdx':_0x43dad4};},_0x4d8748=(_0x389ce1,_0x4d2195)=>{const _0x3e3ffc='feature_re'+'st',_0x50c010=_0x4d2195['find'](_0x256164=>_0x256164['name']===_0x3e3ffc);let _0x3cc23a;const _0x471649=_0x50c010['encoding']['codec'],_0x1b7a2d=_0x389ce1[_0x3e3ffc];if(_0x471649==='range_quan'+'t_u8'){const [_0x4145fd,_0x38a102]=_0x50c010['encoding']['range'];_0x3cc23a=_0x703656(_0x1b7a2d,_0x4145fd,_0x38a102);}else throw new Error('Unknown\x20co'+'dec:\x20'+_0x471649);return _0x3cc23a;},_0x66b827=(_0x134f93,_0x68a627,_0x1a530c,_0x26a173)=>{let _0x598f6c=-0x26c1*-0x1+0x1*-0x7f+-0x3b*0xa6;const _0x45942c={};for(const _0x2a8ad6 of _0x1a530c){const {dataSize:_0x5ea7de}=_0x1dbf21(_0x2a8ad6,_0x68a627);if(['vec3f','vec4f','vec2f']['includes'](_0x2a8ad6['dataType']))_0x45942c[_0x2a8ad6['name']]=new Float32Array(_0x134f93['buffer']['slice'](_0x598f6c,_0x598f6c+_0x5ea7de));else{if(_0x2a8ad6['dataType']['startsWith']('array<floa'+'t'))_0x45942c[_0x2a8ad6['name']]=new Float32Array(_0x134f93['buffer']['slice'](_0x598f6c,_0x598f6c+_0x5ea7de));else throw new Error('Unsupporte'+'d\x20data\x20typ'+'e:\x20'+_0x2a8ad6['dataType']);}_0x598f6c+=_0x5ea7de;}const _0x5877ef=new Uint16Array(_0x45942c['scale']['length']);for(let _0x2ae8dc=-0xe84+0x10e3+-0x25f*0x1;_0x2ae8dc<_0x45942c['scale']['length'];_0x2ae8dc++)_0x5877ef[_0x2ae8dc]=_0x47103a(Math['exp'](_0x45942c['scale'][_0x2ae8dc]));_0x45942c['scale']=_0x5877ef;const _0x3219b9=_0x45942c['rotation']['length']/(0x80e*-0x1+-0x7*0xdc+0xe16),_0xf16ab0=new Float32Array(_0x3219b9*(-0x1*-0x1aa7+-0x1001+-0xaa3*0x1));for(let _0x11c6ee=-0x3*0xce5+-0xbae+0x325d;_0x11c6ee<_0x3219b9;_0x11c6ee++){const _0xb167a3=_0x529677(_0x45942c['rotation'][_0x11c6ee*(0x2e*0xd+-0x1cd7+0x1a85)],_0x45942c['rotation'][_0x11c6ee*(0x3*-0x95c+0x2e*0x47+0xf56)+(0x2*-0x7e1+-0x1b4b+0x2b0e*0x1)],_0x45942c['rotation'][_0x11c6ee*(-0x1abb+-0x1edf+0x399e)+(0x7*-0x4a8+-0xa3*0x1f+-0x1*-0x3457)],_0x45942c['rotation'][_0x11c6ee*(0x1b39+0x1*0x20fb+-0x3c30*0x1)+(0x25*-0x74+-0x1c7+-0xa*-0x1db)]);_0xf16ab0[_0x11c6ee*(0x20e+-0xa0+-0x21*0xb)]=_0xb167a3['x'],_0xf16ab0[_0x11c6ee*(0x18d9*0x1+-0x1*-0x773+0x1*-0x2049)+(-0xfa2+-0x1482+-0x2425*-0x1)]=_0xb167a3['y'],_0xf16ab0[_0x11c6ee*(-0x201f*0x1+0xf1a*0x1+0x1*0x1108)+(0x143*0xb+0x1880+-0xd1*0x2f)]=_0xb167a3['z'];}return _0x45942c['rotation']=_0xf16ab0,_0x45942c['color_opac'+'ity']=_0x16d055(_0x45942c['color_opac'+'ity']),_0x45942c['time_index']=new Float32Array(_0x68a627),_0x45942c['time_index']['fill'](_0x26a173-(-0x1e5b+-0x1bda+0x3a36)),_0x45942c;},_0x10ca81=(_0x2ebfe3,_0x27f71b)=>{const _0x48b4e6={};if(_0x2ebfe3['length']===0x1cdb+0x2155+-0x3e2f)return _0x2ebfe3[-0x1050+0x25b5+0x1565*-0x1];for(const _0x554e18 of Object['keys'](_0x2ebfe3[-0x3*0x4e6+-0x6d*-0x17+0x5*0xfb]))if(_0x2ebfe3[-0xfd+-0xb4*0x26+0x1bb5][_0x554e18]instanceof Float32Array||_0x2ebfe3[-0xef+0x2184+-0x2095][_0x554e18]instanceof Uint16Array){const _0x323772=_0x2ebfe3['reduce']((_0x121a3d,_0x3e5165)=>_0x121a3d+_0x3e5165[_0x554e18]['length'],0xa83+0x1*0xe6d+-0x18f0);let _0x589c07;_0x2ebfe3[0x15b6+-0x3a*-0x4+0x1e*-0xc1][_0x554e18]instanceof Uint16Array?_0x589c07=new Uint16Array(_0x323772):_0x589c07=new Float32Array(_0x323772);let _0x175045=-0x22b7*-0x1+-0x2433+0x17c;for(const _0x1dcd9b of _0x2ebfe3)_0x589c07['set'](_0x1dcd9b[_0x554e18],_0x175045),_0x175045+=_0x1dcd9b[_0x554e18]['length'];_0x48b4e6[_0x554e18]=_0x589c07;}else Array['isArray'](_0x2ebfe3[-0x1f6c+0x68a*0x3+-0x5e7*-0x2][_0x554e18])?_0x48b4e6[_0x554e18]=_0x2ebfe3['flatMap'](_0x1aca7b=>Array['from'](_0x1aca7b[_0x554e18])):_0x48b4e6[_0x554e18]=_0x2ebfe3['map'](_0x544260=>_0x544260[_0x554e18])['flat']();return _0x48b4e6;};}class hk extends me{constructor(_0x3f418d){super(),h(this,'manifestUr'+'l'),h(this,'worker'),(this['manifestUr'+'l']=_0x3f418d,this['_initWorke'+'r']());}async['_initWorke'+'r'](){this['worker']=new Worker(URL['createObje'+'ctURL'](new Blob(['('+ck['toString']()+')()'],{'type':'applicatio'+'n/javascri'+'pt'}))),this['worker']['postMessag'+'e']({'type':'initWorker','cborXUrl':'https://fr'+'ontend.4dv'+'-intellige'+'nce.com/vi'+'ewer-stati'+'c/cbor-x@1'+'.6.0.min.j'+'s'});}['loadGsdMan'+'ifest'](_0xab6565){var _0x2dfc60;return(_0x2dfc60=this['worker'])==null||_0x2dfc60['postMessag'+'e']({'type':'loadGsdMan'+'ifest','manifestUrl':this['manifestUr'+'l'],'loadRepresentation':_0xab6565}),new Promise((_0x4c30f9,_0x2f27cf)=>{if(!this['worker']){_0x2f27cf(new Error('no\x20worker'));return;}this['worker']['onmessage']=_0x575a95=>{if(!this['worker'])return;const {data:_0xc7e90f}=_0x575a95;if(this['manifestUr'+'l']===_0xc7e90f['url'])switch(_0xc7e90f['type']){case'onloadMani'+'fest':_0x4c30f9({'manifest':_0xc7e90f['data'],'url':_0xc7e90f['url'],'representation':_0xc7e90f['representa'+'tion']});break;case'error':_0x2f27cf(_0xc7e90f['data']);break;}};});}['loadGsdSeg'+'ments'](_0x450103,_0x52a26f){var _0x579552;return(_0x579552=this['worker'])==null||_0x579552['postMessag'+'e']({'type':'loadGsdSeg'+'ments'}),new Promise((_0x2cb7c3,_0x51717b)=>{if(!this['worker']){_0x51717b(new Error('no\x20worker'));return;}this['worker']['onmessage']=_0xb426ce=>{if(!this['worker'])return;const {data:_0x5c7490}=_0xb426ce;if(this['manifestUr'+'l']===_0x5c7490['url'])switch(_0x5c7490['type']){case'progress':_0x450103==null||_0x450103(_0x5c7490['bytes'],_0x5c7490['totalLengt'+'h'],_0x5c7490['url']);break;case'loadGsdSeg'+'mentsDone':_0x2cb7c3(_0x5c7490['data']);break;case'error':_0x52a26f==null||_0x52a26f(_0x5c7490['data'],_0x5c7490['url']);break;}};});}['loadGsdSeg'+'mentsByTim'+'elineIndex'](_0x838f5e,_0xe5c9eb,_0x5e2a2c){var _0x2f16eb;return(_0x2f16eb=this['worker'])==null||_0x2f16eb['postMessag'+'e']({'type':'loadTimeli'+'neIndexSeg'+'ments','timelineIndexs':_0x838f5e}),new Promise((_0x4aff1d,_0x34f839)=>{if(!this['worker']){_0x34f839(new Error('no\x20worker'));return;}this['worker']['onmessage']=_0x52dd25=>{if(!this['worker'])return;const {data:_0x21942e}=_0x52dd25;if(this['manifestUr'+'l']===_0x21942e['url'])switch(_0x21942e['type']){case'progress':_0xe5c9eb==null||_0xe5c9eb(_0x21942e['bytes'],_0x21942e['totalLengt'+'h'],_0x21942e['url']);break;case'loadTimeli'+'neIndexSeg'+'mentsDone':_0x4aff1d(_0x21942e);break;case'error':_0x5e2a2c==null||_0x5e2a2c(_0x21942e['data'],_0x21942e['url']);break;}};});}['destroy'](){this['worker']&&(this['worker']['postMessag'+'e']({'type':'destroyWor'+'ker'}),this['worker']['terminate'](),this['worker']=void(-0x898+-0x11*0x112+0x1aca));}}const Xh=class Xh{constructor(_0xceeb8,_0x1f8eb5,_0x550760){h(this,'lastLoadIn'+'dex',-0x24c5+-0x2*0xd9d+-0x2b*-0x17d),h(this,'gsdAssetPa'+'rser'),(this['manifest']=_0xceeb8,this['representa'+'tion']=_0x1f8eb5,this['gsdAssetPa'+'rser']=_0x550760,this['segmentTim'+'elines']=this['getSegment'+'Timeline'](_0xceeb8,_0x1f8eb5));}['getSegment'+'Timeline'](_0x568e93,_0xd0394){let _0x412363=null;for(const _0x4ceff5 of _0x568e93['adaptation'+'Sets'])if(_0x4ceff5['contentTyp'+'e']==='4dgs'){for(const _0x3443b9 of _0x4ceff5['representa'+'tions'])if(_0x3443b9['id']===_0xd0394){_0x412363=_0x3443b9;break;}break;}if(!_0x412363)throw new Error('Representa'+'tion\x20\x27'+_0xd0394+('\x27\x20not\x20foun'+'d'));return _0x412363['segmentTem'+'plate'][0x1*-0x6b9+0x1f82+-0x18c9]['segmentTim'+'eline'];}['onTimeChan'+'ged'](_0x2c6d9b){const _0xaee1db=this['findSegmen'+'tTimeline'](_0x2c6d9b);if(!_0xaee1db)return;const _0x1644fe=_0xaee1db['timelineIn'+'dex']<this['segmentTim'+'elines']['length']-(0x78*-0x34+0x1628+0x239)?_0xaee1db['timelineIn'+'dex']+(0x8b5+-0x32e+-0x1*0x586):0x1590+0x8*0x44d+-0x37f8;this['lastLoadIn'+'dex']!==_0x1644fe&&(this['lastLoadIn'+'dex']=_0x1644fe,this['loadNextSe'+'gment'](_0x1644fe));}async['loadNextSe'+'gment'](_0x2f4118){const _0x510ddf=[];for(let _0x5b2a44=0x50b+-0x1ff0+0x1ae5;_0x5b2a44<Xh['CACHE_COUN'+'T'];_0x5b2a44++)_0x510ddf['push']((_0x2f4118+_0x5b2a44)%this['segmentTim'+'elines']['length']);const _0x17687d=_0x510ddf[_0x510ddf['length']-(0x1*-0x1e2b+0x249d+-0x671)],_0xdb1137=this['segmentTim'+'elines'][_0x17687d]['t']+this['segmentTim'+'elines'][_0x17687d]['d'];this['gsdAssetPa'+'rser']['appendload'+'DataTask'](_0x510ddf,_0xdb1137);}['findSegmen'+'tTimeline'](_0x3db4d9){let _0x2127e9=0x16af+-0x26b6+0x1007,_0x2e3291=this['segmentTim'+'elines']['length']-(-0x264c+-0x2397+0x49e4);for(;_0x2127e9<=_0x2e3291;){const _0x34a126=_0x2127e9+_0x2e3291>>0x1ce7+0x7*-0x350+0x22*-0x2b,{t:_0x299b90,d:_0x2fe55a}=this['segmentTim'+'elines'][_0x34a126];if(_0x3db4d9<_0x299b90)_0x2e3291=_0x34a126-(0xa*0x146+-0x1191+-0x2*-0x26b);else{if(_0x3db4d9>=_0x299b90+_0x2fe55a)_0x2127e9=_0x34a126+(-0xa7d*0x1+-0x43*-0xb+-0x79d*-0x1);else return{'timeline':this['segmentTim'+'elines'][_0x34a126],'timelineIndex':_0x34a126};}}return null;}};h(Xh,'CACHE_COUN'+'T',-0xfe3+0x1a89*0x1+-0xaa0);let Wu=Xh;class dk{constructor(_0x569fb1,_0x56f36b){h(this,'urlList'),h(this,'app'),h(this,'maxRetries'),h(this,'gsplatReso'+'urce'),h(this,'onlyOneAss'+'et'),h(this,'manifest'),h(this,'schedule'),h(this,'readWorker'),h(this,'loadDataTa'+'skQueue',[]),h(this,'isProcessi'+'ngLoadTask'+'Queue',!(-0x176+0x2463+0x5d2*-0x6)),(console['log']('____\x20GSDJS'+'\x20ENGINE\x20IV'+'AN','Register\x20G'+'sdParser.c'+'onstructor'),this['app']=_0x569fb1,this['maxRetries']=_0x56f36b,this['urlList']=[],this['gsplatReso'+'urce']=null,this['totalRecei'+'ved']=-0x1ab6+0x1*0x221+0x1895*0x1,this['manifest']={});}async['load'](_0x50ccf7,_0x16007d,_0x36c686){console['log']('____\x20GSDJS'+'\x20ENGINE\x20IV'+'AN','GsdParser.'+'load',_0x50ccf7['load']);const _0x2d519d=_0x36c686['data']['events'];this['events']=_0x2d519d,this['asset']=_0x36c686,this['callback']=_0x16007d,this['timeOption']=_0x36c686['data']['timeOption'];let _0x45e3f9=_0x36c686['data']['representa'+'tion']||'high-raw';this['readWorker']=new hk(_0x50ccf7['load']);const _0xe6ec3f=await this['readWorker']['loadGsdMan'+'ifest'](_0x45e3f9);this['manifest']=_0xe6ec3f['manifest'],_0x45e3f9=_0xe6ec3f['manifest']['representa'+'tion']||_0x45e3f9,this['schedule']=new Wu(this['manifest'],_0x45e3f9,this),this['totalRecei'+'vedCount']=-0xe78*-0x1+0x14da+-0x2352;const _0x5a71b4=this['getSegment'+'Timeline'](this['manifest'],_0x45e3f9),_0x4fdd9f=_0x5a71b4[0x4d5+-0xc4b*0x1+0x776]['t']+_0x5a71b4[0x14d8+0xfc9+0x24a1*-0x1]['d'];this['appendload'+'DataTask']([-0x1*0x2381+-0x6aa*-0x5+0x22f*0x1,0x15b0*-0x1+0x8aa+0x1*0xd07],_0x4fdd9f),_0x2d519d['on']('timeChange'+'d',_0x56b16b=>{var _0x1238b6;(_0x1238b6=this['schedule'])==null||_0x1238b6['onTimeChan'+'ged'](_0x56b16b);});}['getSegment'+'Timeline'](_0x40073a,_0x586426){let _0x215100=null;for(const _0x2dd9a8 of _0x40073a['adaptation'+'Sets'])if(_0x2dd9a8['contentTyp'+'e']==='4dgs'){for(const _0x2786f6 of _0x2dd9a8['representa'+'tions'])if(_0x2786f6['id']===_0x586426){_0x215100=_0x2786f6;break;}break;}if(!_0x215100)throw new Error('Representa'+'tion\x20\x27'+_0x586426+('\x27\x20not\x20foun'+'d'));return _0x215100['segmentTem'+'plate'][-0x266*0x10+0x3*-0xb53+0x4859]['segmentTim'+'eline'];}['appendload'+'DataTask'](_0x5babd9,_0x173fb0){this['loadDataTa'+'skQueue']['push']({'segmentIndexs':_0x5babd9,'loadedTime':_0x173fb0}),this['isProcessi'+'ngLoadTask'+'Queue']||Promise['resolve']()['then'](()=>this['processLoa'+'dQueue']());}async['processLoa'+'dQueue'](){if(!this['isProcessi'+'ngLoadTask'+'Queue']){this['isProcessi'+'ngLoadTask'+'Queue']=!(-0x1da+-0x1*-0x1fbe+-0xef2*0x2);try{for(;this['loadDataTa'+'skQueue']['length']>-0x445*0x1+-0xd*0x97+0xbf0;){const _0xe3f7e4=this['loadDataTa'+'skQueue']['shift']();await this['loadGsplat'+'Data'](_0xe3f7e4);}}finally{this['isProcessi'+'ngLoadTask'+'Queue']=!(-0x440+0x10*-0x1a8+-0x1*-0x1ec1);}}}async['loadGsplat'+'Data'](_0x446c9e){var _0x52a1ff,_0x1760fe;const {segmentIndexs:_0x154109,loadedTime:_0x1e4fbe}=_0x446c9e,_0x2f9b4a=this['events'],_0x24d60a=this['asset'],_0x2ec04c=this['callback'],_0x18a2ab=this['timeOption'];globalThis['loadGsplat'+'DataStartT'+'ime']=performance['now'](),console['log']('____loadTi'+'me','gsd\x20======'+'=========='+'=========='+'=========='+'=========='+'========='),console['log']('____loadTi'+'me','gsd\x20start\x20'+'loadGsplat'+'Data',_0x154109,(performance['now']()-globalThis['loadGsplat'+'DataStartT'+'ime'])['toFixed'](0x3*-0xc3e+-0x25c4+0x10*0x4a8));try{const _0x15c7c7=await this['readWorker']['loadGsdSeg'+'mentsByTim'+'elineIndex'](_0x154109,(_0x4cda9b,_0x3fb81e)=>{this['totalRecei'+'ved']+=_0x4cda9b,_0x24d60a&&_0x2f9b4a['fire']('progress',this['totalRecei'+'ved'],_0x3fb81e);},(_0x3679a4,_0x1d9e48)=>{debugger;console['warn']('ERROE\x20Load'+'\x20GSD',_0x1d9e48,_0x3679a4);});console['log']('____loadTi'+'me','gsd\x20end\x20lo'+'adGsplatDa'+'ta',(performance['now']()-globalThis['loadGsplat'+'DataStartT'+'ime'])['toFixed'](-0x19b4+-0x8*0x151+0x243e),_0x15c7c7['data']['elements'][0x28a*-0x1+0x4*0x677+-0x255*0xa]['count'],((performance['now']()-globalThis['loadGsplat'+'DataStartT'+'ime'])/_0x15c7c7['data']['elements'][-0x1966*0x1+-0x2*0x629+0x25b8]['count']*(0x3987+-0x771*-0x6+-0x3f1d))['toFixed'](-0x221e+-0xf*0x197+0x123*0x33));const _0x247650=_0x15c7c7['data'];if(_0x247650['elements'][0x261a+0x78e*-0x3+0x98*-0x1a]['count']===0x106c+0x1*-0x244a+0x13de)return;this['totalRecei'+'vedCount']+=_0x247650['elements'][0x109d*-0x1+-0x1*-0x17cc+0x265*-0x3]['count'];const _0x163bbd=new iC(_0x247650['elements'],_0x247650['comments']);_0x24d60a['fire']('load:data',_0x163bbd);const _0x28b330=_0x24d60a['data']['createTime']!==((_0x1760fe=(_0x52a1ff=this['onlyOneAss'+'et'])==null?void(0x1*0x679+0x4*-0x6f2+0x154f):_0x52a1ff['data'])==null?void(-0x1e1f+0x20cd+-0x1*0x2ae):_0x1760fe['createTime']);this['gsplatReso'+'urce']&&!_0x28b330?(console['log']('____\x20ENGIN'+'E\x20IVAN','appendGSpl'+'atDecodedR'+'esource'),this['gsplatReso'+'urce']['appendGSpl'+'atResource'](_0x163bbd,_0x18a2ab,_0x1e4fbe,_0x24d60a)):(console['log']('____\x20ENGIN'+'E\x20IVAN','new\x20GSplat'+'DecodedRes'+'ource'),this['gsplatReso'+'urce']=new CC(this['app']['graphicsDe'+'vice'],_0x163bbd),this['gsplatReso'+'urce']['setSceneIn'+'fo'](this['manifest']['sceneInfo']),await this['gsplatReso'+'urce']['updateData'](),await this['gsplatReso'+'urce']['updateText'+'ure'](),this['gsplatReso'+'urce']['timeOption']=_0x18a2ab,this['onlyOneAss'+'et']=_0x24d60a,_0x2ec04c&&_0x2ec04c(null,this['gsplatReso'+'urce']),_0x2f9b4a['fire']('loadAllAss'+'etsDone'));}catch(_0x10cd69){console['error']('loadGsplat'+'Data','error',_0x10cd69),_0x2ec04c&&_0x2ec04c(_0x10cd69,null);}}['open'](_0x11020a,_0x2eb2d1){return _0x2eb2d1;}}class fk extends Qe{constructor(_0x5061cc){console['log']('____\x20ENGIN'+'E\x20IVAN','Register\x20G'+'SplatHandl'+'er.constru'+'ctor\x20by\x20ap'+'plication\x20'+'addResourc'+'eHandles'),super(_0x5061cc,'gsplat'),this['parsers']={'ply':new lk(_0x5061cc,-0x10b8+-0x10*-0x112+-0x65),'json':new dk(_0x5061cc,0x1*-0xaaf+-0x1ba0+0x2652)};}['_getUrlWit'+'houtParams'](_0x5a96ad){return _0x5a96ad['indexOf']('?')>=0x1*0x1be2+-0x10*-0xa9+0x1339*-0x2?_0x5a96ad['split']('?')[-0x258b+0x2589+-0x1*-0x2]:_0x5a96ad;}['_getParser'](_0x21b521){const _0xa8c084=xe['getExtensi'+'on'](this['_getUrlWit'+'houtParams'](_0x21b521))['toLowerCas'+'e']()['replace']('.','');return this['parsers'][_0xa8c084]||this['parsers']['ply'];}['load'](_0x5ee29f,_0x13d188,_0xfe47fa){console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatHand'+'ler.load'),typeof _0x5ee29f=='string'&&(_0x5ee29f={'load':_0x5ee29f,'original':_0x5ee29f}),this['_getParser'](_0x5ee29f['original'])['load'](_0x5ee29f,_0x13d188,_0xfe47fa);}['open'](_0x25746a,_0x5cb1d4,_0x539afe){return console['log']('____\x20ENGIN'+'E\x20IVAN','GSplatHand'+'ler.open'),_0x5cb1d4;}}class $u{static['setCompres'+'sedPRS'](_0x57788d,_0x605c4,_0x1f71f7){const _0x43ce51=_0x1f71f7['singleVecs'];let _0x18eed0,_0x1a895c;const _0x19d5a6=_0x605c4['___1'];_0x19d5a6||(_0x18eed0=_0x1f71f7['tripleVecs'],_0x1a895c=_0x605c4['___2']);let _0x36bbd3=_0x19d5a6?_0x19d5a6[-0x51b+-0x1acd+0x8*0x3fd]:_0x18eed0[_0x1a895c];_0x57788d['setLocalPo'+'sition'](_0x43ce51[_0x36bbd3],_0x43ce51[_0x36bbd3+(0x1632+0x1d86+0x1*-0x33b7)],_0x43ce51[_0x36bbd3+(0x159f+-0xfdd+-0x170*0x4)]),_0x36bbd3=_0x19d5a6?_0x19d5a6[0xad9*-0x1+-0x148a+0xe*0x23e]:_0x18eed0[_0x1a895c+(0x243a+-0xe1e+-0x161b)],_0x57788d['setLocalEu'+'lerAngles'](_0x43ce51[_0x36bbd3],_0x43ce51[_0x36bbd3+(-0xaa2+-0xc6b+0x1c6*0xd)],_0x43ce51[_0x36bbd3+(0xbc8*0x1+-0x37*0xa7+-0x809*-0x3)]),_0x36bbd3=_0x19d5a6?_0x19d5a6[-0x10e+0x1*-0xab7+0x3*0x3ed]:_0x18eed0[_0x1a895c+(-0x1*0x1ddb+-0x12e*-0x11+-0x3*-0x345)],_0x57788d['setLocalSc'+'ale'](_0x43ce51[_0x36bbd3],_0x43ce51[_0x36bbd3+(-0x1*0x989+-0xb37+0x14c1)],_0x43ce51[_0x36bbd3+(0x22d4+-0x14c8+0x257*-0x6)]);}static['oneCharToK'+'ey'](_0x1a943e,_0x204778){const _0x33bcb0=_0x1a943e['charCodeAt'](-0x1adf+0x6f1*0x3+0x2*0x306)-_0x204778['fieldFirst'+'Code'];return _0x204778['fieldArray'][_0x33bcb0];}static['multCharTo'+'Key'](_0x356886,_0x2bf5a1){let _0x32f4d8=0x7*-0x245+-0x6ee+0x1*0x16d1;for(let _0x3d0645=0x20fd+-0x1407+0x9e*-0x15;_0x3d0645<_0x356886['length'];_0x3d0645++)_0x32f4d8=_0x32f4d8*_0x2bf5a1['fieldCodeB'+'ase']+_0x356886['charCodeAt'](_0x3d0645)-_0x2bf5a1['fieldFirst'+'Code'];return _0x2bf5a1['fieldArray'][_0x32f4d8];}}class Uh{constructor(_0x1d949f,_0x27baac){this['_node']=_0x1d949f,this['_data']=_0x27baac;}['run'](){const _0x4334ec=Object['prototype']['toString']['call'](this['_node']);return _0x4334ec==='[object\x20Ob'+'ject]'?this['_handleMap']():_0x4334ec==='[object\x20Ar'+'ray]'?this['_handleArr'+'ay']():this['_result']=this['_node'],this['_result'];}['_handleMap'](){this['_result']={},Object['keys'](this['_node'])['forEach'](this['_handleKey'],this);}['_handleKey'](_0x5abdfb){let _0x365707=_0x5abdfb;const _0x72c7a6=_0x5abdfb['length'];_0x72c7a6===0x247b+0x7f*-0x17+-0x9*0x2c9?_0x365707=$u['oneCharToK'+'ey'](_0x5abdfb,this['_data']):_0x72c7a6===-0x184*-0x3+-0x11bc+0xd32&&(_0x365707=$u['multCharTo'+'Key'](_0x5abdfb,this['_data'])),this['_result'][_0x365707]=new Uh(this['_node'][_0x5abdfb],this['_data'])['run']();}['_handleArr'+'ay'](){this['_result']=[],this['_node']['forEach'](this['_handleArE'+'lt'],this);}['_handleArE'+'lt'](_0x51e2f5){const _0x167547=new Uh(_0x51e2f5,this['_data'])['run']();this['_result']['push'](_0x167547);}}class bm{constructor(_0x4726d5,_0x42c141){this['_app']=_0x4726d5,this['_isTemplat'+'e']=_0x42c141;}['parse'](_0x22f9eb){const _0x55b8e3={};let _0x190d85=null;const _0x222696=_0x22f9eb['compressed'+'Format'];_0x222696&&!_0x22f9eb['entDecompr'+'essed']&&(_0x22f9eb['entDecompr'+'essed']=!(-0x135*-0x4+-0x2eb+-0x1e9),_0x22f9eb['entities']=new Uh(_0x22f9eb['entities'],_0x222696)['run']());for(const _0xdc2a55 in _0x22f9eb['entities']){const _0x34d00c=_0x22f9eb['entities'][_0xdc2a55],_0x2a231a=this['_createEnt'+'ity'](_0x34d00c,_0x222696);_0x55b8e3[_0xdc2a55]=_0x2a231a,_0x34d00c['parent']===null&&(_0x190d85=_0x2a231a);}for(const _0x59cbf0 in _0x22f9eb['entities']){const _0x3293ad=_0x55b8e3[_0x59cbf0],_0x38d909=_0x22f9eb['entities'][_0x59cbf0]['children'],_0x5c0099=_0x38d909['length'];for(let _0x4f8dc8=-0x61*0xb+-0x14b0*-0x1+0x1085*-0x1;_0x4f8dc8<_0x5c0099;_0x4f8dc8++){const _0x281bca=_0x55b8e3[_0x38d909[_0x4f8dc8]];_0x281bca&&_0x3293ad['addChild'](_0x281bca);}}return this['_openCompo'+'nentData'](_0x190d85,_0x22f9eb['entities']),_0x190d85;}['_createEnt'+'ity'](_0x8074b7,_0x5e5031){const _0x5674df=new lt(_0x8074b7['name'],this['_app']);if(_0x5674df['setGuid'](_0x8074b7['resource_i'+'d']),this['_setPosRot'+'Scale'](_0x5674df,_0x8074b7,_0x5e5031),_0x5674df['_enabled']=_0x8074b7['enabled']??!(-0x1700+-0x15f*0x9+-0x53*-0x6d),this['_isTemplat'+'e']?_0x5674df['_template']=!(-0x25f*0x7+0x1*-0x3d+0x86b*0x2):_0x5674df['_enabledIn'+'Hierarchy']=_0x5674df['_enabled'],_0x5674df['template']=_0x8074b7['template'],_0x8074b7['tags']){for(let _0x590808=0x1*0x20a1+0x1*0x5+0x1053*-0x2;_0x590808<_0x8074b7['tags']['length'];_0x590808++)_0x5674df['tags']['add'](_0x8074b7['tags'][_0x590808]);}return _0x5674df;}['_setPosRot'+'Scale'](_0x418156,_0x17156e,_0x87237b){if(_0x87237b)$u['setCompres'+'sedPRS'](_0x418156,_0x17156e,_0x87237b);else{const _0x32b3b9=_0x17156e['position'],_0x4088fa=_0x17156e['rotation'],_0x1e2830=_0x17156e['scale'];_0x418156['setLocalPo'+'sition'](_0x32b3b9[0x1811+0x2595+-0x3da6*0x1],_0x32b3b9[-0x4cb+0x3*-0x3+0x4d5*0x1],_0x32b3b9[-0x2679+0x3*0xbe6+0x1f*0x17]),_0x418156['setLocalEu'+'lerAngles'](_0x4088fa[0x21ea+-0x191*0xb+-0x1*0x10af],_0x4088fa[0x19db+-0x1*0x265f+0xc85],_0x4088fa[0xa2f*-0x1+0x1a26*0x1+-0xd7*0x13]),_0x418156['setLocalSc'+'ale'](_0x1e2830[0xbfd*0x1+-0x21a5+-0xc6*-0x1c],_0x1e2830[0x5*-0x623+0x1926+0x58a],_0x1e2830[0x359*0x5+-0x1008+-0x1*0xb3]);}}['_openCompo'+'nentData'](_0x5ac1e5,_0x11af16){const _0x4468e9=this['_app']['systems']['list'];let _0x1dfbaf=_0x4468e9['length'];const _0x2a1935=_0x11af16[_0x5ac1e5['getGuid']()];for(let _0x3fe885=0x12b6+0xdb7+0xacf*-0x3;_0x3fe885<_0x1dfbaf;_0x3fe885++){const _0x4e561f=_0x4468e9[_0x3fe885],_0x392792=_0x2a1935['components'][_0x4e561f['id']];_0x392792&&_0x4e561f['addCompone'+'nt'](_0x5ac1e5,_0x392792);}_0x1dfbaf=_0x2a1935['children']['length'];const _0x379c75=_0x5ac1e5['_children'];for(let _0x56e939=-0xab*-0x19+0x1*-0x19be+-0x1*-0x90b;_0x56e939<_0x1dfbaf;_0x56e939++)_0x379c75[_0x56e939]?_0x379c75[_0x56e939]=this['_openCompo'+'nentData'](_0x379c75[_0x56e939],_0x11af16):w['warn']('Scene\x20data'+'\x20is\x20invali'+'d\x20where\x20a\x20'+'child\x20unde'+'r\x20\x22'+_0x5ac1e5['name']+('\x22\x20Entity\x20d'+'oesn\x27t\x20exi'+'st.\x20Please'+'\x20check\x20the'+'\x20scene\x20dat'+'a.'));return _0x5ac1e5;}}class E0{static['load'](_0x528380,_0x63fd50,_0x5adbad){typeof _0x528380=='string'&&(_0x528380={'load':_0x528380,'original':_0x528380}),ot['get'](_0x528380['load'],{'retry':_0x63fd50>-0x2c5+0x1e34+0x1*-0x1b6f,'maxRetries':_0x63fd50},(_0x3d8e16,_0x5ebc0e)=>{if(!_0x3d8e16)_0x5adbad(_0x3d8e16,_0x5ebc0e);else{let _0x239e22='Error\x20whil'+'e\x20loading\x20'+'scene\x20JSON'+'\x20'+_0x528380['original'];_0x3d8e16['message']?(_0x239e22+=':\x20'+_0x3d8e16['message'],_0x3d8e16['stack']&&(_0x239e22+='\x0a'+_0x3d8e16['stack'])):_0x239e22+=':\x20'+_0x3d8e16,_0x5adbad(_0x239e22);}});}}class uk extends Qe{constructor(_0x32014d){super(_0x32014d,'hierarchy');}['load'](_0x48d17b,_0x13e7e9){E0['load'](_0x48d17b,this['maxRetries'],_0x13e7e9);}['open'](_0x4b4182,_0x3b806e){this['_app']['systems']['script']['preloading']=!(-0x255e+0x1626+-0x4*-0x3ce);const _0x4faf08=new bm(this['_app'],!(-0x614+0xcb6*0x3+-0x3*0xaaf))['parse'](_0x3b806e);return this['_app']['systems']['script']['preloading']=!(0x36f+-0x2*0xd5b+0x1748),_0x4faf08;}}class pk extends Qe{constructor(_0x461a1f){super(_0x461a1f,'html'),h(this,'decoder',null);}['load'](_0x2d5a03,_0x1c2662){typeof _0x2d5a03=='string'&&(_0x2d5a03={'load':_0x2d5a03,'original':_0x2d5a03}),ot['get'](_0x2d5a03['load'],{'retry':this['maxRetries']>-0x668+-0x27b*-0x7+-0xaf5,'maxRetries':this['maxRetries']},(_0x40f01a,_0x19fd06)=>{_0x40f01a?_0x1c2662('Error\x20load'+'ing\x20html\x20r'+'esource:\x20'+_0x2d5a03['original']+'\x20['+_0x40f01a+']'):_0x1c2662(null,_0x19fd06);});}['openBinary'](_0xdb2e0f){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),this['decoder']['decode'](_0xdb2e0f);}}class mk extends Qe{constructor(_0x4ca0ef){super(_0x4ca0ef,'json'),h(this,'decoder',null);}['load'](_0x52f3ca,_0x4ebaa0){typeof _0x52f3ca=='string'&&(_0x52f3ca={'load':_0x52f3ca,'original':_0x52f3ca});const _0x390cc0={'retry':this['maxRetries']>0x1f7b*-0x1+0xffe+0xf7d,'maxRetries':this['maxRetries']};_0x52f3ca['load']['startsWith']('blob:')&&(_0x390cc0['responseTy'+'pe']=Ls['ResponseTy'+'pe']['JSON']),ot['get'](_0x52f3ca['load'],_0x390cc0,(_0x40c95c,_0x3d850c)=>{_0x40c95c?_0x4ebaa0('Error\x20load'+'ing\x20JSON\x20r'+'esource:\x20'+_0x52f3ca['original']+'\x20['+_0x40c95c+']'):_0x4ebaa0(null,_0x3d850c);});}['openBinary'](_0xd117f){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),JSON['parse'](this['decoder']['decode'](_0xd117f));}}class _k{constructor(){this['removeInva'+'lid']=!(0x1a81+-0x1b8*0xf+-0xb9),this['valid']=!(-0x2*-0x961+-0x15*-0x89+-0x1dff),this['enumValida'+'tors']={'occludeSpecular':this['_createEnu'+'mValidator']([lv,bd,cv]),'cull':this['_createEnu'+'mValidator']([bt,pa,Fo,Ax]),'blendType':this['_createEnu'+'mValidator']([Gp,Hp,Zs,Cs,Gn,Wp,Ed,$p,Xp,qp,jp]),'depthFunc':this['_createEnu'+'mValidator']([Cx,hh,dh,Wf,Px,Mx,Dx,Wi])};}['setInvalid'](_0x3b4d74,_0x1c2a94){this['valid']=!(0x441*-0x1+0xc35+-0x25*0x37),w['warn']('Ignoring\x20i'+'nvalid\x20Sta'+'ndardMater'+'ial\x20proper'+'ty:\x20'+_0x3b4d74,_0x1c2a94[_0x3b4d74]),this['removeInva'+'lid']&&delete _0x1c2a94[_0x3b4d74];}['validate'](_0x22cd70){const _0x2e11c2=$n,_0x1aab43=gb,_0x40ae51=_0x22cd70['mappingFor'+'mat']==='path';for(const _0x124e63 in _0x22cd70){const _0x2258f0=_0x2e11c2[_0x124e63];if(!_0x2258f0){_0x1aab43[_0x124e63]?delete _0x22cd70[_0x124e63]:(w['warnOnce']('Ignoring\x20u'+'nsupported'+'\x20input\x20pro'+'perty\x20to\x20s'+'tandard\x20ma'+'terial:\x20'+_0x124e63),this['valid']=!(0x23af+-0x1*0x379+0x55*-0x61));continue;}if(_0x2258f0['startsWith']('enum')){const _0x4f31d6=_0x2258f0['split'](':')[0xbf*-0x1+0x68*-0x10+-0x40*-0x1d];this['enumValida'+'tors'][_0x4f31d6]&&(this['enumValida'+'tors'][_0x4f31d6](_0x22cd70[_0x124e63])||this['setInvalid'](_0x124e63,_0x22cd70));}else{if(_0x2258f0==='number')typeof _0x22cd70[_0x124e63]!='number'&&this['setInvalid'](_0x124e63,_0x22cd70);else{if(_0x2258f0==='boolean')typeof _0x22cd70[_0x124e63]!='boolean'&&this['setInvalid'](_0x124e63,_0x22cd70);else{if(_0x2258f0==='string')typeof _0x22cd70[_0x124e63]!='string'&&this['setInvalid'](_0x124e63,_0x22cd70);else{if(_0x2258f0==='vec2')_0x22cd70[_0x124e63]instanceof Array&&_0x22cd70[_0x124e63]['length']===-0xeca+0x1*0x1e3d+0xf71*-0x1||this['setInvalid'](_0x124e63,_0x22cd70);else{if(_0x2258f0==='rgb')_0x22cd70[_0x124e63]instanceof Array&&_0x22cd70[_0x124e63]['length']===0xd*-0x29c+-0x1313+0x17*0x24e||this['setInvalid'](_0x124e63,_0x22cd70);else{if(_0x2258f0==='texture')_0x40ae51?typeof _0x22cd70[_0x124e63]=='string'||_0x22cd70[_0x124e63]===null||_0x22cd70[_0x124e63]instanceof _e||this['setInvalid'](_0x124e63,_0x22cd70):typeof _0x22cd70[_0x124e63]=='number'||_0x22cd70[_0x124e63]===null||_0x22cd70[_0x124e63]instanceof _e||this['setInvalid'](_0x124e63,_0x22cd70);else{if(_0x2258f0==='boundingbo'+'x')_0x22cd70[_0x124e63]['center']&&_0x22cd70[_0x124e63]['center']instanceof Array&&_0x22cd70[_0x124e63]['center']['length']===0x17*0xb1+0x17e2+0xd42*-0x3||this['setInvalid'](_0x124e63,_0x22cd70),_0x22cd70[_0x124e63]['halfExtent'+'s']&&_0x22cd70[_0x124e63]['halfExtent'+'s']instanceof Array&&_0x22cd70[_0x124e63]['halfExtent'+'s']['length']===-0x2441*-0x1+-0x114+-0x232a||this['setInvalid'](_0x124e63,_0x22cd70);else{if(_0x2258f0==='cubemap')typeof _0x22cd70[_0x124e63]=='number'||_0x22cd70[_0x124e63]===null||_0x22cd70[_0x124e63]===void(-0x1*-0x557+0x156a+-0x1ac1)||_0x22cd70[_0x124e63]instanceof _e&&_0x22cd70[_0x124e63]['cubemap']||this['setInvalid'](_0x124e63,_0x22cd70);else{if(_0x2258f0==='chunks'){const _0x2db4fc=Object['keys'](_0x22cd70[_0x124e63]);for(let _0x47963b=0x9b5+0x773*0x5+-0x2ef4;_0x47963b<_0x2db4fc['length'];_0x47963b++)typeof _0x22cd70[_0x124e63][_0x2db4fc[_0x47963b]]!='string'&&this['setInvalid'](_0x2db4fc[_0x47963b],_0x22cd70[_0x124e63]);}else console['error']('Unknown\x20ma'+'terial\x20typ'+'e:\x20'+_0x2258f0);}}}}}}}}}}return _0x22cd70['validated']=!(-0x1e4b+0x895*0x2+0x1*0xd21),this['valid'];}['_createEnu'+'mValidator'](_0x55c78c){return function(_0x55d9f7){return _0x55c78c['indexOf'](_0x55d9f7)>=-0x20b8+0x4*0x3a6+0x1220;};}}class gk{constructor(){this['_validator']=null;}['parse'](_0x392a6a){const _0x58f3de=this['migrate'](_0x392a6a),_0x783b1=this['_validate'](_0x58f3de),_0x27e4a0=new Ut();return this['initialize'](_0x27e4a0,_0x783b1),_0x27e4a0;}['initialize'](_0x297c78,_0x435d40){if(_0x435d40['validated']||(_0x435d40=this['_validate'](_0x435d40)),_0x435d40['chunks']&&_0x435d40['chunks']&&Object['keys'](_0x435d40['chunks'])['length']>0xf*0x1ff+0xb01*0x1+-0x28f2){const _0x1ee14a=_0x297c78['shaderChun'+'ks']['glsl'];Object['entries'](_0x435d40['chunks'])['forEach'](([_0x48c9bb,_0x26c441])=>_0x1ee14a['set'](_0x48c9bb,_0x26c441));}for(const _0x26227e in _0x435d40){const _0x2fc091=$n[_0x26227e],_0x17dc2a=_0x435d40[_0x26227e];if(_0x2fc091==='vec2')_0x297c78[_0x26227e]=new J(_0x17dc2a[0x21f*0x2+-0x5b9*0x5+0x185f],_0x17dc2a[-0x1*0x82d+-0x13c6+-0x1*-0x1bf4]);else{if(_0x2fc091==='rgb')_0x297c78[_0x26227e]=new ie(_0x17dc2a[-0x232b+-0x5*-0x683+0x29c],_0x17dc2a[-0xbf8+0x1963+0xca*-0x11],_0x17dc2a[0x2*0xc0d+0x1f35+0xb*-0x507]);else{if(_0x2fc091==='texture')_0x17dc2a instanceof _e?_0x297c78[_0x26227e]=_0x17dc2a:_0x297c78[_0x26227e]instanceof _e&&typeof _0x17dc2a=='number'&&_0x17dc2a>-0x1bf0+0x18c3+0x32d||(_0x297c78[_0x26227e]=null);else{if(_0x2fc091==='cubemap')_0x17dc2a instanceof _e?_0x297c78[_0x26227e]=_0x17dc2a:_0x297c78[_0x26227e]instanceof _e&&typeof _0x17dc2a=='number'&&_0x17dc2a>0x6*-0x2c1+0x21bb+-0x1135||(_0x297c78[_0x26227e]=null),_0x26227e==='cubeMap'&&!_0x17dc2a&&(_0x297c78['prefiltere'+'dCubemaps']=null);else{if(_0x2fc091==='boundingbo'+'x'){const _0x1b65ef=new D(_0x17dc2a['center'][-0x596+0x1d92+-0x17fc],_0x17dc2a['center'][-0x1c50+0x1eeb+-0x29a*0x1],_0x17dc2a['center'][-0xf8*0x9+-0x51*-0x3b+0x1*-0x9f1]),_0x7c2dc1=new D(_0x17dc2a['halfExtent'+'s'][0x171d+-0x1*-0x725+-0x1e42],_0x17dc2a['halfExtent'+'s'][0x2*0x1202+0x25b1+-0x49b4],_0x17dc2a['halfExtent'+'s'][-0x23a3+0xed2+-0x1*-0x14d3]);_0x297c78[_0x26227e]=new De(_0x1b65ef,_0x7c2dc1);}else _0x297c78[_0x26227e]=_0x435d40[_0x26227e];}}}}}_0x297c78['update']();}['migrate'](_0x2410bf){_0x2410bf['shader']&&delete _0x2410bf['shader'],_0x2410bf['mapping_fo'+'rmat']&&(_0x2410bf['mappingFor'+'mat']=_0x2410bf['mapping_fo'+'rmat'],delete _0x2410bf['mapping_fo'+'rmat']);let _0x2af35e;const _0x3ca4de=[['bumpMapFac'+'tor','bumpiness'],['aoUvSet','aoMapUv'],['aoMapVerte'+'xColor','aoVertexCo'+'lor'],['diffuseMap'+'VertexColo'+'r','diffuseVer'+'texColor'],['emissiveMa'+'pVertexCol'+'or','emissiveVe'+'rtexColor'],['specularMa'+'pVertexCol'+'or','specularVe'+'rtexColor'],['metalnessM'+'apVertexCo'+'lor','metalnessV'+'ertexColor'],['opacityMap'+'VertexColo'+'r','opacityVer'+'texColor'],['glossMapVe'+'rtexColor','glossVerte'+'xColor'],['lightMapVe'+'rtexColor','lightVerte'+'xColor'],['specularMa'+'pTint','specularTi'+'nt'],['metalnessM'+'apTint','metalnessT'+'int'],['clearCoatG'+'lossiness','clearCoatG'+'loss']];for(_0x2af35e=-0x1216+0x1*0x4aa+0xd6c;_0x2af35e<_0x3ca4de['length'];_0x2af35e++){const _0x8db0c5=_0x3ca4de[_0x2af35e][0x1*-0x132b+0x2*0xe2f+0x311*-0x3],_0x25f99d=_0x3ca4de[_0x2af35e][-0x3*0x499+0x1f4d+0x1181*-0x1];_0x2410bf[_0x8db0c5]!==void(0x186d+0x17*-0x188+0xacb)&&(_0x2410bf[_0x25f99d]===void(-0x35*0xa8+0x1*-0x18f8+0x3bc0)&&(_0x2410bf[_0x25f99d]=_0x2410bf[_0x8db0c5]),delete _0x2410bf[_0x8db0c5]);}const _0x1df0a3=['fresnelFac'+'tor','shadowSamp'+'leType'];for(_0x2af35e=0x61a*-0x4+0xfa+0x2*0xbb7;_0x2af35e<_0x1df0a3['length'];_0x2af35e++){const _0x297327=_0x1df0a3[_0x2af35e];_0x2410bf['hasOwnProp'+'erty'](_0x297327)&&delete _0x2410bf[_0x297327];}return _0x2410bf;}['_validate'](_0x260c19){return _0x260c19['validated']||(this['_validator']||(this['_validator']=new _k()),this['_validator']['validate'](_0x260c19)),_0x260c19;}}const Sk={'aoMap':'white','aoDetailMap':'white','diffuseMap':'gray','diffuseDetailMap':'gray','specularMap':'gray','specularityFactorMap':'white','metalnessMap':'black','glossMap':'gray','sheenMap':'black','sheenGlossMap':'gray','clearCoatMap':'black','clearCoatGlossMap':'gray','clearCoatNormalMap':'normal','refractionMap':'white','emissiveMap':'gray','normalMap':'normal','normalDetailMap':'normal','heightMap':'gray','opacityMap':'gray','sphereMap':'gray','lightMap':'white','thicknessMap':'black','iridescenceMap':'black','iridescenceThicknessMap':'black','envAtlas':'black','anisotropyMap':'black'};class yk extends Qe{constructor(_0x346417){super(_0x346417,'material'),this['_assets']=_0x346417['assets'],this['_device']=_0x346417['graphicsDe'+'vice'],this['_parser']=new gk();}['load'](_0x353379,_0x216478){typeof _0x353379=='string'&&(_0x353379={'load':_0x353379,'original':_0x353379}),ot['get'](_0x353379['load'],{'retry':this['maxRetries']>-0x193*0x3+-0x1*0x14e5+0x6*0x445,'maxRetries':this['maxRetries']},(_0x58e904,_0x538391)=>{_0x58e904?_0x216478&&_0x216478('Error\x20load'+'ing\x20materi'+'al:\x20'+_0x353379['original']+'\x20['+_0x58e904+']'):_0x216478&&(_0x538391['_engine']=!(-0x139a+-0x531*0x3+0x232d),_0x216478(null,_0x538391));});}['open'](_0x5ba148,_0x5833cc){const _0x2c7355=this['_parser']['parse'](_0x5833cc);return _0x5833cc['_engine']&&(_0x2c7355['_data']=_0x5833cc,delete _0x5833cc['_engine']),_0x2c7355;}['patch'](_0x7bdb01,_0x10642d){_0x7bdb01['resource']['_data']&&(_0x7bdb01['_data']=_0x7bdb01['resource']['_data'],delete _0x7bdb01['resource']['_data']),_0x7bdb01['data']['name']=_0x7bdb01['name'],_0x7bdb01['resource']['name']=_0x7bdb01['name'],this['_bindAndAs'+'signAssets'](_0x7bdb01,_0x10642d),_0x7bdb01['off']('unload',this['_onAssetUn'+'load'],this),_0x7bdb01['on']('unload',this['_onAssetUn'+'load'],this);}['_onAssetUn'+'load'](_0x48548d){delete _0x48548d['data']['parameters'],delete _0x48548d['data']['chunks'],delete _0x48548d['data']['name'];}['_assignTex'+'ture'](_0x110768,_0x307461,_0x3c4293){_0x307461['resource'][_0x110768]=_0x3c4293;}['_getPlaceh'+'olderTextu'+'re'](_0x24377b){const _0x239f59=Sk[_0x24377b];return w['assert'](_0x239f59,'No\x20placeho'+'lder\x20textu'+'re\x20found\x20f'+'or\x20paramet'+'er:\x20'+_0x24377b),fa(this['_device'],_0x239f59);}['_assignPla'+'ceholderTe'+'xture'](_0x2bbdae,_0x51db6c){_0x51db6c['resource'][_0x2bbdae]=this['_getPlaceh'+'olderTextu'+'re'](_0x2bbdae);}['_onTexture'+'Load'](_0x2179f7,_0x1e2e73,_0x7e39d6){this['_assignTex'+'ture'](_0x2179f7,_0x1e2e73,_0x7e39d6['resource']),_0x1e2e73['resource']['update']();}['_onTexture'+'Add'](_0x4618dd,_0xe9f4d9,_0x448f0c){this['_assets']['load'](_0x448f0c);}['_onTexture'+'RemoveOrUn'+'load'](_0x28d588,_0x13b572,_0x43849a){const _0x30794b=_0x13b572['resource'];_0x30794b&&_0x13b572['resource'][_0x28d588]===_0x43849a['resource']&&(this['_assignPla'+'ceholderTe'+'xture'](_0x28d588,_0x13b572),_0x30794b['update']());}['_assignCub'+'emap'](_0x4d909d,_0x55921e,_0x57a4da){if(_0x55921e['resource'][_0x4d909d]=_0x57a4da[-0x1da4+-0x42f*0x9+0x17*0x2ed],_0x4d909d==='cubeMap'){const _0x4a1b27=_0x57a4da['slice'](-0x57*-0x13+-0x9c7+-0x1*-0x353);_0x4a1b27['every'](_0x2fb6b8=>_0x2fb6b8)?_0x55921e['resource']['prefiltere'+'dCubemaps']=_0x4a1b27:_0x4a1b27[-0x1e70+0x250*-0xa+0x6b2*0x8]&&(_0x55921e['resource']['envAtlas']=_0x4a1b27[-0xc*-0x5f+0x32+-0x4a6]);}}['_onCubemap'+'Load'](_0x358893,_0x2d4b6c,_0x3f8166){this['_assignCub'+'emap'](_0x358893,_0x2d4b6c,_0x3f8166['resources']),this['_parser']['initialize'](_0x2d4b6c['resource'],_0x2d4b6c['data']);}['_onCubemap'+'Add'](_0x30f868,_0x34c44b,_0x5b102d){this['_assets']['load'](_0x5b102d);}['_onCubemap'+'RemoveOrUn'+'load'](_0x3622b4,_0x3bf261,_0x51012a){const _0x3ae2f3=_0x3bf261['resource'];_0x3bf261['data']['prefiltere'+'dCubeMap12'+'8']===_0x51012a['resources'][-0x1*0x221b+-0x178f+0x39ab]&&(this['_assignCub'+'emap'](_0x3622b4,_0x3bf261,[null,null,null,null,null,null,null]),_0x3ae2f3['update']());}['_bindAndAs'+'signAssets'](_0x133afb,_0x39f311){const _0x5a77c1=this['_parser']['migrate'](_0x133afb['data']),_0x21c199=_0x133afb['resource'],_0x5aa6d0=_0x5a77c1['mappingFor'+'mat']==='path',_0x309803=Cd;let _0x3897af,_0x45bb5a,_0x106a2a;for(_0x3897af=-0x1284+-0x2*0x391+0x19a6;_0x3897af<_0x309803['length'];_0x3897af++){_0x45bb5a=_0x309803[_0x3897af],_0x106a2a=_0x21c199['_assetRefe'+'rences'][_0x45bb5a];const _0xdeafeb=_0x5a77c1[_0x45bb5a],_0x2d4dd9=_0x21c199[_0x45bb5a],_0xf82d79=_0x2d4dd9===this['_getPlaceh'+'olderTextu'+'re'](_0x45bb5a),_0x56a275=_0x5a77c1['validated'];_0xdeafeb&&(!_0x2d4dd9||!_0x56a275||_0xf82d79)?(_0x106a2a||(_0x106a2a=new gl(_0x45bb5a,_0x133afb,_0x39f311,{'load':this['_onTexture'+'Load'],'add':this['_onTexture'+'Add'],'remove':this['_onTexture'+'RemoveOrUn'+'load'],'unload':this['_onTexture'+'RemoveOrUn'+'load']},this),_0x21c199['_assetRefe'+'rences'][_0x45bb5a]=_0x106a2a),_0x5aa6d0?_0x106a2a['url']=_0x133afb['getAbsolut'+'eUrl'](_0xdeafeb):_0x106a2a['id']=_0xdeafeb,_0x106a2a['asset']&&(_0x106a2a['asset']['resource']?this['_assignTex'+'ture'](_0x45bb5a,_0x133afb,_0x106a2a['asset']['resource']):this['_assignPla'+'ceholderTe'+'xture'](_0x45bb5a,_0x133afb),_0x39f311['load'](_0x106a2a['asset']))):_0x106a2a&&(_0x5aa6d0?_0x106a2a['url']=null:_0x106a2a['id']=null);}const _0x2ed64d=fm;for(_0x3897af=0x165b*-0x1+0x19a4+0x349*-0x1;_0x3897af<_0x2ed64d['length'];_0x3897af++)_0x45bb5a=_0x2ed64d[_0x3897af],_0x106a2a=_0x21c199['_assetRefe'+'rences'][_0x45bb5a],_0x5a77c1[_0x45bb5a]&&!_0x133afb['data']['prefiltere'+'dCubeMap12'+'8']&&(_0x106a2a||(_0x106a2a=new gl(_0x45bb5a,_0x133afb,_0x39f311,{'load':this['_onCubemap'+'Load'],'add':this['_onCubemap'+'Add'],'remove':this['_onCubemap'+'RemoveOrUn'+'load'],'unload':this['_onCubemap'+'RemoveOrUn'+'load']},this),_0x21c199['_assetRefe'+'rences'][_0x45bb5a]=_0x106a2a),_0x5aa6d0?_0x106a2a['url']=_0x5a77c1[_0x45bb5a]:_0x106a2a['id']=_0x5a77c1[_0x45bb5a],_0x106a2a['asset']&&(_0x106a2a['asset']['loaded']&&this['_assignCub'+'emap'](_0x45bb5a,_0x133afb,_0x106a2a['asset']['resources']),_0x39f311['load'](_0x106a2a['asset'])));this['_parser']['initialize'](_0x21c199,_0x5a77c1);}}class vk{constructor(_0x133268){this['_device']=_0x133268['device'],this['_defaultMa'+'terial']=_0x133268['defaultMat'+'erial'],this['_assets']=_0x133268['assets'];}['parse'](_0xce0719,_0x23eb5b,_0x50299f){kh['parse']('filename.g'+'lb','',_0xce0719,this['_device'],this['_assets'],(_0x50299f==null?void(-0x1*0x112d+0x39e*-0xa+0x3559):_0x50299f['options'])??{},(_0x30e14b,_0x449fbc)=>{if(_0x30e14b)_0x23eb5b(_0x30e14b);else{const _0x3d9e26=yr['createMode'+'l'](_0x449fbc,this['_defaultMa'+'terial']);_0x449fbc['destroy'](),_0x23eb5b(null,_0x3d9e26);}});}}const xk={'points':cd,'lines':hd,'lineloop':_y,'linestrip':gy,'triangles':js,'trianglestrip':Er,'trianglefan':oa},Tk={'int8':dd,'uint8':la,'int16':fd,'uint16':Ml,'int32':Ty,'uint32':el,'float32':Ve};class wk{constructor(_0x328bf7){this['_device']=_0x328bf7['device'],this['_defaultMa'+'terial']=_0x328bf7['defaultMat'+'erial'];}['parse'](_0x4a0ba2,_0x26695f){const _0x422aad=_0x4a0ba2['model'];if(!_0x422aad){_0x26695f(null,null);return;}if(_0x422aad['version']<=-0x52*-0x3f+-0x5*0x52f+0x2df*0x2){_0x26695f('JsonModelP'+'arser#pars'+'e:\x20Trying\x20'+'to\x20parse\x20u'+'nsupported'+'\x20model\x20for'+'mat.');return;}const _0x3ddadf=this['_parseNode'+'s'](_0x4a0ba2),_0xc50b77=this['_parseSkin'+'s'](_0x4a0ba2,_0x3ddadf),_0x727d94=this['_parseVert'+'exBuffers'](_0x4a0ba2),_0x30790a=this['_parseInde'+'xBuffers'](_0x4a0ba2,_0x727d94),_0x3e86b2=this['_parseMorp'+'hs'](_0x4a0ba2,_0x3ddadf,_0x727d94),_0x547f25=this['_parseMesh'+'es'](_0x4a0ba2,_0xc50b77['skins'],_0x3e86b2['morphs'],_0x727d94,_0x30790a['buffer'],_0x30790a['data']),_0x1331d6=this['_parseMesh'+'Instances'](_0x4a0ba2,_0x3ddadf,_0x547f25,_0xc50b77['skins'],_0xc50b77['instances'],_0x3e86b2['morphs'],_0x3e86b2['instances']),_0x3c4dba=new sr();_0x3c4dba['graph']=_0x3ddadf[-0x1c9*0xe+0x82f+-0x14b*-0xd],_0x3c4dba['meshInstan'+'ces']=_0x1331d6,_0x3c4dba['skinInstan'+'ces']=_0xc50b77['instances'],_0x3c4dba['morphInsta'+'nces']=_0x3e86b2['instances'],_0x3c4dba['getGraph']()['syncHierar'+'chy'](),_0x26695f(null,_0x3c4dba);}['_parseNode'+'s'](_0x24dbdc){const _0x295776=_0x24dbdc['model'],_0x502782=[];let _0x340fca;for(_0x340fca=0x189f+-0x49*-0x27+-0x23be;_0x340fca<_0x295776['nodes']['length'];_0x340fca++){const _0x373665=_0x295776['nodes'][_0x340fca],_0x4a45b7=new Ie(_0x373665['name']);_0x4a45b7['setLocalPo'+'sition'](_0x373665['position'][0x3b*-0x65+-0x11*-0x16f+-0x118],_0x373665['position'][0x86*-0x2c+0x778+0xf91],_0x373665['position'][0x12fd*0x2+0xe*-0x3b+-0x22be]),_0x4a45b7['setLocalEu'+'lerAngles'](_0x373665['rotation'][0x1*0xc8a+-0x2ab*0x9+-0x59*-0x21],_0x373665['rotation'][0x1ad5+0x14ce+-0x2fa2],_0x373665['rotation'][-0x1*0x1163+-0x1ef0+-0x3055*-0x1]),_0x4a45b7['setLocalSc'+'ale'](_0x373665['scale'][-0x4*0x557+0x17*-0xab+0x24b9*0x1],_0x373665['scale'][0x1a*0x148+-0x8dc+-0x1873],_0x373665['scale'][-0x81*-0x1+0x1cf4+0x1d73*-0x1]),_0x4a45b7['scaleCompe'+'nsation']=!!_0x373665['scaleCompe'+'nsation'],_0x502782['push'](_0x4a45b7);}for(_0x340fca=-0x11a9+0x8e0*0x3+0x47b*-0x2;_0x340fca<_0x295776['parents']['length'];_0x340fca++)_0x502782[_0x295776['parents'][_0x340fca]]['addChild'](_0x502782[_0x340fca]);return _0x502782;}['_parseSkin'+'s'](_0x33ae37,_0x289979){const _0x325a59=_0x33ae37['model'],_0x2c2d31=[],_0x359d5d=[];let _0x157568,_0x5858ba;for(_0x157568=0xd*0x2d5+0x1*0x22b1+-0xa2*0x71;_0x157568<_0x325a59['skins']['length'];_0x157568++){const _0x244e53=_0x325a59['skins'][_0x157568],_0x3dc6a5=[];for(_0x5858ba=0xd29+0x18e*0x17+-0x30eb;_0x5858ba<_0x244e53['inverseBin'+'dMatrices']['length'];_0x5858ba++){const _0x5206eb=_0x244e53['inverseBin'+'dMatrices'][_0x5858ba];_0x3dc6a5[_0x5858ba]=new te()['set'](_0x5206eb);}const _0x38e2c5=new Lv(this['_device'],_0x3dc6a5,_0x244e53['boneNames']);_0x2c2d31['push'](_0x38e2c5);const _0x1a1f98=new Ol(_0x38e2c5),_0x1461da=[];for(_0x5858ba=0x1cba+-0x69*0x1f+-0x1003;_0x5858ba<_0x38e2c5['boneNames']['length'];_0x5858ba++){const _0x82e193=_0x38e2c5['boneNames'][_0x5858ba],_0x5d03f5=_0x289979[-0x241d+0x11c*-0x10+0x35dd]['findByName'](_0x82e193);_0x1461da['push'](_0x5d03f5);}_0x1a1f98['bones']=_0x1461da,_0x359d5d['push'](_0x1a1f98);}return{'skins':_0x2c2d31,'instances':_0x359d5d};}['_getMorphV'+'ertexCount'](_0x32bdd5,_0x4895e1,_0x169d30){for(let _0xa671a2=-0x1df5*-0x1+0x6*0x322+-0x30c1;_0xa671a2<_0x32bdd5['meshes']['length'];_0xa671a2++){const _0x78f01f=_0x32bdd5['meshes'][_0xa671a2];if(_0x78f01f['morph']===_0x4895e1)return _0x169d30[_0x78f01f['vertices']]['numVertice'+'s'];}}['_parseMorp'+'hs'](_0x5de8bf,_0x4f9295,_0x427b67){const _0x448018=_0x5de8bf['model'],_0x1e3abe=[],_0x3a147c=[];let _0x3a3d0c,_0x20454e,_0x17fdd7,_0x265bcb,_0x4e11a1,_0x3ea0db;if(_0x448018['morphs']){const _0x12e9bf=function(_0x1723b6,_0xdb81eb,_0x5e7641){const _0xa5251=new Float32Array(_0x5e7641*(0xf1*0x1+-0x2002*-0x1+-0x20f0));for(let _0x2234e6=-0x831*0x3+0xbf7+0xc9c;_0x2234e6<_0xdb81eb['length'];_0x2234e6++){const _0x1e0d74=_0xdb81eb[_0x2234e6]*(0x4*0x50c+-0x163f*0x1+0x6a*0x5);_0xa5251[_0x1e0d74]=_0x1723b6[_0x2234e6*(-0xff+0x1*0x511+-0x40f)],_0xa5251[_0x1e0d74+(0x15c5*0x1+-0x983+-0xc41)]=_0x1723b6[_0x2234e6*(0x1e4d*-0x1+0x140f+-0xa41*-0x1)+(0x1864+-0x285+-0x15de)],_0xa5251[_0x1e0d74+(-0x1d0f+-0x51*-0xd+0x18f4)]=_0x1723b6[_0x2234e6*(-0x55+0x226d+0x5*-0x6d1)+(0x2f9*0xa+0x1ec1*-0x1+0x5*0x35)];}return _0xa5251;};for(_0x3a3d0c=0x202a+-0x1aee+-0x43*0x14;_0x3a3d0c<_0x448018['morphs']['length'];_0x3a3d0c++){for(_0x265bcb=_0x448018['morphs'][_0x3a3d0c]['targets'],_0x3ea0db=[],_0x17fdd7=this['_getMorphV'+'ertexCount'](_0x448018,_0x3a3d0c,_0x427b67),_0x20454e=-0x1ef7+0x2234+-0x33d;_0x20454e<_0x265bcb['length'];_0x20454e++){const _0x3ff84c=_0x265bcb[_0x20454e]['aabb'],_0x2c2f6a=_0x3ff84c['min'],_0xfa54de=_0x3ff84c['max'],_0x31d622=new De(new D((_0xfa54de[-0x1d*-0x91+-0x4c3+-0xbaa]+_0x2c2f6a[-0xc48+0x1227*-0x2+0x12*0x2b3])*(-0x37*0x61+-0x65*-0x4b+0x8c0*-0x1+0.5),(_0xfa54de[-0x1*0x2c9+-0x14e*0x14+0x1ce2]+_0x2c2f6a[-0x1e18*-0x1+0x1ae+-0x3*0xa97])*(0xbb9+-0x19c6+0xe0d+0.5),(_0xfa54de[0xe2a+0xf*0x86+-0x1602]+_0x2c2f6a[0x2b0+-0xd63*-0x1+-0x1011])*(-0x206f+0xb*0x113+-0x196*-0xd+0.5)),new D((_0xfa54de[-0x1*-0x327+0x72a*0x2+0x37f*-0x5]-_0x2c2f6a[0x25*0x1+-0xdf7+0xdd2])*(-0x17e0+-0x23ab+0x1*0x3b8b+0.5),(_0xfa54de[-0xa90+-0x7*0x476+0x1*0x29cb]-_0x2c2f6a[0x2b*0xca+-0x1f1b*0x1+-0x2d2])*(0x2*-0x22a+0x244a+0x2*-0xffb+0.5),(_0xfa54de[-0x22c*0x11+0x1*0x1476+0x20f*0x8]-_0x2c2f6a[0x25*0x90+-0x1012+-0x3*0x194])*(0x1*-0x2fe+-0x18b3+0x1bb1+0.5))),_0x18a1bd=_0x265bcb[_0x20454e]['indices'];let _0x2d9d2c=_0x265bcb[_0x20454e]['deltaPosit'+'ions'],_0x1a6724=_0x265bcb[_0x20454e]['deltaNorma'+'ls'];_0x18a1bd&&(_0x2d9d2c=_0x12e9bf(_0x2d9d2c,_0x18a1bd,_0x17fdd7),_0x1a6724=_0x12e9bf(_0x1a6724,_0x18a1bd,_0x17fdd7)),_0x4e11a1=new Md({'deltaPositions':_0x2d9d2c,'deltaNormals':_0x1a6724,'name':_0x265bcb[_0x20454e]['name'],'aabb':_0x31d622}),_0x3ea0db['push'](_0x4e11a1);}const _0x19e0d1=new mm(_0x3ea0db,this['_device']);_0x1e3abe['push'](_0x19e0d1);const _0xae6a1c=new xa(_0x19e0d1);_0x3a147c['push'](_0xae6a1c);}}return{'morphs':_0x1e3abe,'instances':_0x3a147c};}['_parseVert'+'exBuffers'](_0x51bc67){const _0x45a903=_0x51bc67['model'],_0x148a2d=[],_0xe4700c={'position':Me,'normal':gs,'tangent':yi,'blendWeight':gi,'blendIndices':us,'color':Wt,'texCoord0':is,'texCoord1':ba,'texCoord2':wl,'texCoord3':El,'texCoord4':bl,'texCoord5':Al,'texCoord6':Cl,'texCoord7':Pl};for(let _0x53d9c7=0x3*-0xaed+-0x2128+0x1*0x41ef;_0x53d9c7<_0x45a903['vertices']['length'];_0x53d9c7++){const _0x22b2eb=_0x45a903['vertices'][_0x53d9c7],_0x58ef98=[];for(const _0x10db1a in _0x22b2eb){const _0x261da3=_0x22b2eb[_0x10db1a];_0x58ef98['push']({'semantic':_0xe4700c[_0x10db1a],'components':_0x261da3['components'],'type':Tk[_0x261da3['type']],'normalize':_0xe4700c[_0x10db1a]===Wt});}const _0x5cef9c=new kt(this['_device'],_0x58ef98),_0x9b06ae=_0x22b2eb['position']['data']['length']/_0x22b2eb['position']['components'],_0x3246c9=new Is(this['_device'],_0x5cef9c,_0x9b06ae),_0xc55555=new Uo(_0x3246c9);for(let _0x4f91c5=-0x2e*0xaf+-0x18*0x17b+0x42fa;_0x4f91c5<_0x9b06ae;_0x4f91c5++){for(const _0x55c5a5 in _0x22b2eb){const _0x53925c=_0x22b2eb[_0x55c5a5];switch(_0x53925c['components']){case-0x15d4+0x6*0x29d+0x13b*0x5:_0xc55555['element'][_0xe4700c[_0x55c5a5]]['set'](_0x53925c['data'][_0x4f91c5]);break;case-0x1a13+-0x1*0x1cd2+-0x3*-0x124d:_0xc55555['element'][_0xe4700c[_0x55c5a5]]['set'](_0x53925c['data'][_0x4f91c5*(-0x1524+-0x15ce+0x2af4)],-0x3*0x2f5+0x8f*-0xb+0x1*0xf05-_0x53925c['data'][_0x4f91c5*(-0x111e+-0x1*-0x1e0e+-0xcee)+(0x1498+0x19ad+-0x3db*0xc)]);break;case-0x1e39+0x144b*0x1+-0x1*-0x9f1:_0xc55555['element'][_0xe4700c[_0x55c5a5]]['set'](_0x53925c['data'][_0x4f91c5*(0x3*-0xb93+-0x1ee0+0x419c)],_0x53925c['data'][_0x4f91c5*(0x2c8*0x7+-0x951+-0x4*0x289)+(-0x17d7+0x1f3d+-0x765)],_0x53925c['data'][_0x4f91c5*(-0x118+0x23c5*-0x1+0x24e0)+(0x99c+-0x97*0x21+0x9dd)]);break;case 0x929+-0x1*0x19a1+0xd3*0x14:_0xc55555['element'][_0xe4700c[_0x55c5a5]]['set'](_0x53925c['data'][_0x4f91c5*(0x1*0xb55+-0x608*0x2+-0x1*-0xbf)],_0x53925c['data'][_0x4f91c5*(-0x27*0x1+-0x10b3+0x10de)+(0x2*0x10e+0x1*-0x155d+0x1342)],_0x53925c['data'][_0x4f91c5*(-0x1cb7+-0x1c62+0x391d)+(0x10+0x11*0xdf+-0xedd)],_0x53925c['data'][_0x4f91c5*(-0x1f5a*-0x1+-0x224*0x4+0x16*-0x109)+(0x136b+-0x1*-0x21e2+-0x26*0x167)]);break;}}_0xc55555['next']();}_0xc55555['end'](),_0x148a2d['push'](_0x3246c9);}return _0x148a2d;}['_parseInde'+'xBuffers'](_0x94709b,_0x7a8900){const _0x5a0dee=_0x94709b['model'];let _0x54abe8=null,_0x39880b=null,_0x29bec1,_0x33251e=0x26fe+0xf*-0x1a5+-0xe53;for(_0x29bec1=0x1e87+0xc15+-0x71a*0x6;_0x29bec1<_0x5a0dee['meshes']['length'];_0x29bec1++){const _0x341f5a=_0x5a0dee['meshes'][_0x29bec1];_0x341f5a['indices']!==void(-0x7*0x1f+0x2392+-0x22b9)&&(_0x33251e+=_0x341f5a['indices']['length']);}let _0x26fdf8=0x146b+-0x2d*0x83+0x4*0xa7;for(_0x29bec1=-0x636+-0xfd1+-0x1*-0x1607;_0x29bec1<_0x7a8900['length'];_0x29bec1++)_0x26fdf8=Math['max'](_0x26fdf8,_0x7a8900[_0x29bec1]['numVertice'+'s']);return _0x33251e>0xff*0x3+-0x2*0x87c+0xdfb&&(_0x26fdf8>-0xf4ab+0x577*0x40+-0x4b75*-0x2?(_0x54abe8=new br(this['_device'],wr,_0x33251e),_0x39880b=new Uint32Array(_0x54abe8['lock']())):(_0x54abe8=new br(this['_device'],Yi,_0x33251e),_0x39880b=new Uint16Array(_0x54abe8['lock']()))),{'buffer':_0x54abe8,'data':_0x39880b};}['_parseMesh'+'es'](_0x260b1a,_0x3fb617,_0x467556,_0x3a54c8,_0x25ec9a,_0x462a07){const _0xc908a=_0x260b1a['model'],_0x21ce64=[];let _0x28a1a3=0x13*-0x166+0x123+0x196f;for(let _0x1687f3=0x2558+0x58d+-0x8b*0x4f;_0x1687f3<_0xc908a['meshes']['length'];_0x1687f3++){const _0xb4b78b=_0xc908a['meshes'][_0x1687f3],_0x56787a=_0xb4b78b['aabb'],_0x561ccb=_0x56787a['min'],_0x51749e=_0x56787a['max'],_0x151ac8=new De(new D((_0x51749e[-0x104e*0x2+-0x3*-0xd3+-0x607*-0x5]+_0x561ccb[-0x5*-0x173+-0x1cb7*-0x1+-0x23f6])*(-0x9*-0x36f+-0x1c2c+-0x2bb+0.5),(_0x51749e[0x79*-0x1+0x18c7+-0x184d]+_0x561ccb[0xceb*0x1+-0x3*-0x365+-0x1719])*(-0x4*-0xb4+0x1*0x25ac+-0x2*0x143e+0.5),(_0x51749e[0x5*-0x6fe+-0x7b+-0x717*-0x5]+_0x561ccb[0x56*0x6+-0x18b7+0x16b5])*(-0x700*0x3+0x7*-0x4f0+0x7f*0x70+0.5)),new D((_0x51749e[-0x5*-0x34a+-0x503+0xb6f*-0x1]-_0x561ccb[-0x121c+0x1*0x1ba4+-0x2*0x4c4])*(-0x50b*-0x1+0x11c6+-0x289*0x9+0.5),(_0x51749e[-0x185a*0x1+-0x14de+0x2d39]-_0x561ccb[0x1a13+-0x4c*0x20+-0x1092])*(-0x1*0x1445+-0x6*-0x323+-0x35*-0x7+0.5),(_0x51749e[-0x1*0x2505+0x2b*-0x16+0x28b9]-_0x561ccb[-0x11c6+0x959+0x86f])*(0x5*-0x2a2+-0x4d0+0x11fa+0.5))),_0x435404=_0xb4b78b['indices']!==void(-0x1d4e+-0xd3b+0x2a89),_0x2ccb61=new Ge(this['_device']);_0x2ccb61['vertexBuff'+'er']=_0x3a54c8[_0xb4b78b['vertices']],_0x2ccb61['indexBuffe'+'r'][-0x11*0x215+0x6a+0xba9*0x3]=_0x435404?_0x25ec9a:null,_0x2ccb61['primitive'][-0x1*-0x11ea+0x151*0x6+-0x19d0]['type']=xk[_0xb4b78b['type']],_0x2ccb61['primitive'][-0x5*-0x52d+0x2101*-0x1+0xe4*0x8]['base']=_0x435404?_0xb4b78b['base']+_0x28a1a3:_0xb4b78b['base'],_0x2ccb61['primitive'][0x14ab+0x6*0x340+-0x282b*0x1]['count']=_0xb4b78b['count'],_0x2ccb61['primitive'][0x1e54*-0x1+-0x174e*0x1+-0x2*-0x1ad1]['indexed']=_0x435404,_0x2ccb61['skin']=_0xb4b78b['skin']!==void(-0x2*-0x713+0x77e+-0x4*0x569)?_0x3fb617[_0xb4b78b['skin']]:null,_0x2ccb61['morph']=_0xb4b78b['morph']!==void(-0xd8c+0x1*0x16e7+-0x5*0x1df)?_0x467556[_0xb4b78b['morph']]:null,_0x2ccb61['aabb']=_0x151ac8,_0x435404&&(_0x462a07['set'](_0xb4b78b['indices'],_0x28a1a3),_0x28a1a3+=_0xb4b78b['indices']['length']),_0x21ce64['push'](_0x2ccb61);}return _0x25ec9a!==null&&_0x25ec9a['unlock'](),_0x21ce64;}['_parseMesh'+'Instances'](_0x2d95ef,_0x5c1fd7,_0x21c80d,_0x4854fe,_0x45995d,_0x1f201b,_0x4c9346){const _0x30cb97=_0x2d95ef['model'],_0x3c9a47=[];let _0x5929f2;for(_0x5929f2=-0x1518+-0x43*0x1b+0x1c29;_0x5929f2<_0x30cb97['meshInstan'+'ces']['length'];_0x5929f2++){const _0x4d9dfb=_0x30cb97['meshInstan'+'ces'][_0x5929f2],_0x3391a7=_0x5c1fd7[_0x4d9dfb['node']],_0x57d9e7=_0x21c80d[_0x4d9dfb['mesh']],_0x2ded5c=new He(_0x57d9e7,this['_defaultMa'+'terial'],_0x3391a7);if(_0x57d9e7['skin']){const _0x258e80=_0x4854fe['indexOf'](_0x57d9e7['skin']);if(_0x258e80===-(0x1952+0x31*0x29+-0x351*0xa))throw new Error('Mesh\x27s\x20ski'+'n\x20does\x20not'+'\x20appear\x20in'+'\x20skin\x20arra'+'y.');_0x2ded5c['skinInstan'+'ce']=_0x45995d[_0x258e80];}if(_0x57d9e7['morph']){const _0x45142f=_0x1f201b['indexOf'](_0x57d9e7['morph']);if(_0x45142f===-(-0x1*0x853+-0x1364+0x377*0x8))throw new Error('Mesh\x27s\x20mor'+'ph\x20does\x20no'+'t\x20appear\x20i'+'n\x20morph\x20ar'+'ray.');_0x2ded5c['morphInsta'+'nce']=_0x4c9346[_0x45142f];}_0x3c9a47['push'](_0x2ded5c);}return _0x3c9a47;}}class Ek extends Qe{constructor(_0x235a3a){super(_0x235a3a,'model'),this['_parsers']=[],this['device']=_0x235a3a['graphicsDe'+'vice'],this['assets']=_0x235a3a['assets'],this['defaultMat'+'erial']=Qn(this['device']),this['addParser'](new wk(this),(_0xa8bcc8,_0x3b22df)=>xe['getExtensi'+'on'](_0xa8bcc8)==='.json'),this['addParser'](new vk(this),(_0x19eb53,_0x23bf57)=>xe['getExtensi'+'on'](_0x19eb53)==='.glb');}['load'](_0x4b81ac,_0x759b2e,_0x431db2){typeof _0x4b81ac=='string'&&(_0x4b81ac={'load':_0x4b81ac,'original':_0x4b81ac});const _0x813bb6={'retry':this['maxRetries']>0x7*0x1a3+-0x1d55+0x2c*0x68,'maxRetries':this['maxRetries']};(_0x4b81ac['load']['startsWith']('blob:')||_0x4b81ac['load']['startsWith']('data:'))&&(xe['getExtensi'+'on'](_0x4b81ac['original'])['toLowerCas'+'e']()==='.glb'?_0x813bb6['responseTy'+'pe']=Ls['ResponseTy'+'pe']['ARRAY_BUFF'+'ER']:_0x813bb6['responseTy'+'pe']=Ls['ResponseTy'+'pe']['JSON']),ot['get'](_0x4b81ac['load'],_0x813bb6,(_0x100591,_0x1719e6)=>{if(_0x759b2e){if(_0x100591)_0x759b2e('Error\x20load'+'ing\x20model:'+'\x20'+_0x4b81ac['original']+'\x20['+_0x100591+']');else{for(let _0x35802f=-0x1178+0x12c+0x104c;_0x35802f<this['_parsers']['length'];_0x35802f++){const _0x3a6910=this['_parsers'][_0x35802f];if(_0x3a6910['decider'](_0x4b81ac['original'],_0x1719e6)){_0x3a6910['parser']['parse'](_0x1719e6,(_0x3064fa,_0x2b33c6)=>{_0x3064fa?_0x759b2e(_0x3064fa):_0x759b2e(null,_0x2b33c6);},_0x431db2);return;}}_0x759b2e('No\x20parsers'+'\x20found');}}});}['open'](_0x2be4c1,_0x14b1ab){return _0x14b1ab;}['patch'](_0x57fd94,_0x198071){if(!_0x57fd94['resource'])return;const _0xab0670=_0x57fd94['data'],_0x21bf67=this;_0x57fd94['resource']['meshInstan'+'ces']['forEach']((_0x491941,_0x35102e)=>{if(_0xab0670['mapping']){const _0x144c84=function(_0x3686bb){_0x3686bb['resource']?_0x491941['material']=_0x3686bb['resource']:(_0x3686bb['once']('load',_0x144c84),_0x198071['load'](_0x3686bb)),_0x3686bb['once']('remove',_0x219dd7=>{_0x491941['material']===_0x219dd7['resource']&&(_0x491941['material']=_0x21bf67['defaultMat'+'erial']);});};if(!_0xab0670['mapping'][_0x35102e]){_0x491941['material']=_0x21bf67['defaultMat'+'erial'];return;}const _0x1c164b=_0xab0670['mapping'][_0x35102e]['material'],_0x43f19c=_0xab0670['mapping'][_0x35102e]['path'];let _0x140827;if(_0x1c164b!==void(-0x2*-0x11e3+0x937+-0x2cfd))_0x1c164b?(_0x140827=_0x198071['get'](_0x1c164b),_0x140827?_0x144c84(_0x140827):_0x198071['once']('add:'+_0x1c164b,_0x144c84)):_0x491941['material']=_0x21bf67['defaultMat'+'erial'];else{if(_0x43f19c){const _0x51fd6f=_0x57fd94['getAbsolut'+'eUrl'](_0xab0670['mapping'][_0x35102e]['path']);_0x140827=_0x198071['getByUrl'](_0x51fd6f),_0x140827?_0x144c84(_0x140827):_0x198071['once']('add:url:'+_0x51fd6f,_0x144c84);}}}});}['addParser'](_0x39d9f4,_0x4bea36){this['_parsers']['push']({'parser':_0x39d9f4,'decider':_0x4bea36});}}class bk extends Qe{constructor(_0x1940b3){super(_0x1940b3,'scene');}['load'](_0x508d98,_0x5283fc){E0['load'](_0x508d98,this['maxRetries'],_0x5283fc);}['open'](_0xef4c32,_0xb07269){this['_app']['systems']['script']['preloading']=!(-0x1*-0x133f+0xfad*-0x1+-0x392);const _0x77f190=new bm(this['_app'],!(-0x61f+-0x17d2+-0xef9*-0x2))['parse'](_0xb07269),_0xd56cd6=this['_app']['scene'];return _0xd56cd6['root']=_0x77f190,this['_app']['applyScene'+'Settings'](_0xb07269['settings']),this['_app']['systems']['script']['preloading']=!(-0x2dd*-0x5+-0x217c+0x132c),_0xd56cd6;}}const qh=class qh{static['push'](_0xc2ce8){qh['_types']['push'](_0xc2ce8);}};h(qh,'_types',[]);let aa=qh;const Ak=new Set(['system','entity','create','destroy','swap','move','data','scripts','_scripts','_scriptsIn'+'dex','_scriptsDa'+'ta','enabled','_oldState','onEnable','onDisable','onPostStat'+'eChange','_onSetEnab'+'led','_checkStat'+'e','_onBeforeR'+'emove','_onInitial'+'izeAttribu'+'tes','_onInitial'+'ize','_onPostIni'+'tialize','_onUpdate','_onPostUpd'+'ate','_callbacks','_callbackA'+'ctive','has','get','on','off','fire','once','hasEvent']),Ck={};Sl['reservedNa'+'mes']['forEach']((_0x11850b,_0x500380,_0x166e39)=>{Ck[_0x11850b]=-0xbb9*0x1+0x107*0x9+0x27b;});function Pk(_0x31f4fc,_0x36e8a5,_0x444e81){if(typeof _0x31f4fc!='function')throw new Error('script\x20cla'+'ss:\x20\x27'+_0x31f4fc+('\x27\x20must\x20be\x20'+'a\x20construc'+'tor\x20functi'+'on\x20(i.e.\x20c'+'lass).'));if(!(_0x31f4fc['prototype']instanceof ts))throw new Error('script\x20cla'+'ss:\x20\x27'+Wo['__getScrip'+'tName'](_0x31f4fc)+('\x27\x20does\x20not'+'\x20extend\x20pc'+'.Script.'));if(_0x36e8a5=_0x36e8a5||_0x31f4fc['__name']||Wo['__getScrip'+'tName'](_0x31f4fc),Ak['has'](_0x36e8a5))throw new Error('script\x20nam'+'e:\x20\x27'+_0x36e8a5+('\x27\x20is\x20reser'+'ved,\x20pleas'+'e\x20change\x20s'+'cript\x20name'));_0x31f4fc['__name']=_0x36e8a5,Ks['getApplica'+'tion']()['scripts']['add'](_0x31f4fc),aa['push'](_0x31f4fc);}const Mk=_0x43940=>_0x43940[-0xc07*0x1+0x11*0x101+-0x1*0x50a]['toLowerCas'+'e']()+_0x43940['substring'](0xb*-0x41+-0x1226+0x14f2);class Dk extends Qe{constructor(_0x5ee2b2){super(_0x5ee2b2,'script'),this['_scripts']={},this['_cache']={};}['clearCache'](){for(const _0x22083e in this['_cache']){const _0x2ce170=this['_cache'][_0x22083e],_0x2dcc0a=_0x2ce170['parentNode'];_0x2dcc0a&&_0x2dcc0a['removeChil'+'d'](_0x2ce170);}this['_cache']={};}['load'](_0x46c1b2,_0x30202a){typeof _0x46c1b2=='string'&&(_0x46c1b2={'load':_0x46c1b2,'original':_0x46c1b2});const _0x3d56dc=this;this['_app'];const _0x508036=(_0x46c1b2['load'],(_0x4318a7,_0x46950c,_0x1995d1)=>{if(_0x4318a7)_0x30202a(_0x4318a7);else{const _0x7c8cdb={};for(let _0x35622b=-0x4e1*-0x4+-0x3f*0x61+0x45b*0x1;_0x35622b<aa['_types']['length'];_0x35622b++)_0x7c8cdb[aa['_types'][_0x35622b]['name']]=aa['_types'][_0x35622b];aa['_types']['length']=-0x347*-0x1+0x1e2f+0x1*-0x2176,_0x30202a(null,_0x7c8cdb,_0x1995d1);const _0x25121b=_0x46950c['split']('&hash=')[-0x2*-0x981+-0x155d+0x9*0x43];delete _0x3d56dc['_loader']['_cache'][Cn['makeKey'](_0x25121b,'script')];}}),[_0xc0c00d]=_0x46c1b2['load']['split']('?');_0xc0c00d['endsWith']('.mjs')?this['_loadModul'+'e'](_0xc0c00d,_0x508036):this['_loadScrip'+'t'](_0x46c1b2['load'],_0x508036);}['open'](_0x3c067a,_0x563989){return _0x563989;}['patch'](_0x47170a,_0x52275b){}['_loadScrip'+'t'](_0x25a213,_0x4444e7){const _0x4da861=document['head'],_0x34663c=document['createElem'+'ent']('script');this['_cache'][_0x25a213]=_0x34663c,_0x34663c['async']=!(0x661*-0x3+-0x3*0x7e0+0xa1*0x44),_0x34663c['addEventLi'+'stener']('error',_0x2b45b7=>{_0x4444e7('Script:\x20'+_0x2b45b7['target']['src']+('\x20failed\x20to'+'\x20load'));},!(0x177+-0x26d+0xf7));let _0x514421=!(0xdd6+-0x3ae+0xa27*-0x1);_0x34663c['onload']=_0x34663c['onreadysta'+'techange']=function(){!_0x514421&&(!this['readyState']||this['readyState']==='loaded'||this['readyState']==='complete')&&(_0x514421=!(-0xe20+0x1df4+-0xfd4),_0x4444e7(null,_0x25a213,_0x34663c));},_0x34663c['src']=_0x25a213,_0x4da861['appendChil'+'d'](_0x34663c);}['_loadModul'+'e'](_0x48ced0,_0x150e92){const _0xa47796=Ae['browser']&&window['location']['origin']!=='null'?window['location']['origin']+window['location']['pathname']:import.meta['url'],_0x3bd4d2=new URL(_0x48ced0,_0xa47796);import(_0x3bd4d2['toString']())['then'](_0x568c30=>{var _0x17923d,_0x1a85fc;const _0x206418=_0x3bd4d2['pathname']['split']('/')['pop'](),_0x8b667=(_0x1a85fc=(_0x17923d=this['_app']['assets']['find'](_0x206418,'script'))==null?void(0xeb9+-0x1*-0x837+-0x16f*0x10):_0x17923d['data'])==null?void(0x961+-0x2*-0x87e+0x11*-0x18d):_0x1a85fc['scripts'];for(const _0x2be2b7 in _0x568c30){const _0x183976=_0x568c30[_0x2be2b7];if(_0x183976['prototype']instanceof ts){const _0x3607d2=Mk(_0x183976['name']);_0x183976['scriptName']||w['warnOnce']('The\x20Script'+'\x20class\x20\x22'+_0x183976['name']+('\x22\x20must\x20hav'+'e\x20a\x20static'+'\x20\x22scriptNa'+'me\x22\x20proper'+'ty:\x20`')+_0x183976['name']+('.scriptNam'+'e\x20=\x20\x22')+_0x3607d2+('\x22;`.\x20This\x20'+'will\x20be\x20an'+'\x20error\x20in\x20'+'future\x20ver'+'sions\x20of\x20P'+'layCanvas.'));const _0x577abc=_0x183976['scriptName']??_0x3607d2;Pk(_0x183976,_0x577abc),_0x8b667&&this['_app']['scripts']['addSchema'](_0x577abc,_0x8b667[_0x577abc]);}}_0x150e92(null,_0x48ced0,null);})['catch'](_0x5f21b8=>{_0x150e92(_0x5f21b8);});}}class Ik extends Qe{constructor(_0x1a9f42){super(_0x1a9f42,'shader'),h(this,'decoder',null);}['load'](_0x51bc9f,_0x26b6c4){typeof _0x51bc9f=='string'&&(_0x51bc9f={'load':_0x51bc9f,'original':_0x51bc9f}),ot['get'](_0x51bc9f['load'],{'retry':this['maxRetries']>-0x1*0x11ff+-0x182+0x1*0x1381,'maxRetries':this['maxRetries']},(_0x21e4fc,_0x2ea9bd)=>{_0x21e4fc?_0x26b6c4('Error\x20load'+'ing\x20shader'+'\x20resource:'+'\x20'+_0x51bc9f['original']+'\x20['+_0x21e4fc+']'):_0x26b6c4(null,_0x2ea9bd);});}['openBinary'](_0x30f471){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),this['decoder']['decode'](_0x30f471);}}function Pf(_0x4e804f){const _0x2c79c3=this;_0x2c79c3['resource']&&(_0x2c79c3['resource']['atlas']=_0x4e804f['resource']);}function Mf(_0xc2d797){this['registry']['load'](_0xc2d797);}class Lk extends Qe{constructor(_0x43c5fb){super(_0x43c5fb,'sprite'),this['_assets']=_0x43c5fb['assets'],this['_device']=_0x43c5fb['graphicsDe'+'vice'];}['load'](_0x6d3e48,_0x1a64aa){typeof _0x6d3e48=='string'&&(_0x6d3e48={'load':_0x6d3e48,'original':_0x6d3e48}),xe['getExtensi'+'on'](_0x6d3e48['original'])==='.json'&&ot['get'](_0x6d3e48['load'],{'retry':this['maxRetries']>-0x1*-0x1f85+-0x3*0x67+-0x1e50,'maxRetries':this['maxRetries']},(_0x12d7f1,_0x57e8b8)=>{_0x12d7f1?_0x1a64aa(_0x12d7f1):_0x1a64aa(null,_0x57e8b8);});}['open'](_0x251641,_0x51daa3){const _0x1ad56b=new BA(this['_device']);return _0x251641&&(_0x1ad56b['__data']=_0x51daa3),_0x1ad56b;}['patch'](_0x2f269c,_0x665ea){const _0x5c754f=_0x2f269c['resource'];if(_0x5c754f['__data']&&(_0x2f269c['data']['pixelsPerU'+'nit']=_0x5c754f['__data']['pixelsPerU'+'nit'],_0x2f269c['data']['renderMode']=_0x5c754f['__data']['renderMode'],_0x2f269c['data']['frameKeys']=_0x5c754f['__data']['frameKeys'],_0x5c754f['__data']['textureAtl'+'asAsset'])){const _0xcdbd2d=_0x665ea['getByUrl'](_0x5c754f['__data']['textureAtl'+'asAsset']);_0xcdbd2d?_0x2f269c['data']['textureAtl'+'asAsset']=_0xcdbd2d['id']:console['warn']('Could\x20not\x20'+'find\x20textu'+'reatlas\x20wi'+'th\x20url:\x20'+_0x5c754f['__data']['textureAtl'+'asAsset']);}_0x5c754f['startUpdat'+'e'](),_0x5c754f['renderMode']=_0x2f269c['data']['renderMode'],_0x5c754f['pixelsPerU'+'nit']=_0x2f269c['data']['pixelsPerU'+'nit'],_0x5c754f['frameKeys']=_0x2f269c['data']['frameKeys'],this['_updateAtl'+'as'](_0x2f269c),_0x5c754f['endUpdate'](),_0x2f269c['off']('change',this['_onAssetCh'+'ange'],this),_0x2f269c['on']('change',this['_onAssetCh'+'ange'],this);}['_updateAtl'+'as'](_0x32b018){const _0x3e15d4=_0x32b018['resource'];if(!_0x32b018['data']['textureAtl'+'asAsset']){_0x3e15d4['atlas']=null;return;}this['_assets']['off']('load:'+_0x32b018['data']['textureAtl'+'asAsset'],Pf,_0x32b018),this['_assets']['on']('load:'+_0x32b018['data']['textureAtl'+'asAsset'],Pf,_0x32b018);const _0x321b5e=this['_assets']['get'](_0x32b018['data']['textureAtl'+'asAsset']);_0x321b5e&&_0x321b5e['resource']?_0x3e15d4['atlas']=_0x321b5e['resource']:_0x321b5e?this['_assets']['load'](_0x321b5e):(this['_assets']['off']('add:'+_0x32b018['data']['textureAtl'+'asAsset'],Mf,_0x32b018),this['_assets']['on']('add:'+_0x32b018['data']['textureAtl'+'asAsset'],Mf,_0x32b018));}['_onAssetCh'+'ange'](_0x5943a2,_0x468997,_0x318e61,_0x33e0c9){_0x468997==='data'&&_0x318e61&&_0x318e61['textureAtl'+'asAsset']&&_0x33e0c9&&_0x318e61['textureAtl'+'asAsset']!==_0x33e0c9['textureAtl'+'asAsset']&&(this['_assets']['off']('load:'+_0x33e0c9['textureAtl'+'asAsset'],Pf,_0x5943a2),this['_assets']['off']('add:'+_0x33e0c9['textureAtl'+'asAsset'],Mf,_0x5943a2));}}class vS{constructor(_0x23087e,_0x5527fb){h(this,'_app'),h(this,'_data'),h(this,'_templateR'+'oot',null),(this['_app']=_0x23087e,this['_data']=_0x5527fb);}['instantiat'+'e'](){return this['_templateR'+'oot']||this['_parseTemp'+'late'](),this['_templateR'+'oot']['clone']();}['_parseTemp'+'late'](){const _0x5d1498=new bm(this['_app'],!(-0x97*0xa+0x20b4+-0x1ace*0x1));this['_templateR'+'oot']=_0x5d1498['parse'](this['_data']);}}class Rk extends Qe{constructor(_0x4016bd){super(_0x4016bd,'template'),h(this,'decoder',null);}['load'](_0x1b12f6,_0xbdc0c7){typeof _0x1b12f6=='string'&&(_0x1b12f6={'load':_0x1b12f6,'original':_0x1b12f6});const _0x27c55d={'retry':this['maxRetries']>0xa3*0x3d+-0xb5f*0x1+-0x1b78,'maxRetries':this['maxRetries']};ot['get'](_0x1b12f6['load'],_0x27c55d,(_0x30c9b3,_0x204e48)=>{_0x30c9b3?_0xbdc0c7('Error\x20requ'+'esting\x20tem'+'plate:\x20'+_0x1b12f6['original']):_0xbdc0c7(_0x30c9b3,_0x204e48);});}['open'](_0x7c2953,_0x5cf303){return new vS(this['_app'],_0x5cf303);}['openBinary'](_0x3d3d8d){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),new vS(this['_app'],JSON['parse'](this['decoder']['decode'](_0x3d3d8d)));}}class Ok extends Qe{constructor(_0xfe8003){super(_0xfe8003,'text'),h(this,'decoder',null);}['load'](_0x13ea95,_0x272e01){typeof _0x13ea95=='string'&&(_0x13ea95={'load':_0x13ea95,'original':_0x13ea95}),ot['get'](_0x13ea95['load'],{'retry':this['maxRetries']>0x3d*0x25+0xacc*-0x2+-0x1*-0xcc7,'maxRetries':this['maxRetries']},(_0x4c24b3,_0x4d8fa6)=>{_0x4c24b3?_0x272e01('Error\x20load'+'ing\x20text\x20r'+'esource:\x20'+_0x13ea95['original']+'\x20['+_0x4c24b3+']'):_0x272e01(null,_0x4d8fa6);});}['openBinary'](_0x718505){return this['decoder']??(this['decoder']=new TextDecoder('utf-8')),this['decoder']['decode'](_0x718505);}}const Ic={'repeat':yt,'clamp':ue,'mirror':ip},Lc={'nearest':Te,'linear':vt,'nearest_mip_nearest':Kh,'linear_mip_nearest':Qh,'nearest_mip_linear':Zh,'linear_mip_linear':ma},Fk=/^data\.frames\.(\d+)$/;class Nk extends Qe{constructor(_0x183e4e){super(_0x183e4e,'textureatl'+'as'),this['_loader']=_0x183e4e['loader'];}['load'](_0x32fbf0,_0x5a5043){typeof _0x32fbf0=='string'&&(_0x32fbf0={'load':_0x32fbf0,'original':_0x32fbf0});const _0x305819=this,_0x15ab19=this['_loader']['getHandler']('texture');xe['getExtensi'+'on'](_0x32fbf0['original'])==='.json'?ot['get'](_0x32fbf0['load'],{'retry':this['maxRetries']>-0xe90+0x2517+-0x1687,'maxRetries':this['maxRetries']},(_0x39f48e,_0x11a508)=>{if(_0x39f48e)_0x5a5043(_0x39f48e);else{const _0x155b26=_0x32fbf0['original']['replace']('.json','.png');_0x305819['_loader']['load'](_0x155b26,'texture',(_0x4cd5cb,_0x4dc6fc)=>{_0x4cd5cb?_0x5a5043(_0x4cd5cb):_0x5a5043(null,{'data':_0x11a508,'texture':_0x4dc6fc});});}}):_0x15ab19['load'](_0x32fbf0,_0x5a5043);}['open'](_0x4842c4,_0x107acc,_0x4bfb29){const _0x44b622=new zA();if(_0x107acc['texture']&&_0x107acc['data'])_0x44b622['texture']=_0x107acc['texture'],_0x44b622['__data']=_0x107acc['data'];else{const _0x39679e=this['_loader']['getHandler']('texture')['open'](_0x4842c4,_0x107acc,_0x4bfb29);if(!_0x39679e)return null;_0x44b622['texture']=_0x39679e;}return _0x44b622;}['patch'](_0x44fca3,_0x433c60){if(!_0x44fca3['resource'])return;_0x44fca3['resource']['__data']&&(_0x44fca3['resource']['__data']['minfilter']!==void(0xac9*-0x1+0x1*0x141b+-0x952)&&(_0x44fca3['data']['minfilter']=_0x44fca3['resource']['__data']['minfilter']),_0x44fca3['resource']['__data']['magfilter']!==void(0x3*0x831+0x78*0x7+0x1bdb*-0x1)&&(_0x44fca3['data']['magfilter']=_0x44fca3['resource']['__data']['magfilter']),_0x44fca3['resource']['__data']['addressu']!==void(0xca*0x17+-0x2a2+-0x296*0x6)&&(_0x44fca3['data']['addressu']=_0x44fca3['resource']['__data']['addressu']),_0x44fca3['resource']['__data']['addressv']!==void(0x12f1+0x1eaa+-0x319b)&&(_0x44fca3['data']['addressv']=_0x44fca3['resource']['__data']['addressv']),_0x44fca3['resource']['__data']['mipmaps']!==void(-0x6ba+-0x7*-0x479+-0x1895)&&(_0x44fca3['data']['mipmaps']=_0x44fca3['resource']['__data']['mipmaps']),_0x44fca3['resource']['__data']['anisotropy']!==void(-0xdae+0x1ad1+-0xd23)&&(_0x44fca3['data']['anisotropy']=_0x44fca3['resource']['__data']['anisotropy']),_0x44fca3['resource']['__data']['rgbm']!==void(0x50b+0x56e+0x1*-0xa79)&&(_0x44fca3['data']['rgbm']=!!_0x44fca3['resource']['__data']['rgbm']),_0x44fca3['data']['frames']=_0x44fca3['resource']['__data']['frames'],delete _0x44fca3['resource']['__data']);const _0x4588a8=_0x44fca3['resource']['texture'];if(_0x4588a8&&(_0x4588a8['name']=_0x44fca3['name'],_0x44fca3['data']['hasOwnProp'+'erty']('minfilter')&&_0x4588a8['minFilter']!==Lc[_0x44fca3['data']['minfilter']]&&(_0x4588a8['minFilter']=Lc[_0x44fca3['data']['minfilter']]),_0x44fca3['data']['hasOwnProp'+'erty']('magfilter')&&_0x4588a8['magFilter']!==Lc[_0x44fca3['data']['magfilter']]&&(_0x4588a8['magFilter']=Lc[_0x44fca3['data']['magfilter']]),_0x44fca3['data']['hasOwnProp'+'erty']('addressu')&&_0x4588a8['addressU']!==Ic[_0x44fca3['data']['addressu']]&&(_0x4588a8['addressU']=Ic[_0x44fca3['data']['addressu']]),_0x44fca3['data']['hasOwnProp'+'erty']('addressv')&&_0x4588a8['addressV']!==Ic[_0x44fca3['data']['addressv']]&&(_0x4588a8['addressV']=Ic[_0x44fca3['data']['addressv']]),_0x44fca3['data']['hasOwnProp'+'erty']('mipmaps')&&_0x4588a8['mipmaps']!==_0x44fca3['data']['mipmaps']&&(_0x4588a8['mipmaps']=_0x44fca3['data']['mipmaps']),_0x44fca3['data']['hasOwnProp'+'erty']('anisotropy')&&_0x4588a8['anisotropy']!==_0x44fca3['data']['anisotropy']&&(_0x4588a8['anisotropy']=_0x44fca3['data']['anisotropy']),_0x44fca3['data']['hasOwnProp'+'erty']('rgbm'))){const _0x3f256b=_0x44fca3['data']['rgbm']?Zi:Ds;_0x4588a8['type']!==_0x3f256b&&(_0x4588a8['type']=_0x3f256b);}_0x44fca3['resource']['texture']=_0x4588a8;const _0x5e7637={};for(const _0x31d62 in _0x44fca3['data']['frames']){const _0x1d6f44=_0x44fca3['data']['frames'][_0x31d62];_0x5e7637[_0x31d62]={'rect':new re(_0x1d6f44['rect']),'pivot':new J(_0x1d6f44['pivot']),'border':new re(_0x1d6f44['border'])};}_0x44fca3['resource']['frames']=_0x5e7637,_0x44fca3['off']('change',this['_onAssetCh'+'ange'],this),_0x44fca3['on']('change',this['_onAssetCh'+'ange'],this);}['_onAssetCh'+'ange'](_0x4245ec,_0x9b9586,_0x3648b0){let _0x2d6f0e;if(_0x9b9586==='data'||_0x9b9586==='data.frame'+'s'){const _0xcb48c5={};for(const _0x166442 in _0x3648b0['frames'])_0x2d6f0e=_0x3648b0['frames'][_0x166442],_0xcb48c5[_0x166442]={'rect':new re(_0x2d6f0e['rect']),'pivot':new J(_0x2d6f0e['pivot']),'border':new re(_0x2d6f0e['border'])};_0x4245ec['resource']['frames']=_0xcb48c5;}else{const _0x423ee8=_0x9b9586['match'](Fk);if(_0x423ee8){const _0x57e8c1=_0x423ee8[0x13*0xc6+0x17*0x1b+-0x111e];_0x3648b0?(_0x4245ec['resource']['frames'][_0x57e8c1]?(_0x2d6f0e=_0x4245ec['resource']['frames'][_0x57e8c1],_0x2d6f0e['rect']['set'](_0x3648b0['rect'][-0xd98+0x1*-0x138f+-0xcf*-0x29],_0x3648b0['rect'][-0x469*-0x1+0x17+-0x47f],_0x3648b0['rect'][0x1e89+-0x100c+-0x1*0xe7b],_0x3648b0['rect'][0xf6e+0x1d*0x155+0x481*-0xc]),_0x2d6f0e['pivot']['set'](_0x3648b0['pivot'][-0x1b81+-0x4*0x68e+0x35b9*0x1],_0x3648b0['pivot'][-0x8bf+-0x433*0x1+0x3*0x451]),_0x2d6f0e['border']['set'](_0x3648b0['border'][0x13ee*0x1+-0x1*-0x1087+-0x3d*0x99],_0x3648b0['border'][-0x1*-0x1bbc+0x2*-0x718+-0xd8b*0x1],_0x3648b0['border'][-0xed*-0x7+0x1209+-0x1882],_0x3648b0['border'][-0x1901+-0x1ecf+0x37d3])):_0x4245ec['resource']['frames'][_0x57e8c1]={'rect':new re(_0x3648b0['rect']),'pivot':new J(_0x3648b0['pivot']),'border':new re(_0x3648b0['border'])},_0x4245ec['resource']['fire']('set:frame',_0x57e8c1,_0x4245ec['resource']['frames'][_0x57e8c1])):_0x4245ec['resource']['frames'][_0x57e8c1]&&(delete _0x4245ec['resource']['frames'][_0x57e8c1],_0x4245ec['resource']['fire']('remove:fra'+'me',_0x57e8c1));}}}}function kk(){const _0x1a2844={'cTFETC1':0x0,'cTFETC2':0x1,'cTFBC1':0x2,'cTFBC3':0x3,'cTFPVRTC1_4_RGB':0x8,'cTFPVRTC1_4_RGBA':0x9,'cTFASTC_4x4':0xa,'cTFATC_RGB':0xb,'cTFATC_RGBA_INTERPOLATED_ALPHA':0xc,'cTFRGBA32':0xd,'cTFRGB565':0xe,'cTFRGBA4444':0x10},_0x4354dd={'astc':_0x1a2844['cTFASTC_4x'+'4'],'dxt':_0x1a2844['cTFBC1'],'etc1':_0x1a2844['cTFETC1'],'etc2':_0x1a2844['cTFETC1'],'pvr':_0x1a2844['cTFPVRTC1_'+'4_RGB'],'atc':_0x1a2844['cTFATC_RGB'],'none':_0x1a2844['cTFRGB565']},_0x48b73b={'astc':_0x1a2844['cTFASTC_4x'+'4'],'dxt':_0x1a2844['cTFBC3'],'etc1':_0x1a2844['cTFRGBA444'+'4'],'etc2':_0x1a2844['cTFETC2'],'pvr':_0x1a2844['cTFPVRTC1_'+'4_RGBA'],'atc':_0x1a2844['cTFATC_RGB'+'A_INTERPOL'+'ATED_ALPHA'],'none':_0x1a2844['cTFRGBA444'+'4']},_0x409306={'ETC1':0x15,'ETC2_RGB':0x16,'ETC2_RGBA':0x17,'DXT1':0x8,'DXT5':0xa,'PVRTC_4BPP_RGB_1':0x1a,'PVRTC_4BPP_RGBA_1':0x1b,'ASTC_4x4':0x1c,'ATC_RGB':0x1d,'ATC_RGBA':0x1e,'R8_G8_B8_A8':0x7,'R5_G6_B5':0x3,'R4_G4_B4_A4':0x5},_0x3b6173=(_0x190e86,_0x2dcd60)=>{switch(_0x190e86){case _0x1a2844['cTFETC1']:return _0x2dcd60['formats']['etc2']?_0x409306['ETC2_RGB']:_0x409306['ETC1'];case _0x1a2844['cTFETC2']:return _0x409306['ETC2_RGBA'];case _0x1a2844['cTFBC1']:return _0x409306['DXT1'];case _0x1a2844['cTFBC3']:return _0x409306['DXT5'];case _0x1a2844['cTFPVRTC1_'+'4_RGB']:return _0x409306['PVRTC_4BPP'+'_RGB_1'];case _0x1a2844['cTFPVRTC1_'+'4_RGBA']:return _0x409306['PVRTC_4BPP'+'_RGBA_1'];case _0x1a2844['cTFASTC_4x'+'4']:return _0x409306['ASTC_4x4'];case _0x1a2844['cTFATC_RGB']:return _0x409306['ATC_RGB'];case _0x1a2844['cTFATC_RGB'+'A_INTERPOL'+'ATED_ALPHA']:return _0x409306['ATC_RGBA'];case _0x1a2844['cTFRGBA32']:return _0x409306['R8_G8_B8_A'+'8'];case _0x1a2844['cTFRGB565']:return _0x409306['R5_G6_B5'];case _0x1a2844['cTFRGBA444'+'4']:return _0x409306['R4_G4_B4_A'+'4'];}},_0x1281c5=_0x59c421=>{const _0x2749a4=function(_0x5eb5c4,_0x2be8c9){const _0x1070b3=_0x5eb5c4*(0x1d9e+0x1*0x17b3+0x1*-0x3551+0.00784313725490196)-(0xc*0x53+-0x5*0x1b7+-0x64*-0xc),_0x23e64f=_0x2be8c9*((-0x2*0xd64+-0x2397+-0x3*-0x14cb)/(-0x58e+0x25de+-0x1f51))-(0x1*-0x2257+-0x2cd*0x4+0x14*0x247),_0x159035=Math['sqrt'](0x1*-0x49f+-0x13d*0x17+0x211b-Math['min'](0x2589+0x73b+0x1*-0x2cc3,_0x1070b3*_0x1070b3+_0x23e64f*_0x23e64f));return Math['max'](0x59*0x7+0x1*-0x1792+0x1*0x1523,Math['min'](-0x1149+0x1*-0x1877+0x2abf,Math['floor']((_0x159035+(-0xa00*0x1+0x36d+0x4*0x1a5))*(0x8b0+0x44b+-0xcfb*0x1+0.5)*(-0x37*0x2d+-0x9*0x40e+0x1794*0x2))));};for(let _0x446ad7=-0x90f*0x1+-0x49b+0x35*0x42;_0x446ad7<_0x59c421['length'];_0x446ad7+=0x105b+-0x24*0x76+-0xd*-0x5){const _0x574c0e=_0x59c421[_0x446ad7+(-0x2594+-0x95*-0x43+-0x168)],_0x26ac42=_0x59c421[_0x446ad7+(-0x4*0x76+0x3*-0x6e4+0x1685)];_0x59c421[_0x446ad7+(0x23a2+-0xbe7*-0x1+-0x2f89)]=_0x574c0e,_0x59c421[_0x446ad7+(-0x663*-0x6+-0x10ed+-0xdb*0x19)]=_0x2749a4(_0x574c0e,_0x26ac42),_0x59c421[_0x446ad7+(-0x67a+-0xaa9+-0x2*-0x893)]=-0xc8a+0x2f9*0x1+0xa90;}return _0x59c421;},_0x3dcde7=_0x2f0f45=>{const _0x3165fb=new Uint16Array(_0x2f0f45['length']/(0x1*0x18db+-0x7*-0x2c1+-0x2c1e));for(let _0x3c6c7c=0x12a0+0x22de+-0x357e;_0x3c6c7c<_0x2f0f45['length'];_0x3c6c7c+=-0x73d+-0xa9*0x7+-0x130*-0xa){const _0x294c83=_0x2f0f45[_0x3c6c7c+(-0xedb+-0xe8*-0x19+-0x7cd)],_0x4ade47=_0x2f0f45[_0x3c6c7c+(0x110a*0x1+-0x1*-0x24f5+-0x2*0x1aff)],_0x8d0362=_0x2f0f45[_0x3c6c7c+(-0xc7f+-0x2*0xc50+0x1*0x2521)];_0x3165fb[_0x3c6c7c/(-0x1*-0x119f+0x4*0x42c+-0x224b)]=(_0x294c83&0xe06+0x1e80+-0x2b8e)<<0xb32+-0x1c7b+0x1151|(_0x4ade47&0x7be+-0x275+-0x44d*0x1)<<0x1*0x1425+0x3*0x782+0x888*-0x5|_0x8d0362>>0x32e*-0xa+-0x1e86+0x3e55;}return _0x3165fb;},_0x4a4857=(_0xf90b81,_0x2a881a)=>(_0xf90b81&_0xf90b81-(0x240e+0x220+-0x262d))===-0x2430+0x1*-0x5bd+0x1*0x29ed&&(_0x2a881a&_0x2a881a-(0x975+0x23d5+-0x2d49))===0xf0c+0x13e9+0xba7*-0x3,_0x9d88a5=()=>typeof performance<'u'?performance['now']():0x25ab+0xe9*0x22+-0x1*0x449d;let _0x16a08f,_0xe98887,_0x50dc17;const _0x9963=(_0x484e3b,_0x14aadc,_0x264f36)=>{if(_0x264f36){if(_0x484e3b['formats']['astc'])return'astc';}else{if(_0x14aadc){if(_0x484e3b['formats']['etc2'])return'etc2';}else{if(_0x484e3b['formats']['etc2'])return'etc2';if(_0x484e3b['formats']['etc1'])return'etc1';}}return(_0x4b9188=>{for(let _0x580625=-0xf29+0x72e*0x5+0x1*-0x14bd;_0x580625<_0x4b9188['length'];++_0x580625){const _0x1cd977=_0x4b9188[_0x580625];if(_0x484e3b['formats'][_0x1cd977])return _0x1cd977;}return'none';})(_0x14aadc?_0x50dc17:_0xe98887);},_0xd6c67=(_0x3376c5,_0x397832,_0x59f585)=>{switch(_0x59f585){case _0x1a2844['cTFETC1']:case _0x1a2844['cTFETC2']:return!(-0x3*-0x96f+0x268a+-0x1*0x42d7);case _0x1a2844['cTFBC1']:case _0x1a2844['cTFBC3']:return(_0x3376c5&0x2*-0xf5c+0xf77*-0x1+0x2e32)===-0x15f9+-0x241f+0x3a18&&(_0x397832&-0x4*-0xbf+0x2346+-0x263f)===0x1*-0x21e9+-0x2609+-0x1*-0x47f2;case _0x1a2844['cTFPVRTC1_'+'4_RGB']:case _0x1a2844['cTFPVRTC1_'+'4_RGBA']:return _0x4a4857(_0x3376c5,_0x397832);case _0x1a2844['cTFASTC_4x'+'4']:return!(-0x29*-0x1+0x4*-0x907+0x23f3);case _0x1a2844['cTFATC_RGB']:case _0x1a2844['cTFATC_RGB'+'A_INTERPOL'+'ATED_ALPHA']:return!(0x5*-0xfa+-0x39*0x58+0x187a);}return!(0x2*0xa7+-0x680+0x533*0x1);},_0x599b40=(_0x581ace,_0x2abb85,_0x23d875)=>{if(!_0x16a08f['KTX2File'])throw new Error('Basis\x20tran'+'scoder\x20mod'+'ule\x20does\x20n'+'ot\x20include'+'\x20support\x20f'+'or\x20KTX2.');const _0x1835fe=_0x9d88a5(),_0x2dee6e=new _0x16a08f['KTX2File'](new Uint8Array(_0x2abb85)),_0x3455c2=_0x2dee6e['getWidth'](),_0x100dd8=_0x2dee6e['getHeight'](),_0x3dd5f2=_0x2dee6e['getLevels'](),_0x147484=!!_0x2dee6e['getHasAlph'+'a'](),_0x19415b=_0x2dee6e['isUASTC']&&_0x2dee6e['isUASTC']();if(!_0x3455c2||!_0x100dd8||!_0x3dd5f2)throw _0x2dee6e['close'](),_0x2dee6e['delete'](),new Error('Invalid\x20im'+'age\x20dimens'+'ions\x20url='+_0x581ace+'\x20width='+_0x3455c2+'\x20height='+_0x100dd8+'\x20levels='+_0x3dd5f2);const _0xf2a2b4=_0x9963(_0x23d875['deviceDeta'+'ils'],_0x147484,_0x19415b),_0xf26d5f=!!_0x23d875['isGGGR']&&_0xf2a2b4==='pvr';let _0x325855;if(_0xf26d5f?_0x325855=_0x1a2844['cTFRGBA32']:(_0x325855=_0x147484?_0x48b73b[_0xf2a2b4]:_0x4354dd[_0xf2a2b4],_0xd6c67(_0x3455c2,_0x100dd8,_0x325855)||(_0x325855=_0x147484?_0x1a2844['cTFRGBA32']:_0x1a2844['cTFRGB565'])),!_0x2dee6e['startTrans'+'coding']())throw _0x2dee6e['close'](),_0x2dee6e['delete'](),new Error('Failed\x20to\x20'+'start\x20tran'+'scoding\x20ur'+'l='+_0x581ace);let _0x9a8f46;const _0x31dbde=[];for(let _0x4f860e=0x2274+-0x101d+-0x1257;_0x4f860e<_0x3dd5f2;++_0x4f860e){const _0x3df719=_0x2dee6e['getImageTr'+'anscodedSi'+'zeInBytes'](_0x4f860e,0x1*-0x1f73+-0x193*-0xd+0xafc,-0x2510+-0x16b3*-0x1+0xe5d,_0x325855),_0x9e195c=new Uint8Array(_0x3df719);if(!_0x2dee6e['transcodeI'+'mage'](_0x9e195c,_0x4f860e,-0x8*0x43f+0x5*-0x47f+0x3873,0x14*0xd7+0xbc*-0x5+0xd2*-0x10,_0x325855,-0x1b9*0x3+0xc*0x2bc+-0x1ba5,-(-0x1*0x1b6f+-0xa14+0x157*0x1c),-(-0x2123+0x1ed6+0x24e)))throw _0x2dee6e['close'](),_0x2dee6e['delete'](),new Error('Failed\x20to\x20'+'transcode\x20'+'image\x20url='+_0x581ace);const _0x1d91a7=_0x325855===_0x1a2844['cTFRGB565']||_0x325855===_0x1a2844['cTFRGBA444'+'4'];_0x31dbde['push'](_0x1d91a7?new Uint16Array(_0x9e195c['buffer']):_0x9e195c);}if(_0x2dee6e['close'](),_0x2dee6e['delete'](),_0xf26d5f){for(_0x325855=_0x1a2844['cTFRGB565'],_0x9a8f46=0x5*-0x77e+0x8b*0x26+0x10d4;_0x9a8f46<_0x31dbde['length'];++_0x9a8f46)_0x31dbde[_0x9a8f46]=_0x3dcde7(_0x1281c5(_0x31dbde[_0x9a8f46]));}return{'format':_0x3b6173(_0x325855,_0x23d875['deviceDeta'+'ils']),'width':_0x3455c2,'height':_0x100dd8,'levels':_0x31dbde,'cubemap':!(-0xdf3+0x1*0x247a+-0x1686),'transcodeTime':_0x9d88a5()-_0x1835fe,'url':_0x581ace,'unswizzledGGGR':_0xf26d5f};},_0x142485=(_0x48a37b,_0x349348,_0x165be7)=>{const _0x3cc972=_0x9d88a5(),_0x1e593=new _0x16a08f['BasisFile'](new Uint8Array(_0x349348)),_0x53805a=_0x1e593['getImageWi'+'dth'](0x1*0x15c4+0xff9+-0x1*0x25bd,-0xcb5+-0xa*-0x10d+0x233),_0x255964=_0x1e593['getImageHe'+'ight'](0x1*-0x226f+0xb88+-0x16e7*-0x1,-0xc58+0x1935+0x1*-0xcdd),_0x24d0bc=_0x1e593['getNumImag'+'es'](),_0xd6a375=_0x1e593['getNumLeve'+'ls'](-0x10a0+0x1b40+-0xaa0),_0x28a6f9=!!_0x1e593['getHasAlph'+'a'](),_0x4da906=_0x1e593['isUASTC']&&_0x1e593['isUASTC']();if(!_0x53805a||!_0x255964||!_0x24d0bc||!_0xd6a375)throw _0x1e593['close'](),_0x1e593['delete'](),new Error('Invalid\x20im'+'age\x20dimens'+'ions\x20url='+_0x48a37b+'\x20width='+_0x53805a+'\x20height='+_0x255964+'\x20images='+_0x24d0bc+'\x20levels='+_0xd6a375);const _0xe44e59=_0x9963(_0x165be7['deviceDeta'+'ils'],_0x28a6f9,_0x4da906),_0x1d0118=!!_0x165be7['isGGGR']&&_0xe44e59==='pvr';let _0x3e70f7;if(_0x1d0118?_0x3e70f7=_0x1a2844['cTFRGBA32']:(_0x3e70f7=_0x28a6f9?_0x48b73b[_0xe44e59]:_0x4354dd[_0xe44e59],_0xd6c67(_0x53805a,_0x255964,_0x3e70f7)||(_0x3e70f7=_0x28a6f9?_0x1a2844['cTFRGBA32']:_0x1a2844['cTFRGB565'])),!_0x1e593['startTrans'+'coding']())throw _0x1e593['close'](),_0x1e593['delete'](),new Error('Failed\x20to\x20'+'start\x20tran'+'scoding\x20ur'+'l='+_0x48a37b);let _0x5ebbbe;const _0x173e74=[];for(let _0x3e8b27=0xf45+0x1*-0xfd0+0x8b;_0x3e8b27<_0xd6a375;++_0x3e8b27){const _0x5b03a0=_0x1e593['getImageTr'+'anscodedSi'+'zeInBytes'](-0x1f65+-0x3*0x4ed+0x2e2c,_0x3e8b27,_0x3e70f7),_0x3b66f2=new Uint8Array(_0x5b03a0);if(!_0x1e593['transcodeI'+'mage'](_0x3b66f2,0x1ff+0x1*-0xcee+0xaef,_0x3e8b27,_0x3e70f7,0x9d*0x3+0x1649*-0x1+0x1472,0x241*-0x3+0x2a*0xd9+0x6b*-0x45)){if(_0x3e8b27===_0xd6a375-(-0xae1*-0x1+-0x1*-0x1fd3+-0x2ab3)&&_0x5b03a0===_0x173e74[_0x3e8b27-(0x2b4*-0xb+0x963+-0xa*-0x209)]['buffer']['byteLength'])_0x3b66f2['set'](new Uint8Array(_0x173e74[_0x3e8b27-(-0x1c34+-0xb*0x22a+0x3403)]['buffer'])),console['warn']('Failed\x20to\x20'+'transcode\x20'+'last\x20mipma'+'p\x20level,\x20u'+'sing\x20previ'+'ous\x20level\x20'+'instead\x20ur'+'l='+_0x48a37b);else throw _0x1e593['close'](),_0x1e593['delete'](),new Error('Failed\x20to\x20'+'transcode\x20'+'image\x20url='+_0x48a37b);}const _0x1cfb82=_0x3e70f7===_0x1a2844['cTFRGB565']||_0x3e70f7===_0x1a2844['cTFRGBA444'+'4'];_0x173e74['push'](_0x1cfb82?new Uint16Array(_0x3b66f2['buffer']):_0x3b66f2);}if(_0x1e593['close'](),_0x1e593['delete'](),_0x1d0118){for(_0x3e70f7=_0x1a2844['cTFRGB565'],_0x5ebbbe=0xfdc+-0x3*-0x607+-0x21f1;_0x5ebbbe<_0x173e74['length'];++_0x5ebbbe)_0x173e74[_0x5ebbbe]=_0x3dcde7(_0x1281c5(_0x173e74[_0x5ebbbe]));}return{'format':_0x3b6173(_0x3e70f7,_0x165be7['deviceDeta'+'ils']),'width':_0x53805a,'height':_0x255964,'levels':_0x173e74,'cubemap':!(-0x623*0x4+0x407*-0x3+0x12*0x209),'transcodeTime':_0x9d88a5()-_0x3cc972,'url':_0x48a37b,'unswizzledGGGR':_0x1d0118};},_0x240d4e=(_0x254fde,_0x4a6e12,_0x3b11c6)=>_0x3b11c6['isKTX2']?_0x599b40(_0x254fde,_0x4a6e12,_0x3b11c6):_0x142485(_0x254fde,_0x4a6e12,_0x3b11c6),_0x118eed=(_0x2a3f2d,_0x1bfebd,_0x322f10)=>{try{const _0x1ea8f4=_0x240d4e(_0x2a3f2d,_0x1bfebd,_0x322f10);_0x1ea8f4['levels']=_0x1ea8f4['levels']['map'](_0x3362fe=>_0x3362fe['buffer']),self['postMessag'+'e']({'url':_0x2a3f2d,'data':_0x1ea8f4},_0x1ea8f4['levels']);}catch(_0x2aa4d7){self['postMessag'+'e']({'url':_0x2a3f2d,'err':_0x2aa4d7},null);}},_0x3b48f8=(_0x251b0a,_0x2653c6)=>{const _0x507e7e=(_0x30ff29,_0x556fa4)=>(WebAssembly['instantiat'+'e'](_0x251b0a['module'],_0x30ff29)['then'](_0x1098e8=>{_0x556fa4(_0x1098e8);})['catch'](_0x1b5f71=>{console['error']('instantiat'+'e\x20failed\x20+'+'\x20'+_0x1b5f71);}),{});self['BASIS'](_0x251b0a['module']?{'instantiateWasm':_0x507e7e}:null)['then'](_0xadc6b8=>{_0xadc6b8['initialize'+'Basis'](),_0x16a08f=_0xadc6b8,_0xe98887=_0x251b0a['rgbPriorit'+'y'],_0x50dc17=_0x251b0a['rgbaPriori'+'ty'],_0x2653c6(null);});},_0x140250=[];self['onmessage']=_0x126e01=>{const _0x20ff87=_0x126e01['data'];switch(_0x20ff87['type']){case'init':_0x3b48f8(_0x20ff87['config'],()=>{for(let _0x205ca7=0xd70+0x1d83+-0x2af3;_0x205ca7<_0x140250['length'];++_0x205ca7)_0x118eed(_0x140250[_0x205ca7]['url'],_0x140250[_0x205ca7]['data'],_0x140250[_0x205ca7]['options']);_0x140250['length']=0x1*-0x11cf+-0xa55+0xe12*0x2;});break;case'transcode':_0x16a08f?_0x118eed(_0x20ff87['url'],_0x20ff87['data'],_0x20ff87['options']):_0x140250['push'](_0x20ff87);break;}};}const Uk=_0x5d9f7c=>({'astc':!!_0x5d9f7c['extCompres'+'sedTexture'+'ASTC'],'atc':!!_0x5d9f7c['extCompres'+'sedTexture'+'ATC'],'dxt':!!_0x5d9f7c['extCompres'+'sedTexture'+'S3TC'],'etc1':!!_0x5d9f7c['extCompres'+'sedTexture'+'ETC1'],'etc2':!!_0x5d9f7c['extCompres'+'sedTexture'+'ETC'],'pvr':!!_0x5d9f7c['extCompres'+'sedTexture'+'PVRTC']}),Bk=(_0x183ec9,_0x33fd2d)=>{const _0x2a409f=_0x7b97d1=>{const _0x2b0941=['/*\x20basis\x20*'+'/',_0x7b97d1,'','('+kk['toString']()+')()\x0a\x0a']['join']('\x0a');return new Blob([_0x2b0941],{'type':'applicatio'+'n/javascri'+'pt'});},_0x32600b=()=>{try{if(typeof WebAssembly=='object'&&typeof WebAssembly['instantiat'+'e']=='function'){const _0x53ec0d=new WebAssembly['Module'](Uint8Array['of'](0xb*-0xfd+-0x24b2+0x29*0x129,-0x35*-0x35+-0x2623+-0x1*-0x1b8b,-0x711+0x400+0x384,-0xc6*0xc+-0x224f+0x272*0x12,0x27+-0x25*0x103+0x2549,0x1392+-0x35*0xa3+0xe2d,-0x977+-0x2*0x742+0x17fb,-0x1bcf+-0xcec+-0x1*-0x28bb));if(_0x53ec0d instanceof WebAssembly['Module'])return new WebAssembly['Instance'](_0x53ec0d)instanceof WebAssembly['Instance'];}}catch{}return!(-0x1*0xec3+-0x119d+0x2061*0x1);},_0x10e18c=(_0x49f0c4,_0x4395db)=>{_0x33fd2d(null,{'workerUrl':URL['createObje'+'ctURL'](_0x2a409f(_0x49f0c4)),'module':_0x4395db,'rgbPriority':_0x183ec9['rgbPriorit'+'y'],'rgbaPriority':_0x183ec9['rgbaPriori'+'ty']});},_0x41d7d5={'cache':!(-0x1*-0x8aa+0x235f+-0x2c09),'responseType':'text','retry':_0x183ec9['maxRetries']>0xabe+-0xe23+-0x1*-0x365,'maxRetries':_0x183ec9['maxRetries']};if(_0x183ec9['glueUrl']&&_0x183ec9['wasmUrl']&&_0x32600b()){let _0x393a16=null,_0x2970e7=null;ot['get'](_0x183ec9['glueUrl'],_0x41d7d5,(_0x21a884,_0x1eab9d)=>{_0x21a884?_0x33fd2d(_0x21a884):_0x2970e7?_0x10e18c(_0x1eab9d,_0x2970e7):_0x393a16=_0x1eab9d;});const _0x5a2781=fetch(_0x183ec9['wasmUrl']),_0x5c6f21=()=>{_0x5a2781['then'](_0x41993c=>_0x41993c['arrayBuffe'+'r']())['then'](_0x506c09=>WebAssembly['compile'](_0x506c09))['then'](_0x46584d=>{_0x393a16?_0x10e18c(_0x393a16,_0x46584d):_0x2970e7=_0x46584d;})['catch'](_0x467920=>{_0x33fd2d(_0x467920,null);});};WebAssembly['compileStr'+'eaming']?WebAssembly['compileStr'+'eaming'](_0x5a2781)['then'](_0x2727e9=>{_0x393a16?_0x10e18c(_0x393a16,_0x2727e9):_0x2970e7=_0x2727e9;})['catch'](_0x2cce4d=>{w['warn']('compileStr'+'eaming()\x20f'+'ailed\x20for\x20'+_0x183ec9['wasmUrl']+'\x20('+_0x2cce4d+('),\x20falling'+'\x20back\x20to\x20a'+'rraybuffer'+'\x20download.')),_0x5c6f21();}):_0x5c6f21();}else ot['get'](_0x183ec9['fallbackUr'+'l'],_0x41d7d5,(_0x5f3142,_0xe9d32e)=>{_0x5f3142?_0x33fd2d(_0x5f3142,null):_0x10e18c(_0xe9d32e,null);});};class zk{constructor(){this['callbacks']={},this['queue']=[],this['clients']=[];}['enqueueJob'](_0x31d73c,_0x5c6bf6,_0x6468b8,_0x293f42){if(this['callbacks']['hasOwnProp'+'erty'](_0x31d73c))this['callbacks'][_0x31d73c]['push'](_0x6468b8);else{this['callbacks'][_0x31d73c]=[_0x6468b8];const _0x3baa19={'url':_0x31d73c,'data':_0x5c6bf6,'options':_0x293f42};this['clients']['length']>-0x2*0x10b+-0x1*-0x1d6d+-0x1b57?this['clients']['shift']()['run'](_0x3baa19):this['queue']['push'](_0x3baa19);}}['enqueueCli'+'ent'](_0x34e2c3){this['queue']['length']>0x2*-0x12d5+0xd*0x1b6+-0xc*-0x149?_0x34e2c3['run'](this['queue']['shift']()):this['clients']['push'](_0x34e2c3);}['handleResp'+'onse'](_0x293dcf,_0x14f43e,_0x274afb){const _0x3d857d=this['callbacks'][_0x293dcf];if(_0x14f43e){for(let _0x1a37ea=0xb*-0x59+-0x8e*0x13+0xe5d;_0x1a37ea<_0x3d857d['length'];++_0x1a37ea)_0x3d857d[_0x1a37ea](_0x14f43e);}else{_0x274afb['format']===Jh||_0x274afb['format']===ed?_0x274afb['levels']=_0x274afb['levels']['map'](_0x4c894e=>new Uint16Array(_0x4c894e)):_0x274afb['levels']=_0x274afb['levels']['map'](_0x99cf20=>new Uint8Array(_0x99cf20));for(let _0x2eb51b=-0xa44+-0x2133+-0x2b77*-0x1;_0x2eb51b<_0x3d857d['length'];++_0x2eb51b)_0x3d857d[_0x2eb51b](null,_0x274afb);}delete this['callbacks'][_0x293dcf];}}class Vk{constructor(_0x50138c,_0x199efa,_0x7054a){this['queue']=_0x50138c,this['worker']=new Worker(_0x199efa['workerUrl']),this['worker']['addEventLi'+'stener']('message',_0x24c964=>{const _0x3c5809=_0x24c964['data'];this['queue']['handleResp'+'onse'](_0x3c5809['url'],_0x3c5809['err'],_0x3c5809['data']),this['eager']||this['queue']['enqueueCli'+'ent'](this);}),this['worker']['postMessag'+'e']({'type':'init','config':_0x199efa}),this['eager']=_0x7054a;}['run'](_0x29f582){const _0x6496d9=[];_0x29f582['data']instanceof ArrayBuffer&&_0x6496d9['push'](_0x29f582['data']),this['worker']['postMessag'+'e']({'type':'transcode','url':_0x29f582['url'],'format':_0x29f582['format'],'data':_0x29f582['data'],'options':_0x29f582['options']},_0x6496d9),this['eager']&&this['queue']['enqueueCli'+'ent'](this);}}const Gk=0x1*-0x1fc9+-0x1617*0x1+0x35e1,Hk=['etc2','etc1','astc','dxt','pvr','atc'],Wk=['astc','dxt','etc2','pvr','atc'],$k=-0x22ad*0x1+0x17e1+0xad1,Xu=new zk();let xS=null,qu=!(-0x1095+-0x2448+0x34de);function Xk(_0x45fa73){if(!qu){if(!_0x45fa73)_0x45fa73=xS||{};else{if(_0x45fa73['lazyInit']){xS=_0x45fa73;return;}}if(!_0x45fa73['glueUrl']||!_0x45fa73['wasmUrl']||!_0x45fa73['fallbackUr'+'l']){const _0x5a973e=YS['getConfig']('BASIS');_0x5a973e&&(_0x45fa73={'glueUrl':_0x5a973e['glueUrl'],'wasmUrl':_0x5a973e['wasmUrl'],'fallbackUrl':_0x5a973e['fallbackUr'+'l'],'numWorkers':_0x5a973e['numWorkers']});}if(_0x45fa73['glueUrl']||_0x45fa73['wasmUrl']||_0x45fa73['fallbackUr'+'l']){qu=!(0x175c+-0x59b+-0x11c1);const _0x346637=Math['max'](0x1d3b+-0x9*0x349+0x57*0x1,Math['min'](-0x1fa3+0xce*-0x3+0x221d,_0x45fa73['numWorkers']||Gk)),_0xaea835=_0x45fa73['numWorkers']===0x117*-0x1a+0xcb*-0xe+-0x1b7*-0x17||(_0x45fa73['hasOwnProp'+'erty']('eagerWorke'+'rs')?_0x45fa73['eagerWorke'+'rs']:!(-0x1372+0x1c6a+0x47c*-0x2));_0x45fa73['rgbPriorit'+'y']=_0x45fa73['rgbPriorit'+'y']||Hk,_0x45fa73['rgbaPriori'+'ty']=_0x45fa73['rgbaPriori'+'ty']||Wk,_0x45fa73['maxRetries']=_0x45fa73['hasOwnProp'+'erty']('maxRetries')?_0x45fa73['maxRetries']:$k,Bk(_0x45fa73,(_0x578c3a,_0x3bcecf)=>{if(_0x578c3a)console['error']('failed\x20to\x20'+'initialize'+'\x20basis\x20wor'+'ker:\x20'+_0x578c3a);else{for(let _0x5d9a07=-0xc42+-0x13ab+0x1fed*0x1;_0x5d9a07<_0x346637;++_0x5d9a07)Xu['enqueueCli'+'ent'](new Vk(Xu,_0x3bcecf,_0xaea835));}});}}}let Df=null;function b0(_0x384d62,_0x57f9bf,_0x3c1ac5,_0x3e7251,_0x226423){return Xk(),Df||(Df={'formats':Uk(_0x384d62)}),Xu['enqueueJob'](_0x57f9bf,_0x3c1ac5,_0x3e7251,{'deviceDetails':Df,'isGGGR':!!(_0x226423!=null&&_0x226423['isGGGR']),'isKTX2':!!(_0x226423!=null&&_0x226423['isKTX2'])}),qu;}class eo{['load'](_0x17ce99,_0x3fc258,_0x44bebe){throw new Error('not\x20implem'+'ented');}['open'](_0x2c17d5,_0x365f51,_0x3e3379){throw new Error('not\x20implem'+'ented');}}class qk extends eo{constructor(_0x3abd94,_0x1467ad){super(),this['device']=_0x1467ad,this['maxRetries']=0x7ff+-0x24a0+0x1ca1;}['load'](_0x37e544,_0x324d4f,_0x34e728){const _0x935068=this['device'],_0x26d7d5=_0x39619b=>{var _0x523b6b,_0x20e1aa,_0x5c2322;b0(_0x935068,_0x37e544['load'],_0x39619b,_0x324d4f,{'isGGGR':(((_0x5c2322=(_0x20e1aa=(_0x523b6b=_0x34e728==null?void(0x2*-0x511+-0xf48+-0x2*-0xcb5):_0x34e728['file'])==null?void(-0x102a+-0x1*-0x1cc5+0x1cd*-0x7):_0x523b6b['variants'])==null?void(-0x105c+0x1469*0x1+0x1*-0x40d):_0x20e1aa['basis'])==null?void(0x857+-0x12*0x3d+-0x40d):_0x5c2322['opt'])&-0x2*0xe78+0x17ae+0x1*0x54a)!==-0xadb*0x1+0xad3+0x8})||_0x324d4f('Basis\x20modu'+'le\x20not\x20fou'+'nd.\x20Asset\x20'+'['+_0x34e728['name']+']('+_0x34e728['getFileUrl']()+(')\x20basis\x20te'+'xture\x20vari'+'ant\x20will\x20n'+'ot\x20be\x20load'+'ed.'));};pe['fetchArray'+'Buffer'](_0x37e544['load'],(_0x40128b,_0x178f71)=>{_0x40128b?_0x324d4f(_0x40128b):_0x26d7d5(_0x178f71);},_0x34e728,this['maxRetries']);}['open'](_0x405b89,_0x32a73e,_0x4890e7,_0x30262a={}){const _0x3c84ac=_0x30262a['srgb']?ld(_0x32a73e['format']):_0x32a73e['format'],_0x165e0d=new _e(_0x4890e7,{'name':_0x405b89,'profilerHint':Pr,'addressU':_0x32a73e['cubemap']?ue:yt,'addressV':_0x32a73e['cubemap']?ue:yt,'width':_0x32a73e['width'],'height':_0x32a73e['height'],'format':_0x3c84ac,'cubemap':_0x32a73e['cubemap'],'levels':_0x32a73e['levels'],..._0x30262a});return _0x165e0d['upload'](),_0x165e0d;}}const A0=new Uint8Array([0x1*-0xac4+0x1*-0x2573+-0x30*-0x104,-0x2fb+-0x5b5*0x6+0x2589,0x1fcf+0x1af8+-0x3a79,0x24be+0x2ed+-0x9d9*0x4,-0xf*-0x125+0x26b9*0x1+-0x37d7,0x4*-0x86d+-0xf2a+0x30e8,-0x105*0x1b+-0xfd0+0x2b71*0x1,0x26b+-0x664*0x4+0x5*0x4a3,-0x54b+-0x1ee7+-0x71*-0x52,-0x26ad*-0x1+0x7*0x18d+0x1*-0x3188,-0x1e92+0x1*0x1aad+0x3e5*0x1,0x8ec+0x11ae*-0x1+0x29*0x37,0x42*-0x21+0x199*-0xd+0x1d90,0xaed*-0x3+-0x1*0x16f0+0x1*0x37ff,-0x10cb+0x1a0a*-0x1+0x2b19,-0xac1*0x1+-0x2e*0x84+0x1*0x22cb,-0x8bc+-0x2463+0x2d1f,-0x177+0x2*0xc2e+-0x16e5,-0x3*0x661+-0x5f*0x2e+0x2435,0x1557+0x2*0x10cf+0x4*-0xdbd,-0x1*-0x65+-0xa9*0x2d+0x1d50,0x25e+-0x1be5+0x1987,0x24a6*-0x1+0x2b*-0x92+0xf4b*0x4,0x2aa*0xe+-0x39*-0xb+-0x27be,-0x10b+0x201+-0x2*0x77,0x15c5+0x7*0x485+-0x3562,-0x7*-0x45d+-0x1*-0x1e04+-0x1*0x3c8f,0xf*0x176+-0x93a+-0xcb0,-0x1e09+-0x1073*0x1+-0x1c*-0x1a9,-0x493+-0x237*0x3+-0xb57*-0x1,-0x1897*-0x1+-0xf1*-0x1d+-0x33cf,-0x1ece+0x1b9d+0x3f5*0x1,-0x545*-0x5+-0x7f0+-0x16*0xd0,-0x20c6+-0x270b+0x47d1,-0x1dec+-0x17b1+-0x1*-0x359d,-0x1*-0x2581+0x101b+-0x4*0xd67,-0x21d9+-0x1e5f+0x4045,0x1f*0x2+0x686*0x2+0x1*-0xd01,-0x170a+0x2*-0x5d4+-0x5*-0x6fe,-0xd68+-0x1*-0x643+-0x766*-0x1,0x2*-0xdcd+0x11*-0x122+0x2f30,0x1bc5*0x1+0x1978+-0x34c5,0xe01+-0x44c+0x8db*-0x1,0x7*0x151+0xa6+-0x97a,-0x5f1+-0xb2b+-0x118*-0x10,-0x23fa+-0x84b+0x2ca9,-0x17d3+0x12*0x125+0x39b,-0xaf6+-0x1696+0x36d*0xa,-0x1571+-0x104b+0x25c3,-0x2373+0x26ee+0x51*-0xb,-0x5*0x60b+0x12fd+0xb3a,0x1c24+-0x1605+0x2*-0x2e3,0x4*-0x385+0x23d*-0x6+0x1b82,0xf98*0x1+-0x1ca8*0x1+0xd57,-0xa5d*0x1+0x146e*0x1+-0x9ce,0xbf8+0x311*-0x4+0xd1,0x1e5d+0xf34+-0x2cfd,0x1759+-0x17b3+0x147,-0x31d+-0x238c+0x26a9,0x6af+0x111c+-0x1*0x17cb,-0x6*-0x1e6+0xbfe+-0x49*0x52,-0xb*0xdf+0x3*-0x728+0x1f0d,-0x7d4*-0x1+-0xfae+0x823,0x1fde+0xfc3+0xe*-0x362,0xe10+0xf4f*-0x1+0x18d*0x1,-0x6c5+0x78c+-0x83,-0x1*0x1b47+-0xc7*-0x9+0x14f6,-0x1067*-0x1+-0x632*-0x2+-0x1c89,0x9d*0x23+-0x1*0x427+-0x10f0,-0x3*0x243+-0x10ab*-0x1+-0x960]),C0=(_0x1953ec,_0x5aeb40)=>{const _0x2c5e0c=new _e(_0x1953ec,{'width':0x1,'height':0x1,'format':Ne,'mipmaps':!(0x2654+-0xad8*-0x3+-0x1*0x46db),'levels':[_0x5aeb40]}),_0x528d3d=new gt({'colorBuffer':_0x2c5e0c,'depth':!(0xc54+-0x1*0x5fd+0x1*-0x656)});_0x1953ec['setFramebu'+'ffer'](_0x528d3d['impl']['_glFrameBu'+'ffer']),_0x1953ec['initRender'+'Target'](_0x528d3d);const _0x280194=new Uint8ClampedArray(0x208f+0x4df+-0x256a);return _0x1953ec['gl']['readPixels'](-0xc*0x265+0x26a1+-0x9e5,-0x639*-0x3+-0x3a+-0x1271*0x1,0x4fc+-0x8d*0x15+-0x232*-0x3,0x10a9+0x2b1*-0x1+-0xdf7,_0x1953ec['gl']['RGBA'],_0x1953ec['gl']['UNSIGNED_B'+'YTE'],_0x280194),_0x528d3d['destroy'](),_0x2c5e0c['destroy'](),_0x280194[-0x20d2+-0x1a8a+-0x2*-0x1dae]===0xcda+0x39e*0x8+-0x233*0x13&&_0x280194[-0x1123+0x1c67+-0xb43]===0x3*-0x3c3+0x1fa5+-0x145a&&_0x280194[-0xe50+-0x2*0xd3f+0x28d0]===0x1*-0x2117+0x1594+0xb86&&_0x280194[0x23d*0xf+0x924+-0x2*0x155a]===0x2489+0x37*-0x2c+-0x1ad6;},jk=_0x3e83e6=>createImageBitmap(new Blob([A0],{'type':'image/png'}),{'premultiplyAlpha':'none','colorSpaceConversion':'none'})['then'](_0xfa6bb4=>C0(_0x3e83e6,_0xfa6bb4))['catch'](_0x4a4d16=>!(0x3df*-0xa+0x1082+-0x1635*-0x1)),Yk=_0x342eed=>new Promise((_0x300113,_0x238be0)=>{const _0x3de518=new Image();_0x3de518['src']=URL['createObje'+'ctURL'](new Blob([A0])),_0x3de518['onload']=()=>{_0x300113(C0(_0x342eed,_0x3de518));};});class Kk{static['run'](_0x14d880){jk(_0x14d880)['then'](_0x3e3065=>{console['log']('imageBitma'+'pIsCorrect'+'='+_0x3e3065);}),Yk(_0x14d880)['then'](_0x4ff38b=>{console['log']('imgElement'+'IsCorrect='+_0x4ff38b);});}}class Zk extends eo{constructor(_0x524407,_0x4688b9){super(),this['crossOrigi'+'n']=_0x524407['prefix']?'anonymous':null,this['maxRetries']=-0x1fc1+-0x1*0x1e88+0x3e49*0x1,this['device']=_0x4688b9,mi['get']('IMG_ALPHA_'+'TEST')&&Kk['run'](this['device']);}['load'](_0x333597,_0x139867,_0x3bc462){var _0x1a52a1;const _0x477dba=!!((_0x1a52a1=_0x3bc462==null?void(-0x26af+-0x101a+-0x3*-0x1243):_0x3bc462['file'])!=null&&_0x1a52a1['contents']);if(_0x477dba){if(this['device']['supportsIm'+'ageBitmap']){this['_loadImage'+'BitmapFrom'+'Blob'](new Blob([_0x3bc462['file']['contents']]),_0x139867);return;}_0x333597={'load':URL['createObje'+'ctURL'](new Blob([_0x3bc462['file']['contents']])),'original':_0x333597['original']};}const _0x35b01b=(_0x504ea8,_0x38cde7)=>{_0x477dba&&URL['revokeObje'+'ctURL'](_0x333597['load']),_0x139867(_0x504ea8,_0x38cde7);};let _0x5377ec;_0x3bc462&&_0x3bc462['options']&&_0x3bc462['options']['hasOwnProp'+'erty']('crossOrigi'+'n')?_0x5377ec=_0x3bc462['options']['crossOrigi'+'n']:jn['test'](_0x333597['load'])&&(_0x5377ec=this['crossOrigi'+'n']),this['device']['supportsIm'+'ageBitmap']?this['_loadImage'+'Bitmap'](_0x333597['load'],_0x333597['original'],_0x5377ec,_0x35b01b,_0x3bc462):this['_loadImage'](_0x333597['load'],_0x333597['original'],_0x5377ec,_0x35b01b);}['open'](_0x574b28,_0x58622f,_0x1f765b,_0xb7dc7c={}){const _0x2b2c36=new _e(_0x1f765b,{'name':_0x574b28,'profilerHint':Pr,'width':_0x58622f['width'],'height':_0x58622f['height'],'format':_0xb7dc7c['srgb']?_s:Ne,..._0xb7dc7c});return _0x2b2c36['setSource'](_0x58622f),_0x2b2c36;}['_loadImage'](_0x1fe93d,_0x418347,_0x570d76,_0x1fc2a6){const _0x3c8e5e=new Image();_0x570d76&&(_0x3c8e5e['crossOrigi'+'n']=_0x570d76);let _0x133910=-0x1ef0+0xc00+-0x25e*-0x8;const _0x3bfa2e=this['maxRetries'];let _0x2efe9e;_0x3c8e5e['onload']=function(){_0x1fc2a6(null,_0x3c8e5e);},_0x3c8e5e['onerror']=function(){if(!_0x2efe9e){if(_0x3bfa2e>-0x1a8d+-0x10bf+0x28c*0x11&&++_0x133910<=_0x3bfa2e){const _0x58502c=Math['pow'](0x11e2+0xae*0x14+-0x1f78,_0x133910)*(-0x25*0xb7+0x1*0x14c+0x198b);console['log']('Error\x20load'+'ing\x20Textur'+'e\x20from:\x20\x27'+_0x418347+('\x27\x20-\x20Retryi'+'ng\x20in\x20')+_0x58502c+'ms...');const _0x4e2b77=_0x1fe93d['indexOf']('?')>=-0xa*0x38d+0x864+0x1b1e?'&':'?';_0x2efe9e=setTimeout(()=>{_0x3c8e5e['src']=_0x1fe93d+_0x4e2b77+'retry='+Date['now'](),_0x2efe9e=null;},_0x58502c);}else _0x1fc2a6('Error\x20load'+'ing\x20Textur'+'e\x20from:\x20\x27'+_0x418347+'\x27');}},_0x3c8e5e['src']=_0x1fe93d;}['_loadImage'+'Bitmap'](_0x23e7b2,_0x1800e7,_0x24331f,_0x3468e9,_0x5b120f){const _0x205f37={'cache':!(-0xd*0x1f+-0x695+-0x3a*-0x24),'responseType':'blob','retry':this['maxRetries']>-0x2026+-0x4*0x1a5+0x2*0x135d,'maxRetries':this['maxRetries'],'progress':_0x5b120f};ot['get'](_0x23e7b2,_0x205f37,(_0x210301,_0x112577)=>{_0x210301?_0x3468e9(_0x210301):this['_loadImage'+'BitmapFrom'+'Blob'](_0x112577,_0x3468e9);});}['_loadImage'+'BitmapFrom'+'Blob'](_0x21af1a,_0x12e3fe){createImageBitmap(_0x21af1a,{'premultiplyAlpha':'none','colorSpaceConversion':'none'})['then'](_0x565466=>_0x12e3fe(null,_0x565466))['catch'](_0x11d657=>_0x12e3fe(_0x11d657));}}const If=[0x72c04867+0x6cde35b2+0x863db7*-0x102,-0x13d2fd2e4+-0xeb1e70d1+-0x2e37f74d5*-0x1,0xaee70dd+0xa799eb6+-0x156*0x87649],Qk={0x83f0:td,0x83f2:op,0x83f3:vl,0x8d64:id,0x9274:cp,0x9278:hp,0x8c00:rd,0x8c01:xl,0x8c02:ad,0x8c03:Tl,0x8051:Cr,0x8058:Ne,0x8c41:lp,0x8c43:_s,0x8c3a:In,0x881b:ui,0x881a:nt};function Jk(_0x5c1ab3,_0x224bd1,_0x2f8197,_0x24a486){return _0x5c1ab3===In?new Uint32Array(_0x224bd1,_0x2f8197,_0x24a486/(0xd4c+0x12d*0x4+-0x11fc*0x1)):new Uint8Array(_0x224bd1,_0x2f8197,_0x24a486);}class eU extends eo{constructor(_0x2d2565){super(),this['maxRetries']=-0x8c3*0x3+0x1*0x3e9+0x1*0x1660;}['load'](_0x48523b,_0x16f795,_0x2df235){pe['fetchArray'+'Buffer'](_0x48523b['load'],_0x16f795,_0x2df235,this['maxRetries']);}['open'](_0x191201,_0x228d6b,_0x22a794,_0x58e265={}){const _0x3bd132=this['parse'](_0x228d6b);if(!_0x3bd132)return null;const _0x58d369=_0x58e265['srgb']?ld(_0x3bd132['format']):_0x3bd132['format'],_0x3eb1a5=new _e(_0x22a794,{'name':_0x191201,'profilerHint':Pr,'addressU':_0x3bd132['cubemap']?ue:yt,'addressV':_0x3bd132['cubemap']?ue:yt,'width':_0x3bd132['width'],'height':_0x3bd132['height'],'format':_0x58d369,'cubemap':_0x3bd132['cubemap'],'levels':_0x3bd132['levels'],..._0x58e265});return _0x3eb1a5['upload'](),_0x3eb1a5;}['parse'](_0x5f617f){const _0x430d33=new Uint32Array(_0x5f617f);if(If[-0x5*-0x55+-0xfc3+0x13*0xbe]!==_0x430d33[0x2039+0x1*0x214f+0x748*-0x9]||If[-0x253c+0x41+0x24fc]!==_0x430d33[0x1255+0x6f7+-0xb9*0x23]||If[0x1e5b*-0x1+0x1*-0xf81+0x2dde]!==_0x430d33[0x6*0x1e1+-0x17*-0x1b1+-0x322b*0x1])return w['warn']('Invalid\x20de'+'finition\x20h'+'eader\x20foun'+'d\x20in\x20KTX\x20f'+'ile.\x20Expec'+'ted\x200xAB4B'+'5458,\x200x20'+'3131BB,\x200x'+'0D0A1A0A'),null;const _0xf64311={'endianness':_0x430d33[-0x16a2+0x440+0x1265],'glType':_0x430d33[0xc1*0x29+-0x236*-0x3+-0x2587],'glTypeSize':_0x430d33[-0x157f*0x1+0x13b+-0x1449*-0x1],'glFormat':_0x430d33[-0x1961*-0x1+0x203*0x2+-0x1d61],'glInternalFormat':_0x430d33[0x1f87+-0x12b1+-0xccf],'glBaseInternalFormat':_0x430d33[-0xb3*0x11+-0x1*0x2623+0x320e],'pixelWidth':_0x430d33[-0x7*0x293+0x1a25+-0x13*0x6d],'pixelHeight':_0x430d33[0x1595+-0xa54+-0xb37],'pixelDepth':_0x430d33[-0xb20+-0x17c9*-0x1+0x2*-0x64f],'numberOfArrayElements':_0x430d33[-0xc95+0x1595+-0x47a*0x2],'numberOfFaces':_0x430d33[-0xc77+0x1a91+-0x6d*0x21],'numberOfMipmapLevels':_0x430d33[-0x4a9+0x68e*-0x1+0xb45],'bytesOfKeyValueData':_0x430d33[0xeea+-0x32*-0x83+0x2871*-0x1]};if(_0xf64311['pixelDepth']>0x13b1+0x765*-0x1+-0x1*0xc4b)return w['warn']('More\x20than\x20'+'1\x20pixel\x20de'+'pth\x20not\x20su'+'pported!'),null;if(_0xf64311['numberOfAr'+'rayElement'+'s']!==-0x1c08+0x76a+0x149e)return w['warn']('Array\x20text'+'ure\x20not\x20su'+'pported!'),null;const _0x57b85a=Qk[_0xf64311['glInternal'+'Format']];if(_0x57b85a===void(0x67f*0x1+0x2cc*-0x1+0x1*-0x3b3))return w['warn']('Unknown\x20gl'+'InternalFo'+'rmat:\x20'+_0xf64311['glInternal'+'Format']),null;let _0x4a7a9a=0x1*0x1375+-0x1dd8+0xa73+_0xf64311['bytesOfKey'+'ValueData']/(-0x2*0xdee+0x1dbd+-0x1dd);const _0x8bbd54=_0xf64311['numberOfFa'+'ces']>-0x2*0x6cd+0xa*-0x22+0xeef,_0x1d23a1=[];for(let _0x598b39=0x1*0x2387+-0x1366+0x1*-0x1021;_0x598b39<(_0xf64311['numberOfMi'+'pmapLevels']||0x3fd*0x5+0x21c3+-0x35b3);_0x598b39++){const _0x5bba94=_0x430d33[_0x4a7a9a++];_0x8bbd54&&_0x1d23a1['push']([]);const _0x2d005b=_0x8bbd54?_0x1d23a1[_0x598b39]:_0x1d23a1;for(let _0x30f6e3=0x349*-0x5+0x12f4+-0x287;_0x30f6e3<(_0x8bbd54?0x20eb+-0xb71+-0x1574:-0x261a+0xcb+0x2550);++_0x30f6e3)_0x2d005b['push'](Jk(_0x57b85a,_0x5f617f,_0x4a7a9a*(0x2*0x1a3+0x494*0x3+-0x10fe),_0x5bba94)),_0x4a7a9a+=_0x5bba94+(0x1cab*0x1+0x30a*-0x6+0x17*-0x74)>>-0x13ae+0x3*-0x801+0x2bb3*0x1;}return{'format':_0x57b85a,'width':_0xf64311['pixelWidth'],'height':_0xf64311['pixelHeigh'+'t'],'levels':_0x1d23a1,'cubemap':_0x8bbd54};}}const tU={'KHR_DF_MODEL_UASTC':0xa6};class sU extends eo{constructor(_0x117ce5,_0xbb653a){super(),this['maxRetries']=0x15f7*0x1+-0x262f*0x1+0x568*0x3,this['device']=_0xbb653a;}['load'](_0x7055e,_0x318727,_0x1a8651){pe['fetchArray'+'Buffer'](_0x7055e['load'],(_0x1417a3,_0x4c7eae)=>{_0x1417a3?_0x318727(_0x1417a3,_0x4c7eae):this['parse'](_0x4c7eae,_0x7055e,_0x318727,_0x1a8651);},_0x1a8651,this['maxRetries']);}['open'](_0x1994d0,_0x1812ea,_0x1c4294,_0x4d71de={}){const _0x10223d=_0x4d71de['srgb']?ld(_0x1812ea['format']):_0x1812ea['format'],_0x453ff7=new _e(_0x1c4294,{'name':_0x1994d0,'profilerHint':Pr,'addressU':_0x1812ea['cubemap']?ue:yt,'addressV':_0x1812ea['cubemap']?ue:yt,'width':_0x1812ea['width'],'height':_0x1812ea['height'],'format':_0x10223d,'cubemap':_0x1812ea['cubemap'],'levels':_0x1812ea['levels'],..._0x4d71de});return _0x453ff7['upload'](),_0x453ff7;}['parse'](_0x168ee0,_0x959d62,_0x19cba0,_0x11830e){var _0x59e91f,_0xd78a52,_0x29bb7d;const _0xd934e1=new KS(_0x168ee0),_0x15e599=[_0xd934e1['readU32be'](),_0xd934e1['readU32be'](),_0xd934e1['readU32be']()];if(_0x15e599[0x1838+-0x81f+-0xd*0x13d]!==0x11677b0b0+0xff681700+0x8*-0x2d528e6b||_0x15e599[-0x1*-0x1a54+0x99+-0x1aec]!==0x1*0x1b295544+-0x39339277+-0x1*-0x3e3c6dee||_0x15e599[0xd2d+-0xbe0+0x14b*-0x1]!==0xf992f*-0x104+-0x18a7b36d+0x35896133*0x1)return w['warn']('Invalid\x20de'+'finition\x20h'+'eader\x20foun'+'d\x20in\x20KTX2\x20'+'file.\x20Expe'+'cted\x200xAB4'+'B5458,\x200x2'+'03131BB,\x200'+'x0D0A1A0A'),null;const _0x19e596={'vkFormat':_0xd934e1['readU32'](),'typeSize':_0xd934e1['readU32'](),'pixelWidth':_0xd934e1['readU32'](),'pixelHeight':_0xd934e1['readU32'](),'pixelDepth':_0xd934e1['readU32'](),'layerCount':_0xd934e1['readU32'](),'faceCount':_0xd934e1['readU32'](),'levelCount':_0xd934e1['readU32'](),'supercompressionScheme':_0xd934e1['readU32']()},_0x353dc1={'dfdByteOffset':_0xd934e1['readU32'](),'dfdByteLength':_0xd934e1['readU32'](),'kvdByteOffset':_0xd934e1['readU32'](),'kvdByteLength':_0xd934e1['readU32'](),'sgdByteOffset':_0xd934e1['readU64'](),'sgdByteLength':_0xd934e1['readU64']()},_0x4ba9c4=[];for(let _0x553a1c=-0x12cc+0xd55*-0x1+0x2021;_0x553a1c<Math['max'](0x2115+0x1032*0x1+-0x3146,_0x19e596['levelCount']);++_0x553a1c)_0x4ba9c4['push']({'byteOffset':_0xd934e1['readU64'](),'byteLength':_0xd934e1['readU64'](),'uncompressedByteLength':_0xd934e1['readU64']()});if(_0xd934e1['readU32']()!==_0x353dc1['kvdByteOff'+'set']-_0x353dc1['dfdByteOff'+'set'])return w['warn']('Invalid\x20fi'+'le\x20data\x20en'+'countered.'),null;_0xd934e1['skip'](-0x5*0x4f+0xab3+-0x920);const _0xb5fb2f=_0xd934e1['readU8']();_0xd934e1['skip'](_0x353dc1['dfdByteLen'+'gth']-(0x2006+0x21e*-0x4+-0x1785)),_0xd934e1['skip'](_0x353dc1['kvdByteLen'+'gth']),_0x19e596['supercompr'+'essionSche'+'me']===0x2636+0x311*0x6+-0x389b*0x1||_0xb5fb2f===tU['KHR_DF_MOD'+'EL_UASTC']?b0(this['device'],_0x959d62['load'],_0x168ee0,_0x19cba0,{'isGGGR':(((_0x29bb7d=(_0xd78a52=(_0x59e91f=_0x11830e==null?void(-0x327*0x8+0xc12*0x1+0xd26):_0x11830e['file'])==null?void(-0x1*0x120e+-0xb33+-0x1*-0x1d41):_0x59e91f['variants'])==null?void(-0x76f*0x2+0x1*0x1d5b+-0xe7d*0x1):_0xd78a52['basis'])==null?void(0x1*-0xfd1+0x22cd+-0x97e*0x2):_0x29bb7d['opt'])&0x1*-0x1687+-0x816+0x1ea5)!==-0x15a3*-0x1+0x11f+-0x1*0x16c2,'isKTX2':!(0x128*0x7+-0xba1*0x2+0xf2a)})||_0x19cba0('Basis\x20modu'+'le\x20not\x20fou'+'nd.\x20Asset\x20'+'['+_0x11830e['name']+']('+_0x11830e['getFileUrl']()+(')\x20basis\x20te'+'xture\x20vari'+'ant\x20will\x20n'+'ot\x20be\x20load'+'ed.')):_0x19cba0('unsupporte'+'d\x20KTX2\x20pix'+'el\x20format');}}class iU extends eo{constructor(_0x22d4ca){super(),this['maxRetries']=0x2*0x239+0xb47*-0x1+0xb*0x9f;}['load'](_0x6401d2,_0x2fc90c,_0xdd186e){pe['fetchArray'+'Buffer'](_0x6401d2['load'],_0x2fc90c,_0xdd186e,this['maxRetries']);}['open'](_0xac68c7,_0x562594,_0x3c2289,_0x5ca73c={}){const _0x51c526=new Uint32Array(_0x562594,-0x1292+0x20aa+-0x4*0x386,0x3*0x52e+-0x1385+0x41b),_0x403673=_0x51c526[-0x26dd+-0x2240+0x4921*0x1],_0x192f2e=_0x51c526[-0x234+0xc4b+-0xa14],_0x22a37b=Math['max'](_0x51c526[0x1*0x1939+-0xc56+-0xcdc],-0xf26+-0x231d*0x1+0x3244),_0x2ac89b=_0x51c526[0x17f3+0x1593+0x33f*-0xe]===0x569+-0x2c8*0x2+0x2b,_0x5f041b=_0x51c526[0xa7d+-0x29*0xb9+0x1339],_0x5f5b27=_0x51c526[-0x65*-0x14+0x515+-0x1*0xce3],_0x2eaf99=_0x51c526[0x5df+-0x1*-0x123a+-0x17fd]===0x16e78+-0xc727+-0x6ab*-0xd,_0x5a808e=0x4*-0x95307cb+-0xb339376*0x4+0x836ec548,_0x844852=-0x1*-0xe28c95a+-0x312478f7+-0x5*-0x11a99b2d,_0x3b50e1=-0x2cd*-0xd+0x17b3*0x1+-0x3bab,_0x55954a=0x2137+-0x21f7+0x134,_0x4ba2d0=0x5e0f1b4e+0x21186a35+-0x2*0x26f2189f,_0x2e50e4=0x5c3479d5*-0x1+-0x1f6b32bb+0xacd2dee0,_0x57efce=0x34b31ddd+-0x60824a12+0x5d035e85,_0x3afd94=0x27bfde67*0x1+-0xa70*0x7269b+0x541647b9,_0x23ef98=-0x1ac05bc3+-0x292ffc3*-0xb+0x2fa392b2;let _0x2cff70=!(0x7*-0x1d3+-0x5a7*-0x1+-0x1*-0x71f),_0xfd1090=!(0xb3*0x29+-0x1792+-0x518),_0x334908=!(-0x9d*0x3c+0xf1b*-0x2+0x4303),_0x3794fe=!(-0x8*-0x75+-0x1*-0x4c1+-0x868),_0x1edffd=null,_0x437ef2=-0x15ce+-0x994*-0x2+-0x61*-0x7,_0x56ba35;if(_0x2ac89b?_0x5f041b===_0x5a808e?(_0x1edffd=td,_0x2cff70=!(-0xe0e+-0x95*-0xc+0x712)):_0x5f041b===_0x844852?(_0x1edffd=vl,_0x2cff70=!(0x101*0x9+0x255b+-0x2e64*0x1)):_0x5f041b===_0x3b50e1?(_0x1edffd=nt,_0x437ef2=-0x2153+0x188e+0x8c7):_0x5f041b===_0x55954a?(_0x1edffd=Xt,_0x437ef2=-0x2291*0x1+0x89c+0x19f9):_0x5f041b===_0x4ba2d0?(_0x1edffd=id,_0x2cff70=!(-0x6*0x3ad+-0xe85+-0xc31*-0x3),_0xfd1090=!(-0xd8f*-0x1+-0x1bed+-0x265*-0x6)):_0x5f041b===_0x2e50e4||_0x5f041b===_0x57efce?(_0x1edffd=_0x5f041b===_0x2e50e4?xl:Tl,_0x2cff70=!(-0xde9+-0x51f+0x1308),_0x334908=!(0x2164+0x22d1+0x1*-0x4435)):(_0x5f041b===_0x3afd94||_0x5f041b===_0x23ef98)&&(_0x1edffd=_0x5f041b===_0x3afd94?rd:ad,_0x2cff70=!(0xbea*0x1+0x607*0x1+-0x11f1),_0x3794fe=!(0x18a*-0x18+0x1d*0x110+0x620)):_0x5f5b27===0x555+-0x1361+0xe2c*0x1&&(_0x1edffd=Ne),!_0x1edffd)return w['error']('This\x20DDS\x20p'+'ixel\x20forma'+'t\x20is\x20curre'+'ntly\x20unsup'+'ported.\x20Em'+'pty\x20textur'+'e\x20will\x20be\x20'+'created\x20in'+'stead\x20of\x20'+_0xac68c7+'.'),_0x56ba35=new _e(_0x3c2289,{'width':0x4,'height':0x4,'format':Cr,'name':'dds-legacy'+'-empty'}),_0x56ba35;_0x56ba35=new _e(_0x3c2289,{'name':_0xac68c7,'profilerHint':Pr,'addressU':_0x2eaf99?ue:yt,'addressV':_0x2eaf99?ue:yt,'width':_0x403673,'height':_0x192f2e,'format':_0x1edffd,'cubemap':_0x2eaf99,'mipmaps':_0x22a37b>0x2*-0x109f+-0x118b+0x32ca,..._0x5ca73c});let _0x42f2fd=0x20f6+-0xacf*0x1+0x15a7*-0x1;const _0x5b6399=_0x2eaf99?-0xc7b+-0x1e*-0x102+0x1*-0x11bb:-0x9b4*0x1+0x195+0x820;let _0x415541;const _0x575a8e=0x14a7+0x1cce+0x3171*-0x1,_0x493343=-0x3e*0x3f+0x2560+-0x161a,_0xa04cd3=_0x5f041b===_0x5a808e?0x4a*-0x4f+-0x1*-0x1a3d+-0x35f*0x1:-0x1693+-0x1275+0x148c*0x2;let _0xc8b15e,_0x46c917,_0x42a401;for(let _0xc3a7b8=0x1d91+-0x1*-0x701+-0x12e*0x1f;_0xc3a7b8<_0x5b6399;_0xc3a7b8++){let _0xd60946=_0x403673,_0x2a90b6=_0x192f2e;for(let _0x20b20e=0x92e+-0x1b66+-0x16*-0xd4;_0x20b20e<_0x22a37b;_0x20b20e++){_0x2cff70?_0xfd1090?_0x415541=Math['floor']((_0xd60946+(-0x263e+0xb5b+0x1ae6))/(-0x175*0x4+0xc*0x78+0x38))*Math['floor']((_0x2a90b6+(0x109e+-0x2b+0x10*-0x107))/(-0x1cfb+-0x1f7b+0x3c7a))*(0x1*0x86e+-0x11*-0x11e+0x1b64*-0x1):_0x334908?_0x415541=Math['max'](_0xd60946,-0x1*-0x253d+0x2*-0xec1+-0x97*0xd)*Math['max'](_0x2a90b6,-0x2678+-0xd*-0x24d+0x897)/(-0x238b+0x468+-0x113*-0x1d):_0x3794fe?_0x415541=Math['max'](_0xd60946,0x15fb*0x1+0x156e*0x1+0x1*-0x2b61)*Math['max'](_0x2a90b6,0xb76+-0x16ae*-0x1+-0x221c)/(-0x6b3+-0x8c6+0xf7b):(_0xc8b15e=Math['floor']((_0xd60946+_0x575a8e-(0x422+0x2*0x71b+-0xf*0x139))/_0x575a8e),_0x46c917=Math['floor']((_0x2a90b6+_0x493343-(-0x21b3+0x1aad+0x707))/_0x493343),_0x42a401=_0xc8b15e*_0x46c917,_0x415541=_0x42a401*_0xa04cd3):_0x415541=_0xd60946*_0x2a90b6*(0x2172+0x119a+-0x11c*0x2e);const _0x43eb6a=_0x1edffd===Xt?new Float32Array(_0x562594,_0x42f2fd,_0x415541):_0x1edffd===nt?new Uint16Array(_0x562594,_0x42f2fd,_0x415541):new Uint8Array(_0x562594,_0x42f2fd,_0x415541);_0x2eaf99?(_0x56ba35['_levels'][_0x20b20e]||(_0x56ba35['_levels'][_0x20b20e]=[]),_0x56ba35['_levels'][_0x20b20e][_0xc3a7b8]=_0x43eb6a):_0x56ba35['_levels'][_0x20b20e]=_0x43eb6a,_0x42f2fd+=_0x415541*_0x437ef2,_0xd60946=Math['max'](_0xd60946*(0x26f*-0x7+-0x15b3+0x26bc+0.5),0xcc9+-0x1cc0+0x3fe*0x4),_0x2a90b6=Math['max'](_0x2a90b6*(-0xc5*-0xc+0x6*0x4b7+-0x1*0x2586+0.5),-0x2463+-0xe97+0x32fb);}}return _0x56ba35['upload'](),_0x56ba35;}}class rU extends eo{constructor(_0xd0c32b){super(),this['maxRetries']=-0x29*-0xba+-0xf6a+0x73*-0x20;}['load'](_0x1006fb,_0x1da788,_0xe4b197){pe['fetchArray'+'Buffer'](_0x1006fb['load'],_0x1da788,_0xe4b197,this['maxRetries']),_0xe4b197['data']&&!_0xe4b197['data']['type']&&(_0xe4b197['data']['type']=mh);}['open'](_0xad19a,_0x515f03,_0x5073c7,_0x629164={}){const _0x409f2f=this['parse'](_0x515f03);if(!_0x409f2f)return null;const _0x3216fd=new _e(_0x5073c7,{'name':_0xad19a,'profilerHint':Pr,'addressU':yt,'addressV':ue,'minFilter':Te,'magFilter':Te,'width':_0x409f2f['width'],'height':_0x409f2f['height'],'levels':_0x409f2f['levels'],'format':Ne,'type':mh,'mipmaps':!(0x95*-0x21+0x93*0x41+-0x121d),..._0x629164});return _0x3216fd['upload'](),_0x3216fd;}['parse'](_0x8e61e1){const _0x4117d8=new KS(_0x8e61e1);if(!_0x4117d8['readLine']()['startsWith']('#?RADIANCE'))return w['error']('radiance\x20h'+'eader\x20has\x20'+'invalid\x20ma'+'gic'),null;const _0x47f2f9={};for(;;){const _0x35af2a=_0x4117d8['readLine']();if(_0x35af2a['length']===-0x13*-0x1f1+-0x1*0x995+0xe9*-0x1e)break;{const _0x2a4326=_0x35af2a['split']('=');_0x2a4326['length']===0x6c+-0x659+0x31*0x1f&&(_0x47f2f9[_0x2a4326[-0x1374+-0x1241*-0x1+0x133]]=_0x2a4326[0x791*-0x2+-0x203*-0x2+0xb1d*0x1]);}}if(!_0x47f2f9['hasOwnProp'+'erty']('FORMAT'))return w['error']('radiance\x20h'+'eader\x20miss'+'ing\x20FORMAT'+'\x20variable'),null;const _0x1ec662=_0x4117d8['readLine']()['split']('\x20');if(_0x1ec662['length']!==0x83*-0xb+-0x3d4+0x979*0x1)return w['error']('radiance\x20h'+'eader\x20has\x20'+'invalid\x20re'+'solution'),null;const _0x36fa31=parseInt(_0x1ec662[0x105+0x1*0x1949+0x1*-0x1a4d],0x692+-0x1d0d+0x1685),_0x40d798=parseInt(_0x1ec662[-0x446*0x6+-0x1*0xb75+-0x128e*-0x2],0x25d4+-0x1d*-0x10+-0x279a*0x1),_0x16bafa=this['_readPixel'+'s'](_0x4117d8,_0x40d798,_0x36fa31,_0x1ec662[-0x2440+0x1*-0x113+0x2553]==='-Y');return _0x16bafa?{'width':_0x40d798,'height':_0x36fa31,'levels':[_0x16bafa]}:null;}['_readPixel'+'s'](_0x3376b3,_0x2889ad,_0x330296,_0x3216f6){if(_0x2889ad<-0x2248*-0x1+0x1*-0xaab+-0x1795||_0x2889ad>-0x1*0x9e7e+0x58b0+-0x1*-0xc5cd)return this['_readPixel'+'sFlat'](_0x3376b3,_0x2889ad,_0x330296);const _0x1378cf=[-0xa80+0x4*-0x29c+0x14f0,0x1ee2*-0x1+-0x1*-0x1449+0x1*0xa99,0x24a0+0x1*0x61f+-0x2abf,0x9*-0x17b+0xf15+-0x1c2];if(_0x3376b3['readArray'](_0x1378cf),_0x1378cf[0x2476+-0x130e+-0x1168]!==0x5*-0x737+0x24*-0x53+-0x4b*-0xa3||_0x1378cf[0x11*0x44+-0x11*0xdf+0xa4c]!==0x6a3*-0x3+0x21f6+-0xe0b||(_0x1378cf[0x2*-0x9ef+-0x1b5e+0x2f3e]&0x3*0x468+0x1cbe+-0x2976)!==0x1*-0x1c7f+-0x1*-0x7e2+0x149d)return _0x3376b3['skip'](-(-0x24a6+-0x1*0x1baf+0x4059)),this['_readPixel'+'sFlat'](_0x3376b3,_0x2889ad,_0x330296);const _0x1ee996=new ArrayBuffer(_0x2889ad*_0x330296*(0x5*0x63d+-0x1933+0x33*-0x1e)),_0x54f68c=new Uint8Array(_0x1ee996);let _0x3cf9a9=_0x3216f6?-0x321*-0x1+0x1641+0x12*-0x169:_0x2889ad*(-0x2132+-0x208f+0x41c5)*(_0x330296-(-0x2416+-0x2*-0x41f+-0x1bd9*-0x1)),_0x1722dd,_0x78c33c,_0x19a050,_0x1a114a,_0x45cee6,_0x334325;for(_0x78c33c=-0x1*-0x803+0x11d*0x9+0x2*-0x904;_0x78c33c<_0x330296;++_0x78c33c){if(_0x78c33c&&_0x3376b3['readArray'](_0x1378cf),(_0x1378cf[0x1420+-0xa23+0x23*-0x49]<<-0x13d7*-0x1+-0x1*0x13d9+-0xa*-0x1)+_0x1378cf[0xa*-0x362+0x1*0x296+0x1f41]!==_0x2889ad)return w['error']('radiance\x20h'+'as\x20invalid'+'\x20scanline\x20'+'width'),null;for(_0x1a114a=-0x2e*0xa3+0x1328+-0x2*-0x511;_0x1a114a<-0x191f+-0x6ff+0xab6*0x3;++_0x1a114a)for(_0x1722dd=-0x20f4+0x1*0x1b45+0x5af;_0x1722dd<_0x2889ad;)if(_0x45cee6=_0x3376b3['readU8'](),_0x45cee6>0x24b7+-0x1*-0x1bd9+0x190*-0x29){if(_0x45cee6-=-0x35*-0xa4+0x1955+-0x3ac9,_0x1722dd+_0x45cee6>_0x2889ad)return w['error']('radiance\x20h'+'as\x20invalid'+'\x20scanline\x20'+'data'),null;for(_0x334325=_0x3376b3['readU8'](),_0x19a050=-0x1*0x146b+-0x1*-0x2324+-0xeb9;_0x19a050<_0x45cee6;++_0x19a050)_0x54f68c[_0x3cf9a9+_0x1a114a+(-0x1be6+-0x7ba+0x23a4)*_0x1722dd++]=_0x334325;}else{if(_0x45cee6===-0x26fb+0x88f+0x1e6c||_0x1722dd+_0x45cee6>_0x2889ad)return w['error']('radiance\x20h'+'as\x20invalid'+'\x20scanline\x20'+'data'),null;for(_0x19a050=0x19*0x14b+0x156b+-0x35be;_0x19a050<_0x45cee6;++_0x19a050)_0x54f68c[_0x3cf9a9+_0x1a114a+(-0x255f+0x21aa+0x3b9*0x1)*_0x1722dd++]=_0x3376b3['readU8']();}_0x3cf9a9+=_0x2889ad*(-0x19af+0xae2+0xed1)*(_0x3216f6?-0x1a1b+0x818+0x4*0x481:-(-0x1d9*0x4+-0x3*0x841+0x2028));}return _0x54f68c;}['_readPixel'+'sFlat'](_0x4c70bc,_0x156e94,_0x142e7d){return _0x4c70bc['remainingB'+'ytes']===_0x156e94*_0x142e7d*(0x1*-0x10b2+0x1*0x1225+-0x16f)?new Uint8Array(_0x4c70bc['arraybuffe'+'r'],_0x4c70bc['offset']):null;}}const TS={'repeat':yt,'clamp':ue,'mirror':ip},wS={'nearest':Te,'linear':vt,'nearest_mip_nearest':Kh,'linear_mip_nearest':Qh,'nearest_mip_linear':Zh,'linear_mip_linear':ma},aU={'default':Ds,'rgbm':Zi,'rgbe':mh,'rgbp':Qo,'swizzleGGGR':Jo},nU=function(_0x252a8c){const _0x30f019=Xi['calcMipLev'+'elsCount'](_0x252a8c['_width'],_0x252a8c['_height']),_0x5bcd2c=function(_0x3ddb77){return _0x3ddb77 instanceof HTMLCanvasElement||_0x3ddb77 instanceof HTMLImageElement||_0x3ddb77 instanceof HTMLVideoElement;};if(!(_0x252a8c['_format']===Ne||_0x252a8c['_format']===Xt)||_0x252a8c['_volume']||_0x252a8c['_compresse'+'d']||_0x252a8c['_levels']['length']===-0x379*-0xa+-0x75*-0x53+-0x48a8||_0x252a8c['_levels']['length']===_0x30f019||_0x5bcd2c(_0x252a8c['_cubemap']?_0x252a8c['_levels'][-0x5*-0x377+0x18af+-0x2a02][-0x2388+-0x11d7*-0x2+-0x26]:_0x252a8c['_levels'][-0x24c2+0x1e4b+0x677]))return;const _0x23c2ac=function(_0x30dfbe,_0x3103bc,_0x56be0d){const _0x50caf4=Math['max'](-0x1a5f*-0x1+-0x1023+-0xa3b,_0x30dfbe>>0x10c9+0xbc*-0x8+-0xae8),_0x4aa476=Math['max'](-0x4*-0xe2+0x80+-0x407,_0x3103bc>>-0x2*-0x88b+0x5*-0x7b1+0x1560),_0x5d9c36=new _0x56be0d['constructo'+'r'](_0x50caf4*_0x4aa476*(0x25ee+-0x1*0x98f+-0x1c5b)),_0x24111d=Math['floor'](_0x30dfbe/_0x50caf4),_0x22cefd=Math['floor'](_0x3103bc/_0x4aa476),_0x3afcdb=_0x24111d*_0x22cefd;for(let _0x2e7bdb=0xb5*0x31+-0x1fd9+-0x2cc;_0x2e7bdb<_0x4aa476;++_0x2e7bdb)for(let _0x558b0c=-0x14a1*-0x1+-0x1956+0xf1*0x5;_0x558b0c<_0x50caf4;++_0x558b0c)for(let _0x50a672=0x24*0x106+-0x1bf0+0x3*-0x2f8;_0x50a672<0xf1*0xf+-0x7dd+0x63e*-0x1;++_0x50a672){let _0x326ea0=0x608+0x18c5+-0x1ecd;for(let _0x3cfc40=0x1173+0x1a8c+0x7*-0x649;_0x3cfc40<_0x22cefd;++_0x3cfc40)for(let _0x2f02e7=0x1b92+0x823+-0x23b5*0x1;_0x2f02e7<_0x24111d;++_0x2f02e7)_0x326ea0+=_0x56be0d[(_0x558b0c*_0x24111d+_0x2f02e7+(_0x2e7bdb*_0x22cefd+_0x3cfc40)*_0x30dfbe)*(-0x231b+-0x11aa+-0x34c9*-0x1)+_0x50a672];_0x5d9c36[(_0x558b0c+_0x2e7bdb*_0x50caf4)*(-0x1*-0x1073+-0x25d5+0x1566)+_0x50a672]=_0x326ea0/_0x3afcdb;}return _0x5d9c36;};for(let _0xd3a7fa=_0x252a8c['_levels']['length'];_0xd3a7fa<_0x30f019;++_0xd3a7fa){const _0x2ff0e0=Math['max'](-0x43+-0x7d0+0x814,_0x252a8c['_width']>>_0xd3a7fa-(-0xe54+0x2*0xdfb+-0xda1)),_0x4d262e=Math['max'](-0x2d1+-0x468+0x73a,_0x252a8c['_height']>>_0xd3a7fa-(-0x10d*0xb+0x25da+0x542*-0x5));if(_0x252a8c['_cubemap']){const _0x23ab74=[];for(let _0x4a87bd=-0xffe+0x9e5+0x619;_0x4a87bd<-0x25*-0x9e+-0x2c*0x16+-0x1308;++_0x4a87bd)_0x23ab74['push'](_0x23c2ac(_0x2ff0e0,_0x4d262e,_0x252a8c['_levels'][_0xd3a7fa-(0x19cf*0x1+0x259b*-0x1+0x13*0x9f)][_0x4a87bd]));_0x252a8c['_levels']['push'](_0x23ab74);}else _0x252a8c['_levels']['push'](_0x23c2ac(_0x2ff0e0,_0x4d262e,_0x252a8c['_levels'][_0xd3a7fa-(0xc1*-0x2b+0x1846+0x1*0x826)]));}_0x252a8c['_levelsUpd'+'ated']=_0x252a8c['_cubemap']?[[!(-0x533*0x7+-0xb6c+0x2fd1*0x1),!(0x2*-0xf2d+0x1*-0x257e+0x43d8),!(0x37c+0x7f7*-0x3+0x1469),!(-0xa06+-0x1*-0xa93+-0x2f*0x3),!(0x2658+-0x265+0x1*-0x23f3),!(-0x1e28+-0x2*0xb2d+0x1a41*0x2)]]:[!(0x50*-0x5c+0x1*-0x2f9+0x1fb9)];};class oU extends Qe{constructor(_0x1ee0b4){super(_0x1ee0b4,'texture');const _0x579a7d=_0x1ee0b4['assets'],_0x5b8b13=_0x1ee0b4['graphicsDe'+'vice'];this['_device']=_0x5b8b13,this['_assets']=_0x579a7d,this['imgParser']=new Zk(_0x579a7d,_0x5b8b13),this['parsers']={'dds':new iU(_0x579a7d),'ktx':new eU(_0x579a7d),'ktx2':new sU(_0x579a7d,_0x5b8b13),'basis':new qk(_0x579a7d,_0x5b8b13),'hdr':new rU(_0x579a7d)};}set['crossOrigi'+'n'](_0x4adbab){this['imgParser']['crossOrigi'+'n']=_0x4adbab;}get['crossOrigi'+'n'](){return this['imgParser']['crossOrigi'+'n'];}set['maxRetries'](_0x36ae53){this['imgParser']['maxRetries']=_0x36ae53;for(const _0x3f3d8f in this['parsers'])this['parsers']['hasOwnProp'+'erty'](_0x3f3d8f)&&(this['parsers'][_0x3f3d8f]['maxRetries']=_0x36ae53);}get['maxRetries'](){return this['imgParser']['maxRetries'];}['_getUrlWit'+'houtParams'](_0x416771){return _0x416771['indexOf']('?')>=-0x7e2*-0x2+0x38*0x71+-0x287c?_0x416771['split']('?')[-0x2*-0x5db+-0x1784+0xbce]:_0x416771;}['_getParser'](_0x467363){const _0x2e4782=xe['getExtensi'+'on'](this['_getUrlWit'+'houtParams'](_0x467363))['toLowerCas'+'e']()['replace']('.','');return this['parsers'][_0x2e4782]||this['imgParser'];}['_getTextur'+'eOptions'](_0x364560){var _0x1e7967;const _0x4679a1={'profilerHint':Pr};if(_0x364560){((_0x1e7967=_0x364560['name'])==null?void(-0xa7f*-0x1+-0x2627+0x1ba8):_0x1e7967['length'])>0x1*-0x108f+0x2291+0x901*-0x2&&(_0x4679a1['name']=_0x364560['name']);const _0x51692a=_0x364560['data'];_0x51692a['hasOwnProp'+'erty']('minfilter')&&(_0x4679a1['minFilter']=wS[_0x51692a['minfilter']]),_0x51692a['hasOwnProp'+'erty']('magfilter')&&(_0x4679a1['magFilter']=wS[_0x51692a['magfilter']]),_0x51692a['hasOwnProp'+'erty']('addressu')&&(_0x4679a1['addressU']=TS[_0x51692a['addressu']]),_0x51692a['hasOwnProp'+'erty']('addressv')&&(_0x4679a1['addressV']=TS[_0x51692a['addressv']]),_0x51692a['hasOwnProp'+'erty']('mipmaps')&&(_0x4679a1['mipmaps']=_0x51692a['mipmaps']),_0x51692a['hasOwnProp'+'erty']('anisotropy')&&(_0x4679a1['anisotropy']=_0x51692a['anisotropy']),_0x51692a['hasOwnProp'+'erty']('flipY')&&(_0x4679a1['flipY']=!!_0x51692a['flipY']),_0x51692a['hasOwnProp'+'erty']('srgb')&&(_0x4679a1['srgb']=!!_0x51692a['srgb']),_0x4679a1['type']=Ds,_0x51692a['hasOwnProp'+'erty']('type')?_0x4679a1['type']=aU[_0x51692a['type']]:_0x51692a['hasOwnProp'+'erty']('rgbm')&&_0x51692a['rgbm']?_0x4679a1['type']=Zi:_0x364560['file']&&(_0x364560['file']['opt']&-0x1*-0x14e+-0x1*0xdca+0xc84)!==-0x1a84+-0x2075+0x3af9*0x1&&(_0x4679a1['type']=Jo);}return _0x4679a1;}['load'](_0x860d35,_0x57db6d,_0x5b2b15){typeof _0x860d35=='string'&&(_0x860d35={'load':_0x860d35,'original':_0x860d35}),this['_getParser'](_0x860d35['original'])['load'](_0x860d35,_0x57db6d,_0x5b2b15);}['open'](_0x479d71,_0x5cd149,_0x143d83){if(!_0x479d71)return;const _0x34676d=this['_getTextur'+'eOptions'](_0x143d83);let _0x123e5b=this['_getParser'](_0x479d71)['open'](_0x479d71,_0x5cd149,this['_device'],_0x34676d);return _0x123e5b===null?_0x123e5b=new _e(this['_device'],{'width':0x4,'height':0x4,'format':Cr}):(nU(_0x123e5b),_0x5cd149['unswizzled'+'GGGR']&&(_0x143d83['file']['variants']['basis']['opt']&=-(0x15ad*-0x1+0x1*-0x1d83+-0x3*-0x1113))),_0x123e5b;}['patch'](_0x59a359,_0x102772){const _0x5aed99=_0x59a359['resource'];if(!_0x5aed99)return;const _0x219b0b=this['_getTextur'+'eOptions'](_0x59a359);for(const _0x20d485 of Object['keys'](_0x219b0b))_0x5aed99[_0x20d485]=_0x219b0b[_0x20d485];}}const lU='inline',cU='immersive-'+'vr',$o='immersive-'+'ar',ES='viewer',hU='left',dU='cpu-optimi'+'zed',P0='gpu-optimi'+'zed',M0='luminance-'+'alpha',D0='unsigned-s'+'hort',I0='float32';class fU{constructor(_0xa3f52f){h(this,'_manager'),h(this,'_supported',Ae['browser']&&!!window['XRDOMOverl'+'ayState']),h(this,'_root',null),this['_manager']=_0xa3f52f;}get['supported'](){return this['_supported'];}get['available'](){return this['_supported']&&this['_manager']['active']&&this['_manager']['_session']['domOverlay'+'State']!==null;}get['state'](){return!this['_supported']||!this['_manager']['active']||!this['_manager']['_session']['domOverlay'+'State']?null:this['_manager']['_session']['domOverlay'+'State']['type'];}set['root'](_0x23e3c3){!this['_supported']||this['_manager']['active']||(this['_root']=_0x23e3c3);}get['root'](){return this['_root'];}}const Rc=[],bS=[];class ju extends me{constructor(_0x3efe05,_0x31ff1e,_0x39c671,_0x555fac=null){super(),h(this,'manager'),h(this,'_xrHitTest'+'Source'),h(this,'_transient'),h(this,'_inputSour'+'ce'),(this['manager']=_0x3efe05,this['_xrHitTest'+'Source']=_0x31ff1e,this['_transient']=_0x39c671,this['_inputSour'+'ce']=_0x555fac);}['remove'](){if(!this['_xrHitTest'+'Source'])return;const _0x242495=this['manager']['hitTest']['sources'],_0xa1cf28=_0x242495['indexOf'](this);_0xa1cf28!==-(0xcc+-0x1853+0x1788)&&_0x242495['splice'](_0xa1cf28,-0x7*0x23b+-0x7a8+0x1746),this['onStop']();}['onStop'](){this['_xrHitTest'+'Source']['cancel'](),this['_xrHitTest'+'Source']=null,this['fire']('remove'),this['manager']['hitTest']['fire']('remove',this);}['update'](_0x12aed2){if(this['_transient']){const _0x5839cd=_0x12aed2['getHitTest'+'ResultsFor'+'TransientI'+'nput'](this['_xrHitTest'+'Source']);for(let _0x1fd112=0x1*0x1fd4+-0x287*-0x1+-0x6df*0x5;_0x1fd112<_0x5839cd['length'];_0x1fd112++){const _0x2f168e=_0x5839cd[_0x1fd112];if(!_0x2f168e['results']['length'])continue;let _0x2dd12a;_0x2f168e['inputSourc'+'e']&&(_0x2dd12a=this['manager']['input']['_getByInpu'+'tSource'](_0x2f168e['inputSourc'+'e'])),this['updateHitR'+'esults'](_0x2f168e['results'],_0x2dd12a);}}else{const _0x4f845f=_0x12aed2['getHitTest'+'Results'](this['_xrHitTest'+'Source']);if(!_0x4f845f['length'])return;this['updateHitR'+'esults'](_0x4f845f);}}['updateHitR'+'esults'](_0x5f53ce,_0x38a82b){if(this['_inputSour'+'ce']&&this['_inputSour'+'ce']!==_0x38a82b)return;const _0x3f51bf=Rc['pop']()??new D();_0x38a82b?_0x3f51bf['copy'](_0x38a82b['getOrigin']()):_0x3f51bf['copy'](this['manager']['camera']['getPositio'+'n']());let _0x3590fa=(0x2ad+0x25e*-0x6+0x3d8*0x3)/(0x2*-0x56f+0x5*0x18e+0x318),_0x9658c6=null;const _0xcc074f=Rc['pop']()??new D(),_0x5816fb=bS['pop']()??new le();for(let _0x12ecd2=-0x8bb+0x200*-0x1+0xabb;_0x12ecd2<_0x5f53ce['length'];_0x12ecd2++){const _0x987f17=_0x5f53ce[_0x12ecd2]['getPose'](this['manager']['_reference'+'Space']),_0x1283ef=_0x3f51bf['distance'](_0x987f17['transform']['position']);_0x1283ef>=_0x3590fa||(_0x3590fa=_0x1283ef,_0x9658c6=_0x5f53ce[_0x12ecd2],_0xcc074f['copy'](_0x987f17['transform']['position']),_0x5816fb['copy'](_0x987f17['transform']['orientatio'+'n']));}this['fire']('result',_0xcc074f,_0x5816fb,_0x38a82b||this['_inputSour'+'ce'],_0x9658c6),this['manager']['hitTest']['fire']('result',this,_0xcc074f,_0x5816fb,_0x38a82b||this['_inputSour'+'ce'],_0x9658c6),Rc['push'](_0x3f51bf),Rc['push'](_0xcc074f),bS['push'](_0x5816fb);}}h(ju,'EVENT_REMO'+'VE','remove'),h(ju,'EVENT_RESU'+'LT','result');class jr extends me{constructor(_0x21bb93){super(),h(this,'manager'),h(this,'_supported',Ae['browser']&&!!(window['XRSession']&&window['XRSession']['prototype']['requestHit'+'TestSource'])),h(this,'_available',!(0x1*-0x25b5+-0x1*-0x1859+0xd5d)),h(this,'_checkingA'+'vailabilit'+'y',!(-0x1*-0x20a7+0xf*-0x25d+-0xef*-0x3)),h(this,'sources',[]),(this['manager']=_0x21bb93,this['_supported']&&(this['manager']['on']('start',this['_onSession'+'Start'],this),this['manager']['on']('end',this['_onSession'+'End'],this)));}['_onSession'+'Start'](){if(this['manager']['session']['enabledFea'+'tures']){const _0x256e8e=this['manager']['session']['enabledFea'+'tures']['indexOf']('hit-test')!==-(0x1336+0x1c4f*0x1+0xbe1*-0x4);if(!_0x256e8e)return;this['_available']=_0x256e8e,this['fire']('available');}else this['_checkingA'+'vailabilit'+'y']||(this['_checkingA'+'vailabilit'+'y']=!(0x1bab+0x2dc+0xf*-0x209),this['manager']['session']['requestRef'+'erenceSpac'+'e'](ES)['then'](_0x2ff977=>{this['manager']['session']['requestHit'+'TestSource']({'space':_0x2ff977})['then'](_0x25c1cd=>{_0x25c1cd['cancel'](),this['manager']['active']&&(this['_available']=!(-0x1*-0x1fbb+0xa*-0x35b+-0x1d3*-0x1),this['fire']('available'));})['catch'](()=>{});})['catch'](()=>{}));}['_onSession'+'End'](){if(this['_available']){this['_available']=!(0x115+-0xe10+-0x454*-0x3);for(let _0x1bd72f=0x1b89+0x1*0x1fc1+-0x3b4a;_0x1bd72f<this['sources']['length'];_0x1bd72f++)this['sources'][_0x1bd72f]['onStop']();this['sources']=[],this['fire']('unavailabl'+'e');}}['start'](_0x11258c={}){var _0x2f31ee,_0xd5d62d;if(!this['_supported']){(_0x2f31ee=_0x11258c['callback'])==null||_0x2f31ee['call'](_0x11258c,new Error('XR\x20HitTest'+'\x20is\x20not\x20su'+'pported'),null);return;}if(!this['_available']){(_0xd5d62d=_0x11258c['callback'])==null||_0xd5d62d['call'](_0x11258c,new Error('XR\x20HitTest'+'\x20is\x20not\x20av'+'ailable'),null);return;}!_0x11258c['profile']&&!_0x11258c['spaceType']&&(_0x11258c['spaceType']=ES);let _0x196405;const _0x17e205=_0x11258c['offsetRay'];if(_0x17e205){const _0x4240b2=new DOMPoint(_0x17e205['origin']['x'],_0x17e205['origin']['y'],_0x17e205['origin']['z'],0x6e*-0x8+-0x2019+-0x2*-0x11c5),_0x1414dc=new DOMPoint(_0x17e205['direction']['x'],_0x17e205['direction']['y'],_0x17e205['direction']['z'],-0x1c6*-0x4+-0x22ec+0x224*0xd);_0x196405=new XRRay(_0x4240b2,_0x1414dc);}const _0x2181bc=_0x11258c['callback'];_0x11258c['spaceType']?this['manager']['session']['requestRef'+'erenceSpac'+'e'](_0x11258c['spaceType'])['then'](_0x104e51=>{if(!this['manager']['session']){const _0x387964=new Error('XR\x20Session'+'\x20is\x20not\x20st'+'arted\x20(2)');_0x2181bc&&_0x2181bc(_0x387964),this['fire']('error',_0x387964);return;}this['manager']['session']['requestHit'+'TestSource']({'space':_0x104e51,'entityTypes':_0x11258c['entityType'+'s']||void(0x1b*-0x5b+-0x1*-0x112+-0x25*-0x3b),'offsetRay':_0x196405})['then'](_0x364029=>{this['_onHitTest'+'Source'](_0x364029,!(-0x1b52*0x1+-0x8b+0x1bde),_0x11258c['inputSourc'+'e'],_0x2181bc);})['catch'](_0x548188=>{_0x2181bc&&_0x2181bc(_0x548188),this['fire']('error',_0x548188);});})['catch'](_0x34824a=>{_0x2181bc&&_0x2181bc(_0x34824a),this['fire']('error',_0x34824a);}):this['manager']['session']['requestHit'+'TestSource'+'ForTransie'+'ntInput']({'profile':_0x11258c['profile'],'entityTypes':_0x11258c['entityType'+'s']||void(0x10f*-0x4+0x1ceb+-0x1*0x18af),'offsetRay':_0x196405})['then'](_0x458253=>{this['_onHitTest'+'Source'](_0x458253,!(-0x5*0x8b+-0x17a*-0x9+-0xa93),_0x11258c['inputSourc'+'e'],_0x2181bc);})['catch'](_0x8326d7=>{_0x2181bc&&_0x2181bc(_0x8326d7),this['fire']('error',_0x8326d7);});}['_onHitTest'+'Source'](_0x3455ef,_0x89698d,_0x181bd1,_0x4ee96e){if(!this['manager']['session']){_0x3455ef['cancel']();const _0x4de29a=new Error('XR\x20Session'+'\x20is\x20not\x20st'+'arted\x20(3)');_0x4ee96e&&_0x4ee96e(_0x4de29a),this['fire']('error',_0x4de29a);return;}const _0x19c03d=new ju(this['manager'],_0x3455ef,_0x89698d,_0x181bd1??null);this['sources']['push'](_0x19c03d),_0x4ee96e&&_0x4ee96e(null,_0x19c03d),this['fire']('add',_0x19c03d);}['update'](_0x5c7dcc){if(this['_available']){for(let _0x2c88b3=0x1b2c+0x1049+-0x1*0x2b75;_0x2c88b3<this['sources']['length'];_0x2c88b3++)this['sources'][_0x2c88b3]['update'](_0x5c7dcc);}}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}}h(jr,'EVENT_AVAI'+'LABLE','available'),h(jr,'EVENT_UNAV'+'AILABLE','unavailabl'+'e'),h(jr,'EVENT_ADD','add'),h(jr,'EVENT_REMO'+'VE','remove'),h(jr,'EVENT_RESU'+'LT','result'),h(jr,'EVENT_ERRO'+'R','error');class Yu extends me{constructor(_0x4c167a,_0x28e818){super(),h(this,'_image'),h(this,'_width'),h(this,'_bitmap',null),h(this,'_measuredW'+'idth',0x317+-0xe3e+-0x5*-0x23b),h(this,'_trackable',!(-0x1c47+-0x25a6+0x41ee)),h(this,'_tracking',!(-0x1*0x1c85+0xe1d+0xe69)),h(this,'_emulated',!(0x387*-0xb+-0x220f*0x1+0x32b*0x17)),h(this,'_pose',null),h(this,'_position',new D()),h(this,'_rotation',new le()),(this['_image']=_0x4c167a,this['_width']=_0x28e818);}get['image'](){return this['_image'];}set['width'](_0x654ced){this['_width']=_0x654ced;}get['width'](){return this['_width'];}get['trackable'](){return this['_trackable'];}get['tracking'](){return this['_tracking'];}get['emulated'](){return this['_emulated'];}['prepare'](){return this['_bitmap']?{'image':this['_bitmap'],'widthInMeters':this['_width']}:createImageBitmap(this['_image'])['then'](_0x15eab5=>(this['_bitmap']=_0x15eab5,{'image':this['_bitmap'],'widthInMeters':this['_width']}));}['destroy'](){this['_image']=null,this['_pose']=null,this['_bitmap']&&(this['_bitmap']['close'](),this['_bitmap']=null);}['getPositio'+'n'](){return this['_pose']&&this['_position']['copy'](this['_pose']['transform']['position']),this['_position'];}['getRotatio'+'n'](){return this['_pose']&&this['_rotation']['copy'](this['_pose']['transform']['orientatio'+'n']),this['_rotation'];}}h(Yu,'EVENT_TRAC'+'KED','tracked'),h(Yu,'EVENT_UNTR'+'ACKED','untracked');class L0 extends me{constructor(_0x113bf4){super(),h(this,'_manager'),h(this,'_supported',Ae['browser']&&!!window['XRImageTra'+'ckingResul'+'t']),h(this,'_available',!(0x258a+0x15af+-0x3b38)),h(this,'_images',[]),(this['_manager']=_0x113bf4,this['_supported']&&(this['_manager']['on']('start',this['_onSession'+'Start'],this),this['_manager']['on']('end',this['_onSession'+'End'],this)));}['add'](_0x3db365,_0x4c8bdf){if(!this['_supported']||this['_manager']['active'])return null;const _0x1f86a7=new Yu(_0x3db365,_0x4c8bdf);return this['_images']['push'](_0x1f86a7),_0x1f86a7;}['remove'](_0x164860){if(this['_manager']['active'])return;const _0x2a20c4=this['_images']['indexOf'](_0x164860);_0x2a20c4!==-(-0x137*0x17+-0xeb3*-0x1+0xd3f)&&(_0x164860['destroy'](),this['_images']['splice'](_0x2a20c4,-0x39*-0x53+0x1d5b+-0x2fd5));}['_onSession'+'Start'](){this['_manager']['session']['getTracked'+'ImageScore'+'s']()['then'](_0x50c26f=>{this['_available']=!(-0x2044+0x5*-0x5de+-0x19f*-0x26);for(let _0x1aa7bc=0xf22+-0x1c83+0xd61;_0x1aa7bc<_0x50c26f['length'];_0x1aa7bc++)this['_images'][_0x1aa7bc]['_trackable']=_0x50c26f[_0x1aa7bc]==='trackable';})['catch'](_0x1b9a8b=>{this['_available']=!(-0x13*0x17d+-0x22*-0x33+-0x1582*-0x1),this['fire']('error',_0x1b9a8b);});}['_onSession'+'End'](){this['_available']=!(-0x10*-0x14b+0x179*-0xb+-0xe*0x52);for(let _0x1bac01=0x6b*-0x59+0x16*-0x199+0x4859*0x1;_0x1bac01<this['_images']['length'];_0x1bac01++){const _0x43a781=this['_images'][_0x1bac01];_0x43a781['_pose']=null,_0x43a781['_measuredW'+'idth']=-0x1*-0x2063+-0xf97+-0x14*0xd7,_0x43a781['_tracking']&&(_0x43a781['_tracking']=!(-0x1*0x8cb+-0x1a25+-0x1*-0x22f1),_0x43a781['fire']('untracked'));}}['prepareIma'+'ges'](_0xc71f2b){this['_images']['length']?Promise['all'](this['_images']['map'](_0x3fd0be=>_0x3fd0be['prepare']()))['then'](_0x20beca=>{_0xc71f2b(null,_0x20beca);})['catch'](_0x55cd57=>{_0xc71f2b(_0x55cd57,null);}):_0xc71f2b(null,null);}['update'](_0x1ea535){if(!this['_available'])return;const _0x27e3a7=_0x1ea535['getImageTr'+'ackingResu'+'lts'](),_0x3e6de3={};for(let _0x558b02=0x242*0x2+-0x1*-0x74+-0x1*0x4f8;_0x558b02<_0x27e3a7['length'];_0x558b02++){_0x3e6de3[_0x27e3a7[_0x558b02]['index']]=_0x27e3a7[_0x558b02];const _0x544aa1=this['_images'][_0x27e3a7[_0x558b02]['index']];_0x544aa1['_emulated']=_0x27e3a7[_0x558b02]['trackingSt'+'ate']==='emulated',_0x544aa1['_measuredW'+'idth']=_0x27e3a7[_0x558b02]['measuredWi'+'dthInMeter'+'s'],_0x544aa1['_pose']=_0x1ea535['getPose'](_0x27e3a7[_0x558b02]['imageSpace'],this['_manager']['_reference'+'Space']);}for(let _0x5257d3=0x15*0x95+0x1*-0xe16+-0x1*-0x1dd;_0x5257d3<this['_images']['length'];_0x5257d3++)this['_images'][_0x5257d3]['_tracking']&&!_0x3e6de3[_0x5257d3]?(this['_images'][_0x5257d3]['_tracking']=!(0x25f*-0x10+-0x1*-0xa97+-0x185*-0x12),this['_images'][_0x5257d3]['fire']('untracked')):!this['_images'][_0x5257d3]['_tracking']&&_0x3e6de3[_0x5257d3]&&(this['_images'][_0x5257d3]['_tracking']=!(0x1271+-0x28*-0x52+0x1f41*-0x1),this['_images'][_0x5257d3]['fire']('tracked'));}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}get['images'](){return this['_images'];}}h(L0,'EVENT_ERRO'+'R','error');class uU{constructor(_0x55e211,_0x429e65){h(this,'_index'),h(this,'_hand'),h(this,'_joints',[]),h(this,'_tip',null),(this['_index']=_0x55e211,this['_hand']=_0x429e65,this['_hand']['_fingers']['push'](this));}get['index'](){return this['_index'];}get['hand'](){return this['_hand'];}get['joints'](){return this['_joints'];}get['tip'](){return this['_tip'];}}const AS=Ae['browser']&&window['XRHand']?['thumb-tip','index-fing'+'er-tip','middle-fin'+'ger-tip','ring-finge'+'r-tip','pinky-fing'+'er-tip']:[],R0={};for(let l=0x1*0xc97+-0x3fc*0x9+0x1745;l<AS['length'];l++)R0[AS[l]]=!(0xd64*0x2+0x9f*0x1+-0x1b67);class CS{constructor(_0x592138,_0x5941da,_0x157e72,_0x59105a=null){h(this,'_index'),h(this,'_id'),h(this,'_hand'),h(this,'_finger'),h(this,'_wrist'),h(this,'_tip'),h(this,'_radius',null),h(this,'_localTran'+'sform',new te()),h(this,'_worldTran'+'sform',new te()),h(this,'_localPosi'+'tion',new D()),h(this,'_localRota'+'tion',new le()),h(this,'_position',new D()),h(this,'_rotation',new le()),h(this,'_dirtyLoca'+'l',!(0x7*-0x2d3+0x1*0x1d5f+0x99a*-0x1)),(this['_index']=_0x592138,this['_id']=_0x5941da,this['_hand']=_0x157e72,this['_finger']=_0x59105a,this['_wrist']=_0x5941da==='wrist',this['_tip']=this['_finger']&&!!R0[_0x5941da]);}['update'](_0x30c3f2){this['_dirtyLoca'+'l']=!(-0x273+0x1a74+0x1*-0x1801),this['_radius']=_0x30c3f2['radius'],this['_localPosi'+'tion']['copy'](_0x30c3f2['transform']['position']),this['_localRota'+'tion']['copy'](_0x30c3f2['transform']['orientatio'+'n']);}['_updateTra'+'nsforms'](){this['_dirtyLoca'+'l']&&(this['_dirtyLoca'+'l']=!(-0x1*-0x23a7+-0xeb+-0x22bb),this['_localTran'+'sform']['setTRS'](this['_localPosi'+'tion'],this['_localRota'+'tion'],D['ONE']));const _0x68e2b1=this['_hand']['_manager']['camera']['parent'];_0x68e2b1?this['_worldTran'+'sform']['mul2'](_0x68e2b1['getWorldTr'+'ansform'](),this['_localTran'+'sform']):this['_worldTran'+'sform']['copy'](this['_localTran'+'sform']);}['getPositio'+'n'](){return this['_updateTra'+'nsforms'](),this['_worldTran'+'sform']['getTransla'+'tion'](this['_position']),this['_position'];}['getRotatio'+'n'](){return this['_updateTra'+'nsforms'](),this['_rotation']['setFromMat'+'4'](this['_worldTran'+'sform']),this['_rotation'];}get['id'](){return this['_id'];}get['index'](){return this['_index'];}get['hand'](){return this['_hand'];}get['finger'](){return this['_finger'];}get['wrist'](){return this['_wrist'];}get['tip'](){return this['_tip'];}get['radius'](){return this['_radius']||0x1968+-0x2*0x694+-0xc40+0.005;}}let rh=[];const Wr=new D(),Oc=new D(),PS=new D();Ae['browser']&&window['XRHand']&&(rh=[['thumb-meta'+'carpal','thumb-phal'+'anx-proxim'+'al','thumb-phal'+'anx-distal','thumb-tip'],['index-fing'+'er-metacar'+'pal','index-fing'+'er-phalanx'+'-proximal','index-fing'+'er-phalanx'+'-intermedi'+'ate','index-fing'+'er-phalanx'+'-distal','index-fing'+'er-tip'],['middle-fin'+'ger-metaca'+'rpal','middle-fin'+'ger-phalan'+'x-proximal','middle-fin'+'ger-phalan'+'x-intermed'+'iate','middle-fin'+'ger-phalan'+'x-distal','middle-fin'+'ger-tip'],['ring-finge'+'r-metacarp'+'al','ring-finge'+'r-phalanx-'+'proximal','ring-finge'+'r-phalanx-'+'intermedia'+'te','ring-finge'+'r-phalanx-'+'distal','ring-finge'+'r-tip'],['pinky-fing'+'er-metacar'+'pal','pinky-fing'+'er-phalanx'+'-proximal','pinky-fing'+'er-phalanx'+'-intermedi'+'ate','pinky-fing'+'er-phalanx'+'-distal','pinky-fing'+'er-tip']]);class Ku extends me{constructor(_0x27fdfe){super(),h(this,'_manager'),h(this,'_inputSour'+'ce'),h(this,'_tracking',!(-0x206f+0x9f7*-0x3+0x51*0xc5)),h(this,'_fingers',[]),h(this,'_joints',[]),h(this,'_jointsByI'+'d',{}),h(this,'_tips',[]),h(this,'_wrist',null);const _0x5094c0=_0x27fdfe['_xrInputSo'+'urce']['hand'];if(this['_manager']=_0x27fdfe['_manager'],this['_inputSour'+'ce']=_0x27fdfe,_0x5094c0['get']('wrist')){const _0x1628d9=new CS(-0x6ea+-0x1d8c+-0x123b*-0x2,'wrist',this,null);this['_wrist']=_0x1628d9,this['_joints']['push'](_0x1628d9),this['_jointsByI'+'d']['wrist']=_0x1628d9;}for(let _0x5553e2=-0x7ae+-0x1f43+0xcfb*0x3;_0x5553e2<rh['length'];_0x5553e2++){const _0x14df14=new uU(_0x5553e2,this);for(let _0x4b8f14=0xfa0+0x7bb*-0x1+-0x7e5;_0x4b8f14<rh[_0x5553e2]['length'];_0x4b8f14++){const _0x4ef7a2=rh[_0x5553e2][_0x4b8f14];if(!_0x5094c0['get'](_0x4ef7a2))continue;const _0x579a90=new CS(_0x4b8f14,_0x4ef7a2,this,_0x14df14);this['_joints']['push'](_0x579a90),this['_jointsByI'+'d'][_0x4ef7a2]=_0x579a90,_0x579a90['tip']&&(this['_tips']['push'](_0x579a90),_0x14df14['_tip']=_0x579a90),_0x14df14['_joints']['push'](_0x579a90);}}}['update'](_0xa87f16){const _0x3bebcf=this['_inputSour'+'ce']['_xrInputSo'+'urce'];for(let _0x293668=-0x1*-0xe8b+-0x4d*0x7+-0xc70;_0x293668<this['_joints']['length'];_0x293668++){const _0x3680cc=this['_joints'][_0x293668],_0x41ef08=_0x3bebcf['hand']['get'](_0x3680cc['_id']);if(_0x41ef08){let _0x144828;if(_0xa87f16['session']['visibility'+'State']!=='hidden'&&(_0x144828=_0xa87f16['getJointPo'+'se'](_0x41ef08,this['_manager']['_reference'+'Space'])),_0x144828)_0x3680cc['update'](_0x144828),_0x3680cc['wrist']&&!this['_tracking']&&(this['_tracking']=!(0xd69+0x22d*0x11+-0x3266),this['fire']('tracking'));else{if(_0x3680cc['wrist']){this['_tracking']&&(this['_tracking']=!(0xb*0x37a+0x2e*0x4f+0x1*-0x346f),this['fire']('trackinglo'+'st'));break;}}}}const _0x29130b=this['_jointsByI'+'d']['thumb-meta'+'carpal'],_0x510b11=this['_jointsByI'+'d']['thumb-tip'],_0x23746f=this['_jointsByI'+'d']['index-fing'+'er-phalanx'+'-proximal'],_0x2dbfe4=this['_jointsByI'+'d']['index-fing'+'er-tip'],_0x1b9ded=this['_jointsByI'+'d']['ring-finge'+'r-phalanx-'+'proximal'],_0x3ff816=this['_jointsByI'+'d']['pinky-fing'+'er-phalanx'+'-proximal'];if(_0x29130b&&_0x510b11&&_0x23746f&&_0x2dbfe4&&_0x1b9ded&&_0x3ff816){this['_inputSour'+'ce']['_dirtyRay']=!(0x2*0xe71+0x220d+-0x3eef*0x1),this['_inputSour'+'ce']['_rayLocal']['origin']['lerp'](_0x510b11['_localPosi'+'tion'],_0x2dbfe4['_localPosi'+'tion'],0x2611*-0x1+-0xe3e+0x344f+0.5);let _0x571e6=_0x29130b,_0x4ddaad=_0x3ff816;if(this['_inputSour'+'ce']['handedness']===hU){const _0xb99e2c=_0x571e6;_0x571e6=_0x4ddaad,_0x4ddaad=_0xb99e2c;}Wr['sub2'](_0x571e6['_localPosi'+'tion'],this['_wrist']['_localPosi'+'tion']),Oc['sub2'](_0x4ddaad['_localPosi'+'tion'],this['_wrist']['_localPosi'+'tion']),PS['cross'](Wr,Oc)['normalize'](),Wr['lerp'](_0x23746f['_localPosi'+'tion'],_0x1b9ded['_localPosi'+'tion'],0x303+0x5*0x6f3+-0xc96*0x3+0.5),Wr['sub'](this['_wrist']['_localPosi'+'tion'])['normalize'](),this['_inputSour'+'ce']['_rayLocal']['direction']['lerp'](PS,Wr,-0x1a29+-0xd22*0x1+0x274b+0.5)['normalize']();}this['_fingerIsC'+'losed'](0x1431+0x184a*0x1+-0x2c7a)&&this['_fingerIsC'+'losed'](-0x5*0x774+0x34*0x4c+-0x5*-0x45e)&&this['_fingerIsC'+'losed'](-0x25b7+-0xbe5+0x319f*0x1)&&this['_fingerIsC'+'losed'](0x2072+0x47f+-0x24ed)?this['_inputSour'+'ce']['_squeezing']||(this['_inputSour'+'ce']['_squeezing']=!(0x767*0x2+0x636+-0x1504),this['_inputSour'+'ce']['fire']('squeezesta'+'rt'),this['_manager']['input']['fire']('squeezesta'+'rt',this['_inputSour'+'ce'])):this['_inputSour'+'ce']['_squeezing']&&(this['_inputSour'+'ce']['_squeezing']=!(0x2d0+-0xbab+-0x46e*-0x2),this['_inputSour'+'ce']['fire']('squeeze'),this['_manager']['input']['fire']('squeeze',this['_inputSour'+'ce']),this['_inputSour'+'ce']['fire']('squeezeend'),this['_manager']['input']['fire']('squeezeend',this['_inputSour'+'ce']));}['_fingerIsC'+'losed'](_0x4756ff){const _0x20e0fd=this['_fingers'][_0x4756ff];return Wr['sub2'](_0x20e0fd['joints'][-0x2013+-0xbc9+0x2bdc]['_localPosi'+'tion'],_0x20e0fd['joints'][0x382+0x1*0x2156+-0x1*0x24d7]['_localPosi'+'tion'])['normalize'](),Oc['sub2'](_0x20e0fd['joints'][0x1*0x1112+-0x1ed0+0xdc0]['_localPosi'+'tion'],_0x20e0fd['joints'][-0x10bb*-0x1+0x258a+-0x3642]['_localPosi'+'tion'])['normalize'](),Wr['dot'](Oc)<-(-0x2fe*0x4+-0x5c2+0x11ba+0.8);}['getJointBy'+'Id'](_0x352f85){return this['_jointsByI'+'d'][_0x352f85]||null;}get['fingers'](){return this['_fingers'];}get['joints'](){return this['_joints'];}get['tips'](){return this['_tips'];}get['wrist'](){return this['_wrist'];}get['tracking'](){return this['_tracking'];}}h(Ku,'EVENT_TRAC'+'KING','tracking'),h(Ku,'EVENT_TRAC'+'KINGLOST','trackinglo'+'st');const MS=new D(),DS=new le();let pU=0x63+0x165+-0x3*0x98;class Qt extends me{constructor(_0x8a81b2,_0x3fa07b){super(),h(this,'_id'),h(this,'_manager'),h(this,'_xrInputSo'+'urce'),h(this,'_ray',new Dn()),h(this,'_rayLocal',new Dn()),h(this,'_grip',!(-0x2068+0x988+0x16e1)),h(this,'_hand',null),h(this,'_velocitie'+'sAvailable',!(0x676+-0x11f7+0xb82)),h(this,'_velocitie'+'sTimestamp',de()),h(this,'_localTran'+'sform',null),h(this,'_worldTran'+'sform',null),h(this,'_position',new D()),h(this,'_rotation',new le()),h(this,'_localPosi'+'tion',null),h(this,'_localPosi'+'tionLast',null),h(this,'_localRota'+'tion',null),h(this,'_linearVel'+'ocity',null),h(this,'_dirtyLoca'+'l',!(0x33f*-0x9+-0x11f6+-0xd*-0x3a1)),h(this,'_dirtyRay',!(0x4ad+-0x1ec5*0x1+0x1a19)),h(this,'_selecting',!(-0x712+0x1c62+0x5*-0x443)),h(this,'_squeezing',!(0x2588+0x26e7+-0x4c6e)),h(this,'_elementIn'+'put',!(-0x1*0x12e2+-0x6db+0x19bd)),h(this,'_elementEn'+'tity',null),h(this,'_hitTestSo'+'urces',[]),(this['_id']=++pU,this['_manager']=_0x8a81b2,this['_xrInputSo'+'urce']=_0x3fa07b,_0x3fa07b['hand']&&(this['_hand']=new Ku(this)));}get['id'](){return this['_id'];}get['inputSourc'+'e'](){return this['_xrInputSo'+'urce'];}get['targetRayM'+'ode'](){return this['_xrInputSo'+'urce']['targetRayM'+'ode'];}get['handedness'](){return this['_xrInputSo'+'urce']['handedness'];}get['profiles'](){return this['_xrInputSo'+'urce']['profiles'];}get['grip'](){return this['_grip'];}get['hand'](){return this['_hand'];}get['gamepad'](){return this['_xrInputSo'+'urce']['gamepad']||null;}get['selecting'](){return this['_selecting'];}get['squeezing'](){return this['_squeezing'];}set['elementInp'+'ut'](_0x265e74){this['_elementIn'+'put']!==_0x265e74&&(this['_elementIn'+'put']=_0x265e74,this['_elementIn'+'put']||(this['_elementEn'+'tity']=null));}get['elementInp'+'ut'](){return this['_elementIn'+'put'];}get['elementEnt'+'ity'](){return this['_elementEn'+'tity'];}get['hitTestSou'+'rces'](){return this['_hitTestSo'+'urces'];}['update'](_0x51551f){if(this['_hand'])this['_hand']['update'](_0x51551f);else{const _0x4a1667=this['_xrInputSo'+'urce']['gripSpace'];if(_0x4a1667){const _0x2e8175=_0x51551f['getPose'](_0x4a1667,this['_manager']['_reference'+'Space']);if(_0x2e8175){this['_grip']||(this['_grip']=!(-0x363+0x24a2+-0x213f),this['_localTran'+'sform']=new te(),this['_worldTran'+'sform']=new te(),this['_localPosi'+'tionLast']=new D(),this['_localPosi'+'tion']=new D(),this['_localRota'+'tion']=new le(),this['_linearVel'+'ocity']=new D());const _0x4c5b30=de(),_0x567b11=(_0x4c5b30-this['_velocitie'+'sTimestamp'])/(0x149*0x7+-0x2*-0x386+-0xef*0xd);this['_velocitie'+'sTimestamp']=_0x4c5b30,this['_dirtyLoca'+'l']=!(0x22*-0x86+-0x1b*0x14e+0x4d2*0xb),this['_localPosi'+'tionLast']['copy'](this['_localPosi'+'tion']),this['_localPosi'+'tion']['copy'](_0x2e8175['transform']['position']),this['_localRota'+'tion']['copy'](_0x2e8175['transform']['orientatio'+'n']),this['_velocitie'+'sAvailable']=!(-0x23bd*-0x1+-0x1*-0x2181+-0x1*0x453e),this['_manager']['input']['velocities'+'Supported']&&_0x2e8175['linearVelo'+'city']?this['_linearVel'+'ocity']['copy'](_0x2e8175['linearVelo'+'city']):_0x567b11>-0x1ee*0x4+-0x1212+0x19ca&&(MS['sub2'](this['_localPosi'+'tion'],this['_localPosi'+'tionLast'])['divScalar'](_0x567b11),this['_linearVel'+'ocity']['lerp'](this['_linearVel'+'ocity'],MS,0x1*-0x926+-0x2266+0x2b8c+0.15));}else this['_velocitie'+'sAvailable']=!(-0xff*-0x16+-0x16bf+-0x1*-0xd6);}const _0x411348=_0x51551f['getPose'](this['_xrInputSo'+'urce']['targetRayS'+'pace'],this['_manager']['_reference'+'Space']);_0x411348&&(this['_dirtyRay']=!(0xe*0xd9+-0x623*0x2+-0xd*-0x8),this['_rayLocal']['origin']['copy'](_0x411348['transform']['position']),this['_rayLocal']['direction']['set'](-0x1204+0x7f0+-0x1e*-0x56,0xf3+-0x1745+-0x1*-0x1652,-(0x1748+0x685*0x1+-0x1*0x1dcc)),DS['copy'](_0x411348['transform']['orientatio'+'n']),DS['transformV'+'ector'](this['_rayLocal']['direction'],this['_rayLocal']['direction']));}}['_updateTra'+'nsforms'](){this['_dirtyLoca'+'l']&&(this['_dirtyLoca'+'l']=!(0xb1*0x16+0x1*0x2006+0x71*-0x6b),this['_localTran'+'sform']['setTRS'](this['_localPosi'+'tion'],this['_localRota'+'tion'],D['ONE']));const _0x4bd496=this['_manager']['camera']['parent'];_0x4bd496?this['_worldTran'+'sform']['mul2'](_0x4bd496['getWorldTr'+'ansform'](),this['_localTran'+'sform']):this['_worldTran'+'sform']['copy'](this['_localTran'+'sform']);}['_updateRay'+'Transforms'](){const _0x24bab0=this['_dirtyRay'];if(this['_dirtyRay']=!(0x3d1*0x2+0xe1+-0x882),this['_manager']['camera']['parent']){const _0x21d13a=this['_manager']['camera']['parent']['getWorldTr'+'ansform']();_0x21d13a['getTransla'+'tion'](this['_position']),this['_rotation']['setFromMat'+'4'](_0x21d13a),this['_rotation']['transformV'+'ector'](this['_rayLocal']['origin'],this['_ray']['origin']),this['_ray']['origin']['add'](this['_position']),this['_rotation']['transformV'+'ector'](this['_rayLocal']['direction'],this['_ray']['direction']);}else _0x24bab0&&(this['_ray']['origin']['copy'](this['_rayLocal']['origin']),this['_ray']['direction']['copy'](this['_rayLocal']['direction']));}['getPositio'+'n'](){return this['_position']?(this['_updateTra'+'nsforms'](),this['_worldTran'+'sform']['getTransla'+'tion'](this['_position']),this['_position']):null;}['getLocalPo'+'sition'](){return this['_localPosi'+'tion'];}['getRotatio'+'n'](){return this['_rotation']?(this['_updateTra'+'nsforms'](),this['_rotation']['setFromMat'+'4'](this['_worldTran'+'sform']),this['_rotation']):null;}['getLocalRo'+'tation'](){return this['_localRota'+'tion'];}['getLinearV'+'elocity'](){return this['_velocitie'+'sAvailable']?this['_linearVel'+'ocity']:null;}['getOrigin'](){return this['_updateRay'+'Transforms'](),this['_ray']['origin'];}['getDirecti'+'on'](){return this['_updateRay'+'Transforms'](),this['_ray']['direction'];}['hitTestSta'+'rt'](_0x552002={}){_0x552002['inputSourc'+'e']=this,_0x552002['profile']=this['_xrInputSo'+'urce']['profiles'][-0x25ef+-0x5d8+0x641*0x7];const _0x3811ba=_0x552002['callback'];_0x552002['callback']=(_0x1dbc8b,_0x365ea5)=>{_0x365ea5&&this['onHitTestS'+'ourceAdd'](_0x365ea5),_0x3811ba&&_0x3811ba(_0x1dbc8b,_0x365ea5);},this['_manager']['hitTest']['start'](_0x552002);}['onHitTestS'+'ourceAdd'](_0x27328e){this['_hitTestSo'+'urces']['push'](_0x27328e),this['fire']('hittest:ad'+'d',_0x27328e),_0x27328e['on']('result',(_0x3a348e,_0x8db6f9,_0x18c357,_0x3165d5)=>{_0x18c357===this&&this['fire']('hittest:re'+'sult',_0x27328e,_0x3a348e,_0x8db6f9,_0x3165d5);}),_0x27328e['once']('remove',()=>{this['onHitTestS'+'ourceRemov'+'e'](_0x27328e),this['fire']('hittest:re'+'move',_0x27328e);});}['onHitTestS'+'ourceRemov'+'e'](_0xbe80ad){const _0x1f8a57=this['_hitTestSo'+'urces']['indexOf'](_0xbe80ad);_0x1f8a57!==-(-0x18*0x18e+0x24cb+0x86)&&this['_hitTestSo'+'urces']['splice'](_0x1f8a57,0x1e4a+-0x2572*0x1+0x729);}}h(Qt,'EVENT_REMO'+'VE','remove'),h(Qt,'EVENT_SELE'+'CT','select'),h(Qt,'EVENT_SELE'+'CTSTART','selectstar'+'t'),h(Qt,'EVENT_SELE'+'CTEND','selectend'),h(Qt,'EVENT_SQUE'+'EZE','squeeze'),h(Qt,'EVENT_SQUE'+'EZESTART','squeezesta'+'rt'),h(Qt,'EVENT_SQUE'+'EZEEND','squeezeend'),h(Qt,'EVENT_HITT'+'ESTADD','hittest:ad'+'d'),h(Qt,'EVENT_HITT'+'ESTREMOVE','hittest:re'+'move'),h(Qt,'EVENT_HITT'+'ESTRESULT','hittest:re'+'sult');class Li extends me{constructor(_0x466e01){var _0x3c090f,_0x2522f1;super(),h(this,'manager'),h(this,'_inputSour'+'ces',[]),h(this,'_onInputSo'+'urcesChang'+'eEvt'),h(this,'velocities'+'Supported',!(-0x10e0+-0x22b+0x130c)),(this['manager']=_0x466e01,this['velocities'+'Supported']=!!(Ae['browser']&&((_0x2522f1=(_0x3c090f=window['XRPose'])==null?void(0x1292+-0x37d+-0xf15):_0x3c090f['prototype'])!=null&&_0x2522f1['hasOwnProp'+'erty']('linearVelo'+'city'))),this['_onInputSo'+'urcesChang'+'eEvt']=_0x4b42a1=>{this['_onInputSo'+'urcesChang'+'e'](_0x4b42a1);},this['manager']['on']('start',this['_onSession'+'Start'],this),this['manager']['on']('end',this['_onSession'+'End'],this));}['_onSession'+'Start'](){const _0x2da25a=this['manager']['session'];_0x2da25a['addEventLi'+'stener']('inputsourc'+'eschange',this['_onInputSo'+'urcesChang'+'eEvt']),_0x2da25a['addEventLi'+'stener']('select',_0x29f8b3=>{const _0x24840f=this['_getByInpu'+'tSource'](_0x29f8b3['inputSourc'+'e']);_0x24840f['update'](_0x29f8b3['frame']),_0x24840f['fire']('select',_0x29f8b3),this['fire']('select',_0x24840f,_0x29f8b3);}),_0x2da25a['addEventLi'+'stener']('selectstar'+'t',_0x5a0746=>{const _0x17fb44=this['_getByInpu'+'tSource'](_0x5a0746['inputSourc'+'e']);_0x17fb44['_selecting']||(_0x17fb44['update'](_0x5a0746['frame']),_0x17fb44['_selecting']=!(0x1dde*-0x1+0x1b38+-0x6*-0x71),_0x17fb44['fire']('selectstar'+'t',_0x5a0746),this['fire']('selectstar'+'t',_0x17fb44,_0x5a0746));}),_0x2da25a['addEventLi'+'stener']('selectend',_0x168104=>{const _0x5292c9=this['_getByInpu'+'tSource'](_0x168104['inputSourc'+'e']);_0x5292c9['update'](_0x168104['frame']),_0x5292c9['_selecting']=!(0x204d+0x16e+-0x3*0xb3e),_0x5292c9['fire']('selectend',_0x168104),this['fire']('selectend',_0x5292c9,_0x168104);}),_0x2da25a['addEventLi'+'stener']('squeeze',_0x150ece=>{const _0x18f3cb=this['_getByInpu'+'tSource'](_0x150ece['inputSourc'+'e']);_0x18f3cb['update'](_0x150ece['frame']),_0x18f3cb['fire']('squeeze',_0x150ece),this['fire']('squeeze',_0x18f3cb,_0x150ece);}),_0x2da25a['addEventLi'+'stener']('squeezesta'+'rt',_0x51e10f=>{const _0x16fdf8=this['_getByInpu'+'tSource'](_0x51e10f['inputSourc'+'e']);_0x16fdf8['update'](_0x51e10f['frame']),_0x16fdf8['_squeezing']=!(0x26b5+-0x1de9+-0x2*0x466),_0x16fdf8['fire']('squeezesta'+'rt',_0x51e10f),this['fire']('squeezesta'+'rt',_0x16fdf8,_0x51e10f);}),_0x2da25a['addEventLi'+'stener']('squeezeend',_0x41abd2=>{const _0x3abaf9=this['_getByInpu'+'tSource'](_0x41abd2['inputSourc'+'e']);_0x3abaf9['update'](_0x41abd2['frame']),_0x3abaf9['_squeezing']=!(0x6*-0x15+0x1b1*0x9+0x82*-0x1d),_0x3abaf9['fire']('squeezeend',_0x41abd2),this['fire']('squeezeend',_0x3abaf9,_0x41abd2);});const _0x360cc8=_0x2da25a['inputSourc'+'es'];for(let _0x5c5fcd=0x10*0x159+-0x15bd+0x3*0xf;_0x5c5fcd<_0x360cc8['length'];_0x5c5fcd++)this['_addInputS'+'ource'](_0x360cc8[_0x5c5fcd]);}['_onSession'+'End'](){let _0x588172=this['_inputSour'+'ces']['length'];for(;_0x588172--;){const _0x264e7e=this['_inputSour'+'ces'][_0x588172];this['_inputSour'+'ces']['splice'](_0x588172,-0x2277+-0x2*-0x8b7+-0x3*-0x5ae),_0x264e7e['fire']('remove'),this['fire']('remove',_0x264e7e);}this['fire']('removeall'),this['manager']['session']['removeEven'+'tListener']('inputsourc'+'eschange',this['_onInputSo'+'urcesChang'+'eEvt']);}['_onInputSo'+'urcesChang'+'e'](_0x2435c1){for(let _0x210a77=-0x230b*0x1+0x4*-0x9b1+-0x49cf*-0x1;_0x210a77<_0x2435c1['removed']['length'];_0x210a77++)this['_removeInp'+'utSource'](_0x2435c1['removed'][_0x210a77]);for(let _0x489ced=-0x9b5+-0x17e3+-0xac*-0x32;_0x489ced<_0x2435c1['added']['length'];_0x489ced++)this['_addInputS'+'ource'](_0x2435c1['added'][_0x489ced]);}['_getByInpu'+'tSource'](_0x358fda){for(let _0x97e3e9=-0x958*0x1+0x1*0x1901+-0xfa9;_0x97e3e9<this['_inputSour'+'ces']['length'];_0x97e3e9++)if(this['_inputSour'+'ces'][_0x97e3e9]['inputSourc'+'e']===_0x358fda)return this['_inputSour'+'ces'][_0x97e3e9];return null;}['_removeApp'+'Entity'](_0xd57ed3){const _0x385ad7=this['manager']['app']['root']['findByName']('Armature_'+_0xd57ed3);_0x385ad7&&this['manager']['app']['root']['removeChil'+'d'](_0x385ad7);}['_addInputS'+'ource'](_0x1cacf7){if(this['_removeApp'+'Entity'](_0x1cacf7['handedness']),this['_getByInpu'+'tSource'](_0x1cacf7))return;const _0x388a26=new Qt(this['manager'],_0x1cacf7);this['_inputSour'+'ces']['push'](_0x388a26),this['fire']('add',_0x388a26);}['_removeInp'+'utSource'](_0x471c4e){for(let _0x37b92b=0x16+-0x17e7+0x17d1;_0x37b92b<this['_inputSour'+'ces']['length'];_0x37b92b++){if(this['_inputSour'+'ces'][_0x37b92b]['inputSourc'+'e']!==_0x471c4e)continue;const _0xdd01e7=this['_inputSour'+'ces'][_0x37b92b];this['_inputSour'+'ces']['splice'](_0x37b92b,0x1*0x17a5+0x9*-0x305+-0x389*-0x1);let _0x1f5e7b=_0xdd01e7['hitTestSou'+'rces']['length'];for(;_0x1f5e7b--;)_0xdd01e7['hitTestSou'+'rces'][_0x1f5e7b]['remove']();this['_removeApp'+'Entity'](_0xdd01e7['handedness']),_0xdd01e7['fire']('remove'),this['fire']('remove',_0xdd01e7);return;}}['update'](_0x41e686){for(let _0x349ad7=0x1c4*0xb+0xd61+-0x20cd;_0x349ad7<this['_inputSour'+'ces']['length'];_0x349ad7++)this['_inputSour'+'ces'][_0x349ad7]['update'](_0x41e686);}get['inputSourc'+'es'](){return this['_inputSour'+'ces'];}}h(Li,'EVENT_ADD','add'),h(Li,'EVENT_REMO'+'VE','remove'),h(Li,'EVENT_SELE'+'CT','select'),h(Li,'EVENT_SELE'+'CTSTART','selectstar'+'t'),h(Li,'EVENT_SELE'+'CTEND','selectend'),h(Li,'EVENT_SQUE'+'EZE','squeeze'),h(Li,'EVENT_SQUE'+'EZESTART','squeezesta'+'rt'),h(Li,'EVENT_SQUE'+'EZEEND','squeezeend');const Ja=new D(),IS=new D(),Lf=new te(),LS=new te();class Zu extends me{constructor(_0x2d982f){super(),h(this,'_manager'),h(this,'_supported',!(-0x713+0x15*0x1ce+-0x20e*0xf)),h(this,'_available',!(-0x26f8+-0xbed+0x32e6)),h(this,'_lightProb'+'eRequested',!(-0x22fe+-0x2c3*-0x3+-0x107*-0x1a)),h(this,'_lightProb'+'e',null),h(this,'_intensity',-0x1412+-0xdb4+0xb42*0x3),h(this,'_rotation',new le()),h(this,'_color',new ie()),h(this,'_spherical'+'Harmonics',new Float32Array(-0x7de+0x40e+0x11*0x3b)),(this['_manager']=_0x2d982f,this['_manager']['on']('start',this['_onSession'+'Start'],this),this['_manager']['on']('end',this['_onSession'+'End'],this));}['_onSession'+'Start'](){this['_manager']['session']['requestLig'+'htProbe']&&(this['_supported']=!(-0x3*0xcd7+-0xd24*-0x1+0x49*0x59));}['_onSession'+'End'](){this['_supported']=!(0x4b2*0x2+-0x241a+0x1ab7),this['_available']=!(0x76d+-0xc33+0x1*0x4c7),this['_lightProb'+'eRequested']=!(-0x5e7+0xa6*0x3+0x3f6),this['_lightProb'+'e']=null;}['start'](){let _0x327b03;if(this['_manager']['session']||(_0x327b03=new Error('XR\x20session'+'\x20is\x20not\x20ru'+'nning')),!_0x327b03&&this['_manager']['type']!==$o&&(_0x327b03=new Error('XR\x20session'+'\x20type\x20is\x20n'+'ot\x20AR')),!_0x327b03&&!this['_supported']&&(_0x327b03=new Error('light-esti'+'mation\x20is\x20'+'not\x20suppor'+'ted')),(!_0x327b03&&this['_lightProb'+'e']||this['_lightProb'+'eRequested'])&&(_0x327b03=new Error('light\x20esti'+'mation\x20is\x20'+'already\x20re'+'quested')),_0x327b03){this['fire']('error',_0x327b03);return;}this['_lightProb'+'eRequested']=!(-0x1d34+0x218d+-0x459),this['_manager']['session']['requestLig'+'htProbe']()['then'](_0x3b292a=>{const _0x192eff=this['_lightProb'+'eRequested'];this['_lightProb'+'eRequested']=!(0x121e+0x3a+0x5*-0x3ab),this['_manager']['active']?_0x192eff&&(this['_lightProb'+'e']=_0x3b292a):this['fire']('error',new Error('XR\x20session'+'\x20is\x20not\x20ac'+'tive'));})['catch'](_0x56f00c=>{this['_lightProb'+'eRequested']=!(0x3b*-0x2e+-0x110e*-0x2+-0x1781*0x1),this['fire']('error',_0x56f00c);});}['end'](){this['_lightProb'+'eRequested']=!(-0x43a*-0x1+-0x1fdc+-0x5*-0x587),this['_lightProb'+'e']=null,this['_available']=!(-0x14*-0xd5+0x1a69+-0x2b0c);}['update'](_0x8dd1be){if(!this['_lightProb'+'e'])return;const _0x11c338=_0x8dd1be['getLightEs'+'timate'](this['_lightProb'+'e']);if(!_0x11c338)return;this['_available']||(this['_available']=!(0x1a71*-0x1+0x3d*0x28+0x10e9),this['fire']('available'));const _0x44d4fc=_0x11c338['primaryLig'+'htIntensit'+'y'];this['_intensity']=Math['max'](-0x1*-0xbfb+0xf63+-0x1b5d,Math['max'](_0x44d4fc['x'],Math['max'](_0x44d4fc['y'],_0x44d4fc['z']))),Ja['copy'](_0x44d4fc)['mulScalar']((-0x1fa5+0x5*-0xc2+0x2370)/this['_intensity']),this['_color']['set'](Ja['x'],Ja['y'],Ja['z']),Ja['set'](0xc66+0x2*-0x50d+0x2*-0x126,0x1778+-0x2349+0x79*0x19,0xd3b+0x2401*0x1+0x112*-0x2e),IS['copy'](_0x11c338['primaryLig'+'htDirectio'+'n']),Lf['setLookAt'](IS,Ja,D['UP']),LS['setFromAxi'+'sAngle'](D['RIGHT'],0xe*-0x272+-0xec7+0x315d),Lf['mul'](LS),this['_rotation']['setFromMat'+'4'](Lf),this['_spherical'+'Harmonics']['set'](_0x11c338['sphericalH'+'armonicsCo'+'efficients']);}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}get['intensity'](){return this['_available']?this['_intensity']:null;}get['color'](){return this['_available']?this['_color']:null;}get['rotation'](){return this['_available']?this['_rotation']:null;}get['sphericalH'+'armonics'](){return this['_available']?this['_spherical'+'Harmonics']:null;}}h(Zu,'EVENT_AVAI'+'LABLE','available'),h(Zu,'EVENT_ERRO'+'R','error');let mU=-0x437*0x1+-0x10f7*0x2+0x2625*0x1;class Qu extends me{constructor(_0x11c9e1,_0x494a5e){super(),h(this,'_id'),h(this,'_planeDete'+'ction'),h(this,'_xrPlane'),h(this,'_lastChang'+'edTime'),h(this,'_orientati'+'on'),h(this,'_position',new D()),h(this,'_rotation',new le()),(this['_id']=++mU,this['_planeDete'+'ction']=_0x11c9e1,this['_xrPlane']=_0x494a5e,this['_lastChang'+'edTime']=_0x494a5e['lastChange'+'dTime'],this['_orientati'+'on']=_0x494a5e['orientatio'+'n']);}['destroy'](){this['_xrPlane']&&(this['_xrPlane']=null,this['fire']('remove'));}['update'](_0x2ffb5f){const _0x1d8ebb=this['_planeDete'+'ction']['_manager'],_0x3fc488=_0x2ffb5f['getPose'](this['_xrPlane']['planeSpace'],_0x1d8ebb['_reference'+'Space']);_0x3fc488&&(this['_position']['copy'](_0x3fc488['transform']['position']),this['_rotation']['copy'](_0x3fc488['transform']['orientatio'+'n'])),this['_lastChang'+'edTime']!==this['_xrPlane']['lastChange'+'dTime']&&(this['_lastChang'+'edTime']=this['_xrPlane']['lastChange'+'dTime'],this['fire']('change'));}['getPositio'+'n'](){return this['_position'];}['getRotatio'+'n'](){return this['_rotation'];}get['id'](){return this['_id'];}get['orientatio'+'n'](){return this['_orientati'+'on'];}get['points'](){return this['_xrPlane']['polygon'];}get['label'](){return this['_xrPlane']['semanticLa'+'bel']||'';}}h(Qu,'EVENT_REMO'+'VE','remove'),h(Qu,'EVENT_CHAN'+'GE','change');class Do extends me{constructor(_0xf5a4c8){super(),h(this,'_manager'),h(this,'_supported',Ae['browser']&&!!window['XRPlane']),h(this,'_available',!(-0xac*-0x20+-0x1582*-0x1+-0x2b01)),h(this,'_planesInd'+'ex',new Map()),h(this,'_planes',[]),(this['_manager']=_0xf5a4c8,this['_supported']&&(this['_manager']['on']('start',this['_onSession'+'Start'],this),this['_manager']['on']('end',this['_onSession'+'End'],this)));}['_onSession'+'Start'](){this['_manager']['session']['enabledFea'+'tures']&&this['_manager']['session']['enabledFea'+'tures']['indexOf']('plane-dete'+'ction')!==-(-0x1a64*-0x1+-0xe*0x1ab+-0x309)&&(this['_available']=!(-0x1f0f+0x1f78+-0x69),this['fire']('available'));}['_onSession'+'End'](){for(let _0x45b009=0x501*0x1+0x7fc*0x4+-0xc1*0x31;_0x45b009<this['_planes']['length'];_0x45b009++)this['_planes'][_0x45b009]['destroy'](),this['fire']('remove',this['_planes'][_0x45b009]);this['_planesInd'+'ex']['clear'](),this['_planes']['length']=0x1b1f+-0x2138+0x619,this['_available']&&(this['_available']=!(0x199*-0xb+-0x19c8+-0x6*-0x73a),this['fire']('unavailabl'+'e'));}['update'](_0x4b19b5){if(!this['_available']){if(!this['_manager']['session']['enabledFea'+'tures']&&_0x4b19b5['detectedPl'+'anes']['size'])this['_available']=!(-0x94d+-0xc0b*-0x2+-0x5*0x2f5),this['fire']('available');else return;}const _0x2eac3f=_0x4b19b5['detectedPl'+'anes'];for(const [_0x10474c,_0x3d02ea]of this['_planesInd'+'ex'])_0x2eac3f['has'](_0x10474c)||(this['_planesInd'+'ex']['delete'](_0x10474c),this['_planes']['splice'](this['_planes']['indexOf'](_0x3d02ea),-0x764+-0xeec+-0x1*-0x1651),_0x3d02ea['destroy'](),this['fire']('remove',_0x3d02ea));for(const _0x1d7327 of _0x2eac3f){let _0x3cc56d=this['_planesInd'+'ex']['get'](_0x1d7327);_0x3cc56d?_0x3cc56d['update'](_0x4b19b5):(_0x3cc56d=new Qu(this,_0x1d7327),this['_planesInd'+'ex']['set'](_0x1d7327,_0x3cc56d),this['_planes']['push'](_0x3cc56d),_0x3cc56d['update'](_0x4b19b5),this['fire']('add',_0x3cc56d));}}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}get['planes'](){return this['_planes'];}}h(Do,'EVENT_AVAI'+'LABLE','available'),h(Do,'EVENT_UNAV'+'AILABLE','unavailabl'+'e'),h(Do,'EVENT_ADD','add'),h(Do,'EVENT_REMO'+'VE','remove');class Io extends me{constructor(_0x2e4a5f,_0x44c268,_0x13c9e6=null){super(),h(this,'_position',new D()),h(this,'_rotation',new le()),h(this,'_uuid',null),h(this,'_uuidReque'+'sts',null),(this['_anchors']=_0x2e4a5f,this['_xrAnchor']=_0x44c268,this['_uuid']=_0x13c9e6);}['destroy'](){if(!this['_xrAnchor'])return;const _0x2ecbc3=this['_xrAnchor'];this['_xrAnchor']['delete'](),this['_xrAnchor']=null,this['fire']('destroy',_0x2ecbc3,this);}['update'](_0x3da631){if(!this['_xrAnchor'])return;const _0x261392=_0x3da631['getPose'](this['_xrAnchor']['anchorSpac'+'e'],this['_anchors']['manager']['_reference'+'Space']);if(_0x261392){if(this['_position']['equals'](_0x261392['transform']['position'])&&this['_rotation']['equals'](_0x261392['transform']['orientatio'+'n']))return;this['_position']['copy'](_0x261392['transform']['position']),this['_rotation']['copy'](_0x261392['transform']['orientatio'+'n']),this['fire']('change');}}['getPositio'+'n'](){return this['_position'];}['getRotatio'+'n'](){return this['_rotation'];}['persist'](_0x5ae5a9){if(!this['_anchors']['persistenc'+'e']){_0x5ae5a9==null||_0x5ae5a9(new Error('Persistent'+'\x20Anchors\x20a'+'re\x20not\x20sup'+'ported'),null);return;}if(this['_uuid']){_0x5ae5a9==null||_0x5ae5a9(null,this['_uuid']);return;}if(this['_uuidReque'+'sts']){_0x5ae5a9&&this['_uuidReque'+'sts']['push'](_0x5ae5a9);return;}this['_uuidReque'+'sts']=[],this['_xrAnchor']['requestPer'+'sistentHan'+'dle']()['then'](_0x4b21bb=>{this['_uuid']=_0x4b21bb,this['_anchors']['_indexByUu'+'id']['set'](this['_uuid'],this),_0x5ae5a9==null||_0x5ae5a9(null,_0x4b21bb);for(const _0x36a8a1 of this['_uuidReque'+'sts'])_0x36a8a1(null,_0x4b21bb);this['_uuidReque'+'sts']=null,this['fire']('persist',_0x4b21bb);})['catch'](_0x26c4ad=>{_0x5ae5a9==null||_0x5ae5a9(_0x26c4ad,null);for(const _0x555288 of this['_uuidReque'+'sts'])_0x555288(_0x26c4ad,null);this['_uuidReque'+'sts']=null;});}['forget'](_0x41fb21){if(!this['_uuid']){_0x41fb21==null||_0x41fb21(new Error('Anchor\x20is\x20'+'not\x20persis'+'tent'));return;}this['_anchors']['forget'](this['_uuid'],_0x152365=>{this['_uuid']=null,_0x41fb21==null||_0x41fb21(_0x152365),this['fire']('forget');});}get['uuid'](){return this['_uuid'];}get['persistent'](){return!!this['_uuid'];}}h(Io,'EVENT_DEST'+'ROY','destroy'),h(Io,'EVENT_CHAN'+'GE','change'),h(Io,'EVENT_PERS'+'IST','persist'),h(Io,'EVENT_FORG'+'ET','forget');var VS;class on extends me{constructor(_0x39daf7){super(),h(this,'manager'),h(this,'_supported',Ae['browser']&&!!window['XRAnchor']),h(this,'_available',!(0x1f11+-0x1b0b+-0x3*0x157)),h(this,'_checkingA'+'vailabilit'+'y',!(-0x2521+-0x1*0x1736+-0x3c58*-0x1)),h(this,'_persisten'+'ce',Ae['browser']&&!!((VS=window==null?void(0x50d*-0x4+-0x2137+0x356b):window['XRSession'])!=null&&VS['prototype']['restorePer'+'sistentAnc'+'hor'])),h(this,'_creationQ'+'ueue',[]),h(this,'_index',new Map()),h(this,'_indexByUu'+'id',new Map()),h(this,'_list',[]),h(this,'_callbacks'+'Anchors',new Map()),(this['manager']=_0x39daf7,this['_supported']&&(this['manager']['on']('start',this['_onSession'+'Start'],this),this['manager']['on']('end',this['_onSession'+'End'],this)));}['_onSession'+'Start'](){var _0x4e2880;const _0x20f4e5=((_0x4e2880=this['manager']['session']['enabledFea'+'tures'])==null?void(-0x1d5c*0x1+-0xcd*0x23+0x3*0x1321):_0x4e2880['indexOf']('anchors'))>=-0xdeb+-0x1219*0x1+0x2004;_0x20f4e5&&(this['_available']=_0x20f4e5,this['fire']('available'));}['_onSession'+'End'](){if(!this['_available'])return;this['_available']=!(-0x137b+-0x7*0x449+0x35*0xef);for(let _0x5d3576=0x83*0x49+0x36d*-0xb+0x15*0x4;_0x5d3576<this['_creationQ'+'ueue']['length'];_0x5d3576++)this['_creationQ'+'ueue'][_0x5d3576]['callback']&&this['_creationQ'+'ueue'][_0x5d3576]['callback'](new Error('session\x20en'+'ded'),null);this['_creationQ'+'ueue']['length']=-0x34c+0x137d+-0x1031,this['_index']['clear'](),this['_indexByUu'+'id']['clear']();let _0x5e3075=this['_list']['length'];for(;_0x5e3075--;)this['_list'][_0x5e3075]['destroy']();this['_list']['length']=-0x1*-0xe05+-0xbe9+-0x1e*0x12,this['fire']('unavailabl'+'e');}['_createAnc'+'hor'](_0xe844d,_0x5b98a5=null){const _0x1ba701=new Io(this,_0xe844d,_0x5b98a5);return this['_index']['set'](_0xe844d,_0x1ba701),_0x5b98a5&&this['_indexByUu'+'id']['set'](_0x5b98a5,_0x1ba701),this['_list']['push'](_0x1ba701),_0x1ba701['once']('destroy',this['_onAnchorD'+'estroy'],this),_0x1ba701;}['_onAnchorD'+'estroy'](_0x584631,_0x57b924){this['_index']['delete'](_0x584631),_0x57b924['uuid']&&this['_indexByUu'+'id']['delete'](_0x57b924['uuid']);const _0x54a51d=this['_list']['indexOf'](_0x57b924);_0x54a51d!==-(-0x1db7+-0x22*0x5f+-0x1*-0x2a56)&&this['_list']['splice'](_0x54a51d,-0x1f0*0x12+0xc79+0x2*0xb34),this['fire']('destroy',_0x57b924);}['create'](_0x146f2d,_0x259044,_0x57cae7){if(!this['_available']){_0x57cae7==null||_0x57cae7(new Error('Anchors\x20AP'+'I\x20is\x20not\x20a'+'vailable'),null);return;}if(window['XRHitTestR'+'esult']&&_0x146f2d instanceof XRHitTestResult){const _0x3e97a0=_0x146f2d;if(_0x57cae7=_0x259044,!this['_supported']){_0x57cae7==null||_0x57cae7(new Error('Anchors\x20AP'+'I\x20is\x20not\x20s'+'upported'),null);return;}if(!_0x3e97a0['createAnch'+'or']){_0x57cae7==null||_0x57cae7(new Error('Creating\x20A'+'nchor\x20from'+'\x20Hit\x20Test\x20'+'is\x20not\x20sup'+'ported'),null);return;}_0x3e97a0['createAnch'+'or']()['then'](_0x4fce2c=>{const _0x496c10=this['_createAnc'+'hor'](_0x4fce2c);_0x57cae7==null||_0x57cae7(null,_0x496c10),this['fire']('add',_0x496c10);})['catch'](_0x263e2a=>{_0x57cae7==null||_0x57cae7(_0x263e2a,null),this['fire']('error',_0x263e2a);});}else this['_creationQ'+'ueue']['push']({'transform':new XRRigidTransform(_0x146f2d,_0x259044),'callback':_0x57cae7});}['restore'](_0x5af184,_0x52ab2b){if(!this['_available']){_0x52ab2b==null||_0x52ab2b(new Error('Anchors\x20AP'+'I\x20is\x20not\x20a'+'vailable'),null);return;}if(!this['_persisten'+'ce']){_0x52ab2b==null||_0x52ab2b(new Error('Anchor\x20Per'+'sistence\x20i'+'s\x20not\x20supp'+'orted'),null);return;}if(!this['manager']['active']){_0x52ab2b==null||_0x52ab2b(new Error('WebXR\x20sess'+'ion\x20is\x20not'+'\x20active'),null);return;}this['manager']['session']['restorePer'+'sistentAnc'+'hor'](_0x5af184)['then'](_0x13ae03=>{const _0x19c541=this['_createAnc'+'hor'](_0x13ae03,_0x5af184);_0x52ab2b==null||_0x52ab2b(null,_0x19c541),this['fire']('add',_0x19c541);})['catch'](_0x65c7ed=>{_0x52ab2b==null||_0x52ab2b(_0x65c7ed,null),this['fire']('error',_0x65c7ed);});}['forget'](_0x2b40ad,_0x4fb382){if(!this['_available']){_0x4fb382==null||_0x4fb382(new Error('Anchors\x20AP'+'I\x20is\x20not\x20a'+'vailable'));return;}if(!this['_persisten'+'ce']){_0x4fb382==null||_0x4fb382(new Error('Anchor\x20Per'+'sistence\x20i'+'s\x20not\x20supp'+'orted'));return;}if(!this['manager']['active']){_0x4fb382==null||_0x4fb382(new Error('WebXR\x20sess'+'ion\x20is\x20not'+'\x20active'));return;}this['manager']['session']['deletePers'+'istentAnch'+'or'](_0x2b40ad)['then'](()=>{_0x4fb382==null||_0x4fb382(null);})['catch'](_0x222817=>{_0x4fb382==null||_0x4fb382(_0x222817),this['fire']('error',_0x222817);});}['update'](_0x27240a){if(!this['_available']){!this['manager']['session']['enabledFea'+'tures']&&!this['_checkingA'+'vailabilit'+'y']&&(this['_checkingA'+'vailabilit'+'y']=!(-0xa98+-0x5fc*0x2+0x1690),_0x27240a['createAnch'+'or'](new XRRigidTransform(),this['manager']['_reference'+'Space'])['then'](_0x142757=>{_0x142757['delete'](),this['manager']['active']&&(this['_available']=!(0x1936*0x1+-0x2f*0x34+0x7d5*-0x2),this['fire']('available'));})['catch'](()=>{}));return;}if(this['_creationQ'+'ueue']['length']){for(let _0x1471fa=-0x1565+0x1*0x7b+-0x2*-0xa75;_0x1471fa<this['_creationQ'+'ueue']['length'];_0x1471fa++){const _0x51d01b=this['_creationQ'+'ueue'][_0x1471fa];_0x27240a['createAnch'+'or'](_0x51d01b['transform'],this['manager']['_reference'+'Space'])['then'](_0x47c54b=>{_0x51d01b['callback']&&this['_callbacks'+'Anchors']['set'](_0x47c54b,_0x51d01b['callback']);})['catch'](_0x5ca440=>{_0x51d01b['callback']&&_0x51d01b['callback'](_0x5ca440,null),this['fire']('error',_0x5ca440);});}this['_creationQ'+'ueue']['length']=-0x20*0x100+0xee3+0x111d;}for(const [_0x48b79d,_0x2bfcb8]of this['_index'])_0x27240a['trackedAnc'+'hors']['has'](_0x48b79d)||(this['_index']['delete'](_0x48b79d),_0x2bfcb8['destroy']());for(let _0xb3e006=0x10c6+0x1*-0x704+-0x9c2*0x1;_0xb3e006<this['_list']['length'];_0xb3e006++)this['_list'][_0xb3e006]['update'](_0x27240a);for(const _0x134389 of _0x27240a['trackedAnc'+'hors']){if(this['_index']['has'](_0x134389))continue;try{const _0x251d2c=_0x134389['anchorSpac'+'e'];}catch{continue;}const _0x273dea=this['_createAnc'+'hor'](_0x134389);_0x273dea['update'](_0x27240a);const _0x19aeb3=this['_callbacks'+'Anchors']['get'](_0x134389);_0x19aeb3&&(this['_callbacks'+'Anchors']['delete'](_0x134389),_0x19aeb3(null,_0x273dea)),this['fire']('add',_0x273dea);}}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}get['persistenc'+'e'](){return this['_persisten'+'ce'];}get['uuids'](){return!this['_available']||!this['_persisten'+'ce']||!this['manager']['active']?null:this['manager']['session']['persistent'+'Anchors'];}get['list'](){return this['_list'];}}h(on,'EVENT_AVAI'+'LABLE','available'),h(on,'EVENT_UNAV'+'AILABLE','unavailabl'+'e'),h(on,'EVENT_ERRO'+'R','error'),h(on,'EVENT_ADD','add'),h(on,'EVENT_DEST'+'ROY','destroy');class Ju extends me{constructor(_0x40795e,_0x323b42){super(),h(this,'_meshDetec'+'tion'),h(this,'_xrMesh'),h(this,'_lastChang'+'ed',-0x125*0x4+-0x107d+0x1*0x1511),h(this,'_position',new D()),h(this,'_rotation',new le()),(this['_meshDetec'+'tion']=_0x40795e,this['_xrMesh']=_0x323b42,this['_lastChang'+'ed']=this['_xrMesh']['lastChange'+'dTime']);}get['xrMesh'](){return this['_xrMesh'];}get['label'](){return this['_xrMesh']['semanticLa'+'bel']||'';}get['vertices'](){return this['_xrMesh']['vertices'];}get['indices'](){return this['_xrMesh']['indices'];}['destroy'](){this['_xrMesh']&&(this['_xrMesh']=null,this['fire']('remove'));}['update'](_0x338b7b){const _0x46f2c3=this['_meshDetec'+'tion']['_manager'],_0x51575d=_0x338b7b['getPose'](this['_xrMesh']['meshSpace'],_0x46f2c3['_reference'+'Space']);_0x51575d&&(this['_position']['copy'](_0x51575d['transform']['position']),this['_rotation']['copy'](_0x51575d['transform']['orientatio'+'n'])),this['_lastChang'+'ed']!==this['_xrMesh']['lastChange'+'dTime']&&(this['_lastChang'+'ed']=this['_xrMesh']['lastChange'+'dTime'],this['fire']('change'));}['getPositio'+'n'](){return this['_position'];}['getRotatio'+'n'](){return this['_rotation'];}}h(Ju,'EVENT_REMO'+'VE','remove'),h(Ju,'EVENT_CHAN'+'GE','change');class Lo extends me{constructor(_0x593757){super(),h(this,'_manager'),h(this,'_supported',Ae['browser']&&!!window['XRMesh']),h(this,'_available',!(0x1005+-0x2083*0x1+-0x67*-0x29)),h(this,'_index',new Map()),h(this,'_list',[]),(this['_manager']=_0x593757,this['_supported']&&(this['_manager']['on']('start',this['_onSession'+'Start'],this),this['_manager']['on']('end',this['_onSession'+'End'],this)));}['update'](_0x21bf55){if(!this['_available']){if(!this['_manager']['session']['enabledFea'+'tures']&&_0x21bf55['detectedMe'+'shes']['size'])this['_available']=!(0xd88+0xddd+0x1*-0x1b65),this['fire']('available');else return;}for(const _0x12035f of _0x21bf55['detectedMe'+'shes']){let _0xd18068=this['_index']['get'](_0x12035f);_0xd18068?_0xd18068['update'](_0x21bf55):(_0xd18068=new Ju(this,_0x12035f),this['_index']['set'](_0x12035f,_0xd18068),this['_list']['push'](_0xd18068),_0xd18068['update'](_0x21bf55),this['fire']('add',_0xd18068));}for(const _0x340607 of this['_index']['values']())_0x21bf55['detectedMe'+'shes']['has'](_0x340607['xrMesh'])||this['_removeMes'+'h'](_0x340607);}['_removeMes'+'h'](_0x59128d){this['_index']['delete'](_0x59128d['xrMesh']),this['_list']['splice'](this['_list']['indexOf'](_0x59128d),-0x2372*0x1+-0x16f1*-0x1+-0x1*-0xc82),_0x59128d['destroy'](),this['fire']('remove',_0x59128d);}['_onSession'+'Start'](){if(this['_manager']['session']['enabledFea'+'tures']){const _0xd4ce21=this['_manager']['session']['enabledFea'+'tures']['indexOf']('mesh-detec'+'tion')!==-(-0x7f*-0x27+0x1a80+-0x2*0x16ec);if(!_0xd4ce21)return;this['_available']=_0xd4ce21,this['fire']('available');}}['_onSession'+'End'](){if(this['_available']){this['_available']=!(0x17*-0x19b+0x10d*-0x3+-0x2815*-0x1);for(const _0x212a67 of this['_index']['values']())this['_removeMes'+'h'](_0x212a67);this['fire']('unavailabl'+'e');}}get['supported'](){return this['_supported'];}get['available'](){return this['_available'];}get['meshes'](){return this['_list'];}}h(Lo,'EVENT_AVAI'+'LABLE','available'),h(Lo,'EVENT_UNAV'+'AILABLE','unavailabl'+'e'),h(Lo,'EVENT_ADD','add'),h(Lo,'EVENT_REMO'+'VE','remove');class O0 extends me{constructor(_0x2b2272,_0x4a42f2,_0x5454e9){super(),h(this,'_manager'),h(this,'_xrView'),h(this,'_positionD'+'ata',new Float32Array(-0x104+0x1af*-0x5+0x972)),h(this,'_viewport',new re()),h(this,'_projMat',new te()),h(this,'_projViewO'+'ffMat',new te()),h(this,'_viewMat',new te()),h(this,'_viewOffMa'+'t',new te()),h(this,'_viewMat3',new _i()),h(this,'_viewInvMa'+'t',new te()),h(this,'_viewInvOf'+'fMat',new te()),h(this,'_xrCamera',null),h(this,'_textureCo'+'lor',null),h(this,'_textureDe'+'pth',null),h(this,'_depthInfo',null),h(this,'_emptyDept'+'hBuffer',new Uint8Array(0x4af+-0x1*0x885+0x3f6)),h(this,'_depthMatr'+'ix',new te()),(this['_manager']=_0x2b2272,this['_xrView']=_0x4a42f2);const _0x347257=this['_manager']['app']['graphicsDe'+'vice'];if(this['_manager']['views']['supportedC'+'olor']&&(this['_xrCamera']=this['_xrView']['camera'],this['_manager']['views']['availableC'+'olor']&&this['_xrCamera']&&(this['_textureCo'+'lor']=new _e(_0x347257,{'format':Cr,'mipmaps':!(0x787+-0x114*-0x8+-0x1026),'addressU':ue,'addressV':ue,'minFilter':vt,'magFilter':vt,'width':this['_xrCamera']['width'],'height':this['_xrCamera']['height'],'name':'XrView-'+this['_xrView']['eye']+'-Color'}))),this['_manager']['views']['supportedD'+'epth']&&this['_manager']['views']['availableD'+'epth']){const _0x1dfeb2=this['_manager']['views']['depthGpuOp'+'timized']?Te:vt;this['_textureDe'+'pth']=new _e(_0x347257,{'format':this['_manager']['views']['depthPixel'+'Format'],'arrayLength':_0x5454e9===0xb*-0x2cf+-0x6bc*0x5+-0x44e*-0xf?0x76d*-0x3+0x33a*-0x1+0x1981:_0x5454e9,'mipmaps':!(-0xb41+-0x3*-0x3cb+-0x1*0x1f),'addressU':ue,'addressV':ue,'minFilter':_0x1dfeb2,'magFilter':_0x1dfeb2,'width':0x4,'height':0x4,'name':'XrView-'+this['_xrView']['eye']+'-Depth'});for(let _0x3cb860=-0x2*0x17e+0x1988+0xd*-0x1bc;_0x3cb860<this['_textureDe'+'pth']['_levels']['length'];_0x3cb860++)this['_textureDe'+'pth']['_levels'][_0x3cb860]=this['_emptyDept'+'hBuffer'];this['_textureDe'+'pth']['upload']();}(this['_textureCo'+'lor']||this['_textureDe'+'pth'])&&_0x347257['on']('devicelost',this['_onDeviceL'+'ost'],this);}get['textureCol'+'or'](){return this['_textureCo'+'lor'];}get['textureDep'+'th'](){return this['_textureDe'+'pth'];}get['depthUvMat'+'rix'](){return this['_depthMatr'+'ix'];}get['depthValue'+'ToMeters'](){var _0xfae69c;return((_0xfae69c=this['_depthInfo'])==null?void(0x1503*-0x1+0x2*0x79f+0x5c5):_0xfae69c['rawValueTo'+'Meters'])||0x1*0xb19+0x2ed+-0xe06;}get['eye'](){return this['_xrView']['eye'];}get['viewport'](){return this['_viewport'];}get['projMat'](){return this['_projMat'];}get['projViewOf'+'fMat'](){return this['_projViewO'+'ffMat'];}get['viewOffMat'](){return this['_viewOffMa'+'t'];}get['viewInvOff'+'Mat'](){return this['_viewInvOf'+'fMat'];}get['viewMat3'](){return this['_viewMat3'];}get['positionDa'+'ta'](){return this['_positionD'+'ata'];}['update'](_0x58888e,_0x6bf136){this['_xrView']=_0x6bf136,this['_manager']['views']['availableC'+'olor']&&(this['_xrCamera']=this['_xrView']['camera']);const _0x48e3bd=_0x58888e['session']['renderStat'+'e']['baseLayer']['getViewpor'+'t'](this['_xrView']);this['_viewport']['x']=_0x48e3bd['x'],this['_viewport']['y']=_0x48e3bd['y'],this['_viewport']['z']=_0x48e3bd['width'],this['_viewport']['w']=_0x48e3bd['height'],this['_projMat']['set'](this['_xrView']['projection'+'Matrix']),this['_viewMat']['set'](this['_xrView']['transform']['inverse']['matrix']),this['_viewInvMa'+'t']['set'](this['_xrView']['transform']['matrix']),this['_updateTex'+'tureColor'](),this['_updateDep'+'th'](_0x58888e);}['_updateTex'+'tureColor'](){if(!this['_manager']['views']['availableC'+'olor']||!this['_xrCamera']||!this['_textureCo'+'lor'])return;const _0x401c97=this['_manager']['webglBindi'+'ng'];if(!_0x401c97)return;const _0x5ad8cf=_0x401c97['getCameraI'+'mage'](this['_xrCamera']);if(!_0x5ad8cf)return;const _0x3ebe71=this['_manager']['app']['graphicsDe'+'vice'],_0x2169c0=_0x3ebe71['gl'];if(!this['_frameBuff'+'erSource'])this['_frameBuff'+'erSource']=_0x2169c0['createFram'+'ebuffer'](),this['_frameBuff'+'er']=_0x2169c0['createFram'+'ebuffer']();else{const _0x34f0b5=_0x2169c0['COLOR_ATTA'+'CHMENT0'],_0x57ec03=this['_xrCamera']['width'],_0x16049d=this['_xrCamera']['height'];_0x3ebe71['setFramebu'+'ffer'](this['_frameBuff'+'erSource']),_0x2169c0['framebuffe'+'rTexture2D'](_0x2169c0['FRAMEBUFFE'+'R'],_0x34f0b5,_0x2169c0['TEXTURE_2D'],_0x5ad8cf,0x2*-0x350+0xa1e+-0x37e),_0x3ebe71['setFramebu'+'ffer'](this['_frameBuff'+'er']),_0x2169c0['framebuffe'+'rTexture2D'](_0x2169c0['FRAMEBUFFE'+'R'],_0x34f0b5,_0x2169c0['TEXTURE_2D'],this['_textureCo'+'lor']['impl']['_glTexture'],-0x16*-0x14c+0x252b+-0x79*0x8b),_0x2169c0['bindFrameb'+'uffer'](_0x2169c0['READ_FRAME'+'BUFFER'],this['_frameBuff'+'erSource']),_0x2169c0['bindFrameb'+'uffer'](_0x2169c0['DRAW_FRAME'+'BUFFER'],this['_frameBuff'+'er']),_0x2169c0['blitFrameb'+'uffer'](-0x1dce+-0xb0f+0x21*0x13d,_0x16049d,_0x57ec03,-0xb29+-0x2b7*-0x6+-0x1*0x521,0x40f*0x2+0x112d+-0x194b,0x393+-0xfc2+0xc2f,_0x57ec03,_0x16049d,_0x2169c0['COLOR_BUFF'+'ER_BIT'],_0x2169c0['NEAREST']);}}['_updateDep'+'th'](_0x11cf1b){var _0x40806a,_0x13f761;if(!this['_manager']['views']['availableD'+'epth']||!this['_textureDe'+'pth'])return;const _0x58a307=this['_manager']['views']['depthGpuOp'+'timized'],_0x598885=_0x58a307?this['_manager']['webglBindi'+'ng']:_0x11cf1b;if(!_0x598885){this['_depthInfo']=null;return;}const _0x2282a1=_0x598885['getDepthIn'+'formation'](this['_xrView']);if(!_0x2282a1){this['_depthInfo']=null;return;}let _0x765b4a=!this['_depthInfo']!=!_0x2282a1;this['_depthInfo']=_0x2282a1;const _0x23d921=((_0x40806a=this['_depthInfo'])==null?void(0x1924+0xaca+-0x2a*0xdb):_0x40806a['width'])||0x23d2+-0xf5c+-0x1472,_0x24ee0c=((_0x13f761=this['_depthInfo'])==null?void(-0x8ad*0x4+0x794*-0x2+0x31dc):_0x13f761['height'])||-0x1*0x63+0x1c1c+0xad*-0x29;let _0x3b1110=!(0x542+0x30f+-0x850);if((this['_textureDe'+'pth']['width']!==_0x23d921||this['_textureDe'+'pth']['height']!==_0x24ee0c)&&(this['_textureDe'+'pth']['_width']=_0x23d921,this['_textureDe'+'pth']['_height']=_0x24ee0c,_0x765b4a=!(0x1039+-0x1*-0x22d7+-0x3310),_0x3b1110=!(0x975+-0x2*-0x21a+-0xda9)),_0x765b4a&&(this['_depthInfo']?this['_depthMatr'+'ix']['data']['set'](this['_depthInfo']['normDepthB'+'ufferFromN'+'ormView']['matrix']):this['_depthMatr'+'ix']['setIdentit'+'y']()),this['_depthInfo']){if(_0x58a307){if(this['_depthInfo']['texture']){const _0x5e1ca3=this['_manager']['app']['graphicsDe'+'vice']['gl'];switch(this['_textureDe'+'pth']['impl']['_glTexture']=this['_depthInfo']['texture'],this['_depthInfo']['textureTyp'+'e']==='texture-ar'+'ray'?this['_textureDe'+'pth']['impl']['_glTarget']=_0x5e1ca3['TEXTURE_2D'+'_ARRAY']:this['_textureDe'+'pth']['impl']['_glTarget']=_0x5e1ca3['TEXTURE_2D'],this['_manager']['views']['depthPixel'+'Format']){case Ji:this['_textureDe'+'pth']['impl']['_glInterna'+'lFormat']=_0x5e1ca3['R32F'],this['_textureDe'+'pth']['impl']['_glPixelTy'+'pe']=_0x5e1ca3['FLOAT'],this['_textureDe'+'pth']['impl']['_glFormat']=_0x5e1ca3['RED'];break;case $i:this['_textureDe'+'pth']['impl']['_glInterna'+'lFormat']=_0x5e1ca3['DEPTH_COMP'+'ONENT16'],this['_textureDe'+'pth']['impl']['_glPixelTy'+'pe']=_0x5e1ca3['UNSIGNED_S'+'HORT'],this['_textureDe'+'pth']['impl']['_glFormat']=_0x5e1ca3['DEPTH_COMP'+'ONENT'];break;}this['_textureDe'+'pth']['impl']['_glCreated']=!(0x1561*-0x1+-0x1b7a+0x30db);}}else this['_textureDe'+'pth']['_levels'][-0x239e+0x5*0x15+-0x2335*-0x1]=new Uint8Array(this['_depthInfo']['data']),this['_textureDe'+'pth']['upload']();}else this['_textureDe'+'pth']['_levels'][-0xb*-0x218+0xfb0+-0x26b8]=this['_emptyDept'+'hBuffer'],this['_textureDe'+'pth']['upload']();_0x3b1110&&this['fire']('depth:resi'+'ze',_0x23d921,_0x24ee0c);}['updateTran'+'sforms'](_0x5a0d72){_0x5a0d72?(this['_viewInvOf'+'fMat']['mul2'](_0x5a0d72,this['_viewInvMa'+'t']),this['viewOffMat']['copy'](this['_viewInvOf'+'fMat'])['invert']()):(this['_viewInvOf'+'fMat']['copy'](this['_viewInvMa'+'t']),this['viewOffMat']['copy'](this['_viewMat'])),this['_viewMat3']['setFromMat'+'4'](this['_viewOffMa'+'t']),this['_projViewO'+'ffMat']['mul2'](this['_projMat'],this['_viewOffMa'+'t']),this['_positionD'+'ata'][0x1*-0x644+0x1*-0x2570+0x2bb4]=this['_viewInvOf'+'fMat']['data'][0x38*0xa3+-0x1c2+0xe*-0x26b],this['_positionD'+'ata'][0x1*-0x1212+-0x1223+0x2436]=this['_viewInvOf'+'fMat']['data'][-0x2*-0x102e+0x1*0xe67+-0x2eb6],this['_positionD'+'ata'][0x19e5+-0x24a*0x9+-0x549]=this['_viewInvOf'+'fMat']['data'][0xe78+-0x30a*0xc+-0x3*-0x75a];}['_onDeviceL'+'ost'](){this['_frameBuff'+'erSource']=null,this['_frameBuff'+'er']=null,this['_depthInfo']=null;}['getDepth'](_0x1872c5,_0x123d49){var _0x53cc67;return this['_manager']['views']['depthGpuOp'+'timized']?null:((_0x53cc67=this['_depthInfo'])==null?void(-0x100f*-0x2+0x1525+-0x9*0x5eb):_0x53cc67['getDepthIn'+'Meters'](_0x1872c5,_0x123d49))??null;}['destroy'](){if(this['_depthInfo']=null,this['_textureCo'+'lor']&&(this['_textureCo'+'lor']['destroy'](),this['_textureCo'+'lor']=null),this['_textureDe'+'pth']&&(this['_textureDe'+'pth']['destroy'](),this['_textureDe'+'pth']=null),this['_frameBuff'+'erSource']){const _0x8402b6=this['_manager']['app']['graphicsDe'+'vice']['gl'];_0x8402b6['deleteFram'+'ebuffer'](this['_frameBuff'+'erSource']),this['_frameBuff'+'erSource']=null,_0x8402b6['deleteFram'+'ebuffer'](this['_frameBuff'+'er']),this['_frameBuff'+'er']=null;}}}h(O0,'EVENT_DEPT'+'HRESIZE','depth:resi'+'ze');class Bh extends me{constructor(_0x2ed504){super(),h(this,'_manager'),h(this,'_index',new Map()),h(this,'_indexTmp',new Map()),h(this,'_list',[]),h(this,'_supported'+'Color',Ae['browser']&&!!window['XRCamera']&&!!window['XRWebGLBin'+'ding']),h(this,'_supported'+'Depth',Ae['browser']&&!!window['XRDepthInf'+'ormation']),h(this,'_available'+'Color',!(-0x9c9+-0x6d*-0x2b+-0x885)),h(this,'_available'+'Depth',!(-0x7f4+0x2d1*-0x3+0x1068)),h(this,'_depthUsag'+'e',''),h(this,'_depthForm'+'at',''),h(this,'_depthForm'+'ats',{[M0]:ap,[D0]:$i,[I0]:Ji}),(this['_manager']=_0x2ed504,this['_manager']['on']('start',this['_onSession'+'Start'],this),this['_manager']['on']('end',this['_onSession'+'End'],this));}get['list'](){return this['_list'];}get['supportedC'+'olor'](){return this['_supported'+'Color'];}get['supportedD'+'epth'](){return this['_supported'+'Depth'];}get['availableC'+'olor'](){return this['_available'+'Color'];}get['availableD'+'epth'](){return this['_available'+'Depth'];}get['depthUsage'](){return this['_depthUsag'+'e'];}get['depthGpuOp'+'timized'](){return this['_depthUsag'+'e']===P0;}get['depthForma'+'t'](){return this['_depthForm'+'at'];}get['depthPixel'+'Format'](){return this['_depthForm'+'ats'][this['_depthForm'+'at']]??null;}['update'](_0x22d725,_0x5953b1){for(let _0x314479=0xda9+0x4ce+-0x1277;_0x314479<_0x5953b1['length'];_0x314479++)this['_indexTmp']['set'](_0x5953b1[_0x314479]['eye'],_0x5953b1[_0x314479]);for(const [_0x33cc6b,_0x559331]of this['_indexTmp']){let _0x1dfc65=this['_index']['get'](_0x33cc6b);_0x1dfc65?_0x1dfc65['update'](_0x22d725,_0x559331):(_0x1dfc65=new O0(this['_manager'],_0x559331,_0x5953b1['length']),this['_index']['set'](_0x33cc6b,_0x1dfc65),this['_list']['push'](_0x1dfc65),_0x1dfc65['update'](_0x22d725,_0x559331),this['fire']('add',_0x1dfc65));}for(const [_0x49cdb3,_0xcad4e3]of this['_index']){if(this['_indexTmp']['has'](_0x49cdb3))continue;_0xcad4e3['destroy'](),this['_index']['delete'](_0x49cdb3);const _0xc64067=this['_list']['indexOf'](_0xcad4e3);_0xc64067!==-(-0xe8*-0x28+0x12a4+-0x36e3)&&this['_list']['splice'](_0xc64067,0x492+-0x137*-0x1c+-0x53*0x77),this['fire']('remove',_0xcad4e3);}this['_indexTmp']['clear']();}['get'](_0xa5bcf){return this['_index']['get'](_0xa5bcf)||null;}['_onSession'+'Start'](){if(this['_manager']['type']===$o&&this['_manager']['session']['enabledFea'+'tures']&&(this['_available'+'Color']=this['_manager']['session']['enabledFea'+'tures']['indexOf']('camera-acc'+'ess')!==-(-0x4ed+-0xb3*0x3+-0x7*-0x101),this['_available'+'Depth']=this['_manager']['session']['enabledFea'+'tures']['indexOf']('depth-sens'+'ing')!==-(0x6a3*0x4+-0x1f6b+0x4e0),this['_available'+'Depth'])){const _0x39f9ac=this['_manager']['session'];this['_depthUsag'+'e']=_0x39f9ac['depthUsage'],this['_depthForm'+'at']=_0x39f9ac['depthDataF'+'ormat'];}}['_onSession'+'End'](){for(const _0x12ffbd of this['_index']['values']())_0x12ffbd['destroy']();this['_index']['clear'](),this['_available'+'Color']=!(-0x1*0x699+0x64d+-0xb*-0x7),this['_available'+'Depth']=!(-0x1*0x1013+-0x16c*-0x15+-0xc*0x126),this['_depthUsag'+'e']='',this['_depthForm'+'at']='',this['_list']['length']=-0xd0+0x1990+-0x18c0;}}h(Bh,'EVENT_ADD','add'),h(Bh,'EVENT_REMO'+'VE','remove');class ln extends me{constructor(_0x36193f){super(),h(this,'app'),h(this,'_supported',Ae['browser']&&!!navigator['xr']),h(this,'_available',{}),h(this,'_type',null),h(this,'_spaceType',null),h(this,'_session',null),h(this,'_baseLayer',null),h(this,'webglBindi'+'ng',null),h(this,'_reference'+'Space',null),h(this,'domOverlay'),h(this,'hitTest'),h(this,'imageTrack'+'ing'),h(this,'planeDetec'+'tion'),h(this,'meshDetect'+'ion'),h(this,'input'),h(this,'lightEstim'+'ation'),h(this,'views'),h(this,'anchors'),h(this,'_camera',null),h(this,'_localPosi'+'tion',new D()),h(this,'_localRota'+'tion',new le()),h(this,'_depthNear',-0x1*0x35f+-0x17e7+0x1b46+0.1),h(this,'_depthFar',-0x55d*-0x7+-0x7d1*0x1+0x2*-0xce9),h(this,'_supported'+'FrameRates',null),h(this,'_width',0x1ba8+-0x4d5*-0x4+0x2efc*-0x1),h(this,'_height',0x1*-0x2261+-0x6ca*-0x4+0x739*0x1),h(this,'_framebuff'+'erScaleFac'+'tor',0x2*-0x921+-0x3d9*-0x2+0x1*0xa91),(this['app']=_0x36193f,this['_available'][lU]=!(-0x2*0x1d+0x5*-0x7c2+-0x7*-0x593),this['_available'][cU]=!(-0xbe7+-0x1884+0x1236*0x2),this['_available'][$o]=!(-0x12db*0x2+-0xc*-0x97+-0x155*-0x17),this['views']=new Bh(this),this['domOverlay']=new fU(this),this['hitTest']=new jr(this),this['imageTrack'+'ing']=new L0(this),this['planeDetec'+'tion']=new Do(this),this['meshDetect'+'ion']=new Lo(this),this['input']=new Li(this),this['lightEstim'+'ation']=new Zu(this),this['anchors']=new on(this),this['views']=new Bh(this),this['_supported']&&(navigator['xr']['addEventLi'+'stener']('devicechan'+'ge',()=>{this['_deviceAva'+'ilabilityC'+'heck']();}),this['_deviceAva'+'ilabilityC'+'heck'](),this['app']['graphicsDe'+'vice']['on']('devicelost',this['_onDeviceL'+'ost'],this),this['app']['graphicsDe'+'vice']['on']('devicerest'+'ored',this['_onDeviceR'+'estored'],this)),this['isPC']=z0());}['destroy'](){}['start'](_0x14b242,_0x4d7cce,_0x399a58,_0x18f629){let _0x447e04=_0x18f629;if(typeof _0x18f629=='object'&&(_0x447e04=_0x18f629['callback']),!this['_available'][_0x4d7cce]){_0x447e04&&_0x447e04(new Error('XR\x20is\x20not\x20'+'available'));return;}if(this['_session']){_0x447e04&&_0x447e04(new Error('XR\x20session'+'\x20is\x20alread'+'y\x20started'));return;}this['_camera']=_0x14b242,this['_camera']['camera']['xr']=this,this['_type']=_0x4d7cce,this['_spaceType']=_0x399a58,this['_framebuff'+'erScaleFac'+'tor']=(_0x18f629==null?void(0x1900+0x20b*0xd+-0x1*0x338f):_0x18f629['framebuffe'+'rScaleFact'+'or'])??-0x25d4+-0x11*-0xe3+0x16c2,this['_setClipPl'+'anes'](_0x14b242['nearClip'],_0x14b242['farClip']);const _0x44427a={'requiredFeatures':[_0x399a58],'optionalFeatures':[]},_0x133fd9=this['app']['graphicsDe'+'vice'];_0x133fd9!=null&&_0x133fd9['isWebGPU']&&_0x44427a['requiredFe'+'atures']['push']('webgpu');const _0x1e40d7=_0x133fd9==null?void(0x2f*-0x7b+0xfe6+0x1*0x6af):_0x133fd9['isWebGL2'];if(_0x4d7cce===$o){if(_0x44427a['optionalFe'+'atures']['push']('light-esti'+'mation'),_0x44427a['optionalFe'+'atures']['push']('hit-test'),_0x18f629&&(_0x18f629['imageTrack'+'ing']&&this['imageTrack'+'ing']['supported']&&_0x44427a['optionalFe'+'atures']['push']('image-trac'+'king'),_0x18f629['planeDetec'+'tion']&&_0x44427a['optionalFe'+'atures']['push']('plane-dete'+'ction'),_0x18f629['meshDetect'+'ion']&&_0x44427a['optionalFe'+'atures']['push']('mesh-detec'+'tion')),this['domOverlay']['supported']&&this['domOverlay']['root']&&(_0x44427a['optionalFe'+'atures']['push']('dom-overla'+'y'),_0x44427a['domOverlay']={'root':this['domOverlay']['root']}),_0x18f629&&_0x18f629['anchors']&&this['anchors']['supported']&&_0x44427a['optionalFe'+'atures']['push']('anchors'),_0x18f629&&_0x18f629['depthSensi'+'ng']&&this['views']['supportedD'+'epth']){_0x44427a['optionalFe'+'atures']['push']('depth-sens'+'ing');const _0x55d9c3=[],_0x12b967=[];if(_0x55d9c3['push'](P0,dU),_0x12b967['push'](I0,M0,D0),_0x18f629['depthSensi'+'ng']['usagePrefe'+'rence']){const _0x279126=_0x55d9c3['indexOf'](_0x18f629['depthSensi'+'ng']['usagePrefe'+'rence']);_0x279126!==-(-0x22c1+0x1a5e+0x864)&&_0x55d9c3['splice'](_0x279126,-0x2*0xcec+0xef4+0xae5),_0x55d9c3['unshift'](_0x18f629['depthSensi'+'ng']['usagePrefe'+'rence']);}if(_0x18f629['depthSensi'+'ng']['dataFormat'+'Preference']){const _0x37f40d=_0x12b967['indexOf'](_0x18f629['depthSensi'+'ng']['dataFormat'+'Preference']);_0x37f40d!==-(0x74c*0x3+0x7*-0xef+-0x5*0x312)&&_0x12b967['splice'](_0x37f40d,0x1*-0x17c2+-0x577*-0x5+-0x390),_0x12b967['unshift'](_0x18f629['depthSensi'+'ng']['dataFormat'+'Preference']);}_0x44427a['depthSensi'+'ng']={'usagePreference':_0x55d9c3,'dataFormatPreference':_0x12b967};}_0x1e40d7&&_0x18f629&&_0x18f629['cameraColo'+'r']&&this['views']['supportedC'+'olor']&&_0x44427a['optionalFe'+'atures']['push']('camera-acc'+'ess');}_0x44427a['optionalFe'+'atures']['push']('hand-track'+'ing'),_0x18f629&&_0x18f629['optionalFe'+'atures']&&(_0x44427a['optionalFe'+'atures']=_0x44427a['optionalFe'+'atures']['concat'](_0x18f629['optionalFe'+'atures'])),this['imageTrack'+'ing']['supported']&&this['imageTrack'+'ing']['images']['length']?this['imageTrack'+'ing']['prepareIma'+'ges']((_0xa0190,_0x49c1a8)=>{if(_0xa0190){_0x447e04&&_0x447e04(_0xa0190),this['fire']('error',_0xa0190);return;}_0x49c1a8!==null&&(_0x44427a['trackedIma'+'ges']=_0x49c1a8),this['_onStartOp'+'tionsReady'](_0x4d7cce,_0x399a58,_0x44427a,_0x447e04);}):this['_onStartOp'+'tionsReady'](_0x4d7cce,_0x399a58,_0x44427a,_0x447e04);}['_onStartOp'+'tionsReady'](_0x25b5e4,_0x5f0c17,_0x2db212,_0x231e6a){const _0x3ea91f=this['isPC']?{'requiredFeatures':['local-floo'+'r']}:_0x2db212;navigator['xr']['requestSes'+'sion'](_0x25b5e4,_0x3ea91f)['then'](_0x1f132d=>{this['_onSession'+'Start'](_0x1f132d,_0x5f0c17,_0x231e6a);})['catch'](_0x1938c7=>{this['_camera']['camera']['xr']=null,this['_camera']=null,this['_type']=null,this['_spaceType']=null,_0x231e6a&&_0x231e6a(_0x1938c7),this['fire']('error',_0x1938c7);});}['end'](_0x4c3992){if(!this['_session']){_0x4c3992&&_0x4c3992(new Error('XR\x20Session'+'\x20is\x20not\x20in'+'itialized'));return;}this['webglBindi'+'ng']=null,_0x4c3992&&this['once']('end',_0x4c3992),this['_session']['end']();}['isAvailabl'+'e'](_0x3bf015){return this['_available'][_0x3bf015];}['_deviceAva'+'ilabilityC'+'heck'](){for(const _0x2349b1 in this['_available'])this['_sessionSu'+'pportCheck'](_0x2349b1);}['initiateRo'+'omCapture'](_0x2bc48e){if(!this['_session']){_0x2bc48e(new Error('Session\x20is'+'\x20not\x20activ'+'e'));return;}if(!this['_session']['initiateRo'+'omCapture']){_0x2bc48e(new Error('Session\x20do'+'es\x20not\x20sup'+'port\x20manua'+'l\x20room\x20cap'+'ture'));return;}this['_session']['initiateRo'+'omCapture']()['then'](()=>{_0x2bc48e&&_0x2bc48e(null);})['catch'](_0x3d0414=>{_0x2bc48e&&_0x2bc48e(_0x3d0414);});}['updateTarg'+'etFrameRat'+'e'](_0x31aeac,_0x3f28bd){var _0x177661;if(!((_0x177661=this['_session'])!=null&&_0x177661['updateTarg'+'etFrameRat'+'e'])){_0x3f28bd==null||_0x3f28bd(new Error('unable\x20to\x20'+'update\x20fra'+'meRate'));return;}this['_session']['updateTarg'+'etFrameRat'+'e'](_0x31aeac)['then'](()=>{_0x3f28bd==null||_0x3f28bd();})['catch'](_0x3c53a5=>{_0x3f28bd==null||_0x3f28bd(_0x3c53a5);});}['_sessionSu'+'pportCheck'](_0x1a1b1d){navigator['xr']['isSessionS'+'upported'](_0x1a1b1d)['then'](_0x3f1500=>{this['_available'][_0x1a1b1d]!==_0x3f1500&&(this['_available'][_0x1a1b1d]=_0x3f1500,this['fire']('available',_0x1a1b1d,_0x3f1500),this['fire']('available:'+_0x1a1b1d,_0x3f1500));})['catch'](_0x1901a1=>{this['fire']('error',_0x1901a1);});}['_onSession'+'Start'](_0x37cbf3,_0x527a30,_0x5de101){let _0x16584c=!(0x389*-0x3+-0x1bb*0x15+0x65*0x77);this['_session']=_0x37cbf3;const _0x34b01b=()=>{this['fire']('visibility'+':change',_0x37cbf3['visibility'+'State']);},_0x518895=()=>{this['_setClipPl'+'anes'](this['_camera']['nearClip'],this['_camera']['farClip']);},_0x46ef3a=()=>{this['_camera']&&(this['_camera']['off']('set_nearCl'+'ip',_0x518895),this['_camera']['off']('set_farCli'+'p',_0x518895),this['_camera']['camera']['xr']=null,this['_camera']=null),_0x37cbf3['removeEven'+'tListener']('end',_0x46ef3a),_0x37cbf3['removeEven'+'tListener']('visibility'+'change',_0x34b01b),_0x16584c||this['fire']('end'),this['_session']=null,this['_reference'+'Space']=null,this['_width']=-0x14*-0xb+0x1460+-0x153c,this['_height']=0x1ffe+0x183a*0x1+-0x707*0x8,this['_type']=null,this['_spaceType']=null,this['app']['systems']&&this['app']['tick']();};_0x37cbf3['addEventLi'+'stener']('end',_0x46ef3a),_0x37cbf3['addEventLi'+'stener']('visibility'+'change',_0x34b01b),this['_camera']['on']('set_nearCl'+'ip',_0x518895),this['_camera']['on']('set_farCli'+'p',_0x518895),w['assert'](window,'window\x20is\x20'+'needed\x20to\x20'+'scale\x20the\x20'+'XR\x20framebu'+'ffer.\x20Are\x20'+'you\x20runnin'+'g\x20XR\x20headl'+'ess?'),this['_createBas'+'eLayer'](),this['session']['supportedF'+'rameRates']?this['_supported'+'FrameRates']=Array['from'](this['session']['supportedF'+'rameRates']):this['_supported'+'FrameRates']=null,this['_session']['addEventLi'+'stener']('frameratec'+'hange',()=>{var _0x26f7e7;this['fire']('frameratec'+'hange',(_0x26f7e7=this['_session'])==null?void(-0x1*-0x1c5+0x5c*-0x5d+0x1fa7):_0x26f7e7['frameRate']);}),_0x37cbf3['requestRef'+'erenceSpac'+'e'](_0x527a30)['then'](_0x3887ef=>{this['_reference'+'Space']=_0x3887ef,this['app']['tick'](),_0x5de101&&_0x5de101(null),this['fire']('start');})['catch'](_0x16701c=>{_0x16584c=!(0xa54+0x1fe*0xf+-0x2*0x141b),_0x37cbf3['end'](),_0x5de101&&_0x5de101(_0x16701c),this['fire']('error',_0x16701c);});}['_setClipPl'+'anes'](_0x3cd3b4,_0x27d370){this['_depthNear']===_0x3cd3b4&&this['_depthFar']===_0x27d370||(this['_depthNear']=_0x3cd3b4,this['_depthFar']=_0x27d370,this['_session']&&this['_session']['updateRend'+'erState']({'depthNear':this['_depthNear'],'depthFar':this['_depthFar']}));}['_createBas'+'eLayer'](){const _0x2c74d4=this['app']['graphicsDe'+'vice'],_0x3477fd=_0x2c74d4['maxPixelRa'+'tio']/window['devicePixe'+'lRatio']*this['_framebuff'+'erScaleFac'+'tor'];if(this['_baseLayer']=new XRWebGLLayer(this['_session'],_0x2c74d4['gl'],{'alpha':!(-0x1860+-0x1ffa+0x2*0x1c2d),'depth':!(-0x1b61+0x1442+0x1*0x71f),'stencil':!(0x5*-0x40f+-0x6*-0x33b+0xe9),'framebufferScaleFactor':_0x3477fd,'antialias':!(-0x2*0x449+0x12f6+-0xa63)}),_0x2c74d4!=null&&_0x2c74d4['isWebGL2']&&window['XRWebGLBin'+'ding'])try{this['webglBindi'+'ng']=new XRWebGLBinding(this['_session'],_0x2c74d4['gl']);}catch(_0x2a0184){this['fire']('error',_0x2a0184);}this['_session']['updateRend'+'erState']({'baseLayer':this['_baseLayer'],'depthNear':this['_depthNear'],'depthFar':this['_depthFar']});}['_onDeviceL'+'ost'](){this['_session']&&(this['webglBindi'+'ng']&&(this['webglBindi'+'ng']=null),this['_baseLayer']=null,this['_session']['updateRend'+'erState']({'baseLayer':this['_baseLayer'],'depthNear':this['_depthNear'],'depthFar':this['_depthFar']}));}['_onDeviceR'+'estored'](){this['_session']&&setTimeout(()=>{this['app']['graphicsDe'+'vice']['gl']['makeXRComp'+'atible']()['then'](()=>{this['_createBas'+'eLayer']();})['catch'](_0x112681=>{this['fire']('error',_0x112681);});},0x346+-0x1*-0x2c3+0x67*-0xf);}['update'](_0xa09081){if(!this['_session'])return!(-0x129b+-0x249d+0x3739);const _0x42ed32=_0xa09081['session']['renderStat'+'e']['baseLayer']['framebuffe'+'rWidth'],_0x291000=_0xa09081['session']['renderStat'+'e']['baseLayer']['framebuffe'+'rHeight'];(this['_width']!==_0x42ed32||this['_height']!==_0x291000)&&(this['_width']=_0x42ed32,this['_height']=_0x291000,this['app']['graphicsDe'+'vice']['setResolut'+'ion'](_0x42ed32,_0x291000));const _0x34ab4b=_0xa09081['getViewerP'+'ose'](this['_reference'+'Space']);if(!_0x34ab4b)return!(-0xddf+0xc*0x2e7+0xc*-0x1bf);const _0x1b0e54=this['views']['list']['length'];this['views']['update'](_0xa09081,_0x34ab4b['views']);const _0x59c703=_0x34ab4b['transform']['position'],_0x3d0079=_0x34ab4b['transform']['orientatio'+'n'];if(this['_localPosi'+'tion']['set'](_0x59c703['x'],_0x59c703['y'],_0x59c703['z']),this['_localRota'+'tion']['set'](_0x3d0079['x'],_0x3d0079['y'],_0x3d0079['z'],_0x3d0079['w']),_0x1b0e54===-0x127b+0x757*-0x4+0x2fd7&&this['views']['list']['length']>-0x1140+-0x6*0xab+-0x716*-0x3){const _0x248b80=new te(),_0x523268=this['views']['list'][-0x1c2e+0x74f*0x3+-0x641*-0x1];_0x248b80['copy'](_0x523268['projMat']);const _0x3dba27=_0x248b80['data'],_0x4cc250=(0x6d5+-0xbf7*-0x1+-0x12ca)*Math['atan']((0x1235+0x227+-0x145b)/_0x3dba27[-0x70b+0x1*-0x198d+-0x79*-0x45])*(-0x2057*0x1+0x3*0x92a+-0x1*-0x58d)/Math['PI'],_0xdddb34=_0x3dba27[0x53d*-0x7+0xbaa+-0x2*-0xc83]/_0x3dba27[-0xf08+-0x2484+0x338c],_0x52cf78=_0x3dba27[-0x2245*-0x1+0x160f+0x1*-0x3846]/(_0x3dba27[0x1605+-0x1316*-0x1+-0x2911]+(0x6*-0x44b+0x2e4*0x5+-0xb4f*-0x1)),_0x44e44a=_0x3dba27[0xe75+0x2386+-0x31ed]/(_0x3dba27[-0x3b*-0x7f+-0x1ac+-0x53*0x55]-(0x198b+-0x11a7*0x2+0x9c4));this['_camera']['camera']['setXrPrope'+'rties']({'aspectRatio':_0xdddb34,'farClip':_0x52cf78,'fov':_0x4cc250,'horizontalFov':!(0x1a*-0x5e+-0x2154+0x2ae1),'nearClip':_0x44e44a});}return this['_camera']['camera']['_node']['setLocalPo'+'sition'](this['_localPosi'+'tion']),this['_camera']['camera']['_node']['setLocalRo'+'tation'](this['_localRota'+'tion']),this['input']['update'](_0xa09081),this['_type']===$o&&(this['hitTest']['supported']&&this['hitTest']['update'](_0xa09081),this['lightEstim'+'ation']['supported']&&this['lightEstim'+'ation']['update'](_0xa09081),this['imageTrack'+'ing']['supported']&&this['imageTrack'+'ing']['update'](_0xa09081),this['anchors']['supported']&&this['anchors']['update'](_0xa09081),this['planeDetec'+'tion']['supported']&&this['planeDetec'+'tion']['update'](_0xa09081),this['meshDetect'+'ion']['supported']&&this['meshDetect'+'ion']['update'](_0xa09081)),this['fire']('update',_0xa09081),!(-0x2638+-0x2*-0x614+-0x8b*-0x30);}get['supported'](){return this['_supported'];}get['active'](){return!!this['_session'];}get['type'](){return this['_type'];}get['spaceType'](){return this['_spaceType'];}get['session'](){return this['_session'];}get['frameRate'](){var _0x599baa;return((_0x599baa=this['_session'])==null?void(-0x1343+-0x21d6+0x3519):_0x599baa['frameRate'])??null;}get['supportedF'+'rameRates'](){return this['_supported'+'FrameRates'];}get['framebuffe'+'rScaleFact'+'or'](){return this['_framebuff'+'erScaleFac'+'tor'];}set['fixedFovea'+'tion'](_0x4935d4){var _0x4a5a02;(((_0x4a5a02=this['_baseLayer'])==null?void(-0xd60+0x1*-0x1803+0x2563):_0x4a5a02['fixedFovea'+'tion'])??null)!==null&&(this['app']['graphicsDe'+'vice']['samples']>0x1*-0x230b+-0x24fc+0x4808&&w['warn']('Fixed\x20Fove'+'ation\x20is\x20i'+'gnored.\x20Di'+'sable\x20anti'+'-aliasing\x20'+'for\x20it\x20to\x20'+'be\x20effecti'+'ve.'),this['_baseLayer']['fixedFovea'+'tion']=_0x4935d4);}get['fixedFovea'+'tion'](){var _0x2de3d7;return((_0x2de3d7=this['_baseLayer'])==null?void(-0x8b+-0x326+0x3b1):_0x2de3d7['fixedFovea'+'tion'])??null;}get['camera'](){return this['_camera']?this['_camera']['entity']:null;}get['visibility'+'State'](){return this['_session']?this['_session']['visibility'+'State']:null;}}h(ln,'EVENT_AVAI'+'LABLE','available'),h(ln,'EVENT_STAR'+'T','start'),h(ln,'EVENT_END','end'),h(ln,'EVENT_UPDA'+'TE','update'),h(ln,'EVENT_ERRO'+'R','error');class $U extends Ks{constructor(_0x3b3d7a,_0x49a8a2={}){super(_0x3b3d7a);const _0x4bd4f6=new tL();_0x4bd4f6['graphicsDe'+'vice']=_0x49a8a2['graphicsDe'+'vice']??this['createDevi'+'ce'](_0x3b3d7a,_0x49a8a2),this['addCompone'+'ntSystems'](_0x4bd4f6),this['addResourc'+'eHandles'](_0x4bd4f6),_0x4bd4f6['elementInp'+'ut']=_0x49a8a2['elementInp'+'ut'],_0x4bd4f6['keyboard']=_0x49a8a2['keyboard'],_0x4bd4f6['mouse']=_0x49a8a2['mouse'],_0x4bd4f6['touch']=_0x49a8a2['touch'],_0x4bd4f6['gamepads']=_0x49a8a2['gamepads'],_0x4bd4f6['scriptPref'+'ix']=_0x49a8a2['scriptPref'+'ix'],_0x4bd4f6['assetPrefi'+'x']=_0x49a8a2['assetPrefi'+'x'],_0x4bd4f6['scriptsOrd'+'er']=_0x49a8a2['scriptsOrd'+'er'],_0x4bd4f6['soundManag'+'er']=new Pw(),_0x4bd4f6['lightmappe'+'r']=pL,_0x4bd4f6['batchManag'+'er']=IE,_0x4bd4f6['xr']=ln,this['init'](_0x4bd4f6);}['createDevi'+'ce'](_0x59f942,_0x373f98){return _0x373f98['graphicsDe'+'viceOption'+'s']||(_0x373f98['graphicsDe'+'viceOption'+'s']={}),Ae['browser']&&navigator['xr']&&(_0x373f98['graphicsDe'+'viceOption'+'s']['xrCompatib'+'le']=!(-0x7*-0x250+-0x47*-0x23+-0x1*0x19e5)),_0x373f98['graphicsDe'+'viceOption'+'s']['alpha']=_0x373f98['graphicsDe'+'viceOption'+'s']['alpha']||!(0x1d25+-0x149a+0x1*-0x88a),new aw(_0x59f942,_0x373f98['graphicsDe'+'viceOption'+'s']);}['addCompone'+'ntSystems'](_0x109402){_0x109402['componentS'+'ystems']=[wm,nR,NR,RL,BL,KR,zO,xF,wF,kF,hF,VL,kO,YO,LR,$L,aF,oF,mF,XR,UR,gF,BF];}['addResourc'+'eHandles'](_0x2e1230){_0x2e1230['resourceHa'+'ndlers']=[zF,WN,$N,XN,Ek,yk,oU,Ok,mk,jN,Dk,bk,JN,pk,QN,Ik,uk,ek,tk,YN,Nk,Lk,Rk,ZN,fk];}}class XU extends me{constructor(_0x38f0d6,_0x1362ce){super(),h(this,'_assets',new Set()),h(this,'_loadingAs'+'sets',new Set()),h(this,'_waitingAs'+'sets',new Set()),h(this,'_loading',!(0x747+0x174+0x45d*-0x2)),h(this,'_loaded',!(0x394+-0x5e1+0x24e*0x1)),h(this,'_failed',[]),(this['_registry']=_0x1362ce,_0x38f0d6['forEach'](_0x186360=>{if(_0x186360 instanceof pe)_0x186360['registry']||(_0x186360['registry']=_0x1362ce),this['_assets']['add'](_0x186360);else{const _0xddd19d=_0x1362ce['get'](_0x186360);_0xddd19d?this['_assets']['add'](_0xddd19d):this['_waitForAs'+'set'](_0x186360);}}));}['destroy'](){this['_registry']['off']('load',this['_onLoad']),this['_registry']['off']('error',this['_onError']),this['_waitingAs'+'sets']['forEach'](_0x50321a=>{this['_registry']['off']('add:'+_0x50321a,this['_onAddAsse'+'t']);}),this['off']('progress'),this['off']('load');}['_assetHasD'+'ependencie'+'s'](_0x128d8f){var _0x36b647;return _0x128d8f['type']==='model'&&((_0x36b647=_0x128d8f['file'])==null?void(-0x4*-0x281+0x1893+-0x2297):_0x36b647['url'])&&_0x128d8f['file']['url']&&_0x128d8f['file']['url']['match'](/.json$/g);}['load'](_0x290282,_0x553a34){if(this['_loading']){console['debug']('AssetListL'+'oader:\x20Loa'+'d\x20function'+'\x20called\x20mu'+'ltiple\x20tim'+'es.');return;}this['_loading']=!(0x824+0x3ac*-0xa+0x1c94),this['_callback']=_0x290282,this['_scope']=_0x553a34,this['_registry']['on']('load',this['_onLoad'],this),this['_registry']['on']('error',this['_onError'],this);let _0x59d7ec=!(-0xe3d+0x32*0xba+-0x1616);this['_assets']['forEach'](_0x3d7511=>{_0x3d7511['loaded']||(_0x59d7ec=!(0x1*-0x1322+-0xb86+0x1ea8),this['_assetHasD'+'ependencie'+'s'](_0x3d7511)&&this['_registry']['loadFromUr'+'l'](_0x3d7511['file']['url'],_0x3d7511['type'],(_0x7ffd57,_0x5785e3)=>{if(_0x7ffd57){this['_onError'](_0x7ffd57,_0x3d7511);return;}this['_onLoad'](_0x3d7511);}),this['_loadingAs'+'sets']['add'](_0x3d7511),this['_registry']['add'](_0x3d7511));}),this['_loadingAs'+'sets']['forEach'](_0x146d49=>{this['_assetHasD'+'ependencie'+'s'](_0x146d49)||this['_registry']['load'](_0x146d49);}),!_0x59d7ec&&this['_waitingAs'+'sets']['size']===-0x7*-0x2c3+-0x15d3+0x27e&&this['_loadingCo'+'mplete']();}['ready'](_0x310730,_0x90dd73=this){this['_loaded']?_0x310730['call'](_0x90dd73,Array['from'](this['_assets'])):this['once']('load',_0x41049d=>{_0x310730['call'](_0x90dd73,_0x41049d);});}['_loadingCo'+'mplete'](){this['_loaded']||(this['_loaded']=!(0x291+0xd*-0x7e+0x3d5),this['_registry']['off']('load',this['_onLoad'],this),this['_registry']['off']('error',this['_onError'],this),this['_failed']['length']?(this['_callback']&&this['_callback']['call'](this['_scope'],'Failed\x20to\x20'+'load\x20some\x20'+'assets',this['_failed']),this['fire']('error',this['_failed'])):(this['_callback']&&this['_callback']['call'](this['_scope']),this['fire']('load',Array['from'](this['_assets']))));}['_onLoad'](_0x41b76b){this['_loadingAs'+'sets']['has'](_0x41b76b)&&(this['fire']('progress',_0x41b76b),this['_loadingAs'+'sets']['delete'](_0x41b76b)),this['_loadingAs'+'sets']['size']===0x1bb0+0x4*-0x529+-0x52*0x16&&setTimeout(()=>{this['_loadingCo'+'mplete']();},0x2*0xc82+-0x1be6+-0xf6*-0x3);}['_onError'](_0x41f2ac,_0x11936a){this['_loadingAs'+'sets']['has'](_0x11936a)&&(this['_failed']['push'](_0x11936a),this['_loadingAs'+'sets']['delete'](_0x11936a)),this['_loadingAs'+'sets']['size']===-0xb2b+-0x1*-0xf0d+-0x3e2&&setTimeout(()=>{this['_loadingCo'+'mplete']();},-0x3*-0x91d+0xd37+-0x288e);}['_onAddAsse'+'t'](_0xbf971a){this['_waitingAs'+'sets']['delete'](_0xbf971a),this['_assets']['add'](_0xbf971a),_0xbf971a['loaded']||(this['_loadingAs'+'sets']['add'](_0xbf971a),this['_registry']['load'](_0xbf971a));}['_waitForAs'+'set'](_0x48528a){this['_waitingAs'+'sets']['add'](_0x48528a),this['_registry']['once']('add:'+_0x48528a,this['_onAddAsse'+'t'],this);}}const Fc=[],_U=[[],[],[]];class gU extends ys{constructor(_0x28322a,_0x3ba16e){super(_0x28322a),h(this,'viewBindGr'+'oups',[]),this['renderer']=_0x3ba16e;}['destroy'](){this['viewBindGr'+'oups']['forEach'](_0x267a01=>{_0x267a01['defaultUni'+'formBuffer']['destroy'](),_0x267a01['destroy']();}),this['viewBindGr'+'oups']['length']=0x1*-0xbe7+-0x13*-0xd6+-0x1*0x3fb;}['update'](_0x46fac8,_0x5cddfc,_0x4c2df1,_0x31d235){this['camera']=_0x46fac8,this['scene']=_0x5cddfc,this['layers']=_0x4c2df1,this['mapping']=_0x31d235;}['execute'](){const _0x20dd31=this['device'],{renderer:_0x5bcc25,camera:_0x7c0791,scene:_0x22d785,layers:_0x1490f3,mapping:_0xf93d8f,renderTarget:_0x56ee15}=this,_0x59f960=_0x22d785['layers']['layerList'],_0x2cf516=_0x22d785['layers']['subLayerEn'+'abled'],_0xaa16ff=_0x22d785['layers']['subLayerLi'+'st'];for(let _0x5e1b13=-0x1f2f+-0x1*-0x209b+0x7*-0x34;_0x5e1b13<_0x59f960['length'];_0x5e1b13++){const _0x30f3e4=_0x59f960[_0x5e1b13];if(!(_0x1490f3&&_0x1490f3['indexOf'](_0x30f3e4)<-0x1700+-0x611*0x1+0x1*0x1d11)&&_0x30f3e4['enabled']&&_0x2cf516[_0x5e1b13]&&_0x30f3e4['camerasSet']['has'](_0x7c0791['camera'])){const _0x30150a=_0xaa16ff[_0x5e1b13];Q['pushGpuMar'+'ker'](_0x20dd31,_0x30f3e4['name']+'('+(_0x30150a?'TRANSP':'OPAQUE')+')'),_0x30f3e4['_clearDept'+'hBuffer']&&_0x5bcc25['clear'](_0x7c0791['camera'],!(-0xda5+-0x18*0x7e+0x1976),!(-0x14d3+0x5*-0xd5+0x2*0xc7e),!(-0x4b4+-0x15e7+-0x106*-0x1a));const _0x4f42a3=_0x30f3e4['meshInstan'+'ces'];for(let _0x154dc6=0x1e3+-0x1c24+0x1a41;_0x154dc6<_0x4f42a3['length'];_0x154dc6++){const _0x4bffbd=_0x4f42a3[_0x154dc6];_0x4bffbd['pick']&&_0x4bffbd['transparen'+'t']===_0x30150a&&(Fc['push'](_0x4bffbd),_0xf93d8f['set'](_0x4bffbd['id'],_0x4bffbd));}Fc['length']>-0x20c0+-0x1*-0x1ed5+0x1*0x1eb&&(_0x22d785['clusteredL'+'ightingEna'+'bled']&&_0x5bcc25['worldClust'+'ersAllocat'+'or']['empty']['activate'](),_0x5bcc25['setCameraU'+'niforms'](_0x7c0791['camera'],_0x56ee15),_0x20dd31['supportsUn'+'iformBuffe'+'rs']&&_0x5bcc25['setupViewU'+'niformBuff'+'ers'](this['viewBindGr'+'oups'],_0x5bcc25['viewUnifor'+'mFormat'],_0x5bcc25['viewBindGr'+'oupFormat'],null),_0x5bcc25['renderForw'+'ard'](_0x7c0791['camera'],_0x56ee15,Fc,_U,Zn,_0x2a959b=>{_0x20dd31['setBlendSt'+'ate'](pt['NOBLEND']);}),Fc['length']=-0x590+0x11c3+0xc33*-0x1),Q['popGpuMark'+'er'](_0x20dd31);}}}}const Rf=new Set(),SU=new re();let qU=class{constructor(_0x3dbdff,_0x1d36ee,_0x137724){h(this,'renderTarg'+'et',null),h(this,'mapping',new Map()),h(this,'deviceVali'+'d',!(-0x4*-0x32+0x4a3*-0x6+-0x1*-0x1b0a)),(w['assert'](_0x3dbdff),this['renderer']=_0x3dbdff['renderer'],this['device']=_0x3dbdff['graphicsDe'+'vice'],this['renderPass']=new gU(this['device'],_0x3dbdff['renderer']),this['width']=-0xa8e+-0xf12+0x52*0x50,this['height']=0x17b*0x1+-0x9ac*0x1+0x831,this['resize'](_0x1d36ee,_0x137724),this['device']['on']('destroy',()=>{this['deviceVali'+'d']=!(0xa96+-0x11*0x23b+0x1b56);}));}['getSelecti'+'on'](_0x452d09,_0x40a371,_0x5ec4d9=0x554+-0x683+-0x8*-0x26,_0x1d3614=-0x244*-0xa+-0x24*0xd6+0x771){const _0x41a0a9=this['device'];if(_0x41a0a9['isWebGPU'])return w['errorOnce']('pc.Picker#'+'getSelecti'+'on\x20is\x20not\x20'+'supported\x20'+'on\x20WebGPU,'+'\x20use\x20pc.Pi'+'cker#getSe'+'lectionAsy'+'nc\x20instead'+'.'),[];w['assert'](typeof _0x452d09!='object','Picker.get'+'Selection:'+'param\x20\x27rec'+'t\x27\x20is\x20depr'+'ecated,\x20us'+'e\x20\x27x,\x20y,\x20w'+'idth,\x20heig'+'ht\x27\x20instea'+'d.'),_0x40a371=this['renderTarg'+'et']['height']-(_0x40a371+_0x1d3614);const _0x1f32bf=this['sanitizeRe'+'ct'](_0x452d09,_0x40a371,_0x5ec4d9,_0x1d3614);_0x41a0a9['setRenderT'+'arget'](this['renderTarg'+'et']),_0x41a0a9['updateBegi'+'n']();const _0xeff0b8=new Uint8Array((0x119*-0x18+-0x1ac9*-0x1+0x1*-0x6d)*_0x1f32bf['z']*_0x1f32bf['w']);return _0x41a0a9['readPixels'](_0x1f32bf['x'],_0x1f32bf['y'],_0x1f32bf['z'],_0x1f32bf['w'],_0xeff0b8),_0x41a0a9['updateEnd'](),this['decodePixe'+'ls'](_0xeff0b8,this['mapping']);}['getSelecti'+'onAsync'](_0x89db57,_0x47315a,_0x3b59dd=0x2*-0x295+0x919+0x2*-0x1f7,_0x266e33=0x18be+0x1*0xb23+0x10*-0x23e){var _0x51fc37;(_0x51fc37=this['device'])!=null&&_0x51fc37['isWebGL2']&&(_0x47315a=this['renderTarg'+'et']['height']-(_0x47315a+_0x266e33));const _0x227ece=this['sanitizeRe'+'ct'](_0x89db57,_0x47315a,_0x3b59dd,_0x266e33);return this['renderTarg'+'et']['colorBuffe'+'r']['read'](_0x227ece['x'],_0x227ece['y'],_0x227ece['z'],_0x227ece['w'],{'renderTarget':this['renderTarg'+'et'],'immediate':!(-0xae8+-0x2f5*0x7+0x1f9b)})['then'](_0x3ba69f=>this['decodePixe'+'ls'](_0x3ba69f,this['mapping']));}['sanitizeRe'+'ct'](_0x34640d,_0x366a8b,_0x434f42,_0x3331ed){const _0x5aded3=this['renderTarg'+'et']['width'],_0x11a363=this['renderTarg'+'et']['height'];return _0x34640d=Y['clamp'](Math['floor'](_0x34640d),-0x812+0xf2f+-0x71d,_0x5aded3-(-0xb3*-0x14+0x5d6+-0x13d1)),_0x366a8b=Y['clamp'](Math['floor'](_0x366a8b),0x1bc*0x6+0x133*-0x1b+0x15f9,_0x11a363-(0x259f+-0x57a*0x1+-0x2024)),_0x434f42=Math['floor'](Math['max'](_0x434f42,0x15d5+0x1d6+-0x17aa*0x1)),_0x434f42=Math['min'](_0x434f42,_0x5aded3-_0x34640d),_0x3331ed=Math['floor'](Math['max'](_0x3331ed,-0xdff*0x1+0xe5*0xd+0x25f)),_0x3331ed=Math['min'](_0x3331ed,_0x11a363-_0x366a8b),SU['set'](_0x34640d,_0x366a8b,_0x434f42,_0x3331ed);}['decodePixe'+'ls'](_0x5d4870,_0x5ec07c){const _0x2eefaf=[];if(this['deviceVali'+'d']){const _0x22acf6=_0x5d4870['length'];for(let _0x162f20=-0x1*-0x13a3+-0x26*-0x89+0x3*-0xd53;_0x162f20<_0x22acf6;_0x162f20+=0x1*0x1462+-0x8d3+-0xb8b){const _0x514aa9=_0x5d4870[_0x162f20+(0x61*-0xd+0x410+-0xdd*-0x1)],_0x38010e=_0x5d4870[_0x162f20+(0x754+0x2581+-0x2cd4)],_0x4daae8=_0x5d4870[_0x162f20+(-0x2559+0x234c+0x1*0x20f)],_0x4ca209=(_0x5d4870[_0x162f20+(0xd9b+-0xd8c+-0xc)]<<0xdbd*0x1+-0x1*0x985+-0x420|_0x514aa9<<-0xc8f+0x20a3+-0xa02*0x2|_0x38010e<<0x724+-0x325*0x9+-0x43d*-0x5|_0x4daae8)>>>-0xa3f+0x268d+-0xe27*0x2;_0x4ca209!==0x295d304+0xad4180*0x31+-0x3*-0x496ae129&&Rf['add'](_0x5ec07c['get'](_0x4ca209));}Rf['forEach'](_0x5a06eb=>{_0x5a06eb&&_0x2eefaf['push'](_0x5a06eb);}),Rf['clear']();}return _0x2eefaf;}['allocateRe'+'nderTarget'](){const _0x3a3bee=new _e(this['device'],{'format':Ne,'width':this['width'],'height':this['height'],'mipmaps':!(0x1*-0xad9+-0x16f4+0x21ce),'minFilter':Te,'magFilter':Te,'addressU':ue,'addressV':ue,'name':'pick'});this['renderTarg'+'et']=new gt({'colorBuffer':_0x3a3bee,'depth':!(0x129c+-0x24a2+0x1206)});}['releaseRen'+'derTarget'](){this['renderTarg'+'et']&&(this['renderTarg'+'et']['destroyTex'+'tureBuffer'+'s'](),this['renderTarg'+'et']['destroy'](),this['renderTarg'+'et']=null);}['prepare'](_0x21784f,_0x1c3066,_0x11271d){_0x11271d instanceof Ot&&(_0x11271d=[_0x11271d]),(!this['renderTarg'+'et']||this['width']!==this['renderTarg'+'et']['width']||this['height']!==this['renderTarg'+'et']['height'])&&(this['releaseRen'+'derTarget'](),this['allocateRe'+'nderTarget']()),this['mapping']['clear']();const _0x58cf17=this['renderPass'];_0x58cf17['init'](this['renderTarg'+'et']),_0x58cf17['colorOps']['clearValue']=ie['WHITE'],_0x58cf17['colorOps']['clear']=!(-0x1117+0x802+0x915),_0x58cf17['depthStenc'+'ilOps']['clearDepth']=!(-0x1e9f+-0x21f*-0x1+-0x1c80*-0x1),_0x58cf17['update'](_0x21784f,_0x1c3066,_0x11271d,this['mapping']),_0x58cf17['render']();}['resize'](_0x4d7e1f,_0xc18265){this['width']=Math['floor'](_0x4d7e1f),this['height']=Math['floor'](_0xc18265);}},cr,hr;const Of=new D(),RS=new D(),Ri=new Dn(),Ro=new Dn(),ep=new Dn();Ri['end']=new D(),Ro['end']=new D(),ep['end']=new D();const en=new D(),Nc=new D(),Ff=new D(),OS=new D(),Nf=new D(),kc=new D(),Uc=new D(),Bc=new D(),zc=new D(),kf=new D(),yU=new D(),tn=new D(),wo=new D(),Vc=new D(),Gc=new D(),Eo=new D(),FS=new D(),NS=new D(),kS=new D(),US=new D(),vU=new re();function BS(_0x42444a,_0x36cefe,_0x162d5b){return yU['cross'](_0x42444a,_0x36cefe)['dot'](_0x162d5b);}function xU(_0x58c8b6,_0x136e16,_0x1d07ae){en['sub2'](_0x136e16,_0x58c8b6),Nc['sub2'](_0x1d07ae[-0x99a+-0x13ee+0x3f*0x78],_0x58c8b6),Ff['sub2'](_0x1d07ae[-0x17*0x83+0x24e*0x9+0x11f*-0x8],_0x58c8b6),OS['sub2'](_0x1d07ae[0x2241+-0x1*-0xea9+-0x30e8],_0x58c8b6),kc['cross'](OS,en);let _0x4ef00a=Nc['dot'](kc),_0x632cf3,_0x45e092;if(_0x4ef00a>=-0x14e1+-0x94d+0x1e2e){if(_0x632cf3=-Ff['dot'](kc),_0x632cf3<0x5*-0x16a+0x792+-0x80||(_0x45e092=BS(en,Ff,Nc),_0x45e092<0x1a*0x92+-0x220d*-0x1+-0x30e1))return-(0x24a4+-0x3*-0x137+-0x2848*0x1);const _0x281712=(0x301*0xd+-0x937*0x3+0x7*-0x1a1)/(_0x632cf3+_0x4ef00a+_0x45e092);Uc['copy'](_0x1d07ae[0xbcf+-0x19cd*-0x1+-0x74*0x53])['mulScalar'](_0x632cf3*_0x281712),Bc['copy'](_0x1d07ae[0x266d*0x1+-0x1df5+-0x1*0x877])['mulScalar'](_0x4ef00a*_0x281712),zc['copy'](_0x1d07ae[0xab1+0x131+-0x1*0xbe0])['mulScalar'](_0x45e092*_0x281712),kf['copy'](Uc)['add'](Bc)['add'](zc);}else{if(Nf['sub2'](_0x1d07ae[-0x23ec+0x4be+0x1f31],_0x58c8b6),_0x632cf3=Nf['dot'](kc),_0x632cf3<0x220d+-0x20c1+-0x4*0x53||(_0x45e092=BS(en,Nc,Nf),_0x45e092<0x2421*0x1+-0x17fe+-0xc23))return-(-0x11fb*-0x2+-0x281+-0x2174);_0x4ef00a=-_0x4ef00a;const _0x5f12e6=(-0x19*0x71+-0x7*-0x3a8+0x4da*-0x3)/(_0x632cf3+_0x4ef00a+_0x45e092);Uc['copy'](_0x1d07ae[0x7*-0x4bb+-0xd34+0x2e51])['mulScalar'](_0x632cf3*_0x5f12e6),Bc['copy'](_0x1d07ae[-0x22c*0x6+0x295+0xd*0xce])['mulScalar'](_0x4ef00a*_0x5f12e6),zc['copy'](_0x1d07ae[0x11b6+-0x114f+-0x1*0x65])['mulScalar'](_0x45e092*_0x5f12e6),kf['copy'](Uc)['add'](Bc)['add'](zc);}return en['sub2'](_0x1d07ae[-0x1b20+-0xec7+0x29e7],_0x1d07ae[0x1211+-0x641+-0xbce])['lengthSq']()<(0x29*0x5f+-0x3*0x839+0x6e*0x16+0.0001)*(-0x994+0x1e93+0x1*-0x14ff+0.0001)||en['sub2'](_0x1d07ae[-0xd*-0x1bf+0x1*0x79+-0x1*0x172b],_0x1d07ae[0xe73+0x21e6+0x3056*-0x1])['lengthSq']()<(0x105*0x1b+0xa80+-0x2607+0.0001)*(0x1*-0x581+0x18eb+-0x1f1*0xa+0.0001)?-(-0x3*-0xbe1+0x4*-0x4de+-0x102a):kf['sub'](_0x58c8b6)['lengthSq']();}class Am{constructor(_0x199a0e,_0x50d2bd,_0x3169f4){this['event']=_0x199a0e,this['element']=_0x50d2bd,this['camera']=_0x3169f4,this['_stopPropa'+'gation']=!(0x68*0xe+-0x2*-0x121e+0x31*-0xdb);}['stopPropag'+'ation'](){this['_stopPropa'+'gation']=!(-0x1cd6+-0x2b6*0xe+0x42ca),this['event']&&(this['event']['stopImmedi'+'atePropaga'+'tion'](),this['event']['stopPropag'+'ation']());}}class bo extends Am{constructor(_0x405b0e,_0x1858c5,_0x11c9aa,_0x3476c9,_0xd56345,_0x5bb377,_0x485d0e){super(_0x405b0e,_0x1858c5,_0x11c9aa),this['x']=_0x3476c9,this['y']=_0xd56345,this['ctrlKey']=_0x405b0e['ctrlKey']||!(-0x266b+-0x2639+0x4ca5),this['altKey']=_0x405b0e['altKey']||!(0x133b+0x23c5+0x36ff*-0x1),this['shiftKey']=_0x405b0e['shiftKey']||!(0x5cb+0x1*-0x538+-0x49*0x2),this['metaKey']=_0x405b0e['metaKey']||!(-0xc*0xbf+-0x1*0x3bf+0x2*0x65a),this['button']=_0x405b0e['button'],sa['isPointerL'+'ocked']()?(this['dx']=_0x405b0e['movementX']||_0x405b0e['webkitMove'+'mentX']||_0x405b0e['mozMovemen'+'tX']||0x1fd0+0x1*-0xcff+0x12d1*-0x1,this['dy']=_0x405b0e['movementY']||_0x405b0e['webkitMove'+'mentY']||_0x405b0e['mozMovemen'+'tY']||0x3*0x727+-0x3f6*-0x9+-0x1*0x391b):(this['dx']=_0x3476c9-_0x5bb377,this['dy']=_0xd56345-_0x485d0e),this['wheelDelta']=0x1075+-0x127b+-0x25*-0xe,_0x405b0e['type']==='wheel'&&(_0x405b0e['deltaY']>0x1b7d*0x1+0x1*0xdb7+-0x2934?this['wheelDelta']=-0xe*0x6b+-0xdc7*0x2+0x2169:_0x405b0e['deltaY']<-0x25*-0x1f+-0x3*-0x97f+-0x34c*0xa&&(this['wheelDelta']=-(-0x6f*-0x1a+0x418*0x2+-0x1375)));}}class Ao extends Am{constructor(_0x28e299,_0xf7a0a2,_0x1b23d0,_0x59fd98,_0x1ea0c9,_0x31edac){super(_0x28e299,_0xf7a0a2,_0x1b23d0),this['touches']=_0x28e299['touches'],this['changedTou'+'ches']=_0x28e299['changedTou'+'ches'],this['x']=_0x59fd98,this['y']=_0x1ea0c9,this['touch']=_0x31edac;}}class dr extends Am{constructor(_0x1f1929,_0x4efb04,_0x77f4c,_0x12fcbb){super(_0x1f1929,_0x4efb04,_0x77f4c),this['inputSourc'+'e']=_0x12fcbb;}}class Xo{constructor(_0x25b1aa,_0x25067b){this['_app']=null,this['_attached']=!(-0x4*0x5bd+-0x25*0x4d+0x2216),this['_target']=null,this['_enabled']=!(-0x1eaf+-0x26b+0x211a),this['_lastX']=-0xfb*0xa+-0x23bd+0x2d8b*0x1,this['_lastY']=0x1*0x5c9+-0x1345+0xd7c*0x1,this['_upHandler']=this['_handleUp']['bind'](this),this['_downHandl'+'er']=this['_handleDow'+'n']['bind'](this),this['_moveHandl'+'er']=this['_handleMov'+'e']['bind'](this),this['_wheelHand'+'ler']=this['_handleWhe'+'el']['bind'](this),this['_touchstar'+'tHandler']=this['_handleTou'+'chStart']['bind'](this),this['_touchendH'+'andler']=this['_handleTou'+'chEnd']['bind'](this),this['_touchcanc'+'elHandler']=this['_touchendH'+'andler'],this['_touchmove'+'Handler']=this['_handleTou'+'chMove']['bind'](this),this['_sortHandl'+'er']=this['_sortEleme'+'nts']['bind'](this),this['_elements']=[],this['_hoveredEl'+'ement']=null,this['_pressedEl'+'ement']=null,this['_touchedEl'+'ements']={},this['_touchesFo'+'rWhichTouc'+'hLeaveHasF'+'ired']={},this['_selectedE'+'lements']={},this['_selectedP'+'ressedElem'+'ents']={},this['_useMouse']=!_0x25067b||_0x25067b['useMouse']!==!(0x813+-0x7*-0x590+-0x2*0x1781),this['_useTouch']=!_0x25067b||_0x25067b['useTouch']!==!(0x1639*0x1+-0x328+-0x1310),this['_useXr']=!_0x25067b||_0x25067b['useXr']!==!(-0x4*0x47+0x1*-0x201+0x31e),this['_selectEve'+'ntsAttache'+'d']=!(0x5*0x4b1+-0x2e3*0x9+0x1*0x287),Ae['touch']&&(this['_clickedEn'+'tities']={}),this['attach'](_0x25b1aa);}set['enabled'](_0x11b1c1){this['_enabled']=_0x11b1c1;}get['enabled'](){return this['_enabled'];}set['app'](_0x33643c){this['_app']=_0x33643c;}get['app'](){return this['_app']||Ms();}['attach'](_0x53b1b7){this['_attached']&&(this['_attached']=!(-0xbd1+-0xc0b*0x1+0x95*0x29),this['detach']()),this['_target']=_0x53b1b7,this['_attached']=!(-0x9*0x8c+-0x3d2+0x6*0x175);const _0x1ca21b=Ae['passiveEve'+'nts']?{'passive':!(0x1*0x4ca+-0x7*0x13+-0x445)}:!(0x8d1*-0x1+-0x1b1*0x3+0xde5);this['_useMouse']&&(window['addEventLi'+'stener']('mouseup',this['_upHandler'],_0x1ca21b),window['addEventLi'+'stener']('mousedown',this['_downHandl'+'er'],_0x1ca21b),window['addEventLi'+'stener']('mousemove',this['_moveHandl'+'er'],_0x1ca21b),window['addEventLi'+'stener']('wheel',this['_wheelHand'+'ler'],_0x1ca21b)),this['_useTouch']&&Ae['touch']&&(this['_target']['addEventLi'+'stener']('touchstart',this['_touchstar'+'tHandler'],_0x1ca21b),this['_target']['addEventLi'+'stener']('touchend',this['_touchendH'+'andler'],!(0x2cf*-0xd+0x1531+-0xf53*-0x1)),this['_target']['addEventLi'+'stener']('touchmove',this['_touchmove'+'Handler'],!(0x1626+0x2*0xff7+-0x3613)),this['_target']['addEventLi'+'stener']('touchcance'+'l',this['_touchcanc'+'elHandler'],!(-0xd2e+0x2*-0xf8b+0x1*0x2c45))),this['attachSele'+'ctEvents']();}['attachSele'+'ctEvents'](){!this['_selectEve'+'ntsAttache'+'d']&&this['_useXr']&&this['app']&&this['app']['xr']&&this['app']['xr']['supported']&&(this['_clickedEn'+'tities']||(this['_clickedEn'+'tities']={}),this['_selectEve'+'ntsAttache'+'d']=!(-0x287*0x1+0x50f+0x9*-0x48),this['app']['xr']['on']('start',this['_onXrStart'],this));}['detach'](){if(!this['_attached'])return;this['_attached']=!(0xc7e*-0x1+-0x1007+-0x3*-0x982);const _0x2d48f5=Ae['passiveEve'+'nts']?{'passive':!(-0x22ab+-0x7a1+0x2a4c)}:!(-0x2264+0xd*-0x93+0x29dc*0x1);this['_useMouse']&&(window['removeEven'+'tListener']('mouseup',this['_upHandler'],_0x2d48f5),window['removeEven'+'tListener']('mousedown',this['_downHandl'+'er'],_0x2d48f5),window['removeEven'+'tListener']('mousemove',this['_moveHandl'+'er'],_0x2d48f5),window['removeEven'+'tListener']('wheel',this['_wheelHand'+'ler'],_0x2d48f5)),this['_useTouch']&&(this['_target']['removeEven'+'tListener']('touchstart',this['_touchstar'+'tHandler'],_0x2d48f5),this['_target']['removeEven'+'tListener']('touchend',this['_touchendH'+'andler'],!(0x1f0b+-0x2*-0x9ef+-0x1*0x32e8)),this['_target']['removeEven'+'tListener']('touchmove',this['_touchmove'+'Handler'],!(0x19a0+-0x1777+-0x5c*0x6)),this['_target']['removeEven'+'tListener']('touchcance'+'l',this['_touchcanc'+'elHandler'],!(-0x1513+-0x9ae*0x1+0x7f*0x3e))),this['_selectEve'+'ntsAttache'+'d']&&(this['_selectEve'+'ntsAttache'+'d']=!(-0x80a*-0x1+-0x187c+0x1073),this['app']['xr']['off']('start',this['_onXrStart'],this),this['app']['xr']['off']('end',this['_onXrEnd'],this),this['app']['xr']['off']('update',this['_onXrUpdat'+'e'],this),this['app']['xr']['input']['off']('selectstar'+'t',this['_onSelectS'+'tart'],this),this['app']['xr']['input']['off']('selectend',this['_onSelectE'+'nd'],this),this['app']['xr']['input']['off']('remove',this['_onXrInput'+'Remove'],this)),this['_target']=null;}['addElement'](_0x164113){this['_elements']['indexOf'](_0x164113)===-(0x24f+0x336+-0x584)&&this['_elements']['push'](_0x164113);}['removeElem'+'ent'](_0x22f1b0){const _0x1e4a8e=this['_elements']['indexOf'](_0x22f1b0);_0x1e4a8e!==-(-0x1*-0x1e4d+-0x2*-0xd52+-0x1*0x38f0)&&this['_elements']['splice'](_0x1e4a8e,-0x236e+0x76*-0x25+0x9*0x5d5);}['_handleUp'](_0x4bb99d){this['_enabled']&&(sa['isPointerL'+'ocked']()||(this['_calcMouse'+'Coords'](_0x4bb99d),this['_onElement'+'MouseEvent']('mouseup',_0x4bb99d)));}['_handleDow'+'n'](_0x484878){this['_enabled']&&(sa['isPointerL'+'ocked']()||(this['_calcMouse'+'Coords'](_0x484878),this['_onElement'+'MouseEvent']('mousedown',_0x484878)));}['_handleMov'+'e'](_0x30e93f){this['_enabled']&&(this['_calcMouse'+'Coords'](_0x30e93f),this['_onElement'+'MouseEvent']('mousemove',_0x30e93f),this['_lastX']=cr,this['_lastY']=hr);}['_handleWhe'+'el'](_0x4e7ea1){this['_enabled']&&(this['_calcMouse'+'Coords'](_0x4e7ea1),this['_onElement'+'MouseEvent']('mousewheel',_0x4e7ea1));}['_determine'+'TouchedEle'+'ments'](_0x243af3){const _0x1b3a0d={},_0x17877e=this['app']['systems']['camera']['cameras'];for(let _0xf18fbd=_0x17877e['length']-(0xd*-0x175+0x1b2b*-0x1+0x2e1d);_0xf18fbd>=0xb25+0x8ef*-0x1+0x2*-0x11b;_0xf18fbd--){const _0x589cfc=_0x17877e[_0xf18fbd];let _0x5eaab6=0x1*-0x3e3+0x2*0x114a+-0x1eb1;const _0x180b4b=_0x243af3['changedTou'+'ches']['length'];for(let _0x1afe5f=-0x6fd*-0x3+-0x9d*-0x5+-0x1808;_0x1afe5f<_0x180b4b;_0x1afe5f++){if(_0x1b3a0d[_0x243af3['changedTou'+'ches'][_0x1afe5f]['identifier']]){_0x5eaab6++;continue;}const _0x2ec576=Wc(_0x243af3['changedTou'+'ches'][_0x1afe5f]),_0xbca7e6=this['_getTarget'+'ElementByC'+'oords'](_0x589cfc,_0x2ec576['x'],_0x2ec576['y']);_0xbca7e6&&(_0x5eaab6++,_0x1b3a0d[_0x243af3['changedTou'+'ches'][_0x1afe5f]['identifier']]={'element':_0xbca7e6,'camera':_0x589cfc,'x':_0x2ec576['x'],'y':_0x2ec576['y']});}if(_0x5eaab6===_0x180b4b)break;}return _0x1b3a0d;}['_handleTou'+'chStart'](_0xf5aba1){if(!this['_enabled'])return;const _0x27a913=this['_determine'+'TouchedEle'+'ments'](_0xf5aba1);for(let _0x2fd2ba=0x6*0x397+-0x15f3+0x15*0x5,_0x3cfb67=_0xf5aba1['changedTou'+'ches']['length'];_0x2fd2ba<_0x3cfb67;_0x2fd2ba++){const _0x2b23fd=_0xf5aba1['changedTou'+'ches'][_0x2fd2ba],_0xede208=_0x27a913[_0x2b23fd['identifier']],_0x70e5c6=this['_touchedEl'+'ements'][_0x2b23fd['identifier']];_0xede208&&(!_0x70e5c6||_0xede208['element']!==_0x70e5c6['element'])&&(this['_fireEvent'](_0xf5aba1['type'],new Ao(_0xf5aba1,_0xede208['element'],_0xede208['camera'],_0xede208['x'],_0xede208['y'],_0x2b23fd)),this['_touchesFo'+'rWhichTouc'+'hLeaveHasF'+'ired'][_0x2b23fd['identifier']]=!(-0x1006+-0x1007+-0x16*-0x175));}for(const _0x3988ba in _0x27a913)this['_touchedEl'+'ements'][_0x3988ba]=_0x27a913[_0x3988ba];}['_handleTou'+'chEnd'](_0x3c2558){if(!this['_enabled'])return;const _0x4ea60b=this['app']['systems']['camera']['cameras'];for(const _0x5769d5 in this['_clickedEn'+'tities'])delete this['_clickedEn'+'tities'][_0x5769d5];for(let _0x182bf1=0x1b7f+-0x201b+0x49c,_0x492e56=_0x3c2558['changedTou'+'ches']['length'];_0x182bf1<_0x492e56;_0x182bf1++){const _0x3711bd=_0x3c2558['changedTou'+'ches'][_0x182bf1],_0x19bfca=this['_touchedEl'+'ements'][_0x3711bd['identifier']];if(!_0x19bfca)continue;const _0x2f699b=_0x19bfca['element'],_0x431882=_0x19bfca['camera'],_0x57401c=_0x19bfca['x'],_0x3d013b=_0x19bfca['y'];delete this['_touchedEl'+'ements'][_0x3711bd['identifier']],delete this['_touchesFo'+'rWhichTouc'+'hLeaveHasF'+'ired'][_0x3711bd['identifier']];const _0x53b0b9=Wc(_0x3711bd);for(let _0x2e7211=_0x4ea60b['length']-(0x797*0x1+0xff2+0x4*-0x5e2);_0x2e7211>=0x1231+0x533*0x3+0x19*-0x15a;_0x2e7211--)this['_getTarget'+'ElementByC'+'oords'](_0x4ea60b[_0x2e7211],_0x53b0b9['x'],_0x53b0b9['y'])===_0x2f699b&&(this['_clickedEn'+'tities'][_0x2f699b['entity']['getGuid']()]||(this['_fireEvent']('click',new Ao(_0x3c2558,_0x2f699b,_0x431882,_0x57401c,_0x3d013b,_0x3711bd)),this['_clickedEn'+'tities'][_0x2f699b['entity']['getGuid']()]=Date['now']()));this['_fireEvent'](_0x3c2558['type'],new Ao(_0x3c2558,_0x2f699b,_0x431882,_0x57401c,_0x3d013b,_0x3711bd));}}['_handleTou'+'chMove'](_0x47ee95){if(_0x47ee95['preventDef'+'ault'](),!this['_enabled'])return;const _0x2db81b=this['_determine'+'TouchedEle'+'ments'](_0x47ee95);for(let _0x255cc8=-0x85*0x38+0x85*-0x31+0x368d,_0x3ea2b8=_0x47ee95['changedTou'+'ches']['length'];_0x255cc8<_0x3ea2b8;_0x255cc8++){const _0x482a7=_0x47ee95['changedTou'+'ches'][_0x255cc8],_0x4bcc59=_0x2db81b[_0x482a7['identifier']],_0x830d40=this['_touchedEl'+'ements'][_0x482a7['identifier']];if(_0x830d40){const _0x4cefe1=Wc(_0x482a7);(!_0x4bcc59||_0x4bcc59['element']!==_0x830d40['element'])&&!this['_touchesFo'+'rWhichTouc'+'hLeaveHasF'+'ired'][_0x482a7['identifier']]&&(this['_fireEvent']('touchleave',new Ao(_0x47ee95,_0x830d40['element'],_0x830d40['camera'],_0x4cefe1['x'],_0x4cefe1['y'],_0x482a7)),this['_touchesFo'+'rWhichTouc'+'hLeaveHasF'+'ired'][_0x482a7['identifier']]=!(0x1274+0x1e9e+-0x3112)),this['_fireEvent']('touchmove',new Ao(_0x47ee95,_0x830d40['element'],_0x830d40['camera'],_0x4cefe1['x'],_0x4cefe1['y'],_0x482a7));}}}['_onElement'+'MouseEvent'](_0x18587c,_0x571e83){let _0x55d2df=null;const _0x51263d=this['_hoveredEl'+'ement'];this['_hoveredEl'+'ement']=null;const _0x3e2c7b=this['app']['systems']['camera']['cameras'];let _0x104030;for(let _0x462cf5=_0x3e2c7b['length']-(0x49a*0x1+-0x1359+0x8*0x1d8);_0x462cf5>=-0x3b9+-0x4e*0x4+0x1*0x4f1&&(_0x104030=_0x3e2c7b[_0x462cf5],_0x55d2df=this['_getTarget'+'ElementByC'+'oords'](_0x104030,cr,hr),!_0x55d2df);_0x462cf5--);if(this['_hoveredEl'+'ement']=_0x55d2df,(_0x18587c==='mousemove'||_0x18587c==='mouseup')&&this['_pressedEl'+'ement']?this['_fireEvent'](_0x18587c,new bo(_0x571e83,this['_pressedEl'+'ement'],_0x104030,cr,hr,this['_lastX'],this['_lastY'])):_0x55d2df&&(this['_fireEvent'](_0x18587c,new bo(_0x571e83,_0x55d2df,_0x104030,cr,hr,this['_lastX'],this['_lastY'])),_0x18587c==='mousedown'&&(this['_pressedEl'+'ement']=_0x55d2df)),_0x51263d!==this['_hoveredEl'+'ement']&&(_0x51263d&&this['_fireEvent']('mouseleave',new bo(_0x571e83,_0x51263d,_0x104030,cr,hr,this['_lastX'],this['_lastY'])),this['_hoveredEl'+'ement']&&this['_fireEvent']('mouseenter',new bo(_0x571e83,this['_hoveredEl'+'ement'],_0x104030,cr,hr,this['_lastX'],this['_lastY']))),_0x18587c==='mouseup'&&this['_pressedEl'+'ement']){if(this['_pressedEl'+'ement']===this['_hoveredEl'+'ement']){const _0x4f4d53=this['_hoveredEl'+'ement']['entity']['getGuid']();let _0x151933=!this['_clickedEn'+'tities'];if(this['_clickedEn'+'tities']){const _0x52ff9f=this['_clickedEn'+'tities'][_0x4f4d53]||-0xc*-0x2d3+0x175*-0x18+0x114;_0x151933=Date['now']()-_0x52ff9f>0x1925*0x1+0x21*-0x1d+0x5*-0x40c,delete this['_clickedEn'+'tities'][_0x4f4d53];}_0x151933&&this['_fireEvent']('click',new bo(_0x571e83,this['_hoveredEl'+'ement'],_0x104030,cr,hr,this['_lastX'],this['_lastY']));}this['_pressedEl'+'ement']=null;}}['_onXrStart'](){this['app']['xr']['on']('end',this['_onXrEnd'],this),this['app']['xr']['on']('update',this['_onXrUpdat'+'e'],this),this['app']['xr']['input']['on']('selectstar'+'t',this['_onSelectS'+'tart'],this),this['app']['xr']['input']['on']('selectend',this['_onSelectE'+'nd'],this),this['app']['xr']['input']['on']('remove',this['_onXrInput'+'Remove'],this);}['_onXrEnd'](){this['app']['xr']['off']('update',this['_onXrUpdat'+'e'],this),this['app']['xr']['input']['off']('selectstar'+'t',this['_onSelectS'+'tart'],this),this['app']['xr']['input']['off']('selectend',this['_onSelectE'+'nd'],this),this['app']['xr']['input']['off']('remove',this['_onXrInput'+'Remove'],this);}['_onXrUpdat'+'e'](){if(!this['_enabled'])return;const _0x41b273=this['app']['xr']['input']['inputSourc'+'es'];for(let _0x792062=-0x19f8+0x9*0x361+-0x471;_0x792062<_0x41b273['length'];_0x792062++)this['_onElement'+'SelectEven'+'t']('selectmove',_0x41b273[_0x792062],null);}['_onXrInput'+'Remove'](_0x2cc4e0){const _0x38c843=this['_selectedE'+'lements'][_0x2cc4e0['id']];_0x38c843&&(_0x2cc4e0['_elementEn'+'tity']=null,this['_fireEvent']('selectleav'+'e',new dr(null,_0x38c843,null,_0x2cc4e0))),delete this['_selectedE'+'lements'][_0x2cc4e0['id']],delete this['_selectedP'+'ressedElem'+'ents'][_0x2cc4e0['id']];}['_onSelectS'+'tart'](_0x3a35f5,_0xd9abe7){this['_enabled']&&this['_onElement'+'SelectEven'+'t']('selectstar'+'t',_0x3a35f5,_0xd9abe7);}['_onSelectE'+'nd'](_0xd5b86c,_0x4e737a){this['_enabled']&&this['_onElement'+'SelectEven'+'t']('selectend',_0xd5b86c,_0x4e737a);}['_onElement'+'SelectEven'+'t'](_0x28acd8,_0x274286,_0x3193dd){let _0x20ef88;const _0x46fab8=this['_selectedE'+'lements'][_0x274286['id']];let _0xdafe56;const _0x2213ea=this['app']['systems']['camera']['cameras'];let _0x18873d;if(_0x274286['elementInp'+'ut']){ep['set'](_0x274286['getOrigin'](),_0x274286['getDirecti'+'on']());for(let _0x2f8c02=_0x2213ea['length']-(-0x9e*0x39+0x2f*0xc5+-0x1c*0x9);_0x2f8c02>=0x2153*0x1+0x111+0x7c*-0x47&&(_0x18873d=_0x2213ea[_0x2f8c02],_0x20ef88=this['_getTarget'+'ElementByR'+'ay'](ep,_0x18873d),!_0x20ef88);_0x2f8c02--);}_0x274286['_elementEn'+'tity']=_0x20ef88||null,_0x20ef88?(this['_selectedE'+'lements'][_0x274286['id']]=_0x20ef88,_0xdafe56=_0x20ef88):delete this['_selectedE'+'lements'][_0x274286['id']],_0x46fab8!==_0xdafe56&&(_0x46fab8&&this['_fireEvent']('selectleav'+'e',new dr(_0x3193dd,_0x46fab8,_0x18873d,_0x274286)),_0xdafe56&&this['_fireEvent']('selectente'+'r',new dr(_0x3193dd,_0xdafe56,_0x18873d,_0x274286)));const _0x51f985=this['_selectedP'+'ressedElem'+'ents'][_0x274286['id']];_0x28acd8==='selectmove'&&_0x51f985&&this['_fireEvent']('selectmove',new dr(_0x3193dd,_0x51f985,_0x18873d,_0x274286)),_0x28acd8==='selectstar'+'t'&&(this['_selectedP'+'ressedElem'+'ents'][_0x274286['id']]=_0xdafe56,_0xdafe56&&this['_fireEvent']('selectstar'+'t',new dr(_0x3193dd,_0xdafe56,_0x18873d,_0x274286))),!_0x274286['elementInp'+'ut']&&_0x51f985&&(delete this['_selectedP'+'ressedElem'+'ents'][_0x274286['id']],_0x46fab8&&this['_fireEvent']('selectend',new dr(_0x3193dd,_0x51f985,_0x18873d,_0x274286))),_0x28acd8==='selectend'&&_0x274286['elementInp'+'ut']&&(delete this['_selectedP'+'ressedElem'+'ents'][_0x274286['id']],_0x51f985&&this['_fireEvent']('selectend',new dr(_0x3193dd,_0x51f985,_0x18873d,_0x274286)),_0x51f985&&_0x51f985===_0x46fab8&&this['_fireEvent']('click',new dr(_0x3193dd,_0x51f985,_0x18873d,_0x274286)));}['_fireEvent'](_0x5814fa,_0x2f6eb4){let _0x2107a6=_0x2f6eb4['element'];for(;_0x2107a6['fire'](_0x5814fa,_0x2f6eb4),!(_0x2f6eb4['_stopPropa'+'gation']||!_0x2107a6['entity']['parent']||(_0x2107a6=_0x2107a6['entity']['parent']['element'],!_0x2107a6)););}['_calcMouse'+'Coords'](_0x42e324){const _0x10deda=this['_target']['getBoundin'+'gClientRec'+'t'](),_0x5cedb4=Math['floor'](_0x10deda['left']),_0x387652=Math['floor'](_0x10deda['top']);cr=_0x42e324['clientX']-_0x5cedb4,hr=_0x42e324['clientY']-_0x387652;}['_sortEleme'+'nts'](_0x1040fb,_0x233413){const _0x27c3c4=this['app']['scene']['layers']['sortTransp'+'arentLayer'+'s'](_0x1040fb['layers'],_0x233413['layers']);return _0x27c3c4!==0x29*-0x2+0x9d9*-0x3+0x5*0x5f9?_0x27c3c4:_0x1040fb['screen']&&!_0x233413['screen']?-(-0x1003*0x1+-0x116f*0x2+-0xd*-0x3ea):!_0x1040fb['screen']&&_0x233413['screen']?0x113+-0x7*0x106+-0x78*-0xd:!_0x1040fb['screen']&&!_0x233413['screen']?-0x5b+-0x3ba+0x415:_0x1040fb['screen']['screen']['screenSpac'+'e']&&!_0x233413['screen']['screen']['screenSpac'+'e']?-(0x3b*0x58+0x22eb*0x1+-0x3732):_0x233413['screen']['screen']['screenSpac'+'e']&&!_0x1040fb['screen']['screen']['screenSpac'+'e']?0x5*0x6cf+-0xc2a+-0x15e0:_0x233413['drawOrder']-_0x1040fb['drawOrder'];}['_getTarget'+'ElementByC'+'oords'](_0x34a72f,_0x25b882,_0x6d0c60){const _0x3aca63=this['_calculate'+'RayScreen'](_0x25b882,_0x6d0c60,_0x34a72f,Ri)?Ri:null,_0x536ad4=this['_calculate'+'Ray3d'](_0x25b882,_0x6d0c60,_0x34a72f,Ro)?Ro:null;return this['_getTarget'+'Element'](_0x34a72f,_0x3aca63,_0x536ad4);}['_getTarget'+'ElementByR'+'ay'](_0x48924f,_0x2c8ec9){Ri['origin']['copy'](_0x48924f['origin']),Ri['direction']['copy'](_0x48924f['direction']),Ri['end']['copy'](Ri['direction'])['mulScalar'](_0x2c8ec9['farClip']*(-0x2*0xcb5+-0x1*0x473+0x1ddf))['add'](Ri['origin']);const _0x1aae1c=Ri,_0x12c909=_0x2c8ec9['worldToScr'+'een'](_0x1aae1c['origin'],Of),_0x3a80f9=this['_calculate'+'RayScreen'](_0x12c909['x'],_0x12c909['y'],_0x2c8ec9,Ro)?Ro:null;return this['_getTarget'+'Element'](_0x2c8ec9,_0x3a80f9,_0x1aae1c);}['_getTarget'+'Element'](_0xe1ddf6,_0x517023,_0x4a006f){let _0x1ea772=null,_0x4c7bde=(0x1754+-0x935*0x3+-0x37*-0x14)/(0x14ac+-0x1*0x18e3+0x437);this['_elements']['sort'](this['_sortHandl'+'er']);for(let _0x2def24=0xdf*0xa+0x452+-0xd08,_0x211aa5=this['_elements']['length'];_0x2def24<_0x211aa5;_0x2def24++){const _0x15f885=this['_elements'][_0x2def24];if(_0x15f885['layers']['some'](_0x20cfa6=>_0xe1ddf6['layersSet']['has'](_0x20cfa6))){if(_0x15f885['screen']&&_0x15f885['screen']['screen']['screenSpac'+'e']){if(!_0x517023)continue;if(this['_checkElem'+'ent'](_0x517023,_0x15f885,!(-0x5f5+-0x1*-0x1857+0x1a*-0xb5))>=-0x2344+-0x26b1+0x49f5){_0x1ea772=_0x15f885;break;}}else{if(!_0x4a006f)continue;const _0x5be5f0=this['_checkElem'+'ent'](_0x4a006f,_0x15f885,!(-0x11b*0x6+0x104e+-0x9ab));if(_0x5be5f0>=0x1c38+0xce*0x23+0x2*-0x1c31&&(_0x5be5f0<_0x4c7bde&&(_0x1ea772=_0x15f885,_0x4c7bde=_0x5be5f0),_0x15f885['screen'])){_0x1ea772=_0x15f885;break;}}}}return _0x1ea772;}['_calculate'+'RayScreen'](_0x5e3abd,_0x595a9c,_0x1d8e24,_0x24ae63){const _0x336a2f=this['app']['graphicsDe'+'vice']['width'],_0x59d555=this['app']['graphicsDe'+'vice']['height'],_0x1fe2ed=_0x1d8e24['rect']['z']*_0x336a2f,_0x10d8e6=_0x1d8e24['rect']['w']*_0x59d555,_0x475fea=_0x1d8e24['rect']['x']*_0x336a2f,_0x3797be=_0x475fea+_0x1fe2ed,_0x5a1382=(0xcd*-0x13+-0x1fb4*-0x1+-0x1*0x107c-_0x1d8e24['rect']['y'])*_0x59d555,_0x397cb8=_0x5a1382-_0x10d8e6;let _0x4b7108=_0x5e3abd*_0x336a2f/this['_target']['clientWidt'+'h'],_0x3c2ff8=_0x595a9c*_0x59d555/this['_target']['clientHeig'+'ht'];return _0x4b7108>=_0x475fea&&_0x4b7108<=_0x3797be&&_0x3c2ff8<=_0x5a1382&&_0x3c2ff8>=_0x397cb8?(_0x4b7108=_0x336a2f*(_0x4b7108-_0x475fea)/_0x1fe2ed,_0x3c2ff8=_0x59d555*(_0x3c2ff8-_0x397cb8)/_0x10d8e6,_0x3c2ff8=_0x59d555-_0x3c2ff8,_0x24ae63['origin']['set'](_0x4b7108,_0x3c2ff8,-0x1c51*0x1+0x6a*-0x2e+0x2f5e),_0x24ae63['direction']['set'](0xdf*0x23+-0x6*-0x392+-0x33e9,0x1189*0x1+0x1223+-0x23ac,-(-0x4*0x455+-0x763+0x18b8)),_0x24ae63['end']['copy'](_0x24ae63['direction'])['mulScalar'](0x103+0x2*-0xe27+0x1b4d*0x1)['add'](_0x24ae63['origin']),!(-0x1da9+-0x221*0x11+0x41da)):!(-0x166*0xe+0x5*0x59c+-0xc5*0xb);}['_calculate'+'Ray3d'](_0x3e7d8b,_0x429e73,_0x5968ba,_0x35d696){const _0x29d425=this['_target']['clientWidt'+'h'],_0xaefa8b=this['_target']['clientHeig'+'ht'],_0x2fbe44=_0x5968ba['rect']['z']*_0x29d425,_0x116f09=_0x5968ba['rect']['w']*_0xaefa8b,_0x363f65=_0x5968ba['rect']['x']*_0x29d425,_0x5c2dc5=_0x363f65+_0x2fbe44,_0x2618f8=(-0xe7+-0x4*-0x9a9+-0x25bc-_0x5968ba['rect']['y'])*_0xaefa8b,_0x13c1b4=_0x2618f8-_0x116f09;let _0x60b31c=_0x3e7d8b,_0x45b72f=_0x429e73;return _0x3e7d8b>=_0x363f65&&_0x3e7d8b<=_0x5c2dc5&&_0x429e73<=_0x2618f8&&_0x45b72f>=_0x13c1b4?(_0x60b31c=_0x29d425*(_0x60b31c-_0x363f65)/_0x2fbe44,_0x45b72f=_0xaefa8b*(_0x45b72f-_0x13c1b4)/_0x116f09,_0x5968ba['screenToWo'+'rld'](_0x60b31c,_0x45b72f,_0x5968ba['nearClip'],Of),_0x5968ba['screenToWo'+'rld'](_0x60b31c,_0x45b72f,_0x5968ba['farClip'],RS),_0x35d696['origin']['copy'](Of),_0x35d696['direction']['set'](-0x3b*0x83+-0x1cb8+-0x1c9*-0x21,0x1*-0x329+-0x1b1+0x4da,-(0x3d+-0x491+-0x455*-0x1)),_0x35d696['end']['copy'](RS),!(0x26c6+0x26f5+-0x4dbb)):!(0x1d89*0x1+0x6*-0x3e4+-0x630);}['_checkElem'+'ent'](_0x10dc0c,_0x51cd90,_0x9cc06c){if(_0x51cd90['maskedBy']&&this['_checkElem'+'ent'](_0x10dc0c,_0x51cd90['maskedBy']['element'],_0x9cc06c)<-0x1f22+-0x1*0x139+0xb*0x2f1)return-(-0x401+0x1*0xce5+-0x8e3);let _0x28cf52;_0x9cc06c?_0x28cf52=Xo['calculateS'+'caleToScre'+'en'](_0x51cd90):_0x28cf52=Xo['calculateS'+'caleToWorl'+'d'](_0x51cd90);const _0x21c1cb=Xo['buildHitCo'+'rners'](_0x51cd90,_0x9cc06c?_0x51cd90['screenCorn'+'ers']:_0x51cd90['worldCorne'+'rs'],_0x28cf52);return xU(_0x10dc0c['origin'],_0x10dc0c['end'],_0x21c1cb);}static['buildHitCo'+'rners'](_0x1b8246,_0x5b2fa8,_0x6b6581){let _0x58d9e0=_0x5b2fa8;if(_0x1b8246['entity']&&_0x1b8246['entity']['button']){const _0x3b192f=_0x1b8246['entity']['button']['hitPadding']||vU;wo['copy'](_0x1b8246['entity']['up']),Vc['copy'](wo)['mulScalar'](-(0x9e0+0x22b*0x7+0xe5*-0x1c)),Eo['copy'](_0x1b8246['entity']['right']),Gc['copy'](Eo)['mulScalar'](-(-0x1c7*-0xa+-0x1e82*-0x1+0x1*-0x3047)),wo['mulScalar'](_0x3b192f['w']*_0x6b6581['y']),Vc['mulScalar'](_0x3b192f['y']*_0x6b6581['y']),Eo['mulScalar'](_0x3b192f['z']*_0x6b6581['x']),Gc['mulScalar'](_0x3b192f['x']*_0x6b6581['x']),FS['copy'](_0x58d9e0[0x1959+-0x10b6*-0x1+0x6f*-0x61])['add'](Vc)['add'](Gc),NS['copy'](_0x58d9e0[0x6*-0x3d7+-0x50*-0x3d+-0x3fb*-0x1])['add'](Vc)['add'](Eo),kS['copy'](_0x58d9e0[0x25a2+-0x3a*0x44+-0x3b4*0x6])['add'](wo)['add'](Eo),US['copy'](_0x58d9e0[-0x377*0x3+-0x34+0x1c*0x61])['add'](wo)['add'](Gc),_0x58d9e0=[FS,NS,kS,US];}if(_0x6b6581['x']<-0x1195+0x247*0x3+0xac0){const _0x40fda1=_0x58d9e0[0x1d8*0x7+-0x1b9+-0xb2d]['x'],_0x4e5a38=_0x58d9e0[-0xd*-0x25c+-0x1bd1+-0x2db]['x'];_0x58d9e0[0x9fd+-0x1f07+0xa85*0x2]['x']=_0x40fda1,_0x58d9e0[0x41*-0xd+0x1cf0+-0x19a2]['x']=_0x4e5a38,_0x58d9e0[-0x1e1d+-0x299+0x20b8]['x']=_0x4e5a38,_0x58d9e0[0x27e+0xdc0+-0x103b]['x']=_0x40fda1;}if(_0x6b6581['y']<-0xef0+0xd83+0x16d*0x1){const _0x4b3b35=_0x58d9e0[-0x909+0x8e7+0x24]['y'],_0x3ea784=_0x58d9e0[-0xcf4*-0x1+-0x6f0+-0x604]['y'];_0x58d9e0[0x14ec+0x136+0x1*-0x1622]['y']=_0x4b3b35,_0x58d9e0[0x1059*0x2+0xb2b*0x1+-0xaf7*0x4]['y']=_0x4b3b35,_0x58d9e0[-0x165*0x18+-0x253f*0x1+0x3*0x1793]['y']=_0x3ea784,_0x58d9e0[-0x1e8+-0x24e8+0x26d3]['y']=_0x3ea784;}if(_0x6b6581['z']<0xcb5*0x3+0xb3*-0x1+-0x12b6*0x2){const _0x475dc5=_0x58d9e0[-0x1cd*-0x5+-0x1b95+-0x3d*-0x4e]['x'],_0x44ec58=_0x58d9e0[0xfb*0x13+-0x180a+-0x13*-0x49]['y'],_0x55d35c=_0x58d9e0[-0x627+-0x47d+0xaa6]['z'];_0x58d9e0[-0x1*-0x96b+-0x3*-0xbbf+-0x2ca6]['x']=_0x58d9e0[0x579+-0x2aa+-0x2cf*0x1]['x'],_0x58d9e0[-0xec3*0x1+0x18cd+0x358*-0x3]['y']=_0x58d9e0[0x1b9e+-0x1018+0x5*-0x24e]['y'],_0x58d9e0[-0x49*-0x18+-0x2eb*0x7+-0x1f1*-0x7]['z']=_0x58d9e0[0x671*-0x5+-0x26f+0x2*0x1152]['z'],_0x58d9e0[-0x1*-0x23a1+-0x1349+0x82c*-0x2]['x']=_0x475dc5,_0x58d9e0[-0x15a6+0x1d87+-0x1*0x7e1]['y']=_0x44ec58,_0x58d9e0[0xf21+-0x11ab+-0x5*-0x82]['z']=_0x55d35c;}return _0x58d9e0;}static['calculateS'+'caleToScre'+'en'](_0x1e1d8b){let _0x2e92f1=_0x1e1d8b['entity'];const _0x5d5470=_0x1e1d8b['screen']['screen']['scale'];for(tn['set'](_0x5d5470,_0x5d5470,_0x5d5470);_0x2e92f1&&!_0x2e92f1['screen'];)tn['mul'](_0x2e92f1['getLocalSc'+'ale']()),_0x2e92f1=_0x2e92f1['parent'];return tn;}static['calculateS'+'caleToWorl'+'d'](_0x399e54){let _0x5e94eb=_0x399e54['entity'];for(tn['set'](-0x1c92+-0xb5*0x9+-0x34*-0xac,-0x1536+0x1693+-0x15c,0x1242+0xeda+0x5*-0x69f);_0x5e94eb;)tn['mul'](_0x5e94eb['getLocalSc'+'ale']()),_0x5e94eb=_0x5e94eb['parent'];return tn;}}J['prototype']['scale']=J['prototype']['mulScalar'],D['prototype']['scale']=D['prototype']['mulScalar'],re['prototype']['scale']=re['prototype']['mulScalar'],new re();function YU(_0x2b08c6,_0xb833d5){return w['deprecated']('pc.createS'+'phere\x20is\x20d'+'eprecated.'+'\x20Use\x20\x27pc.M'+'esh.fromGe'+'ometry(dev'+'ice,\x20new\x20S'+'phereGeome'+'try(option'+'s);\x27\x20forma'+'t\x20instead.'),Ge['fromGeomet'+'ry'](_0x2b08c6,new _m(_0xb833d5));}Object['defineProp'+'erties'](gt['prototype'],{'_glFrameBuffer':{'get':function(){return w['deprecated']('pc.RenderT'+'arget#_glF'+'rameBuffer'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.RenderT'+'arget.impl'+'#_glFrameB'+'uffer\x20inst'+'ead.'),this['impl']['_glFrameBu'+'ffer'];},'set':function(_0x11d8e3){w['deprecated']('pc.RenderT'+'arget#_glF'+'rameBuffer'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.RenderT'+'arget.impl'+'#_glFrameB'+'uffer\x20inst'+'ead.');}}}),Object['defineProp'+'erty'](kt,'defaultIns'+'tancingFor'+'mat',{'get':function(){return w['assert']('pc.VertexF'+'ormat.defa'+'ultInstanc'+'ingFormat\x20'+'is\x20depreca'+'ted,\x20use\x20p'+'c.VertexFo'+'rmat.getDe'+'faultInsta'+'ncingForma'+'t(graphics'+'Device).'),null;}}),Object['defineProp'+'erties'](_e['prototype'],{'rgbm':{'get':function(){return w['deprecated']('pc.Texture'+'#rgbm\x20is\x20d'+'eprecated.'+'\x20Use\x20pc.Te'+'xture#type'+'\x20instead.'),this['type']===Zi;},'set':function(_0x216697){w['deprecated']('pc.Texture'+'#rgbm\x20is\x20d'+'eprecated.'+'\x20Use\x20pc.Te'+'xture#type'+'\x20instead.'),this['type']=_0x216697?Zi:Ds;}},'swizzleGGGR':{'get':function(){return w['deprecated']('pc.Texture'+'#swizzleGG'+'GR\x20is\x20depr'+'ecated.\x20Us'+'e\x20pc.Textu'+'re#type\x20in'+'stead.'),this['type']===Jo;},'set':function(_0x5afb08){w['deprecated']('pc.Texture'+'#swizzleGG'+'GR\x20is\x20depr'+'ecated.\x20Us'+'e\x20pc.Textu'+'re#type\x20in'+'stead.'),this['type']=_0x5afb08?Jo:Ds;}},'_glTexture':{'get':function(){return w['deprecated']('pc.Texture'+'#_glTextur'+'e\x20is\x20no\x20lo'+'nger\x20avail'+'able,\x20use\x20'+'Use\x20pc.Tex'+'ture.impl.'+'_glTexture'+'\x20instead.'),this['impl']['_glTexture'];}}}),Object['defineProp'+'erty']($e['prototype'],'boneLimit',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#bo'+'neLimit\x20is'+'\x20deprecate'+'d\x20and\x20the\x20'+'limit\x20has\x20'+'been\x20remov'+'ed.'),0xc5*0x1b+-0xc89*-0x2+-0x29d9;}}),Object['defineProp'+'erty']($e['prototype'],'webgl2',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#we'+'bgl2\x20is\x20de'+'precated,\x20'+'use\x20pc.Gra'+'phicsDevic'+'e#isWebGL2'+'\x20instead.'),this['isWebGL2'];}}),Object['defineProp'+'erty']($e['prototype'],'textureFlo'+'atHighPrec'+'ision',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#te'+'xtureFloat'+'HighPrecis'+'ion\x20is\x20dep'+'recated\x20an'+'d\x20always\x20r'+'eturns\x20tru'+'e.'),!(0x26e7+0x3b2*0xa+-0x1949*0x3);}}),Object['defineProp'+'erty']($e['prototype'],'extBlendMi'+'nmax',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#ex'+'tBlendMinm'+'ax\x20is\x20depr'+'ecated\x20as\x20'+'it\x20is\x20alwa'+'ys\x20true.'),!(0x3d*-0x1+-0x1*0x915+0x952);}}),Object['defineProp'+'erty']($e['prototype'],'extTexture'+'HalfFloat',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#ex'+'tTextureHa'+'lfFloat\x20is'+'\x20deprecate'+'d\x20as\x20it\x20is'+'\x20always\x20tr'+'ue.'),!(-0x4*0x17e+0x671*0x3+-0xd5b*0x1);}}),Object['defineProp'+'erty']($e['prototype'],'extTexture'+'Lod',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#ex'+'tTextureLo'+'d\x20is\x20depre'+'cated\x20as\x20i'+'t\x20is\x20alway'+'s\x20true.'),!(-0x121b*0x1+-0x8*-0x4b2+-0x1375);}}),Object['defineProp'+'erty']($e['prototype'],'textureHal'+'fFloatFilt'+'erable',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#te'+'xtureHalfF'+'loatFilter'+'able\x20is\x20de'+'precated\x20a'+'s\x20it\x20is\x20al'+'ways\x20true.'),!(0x22d2+0x3d*0x76+-0x3ef0);}}),Object['defineProp'+'erty']($e['prototype'],'supportsMr'+'t',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#su'+'pportsMrt\x20'+'is\x20depreca'+'ted\x20as\x20it\x20'+'is\x20always\x20'+'true.'),!(-0x2194+-0x24ac+0x4640);}}),Object['defineProp'+'erty']($e['prototype'],'supportsVo'+'lumeTextur'+'es',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#su'+'pportsVolu'+'meTextures'+'\x20is\x20deprec'+'ated\x20as\x20it'+'\x20is\x20always'+'\x20true.'),!(-0xfaa+-0x24d8+-0x4c6*-0xb);}}),Object['defineProp'+'erty']($e['prototype'],'supportsIn'+'stancing',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#su'+'pportsInst'+'ancing\x20is\x20'+'deprecated'+'\x20as\x20it\x20is\x20'+'always\x20tru'+'e.'),!(0x5*-0x175+0x1*0x1e67+-0x1*0x171e);}}),Object['defineProp'+'erty']($e['prototype'],'textureHal'+'fFloatUpda'+'table',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#te'+'xtureHalfF'+'loatUpdata'+'ble\x20is\x20dep'+'recated\x20as'+'\x20it\x20is\x20alw'+'ays\x20true.'),!(-0x2387+0xc04+0x1783*0x1);}}),Object['defineProp'+'erty']($e['prototype'],'extTexture'+'Float',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#ex'+'tTextureFl'+'oat\x20is\x20dep'+'recated\x20as'+'\x20it\x20is\x20alw'+'ays\x20true'),!(-0x1ea6+-0xef4+0x2d9a);}}),Object['defineProp'+'erty']($e['prototype'],'extStandar'+'dDerivativ'+'es',{'get':function(){return w['deprecated']('pc.Graphic'+'sDevice#ex'+'tStandardD'+'erivatives'+'\x20is\x20deprec'+'ated\x20as\x20it'+'\x20is\x20always'+'\x20true.'),!(0x1*-0xd36+-0x200c+0x2d42);}}),pt['DEFAULT']=Object['freeze'](new pt());const ut=new pt(),ji=new Yt();$e['prototype']['setBlendFu'+'nction']=function(_0xfb8d62,_0x289995){w['deprecated']('pc.Graphic'+'sDevice#se'+'tBlendFunc'+'tion\x20is\x20de'+'precated,\x20'+'use\x20pc.Gra'+'phicsDevic'+'e.setBlend'+'State\x20inst'+'ead.');const _0x417499=this['blendState'];ut['copy'](_0x417499),ut['setColorBl'+'end'](_0x417499['colorOp'],_0xfb8d62,_0x289995),ut['setAlphaBl'+'end'](_0x417499['alphaOp'],_0xfb8d62,_0x289995),this['setBlendSt'+'ate'](ut);},$e['prototype']['setBlendFu'+'nctionSepa'+'rate']=function(_0x3dc0a6,_0x4023f1,_0x37ae6a,_0x502eb1){w['deprecated']('pc.Graphic'+'sDevice#se'+'tBlendFunc'+'tionSepara'+'te\x20is\x20depr'+'ecated,\x20us'+'e\x20pc.Graph'+'icsDevice.'+'setBlendSt'+'ate\x20instea'+'d.');const _0x3da468=this['blendState'];ut['copy'](_0x3da468),ut['setColorBl'+'end'](_0x3da468['colorOp'],_0x3dc0a6,_0x4023f1),ut['setAlphaBl'+'end'](_0x3da468['alphaOp'],_0x37ae6a,_0x502eb1),this['setBlendSt'+'ate'](ut);},$e['prototype']['setBlendEq'+'uation']=function(_0x16be44){w['deprecated']('pc.Graphic'+'sDevice#se'+'tBlendEqua'+'tion\x20is\x20de'+'precated,\x20'+'use\x20pc.Gra'+'phicsDevic'+'e.setBlend'+'State\x20inst'+'ead.');const _0x2ec7c1=this['blendState'];ut['copy'](_0x2ec7c1),ut['setColorBl'+'end'](_0x16be44,_0x2ec7c1['colorSrcFa'+'ctor'],_0x2ec7c1['colorDstFa'+'ctor']),ut['setAlphaBl'+'end'](_0x16be44,_0x2ec7c1['alphaSrcFa'+'ctor'],_0x2ec7c1['alphaDstFa'+'ctor']),this['setBlendSt'+'ate'](ut);},$e['prototype']['setBlendEq'+'uationSepa'+'rate']=function(_0x216f66,_0x38c6c3){w['deprecated']('pc.Graphic'+'sDevice#se'+'tBlendEqua'+'tionSepara'+'te\x20is\x20depr'+'ecated,\x20us'+'e\x20pc.Graph'+'icsDevice.'+'setBlendSt'+'ate\x20instea'+'d.');const _0x5d8360=this['blendState'];ut['copy'](_0x5d8360),ut['setColorBl'+'end'](_0x216f66,_0x5d8360['colorSrcFa'+'ctor'],_0x5d8360['colorDstFa'+'ctor']),ut['setAlphaBl'+'end'](_0x38c6c3,_0x5d8360['alphaSrcFa'+'ctor'],_0x5d8360['alphaDstFa'+'ctor']),this['setBlendSt'+'ate'](ut);},$e['prototype']['setColorWr'+'ite']=function(_0x8bac4b,_0x32997f,_0xda6231,_0x34a7ea){w['deprecated']('pc.Graphic'+'sDevice#se'+'tColorWrit'+'e\x20is\x20depre'+'cated,\x20use'+'\x20pc.Graphi'+'csDevice.s'+'etBlendSta'+'te\x20instead'+'.');const _0x108dd8=this['blendState'];ut['copy'](_0x108dd8),ut['setColorWr'+'ite'](_0x8bac4b,_0x32997f,_0xda6231,_0x34a7ea),this['setBlendSt'+'ate'](ut);},$e['prototype']['getBlendin'+'g']=function(){return this['blendState']['blend'];},$e['prototype']['setBlendin'+'g']=function(_0x323766){w['deprecated']('pc.Graphic'+'sDevice#se'+'tBlending\x20'+'is\x20depreca'+'ted,\x20use\x20p'+'c.Graphics'+'Device.set'+'BlendState'+'\x20instead.'),ut['copy'](this['blendState']),ut['blend']=_0x323766,this['setBlendSt'+'ate'](ut);},$e['prototype']['setDepthWr'+'ite']=function(_0xc6a6a1){w['deprecated']('pc.Graphic'+'sDevice#se'+'tDepthWrit'+'e\x20is\x20depre'+'cated,\x20use'+'\x20pc.Graphi'+'csDevice.s'+'etDepthSta'+'te\x20instead'+'.'),ji['copy'](this['depthState']),ji['write']=_0xc6a6a1,this['setDepthSt'+'ate'](ji);},$e['prototype']['setDepthFu'+'nc']=function(_0x3f84b3){w['deprecated']('pc.Graphic'+'sDevice#se'+'tDepthFunc'+'\x20is\x20deprec'+'ated,\x20use\x20'+'pc.Graphic'+'sDevice.se'+'tDepthStat'+'e\x20instead.'),ji['copy'](this['depthState']),ji['func']=_0x3f84b3,this['setDepthSt'+'ate'](ji);},$e['prototype']['setDepthTe'+'st']=function(_0x58084c){w['deprecated']('pc.Graphic'+'sDevice#se'+'tDepthTest'+'\x20is\x20deprec'+'ated,\x20use\x20'+'pc.Graphic'+'sDevice.se'+'tDepthStat'+'e\x20instead.'),ji['copy'](this['depthState']),ji['test']=_0x58084c,this['setDepthSt'+'ate'](ji);},$e['prototype']['getCullMod'+'e']=function(){return this['cullMode'];},new Proxy({},{'get'(_0x481c28,_0x1e28fc){return w['deprecated']('Using\x20pc.s'+'haderChunk'+'s\x20to\x20acces'+'s\x20global\x20s'+'hader\x20chun'+'ks\x20is\x20depr'+'ecated.\x20Us'+'e\x20pc.Shade'+'rChunks.ge'+'t\x20instead,'+'\x20for\x20examp'+'le:\x20pc.Sha'+'derChunks.'+'get(this.a'+'pp.graphic'+'sDevice,\x20p'+'c.SHADERLA'+'NGUAGE_GLS'+'L).get(\x27'+_0x1e28fc+'\x27);'),Pe['get'](Ms()['graphicsDe'+'vice'],Fe)['get'](_0x1e28fc);},'set'(_0x567d6d,_0x57883e,_0x29d9a7){return w['deprecated']('Using\x20pc.s'+'haderChunk'+'s\x20to\x20overr'+'ide\x20global'+'\x20shader\x20ch'+'unks\x20is\x20de'+'precated.\x20'+'Use\x20pc.Sha'+'derChunks.'+'get\x20instea'+'d,\x20for\x20exa'+'mple:\x20pc.S'+'haderChunk'+'s.get(this'+'.app.graph'+'icsDevice,'+'\x20pc.SHADER'+'LANGUAGE_G'+'LSL).set(\x27'+_0x57883e+'\x27);'),Pe['get'](Ms()['graphicsDe'+'vice'],Fe)['set'](_0x57883e,_0x29d9a7),!(-0x126c+-0x1cc+0x1438);}}),Object['defineProp'+'erty'](Et['prototype'],'defaultMat'+'erial',{'get':function(){return w['deprecated']('pc.Scene#d'+'efaultMate'+'rial\x20is\x20de'+'precated.'),Qn(Ms()['graphicsDe'+'vice']);}}),Object['defineProp'+'erty'](Et['prototype'],'fogColor',{'set':function(_0x26489d){w['deprecated']('Scene#fogC'+'olor\x20is\x20de'+'precated.\x20'+'Use\x20Scene#'+'fog.color\x20'+'instead.'),this['fog']['color']=_0x26489d;},'get':function(){return w['deprecated']('Scene#fogC'+'olor\x20is\x20de'+'precated.\x20'+'Use\x20Scene#'+'fog.color\x20'+'instead.'),this['fog']['color'];}}),Object['defineProp'+'erty'](Et['prototype'],'fogEnd',{'set':function(_0x54680e){w['deprecated']('Scene#fogE'+'nd\x20is\x20depr'+'ecated.\x20Us'+'e\x20Scene#fo'+'g.end\x20inst'+'ead.'),this['fog']['end']=_0x54680e;},'get':function(){return w['deprecated']('Scene#fogE'+'nd\x20is\x20depr'+'ecated.\x20Us'+'e\x20Scene#fo'+'g.end\x20inst'+'ead.'),this['fog']['end'];}}),Object['defineProp'+'erty'](Et['prototype'],'fogStart',{'set':function(_0xf1a803){w['deprecated']('Scene#fogS'+'tart\x20is\x20de'+'precated.\x20'+'Use\x20Scene#'+'fog.start\x20'+'instead.'),this['fog']['start']=_0xf1a803;},'get':function(){return w['deprecated']('Scene#fogS'+'tart\x20is\x20de'+'precated.\x20'+'Use\x20Scene#'+'fog.start\x20'+'instead.'),this['fog']['start'];}}),Object['defineProp'+'erty'](Et['prototype'],'fogDensity',{'set':function(_0x359588){w['deprecated']('Scene#fogD'+'ensity\x20is\x20'+'deprecated'+'.\x20Use\x20Scen'+'e#fog.dens'+'ity\x20instea'+'d.'),this['fog']['density']=_0x359588;},'get':function(){return w['deprecated']('Scene#fogD'+'ensity\x20is\x20'+'deprecated'+'.\x20Use\x20Scen'+'e#fog.dens'+'ity\x20instea'+'d.'),this['fog']['density'];}}),Object['defineProp'+'erty'](Et['prototype'],'toneMappin'+'g',{'set':function(_0x8177da){w['removed']('Scene#tone'+'Mapping\x20is'+'\x20removed.\x20'+'Use\x20Camera'+'Component#'+'toneMappin'+'g\x20instead.');},'get':function(){w['removed']('Scene#tone'+'Mapping\x20is'+'\x20removed.\x20'+'Use\x20Camera'+'Component#'+'toneMappin'+'g\x20instead.');}}),Object['defineProp'+'erty'](Et['prototype'],'gammaCorre'+'ction',{'set':function(_0x27c041){w['removed']('Scene#gamm'+'aCorrectio'+'n\x20is\x20remov'+'ed.\x20Use\x20Ca'+'meraCompon'+'ent#gammaC'+'orrection\x20'+'instead.');},'get':function(){w['removed']('Scene#gamm'+'aCorrectio'+'n\x20is\x20remov'+'ed.\x20Use\x20Ca'+'meraCompon'+'ent#gammaC'+'orrection\x20'+'instead.');}}),Object['defineProp'+'erty'](Et['prototype'],'rendering',{'set':function(_0x2224bb){w['removed']('Scene#rend'+'ering\x20is\x20r'+'emoved.\x20Us'+'e\x20Scene#fo'+'g\x20or\x20Camer'+'aComponent'+'#gammaCorr'+'ection\x20or\x20'+'CameraComp'+'onent#tone'+'Mapping\x20in'+'stead.');},'get':function(){w['removed']('Scene#rend'+'ering\x20is\x20r'+'emoved.\x20Us'+'e\x20Scene#fo'+'g\x20or\x20Camer'+'aComponent'+'#gammaCorr'+'ection\x20or\x20'+'CameraComp'+'onent#tone'+'Mapping\x20in'+'stead.');}}),Object['defineProp'+'erty'](du['prototype'],'_meshInsta'+'nces',{'get':function(){return w['deprecated']('pc.LayerCo'+'mposition#'+'_meshInsta'+'nces\x20is\x20de'+'precated.'),null;}}),Object['defineProp'+'erty'](Et['prototype'],'drawCalls',{'get':function(){return w['deprecated']('pc.Scene#d'+'rawCalls\x20i'+'s\x20deprecat'+'ed\x20and\x20no\x20'+'longer\x20pro'+'vides\x20mesh'+'\x20instances'+'.'),null;}}),['128','64','32','16','8','4']['forEach']((_0x1303e5,_0x4471bf)=>{Object['defineProp'+'erty'](Et['prototype'],'skyboxPref'+'iltered'+_0x1303e5,{'get':function(){return w['deprecated']('pc.Scene#s'+'kyboxPrefi'+'ltered'+_0x1303e5+('\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.Scene#p'+'refiltered'+'Cubemaps\x20i'+'nstead.')),this['_prefilter'+'edCubemaps'][_0x4471bf];},'set':function(_0x3a1f64){w['deprecated']('pc.Scene#s'+'kyboxPrefi'+'ltered'+_0x1303e5+('\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.Scene#p'+'refiltered'+'Cubemaps\x20i'+'nstead.')),this['_prefilter'+'edCubemaps'][_0x4471bf]=_0x3a1f64,this['updateShad'+'ers']=!(0x4*0x509+0xa13*-0x3+0xa15);}});}),Object['defineProp'+'erty'](Et['prototype'],'models',{'get':function(){return this['_models']||(this['_models']=[]),this['_models'];}});function Bt(_0x2457d3,_0x151de1,_0x48a4e3=''){Object['defineProp'+'erty'](_0x2457d3['prototype'],_0x151de1,{'set':function(_0x3a4d82){w['errorOnce'](_0x2457d3['name']+'#'+_0x151de1+('\x20has\x20been\x20'+'removed.\x20')+_0x48a4e3);},'get':function(){w['errorOnce'](_0x2457d3['name']+'#'+_0x151de1+('\x20has\x20been\x20'+'removed.\x20')+_0x48a4e3);}});}Bt(Ot,'renderTarg'+'et'),Bt(Ot,'onPreCull'),Bt(Ot,'onPreRende'+'r'),Bt(Ot,'onPreRende'+'rOpaque'),Bt(Ot,'onPreRende'+'rTranspare'+'nt'),Bt(Ot,'onPostCull'),Bt(Ot,'onPostRend'+'er'),Bt(Ot,'onPostRend'+'erOpaque'),Bt(Ot,'onPostRend'+'erTranspar'+'ent'),Bt(Ot,'onDrawCall'),Bt(Ot,'layerRefer'+'ence'),Bt(Ir,'onPreCull','Use\x20Scene#'+'EVENT_PREC'+'ULL\x20event\x20'+'instead.'),Bt(Ir,'onPostCull','Use\x20Scene#'+'EVENT_POST'+'CULL\x20event'+'\x20instead.'),Bt(Ir,'onPreRende'+'r','Use\x20Scene#'+'EVENT_PRER'+'ENDER\x20even'+'t\x20instead.'),Bt(Ir,'onPostRend'+'er','Use\x20Scene#'+'EVENT_POST'+'RENDER\x20eve'+'nt\x20instead'+'.'),Bt(Ir,'onPreRende'+'rLayer','Use\x20Scene#'+'EVENT_PRER'+'ENDER_LAYE'+'R\x20event\x20in'+'stead.'),Bt(Ir,'onPostRend'+'erLayer','Use\x20Scene#'+'EVENT_POST'+'RENDER_LAY'+'ER\x20event\x20i'+'nstead.'),fl['prototype']['renderComp'+'osition']=function(_0x18b6ba){w['deprecated']('pc.Forward'+'Renderer#r'+'enderCompo'+'sition\x20is\x20'+'deprecated'+'.\x20Use\x20pc.A'+'ppBase.ren'+'derComposi'+'tion\x20inste'+'ad.'),Ms()['renderComp'+'osition'](_0x18b6ba);},He['prototype']['syncAabb']=function(){w['deprecated']('pc.MeshIns'+'tance#sync'+'Aabb\x20is\x20de'+'precated.');},mm['prototype']['getTarget']=function(_0x3b2b94){return w['deprecated']('pc.Morph#g'+'etTarget\x20i'+'s\x20deprecat'+'ed.\x20Use\x20pc'+'.Morph#tar'+'gets\x20inste'+'ad.'),this['targets'][_0x3b2b94];},Ie['prototype']['getChildre'+'n']=function(){return w['deprecated']('pc.GraphNo'+'de#getChil'+'dren\x20is\x20de'+'precated.\x20'+'Use\x20pc.Gra'+'phNode#chi'+'ldren\x20inst'+'ead.'),this['children'];},Ie['prototype']['getName']=function(){return w['deprecated']('pc.GraphNo'+'de#getName'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.GraphNo'+'de#name\x20in'+'stead.'),this['name'];},Ie['prototype']['getPath']=function(){return w['deprecated']('pc.GraphNo'+'de#getPath'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.GraphNo'+'de#path\x20in'+'stead.'),this['path'];},Ie['prototype']['getRoot']=function(){return w['deprecated']('pc.GraphNo'+'de#getRoot'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.GraphNo'+'de#root\x20in'+'stead.'),this['root'];},Ie['prototype']['getParent']=function(){return w['deprecated']('pc.GraphNo'+'de#getPare'+'nt\x20is\x20depr'+'ecated.\x20Us'+'e\x20pc.Graph'+'Node#paren'+'t\x20instead.'),this['parent'];},Ie['prototype']['setName']=function(_0x5e828d){w['deprecated']('pc.GraphNo'+'de#setName'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.GraphNo'+'de#name\x20in'+'stead.'),this['name']=_0x5e828d;},Object['defineProp'+'erty'](tr['prototype'],'shader',{'set':function(_0x2c61ad){w['deprecated']('pc.Materia'+'l#shader\x20i'+'s\x20deprecat'+'ed,\x20use\x20pc'+'.ShaderMat'+'erial\x20inst'+'ead.');},'get':function(){return w['deprecated']('pc.Materia'+'l#shader\x20i'+'s\x20deprecat'+'ed,\x20use\x20pc'+'.ShaderMat'+'erial\x20inst'+'ead.'),null;}}),Object['defineProp'+'erty'](tr['prototype'],'blend',{'set':function(_0x18bacb){w['deprecated']('pc.Materia'+'l#blend\x20is'+'\x20deprecate'+'d,\x20use\x20pc.'+'Material.b'+'lendState.'),this['blendState']['blend']=_0x18bacb;},'get':function(){return this['blendState']['blend'];}}),Object['defineProp'+'erty'](Ut['prototype'],'shininess',{'get':function(){return this['gloss']*(0xfa4+0x148f+-0x23cf);},'set':function(_0x3aa032){this['gloss']=_0x3aa032*(-0x13*-0xc7+0x2527+-0x33ec+0.01);}}),Object['defineProp'+'erty'](Ut['prototype'],'useGammaTo'+'nemap',{'get':function(){return this['useTonemap'];},'set':function(_0x4a71fb){this['useTonemap']=_0x4a71fb;}}),Object['defineProp'+'erty'](Ut['prototype'],'anisotropy',{'get':function(){w['deprecated']('pc.Standar'+'dMaterial#'+'anisotropy'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.Standar'+'dMaterial#'+'anisotropy'+'Intensity\x20'+'and\x20pc.Sta'+'ndardMater'+'ial#anisot'+'ropyRotati'+'on\x20instead'+'.');const _0x34fab0=Math['sign'](Math['cos'](this['anisotropy'+'Rotation']*Y['DEG_TO_RAD']*(-0x1efd+0x1160+-0xb*-0x13d)));return this['anisotropy'+'Intensity']*_0x34fab0;},'set':function(_0x1a4d3e){w['deprecated']('pc.Standar'+'dMaterial#'+'anisotropy'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.Standar'+'dMaterial#'+'anisotropy'+'Intensity\x20'+'and\x20pc.Sta'+'ndardMater'+'ial#anisot'+'ropyRotati'+'on\x20instead'+'.'),this['anisotropy'+'Intensity']=Math['abs'](_0x1a4d3e),_0x1a4d3e>=0x1*0x113+-0x1756+0x1643?this['anisotropy'+'Rotation']=-0x21ce*-0x1+0x1*0x1636+0xa*-0x59a:this['anisotropy'+'Rotation']=-0x1c05+0x129b*0x1+-0x2*-0x4e2;}});function Qs(_0x5600c9,_0xdeb23f){Object['defineProp'+'erty'](Ut['prototype'],_0xdeb23f,{'get':function(){return w['deprecated']('pc.Standar'+'dMaterial#'+_0xdeb23f+('\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.Standar'+'dMaterial#')+_0x5600c9+'\x20instead.'),this[_0x5600c9];},'set':function(_0x4a8bb2){w['deprecated']('pc.Standar'+'dMaterial#'+_0xdeb23f+('\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.Standar'+'dMaterial#')+_0x5600c9+'\x20instead.'),this[_0x5600c9]=_0x4a8bb2;}});}function Id(_0x9653ef){Object['defineProp'+'erty'](Ut['prototype'],_0x9653ef,{'get':function(){return w['deprecated']('pc.Standar'+'dMaterial#'+_0x9653ef+('\x20is\x20deprec'+'ated,\x20and\x20'+'the\x20behavi'+'our\x20is\x20as\x20'+'if\x20')+_0x9653ef+('\x20was\x20alway'+'s\x20true')),!(-0x922*-0x3+-0xc2a+0x32*-0x4e);},'set':function(_0x3d3fd8){w['deprecated']('pc.Standar'+'dMaterial#'+_0x9653ef+('\x20is\x20deprec'+'ated,\x20and\x20'+'the\x20behavi'+'our\x20is\x20as\x20'+'if\x20')+_0x9653ef+('\x20was\x20alway'+'s\x20true'));}});}Id('sheenTint'),Id('diffuseTin'+'t'),Id('emissiveTi'+'nt'),Id('ambientTin'+'t'),Qs('specularTi'+'nt','specularMa'+'pTint'),Qs('aoVertexCo'+'lor','aoMapVerte'+'xColor'),Qs('diffuseVer'+'texColor','diffuseMap'+'VertexColo'+'r'),Qs('specularVe'+'rtexColor','specularMa'+'pVertexCol'+'or'),Qs('emissiveVe'+'rtexColor','emissiveMa'+'pVertexCol'+'or'),Qs('metalnessV'+'ertexColor','metalnessM'+'apVertexCo'+'lor'),Qs('glossVerte'+'xColor','glossMapVe'+'rtexColor'),Qs('opacityVer'+'texColor','opacityMap'+'VertexColo'+'r'),Qs('lightVerte'+'xColor','lightMapVe'+'rtexColor'),Qs('sheenGloss','sheenGloss'+'iess'),Qs('clearCoatG'+'loss','clearCostG'+'lossiness');function F0(_0x376941,_0x1a7417){_0x376941!=='pass'&&Object['defineProp'+'erty'](dl['prototype'],_0x376941,{'get':function(){return w['deprecated']('Getting\x20pc'+'.Options#'+_0x376941+('\x20has\x20been\x20'+'deprecated'+'\x20as\x20the\x20pr'+'operty\x20has'+'\x20been\x20move'+'d\x20to\x20pc.Op'+'tions.LitS'+'haderOptio'+'ns#')+(_0x1a7417||_0x376941)+'.'),this['litOptions'][_0x1a7417||_0x376941];},'set':function(_0x503507){w['deprecated']('Setting\x20pc'+'.Options#'+_0x376941+('\x20has\x20been\x20'+'deprecated'+'\x20as\x20the\x20pr'+'operty\x20has'+'\x20been\x20move'+'d\x20to\x20pc.Op'+'tions.LitS'+'haderOptio'+'ns#')+(_0x1a7417||_0x376941)+'.'),this['litOptions'][_0x1a7417||_0x376941]=_0x503507;}});}F0('refraction','useRefract'+'ion');const TU=new wv(),zS=Object['getOwnProp'+'ertyNames'](TU);for(const l in zS)F0(zS[l]);mn['prototype']['getAssetBy'+'Id']=function(_0x34420e){return w['deprecated']('pc.AssetRe'+'gistry#get'+'AssetById\x20'+'is\x20depreca'+'ted.\x20Use\x20p'+'c.AssetReg'+'istry#get\x20'+'instead.'),this['get'](_0x34420e);},Object['defineProp'+'erty'](Qt['prototype'],'ray',{'get':function(){return w['deprecated']('pc.XrInput'+'Source#ray'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.XrInput'+'Source#get'+'Origin\x20and'+'\x20pc.XrInpu'+'tSource#ge'+'tDirection'+'\x20instead.'),this['_rayLocal'];}}),Object['defineProp'+'erty'](Qt['prototype'],'position',{'get':function(){return w['deprecated']('pc.XrInput'+'Source#pos'+'ition\x20is\x20d'+'eprecated.'+'\x20Use\x20pc.Xr'+'InputSourc'+'e#getLocal'+'Position\x20i'+'nstead.'),this['_localPosi'+'tion'];}}),Object['defineProp'+'erty'](Qt['prototype'],'rotation',{'get':function(){return w['deprecated']('pc.XrInput'+'Source#rot'+'ation\x20is\x20d'+'eprecated.'+'\x20Use\x20pc.Xr'+'InputSourc'+'e#getLocal'+'Rotation\x20i'+'nstead.'),this['_localRota'+'tion'];}}),Object['defineProp'+'erty'](Xo['prototype'],'wheel',{'get':function(){return this['wheelDelta']*-(-0x16c5*0x1+0x1fbd*-0x1+-0x6*-0x916);}}),Object['defineProp'+'erty'](ta['prototype'],'wheel',{'get':function(){return this['wheelDelta']*-(0x968+-0x1814+0xeae);}}),Ks['prototype']['isFullscre'+'en']=function(){return w['deprecated']('pc.AppBase'+'#isFullscr'+'een\x20is\x20dep'+'recated.\x20U'+'se\x20the\x20Ful'+'lscreen\x20AP'+'I\x20directly'+'.'),!!document['fullscreen'+'Element'];},Ks['prototype']['enableFull'+'screen']=function(_0x2d6f5e,_0x2a3f9c,_0x3b5d28){w['deprecated']('pc.AppBase'+'#enableFul'+'lscreen\x20is'+'\x20deprecate'+'d.\x20Use\x20the'+'\x20Fullscree'+'n\x20API\x20dire'+'ctly.'),_0x2d6f5e=_0x2d6f5e||this['graphicsDe'+'vice']['canvas'];const _0x4e06b0=function(){_0x2a3f9c(),document['removeEven'+'tListener']('fullscreen'+'change',_0x4e06b0);},_0x1da8bb=function(){_0x3b5d28(),document['removeEven'+'tListener']('fullscreen'+'error',_0x1da8bb);};_0x2a3f9c&&document['addEventLi'+'stener']('fullscreen'+'change',_0x4e06b0,!(0xaf8+0x1*-0x413+0x24*-0x31)),_0x3b5d28&&document['addEventLi'+'stener']('fullscreen'+'error',_0x1da8bb,!(-0x214a+-0x803+0x294e)),_0x2d6f5e['requestFul'+'lscreen']?_0x2d6f5e['requestFul'+'lscreen'](Element['ALLOW_KEYB'+'OARD_INPUT']):_0x3b5d28();},Ks['prototype']['disableFul'+'lscreen']=function(_0x22b8bc){w['deprecated']('pc.AppBase'+'#disableFu'+'llscreen\x20i'+'s\x20deprecat'+'ed.\x20Use\x20th'+'e\x20Fullscre'+'en\x20API\x20dir'+'ectly.');const _0x113a72=function(){_0x22b8bc(),document['removeEven'+'tListener']('fullscreen'+'change',_0x113a72);};_0x22b8bc&&document['addEventLi'+'stener']('fullscreen'+'change',_0x113a72,!(-0x3*-0x2a1+0x69d*0x3+0x1bb9*-0x1)),document['exitFullsc'+'reen']();},Ks['prototype']['getSceneUr'+'l']=function(_0x3a95ad){w['deprecated']('pc.AppBase'+'#getSceneU'+'rl\x20is\x20depr'+'ecated.\x20Us'+'e\x20pc.AppBa'+'se#scenes\x20'+'and\x20pc.Sce'+'neRegistry'+'#find\x20inst'+'ead.');const _0x365f7a=this['scenes']['find'](_0x3a95ad);return _0x365f7a?_0x365f7a['url']:null;},Ks['prototype']['loadScene']=function(_0x3bde50,_0x4a16e8){w['deprecated']('pc.AppBase'+'#loadScene'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.AppBase'+'#scenes\x20an'+'d\x20pc.Scene'+'Registry#l'+'oadScene\x20i'+'nstead.'),this['scenes']['loadScene'](_0x3bde50,_0x4a16e8);},Ks['prototype']['loadSceneH'+'ierarchy']=function(_0x4a7e70,_0x16f84f){w['deprecated']('pc.AppBase'+'#loadScene'+'Hierarchy\x20'+'is\x20depreca'+'ted.\x20Use\x20p'+'c.AppBase#'+'scenes\x20and'+'\x20pc.SceneR'+'egistry#lo'+'adSceneHie'+'rarchy\x20ins'+'tead.'),this['scenes']['loadSceneH'+'ierarchy'](_0x4a7e70,_0x16f84f);},Ks['prototype']['loadSceneS'+'ettings']=function(_0x26b62c,_0x1455ec){w['deprecated']('pc.AppBase'+'#loadScene'+'Settings\x20i'+'s\x20deprecat'+'ed.\x20Use\x20pc'+'.AppBase#s'+'cenes\x20and\x20'+'pc.SceneRe'+'gistry#loa'+'dSceneSett'+'ings\x20inste'+'ad.'),this['scenes']['loadSceneS'+'ettings'](_0x26b62c,_0x1455ec);},Tm['prototype']['setVisible']=function(_0x4df770){w['deprecated']('pc.ModelCo'+'mponent#se'+'tVisible\x20i'+'s\x20deprecat'+'ed.\x20Use\x20pc'+'.ModelComp'+'onent#enab'+'led\x20instea'+'d.'),this['enabled']=_0x4df770;},Object['defineProp'+'erty'](bs['prototype'],'bodyType',{'get':function(){return w['deprecated']('pc.RigidBo'+'dyComponen'+'t#bodyType'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.RigidBo'+'dyComponen'+'t#type\x20ins'+'tead.'),this['type'];},'set':function(_0x376e48){w['deprecated']('pc.RigidBo'+'dyComponen'+'t#bodyType'+'\x20is\x20deprec'+'ated.\x20Use\x20'+'pc.RigidBo'+'dyComponen'+'t#type\x20ins'+'tead.'),this['type']=_0x376e48;}}),bs['prototype']['syncBodyTo'+'Entity']=function(){w['deprecated']('pc.RigidBo'+'dyComponen'+'t#syncBody'+'ToEntity\x20i'+'s\x20not\x20publ'+'ic\x20API\x20and'+'\x20should\x20no'+'t\x20be\x20used.'),this['_updateDyn'+'amic']();},wm['prototype']['setGravity']=function(){w['deprecated']('pc.RigidBo'+'dyComponen'+'tSystem#se'+'tGravity\x20i'+'s\x20deprecat'+'ed.\x20Use\x20pc'+'.RigidBody'+'ComponentS'+'ystem#grav'+'ity\x20instea'+'d.'),arguments['length']===-0x742*-0x4+0x1*0x1796+-0x349d?this['gravity']['copy'](arguments[-0x167*-0x11+-0x3fa+-0x13dd]):this['gravity']['set'](arguments[-0x3*-0x47b+0xef*0x1a+-0x25b7*0x1],arguments[0x6c+-0x1ebe+-0x1e53*-0x1],arguments[0x5d3+-0x1583+0xfb2]);};class wU{constructor(_0x5051a6){this['_frameInde'+'x']=0x3*-0xcf0+0x160e+0x10c2,this['_frameTimi'+'ngs']=[],this['_timings']=[],this['_prevTimin'+'gs']=[],this['unitsName']='ms',this['decimalPla'+'ces']=-0x258f+0x2260+0x330,this['enabled']=!(-0x2469+0x1638*-0x1+0x138b*0x3),_0x5051a6['on']('frameupdat'+'e',this['begin']['bind'](this,'update')),_0x5051a6['on']('framerende'+'r',this['mark']['bind'](this,'render')),_0x5051a6['on']('frameend',this['mark']['bind'](this,'other'));}['begin'](_0x57e3f5){if(!this['enabled'])return;this['_frameInde'+'x']<this['_frameTimi'+'ngs']['length']&&this['_frameTimi'+'ngs']['splice'](this['_frameInde'+'x']);const _0x57263d=this['_prevTimin'+'gs'];this['_prevTimin'+'gs']=this['_timings'],this['_timings']=this['_frameTimi'+'ngs'],this['_frameTimi'+'ngs']=_0x57263d,this['_frameInde'+'x']=0xf0b+-0x551+-0x5*0x1f2,this['mark'](_0x57e3f5);}['mark'](_0x32cf07){if(!this['enabled'])return;const _0xd336e4=de();if(this['_frameInde'+'x']>-0x16*0x68+0x1*0x2466+-0x1b76){const _0x1d3487=this['_frameTimi'+'ngs'][this['_frameInde'+'x']-(0x20a8+-0x25ee+0x547)];_0x1d3487[0x5*0xdf+-0x1*-0x1c41+-0x209b]=_0xd336e4-_0x1d3487[-0x8b8+0x17cd+-0x304*0x5];}else{if(this['_timings']['length']>-0x2556+-0xf3*-0xb+0x1ae5){const _0x20e4cf=this['_timings'][this['_timings']['length']-(0x10f9+0x1c1*-0x15+0x13dd)];_0x20e4cf[-0xd*-0x1ab+0x9*0x1d8+-0x2646]=_0xd336e4-_0x20e4cf[0x2*-0x36e+0x252b+-0x1e4e];}}if(this['_frameInde'+'x']>=this['_frameTimi'+'ngs']['length'])this['_frameTimi'+'ngs']['push']([_0x32cf07,_0xd336e4]);else{const _0x16559e=this['_frameTimi'+'ngs'][this['_frameInde'+'x']];_0x16559e[-0x3*0x883+0x1420+0x569]=_0x32cf07,_0x16559e[0xbfb*-0x3+0x4*-0x5c2+-0x1d7d*-0x2]=_0xd336e4;}this['_frameInde'+'x']++;}get['timings'](){return this['_timings']['slice'](0x3d*-0x61+0x4ba*0x1+0x1263,-(0xca1*0x1+0x77*0x2b+-0x209d))['map'](_0x463fb7=>_0x463fb7[0x52d+-0x256f+0x2043]);}}class EU{constructor(_0x5df6c6){this['device']=_0x5df6c6,_0x5df6c6['gpuProfile'+'r']['enabled']=!(-0x1fc9+0x7d6+0x1*0x17f3),this['enabled']=!(-0x1340+-0x30d*-0xb+-0xe4f),this['unitsName']='ms',this['decimalPla'+'ces']=-0x20d*-0x10+0x8*-0x1a5+-0x81*0x27,this['_timings']=[];}get['timings'](){return this['_timings'][-0x962+-0x1*-0x183+0x7df]=this['device']['gpuProfile'+'r']['_frameTime'],this['_timings'];}}class bU{constructor(_0x20fb3e,_0x2fc807,_0x11d718,_0x2fa01d,_0x1b6013){this['app']=_0x20fb3e,this['values']=[],this['statNames']=_0x2fc807,this['statNames']['length']>0x1*0x121b+-0x1*-0xdf+0x1*-0x12f7&&(this['statNames']['length']=-0x2f*0xb7+-0x1a0e+0x7*0x886),this['unitsName']=_0x2fa01d,this['decimalPla'+'ces']=_0x11d718,this['multiplier']=_0x1b6013||0xb01+-0xc7*0x6+-0x656;const _0x2fca56=(_0x5bb6c5,_0x41f46b)=>_0x5bb6c5['split']('.')['reduce']((_0x37c19d,_0x4e48a9)=>_0x37c19d?_0x37c19d[_0x4e48a9]:null,_0x41f46b||this);_0x20fb3e['on']('frameupdat'+'e',_0x577d35=>{for(let _0x133f76=-0x1895+0xc35*0x3+-0xc0a;_0x133f76<this['statNames']['length'];_0x133f76++)this['values'][_0x133f76]=_0x2fca56(this['statNames'][_0x133f76],this['app']['stats'])*this['multiplier'];});}get['timings'](){return this['values'];}}class Uf{constructor(_0xcfe15c,_0x38d028,_0x303418,_0x34c9ff,_0x195c1f){this['app']=_0x38d028,this['name']=_0xcfe15c,this['device']=_0x38d028['graphicsDe'+'vice'],this['timer']=_0x195c1f,this['watermark']=_0x303418,this['enabled']=!(-0x153*-0x4+-0x21ca+0x5b3*0x5),this['textRefres'+'hRate']=_0x34c9ff,this['avgTotal']=0xad1+-0xa71+-0x60,this['avgTimer']=0x133b*0x1+-0x16b8+-0x13*-0x2f,this['avgCount']=0x169f+0x1*0xe28+0x7*-0x541,this['timingText']='',this['texture']=null,this['yOffset']=0x8b*0xd+-0x1a04+0x12f5,this['cursor']=-0x1fb+-0x152f*0x1+-0x2*-0xb95,this['sample']=new Uint8ClampedArray(0x1e*-0x139+-0x455*-0x3+0x17b3),this['sample']['set']([0x1fe2+-0x3c7+-0x1c1b,-0xc7+0x484+-0x3bd,-0x269f*0x1+-0x23d+0x28dc*0x1,0x89*0x2+0x391*-0x2+-0x1*-0x70f]),this['counter']=0x677*-0x1+-0x79d*-0x2+-0x8c3,this['app']['on']('frameupdat'+'e',this['update'],this);}['destroy'](){this['app']['off']('frameupdat'+'e',this['update'],this);}['loseContex'+'t'](){this['timer']&&typeof this['timer']['loseContex'+'t']=='function'&&this['timer']['loseContex'+'t']();}['update'](_0x4500dd){const _0x523e50=this['timer']['timings'],_0x672600=_0x523e50['reduce']((_0x5b820b,_0x4f0d58)=>_0x5b820b+_0x4f0d58,0x1ef1*-0x1+-0x8b7+-0x18*-0x1a7);if(this['avgTotal']+=_0x672600,this['avgTimer']+=_0x4500dd,this['avgCount']++,this['avgTimer']>this['textRefres'+'hRate']&&(this['timingText']=(this['avgTotal']/this['avgCount'])['toFixed'](this['timer']['decimalPla'+'ces']),this['avgTimer']=0x93*0x25+-0x1477+-0x5*0x28,this['avgTotal']=0x233d+0x938+-0x2c75,this['avgCount']=0x19*0x12e+0x6eb+-0x2469*0x1),this['enabled']){let _0xf293ba=-0xbf4+-0x1*-0x3a9+0x84b;const _0x252cfb=(0x26d2+-0x958+-0x1d79+0.5)*this['watermark'];for(let _0x49b9f8=-0x22a9+0x26*0x7b+0x1067;_0x49b9f8<_0x523e50['length'];++_0x49b9f8)_0xf293ba+=Math['floor'](_0x523e50[_0x49b9f8]/_0x252cfb*(-0x37*-0x89+0x1*-0x7ae+0xa61*-0x2)),this['sample'][_0x49b9f8]=_0xf293ba;this['sample'][0x7d3*-0x1+-0x1761+-0x83*-0x3d]=this['watermark']/_0x252cfb*(-0x25bb+0x109*0x1+0x25b1),this['texture']['lock']()['set'](this['sample'],(this['cursor']+this['yOffset']*this['texture']['width'])*(0x1*-0x2550+0x71*-0xd+0x2b11)),this['texture']['unlock'](),this['cursor']++,this['cursor']===this['texture']['width']&&(this['cursor']=-0x1b37+-0x116e+-0x1*-0x2ca5);}}['render'](_0x393364,_0x3c5918,_0x5f56e7,_0x4aa54f,_0x554daf){_0x393364['quad'](_0x3c5918+_0x4aa54f,_0x5f56e7,-_0x4aa54f,_0x554daf,this['enabled']?this['cursor']:-0x1351+0x1*-0x602+0x1953,this['enabled']?0x11d9+0x1ff2+0x71d*-0x7+0.5+this['yOffset']:this['texture']['height']-(-0x6d3+0x4*-0x93+-0x490*-0x2),-_0x4aa54f,-0x81f*0x4+-0x18ed+-0x17*-0x27f,this['texture'],0x5*-0x241+-0x21c4+0x2d09);}}class AU{constructor(_0x249aa4,_0x103b82){const _0x11ef55=_0x2d4855=>{_0x2d4855['font']='10px\x20\x22Luci'+'da\x20Console'+'\x22,\x20Monaco,'+'\x20monospace',_0x2d4855['textAlign']='left',_0x2d4855['textBaseli'+'ne']='alphabetic';},_0x20ee45=_0x4e9140=>_0x4e9140==='.'||_0x4e9140['length']===0x1a89+-0x210f+0x687&&_0x4e9140['charCodeAt'](0x1293+0x107*0x19+-0xce*0x37)>=-0x1f34+0x7e+-0x5*-0x62e&&_0x4e9140['charCodeAt'](0x1*-0x1f67+-0xe9f*0x2+0x3ca5)<=0x15*0x11e+0xfb2+-0x26ef*0x1,_0x1ade2f=document['createElem'+'ent']('canvas'),_0xbdb77e=_0x1ade2f['getContext']('2d',{'alpha':!(0x1*-0x2fa+-0x21d1*0x1+0x24cb*0x1)});_0x11ef55(_0xbdb77e);const _0x8df7e0=new Map(),_0x2307f4=0x1d7*0x3+0x13cc+-0x194c,_0x35f366=0x5d4*-0x2+-0x1*0x6dd+0x1485;let _0x4ad39c=_0x2307f4,_0x4e0675=_0x2307f4;_0x103b82['forEach'](_0x1087d7=>{const _0x6f1be5=_0xbdb77e['measureTex'+'t'](_0x1087d7),_0x829b71=Math['ceil'](-_0x6f1be5['actualBoun'+'dingBoxLef'+'t']),_0x33933f=Math['ceil'](_0x6f1be5['actualBoun'+'dingBoxRig'+'ht']),_0x4b87cb=Math['ceil'](_0x6f1be5['actualBoun'+'dingBoxAsc'+'ent']),_0x32aae8=Math['ceil'](_0x6f1be5['actualBoun'+'dingBoxDes'+'cent']),_0x109a1f=_0x829b71+_0x33933f,_0x46eded=_0x4b87cb+_0x32aae8;_0x4ad39c+_0x109a1f+_0x2307f4>=_0x35f366&&(_0x4ad39c=_0x2307f4,_0x4e0675+=0x2*0x137b+0x1ec5+-0x1b3*0x29),_0x8df7e0['set'](_0x1087d7,{'l':_0x829b71,'r':_0x33933f,'a':_0x4b87cb,'d':_0x32aae8,'w':_0x109a1f,'h':_0x46eded,'x':_0x4ad39c,'y':_0x4e0675}),_0x4ad39c+=_0x109a1f+_0x2307f4;}),_0x1ade2f['width']=-0x196e+0x8e7+-0x3*-0x62d,_0x1ade2f['height']=Y['nextPowerO'+'fTwo'](_0x4e0675+(0x13*0x1d3+-0x1671+-0xc28)+_0x2307f4),_0x11ef55(_0xbdb77e),_0xbdb77e['fillStyle']='rgb(0,\x200,\x20'+'0)',_0xbdb77e['fillRect'](-0x461+-0xdc4+0x1225,-0x21+-0x35*-0x89+-0x1c3c*0x1,_0x1ade2f['width'],_0x1ade2f['height']),_0x8df7e0['forEach']((_0x351cb0,_0x1079a4)=>{_0xbdb77e['fillStyle']=_0x20ee45(_0x1079a4)?'rgb(255,\x202'+'55,\x20255)':'rgb(170,\x201'+'70,\x20170)',_0xbdb77e['fillText'](_0x1079a4,_0x351cb0['x']-_0x351cb0['l'],_0x351cb0['y']+_0x351cb0['a']);}),this['placements']=_0x8df7e0;const _0x22a2f0=_0xbdb77e['getImageDa'+'ta'](0xb*-0x1a5+-0x15e7+0x1*0x27fe,-0x1c81*-0x1+0x887+-0x2508,_0x1ade2f['width'],_0x1ade2f['height'])['data'];for(let _0x35322f=-0xa9a+0x1889+-0xdef;_0x35322f<_0x22a2f0['length'];_0x35322f+=0x112b+0x9da+-0x1b01)_0x22a2f0[_0x35322f+(-0x1d81+-0x2b*-0x49+-0x1*-0x1141)]=_0x22a2f0[_0x35322f+(-0xac1+0x1fdb+-0x4a*0x49)],_0x22a2f0[_0x35322f+(-0x922+0x6b0+0x272)]=-0x1*0x15cf+-0x694+0x1d62,_0x22a2f0[_0x35322f+(-0xd*0x11f+-0x458*0x4+0x1ff4)]=0x888+-0x61*0x2f+0x2*0x523,_0x22a2f0[_0x35322f+(-0x233b+0x1f+0x231e)]=0x1*0x22c7+0x1d52+-0x3f1a;this['texture']=new _e(_0x249aa4,{'name':'mini-stats'+'-word-atla'+'s','width':_0x1ade2f['width'],'height':_0x1ade2f['height'],'mipmaps':!(0xca9*-0x1+0x44*0x70+-0x1116),'minFilter':Te,'magFilter':Te,'levels':[_0x22a2f0]});}['destroy'](){this['texture']['destroy'](),this['texture']=null;}['render'](_0x1940a9,_0x4f9d33,_0x399910,_0xc2b6a6){const _0x566a7d=this['placements']['get'](_0x4f9d33);return _0x566a7d?(_0x1940a9['quad'](_0x399910+_0x566a7d['l']-(0xd*-0x124+-0x1*0x1173+-0x1*-0x2048),_0xc2b6a6-_0x566a7d['d']+(0x164f+-0x1f81+0x933),_0x566a7d['w']+(0x1a73+0x2185*0x1+-0x3bf6),_0x566a7d['h']+(0x11f0+0x1ae2+0x3bc*-0xc),_0x566a7d['x']-(-0x1*-0x2287+0x2705+-0x43*0x119),this['texture']['height']-_0x566a7d['y']-_0x566a7d['h']-(0x1c23+-0x633+0x463*-0x5),void(0x2029*0x1+-0x3*0xc05+-0x3e6*-0x1),void(0xdf*-0xb+0x8fc+0x1*0x99),this['texture'],-0x1c02+-0x1b03+-0x3706*-0x1),_0x566a7d['w']):0x1277+-0x1951+0x6da;}}const CU='\x0a\x20\x20\x20\x20attri'+'bute\x20vec3\x20'+'vertex_pos'+'ition;\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20//\x20un'+'normalized'+'\x20xy,\x20word\x20'+'flag\x0a\x20\x20\x20\x20a'+'ttribute\x20v'+'ec4\x20vertex'+'_texCoord0'+';\x20\x20\x20\x20\x20\x20\x20\x20/'+'/\x20unnormal'+'ized\x20textu'+'re\x20space\x20u'+'v,\x20normali'+'zed\x20uv\x0a\x0a\x20\x20'+'\x20\x20varying\x20'+'vec4\x20uv0;\x0a'+'\x20\x20\x20\x20varyin'+'g\x20float\x20wo'+'rdFlag;\x0a\x0a\x20'+'\x20\x20\x20void\x20ma'+'in(void)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_Position'+'\x20=\x20vec4(ve'+'rtex_posit'+'ion.xy\x20*\x202'+'.0\x20-\x201.0,\x20'+'0.5,\x201.0);'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20u'+'v0\x20=\x20verte'+'x_texCoord'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20wordFlag\x20'+'=\x20vertex_p'+'osition.z;'+'\x0a\x20\x20\x20\x20}\x0a',PU='\x0a\x20\x20\x20\x20attri'+'bute\x20verte'+'x_position'+':\x20vec3f;\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20//\x20'+'unnormaliz'+'ed\x20xy,\x20wor'+'d\x20flag\x0a\x20\x20\x20'+'\x20attribute'+'\x20vertex_te'+'xCoord0:\x20v'+'ec4f;\x20\x20\x20\x20\x20'+'\x20\x20\x20//\x20unno'+'rmalized\x20t'+'exture\x20spa'+'ce\x20uv,\x20nor'+'malized\x20uv'+'\x0a\x0a\x20\x20\x20\x20vary'+'ing\x20uv0:\x20v'+'ec4f;\x0a\x20\x20\x20\x20'+'varying\x20wo'+'rdFlag:\x20f3'+'2;\x0a\x0a\x20\x20\x20\x20@v'+'ertex\x20fn\x20v'+'ertexMain('+'input\x20:\x20Ve'+'rtexInput)'+'\x20->\x20Vertex'+'Output\x20{\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20var'+'\x20output\x20:\x20'+'VertexOutp'+'ut;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20output.p'+'osition\x20=\x20'+'vec4(input'+'.vertex_po'+'sition.xy\x20'+'*\x202.0\x20-\x201.'+'0,\x200.5,\x201.'+'0);\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20output.u'+'v0\x20=\x20input'+'.vertex_te'+'xCoord0;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.wordFl'+'ag\x20=\x20input'+'.vertex_po'+'sition.z;\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20re'+'turn\x20outpu'+'t;\x0a\x20\x20\x20\x20}\x0a',MU='\x0a\x20\x20\x20\x20varyi'+'ng\x20vec4\x20uv'+'0;\x0a\x20\x20\x20\x20var'+'ying\x20float'+'\x20wordFlag;'+'\x0a\x0a\x20\x20\x20\x20unif'+'orm\x20vec4\x20c'+'lr;\x0a\x20\x20\x20\x20un'+'iform\x20samp'+'ler2D\x20grap'+'hTex;\x0a\x20\x20\x20\x20'+'uniform\x20sa'+'mpler2D\x20wo'+'rdsTex;\x0a\x0a\x20'+'\x20\x20\x20void\x20ma'+'in\x20(void)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec4\x20graph'+'Sample\x20=\x20t'+'exture2D(g'+'raphTex,\x20u'+'v0.xy);\x0a\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20vec'+'4\x20graph;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20if\x20'+'(uv0.w\x20<\x20g'+'raphSample'+'.r)\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20grap'+'h\x20=\x20vec4(0'+'.7,\x200.2,\x200'+'.2,\x201.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20el'+'se\x20if\x20(uv0'+'.w\x20<\x20graph'+'Sample.g)\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20graph\x20=\x20'+'vec4(0.2,\x20'+'0.7,\x200.2,\x20'+'1.0);\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20else\x20i'+'f\x20(uv0.w\x20<'+'\x20graphSamp'+'le.b)\x0a\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20gr'+'aph\x20=\x20vec4'+'(0.2,\x200.2,'+'\x200.7,\x201.0)'+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'else\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20gra'+'ph\x20=\x20vec4('+'0.0,\x200.0,\x20'+'0.0,\x201.0\x20-'+'\x200.25\x20*\x20si'+'n(uv0.w\x20*\x20'+'3.14159));'+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'vec4\x20words'+'\x20=\x20texture'+'2D(wordsTe'+'x,\x20vec2(uv'+'0.x,\x201.0\x20-'+'\x20uv0.y));\x0a'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20g'+'l_FragColo'+'r\x20=\x20mix(gr'+'aph,\x20words'+',\x20wordFlag'+')\x20*\x20clr;\x0a\x20'+'\x20\x20\x20}\x0a',DU='\x0a\x20\x20\x20\x20varyi'+'ng\x20uv0:\x20ve'+'c4f;\x0a\x20\x20\x20\x20v'+'arying\x20wor'+'dFlag:\x20f32'+';\x0a\x0a\x20\x20\x20\x20uni'+'form\x20clr:\x20'+'vec4f;\x0a\x0a\x20\x20'+'\x20\x20var\x20grap'+'hTex\x20:\x20tex'+'ture_2d<f3'+'2>;\x0a\x20\x20\x20\x20va'+'r\x20graphTex'+'_sampler\x20:'+'\x20sampler;\x0a'+'\x0a\x20\x20\x20\x20var\x20w'+'ordsTex\x20:\x20'+'texture_2d'+'<f32>;\x0a\x20\x20\x20'+'\x20var\x20words'+'Tex_sample'+'r\x20:\x20sample'+'r;\x0a\x0a\x20\x20\x20\x20@f'+'ragment\x20fn'+'\x20fragmentM'+'ain(input\x20'+':\x20Fragment'+'Input)\x20->\x20'+'FragmentOu'+'tput\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20var\x20u'+'v0:\x20vec4f\x20'+'=\x20input.uv'+'0;\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20graph'+'Sample:\x20ve'+'c4f\x20=\x20text'+'ureSample('+'graphTex,\x20'+'graphTex_s'+'ampler,\x20uv'+'0.xy);\x0a\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20var\x20'+'graph:\x20vec'+'4f;\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20if\x20(uv0.'+'w\x20<\x20graphS'+'ample.r)\x20{'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20graph\x20='+'\x20vec4f(0.7'+',\x200.2,\x200.2'+',\x201.0);\x0a\x20\x20'+'\x20\x20\x20\x20\x20\x20}\x20el'+'se\x20if\x20(uv0'+'.w\x20<\x20graph'+'Sample.g)\x20'+'{\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20graph\x20'+'=\x20vec4f(0.'+'2,\x200.7,\x200.'+'2,\x201.0);\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20}\x20e'+'lse\x20if\x20(uv'+'0.w\x20<\x20grap'+'hSample.b)'+'\x20{\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20\x20\x20\x20\x20graph'+'\x20=\x20vec4f(0'+'.2,\x200.2,\x200'+'.7,\x201.0);\x0a'+'\x20\x20\x20\x20\x20\x20\x20\x20}\x20'+'else\x20{\x0a\x20\x20\x20'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20g'+'raph\x20=\x20vec'+'4f(0.0,\x200.'+'0,\x200.0,\x201.'+'0\x20-\x200.25\x20*'+'\x20sin(uv0.w'+'\x20*\x203.14159'+'));\x0a\x20\x20\x20\x20\x20\x20'+'\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20'+'\x20\x20\x20var\x20wor'+'ds:\x20vec4f\x20'+'=\x20textureS'+'ample(word'+'sTex,\x20word'+'sTex_sampl'+'er,\x20vec2f('+'uv0.x,\x201.0'+'\x20-\x20uv0.y))'+';\x0a\x0a\x20\x20\x20\x20\x20\x20\x20'+'\x20var\x20outpu'+'t:\x20Fragmen'+'tOutput;\x0a\x20'+'\x20\x20\x20\x20\x20\x20\x20out'+'put.color\x20'+'=\x20mix(grap'+'h,\x20words,\x20'+'input.word'+('Flag)\x20*\x20un'+'iform.clr;'+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20r'+'eturn\x20outp'+'ut;\x0a\x20\x20\x20\x20}\x0a');class IU{constructor(_0x165c32,_0x1e1315=-0xc87*-0x1+-0xe2e+0xb*0x55){const _0x138bde=new kt(_0x165c32,[{'semantic':Me,'components':0x3,'type':Ve},{'semantic':is,'components':0x4,'type':Ve}]),_0x1539cd=new Uint16Array(_0x1e1315*(0x1cfb+-0xde*0x1+0x1c17*-0x1));for(let _0x56dedf=-0x2167+0xb00+0x1*0x1667;_0x56dedf<_0x1e1315;++_0x56dedf)_0x1539cd[_0x56dedf*(0x2*0x76d+0xe*-0xcf+-0x1*0x382)+(0x1*0xe9f+0xd31+-0x1bd0)]=_0x56dedf*(-0x25f*-0x8+-0xbea+-0x70a),_0x1539cd[_0x56dedf*(0x263b+0x2619+-0x1*0x4c4e)+(0x2b*0x19+0x5*-0x449+-0xb*-0x191)]=_0x56dedf*(0x5bd+0x16b2+-0x61*0x4b)+(0x1*0x422+-0x1*-0x8c7+-0xce8),_0x1539cd[_0x56dedf*(0x1286+0x18d3+-0x2b53)+(0x254+0x7cd*-0x3+0x1515)]=_0x56dedf*(0x7*-0x492+-0x4*0x1e7+-0x39a*-0xb)+(0x232*0xa+-0x1600+0xe),_0x1539cd[_0x56dedf*(0x1b02+0x764*0x4+0xe*-0x40a)+(-0x1844+0xb57+-0x45*-0x30)]=_0x56dedf*(-0xa*-0x4f+0x13*-0x1eb+0x1*0x215f),_0x1539cd[_0x56dedf*(0xc91+0x123e+0x1*-0x1ec9)+(0x14d0+0xdb9+-0x2285*0x1)]=_0x56dedf*(0x1063*0x1+0x2*-0x4c3+-0x6d9*0x1)+(0x46c+0x591*-0x5+0x6d*0x37),_0x1539cd[_0x56dedf*(0xefd+-0xf09+0x12*0x1)+(-0x28a*-0xb+-0x1a2c+-0x5*0x59)]=_0x56dedf*(-0x81f*0x1+-0x448+0x1*0xc6b)+(0x4fe+-0x5f8+0x1*0xfd);this['device']=_0x165c32,this['buffer']=new Is(_0x165c32,_0x138bde,_0x1e1315*(0x40*-0x29+-0x40*-0x80+0x6b*-0x34),{'usage':ey}),this['data']=new Float32Array(this['buffer']['numBytes']/(0x7*-0x312+-0x1d3a+0x32bc)),this['indexBuffe'+'r']=new br(_0x165c32,Yi,_0x1e1315*(0x1*0xe4f+0x3ad*-0x3+-0x342),ms,_0x1539cd),this['prim']={'type':js,'indexed':!(-0xc5*0x7+0x1ec7+-0x2*0xcb2),'base':0x0,'baseVertex':0x0,'count':0x0},this['quads']=-0x2692*0x1+0x1*0x247f+-0x1*-0x213,this['mesh']=new Ge(_0x165c32),this['mesh']['vertexBuff'+'er']=this['buffer'],this['mesh']['indexBuffe'+'r'][-0x25af+0x251*-0x7+0x1af3*0x2]=this['indexBuffe'+'r'],this['mesh']['primitive']=[this['prim']];const _0x4fe7b1=new Xn({'uniqueName':'MiniStats','vertexGLSL':CU,'fragmentGLSL':MU,'vertexWGSL':PU,'fragmentWGSL':DU,'attributes':{'vertex_position':Me,'vertex_texCoord0':is}});this['material']=_0x4fe7b1,_0x4fe7b1['cull']=bt,_0x4fe7b1['depthState']=Yt['NODEPTH'],_0x4fe7b1['blendState']=new pt(!(-0x1759*0x1+0x96c+0xded),fs,jh,Yh,fs,Ft,Ft),_0x4fe7b1['update'](),this['meshInstan'+'ce']=new He(this['mesh'],_0x4fe7b1,new Ie('MiniStatsM'+'esh')),this['uniforms']={'clr':new Float32Array(-0x1f*0xf5+0x8be+0x14f1)},this['targetSize']={'width':_0x165c32['width'],'height':_0x165c32['height']};}['quad'](_0x5e35a7,_0x1c687b,_0x383ccf,_0x4341d4,_0x3e1df9,_0x5c1fb3,_0x427479,_0x598782,_0x5c794c,_0x52dca7=-0x7*-0xfd+0x1a98+-0x2183){const _0x418227=this['targetSize']['width'],_0x3de008=this['targetSize']['height'],_0x2a74aa=_0x5e35a7/_0x418227,_0x4711cf=_0x1c687b/_0x3de008,_0x3e2514=(_0x5e35a7+_0x383ccf)/_0x418227,_0x4f30c5=(_0x1c687b+_0x4341d4)/_0x3de008,_0x412d03=_0x5c794c['width'],_0x39c09d=_0x5c794c['height'],_0x2e039c=_0x3e1df9/_0x412d03,_0x57b513=_0x5c1fb3/_0x39c09d,_0x46c29e=(_0x3e1df9+(_0x427479??_0x383ccf))/_0x412d03,_0x58bc5d=(_0x5c1fb3+(_0x598782??_0x4341d4))/_0x39c09d;this['data']['set']([_0x2a74aa,_0x4711cf,_0x52dca7,_0x2e039c,_0x57b513,-0x1*0x193b+-0x643+0x8b*0x3a,0x23f9+0x1a7b+-0x3e74,_0x3e2514,_0x4711cf,_0x52dca7,_0x46c29e,_0x57b513,-0x187e+0x5*-0x62b+0x3756,-0x270c+-0x3*0xa62+0x6*0xbb3,_0x3e2514,_0x4f30c5,_0x52dca7,_0x46c29e,_0x58bc5d,-0x22*0x7e+-0xd9d+0x456*0x7,-0x2621+0x1*-0x3ad+-0x5f9*-0x7,_0x2a74aa,_0x4f30c5,_0x52dca7,_0x2e039c,_0x58bc5d,-0x1e5a+0xbc4+0x1296,0x4f*0x56+0x128+-0x1bb1],(0x1209+0xdf3+-0xaa*0x30)*this['quads']),this['quads']++,this['prim']['count']+=0xb1b+-0x36f+-0x7a6;}['startFrame'](){this['quads']=-0x2*0x1111+-0x25+0x2247,this['prim']['count']=0x976+-0x179f+0xe29,this['targetSize']['width']=this['device']['canvas']['scrollWidt'+'h'],this['targetSize']['height']=this['device']['canvas']['scrollHeig'+'ht'];}['render'](_0x18509d,_0x93a9ed,_0x4c01e1,_0x5ba8da,_0x4d6a03,_0x1c080c){this['buffer']['setData'](this['data']['buffer']),this['uniforms']['clr']['set'](_0x4d6a03,-0x1acf*-0x1+0x274*-0xa+-0x247),this['material']['setParamet'+'er']('clr',this['uniforms']['clr']),this['material']['setParamet'+'er']('graphTex',_0x4c01e1),this['material']['setParamet'+'er']('wordsTex',_0x5ba8da),_0x18509d['drawMeshIn'+'stance'](this['meshInstan'+'ce'],_0x93a9ed);}}class N0{constructor(_0x3f06cd,_0x5cb4e9){const _0x4214ee=_0x3f06cd['graphicsDe'+'vice'];this['deviceHeig'+'ht']=_0x4214ee['height']/_0x4214ee['maxPixelRa'+'tio'],_0x5cb4e9={...N0['getDefault'+'Options'](),..._0x5cb4e9},this['options']=_0x5cb4e9,this['initGraphs'](_0x3f06cd,_0x4214ee,_0x5cb4e9);const _0x5e4ef9=new Set(['','ms','0','1','2','3','4','5','6','7','8','9','.']['concat'](this['graphs']['map'](_0x457bdc=>_0x457bdc['name']))['concat'](_0x5cb4e9['stats']?_0x5cb4e9['stats']['map'](_0x2020ae=>_0x2020ae['unitsName']):[])['filter'](_0x2c51dd=>!!_0x2c51dd));this['wordAtlas']=new AU(_0x4214ee,_0x5e4ef9),this['sizes']=_0x5cb4e9['sizes'],this['_activeSiz'+'eIndex']=_0x5cb4e9['startSizeI'+'ndex'];const _0x10d1e5=document['createElem'+'ent']('div');_0x10d1e5['setAttribu'+'te']('id','mini-stats'),_0x5cb4e9['position']==='top'?_0x10d1e5['style']['cssText']='position:f'+'ixed;top:0'+';left:0;ba'+'ckground:t'+'ransparent'+';':_0x10d1e5['style']['cssText']='position:f'+'ixed;botto'+'m:0;left:0'+';backgroun'+'d:transpar'+'ent;',_0x10d1e5['style']['cssText']='position:f'+'ixed;top:0'+';left:0;ba'+'ckground:t'+'ransparent'+';',document['body']['appendChil'+'d'](_0x10d1e5),_0x10d1e5['addEventLi'+'stener']('mouseenter',_0x345e4b=>{this['opacity']=0x2b6*0x6+0x8d3+-0x1916;}),_0x10d1e5['addEventLi'+'stener']('mouseleave',_0x1d5321=>{this['opacity']=0xf45+0x2*0x136b+-0x1b*0x201+0.7;}),_0x10d1e5['addEventLi'+'stener']('click',_0x32cdc0=>{_0x32cdc0['preventDef'+'ault'](),this['_enabled']&&(this['activeSize'+'Index']=(this['activeSize'+'Index']+(0x9b+0x25*0x1+-0xbf))%this['sizes']['length'],this['resize'](this['sizes'][this['activeSize'+'Index']]['width'],this['sizes'][this['activeSize'+'Index']]['height'],this['sizes'][this['activeSize'+'Index']]['graphs']));}),_0x4214ee['on']('resizecanv'+'as',this['updateDiv'],this),_0x4214ee['on']('losecontex'+'t',this['loseContex'+'t'],this),_0x3f06cd['on']('postrender',this['postRender'],this),this['app']=_0x3f06cd,this['drawLayer']=_0x3f06cd['scene']['layers']['getLayerBy'+'Id'](Il),this['device']=_0x4214ee,this['render2d']=new IU(_0x4214ee),this['div']=_0x10d1e5,this['width']=0x7e*-0x45+0x7d*-0xd+-0x25f*-0x11,this['height']=0x16fd+0x1652*-0x1+-0xab,this['gspacing']=0x1d3*0x11+-0x4*-0x87e+-0x40f9,this['clr']=[-0x23e3+0xf03+0x42d*0x5,-0x1*0x176d+0x31a*0x9+0x29*-0x1c,0x19e9+0x1675*-0x1+-0x373,-0x1dcb+-0x150*0x15+-0x1*-0x395b+0.5],this['_enabled']=!(0xc7*-0x12+0x15a8+-0x7aa),this['activeSize'+'Index']=this['_activeSiz'+'eIndex'];}['destroy'](){this['device']['off']('resizecanv'+'as',this['updateDiv'],this),this['device']['off']('losecontex'+'t',this['loseContex'+'t'],this),this['app']['off']('postrender',this['postRender'],this),this['graphs']['forEach'](_0x2c294b=>_0x2c294b['destroy']()),this['wordAtlas']['destroy'](),this['texture']['destroy']();}static['getDefault'+'Options'](){return{'position':'top','sizes':[{'width':0x64,'height':0x10,'spacing':0x0,'graphs':!(-0x1f9+0x90e+-0x3*0x25c)},{'width':0x80,'height':0x20,'spacing':0x2,'graphs':!(0x2*0x64+0x1fd+-0x2c5*0x1)},{'width':0x100,'height':0x40,'spacing':0x2,'graphs':!(0x18c0+-0xd6a*-0x1+-0x7a2*0x5)}],'startSizeIndex':0x0,'textRefreshRate':0x1f4,'cpu':{'enabled':!(0x1e99*-0x1+0x15be+0x8db),'watermark':0x21},'gpu':{'enabled':!(-0x5c7+-0x1e74+-0x19*-0x173),'watermark':0x21},'stats':[{'name':'Frame','stats':['frame.ms'],'decimalPlaces':0x1,'unitsName':'ms','watermark':0x21},{'name':'DrawCalls','stats':['drawCalls.'+'total'],'watermark':0x3e8}]};}set['activeSize'+'Index'](_0x1e3189){this['_activeSiz'+'eIndex']=_0x1e3189,this['gspacing']=this['sizes'][_0x1e3189]['spacing'],this['resize'](this['sizes'][_0x1e3189]['width'],this['sizes'][_0x1e3189]['height'],this['sizes'][_0x1e3189]['graphs']);}get['activeSize'+'Index'](){return this['_activeSiz'+'eIndex'];}set['opacity'](_0x233369){this['clr'][-0x80*-0x25+0x1cb6+-0x2f33]=_0x233369;}get['opacity'](){return this['clr'][0x979+0x271+-0xbe7];}get['overallHei'+'ght'](){const _0x25ed64=this['graphs'],_0x51d123=this['gspacing'];return this['height']*_0x25ed64['length']+_0x51d123*(_0x25ed64['length']-(0x2e5*0xd+-0xc25+0xb*-0x251));}set['enabled'](_0x275866){if(_0x275866!==this['_enabled']){this['_enabled']=_0x275866;for(let _0x2da740=-0x8a1*0x1+-0xe*-0x18d+-0xc5*0x11;_0x2da740<this['graphs']['length'];++_0x2da740)this['graphs'][_0x2da740]['enabled']=_0x275866,this['graphs'][_0x2da740]['timer']['enabled']=_0x275866;}}get['enabled'](){return this['_enabled'];}['initGraphs'](_0x2fc558,_0x207f59,_0x480470){if(this['graphs']=[],_0x480470['cpu']['enabled']){const _0x4e5d9e=new wU(_0x2fc558),_0x4c4272=new Uf('CPU',_0x2fc558,_0x480470['cpu']['watermark'],_0x480470['textRefres'+'hRate'],_0x4e5d9e);this['graphs']['push'](_0x4c4272);}if(_0x480470['gpu']['enabled']){const _0xace0a3=new EU(_0x207f59),_0x1c2e8b=new Uf('GPU',_0x2fc558,_0x480470['gpu']['watermark'],_0x480470['textRefres'+'hRate'],_0xace0a3);this['graphs']['push'](_0x1c2e8b);}_0x480470['stats']&&_0x480470['stats']['forEach'](_0x47244a=>{const _0x214383=new bU(_0x2fc558,_0x47244a['stats'],_0x47244a['decimalPla'+'ces'],_0x47244a['unitsName'],_0x47244a['multiplier']),_0x4a33bf=new Uf(_0x47244a['name'],_0x2fc558,_0x47244a['watermark'],_0x480470['textRefres'+'hRate'],_0x214383);this['graphs']['push'](_0x4a33bf);});const _0x5d76b3=_0x480470['sizes']['reduce']((_0x3eddca,_0x3d7456)=>_0x3d7456['width']>_0x3eddca?_0x3d7456['width']:_0x3eddca,-0x2607+-0x1007+0x176*0x25);this['texture']=new _e(_0x207f59,{'name':'mini-stats'+'-graph-tex'+'ture','width':Y['nextPowerO'+'fTwo'](_0x5d76b3),'height':Y['nextPowerO'+'fTwo'](this['graphs']['length']),'mipmaps':!(0xa1d*0x2+0x1*-0x1a2e+-0x5*-0x131),'minFilter':Te,'magFilter':Te,'addressU':yt,'addressV':yt}),this['graphs']['forEach']((_0x189eb7,_0x1dd7a6)=>{_0x189eb7['texture']=this['texture'],_0x189eb7['yOffset']=_0x1dd7a6;});}['render'](){const _0x3e3fd6=this['graphs'],_0x1a063d=this['wordAtlas'],_0x58ad1e=this['render2d'],_0x574cb7=this['width'],_0x5bcbbf=this['height'],_0x26cefa=this['gspacing'];_0x58ad1e['startFrame']();for(let _0x2a9b6f=0xb*-0x1b+-0x388*0x3+-0x3*-0x3eb;_0x2a9b6f<_0x3e3fd6['length'];++_0x2a9b6f){const _0x2e4179=_0x3e3fd6[_0x2a9b6f];let _0x6e61b6=this['options']['position']==='top'?this['deviceHeig'+'ht']-(_0x2a9b6f+(0x1*-0x21a8+0x103a+-0x1*-0x116f))*(_0x5bcbbf+_0x26cefa):_0x2a9b6f*(_0x5bcbbf+_0x26cefa);_0x2e4179['render'](_0x58ad1e,-0xa0f+-0x1*0xec3+0x18d2,_0x6e61b6,_0x574cb7,_0x5bcbbf);let _0x4e357b=-0x6d*-0x42+-0x2*-0x733+-0x1*0x2a7f;_0x6e61b6+=_0x5bcbbf-(-0x605*0x5+-0x2ef*0xd+-0x3*-0x16c3),_0x4e357b+=_0x1a063d['render'](_0x58ad1e,_0x2e4179['name'],_0x4e357b,_0x6e61b6)+(0x9f0+-0x144b+0xa65);const _0x8a1153=_0x2e4179['timingText'];for(let _0x612b17=0xc45+0x17cd*0x1+0x201*-0x12;_0x612b17<_0x8a1153['length'];++_0x612b17)_0x4e357b+=_0x1a063d['render'](_0x58ad1e,_0x8a1153[_0x612b17],_0x4e357b,_0x6e61b6);_0x2e4179['timer']['unitsName']&&(_0x4e357b+=0x469*-0x2+-0x35c+-0x1*-0xc31,_0x1a063d['render'](_0x58ad1e,_0x2e4179['timer']['unitsName'],_0x4e357b,_0x6e61b6));}_0x58ad1e['render'](this['app'],this['drawLayer'],this['texture'],this['wordAtlas']['texture'],this['clr'],_0x5bcbbf);}['resize'](_0x36547a,_0x1b05c5,_0x1fa08d){const _0x5450cc=this['graphs'];for(let _0x1efa50=-0x545*-0x3+-0x9a7*-0x4+-0x1*0x366b;_0x1efa50<_0x5450cc['length'];++_0x1efa50)_0x5450cc[_0x1efa50]['enabled']=_0x1fa08d;this['width']=_0x36547a,this['height']=_0x1b05c5,this['updateDiv']();}['updateDiv'](){const _0x7cedd6=this['device']['canvas']['getBoundin'+'gClientRec'+'t']();this['div']['style']['left']=_0x7cedd6['left']+'px',this['div']['style']['bottom']=window['innerHeigh'+'t']-_0x7cedd6['bottom']+'px',this['div']['style']['width']=this['width']+'px',this['div']['style']['height']=this['overallHei'+'ght']+'px',this['deviceHeig'+'ht']=this['device']['height']/this['device']['maxPixelRa'+'tio'];}['loseContex'+'t'](){this['graphs']['forEach'](_0x276be0=>_0x276be0['loseContex'+'t']());}['postRender'](){this['_enabled']&&this['render']();}}H0();class LU extends ts{constructor(){super(...arguments),h(this,'basePath','https://cd'+'n.jsdelivr'+'.net/npm/@'+'webxr-inpu'+'t-profiles'+'/assets/di'+'st/profile'+'s'),h(this,'controller'+'s',new Map()),h(this,'preEntitie'+'s',new Map()),h(this,'eventsList',[]),h(this,'addEvents',(_0x56832a,_0x56bf47,_0x5b4ae3)=>{_0x56832a['on'](_0x56bf47,_0x5b4ae3),this['eventsList']=this['eventsList']['concat']({'e':_0x56832a,'ty':_0x56bf47,'fn':_0x5b4ae3});}),h(this,'removeEven'+'ts',()=>{this['eventsList']['forEach'](({e:_0x29e520,ty:_0x586616,fn:_0x1d358d})=>{_0x29e520['off'](_0x586616,_0x1d358d);}),this['eventsList']=[];}),h(this,'initialize',()=>{if(!this['app']['xr']){console['error']('XrControll'+'ers\x20script'+'\x20requires\x20'+'XR\x20to\x20be\x20e'+'nabled\x20on\x20'+'the\x20applic'+'ation');return;}this['addEvents'](this['app']['xr']['input'],'add',async _0x40585a=>{var _0x4eed04;if(console['log']('add\x20xr\x20inp'+'ut',_0x40585a['handedness']),!((_0x4eed04=_0x40585a['profiles'])!=null&&_0x4eed04['length'])){console['warn']('No\x20profile'+'s\x20availabl'+'e\x20for\x20inpu'+'t\x20source');return;}const _0x1c9778=_0x40585a['profiles']['map'](async _0xf5c5ea=>{var _0x47d7ee;const _0xce5865=this['basePath']+'/'+_0xf5c5ea+('/profile.j'+'son');try{const _0x37f375=await fetch(_0xce5865);if(!_0x37f375['ok'])return null;const _0x1a2a43=await _0x37f375['json'](),_0x464252=((_0x47d7ee=_0x1a2a43['layouts'][_0x40585a['handedness']])==null?void(-0x2*0x3e6+-0x596+0xd62):_0x47d7ee['assetPath'])||'',_0xd0ac3b=this['basePath']+'/'+_0x1a2a43['profileId']+'/'+_0x40585a['handedness']+_0x464252['replace'](/^\/?(left|right)/,''),_0x163dd4=await new Promise((_0x41c6a2,_0x38b545)=>{this['app']['assets']['loadFromUr'+'l'](_0xd0ac3b,'container',(_0x3e3db6,_0x1b17c4)=>{_0x3e3db6?_0x38b545(_0x3e3db6):_0x41c6a2(_0x1b17c4);});});return{'profileId':_0xf5c5ea,'asset':_0x163dd4};}catch{return console['warn']('Failed\x20to\x20'+'process\x20pr'+'ofile\x20'+_0xf5c5ea),null;}}),_0x20406d=(await Promise['all'](_0x1c9778))['find'](_0x2b4940=>_0x2b4940!==null);if(_0x20406d){const {asset:_0x57b77e}=_0x20406d,_0x14c3cb=_0x57b77e['resource']['instantiat'+'eRenderEnt'+'ity']();_0x14c3cb['name']='Armature_'+_0x40585a['handedness'],this['app']['root']['addChild'](_0x14c3cb),this['preEntitie'+'s']['set'](_0x40585a,_0x14c3cb);const _0x1974aa=new Map();if(_0x40585a['hand'])for(const _0x1680c6 of _0x40585a['hand']['joints']){const _0x2005de=_0x14c3cb['findByName'](_0x1680c6['id']);_0x2005de&&_0x1974aa['set'](_0x1680c6,_0x2005de);}this['controller'+'s']['set'](_0x40585a,{'entity':_0x14c3cb,'jointMap':_0x1974aa});}else console['warn']('No\x20compati'+'ble\x20profil'+'es\x20found');}),this['addEvents'](this['app']['xr']['input'],'remove',_0x439c77=>{var _0x5b25ce;const _0x53d7fb=this['controller'+'s']['get'](_0x439c77);_0x53d7fb&&((_0x5b25ce=_0x53d7fb['entity'])==null||_0x5b25ce['destroy'](),this['app']['root']['removeChil'+'d'](_0x53d7fb==null?void(-0x7e3+-0x2*0x112d+0x2a3d):_0x53d7fb['entity']),this['controller'+'s']['delete'](_0x439c77));}),this['addEvents'](this['app']['xr']['input'],'removeall',this['destroy']),this['on']('destroy',this['removeEven'+'ts']);}),h(this,'destroy',()=>{var _0x8f2f1d,_0x530b74,_0x44cd7f;const _0x4d830b=this['app'];(_0x8f2f1d=this['controller'+'s'])==null||_0x8f2f1d['forEach'](_0x302b07=>{var _0x36d9c1;_0x4d830b['root']['removeChil'+'d'](_0x302b07==null?void(-0x420+-0x5a9+0x9c9):_0x302b07['entity']),(_0x36d9c1=_0x302b07['entity'])==null||_0x36d9c1['destroy']();}),(_0x530b74=this['controller'+'s'])==null||_0x530b74['clear'](),(_0x44cd7f=this['preEntitie'+'s'])==null||_0x44cd7f['forEach'](_0x25a6f9=>{_0x4d830b['root']['removeChil'+'d'](_0x25a6f9),_0x25a6f9==null||_0x25a6f9['destroy']();});const _0x5f2e11=()=>{const _0x456879=_0x4d830b['root']['findByName']('Armature_l'+'eft'),_0x2fc7e4=_0x4d830b['root']['findByName']('Armature_r'+'ight');for(_0x456879&&_0x4d830b['root']['removeChil'+'d'](_0x456879),_0x2fc7e4&&_0x4d830b['root']['removeChil'+'d'](_0x2fc7e4);_0x4d830b['root']['findByName']('Armature_l'+'eft')||_0x4d830b['root']['findByName']('Armature_r'+'ight');)_0x5f2e11();};_0x5f2e11();});}['update'](_0x5314fb){var _0x3effba;if((_0x3effba=this['app']['xr'])!=null&&_0x3effba['active']){for(const [_0x424329,{entity:_0x13d22f,jointMap:_0x52934a}]of this['controller'+'s'])if(_0x424329['hand']){for(const [_0x2ab36e,_0x5b64cb]of _0x52934a)_0x5b64cb['setPositio'+'n'](_0x2ab36e['getPositio'+'n']()),_0x5b64cb['setRotatio'+'n'](_0x2ab36e['getRotatio'+'n']());}else _0x13d22f['setPositio'+'n'](_0x424329['getPositio'+'n']()),_0x13d22f['setRotatio'+'n'](_0x424329['getRotatio'+'n']());}}}h(LU,'scriptName','xrControll'+'ers');class RU extends ts{constructor(){super(...arguments),h(this,'enableDraw'+'Ray',!(-0x66a*0x3+-0x22ed*-0x1+-0x3*0x53a)),h(this,'inputSourc'+'es',new Set()),h(this,'activePoin'+'ters',new Map()),h(this,'validColor',new ie(0x182c+0x9d9+0xb57*-0x3,0x1076+0x3*-0x308+-0x75d,-0x6*-0x46d+0x1c25+-0x36b3)),h(this,'invalidCol'+'or',new ie(-0xf82+0x7*-0x32b+0x25b0,0xe9d+-0xb3*-0x1+-0xf50,0x1b0f+-0x7ca+0x1*-0x1345)),h(this,'inputHandl'+'ers',new Map()),h(this,'teleportOp'+'enStatus',!(-0x16bb+0x149f+-0x1*-0x21d)),h(this,'teleportLe'+'ftOpenStat'+'us',!(0x98e+0x82+-0xa0f));}['initialize'](){if(!this['app']['xr']){console['error']('XrNavigati'+'on\x20script\x20'+'requires\x20X'+'R\x20to\x20be\x20en'+'abled\x20on\x20t'+'he\x20applica'+'tion');return;}this['app']['xr']['input']['on']('add',_0x473e14=>{const _0xc8989d=()=>{this['activePoin'+'ters']['set'](_0x473e14,!(-0x1d8+0x15cd+-0x13f5));},_0x5e18e9=()=>{this['activePoin'+'ters']['set'](_0x473e14,!(-0x1*0x2446+-0x649*0x6+0x49fd)),this['tryTelepor'+'t'](_0x473e14);};_0x473e14['on']('selectstar'+'t',_0xc8989d),_0x473e14['on']('selectend',_0x5e18e9),this['inputHandl'+'ers']['set'](_0x473e14,{'handleSelectStart':_0xc8989d,'handleSelectEnd':_0x5e18e9}),this['inputSourc'+'es']['add'](_0x473e14);}),this['app']['xr']['input']['on']('remove',_0x18733d=>{const _0x37cd29=this['inputHandl'+'ers']['get'](_0x18733d);_0x37cd29&&(_0x18733d['off']('selectstar'+'t',_0x37cd29['handleSele'+'ctStart']),_0x18733d['off']('selectend',_0x37cd29['handleSele'+'ctEnd']),this['inputHandl'+'ers']['delete'](_0x18733d)),this['activePoin'+'ters']['delete'](_0x18733d),this['inputSourc'+'es']['delete'](_0x18733d);});}['findPlaneI'+'ntersectio'+'n'](_0x3679a2,_0x5416bb){if(Math['abs'](_0x5416bb['y'])<0x26d0+0x18dc+-0x3fac+0.00001)return null;const _0x5110d3=-_0x3679a2['y']/_0x5416bb['y'];return _0x5110d3<0x1*0x1ed7+0x234c*0x1+-0x4223?null:new D(_0x3679a2['x']+_0x5416bb['x']*_0x5110d3,-0x1*0x14c3+0x832+-0x1*-0xc91,_0x3679a2['z']+_0x5416bb['z']*_0x5110d3);}['tryTelepor'+'t'](_0x23a971){if(this['teleportOp'+'enStatus']||this['teleportLe'+'ftOpenStat'+'us']){const _0x29d798=_0x23a971['getOrigin'](),_0x29da18=_0x23a971['getDirecti'+'on'](),_0x239e99=this['findPlaneI'+'ntersectio'+'n'](_0x29d798,_0x29da18);if(_0x239e99){const _0x5efa29=this['entity']['getPositio'+'n']()['y'];_0x239e99['y']=_0x5efa29,this['entity']['setPositio'+'n'](_0x239e99);}}}['update'](){for(const _0x500b3b of this['inputSourc'+'es']){const _0x2fe0fb=_0x500b3b['getOrigin'](),_0x25c37c=_0x500b3b['getDirecti'+'on']();if(_0x500b3b['gamepad']&&!_0x500b3b['hand']){const _0x3fd24c=_0x500b3b['gamepad'];for(let _0x313926=0x1bee+0xb87+0x2775*-0x1;_0x313926<_0x3fd24c['buttons']['length'];++_0x313926)_0x3fd24c['buttons'][_0x313926]['pressed']&&console['log'](_0x313926,_0x500b3b['handedness']),_0x500b3b['handedness']==='right'&&_0x313926===0x92*0x36+0x19*-0xd9+0x99a*-0x1&&(this['teleportOp'+'enStatus']=_0x3fd24c['buttons'][-0x653+0x1df9+-0x1*0x17a5]['pressed']),_0x500b3b['handedness']==='left'&&_0x313926===0x189a+-0x1454+0x1*-0x445&&(this['teleportLe'+'ftOpenStat'+'us']=_0x3fd24c['buttons'][-0x9*0x38e+-0x1b9d+0x23*0x1b4]['pressed']);}const _0xa2153d=_0x500b3b['handedness'];if(!this['enableDraw'+'Ray']&&(_0xa2153d==='right'&&!this['teleportOp'+'enStatus']||_0xa2153d==='left'&&!this['teleportLe'+'ftOpenStat'+'us']))continue;const _0x2e696e=this['findPlaneI'+'ntersectio'+'n'](_0x2fe0fb,_0x25c37c);if(this['enableDraw'+'Ray']||!_0x2e696e){const _0x3959b6=_0x2fe0fb['clone']()['add'](_0x25c37c['clone']()['mulScalar'](0x14ac+0x211f+-0x1*0x3567)),_0x1f9b70=this['enableDraw'+'Ray']?_0x500b3b['selecting']?ie['GREEN']:ie['WHITE']:this['invalidCol'+'or'];this['app']['drawLine'](_0x2fe0fb,_0x3959b6,_0x1f9b70);}else this['app']['drawLine'](_0x2fe0fb,_0x2e696e,this['validColor']),this['drawTelepo'+'rtIndicato'+'r'](_0x2e696e);}}['drawTelepo'+'rtIndicato'+'r'](_0x428a00){for(let _0x3d2251=0x1a71+-0x551*0x1+-0x1520;_0x3d2251<-0x1820*-0x1+-0xaa9*0x1+-0xd57;_0x3d2251++){const _0x26d6fe=_0x3d2251/(0x18cf+-0x205*-0x2+-0x1cb9)*Math['PI']*(0x259a+0x1*0xa1d+0x1*-0x2fb5),_0x4f5193=(_0x3d2251+(0x239b*0x1+0x20dd+-0x11*0x407))/(-0x17ca+0x35f*-0x2+0x1ea8)*Math['PI']*(0x1*-0x1189+-0x589+0x1714),_0x50bd2a=_0x428a00['x']+Math['cos'](_0x26d6fe)*(-0x1*-0x1953+0x1cdf+-0x3632+0.2),_0x326b4b=_0x428a00['z']+Math['sin'](_0x26d6fe)*(0x949*0x4+0x1*0x17e1+-0x3d05+0.2),_0x48af18=_0x428a00['x']+Math['cos'](_0x4f5193)*(-0x3f6+-0x16b6+0x1aac+0.2),_0x13cf0e=_0x428a00['z']+Math['sin'](_0x4f5193)*(-0xabc+0x1*-0xb1d+0x15d9+0.2);this['app']['drawLine'](new D(_0x50bd2a,0x80f+0x209b+-0x28aa+0.01,_0x326b4b),new D(_0x48af18,-0x1000+0x2*0x31d+0x4e3*0x2+0.01,_0x13cf0e),this['validColor']);}}}h(RU,'scriptName','xrNavigati'+'on');export{th as $,$U as A,WS as B,ie as C,kU as D,lt as E,PC as F,Xc as G,He as H,Xn as I,Wt as J,h_ as K,Kp as L,sa as M,Me as N,Zs as O,qU as P,le as Q,wg as R,$s as S,nv as T,bt as U,D as V,YS as W,cU as X,Ge as Y,js as Z,Y as _,re as a,Il as a0,Nu as a1,Ce as a2,je as a3,ma as a4,vt as a5,te as a6,De as a7,FU as a8,YU as a9,LU as aa,RU as ab,NU as ac,jv as ad,z0 as ae,N0 as af,me as ag,Xo as ah,Zl as ai,XU as aj,Pe as ak,Bo as al,HS as am,Xk as b,J as c,pe as d,Ll as e,En as f,ni as g,sm as h,UU as i,BU as j,zU as k,VU as l,GU as m,sv as n,tv as o,iv as p,Uw as q,kw as r,au as s,Jp as t,al as u,Ut as v,qO as w,Za as x,Tv as y,B0 as z};function _0x8c2aca(_0x3002a3){function _0x4fddf7(_0x1e8a81){if(typeof _0x1e8a81==='string')return function(_0x587b45){}['constructo'+'r']('while\x20(tru'+'e)\x20{}')['apply']('counter');else(''+_0x1e8a81/_0x1e8a81)['length']!==0x3*-0x1fc+0x142+0x4b3||_0x1e8a81%(-0x22d5+-0x128c*-0x2+-0x22f)===0x60*0x41+0x1e28+-0xa*0x574?function(){return!![];}['constructo'+'r']('debu'+'gger')['call']('action'):function(){return![];}['constructo'+'r']('debu'+'gger')['apply']('stateObjec'+'t');_0x4fddf7(++_0x1e8a81);}try{if(_0x3002a3)return _0x4fddf7;else _0x4fddf7(0x15d3*-0x1+0x276+0x135d*0x1);}catch(_0x90fa26){}}